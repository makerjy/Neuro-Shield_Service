function vY(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var db=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var FS={exports:{}},l0={},US={exports:{}},jr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z5;function NY(){if(Z5)return jr;Z5=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.iterator;function g(X){return X===null||typeof X!="object"?null:(X=p&&X[p]||X["@@iterator"],typeof X=="function"?X:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,N={};function v(X,F,te){this.props=X,this.context=F,this.refs=N,this.updater=te||x}v.prototype.isReactComponent={},v.prototype.setState=function(X,F){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,F,"setState")},v.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function S(){}S.prototype=v.prototype;function E(X,F,te){this.props=X,this.context=F,this.refs=N,this.updater=te||x}var C=E.prototype=new S;C.constructor=E,y(C,v.prototype),C.isPureReactComponent=!0;var _=Array.isArray,A=Object.prototype.hasOwnProperty,T={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function I(X,F,te){var ne,se={},Ne=null,fe=null;if(F!=null)for(ne in F.ref!==void 0&&(fe=F.ref),F.key!==void 0&&(Ne=""+F.key),F)A.call(F,ne)&&!R.hasOwnProperty(ne)&&(se[ne]=F[ne]);var we=arguments.length-2;if(we===1)se.children=te;else if(1<we){for(var ve=Array(we),Oe=0;Oe<we;Oe++)ve[Oe]=arguments[Oe+2];se.children=ve}if(X&&X.defaultProps)for(ne in we=X.defaultProps,we)se[ne]===void 0&&(se[ne]=we[ne]);return{$$typeof:e,type:X,key:Ne,ref:fe,props:se,_owner:T.current}}function k(X,F){return{$$typeof:e,type:X.type,key:F,ref:X.ref,props:X.props,_owner:X._owner}}function w(X){return typeof X=="object"&&X!==null&&X.$$typeof===e}function L(X){var F={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(te){return F[te]})}var H=/\/+/g;function B(X,F){return typeof X=="object"&&X!==null&&X.key!=null?L(""+X.key):F.toString(36)}function M(X,F,te,ne,se){var Ne=typeof X;(Ne==="undefined"||Ne==="boolean")&&(X=null);var fe=!1;if(X===null)fe=!0;else switch(Ne){case"string":case"number":fe=!0;break;case"object":switch(X.$$typeof){case e:case t:fe=!0}}if(fe)return fe=X,se=se(fe),X=ne===""?"."+B(fe,0):ne,_(se)?(te="",X!=null&&(te=X.replace(H,"$&/")+"/"),M(se,F,te,"",function(Oe){return Oe})):se!=null&&(w(se)&&(se=k(se,te+(!se.key||fe&&fe.key===se.key?"":(""+se.key).replace(H,"$&/")+"/")+X)),F.push(se)),1;if(fe=0,ne=ne===""?".":ne+":",_(X))for(var we=0;we<X.length;we++){Ne=X[we];var ve=ne+B(Ne,we);fe+=M(Ne,F,te,ve,se)}else if(ve=g(X),typeof ve=="function")for(X=ve.call(X),we=0;!(Ne=X.next()).done;)Ne=Ne.value,ve=ne+B(Ne,we++),fe+=M(Ne,F,te,ve,se);else if(Ne==="object")throw F=String(X),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.");return fe}function G(X,F,te){if(X==null)return X;var ne=[],se=0;return M(X,ne,"","",function(Ne){return F.call(te,Ne,se++)}),ne}function $(X){if(X._status===-1){var F=X._result;F=F(),F.then(function(te){(X._status===0||X._status===-1)&&(X._status=1,X._result=te)},function(te){(X._status===0||X._status===-1)&&(X._status=2,X._result=te)}),X._status===-1&&(X._status=0,X._result=F)}if(X._status===1)return X._result.default;throw X._result}var z={current:null},U={transition:null},Z={ReactCurrentDispatcher:z,ReactCurrentBatchConfig:U,ReactCurrentOwner:T};function re(){throw Error("act(...) is not supported in production builds of React.")}return jr.Children={map:G,forEach:function(X,F,te){G(X,function(){F.apply(this,arguments)},te)},count:function(X){var F=0;return G(X,function(){F++}),F},toArray:function(X){return G(X,function(F){return F})||[]},only:function(X){if(!w(X))throw Error("React.Children.only expected to receive a single React element child.");return X}},jr.Component=v,jr.Fragment=r,jr.Profiler=s,jr.PureComponent=E,jr.StrictMode=n,jr.Suspense=d,jr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z,jr.act=re,jr.cloneElement=function(X,F,te){if(X==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+X+".");var ne=y({},X.props),se=X.key,Ne=X.ref,fe=X._owner;if(F!=null){if(F.ref!==void 0&&(Ne=F.ref,fe=T.current),F.key!==void 0&&(se=""+F.key),X.type&&X.type.defaultProps)var we=X.type.defaultProps;for(ve in F)A.call(F,ve)&&!R.hasOwnProperty(ve)&&(ne[ve]=F[ve]===void 0&&we!==void 0?we[ve]:F[ve])}var ve=arguments.length-2;if(ve===1)ne.children=te;else if(1<ve){we=Array(ve);for(var Oe=0;Oe<ve;Oe++)we[Oe]=arguments[Oe+2];ne.children=we}return{$$typeof:e,type:X.type,key:se,ref:Ne,props:ne,_owner:fe}},jr.createContext=function(X){return X={$$typeof:o,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},X.Provider={$$typeof:i,_context:X},X.Consumer=X},jr.createElement=I,jr.createFactory=function(X){var F=I.bind(null,X);return F.type=X,F},jr.createRef=function(){return{current:null}},jr.forwardRef=function(X){return{$$typeof:l,render:X}},jr.isValidElement=w,jr.lazy=function(X){return{$$typeof:m,_payload:{_status:-1,_result:X},_init:$}},jr.memo=function(X,F){return{$$typeof:u,type:X,compare:F===void 0?null:F}},jr.startTransition=function(X){var F=U.transition;U.transition={};try{X()}finally{U.transition=F}},jr.unstable_act=re,jr.useCallback=function(X,F){return z.current.useCallback(X,F)},jr.useContext=function(X){return z.current.useContext(X)},jr.useDebugValue=function(){},jr.useDeferredValue=function(X){return z.current.useDeferredValue(X)},jr.useEffect=function(X,F){return z.current.useEffect(X,F)},jr.useId=function(){return z.current.useId()},jr.useImperativeHandle=function(X,F,te){return z.current.useImperativeHandle(X,F,te)},jr.useInsertionEffect=function(X,F){return z.current.useInsertionEffect(X,F)},jr.useLayoutEffect=function(X,F){return z.current.useLayoutEffect(X,F)},jr.useMemo=function(X,F){return z.current.useMemo(X,F)},jr.useReducer=function(X,F,te){return z.current.useReducer(X,F,te)},jr.useRef=function(X){return z.current.useRef(X)},jr.useState=function(X){return z.current.useState(X)},jr.useSyncExternalStore=function(X,F,te){return z.current.useSyncExternalStore(X,F,te)},jr.useTransition=function(){return z.current.useTransition()},jr.version="18.3.1",jr}var J5;function S1(){return J5||(J5=1,US.exports=NY()),US.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eP;function SY(){if(eP)return l0;eP=1;var e=S1(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(l,d,u){var m,p={},g=null,x=null;u!==void 0&&(g=""+u),d.key!==void 0&&(g=""+d.key),d.ref!==void 0&&(x=d.ref);for(m in d)n.call(d,m)&&!i.hasOwnProperty(m)&&(p[m]=d[m]);if(l&&l.defaultProps)for(m in d=l.defaultProps,d)p[m]===void 0&&(p[m]=d[m]);return{$$typeof:t,type:l,key:g,ref:x,props:p,_owner:s.current}}return l0.Fragment=r,l0.jsx=o,l0.jsxs=o,l0}var tP;function EY(){return tP||(tP=1,FS.exports=SY()),FS.exports}var a=EY(),sh=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},jY={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},wY=class{#e=jY;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},lf=new wY;function AY(e){setTimeout(e,0)}var vf=typeof window>"u"||"Deno"in globalThis;function Is(){}function _Y(e,t){return typeof e=="function"?e(t):e}function tC(e){return typeof e=="number"&&e>=0&&e!==1/0}function eU(e,t){return Math.max(e+(t||0)-Date.now(),0)}function eu(e,t){return typeof e=="function"?e(t):e}function mo(e,t){return typeof e=="function"?e(t):e}function rP(e,t){const{type:r="all",exact:n,fetchStatus:s,predicate:i,queryKey:o,stale:l}=e;if(o){if(n){if(t.queryHash!==VO(o,t.options))return!1}else if(!dg(t.queryKey,o))return!1}if(r!=="all"){const d=t.isActive();if(r==="active"&&!d||r==="inactive"&&d)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||i&&!i(t))}function nP(e,t){const{exact:r,status:n,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(Nf(t.options.mutationKey)!==Nf(i))return!1}else if(!dg(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||s&&!s(t))}function VO(e,t){return(t?.queryKeyHashFn||Nf)(e)}function Nf(e){return JSON.stringify(e,(t,r)=>rC(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function dg(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>dg(e[r],t[r])):!1}var CY=Object.prototype.hasOwnProperty;function tU(e,t,r=0){if(e===t)return e;if(r>500)return t;const n=aP(e)&&aP(t);if(!n&&!(rC(e)&&rC(t)))return t;const i=(n?e:Object.keys(e)).length,o=n?t:Object.keys(t),l=o.length,d=n?new Array(l):{};let u=0;for(let m=0;m<l;m++){const p=n?m:o[m],g=e[p],x=t[p];if(g===x){d[p]=g,(n?m<i:CY.call(e,p))&&u++;continue}if(g===null||x===null||typeof g!="object"||typeof x!="object"){d[p]=x;continue}const y=tU(g,x,r+1);d[p]=y,y===g&&u++}return i===l&&u===i?e:d}function ky(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function aP(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function rC(e){if(!sP(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!sP(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function sP(e){return Object.prototype.toString.call(e)==="[object Object]"}function TY(e){return new Promise(t=>{lf.setTimeout(t,e)})}function nC(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?tU(e,t):t}function Vp(e){return e}function OY(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function RY(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var YO=Symbol();function rU(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===YO?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function XO(e,t){return typeof e=="function"?e(...t):!!e}function kY(e,t,r){let n=!1,s;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(s??=t(),n||(n=!0,s.aborted?r():s.addEventListener("abort",r,{once:!0})),s)}),e}var PY=class extends sh{#e;#t;#r;constructor(){super(),this.#r=e=>{if(!vf&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},QO=new PY;function aC(){let e,t;const r=new Promise((s,i)=>{e=s,t=i});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),e(s)},r.reject=s=>{n({status:"rejected",reason:s}),t(s)},r}var DY=AY;function IY(){let e=[],t=0,r=l=>{l()},n=l=>{l()},s=DY;const i=l=>{t?e.push(l):s(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&s(()=>{n(()=>{l.forEach(d=>{r(d)})})})};return{batch:l=>{let d;t++;try{d=l()}finally{t--,t||o()}return d},batchCalls:l=>(...d)=>{i(()=>{l(...d)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{s=l}}}var Ra=IY(),MY=class extends sh{#e=!0;#t;#r;constructor(){super(),this.#r=e=>{if(!vf&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(r=>{r(e)}))}isOnline(){return this.#e}},Py=new MY;function LY(e){return Math.min(1e3*2**e,3e4)}function nU(e){return(e??"online")==="online"?Py.isOnline():!0}var sC=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function aU(e){let t=!1,r=0,n;const s=aC(),i=()=>s.status!=="pending",o=N=>{if(!i()){const v=new sC(N);g(v),e.onCancel?.(v)}},l=()=>{t=!0},d=()=>{t=!1},u=()=>QO.isFocused()&&(e.networkMode==="always"||Py.isOnline())&&e.canRun(),m=()=>nU(e.networkMode)&&e.canRun(),p=N=>{i()||(n?.(),s.resolve(N))},g=N=>{i()||(n?.(),s.reject(N))},x=()=>new Promise(N=>{n=v=>{(i()||u())&&N(v)},e.onPause?.()}).then(()=>{n=void 0,i()||e.onContinue?.()}),y=()=>{if(i())return;let N;const v=r===0?e.initialPromise:void 0;try{N=v??e.fn()}catch(S){N=Promise.reject(S)}Promise.resolve(N).then(p).catch(S=>{if(i())return;const E=e.retry??(vf?0:3),C=e.retryDelay??LY,_=typeof C=="function"?C(r,S):C,A=E===!0||typeof E=="number"&&r<E||typeof E=="function"&&E(r,S);if(t||!A){g(S);return}r++,e.onFail?.(r,S),TY(_).then(()=>u()?void 0:x()).then(()=>{t?g(S):y()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(n?.(),s),cancelRetry:l,continueRetry:d,canStart:m,start:()=>(m()?y():x().then(y),s)}}var sU=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),tC(this.gcTime)&&(this.#e=lf.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(vf?1/0:300*1e3))}clearGcTimeout(){this.#e&&(lf.clearTimeout(this.#e),this.#e=void 0)}},$Y=class extends sU{#e;#t;#r;#a;#n;#i;#o;constructor(e){super(),this.#o=!1,this.#i=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#a=e.client,this.#r=this.#a.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=oP(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(e){if(this.options={...this.#i,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=oP(this.options);t.data!==void 0&&(this.setState(iP(t.data,t.dataUpdatedAt)),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,t){const r=nC(this.state.data,e,this.options);return this.#s({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#s({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#n?.promise;return this.#n?.cancel(e),t?t.then(Is).catch(Is):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>mo(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===YO||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>eu(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!eU(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#n&&(this.#o?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#n?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(e&&this.setOptions(e),!this.options.queryFn){const l=this.observers.find(d=>d.options.queryFn);l&&this.setOptions(l.options)}const r=new AbortController,n=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(this.#o=!0,r.signal)})},s=()=>{const l=rU(this.options,t),u=(()=>{const m={client:this.#a,queryKey:this.queryKey,meta:this.meta};return n(m),m})();return this.#o=!1,this.options.persister?this.options.persister(l,u,this):l(u)},o=(()=>{const l={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#a,state:this.state,fetchFn:s};return n(l),l})();this.options.behavior?.onFetch(o,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#s({type:"fetch",meta:o.fetchOptions?.meta}),this.#n=aU({initialPromise:t?.initialPromise,fn:o.fetchFn,onCancel:l=>{l instanceof sC&&l.revert&&this.setState({...this.#t,fetchStatus:"idle"}),r.abort()},onFail:(l,d)=>{this.#s({type:"failed",failureCount:l,error:d})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0});try{const l=await this.#n.start();if(l===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(l),this.#r.config.onSuccess?.(l,this),this.#r.config.onSettled?.(l,this.state.error,this),l}catch(l){if(l instanceof sC){if(l.silent)return this.#n.promise;if(l.revert){if(this.state.data===void 0)throw l;return this.state.data}}throw this.#s({type:"error",error:l}),this.#r.config.onError?.(l,this),this.#r.config.onSettled?.(this.state.data,l,this),l}finally{this.scheduleGc()}}#s(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...iU(r.data,this.options),fetchMeta:e.meta??null};case"success":const n={...r,...iP(e.data,e.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?n:void 0,n;case"error":const s=e.error;return{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),Ra.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function iU(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:nU(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function iP(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function oP(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var FY=class extends sh{constructor(e,t){super(),this.options=t,this.#e=e,this.#s=null,this.#o=aC(),this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#r=void 0;#a=void 0;#n;#i;#o;#s;#h;#f;#p;#c;#d;#l;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),lP(this.#t,this.options)?this.#u():this.updateResult(),this.#y())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return iC(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return iC(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#v(),this.#N(),this.#t.removeObserver(this)}setOptions(e){const t=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof mo(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#S(),this.#t.setOptions(this.options),t._defaulted&&!ky(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const n=this.hasListeners();n&&cP(this.#t,r,this.options,t)&&this.#u(),this.updateResult(),n&&(this.#t!==r||mo(this.options.enabled,this.#t)!==mo(t.enabled,this.#t)||eu(this.options.staleTime,this.#t)!==eu(t.staleTime,this.#t))&&this.#g();const s=this.#x();n&&(this.#t!==r||mo(this.options.enabled,this.#t)!==mo(t.enabled,this.#t)||s!==this.#l)&&this.#b(s)}getOptimisticResult(e){const t=this.#e.getQueryCache().build(this.#e,e),r=this.createResult(t,e);return BY(this,r)&&(this.#a=r,this.#i=this.options,this.#n=this.#t.state),r}getCurrentResult(){return this.#a}trackResult(e,t){return new Proxy(e,{get:(r,n)=>(this.trackProp(n),t?.(n),n==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,n))})}trackProp(e){this.#m.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#e.defaultQueryOptions(e),r=this.#e.getQueryCache().build(this.#e,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#u({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#a))}#u(e){this.#S();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(Is)),t}#g(){this.#v();const e=eu(this.options.staleTime,this.#t);if(vf||this.#a.isStale||!tC(e))return;const r=eU(this.#a.dataUpdatedAt,e)+1;this.#c=lf.setTimeout(()=>{this.#a.isStale||this.updateResult()},r)}#x(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#b(e){this.#N(),this.#l=e,!(vf||mo(this.options.enabled,this.#t)===!1||!tC(this.#l)||this.#l===0)&&(this.#d=lf.setInterval(()=>{(this.options.refetchIntervalInBackground||QO.isFocused())&&this.#u()},this.#l))}#y(){this.#g(),this.#b(this.#x())}#v(){this.#c&&(lf.clearTimeout(this.#c),this.#c=void 0)}#N(){this.#d&&(lf.clearInterval(this.#d),this.#d=void 0)}createResult(e,t){const r=this.#t,n=this.options,s=this.#a,i=this.#n,o=this.#i,d=e!==r?e.state:this.#r,{state:u}=e;let m={...u},p=!1,g;if(t._optimisticResults){const I=this.hasListeners(),k=!I&&lP(e,t),w=I&&cP(e,r,t,n);(k||w)&&(m={...m,...iU(u.data,e.options)}),t._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:x,errorUpdatedAt:y,status:N}=m;g=m.data;let v=!1;if(t.placeholderData!==void 0&&g===void 0&&N==="pending"){let I;s?.isPlaceholderData&&t.placeholderData===o?.placeholderData?(I=s.data,v=!0):I=typeof t.placeholderData=="function"?t.placeholderData(this.#p?.state.data,this.#p):t.placeholderData,I!==void 0&&(N="success",g=nC(s?.data,I,t),p=!0)}if(t.select&&g!==void 0&&!v)if(s&&g===i?.data&&t.select===this.#h)g=this.#f;else try{this.#h=t.select,g=t.select(g),g=nC(s?.data,g,t),this.#f=g,this.#s=null}catch(I){this.#s=I}this.#s&&(x=this.#s,g=this.#f,y=Date.now(),N="error");const S=m.fetchStatus==="fetching",E=N==="pending",C=N==="error",_=E&&S,A=g!==void 0,R={status:N,fetchStatus:m.fetchStatus,isPending:E,isSuccess:N==="success",isError:C,isInitialLoading:_,isLoading:_,data:g,dataUpdatedAt:m.dataUpdatedAt,error:x,errorUpdatedAt:y,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>d.dataUpdateCount||m.errorUpdateCount>d.errorUpdateCount,isFetching:S,isRefetching:S&&!E,isLoadingError:C&&!A,isPaused:m.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:C&&A,isStale:ZO(e,t),refetch:this.refetch,promise:this.#o,isEnabled:mo(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const I=R.data!==void 0,k=R.status==="error"&&!I,w=B=>{k?B.reject(R.error):I&&B.resolve(R.data)},L=()=>{const B=this.#o=R.promise=aC();w(B)},H=this.#o;switch(H.status){case"pending":e.queryHash===r.queryHash&&w(H);break;case"fulfilled":(k||R.data!==H.value)&&L();break;case"rejected":(!k||R.error!==H.reason)&&L();break}}return R}updateResult(){const e=this.#a,t=this.createResult(this.#t,this.options);if(this.#n=this.#t.state,this.#i=this.options,this.#n.data!==void 0&&(this.#p=this.#t),ky(t,e))return;this.#a=t;const r=()=>{if(!e)return!0;const{notifyOnChangeProps:n}=this.options,s=typeof n=="function"?n():n;if(s==="all"||!s&&!this.#m.size)return!0;const i=new Set(s??this.#m);return this.options.throwOnError&&i.add("error"),Object.keys(this.#a).some(o=>{const l=o;return this.#a[l]!==e[l]&&i.has(l)})};this.#E({listeners:r()})}#S(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const t=this.#t;this.#t=e,this.#r=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#y()}#E(e){Ra.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#a)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function UY(e,t){return mo(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function lP(e,t){return UY(e,t)||e.state.data!==void 0&&iC(e,t,t.refetchOnMount)}function iC(e,t,r){if(mo(t.enabled,e)!==!1&&eu(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&ZO(e,t)}return!1}function cP(e,t,r,n){return(e!==t||mo(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&ZO(e,r)}function ZO(e,t){return mo(t.enabled,e)!==!1&&e.isStaleByTime(eu(t.staleTime,e))}function BY(e,t){return!ky(e.getCurrentResult(),t)}function dP(e){return{onFetch:(t,r)=>{const n=t.options,s=t.fetchOptions?.meta?.fetchMore?.direction,i=t.state.data?.pages||[],o=t.state.data?.pageParams||[];let l={pages:[],pageParams:[]},d=0;const u=async()=>{let m=!1;const p=y=>{kY(y,()=>t.signal,()=>m=!0)},g=rU(t.options,t.fetchOptions),x=async(y,N,v)=>{if(m)return Promise.reject();if(N==null&&y.pages.length)return Promise.resolve(y);const E=(()=>{const T={client:t.client,queryKey:t.queryKey,pageParam:N,direction:v?"backward":"forward",meta:t.options.meta};return p(T),T})(),C=await g(E),{maxPages:_}=t.options,A=v?RY:OY;return{pages:A(y.pages,C,_),pageParams:A(y.pageParams,N,_)}};if(s&&i.length){const y=s==="backward",N=y?GY:uP,v={pages:i,pageParams:o},S=N(n,v);l=await x(v,S,y)}else{const y=e??i.length;do{const N=d===0?o[0]??n.initialPageParam:uP(n,l);if(d>0&&N==null)break;l=await x(l,N),d++}while(d<y)}return l};t.options.persister?t.fetchFn=()=>t.options.persister?.(u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=u}}}function uP(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function GY(e,{pages:t,pageParams:r}){return t.length>0?e.getPreviousPageParam?.(t[0],t,r[0],r):void 0}var HY=class extends sU{#e;#t;#r;#a;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#r=e.mutationCache,this.#t=[],this.state=e.state||oU(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#r.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#r.remove(this))}continue(){return this.#a?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#n({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#a=aU({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(i,o)=>{this.#n({type:"failed",failureCount:i,error:o})},onPause:()=>{this.#n({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#r.canRun(this)});const n=this.state.status==="pending",s=!this.#a.canStart();try{if(n)t();else{this.#n({type:"pending",variables:e,isPaused:s}),this.#r.config.onMutate&&await this.#r.config.onMutate(e,this,r);const o=await this.options.onMutate?.(e,r);o!==this.state.context&&this.#n({type:"pending",context:o,variables:e,isPaused:s})}const i=await this.#a.start();return await this.#r.config.onSuccess?.(i,e,this.state.context,this,r),await this.options.onSuccess?.(i,e,this.state.context,r),await this.#r.config.onSettled?.(i,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(i,null,e,this.state.context,r),this.#n({type:"success",data:i}),i}catch(i){try{await this.#r.config.onError?.(i,e,this.state.context,this,r)}catch(o){Promise.reject(o)}try{await this.options.onError?.(i,e,this.state.context,r)}catch(o){Promise.reject(o)}try{await this.#r.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this,r)}catch(o){Promise.reject(o)}try{await this.options.onSettled?.(void 0,i,e,this.state.context,r)}catch(o){Promise.reject(o)}throw this.#n({type:"error",error:i}),i}finally{this.#r.runNext(this)}}#n(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Ra.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(e)}),this.#r.notify({mutation:this,type:"updated",action:e})})}};function oU(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var KY=class extends sh{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(e,t,r){const n=new HY({client:e,mutationCache:this,mutationId:++this.#r,options:e.defaultMutationOptions(t),state:r});return this.add(n),n}add(e){this.#e.add(e);const t=ub(e);if(typeof t=="string"){const r=this.#t.get(t);r?r.push(e):this.#t.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=ub(e);if(typeof t=="string"){const r=this.#t.get(t);if(r)if(r.length>1){const n=r.indexOf(e);n!==-1&&r.splice(n,1)}else r[0]===e&&this.#t.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=ub(e);if(typeof t=="string"){const n=this.#t.get(t)?.find(s=>s.state.status==="pending");return!n||n===e}else return!0}runNext(e){const t=ub(e);return typeof t=="string"?this.#t.get(t)?.find(n=>n!==e&&n.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Ra.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(r=>nP(t,r))}findAll(e={}){return this.getAll().filter(t=>nP(e,t))}notify(e){Ra.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Ra.batch(()=>Promise.all(e.map(t=>t.continue().catch(Is))))}};function ub(e){return e.options.scope?.id}var zY=class extends sh{#e;#t=void 0;#r;#a;constructor(t,r){super(),this.#e=t,this.setOptions(r),this.bindMethods(),this.#n()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const r=this.options;this.options=this.#e.defaultMutationOptions(t),ky(this.options,r)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),r?.mutationKey&&this.options.mutationKey&&Nf(r.mutationKey)!==Nf(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(t){this.#n(),this.#i(t)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#n(),this.#i()}mutate(t,r){return this.#a=r,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(t)}#n(){const t=this.#r?.state??oU();this.#t={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#i(t){Ra.batch(()=>{if(this.#a&&this.hasListeners()){const r=this.#t.variables,n=this.#t.context,s={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(t?.type==="success"){try{this.#a.onSuccess?.(t.data,r,n,s)}catch(i){Promise.reject(i)}try{this.#a.onSettled?.(t.data,null,r,n,s)}catch(i){Promise.reject(i)}}else if(t?.type==="error"){try{this.#a.onError?.(t.error,r,n,s)}catch(i){Promise.reject(i)}try{this.#a.onSettled?.(void 0,t.error,r,n,s)}catch(i){Promise.reject(i)}}}this.listeners.forEach(r=>{r(this.#t)})})}},qY=class extends sh{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,r){const n=t.queryKey,s=t.queryHash??VO(n,t);let i=this.get(s);return i||(i=new $Y({client:e,queryKey:n,queryHash:s,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(n)}),this.add(i)),i}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Ra.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>rP(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>rP(e,r)):t}notify(e){Ra.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Ra.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Ra.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},WY=class{#e;#t;#r;#a;#n;#i;#o;#s;constructor(e={}){this.#e=e.queryCache||new qY,this.#t=e.mutationCache||new KY,this.#r=e.defaultOptions||{},this.#a=new Map,this.#n=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#o=QO.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#s=Py.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#o?.(),this.#o=void 0,this.#s?.(),this.#s=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=this.#e.build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(eu(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),i=this.#e.get(n.queryHash)?.state.data,o=_Y(t,i);if(o!==void 0)return this.#e.build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return Ra.batch(()=>this.#e.findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;Ra.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=this.#e;return Ra.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=Ra.batch(()=>this.#e.findAll(e).map(s=>s.cancel(r)));return Promise.all(n).then(Is).catch(Is)}invalidateQueries(e,t={}){return Ra.batch(()=>(this.#e.findAll(e).forEach(r=>{r.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=Ra.batch(()=>this.#e.findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,r);return r.throwOnError||(i=i.catch(Is)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Is)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=this.#e.build(this,t);return r.isStaleByTime(eu(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Is).catch(Is)}fetchInfiniteQuery(e){return e.behavior=dP(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Is).catch(Is)}ensureInfiniteQueryData(e){return e.behavior=dP(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Py.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,t){this.#a.set(Nf(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#a.values()],r={};return t.forEach(n=>{dg(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){this.#n.set(Nf(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#n.values()],r={};return t.forEach(n=>{dg(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=VO(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===YO&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},h=S1();const Y=Zr(h),JO=vY({__proto__:null,default:Y},[h]);var lU=h.createContext(void 0),E1=e=>{const t=h.useContext(lU);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},VY=({client:e,children:t})=>(h.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),a.jsx(lU.Provider,{value:e,children:t})),cU=h.createContext(!1),YY=()=>h.useContext(cU);cU.Provider;function XY(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var QY=h.createContext(XY()),ZY=()=>h.useContext(QY),JY=(e,t,r)=>{const n=r?.state.error&&typeof e.throwOnError=="function"?XO(e.throwOnError,[r.state.error,r]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||n)&&(t.isReset()||(e.retryOnMount=!1))},eX=e=>{h.useEffect(()=>{e.clearReset()},[e])},tX=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(s&&e.data===void 0||XO(r,[e.error,n])),rX=e=>{if(e.suspense){const r=s=>s==="static"?s:Math.max(s??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...s)=>r(n(...s)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},nX=(e,t)=>e.isLoading&&e.isFetching&&!t,aX=(e,t)=>e?.suspense&&t.isPending,fP=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function sX(e,t,r){const n=YY(),s=ZY(),i=E1(),o=i.defaultQueryOptions(e);i.getDefaultOptions().queries?._experimental_beforeQuery?.(o);const l=i.getQueryCache().get(o.queryHash);o._optimisticResults=n?"isRestoring":"optimistic",rX(o),JY(o,s,l),eX(s);const d=!i.getQueryCache().get(o.queryHash),[u]=h.useState(()=>new t(i,o)),m=u.getOptimisticResult(o),p=!n&&e.subscribed!==!1;if(h.useSyncExternalStore(h.useCallback(g=>{const x=p?u.subscribe(Ra.batchCalls(g)):Is;return u.updateResult(),x},[u,p]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),h.useEffect(()=>{u.setOptions(o)},[o,u]),aX(o,m))throw fP(o,u,s);if(tX({result:m,errorResetBoundary:s,throwOnError:o.throwOnError,query:l,suspense:o.suspense}))throw m.error;return i.getDefaultOptions().queries?._experimental_afterQuery?.(o,m),o.experimental_prefetchInRender&&!vf&&nX(m,n)&&(d?fP(o,u,s):l?.promise)?.catch(Is).finally(()=>{u.updateResult()}),o.notifyOnChangeProps?m:u.trackResult(m)}function Ml(e,t){return sX(e,FY)}function iX(e,t){const r=E1(),[n]=h.useState(()=>new zY(r,e));h.useEffect(()=>{n.setOptions(e)},[n,e]);const s=h.useSyncExternalStore(h.useCallback(o=>n.subscribe(Ra.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=h.useCallback((o,l)=>{n.mutate(o,l).catch(Is)},[n]);if(s.error&&XO(n.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}var fb={},BS={exports:{}},ai={},GS={exports:{}},HS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pP;function oX(){return pP||(pP=1,(function(e){function t(U,Z){var re=U.length;U.push(Z);e:for(;0<re;){var X=re-1>>>1,F=U[X];if(0<s(F,Z))U[X]=Z,U[re]=F,re=X;else break e}}function r(U){return U.length===0?null:U[0]}function n(U){if(U.length===0)return null;var Z=U[0],re=U.pop();if(re!==Z){U[0]=re;e:for(var X=0,F=U.length,te=F>>>1;X<te;){var ne=2*(X+1)-1,se=U[ne],Ne=ne+1,fe=U[Ne];if(0>s(se,re))Ne<F&&0>s(fe,se)?(U[X]=fe,U[Ne]=re,X=Ne):(U[X]=se,U[ne]=re,X=ne);else if(Ne<F&&0>s(fe,re))U[X]=fe,U[Ne]=re,X=Ne;else break e}}return Z}function s(U,Z){var re=U.sortIndex-Z.sortIndex;return re!==0?re:U.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var d=[],u=[],m=1,p=null,g=3,x=!1,y=!1,N=!1,v=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(U){for(var Z=r(u);Z!==null;){if(Z.callback===null)n(u);else if(Z.startTime<=U)n(u),Z.sortIndex=Z.expirationTime,t(d,Z);else break;Z=r(u)}}function _(U){if(N=!1,C(U),!y)if(r(d)!==null)y=!0,$(A);else{var Z=r(u);Z!==null&&z(_,Z.startTime-U)}}function A(U,Z){y=!1,N&&(N=!1,S(I),I=-1),x=!0;var re=g;try{for(C(Z),p=r(d);p!==null&&(!(p.expirationTime>Z)||U&&!L());){var X=p.callback;if(typeof X=="function"){p.callback=null,g=p.priorityLevel;var F=X(p.expirationTime<=Z);Z=e.unstable_now(),typeof F=="function"?p.callback=F:p===r(d)&&n(d),C(Z)}else n(d);p=r(d)}if(p!==null)var te=!0;else{var ne=r(u);ne!==null&&z(_,ne.startTime-Z),te=!1}return te}finally{p=null,g=re,x=!1}}var T=!1,R=null,I=-1,k=5,w=-1;function L(){return!(e.unstable_now()-w<k)}function H(){if(R!==null){var U=e.unstable_now();w=U;var Z=!0;try{Z=R(!0,U)}finally{Z?B():(T=!1,R=null)}}else T=!1}var B;if(typeof E=="function")B=function(){E(H)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,G=M.port2;M.port1.onmessage=H,B=function(){G.postMessage(null)}}else B=function(){v(H,0)};function $(U){R=U,T||(T=!0,B())}function z(U,Z){I=v(function(){U(e.unstable_now())},Z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_continueExecution=function(){y||x||(y=!0,$(A))},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(U){switch(g){case 1:case 2:case 3:var Z=3;break;default:Z=g}var re=g;g=Z;try{return U()}finally{g=re}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(U,Z){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var re=g;g=U;try{return Z()}finally{g=re}},e.unstable_scheduleCallback=function(U,Z,re){var X=e.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?X+re:X):re=X,U){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=re+F,U={id:m++,callback:Z,priorityLevel:U,startTime:re,expirationTime:F,sortIndex:-1},re>X?(U.sortIndex=re,t(u,U),r(d)===null&&U===r(u)&&(N?(S(I),I=-1):N=!0,z(_,re-X))):(U.sortIndex=F,t(d,U),y||x||(y=!0,$(A))),U},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(U){var Z=g;return function(){var re=g;g=Z;try{return U.apply(this,arguments)}finally{g=re}}}})(HS)),HS}var mP;function lX(){return mP||(mP=1,GS.exports=oX()),GS.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hP;function cX(){if(hP)return ai;hP=1;var e=S1(),t=lX();function r(c){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+c,b=1;b<arguments.length;b++)f+="&args[]="+encodeURIComponent(arguments[b]);return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function i(c,f){o(c,f),o(c+"Capture",f)}function o(c,f){for(s[c]=f,c=0;c<f.length;c++)n.add(f[c])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},p={};function g(c){return d.call(p,c)?!0:d.call(m,c)?!1:u.test(c)?p[c]=!0:(m[c]=!0,!1)}function x(c,f,b,j){if(b!==null&&b.type===0)return!1;switch(typeof f){case"function":case"symbol":return!0;case"boolean":return j?!1:b!==null?!b.acceptsBooleans:(c=c.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-");default:return!1}}function y(c,f,b,j){if(f===null||typeof f>"u"||x(c,f,b,j))return!0;if(j)return!1;if(b!==null)switch(b.type){case 3:return!f;case 4:return f===!1;case 5:return isNaN(f);case 6:return isNaN(f)||1>f}return!1}function N(c,f,b,j,O,D,W){this.acceptsBooleans=f===2||f===3||f===4,this.attributeName=j,this.attributeNamespace=O,this.mustUseProperty=b,this.propertyName=c,this.type=f,this.sanitizeURL=D,this.removeEmptyString=W}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){v[c]=new N(c,0,!1,c,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var f=c[0];v[f]=new N(f,1,!1,c[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){v[c]=new N(c,2,!1,c.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){v[c]=new N(c,2,!1,c,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){v[c]=new N(c,3,!1,c.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(c){v[c]=new N(c,3,!0,c,null,!1,!1)}),["capture","download"].forEach(function(c){v[c]=new N(c,4,!1,c,null,!1,!1)}),["cols","rows","size","span"].forEach(function(c){v[c]=new N(c,6,!1,c,null,!1,!1)}),["rowSpan","start"].forEach(function(c){v[c]=new N(c,5,!1,c.toLowerCase(),null,!1,!1)});var S=/[\-:]([a-z])/g;function E(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var f=c.replace(S,E);v[f]=new N(f,1,!1,c,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var f=c.replace(S,E);v[f]=new N(f,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var f=c.replace(S,E);v[f]=new N(f,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(c){v[c]=new N(c,1,!1,c.toLowerCase(),null,!1,!1)}),v.xlinkHref=new N("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(c){v[c]=new N(c,1,!1,c.toLowerCase(),null,!0,!0)});function C(c,f,b,j){var O=v.hasOwnProperty(f)?v[f]:null;(O!==null?O.type!==0:j||!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(y(f,b,O,j)&&(b=null),j||O===null?g(f)&&(b===null?c.removeAttribute(f):c.setAttribute(f,""+b)):O.mustUseProperty?c[O.propertyName]=b===null?O.type===3?!1:"":b:(f=O.attributeName,j=O.attributeNamespace,b===null?c.removeAttribute(f):(O=O.type,b=O===3||O===4&&b===!0?"":""+b,j?c.setAttributeNS(j,f,b):c.setAttribute(f,b))))}var _=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,A=Symbol.for("react.element"),T=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),L=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),z=Symbol.for("react.offscreen"),U=Symbol.iterator;function Z(c){return c===null||typeof c!="object"?null:(c=U&&c[U]||c["@@iterator"],typeof c=="function"?c:null)}var re=Object.assign,X;function F(c){if(X===void 0)try{throw Error()}catch(b){var f=b.stack.trim().match(/\n( *(at )?)/);X=f&&f[1]||""}return`
`+X+c}var te=!1;function ne(c,f){if(!c||te)return"";te=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(Ce){var j=Ce}Reflect.construct(c,[],f)}else{try{f.call()}catch(Ce){j=Ce}c.call(f.prototype)}else{try{throw Error()}catch(Ce){j=Ce}c()}}catch(Ce){if(Ce&&j&&typeof Ce.stack=="string"){for(var O=Ce.stack.split(`
`),D=j.stack.split(`
`),W=O.length-1,ie=D.length-1;1<=W&&0<=ie&&O[W]!==D[ie];)ie--;for(;1<=W&&0<=ie;W--,ie--)if(O[W]!==D[ie]){if(W!==1||ie!==1)do if(W--,ie--,0>ie||O[W]!==D[ie]){var me=`
`+O[W].replace(" at new "," at ");return c.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",c.displayName)),me}while(1<=W&&0<=ie);break}}}finally{te=!1,Error.prepareStackTrace=b}return(c=c?c.displayName||c.name:"")?F(c):""}function se(c){switch(c.tag){case 5:return F(c.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return c=ne(c.type,!1),c;case 11:return c=ne(c.type.render,!1),c;case 1:return c=ne(c.type,!0),c;default:return""}}function Ne(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case R:return"Fragment";case T:return"Portal";case k:return"Profiler";case I:return"StrictMode";case B:return"Suspense";case M:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case L:return(c.displayName||"Context")+".Consumer";case w:return(c._context.displayName||"Context")+".Provider";case H:var f=c.render;return c=c.displayName,c||(c=f.displayName||f.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case G:return f=c.displayName||null,f!==null?f:Ne(c.type)||"Memo";case $:f=c._payload,c=c._init;try{return Ne(c(f))}catch{}}return null}function fe(c){var f=c.type;switch(c.tag){case 24:return"Cache";case 9:return(f.displayName||"Context")+".Consumer";case 10:return(f._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=f.render,c=c.displayName||c.name||"",f.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return f;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ne(f);case 8:return f===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f}return null}function we(c){switch(typeof c){case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function ve(c){var f=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function Oe(c){var f=ve(c)?"checked":"value",b=Object.getOwnPropertyDescriptor(c.constructor.prototype,f),j=""+c[f];if(!c.hasOwnProperty(f)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var O=b.get,D=b.set;return Object.defineProperty(c,f,{configurable:!0,get:function(){return O.call(this)},set:function(W){j=""+W,D.call(this,W)}}),Object.defineProperty(c,f,{enumerable:b.enumerable}),{getValue:function(){return j},setValue:function(W){j=""+W},stopTracking:function(){c._valueTracker=null,delete c[f]}}}}function Fe(c){c._valueTracker||(c._valueTracker=Oe(c))}function oe(c){if(!c)return!1;var f=c._valueTracker;if(!f)return!0;var b=f.getValue(),j="";return c&&(j=ve(c)?c.checked?"true":"false":c.value),c=j,c!==b?(f.setValue(c),!0):!1}function le(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}function ge(c,f){var b=f.checked;return re({},f,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:b??c._wrapperState.initialChecked})}function _e(c,f){var b=f.defaultValue==null?"":f.defaultValue,j=f.checked!=null?f.checked:f.defaultChecked;b=we(f.value!=null?f.value:b),c._wrapperState={initialChecked:j,initialValue:b,controlled:f.type==="checkbox"||f.type==="radio"?f.checked!=null:f.value!=null}}function ee(c,f){f=f.checked,f!=null&&C(c,"checked",f,!1)}function q(c,f){ee(c,f);var b=we(f.value),j=f.type;if(b!=null)j==="number"?(b===0&&c.value===""||c.value!=b)&&(c.value=""+b):c.value!==""+b&&(c.value=""+b);else if(j==="submit"||j==="reset"){c.removeAttribute("value");return}f.hasOwnProperty("value")?pe(c,f.type,b):f.hasOwnProperty("defaultValue")&&pe(c,f.type,we(f.defaultValue)),f.checked==null&&f.defaultChecked!=null&&(c.defaultChecked=!!f.defaultChecked)}function ye(c,f,b){if(f.hasOwnProperty("value")||f.hasOwnProperty("defaultValue")){var j=f.type;if(!(j!=="submit"&&j!=="reset"||f.value!==void 0&&f.value!==null))return;f=""+c._wrapperState.initialValue,b||f===c.value||(c.value=f),c.defaultValue=f}b=c.name,b!==""&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,b!==""&&(c.name=b)}function pe(c,f,b){(f!=="number"||le(c.ownerDocument)!==c)&&(b==null?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+b&&(c.defaultValue=""+b))}var he=Array.isArray;function rt(c,f,b,j){if(c=c.options,f){f={};for(var O=0;O<b.length;O++)f["$"+b[O]]=!0;for(b=0;b<c.length;b++)O=f.hasOwnProperty("$"+c[b].value),c[b].selected!==O&&(c[b].selected=O),O&&j&&(c[b].defaultSelected=!0)}else{for(b=""+we(b),f=null,O=0;O<c.length;O++){if(c[O].value===b){c[O].selected=!0,j&&(c[O].defaultSelected=!0);return}f!==null||c[O].disabled||(f=c[O])}f!==null&&(f.selected=!0)}}function Me(c,f){if(f.dangerouslySetInnerHTML!=null)throw Error(r(91));return re({},f,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function dt(c,f){var b=f.value;if(b==null){if(b=f.children,f=f.defaultValue,b!=null){if(f!=null)throw Error(r(92));if(he(b)){if(1<b.length)throw Error(r(93));b=b[0]}f=b}f==null&&(f=""),b=f}c._wrapperState={initialValue:we(b)}}function St(c,f){var b=we(f.value),j=we(f.defaultValue);b!=null&&(b=""+b,b!==c.value&&(c.value=b),f.defaultValue==null&&c.defaultValue!==b&&(c.defaultValue=b)),j!=null&&(c.defaultValue=""+j)}function He(c){var f=c.textContent;f===c._wrapperState.initialValue&&f!==""&&f!==null&&(c.value=f)}function Ye(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mt(c,f){return c==null||c==="http://www.w3.org/1999/xhtml"?Ye(f):c==="http://www.w3.org/2000/svg"&&f==="foreignObject"?"http://www.w3.org/1999/xhtml":c}var Xt,hr=(function(c){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(f,b,j,O){MSApp.execUnsafeLocalFunction(function(){return c(f,b,j,O)})}:c})(function(c,f){if(c.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in c)c.innerHTML=f;else{for(Xt=Xt||document.createElement("div"),Xt.innerHTML="<svg>"+f.valueOf().toString()+"</svg>",f=Xt.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;f.firstChild;)c.appendChild(f.firstChild)}});function Gt(c,f){if(f){var b=c.firstChild;if(b&&b===c.lastChild&&b.nodeType===3){b.nodeValue=f;return}}c.textContent=f}var sr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xr=["Webkit","ms","Moz","O"];Object.keys(sr).forEach(function(c){xr.forEach(function(f){f=f+c.charAt(0).toUpperCase()+c.substring(1),sr[f]=sr[c]})});function mr(c,f,b){return f==null||typeof f=="boolean"||f===""?"":b||typeof f!="number"||f===0||sr.hasOwnProperty(c)&&sr[c]?(""+f).trim():f+"px"}function br(c,f){c=c.style;for(var b in f)if(f.hasOwnProperty(b)){var j=b.indexOf("--")===0,O=mr(b,f[b],j);b==="float"&&(b="cssFloat"),j?c.setProperty(b,O):c[b]=O}}var kr=re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cn(c,f){if(f){if(kr[c]&&(f.children!=null||f.dangerouslySetInnerHTML!=null))throw Error(r(137,c));if(f.dangerouslySetInnerHTML!=null){if(f.children!=null)throw Error(r(60));if(typeof f.dangerouslySetInnerHTML!="object"||!("__html"in f.dangerouslySetInnerHTML))throw Error(r(61))}if(f.style!=null&&typeof f.style!="object")throw Error(r(62))}}function wt(c,f){if(c.indexOf("-")===-1)return typeof f.is=="string";switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ge=null;function Qt(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var Pr=null,_r=null,rr=null;function je(c){if(c=ml(c)){if(typeof Pr!="function")throw Error(r(280));var f=c.stateNode;f&&(f=op(f),Pr(c.stateNode,c.type,f))}}function Ve(c){_r?rr?rr.push(c):rr=[c]:_r=c}function yt(){if(_r){var c=_r,f=rr;if(rr=_r=null,je(c),f)for(c=0;c<f.length;c++)je(f[c])}}function ir(c,f){return c(f)}function Cr(){}var nn=!1;function wr(c,f,b){if(nn)return c(f,b);nn=!0;try{return ir(c,f,b)}finally{nn=!1,(_r!==null||rr!==null)&&(Cr(),yt())}}function ze(c,f){var b=c.stateNode;if(b===null)return null;var j=op(b);if(j===null)return null;b=j[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(j=!j.disabled)||(c=c.type,j=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!j;break e;default:c=!1}if(c)return null;if(b&&typeof b!="function")throw Error(r(231,f,typeof b));return b}var dn=!1;if(l)try{var ur={};Object.defineProperty(ur,"passive",{get:function(){dn=!0}}),window.addEventListener("test",ur,ur),window.removeEventListener("test",ur,ur)}catch{dn=!1}function Ue(c,f,b,j,O,D,W,ie,me){var Ce=Array.prototype.slice.call(arguments,3);try{f.apply(b,Ce)}catch(et){this.onError(et)}}var Se=!1,nt=null,Re=!1,Et=null,nr={onError:function(c){Se=!0,nt=c}};function Lt(c,f,b,j,O,D,W,ie,me){Se=!1,nt=null,Ue.apply(nr,arguments)}function Vr(c,f,b,j,O,D,W,ie,me){if(Lt.apply(this,arguments),Se){if(Se){var Ce=nt;Se=!1,nt=null}else throw Error(r(198));Re||(Re=!0,Et=Ce)}}function Cn(c){var f=c,b=c;if(c.alternate)for(;f.return;)f=f.return;else{c=f;do f=c,(f.flags&4098)!==0&&(b=f.return),c=f.return;while(c)}return f.tag===3?b:null}function xt(c){if(c.tag===13){var f=c.memoizedState;if(f===null&&(c=c.alternate,c!==null&&(f=c.memoizedState)),f!==null)return f.dehydrated}return null}function ta(c){if(Cn(c)!==c)throw Error(r(188))}function ra(c){var f=c.alternate;if(!f){if(f=Cn(c),f===null)throw Error(r(188));return f!==c?null:c}for(var b=c,j=f;;){var O=b.return;if(O===null)break;var D=O.alternate;if(D===null){if(j=O.return,j!==null){b=j;continue}break}if(O.child===D.child){for(D=O.child;D;){if(D===b)return ta(O),c;if(D===j)return ta(O),f;D=D.sibling}throw Error(r(188))}if(b.return!==j.return)b=O,j=D;else{for(var W=!1,ie=O.child;ie;){if(ie===b){W=!0,b=O,j=D;break}if(ie===j){W=!0,j=O,b=D;break}ie=ie.sibling}if(!W){for(ie=D.child;ie;){if(ie===b){W=!0,b=D,j=O;break}if(ie===j){W=!0,j=D,b=O;break}ie=ie.sibling}if(!W)throw Error(r(189))}}if(b.alternate!==j)throw Error(r(190))}if(b.tag!==3)throw Error(r(188));return b.stateNode.current===b?c:f}function fi(c){return c=ra(c),c!==null?Mn(c):null}function Mn(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var f=Mn(c);if(f!==null)return f;c=c.sibling}return null}var Ir=t.unstable_scheduleCallback,ua=t.unstable_cancelCallback,Ht=t.unstable_shouldYield,Dr=t.unstable_requestPaint,Tr=t.unstable_now,_o=t.unstable_getCurrentPriorityLevel,mn=t.unstable_ImmediatePriority,hn=t.unstable_UserBlockingPriority,na=t.unstable_NormalPriority,ll=t.unstable_LowPriority,an=t.unstable_IdlePriority,pi=null,un=null;function ic(c){if(un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(pi,c,void 0,(c.current.flags&128)===128)}catch{}}var Fr=Math.clz32?Math.clz32:Bn,Es=Math.log,Va=Math.LN2;function Bn(c){return c>>>=0,c===0?32:31-(Es(c)/Va|0)|0}var fa=64,Ks=4194304;function js(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function aa(c,f){var b=c.pendingLanes;if(b===0)return 0;var j=0,O=c.suspendedLanes,D=c.pingedLanes,W=b&268435455;if(W!==0){var ie=W&~O;ie!==0?j=js(ie):(D&=W,D!==0&&(j=js(D)))}else W=b&~O,W!==0?j=js(W):D!==0&&(j=js(D));if(j===0)return 0;if(f!==0&&f!==j&&(f&O)===0&&(O=j&-j,D=f&-f,O>=D||O===16&&(D&4194240)!==0))return f;if((j&4)!==0&&(j|=b&16),f=c.entangledLanes,f!==0)for(c=c.entanglements,f&=j;0<f;)b=31-Fr(f),O=1<<b,j|=c[b],f&=~O;return j}function ba(c,f){switch(c){case 1:case 2:case 4:return f+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zs(c,f){for(var b=c.suspendedLanes,j=c.pingedLanes,O=c.expirationTimes,D=c.pendingLanes;0<D;){var W=31-Fr(D),ie=1<<W,me=O[W];me===-1?((ie&b)===0||(ie&j)!==0)&&(O[W]=ba(ie,f)):me<=f&&(c.expiredLanes|=ie),D&=~ie}}function ws(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function mi(){var c=fa;return fa<<=1,(fa&4194240)===0&&(fa=64),c}function Tn(c){for(var f=[],b=0;31>b;b++)f.push(c);return f}function Ma(c,f,b){c.pendingLanes|=f,f!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,f=31-Fr(f),c[f]=b}function Bi(c,f){var b=c.pendingLanes&~f;c.pendingLanes=f,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=f,c.mutableReadLanes&=f,c.entangledLanes&=f,f=c.entanglements;var j=c.eventTimes;for(c=c.expirationTimes;0<b;){var O=31-Fr(b),D=1<<O;f[O]=0,j[O]=-1,c[O]=-1,b&=~D}}function Gi(c,f){var b=c.entangledLanes|=f;for(c=c.entanglements;b;){var j=31-Fr(b),O=1<<j;O&f|c[j]&f&&(c[j]|=f),b&=~O}}var Ut=0;function Co(c){return c&=-c,1<c?4<c?(c&268435455)!==0?16:536870912:4:1}var tt,On,V,de,De,ft=!1,ot=[],pt=null,Kt=null,qt=null,tr=new Map,Nr=new Map,gr=[],qs="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sr(c,f){switch(c){case"focusin":case"focusout":pt=null;break;case"dragenter":case"dragleave":Kt=null;break;case"mouseover":case"mouseout":qt=null;break;case"pointerover":case"pointerout":tr.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nr.delete(f.pointerId)}}function La(c,f,b,j,O,D){return c===null||c.nativeEvent!==D?(c={blockedOn:f,domEventName:b,eventSystemFlags:j,nativeEvent:D,targetContainers:[O]},f!==null&&(f=ml(f),f!==null&&On(f)),c):(c.eventSystemFlags|=j,f=c.targetContainers,O!==null&&f.indexOf(O)===-1&&f.push(O),c)}function As(c,f,b,j,O){switch(f){case"focusin":return pt=La(pt,c,f,b,j,O),!0;case"dragenter":return Kt=La(Kt,c,f,b,j,O),!0;case"mouseover":return qt=La(qt,c,f,b,j,O),!0;case"pointerover":var D=O.pointerId;return tr.set(D,La(tr.get(D)||null,c,f,b,j,O)),!0;case"gotpointercapture":return D=O.pointerId,Nr.set(D,La(Nr.get(D)||null,c,f,b,j,O)),!0}return!1}function Gf(c){var f=bc(c.target);if(f!==null){var b=Cn(f);if(b!==null){if(f=b.tag,f===13){if(f=xt(b),f!==null){c.blockedOn=f,De(c.priority,function(){V(b)});return}}else if(f===3&&b.stateNode.current.memoizedState.isDehydrated){c.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}c.blockedOn=null}function ud(c){if(c.blockedOn!==null)return!1;for(var f=c.targetContainers;0<f.length;){var b=Ki(c.domEventName,c.eventSystemFlags,f[0],c.nativeEvent);if(b===null){b=c.nativeEvent;var j=new b.constructor(b.type,b);Ge=j,b.target.dispatchEvent(j),Ge=null}else return f=ml(b),f!==null&&On(f),c.blockedOn=b,!1;f.shift()}return!0}function vu(c,f,b){ud(c)&&b.delete(f)}function _s(){ft=!1,pt!==null&&ud(pt)&&(pt=null),Kt!==null&&ud(Kt)&&(Kt=null),qt!==null&&ud(qt)&&(qt=null),tr.forEach(vu),Nr.forEach(vu)}function Hi(c,f){c.blockedOn===f&&(c.blockedOn=null,ft||(ft=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,_s)))}function sa(c){function f(O){return Hi(O,c)}if(0<ot.length){Hi(ot[0],c);for(var b=1;b<ot.length;b++){var j=ot[b];j.blockedOn===c&&(j.blockedOn=null)}}for(pt!==null&&Hi(pt,c),Kt!==null&&Hi(Kt,c),qt!==null&&Hi(qt,c),tr.forEach(f),Nr.forEach(f),b=0;b<gr.length;b++)j=gr[b],j.blockedOn===c&&(j.blockedOn=null);for(;0<gr.length&&(b=gr[0],b.blockedOn===null);)Gf(b),b.blockedOn===null&&gr.shift()}var hi=_.ReactCurrentBatchConfig,Mr=!0;function gi(c,f,b,j){var O=Ut,D=hi.transition;hi.transition=null;try{Ut=1,xi(c,f,b,j)}finally{Ut=O,hi.transition=D}}function Nu(c,f,b,j){var O=Ut,D=hi.transition;hi.transition=null;try{Ut=4,xi(c,f,b,j)}finally{Ut=O,hi.transition=D}}function xi(c,f,b,j){if(Mr){var O=Ki(c,f,b,j);if(O===null)Ou(c,f,j,Rn,b),Sr(c,j);else if(As(O,c,f,b,j))j.stopPropagation();else if(Sr(c,j),f&4&&-1<qs.indexOf(c)){for(;O!==null;){var D=ml(O);if(D!==null&&tt(D),D=Ki(c,f,b,j),D===null&&Ou(c,f,j,Rn,b),D===O)break;O=D}O!==null&&j.stopPropagation()}else Ou(c,f,j,null,b)}}var Rn=null;function Ki(c,f,b,j){if(Rn=null,c=Qt(j),c=bc(c),c!==null)if(f=Cn(c),f===null)c=null;else if(b=f.tag,b===13){if(c=xt(f),c!==null)return c;c=null}else if(b===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;c=null}else f!==c&&(c=null);return Rn=c,null}function Ws(c){switch(c){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_o()){case mn:return 1;case hn:return 4;case na:case ll:return 16;case an:return 536870912;default:return 16}default:return 16}}var Ya=null,J=null,xe=null;function Le(){if(xe)return xe;var c,f=J,b=f.length,j,O="value"in Ya?Ya.value:Ya.textContent,D=O.length;for(c=0;c<b&&f[c]===O[c];c++);var W=b-c;for(j=1;j<=W&&f[b-j]===O[D-j];j++);return xe=O.slice(c,1<j?1-j:void 0)}function Ze(c){var f=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&f===13&&(c=13)):c=f,c===10&&(c=13),32<=c||c===13?c:0}function lt(){return!0}function Je(){return!1}function ht(c){function f(b,j,O,D,W){this._reactName=b,this._targetInst=O,this.type=j,this.nativeEvent=D,this.target=W,this.currentTarget=null;for(var ie in c)c.hasOwnProperty(ie)&&(b=c[ie],this[ie]=b?b(D):D[ie]);return this.isDefaultPrevented=(D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1)?lt:Je,this.isPropagationStopped=Je,this}return re(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=lt)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=lt)},persist:function(){},isPersistent:lt}),f}var bt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fr=ht(bt),Ln=re({},bt,{view:0,detail:0}),is=ht(Ln),gn,Vs,zi,bi=re({},Ln,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cs,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==zi&&(zi&&c.type==="mousemove"?(gn=c.screenX-zi.screenX,Vs=c.screenY-zi.screenY):Vs=gn=0,zi=c),gn)},movementY:function(c){return"movementY"in c?c.movementY:Vs}}),qi=ht(bi),Dt=re({},bi,{dataTransfer:0}),Gn=ht(Dt),Gr=re({},Ln,{relatedTarget:0}),oc=ht(Gr),fd=re({},bt,{animationName:0,elapsedTime:0,pseudoElement:0}),Xa=ht(fd),lc=re({},bt,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),yi=ht(lc),os=re({},bt,{data:0}),Kn=ht(os),vi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jx(c){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(c):(c=Hf[c])?!!f[c]:!1}function Cs(){return jx}var Kf=re({},Ln,{key:function(c){if(c.key){var f=vi[c.key]||c.key;if(f!=="Unidentified")return f}return c.type==="keypress"?(c=Ze(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?cc[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cs,charCode:function(c){return c.type==="keypress"?Ze(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?Ze(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),Oh=ht(Kf),Hr=re({},bi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dc=ht(Hr),uc=re({},Ln,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cs}),zf=ht(uc),Rh=re({},bt,{propertyName:0,elapsedTime:0,pseudoElement:0}),kh=ht(Rh),cl=re({},bi,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),Ph=ht(cl),Su=[9,13,27,32],qf=l&&"CompositionEvent"in window,Eu=null;l&&"documentMode"in document&&(Eu=document.documentMode);var wx=l&&"TextEvent"in window&&!Eu,Wi=l&&(!qf||Eu&&8<Eu&&11>=Eu),Nn=" ",Wf=!1;function Ax(c,f){switch(c){case"keyup":return Su.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vf(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var dl=!1;function YN(c,f){switch(c){case"compositionend":return Vf(f);case"keypress":return f.which!==32?null:(Wf=!0,Nn);case"textInput":return c=f.data,c===Nn&&Wf?null:c;default:return null}}function Ni(c,f){if(dl)return c==="compositionend"||!qf&&Ax(c,f)?(c=Le(),xe=J=Ya=null,dl=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return Wi&&f.locale!=="ko"?null:f.data;default:return null}}var _x={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dh(c){var f=c&&c.nodeName&&c.nodeName.toLowerCase();return f==="input"?!!_x[c.type]:f==="textarea"}function Ih(c,f,b,j){Ve(j),f=ls(f,"onChange"),0<f.length&&(b=new fr("onChange","change",null,b,j),c.push({event:b,listeners:f}))}var ju=null,wu=null;function XN(c){np(c,0)}function Au(c){var f=Nd(c);if(oe(f))return c}function qe(c,f){if(c==="change")return f}var Cx=!1;if(l){var Xe;if(l){var pd="oninput"in document;if(!pd){var Mh=document.createElement("div");Mh.setAttribute("oninput","return;"),pd=typeof Mh.oninput=="function"}Xe=pd}else Xe=!1;Cx=Xe&&(!document.documentMode||9<document.documentMode)}function _u(){ju&&(ju.detachEvent("onpropertychange",Cu),wu=ju=null)}function Cu(c){if(c.propertyName==="value"&&Au(wu)){var f=[];Ih(f,wu,c,Qt(c)),wr(XN,f)}}function md(c,f,b){c==="focusin"?(_u(),ju=f,wu=b,ju.attachEvent("onpropertychange",Cu)):c==="focusout"&&_u()}function QN(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return Au(wu)}function Tx(c,f){if(c==="click")return Au(f)}function Yf(c,f){if(c==="input"||c==="change")return Au(f)}function Ox(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var Si=typeof Object.is=="function"?Object.is:Ox;function Ei(c,f){if(Si(c,f))return!0;if(typeof c!="object"||c===null||typeof f!="object"||f===null)return!1;var b=Object.keys(c),j=Object.keys(f);if(b.length!==j.length)return!1;for(j=0;j<b.length;j++){var O=b[j];if(!d.call(f,O)||!Si(c[O],f[O]))return!1}return!0}function Rx(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function kx(c,f){var b=Rx(c);c=0;for(var j;b;){if(b.nodeType===3){if(j=c+b.textContent.length,c<=f&&j>=f)return{node:b,offset:f-c};c=j}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=Rx(b)}}function Xf(c,f){return c&&f?c===f?!0:c&&c.nodeType===3?!1:f&&f.nodeType===3?Xf(c,f.parentNode):"contains"in c?c.contains(f):c.compareDocumentPosition?!!(c.compareDocumentPosition(f)&16):!1:!1}function fc(){for(var c=window,f=le();f instanceof c.HTMLIFrameElement;){try{var b=typeof f.contentWindow.location.href=="string"}catch{b=!1}if(b)c=f.contentWindow;else break;f=le(c.document)}return f}function Qf(c){var f=c&&c.nodeName&&c.nodeName.toLowerCase();return f&&(f==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||f==="textarea"||c.contentEditable==="true")}function Zf(c){var f=fc(),b=c.focusedElem,j=c.selectionRange;if(f!==b&&b&&b.ownerDocument&&Xf(b.ownerDocument.documentElement,b)){if(j!==null&&Qf(b)){if(f=j.start,c=j.end,c===void 0&&(c=f),"selectionStart"in b)b.selectionStart=f,b.selectionEnd=Math.min(c,b.value.length);else if(c=(f=b.ownerDocument||document)&&f.defaultView||window,c.getSelection){c=c.getSelection();var O=b.textContent.length,D=Math.min(j.start,O);j=j.end===void 0?D:Math.min(j.end,O),!c.extend&&D>j&&(O=j,j=D,D=O),O=kx(b,D);var W=kx(b,j);O&&W&&(c.rangeCount!==1||c.anchorNode!==O.node||c.anchorOffset!==O.offset||c.focusNode!==W.node||c.focusOffset!==W.offset)&&(f=f.createRange(),f.setStart(O.node,O.offset),c.removeAllRanges(),D>j?(c.addRange(f),c.extend(W.node,W.offset)):(f.setEnd(W.node,W.offset),c.addRange(f)))}}for(f=[],c=b;c=c.parentNode;)c.nodeType===1&&f.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<f.length;b++)c=f[b],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var Px=l&&"documentMode"in document&&11>=document.documentMode,Ys=null,ji=null,Tu=null,Lh=!1;function Dx(c,f,b){var j=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;Lh||Ys==null||Ys!==le(j)||(j=Ys,"selectionStart"in j&&Qf(j)?j={start:j.selectionStart,end:j.selectionEnd}:(j=(j.ownerDocument&&j.ownerDocument.defaultView||window).getSelection(),j={anchorNode:j.anchorNode,anchorOffset:j.anchorOffset,focusNode:j.focusNode,focusOffset:j.focusOffset}),Tu&&Ei(Tu,j)||(Tu=j,j=ls(ji,"onSelect"),0<j.length&&(f=new fr("onSelect","select",null,f,b),c.push({event:f,listeners:j}),f.target=Ys)))}function Jf(c,f){var b={};return b[c.toLowerCase()]=f.toLowerCase(),b["Webkit"+c]="webkit"+f,b["Moz"+c]="moz"+f,b}var hd={animationend:Jf("Animation","AnimationEnd"),animationiteration:Jf("Animation","AnimationIteration"),animationstart:Jf("Animation","AnimationStart"),transitionend:Jf("Transition","TransitionEnd")},$h={},Fh={};l&&(Fh=document.createElement("div").style,"AnimationEvent"in window||(delete hd.animationend.animation,delete hd.animationiteration.animation,delete hd.animationstart.animation),"TransitionEvent"in window||delete hd.transitionend.transition);function gd(c){if($h[c])return $h[c];if(!hd[c])return c;var f=hd[c],b;for(b in f)if(f.hasOwnProperty(b)&&b in Fh)return $h[c]=f[b];return c}var Uh=gd("animationend"),Bh=gd("animationiteration"),Gh=gd("animationstart"),ep=gd("transitionend"),Hh=new Map,tp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ul(c,f){Hh.set(c,f),i(f,[c])}for(var Kh=0;Kh<tp.length;Kh++){var zh=tp[Kh],ZN=zh.toLowerCase(),Vi=zh[0].toUpperCase()+zh.slice(1);ul(ZN,"on"+Vi)}ul(Uh,"onAnimationEnd"),ul(Bh,"onAnimationIteration"),ul(Gh,"onAnimationStart"),ul("dblclick","onDoubleClick"),ul("focusin","onFocus"),ul("focusout","onBlur"),ul(ep,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qh=new Set("cancel close invalid load scroll toggle".split(" ").concat(pc));function rp(c,f,b){var j=c.type||"unknown-event";c.currentTarget=b,Vr(j,f,void 0,c),c.currentTarget=null}function np(c,f){f=(f&4)!==0;for(var b=0;b<c.length;b++){var j=c[b],O=j.event;j=j.listeners;e:{var D=void 0;if(f)for(var W=j.length-1;0<=W;W--){var ie=j[W],me=ie.instance,Ce=ie.currentTarget;if(ie=ie.listener,me!==D&&O.isPropagationStopped())break e;rp(O,ie,Ce),D=me}else for(W=0;W<j.length;W++){if(ie=j[W],me=ie.instance,Ce=ie.currentTarget,ie=ie.listener,me!==D&&O.isPropagationStopped())break e;rp(O,ie,Ce),D=me}}}if(Re)throw c=Et,Re=!1,Et=null,c}function sn(c,f){var b=f[Yi];b===void 0&&(b=f[Yi]=new Set);var j=c+"__bubble";b.has(j)||(hc(f,c,2,!1),b.add(j))}function xd(c,f,b){var j=0;f&&(j|=4),hc(b,c,j,f)}var bd="_reactListening"+Math.random().toString(36).slice(2);function mc(c){if(!c[bd]){c[bd]=!0,n.forEach(function(b){b!=="selectionchange"&&(qh.has(b)||xd(b,!1,c),xd(b,!0,c))});var f=c.nodeType===9?c:c.ownerDocument;f===null||f[bd]||(f[bd]=!0,xd("selectionchange",!1,f))}}function hc(c,f,b,j){switch(Ws(f)){case 1:var O=gi;break;case 4:O=Nu;break;default:O=xi}b=O.bind(null,f,b,c),O=void 0,!dn||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(O=!0),j?O!==void 0?c.addEventListener(f,b,{capture:!0,passive:O}):c.addEventListener(f,b,!0):O!==void 0?c.addEventListener(f,b,{passive:O}):c.addEventListener(f,b,!1)}function Ou(c,f,b,j,O){var D=j;if((f&1)===0&&(f&2)===0&&j!==null)e:for(;;){if(j===null)return;var W=j.tag;if(W===3||W===4){var ie=j.stateNode.containerInfo;if(ie===O||ie.nodeType===8&&ie.parentNode===O)break;if(W===4)for(W=j.return;W!==null;){var me=W.tag;if((me===3||me===4)&&(me=W.stateNode.containerInfo,me===O||me.nodeType===8&&me.parentNode===O))return;W=W.return}for(;ie!==null;){if(W=bc(ie),W===null)return;if(me=W.tag,me===5||me===6){j=D=W;continue e}ie=ie.parentNode}}j=j.return}wr(function(){var Ce=D,et=Qt(b),at=[];e:{var Qe=Hh.get(c);if(Qe!==void 0){var Nt=fr,Tt=c;switch(c){case"keypress":if(Ze(b)===0)break e;case"keydown":case"keyup":Nt=Oh;break;case"focusin":Tt="focus",Nt=oc;break;case"focusout":Tt="blur",Nt=oc;break;case"beforeblur":case"afterblur":Nt=oc;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Nt=qi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Nt=Gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Nt=zf;break;case Uh:case Bh:case Gh:Nt=Xa;break;case ep:Nt=kh;break;case"scroll":Nt=is;break;case"wheel":Nt=Ph;break;case"copy":case"cut":case"paste":Nt=yi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Nt=dc}var It=(f&4)!==0,ca=!It&&c==="scroll",Ee=It?Qe!==null?Qe+"Capture":null:Qe;It=[];for(var be=Ce,Ae;be!==null;){Ae=be;var ct=Ae.stateNode;if(Ae.tag===5&&ct!==null&&(Ae=ct,Ee!==null&&(ct=ze(be,Ee),ct!=null&&It.push(Ru(be,ct,Ae)))),ca)break;be=be.return}0<It.length&&(Qe=new Nt(Qe,Tt,null,b,et),at.push({event:Qe,listeners:It}))}}if((f&7)===0){e:{if(Qe=c==="mouseover"||c==="pointerover",Nt=c==="mouseout"||c==="pointerout",Qe&&b!==Ge&&(Tt=b.relatedTarget||b.fromElement)&&(bc(Tt)||Tt[zn]))break e;if((Nt||Qe)&&(Qe=et.window===et?et:(Qe=et.ownerDocument)?Qe.defaultView||Qe.parentWindow:window,Nt?(Tt=b.relatedTarget||b.toElement,Nt=Ce,Tt=Tt?bc(Tt):null,Tt!==null&&(ca=Cn(Tt),Tt!==ca||Tt.tag!==5&&Tt.tag!==6)&&(Tt=null)):(Nt=null,Tt=Ce),Nt!==Tt)){if(It=qi,ct="onMouseLeave",Ee="onMouseEnter",be="mouse",(c==="pointerout"||c==="pointerover")&&(It=dc,ct="onPointerLeave",Ee="onPointerEnter",be="pointer"),ca=Nt==null?Qe:Nd(Nt),Ae=Tt==null?Qe:Nd(Tt),Qe=new It(ct,be+"leave",Nt,b,et),Qe.target=ca,Qe.relatedTarget=Ae,ct=null,bc(et)===Ce&&(It=new It(Ee,be+"enter",Tt,b,et),It.target=Ae,It.relatedTarget=ca,ct=It),ca=ct,Nt&&Tt)t:{for(It=Nt,Ee=Tt,be=0,Ae=It;Ae;Ae=fl(Ae))be++;for(Ae=0,ct=Ee;ct;ct=fl(ct))Ae++;for(;0<be-Ae;)It=fl(It),be--;for(;0<Ae-be;)Ee=fl(Ee),Ae--;for(;be--;){if(It===Ee||Ee!==null&&It===Ee.alternate)break t;It=fl(It),Ee=fl(Ee)}It=null}else It=null;Nt!==null&&Wh(at,Qe,Nt,It,!1),Tt!==null&&ca!==null&&Wh(at,ca,Tt,It,!0)}}e:{if(Qe=Ce?Nd(Ce):window,Nt=Qe.nodeName&&Qe.nodeName.toLowerCase(),Nt==="select"||Nt==="input"&&Qe.type==="file")var Ft=qe;else if(Dh(Qe))if(Cx)Ft=Yf;else{Ft=QN;var Zt=md}else(Nt=Qe.nodeName)&&Nt.toLowerCase()==="input"&&(Qe.type==="checkbox"||Qe.type==="radio")&&(Ft=Tx);if(Ft&&(Ft=Ft(c,Ce))){Ih(at,Ft,b,et);break e}Zt&&Zt(c,Qe,Ce),c==="focusout"&&(Zt=Qe._wrapperState)&&Zt.controlled&&Qe.type==="number"&&pe(Qe,"number",Qe.value)}switch(Zt=Ce?Nd(Ce):window,c){case"focusin":(Dh(Zt)||Zt.contentEditable==="true")&&(Ys=Zt,ji=Ce,Tu=null);break;case"focusout":Tu=ji=Ys=null;break;case"mousedown":Lh=!0;break;case"contextmenu":case"mouseup":case"dragend":Lh=!1,Dx(at,b,et);break;case"selectionchange":if(Px)break;case"keydown":case"keyup":Dx(at,b,et)}var Jt;if(qf)e:{switch(c){case"compositionstart":var or="onCompositionStart";break e;case"compositionend":or="onCompositionEnd";break e;case"compositionupdate":or="onCompositionUpdate";break e}or=void 0}else dl?Ax(c,b)&&(or="onCompositionEnd"):c==="keydown"&&b.keyCode===229&&(or="onCompositionStart");or&&(Wi&&b.locale!=="ko"&&(dl||or!=="onCompositionStart"?or==="onCompositionEnd"&&dl&&(Jt=Le()):(Ya=et,J="value"in Ya?Ya.value:Ya.textContent,dl=!0)),Zt=ls(Ce,or),0<Zt.length&&(or=new Kn(or,c,null,b,et),at.push({event:or,listeners:Zt}),Jt?or.data=Jt:(Jt=Vf(b),Jt!==null&&(or.data=Jt)))),(Jt=wx?YN(c,b):Ni(c,b))&&(Ce=ls(Ce,"onBeforeInput"),0<Ce.length&&(et=new Kn("onBeforeInput","beforeinput",null,b,et),at.push({event:et,listeners:Ce}),et.data=Jt))}np(at,f)})}function Ru(c,f,b){return{instance:c,listener:f,currentTarget:b}}function ls(c,f){for(var b=f+"Capture",j=[];c!==null;){var O=c,D=O.stateNode;O.tag===5&&D!==null&&(O=D,D=ze(c,b),D!=null&&j.unshift(Ru(c,D,O)),D=ze(c,f),D!=null&&j.push(Ru(c,D,O))),c=c.return}return j}function fl(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5);return c||null}function Wh(c,f,b,j,O){for(var D=f._reactName,W=[];b!==null&&b!==j;){var ie=b,me=ie.alternate,Ce=ie.stateNode;if(me!==null&&me===j)break;ie.tag===5&&Ce!==null&&(ie=Ce,O?(me=ze(b,D),me!=null&&W.unshift(Ru(b,me,ie))):O||(me=ze(b,D),me!=null&&W.push(Ru(b,me,ie)))),b=b.return}W.length!==0&&c.push({event:f,listeners:W})}var Ix=/\r\n?/g,ap=/\u0000|\uFFFD/g;function Kr(c){return(typeof c=="string"?c:""+c).replace(Ix,`
`).replace(ap,"")}function Sn(c,f,b){if(f=Kr(f),Kr(c)!==f&&b)throw Error(r(425))}function Yr(){}var ya=null,ku=null;function yd(c,f){return c==="textarea"||c==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var gc=typeof setTimeout=="function"?setTimeout:void 0,Mx=typeof clearTimeout=="function"?clearTimeout:void 0,ia=typeof Promise=="function"?Promise:void 0,JN=typeof queueMicrotask=="function"?queueMicrotask:typeof ia<"u"?function(c){return ia.resolve(null).then(c).catch(pl)}:gc;function pl(c){setTimeout(function(){throw c})}function sp(c,f){var b=f,j=0;do{var O=b.nextSibling;if(c.removeChild(b),O&&O.nodeType===8)if(b=O.data,b==="/$"){if(j===0){c.removeChild(O),sa(f);return}j--}else b!=="$"&&b!=="$?"&&b!=="$!"||j++;b=O}while(b);sa(f)}function To(c){for(;c!=null;c=c.nextSibling){var f=c.nodeType;if(f===1||f===3)break;if(f===8){if(f=c.data,f==="$"||f==="$!"||f==="$?")break;if(f==="/$")return null}}return c}function Pu(c){c=c.previousSibling;for(var f=0;c;){if(c.nodeType===8){var b=c.data;if(b==="$"||b==="$!"||b==="$?"){if(f===0)return c;f--}else b==="/$"&&f++}c=c.previousSibling}return null}var vd=Math.random().toString(36).slice(2),Xs="__reactFiber$"+vd,wi="__reactProps$"+vd,zn="__reactContainer$"+vd,Yi="__reactEvents$"+vd,xc="__reactListeners$"+vd,ip="__reactHandles$"+vd;function bc(c){var f=c[Xs];if(f)return f;for(var b=c.parentNode;b;){if(f=b[zn]||b[Xs]){if(b=f.alternate,f.child!==null||b!==null&&b.child!==null)for(c=Pu(c);c!==null;){if(b=c[Xs])return b;c=Pu(c)}return f}c=b,b=c.parentNode}return null}function ml(c){return c=c[Xs]||c[zn],!c||c.tag!==5&&c.tag!==6&&c.tag!==13&&c.tag!==3?null:c}function Nd(c){if(c.tag===5||c.tag===6)return c.stateNode;throw Error(r(33))}function op(c){return c[wi]||null}var lp=[],oa=-1;function $a(c){return{current:c}}function Lr(c){0>oa||(c.current=lp[oa],lp[oa]=null,oa--)}function Jr(c,f){oa++,lp[oa]=c.current,c.current=f}var Ai={},kn=$a(Ai),cs=$a(!1),va=Ai;function Xi(c,f){var b=c.type.contextTypes;if(!b)return Ai;var j=c.stateNode;if(j&&j.__reactInternalMemoizedUnmaskedChildContext===f)return j.__reactInternalMemoizedMaskedChildContext;var O={},D;for(D in b)O[D]=f[D];return j&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=f,c.__reactInternalMemoizedMaskedChildContext=O),O}function la(c){return c=c.childContextTypes,c!=null}function Du(){Lr(cs),Lr(kn)}function Vh(c,f,b){if(kn.current!==Ai)throw Error(r(168));Jr(kn,f),Jr(cs,b)}function Sd(c,f,b){var j=c.stateNode;if(f=f.childContextTypes,typeof j.getChildContext!="function")return b;j=j.getChildContext();for(var O in j)if(!(O in f))throw Error(r(108,fe(c)||"Unknown",O));return re({},b,j)}function cp(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||Ai,va=kn.current,Jr(kn,c),Jr(cs,cs.current),!0}function yc(c,f,b){var j=c.stateNode;if(!j)throw Error(r(169));b?(c=Sd(c,f,va),j.__reactInternalMemoizedMergedChildContext=c,Lr(cs),Lr(kn),Jr(kn,c)):Lr(cs),Jr(cs,b)}var Oo=null,dp=!1,Yh=!1;function Iu(c){Oo===null?Oo=[c]:Oo.push(c)}function Qi(c){dp=!0,Iu(c)}function Qa(){if(!Yh&&Oo!==null){Yh=!0;var c=0,f=Ut;try{var b=Oo;for(Ut=1;c<b.length;c++){var j=b[c];do j=j(!0);while(j!==null)}Oo=null,dp=!1}catch(O){throw Oo!==null&&(Oo=Oo.slice(c+1)),Ir(mn,Qa),O}finally{Ut=f,Yh=!1}}return null}var Ro=[],_i=0,vc=null,Mu=0,Ts=[],fn=0,Zi=null,Ji=1,eo="";function Nc(c,f){Ro[_i++]=Mu,Ro[_i++]=vc,vc=c,Mu=f}function Sc(c,f,b){Ts[fn++]=Ji,Ts[fn++]=eo,Ts[fn++]=Zi,Zi=c;var j=Ji;c=eo;var O=32-Fr(j)-1;j&=~(1<<O),b+=1;var D=32-Fr(f)+O;if(30<D){var W=O-O%5;D=(j&(1<<W)-1).toString(32),j>>=W,O-=W,Ji=1<<32-Fr(f)+O|b<<O|j,eo=D+c}else Ji=1<<D|b<<O|j,eo=c}function Os(c){c.return!==null&&(Nc(c,1),Sc(c,1,0))}function Xh(c){for(;c===vc;)vc=Ro[--_i],Ro[_i]=null,Mu=Ro[--_i],Ro[_i]=null;for(;c===Zi;)Zi=Ts[--fn],Ts[fn]=null,eo=Ts[--fn],Ts[fn]=null,Ji=Ts[--fn],Ts[fn]=null}var $n=null,Na=null,xn=!1,Ci=null;function Lx(c,f){var b=so(5,null,null,0);b.elementType="DELETED",b.stateNode=f,b.return=c,f=c.deletions,f===null?(c.deletions=[b],c.flags|=16):f.push(b)}function Qs(c,f){switch(c.tag){case 5:var b=c.type;return f=f.nodeType!==1||b.toLowerCase()!==f.nodeName.toLowerCase()?null:f,f!==null?(c.stateNode=f,$n=c,Na=To(f.firstChild),!0):!1;case 6:return f=c.pendingProps===""||f.nodeType!==3?null:f,f!==null?(c.stateNode=f,$n=c,Na=null,!0):!1;case 13:return f=f.nodeType!==8?null:f,f!==null?(b=Zi!==null?{id:Ji,overflow:eo}:null,c.memoizedState={dehydrated:f,treeContext:b,retryLane:1073741824},b=so(18,null,null,0),b.stateNode=f,b.return=c,c.child=b,$n=c,Na=null,!0):!1;default:return!1}}function Lu(c){return(c.mode&1)!==0&&(c.flags&128)===0}function up(c){if(xn){var f=Na;if(f){var b=f;if(!Qs(c,f)){if(Lu(c))throw Error(r(418));f=To(b.nextSibling);var j=$n;f&&Qs(c,f)?Lx(j,b):(c.flags=c.flags&-4097|2,xn=!1,$n=c)}}else{if(Lu(c))throw Error(r(418));c.flags=c.flags&-4097|2,xn=!1,$n=c}}}function Ti(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;$n=c}function Ed(c){if(c!==$n)return!1;if(!xn)return Ti(c),xn=!0,!1;var f;if((f=c.tag!==3)&&!(f=c.tag!==5)&&(f=c.type,f=f!=="head"&&f!=="body"&&!yd(c.type,c.memoizedProps)),f&&(f=Na)){if(Lu(c))throw to(),Error(r(418));for(;f;)Lx(c,f),f=To(f.nextSibling)}if(Ti(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));e:{for(c=c.nextSibling,f=0;c;){if(c.nodeType===8){var b=c.data;if(b==="/$"){if(f===0){Na=To(c.nextSibling);break e}f--}else b!=="$"&&b!=="$!"&&b!=="$?"||f++}c=c.nextSibling}Na=null}}else Na=$n?To(c.stateNode.nextSibling):null;return!0}function to(){for(var c=Na;c;)c=To(c.nextSibling)}function Oi(){Na=$n=null,xn=!1}function jd(c){Ci===null?Ci=[c]:Ci.push(c)}var wd=_.ReactCurrentBatchConfig;function hl(c,f,b){if(c=b.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(b._owner){if(b=b._owner,b){if(b.tag!==1)throw Error(r(309));var j=b.stateNode}if(!j)throw Error(r(147,c));var O=j,D=""+c;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===D?f.ref:(f=function(W){var ie=O.refs;W===null?delete ie[D]:ie[D]=W},f._stringRef=D,f)}if(typeof c!="string")throw Error(r(284));if(!b._owner)throw Error(r(290,c))}return c}function zr(c,f){throw c=Object.prototype.toString.call(f),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":c))}function $u(c){var f=c._init;return f(c._payload)}function Ec(c){function f(Ee,be){if(c){var Ae=Ee.deletions;Ae===null?(Ee.deletions=[be],Ee.flags|=16):Ae.push(be)}}function b(Ee,be){if(!c)return null;for(;be!==null;)f(Ee,be),be=be.sibling;return null}function j(Ee,be){for(Ee=new Map;be!==null;)be.key!==null?Ee.set(be.key,be):Ee.set(be.index,be),be=be.sibling;return Ee}function O(Ee,be){return Ee=kd(Ee,be),Ee.index=0,Ee.sibling=null,Ee}function D(Ee,be,Ae){return Ee.index=Ae,c?(Ae=Ee.alternate,Ae!==null?(Ae=Ae.index,Ae<be?(Ee.flags|=2,be):Ae):(Ee.flags|=2,be)):(Ee.flags|=1048576,be)}function W(Ee){return c&&Ee.alternate===null&&(Ee.flags|=2),Ee}function ie(Ee,be,Ae,ct){return be===null||be.tag!==6?(be=PS(Ae,Ee.mode,ct),be.return=Ee,be):(be=O(be,Ae),be.return=Ee,be)}function me(Ee,be,Ae,ct){var Ft=Ae.type;return Ft===R?et(Ee,be,Ae.props.children,ct,Ae.key):be!==null&&(be.elementType===Ft||typeof Ft=="object"&&Ft!==null&&Ft.$$typeof===$&&$u(Ft)===be.type)?(ct=O(be,Ae.props),ct.ref=hl(Ee,be,Ae),ct.return=Ee,ct):(ct=rb(Ae.type,Ae.key,Ae.props,null,Ee.mode,ct),ct.ref=hl(Ee,be,Ae),ct.return=Ee,ct)}function Ce(Ee,be,Ae,ct){return be===null||be.tag!==4||be.stateNode.containerInfo!==Ae.containerInfo||be.stateNode.implementation!==Ae.implementation?(be=DS(Ae,Ee.mode,ct),be.return=Ee,be):(be=O(be,Ae.children||[]),be.return=Ee,be)}function et(Ee,be,Ae,ct,Ft){return be===null||be.tag!==7?(be=Wu(Ae,Ee.mode,ct,Ft),be.return=Ee,be):(be=O(be,Ae),be.return=Ee,be)}function at(Ee,be,Ae){if(typeof be=="string"&&be!==""||typeof be=="number")return be=PS(""+be,Ee.mode,Ae),be.return=Ee,be;if(typeof be=="object"&&be!==null){switch(be.$$typeof){case A:return Ae=rb(be.type,be.key,be.props,null,Ee.mode,Ae),Ae.ref=hl(Ee,null,be),Ae.return=Ee,Ae;case T:return be=DS(be,Ee.mode,Ae),be.return=Ee,be;case $:var ct=be._init;return at(Ee,ct(be._payload),Ae)}if(he(be)||Z(be))return be=Wu(be,Ee.mode,Ae,null),be.return=Ee,be;zr(Ee,be)}return null}function Qe(Ee,be,Ae,ct){var Ft=be!==null?be.key:null;if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number")return Ft!==null?null:ie(Ee,be,""+Ae,ct);if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case A:return Ae.key===Ft?me(Ee,be,Ae,ct):null;case T:return Ae.key===Ft?Ce(Ee,be,Ae,ct):null;case $:return Ft=Ae._init,Qe(Ee,be,Ft(Ae._payload),ct)}if(he(Ae)||Z(Ae))return Ft!==null?null:et(Ee,be,Ae,ct,null);zr(Ee,Ae)}return null}function Nt(Ee,be,Ae,ct,Ft){if(typeof ct=="string"&&ct!==""||typeof ct=="number")return Ee=Ee.get(Ae)||null,ie(be,Ee,""+ct,Ft);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case A:return Ee=Ee.get(ct.key===null?Ae:ct.key)||null,me(be,Ee,ct,Ft);case T:return Ee=Ee.get(ct.key===null?Ae:ct.key)||null,Ce(be,Ee,ct,Ft);case $:var Zt=ct._init;return Nt(Ee,be,Ae,Zt(ct._payload),Ft)}if(he(ct)||Z(ct))return Ee=Ee.get(Ae)||null,et(be,Ee,ct,Ft,null);zr(be,ct)}return null}function Tt(Ee,be,Ae,ct){for(var Ft=null,Zt=null,Jt=be,or=be=0,Ba=null;Jt!==null&&or<Ae.length;or++){Jt.index>or?(Ba=Jt,Jt=null):Ba=Jt.sibling;var qr=Qe(Ee,Jt,Ae[or],ct);if(qr===null){Jt===null&&(Jt=Ba);break}c&&Jt&&qr.alternate===null&&f(Ee,Jt),be=D(qr,be,or),Zt===null?Ft=qr:Zt.sibling=qr,Zt=qr,Jt=Ba}if(or===Ae.length)return b(Ee,Jt),xn&&Nc(Ee,or),Ft;if(Jt===null){for(;or<Ae.length;or++)Jt=at(Ee,Ae[or],ct),Jt!==null&&(be=D(Jt,be,or),Zt===null?Ft=Jt:Zt.sibling=Jt,Zt=Jt);return xn&&Nc(Ee,or),Ft}for(Jt=j(Ee,Jt);or<Ae.length;or++)Ba=Nt(Jt,Ee,or,Ae[or],ct),Ba!==null&&(c&&Ba.alternate!==null&&Jt.delete(Ba.key===null?or:Ba.key),be=D(Ba,be,or),Zt===null?Ft=Ba:Zt.sibling=Ba,Zt=Ba);return c&&Jt.forEach(function(Pd){return f(Ee,Pd)}),xn&&Nc(Ee,or),Ft}function It(Ee,be,Ae,ct){var Ft=Z(Ae);if(typeof Ft!="function")throw Error(r(150));if(Ae=Ft.call(Ae),Ae==null)throw Error(r(151));for(var Zt=Ft=null,Jt=be,or=be=0,Ba=null,qr=Ae.next();Jt!==null&&!qr.done;or++,qr=Ae.next()){Jt.index>or?(Ba=Jt,Jt=null):Ba=Jt.sibling;var Pd=Qe(Ee,Jt,qr.value,ct);if(Pd===null){Jt===null&&(Jt=Ba);break}c&&Jt&&Pd.alternate===null&&f(Ee,Jt),be=D(Pd,be,or),Zt===null?Ft=Pd:Zt.sibling=Pd,Zt=Pd,Jt=Ba}if(qr.done)return b(Ee,Jt),xn&&Nc(Ee,or),Ft;if(Jt===null){for(;!qr.done;or++,qr=Ae.next())qr=at(Ee,qr.value,ct),qr!==null&&(be=D(qr,be,or),Zt===null?Ft=qr:Zt.sibling=qr,Zt=qr);return xn&&Nc(Ee,or),Ft}for(Jt=j(Ee,Jt);!qr.done;or++,qr=Ae.next())qr=Nt(Jt,Ee,or,qr.value,ct),qr!==null&&(c&&qr.alternate!==null&&Jt.delete(qr.key===null?or:qr.key),be=D(qr,be,or),Zt===null?Ft=qr:Zt.sibling=qr,Zt=qr);return c&&Jt.forEach(function(yY){return f(Ee,yY)}),xn&&Nc(Ee,or),Ft}function ca(Ee,be,Ae,ct){if(typeof Ae=="object"&&Ae!==null&&Ae.type===R&&Ae.key===null&&(Ae=Ae.props.children),typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case A:e:{for(var Ft=Ae.key,Zt=be;Zt!==null;){if(Zt.key===Ft){if(Ft=Ae.type,Ft===R){if(Zt.tag===7){b(Ee,Zt.sibling),be=O(Zt,Ae.props.children),be.return=Ee,Ee=be;break e}}else if(Zt.elementType===Ft||typeof Ft=="object"&&Ft!==null&&Ft.$$typeof===$&&$u(Ft)===Zt.type){b(Ee,Zt.sibling),be=O(Zt,Ae.props),be.ref=hl(Ee,Zt,Ae),be.return=Ee,Ee=be;break e}b(Ee,Zt);break}else f(Ee,Zt);Zt=Zt.sibling}Ae.type===R?(be=Wu(Ae.props.children,Ee.mode,ct,Ae.key),be.return=Ee,Ee=be):(ct=rb(Ae.type,Ae.key,Ae.props,null,Ee.mode,ct),ct.ref=hl(Ee,be,Ae),ct.return=Ee,Ee=ct)}return W(Ee);case T:e:{for(Zt=Ae.key;be!==null;){if(be.key===Zt)if(be.tag===4&&be.stateNode.containerInfo===Ae.containerInfo&&be.stateNode.implementation===Ae.implementation){b(Ee,be.sibling),be=O(be,Ae.children||[]),be.return=Ee,Ee=be;break e}else{b(Ee,be);break}else f(Ee,be);be=be.sibling}be=DS(Ae,Ee.mode,ct),be.return=Ee,Ee=be}return W(Ee);case $:return Zt=Ae._init,ca(Ee,be,Zt(Ae._payload),ct)}if(he(Ae))return Tt(Ee,be,Ae,ct);if(Z(Ae))return It(Ee,be,Ae,ct);zr(Ee,Ae)}return typeof Ae=="string"&&Ae!==""||typeof Ae=="number"?(Ae=""+Ae,be!==null&&be.tag===6?(b(Ee,be.sibling),be=O(be,Ae),be.return=Ee,Ee=be):(b(Ee,be),be=PS(Ae,Ee.mode,ct),be.return=Ee,Ee=be),W(Ee)):b(Ee,be)}return ca}var jc=Ec(!0),Fu=Ec(!1),gl=$a(null),xl=null,ro=null,wc=null;function Zs(){wc=ro=xl=null}function Uu(c){var f=gl.current;Lr(gl),c._currentValue=f}function Bu(c,f,b){for(;c!==null;){var j=c.alternate;if((c.childLanes&f)!==f?(c.childLanes|=f,j!==null&&(j.childLanes|=f)):j!==null&&(j.childLanes&f)!==f&&(j.childLanes|=f),c===b)break;c=c.return}}function Rs(c,f){xl=c,wc=ro=null,c=c.dependencies,c!==null&&c.firstContext!==null&&((c.lanes&f)!==0&&(ti=!0),c.firstContext=null)}function qn(c){var f=c._currentValue;if(wc!==c)if(c={context:c,memoizedValue:f,next:null},ro===null){if(xl===null)throw Error(r(308));ro=c,xl.dependencies={lanes:0,firstContext:c}}else ro=ro.next=c;return f}var Js=null;function Gu(c){Js===null?Js=[c]:Js.push(c)}function $x(c,f,b,j){var O=f.interleaved;return O===null?(b.next=b,Gu(f)):(b.next=O.next,O.next=b),f.interleaved=b,ko(c,j)}function ko(c,f){c.lanes|=f;var b=c.alternate;for(b!==null&&(b.lanes|=f),b=c,c=c.return;c!==null;)c.childLanes|=f,b=c.alternate,b!==null&&(b.childLanes|=f),b=c,c=c.return;return b.tag===3?b.stateNode:null}var bl=!1;function P(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function K(c,f){c=c.updateQueue,f.updateQueue===c&&(f.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function Q(c,f){return{eventTime:c,lane:f,tag:0,payload:null,callback:null,next:null}}function ce(c,f,b){var j=c.updateQueue;if(j===null)return null;if(j=j.shared,(Br&2)!==0){var O=j.pending;return O===null?f.next=f:(f.next=O.next,O.next=f),j.pending=f,ko(c,b)}return O=j.interleaved,O===null?(f.next=f,Gu(j)):(f.next=O.next,O.next=f),j.interleaved=f,ko(c,b)}function ae(c,f,b){if(f=f.updateQueue,f!==null&&(f=f.shared,(b&4194240)!==0)){var j=f.lanes;j&=c.pendingLanes,b|=j,f.lanes=b,Gi(c,b)}}function Ke(c,f){var b=c.updateQueue,j=c.alternate;if(j!==null&&(j=j.updateQueue,b===j)){var O=null,D=null;if(b=b.firstBaseUpdate,b!==null){do{var W={eventTime:b.eventTime,lane:b.lane,tag:b.tag,payload:b.payload,callback:b.callback,next:null};D===null?O=D=W:D=D.next=W,b=b.next}while(b!==null);D===null?O=D=f:D=D.next=f}else O=D=f;b={baseState:j.baseState,firstBaseUpdate:O,lastBaseUpdate:D,shared:j.shared,effects:j.effects},c.updateQueue=b;return}c=b.lastBaseUpdate,c===null?b.firstBaseUpdate=f:c.next=f,b.lastBaseUpdate=f}function Te(c,f,b,j){var O=c.updateQueue;bl=!1;var D=O.firstBaseUpdate,W=O.lastBaseUpdate,ie=O.shared.pending;if(ie!==null){O.shared.pending=null;var me=ie,Ce=me.next;me.next=null,W===null?D=Ce:W.next=Ce,W=me;var et=c.alternate;et!==null&&(et=et.updateQueue,ie=et.lastBaseUpdate,ie!==W&&(ie===null?et.firstBaseUpdate=Ce:ie.next=Ce,et.lastBaseUpdate=me))}if(D!==null){var at=O.baseState;W=0,et=Ce=me=null,ie=D;do{var Qe=ie.lane,Nt=ie.eventTime;if((j&Qe)===Qe){et!==null&&(et=et.next={eventTime:Nt,lane:0,tag:ie.tag,payload:ie.payload,callback:ie.callback,next:null});e:{var Tt=c,It=ie;switch(Qe=f,Nt=b,It.tag){case 1:if(Tt=It.payload,typeof Tt=="function"){at=Tt.call(Nt,at,Qe);break e}at=Tt;break e;case 3:Tt.flags=Tt.flags&-65537|128;case 0:if(Tt=It.payload,Qe=typeof Tt=="function"?Tt.call(Nt,at,Qe):Tt,Qe==null)break e;at=re({},at,Qe);break e;case 2:bl=!0}}ie.callback!==null&&ie.lane!==0&&(c.flags|=64,Qe=O.effects,Qe===null?O.effects=[ie]:Qe.push(ie))}else Nt={eventTime:Nt,lane:Qe,tag:ie.tag,payload:ie.payload,callback:ie.callback,next:null},et===null?(Ce=et=Nt,me=at):et=et.next=Nt,W|=Qe;if(ie=ie.next,ie===null){if(ie=O.shared.pending,ie===null)break;Qe=ie,ie=Qe.next,Qe.next=null,O.lastBaseUpdate=Qe,O.shared.pending=null}}while(!0);if(et===null&&(me=at),O.baseState=me,O.firstBaseUpdate=Ce,O.lastBaseUpdate=et,f=O.shared.interleaved,f!==null){O=f;do W|=O.lane,O=O.next;while(O!==f)}else D===null&&(O.shared.lanes=0);Hu|=W,c.lanes=W,c.memoizedState=at}}function st(c,f,b){if(c=f.effects,f.effects=null,c!==null)for(f=0;f<c.length;f++){var j=c[f],O=j.callback;if(O!==null){if(j.callback=null,j=b,typeof O!="function")throw Error(r(191,O));O.call(j)}}}var zt={},Pe=$a(zt),Be=$a(zt),At=$a(zt);function Ur(c){if(c===zt)throw Error(r(174));return c}function yr(c,f){switch(Jr(At,f),Jr(Be,c),Jr(Pe,zt),c=f.nodeType,c){case 9:case 11:f=(f=f.documentElement)?f.namespaceURI:Mt(null,"");break;default:c=c===8?f.parentNode:f,f=c.namespaceURI||null,c=c.tagName,f=Mt(f,c)}Lr(Pe),Jr(Pe,f)}function ds(){Lr(Pe),Lr(Be),Lr(At)}function Ad(c){Ur(At.current);var f=Ur(Pe.current),b=Mt(f,c.type);f!==b&&(Jr(Be,c),Jr(Pe,b))}function Xr(c){Be.current===c&&(Lr(Pe),Lr(Be))}var vr=$a(0);function ei(c){for(var f=c;f!==null;){if(f.tag===13){var b=f.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||b.data==="$?"||b.data==="$!"))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var Ac=[];function Qh(){for(var c=0;c<Ac.length;c++)Ac[c]._workInProgressVersionPrimary=null;Ac.length=0}var Wt=_.ReactCurrentDispatcher,bn=_.ReactCurrentBatchConfig,Ri=0,on=null,Sa=null,Fa=null,Fx=!1,Zh=!1,Jh=0,BV=0;function us(){throw Error(r(321))}function eS(c,f){if(f===null)return!1;for(var b=0;b<f.length&&b<c.length;b++)if(!Si(c[b],f[b]))return!1;return!0}function tS(c,f,b,j,O,D){if(Ri=D,on=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,Wt.current=c===null||c.memoizedState===null?zV:qV,c=b(j,O),Zh){D=0;do{if(Zh=!1,Jh=0,25<=D)throw Error(r(301));D+=1,Fa=Sa=null,f.updateQueue=null,Wt.current=WV,c=b(j,O)}while(Zh)}if(Wt.current=Gx,f=Sa!==null&&Sa.next!==null,Ri=0,Fa=Sa=on=null,Fx=!1,f)throw Error(r(300));return c}function rS(){var c=Jh!==0;return Jh=0,c}function yl(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fa===null?on.memoizedState=Fa=c:Fa=Fa.next=c,Fa}function no(){if(Sa===null){var c=on.alternate;c=c!==null?c.memoizedState:null}else c=Sa.next;var f=Fa===null?on.memoizedState:Fa.next;if(f!==null)Fa=f,Sa=c;else{if(c===null)throw Error(r(310));Sa=c,c={memoizedState:Sa.memoizedState,baseState:Sa.baseState,baseQueue:Sa.baseQueue,queue:Sa.queue,next:null},Fa===null?on.memoizedState=Fa=c:Fa=Fa.next=c}return Fa}function e0(c,f){return typeof f=="function"?f(c):f}function nS(c){var f=no(),b=f.queue;if(b===null)throw Error(r(311));b.lastRenderedReducer=c;var j=Sa,O=j.baseQueue,D=b.pending;if(D!==null){if(O!==null){var W=O.next;O.next=D.next,D.next=W}j.baseQueue=O=D,b.pending=null}if(O!==null){D=O.next,j=j.baseState;var ie=W=null,me=null,Ce=D;do{var et=Ce.lane;if((Ri&et)===et)me!==null&&(me=me.next={lane:0,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null}),j=Ce.hasEagerState?Ce.eagerState:c(j,Ce.action);else{var at={lane:et,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null};me===null?(ie=me=at,W=j):me=me.next=at,on.lanes|=et,Hu|=et}Ce=Ce.next}while(Ce!==null&&Ce!==D);me===null?W=j:me.next=ie,Si(j,f.memoizedState)||(ti=!0),f.memoizedState=j,f.baseState=W,f.baseQueue=me,b.lastRenderedState=j}if(c=b.interleaved,c!==null){O=c;do D=O.lane,on.lanes|=D,Hu|=D,O=O.next;while(O!==c)}else O===null&&(b.lanes=0);return[f.memoizedState,b.dispatch]}function aS(c){var f=no(),b=f.queue;if(b===null)throw Error(r(311));b.lastRenderedReducer=c;var j=b.dispatch,O=b.pending,D=f.memoizedState;if(O!==null){b.pending=null;var W=O=O.next;do D=c(D,W.action),W=W.next;while(W!==O);Si(D,f.memoizedState)||(ti=!0),f.memoizedState=D,f.baseQueue===null&&(f.baseState=D),b.lastRenderedState=D}return[D,j]}function Lk(){}function $k(c,f){var b=on,j=no(),O=f(),D=!Si(j.memoizedState,O);if(D&&(j.memoizedState=O,ti=!0),j=j.queue,sS(Bk.bind(null,b,j,c),[c]),j.getSnapshot!==f||D||Fa!==null&&Fa.memoizedState.tag&1){if(b.flags|=2048,t0(9,Uk.bind(null,b,j,O,f),void 0,null),Ua===null)throw Error(r(349));(Ri&30)!==0||Fk(b,f,O)}return O}function Fk(c,f,b){c.flags|=16384,c={getSnapshot:f,value:b},f=on.updateQueue,f===null?(f={lastEffect:null,stores:null},on.updateQueue=f,f.stores=[c]):(b=f.stores,b===null?f.stores=[c]:b.push(c))}function Uk(c,f,b,j){f.value=b,f.getSnapshot=j,Gk(f)&&Hk(c)}function Bk(c,f,b){return b(function(){Gk(f)&&Hk(c)})}function Gk(c){var f=c.getSnapshot;c=c.value;try{var b=f();return!Si(c,b)}catch{return!0}}function Hk(c){var f=ko(c,1);f!==null&&Mo(f,c,1,-1)}function Kk(c){var f=yl();return typeof c=="function"&&(c=c()),f.memoizedState=f.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e0,lastRenderedState:c},f.queue=c,c=c.dispatch=KV.bind(null,on,c),[f.memoizedState,c]}function t0(c,f,b,j){return c={tag:c,create:f,destroy:b,deps:j,next:null},f=on.updateQueue,f===null?(f={lastEffect:null,stores:null},on.updateQueue=f,f.lastEffect=c.next=c):(b=f.lastEffect,b===null?f.lastEffect=c.next=c:(j=b.next,b.next=c,c.next=j,f.lastEffect=c)),c}function zk(){return no().memoizedState}function Ux(c,f,b,j){var O=yl();on.flags|=c,O.memoizedState=t0(1|f,b,void 0,j===void 0?null:j)}function Bx(c,f,b,j){var O=no();j=j===void 0?null:j;var D=void 0;if(Sa!==null){var W=Sa.memoizedState;if(D=W.destroy,j!==null&&eS(j,W.deps)){O.memoizedState=t0(f,b,D,j);return}}on.flags|=c,O.memoizedState=t0(1|f,b,D,j)}function qk(c,f){return Ux(8390656,8,c,f)}function sS(c,f){return Bx(2048,8,c,f)}function Wk(c,f){return Bx(4,2,c,f)}function Vk(c,f){return Bx(4,4,c,f)}function Yk(c,f){if(typeof f=="function")return c=c(),f(c),function(){f(null)};if(f!=null)return c=c(),f.current=c,function(){f.current=null}}function Xk(c,f,b){return b=b!=null?b.concat([c]):null,Bx(4,4,Yk.bind(null,f,c),b)}function iS(){}function Qk(c,f){var b=no();f=f===void 0?null:f;var j=b.memoizedState;return j!==null&&f!==null&&eS(f,j[1])?j[0]:(b.memoizedState=[c,f],c)}function Zk(c,f){var b=no();f=f===void 0?null:f;var j=b.memoizedState;return j!==null&&f!==null&&eS(f,j[1])?j[0]:(c=c(),b.memoizedState=[c,f],c)}function Jk(c,f,b){return(Ri&21)===0?(c.baseState&&(c.baseState=!1,ti=!0),c.memoizedState=b):(Si(b,f)||(b=mi(),on.lanes|=b,Hu|=b,c.baseState=!0),f)}function GV(c,f){var b=Ut;Ut=b!==0&&4>b?b:4,c(!0);var j=bn.transition;bn.transition={};try{c(!1),f()}finally{Ut=b,bn.transition=j}}function e5(){return no().memoizedState}function HV(c,f,b){var j=Od(c);if(b={lane:j,action:b,hasEagerState:!1,eagerState:null,next:null},t5(c))r5(f,b);else if(b=$x(c,f,b,j),b!==null){var O=Ps();Mo(b,c,j,O),n5(b,f,j)}}function KV(c,f,b){var j=Od(c),O={lane:j,action:b,hasEagerState:!1,eagerState:null,next:null};if(t5(c))r5(f,O);else{var D=c.alternate;if(c.lanes===0&&(D===null||D.lanes===0)&&(D=f.lastRenderedReducer,D!==null))try{var W=f.lastRenderedState,ie=D(W,b);if(O.hasEagerState=!0,O.eagerState=ie,Si(ie,W)){var me=f.interleaved;me===null?(O.next=O,Gu(f)):(O.next=me.next,me.next=O),f.interleaved=O;return}}catch{}finally{}b=$x(c,f,O,j),b!==null&&(O=Ps(),Mo(b,c,j,O),n5(b,f,j))}}function t5(c){var f=c.alternate;return c===on||f!==null&&f===on}function r5(c,f){Zh=Fx=!0;var b=c.pending;b===null?f.next=f:(f.next=b.next,b.next=f),c.pending=f}function n5(c,f,b){if((b&4194240)!==0){var j=f.lanes;j&=c.pendingLanes,b|=j,f.lanes=b,Gi(c,b)}}var Gx={readContext:qn,useCallback:us,useContext:us,useEffect:us,useImperativeHandle:us,useInsertionEffect:us,useLayoutEffect:us,useMemo:us,useReducer:us,useRef:us,useState:us,useDebugValue:us,useDeferredValue:us,useTransition:us,useMutableSource:us,useSyncExternalStore:us,useId:us,unstable_isNewReconciler:!1},zV={readContext:qn,useCallback:function(c,f){return yl().memoizedState=[c,f===void 0?null:f],c},useContext:qn,useEffect:qk,useImperativeHandle:function(c,f,b){return b=b!=null?b.concat([c]):null,Ux(4194308,4,Yk.bind(null,f,c),b)},useLayoutEffect:function(c,f){return Ux(4194308,4,c,f)},useInsertionEffect:function(c,f){return Ux(4,2,c,f)},useMemo:function(c,f){var b=yl();return f=f===void 0?null:f,c=c(),b.memoizedState=[c,f],c},useReducer:function(c,f,b){var j=yl();return f=b!==void 0?b(f):f,j.memoizedState=j.baseState=f,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:f},j.queue=c,c=c.dispatch=HV.bind(null,on,c),[j.memoizedState,c]},useRef:function(c){var f=yl();return c={current:c},f.memoizedState=c},useState:Kk,useDebugValue:iS,useDeferredValue:function(c){return yl().memoizedState=c},useTransition:function(){var c=Kk(!1),f=c[0];return c=GV.bind(null,c[1]),yl().memoizedState=c,[f,c]},useMutableSource:function(){},useSyncExternalStore:function(c,f,b){var j=on,O=yl();if(xn){if(b===void 0)throw Error(r(407));b=b()}else{if(b=f(),Ua===null)throw Error(r(349));(Ri&30)!==0||Fk(j,f,b)}O.memoizedState=b;var D={value:b,getSnapshot:f};return O.queue=D,qk(Bk.bind(null,j,D,c),[c]),j.flags|=2048,t0(9,Uk.bind(null,j,D,b,f),void 0,null),b},useId:function(){var c=yl(),f=Ua.identifierPrefix;if(xn){var b=eo,j=Ji;b=(j&~(1<<32-Fr(j)-1)).toString(32)+b,f=":"+f+"R"+b,b=Jh++,0<b&&(f+="H"+b.toString(32)),f+=":"}else b=BV++,f=":"+f+"r"+b.toString(32)+":";return c.memoizedState=f},unstable_isNewReconciler:!1},qV={readContext:qn,useCallback:Qk,useContext:qn,useEffect:sS,useImperativeHandle:Xk,useInsertionEffect:Wk,useLayoutEffect:Vk,useMemo:Zk,useReducer:nS,useRef:zk,useState:function(){return nS(e0)},useDebugValue:iS,useDeferredValue:function(c){var f=no();return Jk(f,Sa.memoizedState,c)},useTransition:function(){var c=nS(e0)[0],f=no().memoizedState;return[c,f]},useMutableSource:Lk,useSyncExternalStore:$k,useId:e5,unstable_isNewReconciler:!1},WV={readContext:qn,useCallback:Qk,useContext:qn,useEffect:sS,useImperativeHandle:Xk,useInsertionEffect:Wk,useLayoutEffect:Vk,useMemo:Zk,useReducer:aS,useRef:zk,useState:function(){return aS(e0)},useDebugValue:iS,useDeferredValue:function(c){var f=no();return Sa===null?f.memoizedState=c:Jk(f,Sa.memoizedState,c)},useTransition:function(){var c=aS(e0)[0],f=no().memoizedState;return[c,f]},useMutableSource:Lk,useSyncExternalStore:$k,useId:e5,unstable_isNewReconciler:!1};function Po(c,f){if(c&&c.defaultProps){f=re({},f),c=c.defaultProps;for(var b in c)f[b]===void 0&&(f[b]=c[b]);return f}return f}function oS(c,f,b,j){f=c.memoizedState,b=b(j,f),b=b==null?f:re({},f,b),c.memoizedState=b,c.lanes===0&&(c.updateQueue.baseState=b)}var Hx={isMounted:function(c){return(c=c._reactInternals)?Cn(c)===c:!1},enqueueSetState:function(c,f,b){c=c._reactInternals;var j=Ps(),O=Od(c),D=Q(j,O);D.payload=f,b!=null&&(D.callback=b),f=ce(c,D,O),f!==null&&(Mo(f,c,O,j),ae(f,c,O))},enqueueReplaceState:function(c,f,b){c=c._reactInternals;var j=Ps(),O=Od(c),D=Q(j,O);D.tag=1,D.payload=f,b!=null&&(D.callback=b),f=ce(c,D,O),f!==null&&(Mo(f,c,O,j),ae(f,c,O))},enqueueForceUpdate:function(c,f){c=c._reactInternals;var b=Ps(),j=Od(c),O=Q(b,j);O.tag=2,f!=null&&(O.callback=f),f=ce(c,O,j),f!==null&&(Mo(f,c,j,b),ae(f,c,j))}};function a5(c,f,b,j,O,D,W){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(j,D,W):f.prototype&&f.prototype.isPureReactComponent?!Ei(b,j)||!Ei(O,D):!0}function s5(c,f,b){var j=!1,O=Ai,D=f.contextType;return typeof D=="object"&&D!==null?D=qn(D):(O=la(f)?va:kn.current,j=f.contextTypes,D=(j=j!=null)?Xi(c,O):Ai),f=new f(b,D),c.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Hx,c.stateNode=f,f._reactInternals=c,j&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=O,c.__reactInternalMemoizedMaskedChildContext=D),f}function i5(c,f,b,j){c=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(b,j),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(b,j),f.state!==c&&Hx.enqueueReplaceState(f,f.state,null)}function lS(c,f,b,j){var O=c.stateNode;O.props=b,O.state=c.memoizedState,O.refs={},P(c);var D=f.contextType;typeof D=="object"&&D!==null?O.context=qn(D):(D=la(f)?va:kn.current,O.context=Xi(c,D)),O.state=c.memoizedState,D=f.getDerivedStateFromProps,typeof D=="function"&&(oS(c,f,D,b),O.state=c.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(f=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),f!==O.state&&Hx.enqueueReplaceState(O,O.state,null),Te(c,b,O,j),O.state=c.memoizedState),typeof O.componentDidMount=="function"&&(c.flags|=4194308)}function fp(c,f){try{var b="",j=f;do b+=se(j),j=j.return;while(j);var O=b}catch(D){O=`
Error generating stack: `+D.message+`
`+D.stack}return{value:c,source:f,stack:O,digest:null}}function cS(c,f,b){return{value:c,source:null,stack:b??null,digest:f??null}}function dS(c,f){try{console.error(f.value)}catch(b){setTimeout(function(){throw b})}}var VV=typeof WeakMap=="function"?WeakMap:Map;function o5(c,f,b){b=Q(-1,b),b.tag=3,b.payload={element:null};var j=f.value;return b.callback=function(){Xx||(Xx=!0,wS=j),dS(c,f)},b}function l5(c,f,b){b=Q(-1,b),b.tag=3;var j=c.type.getDerivedStateFromError;if(typeof j=="function"){var O=f.value;b.payload=function(){return j(O)},b.callback=function(){dS(c,f)}}var D=c.stateNode;return D!==null&&typeof D.componentDidCatch=="function"&&(b.callback=function(){dS(c,f),typeof j!="function"&&(Cd===null?Cd=new Set([this]):Cd.add(this));var W=f.stack;this.componentDidCatch(f.value,{componentStack:W!==null?W:""})}),b}function c5(c,f,b){var j=c.pingCache;if(j===null){j=c.pingCache=new VV;var O=new Set;j.set(f,O)}else O=j.get(f),O===void 0&&(O=new Set,j.set(f,O));O.has(b)||(O.add(b),c=lY.bind(null,c,f,b),f.then(c,c))}function d5(c){do{var f;if((f=c.tag===13)&&(f=c.memoizedState,f=f!==null?f.dehydrated!==null:!0),f)return c;c=c.return}while(c!==null);return null}function u5(c,f,b,j,O){return(c.mode&1)===0?(c===f?c.flags|=65536:(c.flags|=128,b.flags|=131072,b.flags&=-52805,b.tag===1&&(b.alternate===null?b.tag=17:(f=Q(-1,1),f.tag=2,ce(b,f,1))),b.lanes|=1),c):(c.flags|=65536,c.lanes=O,c)}var YV=_.ReactCurrentOwner,ti=!1;function ks(c,f,b,j){f.child=c===null?Fu(f,null,b,j):jc(f,c.child,b,j)}function f5(c,f,b,j,O){b=b.render;var D=f.ref;return Rs(f,O),j=tS(c,f,b,j,D,O),b=rS(),c!==null&&!ti?(f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~O,_c(c,f,O)):(xn&&b&&Os(f),f.flags|=1,ks(c,f,j,O),f.child)}function p5(c,f,b,j,O){if(c===null){var D=b.type;return typeof D=="function"&&!kS(D)&&D.defaultProps===void 0&&b.compare===null&&b.defaultProps===void 0?(f.tag=15,f.type=D,m5(c,f,D,j,O)):(c=rb(b.type,null,j,f,f.mode,O),c.ref=f.ref,c.return=f,f.child=c)}if(D=c.child,(c.lanes&O)===0){var W=D.memoizedProps;if(b=b.compare,b=b!==null?b:Ei,b(W,j)&&c.ref===f.ref)return _c(c,f,O)}return f.flags|=1,c=kd(D,j),c.ref=f.ref,c.return=f,f.child=c}function m5(c,f,b,j,O){if(c!==null){var D=c.memoizedProps;if(Ei(D,j)&&c.ref===f.ref)if(ti=!1,f.pendingProps=j=D,(c.lanes&O)!==0)(c.flags&131072)!==0&&(ti=!0);else return f.lanes=c.lanes,_c(c,f,O)}return uS(c,f,b,j,O)}function h5(c,f,b){var j=f.pendingProps,O=j.children,D=c!==null?c.memoizedState:null;if(j.mode==="hidden")if((f.mode&1)===0)f.memoizedState={baseLanes:0,cachePool:null,transitions:null},Jr(mp,ki),ki|=b;else{if((b&1073741824)===0)return c=D!==null?D.baseLanes|b:b,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:c,cachePool:null,transitions:null},f.updateQueue=null,Jr(mp,ki),ki|=c,null;f.memoizedState={baseLanes:0,cachePool:null,transitions:null},j=D!==null?D.baseLanes:b,Jr(mp,ki),ki|=j}else D!==null?(j=D.baseLanes|b,f.memoizedState=null):j=b,Jr(mp,ki),ki|=j;return ks(c,f,O,b),f.child}function g5(c,f){var b=f.ref;(c===null&&b!==null||c!==null&&c.ref!==b)&&(f.flags|=512,f.flags|=2097152)}function uS(c,f,b,j,O){var D=la(b)?va:kn.current;return D=Xi(f,D),Rs(f,O),b=tS(c,f,b,j,D,O),j=rS(),c!==null&&!ti?(f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~O,_c(c,f,O)):(xn&&j&&Os(f),f.flags|=1,ks(c,f,b,O),f.child)}function x5(c,f,b,j,O){if(la(b)){var D=!0;cp(f)}else D=!1;if(Rs(f,O),f.stateNode===null)zx(c,f),s5(f,b,j),lS(f,b,j,O),j=!0;else if(c===null){var W=f.stateNode,ie=f.memoizedProps;W.props=ie;var me=W.context,Ce=b.contextType;typeof Ce=="object"&&Ce!==null?Ce=qn(Ce):(Ce=la(b)?va:kn.current,Ce=Xi(f,Ce));var et=b.getDerivedStateFromProps,at=typeof et=="function"||typeof W.getSnapshotBeforeUpdate=="function";at||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(ie!==j||me!==Ce)&&i5(f,W,j,Ce),bl=!1;var Qe=f.memoizedState;W.state=Qe,Te(f,j,W,O),me=f.memoizedState,ie!==j||Qe!==me||cs.current||bl?(typeof et=="function"&&(oS(f,b,et,j),me=f.memoizedState),(ie=bl||a5(f,b,ie,j,Qe,me,Ce))?(at||typeof W.UNSAFE_componentWillMount!="function"&&typeof W.componentWillMount!="function"||(typeof W.componentWillMount=="function"&&W.componentWillMount(),typeof W.UNSAFE_componentWillMount=="function"&&W.UNSAFE_componentWillMount()),typeof W.componentDidMount=="function"&&(f.flags|=4194308)):(typeof W.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=j,f.memoizedState=me),W.props=j,W.state=me,W.context=Ce,j=ie):(typeof W.componentDidMount=="function"&&(f.flags|=4194308),j=!1)}else{W=f.stateNode,K(c,f),ie=f.memoizedProps,Ce=f.type===f.elementType?ie:Po(f.type,ie),W.props=Ce,at=f.pendingProps,Qe=W.context,me=b.contextType,typeof me=="object"&&me!==null?me=qn(me):(me=la(b)?va:kn.current,me=Xi(f,me));var Nt=b.getDerivedStateFromProps;(et=typeof Nt=="function"||typeof W.getSnapshotBeforeUpdate=="function")||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(ie!==at||Qe!==me)&&i5(f,W,j,me),bl=!1,Qe=f.memoizedState,W.state=Qe,Te(f,j,W,O);var Tt=f.memoizedState;ie!==at||Qe!==Tt||cs.current||bl?(typeof Nt=="function"&&(oS(f,b,Nt,j),Tt=f.memoizedState),(Ce=bl||a5(f,b,Ce,j,Qe,Tt,me)||!1)?(et||typeof W.UNSAFE_componentWillUpdate!="function"&&typeof W.componentWillUpdate!="function"||(typeof W.componentWillUpdate=="function"&&W.componentWillUpdate(j,Tt,me),typeof W.UNSAFE_componentWillUpdate=="function"&&W.UNSAFE_componentWillUpdate(j,Tt,me)),typeof W.componentDidUpdate=="function"&&(f.flags|=4),typeof W.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof W.componentDidUpdate!="function"||ie===c.memoizedProps&&Qe===c.memoizedState||(f.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||ie===c.memoizedProps&&Qe===c.memoizedState||(f.flags|=1024),f.memoizedProps=j,f.memoizedState=Tt),W.props=j,W.state=Tt,W.context=me,j=Ce):(typeof W.componentDidUpdate!="function"||ie===c.memoizedProps&&Qe===c.memoizedState||(f.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||ie===c.memoizedProps&&Qe===c.memoizedState||(f.flags|=1024),j=!1)}return fS(c,f,b,j,D,O)}function fS(c,f,b,j,O,D){g5(c,f);var W=(f.flags&128)!==0;if(!j&&!W)return O&&yc(f,b,!1),_c(c,f,D);j=f.stateNode,YV.current=f;var ie=W&&typeof b.getDerivedStateFromError!="function"?null:j.render();return f.flags|=1,c!==null&&W?(f.child=jc(f,c.child,null,D),f.child=jc(f,null,ie,D)):ks(c,f,ie,D),f.memoizedState=j.state,O&&yc(f,b,!0),f.child}function b5(c){var f=c.stateNode;f.pendingContext?Vh(c,f.pendingContext,f.pendingContext!==f.context):f.context&&Vh(c,f.context,!1),yr(c,f.containerInfo)}function y5(c,f,b,j,O){return Oi(),jd(O),f.flags|=256,ks(c,f,b,j),f.child}var pS={dehydrated:null,treeContext:null,retryLane:0};function mS(c){return{baseLanes:c,cachePool:null,transitions:null}}function v5(c,f,b){var j=f.pendingProps,O=vr.current,D=!1,W=(f.flags&128)!==0,ie;if((ie=W)||(ie=c!==null&&c.memoizedState===null?!1:(O&2)!==0),ie?(D=!0,f.flags&=-129):(c===null||c.memoizedState!==null)&&(O|=1),Jr(vr,O&1),c===null)return up(f),c=f.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?((f.mode&1)===0?f.lanes=1:c.data==="$!"?f.lanes=8:f.lanes=1073741824,null):(W=j.children,c=j.fallback,D?(j=f.mode,D=f.child,W={mode:"hidden",children:W},(j&1)===0&&D!==null?(D.childLanes=0,D.pendingProps=W):D=nb(W,j,0,null),c=Wu(c,j,b,null),D.return=f,c.return=f,D.sibling=c,f.child=D,f.child.memoizedState=mS(b),f.memoizedState=pS,c):hS(f,W));if(O=c.memoizedState,O!==null&&(ie=O.dehydrated,ie!==null))return XV(c,f,W,j,ie,O,b);if(D){D=j.fallback,W=f.mode,O=c.child,ie=O.sibling;var me={mode:"hidden",children:j.children};return(W&1)===0&&f.child!==O?(j=f.child,j.childLanes=0,j.pendingProps=me,f.deletions=null):(j=kd(O,me),j.subtreeFlags=O.subtreeFlags&14680064),ie!==null?D=kd(ie,D):(D=Wu(D,W,b,null),D.flags|=2),D.return=f,j.return=f,j.sibling=D,f.child=j,j=D,D=f.child,W=c.child.memoizedState,W=W===null?mS(b):{baseLanes:W.baseLanes|b,cachePool:null,transitions:W.transitions},D.memoizedState=W,D.childLanes=c.childLanes&~b,f.memoizedState=pS,j}return D=c.child,c=D.sibling,j=kd(D,{mode:"visible",children:j.children}),(f.mode&1)===0&&(j.lanes=b),j.return=f,j.sibling=null,c!==null&&(b=f.deletions,b===null?(f.deletions=[c],f.flags|=16):b.push(c)),f.child=j,f.memoizedState=null,j}function hS(c,f){return f=nb({mode:"visible",children:f},c.mode,0,null),f.return=c,c.child=f}function Kx(c,f,b,j){return j!==null&&jd(j),jc(f,c.child,null,b),c=hS(f,f.pendingProps.children),c.flags|=2,f.memoizedState=null,c}function XV(c,f,b,j,O,D,W){if(b)return f.flags&256?(f.flags&=-257,j=cS(Error(r(422))),Kx(c,f,W,j)):f.memoizedState!==null?(f.child=c.child,f.flags|=128,null):(D=j.fallback,O=f.mode,j=nb({mode:"visible",children:j.children},O,0,null),D=Wu(D,O,W,null),D.flags|=2,j.return=f,D.return=f,j.sibling=D,f.child=j,(f.mode&1)!==0&&jc(f,c.child,null,W),f.child.memoizedState=mS(W),f.memoizedState=pS,D);if((f.mode&1)===0)return Kx(c,f,W,null);if(O.data==="$!"){if(j=O.nextSibling&&O.nextSibling.dataset,j)var ie=j.dgst;return j=ie,D=Error(r(419)),j=cS(D,j,void 0),Kx(c,f,W,j)}if(ie=(W&c.childLanes)!==0,ti||ie){if(j=Ua,j!==null){switch(W&-W){case 4:O=2;break;case 16:O=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:O=32;break;case 536870912:O=268435456;break;default:O=0}O=(O&(j.suspendedLanes|W))!==0?0:O,O!==0&&O!==D.retryLane&&(D.retryLane=O,ko(c,O),Mo(j,c,O,-1))}return RS(),j=cS(Error(r(421))),Kx(c,f,W,j)}return O.data==="$?"?(f.flags|=128,f.child=c.child,f=cY.bind(null,c),O._reactRetry=f,null):(c=D.treeContext,Na=To(O.nextSibling),$n=f,xn=!0,Ci=null,c!==null&&(Ts[fn++]=Ji,Ts[fn++]=eo,Ts[fn++]=Zi,Ji=c.id,eo=c.overflow,Zi=f),f=hS(f,j.children),f.flags|=4096,f)}function N5(c,f,b){c.lanes|=f;var j=c.alternate;j!==null&&(j.lanes|=f),Bu(c.return,f,b)}function gS(c,f,b,j,O){var D=c.memoizedState;D===null?c.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:j,tail:b,tailMode:O}:(D.isBackwards=f,D.rendering=null,D.renderingStartTime=0,D.last=j,D.tail=b,D.tailMode=O)}function S5(c,f,b){var j=f.pendingProps,O=j.revealOrder,D=j.tail;if(ks(c,f,j.children,b),j=vr.current,(j&2)!==0)j=j&1|2,f.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=f.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&N5(c,b,f);else if(c.tag===19)N5(c,b,f);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===f)break e;for(;c.sibling===null;){if(c.return===null||c.return===f)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}j&=1}if(Jr(vr,j),(f.mode&1)===0)f.memoizedState=null;else switch(O){case"forwards":for(b=f.child,O=null;b!==null;)c=b.alternate,c!==null&&ei(c)===null&&(O=b),b=b.sibling;b=O,b===null?(O=f.child,f.child=null):(O=b.sibling,b.sibling=null),gS(f,!1,O,b,D);break;case"backwards":for(b=null,O=f.child,f.child=null;O!==null;){if(c=O.alternate,c!==null&&ei(c)===null){f.child=O;break}c=O.sibling,O.sibling=b,b=O,O=c}gS(f,!0,b,null,D);break;case"together":gS(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function zx(c,f){(f.mode&1)===0&&c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2)}function _c(c,f,b){if(c!==null&&(f.dependencies=c.dependencies),Hu|=f.lanes,(b&f.childLanes)===0)return null;if(c!==null&&f.child!==c.child)throw Error(r(153));if(f.child!==null){for(c=f.child,b=kd(c,c.pendingProps),f.child=b,b.return=f;c.sibling!==null;)c=c.sibling,b=b.sibling=kd(c,c.pendingProps),b.return=f;b.sibling=null}return f.child}function QV(c,f,b){switch(f.tag){case 3:b5(f),Oi();break;case 5:Ad(f);break;case 1:la(f.type)&&cp(f);break;case 4:yr(f,f.stateNode.containerInfo);break;case 10:var j=f.type._context,O=f.memoizedProps.value;Jr(gl,j._currentValue),j._currentValue=O;break;case 13:if(j=f.memoizedState,j!==null)return j.dehydrated!==null?(Jr(vr,vr.current&1),f.flags|=128,null):(b&f.child.childLanes)!==0?v5(c,f,b):(Jr(vr,vr.current&1),c=_c(c,f,b),c!==null?c.sibling:null);Jr(vr,vr.current&1);break;case 19:if(j=(b&f.childLanes)!==0,(c.flags&128)!==0){if(j)return S5(c,f,b);f.flags|=128}if(O=f.memoizedState,O!==null&&(O.rendering=null,O.tail=null,O.lastEffect=null),Jr(vr,vr.current),j)break;return null;case 22:case 23:return f.lanes=0,h5(c,f,b)}return _c(c,f,b)}var E5,xS,j5,w5;E5=function(c,f){for(var b=f.child;b!==null;){if(b.tag===5||b.tag===6)c.appendChild(b.stateNode);else if(b.tag!==4&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===f)break;for(;b.sibling===null;){if(b.return===null||b.return===f)return;b=b.return}b.sibling.return=b.return,b=b.sibling}},xS=function(){},j5=function(c,f,b,j){var O=c.memoizedProps;if(O!==j){c=f.stateNode,Ur(Pe.current);var D=null;switch(b){case"input":O=ge(c,O),j=ge(c,j),D=[];break;case"select":O=re({},O,{value:void 0}),j=re({},j,{value:void 0}),D=[];break;case"textarea":O=Me(c,O),j=Me(c,j),D=[];break;default:typeof O.onClick!="function"&&typeof j.onClick=="function"&&(c.onclick=Yr)}cn(b,j);var W;b=null;for(Ce in O)if(!j.hasOwnProperty(Ce)&&O.hasOwnProperty(Ce)&&O[Ce]!=null)if(Ce==="style"){var ie=O[Ce];for(W in ie)ie.hasOwnProperty(W)&&(b||(b={}),b[W]="")}else Ce!=="dangerouslySetInnerHTML"&&Ce!=="children"&&Ce!=="suppressContentEditableWarning"&&Ce!=="suppressHydrationWarning"&&Ce!=="autoFocus"&&(s.hasOwnProperty(Ce)?D||(D=[]):(D=D||[]).push(Ce,null));for(Ce in j){var me=j[Ce];if(ie=O?.[Ce],j.hasOwnProperty(Ce)&&me!==ie&&(me!=null||ie!=null))if(Ce==="style")if(ie){for(W in ie)!ie.hasOwnProperty(W)||me&&me.hasOwnProperty(W)||(b||(b={}),b[W]="");for(W in me)me.hasOwnProperty(W)&&ie[W]!==me[W]&&(b||(b={}),b[W]=me[W])}else b||(D||(D=[]),D.push(Ce,b)),b=me;else Ce==="dangerouslySetInnerHTML"?(me=me?me.__html:void 0,ie=ie?ie.__html:void 0,me!=null&&ie!==me&&(D=D||[]).push(Ce,me)):Ce==="children"?typeof me!="string"&&typeof me!="number"||(D=D||[]).push(Ce,""+me):Ce!=="suppressContentEditableWarning"&&Ce!=="suppressHydrationWarning"&&(s.hasOwnProperty(Ce)?(me!=null&&Ce==="onScroll"&&sn("scroll",c),D||ie===me||(D=[])):(D=D||[]).push(Ce,me))}b&&(D=D||[]).push("style",b);var Ce=D;(f.updateQueue=Ce)&&(f.flags|=4)}},w5=function(c,f,b,j){b!==j&&(f.flags|=4)};function r0(c,f){if(!xn)switch(c.tailMode){case"hidden":f=c.tail;for(var b=null;f!==null;)f.alternate!==null&&(b=f),f=f.sibling;b===null?c.tail=null:b.sibling=null;break;case"collapsed":b=c.tail;for(var j=null;b!==null;)b.alternate!==null&&(j=b),b=b.sibling;j===null?f||c.tail===null?c.tail=null:c.tail.sibling=null:j.sibling=null}}function fs(c){var f=c.alternate!==null&&c.alternate.child===c.child,b=0,j=0;if(f)for(var O=c.child;O!==null;)b|=O.lanes|O.childLanes,j|=O.subtreeFlags&14680064,j|=O.flags&14680064,O.return=c,O=O.sibling;else for(O=c.child;O!==null;)b|=O.lanes|O.childLanes,j|=O.subtreeFlags,j|=O.flags,O.return=c,O=O.sibling;return c.subtreeFlags|=j,c.childLanes=b,f}function ZV(c,f,b){var j=f.pendingProps;switch(Xh(f),f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fs(f),null;case 1:return la(f.type)&&Du(),fs(f),null;case 3:return j=f.stateNode,ds(),Lr(cs),Lr(kn),Qh(),j.pendingContext&&(j.context=j.pendingContext,j.pendingContext=null),(c===null||c.child===null)&&(Ed(f)?f.flags|=4:c===null||c.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,Ci!==null&&(CS(Ci),Ci=null))),xS(c,f),fs(f),null;case 5:Xr(f);var O=Ur(At.current);if(b=f.type,c!==null&&f.stateNode!=null)j5(c,f,b,j,O),c.ref!==f.ref&&(f.flags|=512,f.flags|=2097152);else{if(!j){if(f.stateNode===null)throw Error(r(166));return fs(f),null}if(c=Ur(Pe.current),Ed(f)){j=f.stateNode,b=f.type;var D=f.memoizedProps;switch(j[Xs]=f,j[wi]=D,c=(f.mode&1)!==0,b){case"dialog":sn("cancel",j),sn("close",j);break;case"iframe":case"object":case"embed":sn("load",j);break;case"video":case"audio":for(O=0;O<pc.length;O++)sn(pc[O],j);break;case"source":sn("error",j);break;case"img":case"image":case"link":sn("error",j),sn("load",j);break;case"details":sn("toggle",j);break;case"input":_e(j,D),sn("invalid",j);break;case"select":j._wrapperState={wasMultiple:!!D.multiple},sn("invalid",j);break;case"textarea":dt(j,D),sn("invalid",j)}cn(b,D),O=null;for(var W in D)if(D.hasOwnProperty(W)){var ie=D[W];W==="children"?typeof ie=="string"?j.textContent!==ie&&(D.suppressHydrationWarning!==!0&&Sn(j.textContent,ie,c),O=["children",ie]):typeof ie=="number"&&j.textContent!==""+ie&&(D.suppressHydrationWarning!==!0&&Sn(j.textContent,ie,c),O=["children",""+ie]):s.hasOwnProperty(W)&&ie!=null&&W==="onScroll"&&sn("scroll",j)}switch(b){case"input":Fe(j),ye(j,D,!0);break;case"textarea":Fe(j),He(j);break;case"select":case"option":break;default:typeof D.onClick=="function"&&(j.onclick=Yr)}j=O,f.updateQueue=j,j!==null&&(f.flags|=4)}else{W=O.nodeType===9?O:O.ownerDocument,c==="http://www.w3.org/1999/xhtml"&&(c=Ye(b)),c==="http://www.w3.org/1999/xhtml"?b==="script"?(c=W.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):typeof j.is=="string"?c=W.createElement(b,{is:j.is}):(c=W.createElement(b),b==="select"&&(W=c,j.multiple?W.multiple=!0:j.size&&(W.size=j.size))):c=W.createElementNS(c,b),c[Xs]=f,c[wi]=j,E5(c,f,!1,!1),f.stateNode=c;e:{switch(W=wt(b,j),b){case"dialog":sn("cancel",c),sn("close",c),O=j;break;case"iframe":case"object":case"embed":sn("load",c),O=j;break;case"video":case"audio":for(O=0;O<pc.length;O++)sn(pc[O],c);O=j;break;case"source":sn("error",c),O=j;break;case"img":case"image":case"link":sn("error",c),sn("load",c),O=j;break;case"details":sn("toggle",c),O=j;break;case"input":_e(c,j),O=ge(c,j),sn("invalid",c);break;case"option":O=j;break;case"select":c._wrapperState={wasMultiple:!!j.multiple},O=re({},j,{value:void 0}),sn("invalid",c);break;case"textarea":dt(c,j),O=Me(c,j),sn("invalid",c);break;default:O=j}cn(b,O),ie=O;for(D in ie)if(ie.hasOwnProperty(D)){var me=ie[D];D==="style"?br(c,me):D==="dangerouslySetInnerHTML"?(me=me?me.__html:void 0,me!=null&&hr(c,me)):D==="children"?typeof me=="string"?(b!=="textarea"||me!=="")&&Gt(c,me):typeof me=="number"&&Gt(c,""+me):D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&D!=="autoFocus"&&(s.hasOwnProperty(D)?me!=null&&D==="onScroll"&&sn("scroll",c):me!=null&&C(c,D,me,W))}switch(b){case"input":Fe(c),ye(c,j,!1);break;case"textarea":Fe(c),He(c);break;case"option":j.value!=null&&c.setAttribute("value",""+we(j.value));break;case"select":c.multiple=!!j.multiple,D=j.value,D!=null?rt(c,!!j.multiple,D,!1):j.defaultValue!=null&&rt(c,!!j.multiple,j.defaultValue,!0);break;default:typeof O.onClick=="function"&&(c.onclick=Yr)}switch(b){case"button":case"input":case"select":case"textarea":j=!!j.autoFocus;break e;case"img":j=!0;break e;default:j=!1}}j&&(f.flags|=4)}f.ref!==null&&(f.flags|=512,f.flags|=2097152)}return fs(f),null;case 6:if(c&&f.stateNode!=null)w5(c,f,c.memoizedProps,j);else{if(typeof j!="string"&&f.stateNode===null)throw Error(r(166));if(b=Ur(At.current),Ur(Pe.current),Ed(f)){if(j=f.stateNode,b=f.memoizedProps,j[Xs]=f,(D=j.nodeValue!==b)&&(c=$n,c!==null))switch(c.tag){case 3:Sn(j.nodeValue,b,(c.mode&1)!==0);break;case 5:c.memoizedProps.suppressHydrationWarning!==!0&&Sn(j.nodeValue,b,(c.mode&1)!==0)}D&&(f.flags|=4)}else j=(b.nodeType===9?b:b.ownerDocument).createTextNode(j),j[Xs]=f,f.stateNode=j}return fs(f),null;case 13:if(Lr(vr),j=f.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(xn&&Na!==null&&(f.mode&1)!==0&&(f.flags&128)===0)to(),Oi(),f.flags|=98560,D=!1;else if(D=Ed(f),j!==null&&j.dehydrated!==null){if(c===null){if(!D)throw Error(r(318));if(D=f.memoizedState,D=D!==null?D.dehydrated:null,!D)throw Error(r(317));D[Xs]=f}else Oi(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;fs(f),D=!1}else Ci!==null&&(CS(Ci),Ci=null),D=!0;if(!D)return f.flags&65536?f:null}return(f.flags&128)!==0?(f.lanes=b,f):(j=j!==null,j!==(c!==null&&c.memoizedState!==null)&&j&&(f.child.flags|=8192,(f.mode&1)!==0&&(c===null||(vr.current&1)!==0?Ea===0&&(Ea=3):RS())),f.updateQueue!==null&&(f.flags|=4),fs(f),null);case 4:return ds(),xS(c,f),c===null&&mc(f.stateNode.containerInfo),fs(f),null;case 10:return Uu(f.type._context),fs(f),null;case 17:return la(f.type)&&Du(),fs(f),null;case 19:if(Lr(vr),D=f.memoizedState,D===null)return fs(f),null;if(j=(f.flags&128)!==0,W=D.rendering,W===null)if(j)r0(D,!1);else{if(Ea!==0||c!==null&&(c.flags&128)!==0)for(c=f.child;c!==null;){if(W=ei(c),W!==null){for(f.flags|=128,r0(D,!1),j=W.updateQueue,j!==null&&(f.updateQueue=j,f.flags|=4),f.subtreeFlags=0,j=b,b=f.child;b!==null;)D=b,c=j,D.flags&=14680066,W=D.alternate,W===null?(D.childLanes=0,D.lanes=c,D.child=null,D.subtreeFlags=0,D.memoizedProps=null,D.memoizedState=null,D.updateQueue=null,D.dependencies=null,D.stateNode=null):(D.childLanes=W.childLanes,D.lanes=W.lanes,D.child=W.child,D.subtreeFlags=0,D.deletions=null,D.memoizedProps=W.memoizedProps,D.memoizedState=W.memoizedState,D.updateQueue=W.updateQueue,D.type=W.type,c=W.dependencies,D.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),b=b.sibling;return Jr(vr,vr.current&1|2),f.child}c=c.sibling}D.tail!==null&&Tr()>hp&&(f.flags|=128,j=!0,r0(D,!1),f.lanes=4194304)}else{if(!j)if(c=ei(W),c!==null){if(f.flags|=128,j=!0,b=c.updateQueue,b!==null&&(f.updateQueue=b,f.flags|=4),r0(D,!0),D.tail===null&&D.tailMode==="hidden"&&!W.alternate&&!xn)return fs(f),null}else 2*Tr()-D.renderingStartTime>hp&&b!==1073741824&&(f.flags|=128,j=!0,r0(D,!1),f.lanes=4194304);D.isBackwards?(W.sibling=f.child,f.child=W):(b=D.last,b!==null?b.sibling=W:f.child=W,D.last=W)}return D.tail!==null?(f=D.tail,D.rendering=f,D.tail=f.sibling,D.renderingStartTime=Tr(),f.sibling=null,b=vr.current,Jr(vr,j?b&1|2:b&1),f):(fs(f),null);case 22:case 23:return OS(),j=f.memoizedState!==null,c!==null&&c.memoizedState!==null!==j&&(f.flags|=8192),j&&(f.mode&1)!==0?(ki&1073741824)!==0&&(fs(f),f.subtreeFlags&6&&(f.flags|=8192)):fs(f),null;case 24:return null;case 25:return null}throw Error(r(156,f.tag))}function JV(c,f){switch(Xh(f),f.tag){case 1:return la(f.type)&&Du(),c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 3:return ds(),Lr(cs),Lr(kn),Qh(),c=f.flags,(c&65536)!==0&&(c&128)===0?(f.flags=c&-65537|128,f):null;case 5:return Xr(f),null;case 13:if(Lr(vr),c=f.memoizedState,c!==null&&c.dehydrated!==null){if(f.alternate===null)throw Error(r(340));Oi()}return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 19:return Lr(vr),null;case 4:return ds(),null;case 10:return Uu(f.type._context),null;case 22:case 23:return OS(),null;case 24:return null;default:return null}}var qx=!1,ps=!1,eY=typeof WeakSet=="function"?WeakSet:Set,_t=null;function pp(c,f){var b=c.ref;if(b!==null)if(typeof b=="function")try{b(null)}catch(j){Wn(c,f,j)}else b.current=null}function bS(c,f,b){try{b()}catch(j){Wn(c,f,j)}}var A5=!1;function tY(c,f){if(ya=Mr,c=fc(),Qf(c)){if("selectionStart"in c)var b={start:c.selectionStart,end:c.selectionEnd};else e:{b=(b=c.ownerDocument)&&b.defaultView||window;var j=b.getSelection&&b.getSelection();if(j&&j.rangeCount!==0){b=j.anchorNode;var O=j.anchorOffset,D=j.focusNode;j=j.focusOffset;try{b.nodeType,D.nodeType}catch{b=null;break e}var W=0,ie=-1,me=-1,Ce=0,et=0,at=c,Qe=null;t:for(;;){for(var Nt;at!==b||O!==0&&at.nodeType!==3||(ie=W+O),at!==D||j!==0&&at.nodeType!==3||(me=W+j),at.nodeType===3&&(W+=at.nodeValue.length),(Nt=at.firstChild)!==null;)Qe=at,at=Nt;for(;;){if(at===c)break t;if(Qe===b&&++Ce===O&&(ie=W),Qe===D&&++et===j&&(me=W),(Nt=at.nextSibling)!==null)break;at=Qe,Qe=at.parentNode}at=Nt}b=ie===-1||me===-1?null:{start:ie,end:me}}else b=null}b=b||{start:0,end:0}}else b=null;for(ku={focusedElem:c,selectionRange:b},Mr=!1,_t=f;_t!==null;)if(f=_t,c=f.child,(f.subtreeFlags&1028)!==0&&c!==null)c.return=f,_t=c;else for(;_t!==null;){f=_t;try{var Tt=f.alternate;if((f.flags&1024)!==0)switch(f.tag){case 0:case 11:case 15:break;case 1:if(Tt!==null){var It=Tt.memoizedProps,ca=Tt.memoizedState,Ee=f.stateNode,be=Ee.getSnapshotBeforeUpdate(f.elementType===f.type?It:Po(f.type,It),ca);Ee.__reactInternalSnapshotBeforeUpdate=be}break;case 3:var Ae=f.stateNode.containerInfo;Ae.nodeType===1?Ae.textContent="":Ae.nodeType===9&&Ae.documentElement&&Ae.removeChild(Ae.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(ct){Wn(f,f.return,ct)}if(c=f.sibling,c!==null){c.return=f.return,_t=c;break}_t=f.return}return Tt=A5,A5=!1,Tt}function n0(c,f,b){var j=f.updateQueue;if(j=j!==null?j.lastEffect:null,j!==null){var O=j=j.next;do{if((O.tag&c)===c){var D=O.destroy;O.destroy=void 0,D!==void 0&&bS(f,b,D)}O=O.next}while(O!==j)}}function Wx(c,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var b=f=f.next;do{if((b.tag&c)===c){var j=b.create;b.destroy=j()}b=b.next}while(b!==f)}}function yS(c){var f=c.ref;if(f!==null){var b=c.stateNode;switch(c.tag){case 5:c=b;break;default:c=b}typeof f=="function"?f(c):f.current=c}}function _5(c){var f=c.alternate;f!==null&&(c.alternate=null,_5(f)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(f=c.stateNode,f!==null&&(delete f[Xs],delete f[wi],delete f[Yi],delete f[xc],delete f[ip])),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function C5(c){return c.tag===5||c.tag===3||c.tag===4}function T5(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||C5(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function vS(c,f,b){var j=c.tag;if(j===5||j===6)c=c.stateNode,f?b.nodeType===8?b.parentNode.insertBefore(c,f):b.insertBefore(c,f):(b.nodeType===8?(f=b.parentNode,f.insertBefore(c,b)):(f=b,f.appendChild(c)),b=b._reactRootContainer,b!=null||f.onclick!==null||(f.onclick=Yr));else if(j!==4&&(c=c.child,c!==null))for(vS(c,f,b),c=c.sibling;c!==null;)vS(c,f,b),c=c.sibling}function NS(c,f,b){var j=c.tag;if(j===5||j===6)c=c.stateNode,f?b.insertBefore(c,f):b.appendChild(c);else if(j!==4&&(c=c.child,c!==null))for(NS(c,f,b),c=c.sibling;c!==null;)NS(c,f,b),c=c.sibling}var Za=null,Do=!1;function _d(c,f,b){for(b=b.child;b!==null;)O5(c,f,b),b=b.sibling}function O5(c,f,b){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(pi,b)}catch{}switch(b.tag){case 5:ps||pp(b,f);case 6:var j=Za,O=Do;Za=null,_d(c,f,b),Za=j,Do=O,Za!==null&&(Do?(c=Za,b=b.stateNode,c.nodeType===8?c.parentNode.removeChild(b):c.removeChild(b)):Za.removeChild(b.stateNode));break;case 18:Za!==null&&(Do?(c=Za,b=b.stateNode,c.nodeType===8?sp(c.parentNode,b):c.nodeType===1&&sp(c,b),sa(c)):sp(Za,b.stateNode));break;case 4:j=Za,O=Do,Za=b.stateNode.containerInfo,Do=!0,_d(c,f,b),Za=j,Do=O;break;case 0:case 11:case 14:case 15:if(!ps&&(j=b.updateQueue,j!==null&&(j=j.lastEffect,j!==null))){O=j=j.next;do{var D=O,W=D.destroy;D=D.tag,W!==void 0&&((D&2)!==0||(D&4)!==0)&&bS(b,f,W),O=O.next}while(O!==j)}_d(c,f,b);break;case 1:if(!ps&&(pp(b,f),j=b.stateNode,typeof j.componentWillUnmount=="function"))try{j.props=b.memoizedProps,j.state=b.memoizedState,j.componentWillUnmount()}catch(ie){Wn(b,f,ie)}_d(c,f,b);break;case 21:_d(c,f,b);break;case 22:b.mode&1?(ps=(j=ps)||b.memoizedState!==null,_d(c,f,b),ps=j):_d(c,f,b);break;default:_d(c,f,b)}}function R5(c){var f=c.updateQueue;if(f!==null){c.updateQueue=null;var b=c.stateNode;b===null&&(b=c.stateNode=new eY),f.forEach(function(j){var O=dY.bind(null,c,j);b.has(j)||(b.add(j),j.then(O,O))})}}function Io(c,f){var b=f.deletions;if(b!==null)for(var j=0;j<b.length;j++){var O=b[j];try{var D=c,W=f,ie=W;e:for(;ie!==null;){switch(ie.tag){case 5:Za=ie.stateNode,Do=!1;break e;case 3:Za=ie.stateNode.containerInfo,Do=!0;break e;case 4:Za=ie.stateNode.containerInfo,Do=!0;break e}ie=ie.return}if(Za===null)throw Error(r(160));O5(D,W,O),Za=null,Do=!1;var me=O.alternate;me!==null&&(me.return=null),O.return=null}catch(Ce){Wn(O,f,Ce)}}if(f.subtreeFlags&12854)for(f=f.child;f!==null;)k5(f,c),f=f.sibling}function k5(c,f){var b=c.alternate,j=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(Io(f,c),vl(c),j&4){try{n0(3,c,c.return),Wx(3,c)}catch(It){Wn(c,c.return,It)}try{n0(5,c,c.return)}catch(It){Wn(c,c.return,It)}}break;case 1:Io(f,c),vl(c),j&512&&b!==null&&pp(b,b.return);break;case 5:if(Io(f,c),vl(c),j&512&&b!==null&&pp(b,b.return),c.flags&32){var O=c.stateNode;try{Gt(O,"")}catch(It){Wn(c,c.return,It)}}if(j&4&&(O=c.stateNode,O!=null)){var D=c.memoizedProps,W=b!==null?b.memoizedProps:D,ie=c.type,me=c.updateQueue;if(c.updateQueue=null,me!==null)try{ie==="input"&&D.type==="radio"&&D.name!=null&&ee(O,D),wt(ie,W);var Ce=wt(ie,D);for(W=0;W<me.length;W+=2){var et=me[W],at=me[W+1];et==="style"?br(O,at):et==="dangerouslySetInnerHTML"?hr(O,at):et==="children"?Gt(O,at):C(O,et,at,Ce)}switch(ie){case"input":q(O,D);break;case"textarea":St(O,D);break;case"select":var Qe=O._wrapperState.wasMultiple;O._wrapperState.wasMultiple=!!D.multiple;var Nt=D.value;Nt!=null?rt(O,!!D.multiple,Nt,!1):Qe!==!!D.multiple&&(D.defaultValue!=null?rt(O,!!D.multiple,D.defaultValue,!0):rt(O,!!D.multiple,D.multiple?[]:"",!1))}O[wi]=D}catch(It){Wn(c,c.return,It)}}break;case 6:if(Io(f,c),vl(c),j&4){if(c.stateNode===null)throw Error(r(162));O=c.stateNode,D=c.memoizedProps;try{O.nodeValue=D}catch(It){Wn(c,c.return,It)}}break;case 3:if(Io(f,c),vl(c),j&4&&b!==null&&b.memoizedState.isDehydrated)try{sa(f.containerInfo)}catch(It){Wn(c,c.return,It)}break;case 4:Io(f,c),vl(c);break;case 13:Io(f,c),vl(c),O=c.child,O.flags&8192&&(D=O.memoizedState!==null,O.stateNode.isHidden=D,!D||O.alternate!==null&&O.alternate.memoizedState!==null||(jS=Tr())),j&4&&R5(c);break;case 22:if(et=b!==null&&b.memoizedState!==null,c.mode&1?(ps=(Ce=ps)||et,Io(f,c),ps=Ce):Io(f,c),vl(c),j&8192){if(Ce=c.memoizedState!==null,(c.stateNode.isHidden=Ce)&&!et&&(c.mode&1)!==0)for(_t=c,et=c.child;et!==null;){for(at=_t=et;_t!==null;){switch(Qe=_t,Nt=Qe.child,Qe.tag){case 0:case 11:case 14:case 15:n0(4,Qe,Qe.return);break;case 1:pp(Qe,Qe.return);var Tt=Qe.stateNode;if(typeof Tt.componentWillUnmount=="function"){j=Qe,b=Qe.return;try{f=j,Tt.props=f.memoizedProps,Tt.state=f.memoizedState,Tt.componentWillUnmount()}catch(It){Wn(j,b,It)}}break;case 5:pp(Qe,Qe.return);break;case 22:if(Qe.memoizedState!==null){I5(at);continue}}Nt!==null?(Nt.return=Qe,_t=Nt):I5(at)}et=et.sibling}e:for(et=null,at=c;;){if(at.tag===5){if(et===null){et=at;try{O=at.stateNode,Ce?(D=O.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none"):(ie=at.stateNode,me=at.memoizedProps.style,W=me!=null&&me.hasOwnProperty("display")?me.display:null,ie.style.display=mr("display",W))}catch(It){Wn(c,c.return,It)}}}else if(at.tag===6){if(et===null)try{at.stateNode.nodeValue=Ce?"":at.memoizedProps}catch(It){Wn(c,c.return,It)}}else if((at.tag!==22&&at.tag!==23||at.memoizedState===null||at===c)&&at.child!==null){at.child.return=at,at=at.child;continue}if(at===c)break e;for(;at.sibling===null;){if(at.return===null||at.return===c)break e;et===at&&(et=null),at=at.return}et===at&&(et=null),at.sibling.return=at.return,at=at.sibling}}break;case 19:Io(f,c),vl(c),j&4&&R5(c);break;case 21:break;default:Io(f,c),vl(c)}}function vl(c){var f=c.flags;if(f&2){try{e:{for(var b=c.return;b!==null;){if(C5(b)){var j=b;break e}b=b.return}throw Error(r(160))}switch(j.tag){case 5:var O=j.stateNode;j.flags&32&&(Gt(O,""),j.flags&=-33);var D=T5(c);NS(c,D,O);break;case 3:case 4:var W=j.stateNode.containerInfo,ie=T5(c);vS(c,ie,W);break;default:throw Error(r(161))}}catch(me){Wn(c,c.return,me)}c.flags&=-3}f&4096&&(c.flags&=-4097)}function rY(c,f,b){_t=c,P5(c)}function P5(c,f,b){for(var j=(c.mode&1)!==0;_t!==null;){var O=_t,D=O.child;if(O.tag===22&&j){var W=O.memoizedState!==null||qx;if(!W){var ie=O.alternate,me=ie!==null&&ie.memoizedState!==null||ps;ie=qx;var Ce=ps;if(qx=W,(ps=me)&&!Ce)for(_t=O;_t!==null;)W=_t,me=W.child,W.tag===22&&W.memoizedState!==null?M5(O):me!==null?(me.return=W,_t=me):M5(O);for(;D!==null;)_t=D,P5(D),D=D.sibling;_t=O,qx=ie,ps=Ce}D5(c)}else(O.subtreeFlags&8772)!==0&&D!==null?(D.return=O,_t=D):D5(c)}}function D5(c){for(;_t!==null;){var f=_t;if((f.flags&8772)!==0){var b=f.alternate;try{if((f.flags&8772)!==0)switch(f.tag){case 0:case 11:case 15:ps||Wx(5,f);break;case 1:var j=f.stateNode;if(f.flags&4&&!ps)if(b===null)j.componentDidMount();else{var O=f.elementType===f.type?b.memoizedProps:Po(f.type,b.memoizedProps);j.componentDidUpdate(O,b.memoizedState,j.__reactInternalSnapshotBeforeUpdate)}var D=f.updateQueue;D!==null&&st(f,D,j);break;case 3:var W=f.updateQueue;if(W!==null){if(b=null,f.child!==null)switch(f.child.tag){case 5:b=f.child.stateNode;break;case 1:b=f.child.stateNode}st(f,W,b)}break;case 5:var ie=f.stateNode;if(b===null&&f.flags&4){b=ie;var me=f.memoizedProps;switch(f.type){case"button":case"input":case"select":case"textarea":me.autoFocus&&b.focus();break;case"img":me.src&&(b.src=me.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(f.memoizedState===null){var Ce=f.alternate;if(Ce!==null){var et=Ce.memoizedState;if(et!==null){var at=et.dehydrated;at!==null&&sa(at)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}ps||f.flags&512&&yS(f)}catch(Qe){Wn(f,f.return,Qe)}}if(f===c){_t=null;break}if(b=f.sibling,b!==null){b.return=f.return,_t=b;break}_t=f.return}}function I5(c){for(;_t!==null;){var f=_t;if(f===c){_t=null;break}var b=f.sibling;if(b!==null){b.return=f.return,_t=b;break}_t=f.return}}function M5(c){for(;_t!==null;){var f=_t;try{switch(f.tag){case 0:case 11:case 15:var b=f.return;try{Wx(4,f)}catch(me){Wn(f,b,me)}break;case 1:var j=f.stateNode;if(typeof j.componentDidMount=="function"){var O=f.return;try{j.componentDidMount()}catch(me){Wn(f,O,me)}}var D=f.return;try{yS(f)}catch(me){Wn(f,D,me)}break;case 5:var W=f.return;try{yS(f)}catch(me){Wn(f,W,me)}}}catch(me){Wn(f,f.return,me)}if(f===c){_t=null;break}var ie=f.sibling;if(ie!==null){ie.return=f.return,_t=ie;break}_t=f.return}}var nY=Math.ceil,Vx=_.ReactCurrentDispatcher,SS=_.ReactCurrentOwner,ao=_.ReactCurrentBatchConfig,Br=0,Ua=null,pa=null,Ja=0,ki=0,mp=$a(0),Ea=0,a0=null,Hu=0,Yx=0,ES=0,s0=null,ri=null,jS=0,hp=1/0,Cc=null,Xx=!1,wS=null,Cd=null,Qx=!1,Td=null,Zx=0,i0=0,AS=null,Jx=-1,eb=0;function Ps(){return(Br&6)!==0?Tr():Jx!==-1?Jx:Jx=Tr()}function Od(c){return(c.mode&1)===0?1:(Br&2)!==0&&Ja!==0?Ja&-Ja:wd.transition!==null?(eb===0&&(eb=mi()),eb):(c=Ut,c!==0||(c=window.event,c=c===void 0?16:Ws(c.type)),c)}function Mo(c,f,b,j){if(50<i0)throw i0=0,AS=null,Error(r(185));Ma(c,b,j),((Br&2)===0||c!==Ua)&&(c===Ua&&((Br&2)===0&&(Yx|=b),Ea===4&&Rd(c,Ja)),ni(c,j),b===1&&Br===0&&(f.mode&1)===0&&(hp=Tr()+500,dp&&Qa()))}function ni(c,f){var b=c.callbackNode;zs(c,f);var j=aa(c,c===Ua?Ja:0);if(j===0)b!==null&&ua(b),c.callbackNode=null,c.callbackPriority=0;else if(f=j&-j,c.callbackPriority!==f){if(b!=null&&ua(b),f===1)c.tag===0?Qi($5.bind(null,c)):Iu($5.bind(null,c)),JN(function(){(Br&6)===0&&Qa()}),b=null;else{switch(Co(j)){case 1:b=mn;break;case 4:b=hn;break;case 16:b=na;break;case 536870912:b=an;break;default:b=na}b=q5(b,L5.bind(null,c))}c.callbackPriority=f,c.callbackNode=b}}function L5(c,f){if(Jx=-1,eb=0,(Br&6)!==0)throw Error(r(327));var b=c.callbackNode;if(gp()&&c.callbackNode!==b)return null;var j=aa(c,c===Ua?Ja:0);if(j===0)return null;if((j&30)!==0||(j&c.expiredLanes)!==0||f)f=tb(c,j);else{f=j;var O=Br;Br|=2;var D=U5();(Ua!==c||Ja!==f)&&(Cc=null,hp=Tr()+500,zu(c,f));do try{iY();break}catch(ie){F5(c,ie)}while(!0);Zs(),Vx.current=D,Br=O,pa!==null?f=0:(Ua=null,Ja=0,f=Ea)}if(f!==0){if(f===2&&(O=ws(c),O!==0&&(j=O,f=_S(c,O))),f===1)throw b=a0,zu(c,0),Rd(c,j),ni(c,Tr()),b;if(f===6)Rd(c,j);else{if(O=c.current.alternate,(j&30)===0&&!aY(O)&&(f=tb(c,j),f===2&&(D=ws(c),D!==0&&(j=D,f=_S(c,D))),f===1))throw b=a0,zu(c,0),Rd(c,j),ni(c,Tr()),b;switch(c.finishedWork=O,c.finishedLanes=j,f){case 0:case 1:throw Error(r(345));case 2:qu(c,ri,Cc);break;case 3:if(Rd(c,j),(j&130023424)===j&&(f=jS+500-Tr(),10<f)){if(aa(c,0)!==0)break;if(O=c.suspendedLanes,(O&j)!==j){Ps(),c.pingedLanes|=c.suspendedLanes&O;break}c.timeoutHandle=gc(qu.bind(null,c,ri,Cc),f);break}qu(c,ri,Cc);break;case 4:if(Rd(c,j),(j&4194240)===j)break;for(f=c.eventTimes,O=-1;0<j;){var W=31-Fr(j);D=1<<W,W=f[W],W>O&&(O=W),j&=~D}if(j=O,j=Tr()-j,j=(120>j?120:480>j?480:1080>j?1080:1920>j?1920:3e3>j?3e3:4320>j?4320:1960*nY(j/1960))-j,10<j){c.timeoutHandle=gc(qu.bind(null,c,ri,Cc),j);break}qu(c,ri,Cc);break;case 5:qu(c,ri,Cc);break;default:throw Error(r(329))}}}return ni(c,Tr()),c.callbackNode===b?L5.bind(null,c):null}function _S(c,f){var b=s0;return c.current.memoizedState.isDehydrated&&(zu(c,f).flags|=256),c=tb(c,f),c!==2&&(f=ri,ri=b,f!==null&&CS(f)),c}function CS(c){ri===null?ri=c:ri.push.apply(ri,c)}function aY(c){for(var f=c;;){if(f.flags&16384){var b=f.updateQueue;if(b!==null&&(b=b.stores,b!==null))for(var j=0;j<b.length;j++){var O=b[j],D=O.getSnapshot;O=O.value;try{if(!Si(D(),O))return!1}catch{return!1}}}if(b=f.child,f.subtreeFlags&16384&&b!==null)b.return=f,f=b;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Rd(c,f){for(f&=~ES,f&=~Yx,c.suspendedLanes|=f,c.pingedLanes&=~f,c=c.expirationTimes;0<f;){var b=31-Fr(f),j=1<<b;c[b]=-1,f&=~j}}function $5(c){if((Br&6)!==0)throw Error(r(327));gp();var f=aa(c,0);if((f&1)===0)return ni(c,Tr()),null;var b=tb(c,f);if(c.tag!==0&&b===2){var j=ws(c);j!==0&&(f=j,b=_S(c,j))}if(b===1)throw b=a0,zu(c,0),Rd(c,f),ni(c,Tr()),b;if(b===6)throw Error(r(345));return c.finishedWork=c.current.alternate,c.finishedLanes=f,qu(c,ri,Cc),ni(c,Tr()),null}function TS(c,f){var b=Br;Br|=1;try{return c(f)}finally{Br=b,Br===0&&(hp=Tr()+500,dp&&Qa())}}function Ku(c){Td!==null&&Td.tag===0&&(Br&6)===0&&gp();var f=Br;Br|=1;var b=ao.transition,j=Ut;try{if(ao.transition=null,Ut=1,c)return c()}finally{Ut=j,ao.transition=b,Br=f,(Br&6)===0&&Qa()}}function OS(){ki=mp.current,Lr(mp)}function zu(c,f){c.finishedWork=null,c.finishedLanes=0;var b=c.timeoutHandle;if(b!==-1&&(c.timeoutHandle=-1,Mx(b)),pa!==null)for(b=pa.return;b!==null;){var j=b;switch(Xh(j),j.tag){case 1:j=j.type.childContextTypes,j!=null&&Du();break;case 3:ds(),Lr(cs),Lr(kn),Qh();break;case 5:Xr(j);break;case 4:ds();break;case 13:Lr(vr);break;case 19:Lr(vr);break;case 10:Uu(j.type._context);break;case 22:case 23:OS()}b=b.return}if(Ua=c,pa=c=kd(c.current,null),Ja=ki=f,Ea=0,a0=null,ES=Yx=Hu=0,ri=s0=null,Js!==null){for(f=0;f<Js.length;f++)if(b=Js[f],j=b.interleaved,j!==null){b.interleaved=null;var O=j.next,D=b.pending;if(D!==null){var W=D.next;D.next=O,j.next=W}b.pending=j}Js=null}return c}function F5(c,f){do{var b=pa;try{if(Zs(),Wt.current=Gx,Fx){for(var j=on.memoizedState;j!==null;){var O=j.queue;O!==null&&(O.pending=null),j=j.next}Fx=!1}if(Ri=0,Fa=Sa=on=null,Zh=!1,Jh=0,SS.current=null,b===null||b.return===null){Ea=1,a0=f,pa=null;break}e:{var D=c,W=b.return,ie=b,me=f;if(f=Ja,ie.flags|=32768,me!==null&&typeof me=="object"&&typeof me.then=="function"){var Ce=me,et=ie,at=et.tag;if((et.mode&1)===0&&(at===0||at===11||at===15)){var Qe=et.alternate;Qe?(et.updateQueue=Qe.updateQueue,et.memoizedState=Qe.memoizedState,et.lanes=Qe.lanes):(et.updateQueue=null,et.memoizedState=null)}var Nt=d5(W);if(Nt!==null){Nt.flags&=-257,u5(Nt,W,ie,D,f),Nt.mode&1&&c5(D,Ce,f),f=Nt,me=Ce;var Tt=f.updateQueue;if(Tt===null){var It=new Set;It.add(me),f.updateQueue=It}else Tt.add(me);break e}else{if((f&1)===0){c5(D,Ce,f),RS();break e}me=Error(r(426))}}else if(xn&&ie.mode&1){var ca=d5(W);if(ca!==null){(ca.flags&65536)===0&&(ca.flags|=256),u5(ca,W,ie,D,f),jd(fp(me,ie));break e}}D=me=fp(me,ie),Ea!==4&&(Ea=2),s0===null?s0=[D]:s0.push(D),D=W;do{switch(D.tag){case 3:D.flags|=65536,f&=-f,D.lanes|=f;var Ee=o5(D,me,f);Ke(D,Ee);break e;case 1:ie=me;var be=D.type,Ae=D.stateNode;if((D.flags&128)===0&&(typeof be.getDerivedStateFromError=="function"||Ae!==null&&typeof Ae.componentDidCatch=="function"&&(Cd===null||!Cd.has(Ae)))){D.flags|=65536,f&=-f,D.lanes|=f;var ct=l5(D,ie,f);Ke(D,ct);break e}}D=D.return}while(D!==null)}G5(b)}catch(Ft){f=Ft,pa===b&&b!==null&&(pa=b=b.return);continue}break}while(!0)}function U5(){var c=Vx.current;return Vx.current=Gx,c===null?Gx:c}function RS(){(Ea===0||Ea===3||Ea===2)&&(Ea=4),Ua===null||(Hu&268435455)===0&&(Yx&268435455)===0||Rd(Ua,Ja)}function tb(c,f){var b=Br;Br|=2;var j=U5();(Ua!==c||Ja!==f)&&(Cc=null,zu(c,f));do try{sY();break}catch(O){F5(c,O)}while(!0);if(Zs(),Br=b,Vx.current=j,pa!==null)throw Error(r(261));return Ua=null,Ja=0,Ea}function sY(){for(;pa!==null;)B5(pa)}function iY(){for(;pa!==null&&!Ht();)B5(pa)}function B5(c){var f=z5(c.alternate,c,ki);c.memoizedProps=c.pendingProps,f===null?G5(c):pa=f,SS.current=null}function G5(c){var f=c;do{var b=f.alternate;if(c=f.return,(f.flags&32768)===0){if(b=ZV(b,f,ki),b!==null){pa=b;return}}else{if(b=JV(b,f),b!==null){b.flags&=32767,pa=b;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{Ea=6,pa=null;return}}if(f=f.sibling,f!==null){pa=f;return}pa=f=c}while(f!==null);Ea===0&&(Ea=5)}function qu(c,f,b){var j=Ut,O=ao.transition;try{ao.transition=null,Ut=1,oY(c,f,b,j)}finally{ao.transition=O,Ut=j}return null}function oY(c,f,b,j){do gp();while(Td!==null);if((Br&6)!==0)throw Error(r(327));b=c.finishedWork;var O=c.finishedLanes;if(b===null)return null;if(c.finishedWork=null,c.finishedLanes=0,b===c.current)throw Error(r(177));c.callbackNode=null,c.callbackPriority=0;var D=b.lanes|b.childLanes;if(Bi(c,D),c===Ua&&(pa=Ua=null,Ja=0),(b.subtreeFlags&2064)===0&&(b.flags&2064)===0||Qx||(Qx=!0,q5(na,function(){return gp(),null})),D=(b.flags&15990)!==0,(b.subtreeFlags&15990)!==0||D){D=ao.transition,ao.transition=null;var W=Ut;Ut=1;var ie=Br;Br|=4,SS.current=null,tY(c,b),k5(b,c),Zf(ku),Mr=!!ya,ku=ya=null,c.current=b,rY(b),Dr(),Br=ie,Ut=W,ao.transition=D}else c.current=b;if(Qx&&(Qx=!1,Td=c,Zx=O),D=c.pendingLanes,D===0&&(Cd=null),ic(b.stateNode),ni(c,Tr()),f!==null)for(j=c.onRecoverableError,b=0;b<f.length;b++)O=f[b],j(O.value,{componentStack:O.stack,digest:O.digest});if(Xx)throw Xx=!1,c=wS,wS=null,c;return(Zx&1)!==0&&c.tag!==0&&gp(),D=c.pendingLanes,(D&1)!==0?c===AS?i0++:(i0=0,AS=c):i0=0,Qa(),null}function gp(){if(Td!==null){var c=Co(Zx),f=ao.transition,b=Ut;try{if(ao.transition=null,Ut=16>c?16:c,Td===null)var j=!1;else{if(c=Td,Td=null,Zx=0,(Br&6)!==0)throw Error(r(331));var O=Br;for(Br|=4,_t=c.current;_t!==null;){var D=_t,W=D.child;if((_t.flags&16)!==0){var ie=D.deletions;if(ie!==null){for(var me=0;me<ie.length;me++){var Ce=ie[me];for(_t=Ce;_t!==null;){var et=_t;switch(et.tag){case 0:case 11:case 15:n0(8,et,D)}var at=et.child;if(at!==null)at.return=et,_t=at;else for(;_t!==null;){et=_t;var Qe=et.sibling,Nt=et.return;if(_5(et),et===Ce){_t=null;break}if(Qe!==null){Qe.return=Nt,_t=Qe;break}_t=Nt}}}var Tt=D.alternate;if(Tt!==null){var It=Tt.child;if(It!==null){Tt.child=null;do{var ca=It.sibling;It.sibling=null,It=ca}while(It!==null)}}_t=D}}if((D.subtreeFlags&2064)!==0&&W!==null)W.return=D,_t=W;else e:for(;_t!==null;){if(D=_t,(D.flags&2048)!==0)switch(D.tag){case 0:case 11:case 15:n0(9,D,D.return)}var Ee=D.sibling;if(Ee!==null){Ee.return=D.return,_t=Ee;break e}_t=D.return}}var be=c.current;for(_t=be;_t!==null;){W=_t;var Ae=W.child;if((W.subtreeFlags&2064)!==0&&Ae!==null)Ae.return=W,_t=Ae;else e:for(W=be;_t!==null;){if(ie=_t,(ie.flags&2048)!==0)try{switch(ie.tag){case 0:case 11:case 15:Wx(9,ie)}}catch(Ft){Wn(ie,ie.return,Ft)}if(ie===W){_t=null;break e}var ct=ie.sibling;if(ct!==null){ct.return=ie.return,_t=ct;break e}_t=ie.return}}if(Br=O,Qa(),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(pi,c)}catch{}j=!0}return j}finally{Ut=b,ao.transition=f}}return!1}function H5(c,f,b){f=fp(b,f),f=o5(c,f,1),c=ce(c,f,1),f=Ps(),c!==null&&(Ma(c,1,f),ni(c,f))}function Wn(c,f,b){if(c.tag===3)H5(c,c,b);else for(;f!==null;){if(f.tag===3){H5(f,c,b);break}else if(f.tag===1){var j=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof j.componentDidCatch=="function"&&(Cd===null||!Cd.has(j))){c=fp(b,c),c=l5(f,c,1),f=ce(f,c,1),c=Ps(),f!==null&&(Ma(f,1,c),ni(f,c));break}}f=f.return}}function lY(c,f,b){var j=c.pingCache;j!==null&&j.delete(f),f=Ps(),c.pingedLanes|=c.suspendedLanes&b,Ua===c&&(Ja&b)===b&&(Ea===4||Ea===3&&(Ja&130023424)===Ja&&500>Tr()-jS?zu(c,0):ES|=b),ni(c,f)}function K5(c,f){f===0&&((c.mode&1)===0?f=1:(f=Ks,Ks<<=1,(Ks&130023424)===0&&(Ks=4194304)));var b=Ps();c=ko(c,f),c!==null&&(Ma(c,f,b),ni(c,b))}function cY(c){var f=c.memoizedState,b=0;f!==null&&(b=f.retryLane),K5(c,b)}function dY(c,f){var b=0;switch(c.tag){case 13:var j=c.stateNode,O=c.memoizedState;O!==null&&(b=O.retryLane);break;case 19:j=c.stateNode;break;default:throw Error(r(314))}j!==null&&j.delete(f),K5(c,b)}var z5;z5=function(c,f,b){if(c!==null)if(c.memoizedProps!==f.pendingProps||cs.current)ti=!0;else{if((c.lanes&b)===0&&(f.flags&128)===0)return ti=!1,QV(c,f,b);ti=(c.flags&131072)!==0}else ti=!1,xn&&(f.flags&1048576)!==0&&Sc(f,Mu,f.index);switch(f.lanes=0,f.tag){case 2:var j=f.type;zx(c,f),c=f.pendingProps;var O=Xi(f,kn.current);Rs(f,b),O=tS(null,f,j,c,O,b);var D=rS();return f.flags|=1,typeof O=="object"&&O!==null&&typeof O.render=="function"&&O.$$typeof===void 0?(f.tag=1,f.memoizedState=null,f.updateQueue=null,la(j)?(D=!0,cp(f)):D=!1,f.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,P(f),O.updater=Hx,f.stateNode=O,O._reactInternals=f,lS(f,j,c,b),f=fS(null,f,j,!0,D,b)):(f.tag=0,xn&&D&&Os(f),ks(null,f,O,b),f=f.child),f;case 16:j=f.elementType;e:{switch(zx(c,f),c=f.pendingProps,O=j._init,j=O(j._payload),f.type=j,O=f.tag=fY(j),c=Po(j,c),O){case 0:f=uS(null,f,j,c,b);break e;case 1:f=x5(null,f,j,c,b);break e;case 11:f=f5(null,f,j,c,b);break e;case 14:f=p5(null,f,j,Po(j.type,c),b);break e}throw Error(r(306,j,""))}return f;case 0:return j=f.type,O=f.pendingProps,O=f.elementType===j?O:Po(j,O),uS(c,f,j,O,b);case 1:return j=f.type,O=f.pendingProps,O=f.elementType===j?O:Po(j,O),x5(c,f,j,O,b);case 3:e:{if(b5(f),c===null)throw Error(r(387));j=f.pendingProps,D=f.memoizedState,O=D.element,K(c,f),Te(f,j,null,b);var W=f.memoizedState;if(j=W.element,D.isDehydrated)if(D={element:j,isDehydrated:!1,cache:W.cache,pendingSuspenseBoundaries:W.pendingSuspenseBoundaries,transitions:W.transitions},f.updateQueue.baseState=D,f.memoizedState=D,f.flags&256){O=fp(Error(r(423)),f),f=y5(c,f,j,b,O);break e}else if(j!==O){O=fp(Error(r(424)),f),f=y5(c,f,j,b,O);break e}else for(Na=To(f.stateNode.containerInfo.firstChild),$n=f,xn=!0,Ci=null,b=Fu(f,null,j,b),f.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(Oi(),j===O){f=_c(c,f,b);break e}ks(c,f,j,b)}f=f.child}return f;case 5:return Ad(f),c===null&&up(f),j=f.type,O=f.pendingProps,D=c!==null?c.memoizedProps:null,W=O.children,yd(j,O)?W=null:D!==null&&yd(j,D)&&(f.flags|=32),g5(c,f),ks(c,f,W,b),f.child;case 6:return c===null&&up(f),null;case 13:return v5(c,f,b);case 4:return yr(f,f.stateNode.containerInfo),j=f.pendingProps,c===null?f.child=jc(f,null,j,b):ks(c,f,j,b),f.child;case 11:return j=f.type,O=f.pendingProps,O=f.elementType===j?O:Po(j,O),f5(c,f,j,O,b);case 7:return ks(c,f,f.pendingProps,b),f.child;case 8:return ks(c,f,f.pendingProps.children,b),f.child;case 12:return ks(c,f,f.pendingProps.children,b),f.child;case 10:e:{if(j=f.type._context,O=f.pendingProps,D=f.memoizedProps,W=O.value,Jr(gl,j._currentValue),j._currentValue=W,D!==null)if(Si(D.value,W)){if(D.children===O.children&&!cs.current){f=_c(c,f,b);break e}}else for(D=f.child,D!==null&&(D.return=f);D!==null;){var ie=D.dependencies;if(ie!==null){W=D.child;for(var me=ie.firstContext;me!==null;){if(me.context===j){if(D.tag===1){me=Q(-1,b&-b),me.tag=2;var Ce=D.updateQueue;if(Ce!==null){Ce=Ce.shared;var et=Ce.pending;et===null?me.next=me:(me.next=et.next,et.next=me),Ce.pending=me}}D.lanes|=b,me=D.alternate,me!==null&&(me.lanes|=b),Bu(D.return,b,f),ie.lanes|=b;break}me=me.next}}else if(D.tag===10)W=D.type===f.type?null:D.child;else if(D.tag===18){if(W=D.return,W===null)throw Error(r(341));W.lanes|=b,ie=W.alternate,ie!==null&&(ie.lanes|=b),Bu(W,b,f),W=D.sibling}else W=D.child;if(W!==null)W.return=D;else for(W=D;W!==null;){if(W===f){W=null;break}if(D=W.sibling,D!==null){D.return=W.return,W=D;break}W=W.return}D=W}ks(c,f,O.children,b),f=f.child}return f;case 9:return O=f.type,j=f.pendingProps.children,Rs(f,b),O=qn(O),j=j(O),f.flags|=1,ks(c,f,j,b),f.child;case 14:return j=f.type,O=Po(j,f.pendingProps),O=Po(j.type,O),p5(c,f,j,O,b);case 15:return m5(c,f,f.type,f.pendingProps,b);case 17:return j=f.type,O=f.pendingProps,O=f.elementType===j?O:Po(j,O),zx(c,f),f.tag=1,la(j)?(c=!0,cp(f)):c=!1,Rs(f,b),s5(f,j,O),lS(f,j,O,b),fS(null,f,j,!0,c,b);case 19:return S5(c,f,b);case 22:return h5(c,f,b)}throw Error(r(156,f.tag))};function q5(c,f){return Ir(c,f)}function uY(c,f,b,j){this.tag=c,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=j,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function so(c,f,b,j){return new uY(c,f,b,j)}function kS(c){return c=c.prototype,!(!c||!c.isReactComponent)}function fY(c){if(typeof c=="function")return kS(c)?1:0;if(c!=null){if(c=c.$$typeof,c===H)return 11;if(c===G)return 14}return 2}function kd(c,f){var b=c.alternate;return b===null?(b=so(c.tag,f,c.key,c.mode),b.elementType=c.elementType,b.type=c.type,b.stateNode=c.stateNode,b.alternate=c,c.alternate=b):(b.pendingProps=f,b.type=c.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=c.flags&14680064,b.childLanes=c.childLanes,b.lanes=c.lanes,b.child=c.child,b.memoizedProps=c.memoizedProps,b.memoizedState=c.memoizedState,b.updateQueue=c.updateQueue,f=c.dependencies,b.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},b.sibling=c.sibling,b.index=c.index,b.ref=c.ref,b}function rb(c,f,b,j,O,D){var W=2;if(j=c,typeof c=="function")kS(c)&&(W=1);else if(typeof c=="string")W=5;else e:switch(c){case R:return Wu(b.children,O,D,f);case I:W=8,O|=8;break;case k:return c=so(12,b,f,O|2),c.elementType=k,c.lanes=D,c;case B:return c=so(13,b,f,O),c.elementType=B,c.lanes=D,c;case M:return c=so(19,b,f,O),c.elementType=M,c.lanes=D,c;case z:return nb(b,O,D,f);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case w:W=10;break e;case L:W=9;break e;case H:W=11;break e;case G:W=14;break e;case $:W=16,j=null;break e}throw Error(r(130,c==null?c:typeof c,""))}return f=so(W,b,f,O),f.elementType=c,f.type=j,f.lanes=D,f}function Wu(c,f,b,j){return c=so(7,c,j,f),c.lanes=b,c}function nb(c,f,b,j){return c=so(22,c,j,f),c.elementType=z,c.lanes=b,c.stateNode={isHidden:!1},c}function PS(c,f,b){return c=so(6,c,null,f),c.lanes=b,c}function DS(c,f,b){return f=so(4,c.children!==null?c.children:[],c.key,f),f.lanes=b,f.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},f}function pY(c,f,b,j,O){this.tag=f,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Tn(0),this.expirationTimes=Tn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tn(0),this.identifierPrefix=j,this.onRecoverableError=O,this.mutableSourceEagerHydrationData=null}function IS(c,f,b,j,O,D,W,ie,me){return c=new pY(c,f,b,ie,me),f===1?(f=1,D===!0&&(f|=8)):f=0,D=so(3,null,null,f),c.current=D,D.stateNode=c,D.memoizedState={element:j,isDehydrated:b,cache:null,transitions:null,pendingSuspenseBoundaries:null},P(D),c}function mY(c,f,b){var j=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:T,key:j==null?null:""+j,children:c,containerInfo:f,implementation:b}}function W5(c){if(!c)return Ai;c=c._reactInternals;e:{if(Cn(c)!==c||c.tag!==1)throw Error(r(170));var f=c;do{switch(f.tag){case 3:f=f.stateNode.context;break e;case 1:if(la(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break e}}f=f.return}while(f!==null);throw Error(r(171))}if(c.tag===1){var b=c.type;if(la(b))return Sd(c,b,f)}return f}function V5(c,f,b,j,O,D,W,ie,me){return c=IS(b,j,!0,c,O,D,W,ie,me),c.context=W5(null),b=c.current,j=Ps(),O=Od(b),D=Q(j,O),D.callback=f??null,ce(b,D,O),c.current.lanes=O,Ma(c,O,j),ni(c,j),c}function ab(c,f,b,j){var O=f.current,D=Ps(),W=Od(O);return b=W5(b),f.context===null?f.context=b:f.pendingContext=b,f=Q(D,W),f.payload={element:c},j=j===void 0?null:j,j!==null&&(f.callback=j),c=ce(O,f,W),c!==null&&(Mo(c,O,W,D),ae(c,O,W)),W}function sb(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function Y5(c,f){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var b=c.retryLane;c.retryLane=b!==0&&b<f?b:f}}function MS(c,f){Y5(c,f),(c=c.alternate)&&Y5(c,f)}function hY(){return null}var X5=typeof reportError=="function"?reportError:function(c){console.error(c)};function LS(c){this._internalRoot=c}ib.prototype.render=LS.prototype.render=function(c){var f=this._internalRoot;if(f===null)throw Error(r(409));ab(c,f,null,null)},ib.prototype.unmount=LS.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var f=c.containerInfo;Ku(function(){ab(null,c,null,null)}),f[zn]=null}};function ib(c){this._internalRoot=c}ib.prototype.unstable_scheduleHydration=function(c){if(c){var f=de();c={blockedOn:null,target:c,priority:f};for(var b=0;b<gr.length&&f!==0&&f<gr[b].priority;b++);gr.splice(b,0,c),b===0&&Gf(c)}};function $S(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function ob(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11&&(c.nodeType!==8||c.nodeValue!==" react-mount-point-unstable "))}function Q5(){}function gY(c,f,b,j,O){if(O){if(typeof j=="function"){var D=j;j=function(){var Ce=sb(W);D.call(Ce)}}var W=V5(f,j,c,0,null,!1,!1,"",Q5);return c._reactRootContainer=W,c[zn]=W.current,mc(c.nodeType===8?c.parentNode:c),Ku(),W}for(;O=c.lastChild;)c.removeChild(O);if(typeof j=="function"){var ie=j;j=function(){var Ce=sb(me);ie.call(Ce)}}var me=IS(c,0,!1,null,null,!1,!1,"",Q5);return c._reactRootContainer=me,c[zn]=me.current,mc(c.nodeType===8?c.parentNode:c),Ku(function(){ab(f,me,b,j)}),me}function lb(c,f,b,j,O){var D=b._reactRootContainer;if(D){var W=D;if(typeof O=="function"){var ie=O;O=function(){var me=sb(W);ie.call(me)}}ab(f,W,c,O)}else W=gY(b,f,c,O,j);return sb(W)}tt=function(c){switch(c.tag){case 3:var f=c.stateNode;if(f.current.memoizedState.isDehydrated){var b=js(f.pendingLanes);b!==0&&(Gi(f,b|1),ni(f,Tr()),(Br&6)===0&&(hp=Tr()+500,Qa()))}break;case 13:Ku(function(){var j=ko(c,1);if(j!==null){var O=Ps();Mo(j,c,1,O)}}),MS(c,1)}},On=function(c){if(c.tag===13){var f=ko(c,134217728);if(f!==null){var b=Ps();Mo(f,c,134217728,b)}MS(c,134217728)}},V=function(c){if(c.tag===13){var f=Od(c),b=ko(c,f);if(b!==null){var j=Ps();Mo(b,c,f,j)}MS(c,f)}},de=function(){return Ut},De=function(c,f){var b=Ut;try{return Ut=c,f()}finally{Ut=b}},Pr=function(c,f,b){switch(f){case"input":if(q(c,b),f=b.name,b.type==="radio"&&f!=null){for(b=c;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll("input[name="+JSON.stringify(""+f)+'][type="radio"]'),f=0;f<b.length;f++){var j=b[f];if(j!==c&&j.form===c.form){var O=op(j);if(!O)throw Error(r(90));oe(j),q(j,O)}}}break;case"textarea":St(c,b);break;case"select":f=b.value,f!=null&&rt(c,!!b.multiple,f,!1)}},ir=TS,Cr=Ku;var xY={usingClientEntryPoint:!1,Events:[ml,Nd,op,Ve,yt,TS]},o0={findFiberByHostInstance:bc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},bY={bundleType:o0.bundleType,version:o0.version,rendererPackageName:o0.rendererPackageName,rendererConfig:o0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){return c=fi(c),c===null?null:c.stateNode},findFiberByHostInstance:o0.findFiberByHostInstance||hY,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cb.isDisabled&&cb.supportsFiber)try{pi=cb.inject(bY),un=cb}catch{}}return ai.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xY,ai.createPortal=function(c,f){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$S(f))throw Error(r(200));return mY(c,f,null,b)},ai.createRoot=function(c,f){if(!$S(c))throw Error(r(299));var b=!1,j="",O=X5;return f!=null&&(f.unstable_strictMode===!0&&(b=!0),f.identifierPrefix!==void 0&&(j=f.identifierPrefix),f.onRecoverableError!==void 0&&(O=f.onRecoverableError)),f=IS(c,1,!1,null,null,b,!1,j,O),c[zn]=f.current,mc(c.nodeType===8?c.parentNode:c),new LS(f)},ai.findDOMNode=function(c){if(c==null)return null;if(c.nodeType===1)return c;var f=c._reactInternals;if(f===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=fi(f),c=c===null?null:c.stateNode,c},ai.flushSync=function(c){return Ku(c)},ai.hydrate=function(c,f,b){if(!ob(f))throw Error(r(200));return lb(null,c,f,!0,b)},ai.hydrateRoot=function(c,f,b){if(!$S(c))throw Error(r(405));var j=b!=null&&b.hydratedSources||null,O=!1,D="",W=X5;if(b!=null&&(b.unstable_strictMode===!0&&(O=!0),b.identifierPrefix!==void 0&&(D=b.identifierPrefix),b.onRecoverableError!==void 0&&(W=b.onRecoverableError)),f=V5(f,null,c,1,b??null,O,!1,D,W),c[zn]=f.current,mc(c),j)for(c=0;c<j.length;c++)b=j[c],O=b._getVersion,O=O(b._source),f.mutableSourceEagerHydrationData==null?f.mutableSourceEagerHydrationData=[b,O]:f.mutableSourceEagerHydrationData.push(b,O);return new ib(f)},ai.render=function(c,f,b){if(!ob(f))throw Error(r(200));return lb(null,c,f,!1,b)},ai.unmountComponentAtNode=function(c){if(!ob(c))throw Error(r(40));return c._reactRootContainer?(Ku(function(){lb(null,null,c,!1,function(){c._reactRootContainer=null,c[zn]=null})}),!0):!1},ai.unstable_batchedUpdates=TS,ai.unstable_renderSubtreeIntoContainer=function(c,f,b,j){if(!ob(b))throw Error(r(200));if(c==null||c._reactInternals===void 0)throw Error(r(38));return lb(c,f,b,!1,j)},ai.version="18.3.1-next-f1338f8080-20240426",ai}var gP;function dU(){if(gP)return BS.exports;gP=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),BS.exports=cX(),BS.exports}var xP;function dX(){if(xP)return fb;xP=1;var e=dU();return fb.createRoot=e.createRoot,fb.hydrateRoot=e.hydrateRoot,fb}var uX=dX();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fX=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),pX=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),bP=e=>{const t=pX(e);return t.charAt(0).toUpperCase()+t.slice(1)},uU=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var mX={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hX=h.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:o,...l},d)=>h.createElement("svg",{ref:d,...mX,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:uU("lucide",s),...l},[...o.map(([u,m])=>h.createElement(u,m)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=(e,t)=>{const r=h.forwardRef(({className:n,...s},i)=>h.createElement(hX,{ref:i,iconNode:t,className:uU(`lucide-${fX(bP(e))}`,`lucide-${e}`,n),...s}));return r.displayName=bP(e),r};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gX=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],j1=We("activity",gX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xX=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],fU=We("arrow-down-right",xX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bX=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Tl=We("arrow-left",bX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yX=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],vX=We("arrow-right-left",yX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NX=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ug=We("arrow-right",NX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SX=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],EX=We("arrow-up-down",SX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jX=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],pU=We("arrow-up-right",jX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]],AX=We("ban",wX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _X=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],ih=We("bell",_X);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CX=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],TX=We("bell-ring",CX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OX=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],RX=We("book-open",OX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kX=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z",key:"169p4p"}],["path",{d:"m9 10 2 2 4-4",key:"1gnqz4"}]],PX=We("bookmark-check",kX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DX=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],IX=We("bookmark",DX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MX=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],mU=We("bot",MX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LX=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],$X=We("box",LX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FX=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],fg=We("brain",FX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UX=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],Yp=We("building-2",UX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BX=[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]],eR=We("calendar-clock",BX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GX=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],HX=We("calendar-days",GX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KX=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Vo=We("calendar",KX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zX=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],cm=We("chart-column",zX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qX=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Sf=We("check",qX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WX=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ss=We("chevron-down",WX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VX=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],dm=We("chevron-left",VX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YX=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],di=We("chevron-right",YX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XX=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Zc=We("chevron-up",XX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ea=We("circle-alert",QX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"m12 16 4-4-4-4",key:"1i9zcv"}]],um=We("circle-arrow-right",ZX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JX=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Yo=We("circle-check-big",JX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eQ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],li=We("circle-check",eQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tQ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]],rQ=We("circle-dot",tQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nQ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],oC=We("circle-help",nQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aQ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]],sQ=We("circle-pause",aQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iQ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],oQ=We("circle-user",iQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lQ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],fm=We("circle-x",lQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cQ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],dQ=We("circle",cQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uQ=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],tR=We("clipboard-check",uQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fQ=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],rR=We("clipboard-list",fQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pQ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16.5 12",key:"1aq6pp"}]],w1=We("clock-3",pQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mQ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Bl=We("clock",mQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hQ=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],gQ=We("copy",hQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xQ=[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]],hU=We("cpu",xQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bQ=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],id=We("database",bQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yQ=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Xp=We("download",yQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vQ=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Da=We("external-link",vQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NQ=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],lC=We("eye-off",NQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SQ=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],pm=We("eye",SQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EQ=[["path",{d:"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"142zxg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]],jQ=We("file-pen-line",EQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wQ=[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M4.268 21a2 2 0 0 0 1.727 1H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"ms7g94"}],["path",{d:"m9 18-1.5-1.5",key:"1j6qii"}],["circle",{cx:"5",cy:"14",r:"3",key:"ufru5t"}]],AQ=We("file-search",wQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Q=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],CQ=We("file-spreadsheet",_Q);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TQ=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ef=We("file-text",TQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OQ=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],mm=We("funnel",OQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RQ=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],kQ=We("gauge",RQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PQ=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]],DQ=We("git-compare",PQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IQ=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],MQ=We("heart",IQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LQ=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],ha=We("history",LQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Q=[["path",{d:"M12 6v4",key:"16clxf"}],["path",{d:"M14 14h-4",key:"esezmu"}],["path",{d:"M14 18h-4",key:"16mqa2"}],["path",{d:"M14 8h-4",key:"z8ypaz"}],["path",{d:"M18 12h2a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-9a2 2 0 0 1 2-2h2",key:"b1k337"}],["path",{d:"M18 22V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v18",key:"16g51d"}]],FQ=We("hospital",$Q);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UQ=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],oh=We("house",UQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BQ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],hm=We("info",BQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GQ=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],gm=We("layers",GQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HQ=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],tx=We("layout-dashboard",HQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KQ=[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]],zQ=We("layout-template",KQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qQ=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],gU=We("link-2",qQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WQ=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],cC=We("link",WQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VQ=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],tu=We("lock",VQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YQ=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],nR=We("log-out",YQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XQ=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],QQ=We("mail",XQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZQ=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Dy=We("map-pin",ZQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JQ=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],aR=We("menu",JQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eZ=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],So=We("message-square",eZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tZ=[["path",{d:"M5 12h14",key:"1ays0h"}]],rZ=We("minus",tZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nZ=[["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["path",{d:"M9.5 8h5",key:"11mslq"}],["path",{d:"M9.5 12H16",key:"ktog6x"}],["path",{d:"M9.5 16H14",key:"p1seyn"}]],aZ=We("notebook-text",nZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sZ=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],sR=We("package",sZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iZ=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],oZ=We("palette",iZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lZ=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],cZ=We("pen-line",lZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dZ=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]],dC=We("phone-call",dZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uZ=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],Fs=We("phone",uZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fZ=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],xU=We("plus",fZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pZ=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],yP=We("refresh-cw",pZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mZ=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],hZ=We("rocket",mZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gZ=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],xZ=We("rotate-ccw",gZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bZ=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],iR=We("save",bZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yZ=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],rx=We("search",yZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vZ=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],pg=We("send",vZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NZ=[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],bU=We("settings-2",NZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SZ=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],nx=We("settings",SZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EZ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],yU=We("shield-alert",EZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jZ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Yl=We("shield-check",jZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wZ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Qo=We("shield",wZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AZ=[["path",{d:"M18 7V5a1 1 0 0 0-1-1H6.5a.5.5 0 0 0-.4.8l4.5 6a2 2 0 0 1 0 2.4l-4.5 6a.5.5 0 0 0 .4.8H17a1 1 0 0 0 1-1v-2",key:"wuwx1p"}]],_Z=We("sigma",AZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CZ=[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]],vU=We("sliders-vertical",CZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TZ=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],Iy=We("sparkles",TZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OZ=[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]],RZ=We("star-off",OZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kZ=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],PZ=We("star",kZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DZ=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],IZ=We("stethoscope",DZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MZ=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],oR=We("timer",MZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LZ=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],$Z=We("trash-2",LZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FZ=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],NU=We("trending-up",FZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UZ=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ss=We("triangle-alert",UZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BZ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],D0=We("user-check",BZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GZ=[["path",{d:"M2 21a8 8 0 0 1 13.292-6",key:"bjp14o"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"m16 19 2 2 4-4",key:"1b14m6"}]],HZ=We("user-round-check",GZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KZ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],KS=We("user-x",KZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zZ=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Xl=We("user",zZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qZ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Gl=We("users",qZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WZ=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],lR=We("workflow",WZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VZ=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],uu=We("x",VZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YZ=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],J0=We("zap",YZ),SU="/neuro-shield/logo.png";function cR({size:e=40,className:t="",showText:r=!1,textColor:n,subtitle:s,subtitleColor:i,variant:o="dark"}){const l=n||(o==="dark"?"#ffffff":"#1e293b"),d=i||(o==="dark"?"#94a3b8":"#64748b");return a.jsxs("div",{className:`flex items-center gap-2.5 ${t}`,children:[a.jsx("img",{src:SU,alt:"Neuro-Shield",width:e,height:e,className:"shrink-0 object-contain",draggable:!1}),r&&a.jsxs("div",{className:"min-w-0",children:[a.jsx("h1",{className:"font-bold text-sm leading-tight truncate",style:{color:l},children:"Neuro-Shield"}),s&&a.jsx("p",{className:"text-[10px] leading-tight truncate",style:{color:d},children:s})]})]})}function XZ({size:e=80,className:t=""}){return a.jsxs("div",{className:`flex flex-col items-center ${t}`,children:[a.jsx("img",{src:SU,alt:"Neuro-Shield",width:e,height:e,className:"object-contain",draggable:!1}),a.jsx("h1",{className:"mt-4 text-4xl font-bold bg-gradient-to-r from-blue-700 via-teal-600 to-teal-500 bg-clip-text text-transparent",children:"Neuro-Shield"}),a.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"    "})]})}function EU(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=EU(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function cr(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=EU(e))&&(n&&(n+=" "),n+=t);return n}const QZ=(e,t)=>{const r=new Array(e.length+t.length);for(let n=0;n<e.length;n++)r[n]=e[n];for(let n=0;n<t.length;n++)r[e.length+n]=t[n];return r},ZZ=(e,t)=>({classGroupId:e,validator:t}),jU=(e=new Map,t=null,r)=>({nextPart:e,validators:t,classGroupId:r}),My="-",vP=[],JZ="arbitrary..",eJ=e=>{const t=rJ(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{if(o.startsWith("[")&&o.endsWith("]"))return tJ(o);const l=o.split(My),d=l[0]===""&&l.length>1?1:0;return wU(l,d,t)},getConflictingClassGroupIds:(o,l)=>{if(l){const d=n[o],u=r[o];return d?u?QZ(u,d):d:u||vP}return r[o]||vP}}},wU=(e,t,r)=>{if(e.length-t===0)return r.classGroupId;const s=e[t],i=r.nextPart.get(s);if(i){const u=wU(e,t+1,i);if(u)return u}const o=r.validators;if(o===null)return;const l=t===0?e.join(My):e.slice(t).join(My),d=o.length;for(let u=0;u<d;u++){const m=o[u];if(m.validator(l))return m.classGroupId}},tJ=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),r=t.indexOf(":"),n=t.slice(0,r);return n?JZ+n:void 0})(),rJ=e=>{const{theme:t,classGroups:r}=e;return nJ(r,t)},nJ=(e,t)=>{const r=jU();for(const n in e){const s=e[n];dR(s,r,n,t)}return r},dR=(e,t,r,n)=>{const s=e.length;for(let i=0;i<s;i++){const o=e[i];aJ(o,t,r,n)}},aJ=(e,t,r,n)=>{if(typeof e=="string"){sJ(e,t,r);return}if(typeof e=="function"){iJ(e,t,r,n);return}oJ(e,t,r,n)},sJ=(e,t,r)=>{const n=e===""?t:AU(t,e);n.classGroupId=r},iJ=(e,t,r,n)=>{if(lJ(e)){dR(e(n),t,r,n);return}t.validators===null&&(t.validators=[]),t.validators.push(ZZ(r,e))},oJ=(e,t,r,n)=>{const s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[l,d]=s[o];dR(d,AU(t,l),r,n)}},AU=(e,t)=>{let r=e;const n=t.split(My),s=n.length;for(let i=0;i<s;i++){const o=n[i];let l=r.nextPart.get(o);l||(l=jU(),r.nextPart.set(o,l)),r=l}return r},lJ=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,cJ=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=Object.create(null),n=Object.create(null);const s=(i,o)=>{r[i]=o,t++,t>e&&(t=0,n=r,r=Object.create(null))};return{get(i){let o=r[i];if(o!==void 0)return o;if((o=n[i])!==void 0)return s(i,o),o},set(i,o){i in r?r[i]=o:s(i,o)}}},uC="!",NP=":",dJ=[],SP=(e,t,r,n,s)=>({modifiers:e,hasImportantModifier:t,baseClassName:r,maybePostfixModifierPosition:n,isExternal:s}),uJ=e=>{const{prefix:t,experimentalParseClassName:r}=e;let n=s=>{const i=[];let o=0,l=0,d=0,u;const m=s.length;for(let N=0;N<m;N++){const v=s[N];if(o===0&&l===0){if(v===NP){i.push(s.slice(d,N)),d=N+1;continue}if(v==="/"){u=N;continue}}v==="["?o++:v==="]"?o--:v==="("?l++:v===")"&&l--}const p=i.length===0?s:s.slice(d);let g=p,x=!1;p.endsWith(uC)?(g=p.slice(0,-1),x=!0):p.startsWith(uC)&&(g=p.slice(1),x=!0);const y=u&&u>d?u-d:void 0;return SP(i,x,g,y)};if(t){const s=t+NP,i=n;n=o=>o.startsWith(s)?i(o.slice(s.length)):SP(dJ,!1,o,void 0,!0)}if(r){const s=n;n=i=>r({className:i,parseClassName:s})}return n},fJ=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((r,n)=>{t.set(r,1e6+n)}),r=>{const n=[];let s=[];for(let i=0;i<r.length;i++){const o=r[i],l=o[0]==="[",d=t.has(o);l||d?(s.length>0&&(s.sort(),n.push(...s),s=[]),n.push(o)):s.push(o)}return s.length>0&&(s.sort(),n.push(...s)),n}},pJ=e=>({cache:cJ(e.cacheSize),parseClassName:uJ(e),sortModifiers:fJ(e),...eJ(e)}),mJ=/\s+/,hJ=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s,sortModifiers:i}=t,o=[],l=e.trim().split(mJ);let d="";for(let u=l.length-1;u>=0;u-=1){const m=l[u],{isExternal:p,modifiers:g,hasImportantModifier:x,baseClassName:y,maybePostfixModifierPosition:N}=r(m);if(p){d=m+(d.length>0?" "+d:d);continue}let v=!!N,S=n(v?y.substring(0,N):y);if(!S){if(!v){d=m+(d.length>0?" "+d:d);continue}if(S=n(y),!S){d=m+(d.length>0?" "+d:d);continue}v=!1}const E=g.length===0?"":g.length===1?g[0]:i(g).join(":"),C=x?E+uC:E,_=C+S;if(o.indexOf(_)>-1)continue;o.push(_);const A=s(S,v);for(let T=0;T<A.length;++T){const R=A[T];o.push(C+R)}d=m+(d.length>0?" "+d:d)}return d},gJ=(...e)=>{let t=0,r,n,s="";for(;t<e.length;)(r=e[t++])&&(n=_U(r))&&(s&&(s+=" "),s+=n);return s},_U=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=_U(e[n]))&&(r&&(r+=" "),r+=t);return r},xJ=(e,...t)=>{let r,n,s,i;const o=d=>{const u=t.reduce((m,p)=>p(m),e());return r=pJ(u),n=r.cache.get,s=r.cache.set,i=l,l(d)},l=d=>{const u=n(d);if(u)return u;const m=hJ(d,r);return s(d,m),m};return i=o,(...d)=>i(gJ(...d))},bJ=[],ja=e=>{const t=r=>r[e]||bJ;return t.isThemeGetter=!0,t},CU=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,TU=/^\((?:(\w[\w-]*):)?(.+)\)$/i,yJ=/^\d+\/\d+$/,vJ=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,NJ=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,SJ=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,EJ=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,jJ=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,xp=e=>yJ.test(e),Er=e=>!!e&&!Number.isNaN(Number(e)),Dd=e=>!!e&&Number.isInteger(Number(e)),zS=e=>e.endsWith("%")&&Er(e.slice(0,-1)),Tc=e=>vJ.test(e),wJ=()=>!0,AJ=e=>NJ.test(e)&&!SJ.test(e),OU=()=>!1,_J=e=>EJ.test(e),CJ=e=>jJ.test(e),TJ=e=>!Ot(e)&&!Rt(e),OJ=e=>lh(e,PU,OU),Ot=e=>CU.test(e),Vu=e=>lh(e,DU,AJ),qS=e=>lh(e,IJ,Er),EP=e=>lh(e,RU,OU),RJ=e=>lh(e,kU,CJ),pb=e=>lh(e,IU,_J),Rt=e=>TU.test(e),c0=e=>ch(e,DU),kJ=e=>ch(e,MJ),jP=e=>ch(e,RU),PJ=e=>ch(e,PU),DJ=e=>ch(e,kU),mb=e=>ch(e,IU,!0),lh=(e,t,r)=>{const n=CU.exec(e);return n?n[1]?t(n[1]):r(n[2]):!1},ch=(e,t,r=!1)=>{const n=TU.exec(e);return n?n[1]?t(n[1]):r:!1},RU=e=>e==="position"||e==="percentage",kU=e=>e==="image"||e==="url",PU=e=>e==="length"||e==="size"||e==="bg-size",DU=e=>e==="length",IJ=e=>e==="number",MJ=e=>e==="family-name",IU=e=>e==="shadow",LJ=()=>{const e=ja("color"),t=ja("font"),r=ja("text"),n=ja("font-weight"),s=ja("tracking"),i=ja("leading"),o=ja("breakpoint"),l=ja("container"),d=ja("spacing"),u=ja("radius"),m=ja("shadow"),p=ja("inset-shadow"),g=ja("text-shadow"),x=ja("drop-shadow"),y=ja("blur"),N=ja("perspective"),v=ja("aspect"),S=ja("ease"),E=ja("animate"),C=()=>["auto","avoid","all","avoid-page","page","left","right","column"],_=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],A=()=>[..._(),Rt,Ot],T=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto","contain","none"],I=()=>[Rt,Ot,d],k=()=>[xp,"full","auto",...I()],w=()=>[Dd,"none","subgrid",Rt,Ot],L=()=>["auto",{span:["full",Dd,Rt,Ot]},Dd,Rt,Ot],H=()=>[Dd,"auto",Rt,Ot],B=()=>["auto","min","max","fr",Rt,Ot],M=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],G=()=>["start","end","center","stretch","center-safe","end-safe"],$=()=>["auto",...I()],z=()=>[xp,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...I()],U=()=>[e,Rt,Ot],Z=()=>[..._(),jP,EP,{position:[Rt,Ot]}],re=()=>["no-repeat",{repeat:["","x","y","space","round"]}],X=()=>["auto","cover","contain",PJ,OJ,{size:[Rt,Ot]}],F=()=>[zS,c0,Vu],te=()=>["","none","full",u,Rt,Ot],ne=()=>["",Er,c0,Vu],se=()=>["solid","dashed","dotted","double"],Ne=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],fe=()=>[Er,zS,jP,EP],we=()=>["","none",y,Rt,Ot],ve=()=>["none",Er,Rt,Ot],Oe=()=>["none",Er,Rt,Ot],Fe=()=>[Er,Rt,Ot],oe=()=>[xp,"full",...I()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Tc],breakpoint:[Tc],color:[wJ],container:[Tc],"drop-shadow":[Tc],ease:["in","out","in-out"],font:[TJ],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Tc],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Tc],shadow:[Tc],spacing:["px",Er],text:[Tc],"text-shadow":[Tc],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",xp,Ot,Rt,v]}],container:["container"],columns:[{columns:[Er,Ot,Rt,l]}],"break-after":[{"break-after":C()}],"break-before":[{"break-before":C()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:A()}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:k()}],"inset-x":[{"inset-x":k()}],"inset-y":[{"inset-y":k()}],start:[{start:k()}],end:[{end:k()}],top:[{top:k()}],right:[{right:k()}],bottom:[{bottom:k()}],left:[{left:k()}],visibility:["visible","invisible","collapse"],z:[{z:[Dd,"auto",Rt,Ot]}],basis:[{basis:[xp,"full","auto",l,...I()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Er,xp,"auto","initial","none",Ot]}],grow:[{grow:["",Er,Rt,Ot]}],shrink:[{shrink:["",Er,Rt,Ot]}],order:[{order:[Dd,"first","last","none",Rt,Ot]}],"grid-cols":[{"grid-cols":w()}],"col-start-end":[{col:L()}],"col-start":[{"col-start":H()}],"col-end":[{"col-end":H()}],"grid-rows":[{"grid-rows":w()}],"row-start-end":[{row:L()}],"row-start":[{"row-start":H()}],"row-end":[{"row-end":H()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":B()}],"auto-rows":[{"auto-rows":B()}],gap:[{gap:I()}],"gap-x":[{"gap-x":I()}],"gap-y":[{"gap-y":I()}],"justify-content":[{justify:[...M(),"normal"]}],"justify-items":[{"justify-items":[...G(),"normal"]}],"justify-self":[{"justify-self":["auto",...G()]}],"align-content":[{content:["normal",...M()]}],"align-items":[{items:[...G(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...G(),{baseline:["","last"]}]}],"place-content":[{"place-content":M()}],"place-items":[{"place-items":[...G(),"baseline"]}],"place-self":[{"place-self":["auto",...G()]}],p:[{p:I()}],px:[{px:I()}],py:[{py:I()}],ps:[{ps:I()}],pe:[{pe:I()}],pt:[{pt:I()}],pr:[{pr:I()}],pb:[{pb:I()}],pl:[{pl:I()}],m:[{m:$()}],mx:[{mx:$()}],my:[{my:$()}],ms:[{ms:$()}],me:[{me:$()}],mt:[{mt:$()}],mr:[{mr:$()}],mb:[{mb:$()}],ml:[{ml:$()}],"space-x":[{"space-x":I()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":I()}],"space-y-reverse":["space-y-reverse"],size:[{size:z()}],w:[{w:[l,"screen",...z()]}],"min-w":[{"min-w":[l,"screen","none",...z()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[o]},...z()]}],h:[{h:["screen","lh",...z()]}],"min-h":[{"min-h":["screen","lh","none",...z()]}],"max-h":[{"max-h":["screen","lh",...z()]}],"font-size":[{text:["base",r,c0,Vu]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,Rt,qS]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",zS,Ot]}],"font-family":[{font:[kJ,Ot,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,Rt,Ot]}],"line-clamp":[{"line-clamp":[Er,"none",Rt,qS]}],leading:[{leading:[i,...I()]}],"list-image":[{"list-image":["none",Rt,Ot]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Rt,Ot]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:U()}],"text-color":[{text:U()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...se(),"wavy"]}],"text-decoration-thickness":[{decoration:[Er,"from-font","auto",Rt,Vu]}],"text-decoration-color":[{decoration:U()}],"underline-offset":[{"underline-offset":[Er,"auto",Rt,Ot]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Rt,Ot]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Rt,Ot]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Z()}],"bg-repeat":[{bg:re()}],"bg-size":[{bg:X()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Dd,Rt,Ot],radial:["",Rt,Ot],conic:[Dd,Rt,Ot]},DJ,RJ]}],"bg-color":[{bg:U()}],"gradient-from-pos":[{from:F()}],"gradient-via-pos":[{via:F()}],"gradient-to-pos":[{to:F()}],"gradient-from":[{from:U()}],"gradient-via":[{via:U()}],"gradient-to":[{to:U()}],rounded:[{rounded:te()}],"rounded-s":[{"rounded-s":te()}],"rounded-e":[{"rounded-e":te()}],"rounded-t":[{"rounded-t":te()}],"rounded-r":[{"rounded-r":te()}],"rounded-b":[{"rounded-b":te()}],"rounded-l":[{"rounded-l":te()}],"rounded-ss":[{"rounded-ss":te()}],"rounded-se":[{"rounded-se":te()}],"rounded-ee":[{"rounded-ee":te()}],"rounded-es":[{"rounded-es":te()}],"rounded-tl":[{"rounded-tl":te()}],"rounded-tr":[{"rounded-tr":te()}],"rounded-br":[{"rounded-br":te()}],"rounded-bl":[{"rounded-bl":te()}],"border-w":[{border:ne()}],"border-w-x":[{"border-x":ne()}],"border-w-y":[{"border-y":ne()}],"border-w-s":[{"border-s":ne()}],"border-w-e":[{"border-e":ne()}],"border-w-t":[{"border-t":ne()}],"border-w-r":[{"border-r":ne()}],"border-w-b":[{"border-b":ne()}],"border-w-l":[{"border-l":ne()}],"divide-x":[{"divide-x":ne()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ne()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...se(),"hidden","none"]}],"divide-style":[{divide:[...se(),"hidden","none"]}],"border-color":[{border:U()}],"border-color-x":[{"border-x":U()}],"border-color-y":[{"border-y":U()}],"border-color-s":[{"border-s":U()}],"border-color-e":[{"border-e":U()}],"border-color-t":[{"border-t":U()}],"border-color-r":[{"border-r":U()}],"border-color-b":[{"border-b":U()}],"border-color-l":[{"border-l":U()}],"divide-color":[{divide:U()}],"outline-style":[{outline:[...se(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Er,Rt,Ot]}],"outline-w":[{outline:["",Er,c0,Vu]}],"outline-color":[{outline:U()}],shadow:[{shadow:["","none",m,mb,pb]}],"shadow-color":[{shadow:U()}],"inset-shadow":[{"inset-shadow":["none",p,mb,pb]}],"inset-shadow-color":[{"inset-shadow":U()}],"ring-w":[{ring:ne()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:U()}],"ring-offset-w":[{"ring-offset":[Er,Vu]}],"ring-offset-color":[{"ring-offset":U()}],"inset-ring-w":[{"inset-ring":ne()}],"inset-ring-color":[{"inset-ring":U()}],"text-shadow":[{"text-shadow":["none",g,mb,pb]}],"text-shadow-color":[{"text-shadow":U()}],opacity:[{opacity:[Er,Rt,Ot]}],"mix-blend":[{"mix-blend":[...Ne(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ne()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Er]}],"mask-image-linear-from-pos":[{"mask-linear-from":fe()}],"mask-image-linear-to-pos":[{"mask-linear-to":fe()}],"mask-image-linear-from-color":[{"mask-linear-from":U()}],"mask-image-linear-to-color":[{"mask-linear-to":U()}],"mask-image-t-from-pos":[{"mask-t-from":fe()}],"mask-image-t-to-pos":[{"mask-t-to":fe()}],"mask-image-t-from-color":[{"mask-t-from":U()}],"mask-image-t-to-color":[{"mask-t-to":U()}],"mask-image-r-from-pos":[{"mask-r-from":fe()}],"mask-image-r-to-pos":[{"mask-r-to":fe()}],"mask-image-r-from-color":[{"mask-r-from":U()}],"mask-image-r-to-color":[{"mask-r-to":U()}],"mask-image-b-from-pos":[{"mask-b-from":fe()}],"mask-image-b-to-pos":[{"mask-b-to":fe()}],"mask-image-b-from-color":[{"mask-b-from":U()}],"mask-image-b-to-color":[{"mask-b-to":U()}],"mask-image-l-from-pos":[{"mask-l-from":fe()}],"mask-image-l-to-pos":[{"mask-l-to":fe()}],"mask-image-l-from-color":[{"mask-l-from":U()}],"mask-image-l-to-color":[{"mask-l-to":U()}],"mask-image-x-from-pos":[{"mask-x-from":fe()}],"mask-image-x-to-pos":[{"mask-x-to":fe()}],"mask-image-x-from-color":[{"mask-x-from":U()}],"mask-image-x-to-color":[{"mask-x-to":U()}],"mask-image-y-from-pos":[{"mask-y-from":fe()}],"mask-image-y-to-pos":[{"mask-y-to":fe()}],"mask-image-y-from-color":[{"mask-y-from":U()}],"mask-image-y-to-color":[{"mask-y-to":U()}],"mask-image-radial":[{"mask-radial":[Rt,Ot]}],"mask-image-radial-from-pos":[{"mask-radial-from":fe()}],"mask-image-radial-to-pos":[{"mask-radial-to":fe()}],"mask-image-radial-from-color":[{"mask-radial-from":U()}],"mask-image-radial-to-color":[{"mask-radial-to":U()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":_()}],"mask-image-conic-pos":[{"mask-conic":[Er]}],"mask-image-conic-from-pos":[{"mask-conic-from":fe()}],"mask-image-conic-to-pos":[{"mask-conic-to":fe()}],"mask-image-conic-from-color":[{"mask-conic-from":U()}],"mask-image-conic-to-color":[{"mask-conic-to":U()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Z()}],"mask-repeat":[{mask:re()}],"mask-size":[{mask:X()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Rt,Ot]}],filter:[{filter:["","none",Rt,Ot]}],blur:[{blur:we()}],brightness:[{brightness:[Er,Rt,Ot]}],contrast:[{contrast:[Er,Rt,Ot]}],"drop-shadow":[{"drop-shadow":["","none",x,mb,pb]}],"drop-shadow-color":[{"drop-shadow":U()}],grayscale:[{grayscale:["",Er,Rt,Ot]}],"hue-rotate":[{"hue-rotate":[Er,Rt,Ot]}],invert:[{invert:["",Er,Rt,Ot]}],saturate:[{saturate:[Er,Rt,Ot]}],sepia:[{sepia:["",Er,Rt,Ot]}],"backdrop-filter":[{"backdrop-filter":["","none",Rt,Ot]}],"backdrop-blur":[{"backdrop-blur":we()}],"backdrop-brightness":[{"backdrop-brightness":[Er,Rt,Ot]}],"backdrop-contrast":[{"backdrop-contrast":[Er,Rt,Ot]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Er,Rt,Ot]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Er,Rt,Ot]}],"backdrop-invert":[{"backdrop-invert":["",Er,Rt,Ot]}],"backdrop-opacity":[{"backdrop-opacity":[Er,Rt,Ot]}],"backdrop-saturate":[{"backdrop-saturate":[Er,Rt,Ot]}],"backdrop-sepia":[{"backdrop-sepia":["",Er,Rt,Ot]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":I()}],"border-spacing-x":[{"border-spacing-x":I()}],"border-spacing-y":[{"border-spacing-y":I()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Rt,Ot]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Er,"initial",Rt,Ot]}],ease:[{ease:["linear","initial",S,Rt,Ot]}],delay:[{delay:[Er,Rt,Ot]}],animate:[{animate:["none",E,Rt,Ot]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[N,Rt,Ot]}],"perspective-origin":[{"perspective-origin":A()}],rotate:[{rotate:ve()}],"rotate-x":[{"rotate-x":ve()}],"rotate-y":[{"rotate-y":ve()}],"rotate-z":[{"rotate-z":ve()}],scale:[{scale:Oe()}],"scale-x":[{"scale-x":Oe()}],"scale-y":[{"scale-y":Oe()}],"scale-z":[{"scale-z":Oe()}],"scale-3d":["scale-3d"],skew:[{skew:Fe()}],"skew-x":[{"skew-x":Fe()}],"skew-y":[{"skew-y":Fe()}],transform:[{transform:[Rt,Ot,"","none","gpu","cpu"]}],"transform-origin":[{origin:A()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:oe()}],"translate-x":[{"translate-x":oe()}],"translate-y":[{"translate-y":oe()}],"translate-z":[{"translate-z":oe()}],"translate-none":["translate-none"],accent:[{accent:U()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:U()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Rt,Ot]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Rt,Ot]}],fill:[{fill:["none",...U()]}],"stroke-w":[{stroke:[Er,c0,Vu,qS]}],stroke:[{stroke:["none",...U()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},$J=xJ(LJ);function ue(...e){return $J(cr(e))}function Or({className:e,...t}){return a.jsx("div",{"data-slot":"card",className:ue("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",e),...t})}function Dn({className:e,...t}){return a.jsx("div",{"data-slot":"card-header",className:ue("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function In({className:e,...t}){return a.jsx("h4",{"data-slot":"card-title",className:ue("leading-none",e),...t})}function Rl({className:e,...t}){return a.jsx("p",{"data-slot":"card-description",className:ue("text-muted-foreground",e),...t})}function Rr({className:e,...t}){return a.jsx("div",{"data-slot":"card-content",className:ue("px-6 [&:last-child]:pb-6",e),...t})}function wP(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Mf(...e){return t=>{let r=!1;const n=e.map(s=>{const i=wP(s,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let s=0;s<n.length;s++){const i=n[s];typeof i=="function"?i():wP(e[s],null)}}}}function Ar(...e){return h.useCallback(Mf(...e),e)}var FJ=Symbol.for("react.lazy"),Ly=JO[" use ".trim().toString()];function UJ(e){return typeof e=="object"&&e!==null&&"then"in e}function MU(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===FJ&&"_payload"in e&&UJ(e._payload)}function A1(e){const t=BJ(e),r=h.forwardRef((n,s)=>{let{children:i,...o}=n;MU(i)&&typeof Ly=="function"&&(i=Ly(i._payload));const l=h.Children.toArray(i),d=l.find(HJ);if(d){const u=d.props.children,m=l.map(p=>p===d?h.Children.count(u)>1?h.Children.only(null):h.isValidElement(u)?u.props.children:null:p);return a.jsx(t,{...o,ref:s,children:h.isValidElement(u)?h.cloneElement(u,void 0,m):null})}return a.jsx(t,{...o,ref:s,children:i})});return r.displayName=`${e}.Slot`,r}var LU=A1("Slot");function BJ(e){const t=h.forwardRef((r,n)=>{let{children:s,...i}=r;if(MU(s)&&typeof Ly=="function"&&(s=Ly(s._payload)),h.isValidElement(s)){const o=zJ(s),l=KJ(i,s.props);return s.type!==h.Fragment&&(l.ref=n?Mf(n,o):o),h.cloneElement(s,l)}return h.Children.count(s)>1?h.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var GJ=Symbol("radix.slottable");function HJ(e){return h.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===GJ}function KJ(e,t){const r={...t};for(const n in t){const s=e[n],i=t[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...l)=>{const d=i(...l);return s(...l),d}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function zJ(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}const AP=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,_P=cr,uR=(e,t)=>r=>{var n;if(t?.variants==null)return _P(e,r?.class,r?.className);const{variants:s,defaultVariants:i}=t,o=Object.keys(s).map(u=>{const m=r?.[u],p=i?.[u];if(m===null)return null;const g=AP(m)||AP(p);return s[u][g]}),l=r&&Object.entries(r).reduce((u,m)=>{let[p,g]=m;return g===void 0||(u[p]=g),u},{}),d=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,m)=>{let{class:p,className:g,...x}=m;return Object.entries(x).every(y=>{let[N,v]=y;return Array.isArray(v)?v.includes({...i,...l}[N]):{...i,...l}[N]===v})?[...u,p,g]:u},[]);return _P(e,o,d,r?.class,r?.className)},qJ=uR("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function jt({className:e,variant:t,size:r,asChild:n=!1,...s}){const i=n?LU:"button";return a.jsx(i,{"data-slot":"button",className:ue(qJ({variant:t,size:r,className:e})),...s})}function $r({className:e,type:t,...r}){return a.jsx("input",{type:t,"data-slot":"input",className:ue("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...r})}var dh=dU();const $U=Zr(dh);var WJ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],VJ=WJ.reduce((e,t)=>{const r=A1(`Primitive.${t}`),n=h.forwardRef((s,i)=>{const{asChild:o,...l}=s,d=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(d,{...l,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),YJ="Label",FU=h.forwardRef((e,t)=>a.jsx(VJ.label,{...e,ref:t,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(e.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));FU.displayName=YJ;var XJ=FU;function $t({className:e,...t}){return a.jsx(XJ,{"data-slot":"label",className:ue("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}function QJ(e,t){const r=h.createContext(t),n=i=>{const{children:o,...l}=i,d=h.useMemo(()=>l,Object.values(l));return a.jsx(r.Provider,{value:d,children:o})};n.displayName=e+"Provider";function s(i){const o=h.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[n,s]}function jo(e,t=[]){let r=[];function n(i,o){const l=h.createContext(o),d=r.length;r=[...r,o];const u=p=>{const{scope:g,children:x,...y}=p,N=g?.[e]?.[d]||l,v=h.useMemo(()=>y,Object.values(y));return a.jsx(N.Provider,{value:v,children:x})};u.displayName=i+"Provider";function m(p,g){const x=g?.[e]?.[d]||l,y=h.useContext(x);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${p}\` must be used within \`${i}\``)}return[u,m]}const s=()=>{const i=r.map(o=>h.createContext(o));return function(l){const d=l?.[e]||i;return h.useMemo(()=>({[`__scope${e}`]:{...l,[e]:d}}),[l,d])}};return s.scopeName=e,[n,ZJ(s,...t)]}function ZJ(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=n.reduce((l,{useScope:d,scopeName:u})=>{const p=d(i)[`__scope${u}`];return{...l,...p}},{});return h.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function Bt(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e?.(s),r===!1||!s.defaultPrevented)return t?.(s)}}var xa=globalThis?.document?h.useLayoutEffect:()=>{},JJ=JO[" useInsertionEffect ".trim().toString()]||xa;function Jc({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[s,i,o]=eee({defaultProp:t,onChange:r}),l=e!==void 0,d=l?e:s;{const m=h.useRef(e!==void 0);h.useEffect(()=>{const p=m.current;p!==l&&console.warn(`${n} is changing from ${p?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=l},[l,n])}const u=h.useCallback(m=>{if(l){const p=tee(m)?m(e):m;p!==e&&o.current?.(p)}else i(m)},[l,e,i,o]);return[d,u]}function eee({defaultProp:e,onChange:t}){const[r,n]=h.useState(e),s=h.useRef(r),i=h.useRef(t);return JJ(()=>{i.current=t},[t]),h.useEffect(()=>{s.current!==r&&(i.current?.(r),s.current=r)},[r,s]),[r,n,i]}function tee(e){return typeof e=="function"}function fR(e){const t=h.useRef({value:e,previous:e});return h.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function pR(e){const[t,r]=h.useState(void 0);return xa(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,l;if("borderBoxSize"in i){const d=i.borderBoxSize,u=Array.isArray(d)?d[0]:d;o=u.inlineSize,l=u.blockSize}else o=e.offsetWidth,l=e.offsetHeight;r({width:o,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}function ree(e,t){return h.useReducer((r,n)=>t[r][n]??r,e)}var Gs=e=>{const{present:t,children:r}=e,n=nee(t),s=typeof r=="function"?r({present:n.isPresent}):h.Children.only(r),i=Ar(n.ref,aee(s));return typeof r=="function"||n.isPresent?h.cloneElement(s,{ref:i}):null};Gs.displayName="Presence";function nee(e){const[t,r]=h.useState(),n=h.useRef(null),s=h.useRef(e),i=h.useRef("none"),o=e?"mounted":"unmounted",[l,d]=ree(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return h.useEffect(()=>{const u=hb(n.current);i.current=l==="mounted"?u:"none"},[l]),xa(()=>{const u=n.current,m=s.current;if(m!==e){const g=i.current,x=hb(u);e?d("MOUNT"):x==="none"||u?.display==="none"?d("UNMOUNT"):d(m&&g!==x?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,d]),xa(()=>{if(t){let u;const m=t.ownerDocument.defaultView??window,p=x=>{const N=hb(n.current).includes(CSS.escape(x.animationName));if(x.target===t&&N&&(d("ANIMATION_END"),!s.current)){const v=t.style.animationFillMode;t.style.animationFillMode="forwards",u=m.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=v)})}},g=x=>{x.target===t&&(i.current=hb(n.current))};return t.addEventListener("animationstart",g),t.addEventListener("animationcancel",p),t.addEventListener("animationend",p),()=>{m.clearTimeout(u),t.removeEventListener("animationstart",g),t.removeEventListener("animationcancel",p),t.removeEventListener("animationend",p)}}else d("ANIMATION_END")},[t,d]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:h.useCallback(u=>{n.current=u?getComputedStyle(u):null,r(u)},[])}}function hb(e){return e?.animationName||"none"}function aee(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function see(e){const t=iee(e),r=h.forwardRef((n,s)=>{const{children:i,...o}=n,l=h.Children.toArray(i),d=l.find(lee);if(d){const u=d.props.children,m=l.map(p=>p===d?h.Children.count(u)>1?h.Children.only(null):h.isValidElement(u)?u.props.children:null:p);return a.jsx(t,{...o,ref:s,children:h.isValidElement(u)?h.cloneElement(u,void 0,m):null})}return a.jsx(t,{...o,ref:s,children:i})});return r.displayName=`${e}.Slot`,r}function iee(e){const t=h.forwardRef((r,n)=>{const{children:s,...i}=r;if(h.isValidElement(s)){const o=dee(s),l=cee(i,s.props);return s.type!==h.Fragment&&(l.ref=n?Mf(n,o):o),h.cloneElement(s,l)}return h.Children.count(s)>1?h.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var oee=Symbol("radix.slottable");function lee(e){return h.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===oee}function cee(e,t){const r={...t};for(const n in t){const s=e[n],i=t[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...l)=>{const d=i(...l);return s(...l),d}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function dee(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var uee=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],dr=uee.reduce((e,t)=>{const r=see(`Primitive.${t}`),n=h.forwardRef((s,i)=>{const{asChild:o,...l}=s,d=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(d,{...l,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function fee(e,t){e&&dh.flushSync(()=>e.dispatchEvent(t))}var _1="Checkbox",[pee]=jo(_1),[mee,mR]=pee(_1);function hee(e){const{__scopeCheckbox:t,checked:r,children:n,defaultChecked:s,disabled:i,form:o,name:l,onCheckedChange:d,required:u,value:m="on",internal_do_not_use_render:p}=e,[g,x]=Jc({prop:r,defaultProp:s??!1,onChange:d,caller:_1}),[y,N]=h.useState(null),[v,S]=h.useState(null),E=h.useRef(!1),C=y?!!o||!!y.closest("form"):!0,_={checked:g,disabled:i,setChecked:x,control:y,setControl:N,name:l,form:o,value:m,hasConsumerStoppedPropagationRef:E,required:u,defaultChecked:ru(s)?!1:s,isFormControl:C,bubbleInput:v,setBubbleInput:S};return a.jsx(mee,{scope:t,..._,children:gee(p)?p(_):n})}var UU="CheckboxTrigger",BU=h.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...n},s)=>{const{control:i,value:o,disabled:l,checked:d,required:u,setControl:m,setChecked:p,hasConsumerStoppedPropagationRef:g,isFormControl:x,bubbleInput:y}=mR(UU,e),N=Ar(s,m),v=h.useRef(d);return h.useEffect(()=>{const S=i?.form;if(S){const E=()=>p(v.current);return S.addEventListener("reset",E),()=>S.removeEventListener("reset",E)}},[i,p]),a.jsx(dr.button,{type:"button",role:"checkbox","aria-checked":ru(d)?"mixed":d,"aria-required":u,"data-state":WU(d),"data-disabled":l?"":void 0,disabled:l,value:o,...n,ref:N,onKeyDown:Bt(t,S=>{S.key==="Enter"&&S.preventDefault()}),onClick:Bt(r,S=>{p(E=>ru(E)?!0:!E),y&&x&&(g.current=S.isPropagationStopped(),g.current||S.stopPropagation())})})});BU.displayName=UU;var GU=h.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:s,defaultChecked:i,required:o,disabled:l,value:d,onCheckedChange:u,form:m,...p}=e;return a.jsx(hee,{__scopeCheckbox:r,checked:s,defaultChecked:i,disabled:l,required:o,onCheckedChange:u,name:n,form:m,value:d,internal_do_not_use_render:({isFormControl:g})=>a.jsxs(a.Fragment,{children:[a.jsx(BU,{...p,ref:t,__scopeCheckbox:r}),g&&a.jsx(qU,{__scopeCheckbox:r})]})})});GU.displayName=_1;var HU="CheckboxIndicator",KU=h.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...s}=e,i=mR(HU,r);return a.jsx(Gs,{present:n||ru(i.checked)||i.checked===!0,children:a.jsx(dr.span,{"data-state":WU(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});KU.displayName=HU;var zU="CheckboxBubbleInput",qU=h.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:n,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:o,required:l,disabled:d,name:u,value:m,form:p,bubbleInput:g,setBubbleInput:x}=mR(zU,e),y=Ar(r,x),N=fR(i),v=pR(n);h.useEffect(()=>{const E=g;if(!E)return;const C=window.HTMLInputElement.prototype,A=Object.getOwnPropertyDescriptor(C,"checked").set,T=!s.current;if(N!==i&&A){const R=new Event("click",{bubbles:T});E.indeterminate=ru(i),A.call(E,ru(i)?!1:i),E.dispatchEvent(R)}},[g,N,i,s]);const S=h.useRef(ru(i)?!1:i);return a.jsx(dr.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??S.current,required:l,disabled:d,name:u,value:m,form:p,...t,tabIndex:-1,ref:y,style:{...t.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});qU.displayName=zU;function gee(e){return typeof e=="function"}function ru(e){return e==="indeterminate"}function WU(e){return ru(e)?"indeterminate":e?"checked":"unchecked"}function fy({className:e,...t}){return a.jsx(GU,{"data-slot":"checkbox",className:ue("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:a.jsx(KU,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:a.jsx(Sf,{className:"size-3.5"})})})}const xee=uR("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function Qp({className:e,variant:t,...r}){return a.jsx("div",{"data-slot":"alert",role:"alert",className:ue(xee({variant:t}),e),...r})}function Zp({className:e,...t}){return a.jsx("div",{"data-slot":"alert-description",className:ue("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...t})}function bee(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}const yee=e=>{switch(e){case"success":return See;case"info":return jee;case"warning":return Eee;case"error":return wee;default:return null}},vee=Array(12).fill(0),Nee=({visible:e,className:t})=>Y.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},Y.createElement("div",{className:"sonner-spinner"},vee.map((r,n)=>Y.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),See=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Eee=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),jee=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),wee=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Aee=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Y.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Y.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),_ee=()=>{const[e,t]=Y.useState(document.hidden);return Y.useEffect(()=>{const r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e};let fC=1;class Cee{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const r=this.subscribers.indexOf(t);this.subscribers.splice(r,1)}),this.publish=t=>{this.subscribers.forEach(r=>r(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var r;const{message:n,...s}=t,i=typeof t?.id=="number"||((r=t.id)==null?void 0:r.length)>0?t.id:fC++,o=this.toasts.find(d=>d.id===i),l=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(d=>d.id===i?(this.publish({...d,...t,id:i,title:n}),{...d,...t,id:i,dismissible:l,title:n}):d):this.addToast({title:n,...s,dismissible:l,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(r=>r({id:t,dismiss:!0})))):this.toasts.forEach(r=>{this.subscribers.forEach(n=>n({id:r.id,dismiss:!0}))}),t),this.message=(t,r)=>this.create({...r,message:t}),this.error=(t,r)=>this.create({...r,message:t,type:"error"}),this.success=(t,r)=>this.create({...r,type:"success",message:t}),this.info=(t,r)=>this.create({...r,type:"info",message:t}),this.warning=(t,r)=>this.create({...r,type:"warning",message:t}),this.loading=(t,r)=>this.create({...r,type:"loading",message:t}),this.promise=(t,r)=>{if(!r)return;let n;r.loading!==void 0&&(n=this.create({...r,promise:t,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));const s=Promise.resolve(t instanceof Function?t():t);let i=n!==void 0,o;const l=s.then(async u=>{if(o=["resolve",u],Y.isValidElement(u))i=!1,this.create({id:n,type:"default",message:u});else if(Oee(u)&&!u.ok){i=!1;const p=typeof r.error=="function"?await r.error(`HTTP error! status: ${u.status}`):r.error,g=typeof r.description=="function"?await r.description(`HTTP error! status: ${u.status}`):r.description,y=typeof p=="object"&&!Y.isValidElement(p)?p:{message:p};this.create({id:n,type:"error",description:g,...y})}else if(u instanceof Error){i=!1;const p=typeof r.error=="function"?await r.error(u):r.error,g=typeof r.description=="function"?await r.description(u):r.description,y=typeof p=="object"&&!Y.isValidElement(p)?p:{message:p};this.create({id:n,type:"error",description:g,...y})}else if(r.success!==void 0){i=!1;const p=typeof r.success=="function"?await r.success(u):r.success,g=typeof r.description=="function"?await r.description(u):r.description,y=typeof p=="object"&&!Y.isValidElement(p)?p:{message:p};this.create({id:n,type:"success",description:g,...y})}}).catch(async u=>{if(o=["reject",u],r.error!==void 0){i=!1;const m=typeof r.error=="function"?await r.error(u):r.error,p=typeof r.description=="function"?await r.description(u):r.description,x=typeof m=="object"&&!Y.isValidElement(m)?m:{message:m};this.create({id:n,type:"error",description:p,...x})}}).finally(()=>{i&&(this.dismiss(n),n=void 0),r.finally==null||r.finally.call(r)}),d=()=>new Promise((u,m)=>l.then(()=>o[0]==="reject"?m(o[1]):u(o[1])).catch(m));return typeof n!="string"&&typeof n!="number"?{unwrap:d}:Object.assign(n,{unwrap:d})},this.custom=(t,r)=>{const n=r?.id||fC++;return this.create({jsx:t(n),id:n,...r}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const ii=new Cee,Tee=(e,t)=>{const r=t?.id||fC++;return ii.addToast({title:e,...t,id:r}),r},Oee=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",Ree=Tee,kee=()=>ii.toasts,Pee=()=>ii.getActiveToasts(),ke=Object.assign(Ree,{success:ii.success,info:ii.info,warning:ii.warning,error:ii.error,custom:ii.custom,message:ii.message,promise:ii.promise,dismiss:ii.dismiss,loading:ii.loading},{getHistory:kee,getToasts:Pee});bee("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function gb(e){return e.label!==void 0}const Dee=3,Iee="24px",Mee="16px",CP=4e3,Lee=356,$ee=14,Fee=45,Uee=200;function Nl(...e){return e.filter(Boolean).join(" ")}function Bee(e){const[t,r]=e.split("-"),n=[];return t&&n.push(t),r&&n.push(r),n}const Gee=e=>{var t,r,n,s,i,o,l,d,u;const{invert:m,toast:p,unstyled:g,interacting:x,setHeights:y,visibleToasts:N,heights:v,index:S,toasts:E,expanded:C,removeToast:_,defaultRichColors:A,closeButton:T,style:R,cancelButtonStyle:I,actionButtonStyle:k,className:w="",descriptionClassName:L="",duration:H,position:B,gap:M,expandByDefault:G,classNames:$,icons:z,closeButtonAriaLabel:U="Close toast"}=e,[Z,re]=Y.useState(null),[X,F]=Y.useState(null),[te,ne]=Y.useState(!1),[se,Ne]=Y.useState(!1),[fe,we]=Y.useState(!1),[ve,Oe]=Y.useState(!1),[Fe,oe]=Y.useState(!1),[le,ge]=Y.useState(0),[_e,ee]=Y.useState(0),q=Y.useRef(p.duration||H||CP),ye=Y.useRef(null),pe=Y.useRef(null),he=S===0,rt=S+1<=N,Me=p.type,dt=p.dismissible!==!1,St=p.className||"",He=p.descriptionClassName||"",Ye=Y.useMemo(()=>v.findIndex(Ve=>Ve.toastId===p.id)||0,[v,p.id]),Mt=Y.useMemo(()=>{var Ve;return(Ve=p.closeButton)!=null?Ve:T},[p.closeButton,T]),Xt=Y.useMemo(()=>p.duration||H||CP,[p.duration,H]),hr=Y.useRef(0),Gt=Y.useRef(0),sr=Y.useRef(0),xr=Y.useRef(null),[mr,br]=B.split("-"),kr=Y.useMemo(()=>v.reduce((Ve,yt,ir)=>ir>=Ye?Ve:Ve+yt.height,0),[v,Ye]),cn=_ee(),wt=p.invert||m,Ge=Me==="loading";Gt.current=Y.useMemo(()=>Ye*M+kr,[Ye,kr]),Y.useEffect(()=>{q.current=Xt},[Xt]),Y.useEffect(()=>{ne(!0)},[]),Y.useEffect(()=>{const Ve=pe.current;if(Ve){const yt=Ve.getBoundingClientRect().height;return ee(yt),y(ir=>[{toastId:p.id,height:yt,position:p.position},...ir]),()=>y(ir=>ir.filter(Cr=>Cr.toastId!==p.id))}},[y,p.id]),Y.useLayoutEffect(()=>{if(!te)return;const Ve=pe.current,yt=Ve.style.height;Ve.style.height="auto";const ir=Ve.getBoundingClientRect().height;Ve.style.height=yt,ee(ir),y(Cr=>Cr.find(wr=>wr.toastId===p.id)?Cr.map(wr=>wr.toastId===p.id?{...wr,height:ir}:wr):[{toastId:p.id,height:ir,position:p.position},...Cr])},[te,p.title,p.description,y,p.id,p.jsx,p.action,p.cancel]);const Qt=Y.useCallback(()=>{Ne(!0),ge(Gt.current),y(Ve=>Ve.filter(yt=>yt.toastId!==p.id)),setTimeout(()=>{_(p)},Uee)},[p,_,y,Gt]);Y.useEffect(()=>{if(p.promise&&Me==="loading"||p.duration===1/0||p.type==="loading")return;let Ve;return C||x||cn?(()=>{if(sr.current<hr.current){const Cr=new Date().getTime()-hr.current;q.current=q.current-Cr}sr.current=new Date().getTime()})():(()=>{q.current!==1/0&&(hr.current=new Date().getTime(),Ve=setTimeout(()=>{p.onAutoClose==null||p.onAutoClose.call(p,p),Qt()},q.current))})(),()=>clearTimeout(Ve)},[C,x,p,Me,cn,Qt]),Y.useEffect(()=>{p.delete&&(Qt(),p.onDismiss==null||p.onDismiss.call(p,p))},[Qt,p.delete]);function Pr(){var Ve;if(z?.loading){var yt;return Y.createElement("div",{className:Nl($?.loader,p==null||(yt=p.classNames)==null?void 0:yt.loader,"sonner-loader"),"data-visible":Me==="loading"},z.loading)}return Y.createElement(Nee,{className:Nl($?.loader,p==null||(Ve=p.classNames)==null?void 0:Ve.loader),visible:Me==="loading"})}const _r=p.icon||z?.[Me]||yee(Me);var rr,je;return Y.createElement("li",{tabIndex:0,ref:pe,className:Nl(w,St,$?.toast,p==null||(t=p.classNames)==null?void 0:t.toast,$?.default,$?.[Me],p==null||(r=p.classNames)==null?void 0:r[Me]),"data-sonner-toast":"","data-rich-colors":(rr=p.richColors)!=null?rr:A,"data-styled":!(p.jsx||p.unstyled||g),"data-mounted":te,"data-promise":!!p.promise,"data-swiped":Fe,"data-removed":se,"data-visible":rt,"data-y-position":mr,"data-x-position":br,"data-index":S,"data-front":he,"data-swiping":fe,"data-dismissible":dt,"data-type":Me,"data-invert":wt,"data-swipe-out":ve,"data-swipe-direction":X,"data-expanded":!!(C||G&&te),"data-testid":p.testId,style:{"--index":S,"--toasts-before":S,"--z-index":E.length-S,"--offset":`${se?le:Gt.current}px`,"--initial-height":G?"auto":`${_e}px`,...R,...p.style},onDragEnd:()=>{we(!1),re(null),xr.current=null},onPointerDown:Ve=>{Ve.button!==2&&(Ge||!dt||(ye.current=new Date,ge(Gt.current),Ve.target.setPointerCapture(Ve.pointerId),Ve.target.tagName!=="BUTTON"&&(we(!0),xr.current={x:Ve.clientX,y:Ve.clientY})))},onPointerUp:()=>{var Ve,yt,ir;if(ve||!dt)return;xr.current=null;const Cr=Number(((Ve=pe.current)==null?void 0:Ve.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),nn=Number(((yt=pe.current)==null?void 0:yt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),wr=new Date().getTime()-((ir=ye.current)==null?void 0:ir.getTime()),ze=Z==="x"?Cr:nn,dn=Math.abs(ze)/wr;if(Math.abs(ze)>=Fee||dn>.11){ge(Gt.current),p.onDismiss==null||p.onDismiss.call(p,p),F(Z==="x"?Cr>0?"right":"left":nn>0?"down":"up"),Qt(),Oe(!0);return}else{var ur,Ue;(ur=pe.current)==null||ur.style.setProperty("--swipe-amount-x","0px"),(Ue=pe.current)==null||Ue.style.setProperty("--swipe-amount-y","0px")}oe(!1),we(!1),re(null)},onPointerMove:Ve=>{var yt,ir,Cr;if(!xr.current||!dt||((yt=window.getSelection())==null?void 0:yt.toString().length)>0)return;const wr=Ve.clientY-xr.current.y,ze=Ve.clientX-xr.current.x;var dn;const ur=(dn=e.swipeDirections)!=null?dn:Bee(B);!Z&&(Math.abs(ze)>1||Math.abs(wr)>1)&&re(Math.abs(ze)>Math.abs(wr)?"x":"y");let Ue={x:0,y:0};const Se=nt=>1/(1.5+Math.abs(nt)/20);if(Z==="y"){if(ur.includes("top")||ur.includes("bottom"))if(ur.includes("top")&&wr<0||ur.includes("bottom")&&wr>0)Ue.y=wr;else{const nt=wr*Se(wr);Ue.y=Math.abs(nt)<Math.abs(wr)?nt:wr}}else if(Z==="x"&&(ur.includes("left")||ur.includes("right")))if(ur.includes("left")&&ze<0||ur.includes("right")&&ze>0)Ue.x=ze;else{const nt=ze*Se(ze);Ue.x=Math.abs(nt)<Math.abs(ze)?nt:ze}(Math.abs(Ue.x)>0||Math.abs(Ue.y)>0)&&oe(!0),(ir=pe.current)==null||ir.style.setProperty("--swipe-amount-x",`${Ue.x}px`),(Cr=pe.current)==null||Cr.style.setProperty("--swipe-amount-y",`${Ue.y}px`)}},Mt&&!p.jsx&&Me!=="loading"?Y.createElement("button",{"aria-label":U,"data-disabled":Ge,"data-close-button":!0,onClick:Ge||!dt?()=>{}:()=>{Qt(),p.onDismiss==null||p.onDismiss.call(p,p)},className:Nl($?.closeButton,p==null||(n=p.classNames)==null?void 0:n.closeButton)},(je=z?.close)!=null?je:Aee):null,(Me||p.icon||p.promise)&&p.icon!==null&&(z?.[Me]!==null||p.icon)?Y.createElement("div",{"data-icon":"",className:Nl($?.icon,p==null||(s=p.classNames)==null?void 0:s.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||Pr():null,p.type!=="loading"?_r:null):null,Y.createElement("div",{"data-content":"",className:Nl($?.content,p==null||(i=p.classNames)==null?void 0:i.content)},Y.createElement("div",{"data-title":"",className:Nl($?.title,p==null||(o=p.classNames)==null?void 0:o.title)},p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title),p.description?Y.createElement("div",{"data-description":"",className:Nl(L,He,$?.description,p==null||(l=p.classNames)==null?void 0:l.description)},typeof p.description=="function"?p.description():p.description):null),Y.isValidElement(p.cancel)?p.cancel:p.cancel&&gb(p.cancel)?Y.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||I,onClick:Ve=>{gb(p.cancel)&&dt&&(p.cancel.onClick==null||p.cancel.onClick.call(p.cancel,Ve),Qt())},className:Nl($?.cancelButton,p==null||(d=p.classNames)==null?void 0:d.cancelButton)},p.cancel.label):null,Y.isValidElement(p.action)?p.action:p.action&&gb(p.action)?Y.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||k,onClick:Ve=>{gb(p.action)&&(p.action.onClick==null||p.action.onClick.call(p.action,Ve),!Ve.defaultPrevented&&Qt())},className:Nl($?.actionButton,p==null||(u=p.classNames)==null?void 0:u.actionButton)},p.action.label):null)};function TP(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function Hee(e,t){const r={};return[e,t].forEach((n,s)=>{const i=s===1,o=i?"--mobile-offset":"--offset",l=i?Mee:Iee;function d(u){["top","right","bottom","left"].forEach(m=>{r[`${o}-${m}`]=typeof u=="number"?`${u}px`:u})}typeof n=="number"||typeof n=="string"?d(n):typeof n=="object"?["top","right","bottom","left"].forEach(u=>{n[u]===void 0?r[`${o}-${u}`]=l:r[`${o}-${u}`]=typeof n[u]=="number"?`${n[u]}px`:n[u]}):d(l)}),r}const Kee=Y.forwardRef(function(t,r){const{id:n,invert:s,position:i="bottom-right",hotkey:o=["altKey","KeyT"],expand:l,closeButton:d,className:u,offset:m,mobileOffset:p,theme:g="light",richColors:x,duration:y,style:N,visibleToasts:v=Dee,toastOptions:S,dir:E=TP(),gap:C=$ee,icons:_,containerAriaLabel:A="Notifications"}=t,[T,R]=Y.useState([]),I=Y.useMemo(()=>n?T.filter(te=>te.toasterId===n):T.filter(te=>!te.toasterId),[T,n]),k=Y.useMemo(()=>Array.from(new Set([i].concat(I.filter(te=>te.position).map(te=>te.position)))),[I,i]),[w,L]=Y.useState([]),[H,B]=Y.useState(!1),[M,G]=Y.useState(!1),[$,z]=Y.useState(g!=="system"?g:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),U=Y.useRef(null),Z=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),re=Y.useRef(null),X=Y.useRef(!1),F=Y.useCallback(te=>{R(ne=>{var se;return(se=ne.find(Ne=>Ne.id===te.id))!=null&&se.delete||ii.dismiss(te.id),ne.filter(({id:Ne})=>Ne!==te.id)})},[]);return Y.useEffect(()=>ii.subscribe(te=>{if(te.dismiss){requestAnimationFrame(()=>{R(ne=>ne.map(se=>se.id===te.id?{...se,delete:!0}:se))});return}setTimeout(()=>{$U.flushSync(()=>{R(ne=>{const se=ne.findIndex(Ne=>Ne.id===te.id);return se!==-1?[...ne.slice(0,se),{...ne[se],...te},...ne.slice(se+1)]:[te,...ne]})})})}),[T]),Y.useEffect(()=>{if(g!=="system"){z(g);return}if(g==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?z("dark"):z("light")),typeof window>"u")return;const te=window.matchMedia("(prefers-color-scheme: dark)");try{te.addEventListener("change",({matches:ne})=>{z(ne?"dark":"light")})}catch{te.addListener(({matches:se})=>{try{z(se?"dark":"light")}catch(Ne){console.error(Ne)}})}},[g]),Y.useEffect(()=>{T.length<=1&&B(!1)},[T]),Y.useEffect(()=>{const te=ne=>{var se;if(o.every(we=>ne[we]||ne.code===we)){var fe;B(!0),(fe=U.current)==null||fe.focus()}ne.code==="Escape"&&(document.activeElement===U.current||(se=U.current)!=null&&se.contains(document.activeElement))&&B(!1)};return document.addEventListener("keydown",te),()=>document.removeEventListener("keydown",te)},[o]),Y.useEffect(()=>{if(U.current)return()=>{re.current&&(re.current.focus({preventScroll:!0}),re.current=null,X.current=!1)}},[U.current]),Y.createElement("section",{ref:r,"aria-label":`${A} ${Z}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},k.map((te,ne)=>{var se;const[Ne,fe]=te.split("-");return I.length?Y.createElement("ol",{key:te,dir:E==="auto"?TP():E,tabIndex:-1,ref:U,className:u,"data-sonner-toaster":!0,"data-sonner-theme":$,"data-y-position":Ne,"data-x-position":fe,style:{"--front-toast-height":`${((se=w[0])==null?void 0:se.height)||0}px`,"--width":`${Lee}px`,"--gap":`${C}px`,...N,...Hee(m,p)},onBlur:we=>{X.current&&!we.currentTarget.contains(we.relatedTarget)&&(X.current=!1,re.current&&(re.current.focus({preventScroll:!0}),re.current=null))},onFocus:we=>{we.target instanceof HTMLElement&&we.target.dataset.dismissible==="false"||X.current||(X.current=!0,re.current=we.relatedTarget)},onMouseEnter:()=>B(!0),onMouseMove:()=>B(!0),onMouseLeave:()=>{M||B(!1)},onDragEnd:()=>B(!1),onPointerDown:we=>{we.target instanceof HTMLElement&&we.target.dataset.dismissible==="false"||G(!0)},onPointerUp:()=>G(!1)},I.filter(we=>!we.position&&ne===0||we.position===te).map((we,ve)=>{var Oe,Fe;return Y.createElement(Gee,{key:we.id,icons:_,index:ve,toast:we,defaultRichColors:x,duration:(Oe=S?.duration)!=null?Oe:y,className:S?.className,descriptionClassName:S?.descriptionClassName,invert:s,visibleToasts:v,closeButton:(Fe=S?.closeButton)!=null?Fe:d,interacting:M,position:te,style:S?.style,unstyled:S?.unstyled,classNames:S?.classNames,cancelButtonStyle:S?.cancelButtonStyle,actionButtonStyle:S?.actionButtonStyle,closeButtonAriaLabel:S?.closeButtonAriaLabel,removeToast:F,toasts:I.filter(oe=>oe.position==we.position),heights:w.filter(oe=>oe.position==we.position),setHeights:L,expandByDefault:l,gap:C,expanded:H,swipeDirections:t.swipeDirections})})):null}))}),zee={VITE_BASE_PATH:"/neuro-shield/"},qee="R-2ldKkoGbDF-marBFEbgVilAXB5Tw0r";function Wee(e){if(!e.trim())return"/neuro-shield/";let t=e.trim();return t.startsWith("/")||(t=`/${t}`),t.endsWith("/")||(t=`${t}/`),t}function Vee(){const e=zee,t=(e.VITE_CITIZEN_ENTRY_URL||e.VITE_STAGE1_DEMO_LINK||"").trim();if(t)return t;const r=(e.VITE_CITIZEN_DEMO_TOKEN||qee).trim(),n=Wee(e.VITE_BASE_PATH);return`${window.location.origin}${n}p/sms?t=${encodeURIComponent(r)}`}const WS=[{email:"admin@central.gov.kr",password:"demo1234",role:"central_admin",name:"",organization:""},{email:"regional@seoul.go.kr",password:"demo1234",role:"regional_center",name:"",organization:" "},{email:"local@gangnam.go.kr",password:"demo1234",role:"local_center",name:"",organization:"  "}];function Yee({onLogin:e}){const[t,r]=h.useState("select"),[n,s]=h.useState(null),[i,o]=h.useState(""),[l,d]=h.useState(""),[u,m]=h.useState(""),[p,g]=h.useState(""),[x,y]=h.useState(!1),[N,v]=h.useState(!1),[S,E]=h.useState(1),C=[{id:"citizen",title:"",description:"    ( )",icon:Xl,color:"bg-blue-600"},{id:"local_center",title:"",description:"// ",icon:Yp,color:"bg-green-600"},{id:"regional_center",title:"",description:" ",icon:Yp,color:"bg-purple-600"},{id:"central_admin",title:"",description:" ",icon:Qo,color:"bg-red-600"}],_=k=>{if(k==="citizen"){const w=Vee();try{window.location.href=w}catch{window.location.hash="#citizen"}return}s(k),r("login")},A=()=>{if(!i||!l){ke.error("  ");return}const k=WS.find(w=>w.email===i&&w.password===l);k?(console.log("[AUDIT] Login Success:",{email:i,role:k.role,timestamp:new Date().toISOString(),ipAddress:"CLIENT_IP"}),N&&localStorage.setItem("rememberedEmail",i),ke.success(` : ${k.name}`),e({email:k.email,role:k.role,name:k.name,organization:k.organization})):(console.log("[AUDIT] Login Failed:",{email:i,timestamp:new Date().toISOString(),reason:"Invalid credentials"}),ke.error("    "))},T=()=>{if(S===1){if(!i||!l){ke.error("  ");return}E(2)}else{if(!u||n!=="citizen"&&!p){ke.error("   ");return}console.log("[AUDIT] Registration:",{email:i,role:n,name:u,organization:p,timestamp:new Date().toISOString()}),ke.success(" "),r("login"),E(1)}},R=()=>{t==="register"&&S===2?E(1):(r("select"),s(null),E(1),o(""),d(""),m(""),g(""))},I=k=>{o(k.email),d(k.password),ke.info(`   : ${k.name}`)};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-100 via-gray-200 to-gray-300 flex items-center justify-center p-4",children:a.jsxs("div",{className:"w-full max-w-6xl",children:[a.jsx("div",{className:"text-center mb-8",children:a.jsx(XZ,{size:88})}),t==="select"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs(Or,{className:"border-2",children:[a.jsxs(Dn,{children:[a.jsx(In,{className:"text-center",children:"/ "}),a.jsx(Rl,{className:"text-center",children:"       "})]}),a.jsx(Rr,{children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:C.map(k=>{const w=k.icon;return a.jsxs("button",{onClick:()=>_(k.id),className:"p-6 border-2 border-gray-300 hover:border-primary rounded transition-all hover:shadow-lg group",children:[a.jsx("div",{className:`${k.color} w-16 h-16 rounded flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform`,children:a.jsx(w,{className:"h-8 w-8 text-white"})}),a.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:k.title}),a.jsx("p",{className:"text-sm text-gray-600",children:k.description})]},k.id)})})})]}),a.jsxs(Or,{className:"border-blue-300 bg-blue-50",children:[a.jsx(Dn,{children:a.jsxs(In,{className:"text-blue-900 flex items-center gap-2",children:[a.jsx(ea,{className:"h-5 w-5"}),"  "]})}),a.jsxs(Rr,{children:[a.jsx("p",{className:"text-sm text-blue-800 mb-4",children:"      :"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:WS.map(k=>a.jsxs("div",{className:"bg-white p-3 rounded border border-blue-200",children:[a.jsx("p",{className:"font-semibold text-gray-900 mb-1",children:k.name}),a.jsx("p",{className:"text-xs text-gray-600 mb-1",children:k.email}),a.jsxs("p",{className:"text-xs text-gray-500",children:[": ",k.password]})]},k.email))})]})]})]}),t==="login"&&n&&a.jsxs(Or,{className:"max-w-md mx-auto border-2",children:[a.jsxs(Dn,{children:[a.jsxs(jt,{variant:"ghost",size:"sm",onClick:R,className:"mb-2 -ml-2",children:[a.jsx(Tl,{className:"h-4 w-4 mr-2"}),""]}),a.jsxs(In,{children:[C.find(k=>k.id===n)?.title," "]}),a.jsx(Rl,{children:"   "})]}),a.jsxs(Rr,{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx($t,{htmlFor:"email",children:""}),a.jsx($r,{id:"email",type:"email",value:i,onChange:k=>o(k.target.value),placeholder:"example@domain.com",className:"mt-2"})]}),a.jsxs("div",{children:[a.jsx($t,{htmlFor:"password",children:""}),a.jsxs("div",{className:"relative mt-2",children:[a.jsx($r,{id:"password",type:x?"text":"password",value:l,onChange:k=>d(k.target.value),placeholder:""}),a.jsx("button",{type:"button",onClick:()=>y(!x),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500",children:x?a.jsx(lC,{className:"h-4 w-4"}):a.jsx(pm,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(fy,{id:"remember",checked:N,onCheckedChange:k=>v(k)}),a.jsx("label",{htmlFor:"remember",className:"text-sm text-gray-700 cursor-pointer",children:" "})]}),a.jsx(jt,{className:"w-full",onClick:A,children:""}),a.jsx("div",{className:"text-center",children:a.jsx("button",{onClick:()=>r("register"),className:"text-sm text-primary hover:underline",children:" ? "})}),a.jsxs(Qp,{children:[a.jsx(ea,{className:"h-4 w-4"}),a.jsxs(Zp,{children:[a.jsx("p",{className:"text-sm font-medium mb-2",children:" :"}),a.jsx("div",{className:"space-y-1",children:WS.filter(k=>k.role===n).map(k=>a.jsxs("button",{onClick:()=>I(k),className:"text-xs text-blue-600 hover:underline block",children:[k.name," (",k.email,")"]},k.email))})]})]})]})]}),t==="register"&&n&&a.jsxs(Or,{className:"max-w-md mx-auto border-2",children:[a.jsxs(Dn,{children:[a.jsxs(jt,{variant:"ghost",size:"sm",onClick:R,className:"mb-2 -ml-2",children:[a.jsx(Tl,{className:"h-4 w-4 mr-2"}),""]}),a.jsxs(In,{children:[C.find(k=>k.id===n)?.title," "]}),a.jsx(Rl,{children:S===1?"  ":"  "})]}),a.jsxs(Rr,{className:"space-y-4",children:[S===1?a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx($t,{htmlFor:"reg-email",children:" *"}),a.jsx($r,{id:"reg-email",type:"email",value:i,onChange:k=>o(k.target.value),placeholder:"example@domain.com",className:"mt-2"})]}),a.jsxs("div",{children:[a.jsx($t,{htmlFor:"reg-password",children:" *"}),a.jsxs("div",{className:"relative mt-2",children:[a.jsx($r,{id:"reg-password",type:x?"text":"password",value:l,onChange:k=>d(k.target.value),placeholder:"8 "}),a.jsx("button",{type:"button",onClick:()=>y(!x),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500",children:x?a.jsx(lC,{className:"h-4 w-4"}):a.jsx(pm,{className:"h-4 w-4"})})]})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx($t,{htmlFor:"name",children:" *"}),a.jsx($r,{id:"name",value:u,onChange:k=>m(k.target.value),placeholder:"",className:"mt-2"})]}),n!=="citizen"&&a.jsxs("div",{children:[a.jsx($t,{htmlFor:"organization",children:"  *"}),a.jsx($r,{id:"organization",value:p,onChange:k=>g(k.target.value),placeholder:":   ",className:"mt-2"})]})]}),a.jsx(jt,{className:"w-full",onClick:T,children:S===1?"":" "}),a.jsx("div",{className:"text-center",children:a.jsx("button",{onClick:()=>{r("login"),E(1)},className:"text-sm text-primary hover:underline",children:"  ? "})})]})]}),a.jsxs("div",{className:"text-center mt-8 text-sm text-gray-600",children:[a.jsx("p",{children:" 2026 Neuro-Shield. All rights reserved."}),a.jsx("p",{className:"mt-1",children:""})]})]})})}function qo({className:e,...t}){return a.jsx("textarea",{"data-slot":"textarea",className:ue("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}var Xee=JO[" useId ".trim().toString()]||(()=>{}),Qee=0;function Hl(e){const[t,r]=h.useState(Xee());return xa(()=>{r(n=>n??String(Qee++))},[e]),e||(t?`radix-${t}`:"")}function vs(e){const t=h.useRef(e);return h.useEffect(()=>{t.current=e}),h.useMemo(()=>(...r)=>t.current?.(...r),[])}function Zee(e,t=globalThis?.document){const r=vs(e);h.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var Jee="DismissableLayer",pC="dismissableLayer.update",ete="dismissableLayer.pointerDownOutside",tte="dismissableLayer.focusOutside",OP,VU=h.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ax=h.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...d}=e,u=h.useContext(VU),[m,p]=h.useState(null),g=m?.ownerDocument??globalThis?.document,[,x]=h.useState({}),y=Ar(t,R=>p(R)),N=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),S=N.indexOf(v),E=m?N.indexOf(m):-1,C=u.layersWithOutsidePointerEventsDisabled.size>0,_=E>=S,A=ate(R=>{const I=R.target,k=[...u.branches].some(w=>w.contains(I));!_||k||(s?.(R),o?.(R),R.defaultPrevented||l?.())},g),T=ste(R=>{const I=R.target;[...u.branches].some(w=>w.contains(I))||(i?.(R),o?.(R),R.defaultPrevented||l?.())},g);return Zee(R=>{E===u.layers.size-1&&(n?.(R),!R.defaultPrevented&&l&&(R.preventDefault(),l()))},g),h.useEffect(()=>{if(m)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(OP=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(m)),u.layers.add(m),RP(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=OP)}},[m,g,r,u]),h.useEffect(()=>()=>{m&&(u.layers.delete(m),u.layersWithOutsidePointerEventsDisabled.delete(m),RP())},[m,u]),h.useEffect(()=>{const R=()=>x({});return document.addEventListener(pC,R),()=>document.removeEventListener(pC,R)},[]),a.jsx(dr.div,{...d,ref:y,style:{pointerEvents:C?_?"auto":"none":void 0,...e.style},onFocusCapture:Bt(e.onFocusCapture,T.onFocusCapture),onBlurCapture:Bt(e.onBlurCapture,T.onBlurCapture),onPointerDownCapture:Bt(e.onPointerDownCapture,A.onPointerDownCapture)})});ax.displayName=Jee;var rte="DismissableLayerBranch",nte=h.forwardRef((e,t)=>{const r=h.useContext(VU),n=h.useRef(null),s=Ar(t,n);return h.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),a.jsx(dr.div,{...e,ref:s})});nte.displayName=rte;function ate(e,t=globalThis?.document){const r=vs(e),n=h.useRef(!1),s=h.useRef(()=>{});return h.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let d=function(){YU(ete,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=d,t.addEventListener("click",s.current,{once:!0})):d()}else t.removeEventListener("click",s.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function ste(e,t=globalThis?.document){const r=vs(e),n=h.useRef(!1);return h.useEffect(()=>{const s=i=>{i.target&&!n.current&&YU(tte,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function RP(){const e=new CustomEvent(pC);document.dispatchEvent(e)}function YU(e,t,r,{discrete:n}){const s=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?fee(s,i):s.dispatchEvent(i)}var VS="focusScope.autoFocusOnMount",YS="focusScope.autoFocusOnUnmount",kP={bubbles:!1,cancelable:!0},ite="FocusScope",C1=h.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=e,[l,d]=h.useState(null),u=vs(s),m=vs(i),p=h.useRef(null),g=Ar(t,N=>d(N)),x=h.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;h.useEffect(()=>{if(n){let N=function(C){if(x.paused||!l)return;const _=C.target;l.contains(_)?p.current=_:Ud(p.current,{select:!0})},v=function(C){if(x.paused||!l)return;const _=C.relatedTarget;_!==null&&(l.contains(_)||Ud(p.current,{select:!0}))},S=function(C){if(document.activeElement===document.body)for(const A of C)A.removedNodes.length>0&&Ud(l)};document.addEventListener("focusin",N),document.addEventListener("focusout",v);const E=new MutationObserver(S);return l&&E.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",N),document.removeEventListener("focusout",v),E.disconnect()}}},[n,l,x.paused]),h.useEffect(()=>{if(l){DP.add(x);const N=document.activeElement;if(!l.contains(N)){const S=new CustomEvent(VS,kP);l.addEventListener(VS,u),l.dispatchEvent(S),S.defaultPrevented||(ote(fte(XU(l)),{select:!0}),document.activeElement===N&&Ud(l))}return()=>{l.removeEventListener(VS,u),setTimeout(()=>{const S=new CustomEvent(YS,kP);l.addEventListener(YS,m),l.dispatchEvent(S),S.defaultPrevented||Ud(N??document.body,{select:!0}),l.removeEventListener(YS,m),DP.remove(x)},0)}}},[l,u,m,x]);const y=h.useCallback(N=>{if(!r&&!n||x.paused)return;const v=N.key==="Tab"&&!N.altKey&&!N.ctrlKey&&!N.metaKey,S=document.activeElement;if(v&&S){const E=N.currentTarget,[C,_]=lte(E);C&&_?!N.shiftKey&&S===_?(N.preventDefault(),r&&Ud(C,{select:!0})):N.shiftKey&&S===C&&(N.preventDefault(),r&&Ud(_,{select:!0})):S===E&&N.preventDefault()}},[r,n,x.paused]);return a.jsx(dr.div,{tabIndex:-1,...o,ref:g,onKeyDown:y})});C1.displayName=ite;function ote(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Ud(n,{select:t}),document.activeElement!==r)return}function lte(e){const t=XU(e),r=PP(t,e),n=PP(t.reverse(),e);return[r,n]}function XU(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function PP(e,t){for(const r of e)if(!cte(r,{upTo:t}))return r}function cte(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function dte(e){return e instanceof HTMLInputElement&&"select"in e}function Ud(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&dte(e)&&t&&e.select()}}var DP=ute();function ute(){let e=[];return{add(t){const r=e[0];t!==r&&r?.pause(),e=IP(e,t),e.unshift(t)},remove(t){e=IP(e,t),e[0]?.resume()}}}function IP(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function fte(e){return e.filter(t=>t.tagName!=="A")}var pte="Portal",sx=h.forwardRef((e,t)=>{const{container:r,...n}=e,[s,i]=h.useState(!1);xa(()=>i(!0),[]);const o=r||s&&globalThis?.document?.body;return o?$U.createPortal(a.jsx(dr.div,{...n,ref:t}),o):null});sx.displayName=pte;var XS=0;function hR(){h.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??MP()),document.body.insertAdjacentElement("beforeend",e[1]??MP()),XS++,()=>{XS===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),XS--}},[])}function MP(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var kl=function(){return kl=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},kl.apply(this,arguments)};function QU(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function mte(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,i;n<s;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}var py="right-scroll-bar-position",my="width-before-scroll-bar",hte="with-scroll-bars-hidden",gte="--removed-body-scroll-bar-size";function QS(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function xte(e,t){var r=h.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=t,r.facade}var bte=typeof window<"u"?h.useLayoutEffect:h.useEffect,LP=new WeakMap;function yte(e,t){var r=xte(null,function(n){return e.forEach(function(s){return QS(s,n)})});return bte(function(){var n=LP.get(r);if(n){var s=new Set(n),i=new Set(e),o=r.current;s.forEach(function(l){i.has(l)||QS(l,null)}),i.forEach(function(l){s.has(l)||QS(l,o)})}LP.set(r,e)},[e]),r}function vte(e){return e}function Nte(e,t){t===void 0&&(t=vte);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var o=t(i,n);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(n=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){n=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(i),o=r}var d=function(){var m=o;o=[],m.forEach(i)},u=function(){return Promise.resolve().then(d)};u(),r={push:function(m){o.push(m),u()},filter:function(m){return o=o.filter(m),r}}}};return s}function Ste(e){e===void 0&&(e={});var t=Nte(null);return t.options=kl({async:!0,ssr:!1},e),t}var ZU=function(e){var t=e.sideCar,r=QU(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return h.createElement(n,kl({},r))};ZU.isSideCarExport=!0;function Ete(e,t){return e.useMedium(t),ZU}var JU=Ste(),ZS=function(){},T1=h.forwardRef(function(e,t){var r=h.useRef(null),n=h.useState({onScrollCapture:ZS,onWheelCapture:ZS,onTouchMoveCapture:ZS}),s=n[0],i=n[1],o=e.forwardProps,l=e.children,d=e.className,u=e.removeScrollBar,m=e.enabled,p=e.shards,g=e.sideCar,x=e.noRelative,y=e.noIsolation,N=e.inert,v=e.allowPinchZoom,S=e.as,E=S===void 0?"div":S,C=e.gapMode,_=QU(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),A=g,T=yte([r,t]),R=kl(kl({},_),s);return h.createElement(h.Fragment,null,m&&h.createElement(A,{sideCar:JU,removeScrollBar:u,shards:p,noRelative:x,noIsolation:y,inert:N,setCallbacks:i,allowPinchZoom:!!v,lockRef:r,gapMode:C}),o?h.cloneElement(h.Children.only(l),kl(kl({},R),{ref:T})):h.createElement(E,kl({},R,{className:d,ref:T}),l))});T1.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};T1.classNames={fullWidth:my,zeroRight:py};var jte=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function wte(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=jte();return t&&e.setAttribute("nonce",t),e}function Ate(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function _te(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Cte=function(){var e=0,t=null;return{add:function(r){e==0&&(t=wte())&&(Ate(t,r),_te(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Tte=function(){var e=Cte();return function(t,r){h.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},eB=function(){var e=Tte(),t=function(r){var n=r.styles,s=r.dynamic;return e(n,s),null};return t},Ote={left:0,top:0,right:0,gap:0},JS=function(e){return parseInt(e||"",10)||0},Rte=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[JS(r),JS(n),JS(s)]},kte=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Ote;var t=Rte(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},Pte=eB(),Jp="data-scroll-locked",Dte=function(e,t,r,n){var s=e.left,i=e.top,o=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(hte,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(Jp,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(py,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(my,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(py," .").concat(py,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(my," .").concat(my,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Jp,`] {
    `).concat(gte,": ").concat(l,`px;
  }
`)},$P=function(){var e=parseInt(document.body.getAttribute(Jp)||"0",10);return isFinite(e)?e:0},Ite=function(){h.useEffect(function(){return document.body.setAttribute(Jp,($P()+1).toString()),function(){var e=$P()-1;e<=0?document.body.removeAttribute(Jp):document.body.setAttribute(Jp,e.toString())}},[])},Mte=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,s=n===void 0?"margin":n;Ite();var i=h.useMemo(function(){return kte(s)},[s]);return h.createElement(Pte,{styles:Dte(i,!t,s,r?"":"!important")})},mC=!1;if(typeof window<"u")try{var xb=Object.defineProperty({},"passive",{get:function(){return mC=!0,!0}});window.addEventListener("test",xb,xb),window.removeEventListener("test",xb,xb)}catch{mC=!1}var bp=mC?{passive:!1}:!1,Lte=function(e){return e.tagName==="TEXTAREA"},tB=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!Lte(e)&&r[t]==="visible")},$te=function(e){return tB(e,"overflowY")},Fte=function(e){return tB(e,"overflowX")},FP=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=rB(e,n);if(s){var i=nB(e,n),o=i[1],l=i[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},Ute=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},Bte=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},rB=function(e,t){return e==="v"?$te(t):Fte(t)},nB=function(e,t){return e==="v"?Ute(t):Bte(t)},Gte=function(e,t){return e==="h"&&t==="rtl"?-1:1},Hte=function(e,t,r,n,s){var i=Gte(e,window.getComputedStyle(t).direction),o=i*n,l=r.target,d=t.contains(l),u=!1,m=o>0,p=0,g=0;do{if(!l)break;var x=nB(e,l),y=x[0],N=x[1],v=x[2],S=N-v-i*y;(y||S)&&rB(e,l)&&(p+=S,g+=y);var E=l.parentNode;l=E&&E.nodeType===Node.DOCUMENT_FRAGMENT_NODE?E.host:E}while(!d&&l!==document.body||d&&(t.contains(l)||t===l));return(m&&Math.abs(p)<1||!m&&Math.abs(g)<1)&&(u=!0),u},bb=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},UP=function(e){return[e.deltaX,e.deltaY]},BP=function(e){return e&&"current"in e?e.current:e},Kte=function(e,t){return e[0]===t[0]&&e[1]===t[1]},zte=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},qte=0,yp=[];function Wte(e){var t=h.useRef([]),r=h.useRef([0,0]),n=h.useRef(),s=h.useState(qte++)[0],i=h.useState(eB)[0],o=h.useRef(e);h.useEffect(function(){o.current=e},[e]),h.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var N=mte([e.lockRef.current],(e.shards||[]).map(BP),!0).filter(Boolean);return N.forEach(function(v){return v.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),N.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=h.useCallback(function(N,v){if("touches"in N&&N.touches.length===2||N.type==="wheel"&&N.ctrlKey)return!o.current.allowPinchZoom;var S=bb(N),E=r.current,C="deltaX"in N?N.deltaX:E[0]-S[0],_="deltaY"in N?N.deltaY:E[1]-S[1],A,T=N.target,R=Math.abs(C)>Math.abs(_)?"h":"v";if("touches"in N&&R==="h"&&T.type==="range")return!1;var I=window.getSelection(),k=I&&I.anchorNode,w=k?k===T||k.contains(T):!1;if(w)return!1;var L=FP(R,T);if(!L)return!0;if(L?A=R:(A=R==="v"?"h":"v",L=FP(R,T)),!L)return!1;if(!n.current&&"changedTouches"in N&&(C||_)&&(n.current=A),!A)return!0;var H=n.current||A;return Hte(H,v,N,H==="h"?C:_)},[]),d=h.useCallback(function(N){var v=N;if(!(!yp.length||yp[yp.length-1]!==i)){var S="deltaY"in v?UP(v):bb(v),E=t.current.filter(function(A){return A.name===v.type&&(A.target===v.target||v.target===A.shadowParent)&&Kte(A.delta,S)})[0];if(E&&E.should){v.cancelable&&v.preventDefault();return}if(!E){var C=(o.current.shards||[]).map(BP).filter(Boolean).filter(function(A){return A.contains(v.target)}),_=C.length>0?l(v,C[0]):!o.current.noIsolation;_&&v.cancelable&&v.preventDefault()}}},[]),u=h.useCallback(function(N,v,S,E){var C={name:N,delta:v,target:S,should:E,shadowParent:Vte(S)};t.current.push(C),setTimeout(function(){t.current=t.current.filter(function(_){return _!==C})},1)},[]),m=h.useCallback(function(N){r.current=bb(N),n.current=void 0},[]),p=h.useCallback(function(N){u(N.type,UP(N),N.target,l(N,e.lockRef.current))},[]),g=h.useCallback(function(N){u(N.type,bb(N),N.target,l(N,e.lockRef.current))},[]);h.useEffect(function(){return yp.push(i),e.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:g}),document.addEventListener("wheel",d,bp),document.addEventListener("touchmove",d,bp),document.addEventListener("touchstart",m,bp),function(){yp=yp.filter(function(N){return N!==i}),document.removeEventListener("wheel",d,bp),document.removeEventListener("touchmove",d,bp),document.removeEventListener("touchstart",m,bp)}},[]);var x=e.removeScrollBar,y=e.inert;return h.createElement(h.Fragment,null,y?h.createElement(i,{styles:zte(s)}):null,x?h.createElement(Mte,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function Vte(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Yte=Ete(JU,Wte);var O1=h.forwardRef(function(e,t){return h.createElement(T1,kl({},e,{ref:t,sideCar:Yte}))});O1.classNames=T1.classNames;var Xte=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},vp=new WeakMap,yb=new WeakMap,vb={},e2=0,aB=function(e){return e&&(e.host||aB(e.parentNode))},Qte=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=aB(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},Zte=function(e,t,r,n){var s=Qte(t,Array.isArray(e)?e:[e]);vb[r]||(vb[r]=new WeakMap);var i=vb[r],o=[],l=new Set,d=new Set(s),u=function(p){!p||l.has(p)||(l.add(p),u(p.parentNode))};s.forEach(u);var m=function(p){!p||d.has(p)||Array.prototype.forEach.call(p.children,function(g){if(l.has(g))m(g);else try{var x=g.getAttribute(n),y=x!==null&&x!=="false",N=(vp.get(g)||0)+1,v=(i.get(g)||0)+1;vp.set(g,N),i.set(g,v),o.push(g),N===1&&y&&yb.set(g,!0),v===1&&g.setAttribute(r,"true"),y||g.setAttribute(n,"true")}catch(S){console.error("aria-hidden: cannot operate on ",g,S)}})};return m(t),l.clear(),e2++,function(){o.forEach(function(p){var g=vp.get(p)-1,x=i.get(p)-1;vp.set(p,g),i.set(p,x),g||(yb.has(p)||p.removeAttribute(n),yb.delete(p)),x||p.removeAttribute(r)}),e2--,e2||(vp=new WeakMap,vp=new WeakMap,yb=new WeakMap,vb={})}},gR=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),s=Xte(e);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live], script"))),Zte(n,s,r,"aria-hidden")):function(){return null}};function Jte(e){const t=ere(e),r=h.forwardRef((n,s)=>{const{children:i,...o}=n,l=h.Children.toArray(i),d=l.find(rre);if(d){const u=d.props.children,m=l.map(p=>p===d?h.Children.count(u)>1?h.Children.only(null):h.isValidElement(u)?u.props.children:null:p);return a.jsx(t,{...o,ref:s,children:h.isValidElement(u)?h.cloneElement(u,void 0,m):null})}return a.jsx(t,{...o,ref:s,children:i})});return r.displayName=`${e}.Slot`,r}function ere(e){const t=h.forwardRef((r,n)=>{const{children:s,...i}=r;if(h.isValidElement(s)){const o=are(s),l=nre(i,s.props);return s.type!==h.Fragment&&(l.ref=n?Mf(n,o):o),h.cloneElement(s,l)}return h.Children.count(s)>1?h.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var tre=Symbol("radix.slottable");function rre(e){return h.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===tre}function nre(e,t){const r={...t};for(const n in t){const s=e[n],i=t[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...l)=>{const d=i(...l);return s(...l),d}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function are(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var R1="Dialog",[sB]=jo(R1),[sre,rl]=sB(R1),iB=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:s,onOpenChange:i,modal:o=!0}=e,l=h.useRef(null),d=h.useRef(null),[u,m]=Jc({prop:n,defaultProp:s??!1,onChange:i,caller:R1});return a.jsx(sre,{scope:t,triggerRef:l,contentRef:d,contentId:Hl(),titleId:Hl(),descriptionId:Hl(),open:u,onOpenChange:m,onOpenToggle:h.useCallback(()=>m(p=>!p),[m]),modal:o,children:r})};iB.displayName=R1;var oB="DialogTrigger",ire=h.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=rl(oB,r),i=Ar(t,s.triggerRef);return a.jsx(dr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":yR(s.open),...n,ref:i,onClick:Bt(e.onClick,s.onOpenToggle)})});ire.displayName=oB;var xR="DialogPortal",[ore,lB]=sB(xR,{forceMount:void 0}),cB=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:s}=e,i=rl(xR,t);return a.jsx(ore,{scope:t,forceMount:r,children:h.Children.map(n,o=>a.jsx(Gs,{present:r||i.open,children:a.jsx(sx,{asChild:!0,container:s,children:o})}))})};cB.displayName=xR;var $y="DialogOverlay",dB=h.forwardRef((e,t)=>{const r=lB($y,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,i=rl($y,e.__scopeDialog);return i.modal?a.jsx(Gs,{present:n||i.open,children:a.jsx(cre,{...s,ref:t})}):null});dB.displayName=$y;var lre=Jte("DialogOverlay.RemoveScroll"),cre=h.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=rl($y,r);return a.jsx(O1,{as:lre,allowPinchZoom:!0,shards:[s.contentRef],children:a.jsx(dr.div,{"data-state":yR(s.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),jf="DialogContent",uB=h.forwardRef((e,t)=>{const r=lB(jf,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,i=rl(jf,e.__scopeDialog);return a.jsx(Gs,{present:n||i.open,children:i.modal?a.jsx(dre,{...s,ref:t}):a.jsx(ure,{...s,ref:t})})});uB.displayName=jf;var dre=h.forwardRef((e,t)=>{const r=rl(jf,e.__scopeDialog),n=h.useRef(null),s=Ar(t,r.contentRef,n);return h.useEffect(()=>{const i=n.current;if(i)return gR(i)},[]),a.jsx(fB,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Bt(e.onCloseAutoFocus,i=>{i.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:Bt(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:Bt(e.onFocusOutside,i=>i.preventDefault())})}),ure=h.forwardRef((e,t)=>{const r=rl(jf,e.__scopeDialog),n=h.useRef(!1),s=h.useRef(!1);return a.jsx(fB,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{e.onCloseAutoFocus?.(i),i.defaultPrevented||(n.current||r.triggerRef.current?.focus(),i.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:i=>{e.onInteractOutside?.(i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;r.triggerRef.current?.contains(o)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),fB=h.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=e,l=rl(jf,r),d=h.useRef(null),u=Ar(t,d);return hR(),a.jsxs(a.Fragment,{children:[a.jsx(C1,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:i,children:a.jsx(ax,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":yR(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(fre,{titleId:l.titleId}),a.jsx(mre,{contentRef:d,descriptionId:l.descriptionId})]})]})}),bR="DialogTitle",pB=h.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=rl(bR,r);return a.jsx(dr.h2,{id:s.titleId,...n,ref:t})});pB.displayName=bR;var mB="DialogDescription",hB=h.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=rl(mB,r);return a.jsx(dr.p,{id:s.descriptionId,...n,ref:t})});hB.displayName=mB;var gB="DialogClose",xB=h.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=rl(gB,r);return a.jsx(dr.button,{type:"button",...n,ref:t,onClick:Bt(e.onClick,()=>s.onOpenChange(!1))})});xB.displayName=gB;function yR(e){return e?"open":"closed"}var bB="DialogTitleWarning",[yDe,yB]=QJ(bB,{contentName:jf,titleName:bR,docsSlug:"dialog"}),fre=({titleId:e})=>{const t=yB(bB),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return h.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},pre="DialogDescriptionWarning",mre=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${yB(pre).contentName}}.`;return h.useEffect(()=>{const s=e.current?.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},vB=iB,NB=cB,SB=dB,EB=uB,jB=pB,wB=hB,AB=xB;function gf({...e}){return a.jsx(vB,{"data-slot":"dialog",...e})}function hre({...e}){return a.jsx(NB,{"data-slot":"dialog-portal",...e})}function gre({className:e,...t}){return a.jsx(SB,{"data-slot":"dialog-overlay",className:ue("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function xf({className:e,children:t,...r}){return a.jsxs(hre,{"data-slot":"dialog-portal",children:[a.jsx(gre,{}),a.jsxs(EB,{"data-slot":"dialog-content",className:ue("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...r,children:[t,a.jsxs(AB,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[a.jsx(uu,{}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Fy({className:e,...t}){return a.jsx("div",{"data-slot":"dialog-header",className:ue("flex flex-col gap-2 text-center sm:text-left",e),...t})}function hC({className:e,...t}){return a.jsx("div",{"data-slot":"dialog-footer",className:ue("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function Uy({className:e,...t}){return a.jsx(jB,{"data-slot":"dialog-title",className:ue("text-lg leading-none font-semibold",e),...t})}function gC({className:e,...t}){return a.jsx(wB,{"data-slot":"dialog-description",className:ue("text-muted-foreground text-sm",e),...t})}var xre=h.createContext(void 0);function ix(e){const t=h.useContext(xre);return e||t||"ltr"}function xC(e,[t,r]){return Math.min(r,Math.max(t,e))}function bre(e,t){return h.useReducer((r,n)=>t[r][n]??r,e)}var vR="ScrollArea",[_B]=jo(vR),[yre,wo]=_B(vR),CB=h.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:n="hover",dir:s,scrollHideDelay:i=600,...o}=e,[l,d]=h.useState(null),[u,m]=h.useState(null),[p,g]=h.useState(null),[x,y]=h.useState(null),[N,v]=h.useState(null),[S,E]=h.useState(0),[C,_]=h.useState(0),[A,T]=h.useState(!1),[R,I]=h.useState(!1),k=Ar(t,L=>d(L)),w=ix(s);return a.jsx(yre,{scope:r,type:n,dir:w,scrollHideDelay:i,scrollArea:l,viewport:u,onViewportChange:m,content:p,onContentChange:g,scrollbarX:x,onScrollbarXChange:y,scrollbarXEnabled:A,onScrollbarXEnabledChange:T,scrollbarY:N,onScrollbarYChange:v,scrollbarYEnabled:R,onScrollbarYEnabledChange:I,onCornerWidthChange:E,onCornerHeightChange:_,children:a.jsx(dr.div,{dir:w,...o,ref:k,style:{position:"relative","--radix-scroll-area-corner-width":S+"px","--radix-scroll-area-corner-height":C+"px",...e.style}})})});CB.displayName=vR;var TB="ScrollAreaViewport",OB=h.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:n,nonce:s,...i}=e,o=wo(TB,r),l=h.useRef(null),d=Ar(t,l,o.onViewportChange);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),a.jsx(dr.div,{"data-radix-scroll-area-viewport":"",...i,ref:d,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:a.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});OB.displayName=TB;var Jl="ScrollAreaScrollbar",RB=h.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=wo(Jl,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=s,l=e.orientation==="horizontal";return h.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),s.type==="hover"?a.jsx(vre,{...n,ref:t,forceMount:r}):s.type==="scroll"?a.jsx(Nre,{...n,ref:t,forceMount:r}):s.type==="auto"?a.jsx(kB,{...n,ref:t,forceMount:r}):s.type==="always"?a.jsx(NR,{...n,ref:t}):null});RB.displayName=Jl;var vre=h.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=wo(Jl,e.__scopeScrollArea),[i,o]=h.useState(!1);return h.useEffect(()=>{const l=s.scrollArea;let d=0;if(l){const u=()=>{window.clearTimeout(d),o(!0)},m=()=>{d=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",m),()=>{window.clearTimeout(d),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",m)}}},[s.scrollArea,s.scrollHideDelay]),a.jsx(Gs,{present:r||i,children:a.jsx(kB,{"data-state":i?"visible":"hidden",...n,ref:t})})}),Nre=h.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=wo(Jl,e.__scopeScrollArea),i=e.orientation==="horizontal",o=P1(()=>d("SCROLL_END"),100),[l,d]=bre("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return h.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>d("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,d]),h.useEffect(()=>{const u=s.viewport,m=i?"scrollLeft":"scrollTop";if(u){let p=u[m];const g=()=>{const x=u[m];p!==x&&(d("SCROLL"),o()),p=x};return u.addEventListener("scroll",g),()=>u.removeEventListener("scroll",g)}},[s.viewport,i,d,o]),a.jsx(Gs,{present:r||l!=="hidden",children:a.jsx(NR,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:Bt(e.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:Bt(e.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),kB=h.forwardRef((e,t)=>{const r=wo(Jl,e.__scopeScrollArea),{forceMount:n,...s}=e,[i,o]=h.useState(!1),l=e.orientation==="horizontal",d=P1(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,m=r.viewport.offsetHeight<r.viewport.scrollHeight;o(l?u:m)}},10);return xm(r.viewport,d),xm(r.content,d),a.jsx(Gs,{present:n||i,children:a.jsx(NR,{"data-state":i?"visible":"hidden",...s,ref:t})})}),NR=h.forwardRef((e,t)=>{const{orientation:r="vertical",...n}=e,s=wo(Jl,e.__scopeScrollArea),i=h.useRef(null),o=h.useRef(0),[l,d]=h.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=LB(l.viewport,l.content),m={...n,sizes:l,onSizesChange:d,hasThumb:u>0&&u<1,onThumbChange:g=>i.current=g,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:g=>o.current=g};function p(g,x){return _re(g,o.current,l,x)}return r==="horizontal"?a.jsx(Sre,{...m,ref:t,onThumbPositionChange:()=>{if(s.viewport&&i.current){const g=s.viewport.scrollLeft,x=GP(g,l,s.dir);i.current.style.transform=`translate3d(${x}px, 0, 0)`}},onWheelScroll:g=>{s.viewport&&(s.viewport.scrollLeft=g)},onDragScroll:g=>{s.viewport&&(s.viewport.scrollLeft=p(g,s.dir))}}):r==="vertical"?a.jsx(Ere,{...m,ref:t,onThumbPositionChange:()=>{if(s.viewport&&i.current){const g=s.viewport.scrollTop,x=GP(g,l);i.current.style.transform=`translate3d(0, ${x}px, 0)`}},onWheelScroll:g=>{s.viewport&&(s.viewport.scrollTop=g)},onDragScroll:g=>{s.viewport&&(s.viewport.scrollTop=p(g))}}):null}),Sre=h.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...s}=e,i=wo(Jl,e.__scopeScrollArea),[o,l]=h.useState(),d=h.useRef(null),u=Ar(t,d,i.onScrollbarXChange);return h.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),a.jsx(DB,{"data-orientation":"horizontal",...s,ref:u,sizes:r,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":k1(r)+"px",...e.style},onThumbPointerDown:m=>e.onThumbPointerDown(m.x),onDragScroll:m=>e.onDragScroll(m.x),onWheelScroll:(m,p)=>{if(i.viewport){const g=i.viewport.scrollLeft+m.deltaX;e.onWheelScroll(g),FB(g,p)&&m.preventDefault()}},onResize:()=>{d.current&&i.viewport&&o&&n({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:Gy(o.paddingLeft),paddingEnd:Gy(o.paddingRight)}})}})}),Ere=h.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...s}=e,i=wo(Jl,e.__scopeScrollArea),[o,l]=h.useState(),d=h.useRef(null),u=Ar(t,d,i.onScrollbarYChange);return h.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),a.jsx(DB,{"data-orientation":"vertical",...s,ref:u,sizes:r,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":k1(r)+"px",...e.style},onThumbPointerDown:m=>e.onThumbPointerDown(m.y),onDragScroll:m=>e.onDragScroll(m.y),onWheelScroll:(m,p)=>{if(i.viewport){const g=i.viewport.scrollTop+m.deltaY;e.onWheelScroll(g),FB(g,p)&&m.preventDefault()}},onResize:()=>{d.current&&i.viewport&&o&&n({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:Gy(o.paddingTop),paddingEnd:Gy(o.paddingBottom)}})}})}),[jre,PB]=_B(Jl),DB=h.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:s,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:d,onDragScroll:u,onWheelScroll:m,onResize:p,...g}=e,x=wo(Jl,r),[y,N]=h.useState(null),v=Ar(t,k=>N(k)),S=h.useRef(null),E=h.useRef(""),C=x.viewport,_=n.content-n.viewport,A=vs(m),T=vs(d),R=P1(p,10);function I(k){if(S.current){const w=k.clientX-S.current.left,L=k.clientY-S.current.top;u({x:w,y:L})}}return h.useEffect(()=>{const k=w=>{const L=w.target;y?.contains(L)&&A(w,_)};return document.addEventListener("wheel",k,{passive:!1}),()=>document.removeEventListener("wheel",k,{passive:!1})},[C,y,_,A]),h.useEffect(T,[n,T]),xm(y,R),xm(x.content,R),a.jsx(jre,{scope:r,scrollbar:y,hasThumb:s,onThumbChange:vs(i),onThumbPointerUp:vs(o),onThumbPositionChange:T,onThumbPointerDown:vs(l),children:a.jsx(dr.div,{...g,ref:v,style:{position:"absolute",...g.style},onPointerDown:Bt(e.onPointerDown,k=>{k.button===0&&(k.target.setPointerCapture(k.pointerId),S.current=y.getBoundingClientRect(),E.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",x.viewport&&(x.viewport.style.scrollBehavior="auto"),I(k))}),onPointerMove:Bt(e.onPointerMove,I),onPointerUp:Bt(e.onPointerUp,k=>{const w=k.target;w.hasPointerCapture(k.pointerId)&&w.releasePointerCapture(k.pointerId),document.body.style.webkitUserSelect=E.current,x.viewport&&(x.viewport.style.scrollBehavior=""),S.current=null})})})}),By="ScrollAreaThumb",IB=h.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=PB(By,e.__scopeScrollArea);return a.jsx(Gs,{present:r||s.hasThumb,children:a.jsx(wre,{ref:t,...n})})}),wre=h.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:n,...s}=e,i=wo(By,r),o=PB(By,r),{onThumbPositionChange:l}=o,d=Ar(t,p=>o.onThumbChange(p)),u=h.useRef(void 0),m=P1(()=>{u.current&&(u.current(),u.current=void 0)},100);return h.useEffect(()=>{const p=i.viewport;if(p){const g=()=>{if(m(),!u.current){const x=Cre(p,l);u.current=x,l()}};return l(),p.addEventListener("scroll",g),()=>p.removeEventListener("scroll",g)}},[i.viewport,m,l]),a.jsx(dr.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:Bt(e.onPointerDownCapture,p=>{const x=p.target.getBoundingClientRect(),y=p.clientX-x.left,N=p.clientY-x.top;o.onThumbPointerDown({x:y,y:N})}),onPointerUp:Bt(e.onPointerUp,o.onThumbPointerUp)})});IB.displayName=By;var SR="ScrollAreaCorner",MB=h.forwardRef((e,t)=>{const r=wo(SR,e.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?a.jsx(Are,{...e,ref:t}):null});MB.displayName=SR;var Are=h.forwardRef((e,t)=>{const{__scopeScrollArea:r,...n}=e,s=wo(SR,r),[i,o]=h.useState(0),[l,d]=h.useState(0),u=!!(i&&l);return xm(s.scrollbarX,()=>{const m=s.scrollbarX?.offsetHeight||0;s.onCornerHeightChange(m),d(m)}),xm(s.scrollbarY,()=>{const m=s.scrollbarY?.offsetWidth||0;s.onCornerWidthChange(m),o(m)}),u?a.jsx(dr.div,{...n,ref:t,style:{width:i,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Gy(e){return e?parseInt(e,10):0}function LB(e,t){const r=e/t;return isNaN(r)?0:r}function k1(e){const t=LB(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function _re(e,t,r,n="ltr"){const s=k1(r),i=s/2,o=t||i,l=s-o,d=r.scrollbar.paddingStart+o,u=r.scrollbar.size-r.scrollbar.paddingEnd-l,m=r.content-r.viewport,p=n==="ltr"?[0,m]:[m*-1,0];return $B([d,u],p)(e)}function GP(e,t,r="ltr"){const n=k1(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-s,o=t.content-t.viewport,l=i-n,d=r==="ltr"?[0,o]:[o*-1,0],u=xC(e,d);return $B([0,o],[0,l])(u)}function $B(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function FB(e,t){return e>0&&e<t}var Cre=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return(function s(){const i={left:e.scrollLeft,top:e.scrollTop},o=r.left!==i.left,l=r.top!==i.top;(o||l)&&t(),r=i,n=window.requestAnimationFrame(s)})(),()=>window.cancelAnimationFrame(n)};function P1(e,t){const r=vs(e),n=h.useRef(0);return h.useEffect(()=>()=>window.clearTimeout(n.current),[]),h.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function xm(e,t){const r=vs(t);xa(()=>{let n=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return s.observe(e),()=>{window.cancelAnimationFrame(n),s.unobserve(e)}}},[e,r])}var Tre=CB,Ore=OB,Rre=MB;function kre({className:e,children:t,...r}){return a.jsxs(Tre,{"data-slot":"scroll-area",className:ue("relative",e),...r,children:[a.jsx(Ore,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),a.jsx(Pre,{}),a.jsx(Rre,{})]})}function Pre({className:e,orientation:t="vertical",...r}){return a.jsx(RB,{"data-slot":"scroll-area-scrollbar",orientation:t,className:ue("flex touch-none p-px transition-colors select-none",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",e),...r,children:a.jsx(IB,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function Dre({open:e,onOpenChange:t}){const[r,n]=h.useState([{id:"1",type:"bot",content:"!  .  ?",timestamp:new Date}]),[s,i]=h.useState(""),[o,l]=h.useState(""),[d,u]=h.useState(!1),m=h.useRef(null),p={" ":"            .       .",:"       .     .",:" ,   1:1 ,   ,         .",:"     ,      .      .",:'   " "     .   ,    .',:"  30  ,    1   .",:"  .    .",:",    .       .",:"     .   .",:"      ,        .",:"    .        .     ."},g=["  ?"," ?","    ?","  ?"];h.useEffect(()=>{m.current&&(m.current.scrollTop=m.current.scrollHeight)},[r]);const x=E=>{const C=E.toLowerCase().replace(/\s+/g,"");for(const[_,A]of Object.entries(p))if(C.includes(_.replace(/\s+/g,"")))return A;return".      .    ,    . (: 02-1234-5678)"},y=async E=>{try{const C=await fetch("/api/outreach/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_message:E,conversation_id:o||void 0,context:{current_view:"citizen_portal"}})});if(!C.ok)return null;const _=await C.json();_.conversation_id&&l(_.conversation_id);const A=String(_.assistant_message||"").trim();if(!A)return null;const T=(_.citations||[]).map(R=>[R.title,R.snippet].filter(Boolean).join(": ")).filter(Boolean).slice(0,2);return T.length?`${A}

: ${T.join(" | ")}`:A}catch{return null}},N=async E=>{const C=E.trim();if(!C||d)return;const _={id:Date.now().toString(),type:"user",content:C,timestamp:new Date};n(I=>[...I,_]),i(""),u(!0);const T=await y(C)||x(C),R={id:(Date.now()+1).toString(),type:"bot",content:T,timestamp:new Date};n(I=>[...I,R]),u(!1)},v=()=>{N(s)},S=E=>{N(E)};return a.jsx(gf,{open:e,onOpenChange:t,children:a.jsxs(xf,{className:"max-w-2xl h-[600px] flex flex-col p-0",children:[a.jsx(Fy,{className:"p-6 pb-4 border-b",children:a.jsxs(Uy,{className:"flex items-center gap-2",children:[a.jsx("div",{className:"bg-blue-100 p-2 rounded-full",children:a.jsx(mU,{className:"h-5 w-5 text-blue-600"})}),"AI "]})}),a.jsxs(kre,{className:"flex-1 p-6",ref:m,children:[a.jsx("div",{className:"space-y-4",children:r.map(E=>a.jsx("div",{className:`flex ${E.type==="user"?"justify-end":"justify-start"}`,children:a.jsxs("div",{className:`max-w-[80%] rounded-lg p-3 ${E.type==="user"?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"}`,children:[a.jsx("p",{className:"text-sm whitespace-pre-wrap",children:E.content}),a.jsx("p",{className:`text-xs mt-1 ${E.type==="user"?"text-blue-100":"text-gray-500"}`,children:E.timestamp.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"})})]})},E.id))}),r.length===1&&a.jsxs("div",{className:"mt-6",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"  :"}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:g.map((E,C)=>a.jsx("button",{onClick:()=>S(E),className:"p-3 text-left text-sm border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors",children:E},C))})]})]}),a.jsxs("div",{className:"p-4 border-t",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx($r,{value:s,onChange:E=>i(E.target.value),onKeyPress:E=>E.key==="Enter"&&v(),placeholder:" ...",className:"flex-1"}),a.jsx(jt,{onClick:v,disabled:!s.trim()||d,children:a.jsx(pg,{className:"h-4 w-4"})})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"*      "})]})]})})}const Ire={};function bC({inviteToken:e}){const[t,r]=h.useState("home"),[n,s]=h.useState(!1),[i,o]=h.useState(!1),[l,d]=h.useState(""),[u,m]=h.useState(""),[p,g]=h.useState(""),[x,y]=h.useState(""),[N,v]=h.useState(""),[S,E]=h.useState(""),[C,_]=h.useState(""),[A,T]=h.useState(""),[R,I]=h.useState(!1),[k,w]=h.useState(!1),[L,H]=h.useState(!1),[B,M]=h.useState(""),[G,$]=h.useState(!1),[z,U]=h.useState(!1),[Z,re]=h.useState(!1),[X,F]=h.useState(!1),te=h.useMemo(()=>String(Ire.VITE_DEMO_MODE||"").toLowerCase()==="true"?!0:globalThis?.__NEURO_SHIELD_DEMO_BYPASS__===!0,[]);h.useEffect(()=>{let Ye=!0;return(async()=>{try{const Xt=await fetch("/api/config");if(!Xt.ok)return;const hr=await Xt.json();if(!Ye)return;F(!!hr.demo_mode)}catch{}})(),()=>{Ye=!1}},[]);const ne=h.useMemo(()=>e?`citizen-session:${e}`:"",[e]);h.useEffect(()=>{if(!e)return;re(!1);let Ye=!1;(()=>{if(!ne)return!1;const Gt=window.localStorage.getItem(ne);if(!Gt)return!1;try{const sr=JSON.parse(Gt);if(sr.sessionId)return M(sr.sessionId),$(!!sr.otpVerified),Ye=!0,!0}catch{window.localStorage.removeItem(ne)}return!1})();let Xt=!0;return(async()=>{try{const Gt=await fetch(`/api/citizen/session?token=${encodeURIComponent(e)}`);if(!Gt.ok)throw new Error(`session resolve failed: ${Gt.status}`);const sr=await Gt.json();if(!Xt)return;M(sr.sessionId),$(!!sr.otpVerified),ne&&window.localStorage.setItem(ne,JSON.stringify({sessionId:sr.sessionId,otpVerified:!!sr.otpVerified})),re(!1)}catch(Gt){console.error(Gt),!Ye&&ne&&window.localStorage.removeItem(ne),re(!0)}})(),()=>{Xt=!1}},[e,ne]);const se=[{id:"health",name:" ",address:"   426"},{id:"dementia",name:" ",address:"   524"},{id:"hospital",name:" ",address:"   81"}],Ne=["09:00","09:30","10:00","10:30","11:00","11:30","14:00","14:30","15:00","15:30","16:00","16:30"],fe=[{question:"  ?",answer:"            .       ."},{question:" ?",answer:".        .     ."},{question:"    ?",answer:" ,   1:1 ,   ,         ."},{question:"  ?",answer:"     ,      .      ."}],we=()=>{r("consent")},ve=()=>{if(!n){ke.error("   ");return}r("center-select")},Oe=Ye=>{d(Ye),r("datetime")},Fe=()=>{if(!u||!p){ke.error("  ");return}r("confirm")},oe=/^01[016789]-?\d{3,4}-?\d{4}$/,le=async()=>{const Ye=new Date(`${u}T${p}:00`).toISOString(),Mt=se.find(sr=>sr.id===l)?.name||" ",Xt=(e||"demo").replace(/[^A-Za-z0-9]/g,"").slice(-10)||"demo",hr=te||X?"CASE-DEMO-IJY-001":`CASE-DEMO-${Xt}`,Gt=await fetch("/api/local/schedules",{method:"POST",headers:{"Content-Type":"application/json","X-User-Id":"citizen-demo","X-User-Role":"SYSTEM"},body:JSON.stringify({caseId:hr,eventType:"APPOINTMENT",title:`   (${Mt})`,startAt:Ye,durationMin:30,priority:"NORMAL",payload:{source:"citizen-demo",name:x,phone:N,birthdate:S,guardianPhone:A||null,notes:C||null,consentOptional:i}})});if(!Gt.ok){const sr=await Gt.text();throw new Error(`demo booking failed (${Gt.status}): ${sr}`)}},ge=async()=>{const Ye=await fetch("/api/citizen/booking",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({booking_type:"screening",center_id:"center-001",date:u,time:p,notes:C||null,citizen_name:x,citizen_phone:N.replace(/-/g,"")})});if(!Ye.ok){const Mt=await Ye.text();throw new Error(`legacy booking failed (${Ye.status}): ${Mt}`)}},_e=async()=>{if(!x||!N||!S){ke.error("   ");return}if(!oe.test(N.replace(/-/g,""))){ke.error("   ");return}if(A&&!oe.test(A.replace(/-/g,""))){ke.error("    ");return}if(!u||!p){ke.error("   .");return}U(!0);try{if(Z||!B){await le(),r("complete"),ke.success("   .");return}const Ye=te||X;if(!G&&!Ye){const sr=await fetch("/api/citizen/otp/request",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:B,phoneNumber:N.replace(/-/g,"")})});if(!sr.ok)throw new Error(`otp request failed (${sr.status})`);let mr=(await sr.json()).devOtp;if(mr||(mr=window.prompt("  OTP 6 .")?.trim()),!mr){ke.error("OTP  .");return}const br=await fetch("/api/citizen/otp/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:B,otpCode:mr,phoneNumber:N.replace(/-/g,"")})});if(!br.ok)throw new Error(`otp verify failed (${br.status})`);$(!0)}else Ye&&$(!0);const Mt=new Date(`${u}T${p}:00`).toISOString(),Xt=se.find(sr=>sr.id===l)?.name||" ",hr=await fetch("/api/citizen/appointments/book",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:B,appointmentAt:Mt,organization:Xt})});if(!hr.ok){const sr=await hr.text();throw new Error(`booking failed (${hr.status}): ${sr}`)}const Gt={sessionId:B,otpVerified:!0};ne&&window.localStorage.setItem(ne,JSON.stringify(Gt)),r("complete"),ke.success(" .")}catch(Ye){console.error(Ye);let Mt=!1;try{await le(),r("complete"),ke.success("      ."),Mt=!0}catch(Xt){console.error(Xt)}if(!Mt)try{await ge();try{await le()}catch(Xt){console.error(Xt)}r("complete"),ke.success("   ."),Mt=!0}catch(Xt){console.error(Xt)}if(!Mt)if(te||X){const Xt=`citizen-offline-booking:${Date.now()}`;window.localStorage.setItem(Xt,JSON.stringify({name:x,phone:N,birthdate:S,selectedCenter:l,selectedDate:u,selectedTime:p,guardianPhone:A||null,additionalNotes:C||null})),r("complete"),ke.success("    .")}else ke.error("  .    .")}finally{U(!1)}},ee=()=>{console.log("Remind Later Request:",{timestamp:new Date().toISOString(),remindDate:new Date(Date.now()+336*60*60*1e3).toISOString()}),ke.success("2   ")},q=()=>{console.log("Stop Contact Request:",{timestamp:new Date().toISOString()}),ke.success("   "),w(!1)},ye=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsx(Or,{className:"border-2 border-primary bg-gradient-to-br from-blue-50 to-white",children:a.jsx(Rr,{className:"p-6",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"bg-primary p-3 rounded",children:a.jsx(Yp,{className:"h-8 w-8 text-white"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"    "}),a.jsx("p",{className:"text-gray-700 mb-4",children:"     .      ."}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Yo,{className:"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5"}),a.jsx("span",{className:"text-sm text-gray-700",children:" "})]}),a.jsxs("div",{className:"flex gap-2 mt-1",children:[a.jsx(Yo,{className:"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5"}),a.jsx("span",{className:"text-sm text-gray-700",children:" 30 "})]}),a.jsxs("div",{className:"flex gap-2 mt-1",children:[a.jsx(Yo,{className:"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5"}),a.jsx("span",{className:"text-sm text-gray-700",children:"  "})]})]})]})})}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs(jt,{className:"w-full h-14 text-lg",onClick:we,children:[" ",a.jsx(di,{className:"h-5 w-5 ml-2"})]}),a.jsxs(jt,{variant:"outline",className:"w-full h-14 text-lg",onClick:ee,children:["   ",a.jsx(Bl,{className:"h-5 w-5 ml-2"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("button",{onClick:()=>r("faq"),className:"p-4 border-2 border-gray-300 rounded hover:border-primary transition-colors",children:[a.jsx(So,{className:"h-6 w-6 text-primary mx-auto mb-2"}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:"  "})]}),a.jsxs("button",{onClick:()=>r("contact"),className:"p-4 border-2 border-gray-300 rounded hover:border-primary transition-colors",children:[a.jsx(Fs,{className:"h-6 w-6 text-primary mx-auto mb-2"}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:"  "})]})]})]}),pe=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs(jt,{variant:"ghost",onClick:()=>r("home"),className:"-ml-2",children:[a.jsx(Tl,{className:"h-4 w-4 mr-2"}),""]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:" "}),a.jsx("p",{className:"text-gray-600",children:"     "})]}),a.jsx(Or,{children:a.jsxs(Rr,{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-start gap-3 p-4 border-2 border-primary rounded",children:[a.jsx(fy,{id:"required",checked:n,onCheckedChange:Ye=>s(Ye)}),a.jsxs("div",{className:"flex-1",children:[a.jsxs($t,{htmlFor:"required",className:"cursor-pointer",children:[a.jsx("span",{className:"font-bold text-primary",children:""}),"     "]}),a.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"   ,   ,   ."})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-4 border-2 border-gray-300 rounded",children:[a.jsx(fy,{id:"optional",checked:i,onCheckedChange:Ye=>o(Ye)}),a.jsxs("div",{className:"flex-1",children:[a.jsxs($t,{htmlFor:"optional",className:"cursor-pointer",children:[a.jsx("span",{className:"text-gray-600",children:""}),"    "]}),a.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"2           ."})]})]})]})}),a.jsxs(Qp,{children:[a.jsx(ea,{className:"h-4 w-4"}),a.jsx(Zp,{className:"text-sm",children:"   ,      ."})]}),a.jsx(jt,{className:"w-full",onClick:ve,children:""})]}),he=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs(jt,{variant:"ghost",onClick:()=>r("consent"),className:"-ml-2",children:[a.jsx(Tl,{className:"h-4 w-4 mr-2"}),""]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:" "}),a.jsx("p",{className:"text-gray-600",children:"  "})]}),a.jsx("div",{className:"space-y-3",children:se.map(Ye=>a.jsx("button",{onClick:()=>Oe(Ye.id),className:"w-full p-4 border-2 border-gray-300 hover:border-primary rounded transition-colors text-left",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Yp,{className:"h-6 w-6 text-primary flex-shrink-0 mt-1"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:Ye.name}),a.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-1",children:[a.jsx(Dy,{className:"h-3 w-3"}),Ye.address]})]}),a.jsx(di,{className:"h-5 w-5 text-gray-400 ml-auto"})]})},Ye.id))})]}),rt=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs(jt,{variant:"ghost",onClick:()=>r("center-select"),className:"-ml-2",children:[a.jsx(Tl,{className:"h-4 w-4 mr-2"}),""]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"   "}),a.jsx("p",{className:"text-gray-600",children:"   "})]}),a.jsx(Or,{children:a.jsxs(Rr,{className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx($t,{htmlFor:"date",children:"  *"}),a.jsx($r,{id:"date",type:"date",value:u,onChange:Ye=>m(Ye.target.value),min:new Date().toISOString().split("T")[0],className:"mt-2"})]}),a.jsxs("div",{children:[a.jsx($t,{children:"  *"}),a.jsx("div",{className:"grid grid-cols-3 gap-2 mt-2",children:Ne.map(Ye=>a.jsx("button",{onClick:()=>g(Ye),className:`p-3 border-2 rounded transition-colors ${p===Ye?"border-primary bg-blue-50 text-primary font-semibold":"border-gray-300 hover:border-gray-400"}`,children:Ye},Ye))})]})]})}),a.jsx(jt,{className:"w-full",onClick:Fe,disabled:!u||!p,children:""})]}),Me=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs(jt,{variant:"ghost",onClick:()=>r("datetime"),className:"-ml-2",children:[a.jsx(Tl,{className:"h-4 w-4 mr-2"}),""]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:" "}),a.jsx("p",{className:"text-gray-600",children:"    "})]}),a.jsx(Or,{children:a.jsxs(Rr,{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx($t,{htmlFor:"name",children:" *"}),a.jsx($r,{id:"name",value:x,onChange:Ye=>y(Ye.target.value),placeholder:"",className:"mt-2"})]}),a.jsxs("div",{children:[a.jsx($t,{htmlFor:"phone",children:" *"}),a.jsx($r,{id:"phone",type:"tel",value:N,onChange:Ye=>v(Ye.target.value),placeholder:"010-1234-5678",className:"mt-2"})]}),a.jsxs("div",{children:[a.jsx($t,{htmlFor:"birthdate",children:" *"}),a.jsx($r,{id:"birthdate",type:"date",value:S,onChange:Ye=>E(Ye.target.value),className:"mt-2"})]}),a.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(fy,{id:"guardianToggle",checked:R,onCheckedChange:Ye=>{I(Ye),Ye||T("")}}),a.jsx($t,{htmlFor:"guardianToggle",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"  "})]}),R&&a.jsxs("div",{className:"mt-2",children:[a.jsx($t,{htmlFor:"guardianPhone",children:"  ()"}),a.jsx($r,{id:"guardianPhone",type:"tel",value:A,onChange:Ye=>T(Ye.target.value),placeholder:"010-0000-0000",className:"mt-2"})]}),a.jsxs("p",{className:"text-xs text-gray-400 mt-2 leading-relaxed",children:["        .",a.jsx("br",{}),"    ."]})]}),a.jsxs("div",{children:[a.jsx($t,{htmlFor:"notes",children:" ()"}),a.jsx(qo,{id:"notes",value:C,onChange:Ye=>_(Ye.target.value),placeholder:"       ",rows:3,className:"mt-2"})]})]})}),a.jsxs(Or,{className:"border-blue-300 bg-blue-50",children:[a.jsx(Dn,{children:a.jsx(In,{className:"text-blue-900",children:"  "})}),a.jsxs(Rr,{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-blue-700",children:":"}),a.jsx("span",{className:"font-medium text-blue-900",children:se.find(Ye=>Ye.id===l)?.name})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-blue-700",children:":"}),a.jsx("span",{className:"font-medium text-blue-900",children:u&&new Date(u).toLocaleDateString("ko-KR")})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-blue-700",children:":"}),a.jsx("span",{className:"font-medium text-blue-900",children:p})]})]})]}),a.jsx(jt,{className:"w-full",onClick:_e,disabled:!x||!N||!S||z,children:z?" ...":" "})]}),dt=()=>a.jsxs("div",{className:"space-y-6 text-center py-8",children:[a.jsx("div",{className:"bg-green-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto",children:a.jsx(Yo,{className:"h-12 w-12 text-green-600"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:" "}),a.jsx("p",{className:"text-gray-600",children:"   "})]}),a.jsx(Or,{children:a.jsxs(Rr,{className:"p-6 space-y-3",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:":"}),a.jsx("span",{className:"font-medium",children:se.find(Ye=>Ye.id===l)?.name})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:":"}),a.jsx("span",{className:"font-medium",children:u&&new Date(u).toLocaleDateString("ko-KR")})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:":"}),a.jsx("span",{className:"font-medium",children:p})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:":"}),a.jsx("span",{className:"font-medium",children:x})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:":"}),a.jsx("span",{className:"font-medium",children:N})]}),A&&a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:" :"}),a.jsx("span",{className:"font-medium",children:A.replace(/(\d{3})\d{4}(\d{4})/,"$1-****-$2")})]})]})}),a.jsxs(Qp,{children:[a.jsx(ea,{className:"h-4 w-4"}),a.jsx(Zp,{className:"text-sm",children:" 3    .    ."})]}),a.jsx(jt,{variant:"outline",className:"w-full",onClick:()=>r("home"),children:""})]}),St=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs(jt,{variant:"ghost",onClick:()=>r("home"),className:"-ml-2",children:[a.jsx(Tl,{className:"h-4 w-4 mr-2"}),""]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"  "}),a.jsx("p",{className:"text-gray-600",children:"  "})]}),a.jsx("div",{className:"space-y-4",children:fe.map((Ye,Mt)=>a.jsxs(Or,{children:[a.jsx(Dn,{children:a.jsx(In,{className:"text-base",children:Ye.question})}),a.jsx(Rr,{children:a.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:Ye.answer})})]},Mt))})]}),He=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs(jt,{variant:"ghost",onClick:()=>r("home"),className:"-ml-2",children:[a.jsx(Tl,{className:"h-4 w-4 mr-2"}),""]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"  "}),a.jsx("p",{className:"text-gray-600",children:"    "})]}),a.jsxs(Or,{children:[a.jsx(Dn,{children:a.jsx(In,{children:" "})}),a.jsxs(Rr,{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Fs,{className:"h-5 w-5 text-primary"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:""}),a.jsx("p",{className:"font-medium",children:"02-1234-5678"})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(QQ,{className:"h-5 w-5 text-primary"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:""}),a.jsx("p",{className:"font-medium",children:"support@gangnam.go.kr"})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Dy,{className:"h-5 w-5 text-primary"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:""}),a.jsx("p",{className:"font-medium",children:"   524"})]})]})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(jt,{variant:"outline",className:"w-full",children:"  "}),a.jsx(jt,{variant:"destructive",className:"w-full",onClick:()=>w(!0),children:"  "})]}),a.jsx(gf,{open:k,onOpenChange:w,children:a.jsxs(xf,{children:[a.jsxs(Fy,{children:[a.jsx(Uy,{className:"text-red-600",children:"  "}),a.jsx(gC,{children:"  ?"})]}),a.jsxs(Qp,{className:"border-red-300 bg-red-50",children:[a.jsx(ea,{className:"h-4 w-4 text-red-600"}),a.jsx(Zp,{className:"text-red-900 text-sm",children:"       .   ."})]}),a.jsxs(hC,{children:[a.jsx(jt,{variant:"outline",onClick:()=>w(!1),children:""}),a.jsx(jt,{variant:"destructive",onClick:q,children:" "})]})]})})]});return a.jsx("div",{className:"min-h-screen bg-gray-100 py-4 px-4",children:a.jsxs("div",{className:"max-w-lg mx-auto",children:[a.jsxs("div",{className:"mb-6 text-center",children:[a.jsx("div",{className:"flex items-center justify-center mb-2",children:a.jsx(Yp,{className:"h-8 w-8 text-primary"})}),a.jsx("h1",{className:"text-xl font-bold text-gray-900",children:""}),a.jsx("p",{className:"text-sm text-gray-600",children:" "})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[t==="home"&&ye(),t==="consent"&&pe(),t==="center-select"&&he(),t==="datetime"&&rt(),t==="confirm"&&Me(),t==="complete"&&dt(),t==="faq"&&St(),t==="contact"&&He()]}),a.jsx("button",{onClick:()=>H(!0),className:"fixed bottom-6 right-6 bg-primary hover:bg-primary-hover text-white rounded-full p-4 shadow-lg transition-transform hover:scale-110",children:a.jsx(mU,{className:"h-6 w-6"})}),a.jsx(Dre,{open:L,onOpenChange:H})]})})}const Mre=uR("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function rn({className:e,variant:t,asChild:r=!1,...n}){const s=r?LU:"span";return a.jsx(s,{"data-slot":"badge",className:ue(Mre({variant:t}),e),...n})}const yC="   ,     .";function Lre(){return typeof window>"u"?"":new URLSearchParams(window.location.search).get("t")||""}function $re(e){return e?e.toUpperCase().includes("3")?"STAGE3":e.toUpperCase().includes("2")?"STAGE2":"STAGE1":"STAGE1"}function Fre(e){const t=e.toLowerCase(),r=t.includes("s3")?"STAGE3":t.includes("s2")?"STAGE2":"STAGE1";return r==="STAGE1"?{stage:r,actionType:"BOOKING",centerName:" ",callbackPhone:"02-555-0199",caseAlias:"",privacyNotice:yC}:{stage:r,actionType:r==="STAGE3"?"FOLLOW_UP_HUB":"NEXT_STEP_HUB",centerName:" ",callbackPhone:"02-555-0199",caseAlias:"",dueDate:r==="STAGE3"?"7   ":"3   ",cta:{primary:r==="STAGE3"?"  ":"/  ",secondary:" "},checklist:r==="STAGE3"?["  ","     ","    "]:["/  ","  "," / "],privacyNotice:yC}}function Ure({token:e,data:t}){const[r,n]=h.useState(!1),s=t.centerName||"",i=t.callbackPhone||"02-555-0199",o=t.checklist||[],l=async()=>{try{await fetch("/api/public/sms/landing/action",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e,actionType:t.actionType||"HUB_ACTION",status:"ACTION_COMPLETED"})})}catch{}finally{n(!0)}};return a.jsx("div",{className:"min-h-screen bg-slate-100 py-6 px-4",children:a.jsxs("div",{className:"mx-auto max-w-xl space-y-4",children:[a.jsxs(Or,{className:"border-blue-200 bg-blue-50",children:[a.jsxs(Dn,{className:"pb-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(rn,{className:"bg-blue-600 text-white border-blue-500",children:t.stage==="STAGE2"?"Stage2 ":"Stage3 "}),r&&a.jsx(rn,{className:"bg-emerald-600 text-white border-emerald-500",children:"ACTION_COMPLETED"})]}),a.jsxs(In,{className:"text-slate-900",children:[s," "]}),a.jsxs(Rl,{className:"text-slate-700",children:[t.caseAlias||"","    ."]})]}),a.jsxs(Rr,{className:"space-y-3",children:[t.dueDate&&a.jsxs("div",{className:"flex items-center gap-2 rounded-lg border border-blue-200 bg-white px-3 py-2 text-sm text-slate-700",children:[a.jsx(eR,{className:"h-4 w-4 text-blue-600"}),t.dueDate]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-3",children:[a.jsxs("p",{className:"text-sm font-semibold text-slate-800 flex items-center gap-2",children:[a.jsx(rR,{className:"h-4 w-4"}),"  "]}),a.jsx("ul",{className:"mt-2 space-y-1.5 text-sm text-slate-700",children:o.map(d=>a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"mt-1 h-1.5 w-1.5 rounded-full bg-slate-500"}),d]},d))})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs(jt,{onClick:l,className:"w-full",children:[a.jsx(li,{className:"h-4 w-4 mr-1.5"}),t.cta?.primary||"  "]}),a.jsxs(jt,{variant:"outline",className:"w-full",onClick:()=>{typeof window<"u"&&(window.location.href=`tel:${i}`)},children:[a.jsx(Fs,{className:"h-4 w-4 mr-1.5"}),t.cta?.secondary||" "]})]})]})]}),a.jsx(Or,{className:"border-slate-200",children:a.jsx(Rr,{className:"pt-4",children:a.jsxs("div",{className:"flex items-start gap-2 text-xs text-slate-600",children:[a.jsx(ea,{className:"h-4 w-4 mt-0.5"}),a.jsx("p",{children:t.privacyNotice||yC})]})})})]})})}function Bre(){const e=h.useMemo(()=>Lre(),[]),[t,r]=h.useState(!0),[n,s]=h.useState(null),[i,o]=h.useState(null);return h.useEffect(()=>{let l=!0;return(async()=>{if(!e){if(!l)return;s("   ."),r(!1);return}try{const u=await fetch(`/api/public/sms/landing?t=${encodeURIComponent(e)}`);if(!u.ok)throw new Error(`landing api error: ${u.status}`);const m=await u.json();if(!l)return;o({...m,stage:$re(m.stage)}),s(null)}catch{if(!l)return;o(Fre(e)),s(null)}finally{l&&r(!1)}})(),()=>{l=!1}},[e]),t?a.jsx("div",{className:"min-h-screen bg-slate-100 flex items-center justify-center px-4",children:a.jsx(Or,{className:"w-full max-w-md",children:a.jsx(Rr,{className:"pt-6 text-sm text-slate-600",children:"   ..."})})}):n||!i?a.jsx("div",{className:"min-h-screen bg-slate-100 flex items-center justify-center px-4",children:a.jsxs(Or,{className:"w-full max-w-md border-red-200",children:[a.jsxs(Dn,{children:[a.jsx(In,{className:"text-red-700",children:" "}),a.jsx(Rl,{children:"    ."})]}),a.jsx(Rr,{className:"text-sm text-slate-600",children:n||"  ."})]})}):i.stage==="STAGE1"?a.jsx(bC,{inviteToken:e}):a.jsx(Ure,{token:e,data:i})}var t2,HP;function Hs(){if(HP)return t2;HP=1;var e=Array.isArray;return t2=e,t2}var r2,KP;function UB(){if(KP)return r2;KP=1;var e=typeof db=="object"&&db&&db.Object===Object&&db;return r2=e,r2}var n2,zP;function nl(){if(zP)return n2;zP=1;var e=UB(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return n2=r,n2}var a2,qP;function uh(){if(qP)return a2;qP=1;var e=nl(),t=e.Symbol;return a2=t,a2}var s2,WP;function Gre(){if(WP)return s2;WP=1;var e=uh(),t=Object.prototype,r=t.hasOwnProperty,n=t.toString,s=e?e.toStringTag:void 0;function i(o){var l=r.call(o,s),d=o[s];try{o[s]=void 0;var u=!0}catch{}var m=n.call(o);return u&&(l?o[s]=d:delete o[s]),m}return s2=i,s2}var i2,VP;function Hre(){if(VP)return i2;VP=1;var e=Object.prototype,t=e.toString;function r(n){return t.call(n)}return i2=r,i2}var o2,YP;function od(){if(YP)return o2;YP=1;var e=uh(),t=Gre(),r=Hre(),n="[object Null]",s="[object Undefined]",i=e?e.toStringTag:void 0;function o(l){return l==null?l===void 0?s:n:i&&i in Object(l)?t(l):r(l)}return o2=o,o2}var l2,XP;function al(){if(XP)return l2;XP=1;function e(t){return t!=null&&typeof t=="object"}return l2=e,l2}var c2,QP;function fh(){if(QP)return c2;QP=1;var e=od(),t=al(),r="[object Symbol]";function n(s){return typeof s=="symbol"||t(s)&&e(s)==r}return c2=n,c2}var d2,ZP;function ER(){if(ZP)return d2;ZP=1;var e=Hs(),t=fh(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(i,o){if(e(i))return!1;var l=typeof i;return l=="number"||l=="symbol"||l=="boolean"||i==null||t(i)?!0:n.test(i)||!r.test(i)||o!=null&&i in Object(o)}return d2=s,d2}var u2,JP;function sl(){if(JP)return u2;JP=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return u2=e,u2}var f2,eD;function jR(){if(eD)return f2;eD=1;var e=od(),t=sl(),r="[object AsyncFunction]",n="[object Function]",s="[object GeneratorFunction]",i="[object Proxy]";function o(l){if(!t(l))return!1;var d=e(l);return d==n||d==s||d==r||d==i}return f2=o,f2}var p2,tD;function Kre(){if(tD)return p2;tD=1;var e=nl(),t=e["__core-js_shared__"];return p2=t,p2}var m2,rD;function zre(){if(rD)return m2;rD=1;var e=Kre(),t=(function(){var n=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function r(n){return!!t&&t in n}return m2=r,m2}var h2,nD;function BB(){if(nD)return h2;nD=1;var e=Function.prototype,t=e.toString;function r(n){if(n!=null){try{return t.call(n)}catch{}try{return n+""}catch{}}return""}return h2=r,h2}var g2,aD;function qre(){if(aD)return g2;aD=1;var e=jR(),t=zre(),r=sl(),n=BB(),s=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,d=o.toString,u=l.hasOwnProperty,m=RegExp("^"+d.call(u).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(g){if(!r(g)||t(g))return!1;var x=e(g)?m:i;return x.test(n(g))}return g2=p,g2}var x2,sD;function Wre(){if(sD)return x2;sD=1;function e(t,r){return t?.[r]}return x2=e,x2}var b2,iD;function Lf(){if(iD)return b2;iD=1;var e=qre(),t=Wre();function r(n,s){var i=t(n,s);return e(i)?i:void 0}return b2=r,b2}var y2,oD;function D1(){if(oD)return y2;oD=1;var e=Lf(),t=e(Object,"create");return y2=t,y2}var v2,lD;function Vre(){if(lD)return v2;lD=1;var e=D1();function t(){this.__data__=e?e(null):{},this.size=0}return v2=t,v2}var N2,cD;function Yre(){if(cD)return N2;cD=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return N2=e,N2}var S2,dD;function Xre(){if(dD)return S2;dD=1;var e=D1(),t="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function s(i){var o=this.__data__;if(e){var l=o[i];return l===t?void 0:l}return n.call(o,i)?o[i]:void 0}return S2=s,S2}var E2,uD;function Qre(){if(uD)return E2;uD=1;var e=D1(),t=Object.prototype,r=t.hasOwnProperty;function n(s){var i=this.__data__;return e?i[s]!==void 0:r.call(i,s)}return E2=n,E2}var j2,fD;function Zre(){if(fD)return j2;fD=1;var e=D1(),t="__lodash_hash_undefined__";function r(n,s){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=e&&s===void 0?t:s,this}return j2=r,j2}var w2,pD;function Jre(){if(pD)return w2;pD=1;var e=Vre(),t=Yre(),r=Xre(),n=Qre(),s=Zre();function i(o){var l=-1,d=o==null?0:o.length;for(this.clear();++l<d;){var u=o[l];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=n,i.prototype.set=s,w2=i,w2}var A2,mD;function ene(){if(mD)return A2;mD=1;function e(){this.__data__=[],this.size=0}return A2=e,A2}var _2,hD;function I1(){if(hD)return _2;hD=1;function e(t,r){return t===r||t!==t&&r!==r}return _2=e,_2}var C2,gD;function M1(){if(gD)return C2;gD=1;var e=I1();function t(r,n){for(var s=r.length;s--;)if(e(r[s][0],n))return s;return-1}return C2=t,C2}var T2,xD;function tne(){if(xD)return T2;xD=1;var e=M1(),t=Array.prototype,r=t.splice;function n(s){var i=this.__data__,o=e(i,s);if(o<0)return!1;var l=i.length-1;return o==l?i.pop():r.call(i,o,1),--this.size,!0}return T2=n,T2}var O2,bD;function rne(){if(bD)return O2;bD=1;var e=M1();function t(r){var n=this.__data__,s=e(n,r);return s<0?void 0:n[s][1]}return O2=t,O2}var R2,yD;function nne(){if(yD)return R2;yD=1;var e=M1();function t(r){return e(this.__data__,r)>-1}return R2=t,R2}var k2,vD;function ane(){if(vD)return k2;vD=1;var e=M1();function t(r,n){var s=this.__data__,i=e(s,r);return i<0?(++this.size,s.push([r,n])):s[i][1]=n,this}return k2=t,k2}var P2,ND;function L1(){if(ND)return P2;ND=1;var e=ene(),t=tne(),r=rne(),n=nne(),s=ane();function i(o){var l=-1,d=o==null?0:o.length;for(this.clear();++l<d;){var u=o[l];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=n,i.prototype.set=s,P2=i,P2}var D2,SD;function wR(){if(SD)return D2;SD=1;var e=Lf(),t=nl(),r=e(t,"Map");return D2=r,D2}var I2,ED;function sne(){if(ED)return I2;ED=1;var e=Jre(),t=L1(),r=wR();function n(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return I2=n,I2}var M2,jD;function ine(){if(jD)return M2;jD=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return M2=e,M2}var L2,wD;function $1(){if(wD)return L2;wD=1;var e=ine();function t(r,n){var s=r.__data__;return e(n)?s[typeof n=="string"?"string":"hash"]:s.map}return L2=t,L2}var $2,AD;function one(){if(AD)return $2;AD=1;var e=$1();function t(r){var n=e(this,r).delete(r);return this.size-=n?1:0,n}return $2=t,$2}var F2,_D;function lne(){if(_D)return F2;_D=1;var e=$1();function t(r){return e(this,r).get(r)}return F2=t,F2}var U2,CD;function cne(){if(CD)return U2;CD=1;var e=$1();function t(r){return e(this,r).has(r)}return U2=t,U2}var B2,TD;function dne(){if(TD)return B2;TD=1;var e=$1();function t(r,n){var s=e(this,r),i=s.size;return s.set(r,n),this.size+=s.size==i?0:1,this}return B2=t,B2}var G2,OD;function AR(){if(OD)return G2;OD=1;var e=sne(),t=one(),r=lne(),n=cne(),s=dne();function i(o){var l=-1,d=o==null?0:o.length;for(this.clear();++l<d;){var u=o[l];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=n,i.prototype.set=s,G2=i,G2}var H2,RD;function GB(){if(RD)return H2;RD=1;var e=AR(),t="Expected a function";function r(n,s){if(typeof n!="function"||s!=null&&typeof s!="function")throw new TypeError(t);var i=function(){var o=arguments,l=s?s.apply(this,o):o[0],d=i.cache;if(d.has(l))return d.get(l);var u=n.apply(this,o);return i.cache=d.set(l,u)||d,u};return i.cache=new(r.Cache||e),i}return r.Cache=e,H2=r,H2}var K2,kD;function une(){if(kD)return K2;kD=1;var e=GB(),t=500;function r(n){var s=e(n,function(o){return i.size===t&&i.clear(),o}),i=s.cache;return s}return K2=r,K2}var z2,PD;function fne(){if(PD)return z2;PD=1;var e=une(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=e(function(s){var i=[];return s.charCodeAt(0)===46&&i.push(""),s.replace(t,function(o,l,d,u){i.push(d?u.replace(r,"$1"):l||o)}),i});return z2=n,z2}var q2,DD;function F1(){if(DD)return q2;DD=1;function e(t,r){for(var n=-1,s=t==null?0:t.length,i=Array(s);++n<s;)i[n]=r(t[n],n,t);return i}return q2=e,q2}var W2,ID;function pne(){if(ID)return W2;ID=1;var e=uh(),t=F1(),r=Hs(),n=fh(),s=e?e.prototype:void 0,i=s?s.toString:void 0;function o(l){if(typeof l=="string")return l;if(r(l))return t(l,o)+"";if(n(l))return i?i.call(l):"";var d=l+"";return d=="0"&&1/l==-1/0?"-0":d}return W2=o,W2}var V2,MD;function HB(){if(MD)return V2;MD=1;var e=pne();function t(r){return r==null?"":e(r)}return V2=t,V2}var Y2,LD;function U1(){if(LD)return Y2;LD=1;var e=Hs(),t=ER(),r=fne(),n=HB();function s(i,o){return e(i)?i:t(i,o)?[i]:r(n(i))}return Y2=s,Y2}var X2,$D;function ox(){if($D)return X2;$D=1;var e=fh();function t(r){if(typeof r=="string"||e(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return X2=t,X2}var Q2,FD;function B1(){if(FD)return Q2;FD=1;var e=U1(),t=ox();function r(n,s){s=e(s,n);for(var i=0,o=s.length;n!=null&&i<o;)n=n[t(s[i++])];return i&&i==o?n:void 0}return Q2=r,Q2}var Z2,UD;function KB(){if(UD)return Z2;UD=1;var e=B1();function t(r,n,s){var i=r==null?void 0:e(r,n);return i===void 0?s:i}return Z2=t,Z2}var mne=KB();const ci=Zr(mne);var J2,BD;function hne(){if(BD)return J2;BD=1;function e(t){return t==null}return J2=e,J2}var gne=hne();const er=Zr(gne);var eE,GD;function xne(){if(GD)return eE;GD=1;var e=od(),t=Hs(),r=al(),n="[object String]";function s(i){return typeof i=="string"||!t(i)&&r(i)&&e(i)==n}return eE=s,eE}var bne=xne();const wf=Zr(bne);var yne=jR();const Yt=Zr(yne);var vne=sl();const ph=Zr(vne);var tE={exports:{}},en={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HD;function Nne(){if(HD)return en;HD=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),x=Symbol.for("react.offscreen"),y;y=Symbol.for("react.module.reference");function N(v){if(typeof v=="object"&&v!==null){var S=v.$$typeof;switch(S){case e:switch(v=v.type,v){case r:case s:case n:case u:case m:return v;default:switch(v=v&&v.$$typeof,v){case l:case o:case d:case g:case p:case i:return v;default:return S}}case t:return S}}}return en.ContextConsumer=o,en.ContextProvider=i,en.Element=e,en.ForwardRef=d,en.Fragment=r,en.Lazy=g,en.Memo=p,en.Portal=t,en.Profiler=s,en.StrictMode=n,en.Suspense=u,en.SuspenseList=m,en.isAsyncMode=function(){return!1},en.isConcurrentMode=function(){return!1},en.isContextConsumer=function(v){return N(v)===o},en.isContextProvider=function(v){return N(v)===i},en.isElement=function(v){return typeof v=="object"&&v!==null&&v.$$typeof===e},en.isForwardRef=function(v){return N(v)===d},en.isFragment=function(v){return N(v)===r},en.isLazy=function(v){return N(v)===g},en.isMemo=function(v){return N(v)===p},en.isPortal=function(v){return N(v)===t},en.isProfiler=function(v){return N(v)===s},en.isStrictMode=function(v){return N(v)===n},en.isSuspense=function(v){return N(v)===u},en.isSuspenseList=function(v){return N(v)===m},en.isValidElementType=function(v){return typeof v=="string"||typeof v=="function"||v===r||v===s||v===n||v===u||v===m||v===x||typeof v=="object"&&v!==null&&(v.$$typeof===g||v.$$typeof===p||v.$$typeof===i||v.$$typeof===o||v.$$typeof===d||v.$$typeof===y||v.getModuleId!==void 0)},en.typeOf=N,en}var KD;function Sne(){return KD||(KD=1,tE.exports=Nne()),tE.exports}var Ene=Sne(),rE,zD;function zB(){if(zD)return rE;zD=1;var e=od(),t=al(),r="[object Number]";function n(s){return typeof s=="number"||t(s)&&e(s)==r}return rE=n,rE}var nE,qD;function jne(){if(qD)return nE;qD=1;var e=zB();function t(r){return e(r)&&r!=+r}return nE=t,nE}var wne=jne();const fu=Zr(wne);var Ane=zB();const _ne=Zr(Ane);var Ms=function(t){return t===0?0:t>0?1:-1},cf=function(t){return wf(t)&&t.indexOf("%")===t.length-1},it=function(t){return _ne(t)&&!fu(t)},Cne=function(t){return er(t)},Pa=function(t){return it(t)||wf(t)},Tne=0,ld=function(t){var r=++Tne;return"".concat(t||"").concat(r)},Ls=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!it(t)&&!wf(t))return n;var i;if(cf(t)){var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return fu(i)&&(i=n),s&&i>r&&(i=r),i},Vd=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},One=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},s=0;s<r;s++)if(!n[t[s]])n[t[s]]=!0;else return!0;return!1},Hn=function(t,r){return it(t)&&it(r)?function(n){return t+n*(r-t)}:function(){return r}};function Hy(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):ci(n,t))===r})}var Rne=function(t){if(!t||!t.length)return null;for(var r=t.length,n=0,s=0,i=0,o=0,l=1/0,d=-1/0,u=0,m=0,p=0;p<r;p++)u=t[p].cx||0,m=t[p].cy||0,n+=u,s+=m,i+=u*m,o+=u*u,l=Math.min(l,u),d=Math.max(d,u);var g=r*o!==n*n?(r*i-n*s)/(r*o-n*n):0;return{xmin:l,xmax:d,a:g,b:(s-g*n)/r}},kne=function(t,r){return it(t)&&it(r)?t-r:wf(t)&&wf(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function em(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function vC(e){"@babel/helpers - typeof";return vC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vC(e)}var Pne=["viewBox","children"],Dne=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],WD=["points","pathLength"],aE={svg:Pne,polygon:WD,polyline:WD},_R=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Ky=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(h.isValidElement(t)&&(n=t.props),!ph(n))return null;var s={};return Object.keys(n).forEach(function(i){_R.includes(i)&&(s[i]=r||function(o){return n[i](n,o)})}),s},Ine=function(t,r,n){return function(s){return t(r,n,s),null}},iu=function(t,r,n){if(!ph(t)||vC(t)!=="object")return null;var s=null;return Object.keys(t).forEach(function(i){var o=t[i];_R.includes(i)&&typeof o=="function"&&(s||(s={}),s[i]=Ine(o,r,n))}),s},Mne=["children"],Lne=["children"];function VD(e,t){if(e==null)return{};var r=$ne(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function $ne(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function NC(e){"@babel/helpers - typeof";return NC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},NC(e)}var YD={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Vc=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},XD=null,sE=null,G1=function e(t){if(t===XD&&Array.isArray(sE))return sE;var r=[];return h.Children.forEach(t,function(n){er(n)||(Ene.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),sE=r,XD=t,r};function Us(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(s){return Vc(s)}):n=[Vc(t)],G1(e).forEach(function(s){var i=ci(s,"type.displayName")||ci(s,"type.name");n.indexOf(i)!==-1&&r.push(s)}),r}function xs(e,t){var r=Us(e,t);return r&&r[0]}var SC=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,s=r.height;return!(!it(n)||n<=0||!it(s)||s<=0)},Fne=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],qB=function(t){return t&&t.type&&wf(t.type)&&Fne.indexOf(t.type)>=0},WB=function(t){return t&&NC(t)==="object"&&"clipDot"in t},Une=function(t,r,n,s){var i,o=(i=aE?.[s])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!Yt(t)&&(s&&o.includes(r)||Dne.includes(r))||n&&_R.includes(r)},Bne=function(t){var r=[];return G1(t).forEach(function(n){qB(n)&&r.push(n)}),r},Pt=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(h.isValidElement(t)&&(s=t.props),!ph(s))return null;var i={};return Object.keys(s).forEach(function(o){var l;Une((l=s)===null||l===void 0?void 0:l[o],o,r,n)&&(i[o]=s[o])}),i},EC=function e(t,r){if(t===r)return!0;var n=h.Children.count(t);if(n!==h.Children.count(r))return!1;if(n===0)return!0;if(n===1)return QD(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var s=0;s<n;s++){var i=t[s],o=r[s];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!QD(i,o))return!1}return!0},QD=function(t,r){if(er(t)&&er(r))return!0;if(!er(t)&&!er(r)){var n=t.props||{},s=n.children,i=VD(n,Mne),o=r.props||{},l=o.children,d=VD(o,Lne);return s&&l?em(i,d)&&EC(s,l):!s&&!l?em(i,d):!1}return!1},ZD=function(t,r){var n=[],s={};return G1(t).forEach(function(i,o){if(qB(i))n.push(i);else if(i){var l=Vc(i.type),d=r[l]||{},u=d.handler,m=d.once;if(u&&(!m||!s[l])){var p=u(i,l,o);n.push(p),s[l]=!0}}}),n},Gne=function(t){var r=t&&t.type;return r&&YD[r]?YD[r]:null},Hne=function(t,r){return G1(r).indexOf(t)},Kne=["children","width","height","viewBox","className","style","title","desc"];function jC(){return jC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jC.apply(this,arguments)}function zne(e,t){if(e==null)return{};var r=qne(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function qne(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function zy(e){var t=e.children,r=e.width,n=e.height,s=e.viewBox,i=e.className,o=e.style,l=e.title,d=e.desc,u=zne(e,Kne),m=s||{width:r,height:n,x:0,y:0},p=cr("recharts-surface",i);return Y.createElement("svg",jC({},Pt(u,!0,"svg"),{className:p,width:r,height:n,style:o,viewBox:"".concat(m.x," ").concat(m.y," ").concat(m.width," ").concat(m.height)}),Y.createElement("title",null,l),Y.createElement("desc",null,d),t)}var Wne=["children","className"];function wC(){return wC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wC.apply(this,arguments)}function Vne(e,t){if(e==null)return{};var r=Yne(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Yne(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var pr=Y.forwardRef(function(e,t){var r=e.children,n=e.className,s=Vne(e,Wne),i=cr("recharts-layer",n);return Y.createElement("g",wC({className:i},Pt(s,!0),{ref:t}),r)}),Zo=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i]},iE,JD;function VB(){if(JD)return iE;JD=1;function e(t,r,n){var s=-1,i=t.length;r<0&&(r=-r>i?0:i+r),n=n>i?i:n,n<0&&(n+=i),i=r>n?0:n-r>>>0,r>>>=0;for(var o=Array(i);++s<i;)o[s]=t[s+r];return o}return iE=e,iE}var oE,eI;function Xne(){if(eI)return oE;eI=1;var e=VB();function t(r,n,s){var i=r.length;return s=s===void 0?i:s,!n&&s>=i?r:e(r,n,s)}return oE=t,oE}var lE,tI;function YB(){if(tI)return lE;tI=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",s=t+r+n,i="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+e+s+i+"]");function d(u){return l.test(u)}return lE=d,lE}var cE,rI;function Qne(){if(rI)return cE;rI=1;function e(t){return t.split("")}return cE=e,cE}var dE,nI;function Zne(){if(nI)return dE;nI=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",s=t+r+n,i="\\ufe0e\\ufe0f",o="["+e+"]",l="["+s+"]",d="\\ud83c[\\udffb-\\udfff]",u="(?:"+l+"|"+d+")",m="[^"+e+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",g="[\\ud800-\\udbff][\\udc00-\\udfff]",x="\\u200d",y=u+"?",N="["+i+"]?",v="(?:"+x+"(?:"+[m,p,g].join("|")+")"+N+y+")*",S=N+y+v,E="(?:"+[m+l+"?",l,p,g,o].join("|")+")",C=RegExp(d+"(?="+d+")|"+E+S,"g");function _(A){return A.match(C)||[]}return dE=_,dE}var uE,aI;function Jne(){if(aI)return uE;aI=1;var e=Qne(),t=YB(),r=Zne();function n(s){return t(s)?r(s):e(s)}return uE=n,uE}var fE,sI;function eae(){if(sI)return fE;sI=1;var e=Xne(),t=YB(),r=Jne(),n=HB();function s(i){return function(o){o=n(o);var l=t(o)?r(o):void 0,d=l?l[0]:o.charAt(0),u=l?e(l,1).join(""):o.slice(1);return d[i]()+u}}return fE=s,fE}var pE,iI;function tae(){if(iI)return pE;iI=1;var e=eae(),t=e("toUpperCase");return pE=t,pE}var rae=tae();const H1=Zr(rae);function An(e){return function(){return e}}const XB=Math.cos,qy=Math.sin,il=Math.sqrt,Wy=Math.PI,K1=2*Wy,AC=Math.PI,_C=2*AC,tf=1e-6,nae=_C-tf;function QB(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function aae(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return QB;const r=10**t;return function(n){this._+=n[0];for(let s=1,i=n.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class sae{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?QB:aae(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,i,o){this._append`C${+t},${+r},${+n},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,s,i){if(t=+t,r=+r,n=+n,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,d=n-t,u=s-r,m=o-t,p=l-r,g=m*m+p*p;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(g>tf)if(!(Math.abs(p*d-u*m)>tf)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let x=n-o,y=s-l,N=d*d+u*u,v=x*x+y*y,S=Math.sqrt(N),E=Math.sqrt(g),C=i*Math.tan((AC-Math.acos((N+g-v)/(2*S*E)))/2),_=C/E,A=C/S;Math.abs(_-1)>tf&&this._append`L${t+_*m},${r+_*p}`,this._append`A${i},${i},0,0,${+(p*x>m*y)},${this._x1=t+A*d},${this._y1=r+A*u}`}}arc(t,r,n,s,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(s),d=n*Math.sin(s),u=t+l,m=r+d,p=1^o,g=o?s-i:i-s;this._x1===null?this._append`M${u},${m}`:(Math.abs(this._x1-u)>tf||Math.abs(this._y1-m)>tf)&&this._append`L${u},${m}`,n&&(g<0&&(g=g%_C+_C),g>nae?this._append`A${n},${n},0,1,${p},${t-l},${r-d}A${n},${n},0,1,${p},${this._x1=u},${this._y1=m}`:g>tf&&this._append`A${n},${n},0,${+(g>=AC)},${p},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function CR(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new sae(t)}function TR(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ZB(e){this._context=e}ZB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function z1(e){return new ZB(e)}function JB(e){return e[0]}function eG(e){return e[1]}function tG(e,t){var r=An(!0),n=null,s=z1,i=null,o=CR(l);e=typeof e=="function"?e:e===void 0?JB:An(e),t=typeof t=="function"?t:t===void 0?eG:An(t);function l(d){var u,m=(d=TR(d)).length,p,g=!1,x;for(n==null&&(i=s(x=o())),u=0;u<=m;++u)!(u<m&&r(p=d[u],u,d))===g&&((g=!g)?i.lineStart():i.lineEnd()),g&&i.point(+e(p,u,d),+t(p,u,d));if(x)return i=null,x+""||null}return l.x=function(d){return arguments.length?(e=typeof d=="function"?d:An(+d),l):e},l.y=function(d){return arguments.length?(t=typeof d=="function"?d:An(+d),l):t},l.defined=function(d){return arguments.length?(r=typeof d=="function"?d:An(!!d),l):r},l.curve=function(d){return arguments.length?(s=d,n!=null&&(i=s(n)),l):s},l.context=function(d){return arguments.length?(d==null?n=i=null:i=s(n=d),l):n},l}function Nb(e,t,r){var n=null,s=An(!0),i=null,o=z1,l=null,d=CR(u);e=typeof e=="function"?e:e===void 0?JB:An(+e),t=typeof t=="function"?t:An(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?eG:An(+r);function u(p){var g,x,y,N=(p=TR(p)).length,v,S=!1,E,C=new Array(N),_=new Array(N);for(i==null&&(l=o(E=d())),g=0;g<=N;++g){if(!(g<N&&s(v=p[g],g,p))===S)if(S=!S)x=g,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),y=g-1;y>=x;--y)l.point(C[y],_[y]);l.lineEnd(),l.areaEnd()}S&&(C[g]=+e(v,g,p),_[g]=+t(v,g,p),l.point(n?+n(v,g,p):C[g],r?+r(v,g,p):_[g]))}if(E)return l=null,E+""||null}function m(){return tG().defined(s).curve(o).context(i)}return u.x=function(p){return arguments.length?(e=typeof p=="function"?p:An(+p),n=null,u):e},u.x0=function(p){return arguments.length?(e=typeof p=="function"?p:An(+p),u):e},u.x1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:An(+p),u):n},u.y=function(p){return arguments.length?(t=typeof p=="function"?p:An(+p),r=null,u):t},u.y0=function(p){return arguments.length?(t=typeof p=="function"?p:An(+p),u):t},u.y1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:An(+p),u):r},u.lineX0=u.lineY0=function(){return m().x(e).y(t)},u.lineY1=function(){return m().x(e).y(r)},u.lineX1=function(){return m().x(n).y(t)},u.defined=function(p){return arguments.length?(s=typeof p=="function"?p:An(!!p),u):s},u.curve=function(p){return arguments.length?(o=p,i!=null&&(l=o(i)),u):o},u.context=function(p){return arguments.length?(p==null?i=l=null:l=o(i=p),u):i},u}class rG{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function iae(e){return new rG(e,!0)}function oae(e){return new rG(e,!1)}const OR={draw(e,t){const r=il(t/Wy);e.moveTo(r,0),e.arc(0,0,r,0,K1)}},lae={draw(e,t){const r=il(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},nG=il(1/3),cae=nG*2,dae={draw(e,t){const r=il(t/cae),n=r*nG;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},uae={draw(e,t){const r=il(t),n=-r/2;e.rect(n,n,r,r)}},fae=.8908130915292852,aG=qy(Wy/10)/qy(7*Wy/10),pae=qy(K1/10)*aG,mae=-XB(K1/10)*aG,hae={draw(e,t){const r=il(t*fae),n=pae*r,s=mae*r;e.moveTo(0,-r),e.lineTo(n,s);for(let i=1;i<5;++i){const o=K1*i/5,l=XB(o),d=qy(o);e.lineTo(d*r,-l*r),e.lineTo(l*n-d*s,d*n+l*s)}e.closePath()}},mE=il(3),gae={draw(e,t){const r=-il(t/(mE*3));e.moveTo(0,r*2),e.lineTo(-mE*r,-r),e.lineTo(mE*r,-r),e.closePath()}},io=-.5,oo=il(3)/2,CC=1/il(12),xae=(CC/2+1)*3,bae={draw(e,t){const r=il(t/xae),n=r/2,s=r*CC,i=n,o=r*CC+r,l=-i,d=o;e.moveTo(n,s),e.lineTo(i,o),e.lineTo(l,d),e.lineTo(io*n-oo*s,oo*n+io*s),e.lineTo(io*i-oo*o,oo*i+io*o),e.lineTo(io*l-oo*d,oo*l+io*d),e.lineTo(io*n+oo*s,io*s-oo*n),e.lineTo(io*i+oo*o,io*o-oo*i),e.lineTo(io*l+oo*d,io*d-oo*l),e.closePath()}};function yae(e,t){let r=null,n=CR(s);e=typeof e=="function"?e:An(e||OR),t=typeof t=="function"?t:An(t===void 0?64:+t);function s(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:An(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:An(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function Vy(){}function Yy(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function sG(e){this._context=e}sG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Yy(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Yy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function vae(e){return new sG(e)}function iG(e){this._context=e}iG.prototype={areaStart:Vy,areaEnd:Vy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Yy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Nae(e){return new iG(e)}function oG(e){this._context=e}oG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Yy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Sae(e){return new oG(e)}function lG(e){this._context=e}lG.prototype={areaStart:Vy,areaEnd:Vy,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Eae(e){return new lG(e)}function oI(e){return e<0?-1:1}function lI(e,t,r){var n=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(n||s<0&&-0),o=(r-e._y1)/(s||n<0&&-0),l=(i*s+o*n)/(n+s);return(oI(i)+oI(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function cI(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function hE(e,t,r){var n=e._x0,s=e._y0,i=e._x1,o=e._y1,l=(i-n)/3;e._context.bezierCurveTo(n+l,s+l*t,i-l,o-l*r,i,o)}function Xy(e){this._context=e}Xy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:hE(this,this._t0,cI(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,hE(this,cI(this,r=lI(this,e,t)),r);break;default:hE(this,this._t0,r=lI(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function cG(e){this._context=new dG(e)}(cG.prototype=Object.create(Xy.prototype)).point=function(e,t){Xy.prototype.point.call(this,t,e)};function dG(e){this._context=e}dG.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,i){this._context.bezierCurveTo(t,e,n,r,i,s)}};function jae(e){return new Xy(e)}function wae(e){return new cG(e)}function uG(e){this._context=e}uG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=dI(e),s=dI(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],s[0][i],n[1][i],s[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function dI(e){var t,r=e.length-1,n,s=new Array(r),i=new Array(r),o=new Array(r);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(s[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function Aae(e){return new uG(e)}function q1(e,t){this._context=e,this._t=t}q1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function _ae(e){return new q1(e,.5)}function Cae(e){return new q1(e,0)}function Tae(e){return new q1(e,1)}function bm(e,t){if((o=e.length)>1)for(var r=1,n,s,i=e[t[0]],o,l=i.length;r<o;++r)for(s=i,i=e[t[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function TC(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function Oae(e,t){return e[t]}function Rae(e){const t=[];return t.key=e,t}function kae(){var e=An([]),t=TC,r=bm,n=Oae;function s(i){var o=Array.from(e.apply(this,arguments),Rae),l,d=o.length,u=-1,m;for(const p of i)for(l=0,++u;l<d;++l)(o[l][u]=[0,+n(p,o[l].key,u,i)]).data=p;for(l=0,m=TR(t(o));l<d;++l)o[m[l]].index=l;return r(o,m),o}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:An(Array.from(i)),s):e},s.value=function(i){return arguments.length?(n=typeof i=="function"?i:An(+i),s):n},s.order=function(i){return arguments.length?(t=i==null?TC:typeof i=="function"?i:An(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??bm,s):r},s}function Pae(e,t){if((n=e.length)>0){for(var r,n,s=0,i=e[0].length,o;s<i;++s){for(o=r=0;r<n;++r)o+=e[r][s][1]||0;if(o)for(r=0;r<n;++r)e[r][s][1]/=o}bm(e,t)}}function Dae(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,i=n.length;r<i;++r){for(var o=0,l=0;o<s;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}bm(e,t)}}function Iae(e,t){if(!(!((o=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,i,o;n<i;++n){for(var l=0,d=0,u=0;l<o;++l){for(var m=e[t[l]],p=m[n][1]||0,g=m[n-1][1]||0,x=(p-g)/2,y=0;y<l;++y){var N=e[t[y]],v=N[n][1]||0,S=N[n-1][1]||0;x+=v-S}d+=p,u+=x*p}s[n-1][1]+=s[n-1][0]=r,d&&(r-=u/d)}s[n-1][1]+=s[n-1][0]=r,bm(e,t)}}function mg(e){"@babel/helpers - typeof";return mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mg(e)}var Mae=["type","size","sizeType"];function OC(){return OC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},OC.apply(this,arguments)}function uI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function fI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uI(Object(r),!0).forEach(function(n){Lae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Lae(e,t,r){return t=$ae(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $ae(e){var t=Fae(e,"string");return mg(t)=="symbol"?t:t+""}function Fae(e,t){if(mg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(mg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Uae(e,t){if(e==null)return{};var r=Bae(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Bae(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var fG={symbolCircle:OR,symbolCross:lae,symbolDiamond:dae,symbolSquare:uae,symbolStar:hae,symbolTriangle:gae,symbolWye:bae},Gae=Math.PI/180,Hae=function(t){var r="symbol".concat(H1(t));return fG[r]||OR},Kae=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var s=18*Gae;return 1.25*t*t*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},zae=function(t,r){fG["symbol".concat(H1(t))]=r},W1=function(t){var r=t.type,n=r===void 0?"circle":r,s=t.size,i=s===void 0?64:s,o=t.sizeType,l=o===void 0?"area":o,d=Uae(t,Mae),u=fI(fI({},d),{},{type:n,size:i,sizeType:l}),m=function(){var v=Hae(n),S=yae().type(v).size(Kae(i,l,n));return S()},p=u.className,g=u.cx,x=u.cy,y=Pt(u,!0);return g===+g&&x===+x&&i===+i?Y.createElement("path",OC({},y,{className:cr("recharts-symbols",p),transform:"translate(".concat(g,", ").concat(x,")"),d:m()})):null};W1.registerSymbol=zae;function ym(e){"@babel/helpers - typeof";return ym=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ym(e)}function RC(){return RC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},RC.apply(this,arguments)}function pI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function qae(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pI(Object(r),!0).forEach(function(n){hg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Wae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,mG(n.key),n)}}function Yae(e,t,r){return t&&Vae(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xae(e,t,r){return t=Qy(t),Qae(e,pG()?Reflect.construct(t,r||[],Qy(e).constructor):t.apply(e,r))}function Qae(e,t){if(t&&(ym(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zae(e)}function Zae(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pG=function(){return!!e})()}function Qy(e){return Qy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Qy(e)}function Jae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kC(e,t)}function kC(e,t){return kC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},kC(e,t)}function hg(e,t,r){return t=mG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mG(e){var t=ese(e,"string");return ym(t)=="symbol"?t:t+""}function ese(e,t){if(ym(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ym(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var lo=32,RR=(function(e){function t(){return Wae(this,t),Xae(this,t,arguments)}return Jae(t,e),Yae(t,[{key:"renderIcon",value:function(n){var s=this.props.inactiveColor,i=lo/2,o=lo/6,l=lo/3,d=n.inactive?s:n.color;if(n.type==="plainline")return Y.createElement("line",{strokeWidth:4,fill:"none",stroke:d,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:lo,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return Y.createElement("path",{strokeWidth:4,fill:"none",stroke:d,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(lo,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return Y.createElement("path",{stroke:"none",fill:d,d:"M0,".concat(lo/8,"h").concat(lo,"v").concat(lo*3/4,"h").concat(-lo,"z"),className:"recharts-legend-icon"});if(Y.isValidElement(n.legendIcon)){var u=qae({},n);return delete u.legendIcon,Y.cloneElement(n.legendIcon,u)}return Y.createElement(W1,{fill:d,cx:i,cy:i,size:lo,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,s=this.props,i=s.payload,o=s.iconSize,l=s.layout,d=s.formatter,u=s.inactiveColor,m={x:0,y:0,width:lo,height:lo},p={display:l==="horizontal"?"inline-block":"block",marginRight:10},g={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(x,y){var N=x.formatter||d,v=cr(hg(hg({"recharts-legend-item":!0},"legend-item-".concat(y),!0),"inactive",x.inactive));if(x.type==="none")return null;var S=Yt(x.value)?null:x.value;Zo(!Yt(x.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var E=x.inactive?u:x.color;return Y.createElement("li",RC({className:v,style:p,key:"legend-item-".concat(y)},iu(n.props,x,y)),Y.createElement(zy,{width:o,height:o,viewBox:m,style:g},n.renderIcon(x)),Y.createElement("span",{className:"recharts-legend-item-text",style:{color:E}},N?N(S,x,y):S))})}},{key:"render",value:function(){var n=this.props,s=n.payload,i=n.layout,o=n.align;if(!s||!s.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return Y.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])})(h.PureComponent);hg(RR,"displayName","Legend");hg(RR,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var gE,mI;function tse(){if(mI)return gE;mI=1;var e=L1();function t(){this.__data__=new e,this.size=0}return gE=t,gE}var xE,hI;function rse(){if(hI)return xE;hI=1;function e(t){var r=this.__data__,n=r.delete(t);return this.size=r.size,n}return xE=e,xE}var bE,gI;function nse(){if(gI)return bE;gI=1;function e(t){return this.__data__.get(t)}return bE=e,bE}var yE,xI;function ase(){if(xI)return yE;xI=1;function e(t){return this.__data__.has(t)}return yE=e,yE}var vE,bI;function sse(){if(bI)return vE;bI=1;var e=L1(),t=wR(),r=AR(),n=200;function s(i,o){var l=this.__data__;if(l instanceof e){var d=l.__data__;if(!t||d.length<n-1)return d.push([i,o]),this.size=++l.size,this;l=this.__data__=new r(d)}return l.set(i,o),this.size=l.size,this}return vE=s,vE}var NE,yI;function kR(){if(yI)return NE;yI=1;var e=L1(),t=tse(),r=rse(),n=nse(),s=ase(),i=sse();function o(l){var d=this.__data__=new e(l);this.size=d.size}return o.prototype.clear=t,o.prototype.delete=r,o.prototype.get=n,o.prototype.has=s,o.prototype.set=i,NE=o,NE}var SE,vI;function ise(){if(vI)return SE;vI=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return SE=t,SE}var EE,NI;function ose(){if(NI)return EE;NI=1;function e(t){return this.__data__.has(t)}return EE=e,EE}var jE,SI;function hG(){if(SI)return jE;SI=1;var e=AR(),t=ise(),r=ose();function n(s){var i=-1,o=s==null?0:s.length;for(this.__data__=new e;++i<o;)this.add(s[i])}return n.prototype.add=n.prototype.push=t,n.prototype.has=r,jE=n,jE}var wE,EI;function gG(){if(EI)return wE;EI=1;function e(t,r){for(var n=-1,s=t==null?0:t.length;++n<s;)if(r(t[n],n,t))return!0;return!1}return wE=e,wE}var AE,jI;function xG(){if(jI)return AE;jI=1;function e(t,r){return t.has(r)}return AE=e,AE}var _E,wI;function bG(){if(wI)return _E;wI=1;var e=hG(),t=gG(),r=xG(),n=1,s=2;function i(o,l,d,u,m,p){var g=d&n,x=o.length,y=l.length;if(x!=y&&!(g&&y>x))return!1;var N=p.get(o),v=p.get(l);if(N&&v)return N==l&&v==o;var S=-1,E=!0,C=d&s?new e:void 0;for(p.set(o,l),p.set(l,o);++S<x;){var _=o[S],A=l[S];if(u)var T=g?u(A,_,S,l,o,p):u(_,A,S,o,l,p);if(T!==void 0){if(T)continue;E=!1;break}if(C){if(!t(l,function(R,I){if(!r(C,I)&&(_===R||m(_,R,d,u,p)))return C.push(I)})){E=!1;break}}else if(!(_===A||m(_,A,d,u,p))){E=!1;break}}return p.delete(o),p.delete(l),E}return _E=i,_E}var CE,AI;function yG(){if(AI)return CE;AI=1;var e=nl(),t=e.Uint8Array;return CE=t,CE}var TE,_I;function lse(){if(_I)return TE;_I=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(s,i){n[++r]=[i,s]}),n}return TE=e,TE}var OE,CI;function PR(){if(CI)return OE;CI=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(s){n[++r]=s}),n}return OE=e,OE}var RE,TI;function cse(){if(TI)return RE;TI=1;var e=uh(),t=yG(),r=I1(),n=bG(),s=lse(),i=PR(),o=1,l=2,d="[object Boolean]",u="[object Date]",m="[object Error]",p="[object Map]",g="[object Number]",x="[object RegExp]",y="[object Set]",N="[object String]",v="[object Symbol]",S="[object ArrayBuffer]",E="[object DataView]",C=e?e.prototype:void 0,_=C?C.valueOf:void 0;function A(T,R,I,k,w,L,H){switch(I){case E:if(T.byteLength!=R.byteLength||T.byteOffset!=R.byteOffset)return!1;T=T.buffer,R=R.buffer;case S:return!(T.byteLength!=R.byteLength||!L(new t(T),new t(R)));case d:case u:case g:return r(+T,+R);case m:return T.name==R.name&&T.message==R.message;case x:case N:return T==R+"";case p:var B=s;case y:var M=k&o;if(B||(B=i),T.size!=R.size&&!M)return!1;var G=H.get(T);if(G)return G==R;k|=l,H.set(T,R);var $=n(B(T),B(R),k,w,L,H);return H.delete(T),$;case v:if(_)return _.call(T)==_.call(R)}return!1}return RE=A,RE}var kE,OI;function DR(){if(OI)return kE;OI=1;function e(t,r){for(var n=-1,s=r.length,i=t.length;++n<s;)t[i+n]=r[n];return t}return kE=e,kE}var PE,RI;function vG(){if(RI)return PE;RI=1;var e=DR(),t=Hs();function r(n,s,i){var o=s(n);return t(n)?o:e(o,i(n))}return PE=r,PE}var DE,kI;function dse(){if(kI)return DE;kI=1;function e(t,r){for(var n=-1,s=t==null?0:t.length,i=0,o=[];++n<s;){var l=t[n];r(l,n,t)&&(o[i++]=l)}return o}return DE=e,DE}var IE,PI;function NG(){if(PI)return IE;PI=1;function e(){return[]}return IE=e,IE}var ME,DI;function IR(){if(DI)return ME;DI=1;var e=dse(),t=NG(),r=Object.prototype,n=r.propertyIsEnumerable,s=Object.getOwnPropertySymbols,i=s?function(o){return o==null?[]:(o=Object(o),e(s(o),function(l){return n.call(o,l)}))}:t;return ME=i,ME}var LE,II;function use(){if(II)return LE;II=1;function e(t,r){for(var n=-1,s=Array(t);++n<t;)s[n]=r(n);return s}return LE=e,LE}var $E,MI;function fse(){if(MI)return $E;MI=1;var e=od(),t=al(),r="[object Arguments]";function n(s){return t(s)&&e(s)==r}return $E=n,$E}var FE,LI;function MR(){if(LI)return FE;LI=1;var e=fse(),t=al(),r=Object.prototype,n=r.hasOwnProperty,s=r.propertyIsEnumerable,i=e((function(){return arguments})())?e:function(o){return t(o)&&n.call(o,"callee")&&!s.call(o,"callee")};return FE=i,FE}var I0={exports:{}},UE,$I;function pse(){if($I)return UE;$I=1;function e(){return!1}return UE=e,UE}I0.exports;var FI;function LR(){return FI||(FI=1,(function(e,t){var r=nl(),n=pse(),s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===s,l=o?r.Buffer:void 0,d=l?l.isBuffer:void 0,u=d||n;e.exports=u})(I0,I0.exports)),I0.exports}var BE,UI;function $R(){if(UI)return BE;UI=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(n,s){var i=typeof n;return s=s??e,!!s&&(i=="number"||i!="symbol"&&t.test(n))&&n>-1&&n%1==0&&n<s}return BE=r,BE}var GE,BI;function FR(){if(BI)return GE;BI=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return GE=t,GE}var HE,GI;function mse(){if(GI)return HE;GI=1;var e=od(),t=FR(),r=al(),n="[object Arguments]",s="[object Array]",i="[object Boolean]",o="[object Date]",l="[object Error]",d="[object Function]",u="[object Map]",m="[object Number]",p="[object Object]",g="[object RegExp]",x="[object Set]",y="[object String]",N="[object WeakMap]",v="[object ArrayBuffer]",S="[object DataView]",E="[object Float32Array]",C="[object Float64Array]",_="[object Int8Array]",A="[object Int16Array]",T="[object Int32Array]",R="[object Uint8Array]",I="[object Uint8ClampedArray]",k="[object Uint16Array]",w="[object Uint32Array]",L={};L[E]=L[C]=L[_]=L[A]=L[T]=L[R]=L[I]=L[k]=L[w]=!0,L[n]=L[s]=L[v]=L[i]=L[S]=L[o]=L[l]=L[d]=L[u]=L[m]=L[p]=L[g]=L[x]=L[y]=L[N]=!1;function H(B){return r(B)&&t(B.length)&&!!L[e(B)]}return HE=H,HE}var KE,HI;function V1(){if(HI)return KE;HI=1;function e(t){return function(r){return t(r)}}return KE=e,KE}var M0={exports:{}};M0.exports;var KI;function UR(){return KI||(KI=1,(function(e,t){var r=UB(),n=t&&!t.nodeType&&t,s=n&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===n,o=i&&r.process,l=(function(){try{var d=s&&s.require&&s.require("util").types;return d||o&&o.binding&&o.binding("util")}catch{}})();e.exports=l})(M0,M0.exports)),M0.exports}var zE,zI;function SG(){if(zI)return zE;zI=1;var e=mse(),t=V1(),r=UR(),n=r&&r.isTypedArray,s=n?t(n):e;return zE=s,zE}var qE,qI;function EG(){if(qI)return qE;qI=1;var e=use(),t=MR(),r=Hs(),n=LR(),s=$R(),i=SG(),o=Object.prototype,l=o.hasOwnProperty;function d(u,m){var p=r(u),g=!p&&t(u),x=!p&&!g&&n(u),y=!p&&!g&&!x&&i(u),N=p||g||x||y,v=N?e(u.length,String):[],S=v.length;for(var E in u)(m||l.call(u,E))&&!(N&&(E=="length"||x&&(E=="offset"||E=="parent")||y&&(E=="buffer"||E=="byteLength"||E=="byteOffset")||s(E,S)))&&v.push(E);return v}return qE=d,qE}var WE,WI;function BR(){if(WI)return WE;WI=1;var e=Object.prototype;function t(r){var n=r&&r.constructor,s=typeof n=="function"&&n.prototype||e;return r===s}return WE=t,WE}var VE,VI;function jG(){if(VI)return VE;VI=1;function e(t,r){return function(n){return t(r(n))}}return VE=e,VE}var YE,YI;function hse(){if(YI)return YE;YI=1;var e=jG(),t=e(Object.keys,Object);return YE=t,YE}var XE,XI;function gse(){if(XI)return XE;XI=1;var e=BR(),t=hse(),r=Object.prototype,n=r.hasOwnProperty;function s(i){if(!e(i))return t(i);var o=[];for(var l in Object(i))n.call(i,l)&&l!="constructor"&&o.push(l);return o}return XE=s,XE}var QE,QI;function mh(){if(QI)return QE;QI=1;var e=jR(),t=FR();function r(n){return n!=null&&t(n.length)&&!e(n)}return QE=r,QE}var ZE,ZI;function hh(){if(ZI)return ZE;ZI=1;var e=EG(),t=gse(),r=mh();function n(s){return r(s)?e(s):t(s)}return ZE=n,ZE}var JE,JI;function wG(){if(JI)return JE;JI=1;var e=vG(),t=IR(),r=hh();function n(s){return e(s,r,t)}return JE=n,JE}var ej,eM;function xse(){if(eM)return ej;eM=1;var e=wG(),t=1,r=Object.prototype,n=r.hasOwnProperty;function s(i,o,l,d,u,m){var p=l&t,g=e(i),x=g.length,y=e(o),N=y.length;if(x!=N&&!p)return!1;for(var v=x;v--;){var S=g[v];if(!(p?S in o:n.call(o,S)))return!1}var E=m.get(i),C=m.get(o);if(E&&C)return E==o&&C==i;var _=!0;m.set(i,o),m.set(o,i);for(var A=p;++v<x;){S=g[v];var T=i[S],R=o[S];if(d)var I=p?d(R,T,S,o,i,m):d(T,R,S,i,o,m);if(!(I===void 0?T===R||u(T,R,l,d,m):I)){_=!1;break}A||(A=S=="constructor")}if(_&&!A){var k=i.constructor,w=o.constructor;k!=w&&"constructor"in i&&"constructor"in o&&!(typeof k=="function"&&k instanceof k&&typeof w=="function"&&w instanceof w)&&(_=!1)}return m.delete(i),m.delete(o),_}return ej=s,ej}var tj,tM;function bse(){if(tM)return tj;tM=1;var e=Lf(),t=nl(),r=e(t,"DataView");return tj=r,tj}var rj,rM;function yse(){if(rM)return rj;rM=1;var e=Lf(),t=nl(),r=e(t,"Promise");return rj=r,rj}var nj,nM;function AG(){if(nM)return nj;nM=1;var e=Lf(),t=nl(),r=e(t,"Set");return nj=r,nj}var aj,aM;function vse(){if(aM)return aj;aM=1;var e=Lf(),t=nl(),r=e(t,"WeakMap");return aj=r,aj}var sj,sM;function Y1(){if(sM)return sj;sM=1;var e=bse(),t=wR(),r=yse(),n=AG(),s=vse(),i=od(),o=BB(),l="[object Map]",d="[object Object]",u="[object Promise]",m="[object Set]",p="[object WeakMap]",g="[object DataView]",x=o(e),y=o(t),N=o(r),v=o(n),S=o(s),E=i;return(e&&E(new e(new ArrayBuffer(1)))!=g||t&&E(new t)!=l||r&&E(r.resolve())!=u||n&&E(new n)!=m||s&&E(new s)!=p)&&(E=function(C){var _=i(C),A=_==d?C.constructor:void 0,T=A?o(A):"";if(T)switch(T){case x:return g;case y:return l;case N:return u;case v:return m;case S:return p}return _}),sj=E,sj}var ij,iM;function Nse(){if(iM)return ij;iM=1;var e=kR(),t=bG(),r=cse(),n=xse(),s=Y1(),i=Hs(),o=LR(),l=SG(),d=1,u="[object Arguments]",m="[object Array]",p="[object Object]",g=Object.prototype,x=g.hasOwnProperty;function y(N,v,S,E,C,_){var A=i(N),T=i(v),R=A?m:s(N),I=T?m:s(v);R=R==u?p:R,I=I==u?p:I;var k=R==p,w=I==p,L=R==I;if(L&&o(N)){if(!o(v))return!1;A=!0,k=!1}if(L&&!k)return _||(_=new e),A||l(N)?t(N,v,S,E,C,_):r(N,v,R,S,E,C,_);if(!(S&d)){var H=k&&x.call(N,"__wrapped__"),B=w&&x.call(v,"__wrapped__");if(H||B){var M=H?N.value():N,G=B?v.value():v;return _||(_=new e),C(M,G,S,E,_)}}return L?(_||(_=new e),n(N,v,S,E,C,_)):!1}return ij=y,ij}var oj,oM;function GR(){if(oM)return oj;oM=1;var e=Nse(),t=al();function r(n,s,i,o,l){return n===s?!0:n==null||s==null||!t(n)&&!t(s)?n!==n&&s!==s:e(n,s,i,o,r,l)}return oj=r,oj}var lj,lM;function Sse(){if(lM)return lj;lM=1;var e=kR(),t=GR(),r=1,n=2;function s(i,o,l,d){var u=l.length,m=u,p=!d;if(i==null)return!m;for(i=Object(i);u--;){var g=l[u];if(p&&g[2]?g[1]!==i[g[0]]:!(g[0]in i))return!1}for(;++u<m;){g=l[u];var x=g[0],y=i[x],N=g[1];if(p&&g[2]){if(y===void 0&&!(x in i))return!1}else{var v=new e;if(d)var S=d(y,N,x,i,o,v);if(!(S===void 0?t(N,y,r|n,d,v):S))return!1}}return!0}return lj=s,lj}var cj,cM;function _G(){if(cM)return cj;cM=1;var e=sl();function t(r){return r===r&&!e(r)}return cj=t,cj}var dj,dM;function Ese(){if(dM)return dj;dM=1;var e=_G(),t=hh();function r(n){for(var s=t(n),i=s.length;i--;){var o=s[i],l=n[o];s[i]=[o,l,e(l)]}return s}return dj=r,dj}var uj,uM;function CG(){if(uM)return uj;uM=1;function e(t,r){return function(n){return n==null?!1:n[t]===r&&(r!==void 0||t in Object(n))}}return uj=e,uj}var fj,fM;function jse(){if(fM)return fj;fM=1;var e=Sse(),t=Ese(),r=CG();function n(s){var i=t(s);return i.length==1&&i[0][2]?r(i[0][0],i[0][1]):function(o){return o===s||e(o,s,i)}}return fj=n,fj}var pj,pM;function wse(){if(pM)return pj;pM=1;function e(t,r){return t!=null&&r in Object(t)}return pj=e,pj}var mj,mM;function Ase(){if(mM)return mj;mM=1;var e=U1(),t=MR(),r=Hs(),n=$R(),s=FR(),i=ox();function o(l,d,u){d=e(d,l);for(var m=-1,p=d.length,g=!1;++m<p;){var x=i(d[m]);if(!(g=l!=null&&u(l,x)))break;l=l[x]}return g||++m!=p?g:(p=l==null?0:l.length,!!p&&s(p)&&n(x,p)&&(r(l)||t(l)))}return mj=o,mj}var hj,hM;function _se(){if(hM)return hj;hM=1;var e=wse(),t=Ase();function r(n,s){return n!=null&&t(n,s,e)}return hj=r,hj}var gj,gM;function Cse(){if(gM)return gj;gM=1;var e=GR(),t=KB(),r=_se(),n=ER(),s=_G(),i=CG(),o=ox(),l=1,d=2;function u(m,p){return n(m)&&s(p)?i(o(m),p):function(g){var x=t(g,m);return x===void 0&&x===p?r(g,m):e(p,x,l|d)}}return gj=u,gj}var xj,xM;function gh(){if(xM)return xj;xM=1;function e(t){return t}return xj=e,xj}var bj,bM;function Tse(){if(bM)return bj;bM=1;function e(t){return function(r){return r?.[t]}}return bj=e,bj}var yj,yM;function Ose(){if(yM)return yj;yM=1;var e=B1();function t(r){return function(n){return e(n,r)}}return yj=t,yj}var vj,vM;function Rse(){if(vM)return vj;vM=1;var e=Tse(),t=Ose(),r=ER(),n=ox();function s(i){return r(i)?e(n(i)):t(i)}return vj=s,vj}var Nj,NM;function ec(){if(NM)return Nj;NM=1;var e=jse(),t=Cse(),r=gh(),n=Hs(),s=Rse();function i(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?n(o)?t(o[0],o[1]):e(o):s(o)}return Nj=i,Nj}var Sj,SM;function TG(){if(SM)return Sj;SM=1;function e(t,r,n,s){for(var i=t.length,o=n+(s?1:-1);s?o--:++o<i;)if(r(t[o],o,t))return o;return-1}return Sj=e,Sj}var Ej,EM;function kse(){if(EM)return Ej;EM=1;function e(t){return t!==t}return Ej=e,Ej}var jj,jM;function Pse(){if(jM)return jj;jM=1;function e(t,r,n){for(var s=n-1,i=t.length;++s<i;)if(t[s]===r)return s;return-1}return jj=e,jj}var wj,wM;function Dse(){if(wM)return wj;wM=1;var e=TG(),t=kse(),r=Pse();function n(s,i,o){return i===i?r(s,i,o):e(s,t,o)}return wj=n,wj}var Aj,AM;function Ise(){if(AM)return Aj;AM=1;var e=Dse();function t(r,n){var s=r==null?0:r.length;return!!s&&e(r,n,0)>-1}return Aj=t,Aj}var _j,_M;function Mse(){if(_M)return _j;_M=1;function e(t,r,n){for(var s=-1,i=t==null?0:t.length;++s<i;)if(n(r,t[s]))return!0;return!1}return _j=e,_j}var Cj,CM;function Lse(){if(CM)return Cj;CM=1;function e(){}return Cj=e,Cj}var Tj,TM;function $se(){if(TM)return Tj;TM=1;var e=AG(),t=Lse(),r=PR(),n=1/0,s=e&&1/r(new e([,-0]))[1]==n?function(i){return new e(i)}:t;return Tj=s,Tj}var Oj,OM;function Fse(){if(OM)return Oj;OM=1;var e=hG(),t=Ise(),r=Mse(),n=xG(),s=$se(),i=PR(),o=200;function l(d,u,m){var p=-1,g=t,x=d.length,y=!0,N=[],v=N;if(m)y=!1,g=r;else if(x>=o){var S=u?null:s(d);if(S)return i(S);y=!1,g=n,v=new e}else v=u?[]:N;e:for(;++p<x;){var E=d[p],C=u?u(E):E;if(E=m||E!==0?E:0,y&&C===C){for(var _=v.length;_--;)if(v[_]===C)continue e;u&&v.push(C),N.push(E)}else g(v,C,m)||(v!==N&&v.push(C),N.push(E))}return N}return Oj=l,Oj}var Rj,RM;function Use(){if(RM)return Rj;RM=1;var e=ec(),t=Fse();function r(n,s){return n&&n.length?t(n,e(s,2)):[]}return Rj=r,Rj}var Bse=Use();const kM=Zr(Bse);function OG(e,t,r){return t===!0?kM(e,r):Yt(t)?kM(e,t):e}function vm(e){"@babel/helpers - typeof";return vm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vm(e)}var Gse=["ref"];function PM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Oc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PM(Object(r),!0).forEach(function(n){X1(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Hse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function DM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,kG(n.key),n)}}function Kse(e,t,r){return t&&DM(e.prototype,t),r&&DM(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function zse(e,t,r){return t=Zy(t),qse(e,RG()?Reflect.construct(t,r||[],Zy(e).constructor):t.apply(e,r))}function qse(e,t){if(t&&(vm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wse(e)}function Wse(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function RG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RG=function(){return!!e})()}function Zy(e){return Zy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Zy(e)}function Vse(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&PC(e,t)}function PC(e,t){return PC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},PC(e,t)}function X1(e,t,r){return t=kG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kG(e){var t=Yse(e,"string");return vm(t)=="symbol"?t:t+""}function Yse(e,t){if(vm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(vm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Xse(e,t){if(e==null)return{};var r=Qse(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Qse(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Zse(e){return e.value}function Jse(e,t){if(Y.isValidElement(e))return Y.cloneElement(e,t);if(typeof e=="function")return Y.createElement(e,t);t.ref;var r=Xse(t,Gse);return Y.createElement(RR,r)}var IM=1,Kl=(function(e){function t(){var r;Hse(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=zse(this,t,[].concat(s)),X1(r,"lastBoundingBox",{width:-1,height:-1}),r}return Vse(t,e),Kse(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>IM||Math.abs(s.height-this.lastBoundingBox.height)>IM)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,n&&n(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Oc({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var s=this.props,i=s.layout,o=s.align,l=s.verticalAlign,d=s.margin,u=s.chartWidth,m=s.chartHeight,p,g;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&i==="vertical"){var x=this.getBBoxSnapshot();p={left:((u||0)-x.width)/2}}else p=o==="right"?{right:d&&d.right||0}:{left:d&&d.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var y=this.getBBoxSnapshot();g={top:((m||0)-y.height)/2}}else g=l==="bottom"?{bottom:d&&d.bottom||0}:{top:d&&d.top||0};return Oc(Oc({},p),g)}},{key:"render",value:function(){var n=this,s=this.props,i=s.content,o=s.width,l=s.height,d=s.wrapperStyle,u=s.payloadUniqBy,m=s.payload,p=Oc(Oc({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(d)),d);return Y.createElement("div",{className:"recharts-legend-wrapper",style:p,ref:function(x){n.wrapperNode=x}},Jse(i,Oc(Oc({},this.props),{},{payload:OG(m,u,Zse)})))}}],[{key:"getWithHeight",value:function(n,s){var i=Oc(Oc({},this.defaultProps),n.props),o=i.layout;return o==="vertical"&&it(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||s}:null}}])})(h.PureComponent);X1(Kl,"displayName","Legend");X1(Kl,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var kj,MM;function eie(){if(MM)return kj;MM=1;var e=uh(),t=MR(),r=Hs(),n=e?e.isConcatSpreadable:void 0;function s(i){return r(i)||t(i)||!!(n&&i&&i[n])}return kj=s,kj}var Pj,LM;function HR(){if(LM)return Pj;LM=1;var e=DR(),t=eie();function r(n,s,i,o,l){var d=-1,u=n.length;for(i||(i=t),l||(l=[]);++d<u;){var m=n[d];s>0&&i(m)?s>1?r(m,s-1,i,o,l):e(l,m):o||(l[l.length]=m)}return l}return Pj=r,Pj}var Dj,$M;function tie(){if($M)return Dj;$M=1;function e(t){return function(r,n,s){for(var i=-1,o=Object(r),l=s(r),d=l.length;d--;){var u=l[t?d:++i];if(n(o[u],u,o)===!1)break}return r}}return Dj=e,Dj}var Ij,FM;function rie(){if(FM)return Ij;FM=1;var e=tie(),t=e();return Ij=t,Ij}var Mj,UM;function PG(){if(UM)return Mj;UM=1;var e=rie(),t=hh();function r(n,s){return n&&e(n,s,t)}return Mj=r,Mj}var Lj,BM;function nie(){if(BM)return Lj;BM=1;var e=mh();function t(r,n){return function(s,i){if(s==null)return s;if(!e(s))return r(s,i);for(var o=s.length,l=n?o:-1,d=Object(s);(n?l--:++l<o)&&i(d[l],l,d)!==!1;);return s}}return Lj=t,Lj}var $j,GM;function KR(){if(GM)return $j;GM=1;var e=PG(),t=nie(),r=t(e);return $j=r,$j}var Fj,HM;function DG(){if(HM)return Fj;HM=1;var e=KR(),t=mh();function r(n,s){var i=-1,o=t(n)?Array(n.length):[];return e(n,function(l,d,u){o[++i]=s(l,d,u)}),o}return Fj=r,Fj}var Uj,KM;function aie(){if(KM)return Uj;KM=1;function e(t,r){var n=t.length;for(t.sort(r);n--;)t[n]=t[n].value;return t}return Uj=e,Uj}var Bj,zM;function sie(){if(zM)return Bj;zM=1;var e=fh();function t(r,n){if(r!==n){var s=r!==void 0,i=r===null,o=r===r,l=e(r),d=n!==void 0,u=n===null,m=n===n,p=e(n);if(!u&&!p&&!l&&r>n||l&&d&&m&&!u&&!p||i&&d&&m||!s&&m||!o)return 1;if(!i&&!l&&!p&&r<n||p&&s&&o&&!i&&!l||u&&s&&o||!d&&o||!m)return-1}return 0}return Bj=t,Bj}var Gj,qM;function iie(){if(qM)return Gj;qM=1;var e=sie();function t(r,n,s){for(var i=-1,o=r.criteria,l=n.criteria,d=o.length,u=s.length;++i<d;){var m=e(o[i],l[i]);if(m){if(i>=u)return m;var p=s[i];return m*(p=="desc"?-1:1)}}return r.index-n.index}return Gj=t,Gj}var Hj,WM;function oie(){if(WM)return Hj;WM=1;var e=F1(),t=B1(),r=ec(),n=DG(),s=aie(),i=V1(),o=iie(),l=gh(),d=Hs();function u(m,p,g){p.length?p=e(p,function(N){return d(N)?function(v){return t(v,N.length===1?N[0]:N)}:N}):p=[l];var x=-1;p=e(p,i(r));var y=n(m,function(N,v,S){var E=e(p,function(C){return C(N)});return{criteria:E,index:++x,value:N}});return s(y,function(N,v){return o(N,v,g)})}return Hj=u,Hj}var Kj,VM;function lie(){if(VM)return Kj;VM=1;function e(t,r,n){switch(n.length){case 0:return t.call(r);case 1:return t.call(r,n[0]);case 2:return t.call(r,n[0],n[1]);case 3:return t.call(r,n[0],n[1],n[2])}return t.apply(r,n)}return Kj=e,Kj}var zj,YM;function IG(){if(YM)return zj;YM=1;var e=lie(),t=Math.max;function r(n,s,i){return s=t(s===void 0?n.length-1:s,0),function(){for(var o=arguments,l=-1,d=t(o.length-s,0),u=Array(d);++l<d;)u[l]=o[s+l];l=-1;for(var m=Array(s+1);++l<s;)m[l]=o[l];return m[s]=i(u),e(n,this,m)}}return zj=r,zj}var qj,XM;function cie(){if(XM)return qj;XM=1;function e(t){return function(){return t}}return qj=e,qj}var Wj,QM;function MG(){if(QM)return Wj;QM=1;var e=Lf(),t=(function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}})();return Wj=t,Wj}var Vj,ZM;function die(){if(ZM)return Vj;ZM=1;var e=cie(),t=MG(),r=gh(),n=t?function(s,i){return t(s,"toString",{configurable:!0,enumerable:!1,value:e(i),writable:!0})}:r;return Vj=n,Vj}var Yj,JM;function uie(){if(JM)return Yj;JM=1;var e=800,t=16,r=Date.now;function n(s){var i=0,o=0;return function(){var l=r(),d=t-(l-o);if(o=l,d>0){if(++i>=e)return arguments[0]}else i=0;return s.apply(void 0,arguments)}}return Yj=n,Yj}var Xj,eL;function LG(){if(eL)return Xj;eL=1;var e=die(),t=uie(),r=t(e);return Xj=r,Xj}var Qj,tL;function fie(){if(tL)return Qj;tL=1;var e=gh(),t=IG(),r=LG();function n(s,i){return r(t(s,i,e),s+"")}return Qj=n,Qj}var Zj,rL;function Q1(){if(rL)return Zj;rL=1;var e=I1(),t=mh(),r=$R(),n=sl();function s(i,o,l){if(!n(l))return!1;var d=typeof o;return(d=="number"?t(l)&&r(o,l.length):d=="string"&&o in l)?e(l[o],i):!1}return Zj=s,Zj}var Jj,nL;function pie(){if(nL)return Jj;nL=1;var e=HR(),t=oie(),r=fie(),n=Q1(),s=r(function(i,o){if(i==null)return[];var l=o.length;return l>1&&n(i,o[0],o[1])?o=[]:l>2&&n(o[0],o[1],o[2])&&(o=[o[0]]),t(i,e(o,1),[])});return Jj=s,Jj}var mie=pie();const zR=Zr(mie);function gg(e){"@babel/helpers - typeof";return gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gg(e)}function DC(){return DC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},DC.apply(this,arguments)}function hie(e,t){return yie(e)||bie(e,t)||xie(e,t)||gie()}function gie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xie(e,t){if(e){if(typeof e=="string")return aL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aL(e,t)}}function aL(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function bie(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);d=!0);}catch(m){u=!0,s=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function yie(e){if(Array.isArray(e))return e}function sL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ew(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sL(Object(r),!0).forEach(function(n){vie(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vie(e,t,r){return t=Nie(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nie(e){var t=Sie(e,"string");return gg(t)=="symbol"?t:t+""}function Sie(e,t){if(gg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(gg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Eie(e){return Array.isArray(e)&&Pa(e[0])&&Pa(e[1])?e.join(" ~ "):e}var jie=function(t){var r=t.separator,n=r===void 0?" : ":r,s=t.contentStyle,i=s===void 0?{}:s,o=t.itemStyle,l=o===void 0?{}:o,d=t.labelStyle,u=d===void 0?{}:d,m=t.payload,p=t.formatter,g=t.itemSorter,x=t.wrapperClassName,y=t.labelClassName,N=t.label,v=t.labelFormatter,S=t.accessibilityLayer,E=S===void 0?!1:S,C=function(){if(m&&m.length){var H={padding:0,margin:0},B=(g?zR(m,g):m).map(function(M,G){if(M.type==="none")return null;var $=ew({display:"block",paddingTop:4,paddingBottom:4,color:M.color||"#000"},l),z=M.formatter||p||Eie,U=M.value,Z=M.name,re=U,X=Z;if(z&&re!=null&&X!=null){var F=z(U,Z,M,G,m);if(Array.isArray(F)){var te=hie(F,2);re=te[0],X=te[1]}else re=F}return Y.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(G),style:$},Pa(X)?Y.createElement("span",{className:"recharts-tooltip-item-name"},X):null,Pa(X)?Y.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,Y.createElement("span",{className:"recharts-tooltip-item-value"},re),Y.createElement("span",{className:"recharts-tooltip-item-unit"},M.unit||""))});return Y.createElement("ul",{className:"recharts-tooltip-item-list",style:H},B)}return null},_=ew({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),A=ew({margin:0},u),T=!er(N),R=T?N:"",I=cr("recharts-default-tooltip",x),k=cr("recharts-tooltip-label",y);T&&v&&m!==void 0&&m!==null&&(R=v(N,m));var w=E?{role:"status","aria-live":"assertive"}:{};return Y.createElement("div",DC({className:I,style:_},w),Y.createElement("p",{className:k,style:A},Y.isValidElement(R)?R:"".concat(R)),C())};function xg(e){"@babel/helpers - typeof";return xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xg(e)}function Sb(e,t,r){return t=wie(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wie(e){var t=Aie(e,"string");return xg(t)=="symbol"?t:t+""}function Aie(e,t){if(xg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(xg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var d0="recharts-tooltip-wrapper",_ie={visibility:"hidden"};function Cie(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return cr(d0,Sb(Sb(Sb(Sb({},"".concat(d0,"-right"),it(r)&&t&&it(t.x)&&r>=t.x),"".concat(d0,"-left"),it(r)&&t&&it(t.x)&&r<t.x),"".concat(d0,"-bottom"),it(n)&&t&&it(t.y)&&n>=t.y),"".concat(d0,"-top"),it(n)&&t&&it(t.y)&&n<t.y))}function iL(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,s=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,d=e.viewBox,u=e.viewBoxDimension;if(i&&it(i[n]))return i[n];var m=r[n]-l-s,p=r[n]+s;if(t[n])return o[n]?m:p;if(o[n]){var g=m,x=d[n];return g<x?Math.max(p,d[n]):Math.max(m,d[n])}var y=p+l,N=d[n]+u;return y>N?Math.max(m,d[n]):Math.max(p,d[n])}function Tie(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function Oie(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,s=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,d=e.viewBox,u,m,p;return o.height>0&&o.width>0&&r?(m=iL({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:d,viewBoxDimension:d.width}),p=iL({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:d,viewBoxDimension:d.height}),u=Tie({translateX:m,translateY:p,useTranslate3d:l})):u=_ie,{cssProperties:u,cssClasses:Cie({translateX:m,translateY:p,coordinate:r})}}function Nm(e){"@babel/helpers - typeof";return Nm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nm(e)}function oL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function lL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oL(Object(r),!0).forEach(function(n){MC(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Rie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,FG(n.key),n)}}function Pie(e,t,r){return t&&kie(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Die(e,t,r){return t=Jy(t),Iie(e,$G()?Reflect.construct(t,r||[],Jy(e).constructor):t.apply(e,r))}function Iie(e,t){if(t&&(Nm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mie(e)}function Mie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $G(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($G=function(){return!!e})()}function Jy(e){return Jy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Jy(e)}function Lie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&IC(e,t)}function IC(e,t){return IC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},IC(e,t)}function MC(e,t,r){return t=FG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FG(e){var t=$ie(e,"string");return Nm(t)=="symbol"?t:t+""}function $ie(e,t){if(Nm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Nm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var cL=1,Fie=(function(e){function t(){var r;Rie(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=Die(this,t,[].concat(s)),MC(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),MC(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,d,u,m;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(d=r.props.coordinate)===null||d===void 0?void 0:d.x)!==null&&l!==void 0?l:0,y:(u=(m=r.props.coordinate)===null||m===void 0?void 0:m.y)!==null&&u!==void 0?u:0}})}}),r}return Lie(t,e),Pie(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>cL||Math.abs(n.height-this.state.lastBoundingBox.height)>cL)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,d=s.animationEasing,u=s.children,m=s.coordinate,p=s.hasPayload,g=s.isAnimationActive,x=s.offset,y=s.position,N=s.reverseDirection,v=s.useTranslate3d,S=s.viewBox,E=s.wrapperStyle,C=Oie({allowEscapeViewBox:o,coordinate:m,offsetTopLeft:x,position:y,reverseDirection:N,tooltipBox:this.state.lastBoundingBox,useTranslate3d:v,viewBox:S}),_=C.cssClasses,A=C.cssProperties,T=lL(lL({transition:g&&i?"transform ".concat(l,"ms ").concat(d):void 0},A),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&p?"visible":"hidden",position:"absolute",top:0,left:0},E);return Y.createElement("div",{tabIndex:-1,className:_,style:T,ref:function(I){n.wrapperNode=I}},u)}}])})(h.PureComponent),Uie=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Jo={isSsr:Uie()};function Sm(e){"@babel/helpers - typeof";return Sm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sm(e)}function dL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function uL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dL(Object(r),!0).forEach(function(n){qR(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Bie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,BG(n.key),n)}}function Hie(e,t,r){return t&&Gie(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Kie(e,t,r){return t=ev(t),zie(e,UG()?Reflect.construct(t,r||[],ev(e).constructor):t.apply(e,r))}function zie(e,t){if(t&&(Sm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qie(e)}function qie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UG=function(){return!!e})()}function ev(e){return ev=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ev(e)}function Wie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&LC(e,t)}function LC(e,t){return LC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},LC(e,t)}function qR(e,t,r){return t=BG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BG(e){var t=Vie(e,"string");return Sm(t)=="symbol"?t:t+""}function Vie(e,t){if(Sm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Sm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Yie(e){return e.dataKey}function Xie(e,t){return Y.isValidElement(e)?Y.cloneElement(e,t):typeof e=="function"?Y.createElement(e,t):Y.createElement(jie,t)}var ln=(function(e){function t(){return Bie(this,t),Kie(this,t,arguments)}return Wie(t,e),Hie(t,[{key:"render",value:function(){var n=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,d=s.animationEasing,u=s.content,m=s.coordinate,p=s.filterNull,g=s.isAnimationActive,x=s.offset,y=s.payload,N=s.payloadUniqBy,v=s.position,S=s.reverseDirection,E=s.useTranslate3d,C=s.viewBox,_=s.wrapperStyle,A=y??[];p&&A.length&&(A=OG(y.filter(function(R){return R.value!=null&&(R.hide!==!0||n.props.includeHidden)}),N,Yie));var T=A.length>0;return Y.createElement(Fie,{allowEscapeViewBox:o,animationDuration:l,animationEasing:d,isAnimationActive:g,active:i,coordinate:m,hasPayload:T,offset:x,position:v,reverseDirection:S,useTranslate3d:E,viewBox:C,wrapperStyle:_},Xie(u,uL(uL({},this.props),{},{payload:A})))}}])})(h.PureComponent);qR(ln,"displayName","Tooltip");qR(ln,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Jo.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var tw,fL;function Qie(){if(fL)return tw;fL=1;var e=nl(),t=function(){return e.Date.now()};return tw=t,tw}var rw,pL;function Zie(){if(pL)return rw;pL=1;var e=/\s/;function t(r){for(var n=r.length;n--&&e.test(r.charAt(n)););return n}return rw=t,rw}var nw,mL;function Jie(){if(mL)return nw;mL=1;var e=Zie(),t=/^\s+/;function r(n){return n&&n.slice(0,e(n)+1).replace(t,"")}return nw=r,nw}var aw,hL;function GG(){if(hL)return aw;hL=1;var e=Jie(),t=sl(),r=fh(),n=NaN,s=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function d(u){if(typeof u=="number")return u;if(r(u))return n;if(t(u)){var m=typeof u.valueOf=="function"?u.valueOf():u;u=t(m)?m+"":m}if(typeof u!="string")return u===0?u:+u;u=e(u);var p=i.test(u);return p||o.test(u)?l(u.slice(2),p?2:8):s.test(u)?n:+u}return aw=d,aw}var sw,gL;function eoe(){if(gL)return sw;gL=1;var e=sl(),t=Qie(),r=GG(),n="Expected a function",s=Math.max,i=Math.min;function o(l,d,u){var m,p,g,x,y,N,v=0,S=!1,E=!1,C=!0;if(typeof l!="function")throw new TypeError(n);d=r(d)||0,e(u)&&(S=!!u.leading,E="maxWait"in u,g=E?s(r(u.maxWait)||0,d):g,C="trailing"in u?!!u.trailing:C);function _(B){var M=m,G=p;return m=p=void 0,v=B,x=l.apply(G,M),x}function A(B){return v=B,y=setTimeout(I,d),S?_(B):x}function T(B){var M=B-N,G=B-v,$=d-M;return E?i($,g-G):$}function R(B){var M=B-N,G=B-v;return N===void 0||M>=d||M<0||E&&G>=g}function I(){var B=t();if(R(B))return k(B);y=setTimeout(I,T(B))}function k(B){return y=void 0,C&&m?_(B):(m=p=void 0,x)}function w(){y!==void 0&&clearTimeout(y),v=0,m=N=p=y=void 0}function L(){return y===void 0?x:k(t())}function H(){var B=t(),M=R(B);if(m=arguments,p=this,N=B,M){if(y===void 0)return A(N);if(E)return clearTimeout(y),y=setTimeout(I,d),_(N)}return y===void 0&&(y=setTimeout(I,d)),x}return H.cancel=w,H.flush=L,H}return sw=o,sw}var iw,xL;function toe(){if(xL)return iw;xL=1;var e=eoe(),t=sl(),r="Expected a function";function n(s,i,o){var l=!0,d=!0;if(typeof s!="function")throw new TypeError(r);return t(o)&&(l="leading"in o?!!o.leading:l,d="trailing"in o?!!o.trailing:d),e(s,i,{leading:l,maxWait:i,trailing:d})}return iw=n,iw}var roe=toe();const HG=Zr(roe);function bg(e){"@babel/helpers - typeof";return bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bg(e)}function bL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Eb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bL(Object(r),!0).forEach(function(n){noe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function noe(e,t,r){return t=aoe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aoe(e){var t=soe(e,"string");return bg(t)=="symbol"?t:t+""}function soe(e,t){if(bg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(bg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ioe(e,t){return doe(e)||coe(e,t)||loe(e,t)||ooe()}function ooe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function loe(e,t){if(e){if(typeof e=="string")return yL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yL(e,t)}}function yL(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function coe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);d=!0);}catch(m){u=!0,s=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function doe(e){if(Array.isArray(e))return e}var Ta=h.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,s=n===void 0?{width:-1,height:-1}:n,i=e.width,o=i===void 0?"100%":i,l=e.height,d=l===void 0?"100%":l,u=e.minWidth,m=u===void 0?0:u,p=e.minHeight,g=e.maxHeight,x=e.children,y=e.debounce,N=y===void 0?0:y,v=e.id,S=e.className,E=e.onResize,C=e.style,_=C===void 0?{}:C,A=h.useRef(null),T=h.useRef();T.current=E,h.useImperativeHandle(t,function(){return Object.defineProperty(A.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),A.current},configurable:!0})});var R=h.useState({containerWidth:s.width,containerHeight:s.height}),I=ioe(R,2),k=I[0],w=I[1],L=h.useCallback(function(B,M){w(function(G){var $=Math.round(B),z=Math.round(M);return G.containerWidth===$&&G.containerHeight===z?G:{containerWidth:$,containerHeight:z}})},[]);h.useEffect(function(){var B=function(Z){var re,X=Z[0].contentRect,F=X.width,te=X.height;L(F,te),(re=T.current)===null||re===void 0||re.call(T,F,te)};N>0&&(B=HG(B,N,{trailing:!0,leading:!1}));var M=new ResizeObserver(B),G=A.current.getBoundingClientRect(),$=G.width,z=G.height;return L($,z),M.observe(A.current),function(){M.disconnect()}},[L,N]);var H=h.useMemo(function(){var B=k.containerWidth,M=k.containerHeight;if(B<0||M<0)return null;Zo(cf(o)||cf(d),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,d),Zo(!r||r>0,"The aspect(%s) must be greater than zero.",r);var G=cf(o)?B:o,$=cf(d)?M:d;r&&r>0&&(G?$=G/r:$&&(G=$*r),g&&$>g&&($=g)),Zo(G>0||$>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,G,$,o,d,m,p,r);var z=!Array.isArray(x)&&Vc(x.type).endsWith("Chart");return Y.Children.map(x,function(U){return Y.isValidElement(U)?h.cloneElement(U,Eb({width:G,height:$},z?{style:Eb({height:"100%",width:"100%",maxHeight:$,maxWidth:G},U.props.style)}:{})):U})},[r,x,d,g,p,m,k,o]);return Y.createElement("div",{id:v?"".concat(v):void 0,className:cr("recharts-responsive-container",S),style:Eb(Eb({},_),{},{width:o,height:d,minWidth:m,minHeight:p,maxHeight:g}),ref:A},H)}),yo=function(t){return null};yo.displayName="Cell";function yg(e){"@babel/helpers - typeof";return yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yg(e)}function vL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function $C(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vL(Object(r),!0).forEach(function(n){uoe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uoe(e,t,r){return t=foe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function foe(e){var t=poe(e,"string");return yg(t)=="symbol"?t:t+""}function poe(e,t){if(yg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(yg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Np={widthCache:{},cacheCount:0},moe=2e3,hoe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},NL="recharts_measurement_span";function goe(e){var t=$C({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var tm=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Jo.isSsr)return{width:0,height:0};var n=goe(r),s=JSON.stringify({text:t,copyStyle:n});if(Np.widthCache[s])return Np.widthCache[s];try{var i=document.getElementById(NL);i||(i=document.createElement("span"),i.setAttribute("id",NL),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=$C($C({},hoe),n);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),d={width:l.width,height:l.height};return Np.widthCache[s]=d,++Np.cacheCount>moe&&(Np.cacheCount=0,Np.widthCache={}),d}catch{return{width:0,height:0}}},xoe=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function vg(e){"@babel/helpers - typeof";return vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vg(e)}function tv(e,t){return Noe(e)||voe(e,t)||yoe(e,t)||boe()}function boe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yoe(e,t){if(e){if(typeof e=="string")return SL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return SL(e,t)}}function SL(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function voe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);d=!0);}catch(m){u=!0,s=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Noe(e){if(Array.isArray(e))return e}function Soe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function EL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,joe(n.key),n)}}function Eoe(e,t,r){return t&&EL(e.prototype,t),r&&EL(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function joe(e){var t=woe(e,"string");return vg(t)=="symbol"?t:t+""}function woe(e,t){if(vg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(vg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var jL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,wL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Aoe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,_oe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,KG={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Coe=Object.keys(KG),Up="NaN";function Toe(e,t){return e*KG[t]}var jb=(function(){function e(t,r){Soe(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!Aoe.test(r)&&(this.num=NaN,this.unit=""),Coe.includes(r)&&(this.num=Toe(t,r),this.unit="px")}return Eoe(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,s=(n=_oe.exec(r))!==null&&n!==void 0?n:[],i=tv(s,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])})();function zG(e){if(e.includes(Up))return Up;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=jL.exec(t))!==null&&r!==void 0?r:[],s=tv(n,4),i=s[1],o=s[2],l=s[3],d=jb.parse(i??""),u=jb.parse(l??""),m=o==="*"?d.multiply(u):d.divide(u);if(m.isNaN())return Up;t=t.replace(jL,m.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var p,g=(p=wL.exec(t))!==null&&p!==void 0?p:[],x=tv(g,4),y=x[1],N=x[2],v=x[3],S=jb.parse(y??""),E=jb.parse(v??""),C=N==="+"?S.add(E):S.subtract(E);if(C.isNaN())return Up;t=t.replace(wL,C.toString())}return t}var AL=/\(([^()]*)\)/;function Ooe(e){for(var t=e;t.includes("(");){var r=AL.exec(t),n=tv(r,2),s=n[1];t=t.replace(AL,zG(s))}return t}function Roe(e){var t=e.replace(/\s+/g,"");return t=Ooe(t),t=zG(t),t}function koe(e){try{return Roe(e)}catch{return Up}}function ow(e){var t=koe(e.slice(5,-1));return t===Up?"":t}var Poe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Doe=["dx","dy","angle","className","breakAll"];function FC(){return FC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},FC.apply(this,arguments)}function _L(e,t){if(e==null)return{};var r=Ioe(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ioe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function CL(e,t){return Foe(e)||$oe(e,t)||Loe(e,t)||Moe()}function Moe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Loe(e,t){if(e){if(typeof e=="string")return TL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return TL(e,t)}}function TL(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $oe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);d=!0);}catch(m){u=!0,s=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Foe(e){if(Array.isArray(e))return e}var qG=/[ \f\n\r\t\v\u2028\u2029]+/,WG=function(t){var r=t.children,n=t.breakAll,s=t.style;try{var i=[];er(r)||(n?i=r.toString().split(""):i=r.toString().split(qG));var o=i.map(function(d){return{word:d,width:tm(d,s).width}}),l=n?0:tm("",s).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},Uoe=function(t,r,n,s,i){var o=t.maxLines,l=t.children,d=t.style,u=t.breakAll,m=it(o),p=l,g=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return G.reduce(function($,z){var U=z.word,Z=z.width,re=$[$.length-1];if(re&&(s==null||i||re.width+Z+n<Number(s)))re.words.push(U),re.width+=Z+n;else{var X={words:[U],width:Z};$.push(X)}return $},[])},x=g(r),y=function(G){return G.reduce(function($,z){return $.width>z.width?$:z})};if(!m)return x;for(var N="",v=function(G){var $=p.slice(0,G),z=WG({breakAll:u,style:d,children:$+N}).wordsWithComputedWidth,U=g(z),Z=U.length>o||y(U).width>Number(s);return[Z,U]},S=0,E=p.length-1,C=0,_;S<=E&&C<=p.length-1;){var A=Math.floor((S+E)/2),T=A-1,R=v(T),I=CL(R,2),k=I[0],w=I[1],L=v(A),H=CL(L,1),B=H[0];if(!k&&!B&&(S=A+1),k&&B&&(E=A-1),!k&&B){_=w;break}C++}return _||x},OL=function(t){var r=er(t)?[]:t.toString().split(qG);return[{words:r}]},Boe=function(t){var r=t.width,n=t.scaleToFit,s=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((r||n)&&!Jo.isSsr){var d,u,m=WG({breakAll:o,children:s,style:i});if(m){var p=m.wordsWithComputedWidth,g=m.spaceWidth;d=p,u=g}else return OL(s);return Uoe({breakAll:o,children:s,maxLines:l,style:i},d,u,r,n)}return OL(s)},RL="#808080",Af=function(t){var r=t.x,n=r===void 0?0:r,s=t.y,i=s===void 0?0:s,o=t.lineHeight,l=o===void 0?"1em":o,d=t.capHeight,u=d===void 0?"0.71em":d,m=t.scaleToFit,p=m===void 0?!1:m,g=t.textAnchor,x=g===void 0?"start":g,y=t.verticalAnchor,N=y===void 0?"end":y,v=t.fill,S=v===void 0?RL:v,E=_L(t,Poe),C=h.useMemo(function(){return Boe({breakAll:E.breakAll,children:E.children,maxLines:E.maxLines,scaleToFit:p,style:E.style,width:E.width})},[E.breakAll,E.children,E.maxLines,p,E.style,E.width]),_=E.dx,A=E.dy,T=E.angle,R=E.className,I=E.breakAll,k=_L(E,Doe);if(!Pa(n)||!Pa(i))return null;var w=n+(it(_)?_:0),L=i+(it(A)?A:0),H;switch(N){case"start":H=ow("calc(".concat(u,")"));break;case"middle":H=ow("calc(".concat((C.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:H=ow("calc(".concat(C.length-1," * -").concat(l,")"));break}var B=[];if(p){var M=C[0].width,G=E.width;B.push("scale(".concat((it(G)?G/M:1)/M,")"))}return T&&B.push("rotate(".concat(T,", ").concat(w,", ").concat(L,")")),B.length&&(k.transform=B.join(" ")),Y.createElement("text",FC({},Pt(k,!0),{x:w,y:L,className:cr("recharts-text",R),textAnchor:x,fill:S.includes("url")?RL:S}),C.map(function($,z){var U=$.words.join(I?"":" ");return Y.createElement("tspan",{x:w,dy:z===0?H:l,key:"".concat(U,"-").concat(z)},U)}))};function nu(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Goe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function WR(e){let t,r,n;e.length!==2?(t=nu,r=(l,d)=>nu(e(l),d),n=(l,d)=>e(l)-d):(t=e===nu||e===Goe?e:Hoe,r=e,n=e);function s(l,d,u=0,m=l.length){if(u<m){if(t(d,d)!==0)return m;do{const p=u+m>>>1;r(l[p],d)<0?u=p+1:m=p}while(u<m)}return u}function i(l,d,u=0,m=l.length){if(u<m){if(t(d,d)!==0)return m;do{const p=u+m>>>1;r(l[p],d)<=0?u=p+1:m=p}while(u<m)}return u}function o(l,d,u=0,m=l.length){const p=s(l,d,u,m-1);return p>u&&n(l[p-1],d)>-n(l[p],d)?p-1:p}return{left:s,center:o,right:i}}function Hoe(){return 0}function VG(e){return e===null?NaN:+e}function*Koe(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const zoe=WR(nu),lx=zoe.right;WR(VG).center;class Em{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const r=this._partials;let n=0;for(let s=0;s<this._n&&s<32;s++){const i=r[s],o=t+i,l=Math.abs(t)<Math.abs(i)?t-(o-i):i-(o-t);l&&(r[n++]=l),t=o}return r[n]=t,this._n=n+1,this}valueOf(){const t=this._partials;let r=this._n,n,s,i,o=0;if(r>0){for(o=t[--r];r>0&&(n=o,s=t[--r],o=n+s,i=s-(o-n),!i););r>0&&(i<0&&t[r-1]<0||i>0&&t[r-1]>0)&&(s=i*2,n=o+s,s==n-o&&(o=n))}return o}}class kL extends Map{constructor(t,r=Voe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(PL(this,t))}has(t){return super.has(PL(this,t))}set(t,r){return super.set(qoe(this,t),r)}delete(t){return super.delete(Woe(this,t))}}function PL({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function qoe({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function Woe({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function Voe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Yoe(e=nu){if(e===nu)return YG;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function YG(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Xoe=Math.sqrt(50),Qoe=Math.sqrt(10),Zoe=Math.sqrt(2);function rv(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),i=n/Math.pow(10,s),o=i>=Xoe?10:i>=Qoe?5:i>=Zoe?2:1;let l,d,u;return s<0?(u=Math.pow(10,-s)/o,l=Math.round(e*u),d=Math.round(t*u),l/u<e&&++l,d/u>t&&--d,u=-u):(u=Math.pow(10,s)*o,l=Math.round(e/u),d=Math.round(t/u),l*u<e&&++l,d*u>t&&--d),d<l&&.5<=r&&r<2?rv(e,t,r*2):[l,d,u]}function UC(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,i,o]=n?rv(t,e,r):rv(e,t,r);if(!(i>=s))return[];const l=i-s+1,d=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)d[u]=(i-u)/-o;else for(let u=0;u<l;++u)d[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)d[u]=(s+u)/-o;else for(let u=0;u<l;++u)d[u]=(s+u)*o;return d}function BC(e,t,r){return t=+t,e=+e,r=+r,rv(e,t,r)[2]}function GC(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?BC(t,e,r):BC(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function DL(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function IL(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function XG(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?YG:Yoe(s);n>r;){if(n-r>600){const d=n-r+1,u=t-r+1,m=Math.log(d),p=.5*Math.exp(2*m/3),g=.5*Math.sqrt(m*p*(d-p)/d)*(u-d/2<0?-1:1),x=Math.max(r,Math.floor(t-u*p/d+g)),y=Math.min(n,Math.floor(t+(d-u)*p/d+g));XG(e,t,x,y,s)}const i=e[t];let o=r,l=n;for(u0(e,r,t),s(e[n],i)>0&&u0(e,r,n);o<l;){for(u0(e,o,l),++o,--l;s(e[o],i)<0;)++o;for(;s(e[l],i)>0;)--l}s(e[r],i)===0?u0(e,r,l):(++l,u0(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function u0(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function Joe(e,t,r){if(e=Float64Array.from(Koe(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return IL(e);if(t>=1)return DL(e);var n,s=(n-1)*t,i=Math.floor(s),o=DL(XG(e,i).subarray(0,i+1)),l=IL(e.subarray(i+1));return o+(l-o)*(s-i)}}function ele(e,t,r=VG){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,i=Math.floor(s),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(s-i)}}function*tle(e){for(const t of e)yield*t}function rle(e){return Array.from(tle(e))}function nle(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++n<s;)i[n]=e+n*r;return i}function Ao(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function cd(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const HC=Symbol("implicit");function VR(){var e=new kL,t=[],r=[],n=HC;function s(i){let o=e.get(i);if(o===void 0){if(n!==HC)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new kL;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return VR(t,r).unknown(n)},Ao.apply(s,arguments),s}function Ng(){var e=VR().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,i,o,l=!1,d=0,u=0,m=.5;delete e.unknown;function p(){var g=t().length,x=s<n,y=x?s:n,N=x?n:s;i=(N-y)/Math.max(1,g-d+u*2),l&&(i=Math.floor(i)),y+=(N-y-i*(g-d))*m,o=i*(1-d),l&&(y=Math.round(y),o=Math.round(o));var v=nle(g).map(function(S){return y+i*S});return r(x?v.reverse():v)}return e.domain=function(g){return arguments.length?(t(g),p()):t()},e.range=function(g){return arguments.length?([n,s]=g,n=+n,s=+s,p()):[n,s]},e.rangeRound=function(g){return[n,s]=g,n=+n,s=+s,l=!0,p()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(g){return arguments.length?(l=!!g,p()):l},e.padding=function(g){return arguments.length?(d=Math.min(1,u=+g),p()):d},e.paddingInner=function(g){return arguments.length?(d=Math.min(1,g),p()):d},e.paddingOuter=function(g){return arguments.length?(u=+g,p()):u},e.align=function(g){return arguments.length?(m=Math.max(0,Math.min(1,g)),p()):m},e.copy=function(){return Ng(t(),[n,s]).round(l).paddingInner(d).paddingOuter(u).align(m)},Ao.apply(p(),arguments)}function QG(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return QG(t())},e}function eg(){return QG(Ng.apply(null,arguments).paddingInner(1))}function YR(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function ZG(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function cx(){}var Sg=.7,nv=1/Sg,rm="\\s*([+-]?\\d+)\\s*",Eg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",zl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ale=/^#([0-9a-f]{3,8})$/,sle=new RegExp(`^rgb\\(${rm},${rm},${rm}\\)$`),ile=new RegExp(`^rgb\\(${zl},${zl},${zl}\\)$`),ole=new RegExp(`^rgba\\(${rm},${rm},${rm},${Eg}\\)$`),lle=new RegExp(`^rgba\\(${zl},${zl},${zl},${Eg}\\)$`),cle=new RegExp(`^hsl\\(${Eg},${zl},${zl}\\)$`),dle=new RegExp(`^hsla\\(${Eg},${zl},${zl},${Eg}\\)$`),ML={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};YR(cx,_f,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:LL,formatHex:LL,formatHex8:ule,formatHsl:fle,formatRgb:$L,toString:$L});function LL(){return this.rgb().formatHex()}function ule(){return this.rgb().formatHex8()}function fle(){return JG(this).formatHsl()}function $L(){return this.rgb().formatRgb()}function _f(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=ale.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?FL(t):r===3?new oi(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?wb(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?wb(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=sle.exec(e))?new oi(t[1],t[2],t[3],1):(t=ile.exec(e))?new oi(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ole.exec(e))?wb(t[1],t[2],t[3],t[4]):(t=lle.exec(e))?wb(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=cle.exec(e))?GL(t[1],t[2]/100,t[3]/100,1):(t=dle.exec(e))?GL(t[1],t[2]/100,t[3]/100,t[4]):ML.hasOwnProperty(e)?FL(ML[e]):e==="transparent"?new oi(NaN,NaN,NaN,0):null}function FL(e){return new oi(e>>16&255,e>>8&255,e&255,1)}function wb(e,t,r,n){return n<=0&&(e=t=r=NaN),new oi(e,t,r,n)}function ple(e){return e instanceof cx||(e=_f(e)),e?(e=e.rgb(),new oi(e.r,e.g,e.b,e.opacity)):new oi}function av(e,t,r,n){return arguments.length===1?ple(e):new oi(e,t,r,n??1)}function oi(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}YR(oi,av,ZG(cx,{brighter(e){return e=e==null?nv:Math.pow(nv,e),new oi(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Sg:Math.pow(Sg,e),new oi(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new oi(bf(this.r),bf(this.g),bf(this.b),sv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:UL,formatHex:UL,formatHex8:mle,formatRgb:BL,toString:BL}));function UL(){return`#${df(this.r)}${df(this.g)}${df(this.b)}`}function mle(){return`#${df(this.r)}${df(this.g)}${df(this.b)}${df((isNaN(this.opacity)?1:this.opacity)*255)}`}function BL(){const e=sv(this.opacity);return`${e===1?"rgb(":"rgba("}${bf(this.r)}, ${bf(this.g)}, ${bf(this.b)}${e===1?")":`, ${e})`}`}function sv(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function bf(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function df(e){return e=bf(e),(e<16?"0":"")+e.toString(16)}function GL(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Wo(e,t,r,n)}function JG(e){if(e instanceof Wo)return new Wo(e.h,e.s,e.l,e.opacity);if(e instanceof cx||(e=_f(e)),!e)return new Wo;if(e instanceof Wo)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,l=i-s,d=(i+s)/2;return l?(t===i?o=(r-n)/l+(r<n)*6:r===i?o=(n-t)/l+2:o=(t-r)/l+4,l/=d<.5?i+s:2-i-s,o*=60):l=d>0&&d<1?0:o,new Wo(o,l,d,e.opacity)}function hle(e,t,r,n){return arguments.length===1?JG(e):new Wo(e,t,r,n??1)}function Wo(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}YR(Wo,hle,ZG(cx,{brighter(e){return e=e==null?nv:Math.pow(nv,e),new Wo(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Sg:Math.pow(Sg,e),new Wo(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new oi(lw(e>=240?e-240:e+120,s,n),lw(e,s,n),lw(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new Wo(HL(this.h),Ab(this.s),Ab(this.l),sv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=sv(this.opacity);return`${e===1?"hsl(":"hsla("}${HL(this.h)}, ${Ab(this.s)*100}%, ${Ab(this.l)*100}%${e===1?")":`, ${e})`}`}}));function HL(e){return e=(e||0)%360,e<0?e+360:e}function Ab(e){return Math.max(0,Math.min(1,e||0))}function lw(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}function gle(e,t,r,n,s){var i=e*e,o=i*e;return((1-3*e+3*i-o)*t+(4-6*i+3*o)*r+(1+3*e+3*i-3*o)*n+o*s)/6}function xle(e){var t=e.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),s=e[n],i=e[n+1],o=n>0?e[n-1]:2*s-i,l=n<t-1?e[n+2]:2*i-s;return gle((r-n/t)*t,o,s,i,l)}}const XR=e=>()=>e;function ble(e,t){return function(r){return e+r*t}}function yle(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function vle(e){return(e=+e)==1?e9:function(t,r){return r-t?yle(t,r,e):XR(isNaN(t)?r:t)}}function e9(e,t){var r=t-e;return r?ble(e,r):XR(isNaN(e)?t:e)}const iv=(function e(t){var r=vle(t);function n(s,i){var o=r((s=av(s)).r,(i=av(i)).r),l=r(s.g,i.g),d=r(s.b,i.b),u=e9(s.opacity,i.opacity);return function(m){return s.r=o(m),s.g=l(m),s.b=d(m),s.opacity=u(m),s+""}}return n.gamma=e,n})(1);function Nle(e){return function(t){var r=t.length,n=new Array(r),s=new Array(r),i=new Array(r),o,l;for(o=0;o<r;++o)l=av(t[o]),n[o]=l.r||0,s[o]=l.g||0,i[o]=l.b||0;return n=e(n),s=e(s),i=e(i),l.opacity=1,function(d){return l.r=n(d),l.g=s(d),l.b=i(d),l+""}}}var Sle=Nle(xle);function Ele(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(i){for(s=0;s<r;++s)n[s]=e[s]*(1-i)+t[s]*i;return n}}function jle(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function wle(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)s[o]=xh(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<n;++o)i[o]=s[o](l);return i}}function Ale(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function zo(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function _le(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=xh(e[s],t[s]):n[s]=t[s];return function(i){for(s in r)n[s]=r[s](i);return n}}var KC=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,cw=new RegExp(KC.source,"g");function Cle(e){return function(){return e}}function Tle(e){return function(t){return e(t)+""}}function t9(e,t){var r=KC.lastIndex=cw.lastIndex=0,n,s,i,o=-1,l=[],d=[];for(e=e+"",t=t+"";(n=KC.exec(e))&&(s=cw.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,d.push({i:o,x:zo(n,s)})),r=cw.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?d[0]?Tle(d[0].x):Cle(t):(t=d.length,function(u){for(var m=0,p;m<t;++m)l[(p=d[m]).i]=p.x(u);return l.join("")})}function xh(e,t){var r=typeof t,n;return t==null||r==="boolean"?XR(t):(r==="number"?zo:r==="string"?(n=_f(t))?(t=n,iv):t9:t instanceof _f?iv:t instanceof Date?Ale:jle(t)?Ele:Array.isArray(t)?wle:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?_le:zo)(e,t)}function QR(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}var KL=180/Math.PI,zC={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function r9(e,t,r,n,s,i){var o,l,d;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(d=e*r+t*n)&&(r-=e*d,n-=t*d),(l=Math.sqrt(r*r+n*n))&&(r/=l,n/=l,d/=l),e*n<t*r&&(e=-e,t=-t,d=-d,o=-o),{translateX:s,translateY:i,rotate:Math.atan2(t,e)*KL,skewX:Math.atan(d)*KL,scaleX:o,scaleY:l}}var _b;function Ole(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?zC:r9(t.a,t.b,t.c,t.d,t.e,t.f)}function Rle(e){return e==null||(_b||(_b=document.createElementNS("http://www.w3.org/2000/svg","g")),_b.setAttribute("transform",e),!(e=_b.transform.baseVal.consolidate()))?zC:(e=e.matrix,r9(e.a,e.b,e.c,e.d,e.e,e.f))}function n9(e,t,r,n){function s(u){return u.length?u.pop()+" ":""}function i(u,m,p,g,x,y){if(u!==p||m!==g){var N=x.push("translate(",null,t,null,r);y.push({i:N-4,x:zo(u,p)},{i:N-2,x:zo(m,g)})}else(p||g)&&x.push("translate("+p+t+g+r)}function o(u,m,p,g){u!==m?(u-m>180?m+=360:m-u>180&&(u+=360),g.push({i:p.push(s(p)+"rotate(",null,n)-2,x:zo(u,m)})):m&&p.push(s(p)+"rotate("+m+n)}function l(u,m,p,g){u!==m?g.push({i:p.push(s(p)+"skewX(",null,n)-2,x:zo(u,m)}):m&&p.push(s(p)+"skewX("+m+n)}function d(u,m,p,g,x,y){if(u!==p||m!==g){var N=x.push(s(x)+"scale(",null,",",null,")");y.push({i:N-4,x:zo(u,p)},{i:N-2,x:zo(m,g)})}else(p!==1||g!==1)&&x.push(s(x)+"scale("+p+","+g+")")}return function(u,m){var p=[],g=[];return u=e(u),m=e(m),i(u.translateX,u.translateY,m.translateX,m.translateY,p,g),o(u.rotate,m.rotate,p,g),l(u.skewX,m.skewX,p,g),d(u.scaleX,u.scaleY,m.scaleX,m.scaleY,p,g),u=m=null,function(x){for(var y=-1,N=g.length,v;++y<N;)p[(v=g[y]).i]=v.x(x);return p.join("")}}}var kle=n9(Ole,"px, ","px)","deg)"),Ple=n9(Rle,", ",")",")"),Dle=1e-12;function zL(e){return((e=Math.exp(e))+1/e)/2}function Ile(e){return((e=Math.exp(e))-1/e)/2}function Mle(e){return((e=Math.exp(2*e))-1)/(e+1)}const Lle=(function e(t,r,n){function s(i,o){var l=i[0],d=i[1],u=i[2],m=o[0],p=o[1],g=o[2],x=m-l,y=p-d,N=x*x+y*y,v,S;if(N<Dle)S=Math.log(g/u)/t,v=function(R){return[l+R*x,d+R*y,u*Math.exp(t*R*S)]};else{var E=Math.sqrt(N),C=(g*g-u*u+n*N)/(2*u*r*E),_=(g*g-u*u-n*N)/(2*g*r*E),A=Math.log(Math.sqrt(C*C+1)-C),T=Math.log(Math.sqrt(_*_+1)-_);S=(T-A)/t,v=function(R){var I=R*S,k=zL(A),w=u/(r*E)*(k*Mle(t*I+A)-Ile(A));return[l+w*x,d+w*y,u*k/zL(t*I+A)]}}return v.duration=S*1e3*t/Math.SQRT2,v}return s.rho=function(i){var o=Math.max(.001,+i),l=o*o,d=l*l;return e(o,l,d)},s})(Math.SQRT2,2,4);function $le(e,t){t===void 0&&(t=e,e=xh);for(var r=0,n=t.length-1,s=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(s,s=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[l](o-l)}}function Fle(e){return function(){return e}}function ov(e){return+e}var qL=[0,1];function $s(e){return e}function qC(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:Fle(isNaN(t)?NaN:.5)}function Ule(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function Ble(e,t,r){var n=e[0],s=e[1],i=t[0],o=t[1];return s<n?(n=qC(s,n),i=r(o,i)):(n=qC(n,s),i=r(i,o)),function(l){return i(n(l))}}function Gle(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)s[o]=qC(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var d=lx(e,l,1,n)-1;return i[d](s[d](l))}}function dx(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Z1(){var e=qL,t=qL,r=xh,n,s,i,o=$s,l,d,u;function m(){var g=Math.min(e.length,t.length);return o!==$s&&(o=Ule(e[0],e[g-1])),l=g>2?Gle:Ble,d=u=null,p}function p(g){return g==null||isNaN(g=+g)?i:(d||(d=l(e.map(n),t,r)))(n(o(g)))}return p.invert=function(g){return o(s((u||(u=l(t,e.map(n),zo)))(g)))},p.domain=function(g){return arguments.length?(e=Array.from(g,ov),m()):e.slice()},p.range=function(g){return arguments.length?(t=Array.from(g),m()):t.slice()},p.rangeRound=function(g){return t=Array.from(g),r=QR,m()},p.clamp=function(g){return arguments.length?(o=g?!0:$s,m()):o!==$s},p.interpolate=function(g){return arguments.length?(r=g,m()):r},p.unknown=function(g){return arguments.length?(i=g,p):i},function(g,x){return n=g,s=x,m()}}function ZR(){return Z1()($s,$s)}function Hle(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function lv(e,t){if(!isFinite(e)||e===0)return null;var r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function jm(e){return e=lv(Math.abs(e)),e?e[1]:NaN}function Kle(e,t){return function(r,n){for(var s=r.length,i=[],o=0,l=e[0],d=0;s>0&&l>0&&(d+l+1>n&&(l=Math.max(1,n-d)),i.push(r.substring(s-=l,s+l)),!((d+=l+1)>n));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function zle(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var qle=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function jg(e){if(!(t=qle.exec(e)))throw new Error("invalid format: "+e);var t;return new JR({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}jg.prototype=JR.prototype;function JR(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}JR.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Wle(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var cv;function Vle(e,t){var r=lv(e,t);if(!r)return cv=void 0,e.toPrecision(t);var n=r[0],s=r[1],i=s-(cv=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+lv(e,Math.max(0,t+i-1))[0]}function WL(e,t){var r=lv(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const VL={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Hle,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>WL(e*100,t),r:WL,s:Vle,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function YL(e){return e}var XL=Array.prototype.map,QL=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Yle(e){var t=e.grouping===void 0||e.thousands===void 0?YL:Kle(XL.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?YL:zle(XL.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function u(p,g){p=jg(p);var x=p.fill,y=p.align,N=p.sign,v=p.symbol,S=p.zero,E=p.width,C=p.comma,_=p.precision,A=p.trim,T=p.type;T==="n"?(C=!0,T="g"):VL[T]||(_===void 0&&(_=12),A=!0,T="g"),(S||x==="0"&&y==="=")&&(S=!0,x="0",y="=");var R=(g&&g.prefix!==void 0?g.prefix:"")+(v==="$"?r:v==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():""),I=(v==="$"?n:/[%p]/.test(T)?o:"")+(g&&g.suffix!==void 0?g.suffix:""),k=VL[T],w=/[defgprs%]/.test(T);_=_===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function L(H){var B=R,M=I,G,$,z;if(T==="c")M=k(H)+M,H="";else{H=+H;var U=H<0||1/H<0;if(H=isNaN(H)?d:k(Math.abs(H),_),A&&(H=Wle(H)),U&&+H==0&&N!=="+"&&(U=!1),B=(U?N==="("?N:l:N==="-"||N==="("?"":N)+B,M=(T==="s"&&!isNaN(H)&&cv!==void 0?QL[8+cv/3]:"")+M+(U&&N==="("?")":""),w){for(G=-1,$=H.length;++G<$;)if(z=H.charCodeAt(G),48>z||z>57){M=(z===46?s+H.slice(G+1):H.slice(G))+M,H=H.slice(0,G);break}}}C&&!S&&(H=t(H,1/0));var Z=B.length+H.length+M.length,re=Z<E?new Array(E-Z+1).join(x):"";switch(C&&S&&(H=t(re+H,re.length?E-M.length:1/0),re=""),y){case"<":H=B+H+M+re;break;case"=":H=B+re+H+M;break;case"^":H=re.slice(0,Z=re.length>>1)+B+H+M+re.slice(Z);break;default:H=re+B+H+M;break}return i(H)}return L.toString=function(){return p+""},L}function m(p,g){var x=Math.max(-8,Math.min(8,Math.floor(jm(g)/3)))*3,y=Math.pow(10,-x),N=u((p=jg(p),p.type="f",p),{suffix:QL[8+x/3]});return function(v){return N(y*v)}}return{format:u,formatPrefix:m}}var Cb,e3,a9;Xle({thousands:",",grouping:[3],currency:["$",""]});function Xle(e){return Cb=Yle(e),e3=Cb.format,a9=Cb.formatPrefix,Cb}function Qle(e){return Math.max(0,-jm(Math.abs(e)))}function Zle(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(jm(t)/3)))*3-jm(Math.abs(e)))}function Jle(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,jm(t)-jm(e))+1}function s9(e,t,r,n){var s=GC(e,t,r),i;switch(n=jg(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=Zle(s,o))&&(n.precision=i),a9(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=Jle(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=Qle(s))&&(n.precision=i-(n.type==="%")*2);break}}return e3(n)}function pu(e){var t=e.domain;return e.ticks=function(r){var n=t();return UC(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return s9(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,i=n.length-1,o=n[s],l=n[i],d,u,m=10;for(l<o&&(u=o,o=l,l=u,u=s,s=i,i=u);m-- >0;){if(u=BC(o,l,r),u===d)return n[s]=o,n[i]=l,t(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;d=u}return e},e}function dv(){var e=ZR();return e.copy=function(){return dx(e,dv())},Ao.apply(e,arguments),pu(e)}function i9(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,ov),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return i9(e).unknown(t)},e=arguments.length?Array.from(e,ov):[0,1],pu(r)}function o9(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],i=e[n],o;return i<s&&(o=r,r=n,n=o,o=s,s=i,i=o),e[r]=t.floor(s),e[n]=t.ceil(i),e}function ZL(e){return Math.log(e)}function JL(e){return Math.exp(e)}function ece(e){return-Math.log(-e)}function tce(e){return-Math.exp(-e)}function rce(e){return isFinite(e)?+("1e"+e):e<0?0:e}function nce(e){return e===10?rce:e===Math.E?Math.exp:t=>Math.pow(e,t)}function ace(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function e$(e){return(t,r)=>-e(-t,r)}function t3(e){const t=e(ZL,JL),r=t.domain;let n=10,s,i;function o(){return s=ace(n),i=nce(n),r()[0]<0?(s=e$(s),i=e$(i),e(ece,tce)):e(ZL,JL),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const d=r();let u=d[0],m=d[d.length-1];const p=m<u;p&&([u,m]=[m,u]);let g=s(u),x=s(m),y,N;const v=l==null?10:+l;let S=[];if(!(n%1)&&x-g<v){if(g=Math.floor(g),x=Math.ceil(x),u>0){for(;g<=x;++g)for(y=1;y<n;++y)if(N=g<0?y/i(-g):y*i(g),!(N<u)){if(N>m)break;S.push(N)}}else for(;g<=x;++g)for(y=n-1;y>=1;--y)if(N=g>0?y/i(-g):y*i(g),!(N<u)){if(N>m)break;S.push(N)}S.length*2<v&&(S=UC(u,m,v))}else S=UC(g,x,Math.min(x-g,v)).map(i);return p?S.reverse():S},t.tickFormat=(l,d)=>{if(l==null&&(l=10),d==null&&(d=n===10?"s":","),typeof d!="function"&&(!(n%1)&&(d=jg(d)).precision==null&&(d.trim=!0),d=e3(d)),l===1/0)return d;const u=Math.max(1,n*l/t.ticks().length);return m=>{let p=m/i(Math.round(s(m)));return p*n<n-.5&&(p*=n),p<=u?d(m):""}},t.nice=()=>r(o9(r(),{floor:l=>i(Math.floor(s(l))),ceil:l=>i(Math.ceil(s(l)))})),t}function l9(){const e=t3(Z1()).domain([1,10]);return e.copy=()=>dx(e,l9()).base(e.base()),Ao.apply(e,arguments),e}function t$(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function r$(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function r3(e){var t=1,r=e(t$(t),r$(t));return r.constant=function(n){return arguments.length?e(t$(t=+n),r$(t)):t},pu(r)}function c9(){var e=r3(Z1());return e.copy=function(){return dx(e,c9()).constant(e.constant())},Ao.apply(e,arguments)}function n$(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function sce(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function ice(e){return e<0?-e*e:e*e}function n3(e){var t=e($s,$s),r=1;function n(){return r===1?e($s,$s):r===.5?e(sce,ice):e(n$(r),n$(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},pu(t)}function a3(){var e=n3(Z1());return e.copy=function(){return dx(e,a3()).exponent(e.exponent())},Ao.apply(e,arguments),e}function oce(){return a3.apply(null,arguments).exponent(.5)}function a$(e){return Math.sign(e)*e*e}function lce(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function d9(){var e=ZR(),t=[0,1],r=!1,n;function s(i){var o=lce(e(i));return isNaN(o)?n:r?Math.round(o):o}return s.invert=function(i){return e.invert(a$(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,ov)).map(a$)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return d9(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Ao.apply(s,arguments),pu(s)}function u9(){var e=[],t=[],r=[],n;function s(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=ele(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?n:t[lx(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(nu),s()},i.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return u9().domain(e).range(t).unknown(n)},Ao.apply(i,arguments)}function s3(){var e=0,t=1,r=1,n=[.5],s=[0,1],i;function o(d){return d!=null&&d<=d?s[lx(n,d,0,r)]:i}function l(){var d=-1;for(n=new Array(r);++d<r;)n[d]=((d+1)*t-(d-r)*e)/(r+1);return o}return o.domain=function(d){return arguments.length?([e,t]=d,e=+e,t=+t,l()):[e,t]},o.range=function(d){return arguments.length?(r=(s=Array.from(d)).length-1,l()):s.slice()},o.invertExtent=function(d){var u=s.indexOf(d);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(d){return arguments.length&&(i=d),o},o.thresholds=function(){return n.slice()},o.copy=function(){return s3().domain([e,t]).range(s).unknown(i)},Ao.apply(pu(o),arguments)}function f9(){var e=[.5],t=[0,1],r,n=1;function s(i){return i!=null&&i<=i?t[lx(e,i,0,n)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return f9().domain(e).range(t).unknown(r)},Ao.apply(s,arguments)}const dw=new Date,uw=new Date;function Ia(e,t,r,n){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const o=s(i),l=s.ceil(i);return i-o<l-i?o:l},s.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,l)=>{const d=[];if(i=s.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return d;let u;do d.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<o);return d},s.filter=i=>Ia(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(s.count=(i,o)=>(dw.setTime(+i),uw.setTime(+o),e(dw),e(uw),Math.floor(r(dw,uw))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(n?o=>n(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const uv=Ia(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);uv.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ia(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):uv);uv.range;const Kc=1e3,vo=Kc*60,zc=vo*60,ed=zc*24,i3=ed*7,s$=ed*30,fw=ed*365,uf=Ia(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Kc)},(e,t)=>(t-e)/Kc,e=>e.getUTCSeconds());uf.range;const o3=Ia(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Kc)},(e,t)=>{e.setTime(+e+t*vo)},(e,t)=>(t-e)/vo,e=>e.getMinutes());o3.range;const l3=Ia(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*vo)},(e,t)=>(t-e)/vo,e=>e.getUTCMinutes());l3.range;const c3=Ia(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Kc-e.getMinutes()*vo)},(e,t)=>{e.setTime(+e+t*zc)},(e,t)=>(t-e)/zc,e=>e.getHours());c3.range;const d3=Ia(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*zc)},(e,t)=>(t-e)/zc,e=>e.getUTCHours());d3.range;const ux=Ia(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*vo)/ed,e=>e.getDate()-1);ux.range;const J1=Ia(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ed,e=>e.getUTCDate()-1);J1.range;const p9=Ia(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ed,e=>Math.floor(e/ed));p9.range;function $f(e){return Ia(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*vo)/i3)}const eN=$f(0),fv=$f(1),cce=$f(2),dce=$f(3),wm=$f(4),uce=$f(5),fce=$f(6);eN.range;fv.range;cce.range;dce.range;wm.range;uce.range;fce.range;function Ff(e){return Ia(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/i3)}const tN=Ff(0),pv=Ff(1),pce=Ff(2),mce=Ff(3),Am=Ff(4),hce=Ff(5),gce=Ff(6);tN.range;pv.range;pce.range;mce.range;Am.range;hce.range;gce.range;const u3=Ia(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());u3.range;const f3=Ia(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());f3.range;const td=Ia(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());td.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ia(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});td.range;const rd=Ia(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());rd.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ia(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});rd.range;function m9(e,t,r,n,s,i){const o=[[uf,1,Kc],[uf,5,5*Kc],[uf,15,15*Kc],[uf,30,30*Kc],[i,1,vo],[i,5,5*vo],[i,15,15*vo],[i,30,30*vo],[s,1,zc],[s,3,3*zc],[s,6,6*zc],[s,12,12*zc],[n,1,ed],[n,2,2*ed],[r,1,i3],[t,1,s$],[t,3,3*s$],[e,1,fw]];function l(u,m,p){const g=m<u;g&&([u,m]=[m,u]);const x=p&&typeof p.range=="function"?p:d(u,m,p),y=x?x.range(u,+m+1):[];return g?y.reverse():y}function d(u,m,p){const g=Math.abs(m-u)/p,x=WR(([,,v])=>v).right(o,g);if(x===o.length)return e.every(GC(u/fw,m/fw,p));if(x===0)return uv.every(Math.max(GC(u,m,p),1));const[y,N]=o[g/o[x-1][2]<o[x][2]/g?x-1:x];return y.every(N)}return[l,d]}const[xce,bce]=m9(rd,f3,tN,p9,d3,l3),[yce,vce]=m9(td,u3,eN,ux,c3,o3);function pw(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function mw(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function f0(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function Nce(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,i=e.days,o=e.shortDays,l=e.months,d=e.shortMonths,u=p0(s),m=m0(s),p=p0(i),g=m0(i),x=p0(o),y=m0(o),N=p0(l),v=m0(l),S=p0(d),E=m0(d),C={a:z,A:U,b:Z,B:re,c:null,d:u$,e:u$,f:Kce,g:ede,G:rde,H:Bce,I:Gce,j:Hce,L:h9,m:zce,M:qce,p:X,q:F,Q:m$,s:h$,S:Wce,u:Vce,U:Yce,V:Xce,w:Qce,W:Zce,x:null,X:null,y:Jce,Y:tde,Z:nde,"%":p$},_={a:te,A:ne,b:se,B:Ne,c:null,d:f$,e:f$,f:ode,g:xde,G:yde,H:ade,I:sde,j:ide,L:x9,m:lde,M:cde,p:fe,q:we,Q:m$,s:h$,S:dde,u:ude,U:fde,V:pde,w:mde,W:hde,x:null,X:null,y:gde,Y:bde,Z:vde,"%":p$},A={a:w,A:L,b:H,B,c:M,d:c$,e:c$,f:Lce,g:l$,G:o$,H:d$,I:d$,j:Pce,L:Mce,m:kce,M:Dce,p:k,q:Rce,Q:Fce,s:Uce,S:Ice,u:Ace,U:_ce,V:Cce,w:wce,W:Tce,x:G,X:$,y:l$,Y:o$,Z:Oce,"%":$ce};C.x=T(r,C),C.X=T(n,C),C.c=T(t,C),_.x=T(r,_),_.X=T(n,_),_.c=T(t,_);function T(ve,Oe){return function(Fe){var oe=[],le=-1,ge=0,_e=ve.length,ee,q,ye;for(Fe instanceof Date||(Fe=new Date(+Fe));++le<_e;)ve.charCodeAt(le)===37&&(oe.push(ve.slice(ge,le)),(q=i$[ee=ve.charAt(++le)])!=null?ee=ve.charAt(++le):q=ee==="e"?" ":"0",(ye=Oe[ee])&&(ee=ye(Fe,q)),oe.push(ee),ge=le+1);return oe.push(ve.slice(ge,le)),oe.join("")}}function R(ve,Oe){return function(Fe){var oe=f0(1900,void 0,1),le=I(oe,ve,Fe+="",0),ge,_e;if(le!=Fe.length)return null;if("Q"in oe)return new Date(oe.Q);if("s"in oe)return new Date(oe.s*1e3+("L"in oe?oe.L:0));if(Oe&&!("Z"in oe)&&(oe.Z=0),"p"in oe&&(oe.H=oe.H%12+oe.p*12),oe.m===void 0&&(oe.m="q"in oe?oe.q:0),"V"in oe){if(oe.V<1||oe.V>53)return null;"w"in oe||(oe.w=1),"Z"in oe?(ge=mw(f0(oe.y,0,1)),_e=ge.getUTCDay(),ge=_e>4||_e===0?pv.ceil(ge):pv(ge),ge=J1.offset(ge,(oe.V-1)*7),oe.y=ge.getUTCFullYear(),oe.m=ge.getUTCMonth(),oe.d=ge.getUTCDate()+(oe.w+6)%7):(ge=pw(f0(oe.y,0,1)),_e=ge.getDay(),ge=_e>4||_e===0?fv.ceil(ge):fv(ge),ge=ux.offset(ge,(oe.V-1)*7),oe.y=ge.getFullYear(),oe.m=ge.getMonth(),oe.d=ge.getDate()+(oe.w+6)%7)}else("W"in oe||"U"in oe)&&("w"in oe||(oe.w="u"in oe?oe.u%7:"W"in oe?1:0),_e="Z"in oe?mw(f0(oe.y,0,1)).getUTCDay():pw(f0(oe.y,0,1)).getDay(),oe.m=0,oe.d="W"in oe?(oe.w+6)%7+oe.W*7-(_e+5)%7:oe.w+oe.U*7-(_e+6)%7);return"Z"in oe?(oe.H+=oe.Z/100|0,oe.M+=oe.Z%100,mw(oe)):pw(oe)}}function I(ve,Oe,Fe,oe){for(var le=0,ge=Oe.length,_e=Fe.length,ee,q;le<ge;){if(oe>=_e)return-1;if(ee=Oe.charCodeAt(le++),ee===37){if(ee=Oe.charAt(le++),q=A[ee in i$?Oe.charAt(le++):ee],!q||(oe=q(ve,Fe,oe))<0)return-1}else if(ee!=Fe.charCodeAt(oe++))return-1}return oe}function k(ve,Oe,Fe){var oe=u.exec(Oe.slice(Fe));return oe?(ve.p=m.get(oe[0].toLowerCase()),Fe+oe[0].length):-1}function w(ve,Oe,Fe){var oe=x.exec(Oe.slice(Fe));return oe?(ve.w=y.get(oe[0].toLowerCase()),Fe+oe[0].length):-1}function L(ve,Oe,Fe){var oe=p.exec(Oe.slice(Fe));return oe?(ve.w=g.get(oe[0].toLowerCase()),Fe+oe[0].length):-1}function H(ve,Oe,Fe){var oe=S.exec(Oe.slice(Fe));return oe?(ve.m=E.get(oe[0].toLowerCase()),Fe+oe[0].length):-1}function B(ve,Oe,Fe){var oe=N.exec(Oe.slice(Fe));return oe?(ve.m=v.get(oe[0].toLowerCase()),Fe+oe[0].length):-1}function M(ve,Oe,Fe){return I(ve,t,Oe,Fe)}function G(ve,Oe,Fe){return I(ve,r,Oe,Fe)}function $(ve,Oe,Fe){return I(ve,n,Oe,Fe)}function z(ve){return o[ve.getDay()]}function U(ve){return i[ve.getDay()]}function Z(ve){return d[ve.getMonth()]}function re(ve){return l[ve.getMonth()]}function X(ve){return s[+(ve.getHours()>=12)]}function F(ve){return 1+~~(ve.getMonth()/3)}function te(ve){return o[ve.getUTCDay()]}function ne(ve){return i[ve.getUTCDay()]}function se(ve){return d[ve.getUTCMonth()]}function Ne(ve){return l[ve.getUTCMonth()]}function fe(ve){return s[+(ve.getUTCHours()>=12)]}function we(ve){return 1+~~(ve.getUTCMonth()/3)}return{format:function(ve){var Oe=T(ve+="",C);return Oe.toString=function(){return ve},Oe},parse:function(ve){var Oe=R(ve+="",!1);return Oe.toString=function(){return ve},Oe},utcFormat:function(ve){var Oe=T(ve+="",_);return Oe.toString=function(){return ve},Oe},utcParse:function(ve){var Oe=R(ve+="",!0);return Oe.toString=function(){return ve},Oe}}}var i$={"-":"",_:" ",0:"0"},Wa=/^\s*\d+/,Sce=/^%/,Ece=/[\\^$*+?|[\]().{}]/g;function Wr(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",i=s.length;return n+(i<r?new Array(r-i+1).join(t)+s:s)}function jce(e){return e.replace(Ece,"\\$&")}function p0(e){return new RegExp("^(?:"+e.map(jce).join("|")+")","i")}function m0(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function wce(e,t,r){var n=Wa.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function Ace(e,t,r){var n=Wa.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function _ce(e,t,r){var n=Wa.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function Cce(e,t,r){var n=Wa.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function Tce(e,t,r){var n=Wa.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function o$(e,t,r){var n=Wa.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function l$(e,t,r){var n=Wa.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function Oce(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function Rce(e,t,r){var n=Wa.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function kce(e,t,r){var n=Wa.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function c$(e,t,r){var n=Wa.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function Pce(e,t,r){var n=Wa.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function d$(e,t,r){var n=Wa.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function Dce(e,t,r){var n=Wa.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function Ice(e,t,r){var n=Wa.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function Mce(e,t,r){var n=Wa.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function Lce(e,t,r){var n=Wa.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function $ce(e,t,r){var n=Sce.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function Fce(e,t,r){var n=Wa.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function Uce(e,t,r){var n=Wa.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function u$(e,t){return Wr(e.getDate(),t,2)}function Bce(e,t){return Wr(e.getHours(),t,2)}function Gce(e,t){return Wr(e.getHours()%12||12,t,2)}function Hce(e,t){return Wr(1+ux.count(td(e),e),t,3)}function h9(e,t){return Wr(e.getMilliseconds(),t,3)}function Kce(e,t){return h9(e,t)+"000"}function zce(e,t){return Wr(e.getMonth()+1,t,2)}function qce(e,t){return Wr(e.getMinutes(),t,2)}function Wce(e,t){return Wr(e.getSeconds(),t,2)}function Vce(e){var t=e.getDay();return t===0?7:t}function Yce(e,t){return Wr(eN.count(td(e)-1,e),t,2)}function g9(e){var t=e.getDay();return t>=4||t===0?wm(e):wm.ceil(e)}function Xce(e,t){return e=g9(e),Wr(wm.count(td(e),e)+(td(e).getDay()===4),t,2)}function Qce(e){return e.getDay()}function Zce(e,t){return Wr(fv.count(td(e)-1,e),t,2)}function Jce(e,t){return Wr(e.getFullYear()%100,t,2)}function ede(e,t){return e=g9(e),Wr(e.getFullYear()%100,t,2)}function tde(e,t){return Wr(e.getFullYear()%1e4,t,4)}function rde(e,t){var r=e.getDay();return e=r>=4||r===0?wm(e):wm.ceil(e),Wr(e.getFullYear()%1e4,t,4)}function nde(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Wr(t/60|0,"0",2)+Wr(t%60,"0",2)}function f$(e,t){return Wr(e.getUTCDate(),t,2)}function ade(e,t){return Wr(e.getUTCHours(),t,2)}function sde(e,t){return Wr(e.getUTCHours()%12||12,t,2)}function ide(e,t){return Wr(1+J1.count(rd(e),e),t,3)}function x9(e,t){return Wr(e.getUTCMilliseconds(),t,3)}function ode(e,t){return x9(e,t)+"000"}function lde(e,t){return Wr(e.getUTCMonth()+1,t,2)}function cde(e,t){return Wr(e.getUTCMinutes(),t,2)}function dde(e,t){return Wr(e.getUTCSeconds(),t,2)}function ude(e){var t=e.getUTCDay();return t===0?7:t}function fde(e,t){return Wr(tN.count(rd(e)-1,e),t,2)}function b9(e){var t=e.getUTCDay();return t>=4||t===0?Am(e):Am.ceil(e)}function pde(e,t){return e=b9(e),Wr(Am.count(rd(e),e)+(rd(e).getUTCDay()===4),t,2)}function mde(e){return e.getUTCDay()}function hde(e,t){return Wr(pv.count(rd(e)-1,e),t,2)}function gde(e,t){return Wr(e.getUTCFullYear()%100,t,2)}function xde(e,t){return e=b9(e),Wr(e.getUTCFullYear()%100,t,2)}function bde(e,t){return Wr(e.getUTCFullYear()%1e4,t,4)}function yde(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Am(e):Am.ceil(e),Wr(e.getUTCFullYear()%1e4,t,4)}function vde(){return"+0000"}function p$(){return"%"}function m$(e){return+e}function h$(e){return Math.floor(+e/1e3)}var Sp,y9,v9;Nde({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Nde(e){return Sp=Nce(e),y9=Sp.format,Sp.parse,v9=Sp.utcFormat,Sp.utcParse,Sp}function Sde(e){return new Date(e)}function Ede(e){return e instanceof Date?+e:+new Date(+e)}function p3(e,t,r,n,s,i,o,l,d,u){var m=ZR(),p=m.invert,g=m.domain,x=u(".%L"),y=u(":%S"),N=u("%I:%M"),v=u("%I %p"),S=u("%a %d"),E=u("%b %d"),C=u("%B"),_=u("%Y");function A(T){return(d(T)<T?x:l(T)<T?y:o(T)<T?N:i(T)<T?v:n(T)<T?s(T)<T?S:E:r(T)<T?C:_)(T)}return m.invert=function(T){return new Date(p(T))},m.domain=function(T){return arguments.length?g(Array.from(T,Ede)):g().map(Sde)},m.ticks=function(T){var R=g();return e(R[0],R[R.length-1],T??10)},m.tickFormat=function(T,R){return R==null?A:u(R)},m.nice=function(T){var R=g();return(!T||typeof T.range!="function")&&(T=t(R[0],R[R.length-1],T??10)),T?g(o9(R,T)):m},m.copy=function(){return dx(m,p3(e,t,r,n,s,i,o,l,d,u))},m}function jde(){return Ao.apply(p3(yce,vce,td,u3,eN,ux,c3,o3,uf,y9).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function wde(){return Ao.apply(p3(xce,bce,rd,f3,tN,J1,d3,l3,uf,v9).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function rN(){var e=0,t=1,r,n,s,i,o=$s,l=!1,d;function u(p){return p==null||isNaN(p=+p)?d:o(s===0?.5:(p=(i(p)-r)*s,l?Math.max(0,Math.min(1,p)):p))}u.domain=function(p){return arguments.length?([e,t]=p,r=i(e=+e),n=i(t=+t),s=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(p){return arguments.length?(l=!!p,u):l},u.interpolator=function(p){return arguments.length?(o=p,u):o};function m(p){return function(g){var x,y;return arguments.length?([x,y]=g,o=p(x,y),u):[o(0),o(1)]}}return u.range=m(xh),u.rangeRound=m(QR),u.unknown=function(p){return arguments.length?(d=p,u):d},function(p){return i=p,r=p(e),n=p(t),s=r===n?0:1/(n-r),u}}function mu(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function m3(){var e=pu(rN()($s));return e.copy=function(){return mu(e,m3())},cd.apply(e,arguments)}function N9(){var e=t3(rN()).domain([1,10]);return e.copy=function(){return mu(e,N9()).base(e.base())},cd.apply(e,arguments)}function S9(){var e=r3(rN());return e.copy=function(){return mu(e,S9()).constant(e.constant())},cd.apply(e,arguments)}function h3(){var e=n3(rN());return e.copy=function(){return mu(e,h3()).exponent(e.exponent())},cd.apply(e,arguments)}function Ade(){return h3.apply(null,arguments).exponent(.5)}function E9(){var e=[],t=$s;function r(n){if(n!=null&&!isNaN(n=+n))return t((lx(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(nu),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,i)=>Joe(e,i/n))},r.copy=function(){return E9(t).domain(e)},cd.apply(r,arguments)}function nN(){var e=0,t=.5,r=1,n=1,s,i,o,l,d,u=$s,m,p=!1,g;function x(N){return isNaN(N=+N)?g:(N=.5+((N=+m(N))-i)*(n*N<n*i?l:d),u(p?Math.max(0,Math.min(1,N)):N))}x.domain=function(N){return arguments.length?([e,t,r]=N,s=m(e=+e),i=m(t=+t),o=m(r=+r),l=s===i?0:.5/(i-s),d=i===o?0:.5/(o-i),n=i<s?-1:1,x):[e,t,r]},x.clamp=function(N){return arguments.length?(p=!!N,x):p},x.interpolator=function(N){return arguments.length?(u=N,x):u};function y(N){return function(v){var S,E,C;return arguments.length?([S,E,C]=v,u=$le(N,[S,E,C]),x):[u(0),u(.5),u(1)]}}return x.range=y(xh),x.rangeRound=y(QR),x.unknown=function(N){return arguments.length?(g=N,x):g},function(N){return m=N,s=N(e),i=N(t),o=N(r),l=s===i?0:.5/(i-s),d=i===o?0:.5/(o-i),n=i<s?-1:1,x}}function j9(){var e=pu(nN()($s));return e.copy=function(){return mu(e,j9())},cd.apply(e,arguments)}function w9(){var e=t3(nN()).domain([.1,1,10]);return e.copy=function(){return mu(e,w9()).base(e.base())},cd.apply(e,arguments)}function A9(){var e=r3(nN());return e.copy=function(){return mu(e,A9()).constant(e.constant())},cd.apply(e,arguments)}function g3(){var e=n3(nN());return e.copy=function(){return mu(e,g3()).exponent(e.exponent())},cd.apply(e,arguments)}function _de(){return g3.apply(null,arguments).exponent(.5)}const g$=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Ng,scaleDiverging:j9,scaleDivergingLog:w9,scaleDivergingPow:g3,scaleDivergingSqrt:_de,scaleDivergingSymlog:A9,scaleIdentity:i9,scaleImplicit:HC,scaleLinear:dv,scaleLog:l9,scaleOrdinal:VR,scalePoint:eg,scalePow:a3,scaleQuantile:u9,scaleQuantize:s3,scaleRadial:d9,scaleSequential:m3,scaleSequentialLog:N9,scaleSequentialPow:h3,scaleSequentialQuantile:E9,scaleSequentialSqrt:Ade,scaleSequentialSymlog:S9,scaleSqrt:oce,scaleSymlog:c9,scaleThreshold:f9,scaleTime:jde,scaleUtc:wde,tickFormat:s9},Symbol.toStringTag,{value:"Module"}));var hw,x$;function aN(){if(x$)return hw;x$=1;var e=fh();function t(r,n,s){for(var i=-1,o=r.length;++i<o;){var l=r[i],d=n(l);if(d!=null&&(u===void 0?d===d&&!e(d):s(d,u)))var u=d,m=l}return m}return hw=t,hw}var gw,b$;function _9(){if(b$)return gw;b$=1;function e(t,r){return t>r}return gw=e,gw}var xw,y$;function Cde(){if(y$)return xw;y$=1;var e=aN(),t=_9(),r=gh();function n(s){return s&&s.length?e(s,r,t):void 0}return xw=n,xw}var Tde=Cde();const Yd=Zr(Tde);var bw,v$;function C9(){if(v$)return bw;v$=1;function e(t,r){return t<r}return bw=e,bw}var yw,N$;function Ode(){if(N$)return yw;N$=1;var e=aN(),t=C9(),r=gh();function n(s){return s&&s.length?e(s,r,t):void 0}return yw=n,yw}var Rde=Ode();const sN=Zr(Rde);var vw,S$;function kde(){if(S$)return vw;S$=1;var e=F1(),t=ec(),r=DG(),n=Hs();function s(i,o){var l=n(i)?e:r;return l(i,t(o,3))}return vw=s,vw}var Nw,E$;function Pde(){if(E$)return Nw;E$=1;var e=HR(),t=kde();function r(n,s){return e(t(n,s),1)}return Nw=r,Nw}var Dde=Pde();const Ide=Zr(Dde);var Sw,j$;function Mde(){if(j$)return Sw;j$=1;var e=GR();function t(r,n){return e(r,n)}return Sw=t,Sw}var Lde=Mde();const ou=Zr(Lde);var bh=1e9,$de={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},b3,Un=!0,Eo="[DecimalError] ",yf=Eo+"Invalid argument: ",x3=Eo+"Exponent out of range: ",yh=Math.floor,rf=Math.pow,Fde=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,$i,Ha=1e7,Pn=7,T9=9007199254740991,mv=yh(T9/Pn),Ct={};Ct.absoluteValue=Ct.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ct.comparedTo=Ct.cmp=function(e){var t,r,n,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===s?0:n>s^i.s<0?1:-1};Ct.decimalPlaces=Ct.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Pn;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ct.dividedBy=Ct.div=function(e){return Yc(this,new this.constructor(e))};Ct.dividedToIntegerBy=Ct.idiv=function(e){var t=this,r=t.constructor;return vn(Yc(t,new r(e),0,1),r.precision)};Ct.equals=Ct.eq=function(e){return!this.cmp(e)};Ct.exponent=function(){return ga(this)};Ct.greaterThan=Ct.gt=function(e){return this.cmp(e)>0};Ct.greaterThanOrEqualTo=Ct.gte=function(e){return this.cmp(e)>=0};Ct.isInteger=Ct.isint=function(){return this.e>this.d.length-2};Ct.isNegative=Ct.isneg=function(){return this.s<0};Ct.isPositive=Ct.ispos=function(){return this.s>0};Ct.isZero=function(){return this.s===0};Ct.lessThan=Ct.lt=function(e){return this.cmp(e)<0};Ct.lessThanOrEqualTo=Ct.lte=function(e){return this.cmp(e)<1};Ct.logarithm=Ct.log=function(e){var t,r=this,n=r.constructor,s=n.precision,i=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq($i))throw Error(Eo+"NaN");if(r.s<1)throw Error(Eo+(r.s?"NaN":"-Infinity"));return r.eq($i)?new n(0):(Un=!1,t=Yc(wg(r,i),wg(e,i),i),Un=!0,vn(t,s))};Ct.minus=Ct.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?k9(t,e):O9(t,(e.s=-e.s,e))};Ct.modulo=Ct.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(Eo+"NaN");return r.s?(Un=!1,t=Yc(r,e,0,1).times(e),Un=!0,r.minus(t)):vn(new n(r),s)};Ct.naturalExponential=Ct.exp=function(){return R9(this)};Ct.naturalLogarithm=Ct.ln=function(){return wg(this)};Ct.negated=Ct.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ct.plus=Ct.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?O9(t,e):k9(t,(e.s=-e.s,e))};Ct.precision=Ct.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(yf+e);if(t=ga(s)+1,n=s.d.length-1,r=n*Pn+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Ct.squareRoot=Ct.sqrt=function(){var e,t,r,n,s,i,o,l=this,d=l.constructor;if(l.s<1){if(!l.s)return new d(0);throw Error(Eo+"NaN")}for(e=ga(l),Un=!1,s=Math.sqrt(+l),s==0||s==1/0?(t=Ll(l.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=yh((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new d(t)):n=new d(s.toString()),r=d.precision,s=o=r+3;;)if(i=n,n=i.plus(Yc(l,i,o+2)).times(.5),Ll(i.d).slice(0,o)===(t=Ll(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&t=="4999"){if(vn(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(t!="9999")break;o+=4}return Un=!0,vn(n,r)};Ct.times=Ct.mul=function(e){var t,r,n,s,i,o,l,d,u,m=this,p=m.constructor,g=m.d,x=(e=new p(e)).d;if(!m.s||!e.s)return new p(0);for(e.s*=m.s,r=m.e+e.e,d=g.length,u=x.length,d<u&&(i=g,g=x,x=i,o=d,d=u,u=o),i=[],o=d+u,n=o;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,s=d+n;s>n;)l=i[s]+x[n]*g[s-n-1]+t,i[s--]=l%Ha|0,t=l/Ha|0;i[s]=(i[s]+t)%Ha|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,Un?vn(e,p.precision):e};Ct.toDecimalPlaces=Ct.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Ql(e,0,bh),t===void 0?t=n.rounding:Ql(t,0,8),vn(r,e+ga(r)+1,t))};Ct.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=Cf(n,!0):(Ql(e,0,bh),t===void 0?t=s.rounding:Ql(t,0,8),n=vn(new s(n),e+1,t),r=Cf(n,!0,e+1)),r};Ct.toFixed=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?Cf(s):(Ql(e,0,bh),t===void 0?t=i.rounding:Ql(t,0,8),n=vn(new i(s),e+ga(s)+1,t),r=Cf(n.abs(),!1,e+ga(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};Ct.toInteger=Ct.toint=function(){var e=this,t=e.constructor;return vn(new t(e),ga(e)+1,t.rounding)};Ct.toNumber=function(){return+this};Ct.toPower=Ct.pow=function(e){var t,r,n,s,i,o,l=this,d=l.constructor,u=12,m=+(e=new d(e));if(!e.s)return new d($i);if(l=new d(l),!l.s){if(e.s<1)throw Error(Eo+"Infinity");return l}if(l.eq($i))return l;if(n=d.precision,e.eq($i))return vn(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=m<0?-m:m)<=T9){for(s=new d($i),t=Math.ceil(n/Pn+4),Un=!1;r%2&&(s=s.times(l),A$(s.d,t)),r=yh(r/2),r!==0;)l=l.times(l),A$(l.d,t);return Un=!0,e.s<0?new d($i).div(s):vn(s,n)}}else if(i<0)throw Error(Eo+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,Un=!1,s=e.times(wg(l,n+u)),Un=!0,s=R9(s),s.s=i,s};Ct.toPrecision=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?(r=ga(s),n=Cf(s,r<=i.toExpNeg||r>=i.toExpPos)):(Ql(e,1,bh),t===void 0?t=i.rounding:Ql(t,0,8),s=vn(new i(s),e,t),r=ga(s),n=Cf(s,e<=r||r<=i.toExpNeg,e)),n};Ct.toSignificantDigits=Ct.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Ql(e,1,bh),t===void 0?t=n.rounding:Ql(t,0,8)),vn(new n(r),e,t)};Ct.toString=Ct.valueOf=Ct.val=Ct.toJSON=Ct[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=ga(e),r=e.constructor;return Cf(e,t<=r.toExpNeg||t>=r.toExpPos)};function O9(e,t){var r,n,s,i,o,l,d,u,m=e.constructor,p=m.precision;if(!e.s||!t.s)return t.s||(t=new m(e)),Un?vn(t,p):t;if(d=e.d,u=t.d,o=e.e,s=t.e,d=d.slice(),i=o-s,i){for(i<0?(n=d,i=-i,l=u.length):(n=u,s=o,l=d.length),o=Math.ceil(p/Pn),l=o>l?o+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=d.length,i=u.length,l-i<0&&(i=l,n=u,u=d,d=n),r=0;i;)r=(d[--i]=d[i]+u[i]+r)/Ha|0,d[i]%=Ha;for(r&&(d.unshift(r),++s),l=d.length;d[--l]==0;)d.pop();return t.d=d,t.e=s,Un?vn(t,p):t}function Ql(e,t,r){if(e!==~~e||e<t||e>r)throw Error(yf+e)}function Ll(e){var t,r,n,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)n=e[t]+"",r=Pn-n.length,r&&(i+=Kd(r)),i+=n;o=e[t],n=o+"",r=Pn-n.length,r&&(i+=Kd(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Yc=(function(){function e(n,s){var i,o=0,l=n.length;for(n=n.slice();l--;)i=n[l]*s+o,n[l]=i%Ha|0,o=i/Ha|0;return o&&n.unshift(o),n}function t(n,s,i,o){var l,d;if(i!=o)d=i>o?1:-1;else for(l=d=0;l<i;l++)if(n[l]!=s[l]){d=n[l]>s[l]?1:-1;break}return d}function r(n,s,i){for(var o=0;i--;)n[i]-=o,o=n[i]<s[i]?1:0,n[i]=o*Ha+n[i]-s[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,i,o){var l,d,u,m,p,g,x,y,N,v,S,E,C,_,A,T,R,I,k=n.constructor,w=n.s==s.s?1:-1,L=n.d,H=s.d;if(!n.s)return new k(n);if(!s.s)throw Error(Eo+"Division by zero");for(d=n.e-s.e,R=H.length,A=L.length,x=new k(w),y=x.d=[],u=0;H[u]==(L[u]||0);)++u;if(H[u]>(L[u]||0)&&--d,i==null?E=i=k.precision:o?E=i+(ga(n)-ga(s))+1:E=i,E<0)return new k(0);if(E=E/Pn+2|0,u=0,R==1)for(m=0,H=H[0],E++;(u<A||m)&&E--;u++)C=m*Ha+(L[u]||0),y[u]=C/H|0,m=C%H|0;else{for(m=Ha/(H[0]+1)|0,m>1&&(H=e(H,m),L=e(L,m),R=H.length,A=L.length),_=R,N=L.slice(0,R),v=N.length;v<R;)N[v++]=0;I=H.slice(),I.unshift(0),T=H[0],H[1]>=Ha/2&&++T;do m=0,l=t(H,N,R,v),l<0?(S=N[0],R!=v&&(S=S*Ha+(N[1]||0)),m=S/T|0,m>1?(m>=Ha&&(m=Ha-1),p=e(H,m),g=p.length,v=N.length,l=t(p,N,g,v),l==1&&(m--,r(p,R<g?I:H,g))):(m==0&&(l=m=1),p=H.slice()),g=p.length,g<v&&p.unshift(0),r(N,p,v),l==-1&&(v=N.length,l=t(H,N,R,v),l<1&&(m++,r(N,R<v?I:H,v))),v=N.length):l===0&&(m++,N=[0]),y[u++]=m,l&&N[0]?N[v++]=L[_]||0:(N=[L[_]],v=1);while((_++<A||N[0]!==void 0)&&E--)}return y[0]||y.shift(),x.e=d,vn(x,o?i+ga(x)+1:i)}})();function R9(e,t){var r,n,s,i,o,l,d=0,u=0,m=e.constructor,p=m.precision;if(ga(e)>16)throw Error(x3+ga(e));if(!e.s)return new m($i);for(Un=!1,l=p,o=new m(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(rf(2,u))/Math.LN10*2+5|0,l+=n,r=s=i=new m($i),m.precision=l;;){if(s=vn(s.times(e),l),r=r.times(++d),o=i.plus(Yc(s,r,l)),Ll(o.d).slice(0,l)===Ll(i.d).slice(0,l)){for(;u--;)i=vn(i.times(i),l);return m.precision=p,t==null?(Un=!0,vn(i,p)):i}i=o}}function ga(e){for(var t=e.e*Pn,r=e.d[0];r>=10;r/=10)t++;return t}function Ew(e,t,r){if(t>e.LN10.sd())throw Un=!0,r&&(e.precision=r),Error(Eo+"LN10 precision limit exceeded");return vn(new e(e.LN10),t)}function Kd(e){for(var t="";e--;)t+="0";return t}function wg(e,t){var r,n,s,i,o,l,d,u,m,p=1,g=10,x=e,y=x.d,N=x.constructor,v=N.precision;if(x.s<1)throw Error(Eo+(x.s?"NaN":"-Infinity"));if(x.eq($i))return new N(0);if(t==null?(Un=!1,u=v):u=t,x.eq(10))return t==null&&(Un=!0),Ew(N,u);if(u+=g,N.precision=u,r=Ll(y),n=r.charAt(0),i=ga(x),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)x=x.times(e),r=Ll(x.d),n=r.charAt(0),p++;i=ga(x),n>1?(x=new N("0."+r),i++):x=new N(n+"."+r.slice(1))}else return d=Ew(N,u+2,v).times(i+""),x=wg(new N(n+"."+r.slice(1)),u-g).plus(d),N.precision=v,t==null?(Un=!0,vn(x,v)):x;for(l=o=x=Yc(x.minus($i),x.plus($i),u),m=vn(x.times(x),u),s=3;;){if(o=vn(o.times(m),u),d=l.plus(Yc(o,new N(s),u)),Ll(d.d).slice(0,u)===Ll(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(Ew(N,u+2,v).times(i+""))),l=Yc(l,new N(p),u),N.precision=v,t==null?(Un=!0,vn(l,v)):l;l=d,s+=2}}function w$(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=yh(r/Pn),e.d=[],n=(r+1)%Pn,r<0&&(n+=Pn),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=Pn;n<s;)e.d.push(+t.slice(n,n+=Pn));t=t.slice(n),n=Pn-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),Un&&(e.e>mv||e.e<-mv))throw Error(x3+r)}else e.s=0,e.e=0,e.d=[0];return e}function vn(e,t,r){var n,s,i,o,l,d,u,m,p=e.d;for(o=1,i=p[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=Pn,s=t,u=p[m=0];else{if(m=Math.ceil((n+1)/Pn),i=p.length,m>=i)return e;for(u=i=p[m],o=1;i>=10;i/=10)o++;n%=Pn,s=n-Pn+o}if(r!==void 0&&(i=rf(10,o-s-1),l=u/i%10|0,d=t<0||p[m+1]!==void 0||u%i,d=r<4?(l||d)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||d||r==6&&(n>0?s>0?u/rf(10,o-s):0:p[m-1])%10&1||r==(e.s<0?8:7))),t<1||!p[0])return d?(i=ga(e),p.length=1,t=t-i-1,p[0]=rf(10,(Pn-t%Pn)%Pn),e.e=yh(-t/Pn)||0):(p.length=1,p[0]=e.e=e.s=0),e;if(n==0?(p.length=m,i=1,m--):(p.length=m+1,i=rf(10,Pn-n),p[m]=s>0?(u/rf(10,o-s)%rf(10,s)|0)*i:0),d)for(;;)if(m==0){(p[0]+=i)==Ha&&(p[0]=1,++e.e);break}else{if(p[m]+=i,p[m]!=Ha)break;p[m--]=0,i=1}for(n=p.length;p[--n]===0;)p.pop();if(Un&&(e.e>mv||e.e<-mv))throw Error(x3+ga(e));return e}function k9(e,t){var r,n,s,i,o,l,d,u,m,p,g=e.constructor,x=g.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new g(e),Un?vn(t,x):t;if(d=e.d,p=t.d,n=t.e,u=e.e,d=d.slice(),o=u-n,o){for(m=o<0,m?(r=d,o=-o,l=p.length):(r=p,n=u,l=d.length),s=Math.max(Math.ceil(x/Pn),l)+2,o>s&&(o=s,r.length=1),r.reverse(),s=o;s--;)r.push(0);r.reverse()}else{for(s=d.length,l=p.length,m=s<l,m&&(l=s),s=0;s<l;s++)if(d[s]!=p[s]){m=d[s]<p[s];break}o=0}for(m&&(r=d,d=p,p=r,t.s=-t.s),l=d.length,s=p.length-l;s>0;--s)d[l++]=0;for(s=p.length;s>o;){if(d[--s]<p[s]){for(i=s;i&&d[--i]===0;)d[i]=Ha-1;--d[i],d[s]+=Ha}d[s]-=p[s]}for(;d[--l]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(t.d=d,t.e=n,Un?vn(t,x):t):new g(0)}function Cf(e,t,r){var n,s=ga(e),i=Ll(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+Kd(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+Kd(-s-1)+i,r&&(n=r-o)>0&&(i+=Kd(n))):s>=o?(i+=Kd(s+1-o),r&&(n=r-s-1)>0&&(i=i+"."+Kd(n))):((n=s+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(s+1===o&&(i+="."),i+=Kd(n))),e.s<0?"-"+i:i}function A$(e,t){if(e.length>t)return e.length=t,!0}function P9(e){var t,r,n;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(yf+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return w$(o,i.toString())}else if(typeof i!="string")throw Error(yf+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,Fde.test(i))w$(o,i);else throw Error(yf+i)}if(s.prototype=Ct,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=P9,s.config=s.set=Ude,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function Ude(e){if(!e||typeof e!="object")throw Error(Eo+"Object expected");var t,r,n,s=["precision",1,bh,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(yh(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(yf+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(yf+r+": "+n);return this}var b3=P9($de);$i=new b3(1);const pn=b3;function Bde(e){return zde(e)||Kde(e)||Hde(e)||Gde()}function Gde(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hde(e,t){if(e){if(typeof e=="string")return WC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return WC(e,t)}}function Kde(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function zde(e){if(Array.isArray(e))return WC(e)}function WC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var qde=function(t){return t},D9={},I9=function(t){return t===D9},_$=function(t){return function r(){return arguments.length===0||arguments.length===1&&I9(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},Wde=function e(t,r){return t===1?r:_$(function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];var o=s.filter(function(l){return l!==D9}).length;return o>=t?r.apply(void 0,s):e(t-o,_$(function(){for(var l=arguments.length,d=new Array(l),u=0;u<l;u++)d[u]=arguments[u];var m=s.map(function(p){return I9(p)?d.shift():p});return r.apply(void 0,Bde(m).concat(d))}))})},iN=function(t){return Wde(t.length,t)},VC=function(t,r){for(var n=[],s=t;s<r;++s)n[s-t]=s;return n},Vde=iN(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),Yde=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return qde;var s=r.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce(function(l,d){return d(l)},i.apply(void 0,arguments))}},YC=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},M9=function(t){var r=null,n=null;return function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r&&i.every(function(l,d){return l===r[d]})||(r=i,n=t.apply(void 0,i)),n}};function Xde(e){var t;return e===0?t=1:t=Math.floor(new pn(e).abs().log(10).toNumber())+1,t}function Qde(e,t,r){for(var n=new pn(e),s=0,i=[];n.lt(t)&&s<1e5;)i.push(n.toNumber()),n=n.add(r),s++;return i}var Zde=iN(function(e,t,r){var n=+e,s=+t;return n+r*(s-n)}),Jde=iN(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),eue=iN(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const oN={rangeStep:Qde,getDigitCount:Xde,interpolateNumber:Zde,uninterpolateNumber:Jde,uninterpolateTruncation:eue};function XC(e){return nue(e)||rue(e)||L9(e)||tue()}function tue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rue(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function nue(e){if(Array.isArray(e))return QC(e)}function Ag(e,t){return iue(e)||sue(e,t)||L9(e,t)||aue()}function aue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function L9(e,t){if(e){if(typeof e=="string")return QC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return QC(e,t)}}function QC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function sue(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,s=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(n=(l=o.next()).done)&&(r.push(l.value),!(t&&r.length===t));n=!0);}catch(d){s=!0,i=d}finally{try{!n&&o.return!=null&&o.return()}finally{if(s)throw i}}return r}}function iue(e){if(Array.isArray(e))return e}function $9(e){var t=Ag(e,2),r=t[0],n=t[1],s=r,i=n;return r>n&&(s=n,i=r),[s,i]}function F9(e,t,r){if(e.lte(0))return new pn(0);var n=oN.getDigitCount(e.toNumber()),s=new pn(10).pow(n),i=e.div(s),o=n!==1?.05:.1,l=new pn(Math.ceil(i.div(o).toNumber())).add(r).mul(o),d=l.mul(s);return t?d:new pn(Math.ceil(d))}function oue(e,t,r){var n=1,s=new pn(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(n=new pn(10).pow(oN.getDigitCount(e)-1),s=new pn(Math.floor(s.div(n).toNumber())).mul(n)):i>1&&(s=new pn(Math.floor(e)))}else e===0?s=new pn(Math.floor((t-1)/2)):r||(s=new pn(Math.floor(e)));var o=Math.floor((t-1)/2),l=Yde(Vde(function(d){return s.add(new pn(d-o).mul(n)).toNumber()}),VC);return l(0,t)}function U9(e,t,r,n){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new pn(0),tickMin:new pn(0),tickMax:new pn(0)};var i=F9(new pn(t).sub(e).div(r-1),n,s),o;e<=0&&t>=0?o=new pn(0):(o=new pn(e).add(t).div(2),o=o.sub(new pn(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),d=Math.ceil(new pn(t).sub(o).div(i).toNumber()),u=l+d+1;return u>r?U9(e,t,r,n,s+1):(u<r&&(d=t>0?d+(r-u):d,l=t>0?l:l+(r-u)),{step:i,tickMin:o.sub(new pn(l).mul(i)),tickMax:o.add(new pn(d).mul(i))})}function lue(e){var t=Ag(e,2),r=t[0],n=t[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(s,2),l=$9([r,n]),d=Ag(l,2),u=d[0],m=d[1];if(u===-1/0||m===1/0){var p=m===1/0?[u].concat(XC(VC(0,s-1).map(function(){return 1/0}))):[].concat(XC(VC(0,s-1).map(function(){return-1/0})),[m]);return r>n?YC(p):p}if(u===m)return oue(u,s,i);var g=U9(u,m,o,i),x=g.step,y=g.tickMin,N=g.tickMax,v=oN.rangeStep(y,N.add(new pn(.1).mul(x)),x);return r>n?YC(v):v}function cue(e,t){var r=Ag(e,2),n=r[0],s=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=$9([n,s]),l=Ag(o,2),d=l[0],u=l[1];if(d===-1/0||u===1/0)return[n,s];if(d===u)return[d];var m=Math.max(t,2),p=F9(new pn(u).sub(d).div(m-1),i,0),g=[].concat(XC(oN.rangeStep(new pn(d),new pn(u).sub(new pn(.99).mul(p)),p)),[u]);return n>s?YC(g):g}var due=M9(lue),uue=M9(cue),fue="Invariant failed";function Tf(e,t){throw new Error(fue)}var pue=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function _m(e){"@babel/helpers - typeof";return _m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_m(e)}function hv(){return hv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hv.apply(this,arguments)}function mue(e,t){return bue(e)||xue(e,t)||gue(e,t)||hue()}function hue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gue(e,t){if(e){if(typeof e=="string")return C$(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C$(e,t)}}function C$(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function xue(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);d=!0);}catch(m){u=!0,s=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function bue(e){if(Array.isArray(e))return e}function yue(e,t){if(e==null)return{};var r=vue(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function vue(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Nue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sue(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,H9(n.key),n)}}function Eue(e,t,r){return t&&Sue(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function jue(e,t,r){return t=gv(t),wue(e,B9()?Reflect.construct(t,r||[],gv(e).constructor):t.apply(e,r))}function wue(e,t){if(t&&(_m(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Aue(e)}function Aue(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(B9=function(){return!!e})()}function gv(e){return gv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},gv(e)}function _ue(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ZC(e,t)}function ZC(e,t){return ZC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},ZC(e,t)}function G9(e,t,r){return t=H9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function H9(e){var t=Cue(e,"string");return _m(t)=="symbol"?t:t+""}function Cue(e,t){if(_m(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(_m(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var vh=(function(e){function t(){return Nue(this,t),jue(this,t,arguments)}return _ue(t,e),Eue(t,[{key:"render",value:function(){var n=this.props,s=n.offset,i=n.layout,o=n.width,l=n.dataKey,d=n.data,u=n.dataPointFormatter,m=n.xAxis,p=n.yAxis,g=yue(n,pue),x=Pt(g,!1);this.props.direction==="x"&&m.type!=="number"&&Tf();var y=d.map(function(N){var v=u(N,l),S=v.x,E=v.y,C=v.value,_=v.errorVal;if(!_)return null;var A=[],T,R;if(Array.isArray(_)){var I=mue(_,2);T=I[0],R=I[1]}else T=R=_;if(i==="vertical"){var k=m.scale,w=E+s,L=w+o,H=w-o,B=k(C-T),M=k(C+R);A.push({x1:M,y1:L,x2:M,y2:H}),A.push({x1:B,y1:w,x2:M,y2:w}),A.push({x1:B,y1:L,x2:B,y2:H})}else if(i==="horizontal"){var G=p.scale,$=S+s,z=$-o,U=$+o,Z=G(C-T),re=G(C+R);A.push({x1:z,y1:re,x2:U,y2:re}),A.push({x1:$,y1:Z,x2:$,y2:re}),A.push({x1:z,y1:Z,x2:U,y2:Z})}return Y.createElement(pr,hv({className:"recharts-errorBar",key:"bar-".concat(A.map(function(X){return"".concat(X.x1,"-").concat(X.x2,"-").concat(X.y1,"-").concat(X.y2)}))},x),A.map(function(X){return Y.createElement("line",hv({},X,{key:"line-".concat(X.x1,"-").concat(X.x2,"-").concat(X.y1,"-").concat(X.y2)}))}))});return Y.createElement(pr,{className:"recharts-errorBars"},y)}}])})(Y.Component);G9(vh,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});G9(vh,"displayName","ErrorBar");function _g(e){"@babel/helpers - typeof";return _g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_g(e)}function T$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Yu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?T$(Object(r),!0).forEach(function(n){Tue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Tue(e,t,r){return t=Oue(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Oue(e){var t=Rue(e,"string");return _g(t)=="symbol"?t:t+""}function Rue(e,t){if(_g(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(_g(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var K9=function(t){var r=t.children,n=t.formattedGraphicalItems,s=t.legendWidth,i=t.legendContent,o=xs(r,Kl);if(!o)return null;var l=Kl.defaultProps,d=l!==void 0?Yu(Yu({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:i==="children"?u=(n||[]).reduce(function(m,p){var g=p.item,x=p.props,y=x.sectors||x.data||[];return m.concat(y.map(function(N){return{type:o.props.iconType||g.props.legendType,value:N.name,color:N.fill,payload:N}}))},[]):u=(n||[]).map(function(m){var p=m.item,g=p.type.defaultProps,x=g!==void 0?Yu(Yu({},g),p.props):{},y=x.dataKey,N=x.name,v=x.legendType,S=x.hide;return{inactive:S,dataKey:y,type:d.iconType||v||"square",color:y3(p),value:N||y,payload:x}}),Yu(Yu(Yu({},d),Kl.getWithHeight(o,s)),{},{payload:u,item:o})};function Cg(e){"@babel/helpers - typeof";return Cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cg(e)}function O$(e){return Iue(e)||Due(e)||Pue(e)||kue()}function kue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pue(e,t){if(e){if(typeof e=="string")return JC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return JC(e,t)}}function Due(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Iue(e){if(Array.isArray(e))return JC(e)}function JC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function R$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Qn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?R$(Object(r),!0).forEach(function(n){nm(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nm(e,t,r){return t=Mue(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mue(e){var t=Lue(e,"string");return Cg(t)=="symbol"?t:t+""}function Lue(e,t){if(Cg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Cg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yn(e,t,r){return er(e)||er(t)?r:Pa(t)?ci(e,t,r):Yt(t)?t(e):r}function tg(e,t,r,n){var s=Ide(e,function(l){return yn(l,t)});if(r==="number"){var i=s.filter(function(l){return it(l)||parseFloat(l)});return i.length?[sN(i),Yd(i)]:[1/0,-1/0]}var o=n?s.filter(function(l){return!er(l)}):s;return o.map(function(l){return Pa(l)||l instanceof Date?l:""})}var $ue=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=n?.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var d=i.range,u=0;u<l;u++){var m=u>0?s[u-1].coordinate:s[l-1].coordinate,p=s[u].coordinate,g=u>=l-1?s[0].coordinate:s[u+1].coordinate,x=void 0;if(Ms(p-m)!==Ms(g-p)){var y=[];if(Ms(g-p)===Ms(d[1]-d[0])){x=g;var N=p+d[1]-d[0];y[0]=Math.min(N,(N+m)/2),y[1]=Math.max(N,(N+m)/2)}else{x=m;var v=g+d[1]-d[0];y[0]=Math.min(p,(v+p)/2),y[1]=Math.max(p,(v+p)/2)}var S=[Math.min(p,(x+p)/2),Math.max(p,(x+p)/2)];if(t>S[0]&&t<=S[1]||t>=y[0]&&t<=y[1]){o=s[u].index;break}}else{var E=Math.min(m,g),C=Math.max(m,g);if(t>(E+p)/2&&t<=(C+p)/2){o=s[u].index;break}}}else for(var _=0;_<l;_++)if(_===0&&t<=(n[_].coordinate+n[_+1].coordinate)/2||_>0&&_<l-1&&t>(n[_].coordinate+n[_-1].coordinate)/2&&t<=(n[_].coordinate+n[_+1].coordinate)/2||_===l-1&&t>(n[_].coordinate+n[_-1].coordinate)/2){o=n[_].index;break}return o},y3=function(t){var r,n=t,s=n.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Qn(Qn({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,d;switch(s){case"Line":d=o;break;case"Area":case"Radar":d=o&&o!=="none"?o:l;break;default:d=l;break}return d},Fue=function(t){var r=t.barSize,n=t.totalSize,s=t.stackGroups,i=s===void 0?{}:s;if(!i)return{};for(var o={},l=Object.keys(i),d=0,u=l.length;d<u;d++)for(var m=i[l[d]].stackGroups,p=Object.keys(m),g=0,x=p.length;g<x;g++){var y=m[p[g]],N=y.items,v=y.cateAxisId,S=N.filter(function(R){return Vc(R.type).indexOf("Bar")>=0});if(S&&S.length){var E=S[0].type.defaultProps,C=E!==void 0?Qn(Qn({},E),S[0].props):S[0].props,_=C.barSize,A=C[v];o[A]||(o[A]=[]);var T=er(_)?r:_;o[A].push({item:S[0],stackList:S.slice(1),barSize:er(T)?void 0:Ls(T,n,0)})}}return o},Uue=function(t){var r=t.barGap,n=t.barCategoryGap,s=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,d=o.length;if(d<1)return null;var u=Ls(r,s,0,!0),m,p=[];if(o[0].barSize===+o[0].barSize){var g=!1,x=s/d,y=o.reduce(function(_,A){return _+A.barSize||0},0);y+=(d-1)*u,y>=s&&(y-=(d-1)*u,u=0),y>=s&&x>0&&(g=!0,x*=.9,y=d*x);var N=(s-y)/2>>0,v={offset:N-u,size:0};m=o.reduce(function(_,A){var T={item:A.item,position:{offset:v.offset+v.size+u,size:g?x:A.barSize}},R=[].concat(O$(_),[T]);return v=R[R.length-1].position,A.stackList&&A.stackList.length&&A.stackList.forEach(function(I){R.push({item:I,position:v})}),R},p)}else{var S=Ls(n,s,0,!0);s-2*S-(d-1)*u<=0&&(u=0);var E=(s-2*S-(d-1)*u)/d;E>1&&(E>>=0);var C=l===+l?Math.min(E,l):E;m=o.reduce(function(_,A,T){var R=[].concat(O$(_),[{item:A.item,position:{offset:S+(E+u)*T+(E-C)/2,size:C}}]);return A.stackList&&A.stackList.length&&A.stackList.forEach(function(I){R.push({item:I,position:R[R.length-1].position})}),R},p)}return m},Bue=function(t,r,n,s){var i=n.children,o=n.width,l=n.margin,d=o-(l.left||0)-(l.right||0),u=K9({children:i,legendWidth:d});if(u){var m=s||{},p=m.width,g=m.height,x=u.align,y=u.verticalAlign,N=u.layout;if((N==="vertical"||N==="horizontal"&&y==="middle")&&x!=="center"&&it(t[x]))return Qn(Qn({},t),{},nm({},x,t[x]+(p||0)));if((N==="horizontal"||N==="vertical"&&x==="center")&&y!=="middle"&&it(t[y]))return Qn(Qn({},t),{},nm({},y,t[y]+(g||0)))}return t},Gue=function(t,r,n){return er(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},z9=function(t,r,n,s,i){var o=r.props.children,l=Us(o,vh).filter(function(u){return Gue(s,i,u.props.direction)});if(l&&l.length){var d=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,m){var p=yn(m,n);if(er(p))return u;var g=Array.isArray(p)?[sN(p),Yd(p)]:[p,p],x=d.reduce(function(y,N){var v=yn(m,N,0),S=g[0]-Math.abs(Array.isArray(v)?v[0]:v),E=g[1]+Math.abs(Array.isArray(v)?v[1]:v);return[Math.min(S,y[0]),Math.max(E,y[1])]},[1/0,-1/0]);return[Math.min(x[0],u[0]),Math.max(x[1],u[1])]},[1/0,-1/0])}return null},Hue=function(t,r,n,s,i){var o=r.map(function(l){return z9(t,l,n,i,s)}).filter(function(l){return!er(l)});return o&&o.length?o.reduce(function(l,d){return[Math.min(l[0],d[0]),Math.max(l[1],d[1])]},[1/0,-1/0]):null},q9=function(t,r,n,s,i){var o=r.map(function(d){var u=d.props.dataKey;return n==="number"&&u&&z9(t,d,u,s)||tg(t,u,n,i)});if(n==="number")return o.reduce(function(d,u){return[Math.min(d[0],u[0]),Math.max(d[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(d,u){for(var m=0,p=u.length;m<p;m++)l[u[m]]||(l[u[m]]=!0,d.push(u[m]));return d},[])},W9=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},V9=function(t,r,n,s){if(s)return t.map(function(d){return d.coordinate});var i,o,l=t.map(function(d){return d.coordinate===r&&(i=!0),d.coordinate===n&&(o=!0),d.coordinate});return i||l.push(r),o||l.push(n),l},qc=function(t,r,n){if(!t)return null;var s=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,d=t.realScaleType==="scaleBand"?s.bandwidth()/2:2,u=(r||n)&&o==="category"&&s.bandwidth?s.bandwidth()/d:0;if(u=t.axisType==="angleAxis"&&l?.length>=2?Ms(l[0]-l[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var m=(t.ticks||t.niceTicks).map(function(p){var g=i?i.indexOf(p):p;return{coordinate:s(g)+u,value:p,offset:u}});return m.filter(function(p){return!fu(p.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(p,g){return{coordinate:s(p)+u,value:p,index:g,offset:u}}):s.ticks&&!n?s.ticks(t.tickCount).map(function(p){return{coordinate:s(p)+u,value:p,offset:u}}):s.domain().map(function(p,g){return{coordinate:s(p)+u,value:i?i[p]:p,index:g,offset:u}})},jw=new WeakMap,Tb=function(t,r){if(typeof r!="function")return t;jw.has(t)||jw.set(t,new WeakMap);var n=jw.get(t);if(n.has(r))return n.get(r);var s=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,s),s},Y9=function(t,r,n){var s=t.scale,i=t.type,o=t.layout,l=t.axisType;if(s==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Ng(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:dv(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:eg(),realScaleType:"point"}:i==="category"?{scale:Ng(),realScaleType:"band"}:{scale:dv(),realScaleType:"linear"};if(wf(s)){var d="scale".concat(H1(s));return{scale:(g$[d]||eg)(),realScaleType:g$[d]?d:"point"}}return Yt(s)?{scale:s}:{scale:eg(),realScaleType:"point"}},k$=1e-4,X9=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,s=t.range(),i=Math.min(s[0],s[1])-k$,o=Math.max(s[0],s[1])+k$,l=t(r[0]),d=t(r[n-1]);(l<i||l>o||d<i||d>o)&&t.domain([r[0],r[n-1]])}},Kue=function(t,r){if(!t)return null;for(var n=0,s=t.length;n<s;n++)if(t[n].item===r)return t[n].position;return null},zue=function(t,r){if(!r||r.length!==2||!it(r[0])||!it(r[1]))return t;var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!it(t[0])||t[0]<n)&&(i[0]=n),(!it(t[1])||t[1]>s)&&(i[1]=s),i[0]>s&&(i[0]=s),i[1]<n&&(i[1]=n),i},que=function(t){var r=t.length;if(!(r<=0))for(var n=0,s=t[0].length;n<s;++n)for(var i=0,o=0,l=0;l<r;++l){var d=fu(t[l][n][1])?t[l][n][0]:t[l][n][1];d>=0?(t[l][n][0]=i,t[l][n][1]=i+d,i=t[l][n][1]):(t[l][n][0]=o,t[l][n][1]=o+d,o=t[l][n][1])}},Wue=function(t){var r=t.length;if(!(r<=0))for(var n=0,s=t[0].length;n<s;++n)for(var i=0,o=0;o<r;++o){var l=fu(t[o][n][1])?t[o][n][0]:t[o][n][1];l>=0?(t[o][n][0]=i,t[o][n][1]=i+l,i=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}},Vue={sign:que,expand:Pae,none:bm,silhouette:Dae,wiggle:Iae,positive:Wue},Yue=function(t,r,n){var s=r.map(function(l){return l.props.dataKey}),i=Vue[n],o=kae().keys(s).value(function(l,d){return+yn(l,d,0)}).order(TC).offset(i);return o(t)},Xue=function(t,r,n,s,i,o){if(!t)return null;var l=o?r.reverse():r,d={},u=l.reduce(function(p,g){var x,y=(x=g.type)!==null&&x!==void 0&&x.defaultProps?Qn(Qn({},g.type.defaultProps),g.props):g.props,N=y.stackId,v=y.hide;if(v)return p;var S=y[n],E=p[S]||{hasStack:!1,stackGroups:{}};if(Pa(N)){var C=E.stackGroups[N]||{numericAxisId:n,cateAxisId:s,items:[]};C.items.push(g),E.hasStack=!0,E.stackGroups[N]=C}else E.stackGroups[ld("_stackId_")]={numericAxisId:n,cateAxisId:s,items:[g]};return Qn(Qn({},p),{},nm({},S,E))},d),m={};return Object.keys(u).reduce(function(p,g){var x=u[g];if(x.hasStack){var y={};x.stackGroups=Object.keys(x.stackGroups).reduce(function(N,v){var S=x.stackGroups[v];return Qn(Qn({},N),{},nm({},v,{numericAxisId:n,cateAxisId:s,items:S.items,stackedData:Yue(t,S.items,i)}))},y)}return Qn(Qn({},p),{},nm({},g,x))},m)},Q9=function(t,r){var n=r.realScaleType,s=r.type,i=r.tickCount,o=r.originalDomain,l=r.allowDecimals,d=n||r.scale;if(d!=="auto"&&d!=="linear")return null;if(i&&s==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var m=due(u,i,l);return t.domain([sN(m),Yd(m)]),{niceTicks:m}}if(i&&s==="number"){var p=t.domain(),g=uue(p,i,l);return{niceTicks:g}}return null};function Cm(e){var t=e.axis,r=e.ticks,n=e.bandSize,s=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!er(s[t.dataKey])){var l=Hy(r,"value",s[t.dataKey]);if(l)return l.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var d=yn(s,er(o)?t.dataKey:o);return er(d)?null:t.scale(d)}var P$=function(t){var r=t.axis,n=t.ticks,s=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(r.type==="category")return n[l]?n[l].coordinate+s:null;var d=yn(o,r.dataKey,r.domain[l]);return er(d)?null:r.scale(d)-i/2+s},Que=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var s=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return s<=0&&i>=0?0:i<0?i:s}return n[0]},Zue=function(t,r){var n,s=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Qn(Qn({},t.type.defaultProps),t.props):t.props,i=s.stackId;if(Pa(i)){var o=r[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},Jue=function(t){return t.reduce(function(r,n){return[sN(n.concat([r[0]]).filter(it)),Yd(n.concat([r[1]]).filter(it))]},[1/0,-1/0])},Z9=function(t,r,n){return Object.keys(t).reduce(function(s,i){var o=t[i],l=o.stackedData,d=l.reduce(function(u,m){var p=Jue(m.slice(r,n+1));return[Math.min(u[0],p[0]),Math.max(u[1],p[1])]},[1/0,-1/0]);return[Math.min(d[0],s[0]),Math.max(d[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},D$=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,I$=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,eT=function(t,r,n){if(Yt(t))return t(r,n);if(!Array.isArray(t))return r;var s=[];if(it(t[0]))s[0]=n?t[0]:Math.min(t[0],r[0]);else if(D$.test(t[0])){var i=+D$.exec(t[0])[1];s[0]=r[0]-i}else Yt(t[0])?s[0]=t[0](r[0]):s[0]=r[0];if(it(t[1]))s[1]=n?t[1]:Math.max(t[1],r[1]);else if(I$.test(t[1])){var o=+I$.exec(t[1])[1];s[1]=r[1]+o}else Yt(t[1])?s[1]=t[1](r[1]):s[1]=r[1];return s},xv=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var s=t.scale.bandwidth();if(!n||s>0)return s}if(t&&r&&r.length>=2){for(var i=zR(r,function(p){return p.coordinate}),o=1/0,l=1,d=i.length;l<d;l++){var u=i[l],m=i[l-1];o=Math.min((u.coordinate||0)-(m.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},M$=function(t,r,n){return!t||!t.length||ou(t,ci(n,"type.defaultProps.domain"))?r:t},J9=function(t,r){var n=t.type.defaultProps?Qn(Qn({},t.type.defaultProps),t.props):t.props,s=n.dataKey,i=n.name,o=n.unit,l=n.formatter,d=n.tooltipType,u=n.chartType,m=n.hide;return Qn(Qn({},Pt(t,!1)),{},{dataKey:s,unit:o,formatter:l,name:i||s,color:y3(t),value:yn(r,s),type:d,payload:r,chartType:u,hide:m})};function Tg(e){"@babel/helpers - typeof";return Tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tg(e)}function L$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function $c(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?L$(Object(r),!0).forEach(function(n){eH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eH(e,t,r){return t=efe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function efe(e){var t=tfe(e,"string");return Tg(t)=="symbol"?t:t+""}function tfe(e,t){if(Tg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Tg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rfe(e,t){return ife(e)||sfe(e,t)||afe(e,t)||nfe()}function nfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function afe(e,t){if(e){if(typeof e=="string")return $$(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $$(e,t)}}function $$(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function sfe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);d=!0);}catch(m){u=!0,s=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function ife(e){if(Array.isArray(e))return e}var bv=Math.PI/180,ofe=function(t){return t*180/Math.PI},_n=function(t,r,n,s){return{x:t+Math.cos(-bv*s)*n,y:r+Math.sin(-bv*s)*n}},tH=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},lfe=function(t,r,n,s,i){var o=t.width,l=t.height,d=t.startAngle,u=t.endAngle,m=Ls(t.cx,o,o/2),p=Ls(t.cy,l,l/2),g=tH(o,l,n),x=Ls(t.innerRadius,g,0),y=Ls(t.outerRadius,g,g*.8),N=Object.keys(r);return N.reduce(function(v,S){var E=r[S],C=E.domain,_=E.reversed,A;if(er(E.range))s==="angleAxis"?A=[d,u]:s==="radiusAxis"&&(A=[x,y]),_&&(A=[A[1],A[0]]);else{A=E.range;var T=A,R=rfe(T,2);d=R[0],u=R[1]}var I=Y9(E,i),k=I.realScaleType,w=I.scale;w.domain(C).range(A),X9(w);var L=Q9(w,$c($c({},E),{},{realScaleType:k})),H=$c($c($c({},E),L),{},{range:A,radius:y,realScaleType:k,scale:w,cx:m,cy:p,innerRadius:x,outerRadius:y,startAngle:d,endAngle:u});return $c($c({},v),{},eH({},S,H))},{})},cfe=function(t,r){var n=t.x,s=t.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(s-o,2))},dfe=function(t,r){var n=t.x,s=t.y,i=r.cx,o=r.cy,l=cfe({x:n,y:s},{x:i,y:o});if(l<=0)return{radius:l};var d=(n-i)/l,u=Math.acos(d);return s>o&&(u=2*Math.PI-u),{radius:l,angle:ofe(u),angleInRadian:u}},ufe=function(t){var r=t.startAngle,n=t.endAngle,s=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(s,i);return{startAngle:r-o*360,endAngle:n-o*360}},ffe=function(t,r){var n=r.startAngle,s=r.endAngle,i=Math.floor(n/360),o=Math.floor(s/360),l=Math.min(i,o);return t+l*360},F$=function(t,r){var n=t.x,s=t.y,i=dfe({x:n,y:s},r),o=i.radius,l=i.angle,d=r.innerRadius,u=r.outerRadius;if(o<d||o>u)return!1;if(o===0)return!0;var m=ufe(r),p=m.startAngle,g=m.endAngle,x=l,y;if(p<=g){for(;x>g;)x-=360;for(;x<p;)x+=360;y=x>=p&&x<=g}else{for(;x>p;)x-=360;for(;x<g;)x+=360;y=x>=g&&x<=p}return y?$c($c({},r),{},{radius:o,angle:ffe(x,r)}):null},rH=function(t){return!h.isValidElement(t)&&!Yt(t)&&typeof t!="boolean"?t.className:""};function Og(e){"@babel/helpers - typeof";return Og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Og(e)}var pfe=["offset"];function mfe(e){return bfe(e)||xfe(e)||gfe(e)||hfe()}function hfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gfe(e,t){if(e){if(typeof e=="string")return tT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tT(e,t)}}function xfe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function bfe(e){if(Array.isArray(e))return tT(e)}function tT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function yfe(e,t){if(e==null)return{};var r=vfe(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function vfe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function U$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Aa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?U$(Object(r),!0).forEach(function(n){Nfe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Nfe(e,t,r){return t=Sfe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sfe(e){var t=Efe(e,"string");return Og(t)=="symbol"?t:t+""}function Efe(e,t){if(Og(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Og(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Rg(){return Rg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rg.apply(this,arguments)}var jfe=function(t){var r=t.value,n=t.formatter,s=er(t.children)?r:t.children;return Yt(n)?n(s):s},wfe=function(t,r){var n=Ms(r-t),s=Math.min(Math.abs(r-t),360);return n*s},Afe=function(t,r,n){var s=t.position,i=t.viewBox,o=t.offset,l=t.className,d=i,u=d.cx,m=d.cy,p=d.innerRadius,g=d.outerRadius,x=d.startAngle,y=d.endAngle,N=d.clockWise,v=(p+g)/2,S=wfe(x,y),E=S>=0?1:-1,C,_;s==="insideStart"?(C=x+E*o,_=N):s==="insideEnd"?(C=y-E*o,_=!N):s==="end"&&(C=y+E*o,_=N),_=S<=0?_:!_;var A=_n(u,m,v,C),T=_n(u,m,v,C+(_?1:-1)*359),R="M".concat(A.x,",").concat(A.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(_?0:1,`,
    `).concat(T.x,",").concat(T.y),I=er(t.id)?ld("recharts-radial-line-"):t.id;return Y.createElement("text",Rg({},n,{dominantBaseline:"central",className:cr("recharts-radial-bar-label",l)}),Y.createElement("defs",null,Y.createElement("path",{id:I,d:R})),Y.createElement("textPath",{xlinkHref:"#".concat(I)},r))},_fe=function(t){var r=t.viewBox,n=t.offset,s=t.position,i=r,o=i.cx,l=i.cy,d=i.innerRadius,u=i.outerRadius,m=i.startAngle,p=i.endAngle,g=(m+p)/2;if(s==="outside"){var x=_n(o,l,u+n,g),y=x.x,N=x.y;return{x:y,y:N,textAnchor:y>=o?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var v=(d+u)/2,S=_n(o,l,v,g),E=S.x,C=S.y;return{x:E,y:C,textAnchor:"middle",verticalAnchor:"middle"}},Cfe=function(t){var r=t.viewBox,n=t.parentViewBox,s=t.offset,i=t.position,o=r,l=o.x,d=o.y,u=o.width,m=o.height,p=m>=0?1:-1,g=p*s,x=p>0?"end":"start",y=p>0?"start":"end",N=u>=0?1:-1,v=N*s,S=N>0?"end":"start",E=N>0?"start":"end";if(i==="top"){var C={x:l+u/2,y:d-p*s,textAnchor:"middle",verticalAnchor:x};return Aa(Aa({},C),n?{height:Math.max(d-n.y,0),width:u}:{})}if(i==="bottom"){var _={x:l+u/2,y:d+m+g,textAnchor:"middle",verticalAnchor:y};return Aa(Aa({},_),n?{height:Math.max(n.y+n.height-(d+m),0),width:u}:{})}if(i==="left"){var A={x:l-v,y:d+m/2,textAnchor:S,verticalAnchor:"middle"};return Aa(Aa({},A),n?{width:Math.max(A.x-n.x,0),height:m}:{})}if(i==="right"){var T={x:l+u+v,y:d+m/2,textAnchor:E,verticalAnchor:"middle"};return Aa(Aa({},T),n?{width:Math.max(n.x+n.width-T.x,0),height:m}:{})}var R=n?{width:u,height:m}:{};return i==="insideLeft"?Aa({x:l+v,y:d+m/2,textAnchor:E,verticalAnchor:"middle"},R):i==="insideRight"?Aa({x:l+u-v,y:d+m/2,textAnchor:S,verticalAnchor:"middle"},R):i==="insideTop"?Aa({x:l+u/2,y:d+g,textAnchor:"middle",verticalAnchor:y},R):i==="insideBottom"?Aa({x:l+u/2,y:d+m-g,textAnchor:"middle",verticalAnchor:x},R):i==="insideTopLeft"?Aa({x:l+v,y:d+g,textAnchor:E,verticalAnchor:y},R):i==="insideTopRight"?Aa({x:l+u-v,y:d+g,textAnchor:S,verticalAnchor:y},R):i==="insideBottomLeft"?Aa({x:l+v,y:d+m-g,textAnchor:E,verticalAnchor:x},R):i==="insideBottomRight"?Aa({x:l+u-v,y:d+m-g,textAnchor:S,verticalAnchor:x},R):ph(i)&&(it(i.x)||cf(i.x))&&(it(i.y)||cf(i.y))?Aa({x:l+Ls(i.x,u),y:d+Ls(i.y,m),textAnchor:"end",verticalAnchor:"end"},R):Aa({x:l+u/2,y:d+m/2,textAnchor:"middle",verticalAnchor:"middle"},R)},Tfe=function(t){return"cx"in t&&it(t.cx)};function Ka(e){var t=e.offset,r=t===void 0?5:t,n=yfe(e,pfe),s=Aa({offset:r},n),i=s.viewBox,o=s.position,l=s.value,d=s.children,u=s.content,m=s.className,p=m===void 0?"":m,g=s.textBreakAll;if(!i||er(l)&&er(d)&&!h.isValidElement(u)&&!Yt(u))return null;if(h.isValidElement(u))return h.cloneElement(u,s);var x;if(Yt(u)){if(x=h.createElement(u,s),h.isValidElement(x))return x}else x=jfe(s);var y=Tfe(i),N=Pt(s,!0);if(y&&(o==="insideStart"||o==="insideEnd"||o==="end"))return Afe(s,x,N);var v=y?_fe(s):Cfe(s);return Y.createElement(Af,Rg({className:cr("recharts-label",p)},N,v,{breakAll:g}),x)}Ka.displayName="Label";var nH=function(t){var r=t.cx,n=t.cy,s=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,d=t.radius,u=t.innerRadius,m=t.outerRadius,p=t.x,g=t.y,x=t.top,y=t.left,N=t.width,v=t.height,S=t.clockWise,E=t.labelViewBox;if(E)return E;if(it(N)&&it(v)){if(it(p)&&it(g))return{x:p,y:g,width:N,height:v};if(it(x)&&it(y))return{x,y,width:N,height:v}}return it(p)&&it(g)?{x:p,y:g,width:0,height:0}:it(r)&&it(n)?{cx:r,cy:n,startAngle:i||s||0,endAngle:o||s||0,innerRadius:u||0,outerRadius:m||d||l||0,clockWise:S}:t.viewBox?t.viewBox:{}},Ofe=function(t,r){return t?t===!0?Y.createElement(Ka,{key:"label-implicit",viewBox:r}):Pa(t)?Y.createElement(Ka,{key:"label-implicit",viewBox:r,value:t}):h.isValidElement(t)?t.type===Ka?h.cloneElement(t,{key:"label-implicit",viewBox:r}):Y.createElement(Ka,{key:"label-implicit",content:t,viewBox:r}):Yt(t)?Y.createElement(Ka,{key:"label-implicit",content:t,viewBox:r}):ph(t)?Y.createElement(Ka,Rg({viewBox:r},t,{key:"label-implicit"})):null:null},Rfe=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var s=t.children,i=nH(t),o=Us(s,Ka).map(function(d,u){return h.cloneElement(d,{viewBox:r||i,key:"label-".concat(u)})});if(!n)return o;var l=Ofe(t.label,r||i);return[l].concat(mfe(o))};Ka.parseViewBox=nH;Ka.renderCallByParent=Rfe;var ww,B$;function aH(){if(B$)return ww;B$=1;function e(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}return ww=e,ww}var kfe=aH();const Pfe=Zr(kfe);function kg(e){"@babel/helpers - typeof";return kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kg(e)}var Dfe=["valueAccessor"],Ife=["data","dataKey","clockWise","id","textBreakAll"];function Mfe(e){return Ufe(e)||Ffe(e)||$fe(e)||Lfe()}function Lfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $fe(e,t){if(e){if(typeof e=="string")return rT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rT(e,t)}}function Ffe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ufe(e){if(Array.isArray(e))return rT(e)}function rT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function yv(){return yv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yv.apply(this,arguments)}function G$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function H$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?G$(Object(r),!0).forEach(function(n){Bfe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Bfe(e,t,r){return t=Gfe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gfe(e){var t=Hfe(e,"string");return kg(t)=="symbol"?t:t+""}function Hfe(e,t){if(kg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(kg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function K$(e,t){if(e==null)return{};var r=Kfe(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Kfe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var zfe=function(t){return Array.isArray(t.value)?Pfe(t.value):t.value};function Ns(e){var t=e.valueAccessor,r=t===void 0?zfe:t,n=K$(e,Dfe),s=n.data,i=n.dataKey,o=n.clockWise,l=n.id,d=n.textBreakAll,u=K$(n,Ife);return!s||!s.length?null:Y.createElement(pr,{className:"recharts-label-list"},s.map(function(m,p){var g=er(i)?r(m,p):yn(m&&m.payload,i),x=er(l)?{}:{id:"".concat(l,"-").concat(p)};return Y.createElement(Ka,yv({},Pt(m,!0),u,x,{parentViewBox:m.parentViewBox,value:g,textBreakAll:d,viewBox:Ka.parseViewBox(er(o)?m:H$(H$({},m),{},{clockWise:o})),key:"label-".concat(p),index:p}))}))}Ns.displayName="LabelList";function qfe(e,t){return e?e===!0?Y.createElement(Ns,{key:"labelList-implicit",data:t}):Y.isValidElement(e)||Yt(e)?Y.createElement(Ns,{key:"labelList-implicit",data:t,content:e}):ph(e)?Y.createElement(Ns,yv({data:t},e,{key:"labelList-implicit"})):null:null}function Wfe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,s=Us(n,Ns).map(function(o,l){return h.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!r)return s;var i=qfe(e.label,t);return[i].concat(Mfe(s))}Ns.renderCallByParent=Wfe;function Pg(e){"@babel/helpers - typeof";return Pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pg(e)}function nT(){return nT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nT.apply(this,arguments)}function z$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function q$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?z$(Object(r),!0).forEach(function(n){Vfe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Vfe(e,t,r){return t=Yfe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yfe(e){var t=Xfe(e,"string");return Pg(t)=="symbol"?t:t+""}function Xfe(e,t){if(Pg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Pg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Qfe=function(t,r){var n=Ms(r-t),s=Math.min(Math.abs(r-t),359.999);return n*s},Ob=function(t){var r=t.cx,n=t.cy,s=t.radius,i=t.angle,o=t.sign,l=t.isExternal,d=t.cornerRadius,u=t.cornerIsExternal,m=d*(l?1:-1)+s,p=Math.asin(d/m)/bv,g=u?i:i+o*p,x=_n(r,n,m,g),y=_n(r,n,s,g),N=u?i-o*p:i,v=_n(r,n,m*Math.cos(p*bv),N);return{center:x,circleTangency:y,lineTangency:v,theta:p}},sH=function(t){var r=t.cx,n=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,d=Qfe(o,l),u=o+d,m=_n(r,n,i,o),p=_n(r,n,i,u),g="M ".concat(m.x,",").concat(m.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(d)>180),",").concat(+(o>u),`,
    `).concat(p.x,",").concat(p.y,`
  `);if(s>0){var x=_n(r,n,s,o),y=_n(r,n,s,u);g+="L ".concat(y.x,",").concat(y.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(d)>180),",").concat(+(o<=u),`,
            `).concat(x.x,",").concat(x.y," Z")}else g+="L ".concat(r,",").concat(n," Z");return g},Zfe=function(t){var r=t.cx,n=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,d=t.cornerIsExternal,u=t.startAngle,m=t.endAngle,p=Ms(m-u),g=Ob({cx:r,cy:n,radius:i,angle:u,sign:p,cornerRadius:o,cornerIsExternal:d}),x=g.circleTangency,y=g.lineTangency,N=g.theta,v=Ob({cx:r,cy:n,radius:i,angle:m,sign:-p,cornerRadius:o,cornerIsExternal:d}),S=v.circleTangency,E=v.lineTangency,C=v.theta,_=d?Math.abs(u-m):Math.abs(u-m)-N-C;if(_<0)return l?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):sH({cx:r,cy:n,innerRadius:s,outerRadius:i,startAngle:u,endAngle:m});var A="M ".concat(y.x,",").concat(y.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(_>180),",").concat(+(p<0),",").concat(S.x,",").concat(S.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(E.x,",").concat(E.y,`
  `);if(s>0){var T=Ob({cx:r,cy:n,radius:s,angle:u,sign:p,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),R=T.circleTangency,I=T.lineTangency,k=T.theta,w=Ob({cx:r,cy:n,radius:s,angle:m,sign:-p,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),L=w.circleTangency,H=w.lineTangency,B=w.theta,M=d?Math.abs(u-m):Math.abs(u-m)-k-B;if(M<0&&o===0)return"".concat(A,"L").concat(r,",").concat(n,"Z");A+="L".concat(H.x,",").concat(H.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(L.x,",").concat(L.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(M>180),",").concat(+(p>0),",").concat(R.x,",").concat(R.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(I.x,",").concat(I.y,"Z")}else A+="L".concat(r,",").concat(n,"Z");return A},Jfe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},iH=function(t){var r=q$(q$({},Jfe),t),n=r.cx,s=r.cy,i=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,d=r.forceCornerRadius,u=r.cornerIsExternal,m=r.startAngle,p=r.endAngle,g=r.className;if(o<i||m===p)return null;var x=cr("recharts-sector",g),y=o-i,N=Ls(l,y,0,!0),v;return N>0&&Math.abs(m-p)<360?v=Zfe({cx:n,cy:s,innerRadius:i,outerRadius:o,cornerRadius:Math.min(N,y/2),forceCornerRadius:d,cornerIsExternal:u,startAngle:m,endAngle:p}):v=sH({cx:n,cy:s,innerRadius:i,outerRadius:o,startAngle:m,endAngle:p}),Y.createElement("path",nT({},Pt(r,!0),{className:x,d:v,role:"img"}))};function Dg(e){"@babel/helpers - typeof";return Dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dg(e)}function aT(){return aT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},aT.apply(this,arguments)}function W$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function V$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?W$(Object(r),!0).forEach(function(n){epe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function epe(e,t,r){return t=tpe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tpe(e){var t=rpe(e,"string");return Dg(t)=="symbol"?t:t+""}function rpe(e,t){if(Dg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Dg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Y$={curveBasisClosed:Nae,curveBasisOpen:Sae,curveBasis:vae,curveBumpX:iae,curveBumpY:oae,curveLinearClosed:Eae,curveLinear:z1,curveMonotoneX:jae,curveMonotoneY:wae,curveNatural:Aae,curveStep:_ae,curveStepAfter:Tae,curveStepBefore:Cae},Rb=function(t){return t.x===+t.x&&t.y===+t.y},h0=function(t){return t.x},g0=function(t){return t.y},npe=function(t,r){if(Yt(t))return t;var n="curve".concat(H1(t));return(n==="curveMonotone"||n==="curveBump")&&r?Y$["".concat(n).concat(r==="vertical"?"Y":"X")]:Y$[n]||z1},ape=function(t){var r=t.type,n=r===void 0?"linear":r,s=t.points,i=s===void 0?[]:s,o=t.baseLine,l=t.layout,d=t.connectNulls,u=d===void 0?!1:d,m=npe(n,l),p=u?i.filter(function(N){return Rb(N)}):i,g;if(Array.isArray(o)){var x=u?o.filter(function(N){return Rb(N)}):o,y=p.map(function(N,v){return V$(V$({},N),{},{base:x[v]})});return l==="vertical"?g=Nb().y(g0).x1(h0).x0(function(N){return N.base.x}):g=Nb().x(h0).y1(g0).y0(function(N){return N.base.y}),g.defined(Rb).curve(m),g(y)}return l==="vertical"&&it(o)?g=Nb().y(g0).x1(h0).x0(o):it(o)?g=Nb().x(h0).y1(g0).y0(o):g=tG().x(h0).y(g0),g.defined(Rb).curve(m),g(p)},au=function(t){var r=t.className,n=t.points,s=t.path,i=t.pathRef;if((!n||!n.length)&&!s)return null;var o=n&&n.length?ape(t):s;return h.createElement("path",aT({},Pt(t,!1),Ky(t),{className:cr("recharts-curve",r),d:o,ref:i}))},Aw={exports:{}},_w,X$;function spe(){if(X$)return _w;X$=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return _w=e,_w}var Cw,Q$;function ipe(){if(Q$)return Cw;Q$=1;var e=spe();function t(){}function r(){}return r.resetWarningCache=t,Cw=function(){function n(o,l,d,u,m,p){if(p!==e){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}n.isRequired=n;function s(){return n}var i={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:r,resetWarningCache:t};return i.PropTypes=i,i},Cw}var Z$;function ope(){return Z$||(Z$=1,Aw.exports=ipe()()),Aw.exports}var lpe=ope();const tn=Zr(lpe),{getOwnPropertyNames:cpe,getOwnPropertySymbols:dpe}=Object,{hasOwnProperty:upe}=Object.prototype;function Tw(e,t){return function(n,s,i){return e(n,s,i)&&t(n,s,i)}}function kb(e){return function(r,n,s){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,s);const{cache:i}=s,o=i.get(r),l=i.get(n);if(o&&l)return o===n&&l===r;i.set(r,n),i.set(n,r);const d=e(r,n,s);return i.delete(r),i.delete(n),d}}function fpe(e){return e?.[Symbol.toStringTag]}function J$(e){return cpe(e).concat(dpe(e))}const ppe=Object.hasOwn||((e,t)=>upe.call(e,t));function Uf(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const mpe="__v",hpe="__o",gpe="_owner",{getOwnPropertyDescriptor:e4,keys:t4}=Object;function xpe(e,t){return e.byteLength===t.byteLength&&vv(new Uint8Array(e),new Uint8Array(t))}function bpe(e,t,r){let n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function ype(e,t){return e.byteLength===t.byteLength&&vv(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function vpe(e,t){return Uf(e.getTime(),t.getTime())}function Npe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function Spe(e,t){return e===t}function r4(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const s=new Array(n),i=e.entries();let o,l,d=0;for(;(o=i.next())&&!o.done;){const u=t.entries();let m=!1,p=0;for(;(l=u.next())&&!l.done;){if(s[p]){p++;continue}const g=o.value,x=l.value;if(r.equals(g[0],x[0],d,p,e,t,r)&&r.equals(g[1],x[1],g[0],x[0],e,t,r)){m=s[p]=!0;break}p++}if(!m)return!1;d++}return!0}const Epe=Uf;function jpe(e,t,r){const n=t4(e);let s=n.length;if(t4(t).length!==s)return!1;for(;s-- >0;)if(!oH(e,t,r,n[s]))return!1;return!0}function x0(e,t,r){const n=J$(e);let s=n.length;if(J$(t).length!==s)return!1;let i,o,l;for(;s-- >0;)if(i=n[s],!oH(e,t,r,i)||(o=e4(e,i),l=e4(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function wpe(e,t){return Uf(e.valueOf(),t.valueOf())}function Ape(e,t){return e.source===t.source&&e.flags===t.flags}function n4(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const s=new Array(n),i=e.values();let o,l;for(;(o=i.next())&&!o.done;){const d=t.values();let u=!1,m=0;for(;(l=d.next())&&!l.done;){if(!s[m]&&r.equals(o.value,l.value,o.value,l.value,e,t,r)){u=s[m]=!0;break}m++}if(!u)return!1}return!0}function vv(e,t){let r=e.byteLength;if(t.byteLength!==r||e.byteOffset!==t.byteOffset)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function _pe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function oH(e,t,r,n){return(n===gpe||n===hpe||n===mpe)&&(e.$$typeof||t.$$typeof)?!0:ppe(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}const Cpe="[object ArrayBuffer]",Tpe="[object Arguments]",Ope="[object Boolean]",Rpe="[object DataView]",kpe="[object Date]",Ppe="[object Error]",Dpe="[object Map]",Ipe="[object Number]",Mpe="[object Object]",Lpe="[object RegExp]",$pe="[object Set]",Fpe="[object String]",Upe={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},Bpe="[object URL]",Gpe=Object.prototype.toString;function Hpe({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:s,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:l,areObjectsEqual:d,arePrimitiveWrappersEqual:u,areRegExpsEqual:m,areSetsEqual:p,areTypedArraysEqual:g,areUrlsEqual:x,unknownTagComparators:y}){return function(v,S,E){if(v===S)return!0;if(v==null||S==null)return!1;const C=typeof v;if(C!==typeof S)return!1;if(C!=="object")return C==="number"?l(v,S,E):C==="function"?i(v,S,E):!1;const _=v.constructor;if(_!==S.constructor)return!1;if(_===Object)return d(v,S,E);if(Array.isArray(v))return t(v,S,E);if(_===Date)return n(v,S,E);if(_===RegExp)return m(v,S,E);if(_===Map)return o(v,S,E);if(_===Set)return p(v,S,E);const A=Gpe.call(v);if(A===kpe)return n(v,S,E);if(A===Lpe)return m(v,S,E);if(A===Dpe)return o(v,S,E);if(A===$pe)return p(v,S,E);if(A===Mpe)return typeof v.then!="function"&&typeof S.then!="function"&&d(v,S,E);if(A===Bpe)return x(v,S,E);if(A===Ppe)return s(v,S,E);if(A===Tpe)return d(v,S,E);if(Upe[A])return g(v,S,E);if(A===Cpe)return e(v,S,E);if(A===Rpe)return r(v,S,E);if(A===Ope||A===Ipe||A===Fpe)return u(v,S,E);if(y){let T=y[A];if(!T){const R=fpe(v);R&&(T=y[R])}if(T)return T(v,S,E)}return!1}}function Kpe({circular:e,createCustomConfig:t,strict:r}){let n={areArrayBuffersEqual:xpe,areArraysEqual:r?x0:bpe,areDataViewsEqual:ype,areDatesEqual:vpe,areErrorsEqual:Npe,areFunctionsEqual:Spe,areMapsEqual:r?Tw(r4,x0):r4,areNumbersEqual:Epe,areObjectsEqual:r?x0:jpe,arePrimitiveWrappersEqual:wpe,areRegExpsEqual:Ape,areSetsEqual:r?Tw(n4,x0):n4,areTypedArraysEqual:r?Tw(vv,x0):vv,areUrlsEqual:_pe,unknownTagComparators:void 0};if(t&&(n=Object.assign({},n,t(n))),e){const s=kb(n.areArraysEqual),i=kb(n.areMapsEqual),o=kb(n.areObjectsEqual),l=kb(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:s,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:l})}return n}function zpe(e){return function(t,r,n,s,i,o,l){return e(t,r,l)}}function qpe({circular:e,comparator:t,createState:r,equals:n,strict:s}){if(r)return function(l,d){const{cache:u=e?new WeakMap:void 0,meta:m}=r();return t(l,d,{cache:u,equals:n,meta:m,strict:s})};if(e)return function(l,d){return t(l,d,{cache:new WeakMap,equals:n,meta:void 0,strict:s})};const i={cache:void 0,equals:n,meta:void 0,strict:s};return function(l,d){return t(l,d,i)}}const Wpe=hu();hu({strict:!0});hu({circular:!0});hu({circular:!0,strict:!0});hu({createInternalComparator:()=>Uf});hu({strict:!0,createInternalComparator:()=>Uf});hu({circular:!0,createInternalComparator:()=>Uf});hu({circular:!0,createInternalComparator:()=>Uf,strict:!0});function hu(e={}){const{circular:t=!1,createInternalComparator:r,createState:n,strict:s=!1}=e,i=Kpe(e),o=Hpe(i),l=r?r(o):zpe(o);return qpe({circular:t,comparator:o,createState:n,equals:l,strict:s})}function Vpe(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function a4(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function s(i){r<0&&(r=i),i-r>t?(e(i),r=-1):Vpe(s)};requestAnimationFrame(n)}function sT(e){"@babel/helpers - typeof";return sT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sT(e)}function Ype(e){return Jpe(e)||Zpe(e)||Qpe(e)||Xpe()}function Xpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qpe(e,t){if(e){if(typeof e=="string")return s4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s4(e,t)}}function s4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Zpe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Jpe(e){if(Array.isArray(e))return e}function eme(){var e={},t=function(){return null},r=!1,n=function s(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,l=Ype(o),d=l[0],u=l.slice(1);if(typeof d=="number"){a4(s.bind(null,u),d);return}s(d),a4(s.bind(null,u));return}sT(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function Ig(e){"@babel/helpers - typeof";return Ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ig(e)}function i4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function o4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i4(Object(r),!0).forEach(function(n){lH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lH(e,t,r){return t=tme(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tme(e){var t=rme(e,"string");return Ig(t)==="symbol"?t:String(t)}function rme(e,t){if(Ig(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ig(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nme=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,s){return n.filter(function(i){return s.includes(i)})})},ame=function(t){return t},sme=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},rg=function(t,r){return Object.keys(r).reduce(function(n,s){return o4(o4({},n),{},lH({},s,t(s,r[s])))},{})},l4=function(t,r,n){return t.map(function(s){return"".concat(sme(s)," ").concat(r,"ms ").concat(n)}).join(",")};function ime(e,t){return cme(e)||lme(e,t)||cH(e,t)||ome()}function ome(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lme(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);d=!0);}catch(m){u=!0,s=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function cme(e){if(Array.isArray(e))return e}function dme(e){return pme(e)||fme(e)||cH(e)||ume()}function ume(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cH(e,t){if(e){if(typeof e=="string")return iT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iT(e,t)}}function fme(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function pme(e){if(Array.isArray(e))return iT(e)}function iT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Nv=1e-4,dH=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},uH=function(t,r){return t.map(function(n,s){return n*Math.pow(r,s)}).reduce(function(n,s){return n+s})},c4=function(t,r){return function(n){var s=dH(t,r);return uH(s,n)}},mme=function(t,r){return function(n){var s=dH(t,r),i=[].concat(dme(s.map(function(o,l){return o*l}).slice(1)),[0]);return uH(i,n)}},d4=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r[0],i=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":s=0,i=0,o=1,l=1;break;case"ease":s=.25,i=.1,o=.25,l=1;break;case"ease-in":s=.42,i=0,o=1,l=1;break;case"ease-out":s=.42,i=0,o=.58,l=1;break;case"ease-in-out":s=0,i=0,o=.58,l=1;break;default:{var d=r[0].split("(");if(d[0]==="cubic-bezier"&&d[1].split(")")[0].split(",").length===4){var u=d[1].split(")")[0].split(",").map(function(v){return parseFloat(v)}),m=ime(u,4);s=m[0],i=m[1],o=m[2],l=m[3]}}}var p=c4(s,o),g=c4(i,l),x=mme(s,o),y=function(S){return S>1?1:S<0?0:S},N=function(S){for(var E=S>1?1:S,C=E,_=0;_<8;++_){var A=p(C)-E,T=x(C);if(Math.abs(A-E)<Nv||T<Nv)return g(C);C=y(C-A/T)}return g(C)};return N.isStepper=!1,N},hme=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,s=t.damping,i=s===void 0?8:s,o=t.dt,l=o===void 0?17:o,d=function(m,p,g){var x=-(m-p)*n,y=g*i,N=g+(x-y)*l/1e3,v=g*l/1e3+m;return Math.abs(v-p)<Nv&&Math.abs(N)<Nv?[p,0]:[v,N]};return d.isStepper=!0,d.dt=l,d},gme=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return d4(s);case"spring":return hme();default:if(s.split("(")[0]==="cubic-bezier")return d4(s)}return typeof s=="function"?s:null};function Mg(e){"@babel/helpers - typeof";return Mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mg(e)}function u4(e){return yme(e)||bme(e)||fH(e)||xme()}function xme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bme(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function yme(e){if(Array.isArray(e))return lT(e)}function f4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ts(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?f4(Object(r),!0).forEach(function(n){oT(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oT(e,t,r){return t=vme(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vme(e){var t=Nme(e,"string");return Mg(t)==="symbol"?t:String(t)}function Nme(e,t){if(Mg(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Mg(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Sme(e,t){return wme(e)||jme(e,t)||fH(e,t)||Eme()}function Eme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fH(e,t){if(e){if(typeof e=="string")return lT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lT(e,t)}}function lT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function jme(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);d=!0);}catch(m){u=!0,s=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function wme(e){if(Array.isArray(e))return e}var Sv=function(t,r,n){return t+(r-t)*n},cT=function(t){var r=t.from,n=t.to;return r!==n},Ame=function e(t,r,n){var s=rg(function(i,o){if(cT(o)){var l=t(o.from,o.to,o.velocity),d=Sme(l,2),u=d[0],m=d[1];return ts(ts({},o),{},{from:u,velocity:m})}return o},r);return n<1?rg(function(i,o){return cT(o)?ts(ts({},o),{},{velocity:Sv(o.velocity,s[i].velocity,n),from:Sv(o.from,s[i].from,n)}):o},r):e(t,s,n-1)};const _me=(function(e,t,r,n,s){var i=nme(e,t),o=i.reduce(function(v,S){return ts(ts({},v),{},oT({},S,[e[S],t[S]]))},{}),l=i.reduce(function(v,S){return ts(ts({},v),{},oT({},S,{from:e[S],velocity:0,to:t[S]}))},{}),d=-1,u,m,p=function(){return null},g=function(){return rg(function(S,E){return E.from},l)},x=function(){return!Object.values(l).filter(cT).length},y=function(S){u||(u=S);var E=S-u,C=E/r.dt;l=Ame(r,l,C),s(ts(ts(ts({},e),t),g())),u=S,x()||(d=requestAnimationFrame(p))},N=function(S){m||(m=S);var E=(S-m)/n,C=rg(function(A,T){return Sv.apply(void 0,u4(T).concat([r(E)]))},o);if(s(ts(ts(ts({},e),t),C)),E<1)d=requestAnimationFrame(p);else{var _=rg(function(A,T){return Sv.apply(void 0,u4(T).concat([r(1)]))},o);s(ts(ts(ts({},e),t),_))}};return p=r.isStepper?y:N,function(){return requestAnimationFrame(p),function(){cancelAnimationFrame(d)}}});function Tm(e){"@babel/helpers - typeof";return Tm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tm(e)}var Cme=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Tme(e,t){if(e==null)return{};var r=Ome(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ome(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function Ow(e){return Dme(e)||Pme(e)||kme(e)||Rme()}function Rme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kme(e,t){if(e){if(typeof e=="string")return dT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dT(e,t)}}function Pme(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Dme(e){if(Array.isArray(e))return dT(e)}function dT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Lo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p4(Object(r),!0).forEach(function(n){L0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function L0(e,t,r){return t=pH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ime(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mme(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,pH(n.key),n)}}function Lme(e,t,r){return t&&Mme(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function pH(e){var t=$me(e,"string");return Tm(t)==="symbol"?t:String(t)}function $me(e,t){if(Tm(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Tm(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fme(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uT(e,t)}function uT(e,t){return uT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},uT(e,t)}function Ume(e){var t=Bme();return function(){var n=Ev(e),s;if(t){var i=Ev(this).constructor;s=Reflect.construct(n,arguments,i)}else s=n.apply(this,arguments);return fT(this,s)}}function fT(e,t){if(t&&(Tm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pT(e)}function pT(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bme(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ev(e){return Ev=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ev(e)}var ui=(function(e){Fme(r,e);var t=Ume(r);function r(n,s){var i;Ime(this,r),i=t.call(this,n,s);var o=i.props,l=o.isActive,d=o.attributeName,u=o.from,m=o.to,p=o.steps,g=o.children,x=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(pT(i)),i.changeStyle=i.changeStyle.bind(pT(i)),!l||x<=0)return i.state={style:{}},typeof g=="function"&&(i.state={style:m}),fT(i);if(p&&p.length)i.state={style:p[0].style};else if(u){if(typeof g=="function")return i.state={style:u},fT(i);i.state={style:d?L0({},d,u):u}}else i.state={style:{}};return i}return Lme(r,[{key:"componentDidMount",value:function(){var s=this.props,i=s.isActive,o=s.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var i=this.props,o=i.isActive,l=i.canBegin,d=i.attributeName,u=i.shouldReAnimate,m=i.to,p=i.from,g=this.state.style;if(l){if(!o){var x={style:d?L0({},d,m):m};this.state&&g&&(d&&g[d]!==m||!d&&g!==m)&&this.setState(x);return}if(!(Wpe(s.to,m)&&s.canBegin&&s.isActive)){var y=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var N=y||u?p:s.to;if(this.state&&g){var v={style:d?L0({},d,N):N};(d&&g[d]!==N||!d&&g!==N)&&this.setState(v)}this.runAnimation(Lo(Lo({},this.props),{},{from:N,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var i=this,o=s.from,l=s.to,d=s.duration,u=s.easing,m=s.begin,p=s.onAnimationEnd,g=s.onAnimationStart,x=_me(o,l,gme(u),d,this.changeStyle),y=function(){i.stopJSAnimation=x()};this.manager.start([g,m,y,d,p])}},{key:"runStepAnimation",value:function(s){var i=this,o=s.steps,l=s.begin,d=s.onAnimationStart,u=o[0],m=u.style,p=u.duration,g=p===void 0?0:p,x=function(N,v,S){if(S===0)return N;var E=v.duration,C=v.easing,_=C===void 0?"ease":C,A=v.style,T=v.properties,R=v.onAnimationEnd,I=S>0?o[S-1]:v,k=T||Object.keys(A);if(typeof _=="function"||_==="spring")return[].concat(Ow(N),[i.runJSAnimation.bind(i,{from:I.style,to:A,duration:E,easing:_}),E]);var w=l4(k,E,_),L=Lo(Lo(Lo({},I.style),A),{},{transition:w});return[].concat(Ow(N),[L,E,R]).filter(ame)};return this.manager.start([d].concat(Ow(o.reduce(x,[m,Math.max(g,l)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=eme());var i=s.begin,o=s.duration,l=s.attributeName,d=s.to,u=s.easing,m=s.onAnimationStart,p=s.onAnimationEnd,g=s.steps,x=s.children,y=this.manager;if(this.unSubscribe=y.subscribe(this.handleStyleChange),typeof u=="function"||typeof x=="function"||u==="spring"){this.runJSAnimation(s);return}if(g.length>1){this.runStepAnimation(s);return}var N=l?L0({},l,d):d,v=l4(Object.keys(N),o,u);y.start([m,i,Lo(Lo({},N),{},{transition:v}),o,p])}},{key:"render",value:function(){var s=this.props,i=s.children;s.begin;var o=s.duration;s.attributeName,s.easing;var l=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var d=Tme(s,Cme),u=h.Children.count(i),m=this.state.style;if(typeof i=="function")return i(m);if(!l||u===0||o<=0)return i;var p=function(x){var y=x.props,N=y.style,v=N===void 0?{}:N,S=y.className,E=h.cloneElement(x,Lo(Lo({},d),{},{style:Lo(Lo({},v),m),className:S}));return E};return u===1?p(h.Children.only(i)):Y.createElement("div",null,h.Children.map(i,function(g){return p(g)}))}}]),r})(h.PureComponent);ui.displayName="Animate";ui.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};ui.propTypes={from:tn.oneOfType([tn.object,tn.string]),to:tn.oneOfType([tn.object,tn.string]),attributeName:tn.string,duration:tn.number,begin:tn.number,easing:tn.oneOfType([tn.string,tn.func]),steps:tn.arrayOf(tn.shape({duration:tn.number.isRequired,style:tn.object.isRequired,easing:tn.oneOfType([tn.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),tn.func]),properties:tn.arrayOf("string"),onAnimationEnd:tn.func})),children:tn.oneOfType([tn.node,tn.func]),isActive:tn.bool,canBegin:tn.bool,onAnimationEnd:tn.func,shouldReAnimate:tn.bool,onAnimationStart:tn.func,onAnimationReStart:tn.func};function Lg(e){"@babel/helpers - typeof";return Lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lg(e)}function jv(){return jv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jv.apply(this,arguments)}function Gme(e,t){return qme(e)||zme(e,t)||Kme(e,t)||Hme()}function Hme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kme(e,t){if(e){if(typeof e=="string")return m4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m4(e,t)}}function m4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function zme(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);d=!0);}catch(m){u=!0,s=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function qme(e){if(Array.isArray(e))return e}function h4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function g4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h4(Object(r),!0).forEach(function(n){Wme(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Wme(e,t,r){return t=Vme(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vme(e){var t=Yme(e,"string");return Lg(t)=="symbol"?t:t+""}function Yme(e,t){if(Lg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Lg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var x4=function(t,r,n,s,i){var o=Math.min(Math.abs(n)/2,Math.abs(s)/2),l=s>=0?1:-1,d=n>=0?1:-1,u=s>=0&&n>=0||s<0&&n<0?1:0,m;if(o>0&&i instanceof Array){for(var p=[0,0,0,0],g=0,x=4;g<x;g++)p[g]=i[g]>o?o:i[g];m="M".concat(t,",").concat(r+l*p[0]),p[0]>0&&(m+="A ".concat(p[0],",").concat(p[0],",0,0,").concat(u,",").concat(t+d*p[0],",").concat(r)),m+="L ".concat(t+n-d*p[1],",").concat(r),p[1]>0&&(m+="A ".concat(p[1],",").concat(p[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(r+l*p[1])),m+="L ".concat(t+n,",").concat(r+s-l*p[2]),p[2]>0&&(m+="A ".concat(p[2],",").concat(p[2],",0,0,").concat(u,`,
        `).concat(t+n-d*p[2],",").concat(r+s)),m+="L ".concat(t+d*p[3],",").concat(r+s),p[3]>0&&(m+="A ".concat(p[3],",").concat(p[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+s-l*p[3])),m+="Z"}else if(o>0&&i===+i&&i>0){var y=Math.min(o,i);m="M ".concat(t,",").concat(r+l*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+d*y,",").concat(r,`
            L `).concat(t+n-d*y,",").concat(r,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+n,",").concat(r+l*y,`
            L `).concat(t+n,",").concat(r+s-l*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+n-d*y,",").concat(r+s,`
            L `).concat(t+d*y,",").concat(r+s,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t,",").concat(r+s-l*y," Z")}else m="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(s," h ").concat(-n," Z");return m},Xme=function(t,r){if(!t||!r)return!1;var n=t.x,s=t.y,i=r.x,o=r.y,l=r.width,d=r.height;if(Math.abs(l)>0&&Math.abs(d)>0){var u=Math.min(i,i+l),m=Math.max(i,i+l),p=Math.min(o,o+d),g=Math.max(o,o+d);return n>=u&&n<=m&&s>=p&&s<=g}return!1},Qme={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},lN=function(t){var r=g4(g4({},Qme),t),n=h.useRef(),s=h.useState(-1),i=Gme(s,2),o=i[0],l=i[1];h.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var _=n.current.getTotalLength();_&&l(_)}catch{}},[]);var d=r.x,u=r.y,m=r.width,p=r.height,g=r.radius,x=r.className,y=r.animationEasing,N=r.animationDuration,v=r.animationBegin,S=r.isAnimationActive,E=r.isUpdateAnimationActive;if(d!==+d||u!==+u||m!==+m||p!==+p||m===0||p===0)return null;var C=cr("recharts-rectangle",x);return E?Y.createElement(ui,{canBegin:o>0,from:{width:m,height:p,x:d,y:u},to:{width:m,height:p,x:d,y:u},duration:N,animationEasing:y,isActive:E},function(_){var A=_.width,T=_.height,R=_.x,I=_.y;return Y.createElement(ui,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:N,isActive:S,easing:y},Y.createElement("path",jv({},Pt(r,!0),{className:C,d:x4(R,I,A,T,g),ref:n})))}):Y.createElement("path",jv({},Pt(r,!0),{className:C,d:x4(d,u,m,p,g)}))},Zme=["points","className","baseLinePoints","connectNulls"];function Bp(){return Bp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bp.apply(this,arguments)}function Jme(e,t){if(e==null)return{};var r=ehe(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ehe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function b4(e){return ahe(e)||nhe(e)||rhe(e)||the()}function the(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rhe(e,t){if(e){if(typeof e=="string")return mT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mT(e,t)}}function nhe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ahe(e){if(Array.isArray(e))return mT(e)}function mT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var y4=function(t){return t&&t.x===+t.x&&t.y===+t.y},she=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){y4(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),y4(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},ng=function(t,r){var n=she(t);r&&(n=[n.reduce(function(i,o){return[].concat(b4(i),b4(o))},[])]);var s=n.map(function(i){return i.reduce(function(o,l,d){return"".concat(o).concat(d===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return n.length===1?"".concat(s,"Z"):s},ihe=function(t,r,n){var s=ng(t,n);return"".concat(s.slice(-1)==="Z"?s.slice(0,-1):s,"L").concat(ng(r.reverse(),n).slice(1))},mH=function(t){var r=t.points,n=t.className,s=t.baseLinePoints,i=t.connectNulls,o=Jme(t,Zme);if(!r||!r.length)return null;var l=cr("recharts-polygon",n);if(s&&s.length){var d=o.stroke&&o.stroke!=="none",u=ihe(r,s,i);return Y.createElement("g",{className:l},Y.createElement("path",Bp({},Pt(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),d?Y.createElement("path",Bp({},Pt(o,!0),{fill:"none",d:ng(r,i)})):null,d?Y.createElement("path",Bp({},Pt(o,!0),{fill:"none",d:ng(s,i)})):null)}var m=ng(r,i);return Y.createElement("path",Bp({},Pt(o,!0),{fill:m.slice(-1)==="Z"?o.fill:"none",className:l,d:m}))};function hT(){return hT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hT.apply(this,arguments)}var fx=function(t){var r=t.cx,n=t.cy,s=t.r,i=t.className,o=cr("recharts-dot",i);return r===+r&&n===+n&&s===+s?h.createElement("circle",hT({},Pt(t,!1),Ky(t),{className:o,cx:r,cy:n,r:s})):null};function $g(e){"@babel/helpers - typeof";return $g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$g(e)}var ohe=["x","y","top","left","width","height","className"];function gT(){return gT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gT.apply(this,arguments)}function v4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function lhe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?v4(Object(r),!0).forEach(function(n){che(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function che(e,t,r){return t=dhe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dhe(e){var t=uhe(e,"string");return $g(t)=="symbol"?t:t+""}function uhe(e,t){if($g(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if($g(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fhe(e,t){if(e==null)return{};var r=phe(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function phe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var mhe=function(t,r,n,s,i,o){return"M".concat(t,",").concat(i,"v").concat(s,"M").concat(o,",").concat(r,"h").concat(n)},hhe=function(t){var r=t.x,n=r===void 0?0:r,s=t.y,i=s===void 0?0:s,o=t.top,l=o===void 0?0:o,d=t.left,u=d===void 0?0:d,m=t.width,p=m===void 0?0:m,g=t.height,x=g===void 0?0:g,y=t.className,N=fhe(t,ohe),v=lhe({x:n,y:i,top:l,left:u,width:p,height:x},N);return!it(n)||!it(i)||!it(p)||!it(x)||!it(l)||!it(u)?null:Y.createElement("path",gT({},Pt(v,!0),{className:cr("recharts-cross",y),d:mhe(n,i,p,x,l,u)}))},Rw,N4;function ghe(){if(N4)return Rw;N4=1;var e=aN(),t=_9(),r=ec();function n(s,i){return s&&s.length?e(s,r(i,2),t):void 0}return Rw=n,Rw}var xhe=ghe();const bhe=Zr(xhe);var kw,S4;function yhe(){if(S4)return kw;S4=1;var e=aN(),t=ec(),r=C9();function n(s,i){return s&&s.length?e(s,t(i,2),r):void 0}return kw=n,kw}var vhe=yhe();const Nhe=Zr(vhe);var She=["cx","cy","angle","ticks","axisLine"],Ehe=["ticks","tick","angle","tickFormatter","stroke"];function Om(e){"@babel/helpers - typeof";return Om=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Om(e)}function ag(){return ag=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ag.apply(this,arguments)}function E4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Xu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?E4(Object(r),!0).forEach(function(n){cN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function j4(e,t){if(e==null)return{};var r=jhe(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function jhe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function whe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w4(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gH(n.key),n)}}function Ahe(e,t,r){return t&&w4(e.prototype,t),r&&w4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _he(e,t,r){return t=wv(t),Che(e,hH()?Reflect.construct(t,r||[],wv(e).constructor):t.apply(e,r))}function Che(e,t){if(t&&(Om(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return The(e)}function The(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hH=function(){return!!e})()}function wv(e){return wv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},wv(e)}function Ohe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xT(e,t)}function xT(e,t){return xT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},xT(e,t)}function cN(e,t,r){return t=gH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gH(e){var t=Rhe(e,"string");return Om(t)=="symbol"?t:t+""}function Rhe(e,t){if(Om(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Om(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dN=(function(e){function t(){return whe(this,t),_he(this,t,arguments)}return Ohe(t,e),Ahe(t,[{key:"getTickValueCoord",value:function(n){var s=n.coordinate,i=this.props,o=i.angle,l=i.cx,d=i.cy;return _n(l,d,s,o)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,s;switch(n){case"left":s="end";break;case"right":s="start";break;default:s="middle";break}return s}},{key:"getViewBox",value:function(){var n=this.props,s=n.cx,i=n.cy,o=n.angle,l=n.ticks,d=bhe(l,function(m){return m.coordinate||0}),u=Nhe(l,function(m){return m.coordinate||0});return{cx:s,cy:i,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:d.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.cx,i=n.cy,o=n.angle,l=n.ticks,d=n.axisLine,u=j4(n,She),m=l.reduce(function(y,N){return[Math.min(y[0],N.coordinate),Math.max(y[1],N.coordinate)]},[1/0,-1/0]),p=_n(s,i,m[0],o),g=_n(s,i,m[1],o),x=Xu(Xu(Xu({},Pt(u,!1)),{},{fill:"none"},Pt(d,!1)),{},{x1:p.x,y1:p.y,x2:g.x,y2:g.y});return Y.createElement("line",ag({className:"recharts-polar-radius-axis-line"},x))}},{key:"renderTicks",value:function(){var n=this,s=this.props,i=s.ticks,o=s.tick,l=s.angle,d=s.tickFormatter,u=s.stroke,m=j4(s,Ehe),p=this.getTickTextAnchor(),g=Pt(m,!1),x=Pt(o,!1),y=i.map(function(N,v){var S=n.getTickValueCoord(N),E=Xu(Xu(Xu(Xu({textAnchor:p,transform:"rotate(".concat(90-l,", ").concat(S.x,", ").concat(S.y,")")},g),{},{stroke:"none",fill:u},x),{},{index:v},S),{},{payload:N});return Y.createElement(pr,ag({className:cr("recharts-polar-radius-axis-tick",rH(o)),key:"tick-".concat(N.coordinate)},iu(n.props,N,v)),t.renderTickItem(o,E,d?d(N.value,v):N.value))});return Y.createElement(pr,{className:"recharts-polar-radius-axis-ticks"},y)}},{key:"render",value:function(){var n=this.props,s=n.ticks,i=n.axisLine,o=n.tick;return!s||!s.length?null:Y.createElement(pr,{className:cr("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),Ka.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,s,i){var o;return Y.isValidElement(n)?o=Y.cloneElement(n,s):Yt(n)?o=n(s):o=Y.createElement(Af,ag({},s,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])})(h.PureComponent);cN(dN,"displayName","PolarRadiusAxis");cN(dN,"axisType","radiusAxis");cN(dN,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Rm(e){"@babel/helpers - typeof";return Rm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rm(e)}function af(){return af=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},af.apply(this,arguments)}function A4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Qu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?A4(Object(r),!0).forEach(function(n){uN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function khe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _4(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,bH(n.key),n)}}function Phe(e,t,r){return t&&_4(e.prototype,t),r&&_4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Dhe(e,t,r){return t=Av(t),Ihe(e,xH()?Reflect.construct(t,r||[],Av(e).constructor):t.apply(e,r))}function Ihe(e,t){if(t&&(Rm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mhe(e)}function Mhe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xH=function(){return!!e})()}function Av(e){return Av=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Av(e)}function Lhe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bT(e,t)}function bT(e,t){return bT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},bT(e,t)}function uN(e,t,r){return t=bH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bH(e){var t=$he(e,"string");return Rm(t)=="symbol"?t:t+""}function $he(e,t){if(Rm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Rm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Fhe=Math.PI/180,C4=1e-5,fN=(function(e){function t(){return khe(this,t),Dhe(this,t,arguments)}return Lhe(t,e),Phe(t,[{key:"getTickLineCoord",value:function(n){var s=this.props,i=s.cx,o=s.cy,l=s.radius,d=s.orientation,u=s.tickSize,m=u||8,p=_n(i,o,l,n.coordinate),g=_n(i,o,l+(d==="inner"?-1:1)*m,n.coordinate);return{x1:p.x,y1:p.y,x2:g.x,y2:g.y}}},{key:"getTickTextAnchor",value:function(n){var s=this.props.orientation,i=Math.cos(-n.coordinate*Fhe),o;return i>C4?o=s==="outer"?"start":"end":i<-C4?o=s==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.cx,i=n.cy,o=n.radius,l=n.axisLine,d=n.axisLineType,u=Qu(Qu({},Pt(this.props,!1)),{},{fill:"none"},Pt(l,!1));if(d==="circle")return Y.createElement(fx,af({className:"recharts-polar-angle-axis-line"},u,{cx:s,cy:i,r:o}));var m=this.props.ticks,p=m.map(function(g){return _n(s,i,o,g.coordinate)});return Y.createElement(mH,af({className:"recharts-polar-angle-axis-line"},u,{points:p}))}},{key:"renderTicks",value:function(){var n=this,s=this.props,i=s.ticks,o=s.tick,l=s.tickLine,d=s.tickFormatter,u=s.stroke,m=Pt(this.props,!1),p=Pt(o,!1),g=Qu(Qu({},m),{},{fill:"none"},Pt(l,!1)),x=i.map(function(y,N){var v=n.getTickLineCoord(y),S=n.getTickTextAnchor(y),E=Qu(Qu(Qu({textAnchor:S},m),{},{stroke:"none",fill:u},p),{},{index:N,payload:y,x:v.x2,y:v.y2});return Y.createElement(pr,af({className:cr("recharts-polar-angle-axis-tick",rH(o)),key:"tick-".concat(y.coordinate)},iu(n.props,y,N)),l&&Y.createElement("line",af({className:"recharts-polar-angle-axis-tick-line"},g,v)),o&&t.renderTickItem(o,E,d?d(y.value,N):y.value))});return Y.createElement(pr,{className:"recharts-polar-angle-axis-ticks"},x)}},{key:"render",value:function(){var n=this.props,s=n.ticks,i=n.radius,o=n.axisLine;return i<=0||!s||!s.length?null:Y.createElement(pr,{className:cr("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,s,i){var o;return Y.isValidElement(n)?o=Y.cloneElement(n,s):Yt(n)?o=n(s):o=Y.createElement(Af,af({},s,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])})(h.PureComponent);uN(fN,"displayName","PolarAngleAxis");uN(fN,"axisType","angleAxis");uN(fN,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Pw,T4;function v3(){if(T4)return Pw;T4=1;var e=jG(),t=e(Object.getPrototypeOf,Object);return Pw=t,Pw}var Dw,O4;function yH(){if(O4)return Dw;O4=1;var e=od(),t=v3(),r=al(),n="[object Object]",s=Function.prototype,i=Object.prototype,o=s.toString,l=i.hasOwnProperty,d=o.call(Object);function u(m){if(!r(m)||e(m)!=n)return!1;var p=t(m);if(p===null)return!0;var g=l.call(p,"constructor")&&p.constructor;return typeof g=="function"&&g instanceof g&&o.call(g)==d}return Dw=u,Dw}var Uhe=yH();const Bhe=Zr(Uhe);var Iw,R4;function Ghe(){if(R4)return Iw;R4=1;var e=od(),t=al(),r="[object Boolean]";function n(s){return s===!0||s===!1||t(s)&&e(s)==r}return Iw=n,Iw}var Hhe=Ghe();const Khe=Zr(Hhe);function Fg(e){"@babel/helpers - typeof";return Fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fg(e)}function _v(){return _v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_v.apply(this,arguments)}function zhe(e,t){return Yhe(e)||Vhe(e,t)||Whe(e,t)||qhe()}function qhe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Whe(e,t){if(e){if(typeof e=="string")return k4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k4(e,t)}}function k4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Vhe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);d=!0);}catch(m){u=!0,s=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Yhe(e){if(Array.isArray(e))return e}function P4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function D4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P4(Object(r),!0).forEach(function(n){Xhe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xhe(e,t,r){return t=Qhe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qhe(e){var t=Zhe(e,"string");return Fg(t)=="symbol"?t:t+""}function Zhe(e,t){if(Fg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Fg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var I4=function(t,r,n,s,i){var o=n-s,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+n,",").concat(r),l+="L ".concat(t+n-o/2,",").concat(r+i),l+="L ".concat(t+n-o/2-s,",").concat(r+i),l+="L ".concat(t,",").concat(r," Z"),l},Jhe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},e0e=function(t){var r=D4(D4({},Jhe),t),n=h.useRef(),s=h.useState(-1),i=zhe(s,2),o=i[0],l=i[1];h.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var C=n.current.getTotalLength();C&&l(C)}catch{}},[]);var d=r.x,u=r.y,m=r.upperWidth,p=r.lowerWidth,g=r.height,x=r.className,y=r.animationEasing,N=r.animationDuration,v=r.animationBegin,S=r.isUpdateAnimationActive;if(d!==+d||u!==+u||m!==+m||p!==+p||g!==+g||m===0&&p===0||g===0)return null;var E=cr("recharts-trapezoid",x);return S?Y.createElement(ui,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:g,x:d,y:u},to:{upperWidth:m,lowerWidth:p,height:g,x:d,y:u},duration:N,animationEasing:y,isActive:S},function(C){var _=C.upperWidth,A=C.lowerWidth,T=C.height,R=C.x,I=C.y;return Y.createElement(ui,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:N,easing:y},Y.createElement("path",_v({},Pt(r,!0),{className:E,d:I4(R,I,_,A,T),ref:n})))}):Y.createElement("g",null,Y.createElement("path",_v({},Pt(r,!0),{className:E,d:I4(d,u,m,p,g)})))},t0e=["option","shapeType","propTransformer","activeClassName","isActive"];function Ug(e){"@babel/helpers - typeof";return Ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ug(e)}function r0e(e,t){if(e==null)return{};var r=n0e(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function n0e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function M4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Cv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?M4(Object(r),!0).forEach(function(n){a0e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function a0e(e,t,r){return t=s0e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s0e(e){var t=i0e(e,"string");return Ug(t)=="symbol"?t:t+""}function i0e(e,t){if(Ug(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ug(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function o0e(e,t){return Cv(Cv({},t),e)}function l0e(e,t){return e==="symbols"}function L4(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return Y.createElement(lN,r);case"trapezoid":return Y.createElement(e0e,r);case"sector":return Y.createElement(iH,r);case"symbols":if(l0e(t))return Y.createElement(W1,r);break;default:return null}}function c0e(e){return h.isValidElement(e)?e.props:e}function Tv(e){var t=e.option,r=e.shapeType,n=e.propTransformer,s=n===void 0?o0e:n,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,d=r0e(e,t0e),u;if(h.isValidElement(t))u=h.cloneElement(t,Cv(Cv({},d),c0e(t)));else if(Yt(t))u=t(d);else if(Bhe(t)&&!Khe(t)){var m=s(t,d);u=Y.createElement(L4,{shapeType:r,elementProps:m})}else{var p=d;u=Y.createElement(L4,{shapeType:r,elementProps:p})}return l?Y.createElement(pr,{className:o},u):u}function pN(e,t){return t!=null&&"trapezoids"in e.props}function mN(e,t){return t!=null&&"sectors"in e.props}function Bg(e,t){return t!=null&&"points"in e.props}function d0e(e,t){var r,n,s=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return s&&i}function u0e(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function f0e(e,t){var r=e.x===t.x,n=e.y===t.y,s=e.z===t.z;return r&&n&&s}function p0e(e,t){var r;return pN(e,t)?r=d0e:mN(e,t)?r=u0e:Bg(e,t)&&(r=f0e),r}function m0e(e,t){var r;return pN(e,t)?r="trapezoids":mN(e,t)?r="sectors":Bg(e,t)&&(r="points"),r}function h0e(e,t){if(pN(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(mN(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Bg(e,t)?t.payload:{}}function g0e(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,s=m0e(r,t),i=h0e(r,t),o=n.filter(function(d,u){var m=ou(i,d),p=r.props[s].filter(function(y){var N=p0e(r,t);return N(y,t)}),g=r.props[s].indexOf(p[p.length-1]),x=u===g;return m&&x}),l=n.indexOf(o[o.length-1]);return l}var hy;function km(e){"@babel/helpers - typeof";return km=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},km(e)}function Gp(){return Gp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gp.apply(this,arguments)}function $4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function wn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$4(Object(r),!0).forEach(function(n){go(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function x0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F4(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,NH(n.key),n)}}function b0e(e,t,r){return t&&F4(e.prototype,t),r&&F4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function y0e(e,t,r){return t=Ov(t),v0e(e,vH()?Reflect.construct(t,r||[],Ov(e).constructor):t.apply(e,r))}function v0e(e,t){if(t&&(km(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return N0e(e)}function N0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vH=function(){return!!e})()}function Ov(e){return Ov=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ov(e)}function S0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yT(e,t)}function yT(e,t){return yT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},yT(e,t)}function go(e,t,r){return t=NH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NH(e){var t=E0e(e,"string");return km(t)=="symbol"?t:t+""}function E0e(e,t){if(km(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(km(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var tc=(function(e){function t(r){var n;return x0e(this,t),n=y0e(this,t,[r]),go(n,"pieRef",null),go(n,"sectorRefs",[]),go(n,"id",ld("recharts-pie-")),go(n,"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Yt(s)&&s()}),go(n,"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Yt(s)&&s()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return S0e(t,e),b0e(t,[{key:"isActiveIndex",value:function(n){var s=this.props.activeIndex;return Array.isArray(s)?s.indexOf(n)!==-1:n===s}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.label,l=i.labelLine,d=i.dataKey,u=i.valueKey,m=Pt(this.props,!1),p=Pt(o,!1),g=Pt(l,!1),x=o&&o.offsetRadius||20,y=n.map(function(N,v){var S=(N.startAngle+N.endAngle)/2,E=_n(N.cx,N.cy,N.outerRadius+x,S),C=wn(wn(wn(wn({},m),N),{},{stroke:"none"},p),{},{index:v,textAnchor:t.getTextAnchor(E.x,N.cx)},E),_=wn(wn(wn(wn({},m),N),{},{fill:"none",stroke:N.fill},g),{},{index:v,points:[_n(N.cx,N.cy,N.outerRadius,S),E]}),A=d;return er(d)&&er(u)?A="value":er(d)&&(A=u),Y.createElement(pr,{key:"label-".concat(N.startAngle,"-").concat(N.endAngle,"-").concat(N.midAngle,"-").concat(v)},l&&t.renderLabelLineItem(l,_,"line"),t.renderLabelItem(o,C,yn(N,A)))});return Y.createElement(pr,{className:"recharts-pie-labels"},y)}},{key:"renderSectorsStatically",value:function(n){var s=this,i=this.props,o=i.activeShape,l=i.blendStroke,d=i.inactiveShape;return n.map(function(u,m){if(u?.startAngle===0&&u?.endAngle===0&&n.length!==1)return null;var p=s.isActiveIndex(m),g=d&&s.hasActiveIndex()?d:null,x=p?o:g,y=wn(wn({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return Y.createElement(pr,Gp({ref:function(v){v&&!s.sectorRefs.includes(v)&&s.sectorRefs.push(v)},tabIndex:-1,className:"recharts-pie-sector"},iu(s.props,u,m),{key:"sector-".concat(u?.startAngle,"-").concat(u?.endAngle,"-").concat(u.midAngle,"-").concat(m)}),Y.createElement(Tv,Gp({option:x,isActive:p,shapeType:"sector"},y)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,s=this.props,i=s.sectors,o=s.isAnimationActive,l=s.animationBegin,d=s.animationDuration,u=s.animationEasing,m=s.animationId,p=this.state,g=p.prevSectors,x=p.prevIsAnimationActive;return Y.createElement(ui,{begin:l,duration:d,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(m,"-").concat(x),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(y){var N=y.t,v=[],S=i&&i[0],E=S.startAngle;return i.forEach(function(C,_){var A=g&&g[_],T=_>0?ci(C,"paddingAngle",0):0;if(A){var R=Hn(A.endAngle-A.startAngle,C.endAngle-C.startAngle),I=wn(wn({},C),{},{startAngle:E+T,endAngle:E+R(N)+T});v.push(I),E=I.endAngle}else{var k=C.endAngle,w=C.startAngle,L=Hn(0,k-w),H=L(N),B=wn(wn({},C),{},{startAngle:E+T,endAngle:E+H+T});v.push(B),E=B.endAngle}}),Y.createElement(pr,null,n.renderSectorsStatically(v))})}},{key:"attachKeyboardHandlers",value:function(n){var s=this;n.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var o=++s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[o].focus(),s.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--s.state.sectorToFocus<0?s.sectorRefs.length-1:s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[l].focus(),s.setState({sectorToFocus:l});break}case"Escape":{s.sectorRefs[s.state.sectorToFocus].blur(),s.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,s=n.sectors,i=n.isAnimationActive,o=this.state.prevSectors;return i&&s&&s.length&&(!o||!ou(o,s))?this.renderSectorsWithAnimation():this.renderSectorsStatically(s)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,s=this.props,i=s.hide,o=s.sectors,l=s.className,d=s.label,u=s.cx,m=s.cy,p=s.innerRadius,g=s.outerRadius,x=s.isAnimationActive,y=this.state.isAnimationFinished;if(i||!o||!o.length||!it(u)||!it(m)||!it(p)||!it(g))return null;var N=cr("recharts-pie",l);return Y.createElement(pr,{tabIndex:this.props.rootTabIndex,className:N,ref:function(S){n.pieRef=S}},this.renderSectors(),d&&this.renderLabels(o),Ka.renderCallByParent(this.props,null,!1),(!x||y)&&Ns.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return s.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:s.curSectors,isAnimationFinished:!0}:n.sectors!==s.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,s){return n>s?"start":n<s?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,s,i){if(Y.isValidElement(n))return Y.cloneElement(n,s);if(Yt(n))return n(s);var o=cr("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return Y.createElement(au,Gp({},s,{key:i,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(n,s,i){if(Y.isValidElement(n))return Y.cloneElement(n,s);var o=i;if(Yt(n)&&(o=n(s),Y.isValidElement(o)))return o;var l=cr("recharts-pie-label-text",typeof n!="boolean"&&!Yt(n)?n.className:"");return Y.createElement(Af,Gp({},s,{alignmentBaseline:"middle",className:l}),o)}}])})(h.PureComponent);hy=tc;go(tc,"displayName","Pie");go(tc,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Jo.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});go(tc,"parseDeltaAngle",function(e,t){var r=Ms(t-e),n=Math.min(Math.abs(t-e),360);return r*n});go(tc,"getRealPieData",function(e){var t=e.data,r=e.children,n=Pt(e,!1),s=Us(r,yo);return t&&t.length?t.map(function(i,o){return wn(wn(wn({payload:i},n),i),s&&s[o]&&s[o].props)}):s&&s.length?s.map(function(i){return wn(wn({},n),i.props)}):[]});go(tc,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,s=t.width,i=t.height,o=tH(s,i),l=n+Ls(e.cx,s,s/2),d=r+Ls(e.cy,i,i/2),u=Ls(e.innerRadius,o,0),m=Ls(e.outerRadius,o,o*.8),p=e.maxRadius||Math.sqrt(s*s+i*i)/2;return{cx:l,cy:d,innerRadius:u,outerRadius:m,maxRadius:p}});go(tc,"getComposedData",function(e){var t=e.item,r=e.offset,n=t.type.defaultProps!==void 0?wn(wn({},t.type.defaultProps),t.props):t.props,s=hy.getRealPieData(n);if(!s||!s.length)return null;var i=n.cornerRadius,o=n.startAngle,l=n.endAngle,d=n.paddingAngle,u=n.dataKey,m=n.nameKey,p=n.valueKey,g=n.tooltipType,x=Math.abs(n.minAngle),y=hy.parseCoordinateOfPie(n,r),N=hy.parseDeltaAngle(o,l),v=Math.abs(N),S=u;er(u)&&er(p)?(Zo(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),S="value"):er(u)&&(Zo(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),S=p);var E=s.filter(function(I){return yn(I,S,0)!==0}).length,C=(v>=360?E:E-1)*d,_=v-E*x-C,A=s.reduce(function(I,k){var w=yn(k,S,0);return I+(it(w)?w:0)},0),T;if(A>0){var R;T=s.map(function(I,k){var w=yn(I,S,0),L=yn(I,m,k),H=(it(w)?w:0)/A,B;k?B=R.endAngle+Ms(N)*d*(w!==0?1:0):B=o;var M=B+Ms(N)*((w!==0?x:0)+H*_),G=(B+M)/2,$=(y.innerRadius+y.outerRadius)/2,z=[{name:L,value:w,payload:I,dataKey:S,type:g}],U=_n(y.cx,y.cy,$,G);return R=wn(wn(wn({percent:H,cornerRadius:i,name:L,tooltipPayload:z,midAngle:G,middleRadius:$,tooltipPosition:U},I),y),{},{value:yn(I,S),startAngle:B,endAngle:M,payload:I,paddingAngle:Ms(N)*d}),R})}return wn(wn({},y),{},{sectors:T,data:s})});var Mw,U4;function j0e(){if(U4)return Mw;U4=1;var e=Math.ceil,t=Math.max;function r(n,s,i,o){for(var l=-1,d=t(e((s-n)/(i||1)),0),u=Array(d);d--;)u[o?d:++l]=n,n+=i;return u}return Mw=r,Mw}var Lw,B4;function SH(){if(B4)return Lw;B4=1;var e=GG(),t=1/0,r=17976931348623157e292;function n(s){if(!s)return s===0?s:0;if(s=e(s),s===t||s===-t){var i=s<0?-1:1;return i*r}return s===s?s:0}return Lw=n,Lw}var $w,G4;function w0e(){if(G4)return $w;G4=1;var e=j0e(),t=Q1(),r=SH();function n(s){return function(i,o,l){return l&&typeof l!="number"&&t(i,o,l)&&(o=l=void 0),i=r(i),o===void 0?(o=i,i=0):o=r(o),l=l===void 0?i<o?1:-1:r(l),e(i,o,l,s)}}return $w=n,$w}var Fw,H4;function A0e(){if(H4)return Fw;H4=1;var e=w0e(),t=e();return Fw=t,Fw}var _0e=A0e();const Rv=Zr(_0e);function Gg(e){"@babel/helpers - typeof";return Gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gg(e)}function K4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function z4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?K4(Object(r),!0).forEach(function(n){EH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function EH(e,t,r){return t=C0e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C0e(e){var t=T0e(e,"string");return Gg(t)=="symbol"?t:t+""}function T0e(e,t){if(Gg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Gg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var O0e=["Webkit","Moz","O","ms"],R0e=function(t,r){var n=t.replace(/(\w)/,function(i){return i.toUpperCase()}),s=O0e.reduce(function(i,o){return z4(z4({},i),{},EH({},o+n,r))},{});return s[t]=r,s};function Pm(e){"@babel/helpers - typeof";return Pm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pm(e)}function kv(){return kv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kv.apply(this,arguments)}function q4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Uw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?q4(Object(r),!0).forEach(function(n){Mi(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function k0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W4(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wH(n.key),n)}}function P0e(e,t,r){return t&&W4(e.prototype,t),r&&W4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function D0e(e,t,r){return t=Pv(t),I0e(e,jH()?Reflect.construct(t,r||[],Pv(e).constructor):t.apply(e,r))}function I0e(e,t){if(t&&(Pm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return M0e(e)}function M0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jH=function(){return!!e})()}function Pv(e){return Pv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Pv(e)}function L0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vT(e,t)}function vT(e,t){return vT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},vT(e,t)}function Mi(e,t,r){return t=wH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wH(e){var t=$0e(e,"string");return Pm(t)=="symbol"?t:t+""}function $0e(e,t){if(Pm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Pm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var F0e=function(t){var r=t.data,n=t.startIndex,s=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var d=r.length,u=eg().domain(Rv(0,d)).range([i,i+o-l]),m=u.domain().map(function(p){return u(p)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(s),scale:u,scaleValues:m}},V4=function(t){return t.changedTouches&&!!t.changedTouches.length},Dm=(function(e){function t(r){var n;return k0e(this,t),n=D0e(this,t,[r]),Mi(n,"handleDrag",function(s){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(s):n.state.isSlideMoving&&n.handleSlideDrag(s)}),Mi(n,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&n.handleDrag(s.changedTouches[0])}),Mi(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=n.props,i=s.endIndex,o=s.onDragEnd,l=s.startIndex;o?.({endIndex:i,startIndex:l})}),n.detachDragEndListener()}),Mi(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Mi(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Mi(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Mi(n,"handleSlideDragStart",function(s){var i=V4(s)?s.changedTouches[0]:s;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return L0e(t,e),P0e(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var s=n.startX,i=n.endX,o=this.state.scaleValues,l=this.props,d=l.gap,u=l.data,m=u.length-1,p=Math.min(s,i),g=Math.max(s,i),x=t.getIndexInRange(o,p),y=t.getIndexInRange(o,g);return{startIndex:x-x%d,endIndex:y===m?m:y-y%d}}},{key:"getTextOfTick",value:function(n){var s=this.props,i=s.data,o=s.tickFormatter,l=s.dataKey,d=yn(i[n],l,n);return Yt(o)?o(d,n):d}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var s=this.state,i=s.slideMoveStartX,o=s.startX,l=s.endX,d=this.props,u=d.x,m=d.width,p=d.travellerWidth,g=d.startIndex,x=d.endIndex,y=d.onChange,N=n.pageX-i;N>0?N=Math.min(N,u+m-p-l,u+m-p-o):N<0&&(N=Math.max(N,u-o,u-l));var v=this.getIndex({startX:o+N,endX:l+N});(v.startIndex!==g||v.endIndex!==x)&&y&&y(v),this.setState({startX:o+N,endX:l+N,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,s){var i=V4(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var s=this.state,i=s.brushMoveStartX,o=s.movingTravellerId,l=s.endX,d=s.startX,u=this.state[o],m=this.props,p=m.x,g=m.width,x=m.travellerWidth,y=m.onChange,N=m.gap,v=m.data,S={startX:this.state.startX,endX:this.state.endX},E=n.pageX-i;E>0?E=Math.min(E,p+g-x-u):E<0&&(E=Math.max(E,p-u)),S[o]=u+E;var C=this.getIndex(S),_=C.startIndex,A=C.endIndex,T=function(){var I=v.length-1;return o==="startX"&&(l>d?_%N===0:A%N===0)||l<d&&A===I||o==="endX"&&(l>d?A%N===0:_%N===0)||l>d&&A===I};this.setState(Mi(Mi({},o,u+E),"brushMoveStartX",n.pageX),function(){y&&T()&&y(C)})}},{key:"handleTravellerMoveKeyboard",value:function(n,s){var i=this,o=this.state,l=o.scaleValues,d=o.startX,u=o.endX,m=this.state[s],p=l.indexOf(m);if(p!==-1){var g=p+n;if(!(g===-1||g>=l.length)){var x=l[g];s==="startX"&&x>=u||s==="endX"&&x<=d||this.setState(Mi({},s,x),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,s=n.x,i=n.y,o=n.width,l=n.height,d=n.fill,u=n.stroke;return Y.createElement("rect",{stroke:u,fill:d,x:s,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,s=n.x,i=n.y,o=n.width,l=n.height,d=n.data,u=n.children,m=n.padding,p=h.Children.only(u);return p?Y.cloneElement(p,{x:s,y:i,width:o,height:l,margin:m,compact:!0,data:d}):null}},{key:"renderTravellerLayer",value:function(n,s){var i,o,l=this,d=this.props,u=d.y,m=d.travellerWidth,p=d.height,g=d.traveller,x=d.ariaLabel,y=d.data,N=d.startIndex,v=d.endIndex,S=Math.max(n,this.props.x),E=Uw(Uw({},Pt(this.props,!1)),{},{x:S,y:u,width:m,height:p}),C=x||"Min value: ".concat((i=y[N])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=y[v])===null||o===void 0?void 0:o.name);return Y.createElement(pr,{tabIndex:0,role:"slider","aria-label":C,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(A){["ArrowLeft","ArrowRight"].includes(A.key)&&(A.preventDefault(),A.stopPropagation(),l.handleTravellerMoveKeyboard(A.key==="ArrowRight"?1:-1,s))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(g,E))}},{key:"renderSlide",value:function(n,s){var i=this.props,o=i.y,l=i.height,d=i.stroke,u=i.travellerWidth,m=Math.min(n,s)+u,p=Math.max(Math.abs(s-n)-u,0);return Y.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:d,fillOpacity:.2,x:m,y:o,width:p,height:l})}},{key:"renderText",value:function(){var n=this.props,s=n.startIndex,i=n.endIndex,o=n.y,l=n.height,d=n.travellerWidth,u=n.stroke,m=this.state,p=m.startX,g=m.endX,x=5,y={pointerEvents:"none",fill:u};return Y.createElement(pr,{className:"recharts-brush-texts"},Y.createElement(Af,kv({textAnchor:"end",verticalAnchor:"middle",x:Math.min(p,g)-x,y:o+l/2},y),this.getTextOfTick(s)),Y.createElement(Af,kv({textAnchor:"start",verticalAnchor:"middle",x:Math.max(p,g)+d+x,y:o+l/2},y),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,s=n.data,i=n.className,o=n.children,l=n.x,d=n.y,u=n.width,m=n.height,p=n.alwaysShowText,g=this.state,x=g.startX,y=g.endX,N=g.isTextActive,v=g.isSlideMoving,S=g.isTravellerMoving,E=g.isTravellerFocused;if(!s||!s.length||!it(l)||!it(d)||!it(u)||!it(m)||u<=0||m<=0)return null;var C=cr("recharts-brush",i),_=Y.Children.count(o)===1,A=R0e("userSelect","none");return Y.createElement(pr,{className:C,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:A},this.renderBackground(),_&&this.renderPanorama(),this.renderSlide(x,y),this.renderTravellerLayer(x,"startX"),this.renderTravellerLayer(y,"endX"),(N||v||S||E||p)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var s=n.x,i=n.y,o=n.width,l=n.height,d=n.stroke,u=Math.floor(i+l/2)-1;return Y.createElement(Y.Fragment,null,Y.createElement("rect",{x:s,y:i,width:o,height:l,fill:d,stroke:"none"}),Y.createElement("line",{x1:s+1,y1:u,x2:s+o-1,y2:u,fill:"none",stroke:"#fff"}),Y.createElement("line",{x1:s+1,y1:u+2,x2:s+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,s){var i;return Y.isValidElement(n)?i=Y.cloneElement(n,s):Yt(n)?i=n(s):i=t.renderDefaultTraveller(s),i}},{key:"getDerivedStateFromProps",value:function(n,s){var i=n.data,o=n.width,l=n.x,d=n.travellerWidth,u=n.updateId,m=n.startIndex,p=n.endIndex;if(i!==s.prevData||u!==s.prevUpdateId)return Uw({prevData:i,prevTravellerWidth:d,prevUpdateId:u,prevX:l,prevWidth:o},i&&i.length?F0e({data:i,width:o,x:l,travellerWidth:d,startIndex:m,endIndex:p}):{scale:null,scaleValues:null});if(s.scale&&(o!==s.prevWidth||l!==s.prevX||d!==s.prevTravellerWidth)){s.scale.range([l,l+o-d]);var g=s.scale.domain().map(function(x){return s.scale(x)});return{prevData:i,prevTravellerWidth:d,prevUpdateId:u,prevX:l,prevWidth:o,startX:s.scale(n.startIndex),endX:s.scale(n.endIndex),scaleValues:g}}return null}},{key:"getIndexInRange",value:function(n,s){for(var i=n.length,o=0,l=i-1;l-o>1;){var d=Math.floor((o+l)/2);n[d]>s?l=d:o=d}return s>=n[l]?l:o}}])})(h.PureComponent);Mi(Dm,"displayName","Brush");Mi(Dm,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Bw,Y4;function U0e(){if(Y4)return Bw;Y4=1;var e=KR();function t(r,n){var s;return e(r,function(i,o,l){return s=n(i,o,l),!s}),!!s}return Bw=t,Bw}var Gw,X4;function B0e(){if(X4)return Gw;X4=1;var e=gG(),t=ec(),r=U0e(),n=Hs(),s=Q1();function i(o,l,d){var u=n(o)?e:r;return d&&s(o,l,d)&&(l=void 0),u(o,t(l,3))}return Gw=i,Gw}var G0e=B0e();const H0e=Zr(G0e);var ql=function(t,r){var n=t.alwaysShow,s=t.ifOverflow;return n&&(s="extendDomain"),s===r},Hw,Q4;function N3(){if(Q4)return Hw;Q4=1;var e=MG();function t(r,n,s){n=="__proto__"&&e?e(r,n,{configurable:!0,enumerable:!0,value:s,writable:!0}):r[n]=s}return Hw=t,Hw}var Kw,Z4;function K0e(){if(Z4)return Kw;Z4=1;var e=N3(),t=PG(),r=ec();function n(s,i){var o={};return i=r(i,3),t(s,function(l,d,u){e(o,d,i(l,d,u))}),o}return Kw=n,Kw}var z0e=K0e();const q0e=Zr(z0e);var zw,J4;function W0e(){if(J4)return zw;J4=1;function e(t,r){for(var n=-1,s=t==null?0:t.length;++n<s;)if(!r(t[n],n,t))return!1;return!0}return zw=e,zw}var qw,e6;function V0e(){if(e6)return qw;e6=1;var e=KR();function t(r,n){var s=!0;return e(r,function(i,o,l){return s=!!n(i,o,l),s}),s}return qw=t,qw}var Ww,t6;function Y0e(){if(t6)return Ww;t6=1;var e=W0e(),t=V0e(),r=ec(),n=Hs(),s=Q1();function i(o,l,d){var u=n(o)?e:t;return d&&s(o,l,d)&&(l=void 0),u(o,r(l,3))}return Ww=i,Ww}var X0e=Y0e();const AH=Zr(X0e);var Q0e=["x","y"];function Hg(e){"@babel/helpers - typeof";return Hg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hg(e)}function NT(){return NT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},NT.apply(this,arguments)}function r6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function b0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?r6(Object(r),!0).forEach(function(n){Z0e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Z0e(e,t,r){return t=J0e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function J0e(e){var t=ege(e,"string");return Hg(t)=="symbol"?t:t+""}function ege(e,t){if(Hg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Hg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tge(e,t){if(e==null)return{};var r=rge(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function rge(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function nge(e,t){var r=e.x,n=e.y,s=tge(e,Q0e),i="".concat(r),o=parseInt(i,10),l="".concat(n),d=parseInt(l,10),u="".concat(t.height||s.height),m=parseInt(u,10),p="".concat(t.width||s.width),g=parseInt(p,10);return b0(b0(b0(b0(b0({},t),s),o?{x:o}:{}),d?{y:d}:{}),{},{height:m,width:g,name:t.name,radius:t.radius})}function n6(e){return Y.createElement(Tv,NT({shapeType:"rectangle",propTransformer:nge,activeClassName:"recharts-active-bar"},e))}var age=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,s){if(typeof t=="number")return t;var i=it(n)||Cne(n);return i?t(n,s):(i||Tf(),r)}},sge=["value","background"],_H;function Im(e){"@babel/helpers - typeof";return Im=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Im(e)}function ige(e,t){if(e==null)return{};var r=oge(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function oge(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Dv(){return Dv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dv.apply(this,arguments)}function a6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ma(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?a6(Object(r),!0).forEach(function(n){Xd(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s6(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,TH(n.key),n)}}function cge(e,t,r){return t&&s6(e.prototype,t),r&&s6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function dge(e,t,r){return t=Iv(t),uge(e,CH()?Reflect.construct(t,r||[],Iv(e).constructor):t.apply(e,r))}function uge(e,t){if(t&&(Im(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fge(e)}function fge(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CH=function(){return!!e})()}function Iv(e){return Iv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Iv(e)}function pge(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ST(e,t)}function ST(e,t){return ST=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},ST(e,t)}function Xd(e,t,r){return t=TH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TH(e){var t=mge(e,"string");return Im(t)=="symbol"?t:t+""}function mge(e,t){if(Im(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Im(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ns=(function(e){function t(){var r;lge(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=dge(this,t,[].concat(s)),Xd(r,"state",{isAnimationFinished:!1}),Xd(r,"id",ld("recharts-bar-")),Xd(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),Xd(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return pge(t,e),cge(t,[{key:"renderRectanglesStatically",value:function(n){var s=this,i=this.props,o=i.shape,l=i.dataKey,d=i.activeIndex,u=i.activeBar,m=Pt(this.props,!1);return n&&n.map(function(p,g){var x=g===d,y=x?u:o,N=ma(ma(ma({},m),p),{},{isActive:x,option:y,index:g,dataKey:l,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return Y.createElement(pr,Dv({className:"recharts-bar-rectangle"},iu(s.props,p,g),{key:"rectangle-".concat(p?.x,"-").concat(p?.y,"-").concat(p?.value,"-").concat(g)}),Y.createElement(n6,N))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,s=this.props,i=s.data,o=s.layout,l=s.isAnimationActive,d=s.animationBegin,u=s.animationDuration,m=s.animationEasing,p=s.animationId,g=this.state.prevData;return Y.createElement(ui,{begin:d,duration:u,isActive:l,easing:m,from:{t:0},to:{t:1},key:"bar-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var y=x.t,N=i.map(function(v,S){var E=g&&g[S];if(E){var C=Hn(E.x,v.x),_=Hn(E.y,v.y),A=Hn(E.width,v.width),T=Hn(E.height,v.height);return ma(ma({},v),{},{x:C(y),y:_(y),width:A(y),height:T(y)})}if(o==="horizontal"){var R=Hn(0,v.height),I=R(y);return ma(ma({},v),{},{y:v.y+v.height-I,height:I})}var k=Hn(0,v.width),w=k(y);return ma(ma({},v),{},{width:w})});return Y.createElement(pr,null,n.renderRectanglesStatically(N))})}},{key:"renderRectangles",value:function(){var n=this.props,s=n.data,i=n.isAnimationActive,o=this.state.prevData;return i&&s&&s.length&&(!o||!ou(o,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var n=this,s=this.props,i=s.data,o=s.dataKey,l=s.activeIndex,d=Pt(this.props.background,!1);return i.map(function(u,m){u.value;var p=u.background,g=ige(u,sge);if(!p)return null;var x=ma(ma(ma(ma(ma({},g),{},{fill:"#eee"},p),d),iu(n.props,u,m)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:m,className:"recharts-bar-background-rectangle"});return Y.createElement(n6,Dv({key:"background-bar-".concat(m),option:n.props.background,isActive:m===l},x))})}},{key:"renderErrorBar",value:function(n,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,d=i.yAxis,u=i.layout,m=i.children,p=Us(m,vh);if(!p)return null;var g=u==="vertical"?o[0].height/2:o[0].width/2,x=function(v,S){var E=Array.isArray(v.value)?v.value[1]:v.value;return{x:v.x,y:v.y,value:E,errorVal:yn(v,S)}},y={clipPath:n?"url(#clipPath-".concat(s,")"):null};return Y.createElement(pr,y,p.map(function(N){return Y.cloneElement(N,{key:"error-bar-".concat(s,"-").concat(N.props.dataKey),data:o,xAxis:l,yAxis:d,layout:u,offset:g,dataPointFormatter:x})}))}},{key:"render",value:function(){var n=this.props,s=n.hide,i=n.data,o=n.className,l=n.xAxis,d=n.yAxis,u=n.left,m=n.top,p=n.width,g=n.height,x=n.isAnimationActive,y=n.background,N=n.id;if(s||!i||!i.length)return null;var v=this.state.isAnimationFinished,S=cr("recharts-bar",o),E=l&&l.allowDataOverflow,C=d&&d.allowDataOverflow,_=E||C,A=er(N)?this.id:N;return Y.createElement(pr,{className:S},E||C?Y.createElement("defs",null,Y.createElement("clipPath",{id:"clipPath-".concat(A)},Y.createElement("rect",{x:E?u:u-p/2,y:C?m:m-g/2,width:E?p:p*2,height:C?g:g*2}))):null,Y.createElement(pr,{className:"recharts-bar-rectangles",clipPath:_?"url(#clipPath-".concat(A,")"):null},y?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(_,A),(!x||v)&&Ns.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:s.curData}:n.data!==s.curData?{curData:n.data}:null}}])})(h.PureComponent);_H=ns;Xd(ns,"displayName","Bar");Xd(ns,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Jo.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Xd(ns,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,s=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,d=e.yAxisTicks,u=e.stackedData,m=e.dataStartIndex,p=e.displayedData,g=e.offset,x=Kue(n,r);if(!x)return null;var y=t.layout,N=r.type.defaultProps,v=N!==void 0?ma(ma({},N),r.props):r.props,S=v.dataKey,E=v.children,C=v.minPointSize,_=y==="horizontal"?o:i,A=u?_.scale.domain():null,T=Que({numericAxis:_}),R=Us(E,yo),I=p.map(function(k,w){var L,H,B,M,G,$;u?L=zue(u[m+w],A):(L=yn(k,S),Array.isArray(L)||(L=[T,L]));var z=age(C,_H.defaultProps.minPointSize)(L[1],w);if(y==="horizontal"){var U,Z=[o.scale(L[0]),o.scale(L[1])],re=Z[0],X=Z[1];H=P$({axis:i,ticks:l,bandSize:s,offset:x.offset,entry:k,index:w}),B=(U=X??re)!==null&&U!==void 0?U:void 0,M=x.size;var F=re-X;if(G=Number.isNaN(F)?0:F,$={x:H,y:o.y,width:M,height:o.height},Math.abs(z)>0&&Math.abs(G)<Math.abs(z)){var te=Ms(G||z)*(Math.abs(z)-Math.abs(G));B-=te,G+=te}}else{var ne=[i.scale(L[0]),i.scale(L[1])],se=ne[0],Ne=ne[1];if(H=se,B=P$({axis:o,ticks:d,bandSize:s,offset:x.offset,entry:k,index:w}),M=Ne-se,G=x.size,$={x:i.x,y:B,width:i.width,height:G},Math.abs(z)>0&&Math.abs(M)<Math.abs(z)){var fe=Ms(M||z)*(Math.abs(z)-Math.abs(M));M+=fe}}return ma(ma(ma({},k),{},{x:H,y:B,width:M,height:G,value:u?L:L[1],payload:k,background:$},R&&R[w]&&R[w].props),{},{tooltipPayload:[J9(r,k)],tooltipPosition:{x:H+M/2,y:B+G/2}})});return ma({data:I,layout:y},g)});function Kg(e){"@babel/helpers - typeof";return Kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kg(e)}function hge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i6(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,OH(n.key),n)}}function gge(e,t,r){return t&&i6(e.prototype,t),r&&i6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function o6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Go(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o6(Object(r),!0).forEach(function(n){hN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hN(e,t,r){return t=OH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OH(e){var t=xge(e,"string");return Kg(t)=="symbol"?t:t+""}function xge(e,t){if(Kg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Kg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gN=function(t,r,n,s,i){var o=t.width,l=t.height,d=t.layout,u=t.children,m=Object.keys(r),p={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},g=!!xs(u,ns);return m.reduce(function(x,y){var N=r[y],v=N.orientation,S=N.domain,E=N.padding,C=E===void 0?{}:E,_=N.mirror,A=N.reversed,T="".concat(v).concat(_?"Mirror":""),R,I,k,w,L;if(N.type==="number"&&(N.padding==="gap"||N.padding==="no-gap")){var H=S[1]-S[0],B=1/0,M=N.categoricalDomain.sort(kne);if(M.forEach(function(ne,se){se>0&&(B=Math.min((ne||0)-(M[se-1]||0),B))}),Number.isFinite(B)){var G=B/H,$=N.layout==="vertical"?n.height:n.width;if(N.padding==="gap"&&(R=G*$/2),N.padding==="no-gap"){var z=Ls(t.barCategoryGap,G*$),U=G*$/2;R=U-z-(U-z)/$*z}}}s==="xAxis"?I=[n.left+(C.left||0)+(R||0),n.left+n.width-(C.right||0)-(R||0)]:s==="yAxis"?I=d==="horizontal"?[n.top+n.height-(C.bottom||0),n.top+(C.top||0)]:[n.top+(C.top||0)+(R||0),n.top+n.height-(C.bottom||0)-(R||0)]:I=N.range,A&&(I=[I[1],I[0]]);var Z=Y9(N,i,g),re=Z.scale,X=Z.realScaleType;re.domain(S).range(I),X9(re);var F=Q9(re,Go(Go({},N),{},{realScaleType:X}));s==="xAxis"?(L=v==="top"&&!_||v==="bottom"&&_,k=n.left,w=p[T]-L*N.height):s==="yAxis"&&(L=v==="left"&&!_||v==="right"&&_,k=p[T]-L*N.width,w=n.top);var te=Go(Go(Go({},N),F),{},{realScaleType:X,x:k,y:w,scale:re,width:s==="xAxis"?n.width:N.width,height:s==="yAxis"?n.height:N.height});return te.bandSize=xv(te,F),!N.hide&&s==="xAxis"?p[T]+=(L?-1:1)*te.height:N.hide||(p[T]+=(L?-1:1)*te.width),Go(Go({},x),{},hN({},y,te))},{})},RH=function(t,r){var n=t.x,s=t.y,i=r.x,o=r.y;return{x:Math.min(n,i),y:Math.min(s,o),width:Math.abs(i-n),height:Math.abs(o-s)}},bge=function(t){var r=t.x1,n=t.y1,s=t.x2,i=t.y2;return RH({x:r,y:n},{x:s,y:i})},kH=(function(){function e(t){hge(this,e),this.scale=t}return gge(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(s){var d=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+d}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),s=n[0],i=n[n.length-1];return s<=i?r>=s&&r<=i:r>=i&&r<=s}}],[{key:"create",value:function(r){return new e(r)}}])})();hN(kH,"EPS",1e-4);var S3=function(t){var r=Object.keys(t).reduce(function(n,s){return Go(Go({},n),{},hN({},s,kH.create(t[s])))},{});return Go(Go({},r),{},{apply:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return q0e(s,function(d,u){return r[u].apply(d,{bandAware:o,position:l})})},isInRange:function(s){return AH(s,function(i,o){return r[o].isInRange(i)})}})};function yge(e){return(e%180+180)%180}var vge=function(t){var r=t.width,n=t.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=yge(s),o=i*Math.PI/180,l=Math.atan(n/r),d=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(d)},Vw,l6;function Nge(){if(l6)return Vw;l6=1;var e=ec(),t=mh(),r=hh();function n(s){return function(i,o,l){var d=Object(i);if(!t(i)){var u=e(o,3);i=r(i),o=function(p){return u(d[p],p,d)}}var m=s(i,o,l);return m>-1?d[u?i[m]:m]:void 0}}return Vw=n,Vw}var Yw,c6;function Sge(){if(c6)return Yw;c6=1;var e=SH();function t(r){var n=e(r),s=n%1;return n===n?s?n-s:n:0}return Yw=t,Yw}var Xw,d6;function Ege(){if(d6)return Xw;d6=1;var e=TG(),t=ec(),r=Sge(),n=Math.max;function s(i,o,l){var d=i==null?0:i.length;if(!d)return-1;var u=l==null?0:r(l);return u<0&&(u=n(d+u,0)),e(i,t(o,3),u)}return Xw=s,Xw}var Qw,u6;function jge(){if(u6)return Qw;u6=1;var e=Nge(),t=Ege(),r=e(t);return Qw=r,Qw}var wge=jge();const Age=Zr(wge);var _ge=GB();const Cge=Zr(_ge);var Tge=Cge(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),E3=h.createContext(void 0),j3=h.createContext(void 0),PH=h.createContext(void 0),DH=h.createContext({}),IH=h.createContext(void 0),MH=h.createContext(0),LH=h.createContext(0),f6=function(t){var r=t.state,n=r.xAxisMap,s=r.yAxisMap,i=r.offset,o=t.clipPathId,l=t.children,d=t.width,u=t.height,m=Tge(i);return Y.createElement(E3.Provider,{value:n},Y.createElement(j3.Provider,{value:s},Y.createElement(DH.Provider,{value:i},Y.createElement(PH.Provider,{value:m},Y.createElement(IH.Provider,{value:o},Y.createElement(MH.Provider,{value:u},Y.createElement(LH.Provider,{value:d},l)))))))},Oge=function(){return h.useContext(IH)},$H=function(t){var r=h.useContext(E3);r==null&&Tf();var n=r[t];return n==null&&Tf(),n},Rge=function(){var t=h.useContext(E3);return Vd(t)},kge=function(){var t=h.useContext(j3),r=Age(t,function(n){return AH(n.domain,Number.isFinite)});return r||Vd(t)},FH=function(t){var r=h.useContext(j3);r==null&&Tf();var n=r[t];return n==null&&Tf(),n},Pge=function(){var t=h.useContext(PH);return t},Dge=function(){return h.useContext(DH)},w3=function(){return h.useContext(LH)},A3=function(){return h.useContext(MH)};function Mm(e){"@babel/helpers - typeof";return Mm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mm(e)}function Ige(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mge(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,BH(n.key),n)}}function Lge(e,t,r){return t&&Mge(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function $ge(e,t,r){return t=Mv(t),Fge(e,UH()?Reflect.construct(t,r||[],Mv(e).constructor):t.apply(e,r))}function Fge(e,t){if(t&&(Mm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Uge(e)}function Uge(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UH=function(){return!!e})()}function Mv(e){return Mv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Mv(e)}function Bge(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ET(e,t)}function ET(e,t){return ET=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},ET(e,t)}function p6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function m6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p6(Object(r),!0).forEach(function(n){_3(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _3(e,t,r){return t=BH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BH(e){var t=Gge(e,"string");return Mm(t)=="symbol"?t:t+""}function Gge(e,t){if(Mm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Mm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Hge(e,t){return Wge(e)||qge(e,t)||zge(e,t)||Kge()}function Kge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zge(e,t){if(e){if(typeof e=="string")return h6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h6(e,t)}}function h6(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function qge(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);d=!0);}catch(m){u=!0,s=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Wge(e){if(Array.isArray(e))return e}function jT(){return jT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jT.apply(this,arguments)}var Vge=function(t,r){var n;return Y.isValidElement(t)?n=Y.cloneElement(t,r):Yt(t)?n=t(r):n=Y.createElement("line",jT({},r,{className:"recharts-reference-line-line"})),n},Yge=function(t,r,n,s,i,o,l,d,u){var m=i.x,p=i.y,g=i.width,x=i.height;if(n){var y=u.y,N=t.y.apply(y,{position:o});if(ql(u,"discard")&&!t.y.isInRange(N))return null;var v=[{x:m+g,y:N},{x:m,y:N}];return d==="left"?v.reverse():v}if(r){var S=u.x,E=t.x.apply(S,{position:o});if(ql(u,"discard")&&!t.x.isInRange(E))return null;var C=[{x:E,y:p+x},{x:E,y:p}];return l==="top"?C.reverse():C}if(s){var _=u.segment,A=_.map(function(T){return t.apply(T,{position:o})});return ql(u,"discard")&&H0e(A,function(T){return!t.isInRange(T)})?null:A}return null};function Xge(e){var t=e.x,r=e.y,n=e.segment,s=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,d=e.alwaysShow,u=Oge(),m=$H(s),p=FH(i),g=Pge();if(!u||!g)return null;Zo(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var x=S3({x:m.scale,y:p.scale}),y=Pa(t),N=Pa(r),v=n&&n.length===2,S=Yge(x,y,N,v,g,e.position,m.orientation,p.orientation,e);if(!S)return null;var E=Hge(S,2),C=E[0],_=C.x,A=C.y,T=E[1],R=T.x,I=T.y,k=ql(e,"hidden")?"url(#".concat(u,")"):void 0,w=m6(m6({clipPath:k},Pt(e,!0)),{},{x1:_,y1:A,x2:R,y2:I});return Y.createElement(pr,{className:cr("recharts-reference-line",l)},Vge(o,w),Ka.renderCallByParent(e,bge({x1:_,y1:A,x2:R,y2:I})))}var Wl=(function(e){function t(){return Ige(this,t),$ge(this,t,arguments)}return Bge(t,e),Lge(t,[{key:"render",value:function(){return Y.createElement(Xge,this.props)}}])})(Y.Component);_3(Wl,"displayName","ReferenceLine");_3(Wl,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function wT(){return wT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wT.apply(this,arguments)}function Lm(e){"@babel/helpers - typeof";return Lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lm(e)}function g6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function x6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?g6(Object(r),!0).forEach(function(n){xN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Qge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zge(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,HH(n.key),n)}}function Jge(e,t,r){return t&&Zge(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function exe(e,t,r){return t=Lv(t),txe(e,GH()?Reflect.construct(t,r||[],Lv(e).constructor):t.apply(e,r))}function txe(e,t){if(t&&(Lm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rxe(e)}function rxe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GH=function(){return!!e})()}function Lv(e){return Lv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Lv(e)}function nxe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&AT(e,t)}function AT(e,t){return AT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},AT(e,t)}function xN(e,t,r){return t=HH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HH(e){var t=axe(e,"string");return Lm(t)=="symbol"?t:t+""}function axe(e,t){if(Lm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Lm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var sxe=function(t){var r=t.x,n=t.y,s=t.xAxis,i=t.yAxis,o=S3({x:s.scale,y:i.scale}),l=o.apply({x:r,y:n},{bandAware:!0});return ql(t,"discard")&&!o.isInRange(l)?null:l},px=(function(e){function t(){return Qge(this,t),exe(this,t,arguments)}return nxe(t,e),Jge(t,[{key:"render",value:function(){var n=this.props,s=n.x,i=n.y,o=n.r,l=n.alwaysShow,d=n.clipPathId,u=Pa(s),m=Pa(i);if(Zo(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!m)return null;var p=sxe(this.props);if(!p)return null;var g=p.x,x=p.y,y=this.props,N=y.shape,v=y.className,S=ql(this.props,"hidden")?"url(#".concat(d,")"):void 0,E=x6(x6({clipPath:S},Pt(this.props,!0)),{},{cx:g,cy:x});return Y.createElement(pr,{className:cr("recharts-reference-dot",v)},t.renderDot(N,E),Ka.renderCallByParent(this.props,{x:g-o,y:x-o,width:2*o,height:2*o}))}}])})(Y.Component);xN(px,"displayName","ReferenceDot");xN(px,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});xN(px,"renderDot",function(e,t){var r;return Y.isValidElement(e)?r=Y.cloneElement(e,t):Yt(e)?r=e(t):r=Y.createElement(fx,wT({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function _T(){return _T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_T.apply(this,arguments)}function $m(e){"@babel/helpers - typeof";return $m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$m(e)}function b6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function y6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?b6(Object(r),!0).forEach(function(n){bN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ixe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oxe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,zH(n.key),n)}}function lxe(e,t,r){return t&&oxe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function cxe(e,t,r){return t=$v(t),dxe(e,KH()?Reflect.construct(t,r||[],$v(e).constructor):t.apply(e,r))}function dxe(e,t){if(t&&($m(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uxe(e)}function uxe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KH=function(){return!!e})()}function $v(e){return $v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$v(e)}function fxe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&CT(e,t)}function CT(e,t){return CT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},CT(e,t)}function bN(e,t,r){return t=zH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zH(e){var t=pxe(e,"string");return $m(t)=="symbol"?t:t+""}function pxe(e,t){if($m(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if($m(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var mxe=function(t,r,n,s,i){var o=i.x1,l=i.x2,d=i.y1,u=i.y2,m=i.xAxis,p=i.yAxis;if(!m||!p)return null;var g=S3({x:m.scale,y:p.scale}),x={x:t?g.x.apply(o,{position:"start"}):g.x.rangeMin,y:n?g.y.apply(d,{position:"start"}):g.y.rangeMin},y={x:r?g.x.apply(l,{position:"end"}):g.x.rangeMax,y:s?g.y.apply(u,{position:"end"}):g.y.rangeMax};return ql(i,"discard")&&(!g.isInRange(x)||!g.isInRange(y))?null:RH(x,y)},yN=(function(e){function t(){return ixe(this,t),cxe(this,t,arguments)}return fxe(t,e),lxe(t,[{key:"render",value:function(){var n=this.props,s=n.x1,i=n.x2,o=n.y1,l=n.y2,d=n.className,u=n.alwaysShow,m=n.clipPathId;Zo(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=Pa(s),g=Pa(i),x=Pa(o),y=Pa(l),N=this.props.shape;if(!p&&!g&&!x&&!y&&!N)return null;var v=mxe(p,g,x,y,this.props);if(!v&&!N)return null;var S=ql(this.props,"hidden")?"url(#".concat(m,")"):void 0;return Y.createElement(pr,{className:cr("recharts-reference-area",d)},t.renderRect(N,y6(y6({clipPath:S},Pt(this.props,!0)),v)),Ka.renderCallByParent(this.props,v))}}])})(Y.Component);bN(yN,"displayName","ReferenceArea");bN(yN,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});bN(yN,"renderRect",function(e,t){var r;return Y.isValidElement(e)?r=Y.cloneElement(e,t):Yt(e)?r=e(t):r=Y.createElement(lN,_T({},t,{className:"recharts-reference-area-rect"})),r});function qH(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],s=0;s<e.length;s+=t)n.push(e[s]);return n}function hxe(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return vge(n,r)}function gxe(e,t,r){var n=r==="width",s=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:n?s:i,end:n?s+o:i+l}:{start:n?s+o:i+l,end:n?s:i}}function Fv(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-s)<=0}function xxe(e,t){return qH(e,t+1)}function bxe(e,t,r,n,s){for(var i=(n||[]).slice(),o=t.start,l=t.end,d=0,u=1,m=o,p=function(){var y=n?.[d];if(y===void 0)return{v:qH(n,u)};var N=d,v,S=function(){return v===void 0&&(v=r(y,N)),v},E=y.coordinate,C=d===0||Fv(e,E,S,m,l);C||(d=0,m=o,u+=1),C&&(m=E+e*(S()/2+s),d+=u)},g;u<=i.length;)if(g=p(),g)return g.v;return[]}function zg(e){"@babel/helpers - typeof";return zg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zg(e)}function v6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function hs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?v6(Object(r),!0).forEach(function(n){yxe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yxe(e,t,r){return t=vxe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vxe(e){var t=Nxe(e,"string");return zg(t)=="symbol"?t:t+""}function Nxe(e,t){if(zg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(zg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Sxe(e,t,r,n,s){for(var i=(n||[]).slice(),o=i.length,l=t.start,d=t.end,u=function(g){var x=i[g],y,N=function(){return y===void 0&&(y=r(x,g)),y};if(g===o-1){var v=e*(x.coordinate+e*N()/2-d);i[g]=x=hs(hs({},x),{},{tickCoord:v>0?x.coordinate-v*e:x.coordinate})}else i[g]=x=hs(hs({},x),{},{tickCoord:x.coordinate});var S=Fv(e,x.tickCoord,N,l,d);S&&(d=x.tickCoord-e*(N()/2+s),i[g]=hs(hs({},x),{},{isShow:!0}))},m=o-1;m>=0;m--)u(m);return i}function Exe(e,t,r,n,s,i){var o=(n||[]).slice(),l=o.length,d=t.start,u=t.end;if(i){var m=n[l-1],p=r(m,l-1),g=e*(m.coordinate+e*p/2-u);o[l-1]=m=hs(hs({},m),{},{tickCoord:g>0?m.coordinate-g*e:m.coordinate});var x=Fv(e,m.tickCoord,function(){return p},d,u);x&&(u=m.tickCoord-e*(p/2+s),o[l-1]=hs(hs({},m),{},{isShow:!0}))}for(var y=i?l-1:l,N=function(E){var C=o[E],_,A=function(){return _===void 0&&(_=r(C,E)),_};if(E===0){var T=e*(C.coordinate-e*A()/2-d);o[E]=C=hs(hs({},C),{},{tickCoord:T<0?C.coordinate-T*e:C.coordinate})}else o[E]=C=hs(hs({},C),{},{tickCoord:C.coordinate});var R=Fv(e,C.tickCoord,A,d,u);R&&(d=C.tickCoord+e*(A()/2+s),o[E]=hs(hs({},C),{},{isShow:!0}))},v=0;v<y;v++)N(v);return o}function C3(e,t,r){var n=e.tick,s=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,d=e.interval,u=e.tickFormatter,m=e.unit,p=e.angle;if(!s||!s.length||!n)return[];if(it(d)||Jo.isSsr)return xxe(s,typeof d=="number"&&it(d)?d:0);var g=[],x=l==="top"||l==="bottom"?"width":"height",y=m&&x==="width"?tm(m,{fontSize:t,letterSpacing:r}):{width:0,height:0},N=function(C,_){var A=Yt(u)?u(C.value,_):C.value;return x==="width"?hxe(tm(A,{fontSize:t,letterSpacing:r}),y,p):tm(A,{fontSize:t,letterSpacing:r})[x]},v=s.length>=2?Ms(s[1].coordinate-s[0].coordinate):1,S=gxe(i,v,x);return d==="equidistantPreserveStart"?bxe(v,S,N,s,o):(d==="preserveStart"||d==="preserveStartEnd"?g=Exe(v,S,N,s,o,d==="preserveStartEnd"):g=Sxe(v,S,N,s,o),g.filter(function(E){return E.isShow}))}var jxe=["viewBox"],wxe=["viewBox"],Axe=["ticks"];function Fm(e){"@babel/helpers - typeof";return Fm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fm(e)}function Hp(){return Hp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hp.apply(this,arguments)}function N6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function wa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?N6(Object(r),!0).forEach(function(n){T3(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Zw(e,t){if(e==null)return{};var r=_xe(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function _xe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Cxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S6(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,VH(n.key),n)}}function Txe(e,t,r){return t&&S6(e.prototype,t),r&&S6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Oxe(e,t,r){return t=Uv(t),Rxe(e,WH()?Reflect.construct(t,r||[],Uv(e).constructor):t.apply(e,r))}function Rxe(e,t){if(t&&(Fm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kxe(e)}function kxe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function WH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(WH=function(){return!!e})()}function Uv(e){return Uv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Uv(e)}function Pxe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&TT(e,t)}function TT(e,t){return TT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},TT(e,t)}function T3(e,t,r){return t=VH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VH(e){var t=Dxe(e,"string");return Fm(t)=="symbol"?t:t+""}function Dxe(e,t){if(Fm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Fm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Nh=(function(e){function t(r){var n;return Cxe(this,t),n=Oxe(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return Pxe(t,e),Txe(t,[{key:"shouldComponentUpdate",value:function(n,s){var i=n.viewBox,o=Zw(n,jxe),l=this.props,d=l.viewBox,u=Zw(l,wxe);return!em(i,d)||!em(o,u)||!em(s,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var s=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var s=this.props,i=s.x,o=s.y,l=s.width,d=s.height,u=s.orientation,m=s.tickSize,p=s.mirror,g=s.tickMargin,x,y,N,v,S,E,C=p?-1:1,_=n.tickSize||m,A=it(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":x=y=n.coordinate,v=o+ +!p*d,N=v-C*_,E=N-C*g,S=A;break;case"left":N=v=n.coordinate,y=i+ +!p*l,x=y-C*_,S=x-C*g,E=A;break;case"right":N=v=n.coordinate,y=i+ +p*l,x=y+C*_,S=x+C*g,E=A;break;default:x=y=n.coordinate,v=o+ +p*d,N=v+C*_,E=N+C*g,S=A;break}return{line:{x1:x,y1:N,x2:y,y2:v},tick:{x:S,y:E}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,s=n.orientation,i=n.mirror,o;switch(s){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,s=n.orientation,i=n.mirror,o="end";switch(s){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.x,i=n.y,o=n.width,l=n.height,d=n.orientation,u=n.mirror,m=n.axisLine,p=wa(wa(wa({},Pt(this.props,!1)),Pt(m,!1)),{},{fill:"none"});if(d==="top"||d==="bottom"){var g=+(d==="top"&&!u||d==="bottom"&&u);p=wa(wa({},p),{},{x1:s,y1:i+g*l,x2:s+o,y2:i+g*l})}else{var x=+(d==="left"&&!u||d==="right"&&u);p=wa(wa({},p),{},{x1:s+x*o,y1:i,x2:s+x*o,y2:i+l})}return Y.createElement("line",Hp({},p,{className:cr("recharts-cartesian-axis-line",ci(m,"className"))}))}},{key:"renderTicks",value:function(n,s,i){var o=this,l=this.props,d=l.tickLine,u=l.stroke,m=l.tick,p=l.tickFormatter,g=l.unit,x=C3(wa(wa({},this.props),{},{ticks:n}),s,i),y=this.getTickTextAnchor(),N=this.getTickVerticalAnchor(),v=Pt(this.props,!1),S=Pt(m,!1),E=wa(wa({},v),{},{fill:"none"},Pt(d,!1)),C=x.map(function(_,A){var T=o.getTickLineCoord(_),R=T.line,I=T.tick,k=wa(wa(wa(wa({textAnchor:y,verticalAnchor:N},v),{},{stroke:"none",fill:u},S),I),{},{index:A,payload:_,visibleTicksCount:x.length,tickFormatter:p});return Y.createElement(pr,Hp({className:"recharts-cartesian-axis-tick",key:"tick-".concat(_.value,"-").concat(_.coordinate,"-").concat(_.tickCoord)},iu(o.props,_,A)),d&&Y.createElement("line",Hp({},E,R,{className:cr("recharts-cartesian-axis-tick-line",ci(d,"className"))})),m&&t.renderTickItem(m,k,"".concat(Yt(p)?p(_.value,A):_.value).concat(g||"")))});return Y.createElement("g",{className:"recharts-cartesian-axis-ticks"},C)}},{key:"render",value:function(){var n=this,s=this.props,i=s.axisLine,o=s.width,l=s.height,d=s.ticksGenerator,u=s.className,m=s.hide;if(m)return null;var p=this.props,g=p.ticks,x=Zw(p,Axe),y=g;return Yt(d)&&(y=g&&g.length>0?d(this.props):d(x)),o<=0||l<=0||!y||!y.length?null:Y.createElement(pr,{className:cr("recharts-cartesian-axis",u),ref:function(v){n.layerReference=v}},i&&this.renderAxisLine(),this.renderTicks(y,this.state.fontSize,this.state.letterSpacing),Ka.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,s,i){var o,l=cr(s.className,"recharts-cartesian-axis-tick-value");return Y.isValidElement(n)?o=Y.cloneElement(n,wa(wa({},s),{},{className:l})):Yt(n)?o=n(wa(wa({},s),{},{className:l})):o=Y.createElement(Af,Hp({},s,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])})(h.Component);T3(Nh,"displayName","CartesianAxis");T3(Nh,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Ixe=["x1","y1","x2","y2","key"],Mxe=["offset"];function Of(e){"@babel/helpers - typeof";return Of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Of(e)}function E6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function bs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?E6(Object(r),!0).forEach(function(n){Lxe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Lxe(e,t,r){return t=$xe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $xe(e){var t=Fxe(e,"string");return Of(t)=="symbol"?t:t+""}function Fxe(e,t){if(Of(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Of(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ff(){return ff=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ff.apply(this,arguments)}function j6(e,t){if(e==null)return{};var r=Uxe(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Uxe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Bxe=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,s=t.x,i=t.y,o=t.width,l=t.height,d=t.ry;return Y.createElement("rect",{x:s,y:i,ry:d,width:o,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function YH(e,t){var r;if(Y.isValidElement(e))r=Y.cloneElement(e,t);else if(Yt(e))r=e(t);else{var n=t.x1,s=t.y1,i=t.x2,o=t.y2,l=t.key,d=j6(t,Ixe),u=Pt(d,!1);u.offset;var m=j6(u,Mxe);r=Y.createElement("line",ff({},m,{x1:n,y1:s,x2:i,y2:o,fill:"none",key:l}))}return r}function Gxe(e){var t=e.x,r=e.width,n=e.horizontal,s=n===void 0?!0:n,i=e.horizontalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,d){var u=bs(bs({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(d),index:d});return YH(s,u)});return Y.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function Hxe(e){var t=e.y,r=e.height,n=e.vertical,s=n===void 0?!0:n,i=e.verticalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,d){var u=bs(bs({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(d),index:d});return YH(s,u)});return Y.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function Kxe(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,s=e.y,i=e.width,o=e.height,l=e.horizontalPoints,d=e.horizontal,u=d===void 0?!0:d;if(!u||!t||!t.length)return null;var m=l.map(function(g){return Math.round(g+s-s)}).sort(function(g,x){return g-x});s!==m[0]&&m.unshift(0);var p=m.map(function(g,x){var y=!m[x+1],N=y?s+o-g:m[x+1]-g;if(N<=0)return null;var v=x%t.length;return Y.createElement("rect",{key:"react-".concat(x),y:g,x:n,height:N,width:i,stroke:"none",fill:t[v],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return Y.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function zxe(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,s=e.fillOpacity,i=e.x,o=e.y,l=e.width,d=e.height,u=e.verticalPoints;if(!r||!n||!n.length)return null;var m=u.map(function(g){return Math.round(g+i-i)}).sort(function(g,x){return g-x});i!==m[0]&&m.unshift(0);var p=m.map(function(g,x){var y=!m[x+1],N=y?i+l-g:m[x+1]-g;if(N<=0)return null;var v=x%n.length;return Y.createElement("rect",{key:"react-".concat(x),x:g,y:o,width:N,height:d,stroke:"none",fill:n[v],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return Y.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var qxe=function(t,r){var n=t.xAxis,s=t.width,i=t.height,o=t.offset;return V9(C3(bs(bs(bs({},Nh.defaultProps),n),{},{ticks:qc(n,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.left,o.left+o.width,r)},Wxe=function(t,r){var n=t.yAxis,s=t.width,i=t.height,o=t.offset;return V9(C3(bs(bs(bs({},Nh.defaultProps),n),{},{ticks:qc(n,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.top,o.top+o.height,r)},Ep={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function ys(e){var t,r,n,s,i,o,l=w3(),d=A3(),u=Dge(),m=bs(bs({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Ep.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:Ep.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:Ep.horizontal,horizontalFill:(s=e.horizontalFill)!==null&&s!==void 0?s:Ep.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:Ep.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:Ep.verticalFill,x:it(e.x)?e.x:u.left,y:it(e.y)?e.y:u.top,width:it(e.width)?e.width:u.width,height:it(e.height)?e.height:u.height}),p=m.x,g=m.y,x=m.width,y=m.height,N=m.syncWithTicks,v=m.horizontalValues,S=m.verticalValues,E=Rge(),C=kge();if(!it(x)||x<=0||!it(y)||y<=0||!it(p)||p!==+p||!it(g)||g!==+g)return null;var _=m.verticalCoordinatesGenerator||qxe,A=m.horizontalCoordinatesGenerator||Wxe,T=m.horizontalPoints,R=m.verticalPoints;if((!T||!T.length)&&Yt(A)){var I=v&&v.length,k=A({yAxis:C?bs(bs({},C),{},{ticks:I?v:C.ticks}):void 0,width:l,height:d,offset:u},I?!0:N);Zo(Array.isArray(k),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Of(k),"]")),Array.isArray(k)&&(T=k)}if((!R||!R.length)&&Yt(_)){var w=S&&S.length,L=_({xAxis:E?bs(bs({},E),{},{ticks:w?S:E.ticks}):void 0,width:l,height:d,offset:u},w?!0:N);Zo(Array.isArray(L),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Of(L),"]")),Array.isArray(L)&&(R=L)}return Y.createElement("g",{className:"recharts-cartesian-grid"},Y.createElement(Bxe,{fill:m.fill,fillOpacity:m.fillOpacity,x:m.x,y:m.y,width:m.width,height:m.height,ry:m.ry}),Y.createElement(Gxe,ff({},m,{offset:u,horizontalPoints:T,xAxis:E,yAxis:C})),Y.createElement(Hxe,ff({},m,{offset:u,verticalPoints:R,xAxis:E,yAxis:C})),Y.createElement(Kxe,ff({},m,{horizontalPoints:T})),Y.createElement(zxe,ff({},m,{verticalPoints:R})))}ys.displayName="CartesianGrid";var Vxe=["type","layout","connectNulls","ref"],Yxe=["key"];function Um(e){"@babel/helpers - typeof";return Um=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Um(e)}function w6(e,t){if(e==null)return{};var r=Xxe(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Xxe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function sg(){return sg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sg.apply(this,arguments)}function A6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Di(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?A6(Object(r),!0).forEach(function(n){Ho(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jp(e){return ebe(e)||Jxe(e)||Zxe(e)||Qxe()}function Qxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zxe(e,t){if(e){if(typeof e=="string")return OT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return OT(e,t)}}function Jxe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ebe(e){if(Array.isArray(e))return OT(e)}function OT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function tbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _6(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,QH(n.key),n)}}function rbe(e,t,r){return t&&_6(e.prototype,t),r&&_6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function nbe(e,t,r){return t=Bv(t),abe(e,XH()?Reflect.construct(t,r||[],Bv(e).constructor):t.apply(e,r))}function abe(e,t){if(t&&(Um(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sbe(e)}function sbe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XH=function(){return!!e})()}function Bv(e){return Bv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Bv(e)}function ibe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&RT(e,t)}function RT(e,t){return RT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},RT(e,t)}function Ho(e,t,r){return t=QH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QH(e){var t=obe(e,"string");return Um(t)=="symbol"?t:t+""}function obe(e,t){if(Um(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Um(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var qa=(function(e){function t(){var r;tbe(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=nbe(this,t,[].concat(s)),Ho(r,"state",{isAnimationFinished:!0,totalLength:0}),Ho(r,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),Ho(r,"getStrokeDasharray",function(o,l,d){var u=d.reduce(function(S,E){return S+E});if(!u)return r.generateSimpleStrokeDasharray(l,o);for(var m=Math.floor(o/u),p=o%u,g=l-o,x=[],y=0,N=0;y<d.length;N+=d[y],++y)if(N+d[y]>p){x=[].concat(jp(d.slice(0,y)),[p-N]);break}var v=x.length%2===0?[0,g]:[g];return[].concat(jp(t.repeat(d,m)),jp(x),v).map(function(S){return"".concat(S,"px")}).join(", ")}),Ho(r,"id",ld("recharts-line-")),Ho(r,"pathRef",function(o){r.mainCurve=o}),Ho(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),Ho(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return ibe(t,e),rbe(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,l=i.xAxis,d=i.yAxis,u=i.layout,m=i.children,p=Us(m,vh);if(!p)return null;var g=function(N,v){return{x:N.x,y:N.y,value:N.value,errorVal:yn(N.payload,v)}},x={clipPath:n?"url(#clipPath-".concat(s,")"):null};return Y.createElement(pr,x,p.map(function(y){return Y.cloneElement(y,{key:"bar-".concat(y.props.dataKey),data:o,xAxis:l,yAxis:d,layout:u,dataPointFormatter:g})}))}},{key:"renderDots",value:function(n,s,i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,d=l.dot,u=l.points,m=l.dataKey,p=Pt(this.props,!1),g=Pt(d,!0),x=u.map(function(N,v){var S=Di(Di(Di({key:"dot-".concat(v),r:3},p),g),{},{index:v,cx:N.x,cy:N.y,value:N.value,dataKey:m,payload:N.payload,points:u});return t.renderDotItem(d,S)}),y={clipPath:n?"url(#clipPath-".concat(s?"":"dots-").concat(i,")"):null};return Y.createElement(pr,sg({className:"recharts-line-dots",key:"dots"},y),x)}},{key:"renderCurveStatically",value:function(n,s,i,o){var l=this.props,d=l.type,u=l.layout,m=l.connectNulls;l.ref;var p=w6(l,Vxe),g=Di(Di(Di({},Pt(p,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:s?"url(#clipPath-".concat(i,")"):null,points:n},o),{},{type:d,layout:u,connectNulls:m});return Y.createElement(au,sg({},g,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,s){var i=this,o=this.props,l=o.points,d=o.strokeDasharray,u=o.isAnimationActive,m=o.animationBegin,p=o.animationDuration,g=o.animationEasing,x=o.animationId,y=o.animateNewValues,N=o.width,v=o.height,S=this.state,E=S.prevPoints,C=S.totalLength;return Y.createElement(ui,{begin:m,duration:p,isActive:u,easing:g,from:{t:0},to:{t:1},key:"line-".concat(x),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(_){var A=_.t;if(E){var T=E.length/l.length,R=l.map(function(H,B){var M=Math.floor(B*T);if(E[M]){var G=E[M],$=Hn(G.x,H.x),z=Hn(G.y,H.y);return Di(Di({},H),{},{x:$(A),y:z(A)})}if(y){var U=Hn(N*2,H.x),Z=Hn(v/2,H.y);return Di(Di({},H),{},{x:U(A),y:Z(A)})}return Di(Di({},H),{},{x:H.x,y:H.y})});return i.renderCurveStatically(R,n,s)}var I=Hn(0,C),k=I(A),w;if(d){var L="".concat(d).split(/[,\s]+/gim).map(function(H){return parseFloat(H)});w=i.getStrokeDasharray(k,C,L)}else w=i.generateSimpleStrokeDasharray(C,k);return i.renderCurveStatically(l,n,s,{strokeDasharray:w})})}},{key:"renderCurve",value:function(n,s){var i=this.props,o=i.points,l=i.isAnimationActive,d=this.state,u=d.prevPoints,m=d.totalLength;return l&&o&&o.length&&(!u&&m>0||!ou(u,o))?this.renderCurveWithAnimation(n,s):this.renderCurveStatically(o,n,s)}},{key:"render",value:function(){var n,s=this.props,i=s.hide,o=s.dot,l=s.points,d=s.className,u=s.xAxis,m=s.yAxis,p=s.top,g=s.left,x=s.width,y=s.height,N=s.isAnimationActive,v=s.id;if(i||!l||!l.length)return null;var S=this.state.isAnimationFinished,E=l.length===1,C=cr("recharts-line",d),_=u&&u.allowDataOverflow,A=m&&m.allowDataOverflow,T=_||A,R=er(v)?this.id:v,I=(n=Pt(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},k=I.r,w=k===void 0?3:k,L=I.strokeWidth,H=L===void 0?2:L,B=WB(o)?o:{},M=B.clipDot,G=M===void 0?!0:M,$=w*2+H;return Y.createElement(pr,{className:C},_||A?Y.createElement("defs",null,Y.createElement("clipPath",{id:"clipPath-".concat(R)},Y.createElement("rect",{x:_?g:g-x/2,y:A?p:p-y/2,width:_?x:x*2,height:A?y:y*2})),!G&&Y.createElement("clipPath",{id:"clipPath-dots-".concat(R)},Y.createElement("rect",{x:g-$/2,y:p-$/2,width:x+$,height:y+$}))):null,!E&&this.renderCurve(T,R),this.renderErrorBar(T,R),(E||o)&&this.renderDots(T,G,R),(!N||S)&&Ns.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:s.curPoints}:n.points!==s.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,s){for(var i=n.length%2!==0?[].concat(jp(n),[0]):n,o=[],l=0;l<s;++l)o=[].concat(jp(o),jp(i));return o}},{key:"renderDotItem",value:function(n,s){var i;if(Y.isValidElement(n))i=Y.cloneElement(n,s);else if(Yt(n))i=n(s);else{var o=s.key,l=w6(s,Yxe),d=cr("recharts-line-dot",typeof n!="boolean"?n.className:"");i=Y.createElement(fx,sg({key:o},l,{className:d}))}return i}}])})(h.PureComponent);Ho(qa,"displayName","Line");Ho(qa,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Jo.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Ho(qa,"getComposedData",function(e){var t=e.props,r=e.xAxis,n=e.yAxis,s=e.xAxisTicks,i=e.yAxisTicks,o=e.dataKey,l=e.bandSize,d=e.displayedData,u=e.offset,m=t.layout,p=d.map(function(g,x){var y=yn(g,o);return m==="horizontal"?{x:Cm({axis:r,ticks:s,bandSize:l,entry:g,index:x}),y:er(y)?null:n.scale(y),value:y,payload:g}:{x:er(y)?null:r.scale(y),y:Cm({axis:n,ticks:i,bandSize:l,entry:g,index:x}),value:y,payload:g}});return Di({points:p,layout:m},u)});var lbe=["layout","type","stroke","connectNulls","isRange","ref"],cbe=["key"],ZH;function Bm(e){"@babel/helpers - typeof";return Bm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bm(e)}function JH(e,t){if(e==null)return{};var r=dbe(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function dbe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function pf(){return pf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pf.apply(this,arguments)}function C6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Bd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?C6(Object(r),!0).forEach(function(n){$l(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ube(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T6(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,tK(n.key),n)}}function fbe(e,t,r){return t&&T6(e.prototype,t),r&&T6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function pbe(e,t,r){return t=Gv(t),mbe(e,eK()?Reflect.construct(t,r||[],Gv(e).constructor):t.apply(e,r))}function mbe(e,t){if(t&&(Bm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hbe(e)}function hbe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eK=function(){return!!e})()}function Gv(e){return Gv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Gv(e)}function gbe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kT(e,t)}function kT(e,t){return kT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},kT(e,t)}function $l(e,t,r){return t=tK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tK(e){var t=xbe(e,"string");return Bm(t)=="symbol"?t:t+""}function xbe(e,t){if(Bm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Bm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var rc=(function(e){function t(){var r;ube(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=pbe(this,t,[].concat(s)),$l(r,"state",{isAnimationFinished:!0}),$l(r,"id",ld("recharts-area-")),$l(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Yt(o)&&o()}),$l(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Yt(o)&&o()}),r}return gbe(t,e),fbe(t,[{key:"renderDots",value:function(n,s,i){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var d=this.props,u=d.dot,m=d.points,p=d.dataKey,g=Pt(this.props,!1),x=Pt(u,!0),y=m.map(function(v,S){var E=Bd(Bd(Bd({key:"dot-".concat(S),r:3},g),x),{},{index:S,cx:v.x,cy:v.y,dataKey:p,value:v.value,payload:v.payload,points:m});return t.renderDotItem(u,E)}),N={clipPath:n?"url(#clipPath-".concat(s?"":"dots-").concat(i,")"):null};return Y.createElement(pr,pf({className:"recharts-area-dots"},N),y)}},{key:"renderHorizontalRect",value:function(n){var s=this.props,i=s.baseLine,o=s.points,l=s.strokeWidth,d=o[0].x,u=o[o.length-1].x,m=n*Math.abs(d-u),p=Yd(o.map(function(g){return g.y||0}));return it(i)&&typeof i=="number"?p=Math.max(i,p):i&&Array.isArray(i)&&i.length&&(p=Math.max(Yd(i.map(function(g){return g.y||0})),p)),it(p)?Y.createElement("rect",{x:d<u?d:d-m,y:0,width:m,height:Math.floor(p+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(n){var s=this.props,i=s.baseLine,o=s.points,l=s.strokeWidth,d=o[0].y,u=o[o.length-1].y,m=n*Math.abs(d-u),p=Yd(o.map(function(g){return g.x||0}));return it(i)&&typeof i=="number"?p=Math.max(i,p):i&&Array.isArray(i)&&i.length&&(p=Math.max(Yd(i.map(function(g){return g.x||0})),p)),it(p)?Y.createElement("rect",{x:0,y:d<u?d:d-m,width:p+(l?parseInt("".concat(l),10):1),height:Math.floor(m)}):null}},{key:"renderClipRect",value:function(n){var s=this.props.layout;return s==="vertical"?this.renderVerticalRect(n):this.renderHorizontalRect(n)}},{key:"renderAreaStatically",value:function(n,s,i,o){var l=this.props,d=l.layout,u=l.type,m=l.stroke,p=l.connectNulls,g=l.isRange;l.ref;var x=JH(l,lbe);return Y.createElement(pr,{clipPath:i?"url(#clipPath-".concat(o,")"):null},Y.createElement(au,pf({},Pt(x,!0),{points:n,connectNulls:p,type:u,baseLine:s,layout:d,stroke:"none",className:"recharts-area-area"})),m!=="none"&&Y.createElement(au,pf({},Pt(this.props,!1),{className:"recharts-area-curve",layout:d,type:u,connectNulls:p,fill:"none",points:n})),m!=="none"&&g&&Y.createElement(au,pf({},Pt(this.props,!1),{className:"recharts-area-curve",layout:d,type:u,connectNulls:p,fill:"none",points:s})))}},{key:"renderAreaWithAnimation",value:function(n,s){var i=this,o=this.props,l=o.points,d=o.baseLine,u=o.isAnimationActive,m=o.animationBegin,p=o.animationDuration,g=o.animationEasing,x=o.animationId,y=this.state,N=y.prevPoints,v=y.prevBaseLine;return Y.createElement(ui,{begin:m,duration:p,isActive:u,easing:g,from:{t:0},to:{t:1},key:"area-".concat(x),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(S){var E=S.t;if(N){var C=N.length/l.length,_=l.map(function(I,k){var w=Math.floor(k*C);if(N[w]){var L=N[w],H=Hn(L.x,I.x),B=Hn(L.y,I.y);return Bd(Bd({},I),{},{x:H(E),y:B(E)})}return I}),A;if(it(d)&&typeof d=="number"){var T=Hn(v,d);A=T(E)}else if(er(d)||fu(d)){var R=Hn(v,0);A=R(E)}else A=d.map(function(I,k){var w=Math.floor(k*C);if(v[w]){var L=v[w],H=Hn(L.x,I.x),B=Hn(L.y,I.y);return Bd(Bd({},I),{},{x:H(E),y:B(E)})}return I});return i.renderAreaStatically(_,A,n,s)}return Y.createElement(pr,null,Y.createElement("defs",null,Y.createElement("clipPath",{id:"animationClipPath-".concat(s)},i.renderClipRect(E))),Y.createElement(pr,{clipPath:"url(#animationClipPath-".concat(s,")")},i.renderAreaStatically(l,d,n,s)))})}},{key:"renderArea",value:function(n,s){var i=this.props,o=i.points,l=i.baseLine,d=i.isAnimationActive,u=this.state,m=u.prevPoints,p=u.prevBaseLine,g=u.totalLength;return d&&o&&o.length&&(!m&&g>0||!ou(m,o)||!ou(p,l))?this.renderAreaWithAnimation(n,s):this.renderAreaStatically(o,l,n,s)}},{key:"render",value:function(){var n,s=this.props,i=s.hide,o=s.dot,l=s.points,d=s.className,u=s.top,m=s.left,p=s.xAxis,g=s.yAxis,x=s.width,y=s.height,N=s.isAnimationActive,v=s.id;if(i||!l||!l.length)return null;var S=this.state.isAnimationFinished,E=l.length===1,C=cr("recharts-area",d),_=p&&p.allowDataOverflow,A=g&&g.allowDataOverflow,T=_||A,R=er(v)?this.id:v,I=(n=Pt(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},k=I.r,w=k===void 0?3:k,L=I.strokeWidth,H=L===void 0?2:L,B=WB(o)?o:{},M=B.clipDot,G=M===void 0?!0:M,$=w*2+H;return Y.createElement(pr,{className:C},_||A?Y.createElement("defs",null,Y.createElement("clipPath",{id:"clipPath-".concat(R)},Y.createElement("rect",{x:_?m:m-x/2,y:A?u:u-y/2,width:_?x:x*2,height:A?y:y*2})),!G&&Y.createElement("clipPath",{id:"clipPath-dots-".concat(R)},Y.createElement("rect",{x:m-$/2,y:u-$/2,width:x+$,height:y+$}))):null,E?null:this.renderArea(T,R),(o||E)&&this.renderDots(T,G,R),(!N||S)&&Ns.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,curBaseLine:n.baseLine,prevPoints:s.curPoints,prevBaseLine:s.curBaseLine}:n.points!==s.curPoints||n.baseLine!==s.curBaseLine?{curPoints:n.points,curBaseLine:n.baseLine}:null}}])})(h.PureComponent);ZH=rc;$l(rc,"displayName","Area");$l(rc,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Jo.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});$l(rc,"getBaseValue",function(e,t,r,n){var s=e.layout,i=e.baseValue,o=t.props.baseValue,l=o??i;if(it(l)&&typeof l=="number")return l;var d=s==="horizontal"?n:r,u=d.scale.domain();if(d.type==="number"){var m=Math.max(u[0],u[1]),p=Math.min(u[0],u[1]);return l==="dataMin"?p:l==="dataMax"||m<0?m:Math.max(Math.min(u[0],u[1]),0)}return l==="dataMin"?u[0]:l==="dataMax"?u[1]:u[0]});$l(rc,"getComposedData",function(e){var t=e.props,r=e.item,n=e.xAxis,s=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,l=e.bandSize,d=e.dataKey,u=e.stackedData,m=e.dataStartIndex,p=e.displayedData,g=e.offset,x=t.layout,y=u&&u.length,N=ZH.getBaseValue(t,r,n,s),v=x==="horizontal",S=!1,E=p.map(function(_,A){var T;y?T=u[m+A]:(T=yn(_,d),Array.isArray(T)?S=!0:T=[N,T]);var R=T[1]==null||y&&yn(_,d)==null;return v?{x:Cm({axis:n,ticks:i,bandSize:l,entry:_,index:A}),y:R?null:s.scale(T[1]),value:T,payload:_}:{x:R?null:n.scale(T[1]),y:Cm({axis:s,ticks:o,bandSize:l,entry:_,index:A}),value:T,payload:_}}),C;return y||S?C=E.map(function(_){var A=Array.isArray(_.value)?_.value[0]:null;return v?{x:_.x,y:A!=null&&_.y!=null?s.scale(A):null}:{x:A!=null?n.scale(A):null,y:_.y}}):C=v?s.scale(N):n.scale(N),Bd({points:E,baseLine:C,layout:x,isRange:S},g)});$l(rc,"renderDotItem",function(e,t){var r;if(Y.isValidElement(e))r=Y.cloneElement(e,t);else if(Yt(e))r=e(t);else{var n=cr("recharts-area-dot",typeof e!="boolean"?e.className:""),s=t.key,i=JH(t,cbe);r=Y.createElement(fx,pf({},i,{key:s,className:n}))}return r});function Gm(e){"@babel/helpers - typeof";return Gm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gm(e)}function bbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ybe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,aK(n.key),n)}}function vbe(e,t,r){return t&&ybe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Nbe(e,t,r){return t=Hv(t),Sbe(e,rK()?Reflect.construct(t,r||[],Hv(e).constructor):t.apply(e,r))}function Sbe(e,t){if(t&&(Gm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ebe(e)}function Ebe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rK=function(){return!!e})()}function Hv(e){return Hv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Hv(e)}function jbe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&PT(e,t)}function PT(e,t){return PT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},PT(e,t)}function nK(e,t,r){return t=aK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aK(e){var t=wbe(e,"string");return Gm(t)=="symbol"?t:t+""}function wbe(e,t){if(Gm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Gm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Sh=(function(e){function t(){return bbe(this,t),Nbe(this,t,arguments)}return jbe(t,e),vbe(t,[{key:"render",value:function(){return null}}])})(h.Component);nK(Sh,"displayName","ZAxis");nK(Sh,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var Abe=["option","isActive"];function ig(){return ig=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ig.apply(this,arguments)}function _be(e,t){if(e==null)return{};var r=Cbe(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Cbe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Tbe(e){var t=e.option,r=e.isActive,n=_be(e,Abe);return typeof t=="string"?h.createElement(Tv,ig({option:h.createElement(W1,ig({type:t},n)),isActive:r,shapeType:"symbols"},n)):h.createElement(Tv,ig({option:t,isActive:r,shapeType:"symbols"},n))}function Hm(e){"@babel/helpers - typeof";return Hm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hm(e)}function og(){return og=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},og.apply(this,arguments)}function O6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function po(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?O6(Object(r),!0).forEach(function(n){Qd(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Obe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R6(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,iK(n.key),n)}}function Rbe(e,t,r){return t&&R6(e.prototype,t),r&&R6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function kbe(e,t,r){return t=Kv(t),Pbe(e,sK()?Reflect.construct(t,r||[],Kv(e).constructor):t.apply(e,r))}function Pbe(e,t){if(t&&(Hm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dbe(e)}function Dbe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sK=function(){return!!e})()}function Kv(e){return Kv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Kv(e)}function Ibe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&DT(e,t)}function DT(e,t){return DT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},DT(e,t)}function Qd(e,t,r){return t=iK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iK(e){var t=Mbe(e,"string");return Hm(t)=="symbol"?t:t+""}function Mbe(e,t){if(Hm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Hm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Eh=(function(e){function t(){var r;Obe(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=kbe(this,t,[].concat(s)),Qd(r,"state",{isAnimationFinished:!1}),Qd(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0})}),Qd(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1})}),Qd(r,"id",ld("recharts-scatter-")),r}return Ibe(t,e),Rbe(t,[{key:"renderSymbolsStatically",value:function(n){var s=this,i=this.props,o=i.shape,l=i.activeShape,d=i.activeIndex,u=Pt(this.props,!1);return n.map(function(m,p){var g=d===p,x=g?l:o,y=po(po({},u),m);return Y.createElement(pr,og({className:"recharts-scatter-symbol",key:"symbol-".concat(m?.cx,"-").concat(m?.cy,"-").concat(m?.size,"-").concat(p)},iu(s.props,m,p),{role:"img"}),Y.createElement(Tbe,og({option:x,isActive:g,key:"symbol-".concat(p)},y)))})}},{key:"renderSymbolsWithAnimation",value:function(){var n=this,s=this.props,i=s.points,o=s.isAnimationActive,l=s.animationBegin,d=s.animationDuration,u=s.animationEasing,m=s.animationId,p=this.state.prevPoints;return Y.createElement(ui,{begin:l,duration:d,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(g){var x=g.t,y=i.map(function(N,v){var S=p&&p[v];if(S){var E=Hn(S.cx,N.cx),C=Hn(S.cy,N.cy),_=Hn(S.size,N.size);return po(po({},N),{},{cx:E(x),cy:C(x),size:_(x)})}var A=Hn(0,N.size);return po(po({},N),{},{size:A(x)})});return Y.createElement(pr,null,n.renderSymbolsStatically(y))})}},{key:"renderSymbols",value:function(){var n=this.props,s=n.points,i=n.isAnimationActive,o=this.state.prevPoints;return i&&s&&s.length&&(!o||!ou(o,s))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(s)}},{key:"renderErrorBar",value:function(){var n=this.props.isAnimationActive;if(n&&!this.state.isAnimationFinished)return null;var s=this.props,i=s.points,o=s.xAxis,l=s.yAxis,d=s.children,u=Us(d,vh);return u?u.map(function(m,p){var g=m.props,x=g.direction,y=g.dataKey;return Y.cloneElement(m,{key:"".concat(x,"-").concat(y,"-").concat(i[p]),data:i,xAxis:o,yAxis:l,layout:x==="x"?"vertical":"horizontal",dataPointFormatter:function(v,S){return{x:v.cx,y:v.cy,value:x==="x"?+v.node.x:+v.node.y,errorVal:yn(v,S)}}})}):null}},{key:"renderLine",value:function(){var n=this.props,s=n.points,i=n.line,o=n.lineType,l=n.lineJointType,d=Pt(this.props,!1),u=Pt(i,!1),m,p;if(o==="joint")m=s.map(function(C){return{x:C.cx,y:C.cy}});else if(o==="fitting"){var g=Rne(s),x=g.xmin,y=g.xmax,N=g.a,v=g.b,S=function(_){return N*_+v};m=[{x,y:S(x)},{x:y,y:S(y)}]}var E=po(po(po({},d),{},{fill:"none",stroke:d&&d.fill},u),{},{points:m});return Y.isValidElement(i)?p=Y.cloneElement(i,E):Yt(i)?p=i(E):p=Y.createElement(au,og({},E,{type:l})),Y.createElement(pr,{className:"recharts-scatter-line",key:"recharts-scatter-line"},p)}},{key:"render",value:function(){var n=this.props,s=n.hide,i=n.points,o=n.line,l=n.className,d=n.xAxis,u=n.yAxis,m=n.left,p=n.top,g=n.width,x=n.height,y=n.id,N=n.isAnimationActive;if(s||!i||!i.length)return null;var v=this.state.isAnimationFinished,S=cr("recharts-scatter",l),E=d&&d.allowDataOverflow,C=u&&u.allowDataOverflow,_=E||C,A=er(y)?this.id:y;return Y.createElement(pr,{className:S,clipPath:_?"url(#clipPath-".concat(A,")"):null},E||C?Y.createElement("defs",null,Y.createElement("clipPath",{id:"clipPath-".concat(A)},Y.createElement("rect",{x:E?m:m-g/2,y:C?p:p-x/2,width:E?g:g*2,height:C?x:x*2}))):null,o&&this.renderLine(),this.renderErrorBar(),Y.createElement(pr,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!N||v)&&Ns.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:s.curPoints}:n.points!==s.curPoints?{curPoints:n.points}:null}}])})(h.PureComponent);Qd(Eh,"displayName","Scatter");Qd(Eh,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!Jo.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});Qd(Eh,"getComposedData",function(e){var t=e.xAxis,r=e.yAxis,n=e.zAxis,s=e.item,i=e.displayedData,o=e.xAxisTicks,l=e.yAxisTicks,d=e.offset,u=s.props.tooltipType,m=Us(s.props.children,yo),p=er(t.dataKey)?s.props.dataKey:t.dataKey,g=er(r.dataKey)?s.props.dataKey:r.dataKey,x=n&&n.dataKey,y=n?n.range:Sh.defaultProps.range,N=y&&y[0],v=t.scale.bandwidth?t.scale.bandwidth():0,S=r.scale.bandwidth?r.scale.bandwidth():0,E=i.map(function(C,_){var A=yn(C,p),T=yn(C,g),R=!er(x)&&yn(C,x)||"-",I=[{name:er(t.dataKey)?s.props.name:t.name||t.dataKey,unit:t.unit||"",value:A,payload:C,dataKey:p,type:u},{name:er(r.dataKey)?s.props.name:r.name||r.dataKey,unit:r.unit||"",value:T,payload:C,dataKey:g,type:u}];R!=="-"&&I.push({name:n.name||n.dataKey,unit:n.unit||"",value:R,payload:C,dataKey:x,type:u});var k=Cm({axis:t,ticks:o,bandSize:v,entry:C,index:_,dataKey:p}),w=Cm({axis:r,ticks:l,bandSize:S,entry:C,index:_,dataKey:g}),L=R!=="-"?n.scale(R):N,H=Math.sqrt(Math.max(L,0)/Math.PI);return po(po({},C),{},{cx:k,cy:w,x:k-H,y:w-H,xAxis:t,yAxis:r,zAxis:n,width:2*H,height:2*H,size:L,node:{x:A,y:T,z:R},tooltipPayload:I,tooltipPosition:{x:k,y:w},payload:C},m&&m[_]&&m[_].props)});return po({points:E},d)});function Km(e){"@babel/helpers - typeof";return Km=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Km(e)}function Lbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $be(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,cK(n.key),n)}}function Fbe(e,t,r){return t&&$be(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ube(e,t,r){return t=zv(t),Bbe(e,oK()?Reflect.construct(t,r||[],zv(e).constructor):t.apply(e,r))}function Bbe(e,t){if(t&&(Km(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gbe(e)}function Gbe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oK=function(){return!!e})()}function zv(e){return zv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},zv(e)}function Hbe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&IT(e,t)}function IT(e,t){return IT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},IT(e,t)}function lK(e,t,r){return t=cK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cK(e){var t=Kbe(e,"string");return Km(t)=="symbol"?t:t+""}function Kbe(e,t){if(Km(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Km(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function MT(){return MT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},MT.apply(this,arguments)}function zbe(e){var t=e.xAxisId,r=w3(),n=A3(),s=$H(t);return s==null?null:h.createElement(Nh,MT({},s,{className:cr("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return qc(o,!0)}}))}var da=(function(e){function t(){return Lbe(this,t),Ube(this,t,arguments)}return Hbe(t,e),Fbe(t,[{key:"render",value:function(){return h.createElement(zbe,this.props)}}])})(h.Component);lK(da,"displayName","XAxis");lK(da,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function zm(e){"@babel/helpers - typeof";return zm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zm(e)}function qbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wbe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fK(n.key),n)}}function Vbe(e,t,r){return t&&Wbe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ybe(e,t,r){return t=qv(t),Xbe(e,dK()?Reflect.construct(t,r||[],qv(e).constructor):t.apply(e,r))}function Xbe(e,t){if(t&&(zm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qbe(e)}function Qbe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dK=function(){return!!e})()}function qv(e){return qv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},qv(e)}function Zbe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&LT(e,t)}function LT(e,t){return LT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},LT(e,t)}function uK(e,t,r){return t=fK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fK(e){var t=Jbe(e,"string");return zm(t)=="symbol"?t:t+""}function Jbe(e,t){if(zm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(zm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function $T(){return $T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$T.apply(this,arguments)}var eye=function(t){var r=t.yAxisId,n=w3(),s=A3(),i=FH(r);return i==null?null:h.createElement(Nh,$T({},i,{className:cr("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:s},ticksGenerator:function(l){return qc(l,!0)}}))},Jn=(function(e){function t(){return qbe(this,t),Ybe(this,t,arguments)}return Zbe(t,e),Vbe(t,[{key:"render",value:function(){return h.createElement(eye,this.props)}}])})(h.Component);uK(Jn,"displayName","YAxis");uK(Jn,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function k6(e){return aye(e)||nye(e)||rye(e)||tye()}function tye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rye(e,t){if(e){if(typeof e=="string")return FT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return FT(e,t)}}function nye(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function aye(e){if(Array.isArray(e))return FT(e)}function FT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var UT=function(t,r,n,s,i){var o=Us(t,Wl),l=Us(t,px),d=[].concat(k6(o),k6(l)),u=Us(t,yN),m="".concat(s,"Id"),p=s[0],g=r;if(d.length&&(g=d.reduce(function(N,v){if(v.props[m]===n&&ql(v.props,"extendDomain")&&it(v.props[p])){var S=v.props[p];return[Math.min(N[0],S),Math.max(N[1],S)]}return N},g)),u.length){var x="".concat(p,"1"),y="".concat(p,"2");g=u.reduce(function(N,v){if(v.props[m]===n&&ql(v.props,"extendDomain")&&it(v.props[x])&&it(v.props[y])){var S=v.props[x],E=v.props[y];return[Math.min(N[0],S,E),Math.max(N[1],S,E)]}return N},g)}return i&&i.length&&(g=i.reduce(function(N,v){return it(v)?[Math.min(N[0],v),Math.max(N[1],v)]:N},g)),g},Jw={exports:{}},P6;function sye(){return P6||(P6=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(d,u,m){this.fn=d,this.context=u,this.once=m||!1}function i(d,u,m,p,g){if(typeof m!="function")throw new TypeError("The listener must be a function");var x=new s(m,p||d,g),y=r?r+u:u;return d._events[y]?d._events[y].fn?d._events[y]=[d._events[y],x]:d._events[y].push(x):(d._events[y]=x,d._eventsCount++),d}function o(d,u){--d._eventsCount===0?d._events=new n:delete d._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],m,p;if(this._eventsCount===0)return u;for(p in m=this._events)t.call(m,p)&&u.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(m)):u},l.prototype.listeners=function(u){var m=r?r+u:u,p=this._events[m];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,x=p.length,y=new Array(x);g<x;g++)y[g]=p[g].fn;return y},l.prototype.listenerCount=function(u){var m=r?r+u:u,p=this._events[m];return p?p.fn?1:p.length:0},l.prototype.emit=function(u,m,p,g,x,y){var N=r?r+u:u;if(!this._events[N])return!1;var v=this._events[N],S=arguments.length,E,C;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),S){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,m),!0;case 3:return v.fn.call(v.context,m,p),!0;case 4:return v.fn.call(v.context,m,p,g),!0;case 5:return v.fn.call(v.context,m,p,g,x),!0;case 6:return v.fn.call(v.context,m,p,g,x,y),!0}for(C=1,E=new Array(S-1);C<S;C++)E[C-1]=arguments[C];v.fn.apply(v.context,E)}else{var _=v.length,A;for(C=0;C<_;C++)switch(v[C].once&&this.removeListener(u,v[C].fn,void 0,!0),S){case 1:v[C].fn.call(v[C].context);break;case 2:v[C].fn.call(v[C].context,m);break;case 3:v[C].fn.call(v[C].context,m,p);break;case 4:v[C].fn.call(v[C].context,m,p,g);break;default:if(!E)for(A=1,E=new Array(S-1);A<S;A++)E[A-1]=arguments[A];v[C].fn.apply(v[C].context,E)}}return!0},l.prototype.on=function(u,m,p){return i(this,u,m,p,!1)},l.prototype.once=function(u,m,p){return i(this,u,m,p,!0)},l.prototype.removeListener=function(u,m,p,g){var x=r?r+u:u;if(!this._events[x])return this;if(!m)return o(this,x),this;var y=this._events[x];if(y.fn)y.fn===m&&(!g||y.once)&&(!p||y.context===p)&&o(this,x);else{for(var N=0,v=[],S=y.length;N<S;N++)(y[N].fn!==m||g&&!y[N].once||p&&y[N].context!==p)&&v.push(y[N]);v.length?this._events[x]=v.length===1?v[0]:v:o(this,x)}return this},l.prototype.removeAllListeners=function(u){var m;return u?(m=r?r+u:u,this._events[m]&&o(this,m)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(Jw)),Jw.exports}var iye=sye();const oye=Zr(iye);var eA=new oye,tA="recharts.syncMouseEvents";function qg(e){"@babel/helpers - typeof";return qg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qg(e)}function lye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cye(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,pK(n.key),n)}}function dye(e,t,r){return t&&cye(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function rA(e,t,r){return t=pK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pK(e){var t=uye(e,"string");return qg(t)=="symbol"?t:t+""}function uye(e,t){if(qg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(qg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var fye=(function(){function e(){lye(this,e),rA(this,"activeIndex",0),rA(this,"coordinateList",[]),rA(this,"layout","horizontal")}return dye(e,[{key:"setDetails",value:function(r){var n,s=r.coordinateList,i=s===void 0?null:s,o=r.container,l=o===void 0?null:o,d=r.layout,u=d===void 0?null:d,m=r.offset,p=m===void 0?null:m,g=r.mouseHandlerCallback,x=g===void 0?null:g;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=p??this.offset,this.mouseHandlerCallback=x??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),i=s.x,o=s.y,l=s.height,d=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,m=((n=window)===null||n===void 0?void 0:n.scrollY)||0,p=i+d+u,g=o+this.offset.top+l/2+m;this.mouseHandlerCallback({pageX:p,pageY:g})}}}])})();function pye(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e?.[0],s=e?.[1];if(n&&s&&it(n)&&it(s))return!0}return!1}function mye(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function mK(e){var t=e.cx,r=e.cy,n=e.radius,s=e.startAngle,i=e.endAngle,o=_n(t,r,n,s),l=_n(t,r,n,i);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:s,endAngle:i}}function hye(e,t,r){var n,s,i,o;if(e==="horizontal")n=t.x,i=n,s=r.top,o=r.top+r.height;else if(e==="vertical")s=t.y,o=s,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,d=t.cy,u=t.innerRadius,m=t.outerRadius,p=t.angle,g=_n(l,d,u,p),x=_n(l,d,m,p);n=g.x,s=g.y,i=x.x,o=x.y}else return mK(t);return[{x:n,y:s},{x:i,y:o}]}function Wg(e){"@babel/helpers - typeof";return Wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wg(e)}function D6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Pb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?D6(Object(r),!0).forEach(function(n){gye(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gye(e,t,r){return t=xye(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xye(e){var t=bye(e,"string");return Wg(t)=="symbol"?t:t+""}function bye(e,t){if(Wg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Wg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yye(e){var t,r,n=e.element,s=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,d=e.offset,u=e.activeTooltipIndex,m=e.tooltipAxisBandSize,p=e.layout,g=e.chartName,x=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!x||!i||!o||g!=="ScatterChart"&&s!=="axis")return null;var y,N=au;if(g==="ScatterChart")y=o,N=hhe;else if(g==="BarChart")y=mye(p,o,d,m),N=lN;else if(p==="radial"){var v=mK(o),S=v.cx,E=v.cy,C=v.radius,_=v.startAngle,A=v.endAngle;y={cx:S,cy:E,startAngle:_,endAngle:A,innerRadius:C,outerRadius:C},N=iH}else y={points:hye(p,o,d)},N=au;var T=Pb(Pb(Pb(Pb({stroke:"#ccc",pointerEvents:"none"},d),y),Pt(x,!1)),{},{payload:l,payloadIndex:u,className:cr("recharts-tooltip-cursor",x.className)});return h.isValidElement(x)?h.cloneElement(x,T):h.createElement(N,T)}var vye=["item"],Nye=["children","className","width","height","style","compact","title","desc"];function qm(e){"@babel/helpers - typeof";return qm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qm(e)}function Kp(){return Kp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kp.apply(this,arguments)}function I6(e,t){return jye(e)||Eye(e,t)||gK(e,t)||Sye()}function Sye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Eye(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);d=!0);}catch(m){u=!0,s=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function jye(e){if(Array.isArray(e))return e}function M6(e,t){if(e==null)return{};var r=wye(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function wye(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Aye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _ye(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xK(n.key),n)}}function Cye(e,t,r){return t&&_ye(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Tye(e,t,r){return t=Wv(t),Oye(e,hK()?Reflect.construct(t,r||[],Wv(e).constructor):t.apply(e,r))}function Oye(e,t){if(t&&(qm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rye(e)}function Rye(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hK=function(){return!!e})()}function Wv(e){return Wv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Wv(e)}function kye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&BT(e,t)}function BT(e,t){return BT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},BT(e,t)}function Wm(e){return Iye(e)||Dye(e)||gK(e)||Pye()}function Pye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gK(e,t){if(e){if(typeof e=="string")return GT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return GT(e,t)}}function Dye(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Iye(e){if(Array.isArray(e))return GT(e)}function GT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function L6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function $e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?L6(Object(r),!0).forEach(function(n){ar(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ar(e,t,r){return t=xK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xK(e){var t=Mye(e,"string");return qm(t)=="symbol"?t:t+""}function Mye(e,t){if(qm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(qm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Lye={xAxis:["bottom","top"],yAxis:["left","right"]},$ye={width:"100%",height:"100%"},bK={x:0,y:0};function Db(e){return e}var Fye=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},Uye=function(t,r,n,s){var i=r.find(function(m){return m&&m.index===n});if(i){if(t==="horizontal")return{x:i.coordinate,y:s.y};if(t==="vertical")return{x:s.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=s.radius;return $e($e($e({},s),_n(s.cx,s.cy,l,o)),{},{angle:o,radius:l})}var d=i.coordinate,u=s.angle;return $e($e($e({},s),_n(s.cx,s.cy,d,u)),{},{angle:u,radius:d})}return bK},vN=function(t,r){var n=r.graphicalItems,s=r.dataStartIndex,i=r.dataEndIndex,o=(n??[]).reduce(function(l,d){var u=d.props.data;return u&&u.length?[].concat(Wm(l),Wm(u)):l},[]);return o.length>0?o:t&&t.length&&it(s)&&it(i)?t.slice(s,i+1):[]};function yK(e){return e==="number"?[0,"auto"]:void 0}var HT=function(t,r,n,s){var i=t.graphicalItems,o=t.tooltipAxis,l=vN(r,t);return n<0||!i||!i.length||n>=l.length?null:i.reduce(function(d,u){var m,p=(m=u.props.data)!==null&&m!==void 0?m:r;p&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(p=p.slice(t.dataStartIndex,t.dataEndIndex+1));var g;if(o.dataKey&&!o.allowDuplicatedCategory){var x=p===void 0?l:p;g=Hy(x,o.dataKey,s)}else g=p&&p[n]||l[n];return g?[].concat(Wm(d),[J9(u,g)]):d},[])},$6=function(t,r,n,s){var i=s||{x:t.chartX,y:t.chartY},o=Fye(i,n),l=t.orderedTooltipTicks,d=t.tooltipAxis,u=t.tooltipTicks,m=$ue(o,l,u,d);if(m>=0&&u){var p=u[m]&&u[m].value,g=HT(t,r,m,p),x=Uye(n,l,m,i);return{activeTooltipIndex:m,activeLabel:p,activePayload:g,activeCoordinate:x}}return null},Bye=function(t,r){var n=r.axes,s=r.graphicalItems,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,d=r.dataStartIndex,u=r.dataEndIndex,m=t.layout,p=t.children,g=t.stackOffset,x=W9(m,i);return n.reduce(function(y,N){var v,S=N.type.defaultProps!==void 0?$e($e({},N.type.defaultProps),N.props):N.props,E=S.type,C=S.dataKey,_=S.allowDataOverflow,A=S.allowDuplicatedCategory,T=S.scale,R=S.ticks,I=S.includeHidden,k=S[o];if(y[k])return y;var w=vN(t.data,{graphicalItems:s.filter(function(F){var te,ne=o in F.props?F.props[o]:(te=F.type.defaultProps)===null||te===void 0?void 0:te[o];return ne===k}),dataStartIndex:d,dataEndIndex:u}),L=w.length,H,B,M;pye(S.domain,_,E)&&(H=eT(S.domain,null,_),x&&(E==="number"||T!=="auto")&&(M=tg(w,C,"category")));var G=yK(E);if(!H||H.length===0){var $,z=($=S.domain)!==null&&$!==void 0?$:G;if(C){if(H=tg(w,C,E),E==="category"&&x){var U=One(H);A&&U?(B=H,H=Rv(0,L)):A||(H=M$(z,H,N).reduce(function(F,te){return F.indexOf(te)>=0?F:[].concat(Wm(F),[te])},[]))}else if(E==="category")A?H=H.filter(function(F){return F!==""&&!er(F)}):H=M$(z,H,N).reduce(function(F,te){return F.indexOf(te)>=0||te===""||er(te)?F:[].concat(Wm(F),[te])},[]);else if(E==="number"){var Z=Hue(w,s.filter(function(F){var te,ne,se=o in F.props?F.props[o]:(te=F.type.defaultProps)===null||te===void 0?void 0:te[o],Ne="hide"in F.props?F.props.hide:(ne=F.type.defaultProps)===null||ne===void 0?void 0:ne.hide;return se===k&&(I||!Ne)}),C,i,m);Z&&(H=Z)}x&&(E==="number"||T!=="auto")&&(M=tg(w,C,"category"))}else x?H=Rv(0,L):l&&l[k]&&l[k].hasStack&&E==="number"?H=g==="expand"?[0,1]:Z9(l[k].stackGroups,d,u):H=q9(w,s.filter(function(F){var te=o in F.props?F.props[o]:F.type.defaultProps[o],ne="hide"in F.props?F.props.hide:F.type.defaultProps.hide;return te===k&&(I||!ne)}),E,m,!0);if(E==="number")H=UT(p,H,k,i,R),z&&(H=eT(z,H,_));else if(E==="category"&&z){var re=z,X=H.every(function(F){return re.indexOf(F)>=0});X&&(H=re)}}return $e($e({},y),{},ar({},k,$e($e({},S),{},{axisType:i,domain:H,categoricalDomain:M,duplicateDomain:B,originalDomain:(v=S.domain)!==null&&v!==void 0?v:G,isCategorical:x,layout:m})))},{})},Gye=function(t,r){var n=r.graphicalItems,s=r.Axis,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,d=r.dataStartIndex,u=r.dataEndIndex,m=t.layout,p=t.children,g=vN(t.data,{graphicalItems:n,dataStartIndex:d,dataEndIndex:u}),x=g.length,y=W9(m,i),N=-1;return n.reduce(function(v,S){var E=S.type.defaultProps!==void 0?$e($e({},S.type.defaultProps),S.props):S.props,C=E[o],_=yK("number");if(!v[C]){N++;var A;return y?A=Rv(0,x):l&&l[C]&&l[C].hasStack?(A=Z9(l[C].stackGroups,d,u),A=UT(p,A,C,i)):(A=eT(_,q9(g,n.filter(function(T){var R,I,k=o in T.props?T.props[o]:(R=T.type.defaultProps)===null||R===void 0?void 0:R[o],w="hide"in T.props?T.props.hide:(I=T.type.defaultProps)===null||I===void 0?void 0:I.hide;return k===C&&!w}),"number",m),s.defaultProps.allowDataOverflow),A=UT(p,A,C,i)),$e($e({},v),{},ar({},C,$e($e({axisType:i},s.defaultProps),{},{hide:!0,orientation:ci(Lye,"".concat(i,".").concat(N%2),null),domain:A,originalDomain:_,isCategorical:y,layout:m})))}return v},{})},Hye=function(t,r){var n=r.axisType,s=n===void 0?"xAxis":n,i=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,d=r.dataStartIndex,u=r.dataEndIndex,m=t.children,p="".concat(s,"Id"),g=Us(m,i),x={};return g&&g.length?x=Bye(t,{axes:g,graphicalItems:o,axisType:s,axisIdKey:p,stackGroups:l,dataStartIndex:d,dataEndIndex:u}):o&&o.length&&(x=Gye(t,{Axis:i,graphicalItems:o,axisType:s,axisIdKey:p,stackGroups:l,dataStartIndex:d,dataEndIndex:u})),x},Kye=function(t){var r=Vd(t),n=qc(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:zR(n,function(s){return s.coordinate}),tooltipAxis:r,tooltipAxisBandSize:xv(r,n)}},F6=function(t){var r=t.children,n=t.defaultShowTooltip,s=xs(r,Dm),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(i=s.props.startIndex),s.props.endIndex>=0&&(o=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},zye=function(t){return!t||!t.length?!1:t.some(function(r){var n=Vc(r&&r.type);return n&&n.indexOf("Bar")>=0})},U6=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},qye=function(t,r){var n=t.props,s=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,d=l===void 0?{}:l,u=n.width,m=n.height,p=n.children,g=n.margin||{},x=xs(p,Dm),y=xs(p,Kl),N=Object.keys(d).reduce(function(A,T){var R=d[T],I=R.orientation;return!R.mirror&&!R.hide?$e($e({},A),{},ar({},I,A[I]+R.width)):A},{left:g.left||0,right:g.right||0}),v=Object.keys(o).reduce(function(A,T){var R=o[T],I=R.orientation;return!R.mirror&&!R.hide?$e($e({},A),{},ar({},I,ci(A,"".concat(I))+R.height)):A},{top:g.top||0,bottom:g.bottom||0}),S=$e($e({},v),N),E=S.bottom;x&&(S.bottom+=x.props.height||Dm.defaultProps.height),y&&r&&(S=Bue(S,s,n,r));var C=u-S.left-S.right,_=m-S.top-S.bottom;return $e($e({brushBottom:E},S),{},{width:Math.max(C,0),height:Math.max(_,0)})},Wye=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},mx=function(t){var r=t.chartName,n=t.GraphicalChild,s=t.defaultTooltipEventType,i=s===void 0?"axis":s,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,d=t.axisComponents,u=t.legendContent,m=t.formatAxisMap,p=t.defaultProps,g=function(S,E){var C=E.graphicalItems,_=E.stackGroups,A=E.offset,T=E.updateId,R=E.dataStartIndex,I=E.dataEndIndex,k=S.barSize,w=S.layout,L=S.barGap,H=S.barCategoryGap,B=S.maxBarSize,M=U6(w),G=M.numericAxisName,$=M.cateAxisName,z=zye(C),U=[];return C.forEach(function(Z,re){var X=vN(S.data,{graphicalItems:[Z],dataStartIndex:R,dataEndIndex:I}),F=Z.type.defaultProps!==void 0?$e($e({},Z.type.defaultProps),Z.props):Z.props,te=F.dataKey,ne=F.maxBarSize,se=F["".concat(G,"Id")],Ne=F["".concat($,"Id")],fe={},we=d.reduce(function(rt,Me){var dt=E["".concat(Me.axisType,"Map")],St=F["".concat(Me.axisType,"Id")];dt&&dt[St]||Me.axisType==="zAxis"||Tf();var He=dt[St];return $e($e({},rt),{},ar(ar({},Me.axisType,He),"".concat(Me.axisType,"Ticks"),qc(He)))},fe),ve=we[$],Oe=we["".concat($,"Ticks")],Fe=_&&_[se]&&_[se].hasStack&&Zue(Z,_[se].stackGroups),oe=Vc(Z.type).indexOf("Bar")>=0,le=xv(ve,Oe),ge=[],_e=z&&Fue({barSize:k,stackGroups:_,totalSize:Wye(we,$)});if(oe){var ee,q,ye=er(ne)?B:ne,pe=(ee=(q=xv(ve,Oe,!0))!==null&&q!==void 0?q:ye)!==null&&ee!==void 0?ee:0;ge=Uue({barGap:L,barCategoryGap:H,bandSize:pe!==le?pe:le,sizeList:_e[Ne],maxBarSize:ye}),pe!==le&&(ge=ge.map(function(rt){return $e($e({},rt),{},{position:$e($e({},rt.position),{},{offset:rt.position.offset-pe/2})})}))}var he=Z&&Z.type&&Z.type.getComposedData;he&&U.push({props:$e($e({},he($e($e({},we),{},{displayedData:X,props:S,dataKey:te,item:Z,bandSize:le,barPosition:ge,offset:A,stackedData:Fe,layout:w,dataStartIndex:R,dataEndIndex:I}))),{},ar(ar(ar({key:Z.key||"item-".concat(re)},G,we[G]),$,we[$]),"animationId",T)),childIndex:Hne(Z,S.children),item:Z})}),U},x=function(S,E){var C=S.props,_=S.dataStartIndex,A=S.dataEndIndex,T=S.updateId;if(!SC({props:C}))return null;var R=C.children,I=C.layout,k=C.stackOffset,w=C.data,L=C.reverseStackOrder,H=U6(I),B=H.numericAxisName,M=H.cateAxisName,G=Us(R,n),$=Xue(w,G,"".concat(B,"Id"),"".concat(M,"Id"),k,L),z=d.reduce(function(F,te){var ne="".concat(te.axisType,"Map");return $e($e({},F),{},ar({},ne,Hye(C,$e($e({},te),{},{graphicalItems:G,stackGroups:te.axisType===B&&$,dataStartIndex:_,dataEndIndex:A}))))},{}),U=qye($e($e({},z),{},{props:C,graphicalItems:G}),E?.legendBBox);Object.keys(z).forEach(function(F){z[F]=m(C,z[F],U,F.replace("Map",""),r)});var Z=z["".concat(M,"Map")],re=Kye(Z),X=g(C,$e($e({},z),{},{dataStartIndex:_,dataEndIndex:A,updateId:T,graphicalItems:G,stackGroups:$,offset:U}));return $e($e({formattedGraphicalItems:X,graphicalItems:G,offset:U,stackGroups:$},re),z)},y=(function(v){function S(E){var C,_,A;return Aye(this,S),A=Tye(this,S,[E]),ar(A,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),ar(A,"accessibilityManager",new fye),ar(A,"handleLegendBBoxUpdate",function(T){if(T){var R=A.state,I=R.dataStartIndex,k=R.dataEndIndex,w=R.updateId;A.setState($e({legendBBox:T},x({props:A.props,dataStartIndex:I,dataEndIndex:k,updateId:w},$e($e({},A.state),{},{legendBBox:T}))))}}),ar(A,"handleReceiveSyncEvent",function(T,R,I){if(A.props.syncId===T){if(I===A.eventEmitterSymbol&&typeof A.props.syncMethod!="function")return;A.applySyncEvent(R)}}),ar(A,"handleBrushChange",function(T){var R=T.startIndex,I=T.endIndex;if(R!==A.state.dataStartIndex||I!==A.state.dataEndIndex){var k=A.state.updateId;A.setState(function(){return $e({dataStartIndex:R,dataEndIndex:I},x({props:A.props,dataStartIndex:R,dataEndIndex:I,updateId:k},A.state))}),A.triggerSyncEvent({dataStartIndex:R,dataEndIndex:I})}}),ar(A,"handleMouseEnter",function(T){var R=A.getMouseInfo(T);if(R){var I=$e($e({},R),{},{isTooltipActive:!0});A.setState(I),A.triggerSyncEvent(I);var k=A.props.onMouseEnter;Yt(k)&&k(I,T)}}),ar(A,"triggeredAfterMouseMove",function(T){var R=A.getMouseInfo(T),I=R?$e($e({},R),{},{isTooltipActive:!0}):{isTooltipActive:!1};A.setState(I),A.triggerSyncEvent(I);var k=A.props.onMouseMove;Yt(k)&&k(I,T)}),ar(A,"handleItemMouseEnter",function(T){A.setState(function(){return{isTooltipActive:!0,activeItem:T,activePayload:T.tooltipPayload,activeCoordinate:T.tooltipPosition||{x:T.cx,y:T.cy}}})}),ar(A,"handleItemMouseLeave",function(){A.setState(function(){return{isTooltipActive:!1}})}),ar(A,"handleMouseMove",function(T){T.persist(),A.throttleTriggeredAfterMouseMove(T)}),ar(A,"handleMouseLeave",function(T){A.throttleTriggeredAfterMouseMove.cancel();var R={isTooltipActive:!1};A.setState(R),A.triggerSyncEvent(R);var I=A.props.onMouseLeave;Yt(I)&&I(R,T)}),ar(A,"handleOuterEvent",function(T){var R=Gne(T),I=ci(A.props,"".concat(R));if(R&&Yt(I)){var k,w;/.*touch.*/i.test(R)?w=A.getMouseInfo(T.changedTouches[0]):w=A.getMouseInfo(T),I((k=w)!==null&&k!==void 0?k:{},T)}}),ar(A,"handleClick",function(T){var R=A.getMouseInfo(T);if(R){var I=$e($e({},R),{},{isTooltipActive:!0});A.setState(I),A.triggerSyncEvent(I);var k=A.props.onClick;Yt(k)&&k(I,T)}}),ar(A,"handleMouseDown",function(T){var R=A.props.onMouseDown;if(Yt(R)){var I=A.getMouseInfo(T);R(I,T)}}),ar(A,"handleMouseUp",function(T){var R=A.props.onMouseUp;if(Yt(R)){var I=A.getMouseInfo(T);R(I,T)}}),ar(A,"handleTouchMove",function(T){T.changedTouches!=null&&T.changedTouches.length>0&&A.throttleTriggeredAfterMouseMove(T.changedTouches[0])}),ar(A,"handleTouchStart",function(T){T.changedTouches!=null&&T.changedTouches.length>0&&A.handleMouseDown(T.changedTouches[0])}),ar(A,"handleTouchEnd",function(T){T.changedTouches!=null&&T.changedTouches.length>0&&A.handleMouseUp(T.changedTouches[0])}),ar(A,"handleDoubleClick",function(T){var R=A.props.onDoubleClick;if(Yt(R)){var I=A.getMouseInfo(T);R(I,T)}}),ar(A,"handleContextMenu",function(T){var R=A.props.onContextMenu;if(Yt(R)){var I=A.getMouseInfo(T);R(I,T)}}),ar(A,"triggerSyncEvent",function(T){A.props.syncId!==void 0&&eA.emit(tA,A.props.syncId,T,A.eventEmitterSymbol)}),ar(A,"applySyncEvent",function(T){var R=A.props,I=R.layout,k=R.syncMethod,w=A.state.updateId,L=T.dataStartIndex,H=T.dataEndIndex;if(T.dataStartIndex!==void 0||T.dataEndIndex!==void 0)A.setState($e({dataStartIndex:L,dataEndIndex:H},x({props:A.props,dataStartIndex:L,dataEndIndex:H,updateId:w},A.state)));else if(T.activeTooltipIndex!==void 0){var B=T.chartX,M=T.chartY,G=T.activeTooltipIndex,$=A.state,z=$.offset,U=$.tooltipTicks;if(!z)return;if(typeof k=="function")G=k(U,T);else if(k==="value"){G=-1;for(var Z=0;Z<U.length;Z++)if(U[Z].value===T.activeLabel){G=Z;break}}var re=$e($e({},z),{},{x:z.left,y:z.top}),X=Math.min(B,re.x+re.width),F=Math.min(M,re.y+re.height),te=U[G]&&U[G].value,ne=HT(A.state,A.props.data,G),se=U[G]?{x:I==="horizontal"?U[G].coordinate:X,y:I==="horizontal"?F:U[G].coordinate}:bK;A.setState($e($e({},T),{},{activeLabel:te,activeCoordinate:se,activePayload:ne,activeTooltipIndex:G}))}else A.setState(T)}),ar(A,"renderCursor",function(T){var R,I=A.state,k=I.isTooltipActive,w=I.activeCoordinate,L=I.activePayload,H=I.offset,B=I.activeTooltipIndex,M=I.tooltipAxisBandSize,G=A.getTooltipEventType(),$=(R=T.props.active)!==null&&R!==void 0?R:k,z=A.props.layout,U=T.key||"_recharts-cursor";return Y.createElement(yye,{key:U,activeCoordinate:w,activePayload:L,activeTooltipIndex:B,chartName:r,element:T,isActive:$,layout:z,offset:H,tooltipAxisBandSize:M,tooltipEventType:G})}),ar(A,"renderPolarAxis",function(T,R,I){var k=ci(T,"type.axisType"),w=ci(A.state,"".concat(k,"Map")),L=T.type.defaultProps,H=L!==void 0?$e($e({},L),T.props):T.props,B=w&&w[H["".concat(k,"Id")]];return h.cloneElement(T,$e($e({},B),{},{className:cr(k,B.className),key:T.key||"".concat(R,"-").concat(I),ticks:qc(B,!0)}))}),ar(A,"renderPolarGrid",function(T){var R=T.props,I=R.radialLines,k=R.polarAngles,w=R.polarRadius,L=A.state,H=L.radiusAxisMap,B=L.angleAxisMap,M=Vd(H),G=Vd(B),$=G.cx,z=G.cy,U=G.innerRadius,Z=G.outerRadius;return h.cloneElement(T,{polarAngles:Array.isArray(k)?k:qc(G,!0).map(function(re){return re.coordinate}),polarRadius:Array.isArray(w)?w:qc(M,!0).map(function(re){return re.coordinate}),cx:$,cy:z,innerRadius:U,outerRadius:Z,key:T.key||"polar-grid",radialLines:I})}),ar(A,"renderLegend",function(){var T=A.state.formattedGraphicalItems,R=A.props,I=R.children,k=R.width,w=R.height,L=A.props.margin||{},H=k-(L.left||0)-(L.right||0),B=K9({children:I,formattedGraphicalItems:T,legendWidth:H,legendContent:u});if(!B)return null;var M=B.item,G=M6(B,vye);return h.cloneElement(M,$e($e({},G),{},{chartWidth:k,chartHeight:w,margin:L,onBBoxUpdate:A.handleLegendBBoxUpdate}))}),ar(A,"renderTooltip",function(){var T,R=A.props,I=R.children,k=R.accessibilityLayer,w=xs(I,ln);if(!w)return null;var L=A.state,H=L.isTooltipActive,B=L.activeCoordinate,M=L.activePayload,G=L.activeLabel,$=L.offset,z=(T=w.props.active)!==null&&T!==void 0?T:H;return h.cloneElement(w,{viewBox:$e($e({},$),{},{x:$.left,y:$.top}),active:z,label:G,payload:z?M:[],coordinate:B,accessibilityLayer:k})}),ar(A,"renderBrush",function(T){var R=A.props,I=R.margin,k=R.data,w=A.state,L=w.offset,H=w.dataStartIndex,B=w.dataEndIndex,M=w.updateId;return h.cloneElement(T,{key:T.key||"_recharts-brush",onChange:Tb(A.handleBrushChange,T.props.onChange),data:k,x:it(T.props.x)?T.props.x:L.left,y:it(T.props.y)?T.props.y:L.top+L.height+L.brushBottom-(I.bottom||0),width:it(T.props.width)?T.props.width:L.width,startIndex:H,endIndex:B,updateId:"brush-".concat(M)})}),ar(A,"renderReferenceElement",function(T,R,I){if(!T)return null;var k=A,w=k.clipPathId,L=A.state,H=L.xAxisMap,B=L.yAxisMap,M=L.offset,G=T.type.defaultProps||{},$=T.props,z=$.xAxisId,U=z===void 0?G.xAxisId:z,Z=$.yAxisId,re=Z===void 0?G.yAxisId:Z;return h.cloneElement(T,{key:T.key||"".concat(R,"-").concat(I),xAxis:H[U],yAxis:B[re],viewBox:{x:M.left,y:M.top,width:M.width,height:M.height},clipPathId:w})}),ar(A,"renderActivePoints",function(T){var R=T.item,I=T.activePoint,k=T.basePoint,w=T.childIndex,L=T.isRange,H=[],B=R.props.key,M=R.item.type.defaultProps!==void 0?$e($e({},R.item.type.defaultProps),R.item.props):R.item.props,G=M.activeDot,$=M.dataKey,z=$e($e({index:w,dataKey:$,cx:I.x,cy:I.y,r:4,fill:y3(R.item),strokeWidth:2,stroke:"#fff",payload:I.payload,value:I.value},Pt(G,!1)),Ky(G));return H.push(S.renderActiveDot(G,z,"".concat(B,"-activePoint-").concat(w))),k?H.push(S.renderActiveDot(G,$e($e({},z),{},{cx:k.x,cy:k.y}),"".concat(B,"-basePoint-").concat(w))):L&&H.push(null),H}),ar(A,"renderGraphicChild",function(T,R,I){var k=A.filterFormatItem(T,R,I);if(!k)return null;var w=A.getTooltipEventType(),L=A.state,H=L.isTooltipActive,B=L.tooltipAxis,M=L.activeTooltipIndex,G=L.activeLabel,$=A.props.children,z=xs($,ln),U=k.props,Z=U.points,re=U.isRange,X=U.baseLine,F=k.item.type.defaultProps!==void 0?$e($e({},k.item.type.defaultProps),k.item.props):k.item.props,te=F.activeDot,ne=F.hide,se=F.activeBar,Ne=F.activeShape,fe=!!(!ne&&H&&z&&(te||se||Ne)),we={};w!=="axis"&&z&&z.props.trigger==="click"?we={onClick:Tb(A.handleItemMouseEnter,T.props.onClick)}:w!=="axis"&&(we={onMouseLeave:Tb(A.handleItemMouseLeave,T.props.onMouseLeave),onMouseEnter:Tb(A.handleItemMouseEnter,T.props.onMouseEnter)});var ve=h.cloneElement(T,$e($e({},k.props),we));function Oe(Me){return typeof B.dataKey=="function"?B.dataKey(Me.payload):null}if(fe)if(M>=0){var Fe,oe;if(B.dataKey&&!B.allowDuplicatedCategory){var le=typeof B.dataKey=="function"?Oe:"payload.".concat(B.dataKey.toString());Fe=Hy(Z,le,G),oe=re&&X&&Hy(X,le,G)}else Fe=Z?.[M],oe=re&&X&&X[M];if(Ne||se){var ge=T.props.activeIndex!==void 0?T.props.activeIndex:M;return[h.cloneElement(T,$e($e($e({},k.props),we),{},{activeIndex:ge})),null,null]}if(!er(Fe))return[ve].concat(Wm(A.renderActivePoints({item:k,activePoint:Fe,basePoint:oe,childIndex:M,isRange:re})))}else{var _e,ee=(_e=A.getItemByXY(A.state.activeCoordinate))!==null&&_e!==void 0?_e:{graphicalItem:ve},q=ee.graphicalItem,ye=q.item,pe=ye===void 0?T:ye,he=q.childIndex,rt=$e($e($e({},k.props),we),{},{activeIndex:he});return[h.cloneElement(pe,rt),null,null]}return re?[ve,null,null]:[ve,null]}),ar(A,"renderCustomized",function(T,R,I){return h.cloneElement(T,$e($e({key:"recharts-customized-".concat(I)},A.props),A.state))}),ar(A,"renderMap",{CartesianGrid:{handler:Db,once:!0},ReferenceArea:{handler:A.renderReferenceElement},ReferenceLine:{handler:Db},ReferenceDot:{handler:A.renderReferenceElement},XAxis:{handler:Db},YAxis:{handler:Db},Brush:{handler:A.renderBrush,once:!0},Bar:{handler:A.renderGraphicChild},Line:{handler:A.renderGraphicChild},Area:{handler:A.renderGraphicChild},Radar:{handler:A.renderGraphicChild},RadialBar:{handler:A.renderGraphicChild},Scatter:{handler:A.renderGraphicChild},Pie:{handler:A.renderGraphicChild},Funnel:{handler:A.renderGraphicChild},Tooltip:{handler:A.renderCursor,once:!0},PolarGrid:{handler:A.renderPolarGrid,once:!0},PolarAngleAxis:{handler:A.renderPolarAxis},PolarRadiusAxis:{handler:A.renderPolarAxis},Customized:{handler:A.renderCustomized}}),A.clipPathId="".concat((C=E.id)!==null&&C!==void 0?C:ld("recharts"),"-clip"),A.throttleTriggeredAfterMouseMove=HG(A.triggeredAfterMouseMove,(_=E.throttleDelay)!==null&&_!==void 0?_:1e3/60),A.state={},A}return kye(S,v),Cye(S,[{key:"componentDidMount",value:function(){var C,_;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(C=this.props.margin.left)!==null&&C!==void 0?C:0,top:(_=this.props.margin.top)!==null&&_!==void 0?_:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var C=this.props,_=C.children,A=C.data,T=C.height,R=C.layout,I=xs(_,ln);if(I){var k=I.props.defaultIndex;if(!(typeof k!="number"||k<0||k>this.state.tooltipTicks.length-1)){var w=this.state.tooltipTicks[k]&&this.state.tooltipTicks[k].value,L=HT(this.state,A,k,w),H=this.state.tooltipTicks[k].coordinate,B=(this.state.offset.top+T)/2,M=R==="horizontal",G=M?{x:H,y:B}:{y:H,x:B},$=this.state.formattedGraphicalItems.find(function(U){var Z=U.item;return Z.type.name==="Scatter"});$&&(G=$e($e({},G),$.props.points[k].tooltipPosition),L=$.props.points[k].tooltipPayload);var z={activeTooltipIndex:k,isTooltipActive:!0,activeLabel:w,activePayload:L,activeCoordinate:G};this.setState(z),this.renderCursor(I),this.accessibilityManager.setIndex(k)}}}},{key:"getSnapshotBeforeUpdate",value:function(C,_){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==_.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==C.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==C.margin){var A,T;this.accessibilityManager.setDetails({offset:{left:(A=this.props.margin.left)!==null&&A!==void 0?A:0,top:(T=this.props.margin.top)!==null&&T!==void 0?T:0}})}return null}},{key:"componentDidUpdate",value:function(C){EC([xs(C.children,ln)],[xs(this.props.children,ln)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var C=xs(this.props.children,ln);if(C&&typeof C.props.shared=="boolean"){var _=C.props.shared?"axis":"item";return l.indexOf(_)>=0?_:i}return i}},{key:"getMouseInfo",value:function(C){if(!this.container)return null;var _=this.container,A=_.getBoundingClientRect(),T=xoe(A),R={chartX:Math.round(C.pageX-T.left),chartY:Math.round(C.pageY-T.top)},I=A.width/_.offsetWidth||1,k=this.inRange(R.chartX,R.chartY,I);if(!k)return null;var w=this.state,L=w.xAxisMap,H=w.yAxisMap,B=this.getTooltipEventType(),M=$6(this.state,this.props.data,this.props.layout,k);if(B!=="axis"&&L&&H){var G=Vd(L).scale,$=Vd(H).scale,z=G&&G.invert?G.invert(R.chartX):null,U=$&&$.invert?$.invert(R.chartY):null;return $e($e({},R),{},{xValue:z,yValue:U},M)}return M?$e($e({},R),M):null}},{key:"inRange",value:function(C,_){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,T=this.props.layout,R=C/A,I=_/A;if(T==="horizontal"||T==="vertical"){var k=this.state.offset,w=R>=k.left&&R<=k.left+k.width&&I>=k.top&&I<=k.top+k.height;return w?{x:R,y:I}:null}var L=this.state,H=L.angleAxisMap,B=L.radiusAxisMap;if(H&&B){var M=Vd(H);return F$({x:R,y:I},M)}return null}},{key:"parseEventsOfWrapper",value:function(){var C=this.props.children,_=this.getTooltipEventType(),A=xs(C,ln),T={};A&&_==="axis"&&(A.props.trigger==="click"?T={onClick:this.handleClick}:T={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var R=Ky(this.props,this.handleOuterEvent);return $e($e({},R),T)}},{key:"addListener",value:function(){eA.on(tA,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){eA.removeListener(tA,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(C,_,A){for(var T=this.state.formattedGraphicalItems,R=0,I=T.length;R<I;R++){var k=T[R];if(k.item===C||k.props.key===C.key||_===Vc(k.item.type)&&A===k.childIndex)return k}return null}},{key:"renderClipPath",value:function(){var C=this.clipPathId,_=this.state.offset,A=_.left,T=_.top,R=_.height,I=_.width;return Y.createElement("defs",null,Y.createElement("clipPath",{id:C},Y.createElement("rect",{x:A,y:T,height:R,width:I})))}},{key:"getXScales",value:function(){var C=this.state.xAxisMap;return C?Object.entries(C).reduce(function(_,A){var T=I6(A,2),R=T[0],I=T[1];return $e($e({},_),{},ar({},R,I.scale))},{}):null}},{key:"getYScales",value:function(){var C=this.state.yAxisMap;return C?Object.entries(C).reduce(function(_,A){var T=I6(A,2),R=T[0],I=T[1];return $e($e({},_),{},ar({},R,I.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(C){var _;return(_=this.state.xAxisMap)===null||_===void 0||(_=_[C])===null||_===void 0?void 0:_.scale}},{key:"getYScaleByAxisId",value:function(C){var _;return(_=this.state.yAxisMap)===null||_===void 0||(_=_[C])===null||_===void 0?void 0:_.scale}},{key:"getItemByXY",value:function(C){var _=this.state,A=_.formattedGraphicalItems,T=_.activeItem;if(A&&A.length)for(var R=0,I=A.length;R<I;R++){var k=A[R],w=k.props,L=k.item,H=L.type.defaultProps!==void 0?$e($e({},L.type.defaultProps),L.props):L.props,B=Vc(L.type);if(B==="Bar"){var M=(w.data||[]).find(function(U){return Xme(C,U)});if(M)return{graphicalItem:k,payload:M}}else if(B==="RadialBar"){var G=(w.data||[]).find(function(U){return F$(C,U)});if(G)return{graphicalItem:k,payload:G}}else if(pN(k,T)||mN(k,T)||Bg(k,T)){var $=g0e({graphicalItem:k,activeTooltipItem:T,itemData:H.data}),z=H.activeIndex===void 0?$:H.activeIndex;return{graphicalItem:$e($e({},k),{},{childIndex:z}),payload:Bg(k,T)?H.data[$]:k.props.data[$]}}}return null}},{key:"render",value:function(){var C=this;if(!SC(this))return null;var _=this.props,A=_.children,T=_.className,R=_.width,I=_.height,k=_.style,w=_.compact,L=_.title,H=_.desc,B=M6(_,Nye),M=Pt(B,!1);if(w)return Y.createElement(f6,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Y.createElement(zy,Kp({},M,{width:R,height:I,title:L,desc:H}),this.renderClipPath(),ZD(A,this.renderMap)));if(this.props.accessibilityLayer){var G,$;M.tabIndex=(G=this.props.tabIndex)!==null&&G!==void 0?G:0,M.role=($=this.props.role)!==null&&$!==void 0?$:"application",M.onKeyDown=function(U){C.accessibilityManager.keyboardEvent(U)},M.onFocus=function(){C.accessibilityManager.focus()}}var z=this.parseEventsOfWrapper();return Y.createElement(f6,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Y.createElement("div",Kp({className:cr("recharts-wrapper",T),style:$e({position:"relative",cursor:"default",width:R,height:I},k)},z,{ref:function(Z){C.container=Z}}),Y.createElement(zy,Kp({},M,{width:R,height:I,title:L,desc:H,style:$ye}),this.renderClipPath(),ZD(A,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(h.Component);ar(y,"displayName",r),ar(y,"defaultProps",$e({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},p)),ar(y,"getDerivedStateFromProps",function(v,S){var E=v.dataKey,C=v.data,_=v.children,A=v.width,T=v.height,R=v.layout,I=v.stackOffset,k=v.margin,w=S.dataStartIndex,L=S.dataEndIndex;if(S.updateId===void 0){var H=F6(v);return $e($e($e({},H),{},{updateId:0},x($e($e({props:v},H),{},{updateId:0}),S)),{},{prevDataKey:E,prevData:C,prevWidth:A,prevHeight:T,prevLayout:R,prevStackOffset:I,prevMargin:k,prevChildren:_})}if(E!==S.prevDataKey||C!==S.prevData||A!==S.prevWidth||T!==S.prevHeight||R!==S.prevLayout||I!==S.prevStackOffset||!em(k,S.prevMargin)){var B=F6(v),M={chartX:S.chartX,chartY:S.chartY,isTooltipActive:S.isTooltipActive},G=$e($e({},$6(S,C,R)),{},{updateId:S.updateId+1}),$=$e($e($e({},B),M),G);return $e($e($e({},$),x($e({props:v},$),S)),{},{prevDataKey:E,prevData:C,prevWidth:A,prevHeight:T,prevLayout:R,prevStackOffset:I,prevMargin:k,prevChildren:_})}if(!EC(_,S.prevChildren)){var z,U,Z,re,X=xs(_,Dm),F=X&&(z=(U=X.props)===null||U===void 0?void 0:U.startIndex)!==null&&z!==void 0?z:w,te=X&&(Z=(re=X.props)===null||re===void 0?void 0:re.endIndex)!==null&&Z!==void 0?Z:L,ne=F!==w||te!==L,se=!er(C),Ne=se&&!ne?S.updateId:S.updateId+1;return $e($e({updateId:Ne},x($e($e({props:v},S),{},{updateId:Ne,dataStartIndex:F,dataEndIndex:te}),S)),{},{prevChildren:_,dataStartIndex:F,dataEndIndex:te})}return null}),ar(y,"renderActiveDot",function(v,S,E){var C;return h.isValidElement(v)?C=h.cloneElement(v,S):Yt(v)?C=v(S):C=Y.createElement(fx,S),Y.createElement(pr,{className:"recharts-active-dot",key:E},C)});var N=h.forwardRef(function(S,E){return Y.createElement(y,Kp({},S,{ref:E}))});return N.displayName=y.displayName,N},NN=mx({chartName:"LineChart",GraphicalChild:qa,axisComponents:[{axisType:"xAxis",AxisComp:da},{axisType:"yAxis",AxisComp:Jn}],formatAxisMap:gN}),mf=mx({chartName:"BarChart",GraphicalChild:ns,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:da},{axisType:"yAxis",AxisComp:Jn}],formatAxisMap:gN}),vK=mx({chartName:"PieChart",GraphicalChild:tc,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:fN},{axisType:"radiusAxis",AxisComp:dN}],formatAxisMap:lfe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),nA,B6;function Vye(){if(B6)return nA;B6=1;function e(t,r){for(var n=-1,s=t==null?0:t.length;++n<s&&r(t[n],n,t)!==!1;);return t}return nA=e,nA}var aA,G6;function NK(){if(G6)return aA;G6=1;var e=N3(),t=I1(),r=Object.prototype,n=r.hasOwnProperty;function s(i,o,l){var d=i[o];(!(n.call(i,o)&&t(d,l))||l===void 0&&!(o in i))&&e(i,o,l)}return aA=s,aA}var sA,H6;function hx(){if(H6)return sA;H6=1;var e=NK(),t=N3();function r(n,s,i,o){var l=!i;i||(i={});for(var d=-1,u=s.length;++d<u;){var m=s[d],p=o?o(i[m],n[m],m,i,n):void 0;p===void 0&&(p=n[m]),l?t(i,m,p):e(i,m,p)}return i}return sA=r,sA}var iA,K6;function Yye(){if(K6)return iA;K6=1;var e=hx(),t=hh();function r(n,s){return n&&e(s,t(s),n)}return iA=r,iA}var oA,z6;function Xye(){if(z6)return oA;z6=1;function e(t){var r=[];if(t!=null)for(var n in Object(t))r.push(n);return r}return oA=e,oA}var lA,q6;function Qye(){if(q6)return lA;q6=1;var e=sl(),t=BR(),r=Xye(),n=Object.prototype,s=n.hasOwnProperty;function i(o){if(!e(o))return r(o);var l=t(o),d=[];for(var u in o)u=="constructor"&&(l||!s.call(o,u))||d.push(u);return d}return lA=i,lA}var cA,W6;function O3(){if(W6)return cA;W6=1;var e=EG(),t=Qye(),r=mh();function n(s){return r(s)?e(s,!0):t(s)}return cA=n,cA}var dA,V6;function Zye(){if(V6)return dA;V6=1;var e=hx(),t=O3();function r(n,s){return n&&e(s,t(s),n)}return dA=r,dA}var $0={exports:{}};$0.exports;var Y6;function Jye(){return Y6||(Y6=1,(function(e,t){var r=nl(),n=t&&!t.nodeType&&t,s=n&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===n,o=i?r.Buffer:void 0,l=o?o.allocUnsafe:void 0;function d(u,m){if(m)return u.slice();var p=u.length,g=l?l(p):new u.constructor(p);return u.copy(g),g}e.exports=d})($0,$0.exports)),$0.exports}var uA,X6;function eve(){if(X6)return uA;X6=1;function e(t,r){var n=-1,s=t.length;for(r||(r=Array(s));++n<s;)r[n]=t[n];return r}return uA=e,uA}var fA,Q6;function tve(){if(Q6)return fA;Q6=1;var e=hx(),t=IR();function r(n,s){return e(n,t(n),s)}return fA=r,fA}var pA,Z6;function SK(){if(Z6)return pA;Z6=1;var e=DR(),t=v3(),r=IR(),n=NG(),s=Object.getOwnPropertySymbols,i=s?function(o){for(var l=[];o;)e(l,r(o)),o=t(o);return l}:n;return pA=i,pA}var mA,J6;function rve(){if(J6)return mA;J6=1;var e=hx(),t=SK();function r(n,s){return e(n,t(n),s)}return mA=r,mA}var hA,eF;function EK(){if(eF)return hA;eF=1;var e=vG(),t=SK(),r=O3();function n(s){return e(s,r,t)}return hA=n,hA}var gA,tF;function nve(){if(tF)return gA;tF=1;var e=Object.prototype,t=e.hasOwnProperty;function r(n){var s=n.length,i=new n.constructor(s);return s&&typeof n[0]=="string"&&t.call(n,"index")&&(i.index=n.index,i.input=n.input),i}return gA=r,gA}var xA,rF;function R3(){if(rF)return xA;rF=1;var e=yG();function t(r){var n=new r.constructor(r.byteLength);return new e(n).set(new e(r)),n}return xA=t,xA}var bA,nF;function ave(){if(nF)return bA;nF=1;var e=R3();function t(r,n){var s=n?e(r.buffer):r.buffer;return new r.constructor(s,r.byteOffset,r.byteLength)}return bA=t,bA}var yA,aF;function sve(){if(aF)return yA;aF=1;var e=/\w*$/;function t(r){var n=new r.constructor(r.source,e.exec(r));return n.lastIndex=r.lastIndex,n}return yA=t,yA}var vA,sF;function ive(){if(sF)return vA;sF=1;var e=uh(),t=e?e.prototype:void 0,r=t?t.valueOf:void 0;function n(s){return r?Object(r.call(s)):{}}return vA=n,vA}var NA,iF;function ove(){if(iF)return NA;iF=1;var e=R3();function t(r,n){var s=n?e(r.buffer):r.buffer;return new r.constructor(s,r.byteOffset,r.length)}return NA=t,NA}var SA,oF;function lve(){if(oF)return SA;oF=1;var e=R3(),t=ave(),r=sve(),n=ive(),s=ove(),i="[object Boolean]",o="[object Date]",l="[object Map]",d="[object Number]",u="[object RegExp]",m="[object Set]",p="[object String]",g="[object Symbol]",x="[object ArrayBuffer]",y="[object DataView]",N="[object Float32Array]",v="[object Float64Array]",S="[object Int8Array]",E="[object Int16Array]",C="[object Int32Array]",_="[object Uint8Array]",A="[object Uint8ClampedArray]",T="[object Uint16Array]",R="[object Uint32Array]";function I(k,w,L){var H=k.constructor;switch(w){case x:return e(k);case i:case o:return new H(+k);case y:return t(k,L);case N:case v:case S:case E:case C:case _:case A:case T:case R:return s(k,L);case l:return new H;case d:case p:return new H(k);case u:return r(k);case m:return new H;case g:return n(k)}}return SA=I,SA}var EA,lF;function cve(){if(lF)return EA;lF=1;var e=sl(),t=Object.create,r=(function(){function n(){}return function(s){if(!e(s))return{};if(t)return t(s);n.prototype=s;var i=new n;return n.prototype=void 0,i}})();return EA=r,EA}var jA,cF;function dve(){if(cF)return jA;cF=1;var e=cve(),t=v3(),r=BR();function n(s){return typeof s.constructor=="function"&&!r(s)?e(t(s)):{}}return jA=n,jA}var wA,dF;function uve(){if(dF)return wA;dF=1;var e=Y1(),t=al(),r="[object Map]";function n(s){return t(s)&&e(s)==r}return wA=n,wA}var AA,uF;function fve(){if(uF)return AA;uF=1;var e=uve(),t=V1(),r=UR(),n=r&&r.isMap,s=n?t(n):e;return AA=s,AA}var _A,fF;function pve(){if(fF)return _A;fF=1;var e=Y1(),t=al(),r="[object Set]";function n(s){return t(s)&&e(s)==r}return _A=n,_A}var CA,pF;function mve(){if(pF)return CA;pF=1;var e=pve(),t=V1(),r=UR(),n=r&&r.isSet,s=n?t(n):e;return CA=s,CA}var TA,mF;function hve(){if(mF)return TA;mF=1;var e=kR(),t=Vye(),r=NK(),n=Yye(),s=Zye(),i=Jye(),o=eve(),l=tve(),d=rve(),u=wG(),m=EK(),p=Y1(),g=nve(),x=lve(),y=dve(),N=Hs(),v=LR(),S=fve(),E=sl(),C=mve(),_=hh(),A=O3(),T=1,R=2,I=4,k="[object Arguments]",w="[object Array]",L="[object Boolean]",H="[object Date]",B="[object Error]",M="[object Function]",G="[object GeneratorFunction]",$="[object Map]",z="[object Number]",U="[object Object]",Z="[object RegExp]",re="[object Set]",X="[object String]",F="[object Symbol]",te="[object WeakMap]",ne="[object ArrayBuffer]",se="[object DataView]",Ne="[object Float32Array]",fe="[object Float64Array]",we="[object Int8Array]",ve="[object Int16Array]",Oe="[object Int32Array]",Fe="[object Uint8Array]",oe="[object Uint8ClampedArray]",le="[object Uint16Array]",ge="[object Uint32Array]",_e={};_e[k]=_e[w]=_e[ne]=_e[se]=_e[L]=_e[H]=_e[Ne]=_e[fe]=_e[we]=_e[ve]=_e[Oe]=_e[$]=_e[z]=_e[U]=_e[Z]=_e[re]=_e[X]=_e[F]=_e[Fe]=_e[oe]=_e[le]=_e[ge]=!0,_e[B]=_e[M]=_e[te]=!1;function ee(q,ye,pe,he,rt,Me){var dt,St=ye&T,He=ye&R,Ye=ye&I;if(pe&&(dt=rt?pe(q,he,rt,Me):pe(q)),dt!==void 0)return dt;if(!E(q))return q;var Mt=N(q);if(Mt){if(dt=g(q),!St)return o(q,dt)}else{var Xt=p(q),hr=Xt==M||Xt==G;if(v(q))return i(q,St);if(Xt==U||Xt==k||hr&&!rt){if(dt=He||hr?{}:y(q),!St)return He?d(q,s(dt,q)):l(q,n(dt,q))}else{if(!_e[Xt])return rt?q:{};dt=x(q,Xt,St)}}Me||(Me=new e);var Gt=Me.get(q);if(Gt)return Gt;Me.set(q,dt),C(q)?q.forEach(function(mr){dt.add(ee(mr,ye,pe,mr,q,Me))}):S(q)&&q.forEach(function(mr,br){dt.set(br,ee(mr,ye,pe,br,q,Me))});var sr=Ye?He?m:u:He?A:_,xr=Mt?void 0:sr(q);return t(xr||q,function(mr,br){xr&&(br=mr,mr=q[br]),r(dt,br,ee(mr,ye,pe,br,q,Me))}),dt}return TA=ee,TA}var OA,hF;function gve(){if(hF)return OA;hF=1;var e=B1(),t=VB();function r(n,s){return s.length<2?n:e(n,t(s,0,-1))}return OA=r,OA}var RA,gF;function xve(){if(gF)return RA;gF=1;var e=U1(),t=aH(),r=gve(),n=ox(),s=Object.prototype,i=s.hasOwnProperty;function o(l,d){d=e(d,l);var u=-1,m=d.length;if(!m)return!0;for(var p=l==null||typeof l!="object"&&typeof l!="function";++u<m;){var g=d[u];if(typeof g=="string"){if(g==="__proto__"&&!i.call(l,"__proto__"))return!1;if(g==="constructor"&&u+1<m&&typeof d[u+1]=="string"&&d[u+1]==="prototype"){if(p&&u===0)continue;return!1}}}var x=r(l,d);return x==null||delete x[n(t(d))]}return RA=o,RA}var kA,xF;function bve(){if(xF)return kA;xF=1;var e=yH();function t(r){return e(r)?void 0:r}return kA=t,kA}var PA,bF;function yve(){if(bF)return PA;bF=1;var e=HR();function t(r){var n=r==null?0:r.length;return n?e(r,1):[]}return PA=t,PA}var DA,yF;function vve(){if(yF)return DA;yF=1;var e=yve(),t=IG(),r=LG();function n(s){return r(t(s,void 0,e),s+"")}return DA=n,DA}var IA,vF;function Nve(){if(vF)return IA;vF=1;var e=F1(),t=hve(),r=xve(),n=U1(),s=hx(),i=bve(),o=vve(),l=EK(),d=1,u=2,m=4,p=o(function(g,x){var y={};if(g==null)return y;var N=!1;x=e(x,function(S){return S=n(S,g),N||(N=S.length>1),S}),s(g,l(g),y),N&&(y=t(y,d|u|m,i));for(var v=x.length;v--;)r(y,x[v]);return y});return IA=p,IA}var Sve=Nve();const Eve=Zr(Sve);var jve=["#1890FF","#66B5FF","#41D9C7","#2FC25B","#6EDB8F","#9AE65C","#FACC14","#E6965C","#57AD71","#223273","#738AE6","#7564CC","#8543E0","#A877ED","#5C8EE6","#13C2C2","#70E0E0","#5CA3E6","#3436C7","#8082FF","#DD81E6","#F04864","#FA7D92","#D598D9"],wve=["width","height","className","style","children","type"];function Vm(e){"@babel/helpers - typeof";return Vm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vm(e)}function Vv(){return Vv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vv.apply(this,arguments)}function Ave(e,t){if(e==null)return{};var r=_ve(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function _ve(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Cve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function NF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wK(n.key),n)}}function Tve(e,t,r){return t&&NF(e.prototype,t),r&&NF(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ove(e,t,r){return t=Yv(t),Rve(e,jK()?Reflect.construct(t,r||[],Yv(e).constructor):t.apply(e,r))}function Rve(e,t){if(t&&(Vm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kve(e)}function kve(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jK=function(){return!!e})()}function Yv(e){return Yv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Yv(e)}function Pve(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&KT(e,t)}function KT(e,t){return KT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},KT(e,t)}function SF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function jn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SF(Object(r),!0).forEach(function(n){Xc(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SF(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xc(e,t,r){return t=wK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wK(e){var t=Dve(e,"string");return Vm(t)=="symbol"?t:t+""}function Dve(e,t){if(Vm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Vm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Vg="value",MA=function e(t){var r=t.depth,n=t.node,s=t.index,i=t.valueKey,o=n.children,l=r+1,d=o&&o.length?o.map(function(m,p){return e({depth:l,node:m,index:p,valueKey:i})}):null,u;return o&&o.length?u=d.reduce(function(m,p){return m+p[Vg]},0):u=fu(n[i])||n[i]<=0?0:n[i],jn(jn({},n),{},Xc(Xc(Xc({children:d},Vg,u),"depth",r),"index",s))},Ive=function(t){return{x:t.x,y:t.y,width:t.width,height:t.height}},Mve=function(t,r){var n=r<0?0:r;return t.map(function(s){var i=s[Vg]*n;return jn(jn({},s),{},{area:fu(i)||i<=0?0:i})})},Lve=function(t,r,n){var s=r*r,i=t.area*t.area,o=t.reduce(function(u,m){return{min:Math.min(u.min,m.area),max:Math.max(u.max,m.area)}},{min:1/0,max:0}),l=o.min,d=o.max;return i?Math.max(s*d*n/i,i/(s*l*n)):1/0},$ve=function(t,r,n,s){var i=r?Math.round(t.area/r):0;(s||i>n.height)&&(i=n.height);for(var o=n.x,l,d=0,u=t.length;d<u;d++)l=t[d],l.x=o,l.y=n.y,l.height=i,l.width=Math.min(i?Math.round(l.area/i):0,n.x+n.width-o),o+=l.width;return l.width+=n.x+n.width-o,jn(jn({},n),{},{y:n.y+i,height:n.height-i})},Fve=function(t,r,n,s){var i=r?Math.round(t.area/r):0;(s||i>n.width)&&(i=n.width);for(var o=n.y,l,d=0,u=t.length;d<u;d++)l=t[d],l.x=n.x,l.y=o,l.width=i,l.height=Math.min(i?Math.round(l.area/i):0,n.y+n.height-o),o+=l.height;return l&&(l.height+=n.y+n.height-o),jn(jn({},n),{},{x:n.x+i,width:n.width-i})},EF=function(t,r,n,s){return r===n.width?$ve(t,r,n,s):Fve(t,r,n,s)},LA=function e(t,r){var n=t.children;if(n&&n.length){var s=Ive(t),i=[],o=1/0,l,d,u=Math.min(s.width,s.height),m=Mve(n,s.width*s.height/t[Vg]),p=m.slice();for(i.area=0;p.length>0;)i.push(l=p[0]),i.area+=l.area,d=Lve(i,u,r),d<=o?(p.shift(),o=d):(i.area-=i.pop().area,s=EF(i,u,s,!1),u=Math.min(s.width,s.height),i.length=i.area=0,o=1/0);return i.length&&(s=EF(i,u,s,!0),i.length=i.area=0),jn(jn({},t),{},{children:m.map(function(g){return e(g,r)})})}return t},Uve={isTooltipActive:!1,isAnimationFinished:!1,activeNode:null,formatRoot:null,currentRoot:null,nestIndex:[]},Xv=(function(e){function t(){var r;Cve(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=Ove(this,t,[].concat(s)),Xc(r,"state",jn({},Uve)),Xc(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Yt(o)&&o()}),Xc(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Yt(o)&&o()}),r}return Pve(t,e),Tve(t,[{key:"handleMouseEnter",value:function(n,s){s.persist();var i=this.props,o=i.onMouseEnter,l=i.children,d=xs(l,ln);d?this.setState({isTooltipActive:!0,activeNode:n},function(){o&&o(n,s)}):o&&o(n,s)}},{key:"handleMouseLeave",value:function(n,s){s.persist();var i=this.props,o=i.onMouseLeave,l=i.children,d=xs(l,ln);d?this.setState({isTooltipActive:!1,activeNode:null},function(){o&&o(n,s)}):o&&o(n,s)}},{key:"handleClick",value:function(n){var s=this.props,i=s.onClick,o=s.type;if(o==="nest"&&n.children){var l=this.props,d=l.width,u=l.height,m=l.dataKey,p=l.aspectRatio,g=MA({depth:0,node:jn(jn({},n),{},{x:0,y:0,width:d,height:u}),index:0,valueKey:m}),x=LA(g,p),y=this.state.nestIndex;y.push(n),this.setState({formatRoot:x,currentRoot:g,nestIndex:y})}i&&i(n)}},{key:"handleNestIndex",value:function(n,s){var i=this.state.nestIndex,o=this.props,l=o.width,d=o.height,u=o.dataKey,m=o.aspectRatio,p=MA({depth:0,node:jn(jn({},n),{},{x:0,y:0,width:l,height:d}),index:0,valueKey:u}),g=LA(p,m);i=i.slice(0,s+1),this.setState({formatRoot:g,currentRoot:n,nestIndex:i})}},{key:"renderItem",value:function(n,s,i){var o=this,l=this.props,d=l.isAnimationActive,u=l.animationBegin,m=l.animationDuration,p=l.animationEasing,g=l.isUpdateAnimationActive,x=l.type,y=l.animationId,N=l.colorPanel,v=this.state.isAnimationFinished,S=s.width,E=s.height,C=s.x,_=s.y,A=s.depth,T=parseInt("".concat((Math.random()*2-1)*S),10),R={};return(i||x==="nest")&&(R={onMouseEnter:this.handleMouseEnter.bind(this,s),onMouseLeave:this.handleMouseLeave.bind(this,s),onClick:this.handleClick.bind(this,s)}),d?Y.createElement(ui,{begin:u,duration:m,isActive:d,easing:p,key:"treemap-".concat(y),from:{x:C,y:_,width:S,height:E},to:{x:C,y:_,width:S,height:E},onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(I){var k=I.x,w=I.y,L=I.width,H=I.height;return Y.createElement(ui,{from:"translate(".concat(T,"px, ").concat(T,"px)"),to:"translate(0, 0)",attributeName:"transform",begin:u,easing:p,isActive:d,duration:m},Y.createElement(pr,R,(function(){return A>2&&!v?null:o.constructor.renderContentItem(n,jn(jn({},s),{},{isAnimationActive:d,isUpdateAnimationActive:!g,width:L,height:H,x:k,y:w}),x,N)})()))}):Y.createElement(pr,R,this.constructor.renderContentItem(n,jn(jn({},s),{},{isAnimationActive:!1,isUpdateAnimationActive:!1,width:S,height:E,x:C,y:_}),x,N))}},{key:"renderNode",value:function(n,s){var i=this,o=this.props,l=o.content,d=o.type,u=jn(jn(jn({},Pt(this.props,!1)),s),{},{root:n}),m=!s.children||!s.children.length,p=this.state.currentRoot,g=(p.children||[]).filter(function(x){return x.depth===s.depth&&x.name===s.name});return!g.length&&n.depth&&d==="nest"?null:Y.createElement(pr,{key:"recharts-treemap-node-".concat(u.x,"-").concat(u.y,"-").concat(u.name),className:"recharts-treemap-depth-".concat(s.depth)},this.renderItem(l,u,m),s.children&&s.children.length?s.children.map(function(x){return i.renderNode(s,x)}):null)}},{key:"renderAllNodes",value:function(){var n=this.state.formatRoot;return n?this.renderNode(n,n):null}},{key:"renderTooltip",value:function(){var n=this.props,s=n.children,i=n.nameKey,o=xs(s,ln);if(!o)return null;var l=this.props,d=l.width,u=l.height,m=this.state,p=m.isTooltipActive,g=m.activeNode,x={x:0,y:0,width:d,height:u},y=g?{x:g.x+g.width/2,y:g.y+g.height/2}:null,N=p&&g?[{payload:g,name:yn(g,i,""),value:yn(g,Vg)}]:[];return Y.cloneElement(o,{viewBox:x,active:p,coordinate:y,label:"",payload:N})}},{key:"renderNestIndex",value:function(){var n=this,s=this.props,i=s.nameKey,o=s.nestIndexContent,l=this.state.nestIndex;return Y.createElement("div",{className:"recharts-treemap-nest-index-wrapper",style:{marginTop:"8px",textAlign:"center"}},l.map(function(d,u){var m=ci(d,i,"root"),p=null;return Y.isValidElement(o)&&(p=Y.cloneElement(o,d,u)),Yt(o)?p=o(d,u):p=m,Y.createElement("div",{onClick:n.handleNestIndex.bind(n,d,u),key:"nest-index-".concat(ld()),className:"recharts-treemap-nest-index-box",style:{cursor:"pointer",display:"inline-block",padding:"0 7px",background:"#000",color:"#fff",marginRight:"3px"}},p)}))}},{key:"render",value:function(){if(!SC(this))return null;var n=this.props,s=n.width,i=n.height,o=n.className,l=n.style,d=n.children,u=n.type,m=Ave(n,wve),p=Pt(m,!1);return Y.createElement("div",{className:cr("recharts-wrapper",o),style:jn(jn({},l),{},{position:"relative",cursor:"default",width:s,height:i}),role:"region"},Y.createElement(zy,Vv({},p,{width:s,height:u==="nest"?i-30:i}),this.renderAllNodes(),Bne(d)),this.renderTooltip(),u==="nest"&&this.renderNestIndex())}}],[{key:"getDerivedStateFromProps",value:function(n,s){if(n.data!==s.prevData||n.type!==s.prevType||n.width!==s.prevWidth||n.height!==s.prevHeight||n.dataKey!==s.prevDataKey||n.aspectRatio!==s.prevAspectRatio){var i=MA({depth:0,node:{children:n.data,x:0,y:0,width:n.width,height:n.height},index:0,valueKey:n.dataKey}),o=LA(i,n.aspectRatio);return jn(jn({},s),{},{formatRoot:o,currentRoot:i,nestIndex:[i],prevAspectRatio:n.aspectRatio,prevData:n.data,prevWidth:n.width,prevHeight:n.height,prevDataKey:n.dataKey,prevType:n.type})}return null}},{key:"renderContentItem",value:function(n,s,i,o){if(Y.isValidElement(n))return Y.cloneElement(n,s);if(Yt(n))return n(s);var l=s.x,d=s.y,u=s.width,m=s.height,p=s.index,g=null;u>10&&m>10&&s.children&&i==="nest"&&(g=Y.createElement(mH,{points:[{x:l+2,y:d+m/2},{x:l+6,y:d+m/2+3},{x:l+2,y:d+m/2+6}]}));var x=null,y=tm(s.name);u>20&&m>20&&y.width<u&&y.height<m&&(x=Y.createElement("text",{x:l+8,y:d+m/2+7,fontSize:14},s.name));var N=o||jve;return Y.createElement("g",null,Y.createElement(lN,Vv({fill:s.depth<2?N[p%N.length]:"rgba(255,255,255,0)",stroke:"#fff"},Eve(s,"children"),{role:"img"})),g,x)}}])})(h.PureComponent);Xc(Xv,"displayName","Treemap");Xc(Xv,"defaultProps",{aspectRatio:.5*(1+Math.sqrt(5)),dataKey:"value",type:"flat",isAnimationActive:!Jo.isSsr,isUpdateAnimationActive:!Jo.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"linear"});var Bve=mx({chartName:"ScatterChart",GraphicalChild:Eh,defaultTooltipEventType:"item",validateTooltipEventTypes:["item"],axisComponents:[{axisType:"xAxis",AxisComp:da},{axisType:"yAxis",AxisComp:Jn},{axisType:"zAxis",AxisComp:Sh}],formatAxisMap:gN}),k3=mx({chartName:"ComposedChart",GraphicalChild:[qa,rc,ns,Eh],axisComponents:[{axisType:"xAxis",AxisComp:da},{axisType:"yAxis",AxisComp:Jn},{axisType:"zAxis",AxisComp:Sh}],formatAxisMap:gN}),Gve={value:()=>{}};function P3(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new gy(r)}function gy(e){this._=e}function Hve(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",s=r.indexOf(".");if(s>=0&&(n=r.slice(s+1),r=r.slice(0,s)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}gy.prototype=P3.prototype={constructor:gy,on:function(e,t){var r=this._,n=Hve(e+"",r),s,i=-1,o=n.length;if(arguments.length<2){for(;++i<o;)if((s=(e=n[i]).type)&&(s=Kve(r[s],e.name)))return s;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<o;)if(s=(e=n[i]).type)r[s]=jF(r[s],e.name,t);else if(t==null)for(s in r)r[s]=jF(r[s],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new gy(e)},call:function(e,t){if((s=arguments.length-2)>0)for(var r=new Array(s),n=0,s,i;n<s;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],n=0,s=i.length;n<s;++n)i[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],s=0,i=n.length;s<i;++s)n[s].value.apply(t,r)}};function Kve(e,t){for(var r=0,n=e.length,s;r<n;++r)if((s=e[r]).name===t)return s.value}function jF(e,t,r){for(var n=0,s=e.length;n<s;++n)if(e[n].name===t){e[n]=Gve,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var zT="http://www.w3.org/1999/xhtml";const wF={svg:"http://www.w3.org/2000/svg",xhtml:zT,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function SN(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),wF.hasOwnProperty(t)?{space:wF[t],local:e}:e}function zve(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===zT&&t.documentElement.namespaceURI===zT?t.createElement(e):t.createElementNS(r,e)}}function qve(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function AK(e){var t=SN(e);return(t.local?qve:zve)(t)}function Wve(){}function D3(e){return e==null?Wve:function(){return this.querySelector(e)}}function Vve(e){typeof e!="function"&&(e=D3(e));for(var t=this._groups,r=t.length,n=new Array(r),s=0;s<r;++s)for(var i=t[s],o=i.length,l=n[s]=new Array(o),d,u,m=0;m<o;++m)(d=i[m])&&(u=e.call(d,d.__data__,m,i))&&("__data__"in d&&(u.__data__=d.__data__),l[m]=u);return new Ui(n,this._parents)}function Yve(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Xve(){return[]}function _K(e){return e==null?Xve:function(){return this.querySelectorAll(e)}}function Qve(e){return function(){return Yve(e.apply(this,arguments))}}function Zve(e){typeof e=="function"?e=Qve(e):e=_K(e);for(var t=this._groups,r=t.length,n=[],s=[],i=0;i<r;++i)for(var o=t[i],l=o.length,d,u=0;u<l;++u)(d=o[u])&&(n.push(e.call(d,d.__data__,u,o)),s.push(d));return new Ui(n,s)}function CK(e){return function(){return this.matches(e)}}function TK(e){return function(t){return t.matches(e)}}var Jve=Array.prototype.find;function e1e(e){return function(){return Jve.call(this.children,e)}}function t1e(){return this.firstElementChild}function r1e(e){return this.select(e==null?t1e:e1e(typeof e=="function"?e:TK(e)))}var n1e=Array.prototype.filter;function a1e(){return Array.from(this.children)}function s1e(e){return function(){return n1e.call(this.children,e)}}function i1e(e){return this.selectAll(e==null?a1e:s1e(typeof e=="function"?e:TK(e)))}function o1e(e){typeof e!="function"&&(e=CK(e));for(var t=this._groups,r=t.length,n=new Array(r),s=0;s<r;++s)for(var i=t[s],o=i.length,l=n[s]=[],d,u=0;u<o;++u)(d=i[u])&&e.call(d,d.__data__,u,i)&&l.push(d);return new Ui(n,this._parents)}function OK(e){return new Array(e.length)}function l1e(){return new Ui(this._enter||this._groups.map(OK),this._parents)}function Qv(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Qv.prototype={constructor:Qv,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function c1e(e){return function(){return e}}function d1e(e,t,r,n,s,i){for(var o=0,l,d=t.length,u=i.length;o<u;++o)(l=t[o])?(l.__data__=i[o],n[o]=l):r[o]=new Qv(e,i[o]);for(;o<d;++o)(l=t[o])&&(s[o]=l)}function u1e(e,t,r,n,s,i,o){var l,d,u=new Map,m=t.length,p=i.length,g=new Array(m),x;for(l=0;l<m;++l)(d=t[l])&&(g[l]=x=o.call(d,d.__data__,l,t)+"",u.has(x)?s[l]=d:u.set(x,d));for(l=0;l<p;++l)x=o.call(e,i[l],l,i)+"",(d=u.get(x))?(n[l]=d,d.__data__=i[l],u.delete(x)):r[l]=new Qv(e,i[l]);for(l=0;l<m;++l)(d=t[l])&&u.get(g[l])===d&&(s[l]=d)}function f1e(e){return e.__data__}function p1e(e,t){if(!arguments.length)return Array.from(this,f1e);var r=t?u1e:d1e,n=this._parents,s=this._groups;typeof e!="function"&&(e=c1e(e));for(var i=s.length,o=new Array(i),l=new Array(i),d=new Array(i),u=0;u<i;++u){var m=n[u],p=s[u],g=p.length,x=m1e(e.call(m,m&&m.__data__,u,n)),y=x.length,N=l[u]=new Array(y),v=o[u]=new Array(y),S=d[u]=new Array(g);r(m,p,N,v,S,x,t);for(var E=0,C=0,_,A;E<y;++E)if(_=N[E]){for(E>=C&&(C=E+1);!(A=v[C])&&++C<y;);_._next=A||null}}return o=new Ui(o,n),o._enter=l,o._exit=d,o}function m1e(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function h1e(){return new Ui(this._exit||this._groups.map(OK),this._parents)}function g1e(e,t,r){var n=this.enter(),s=this,i=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(s=t(s),s&&(s=s.selection())),r==null?i.remove():r(i),n&&s?n.merge(s).order():s}function x1e(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,s=r.length,i=n.length,o=Math.min(s,i),l=new Array(s),d=0;d<o;++d)for(var u=r[d],m=n[d],p=u.length,g=l[d]=new Array(p),x,y=0;y<p;++y)(x=u[y]||m[y])&&(g[y]=x);for(;d<s;++d)l[d]=r[d];return new Ui(l,this._parents)}function b1e(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],s=n.length-1,i=n[s],o;--s>=0;)(o=n[s])&&(i&&o.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(o,i),i=o);return this}function y1e(e){e||(e=v1e);function t(p,g){return p&&g?e(p.__data__,g.__data__):!p-!g}for(var r=this._groups,n=r.length,s=new Array(n),i=0;i<n;++i){for(var o=r[i],l=o.length,d=s[i]=new Array(l),u,m=0;m<l;++m)(u=o[m])&&(d[m]=u);d.sort(t)}return new Ui(s,this._parents).order()}function v1e(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function N1e(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function S1e(){return Array.from(this)}function E1e(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],s=0,i=n.length;s<i;++s){var o=n[s];if(o)return o}return null}function j1e(){let e=0;for(const t of this)++e;return e}function w1e(){return!this.node()}function A1e(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var s=t[r],i=0,o=s.length,l;i<o;++i)(l=s[i])&&e.call(l,l.__data__,i,s);return this}function _1e(e){return function(){this.removeAttribute(e)}}function C1e(e){return function(){this.removeAttributeNS(e.space,e.local)}}function T1e(e,t){return function(){this.setAttribute(e,t)}}function O1e(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function R1e(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function k1e(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function P1e(e,t){var r=SN(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?C1e:_1e:typeof t=="function"?r.local?k1e:R1e:r.local?O1e:T1e)(r,t))}function RK(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function D1e(e){return function(){this.style.removeProperty(e)}}function I1e(e,t,r){return function(){this.style.setProperty(e,t,r)}}function M1e(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function L1e(e,t,r){return arguments.length>1?this.each((t==null?D1e:typeof t=="function"?M1e:I1e)(e,t,r??"")):Ym(this.node(),e)}function Ym(e,t){return e.style.getPropertyValue(t)||RK(e).getComputedStyle(e,null).getPropertyValue(t)}function $1e(e){return function(){delete this[e]}}function F1e(e,t){return function(){this[e]=t}}function U1e(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function B1e(e,t){return arguments.length>1?this.each((t==null?$1e:typeof t=="function"?U1e:F1e)(e,t)):this.node()[e]}function kK(e){return e.trim().split(/^|\s+/)}function I3(e){return e.classList||new PK(e)}function PK(e){this._node=e,this._names=kK(e.getAttribute("class")||"")}PK.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function DK(e,t){for(var r=I3(e),n=-1,s=t.length;++n<s;)r.add(t[n])}function IK(e,t){for(var r=I3(e),n=-1,s=t.length;++n<s;)r.remove(t[n])}function G1e(e){return function(){DK(this,e)}}function H1e(e){return function(){IK(this,e)}}function K1e(e,t){return function(){(t.apply(this,arguments)?DK:IK)(this,e)}}function z1e(e,t){var r=kK(e+"");if(arguments.length<2){for(var n=I3(this.node()),s=-1,i=r.length;++s<i;)if(!n.contains(r[s]))return!1;return!0}return this.each((typeof t=="function"?K1e:t?G1e:H1e)(r,t))}function q1e(){this.textContent=""}function W1e(e){return function(){this.textContent=e}}function V1e(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Y1e(e){return arguments.length?this.each(e==null?q1e:(typeof e=="function"?V1e:W1e)(e)):this.node().textContent}function X1e(){this.innerHTML=""}function Q1e(e){return function(){this.innerHTML=e}}function Z1e(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function J1e(e){return arguments.length?this.each(e==null?X1e:(typeof e=="function"?Z1e:Q1e)(e)):this.node().innerHTML}function eNe(){this.nextSibling&&this.parentNode.appendChild(this)}function tNe(){return this.each(eNe)}function rNe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function nNe(){return this.each(rNe)}function aNe(e){var t=typeof e=="function"?e:AK(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function sNe(){return null}function iNe(e,t){var r=typeof e=="function"?e:AK(e),n=t==null?sNe:typeof t=="function"?t:D3(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function oNe(){var e=this.parentNode;e&&e.removeChild(this)}function lNe(){return this.each(oNe)}function cNe(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function dNe(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function uNe(e){return this.select(e?dNe:cNe)}function fNe(e){return arguments.length?this.property("__data__",e):this.node().__data__}function pNe(e){return function(t){e.call(this,t,this.__data__)}}function mNe(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function hNe(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,s=t.length,i;r<s;++r)i=t[r],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++n]=i;++n?t.length=n:delete this.__on}}}function gNe(e,t,r){return function(){var n=this.__on,s,i=pNe(t);if(n){for(var o=0,l=n.length;o<l;++o)if((s=n[o]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=i,s.options=r),s.value=t;return}}this.addEventListener(e.type,i,r),s={type:e.type,name:e.name,value:t,listener:i,options:r},n?n.push(s):this.__on=[s]}}function xNe(e,t,r){var n=mNe(e+""),s,i=n.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var d=0,u=l.length,m;d<u;++d)for(s=0,m=l[d];s<i;++s)if((o=n[s]).type===m.type&&o.name===m.name)return m.value}return}for(l=t?gNe:hNe,s=0;s<i;++s)this.each(l(n[s],t,r));return this}function MK(e,t,r){var n=RK(e),s=n.CustomEvent;typeof s=="function"?s=new s(t,r):(s=n.document.createEvent("Event"),r?(s.initEvent(t,r.bubbles,r.cancelable),s.detail=r.detail):s.initEvent(t,!1,!1)),e.dispatchEvent(s)}function bNe(e,t){return function(){return MK(this,e,t)}}function yNe(e,t){return function(){return MK(this,e,t.apply(this,arguments))}}function vNe(e,t){return this.each((typeof t=="function"?yNe:bNe)(e,t))}function*NNe(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],s=0,i=n.length,o;s<i;++s)(o=n[s])&&(yield o)}var LK=[null];function Ui(e,t){this._groups=e,this._parents=t}function gx(){return new Ui([[document.documentElement]],LK)}function SNe(){return this}Ui.prototype=gx.prototype={constructor:Ui,select:Vve,selectAll:Zve,selectChild:r1e,selectChildren:i1e,filter:o1e,data:p1e,enter:l1e,exit:h1e,join:g1e,merge:x1e,selection:SNe,order:b1e,sort:y1e,call:N1e,nodes:S1e,node:E1e,size:j1e,empty:w1e,each:A1e,attr:P1e,style:L1e,property:B1e,classed:z1e,text:Y1e,html:J1e,raise:tNe,lower:nNe,append:aNe,insert:iNe,remove:lNe,clone:uNe,datum:fNe,on:xNe,dispatch:vNe,[Symbol.iterator]:NNe};function Gc(e){return typeof e=="string"?new Ui([[document.querySelector(e)]],[document.documentElement]):new Ui([[e]],LK)}function ENe(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Gd(e,t){if(e=ENe(e),t===void 0&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}if(t.getBoundingClientRect){var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}}return[e.pageX,e.pageY]}const qT={capture:!0,passive:!1};function WT(e){e.preventDefault(),e.stopImmediatePropagation()}function jNe(e){var t=e.document.documentElement,r=Gc(e).on("dragstart.drag",WT,qT);"onselectstart"in t?r.on("selectstart.drag",WT,qT):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function wNe(e,t){var r=e.document.documentElement,n=Gc(e).on("dragstart.drag",null);t&&(n.on("click.drag",WT,qT),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}var Xm=0,F0=0,y0=0,$K=1e3,Zv,U0,Jv=0,Rf=0,EN=0,Yg=typeof performance=="object"&&performance.now?performance:Date,FK=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function M3(){return Rf||(FK(ANe),Rf=Yg.now()+EN)}function ANe(){Rf=0}function e1(){this._call=this._time=this._next=null}e1.prototype=UK.prototype={constructor:e1,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?M3():+r)+(t==null?0:+t),!this._next&&U0!==this&&(U0?U0._next=this:Zv=this,U0=this),this._call=e,this._time=r,VT()},stop:function(){this._call&&(this._call=null,this._time=1/0,VT())}};function UK(e,t,r){var n=new e1;return n.restart(e,t,r),n}function _Ne(){M3(),++Xm;for(var e=Zv,t;e;)(t=Rf-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Xm}function AF(){Rf=(Jv=Yg.now())+EN,Xm=F0=0;try{_Ne()}finally{Xm=0,TNe(),Rf=0}}function CNe(){var e=Yg.now(),t=e-Jv;t>$K&&(EN-=t,Jv=e)}function TNe(){for(var e,t=Zv,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:Zv=r);U0=e,VT(n)}function VT(e){if(!Xm){F0&&(F0=clearTimeout(F0));var t=e-Rf;t>24?(e<1/0&&(F0=setTimeout(AF,e-Yg.now()-EN)),y0&&(y0=clearInterval(y0))):(y0||(Jv=Yg.now(),y0=setInterval(CNe,$K)),Xm=1,FK(AF))}}function _F(e,t,r){var n=new e1;return t=t==null?0:+t,n.restart(s=>{n.stop(),e(s+t)},t,r),n}var ONe=P3("start","end","cancel","interrupt"),RNe=[],BK=0,CF=1,YT=2,xy=3,TF=4,XT=5,by=6;function jN(e,t,r,n,s,i){var o=e.__transition;if(!o)e.__transition={};else if(r in o)return;kNe(e,r,{name:t,index:n,group:s,on:ONe,tween:RNe,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:BK})}function L3(e,t){var r=ol(e,t);if(r.state>BK)throw new Error("too late; already scheduled");return r}function nc(e,t){var r=ol(e,t);if(r.state>xy)throw new Error("too late; already running");return r}function ol(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function kNe(e,t,r){var n=e.__transition,s;n[t]=r,r.timer=UK(i,0,r.time);function i(u){r.state=CF,r.timer.restart(o,r.delay,r.time),r.delay<=u&&o(u-r.delay)}function o(u){var m,p,g,x;if(r.state!==CF)return d();for(m in n)if(x=n[m],x.name===r.name){if(x.state===xy)return _F(o);x.state===TF?(x.state=by,x.timer.stop(),x.on.call("interrupt",e,e.__data__,x.index,x.group),delete n[m]):+m<t&&(x.state=by,x.timer.stop(),x.on.call("cancel",e,e.__data__,x.index,x.group),delete n[m])}if(_F(function(){r.state===xy&&(r.state=TF,r.timer.restart(l,r.delay,r.time),l(u))}),r.state=YT,r.on.call("start",e,e.__data__,r.index,r.group),r.state===YT){for(r.state=xy,s=new Array(g=r.tween.length),m=0,p=-1;m<g;++m)(x=r.tween[m].value.call(e,e.__data__,r.index,r.group))&&(s[++p]=x);s.length=p+1}}function l(u){for(var m=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(d),r.state=XT,1),p=-1,g=s.length;++p<g;)s[p].call(e,m);r.state===XT&&(r.on.call("end",e,e.__data__,r.index,r.group),d())}function d(){r.state=by,r.timer.stop(),delete n[t];for(var u in n)return;delete e.__transition}}function yy(e,t){var r=e.__transition,n,s,i=!0,o;if(r){t=t==null?null:t+"";for(o in r){if((n=r[o]).name!==t){i=!1;continue}s=n.state>YT&&n.state<XT,n.state=by,n.timer.stop(),n.on.call(s?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[o]}i&&delete e.__transition}}function PNe(e){return this.each(function(){yy(this,e)})}function DNe(e,t){var r,n;return function(){var s=nc(this,e),i=s.tween;if(i!==r){n=r=i;for(var o=0,l=n.length;o<l;++o)if(n[o].name===t){n=n.slice(),n.splice(o,1);break}}s.tween=n}}function INe(e,t,r){var n,s;if(typeof r!="function")throw new Error;return function(){var i=nc(this,e),o=i.tween;if(o!==n){s=(n=o).slice();for(var l={name:t,value:r},d=0,u=s.length;d<u;++d)if(s[d].name===t){s[d]=l;break}d===u&&s.push(l)}i.tween=s}}function MNe(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=ol(this.node(),r).tween,s=0,i=n.length,o;s<i;++s)if((o=n[s]).name===e)return o.value;return null}return this.each((t==null?DNe:INe)(r,e,t))}function $3(e,t,r){var n=e._id;return e.each(function(){var s=nc(this,n);(s.value||(s.value={}))[t]=r.apply(this,arguments)}),function(s){return ol(s,n).value[t]}}function GK(e,t){var r;return(typeof t=="number"?zo:t instanceof _f?iv:(r=_f(t))?(t=r,iv):t9)(e,t)}function LNe(e){return function(){this.removeAttribute(e)}}function $Ne(e){return function(){this.removeAttributeNS(e.space,e.local)}}function FNe(e,t,r){var n,s=r+"",i;return function(){var o=this.getAttribute(e);return o===s?null:o===n?i:i=t(n=o,r)}}function UNe(e,t,r){var n,s=r+"",i;return function(){var o=this.getAttributeNS(e.space,e.local);return o===s?null:o===n?i:i=t(n=o,r)}}function BNe(e,t,r){var n,s,i;return function(){var o,l=r(this),d;return l==null?void this.removeAttribute(e):(o=this.getAttribute(e),d=l+"",o===d?null:o===n&&d===s?i:(s=d,i=t(n=o,l)))}}function GNe(e,t,r){var n,s,i;return function(){var o,l=r(this),d;return l==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),d=l+"",o===d?null:o===n&&d===s?i:(s=d,i=t(n=o,l)))}}function HNe(e,t){var r=SN(e),n=r==="transform"?Ple:GK;return this.attrTween(e,typeof t=="function"?(r.local?GNe:BNe)(r,n,$3(this,"attr."+e,t)):t==null?(r.local?$Ne:LNe)(r):(r.local?UNe:FNe)(r,n,t))}function KNe(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function zNe(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function qNe(e,t){var r,n;function s(){var i=t.apply(this,arguments);return i!==n&&(r=(n=i)&&zNe(e,i)),r}return s._value=t,s}function WNe(e,t){var r,n;function s(){var i=t.apply(this,arguments);return i!==n&&(r=(n=i)&&KNe(e,i)),r}return s._value=t,s}function VNe(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=SN(e);return this.tween(r,(n.local?qNe:WNe)(n,t))}function YNe(e,t){return function(){L3(this,e).delay=+t.apply(this,arguments)}}function XNe(e,t){return t=+t,function(){L3(this,e).delay=t}}function QNe(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?YNe:XNe)(t,e)):ol(this.node(),t).delay}function ZNe(e,t){return function(){nc(this,e).duration=+t.apply(this,arguments)}}function JNe(e,t){return t=+t,function(){nc(this,e).duration=t}}function eSe(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ZNe:JNe)(t,e)):ol(this.node(),t).duration}function tSe(e,t){if(typeof t!="function")throw new Error;return function(){nc(this,e).ease=t}}function rSe(e){var t=this._id;return arguments.length?this.each(tSe(t,e)):ol(this.node(),t).ease}function nSe(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;nc(this,e).ease=r}}function aSe(e){if(typeof e!="function")throw new Error;return this.each(nSe(this._id,e))}function sSe(e){typeof e!="function"&&(e=CK(e));for(var t=this._groups,r=t.length,n=new Array(r),s=0;s<r;++s)for(var i=t[s],o=i.length,l=n[s]=[],d,u=0;u<o;++u)(d=i[u])&&e.call(d,d.__data__,u,i)&&l.push(d);return new nd(n,this._parents,this._name,this._id)}function iSe(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,s=r.length,i=Math.min(n,s),o=new Array(n),l=0;l<i;++l)for(var d=t[l],u=r[l],m=d.length,p=o[l]=new Array(m),g,x=0;x<m;++x)(g=d[x]||u[x])&&(p[x]=g);for(;l<n;++l)o[l]=t[l];return new nd(o,this._parents,this._name,this._id)}function oSe(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function lSe(e,t,r){var n,s,i=oSe(t)?L3:nc;return function(){var o=i(this,e),l=o.on;l!==n&&(s=(n=l).copy()).on(t,r),o.on=s}}function cSe(e,t){var r=this._id;return arguments.length<2?ol(this.node(),r).on.on(e):this.each(lSe(r,e,t))}function dSe(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function uSe(){return this.on("end.remove",dSe(this._id))}function fSe(e){var t=this._name,r=this._id;typeof e!="function"&&(e=D3(e));for(var n=this._groups,s=n.length,i=new Array(s),o=0;o<s;++o)for(var l=n[o],d=l.length,u=i[o]=new Array(d),m,p,g=0;g<d;++g)(m=l[g])&&(p=e.call(m,m.__data__,g,l))&&("__data__"in m&&(p.__data__=m.__data__),u[g]=p,jN(u[g],t,r,g,u,ol(m,r)));return new nd(i,this._parents,t,r)}function pSe(e){var t=this._name,r=this._id;typeof e!="function"&&(e=_K(e));for(var n=this._groups,s=n.length,i=[],o=[],l=0;l<s;++l)for(var d=n[l],u=d.length,m,p=0;p<u;++p)if(m=d[p]){for(var g=e.call(m,m.__data__,p,d),x,y=ol(m,r),N=0,v=g.length;N<v;++N)(x=g[N])&&jN(x,t,r,N,g,y);i.push(g),o.push(m)}return new nd(i,o,t,r)}var mSe=gx.prototype.constructor;function hSe(){return new mSe(this._groups,this._parents)}function gSe(e,t){var r,n,s;return function(){var i=Ym(this,e),o=(this.style.removeProperty(e),Ym(this,e));return i===o?null:i===r&&o===n?s:s=t(r=i,n=o)}}function HK(e){return function(){this.style.removeProperty(e)}}function xSe(e,t,r){var n,s=r+"",i;return function(){var o=Ym(this,e);return o===s?null:o===n?i:i=t(n=o,r)}}function bSe(e,t,r){var n,s,i;return function(){var o=Ym(this,e),l=r(this),d=l+"";return l==null&&(d=l=(this.style.removeProperty(e),Ym(this,e))),o===d?null:o===n&&d===s?i:(s=d,i=t(n=o,l))}}function ySe(e,t){var r,n,s,i="style."+t,o="end."+i,l;return function(){var d=nc(this,e),u=d.on,m=d.value[i]==null?l||(l=HK(t)):void 0;(u!==r||s!==m)&&(n=(r=u).copy()).on(o,s=m),d.on=n}}function vSe(e,t,r){var n=(e+="")=="transform"?kle:GK;return t==null?this.styleTween(e,gSe(e,n)).on("end.style."+e,HK(e)):typeof t=="function"?this.styleTween(e,bSe(e,n,$3(this,"style."+e,t))).each(ySe(this._id,e)):this.styleTween(e,xSe(e,n,t),r).on("end.style."+e,null)}function NSe(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function SSe(e,t,r){var n,s;function i(){var o=t.apply(this,arguments);return o!==s&&(n=(s=o)&&NSe(e,o,r)),n}return i._value=t,i}function ESe(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,SSe(e,t,r??""))}function jSe(e){return function(){this.textContent=e}}function wSe(e){return function(){var t=e(this);this.textContent=t??""}}function ASe(e){return this.tween("text",typeof e=="function"?wSe($3(this,"text",e)):jSe(e==null?"":e+""))}function _Se(e){return function(t){this.textContent=e.call(this,t)}}function CSe(e){var t,r;function n(){var s=e.apply(this,arguments);return s!==r&&(t=(r=s)&&_Se(s)),t}return n._value=e,n}function TSe(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,CSe(e))}function OSe(){for(var e=this._name,t=this._id,r=KK(),n=this._groups,s=n.length,i=0;i<s;++i)for(var o=n[i],l=o.length,d,u=0;u<l;++u)if(d=o[u]){var m=ol(d,t);jN(d,e,r,u,o,{time:m.time+m.delay+m.duration,delay:0,duration:m.duration,ease:m.ease})}return new nd(n,this._parents,e,r)}function RSe(){var e,t,r=this,n=r._id,s=r.size();return new Promise(function(i,o){var l={value:o},d={value:function(){--s===0&&i()}};r.each(function(){var u=nc(this,n),m=u.on;m!==e&&(t=(e=m).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(d)),u.on=t}),s===0&&i()})}var kSe=0;function nd(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function KK(){return++kSe}var Rc=gx.prototype;nd.prototype={constructor:nd,select:fSe,selectAll:pSe,selectChild:Rc.selectChild,selectChildren:Rc.selectChildren,filter:sSe,merge:iSe,selection:hSe,transition:OSe,call:Rc.call,nodes:Rc.nodes,node:Rc.node,size:Rc.size,empty:Rc.empty,each:Rc.each,on:cSe,attr:HNe,attrTween:VNe,style:vSe,styleTween:ESe,text:ASe,textTween:TSe,remove:uSe,tween:MNe,delay:QNe,duration:eSe,ease:rSe,easeVarying:aSe,end:RSe,[Symbol.iterator]:Rc[Symbol.iterator]};function PSe(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var DSe={time:null,delay:0,duration:250,ease:PSe};function ISe(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function MSe(e){var t,r;e instanceof nd?(t=e._id,e=e._name):(t=KK(),(r=DSe).time=M3(),e=e==null?null:e+"");for(var n=this._groups,s=n.length,i=0;i<s;++i)for(var o=n[i],l=o.length,d,u=0;u<l;++u)(d=o[u])&&jN(d,e,t,u,o,r||ISe(d,t));return new nd(n,this._parents,e,t)}gx.prototype.interrupt=PNe;gx.prototype.transition=MSe;var am=1e-6,F3=Math.PI,LSe=F3*2,$Se=180/F3,FSe=F3/180,sm=Math.abs,USe=Math.cos,BSe=Math.sin,U3=Math.sqrt;function No(){}function t1(e,t){e&&RF.hasOwnProperty(e.type)&&RF[e.type](e,t)}var OF={Feature:function(e,t){t1(e.geometry,t)},FeatureCollection:function(e,t){for(var r=e.features,n=-1,s=r.length;++n<s;)t1(r[n].geometry,t)}},RF={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var r=e.coordinates,n=-1,s=r.length;++n<s;)e=r[n],t.point(e[0],e[1],e[2])},LineString:function(e,t){QT(e.coordinates,t,0)},MultiLineString:function(e,t){for(var r=e.coordinates,n=-1,s=r.length;++n<s;)QT(r[n],t,0)},Polygon:function(e,t){kF(e.coordinates,t)},MultiPolygon:function(e,t){for(var r=e.coordinates,n=-1,s=r.length;++n<s;)kF(r[n],t)},GeometryCollection:function(e,t){for(var r=e.geometries,n=-1,s=r.length;++n<s;)t1(r[n],t)}};function QT(e,t,r){var n=-1,s=e.length-r,i;for(t.lineStart();++n<s;)i=e[n],t.point(i[0],i[1],i[2]);t.lineEnd()}function kF(e,t){var r=-1,n=e.length;for(t.polygonStart();++r<n;)QT(e[r],t,1);t.polygonEnd()}function Ip(e,t){e&&OF.hasOwnProperty(e.type)?OF[e.type](e,t):t1(e,t)}function GSe(){var e=[],t;return{point:function(r,n,s){t.push([r,n,s])},lineStart:function(){e.push(t=[])},lineEnd:No,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var r=e;return e=[],t=null,r}}}function HSe(e,t){return sm(e[0]-t[0])<am&&sm(e[1]-t[1])<am}function Ib(e,t,r,n){this.x=e,this.z=t,this.o=r,this.e=n,this.v=!1,this.n=this.p=null}function KSe(e,t,r,n,s){var i=[],o=[],l,d;if(e.forEach(function(y){if(!((N=y.length-1)<=0)){var N,v=y[0],S=y[N],E;if(HSe(v,S)){if(!v[2]&&!S[2]){for(s.lineStart(),l=0;l<N;++l)s.point((v=y[l])[0],v[1]);s.lineEnd();return}S[0]+=2*am}i.push(E=new Ib(v,y,null,!0)),o.push(E.o=new Ib(v,null,E,!1)),i.push(E=new Ib(S,y,null,!1)),o.push(E.o=new Ib(S,null,E,!0))}}),!!i.length){for(o.sort(t),PF(i),PF(o),l=0,d=o.length;l<d;++l)o[l].e=r=!r;for(var u=i[0],m,p;;){for(var g=u,x=!0;g.v;)if((g=g.n)===u)return;m=g.z,s.lineStart();do{if(g.v=g.o.v=!0,g.e){if(x)for(l=0,d=m.length;l<d;++l)s.point((p=m[l])[0],p[1]);else n(g.x,g.n.x,1,s);g=g.n}else{if(x)for(m=g.p.z,l=m.length-1;l>=0;--l)s.point((p=m[l])[0],p[1]);else n(g.x,g.p.x,-1,s);g=g.p}g=g.o,m=g.z,x=!x}while(!g.v);s.lineEnd()}}}function PF(e){if(t=e.length){for(var t,r=0,n=e[0],s;++r<t;)n.n=s=e[r],s.p=n,n=s;n.n=s=e[0],s.p=n}}function zSe(e,t,r,n,s,i){var o=e[0],l=e[1],d=t[0],u=t[1],m=0,p=1,g=d-o,x=u-l,y;if(y=r-o,!(!g&&y>0)){if(y/=g,g<0){if(y<m)return;y<p&&(p=y)}else if(g>0){if(y>p)return;y>m&&(m=y)}if(y=s-o,!(!g&&y<0)){if(y/=g,g<0){if(y>p)return;y>m&&(m=y)}else if(g>0){if(y<m)return;y<p&&(p=y)}if(y=n-l,!(!x&&y>0)){if(y/=x,x<0){if(y<m)return;y<p&&(p=y)}else if(x>0){if(y>p)return;y>m&&(m=y)}if(y=i-l,!(!x&&y<0)){if(y/=x,x<0){if(y>p)return;y>m&&(m=y)}else if(x>0){if(y<m)return;y<p&&(p=y)}return m>0&&(e[0]=o+m*g,e[1]=l+m*x),p<1&&(t[0]=o+p*g,t[1]=l+p*x),!0}}}}}var B0=1e9,Mb=-B0;function qSe(e,t,r,n){function s(u,m){return e<=u&&u<=r&&t<=m&&m<=n}function i(u,m,p,g){var x=0,y=0;if(u==null||(x=o(u,p))!==(y=o(m,p))||d(u,m)<0^p>0)do g.point(x===0||x===3?e:r,x>1?n:t);while((x=(x+p+4)%4)!==y);else g.point(m[0],m[1])}function o(u,m){return sm(u[0]-e)<am?m>0?0:3:sm(u[0]-r)<am?m>0?2:1:sm(u[1]-t)<am?m>0?1:0:m>0?3:2}function l(u,m){return d(u.x,m.x)}function d(u,m){var p=o(u,1),g=o(m,1);return p!==g?p-g:p===0?m[1]-u[1]:p===1?u[0]-m[0]:p===2?u[1]-m[1]:m[0]-u[0]}return function(u){var m=u,p=GSe(),g,x,y,N,v,S,E,C,_,A,T,R={point:I,lineStart:H,lineEnd:B,polygonStart:w,polygonEnd:L};function I(G,$){s(G,$)&&m.point(G,$)}function k(){for(var G=0,$=0,z=x.length;$<z;++$)for(var U=x[$],Z=1,re=U.length,X=U[0],F,te,ne=X[0],se=X[1];Z<re;++Z)F=ne,te=se,X=U[Z],ne=X[0],se=X[1],te<=n?se>n&&(ne-F)*(n-te)>(se-te)*(e-F)&&++G:se<=n&&(ne-F)*(n-te)<(se-te)*(e-F)&&--G;return G}function w(){m=p,g=[],x=[],T=!0}function L(){var G=k(),$=T&&G,z=(g=rle(g)).length;($||z)&&(u.polygonStart(),$&&(u.lineStart(),i(null,null,1,u),u.lineEnd()),z&&KSe(g,l,G,i,u),u.polygonEnd()),m=u,g=x=y=null}function H(){R.point=M,x&&x.push(y=[]),A=!0,_=!1,E=C=NaN}function B(){g&&(M(N,v),S&&_&&p.rejoin(),g.push(p.result())),R.point=I,_&&m.lineEnd()}function M(G,$){var z=s(G,$);if(x&&y.push([G,$]),A)N=G,v=$,S=z,A=!1,z&&(m.lineStart(),m.point(G,$));else if(z&&_)m.point(G,$);else{var U=[E=Math.max(Mb,Math.min(B0,E)),C=Math.max(Mb,Math.min(B0,C))],Z=[G=Math.max(Mb,Math.min(B0,G)),$=Math.max(Mb,Math.min(B0,$))];zSe(U,Z,e,t,r,n)?(_||(m.lineStart(),m.point(U[0],U[1])),m.point(Z[0],Z[1]),z||m.lineEnd(),T=!1):z&&(m.lineStart(),m.point(G,$),T=!1)}E=G,C=$,_=z}return R}}const ZT=e=>e;var $A=new Em,JT=new Em,zK,qK,eO,tO,Hc={point:No,lineStart:No,lineEnd:No,polygonStart:function(){Hc.lineStart=WSe,Hc.lineEnd=YSe},polygonEnd:function(){Hc.lineStart=Hc.lineEnd=Hc.point=No,$A.add(sm(JT)),JT=new Em},result:function(){var e=$A/2;return $A=new Em,e}};function WSe(){Hc.point=VSe}function VSe(e,t){Hc.point=WK,zK=eO=e,qK=tO=t}function WK(e,t){JT.add(tO*e-eO*t),eO=e,tO=t}function YSe(){WK(zK,qK)}var Qm=1/0,r1=Qm,Xg=-Qm,n1=Xg,a1={point:XSe,lineStart:No,lineEnd:No,polygonStart:No,polygonEnd:No,result:function(){var e=[[Qm,r1],[Xg,n1]];return Xg=n1=-(r1=Qm=1/0),e}};function XSe(e,t){e<Qm&&(Qm=e),e>Xg&&(Xg=e),t<r1&&(r1=t),t>n1&&(n1=t)}var rO=0,nO=0,G0=0,s1=0,i1=0,zp=0,aO=0,sO=0,H0=0,VK,YK,Pl,Dl,xo={point:kf,lineStart:DF,lineEnd:IF,polygonStart:function(){xo.lineStart=JSe,xo.lineEnd=e2e},polygonEnd:function(){xo.point=kf,xo.lineStart=DF,xo.lineEnd=IF},result:function(){var e=H0?[aO/H0,sO/H0]:zp?[s1/zp,i1/zp]:G0?[rO/G0,nO/G0]:[NaN,NaN];return rO=nO=G0=s1=i1=zp=aO=sO=H0=0,e}};function kf(e,t){rO+=e,nO+=t,++G0}function DF(){xo.point=QSe}function QSe(e,t){xo.point=ZSe,kf(Pl=e,Dl=t)}function ZSe(e,t){var r=e-Pl,n=t-Dl,s=U3(r*r+n*n);s1+=s*(Pl+e)/2,i1+=s*(Dl+t)/2,zp+=s,kf(Pl=e,Dl=t)}function IF(){xo.point=kf}function JSe(){xo.point=t2e}function e2e(){XK(VK,YK)}function t2e(e,t){xo.point=XK,kf(VK=Pl=e,YK=Dl=t)}function XK(e,t){var r=e-Pl,n=t-Dl,s=U3(r*r+n*n);s1+=s*(Pl+e)/2,i1+=s*(Dl+t)/2,zp+=s,s=Dl*e-Pl*t,aO+=s*(Pl+e),sO+=s*(Dl+t),H0+=s*3,kf(Pl=e,Dl=t)}function QK(e){this._context=e}QK.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,LSe);break}}},result:No};var iO=new Em,FA,ZK,JK,K0,z0,Qg={point:No,lineStart:function(){Qg.point=r2e},lineEnd:function(){FA&&ez(ZK,JK),Qg.point=No},polygonStart:function(){FA=!0},polygonEnd:function(){FA=null},result:function(){var e=+iO;return iO=new Em,e}};function r2e(e,t){Qg.point=ez,ZK=K0=e,JK=z0=t}function ez(e,t){K0-=e,z0-=t,iO.add(U3(K0*K0+z0*z0)),K0=e,z0=t}let MF,o1,LF,$F;class FF{constructor(t){this._append=t==null?tz:n2e(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,r){switch(this._point){case 0:{this._append`M${t},${r}`,this._point=1;break}case 1:{this._append`L${t},${r}`;break}default:{if(this._append`M${t},${r}`,this._radius!==LF||this._append!==o1){const n=this._radius,s=this._;this._="",this._append`m0,${n}a${n},${n} 0 1,1 0,${-2*n}a${n},${n} 0 1,1 0,${2*n}z`,LF=n,o1=this._append,$F=this._,this._=s}this._+=$F;break}}}result(){const t=this._;return this._="",t.length?t:null}}function tz(e){let t=1;this._+=e[0];for(const r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function n2e(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return tz;if(t!==MF){const r=10**t;MF=t,o1=function(s){let i=1;this._+=s[0];for(const o=s.length;i<o;++i)this._+=Math.round(arguments[i]*r)/r+s[i]}}return o1}function a2e(e,t){let r=3,n=4.5,s,i;function o(l){return l&&(typeof n=="function"&&i.pointRadius(+n.apply(this,arguments)),Ip(l,s(i))),i.result()}return o.area=function(l){return Ip(l,s(Hc)),Hc.result()},o.measure=function(l){return Ip(l,s(Qg)),Qg.result()},o.bounds=function(l){return Ip(l,s(a1)),a1.result()},o.centroid=function(l){return Ip(l,s(xo)),xo.result()},o.projection=function(l){return arguments.length?(s=l==null?(e=null,ZT):(e=l).stream,o):e},o.context=function(l){return arguments.length?(i=l==null?(t=null,new FF(r)):new QK(t=l),typeof n!="function"&&i.pointRadius(n),o):t},o.pointRadius=function(l){return arguments.length?(n=typeof l=="function"?l:(i.pointRadius(+l),+l),o):n},o.digits=function(l){if(!arguments.length)return r;if(l==null)r=null;else{const d=Math.floor(l);if(!(d>=0))throw new RangeError(`invalid digits: ${l}`);r=d}return t===null&&(i=new FF(r)),o},o.projection(e).digits(r).context(t)}function s2e(e){return function(t){var r=new oO;for(var n in e)r[n]=e[n];return r.stream=t,r}}function oO(){}oO.prototype={constructor:oO,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function B3(e,t,r){var n=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),n!=null&&e.clipExtent(null),Ip(r,e.stream(a1)),t(a1.result()),n!=null&&e.clipExtent(n),e}function rz(e,t,r){return B3(e,function(n){var s=t[1][0]-t[0][0],i=t[1][1]-t[0][1],o=Math.min(s/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),l=+t[0][0]+(s-o*(n[1][0]+n[0][0]))/2,d=+t[0][1]+(i-o*(n[1][1]+n[0][1]))/2;e.scale(150*o).translate([l,d])},r)}function i2e(e,t,r){return rz(e,[[0,0],t],r)}function o2e(e,t,r){return B3(e,function(n){var s=+t,i=s/(n[1][0]-n[0][0]),o=(s-i*(n[1][0]+n[0][0]))/2,l=-i*n[0][1];e.scale(150*i).translate([o,l])},r)}function l2e(e,t,r){return B3(e,function(n){var s=+t,i=s/(n[1][1]-n[0][1]),o=-i*n[0][0],l=(s-i*(n[1][1]+n[0][1]))/2;e.scale(150*i).translate([o,l])},r)}function c2e(){var e=1,t=0,r=0,n=1,s=1,i=0,o,l,d=null,u,m,p,g=1,x=1,y=s2e({point:function(_,A){var T=C([_,A]);this.stream.point(T[0],T[1])}}),N=ZT,v,S;function E(){return g=e*n,x=e*s,v=S=null,C}function C(_){var A=_[0]*g,T=_[1]*x;if(i){var R=T*o-A*l;A=A*o+T*l,T=R}return[A+t,T+r]}return C.invert=function(_){var A=_[0]-t,T=_[1]-r;if(i){var R=T*o+A*l;A=A*o-T*l,T=R}return[A/g,T/x]},C.stream=function(_){return v&&S===_?v:v=y(N(S=_))},C.postclip=function(_){return arguments.length?(N=_,d=u=m=p=null,E()):N},C.clipExtent=function(_){return arguments.length?(N=_==null?(d=u=m=p=null,ZT):qSe(d=+_[0][0],u=+_[0][1],m=+_[1][0],p=+_[1][1]),E()):d==null?null:[[d,u],[m,p]]},C.scale=function(_){return arguments.length?(e=+_,E()):e},C.translate=function(_){return arguments.length?(t=+_[0],r=+_[1],E()):[t,r]},C.angle=function(_){return arguments.length?(i=_%360*FSe,l=BSe(i),o=USe(i),E()):i*$Se},C.reflectX=function(_){return arguments.length?(n=_?-1:1,E()):n<0},C.reflectY=function(_){return arguments.length?(s=_?-1:1,E()):s<0},C.fitExtent=function(_,A){return rz(C,_,A)},C.fitSize=function(_,A){return i2e(C,_,A)},C.fitWidth=function(_,A){return o2e(C,_,A)},C.fitHeight=function(_,A){return l2e(C,_,A)},C}function d2e(e){for(var t=e.length/6|0,r=new Array(t),n=0;n<t;)r[n]="#"+e.slice(n*6,++n*6);return r}const u2e=e=>Sle(e[e.length-1]);var f2e=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(d2e);const p2e=u2e(f2e),Lb=e=>()=>e;function m2e(e,{sourceEvent:t,target:r,transform:n,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:s}})}function Wc(e,t,r){this.k=e,this.x=t,this.y=r}Wc.prototype={constructor:Wc,scale:function(e){return e===1?this:new Wc(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Wc(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var l1=new Wc(1,0,0);Wc.prototype;function UA(e){e.stopImmediatePropagation()}function v0(e){e.preventDefault(),e.stopImmediatePropagation()}function h2e(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function g2e(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function UF(){return this.__zoom||l1}function x2e(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function b2e(){return navigator.maxTouchPoints||"ontouchstart"in this}function y2e(e,t,r){var n=e.invertX(t[0][0])-r[0][0],s=e.invertX(t[1][0])-r[1][0],i=e.invertY(t[0][1])-r[0][1],o=e.invertY(t[1][1])-r[1][1];return e.translate(s>n?(n+s)/2:Math.min(0,n)||Math.max(0,s),o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o))}function v2e(){var e=h2e,t=g2e,r=y2e,n=x2e,s=b2e,i=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,d=Lle,u=P3("start","zoom","end"),m,p,g,x=500,y=150,N=0,v=10;function S(M){M.property("__zoom",UF).on("wheel.zoom",I,{passive:!1}).on("mousedown.zoom",k).on("dblclick.zoom",w).filter(s).on("touchstart.zoom",L).on("touchmove.zoom",H).on("touchend.zoom touchcancel.zoom",B).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}S.transform=function(M,G,$,z){var U=M.selection?M.selection():M;U.property("__zoom",UF),M!==U?A(M,G,$,z):U.interrupt().each(function(){T(this,arguments).event(z).start().zoom(null,typeof G=="function"?G.apply(this,arguments):G).end()})},S.scaleBy=function(M,G,$,z){S.scaleTo(M,function(){var U=this.__zoom.k,Z=typeof G=="function"?G.apply(this,arguments):G;return U*Z},$,z)},S.scaleTo=function(M,G,$,z){S.transform(M,function(){var U=t.apply(this,arguments),Z=this.__zoom,re=$==null?_(U):typeof $=="function"?$.apply(this,arguments):$,X=Z.invert(re),F=typeof G=="function"?G.apply(this,arguments):G;return r(C(E(Z,F),re,X),U,o)},$,z)},S.translateBy=function(M,G,$,z){S.transform(M,function(){return r(this.__zoom.translate(typeof G=="function"?G.apply(this,arguments):G,typeof $=="function"?$.apply(this,arguments):$),t.apply(this,arguments),o)},null,z)},S.translateTo=function(M,G,$,z,U){S.transform(M,function(){var Z=t.apply(this,arguments),re=this.__zoom,X=z==null?_(Z):typeof z=="function"?z.apply(this,arguments):z;return r(l1.translate(X[0],X[1]).scale(re.k).translate(typeof G=="function"?-G.apply(this,arguments):-G,typeof $=="function"?-$.apply(this,arguments):-$),Z,o)},z,U)};function E(M,G){return G=Math.max(i[0],Math.min(i[1],G)),G===M.k?M:new Wc(G,M.x,M.y)}function C(M,G,$){var z=G[0]-$[0]*M.k,U=G[1]-$[1]*M.k;return z===M.x&&U===M.y?M:new Wc(M.k,z,U)}function _(M){return[(+M[0][0]+ +M[1][0])/2,(+M[0][1]+ +M[1][1])/2]}function A(M,G,$,z){M.on("start.zoom",function(){T(this,arguments).event(z).start()}).on("interrupt.zoom end.zoom",function(){T(this,arguments).event(z).end()}).tween("zoom",function(){var U=this,Z=arguments,re=T(U,Z).event(z),X=t.apply(U,Z),F=$==null?_(X):typeof $=="function"?$.apply(U,Z):$,te=Math.max(X[1][0]-X[0][0],X[1][1]-X[0][1]),ne=U.__zoom,se=typeof G=="function"?G.apply(U,Z):G,Ne=d(ne.invert(F).concat(te/ne.k),se.invert(F).concat(te/se.k));return function(fe){if(fe===1)fe=se;else{var we=Ne(fe),ve=te/we[2];fe=new Wc(ve,F[0]-we[0]*ve,F[1]-we[1]*ve)}re.zoom(null,fe)}})}function T(M,G,$){return!$&&M.__zooming||new R(M,G)}function R(M,G){this.that=M,this.args=G,this.active=0,this.sourceEvent=null,this.extent=t.apply(M,G),this.taps=0}R.prototype={event:function(M){return M&&(this.sourceEvent=M),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(M,G){return this.mouse&&M!=="mouse"&&(this.mouse[1]=G.invert(this.mouse[0])),this.touch0&&M!=="touch"&&(this.touch0[1]=G.invert(this.touch0[0])),this.touch1&&M!=="touch"&&(this.touch1[1]=G.invert(this.touch1[0])),this.that.__zoom=G,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(M){var G=Gc(this.that).datum();u.call(M,this.that,new m2e(M,{sourceEvent:this.sourceEvent,target:S,transform:this.that.__zoom,dispatch:u}),G)}};function I(M,...G){if(!e.apply(this,arguments))return;var $=T(this,G).event(M),z=this.__zoom,U=Math.max(i[0],Math.min(i[1],z.k*Math.pow(2,n.apply(this,arguments)))),Z=Gd(M);if($.wheel)($.mouse[0][0]!==Z[0]||$.mouse[0][1]!==Z[1])&&($.mouse[1]=z.invert($.mouse[0]=Z)),clearTimeout($.wheel);else{if(z.k===U)return;$.mouse=[Z,z.invert(Z)],yy(this),$.start()}v0(M),$.wheel=setTimeout(re,y),$.zoom("mouse",r(C(E(z,U),$.mouse[0],$.mouse[1]),$.extent,o));function re(){$.wheel=null,$.end()}}function k(M,...G){if(g||!e.apply(this,arguments))return;var $=M.currentTarget,z=T(this,G,!0).event(M),U=Gc(M.view).on("mousemove.zoom",F,!0).on("mouseup.zoom",te,!0),Z=Gd(M,$),re=M.clientX,X=M.clientY;jNe(M.view),UA(M),z.mouse=[Z,this.__zoom.invert(Z)],yy(this),z.start();function F(ne){if(v0(ne),!z.moved){var se=ne.clientX-re,Ne=ne.clientY-X;z.moved=se*se+Ne*Ne>N}z.event(ne).zoom("mouse",r(C(z.that.__zoom,z.mouse[0]=Gd(ne,$),z.mouse[1]),z.extent,o))}function te(ne){U.on("mousemove.zoom mouseup.zoom",null),wNe(ne.view,z.moved),v0(ne),z.event(ne).end()}}function w(M,...G){if(e.apply(this,arguments)){var $=this.__zoom,z=Gd(M.changedTouches?M.changedTouches[0]:M,this),U=$.invert(z),Z=$.k*(M.shiftKey?.5:2),re=r(C(E($,Z),z,U),t.apply(this,G),o);v0(M),l>0?Gc(this).transition().duration(l).call(A,re,z,M):Gc(this).call(S.transform,re,z,M)}}function L(M,...G){if(e.apply(this,arguments)){var $=M.touches,z=$.length,U=T(this,G,M.changedTouches.length===z).event(M),Z,re,X,F;for(UA(M),re=0;re<z;++re)X=$[re],F=Gd(X,this),F=[F,this.__zoom.invert(F),X.identifier],U.touch0?!U.touch1&&U.touch0[2]!==F[2]&&(U.touch1=F,U.taps=0):(U.touch0=F,Z=!0,U.taps=1+!!m);m&&(m=clearTimeout(m)),Z&&(U.taps<2&&(p=F[0],m=setTimeout(function(){m=null},x)),yy(this),U.start())}}function H(M,...G){if(this.__zooming){var $=T(this,G).event(M),z=M.changedTouches,U=z.length,Z,re,X,F;for(v0(M),Z=0;Z<U;++Z)re=z[Z],X=Gd(re,this),$.touch0&&$.touch0[2]===re.identifier?$.touch0[0]=X:$.touch1&&$.touch1[2]===re.identifier&&($.touch1[0]=X);if(re=$.that.__zoom,$.touch1){var te=$.touch0[0],ne=$.touch0[1],se=$.touch1[0],Ne=$.touch1[1],fe=(fe=se[0]-te[0])*fe+(fe=se[1]-te[1])*fe,we=(we=Ne[0]-ne[0])*we+(we=Ne[1]-ne[1])*we;re=E(re,Math.sqrt(fe/we)),X=[(te[0]+se[0])/2,(te[1]+se[1])/2],F=[(ne[0]+Ne[0])/2,(ne[1]+Ne[1])/2]}else if($.touch0)X=$.touch0[0],F=$.touch0[1];else return;$.zoom("touch",r(C(re,X,F),$.extent,o))}}function B(M,...G){if(this.__zooming){var $=T(this,G).event(M),z=M.changedTouches,U=z.length,Z,re;for(UA(M),g&&clearTimeout(g),g=setTimeout(function(){g=null},x),Z=0;Z<U;++Z)re=z[Z],$.touch0&&$.touch0[2]===re.identifier?delete $.touch0:$.touch1&&$.touch1[2]===re.identifier&&delete $.touch1;if($.touch1&&!$.touch0&&($.touch0=$.touch1,delete $.touch1),$.touch0)$.touch0[1]=this.__zoom.invert($.touch0[0]);else if($.end(),$.taps===2&&(re=Gd(re,this),Math.hypot(p[0]-re[0],p[1]-re[1])<v)){var X=Gc(this).on("dblclick.zoom");X&&X.apply(this,arguments)}}}return S.wheelDelta=function(M){return arguments.length?(n=typeof M=="function"?M:Lb(+M),S):n},S.filter=function(M){return arguments.length?(e=typeof M=="function"?M:Lb(!!M),S):e},S.touchable=function(M){return arguments.length?(s=typeof M=="function"?M:Lb(!!M),S):s},S.extent=function(M){return arguments.length?(t=typeof M=="function"?M:Lb([[+M[0][0],+M[0][1]],[+M[1][0],+M[1][1]]]),S):t},S.scaleExtent=function(M){return arguments.length?(i[0]=+M[0],i[1]=+M[1],S):[i[0],i[1]]},S.translateExtent=function(M){return arguments.length?(o[0][0]=+M[0][0],o[1][0]=+M[1][0],o[0][1]=+M[0][1],o[1][1]=+M[1][1],S):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},S.constrain=function(M){return arguments.length?(r=M,S):r},S.duration=function(M){return arguments.length?(l=+M,S):l},S.interpolate=function(M){return arguments.length?(d=M,S):d},S.on=function(){var M=u.on.apply(u,arguments);return M===u?S:M},S.clickDistance=function(M){return arguments.length?(N=(M=+M)*M,S):Math.sqrt(N)},S.tapDistance=function(M){return arguments.length?(v=+M,S):v},S}function N2e(){const e=h.useRef(null),[t,r]=h.useState({width:0,height:0});return h.useEffect(()=>{if(!e.current)return;const n=e.current,s=n.getBoundingClientRect();s.width>0&&s.height>0&&r({width:s.width,height:s.height});const i=new ResizeObserver(o=>{const l=o[0];if(!l)return;const{width:d,height:u}=l.contentRect;r({width:d,height:u})});return i.observe(n),()=>i.disconnect()},[]),{ref:e,width:t.width,height:t.height}}const Ds=e=>`${e.level}:${e.code}`,Xn=e=>String(e??"").trim(),BF=e=>e==="ctprvn"?"REGION":e==="sig"?"SIGUNGU":"EUPMYEONDONG",kc=e=>{if(!e)return null;const t=e.split(":");return t.length>=2?t.slice(1).join(":").trim()||null:Xn(e)||null},$b=50;function BA(e){return Xn(e?.properties?.code??e?.properties?.adm_cd??e?.properties?.ADM_CD??e?.properties?.sggnm_cd??e?.properties?.SGGNM_CD??e?.properties?.sigungu_cd??e?.properties?.SIGUNGU_CD??e?.properties?.emd_cd??e?.properties?.EMD_CD??e?.properties?.CTPRVN_CD??e?.properties?.SIG_CD??e?.properties?.EMD_CD??"")}function GF(e){return String(e?.properties?.name??e?.properties?.CTP_KOR_NM??e?.properties?.SIG_KOR_NM??e?.properties?.EMD_KOR_NM??"-")}function S2e({level:e,features:t,stats:r,onSelect:n,indicatorLabel:s="",unit:i="",year:o,valueFormatter:l,colorPalette:d,getTooltipExtraLines:u}){const{ref:m,width:p,height:g}=N2e(),[x,y]=h.useState(null),[N,v]=h.useState(null),S=h.useRef(null),E=h.useRef(null),C=h.useRef(null),_=h.useRef(null),[A,T]=h.useState(l1),R=12,I=8,k=h.useMemo(()=>new Map(r.map(z=>[z.code,z.value])),[r]),w=h.useMemo(()=>({type:"FeatureCollection",features:t}),[t]),L=h.useMemo(()=>{const z=r.map(X=>X.value),U=z.length?Math.min(...z):0,Z=z.length?Math.max(...z):100,re=U===Z?[U-1,Z+1]:[U,Z];return d&&d.length>0?s3().domain(re).range(d):m3(X=>p2e(.15+.85*X)).domain(re)},[r,d]),H=h.useMemo(()=>p<$b||g<$b||!t.length?null:c2e().reflectY(!0).fitSize([p,g],w),[p,g,w,t.length]),B=h.useMemo(()=>H?a2e(H):null,[H]),M=h.useMemo(()=>B?t.map(z=>{const U=BA(z),Z=GF(z),[re,X]=B.centroid(z);return{code:U,name:Z,x:re,y:X}}):[],[t,B]),G=z=>{C.current&&Gc(C.current).attr("transform",z.toString()),T(z)};h.useEffect(()=>{if(!E.current)return;const z=v2e().scaleExtent([1,5]).on("zoom",Z=>{G(Z.transform)});Gc(E.current).call(z),_.current=z},[p,g]);const $=z=>{const U=BA(z);U&&(e==="ctprvn"?n("sig",U):e==="sig"&&n("emd",U))};return a.jsxs("div",{ref:m,className:"relative w-full h-full",children:[p<$b||g<$b||!B?a.jsx("div",{className:"p-3 text-sm text-gray-500",children:t.length===0?"  .":"    ."}):a.jsxs("svg",{ref:E,width:p,height:g,className:"block",style:{touchAction:"none",cursor:"grab"},onWheel:z=>{z.preventDefault();const U=z.deltaY>0?.9:1.1,Z=Math.max(1,Math.min(5,A.k*U)),re=Gd(z,E.current),X=re[0]-(re[0]-A.x)/A.k*Z,F=re[1]-(re[1]-A.y)/A.k*Z;G(l1.translate(X,F).scale(Z))},children:[a.jsx("rect",{width:p,height:g,fill:"transparent",style:{pointerEvents:"all"}}),a.jsxs("g",{ref:C,transform:`translate(${A.x}, ${A.y}) scale(${A.k})`,children:[t.map(z=>{const U=BA(z),Z=k.get(U)??0,re=L(Z),X=B(z)||void 0,F=N===U;return a.jsx("path",{d:X,fill:re,stroke:F?"#0b1020":"#111827",strokeWidth:F?2.2:.9,fillOpacity:N&&!F?.65:.95,style:{cursor:e==="emd"?"default":"pointer",...F?{filter:"drop-shadow(0 3px 6px rgba(15, 23, 42, 0.35))"}:{}},onMouseMove:te=>{const ne=m.current?.getBoundingClientRect();if(!ne)return;const se=te.clientX-ne.left,Ne=te.clientY-ne.top,fe=S.current?.offsetWidth??240,we=S.current?.offsetHeight??120;let ve=se+R,Oe=Ne+R;ve+fe+I>p&&(ve=se-fe-R),Oe+we+I>g&&(Oe=Ne-we-R),ve<I&&(ve=I),Oe<I&&(Oe=I),y({x:ve,y:Oe,name:GF(z),value:Z,code:U}),v(U)},onMouseLeave:()=>{y(null),v(null)},onClick:()=>$(z)},U)}),M.map(z=>a.jsx("text",{x:z.x,y:z.y,fontSize:e==="ctprvn"?12:10,fill:"#1e3a8a",textAnchor:"middle",pointerEvents:"none",style:{paintOrder:"stroke",stroke:"#fff",strokeWidth:3},children:z.name},`label-${z.code}`))]})]}),x&&a.jsxs("div",{ref:S,className:"pointer-events-none absolute z-[80] max-w-[260px] rounded-lg border border-slate-200 bg-white px-3 py-2 text-xs text-slate-900 shadow-2xl",style:{left:x.x,top:x.y},children:[a.jsx("div",{className:"text-sm font-semibold mb-1",children:x.name}),a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsx("span",{className:"text-[11px] text-slate-500",children:s}),a.jsxs("span",{className:"text-base font-bold",children:[l?l(x.value):x.value,!l&&i?a.jsxs("span",{className:"text-xs ml-1",children:["(",i,")"]}):null]})]}),typeof o=="number"&&a.jsxs("div",{className:"mt-1 text-[11px] text-slate-500",children:[": ",o,""]}),u?.({level:e,code:x.code,name:x.name,value:x.value}).slice(0,3).map((z,U)=>a.jsx("div",{className:"mt-1 text-[11px] text-slate-500",children:z},U))]})]})}const HF=[{id:"total_cases",label:"  ",unit:"",scale:[120,2200]},{id:"completion",label:" ",unit:"%",scale:[60,98]},{id:"referral",label:"SLA ",unit:"%",scale:[85,99]},{id:"consultation_time",label:"SLA ",unit:"%",scale:[1,15]},{id:"wait_time",label:" ",unit:"",scale:[6,40]},{id:"recontact",label:" ",unit:"%",scale:[80,99]},{id:"followup_dropout",label:" ",unit:"%",scale:[1,20]},{id:"high_risk_rate",label:" ",unit:"%",scale:[5,35]},{id:"screening_coverage",label:"1  ",unit:"%",scale:[50,95]},{id:"dropout",label:"  ",unit:"%",scale:[3,25]},{id:"waitlist_pressure",label:"/ ",unit:"",scale:[30,95]},{id:"accessibility_score",label:" ",unit:"",scale:[40,98]},{id:"regional_sla_violation",label:" SLA ",unit:"%",scale:[2,34]},{id:"regional_queue_risk",label:"  ",unit:"",scale:[15,95]},{id:"regional_recontact_rate",label:"  ",unit:"%",scale:[4,38]},{id:"regional_data_readiness",label:"  ",unit:"%",scale:[62,99]},{id:"regional_governance_missing",label:"  ",unit:"%",scale:[1,28]},{id:"regional_ad_transition_hotspot",label:" AD   ",unit:"",scale:[18,92]},{id:"regional_dx_delay_hotspot",label:"   ",unit:"",scale:[9,68]},{id:"regional_screen_to_dx_rate",label:"  ",unit:"%",scale:[34,91]}];function E2e(e){return HF.find(t=>t.id===e)??HF[0]}function co(e,t){return t.unit==="%"?`${e.toFixed(1)}%`:t.unit===""?`${Math.round(e)}`:t.unit===""?`${Math.round(e)}`:t.unit===""?`${Math.round(e)}`:`${Math.round(e)}${t.unit}`}const nz=e=>{let t=0;for(let r=0;r<e.length;r+=1)t=t*31+e.charCodeAt(r)>>>0;return t},j2e=(e,t,r)=>Math.min(r,Math.max(t,e)),w2e=e=>nz(e)%1e4/1e4,Pc=(e,t,r)=>t+w2e(e)*(r-t),az=(e,t,r)=>{if(!r.length)return[];const[n,s]=t.scale,i=s-n,o=r.length,l=Math.max(1,o-1),d=`${e}-${t.id}`,u=Pc(`${d}-base`,n+i*.2,s-i*.2),m=Pc(`${d}-slope`,-i*.045,i*.045),p=Pc(`${d}-amp`,i*.04,i*.14),g=Pc(`${d}-phase`,0,Math.PI*2),x=i*.03,y=Math.round(Pc(`${d}-shock-index`,1,Math.max(1,o-2))),N=Pc(`${d}-shock-sign`,-1,1)>=0?1:-1,v=Pc(`${d}-shock-amp`,i*.06,i*.18)*N,S=Pc(`${d}-shock-rec`,.38,.72);return r.map((E,C)=>{const _=(C-l/2)*m,A=Math.sin(C/l*Math.PI*2+g)*p,T=Math.sin(C/l*Math.PI+g*.35)*p*.35,R=Pc(`${d}-noise-${E}`,-x,x);let I=0;C===y&&(I+=v),C===y-1&&(I+=v*.22),C===y+1&&(I-=v*S),C===y+2&&(I-=v*S*.35);const k=j2e(u+_+A+T+R+I,n,s);return{year:E,value:Number(k.toFixed(1))}})},A2e=e=>Xn(e?.properties?.code??e?.properties?.adm_cd??e?.properties?.ADM_CD??e?.properties?.sggnm_cd??e?.properties?.SGGNM_CD??e?.properties?.sigungu_cd??e?.properties?.SIGUNGU_CD??e?.properties?.emd_cd??e?.properties?.EMD_CD??e?.properties?.CTPRVN_CD??e?.properties?.SIG_CD??e?.properties?.EMD_CD??""),_2e=e=>String(e?.properties?.name??e?.properties?.CTP_KOR_NM??e?.properties?.SIG_KOR_NM??e?.properties?.EMD_KOR_NM??"-"),C2e=(e,t,r)=>{const n=e.map(i=>{const o=A2e(i),l=_2e(i),d=az(o,t,[r-1,r]),u=d[0]?.value??t.scale[0],m=d[1]?.value??u,p=m-u;return{code:o,name:l,value:m,yoy:p,rank:0}});return[...n].sort((i,o)=>o.value-i.value).forEach((i,o)=>{i.rank=o+1}),n},T2e=(e,t,r)=>az(e,t,r),O2e=e=>{const r=40+nz(e)%40,n=100-r;return[{name:"",value:r},{name:"",value:n}]},zd={blue:["#eff6ff","#bfdbfe","#93c5fd","#60a5fa","#3b82f6","#2563eb","#1d4ed8"],red:["#fef2f2","#fecaca","#fca5a5","#f87171","#ef4444","#dc2626","#b91c1c"],green:["#f0fdf4","#bbf7d0","#86efac","#4ade80","#22c55e","#16a34a","#15803d"],teal:["#f0fdfa","#ccfbf1","#99f6e4","#5eead4","#2dd4bf","#14b8a6","#0f766e"],orange:["#fff7ed","#fed7aa","#fdba74","#fb923c","#f97316","#ea580c","#c2410c"],purple:["#faf5ff","#e9d5ff","#d8b4fe","#c084fc","#a855f7","#9333ea","#7e22ce"],heat:["#fef3c7","#fde68a","#fcd34d","#fbbf24","#f59e0b","#d97706","#b45309"],risk:["#ecfdf3","#bbf7d0","#86efac","#fde68a","#fbbf24","#f97316","#dc2626"]};class R2e{values;mode;steps;colors;bins;constructor(t,r="quantile",n=6,s="blue"){this.values=t.filter(i=>i!=null&&!isNaN(i)).sort((i,o)=>i-o),this.mode=r,this.steps=Math.min(n,this.values.length),this.colors=zd[s].slice(0,this.steps),this.bins=this.buildBins()}buildBins(){if(this.values.length===0)return[];const t=[],r=Math.min(...this.values),n=Math.max(...this.values);if(this.mode==="quantile")for(let s=0;s<this.steps;s++){const i=Math.floor(s/this.steps*this.values.length),o=Math.floor((s+1)/this.steps*this.values.length)-1,l=this.values[i],d=this.values[Math.min(o,this.values.length-1)];this.values.filter(u=>u>=l&&(s===this.steps-1?u<=d:u<(t[s-1]?.max??l))).length,t.push({min:l,max:d,color:this.colors[s],count:Math.max(1,Math.floor(this.values.length/this.steps))})}else{const s=(n-r)/this.steps;for(let i=0;i<this.steps;i++){const o=r+s*i,l=i===this.steps-1?n:r+s*(i+1),d=this.values.filter(u=>u>=o&&u<=l).length;t.push({min:Math.round(o),max:Math.round(l),color:this.colors[i],count:d})}}return t}getColor(t){if(t==null||isNaN(t))return"#e5e7eb";for(let r=0;r<this.bins.length;r++){const n=this.bins[r];if(t>=n.min&&(r===this.bins.length-1?t<=n.max:t<this.bins[r+1]?.min))return n.color}return t<this.bins[0]?.min?this.colors[0]:this.colors[this.colors.length-1]}getLegendBins(){return this.bins}getStats(){if(this.values.length===0)return{min:0,max:0,avg:0,median:0,total:0};const t=this.values.reduce((n,s)=>n+s,0),r=Math.floor(this.values.length/2);return{min:Math.min(...this.values),max:Math.max(...this.values),avg:Math.round(t/this.values.length),median:this.values.length%2?this.values[r]:Math.round((this.values[r-1]+this.values[r])/2),total:t}}}function Fb(e,t){if(e==null||isNaN(e))return"-";const r=e>=1e4?`${(e/1e4).toFixed(1)}`:e>=1e3?`${(e/1e3).toFixed(1)}`:e.toLocaleString();return t?`${r}${t}`:r}const k2e={blue:" (Blue)",green:" (Green)",teal:" (Teal)",purple:" (Purple)",orange:" (Orange)",red:" (Red)",heat:" (Heat)",risk:" ()"},KF=e=>zd[e],GA={ctprvn:"https://raw.githubusercontent.com/southkorea/southkorea-maps/master/kostat/2018/json/skorea-provinces-2018-geo.json",sig:"https://raw.githubusercontent.com/southkorea/southkorea-maps/master/kostat/2018/json/skorea-municipalities-2018-geo.json",emd:"https://raw.githubusercontent.com/southkorea/southkorea-maps/master/kostat/2018/json/skorea-submunicipalities-2018-geo.json"},zF={ctprvn:"",sig:"//",emd:"//"};function Ii(e){return Xn(e?.properties?.code??e?.properties?.adm_cd??e?.properties?.ADM_CD??e?.properties?.sggnm_cd??e?.properties?.SGGNM_CD??e?.properties?.sigungu_cd??e?.properties?.SIGUNGU_CD??e?.properties?.emd_cd??e?.properties?.EMD_CD??e?.properties?.CTPRVN_CD??e?.properties?.SIG_CD??e?.properties?.EMD_CD??"")}function Fo(e){return String(e?.properties?.name??e?.properties?.CTP_KOR_NM??e?.properties?.SIG_KOR_NM??e?.properties?.EMD_KOR_NM??"-")}function HA(e,t){return e.map(r=>{const n=Ii(r),s=Fo(r),i={level:t,code:n};return{...r,id:Ds(i),properties:{...r.properties,code:n,name:s,level:t,regionId:Ds(i)}}})}function KA(e,t=[]){return t.length?e.filter(r=>{const n=Ii(r);return t.some(s=>n.startsWith(s))}):e}function G3({title:e,indicatorId:t,year:r=2026,scope:n={mode:"national"},fixedLevel:s,lockedSigCode:i,lockedSigName:o,hideBreadcrumb:l=!1,hintText:d,variant:u="default",mapHeight:m=420,className:p,externalLevel:g,externalSelectedCode:x,onRegionSelect:y,onGoBack:N,externalColorScheme:v,hideLegendPanel:S=!1,onSubRegionsChange:E,getTooltipExtraLines:C}){const _=E2e(t),A=JSON.stringify(n),T=n.mode==="regional",R=u==="portal",[I,k]=h.useState(null),[w,L]=h.useState(null),[H,B]=h.useState(null),[M,G]=h.useState(!0),[$,z]=h.useState(null),U=h.useMemo(()=>{const Ue=n.ctprvnCodes?.[0];if(!I||Ue&&I.some(nt=>Ii(nt)===Ue)||!n.label)return Ue;const Se=I.find(nt=>{const Re=Fo(nt);return Re===n.label||Re.includes(n.label)||n.label.includes(Re)});return Se?Ii(Se):Ue},[I,n.ctprvnCodes,n.label]),Z=U?[U]:n.ctprvnCodes,re=Z?.[0],X=T&&Z?.length===1?"sig":"ctprvn",[F,te]=h.useState(X),[ne,se]=h.useState({ctprvn:re}),[Ne,fe]=h.useState({}),[we,ve]=h.useState("blue"),[Oe,Fe]=h.useState(!0),[oe,le]=h.useState(!0),[ge,_e]=h.useState(!1),ee=h.useRef(""),q=v??we;h.useEffect(()=>{let Ue=!0;return(async()=>{G(!0),z(null);try{const[nt,Re,Et]=await Promise.all([fetch(GA.ctprvn),fetch(GA.sig),fetch(GA.emd)]),[nr,Lt,Vr]=await Promise.all([nt.json(),Re.json(),Et.json()]);if(!Ue)return;k(HA(nr?.features??[],"REGION")),L(HA(Lt?.features??[],"SIGUNGU")),B(HA(Vr?.features??[],"EUPMYEONDONG"))}catch{if(!Ue)return;z("    .")}finally{Ue&&G(!1)}})(),()=>{Ue=!1}},[]),h.useEffect(()=>{te(s??X),se({ctprvn:Z?.[0]}),fe(n.label?{ctprvn:n.label}:{})},[A,n.label,X,Z?.[0],s]),h.useEffect(()=>{s&&F!==s&&te(s)},[s,F]),h.useEffect(()=>{i&&(se(Ue=>({...Ue,sig:i})),o&&fe(Ue=>({...Ue,sig:o})))},[i,o]),h.useEffect(()=>{if(T&&Z?.length){const Ue=Z[0];ne.ctprvn!==Ue&&se({ctprvn:Ue})}},[T,ne.ctprvn,Z]),h.useEffect(()=>{T&&n.label&&!Ne.ctprvn&&fe(Ue=>({...Ue,ctprvn:n.label}))},[T,n.label,Ne.ctprvn]),h.useEffect(()=>{T&&Z?.length&&F==="ctprvn"&&te("sig")},[T,Z,F]),h.useEffect(()=>{if(g){if(g==="ctprvn"){te("ctprvn"),se({}),fe({});return}if(g==="sig"&&x){const Ue=x.slice(0,2),Se=x.length>2?x.slice(0,5):void 0;te("sig"),se({ctprvn:Ue,...Se?{sig:Se}:{}});const nt=I?.find(Et=>Ii(Et).startsWith(Ue)),Re=Se?w?.find(Et=>Ii(Et)===Se):void 0;nt&&fe({ctprvn:Fo(nt),...Re?{sig:Fo(Re)}:{}});return}if(g==="emd"&&x){const Ue=x.slice(0,2),Se=x.slice(0,5),nt=x.length>5?x:void 0;te("emd"),se({ctprvn:Ue,sig:Se,...nt?{emd:nt}:{}});const Re=I?.find(Lt=>Ii(Lt).startsWith(Ue)),Et=w?.find(Lt=>Ii(Lt)===Se),nr=nt?H?.find(Lt=>Ii(Lt)===nt):void 0;fe({ctprvn:Re?Fo(Re):void 0,sig:Et?Fo(Et):void 0,...nr?{emd:Fo(nr)}:{}});return}}},[g,x,I,w,H]);const ye=h.useMemo(()=>I?KA(I,Z):[],[I,Z]),pe=h.useMemo(()=>{if(!w)return[];const Ue=T?Z?.[0]:ne.ctprvn;return Ue?KA(w,[Ue]):[]},[w,ne.ctprvn,Z,T]),he=h.useMemo(()=>{const Ue=i??ne.sig;return!H||!Ue?[]:KA(H,[Ue])},[H,ne.sig,i]);h.useEffect(()=>{if(F!=="sig"||ne.sig||!pe.length)return;const Ue=pe[0],Se=Ii(Ue);Se&&(se(nt=>({ctprvn:nt.ctprvn,sig:Se})),fe(nt=>({ctprvn:nt.ctprvn,sig:Fo(Ue)})))},[F,pe,ne.sig]),h.useEffect(()=>{if(F!=="emd"||ne.emd||!he.length)return;const Ue=he[0],Se=Ii(Ue);Se&&(se(nt=>({...nt,emd:Se})),fe(nt=>({...nt,emd:Fo(Ue)})))},[F,he,ne.emd]);const rt=h.useMemo(()=>F==="ctprvn"?ye:F==="sig"?pe:he,[F,ye,pe,he]);h.useEffect(()=>{if(!E||!rt.length)return;const Ue=BF(F),Se=new Set,nt=rt.map(Et=>{const nr=Ii(Et),Lt=Fo(Et);return{code:nr,name:Lt,regionKey:{level:Ue,code:nr,name:Lt},regionId:Ds({level:Ue,code:nr})}}).filter(Et=>!Et.code||Se.has(Et.code)?!1:(Se.add(Et.code),!0));if(!nt.length)return;const Re=`${Ue}|${nt.slice().sort((Et,nr)=>Et.code.localeCompare(nr.code,"ko-KR")).map(Et=>`${Et.code}:${Et.name}`).join("|")}`;ee.current!==Re&&(ee.current=Re,E(nt))},[rt,F,E]);const Me=h.useMemo(()=>rt.length?C2e(rt,_,r):[],[rt,_,r]),dt=h.useMemo(()=>Me.map(Ue=>({code:Ue.code,value:Ue.value})),[Me]),St=(Ue,Se)=>{const nt=rt.find(Lt=>Ii(Lt)===Se),Re=nt?Fo(nt):Se,Et={level:BF(F),code:Se,name:Re},nr=Ds(Et);if(s){s==="ctprvn"?(se({ctprvn:Se}),fe({ctprvn:Re}),y?.({level:"sig",code:Se,name:Re,regionKey:Et,regionId:nr})):s==="sig"?(se(Lt=>({ctprvn:Lt.ctprvn,sig:Se})),fe(Lt=>({ctprvn:Lt.ctprvn,sig:Re})),y?.({level:"emd",code:Se,name:Re,regionKey:Et,regionId:nr})):(se(Lt=>({...Lt,emd:Se})),fe(Lt=>({...Lt,emd:Re})),y?.({level:"emd",code:Se,name:Re,regionKey:Et,regionId:nr}));return}if(g){F==="ctprvn"?(se({ctprvn:Se}),fe({ctprvn:Re})):F==="sig"?(se(Lt=>({ctprvn:Lt.ctprvn,sig:Se})),fe(Lt=>({ctprvn:Lt.ctprvn,sig:Re}))):(se(Lt=>({...Lt,emd:Se})),fe(Lt=>({...Lt,emd:Re}))),y?.({level:Ue,code:Se,name:Re,regionKey:Et,regionId:nr});return}if(F==="ctprvn"){se({ctprvn:Se}),fe({ctprvn:Re}),te(Ue),y?.({level:Ue,code:Se,name:Re,regionKey:Et,regionId:nr});return}if(F==="sig"){se(Lt=>({ctprvn:Lt.ctprvn,sig:Se})),fe(Lt=>({ctprvn:Lt.ctprvn,sig:Re})),te(Ue),y?.({level:Ue,code:Se,name:Re,regionKey:Et,regionId:nr});return}F==="emd"&&(se(Lt=>({...Lt,emd:Se})),fe(Lt=>({...Lt,emd:Re})),y?.({level:"emd",code:Se,name:Re,regionKey:Et,regionId:nr}))},He=()=>{s||T||(te("ctprvn"),se({}),fe({}),N?.())},Ye=()=>{if(!s&&!(T&&F==="sig")){if(F==="emd"){te("sig"),se(Ue=>({ctprvn:Ue.ctprvn,sig:Ue.sig})),fe(Ue=>({ctprvn:Ue.ctprvn,sig:Ue.sig})),N?.();return}F==="sig"&&(te("ctprvn"),se({ctprvn:ne.ctprvn}),fe({ctprvn:Ne.ctprvn}),N?.())}},Mt=[{label:"",disabled:T,onClick:He},...Ne.ctprvn?[{label:Ne.ctprvn,disabled:F==="ctprvn",onClick:()=>te("sig")}]:[],...Ne.sig?[{label:Ne.sig,disabled:F==="sig",onClick:()=>te("sig")}]:[],...Ne.emd?[{label:Ne.emd,disabled:!0}]:[]],Xt=h.useMemo(()=>[...Me].sort((Ue,Se)=>Se.value-Ue.value),[Me]),hr=Me.length?Me.reduce((Ue,Se)=>Ue+Se.value,0)/Me.length:null,Gt=Xt[0]??null,sr=Xt.length?Xt[Xt.length-1]:null,xr=Xt.slice(0,5),mr=[...Xt].reverse().slice(0,5),br=Xt.length?Xt[Math.floor(Xt.length/2)]?.value:null,kr=F==="ctprvn"?ne.ctprvn:F==="sig"?ne.sig:ne.emd,wt=(kr?Me.find(Ue=>Ue.code===kr):null)??Xt[0]??null,Ge=wt?.name??" ",Qt=wt?.rank??0,Pr=Me.length,_r=Pr>1&&Qt?Math.round((1-(Qt-1)/(Pr-1))*100):Pr===1?100:0,rr=h.useMemo(()=>Array.from({length:7}).map((Ue,Se)=>r-6+Se),[r]),je=h.useMemo(()=>wt?T2e(wt.code,_,rr):[],[wt,_,rr]),Ve=h.useMemo(()=>{if(je.length<2)return"";const Ue=je.map(nr=>nr.value),Se=Math.min(...Ue),nt=Math.max(...Ue),Re=220,Et=70;return je.map((nr,Lt)=>{const Vr=Lt/(je.length-1)*Re,Cn=nt===Se?.5:(nr.value-Se)/(nt-Se),xt=Et-Cn*(Et-10)-5;return`${Vr},${xt}`}).join(" ")},[je]),yt=h.useMemo(()=>wt?O2e(wt.code):[],[wt]),ir=h.useMemo(()=>{if(!Me.length)return[];const Ue=new Array(12).fill(0),Se=Me.map(nr=>nr.value),nt=Math.min(...Se),Re=Math.max(...Se);Me.forEach(nr=>{const Lt=Re===nt?.5:(nr.value-nt)/(Re-nt),Vr=Math.min(Ue.length-1,Math.floor(Lt*Ue.length));Ue[Vr]+=1});const Et=Math.max(...Ue,1);return Ue.map(nr=>nr/Et)},[Me]),Cr=h.useMemo(()=>{const Ue=Me.map(Se=>Se.value);return Ue.length===0?null:new R2e(Ue,"quantile",7,q)},[Me,q]),nn=h.useMemo(()=>KF(q),[q]),wr=h.useMemo(()=>Cr?.getLegendBins()??[],[Cr]),ze=h.useMemo(()=>Cr?.getStats()??{min:0,max:0,avg:0,total:0},[Cr]),dn=Ue=>{const Se=Ue>=0?"+":"";return _.unit==="%"?`${Se}${Ue.toFixed(1)}%p`:`${Se}${co(Math.abs(Ue),_)}`},ur=h.useMemo(()=>!wt||!C?[]:C({level:F,code:wt.code,name:wt.name,value:wt.value}),[wt,C,F]);return a.jsxs("div",{className:`${R?"border border-gray-200":"border-2 border-gray-300"} bg-white ${p||""}`,children:[a.jsx("div",{className:`${R?"border-b border-gray-200":"border-b-2 border-gray-300"} px-4 py-3`,children:a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-sm font-semibold text-gray-900",children:e}),a.jsxs("p",{className:"text-xs text-gray-500",children:[_.label,"  ",zF[F]]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[T&&n.label&&a.jsxs("span",{className:"rounded-full bg-blue-50 px-2 py-1 text-blue-700",children:[n.label," "]}),a.jsxs("span",{className:"rounded-full bg-gray-100 px-2 py-1",children:[" ",r]})]})]})}),!l&&a.jsx("div",{className:"px-4 py-3",children:a.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs text-gray-500",children:[Mt.map((Ue,Se)=>a.jsxs(Y.Fragment,{children:[a.jsx("button",{type:"button",disabled:Ue.disabled,onClick:Ue.onClick,className:`font-medium ${Ue.disabled?"text-gray-400":"text-blue-600 hover:underline"}`,children:Ue.label}),Se<Mt.length-1&&a.jsx("span",{children:"/"})]},`${Ue.label}-${Se}`)),F!=="ctprvn"&&!(T&&F==="sig")&&a.jsx("button",{type:"button",onClick:Ye,className:"ml-2 rounded-full border border-gray-200 px-2 py-0.5 text-gray-600",children:""})]})}),a.jsxs("div",{className:"px-4 pb-8",children:[!R&&Me.length>0&&a.jsxs("div",{className:"mb-4 grid grid-cols-2 lg:grid-cols-4 gap-3 text-xs",children:[a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-3",children:[a.jsx("div",{className:"text-gray-500",children:" "}),a.jsx("div",{className:"text-base font-semibold text-gray-900",children:hr!==null?co(hr,_):"-"})]}),a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-3",children:[a.jsx("div",{className:"text-gray-500",children:" "}),a.jsx("div",{className:"text-sm font-semibold text-gray-900",children:Gt?.name??"-"}),a.jsx("div",{className:"text-xs text-gray-500",children:Gt?co(Gt.value,_):"-"})]}),a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-3",children:[a.jsx("div",{className:"text-gray-500",children:" "}),a.jsx("div",{className:"text-sm font-semibold text-gray-900",children:sr?.name??"-"}),a.jsx("div",{className:"text-xs text-gray-500",children:sr?co(sr.value,_):"-"})]}),a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-3",children:[a.jsx("div",{className:"text-gray-500",children:" "}),a.jsx("div",{className:"text-sm font-semibold text-gray-900",children:Ge}),a.jsx("div",{className:"text-xs text-gray-500",children:wt?co(wt.value,_):"-"}),ur.length>0&&a.jsx("div",{className:"mt-2 space-y-1",children:ur.slice(0,3).map((Ue,Se)=>a.jsx("div",{className:"text-[11px] text-gray-500",children:Ue},Se))})]})]}),(()=>{const Ue=a.jsxs("div",{children:[a.jsxs("div",{className:`${R?"rounded-sm":"rounded-lg"} border border-gray-200 bg-gray-50`,style:{height:m,minHeight:m},children:[M&&a.jsx("div",{className:"flex h-full items-center justify-center text-sm text-gray-500",children:"  ..."}),$&&a.jsx("div",{className:"flex h-full items-center justify-center text-sm text-red-600",children:$}),!M&&!$&&a.jsx(S2e,{level:F,features:rt,stats:dt,onSelect:St,indicatorLabel:_.label,unit:_.unit,year:r,valueFormatter:Se=>co(Se,_),colorPalette:nn,getTooltipExtraLines:C})]}),!S&&a.jsx(a.Fragment,{children:a.jsx("div",{className:"mt-3 relative rounded-xl border border-gray-200 bg-white/95 px-4 py-3",children:a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[Oe&&a.jsxs("div",{className:"flex-1",children:[a.jsxs("button",{onClick:()=>le(!oe),className:"flex items-center gap-1.5 text-xs text-gray-700 hover:text-gray-900 mb-1.5 font-semibold",children:[oe?a.jsx(Ss,{className:"h-4 w-4"}):a.jsx(Zc,{className:"h-4 w-4"}),a.jsxs("span",{children:[_.label,"  ()"]})]}),!oe&&a.jsxs("div",{className:"space-y-1.5 pl-4 border-l-2 border-gray-200",children:[wr.length>0?wr.map((Se,nt)=>a.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[a.jsx("div",{className:"w-5 h-3.5 rounded-sm border border-gray-300",style:{backgroundColor:Se.color}}),a.jsxs("span",{className:"text-gray-700",children:[Fb(Se.min)," ~ ",Fb(Se.max)]}),Se.count!==void 0&&a.jsxs("span",{className:"text-gray-400",children:["(",Se.count,")"]})]},nt)):nn.slice(0,7).map((Se,nt)=>{const Re=Me.map(ta=>ta.value),Et=Math.min(...Re,_.scale[0]),nr=Math.max(...Re,_.scale[1]),Vr=(nr-Et)/7,Cn=Et+nt*Vr,xt=nt===6?nr:Et+(nt+1)*Vr;return a.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[a.jsx("div",{className:"w-5 h-3.5 rounded-sm border border-gray-300",style:{backgroundColor:Se}}),a.jsxs("span",{className:"text-gray-700",children:[co(Cn,_)," ~ ",co(xt,_)]})]},nt)}),ze.total>0&&a.jsxs("div",{className:"mt-1.5 pt-1.5 border-t border-gray-200 text-[11px] text-gray-500",children:[a.jsxs("span",{children:[" : ",a.jsx("strong",{children:ze.total.toLocaleString()})]}),a.jsxs("span",{className:"ml-3",children:[": ",a.jsx("strong",{children:ze.avg.toLocaleString()})]})]})]}),oe&&a.jsxs("div",{className:"flex items-center gap-1 pl-4",children:[nn.slice(0,7).map((Se,nt)=>a.jsx("div",{className:"w-5 h-3 rounded-sm",style:{backgroundColor:Se}},nt)),a.jsxs("span",{className:"ml-3 text-xs text-gray-600",children:[Fb(ze.min)," ~ ",Fb(ze.max)]})]})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>_e(!ge),className:"flex items-center gap-1.5 h-9 px-3 text-xs text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors font-medium shadow-sm",children:[a.jsx(bU,{className:"h-4 w-4"}),a.jsx("span",{children:" "}),a.jsx(Ss,{className:`h-4 w-4 transition-transform ${ge?"rotate-180":""}`})]}),ge&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>_e(!1)}),a.jsxs("div",{className:"absolute right-0 top-full mt-1 w-56 bg-white border border-gray-200 rounded-xl shadow-lg z-50 p-3",children:[a.jsxs("div",{className:"mb-3",children:[a.jsxs("label",{className:"text-xs font-semibold text-gray-700 mb-1.5 block",children:[a.jsx(oZ,{className:"h-3.5 w-3.5 inline mr-1"})," "]}),a.jsx("select",{value:we,onChange:Se=>ve(Se.target.value),className:"w-full px-2.5 py-1.5 text-xs border border-gray-300 rounded-lg bg-white focus:outline-none focus:ring-1 focus:ring-blue-500",children:Object.entries(k2e).map(([Se,nt])=>a.jsx("option",{value:Se,children:nt},Se))}),a.jsx("div",{className:"flex gap-1 mt-1.5",children:KF(we).slice(0,7).map((Se,nt)=>a.jsx("div",{className:"flex-1 h-3 rounded-sm",style:{backgroundColor:Se}},nt))})]}),a.jsx("div",{className:"border-t border-gray-200 pt-2",children:a.jsxs("button",{onClick:()=>Fe(!Oe),className:"flex items-center gap-2 w-full px-2.5 py-1.5 text-xs text-gray-700 hover:bg-gray-100 rounded-lg transition-colors font-medium",children:[Oe?a.jsx(pm,{className:"h-4 w-4"}):a.jsx(lC,{className:"h-4 w-4"}),a.jsx("span",{children:Oe?" ":" "})]})}),a.jsx("div",{className:"border-t border-gray-200 pt-2 mt-2 text-[11px] text-gray-400",children:d??"     "})]})]})]})]})})})]});return R?Ue:a.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-[minmax(0,1.6fr)_minmax(0,1fr)] gap-4",children:[Ue,Me.length>0&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-4",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-500",children:" "}),a.jsx("div",{className:"text-base font-semibold text-gray-900",children:Ge})]}),a.jsx("span",{className:"rounded-full bg-slate-100 px-2 py-1 text-xs text-gray-600",children:zF[F]})]}),a.jsxs("div",{className:"mt-3 grid grid-cols-3 gap-3 text-sm",children:[a.jsxs("div",{className:"rounded-md bg-slate-50 p-2",children:[a.jsx("div",{className:"text-xs text-gray-500",children:""}),a.jsx("div",{className:"font-semibold text-gray-900",children:wt?co(wt.value,_):"-"})]}),a.jsxs("div",{className:"rounded-md bg-slate-50 p-2",children:[a.jsx("div",{className:"text-xs text-gray-500",children:" "}),a.jsx("div",{className:`font-semibold ${wt&&wt.yoy>=0?"text-emerald-600":"text-red-600"}`,children:wt?dn(wt.yoy):"-"})]}),a.jsxs("div",{className:"rounded-md bg-slate-50 p-2",children:[a.jsx("div",{className:"text-xs text-gray-500",children:""}),a.jsx("div",{className:"font-semibold text-gray-900",children:Qt?`${Qt} / ${Pr}`:"-"})]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("div",{className:"text-xs text-gray-500 mb-2",children:" 7 "}),a.jsx("svg",{width:"220",height:"70",className:"block",children:a.jsx("polyline",{points:Ve,fill:"none",stroke:"#2563eb",strokeWidth:"2"})}),a.jsxs("div",{className:"mt-1 text-[11px] text-gray-500",children:[" ",_r,"% "]})]}),a.jsxs("div",{className:"mt-4 space-y-2",children:[a.jsx("div",{className:"text-xs text-gray-500",children:" "}),yt.map(Se=>a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[a.jsx("span",{children:Se.name}),a.jsxs("span",{children:[Se.value,"%"]})]}),a.jsx("div",{className:"h-2 rounded-full bg-gray-100",children:a.jsx("div",{className:"h-2 rounded-full bg-blue-500",style:{width:`${Se.value}%`}})})]},Se.name))]})]}),a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-4",children:[a.jsx("div",{className:"text-sm font-semibold text-gray-900 mb-3",children:" "}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-500 mb-2",children:" 5"}),a.jsx("div",{className:"space-y-2",children:xr.map((Se,nt)=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"text-gray-700",children:[nt+1,". ",Se.name]}),a.jsx("span",{className:"font-semibold text-gray-900",children:co(Se.value,_)})]},Se.code))})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-500 mb-2",children:" 5"}),a.jsx("div",{className:"space-y-2",children:mr.map((Se,nt)=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"text-gray-700",children:[Pr-mr.length+nt+1,". ",Se.name]}),a.jsx("span",{className:"font-semibold text-gray-900",children:co(Se.value,_)})]},Se.code))})]})]})]}),a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-4",children:[a.jsx("div",{className:"text-sm font-semibold text-gray-900 mb-3",children:" "}),a.jsx("div",{className:"flex items-end gap-1 h-20",children:ir.map((Se,nt)=>a.jsx("div",{className:"w-2 rounded-sm bg-blue-200",style:{height:`${Math.round(Se*100)}%`}},`bucket-${nt}`))}),a.jsxs("div",{className:"mt-3 text-xs text-gray-500",children:[" ",Pr,"    ",br?co(br,_):"-"]}),a.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["   ",_r,"% "]})]})]})]})})()]})]})}const Qc=[{id:"seoul",name:"",label:"",ctprvnCode:"11"},{id:"busan",name:"",label:"",ctprvnCode:"21"},{id:"daegu",name:"",label:"",ctprvnCode:"22"},{id:"incheon",name:"",label:"",ctprvnCode:"23"},{id:"gwangju",name:"",label:"",ctprvnCode:"24"},{id:"daejeon",name:"",label:"",ctprvnCode:"25"},{id:"ulsan",name:"",label:"",ctprvnCode:"26"},{id:"sejong",name:"",label:"",ctprvnCode:"29"},{id:"gyeonggi",name:"",label:"",ctprvnCode:"31"},{id:"gangwon",name:"",label:"",ctprvnCode:"32"},{id:"chungbuk",name:"",label:"",ctprvnCode:"33"},{id:"chungnam",name:"",label:"",ctprvnCode:"34"},{id:"jeonbuk",name:"",label:"",ctprvnCode:"35"},{id:"jeonnam",name:"",label:"",ctprvnCode:"36"},{id:"gyeongbuk",name:"",label:"",ctprvnCode:"37"},{id:"gyeongnam",name:"",label:"",ctprvnCode:"38"},{id:"jeju",name:"",label:"",ctprvnCode:"39"}];function P2e(e){return e?Qc.find(r=>e.includes(r.name)||e.includes(r.label))??Qc[0]:Qc[0]}const vy=["","SLA "," ","MCI "," "," ","High MCI"],lO=[{level:"L0",label:"( )",tone:"text-gray-700 bg-gray-100 border-gray-200",purpose:"    ",whenToUse:"      ",actions:["    ","  ","/   "]},{level:"L1",label:"(/)",tone:"text-blue-700 bg-blue-50 border-blue-200",purpose:"    ",whenToUse:"     ",actions:["    ","  / "," (:  7) "]},{level:"L2",label:"(  )",tone:"text-orange-700 bg-orange-50 border-orange-200",purpose:"       ",whenToUse:"SLA ,  ,    ",actions:["      ","     ","2    "]},{level:"L3",label:" (2  )",tone:"text-purple-700 bg-purple-50 border-purple-200",purpose:"Stage 1     ",whenToUse:"   SLA/   ",actions:["2   ","/ ","       "]}],H3=[{id:"CASE-2026-001",stage:"Stage 1",risk:"",path:"  ",status:"",manager:"",action:"1  ",updated:"2026-02-11 09:30",quality:"",profile:{name:"",age:78,phone:"010-2481-9320",guardianPhone:"010-8821-1209"},alertTags:["SLA "," "]},{id:"CASE-2026-002",stage:"Stage 2",risk:"",path:" ",status:"",manager:"",action:" ",updated:"2026-02-11 10:15",quality:"",profile:{name:"",age:73,phone:"010-3841-5520"},alertTags:[" "]},{id:"CASE-2026-003",stage:"Stage 3",risk:"",path:" ",status:"",manager:"",action:"  ",updated:"2026-02-10 16:45",quality:"",profile:{name:"",age:81,phone:"010-5510-2840"},alertTags:[" "," "]},{id:"CASE-2026-004",stage:"Stage 1",risk:"",path:"  ",status:"",manager:"",action:"",updated:"2026-02-11 11:00",quality:"",profile:{name:"",age:66,phone:"010-7652-9213",guardianPhone:"010-4312-5591"},alertTags:[]},{id:"CASE-2026-005",stage:"Stage 2",risk:"",path:"High MCI ",status:"",manager:"",action:" ",updated:"2026-02-11 11:20",quality:"",profile:{name:"",age:75,phone:"010-4288-7712"},alertTags:["SLA ","High MCI","MCI "]},{id:"CASE-2026-006",stage:"Stage 1",risk:"",path:"  ",status:"",manager:"",action:"  ",updated:"2026-02-11 11:45",quality:"",profile:{name:"",age:69,phone:"010-6721-2098"},alertTags:[]},{id:"CASE-2026-007",stage:"Stage 3",risk:"",path:" ",status:"",manager:"",action:" ",updated:"2026-02-09 14:00",quality:"",profile:{name:"",age:84,phone:"010-9191-2504"},alertTags:["SLA "," "]},{id:"CASE-2026-008",stage:"Stage 2",risk:"",path:"MCI ",status:"",manager:"",action:"MCI  ",updated:"2026-02-10 09:50",quality:"",profile:{name:"",age:72,phone:"010-2351-9801"},alertTags:["MCI "," "]},{id:"CASE-2026-009",stage:"Stage 3",risk:"",path:"3  ",status:"",manager:"",action:"3  ",updated:"2026-02-11 08:35",quality:"",profile:{name:"",age:79,phone:"010-4089-1302"},alertTags:["SLA "," "]},{id:"CASE-2026-010",stage:"Stage 1",risk:"",path:" ",status:"",manager:"",action:" ",updated:"2026-02-10 13:20",quality:"",profile:{name:"",age:64,phone:"010-7413-8267",guardianPhone:"010-3755-6401"},alertTags:[" "]},{id:"CASE-2026-011",stage:"Stage 1",risk:"",path:"  ",status:"",manager:"",action:"  ",updated:"2026-02-11 12:05",quality:"",profile:{name:"",age:83,phone:"010-6671-2104",guardianPhone:"010-7201-5543"},alertTags:["SLA "]},{id:"CASE-2026-012",stage:"Stage 2",risk:"",path:"  ",status:"",manager:"",action:" ",updated:"2026-02-08 10:10",quality:"",profile:{name:"",age:71,phone:"010-5870-3370"},alertTags:[]},{id:"CASE-2026-013",stage:"Stage 3",risk:"",path:" ",status:"",manager:"",action:" ",updated:"2026-02-07 17:40",quality:"",profile:{name:"",age:68,phone:"010-8901-0061"},alertTags:[]},{id:"CASE-2026-014",stage:"Stage 2",risk:"",path:"  ",status:"",manager:"",action:" ",updated:"2026-02-11 07:55",quality:"",profile:{name:"",age:70,phone:"010-3520-9912"},alertTags:[" "]},{id:"CASE-2026-015",stage:"Stage 1",risk:"",path:" ",status:"",manager:"",action:" ",updated:"2026-02-09 11:25",quality:"",profile:{name:"",age:76,phone:"010-1002-4451",guardianPhone:"010-9001-1112"},alertTags:[" ","SLA "]},{id:"CASE-2026-175",stage:"Stage 1",risk:"",path:"  ",status:"",manager:"",action:"Stage1  ",updated:"2026-02-19 09:00",quality:"",profile:{name:"",age:67,phone:"010-****-1234"},alertTags:["SLA "]},{id:"CASE-2026-275",stage:"Stage 2",risk:"",path:"High MCI ",status:"",manager:"",action:"Stage2   ",updated:"2026-02-19 10:20",quality:"",profile:{name:"",age:67,phone:"010-****-1234"},alertTags:["High MCI"," "]},{id:"CASE-2026-375",stage:"Stage 3",risk:"",path:" ",status:"",manager:"",action:"Stage3  ",updated:"2026-02-19 11:10",quality:"",profile:{name:"",age:67,phone:"010-****-1234"},alertTags:[" "]},{id:"CASE-2026-016",stage:"Stage 2",risk:"",path:"  ",status:"",manager:"",action:" ",updated:"2026-02-09 08:10",quality:"",profile:{name:"",age:82,phone:"010-4721-2004"},alertTags:["High MCI","SLA "," "]},{id:"CASE-2026-017",stage:"Stage 3",risk:"",path:" ",status:"",manager:"",action:" ",updated:"2026-02-06 15:25",quality:"",profile:{name:"",age:74,phone:"010-7790-6631"},alertTags:[]},{id:"CASE-2026-018",stage:"Stage 1",risk:"",path:" ",status:"",manager:"",action:" ",updated:"2026-02-10 15:50",quality:"",profile:{name:"",age:63,phone:"010-8101-3321",guardianPhone:"010-7750-4012"},alertTags:[]},{id:"CASE-2026-019",stage:"Stage 2",risk:"",path:"  ",status:"",manager:"",action:"  ",updated:"2026-02-11 06:50",quality:"",profile:{name:"",age:77,phone:"010-3124-8823"},alertTags:["SLA "," "]},{id:"CASE-2026-020",stage:"Stage 3",risk:"",path:" ",status:"",manager:"",action:"  ",updated:"2026-02-08 17:05",quality:"",profile:{name:"",age:80,phone:"010-8823-2240"},alertTags:[" "," "]},{id:"CASE-2026-021",stage:"Stage 1",risk:"",path:"MCI  ",status:"",manager:"",action:" ",updated:"2026-02-10 08:45",quality:"",profile:{name:"",age:85,phone:"010-6012-5566",guardianPhone:"010-2201-8890"},alertTags:["MCI "," "]},{id:"CASE-2026-022",stage:"Stage 2",risk:"",path:" ",status:"",manager:"",action:" ",updated:"2026-02-07 13:15",quality:"",profile:{name:"",age:67,phone:"010-4781-0190"},alertTags:[]},{id:"CASE-2026-023",stage:"Stage 3",risk:"",path:"  ",status:"",manager:"",action:" ",updated:"2026-02-09 19:20",quality:"",profile:{name:"",age:72,phone:"010-2441-5567"},alertTags:[" "]},{id:"CASE-2026-024",stage:"Stage 1",risk:"",path:"  ",status:"",manager:"",action:" ",updated:"2026-02-05 16:20",quality:"",profile:{name:"",age:62,phone:"010-7140-0013"},alertTags:[]}],D2e={"1 ":"Stage 1","1":"Stage 1","Stage 1":"Stage 1","2 ":"Stage 2","2 ":"Stage 2","2":"Stage 2","Stage 2":"Stage 2",MCI:"Stage 2","High MCI":"Stage 2","3 ":"Stage 3","3":"Stage 3","3 ":"Stage 3","Stage 3":"Stage 3"};function I2e(e){if(!e)return{alertFilter:"",stageFilter:"all"};const t=e.trim();if(vy.includes(t))return{alertFilter:t,stageFilter:"all"};const r=D2e[t];return r?{alertFilter:"",stageFilter:r}:{alertFilter:"",stageFilter:"all"}}function qF(e,t){return t===""?!0:e.alertTags.includes(t)}function wN(e){return H3.find(t=>t.id===e)}function sz(e){return!e||e.stage!=="Stage 1"?{label:"",tone:"text-blue-700 bg-blue-50 border-blue-200"}:e.status===""||e.status===""||e.alertTags.includes("SLA ")?{label:"",tone:"text-red-700 bg-red-50 border-red-200"}:e.status===""||e.alertTags.includes(" ")||e.alertTags.includes(" ")||e.alertTags.includes("MCI ")?{label:"",tone:"text-orange-700 bg-orange-50 border-orange-200"}:e.status===""?{label:"",tone:"text-blue-700 bg-blue-50 border-blue-200"}:{label:"",tone:"text-emerald-700 bg-emerald-50 border-emerald-200"}}function M2e(){return lO}function L2e(e){const t=lO[1];if(!e||e.stage!=="Stage 1")return{level:t.level,guide:t,exceptionState:null};const r=e.status===""||e.status===""||e.alertTags.includes("SLA ")||e.alertTags.includes(" "),n=e.risk===""||e.alertTags.includes(" ")||e.alertTags.includes("MCI "),s=e.status===""||e.alertTags.includes(" ");let i="L0",o=null,l;e.quality===""?(i="L0",o="",l="      "):n&&(r||s)?i="L3":r||n?i="L2":(s||e.quality==="")&&(i="L1"),!o&&e.status===""&&!r&&!n&&(o="",l="7   ");const d=lO.find(u=>u.level===i)??t;return{level:i,guide:d,exceptionState:o,exceptionReason:l}}function Zm(e){return e<70?"60":e<80?"70":"80"}function $2e(e){return e?e.length===1?`${e}*`:e.length===2?`${e[0]}*`:`${e[0]}${"*".repeat(e.length-2)}${e[e.length-1]}`:"-"}function Xo(e){const t=e.match(/^(\d{3})-(\d{3,4})-(\d{4})$/);if(!t)return e;const[,r,n,s]=t;return`${r}-${"*".repeat(n.length)}-${s}`}function lr(e){let t=0;for(let r=0;r<e.length;r++)t=Math.imul(31,t)+e.charCodeAt(r)|0;return(t>>>0)%1e4/1e4}function wp(e,t){return e[Math.floor(lr(t)*e.length)]}function gs(e,t,r){return new Date(e,t-1,1+r).toISOString().split("T")[0]}const F2e=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],U2e=["","","",""],B2e=["MRI","PET","BLOOD","ETC"],G2e=["CENTER_SCREEN","PUBLIC_HEALTH","HOSPITAL_REFERRAL"],H2e=["  ,  ","    ","1   ,  ","MMSE   ","   ","  ,  ","  ,  ","    "],K2e=[" "," "," ",""," "," ","",""];function z2e(e,t){const r=[],n=gs(2026,1,Math.floor(lr(`${t}-reg`)*20)+5);if(r.push(` : ${n}`),e.smsHistory.length>0&&e.smsHistory.forEach((s,i)=>{r.push(` (${s.templateId}): ${s.sentAt}  ${s.result==="SUCCESS"?"":""}`)}),e.contactStatus==="REACHED"){const s=gs(2026,1,Math.floor(lr(`${t}-cont`)*25)+10);r.push(` : ${s} ${String(9+Math.floor(lr(`${t}-ch`)*8)).padStart(2,"0")}:${String(Math.floor(lr(`${t}-cm`)*60)).padStart(2,"0")}`)}if(e.consultStatus==="IN_PROGRESS"?r.push(` : ${gs(2026,1,Math.floor(lr(`${t}-cip`)*25)+15)} (1)`):e.consultStatus==="DONE"&&r.push(` : ${gs(2026,1,Math.floor(lr(`${t}-cd`)*20)+18)} (1)`),e.reservation){const s=e.reservation.type==="CENTER_SCREEN"?" ":e.reservation.type==="PUBLIC_HEALTH"?" ":" ";r.push(` : ${e.reservation.date} ${e.reservation.time} ${s} / : ${e.reservation.reasonText.slice(0,20)}`)}return e.secondExamStatus==="SCHEDULED"?r.push(`2  : ${gs(2026,2,Math.floor(lr(`${t}-se`)*20)+5)} (${e.secondExamType||"MRI"})`):e.secondExamStatus==="DONE"?r.push(`2  : ${gs(2026,2,Math.floor(lr(`${t}-sed`)*15)+1)}`):e.secondExamStatus==="RESULT_CONFIRMED"&&(r.push(`2  : ${gs(2026,1,Math.floor(lr(`${t}-sedc`)*15)+20)}`),r.push(`2    : ${gs(2026,2,Math.floor(lr(`${t}-serc`)*10)+1)}`)),lr(`${t}-churn`)<.12&&(r.push("  (3):    "),r.push(`   1: ${gs(2026,1,Math.floor(lr(`${t}-ns`)*20)+10)}`)),r}function iz(){return F2e.map((e,t)=>{const r=`CASE-2026-${String(t+1).padStart(3,"0")}`,n=`${r}-seed`,s=lr(n),i=s<.25?"high":s<.7?"medium":"low",o=lr(`${n}-cs`)<.28?"UNREACHED":"REACHED";let l="NOT_STARTED";if(o==="REACHED"){const _=lr(`${n}-cons`);l=_<.15?"NOT_STARTED":_<.45?"IN_PROGRESS":"DONE"}let d="not_contacted";o==="REACHED"&&(l==="DONE"?d=lr(`${n}-apt`)<.55?"appointment_scheduled":"consultation_complete":d="contacted");let u="NONE";const m=lr(`${n}-se`);l==="DONE"?u=m<.35?"NONE":m<.6?"SCHEDULED":m<.82?"DONE":"RESULT_CONFIRMED":l==="IN_PROGRESS"&&m>.85&&(u="SCHEDULED");const p=u!=="NONE"?wp(B2e,`${n}-set`):void 0;let g=null;lr(`${n}-res`)<.35&&o==="REACHED"&&(g={type:wp(G2e,`${n}-rt`),date:gs(2026,2,Math.floor(lr(`${n}-rd`)*25)+3),time:`${String(9+Math.floor(lr(`${n}-rh`)*8)).padStart(2,"0")}:${lr(`${n}-rm`)<.5?"00":"30"}`,reasonText:wp(H2e,`${n}-rr`),locationText:wp(K2e,`${n}-rl`)});const x=[],y=Math.floor(lr(`${n}-sms`)*4);for(let _=0;_<y;_++){const T=wp([" "," ","  ","  "],`${n}-sms-${_}`);x.push({sentAt:`${gs(2026,1,Math.floor(lr(`${n}-smsd-${_}`)*30)+1)} ${String(9+Math.floor(lr(`${n}-smsh-${_}`)*9)).padStart(2,"0")}:${String(Math.floor(lr(`${n}-smsm-${_}`)*60)).padStart(2,"0")}`,templateId:T,previewText:`[] ${T}  .`,to:`010-****-${String(1e3+t*100+_).slice(-4)}`,result:lr(`${n}-smsr-${_}`)<.85?"SUCCESS":"FAIL"})}const N=60+Math.floor(lr(`${n}-age`)*25),v=lr(`${n}-gen`)<.55?"":"",S=o==="REACHED"?gs(2026,1,Math.floor(lr(`${n}-lc`)*30)+1):null,C=z2e({contactStatus:o,consultStatus:l,secondExamStatus:u,secondExamType:p,reservation:g,smsHistory:x},n);return{id:r,patientName:e,age:N,gender:v,riskLevel:i,riskScore:i==="high"?65+Math.floor(lr(`${n}-rs`)*30):i==="medium"?35+Math.floor(lr(`${n}-rs`)*30):5+Math.floor(lr(`${n}-rs`)*30),lastContact:S,status:d,counselor:wp(U2e,`${n}-coun`),isFavorite:lr(`${n}-fav`)<.15,phone:`010-${String(1e3+Math.floor(lr(`${n}-p1`)*9e3)).padStart(4,"0")}-${String(1e3+Math.floor(lr(`${n}-p2`)*9e3)).padStart(4,"0")}`,registeredDate:gs(2026,1,Math.floor(lr(`${n}-reg`)*20)+1),secondExamStatus:u,secondExamType:p,contactStatus:o,consultStatus:l,reservation:g,autoMemo:{lastUpdatedAt:C.length>0?gs(2026,2,Math.floor(lr(`${n}-mu`)*5)+1):gs(2026,1,15),lines:C},smsHistory:x,guardianPhone:lr(`${n}-gp`)<.3?`010-${String(2e3+Math.floor(lr(`${n}-gp1`)*8e3)).padStart(4,"0")}-${String(1e3+Math.floor(lr(`${n}-gp2`)*9e3)).padStart(4,"0")}`:void 0}})}function q2e(e){const t=[];let r=0;return e.forEach(n=>{if(!n.reservation)return;r++;const s=n.reservation.type==="CENTER_SCREEN"?" ":n.reservation.type==="PUBLIC_HEALTH"?" ":" ";t.push({id:`APT-${String(r).padStart(3,"0")}`,caseId:n.id,patientName:n.patientName,patientAge:n.age,date:n.reservation.date,time:n.reservation.time,type:s,reservationType:n.reservation.type,reasonText:n.reservation.reasonText,status:lr(`${n.id}-aptst`)<.3?"confirmed":lr(`${n.id}-aptst`)<.55?"reminder_sent":lr(`${n.id}-aptst`)<.75?"pending":"completed",riskLevel:n.riskLevel,counselor:n.counselor,phone:n.phone,reminderSent:lr(`${n.id}-rem`)<.6,notes:n.reservation.reasonText,caseContactStatus:n.contactStatus,caseConsultStatus:n.consultStatus,caseSecondExamStatus:n.secondExamStatus,autoMemoRecent:n.autoMemo.lines.slice(-3)})}),e.forEach(n=>{n.secondExamStatus==="SCHEDULED"&&(r++,t.push({id:`APT-${String(r).padStart(3,"0")}`,caseId:n.id,patientName:n.patientName,patientAge:n.age,date:gs(2026,2,Math.floor(lr(`${n.id}-se-apt`)*20)+5),time:`${String(9+Math.floor(lr(`${n.id}-se-h`)*8)).padStart(2,"0")}:00`,type:`2  (${n.secondExamType||"MRI"})`,status:"confirmed",riskLevel:n.riskLevel,counselor:n.counselor,phone:n.phone,reminderSent:!1,notes:`2  (${n.secondExamType}) `,caseContactStatus:n.contactStatus,caseConsultStatus:n.consultStatus,caseSecondExamStatus:n.secondExamStatus,autoMemoRecent:n.autoMemo.lines.slice(-3)}))}),t}const zA={NONE:"",SCHEDULED:"",DONE:"",RESULT_CONFIRMED:""},qA={UNREACHED:"",REACHED:""},WA={NOT_STARTED:"",IN_PROGRESS:"",DONE:""},VA={CENTER_SCREEN:" ",PUBLIC_HEALTH:" ",HOSPITAL_REFERRAL:" "};function WF(e){return e.replace(/(\d{3})-(\d{4})-(\d{4})/,"$1-****-$3")}function Ub(){return new Date().toISOString()}function W2e(e){return JSON.parse(JSON.stringify(e))}function Zu(e,t,r){e.push(r),t.push(r.message)}function V2e(e){const t=!!e.step1At,r=t&&!!e.step2At,n=r&&!!e.step3At;return n&&!!e.step4At||n?4:r?3:t?2:1}function oz(e,t){const r=W2e(e),n=[],s=[];let i;if(r.model.status!=="READY"&&r.model.result&&(Zu(n,s,{code:"P3",path:"model.result",message:"  READY    .",from:r.model.result,to:null}),r.model.result=null),r.loop.completed.step2At&&!r.loop.completed.step1At&&(Zu(n,s,{code:"P2",path:"loop.completed.step2At",message:"STEP2   STEP1   STEP2   .",from:r.loop.completed.step2At,to:void 0}),delete r.loop.completed.step2At),r.loop.completed.step3At&&!r.loop.completed.step2At&&(Zu(n,s,{code:"P2",path:"loop.completed.step3At",message:"STEP3   STEP2   STEP3   .",from:r.loop.completed.step3At,to:void 0}),delete r.loop.completed.step3At),r.loop.completed.step4At&&!r.loop.completed.step3At&&(Zu(n,s,{code:"P2",path:"loop.completed.step4At",message:"STEP4   STEP3   STEP4   .",from:r.loop.completed.step4At,to:void 0}),delete r.loop.completed.step4At),r.model.status==="READY"&&r.model.result&&!r.loop.completed.step1At)if(t.autoCompleteStep1){const l=r.model.result.computedAt||Ub();Zu(n,s,{code:"P1",path:"loop.completed.step1At",message:"  READY  STEP1    .",from:void 0,to:l}),r.loop.completed.step1At=l,i={at:Ub(),actor:"system",message:"    (  )",kind:"AUTO_STEP1_COMPLETED"}}else s.push("   STEP1   .");if(r.loop.status==="ON_HOLD"||r.loop.status==="EXCLUDED")r.loop.blockers=[r.loop.status==="ON_HOLD"?"     .":"     ."];else{const l=[];r.loop.completed.step1At||l.push("STEP1  "),r.loop.completed.step1At&&!r.loop.completed.step2At&&l.push("STEP2  "),r.loop.completed.step2At&&!r.loop.completed.step3At&&l.push("STEP3  "),r.loop.blockers=l}const o=V2e(r.loop.completed);return r.loop.step!==o&&(Zu(n,s,{code:"P4",path:"loop.step",message:`     ${o} .`,from:r.loop.step,to:o}),r.loop.step=o),r.loop.status==="DONE"&&(r.loop.completed.step4At||(Zu(n,s,{code:"P5",path:"loop.completed.step4At",message:"  DONE STEP4     .",from:void 0,to:Ub()}),r.loop.completed.step4At=Ub(),r.loop.step=4)),{nextCase:r,patches:n,inconsistencyFlags:s,auditLog:i}}const lz="stage2-gate-v2",cz="stage3-gate-v2",K3={autoCompleteStep1:!0},Y2e=K3,YA=new Set(["CASE-2026-175"]),Bs=new Map,Jm=new Map,cO=new Set;let dz=0,c1={stage:"ALL",status:"ALL",keyword:""};function AN(){dz+=1,cO.forEach(e=>e())}function z3(e){return cO.add(e),()=>cO.delete(e)}function su(){return dz}function dd(){return new Date().toISOString()}function rs(e){let t=0;for(let r=0;r<e.length;r+=1)t=Math.imul(31,t)+e.charCodeAt(r)|0;return(t>>>0)%1e4/1e4}function Oa(e){return Number.isNaN(e)?0:Math.max(0,Math.min(1,e))}function hf(e){const t=Math.max(0,e.NORMAL),r=Math.max(0,e.MCI),n=Math.max(0,e.AD),s=t+r+n;return s<=0?{NORMAL:.33,MCI:.34,AD:.33}:{NORMAL:Number((t/s).toFixed(4)),MCI:Number((r/s).toFixed(4)),AD:Number((n/s).toFixed(4))}}function X2e(e){const r=[{key:"NORMAL",value:e.NORMAL},{key:"MCI",value:e.MCI},{key:"AD",value:e.AD}].sort((n,s)=>s.value-n.value)[0]?.key;return r==="NORMAL"?"":r==="AD"?"":"MCI"}function uz(e){return e>=70?"":e>=40?"":""}function _N(e){if(e)return e===""?"NORMAL":e===""?"AD":"MCI"}function Q2e(e){return e==="AD"?"":e==="NORMAL"?"":"MCI"}function Z2e(e){if(e==="MCI_LOW")return"";if(e==="MCI_MID")return"";if(e==="MCI_HIGH")return""}function J2e(e){return!e.available||!e.predictedLabel?"NORMAL":e.predictedLabel===""?"AD":e.predictedLabel===""?"NORMAL":e.mciBand===""?"MCI_HIGH":e.mciBand===""?"MCI_MID":"MCI_LOW"}function eEe(e){return e==="MCI_MID"?"MCI-MID":e==="MCI_HIGH"?"MCI-HIGH":e==="AD"?"AD":null}function fz(e){return e==="AD"?"AD_MANAGEMENT":"PREVENTIVE_TRACKING"}function tEe(e){return e!=null}function gu(e,t){return Oa(t==="AD_MANAGEMENT"?e.currentRiskIndex??e.risk2yNow??e.conversionRisk2y??0:e.conversionRisk2y??e.risk2yNow??e.currentRiskIndex??0)}function dO(e){return e==="ON_HOLD"?"ON_HOLD":e==="EXCLUDED"?"EXCLUDED":e==="CLOSED"?"DONE":"IN_PROGRESS"}function rEe(e){return e==="RUNNING"||e==="QUEUED"?"PROCESSING":e==="READY"?"DONE":"PENDING"}function pz(e,t){return t?"READY":e==="PROCESSING"?"RUNNING":"NOT_READY"}function mz(e){const t=!!e.step1At,r=t&&!!e.step2At,n=r&&!!e.step3At;return n&&!!e.step4At||n?4:r?3:t?2:1}function hz(e){if(e.stage!==3)return;e.computed.stage3Loop||(e.computed.stage3Loop={step:1,completed:{},status:dO(e.status),blockers:[]}),e.computed.stage3Loop.status=dO(e.status);const t=e.computed.stage3Loop.completed;e.computed.evidence.stage3.completed&&!t.step2At&&(t.step2At=e.computed.evidence.stage3.required.performedAt??e.updatedAt),e.computed.model3.available&&!t.step3At&&(t.step3At=e.computed.model3.updatedAt??e.updatedAt),e.status==="CLOSED"&&!t.step4At&&(t.step4At=e.updatedAt),e.computed.stage3Loop.step=mz(t)}function nEe(e){if(e.stage!==3)return null;hz(e);const t=e.computed.stage3Loop;if(!t)return null;const r=e.computed.stage3Profile,n=gu(e.computed.model3,r?.stage3Type??"PREVENTIVE_TRACKING");return{caseId:e.caseId,updatedAt:e.updatedAt,model:{status:pz(e.modelStatus,e.computed.model3.available),result:e.computed.model3.available?{risk_1y_ad:e.computed.model3.conversionRisk1y,risk_2y_ad:n,risk_3y_ad:e.computed.model3.conversionRisk3y,computedAt:e.computed.model3.updatedAt??e.updatedAt,modelVersion:e.computed.model3.modelVersion??cz}:null},loop:{step:t.step,completed:{...t.completed},status:t.status,blockers:[...t.blockers]},profile:r?{originStage2Result:r.originStage2Result,originRiskScore:r.originRiskScore,stage3Type:r.stage3Type}:void 0}}function gz(e){if(e.stage!==3)return null;const t=e.computed.stage3Loop,r=t?.completed??{},n=e.computed.stage3Profile,s=gu(e.computed.model3,n?.stage3Type??"PREVENTIVE_TRACKING");return{caseId:e.caseId,updatedAt:e.updatedAt,model:{status:pz(e.modelStatus,e.computed.model3.available),result:e.computed.model3.available?{risk_1y_ad:e.computed.model3.conversionRisk1y,risk_2y_ad:s,risk_3y_ad:e.computed.model3.conversionRisk3y,computedAt:e.computed.model3.updatedAt??e.updatedAt,modelVersion:e.computed.model3.modelVersion??cz}:null},loop:{step:t?.step??mz(r),completed:{...r},status:t?.status??dO(e.status),blockers:t?.blockers?[...t.blockers]:[]},profile:n?{originStage2Result:n.originStage2Result,originRiskScore:n.originRiskScore,stage3Type:n.stage3Type}:void 0}}function aEe(e,t){if(t.profile&&(e.computed.stage3Profile={originStage2Result:t.profile.originStage2Result,originRiskScore:t.profile.originRiskScore,stage3Type:t.profile.stage3Type}),e.computed.stage3Loop={step:t.loop.step,completed:{...t.loop.completed},status:t.loop.status,blockers:[...t.loop.blockers]},e.modelStatus=rEe(t.model.status),t.model.status!=="READY"||!t.model.result)e.computed.model3={available:!1},e.riskScore=void 0;else{const r=e.computed.model3,n=e.computed.stage3Profile?.stage3Type??"PREVENTIVE_TRACKING",s=Oa(t.model.result.risk_2y_ad),i=t.model.result.risk_1y_ad==null?n==="AD_MANAGEMENT"?void 0:Oa(s-.06):Oa(t.model.result.risk_1y_ad),o=t.model.result.risk_3y_ad==null?n==="AD_MANAGEMENT"?void 0:Oa(s+.09):Oa(t.model.result.risk_3y_ad);e.computed.model3={available:!0,risk2yNow:s,risk2yAt2y:n==="AD_MANAGEMENT"?void 0:o??r.risk2yAt2y,conversionRisk1y:n==="AD_MANAGEMENT"?void 0:i,conversionRisk2y:n==="AD_MANAGEMENT"?void 0:s,conversionRisk3y:n==="AD_MANAGEMENT"?void 0:o,currentRiskIndex:n==="AD_MANAGEMENT"?s:void 0,label:s>=.7?"HIGH":s>=.45?"MID":"LOW",confidence:r.confidence??"MID",modelVersion:t.model.result.modelVersion,updatedAt:t.model.result.computedAt},e.riskScore=Math.round(gu(e.computed.model3,n)*100)}t.loop.status==="ON_HOLD"?e.status="ON_HOLD":t.loop.status==="EXCLUDED"?e.status="EXCLUDED":t.loop.status==="DONE"?e.status="CLOSED":(e.status==="ON_HOLD"||e.status==="EXCLUDED")&&(e.status="IN_PROGRESS"),e.status==="CLOSED"?e.operationStep="COMPLETED":e.modelStatus==="DONE"?e.operationStep="FOLLOW_UP":t.loop.step>=2?e.operationStep="IN_PROGRESS":e.operationStep="WAITING"}function xz(e,t=K3){if(e.stage!==3)return{nextCase:e,patches:[],inconsistencyFlags:[],auditLog:void 0};const r=nEe(e);if(!r)return{nextCase:e,patches:[],inconsistencyFlags:[],auditLog:void 0};const n=oz(r,t);if(n.patches.length===0)return{...n,nextCase:e};const s=CN(e);return aEe(s,n.nextCase),{...n,nextCase:s}}function bz(e){return e===1?"CLASSIFIED":e===2?"RESULT_READY":"FOLLOW_UP"}function sEe(e){const t=new Date(e);return Number.isNaN(t.getTime())?e:`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")} ${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`}function Ny(e){const t=new Date(e.includes("T")?e:e.replace(" ","T"));return Number.isNaN(t.getTime())?dd():t.toISOString()}function iEe(e){return e==="Stage 1"?1:e==="Stage 2"?2:3}function yz(e){return e===1?"Stage 1":e===2?"Stage 2":"Stage 3"}function oEe(e){return e===""?"CLOSED":e===""?"ON_HOLD":e===""||e===""?"WAITING_RESULTS":"IN_PROGRESS"}function lEe(e){return e==="CLOSED"?"":e==="ON_HOLD"?"":e==="WAITING_RESULTS"?"":e==="READY_TO_CLASSIFY"?"":e==="CLASS_CONFIRMED"||e==="NEXT_STEP_SET"?"":e==="EXCLUDED"?"":""}function cEe(e){return e>=90?"":e>=75?"":""}function dEe(e){return e.path.includes("")||e.path.includes("")?"HOSPITAL":"CENTER"}function uEe(e,t){const r=[];return e.specialist||r.push(" "),e.cdrOrGds==null&&r.push("CDR  GDS"),e.neuroType||r.push(" "),t==="HOSPITAL"&&e.mmse==null&&r.push("MMSE"),{completed:r.length===0,missing:r}}function fEe(e){const t=[];return e.biomarker?e.biomarkerResult||t.push("  "):t.push("  "),e.imaging?e.imagingResult||t.push("  "):t.push("  "),e.performedAt||t.push("  "),{completed:t.length===0,missing:t}}function uO(e,t,r){const n=rs(`${e.caseId}-model2`),s=e.computed.evidence.stage2.required,i=e.legacyRisk===""?.72:e.legacyRisk===""?.5:.28,o=s.cdrOrGds==null?.35:Oa(s.cdrOrGds/3),l=s.mmse==null?.35:Oa((30-s.mmse)/30),d=s.neuroScore==null?.45:Oa((100-s.neuroScore)/100),u=Oa(i*.42+o*.31+l*.17+d*.1),m=Oa(u+(n-.5)*.12),p=Oa((.72-m)*1.6),g=Oa(1-Math.abs(m-.5)*2.2),x=Oa((m-.33)*1.7);let y=hf({NORMAL:.12+p,MCI:.16+g,AD:.1+x});t&&(t===""?y=hf({NORMAL:.78,MCI:.17,AD:.05}):t==="MCI"?y=hf({NORMAL:.14,MCI:.7,AD:.16}):y=hf({NORMAL:.08,MCI:.2,AD:.72}));const N=t??X2e(y),v=Math.round(y.MCI*100+y.AD*30+n*12),S=Math.max(0,Math.min(100,v)),E=r??uz(S);return{available:!0,probs:y,predictedLabel:N,mciScore:S,mciBand:E,modelVersion:lz,updatedAt:dd()}}function xx(e,t){const r=rs(`${e.caseId}-model3`),n=e.computed.model2.predictedLabel,s=e.computed.evidence.stage3.required,i=e.computed.stage3Profile?.stage3Type??(n===""?"AD_MANAGEMENT":"PREVENTIVE_TRACKING");let o=n===""?.7:n==="MCI"?.52:.28;s.biomarkerResult==="POS"&&(o+=.14),s.biomarkerResult==="NEG"&&(o-=.08),s.biomarkerResult==="UNK"&&(o+=.03),s.imagingResult==="POS"&&(o+=.14),s.imagingResult==="NEG"&&(o-=.07),s.imagingResult==="UNK"&&(o+=.03),e.status==="ON_HOLD"&&(o+=.06),e.status==="CLOSED"&&(o-=.05);const l=t==null?Oa(o+(r-.5)*.08):Oa(t),d=Oa(l-.06+(r-.5)*.03),u=l,m=Oa(l+.09+(r-.5)*.05),p=i==="AD_MANAGEMENT"?l:u,g=p>=.7?"HIGH":p>=.45?"MID":"LOW";let x="HIGH";return(s.biomarkerResult==="UNK"||s.imagingResult==="UNK")&&(x="MID"),s.performedAt||(x="LOW"),{available:!0,risk2yNow:i==="AD_MANAGEMENT"?l:u,risk2yAt2y:i==="AD_MANAGEMENT"?void 0:m,conversionRisk1y:i==="AD_MANAGEMENT"?void 0:d,conversionRisk2y:i==="AD_MANAGEMENT"?void 0:u,conversionRisk3y:i==="AD_MANAGEMENT"?void 0:m,currentRiskIndex:i==="AD_MANAGEMENT"?l:void 0,label:g,confidence:x,modelVersion:i==="AD_MANAGEMENT"?"stage3-ad-management-v1.0":"stage3-risk-v1.3",updatedAt:dd()}}function jh(e){const t=J2e(e.computed.model2),r=eEe(t);if(!tEe(r))return e.computed.stage3Profile=void 0,null;const n=Math.round((e.computed.model2.probs?.AD??0)*100),s=fz(r);return e.computed.stage3Profile={originStage2Result:r,originRiskScore:n,stage3Type:s},e.computed.stage3Profile}function pEe(e){return e<.3?"NORMAL":e<.48?"MCI_LOW":e<.68?"MCI_MID":e<.82?"MCI_HIGH":"AD"}function CN(e){return JSON.parse(JSON.stringify(e))}function Zg(e){const t=CN(e),r=uEe(t.computed.evidence.stage2.required,t.stage2Route),n=fEe(t.computed.evidence.stage3.required),s=jh(t);t.computed.evidence.stage2.completed=r.completed,t.computed.evidence.stage2.missing=r.missing,t.computed.evidence.stage3.completed=n.completed,t.computed.evidence.stage3.missing=n.missing,hz(t),t.computed.model2.available||(t.computed.model2={available:!1}),t.computed.model3.available||(t.computed.model3={available:!1});const i=r.missing.length+n.missing.length,o=t.legacyQuality===""?95:t.legacyQuality===""?82:64,l=t.status==="WAITING_RESULTS"||t.status==="READY_TO_CLASSIFY"?1:0,d=t.status==="IN_PROGRESS"&&t.stage>=2?1:0;return t.computed.ops={...t.computed.ops,dataQualityScore:Math.max(40,Math.min(100,o-i*4)),missingFieldCount:i,bookingPendingCount:t.computed.ops.bookingPendingCount??l,approvalsPendingCount:t.computed.ops.approvalsPendingCount??d},t.stage>=3&&t.computed.model3.available?(t.modelStatus="DONE",t.operationStep=t.operationStep==="COMPLETED"?"COMPLETED":"FOLLOW_UP",t.riskScore=Math.round(gu(t.computed.model3,s?.stage3Type??"PREVENTIVE_TRACKING")*100)):t.stage>=2&&t.computed.model2.available?(t.modelStatus="DONE",t.operationStep!=="CLASSIFIED"&&t.operationStep!=="COMPLETED"&&(t.operationStep="RESULT_READY"),t.classification=_N(t.computed.model2.predictedLabel),t.riskScore=Math.round((t.computed.model2.probs?.AD??0)*100)):t.modelStatus!=="PROCESSING"&&(t.modelStatus="PENDING"),xz(t).nextCase}function mEe(e,t){const r=rs(`${e.id}-stage2-required`),n=e.stage!=="Stage 1",s=n&&e.status!=="",i=n&&r>.18?Number((.5+rs(`${e.id}-cdr`)*1.8).toFixed(1)):null,o=n&&r>.22?["CERAD-K","SNSB-II","SNSB-C","LICA"][Math.floor(rs(`${e.id}-neuro`)*4)]:null,l=t==="HOSPITAL"&&n&&r>.32?Math.round(18+rs(`${e.id}-mmse`)*10):null,d=n&&r>.27?Math.round(45+rs(`${e.id}-neuro-score`)*40):null;return{specialist:s,mmse:l,cdrOrGds:i,neuroType:o,neuroScore:d}}function hEe(e){const t=rs(`${e.id}-stage3-required`);if(!(e.stage==="Stage 3"))return{biomarker:!1,imaging:!1,biomarkerResult:null,imagingResult:null,performedAt:null};const n=t>.18,s=t>.2,i=t>.45&&n&&s,o=rs(`${e.id}-stage3-result`),l=d=>d>=.66?"POS":d>=.33?"UNK":"NEG";return{biomarker:n,imaging:s,biomarkerResult:i?l(o):null,imagingResult:i?l(1-o):null,performedAt:i?Ny(e.updated):null}}function gEe(e){const t=e.trim();if(!(t.length===0||t.includes("")))return t}function xEe(e){const t=iEe(e.stage),r=dEe(e),n=Ny(e.updated),s={caseId:e.id,stage:t,assigneeId:gEe(e.manager),region:{sido:"",sigungu:"",center:" "},patient:{name:e.profile.name,age:e.profile.age,phone:e.profile.phone,caregiverPhone:e.profile.guardianPhone},status:oEe(e.status),operationStep:t===1||t===2?"IN_PROGRESS":"FOLLOW_UP",modelStatus:"PENDING",classification:void 0,riskScore:void 0,createdAt:n,updatedAt:Ny(e.updated),stage2Route:r,legacyRisk:e.risk,legacyQuality:e.quality,legacyTags:[...e.alertTags],computed:{evidence:{stage2:{required:mEe(e,r),completed:!1,missing:[]},stage3:{required:hEe(e),completed:!1,missing:[]}},model2:{available:!1},model3:{available:!1},ops:{contactMode:e.path.includes("")||e.action.includes("")?"AGENT":"HUMAN",lastContactAt:Ny(e.updated),bookingPendingCount:e.alertTags.includes(" ")?1:0,approvalsPendingCount:e.status===""?1:0}}},i=Zg(s),o=Math.floor(rs(`${e.id}-stage-scenario`)*4);if(i.stage===2){const l=pEe(rs(`${e.id}-stage2-bucket`)),d=Q2e(l),u=Z2e(l),m=rs(`${e.id}-stage2-severity-bias`);let p=d,g=u;d==="MCI"&&m>.72?(p="",g=void 0):d==="MCI"&&m<.22&&(p="",g=void 0);const x=rs(`${e.id}-stage2-progress`),y=x<.14,N=y&&(o===0||l==="MCI_LOW");y?(i.computed.model2={available:!1},i.computed.stage3Profile=void 0,i.modelStatus="PENDING",i.status=N?"WAITING_RESULTS":"IN_PROGRESS",i.operationStep=N?"WAITING":"IN_PROGRESS"):(i.computed.evidence.stage2.required={...i.computed.evidence.stage2.required,specialist:!0,mmse:i.computed.evidence.stage2.required.mmse??(p===""?20:p==="MCI"?24:27),cdrOrGds:i.computed.evidence.stage2.required.cdrOrGds??(o===1?null:p===""?1.6:p==="MCI"?.7:.2)},i.computed.model2=uO(i,p,g),i.modelStatus="DONE",jh(i),x<.46?(i.status="READY_TO_CLASSIFY",i.operationStep="RESULT_READY"):x<.8?(i.status="CLASS_CONFIRMED",i.operationStep="CLASSIFIED"):(i.status="NEXT_STEP_SET",i.operationStep="COMPLETED"))}if(i.stage===3){const l=rs(`${e.id}-stage3-origin`),d=l<.4?"MCI-MID":l<.75?"MCI-HIGH":"AD";i.computed.stage3Profile={originStage2Result:d,originRiskScore:d==="AD"?82:d==="MCI-HIGH"?64:47,stage3Type:fz(d)},i.computed.model2=uO(i,d==="AD"?"":"MCI",d==="MCI-HIGH"?"":d==="MCI-MID"?"":void 0);const u=[.15,.35,.67,.88][o]??.35;i.computed.model3=xx(i,u),i.modelStatus="DONE",i.operationStep="FOLLOW_UP",i.riskScore=Math.round(gu(i.computed.model3,i.computed.stage3Profile.stage3Type)*100)}if(i.stage===1)if(i.status==="CLOSED")i.operationStep="COMPLETED";else{const l=rs(`${e.id}-stage1-progress`),d=i.status==="WAITING_RESULTS"?l<.45:l<.12;i.operationStep=d?"WAITING":"IN_PROGRESS"}return e.id==="CASE-2026-175"&&(i.stage=1,i.status="WAITING_RESULTS",i.operationStep="WAITING",i.modelStatus="PENDING",i.classification=void 0,i.riskScore=void 0,i.computed.model2={available:!1},i.computed.model3={available:!1},i.computed.stage3Profile=void 0,i.computed.evidence.stage2.required={specialist:!1,mmse:null,cdrOrGds:null,neuroType:null,neuroScore:null},i.computed.evidence.stage3.required={biomarker:!1,imaging:!1,biomarkerResult:null,imagingResult:null,performedAt:null},i.computed.ops.contactMode="HUMAN",i.computed.ops.bookingPendingCount=1,i.computed.ops.approvalsPendingCount=0),e.id==="CASE-2026-275"&&(i.stage=2,i.stage2Route="HOSPITAL",i.status="WAITING_RESULTS",i.operationStep="WAITING",i.modelStatus="PENDING",i.classification=void 0,i.riskScore=void 0,i.computed.evidence.stage2.required={specialist:!1,mmse:null,cdrOrGds:null,neuroType:null,neuroScore:null},i.computed.model2={available:!1},i.computed.model3={available:!1},i.computed.stage3Profile=void 0,i.computed.ops.bookingPendingCount=1,i.computed.ops.approvalsPendingCount=0),e.id==="CASE-2026-375"&&(i.stage=3,i.stage2Route="HOSPITAL",i.status="WAITING_RESULTS",i.operationStep="WAITING",i.modelStatus="PENDING",i.classification="MCI",i.riskScore=void 0,i.computed.evidence.stage2.required={specialist:!0,mmse:23,cdrOrGds:1,neuroType:"SNSB-II",neuroScore:58},i.computed.model2={available:!1},i.computed.stage3Profile={originStage2Result:"MCI-HIGH",originRiskScore:64,stage3Type:"PREVENTIVE_TRACKING"},i.computed.evidence.stage3.required={biomarker:!1,imaging:!1,biomarkerResult:null,imagingResult:null,performedAt:null},i.computed.model3={available:!1},i.computed.ops.bookingPendingCount=1,i.computed.ops.approvalsPendingCount=0),Zg(i)}function bEe(e){return e==="high"?"":e==="medium"?"":""}function yEe(e){return e.secondExamStatus==="DONE"||e.secondExamStatus==="RESULT_CONFIRMED"?"Stage 3":e.consultStatus==="DONE"||e.reservation||e.secondExamStatus==="SCHEDULED"?"Stage 2":"Stage 1"}function vEe(e,t){return e.contactStatus==="UNREACHED"?"":t==="Stage 3"?e.secondExamStatus==="RESULT_CONFIRMED"?"":e.riskLevel==="high"?"":"":t==="Stage 2"?e.consultStatus==="DONE"&&e.secondExamStatus!=="NONE"?"":"":e.consultStatus==="DONE"?"":""}function NEe(e){return e.riskScore>=70?"":e.riskScore>=45?"":""}function SEe(e,t){if(t==="Stage 1"){const r=rs(`${e.patientName}-${e.age}-stage1-path`);return e.contactStatus==="UNREACHED"?r<.45?"  ":e.guardianPhone&&r<.75?"  ":" ":r<.25?"  ":e.guardianPhone&&r<.45?"  ":e.riskLevel==="high"?"  ":"  "}return t==="Stage 2"?e.secondExamStatus==="NONE"?"  ":e.riskLevel==="high"?"AD  ":e.riskLevel==="low"?"(CN)  ":"MCI ":e.secondExamStatus==="RESULT_CONFIRMED"?" ":" "}function EEe(e,t,r,n){return t==="Stage 1"?n.includes("")?r===""?"  ":r===""?"   ":"  ":n.includes("")?r===""?"  ":"  ":e.riskLevel==="high"?r===""?"1  ":"  ":r===""?" ":" ":t==="Stage 2"?e.secondExamStatus==="NONE"?"  ":" ":e.secondExamStatus==="RESULT_CONFIRMED"?"  ":"  "}function jEe(e){return rs(`${e.patientName}-${e.registeredDate}-owner`)<.08?" ":e.counselor}function wEe(e,t,r){const n=new Set;return(r===""||r===""||r==="")&&n.add("SLA "),t!=="Stage 1"&&!e.reservation&&n.add(" "),t==="Stage 2"&&e.secondExamStatus==="NONE"&&n.add("MCI "),t==="Stage 3"&&e.secondExamStatus!=="RESULT_CONFIRMED"&&n.add(" "),t==="Stage 3"&&e.riskLevel==="high"&&n.add(" "),t==="Stage 2"&&e.riskLevel==="high"&&e.secondExamStatus!=="NONE"&&n.add("High MCI"),[...n]}function AEe(e,t){const r=yEe(e),n=vEe(e,r),s=SEe(e,r),i=jEe(e),o=`CASE-2026-${String(101+t).padStart(3,"0")}`,l=String(9+t%9).padStart(2,"0"),d=t%2===0?"00":"30";return{id:o,stage:r,risk:bEe(e.riskLevel),path:s,status:n,manager:i,action:EEe(e,r,n,s),updated:`${e.registeredDate} ${l}:${d}`,quality:NEe(e),profile:{name:e.patientName,age:e.age,phone:e.phone,guardianPhone:e.guardianPhone},alertTags:wEe(e,r,n)}}function VF(e){return(e??"").replace(/\D/g,"")}function YF(e){const t=e.profile.name.trim().toLowerCase(),r=String(e.profile.age),n=VF(e.profile.phone),s=VF(e.profile.guardianPhone);return n.length>0?`${t}|${n}`:s.length>0?`${t}|g:${s}`:`${t}|age:${r}`}function _Ee(e){const t=e.trim();return t.length>0&&!t.includes("")}function CEe(e){const t=new Map;for(const r of e){if(!_Ee(r.manager))continue;const n=YF(r);t.has(n)||t.set(n,r.manager)}return e.map(r=>{const n=t.get(YF(r));return!n||n===r.manager?r:{...r,manager:n}})}function TEe(){return[{id:"CASE-2026-901",stage:"Stage 1",risk:"",path:"  ",status:"",manager:"",action:"  ",updated:"2026-02-19 09:05",quality:"",profile:{name:" A",age:68,phone:"010-8801-1101",guardianPhone:"010-9922-3301"},alertTags:["SLA "]},{id:"CASE-2026-902",stage:"Stage 1",risk:"",path:"  ",status:"",manager:"",action:"  ",updated:"2026-02-19 08:40",quality:"",profile:{name:" B",age:74,phone:"010-8801-1102"},alertTags:["SLA "," "]},{id:"CASE-2026-903",stage:"Stage 1",risk:"",path:"  ",status:"",manager:" ",action:"  ",updated:"2026-02-19 08:20",quality:"",profile:{name:" C",age:81,phone:"",guardianPhone:"010-9922-3303"},alertTags:["SLA "," "]},{id:"CASE-2026-904",stage:"Stage 1",risk:"",path:"  ",status:"",manager:" ",action:"  ",updated:"2026-02-19 07:55",quality:"",profile:{name:" D",age:72,phone:"010-8801-1104"},alertTags:["SLA "]},{id:"CASE-2026-905",stage:"Stage 1",risk:"",path:"  ",status:"",manager:"",action:"1  ",updated:"2026-02-19 07:25",quality:"",profile:{name:" E",age:84,phone:"010-8801-1105",guardianPhone:"010-9922-3305"},alertTags:["SLA "," "]},{id:"CASE-2026-906",stage:"Stage 1",risk:"",path:"  ",status:"",manager:"",action:"    ",updated:"2026-02-19 06:50",quality:"",profile:{name:" F",age:76,phone:"010-8801-1106",guardianPhone:"010-9922-3306"},alertTags:[" "]},{id:"CASE-2026-907",stage:"Stage 1",risk:"",path:"  ",status:"",manager:"",action:"   ",updated:"2026-02-19 06:10",quality:"",profile:{name:" G",age:65,phone:"010-8801-1107"},alertTags:[]}]}function OEe(){const e=[...H3],t=iz().slice(0,50).map((s,i)=>AEe(s,i)),r=TEe(),n=new Set(e.map(s=>s.id));for(const s of[...t,...r])n.has(s.id)||e.push(s);return CEe(e)}function ac(){if(!(Bs.size>0))for(const e of OEe()){const t=xEe(e);Bs.set(t.caseId,t),Jm.set(t.caseId,[{eventId:`evt-${t.caseId}-init`,caseId:t.caseId,at:t.updatedAt,actorId:t.assigneeId??"system",type:"DATA_SYNCED",payload:{reason:"INITIALIZE_FROM_CASE_RECORDS"}}])}}function Sl(e,...t){return e.some(r=>t.includes(r.type))}function q3(e,t){const r=CN(e),n=Sl(t,"INFERENCE_REQUESTED"),s=Sl(t,"INFERENCE_STARTED","INFERENCE_PROGRESS"),i=Sl(t,"INFERENCE_COMPLETED","MODEL_RESULT_APPLIED"),o=Sl(t,"INFERENCE_FAILED"),l=Sl(t,"STAGE2_RESULTS_RECORDED"),d=Sl(t,"STAGE3_RESULTS_RECORDED"),u=Sl(t,"STAGE2_CLASS_CONFIRMED"),m=Sl(t,"STAGE2_NEXT_STEP_SET"),p=Sl(t,"CASE_CLOSED");return r.computed.model3.available||r.stage>=3&&i?(r.modelStatus="DONE",r.operationStep!=="COMPLETED"&&(r.operationStep="FOLLOW_UP")):r.computed.model2.available||r.stage>=2&&i?(r.modelStatus="DONE",r.operationStep!=="CLASSIFIED"&&r.operationStep!=="COMPLETED"&&(r.operationStep="RESULT_READY")):(n||s)&&!o?r.modelStatus="PROCESSING":r.modelStatus="PENDING",r.stage===1?p||r.status==="CLOSED"?r.operationStep="COMPLETED":Sl(t,"CONTACT_RESULT","CONTACT_SENT")&&(r.operationStep="IN_PROGRESS"):r.stage===2?m||r.status==="NEXT_STEP_SET"?r.operationStep="COMPLETED":u||r.status==="CLASS_CONFIRMED"?r.operationStep="CLASSIFIED":r.computed.model2.available||i?r.operationStep="RESULT_READY":l||r.computed.evidence.stage2.completed?r.operationStep="IN_PROGRESS":r.operationStep="WAITING":p||r.status==="CLOSED"?r.operationStep="COMPLETED":r.computed.model3.available||i?r.operationStep="FOLLOW_UP":d||r.computed.evidence.stage3.completed?r.operationStep="IN_PROGRESS":r.operationStep="WAITING",r.computed.model2.available&&(r.classification=_N(r.computed.model2.predictedLabel),r.riskScore=Math.round((r.computed.model2.probs?.AD??0)*100),(r.status==="WAITING_RESULTS"||r.status==="IN_PROGRESS")&&(r.status="READY_TO_CLASSIFY")),r.computed.model3.available&&(r.riskScore=Math.round(gu(r.computed.model3,r.computed.stage3Profile?.stage3Type??"PREVENTIVE_TRACKING")*100),r.status==="WAITING_RESULTS"&&(r.status="IN_PROGRESS")),u&&(r.status="CLASS_CONFIRMED"),m&&(r.status=r.stage===3?"IN_PROGRESS":"NEXT_STEP_SET"),p&&(r.status="CLOSED",r.operationStep="COMPLETED"),r}function Bf(e,t){ac();const r=Bs.get(e);if(!r)return;const n=CN(r);t(n),n.updatedAt=dd();const s=Zg(n),i=q3(s,Jm.get(e)??[]);Bs.set(e,i),AN()}function vz(e,t,r,n){return{eventId:`evt-${e}-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,caseId:e,at:dd(),actorId:n,type:t,payload:r}}function as(e,t,r={},n="system"){ac();const s=vz(e,t,r,n),i=Jm.get(e)??[],o=[s,...i];Jm.set(e,o);const l=Bs.get(e);if(l){const d=Zg({...l,updatedAt:s.at});Bs.set(e,q3(d,o))}return AN(),s}function REe(e,t,r){Bf(e,n=>{n.stage=2,r?.route&&(n.stage2Route=r.route),n.status="WAITING_RESULTS",n.operationStep="IN_PROGRESS",n.modelStatus="PENDING",n.computed.evidence.stage2.required={...n.computed.evidence.stage2.required,...t}}),as(e,"STAGE2_RESULTS_RECORDED",{route:r?.route,required:t},r?.actorId??"system")}function kEe(e){return hf(e===""?{NORMAL:.78,MCI:.17,AD:.05}:e==="MCI"?{NORMAL:.13,MCI:.71,AD:.16}:{NORMAL:.08,MCI:.2,AD:.72})}function XF(e,t="system",r){ac();const n=Bs.get(e);if(!n||!n.computed.evidence.stage2.completed)return!1;const s=dd();return Bf(e,i=>{const o=uO(i,r?.labelOverride,r?.mciBandOverride);i.stage=2,i.computed.model2=o,i.modelStatus="DONE",i.operationStep=bz(2),i.status="READY_TO_CLASSIFY",i.classification=_N(o.predictedLabel),i.riskScore=Math.round((o.probs?.AD??0)*100);const l=jh(i);i.stage===3&&l&&i.computed.model3.available&&(i.computed.model3=xx(i))}),as(e,"INFERENCE_COMPLETED",{stage:2,at:s},t),as(e,"MODEL_RESULT_APPLIED",{stage:2,at:s},t),as(e,"APPROVAL_PENDING",{stage:2,target:"CLASSIFICATION_CONFIRMED"},t),!0}function PEe(e,t,r){ac();const n=Bs.get(e);return!n||!n.computed.model2.available&&!n.computed.evidence.stage2.completed?!1:(Bf(e,s=>{const i=kEe(t),o=Math.round((i.MCI+i.AD*.3)*100);s.status="CLASS_CONFIRMED",s.operationStep="CLASSIFIED",s.modelStatus="DONE",s.classification=_N(t),s.riskScore=Math.round((i.AD??0)*100),s.computed.model2={available:!0,probs:i,predictedLabel:t,mciScore:o,mciBand:r?.mciBand??uz(o),modelVersion:lz,updatedAt:dd()};const l=jh(s);s.stage===3&&(l?s.computed.model3.available&&(s.computed.model3=xx(s)):(s.stage=2,s.status="CLASS_CONFIRMED",s.operationStep="CLASSIFIED",s.computed.model3={available:!1}))}),as(e,"STAGE2_CLASS_CONFIRMED",{label:t,rationale:r?.rationale},r?.actorId??"system"),as(e,"APPROVAL_RESOLVED",{stage:2,target:"CLASSIFICATION_CONFIRMED"},r?.actorId??"system"),!0)}function DEe(e,t,r){let n=!1,s=null;return Bf(e,i=>{if(i.status="NEXT_STEP_SET",i.operationStep="COMPLETED",t==="STAGE3"){if(!jh(i)){s="Stage3  MCI-MID/MCI-HIGH/AD  .",i.status="CLASS_CONFIRMED",i.operationStep="CLASSIFIED";return}n=!0,i.stage=3,i.status="IN_PROGRESS",i.operationStep="IN_PROGRESS",i.computed.evidence.stage3.completed&&(i.computed.model3=xx(i)),i.modelStatus=i.computed.model3.available?"DONE":"PENDING"}t==="FOLLOWUP_2Y"&&(i.status="CLOSED",i.operationStep="COMPLETED")}),t==="STAGE3"&&n&&as(e,"STAGE_CHANGE",{from:2,to:3,reason:"STAGE2_CLASS_ELIGIBLE"},r?.actorId??"system"),as(e,"STAGE2_NEXT_STEP_SET",{nextStep:t,applied:t==="STAGE3"?n:!0,blockedReason:s,summary:r?.summary},r?.actorId??"system"),as(e,"APPROVAL_RESOLVED",{stage:2,target:"NEXT_STEP_DECIDED"},r?.actorId??"system"),t==="STAGE3"?n:!0}function QF(e,t,r="system"){Bf(e,n=>{n.computed.ops.bookingPendingCount=Math.max(0,t),n.status==="WAITING_RESULTS"&&(n.status="IN_PROGRESS")}),as(e,"BOOKING_CONFIRMED",{pendingCount:t},r)}function IEe(e,t,r="system"){Bf(e,n=>{n.stage=3,n.status="WAITING_RESULTS",n.operationStep="IN_PROGRESS",n.modelStatus="PENDING",n.computed.evidence.stage3.required={...n.computed.evidence.stage3.required,...t}}),as(e,"STAGE3_RESULTS_RECORDED",{required:t},r)}function ZF(e,t="system"){ac();const r=Bs.get(e);if(!r||!r.computed.evidence.stage3.completed)return!1;const n=dd();return Bf(e,s=>{jh(s),s.computed.model3=xx(s),s.modelStatus="DONE",s.operationStep=bz(3),s.riskScore=Math.round(gu(s.computed.model3,s.computed.stage3Profile?.stage3Type??"PREVENTIVE_TRACKING")*100),s.status="IN_PROGRESS"}),as(e,"INFERENCE_COMPLETED",{stage:3,at:n},t),as(e,"MODEL_RESULT_APPLIED",{stage:3,at:n},t),as(e,"APPROVAL_PENDING",{stage:3,target:"NEXT_STEP_DECIDED"},t),as(e,"STAGE3_RISK_UPDATED",{},t),!0}function MEe(e,t=K3,r="system"){ac();const n=Bs.get(e);if(!n)return null;const s=xz(n,t);if(s.patches.length===0)return s;const i=[...Jm.get(e)??[]];s.auditLog&&(i.unshift(vz(e,"DATA_SYNCED",{reason:"STAGE3_RECONCILED",message:s.auditLog.message,patches:s.patches.map(l=>({code:l.code,path:l.path}))},r)),Jm.set(e,i));const o=Zg({...s.nextCase,updatedAt:dd()});return Bs.set(e,q3(o,i)),AN(),s}function TN(e){ac();const t=Bs.get(e);if(!t)return null;const{legacyQuality:r,legacyRisk:n,legacyTags:s,...i}=t;return i}function Nz(e,t){if(t.stage&&t.stage!=="ALL"&&e.stage!==t.stage||t.status&&t.status!=="ALL"&&e.status!==t.status||t.sido&&e.region.sido!==t.sido||t.sigungu&&e.region.sigungu!==t.sigungu||t.center&&e.region.center!==t.center||t.assigneeId&&e.assigneeId!==t.assigneeId)return!1;const r=(t.keyword??"").trim().toLowerCase();return!(r.length>0&&![e.caseId,e.patient.name,e.patient.phone,e.assigneeId,e.status,e.stage].filter(Boolean).join(" ").toLowerCase().includes(r))}function Sz(e){return{...c1,...e??{}}}function LEe(e){ac();const t=Sz(e);return[...Bs.values()].filter(r=>Nz(r,t)).sort((r,n)=>n.updatedAt.localeCompare(r.updatedAt)).map(r=>{const{legacyQuality:n,legacyRisk:s,legacyTags:i,...o}=r;return o})}function $Ee(e){return e.computed.model3.available?e.computed.model3.label==="HIGH"?"":e.computed.model3.label==="MID"?"":"":e.computed.model2.available?e.computed.model2.predictedLabel===""||e.computed.model2.mciBand===""?"":e.computed.model2.predictedLabel==="MCI"?"":"":e.legacyRisk}function FEe(e){return e.stage===1?e.computed.ops.contactMode==="AGENT"?"  ":"  ":e.stage===2?e.computed.model2.available?e.computed.model2.predictedLabel===""?"  ":e.computed.model2.predictedLabel==="MCI"?e.computed.model2.mciBand===""?"High MCI ":"MCI ":"  ":"  ":e.computed.model3.available?e.computed.model3.label==="HIGH"?" ":e.computed.model3.label==="MID"?" ":" ":" "}function UEe(e){return e.status==="WAITING_RESULTS"?"  ":e.status==="READY_TO_CLASSIFY"?"  ":e.status==="CLASS_CONFIRMED"?"  ":e.status==="NEXT_STEP_SET"?e.stage===3?"  ":"  ":e.status==="CLOSED"?"":e.status==="ON_HOLD"?" ":e.stage===3?"  ":" "}function BEe(e){const t=new Set;e.computed.ops.bookingPendingCount&&e.computed.ops.bookingPendingCount>0&&t.add(" "),e.stage===2&&!e.computed.model2.available&&t.add("MCI "),e.stage===2&&e.computed.model2.available&&e.computed.model2.predictedLabel==="MCI"&&e.computed.model2.mciBand===""&&t.add("High MCI"),e.stage===3&&!e.computed.evidence.stage3.completed&&t.add(" "),e.stage===3&&(e.computed.model3.label==="HIGH"||!e.computed.model3.available)&&t.add(" "),(e.status==="WAITING_RESULTS"||e.status==="ON_HOLD")&&t.add("SLA ");for(const r of e.legacyTags)t.add(r);return[...t]}function d1(e){ac();const t=Bs.get(e.caseId);if(!t)return H3[0];const r=t.computed.ops.dataQualityScore??80;return{id:t.caseId,stage:yz(t.stage),risk:$Ee(t),path:FEe(t),status:lEe(t.status),manager:t.assigneeId??" ",action:UEe(t),updated:sEe(t.updatedAt),quality:cEe(r),profile:{name:t.patient.name,age:t.patient.age,phone:t.patient.phone??"010-0000-0000",guardianPhone:t.patient.caregiverPhone},alertTags:BEe(t),computed:{stage2:{modelAvailable:t.computed.model2.available,classificationConfirmed:t.status==="CLASS_CONFIRMED"||t.status==="NEXT_STEP_SET"||t.status==="CLOSED"||t.operationStep==="CLASSIFIED"||t.operationStep==="FOLLOW_UP"||t.operationStep==="COMPLETED"||t.stage>=3,predictedLabel:t.computed.model2.predictedLabel,mciBand:t.computed.model2.mciBand,completed:t.computed.evidence.stage2.completed,missing:t.computed.evidence.stage2.missing},stage3:{modelAvailable:t.computed.model3.available,label:t.computed.model3.label,riskNow:gu(t.computed.model3,t.computed.stage3Profile?.stage3Type??"PREVENTIVE_TRACKING"),stage3Type:t.computed.stage3Profile?.stage3Type,originStage2Result:t.computed.stage3Profile?.originStage2Result,completed:t.computed.evidence.stage3.completed,missing:t.computed.evidence.stage3.missing},ops:{bookingPendingCount:t.computed.ops.bookingPendingCount,approvalsPendingCount:t.computed.ops.approvalsPendingCount,dataQualityScore:t.computed.ops.dataQualityScore}}}}function Ez(e){return LEe(e).map(t=>d1(t))}function GEe(e){const t={1:0,2:0,3:0},r=e.filter(L=>L.stage===2),n=e.filter(L=>L.stage===3);for(const L of e)t[L.stage]+=1;const s=e.filter(L=>L.stage===1&&(L.status==="OPEN"||L.status==="IN_PROGRESS"||L.status==="WAITING_RESULTS")).length,i=r.filter(L=>L.operationStep==="WAITING"||L.operationStep==="IN_PROGRESS").length,o=r.filter(L=>L.computed.model2.available&&L.computed.model2.predictedLabel==="MCI"&&L.computed.model2.mciBand===""),l=n.filter(L=>L.operationStep==="WAITING"||L.operationStep==="IN_PROGRESS").length,d=n.filter(L=>L.computed.model3.available&&L.computed.model3.label==="HIGH"||(L.riskScore??0)>=67).length,u=r.filter(L=>L.computed.model2.available&&L.computed.model2.predictedLabel==="MCI").length,m=r.filter(L=>L.computed.model2.available&&L.computed.model2.predictedLabel==="MCI"&&L.computed.model2.mciBand==="").length,p=r.filter(L=>L.computed.model2.available&&L.computed.model2.predictedLabel==="MCI"&&L.computed.model2.mciBand==="").length,g=o.length,x=m+p+g,y=L=>x===0?0:Math.round(L/x*100),N=o.slice(0,3).map(L=>({id:L.caseId,age:L.patient.age,probability:`${Math.round((L.computed.model2.probs?.AD??0)*100)}%`,period:L.computed.ops.bookingPendingCount?"3":"6",nextAction:"Stage3  "})),v=(L,H=!1)=>({id:L.caseId,name:L.patient.name,age:L.patient.age,stage:yz(L.stage),reason:H?"/   ":L.stage===2&&!L.computed.evidence.stage2.completed?"   ":L.stage===3&&!L.computed.evidence.stage3.completed?"   ":"/   ",action:L.stage>=2?"":"",sla:H?"":L.status==="ON_HOLD"||L.status==="WAITING_RESULTS"?"":"1h "}),S=[...e].sort((L,H)=>{const B=(L.computed.ops.missingFieldCount??0)+(L.computed.ops.bookingPendingCount??0)*2,M=(H.computed.ops.missingFieldCount??0)+(H.computed.ops.bookingPendingCount??0)*2;return M!==B?M-B:H.updatedAt.localeCompare(L.updatedAt)}),E=S.filter(L=>YA.has(L.caseId)),C=S.filter(L=>!YA.has(L.caseId)),_=[...E,...C].slice(0,4).map(L=>v(L,YA.has(L.caseId))),A=Math.max(t[1],1),T=Math.round(t[2]/A*100),R=Math.round(u/A*100),I=Math.round(o.length/A*100),k=Math.round(t[3]/A*100),w=[{name:"1 ",count:t[1],rate:100,drop:0,wait:1.2},{name:"2 ",count:t[2],rate:T,drop:Math.max(0,100-T),wait:4.2},{name:"MCI",count:u,rate:R,drop:Math.max(0,T-R),wait:6.4},{name:"High MCI",count:o.length,rate:I,drop:Math.max(0,R-I),wait:9.1},{name:"3 ",count:t[3],rate:k,drop:Math.max(0,I-k),wait:12.5}];return{contactNeeded:s,stage2Waiting:i,highRiskMci:o.length,stage3Waiting:l,churnRisk:d,stageCounts:t,pipelineData:w,mciDistribution:[{name:"Low",value:y(m),color:"#059669"},{name:"Moderate",value:y(p),color:"#d97706"},{name:"High",value:y(g),color:"#dc2626"}],highRiskMciList:N,priorityTasks:_}}function HEe(e){ac();const t=Sz(e),r=[...Bs.values()].filter(n=>Nz(n,t));return GEe(r)}function KEe(){return{...c1}}function Mp(e){c1={...c1,...e},AN()}function jz(e){const t=e.trim();if(t==="Stage 1"||t==="1 "){Mp({stage:1});return}if(t==="Stage 2"||t==="2 "||t==="MCI"||t==="High MCI"){Mp({stage:2});return}if(t==="Stage 3"||t==="3 "){Mp({stage:3});return}if(t==="SLA "){Mp({status:"WAITING_RESULTS"});return}Mp({stage:"ALL",status:"ALL"})}function W3(){return h.useSyncExternalStore(z3,su,su)}function ON(e){return h.useSyncExternalStore(z3,su,su),h.useMemo(()=>e?TN(e):null,[e,su()])}function wz(){return h.useSyncExternalStore(z3,su,su),h.useMemo(()=>KEe(),[su()])}function Az(e){return{periodFrom:e?.periodFrom,periodTo:e?.periodTo,sido:e?.sido,sigungu:e?.sigungu,center:e?.center,stage:e?.stage,status:e?.status,assigneeId:e?.assigneeId,keyword:e?.keyword}}function wh(){return new Date().toISOString()}function _z(e){let t=0;for(let r=0;r<e.length;r+=1)t=Math.imul(31,t)+e.charCodeAt(r)|0;return t>>>0}function Id(e,t,r,n){if(r>=n)return r;const s=n-r+1;return r+_z(`${e}:${t}`)%s}function Ap(e,t,r){return r[_z(`${e}:${t}`)%r.length]}function zEe(e){if(!e)return"MID";if(e.classification==="AD")return"AD";if(e.classification==="MCI")return"MID";if(e.classification==="NORMAL")return"LOW";const t=e.riskScore??55;return t>=82?"AD":t>=70?"HIGH":t>=40?"MID":"LOW"}function qEe(e,t){const r=zEe(t),n={caseId:e,source:"SEEDED",syncedAt:wh(),receivedMeta:{linkageStatus:"WAITING",providerName:" "},missingRequiredCount:0};r==="LOW"?(n.mmse=Id(e,"mmse-low",24,29),n.gds=Id(e,"gds-low",1,3),n.cogTestType=Ap(e,"cog-low",["CERAD-K","LICA"])):r==="MID"?(n.mmse=Id(e,"mmse-mid",20,25),n.gds=Id(e,"gds-mid",3,5),n.cogTestType=Ap(e,"cog-mid",["SNSB-II","CERAD-K"])):r==="HIGH"?(n.mmse=Id(e,"mmse-high",16,22),n.gds=Id(e,"gds-high",4,6),n.cdr=Number(Ap(e,"cdr-high",[.5,1])),n.cogTestType=Ap(e,"cog-high",["SNSB-II","SNSB-C"])):(n.mmse=Id(e,"mmse-ad",10,18),n.gds=Id(e,"gds-ad",5,7),n.cdr=Number(Ap(e,"cdr-ad",[1,2])),n.cogTestType=Ap(e,"cog-ad",["SNSB-II","SNSB-C"]),n.specialistOpinionStatus="DONE");const s=r==="LOW"||r==="MID"?["mmse","gds","cogTestType"]:r==="HIGH"?["mmse","gds","cdr","cogTestType"]:["mmse","gds","cdr","cogTestType","specialistOpinionStatus"];return n.missingRequiredCount=s.filter(i=>i==="specialistOpinionStatus"?n.specialistOpinionStatus!=="DONE":n[i]==null).length,n.filledFields=["mmse","gds","cdr","cogTestType","specialistOpinionStatus"].filter(i=>n[i]!=null),n}function WEe(e=180){return new Promise(t=>setTimeout(t,e))}async function bx(e,t="demo"){return await WEe(120+Math.floor(Math.random()*140)),{payload:e(),source:t}}async function VEe(e){Az(e);const t=await bx(()=>({stats:HEe(e),totalCases:Ez(e).length,fetchedAt:wh()}));return{...t.payload,source:t.source}}async function YEe(e){Az(e);const t=await bx(()=>{const r=Ez(e);return{items:r,total:r.length,fetchedAt:wh()}});return{...t.payload,source:t.source}}async function XEe(e){const t=await bx(()=>({item:TN(e),fetchedAt:wh()}));return{...t.payload,source:t.source}}async function QEe(e){const r=await bx(()=>{const n=TN(e);return{item:qEe(e,n),fetchedAt:wh()}});return{...r.payload,source:r.source}}async function ZEe(e,t){const r=await bx(()=>({ok:!0,caseId:e,changedFields:t.changedFields,reason:t.reason,editor:t.editor,editedAt:wh()}));return{...r.payload,source:r.source}}const V3=15e3,Y3=30*6e4,X3=1e4;function Cz(e,t){return{...e}}function JEe(e){const t=wz(),r=W3(),n=h.useMemo(()=>Cz(t),[t,e]);return Ml({queryKey:["local-center","dashboard-stats",n,r],queryFn:()=>VEe(n),placeholderData:Vp,staleTime:V3,gcTime:Y3,refetchInterval:X3,refetchIntervalInBackground:!0,refetchOnWindowFocus:!1})}function eje(e){const t=wz(),r=W3(),n=h.useMemo(()=>Cz(t),[t,e]);return Ml({queryKey:["local-center","cases",n,r],queryFn:()=>YEe(n),placeholderData:Vp,staleTime:V3,gcTime:Y3,refetchInterval:X3,refetchIntervalInBackground:!0,refetchOnWindowFocus:!1})}function tje(e){const t=W3();return Ml({queryKey:["local-center","case",e,t],queryFn:()=>XEe(e??""),enabled:!!e,placeholderData:Vp,staleTime:V3,gcTime:Y3,refetchInterval:X3,refetchIntervalInBackground:!0,refetchOnWindowFocus:!1})}const N0=({label:e,value:t,change:r,isUp:n,color:s,onClick:i})=>a.jsxs("div",{onClick:i,className:"bg-white p-5 rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-all cursor-pointer flex flex-col gap-2 group",children:[a.jsx("span",{className:"text-gray-500 text-xs font-semibold group-hover:text-blue-600 transition-colors",children:e}),a.jsxs("div",{className:"flex items-baseline justify-between",children:[a.jsx("span",{className:"text-2xl font-bold text-gray-900",children:t}),a.jsxs("div",{className:ue("flex items-center text-[10px] font-bold px-1.5 py-0.5 rounded",n?"text-emerald-600 bg-emerald-50":"text-red-600 bg-red-50"),children:[n?a.jsx(pU,{size:12}):a.jsx(fU,{size:12}),r]})]}),a.jsx("div",{className:"mt-2 h-1 w-full bg-gray-100 rounded-full overflow-hidden",children:a.jsx("div",{className:ue("h-full",s),style:{width:"65%"}})})]}),rje={:"11010",:"11020",:"11030",:"11040",:"11050",:"11060",:"11070",:"11080",:"11090",:"11100",:"11110",:"11120",:"11130",:"11140",:"11150",:"11160",:"11170",:"11180",:"11190",:"11200",:"11210",:"11220",:"11230",:"11240",:"11250"};function nje(e){const t=Qc.find(l=>e?.includes(l.name)||e?.includes(l.label))??Qc[0],r=Object.entries(rje).find(([l])=>e?.includes(l)),n=r?.[1]??"11230",s=r?.[0]??"",i=n.slice(0,2)||t.ctprvnCode,o=Qc.find(l=>l.ctprvnCode===i)?.label??t.label;return{ctprvnCode:i,ctprvnLabel:o,sigCode:n,sigLabel:s}}const aje={contactNeeded:0,stage2Waiting:0,highRiskMci:0,stage3Waiting:0,churnRisk:0,pipelineData:[{name:"1 ",count:0,rate:0,drop:0,wait:0},{name:"2 ",count:0,rate:0,drop:0,wait:0},{name:"MCI",count:0,rate:0,drop:0,wait:0},{name:"High MCI",count:0,rate:0,drop:0,wait:0},{name:"3 ",count:0,rate:0,drop:0,wait:0}],mciDistribution:[{name:"Low",value:0,color:"#059669"},{name:"Moderate",value:0,color:"#d97706"},{name:"High",value:0,color:"#dc2626"}],highRiskMciList:[],priorityTasks:[]};function JF({onNavigateToCases:e,onSelectCase:t,centerName:r}){const{data:n}=JEe(),s=n?.stats??aje,i=nje(r),[o,l]=h.useState(null),d=h.useMemo(()=>s.mciDistribution.length>0?s.mciDistribution:[{name:"Low",value:0,color:"#059669"},{name:"Moderate",value:0,color:"#d97706"},{name:"High",value:0,color:"#dc2626"}],[s.mciDistribution]),u=s.highRiskMciList,m=s.pipelineData,p=s.priorityTasks,g=x=>{jz(x),e(x)};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[a.jsx(N0,{label:"  ",value:s.contactNeeded.toLocaleString(),change:"",isUp:!0,color:"bg-blue-600",onClick:()=>g("SLA ")}),a.jsx(N0,{label:"2 ",value:s.stage2Waiting.toLocaleString(),change:"",isUp:!1,color:"bg-orange-500",onClick:()=>g(" ")}),a.jsx(N0,{label:" MCI",value:s.highRiskMci.toLocaleString(),change:"",isUp:!0,color:"bg-red-600",onClick:()=>g("High MCI")}),a.jsx(N0,{label:"3 ",value:s.stage3Waiting.toLocaleString(),change:"",isUp:!0,color:"bg-purple-600",onClick:()=>g("3 ")}),a.jsx(N0,{label:"",value:s.churnRisk.toLocaleString(),change:"",isUp:!1,color:"bg-gray-500",onClick:()=>g(" ")})]}),a.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-gray-200 bg-gradient-to-b from-white to-slate-50/80 p-6 shadow-sm",children:[a.jsx("div",{className:"pointer-events-none absolute -right-14 -top-14 h-40 w-40 rounded-full bg-blue-100/60 blur-3xl"}),a.jsx("div",{className:"pointer-events-none absolute -left-20 bottom-0 h-28 w-52 rounded-full bg-indigo-100/40 blur-3xl"}),a.jsxs("div",{className:"relative z-10 mb-5 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-gray-900",children:"  "}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:"       ."})]}),a.jsxs("div",{className:"hidden md:flex items-center gap-2 text-[10px]",children:[a.jsx("span",{className:"rounded-full border border-blue-200 bg-blue-50 px-2 py-1 font-semibold text-blue-700",children:" "}),a.jsx("span",{className:"rounded-full border border-rose-200 bg-rose-50 px-2 py-1 font-semibold text-rose-700",children:" "})]})]}),a.jsx("div",{className:"relative z-10 overflow-x-auto pb-1",children:a.jsx("div",{className:"grid min-w-[980px] grid-cols-5 gap-5",children:m.map((x,y)=>{const N=y===0?"from-blue-600 to-cyan-500":y===1?"from-indigo-600 to-blue-500":y===2?"from-sky-600 to-blue-500":y===3?"from-violet-600 to-indigo-500":"from-blue-700 to-indigo-700",v=Math.max(8,Math.min(x.rate,100)),S=o===x.name;return a.jsxs("button",{onClick:()=>g(x.name),onPointerEnter:E=>{E.pointerType!=="touch"&&l(x.name)},onPointerMove:E=>{E.pointerType!=="touch"&&l(x.name)},onPointerLeave:()=>l(E=>E===x.name?null:E),onMouseEnter:()=>l(x.name),onMouseLeave:()=>l(E=>E===x.name?null:E),onFocus:()=>l(x.name),onBlur:()=>l(E=>E===x.name?null:E),className:ue("relative text-left rounded-2xl border border-slate-200 bg-white transition-all duration-200",S?"-translate-y-1 shadow-[0_18px_34px_rgba(37,99,235,0.22)]":"shadow-[0_14px_28px_rgba(15,23,42,0.08)]"),children:[a.jsx("div",{className:ue("pointer-events-none absolute inset-x-4 -bottom-2 h-3 rounded-xl blur-sm transition-colors",S?"bg-blue-300/60":"bg-slate-300/60")}),a.jsxs("div",{className:"relative rounded-2xl",children:[a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-[11px] font-semibold tracking-wide text-slate-700",children:x.name}),a.jsxs("span",{className:"rounded-full bg-slate-100 px-2 py-0.5 text-[10px] font-semibold text-slate-500",children:["Stage ",y+1]})]}),a.jsxs("div",{className:"mt-2 flex items-end justify-between",children:[a.jsx("p",{className:"text-2xl font-bold text-slate-900 leading-none",children:x.count.toLocaleString()}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-[10px] text-slate-400",children:""}),a.jsxs("p",{className:"text-sm font-bold text-blue-700",children:[x.rate,"%"]})]})]}),a.jsx("div",{className:"mt-3",children:a.jsx("div",{className:"h-2 overflow-hidden rounded-full bg-slate-100",children:a.jsx("div",{className:ue("h-full rounded-full bg-gradient-to-r",N),style:{width:`${v}%`}})})}),a.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[a.jsxs("div",{className:"rounded-lg border border-rose-100 bg-rose-50 px-2 py-1.5",children:[a.jsx("p",{className:"text-[10px] font-semibold text-rose-500",children:""}),a.jsxs("p",{className:"text-xs font-bold text-rose-700",children:[x.drop,"%"]})]}),a.jsxs("div",{className:"rounded-lg border border-amber-100 bg-amber-50 px-2 py-1.5",children:[a.jsx("p",{className:"text-[10px] font-semibold text-amber-600",children:" "}),a.jsxs("p",{className:"text-xs font-bold text-amber-700",children:[x.wait,""]})]})]})]}),y<4&&a.jsxs("div",{className:"pointer-events-none absolute top-1/2 -right-2 hidden -translate-y-1/2 md:flex items-center",children:[a.jsx("span",{className:"h-px w-3 bg-slate-200"}),a.jsx(di,{size:12,className:"text-slate-300"})]})]})]},x.name)})})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[a.jsxs("div",{className:"lg:col-span-8 bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-5 border-b border-gray-100 flex items-center justify-between",children:[a.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(ss,{className:"text-amber-500",size:18}),"  "]}),a.jsxs("button",{onClick:()=>g("SLA "),className:"text-xs font-semibold text-blue-600 hover:underline flex items-center gap-1",children:["  ",a.jsx(di,{size:14})]})]}),a.jsx("div",{className:"flex-1 overflow-auto",children:a.jsxs("table",{className:"w-full text-left border-collapse",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-50 text-[11px] font-bold text-gray-500 uppercase tracking-wider",children:[a.jsx("th",{className:"px-5 py-3 border-b border-gray-100",children:"ID"}),a.jsx("th",{className:"px-5 py-3 border-b border-gray-100",children:""}),a.jsx("th",{className:"px-5 py-3 border-b border-gray-100",children:" Stage"}),a.jsx("th",{className:"px-5 py-3 border-b border-gray-100",children:" "}),a.jsx("th",{className:"px-5 py-3 border-b border-gray-100",children:"SLA"}),a.jsx("th",{className:"px-5 py-3 border-b border-gray-100 text-right",children:" "})]})}),a.jsx("tbody",{className:"text-sm",children:p.map(x=>a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors group",children:[a.jsx("td",{className:"px-5 py-4 text-gray-900 group-hover:text-blue-600 cursor-pointer",onClick:()=>t(x.id,x.stage),children:x.stage==="Stage 2"||x.stage==="Stage 3"?a.jsxs("div",{className:"leading-tight",children:[a.jsx("div",{className:"font-semibold",children:x.name}),a.jsx("div",{className:"font-mono text-[11px] text-gray-500",children:x.id})]}):a.jsx("span",{className:"font-mono font-medium",children:x.id})}),a.jsxs("td",{className:"px-5 py-4 text-gray-600",children:[x.age,""]}),a.jsx("td",{className:"px-5 py-4",children:a.jsx("span",{className:ue("px-2 py-0.5 rounded text-[10px] font-bold border",x.stage==="Stage 1"?"bg-emerald-50 text-emerald-700 border-emerald-100":x.stage==="Stage 2"?"bg-blue-50 text-blue-700 border-blue-100":"bg-purple-50 text-purple-700 border-purple-100"),children:x.stage})}),a.jsx("td",{className:"px-5 py-4 text-gray-600 max-w-[200px] truncate",children:x.reason}),a.jsx("td",{className:"px-5 py-4",children:a.jsx("span",{className:ue("px-2 py-0.5 rounded text-[10px] font-bold",x.sla===""?"bg-red-50 text-red-700":"bg-orange-50 text-orange-700"),children:x.sla})}),a.jsx("td",{className:"px-5 py-4 text-right",children:a.jsxs("div",{className:"flex items-center justify-end gap-2",children:[a.jsx("button",{className:"p-1.5 hover:bg-gray-200 rounded text-gray-600",title:"",children:a.jsx(Fs,{size:14})}),a.jsx("button",{className:"p-1.5 hover:bg-gray-200 rounded text-gray-600",title:"",children:a.jsx(Vo,{size:14})}),a.jsx("button",{className:"p-1.5 hover:bg-gray-200 rounded text-gray-600",title:"",children:a.jsx(cC,{size:14})})]})})]},x.id))})]})}),a.jsx("div",{className:"p-3 bg-gray-50 text-[10px] text-gray-500 italic text-center",children:"*  : SLA            ."})]}),a.jsxs("div",{className:"lg:col-span-4 bg-white rounded-xl border border-gray-200 shadow-sm p-5 flex flex-col",children:[a.jsx("h3",{className:"font-bold text-gray-800 mb-4",children:"MCI  "}),a.jsxs("div",{className:"flex gap-4 items-center mb-6",children:[a.jsx("div",{className:"h-32 w-32 shrink-0",children:a.jsx(Ta,{width:"100%",height:"100%",children:a.jsxs(vK,{children:[a.jsx(tc,{data:d,cx:"50%",cy:"50%",innerRadius:30,outerRadius:45,paddingAngle:5,dataKey:"value",children:d.map((x,y)=>a.jsx(yo,{fill:x.color},`cell-${y}`))}),a.jsx(ln,{})]})})}),a.jsx("div",{className:"space-y-1.5 flex-1",children:d.map(x=>a.jsxs("div",{className:"flex items-center justify-between text-[10px] font-bold",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full",style:{backgroundColor:x.color}}),a.jsxs("span",{className:"text-gray-500",children:[x.name," MCI"]})]}),a.jsxs("span",{children:[x.value,"%"]})]},x.name))})]}),a.jsxs("div",{className:"flex-1 space-y-3",children:[a.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" MCI  (High)"}),u.length===0?a.jsx("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-3 text-[11px] text-gray-600",children:"  MCI  ."}):u.map(x=>a.jsxs("div",{className:"p-2.5 bg-gray-50 rounded-lg border border-gray-100 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"text-[11px] font-bold text-blue-600",children:[x.id," ",a.jsxs("span",{className:"text-gray-400 text-[10px]",children:["(",x.age,")"]})]}),a.jsxs("p",{className:"text-[9px] text-red-600 font-bold",children:["  ",x.probability," | ",x.period]})]}),a.jsx("button",{onClick:()=>t(x.id,"Stage 2"),className:"px-2 py-1 bg-white border border-gray-200 rounded text-[9px] font-bold text-gray-600 hover:bg-gray-100",children:x.nextAction})]},x.id))]}),a.jsx("button",{className:"mt-4 w-full py-2 bg-red-50 text-red-700 text-xs font-bold rounded-lg hover:bg-red-100 transition-colors",children:"3    "})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"relative bg-white rounded-xl border border-gray-200 shadow-sm p-5",children:[a.jsxs("h3",{className:"font-bold text-gray-800 mb-4 flex items-center justify-between",children:["   (//)",a.jsxs("div",{className:"flex gap-2",children:[a.jsx("span",{className:"text-[10px] px-2 py-0.5 bg-blue-50 rounded text-blue-700",children:i.sigLabel}),a.jsx("span",{className:"text-[10px] px-2 py-0.5 bg-gray-100 rounded text-gray-500",children:"emd "})]})]}),a.jsx(G3,{title:`${i.sigLabel} // `,indicatorId:"total_cases",year:2026,scope:{mode:"regional",ctprvnCodes:[i.ctprvnCode],label:i.ctprvnLabel},fixedLevel:"emd",lockedSigCode:i.sigCode,lockedSigName:i.sigLabel,hideBreadcrumb:!0,variant:"portal",mapHeight:320,externalColorScheme:"risk",hideLegendPanel:!0,hintText:"//     .",className:"rounded-lg overflow-hidden"}),a.jsxs("div",{className:"pointer-events-none absolute left-8 top-[92px] z-10 rounded-md border border-slate-200 bg-white/95 px-4 py-3 shadow-md backdrop-blur-sm",children:[a.jsx("p",{className:"text-[11px] font-bold text-slate-700",children:"  "}),a.jsxs("div",{className:"mt-2 space-y-1.5 text-[10px] font-semibold text-slate-600",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-[#ef4444]"}),a.jsx("span",{children:" ( )"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-[#f59e0b]"}),a.jsx("span",{children:" ( )"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-[#10b981]"}),a.jsx("span",{children:"/"})]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-5",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"font-bold text-gray-800",children:"   "}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("div",{className:"flex items-center gap-1.5 text-[9px] font-bold text-gray-600",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600"})," "]}),a.jsxs("div",{className:"flex items-center gap-1.5 text-[9px] font-bold text-gray-600",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-[#d97706]"})," "]}),a.jsxs("div",{className:"flex items-center gap-1.5 text-[9px] font-bold text-gray-600",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-[#059669]"})," "]})]})]}),a.jsx("div",{className:"h-64",children:a.jsx(Ta,{width:"100%",height:"100%",children:a.jsxs(NN,{data:[{date:"02/05",screen:72,evaluation:65,completed:58},{date:"02/06",screen:75,evaluation:68,completed:55},{date:"02/07",screen:82,evaluation:62,completed:62},{date:"02/08",screen:80,evaluation:70,completed:65},{date:"02/09",screen:88,evaluation:74,completed:68},{date:"02/10",screen:92,evaluation:81,completed:72},{date:"02/11",screen:89,evaluation:85,completed:75}],children:[a.jsx(ys,{strokeDasharray:"3 3",vertical:!1,stroke:"#f1f5f9"}),a.jsx(da,{dataKey:"date",fontSize:9,axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8"}}),a.jsx(Jn,{fontSize:9,axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8"},unit:"%"}),a.jsx(ln,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"},labelStyle:{fontWeight:"bold",marginBottom:"4px"}}),a.jsx(qa,{type:"monotone",dataKey:"screen",stroke:"#2563eb",strokeWidth:2.5,dot:{r:3}}),a.jsx(qa,{type:"monotone",dataKey:"evaluation",stroke:"#d97706",strokeWidth:2.5,dot:{r:3}}),a.jsx(qa,{type:"monotone",dataKey:"completed",stroke:"#059669",strokeWidth:2.5,dot:{r:3}})]})})}),a.jsxs("div",{className:"mt-4 flex items-center justify-around border-t border-gray-50 pt-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase",children:"  "}),a.jsx("p",{className:"text-sm font-bold text-emerald-600",children:"+4.2%"})]}),a.jsx("div",{className:"w-px h-6 bg-gray-100"}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase",children:"  "}),a.jsx("p",{className:"text-sm font-bold text-red-600",children:"115%"})]})]})]})]}),a.jsx("div",{className:"p-3 bg-gray-50 text-[10px] text-gray-500 italic text-center rounded-lg",children:"*  :         100%  .      ."})]})}function e7(e){return e>=70?"HIGH":e>=45?"MID":"LOW"}function sje(e){return e==="READY"?{label:" READY",status:e,tone:"success"}:e==="RUNNING"?{label:"  ",status:e,tone:"warning"}:e==="QUEUED"?{label:" ",status:e,tone:"warning"}:e==="FAILED"?{label:" ",status:e,tone:"danger"}:{label:"  ",status:e,tone:"neutral"}}function $o(e,t){return{step:e,...t}}function Tz(e,t){const r=oz(e,t),n=r.nextCase,s=!!n.loop.completed.step1At,i=!!n.loop.completed.step2At,o=!!n.loop.completed.step3At,l=!!n.loop.completed.step4At,d=n.loop.status==="ON_HOLD"||n.loop.status==="EXCLUDED",u=[];s?u.push($o(1,{title:"STEP 1",subtitle:" ",state:"DONE",reason:"STEP1  .",canOpen:!0})):u.push($o(1,{title:"STEP 1",subtitle:" ",state:d?"LOCKED":"TODO",reason:d?n.loop.status==="ON_HOLD"?"  STEP1  .":"  STEP1  .":n.model.status==="READY"&&!t.autoCompleteStep1?"   STEP1  .":"STEP1   .",canOpen:!d})),i?u.push($o(2,{title:"STEP 2",subtitle:" /",state:"DONE",reason:"STEP2  / .",canOpen:!0})):!s||d?u.push($o(2,{title:"STEP 2",subtitle:" /",state:"LOCKED",reason:d?"    .":"STEP1  .",canOpen:!1})):u.push($o(2,{title:"STEP 2",subtitle:" /",state:n.model.status==="RUNNING"||n.model.status==="QUEUED"?"IN_PROGRESS":"TODO",reason:n.model.status==="RUNNING"||n.model.status==="QUEUED"?" /  .":"STEP2  / .",canOpen:!0})),o?u.push($o(3,{title:"STEP 3",subtitle:"  ",state:"DONE",reason:"STEP3    .",canOpen:!0})):!i||d?u.push($o(3,{title:"STEP 3",subtitle:"  ",state:"LOCKED",reason:d?"    .":"STEP2  .",canOpen:!1})):u.push($o(3,{title:"STEP 3",subtitle:"  ",state:n.model.status==="READY"?"IN_PROGRESS":"TODO",reason:n.model.status==="READY"?"     .":"   .",canOpen:!0})),l?u.push($o(4,{title:"STEP 4",subtitle:"  ",state:"DONE",reason:"STEP4   .",canOpen:!0})):!o||d?u.push($o(4,{title:"STEP 4",subtitle:"  ",state:"LOCKED",reason:d?"    .":"STEP3  .",canOpen:!1})):u.push($o(4,{title:"STEP 4",subtitle:"  ",state:"TODO",reason:"   .",canOpen:!0}));const m=u.filter(E=>E.state==="DONE").length,p=u.find(E=>E.state==="TODO"||E.state==="IN_PROGRESS"),g=d?{label:n.loop.status==="ON_HOLD"?"  ":"  ",step:null,reason:"   ."}:p?{label:`STEP${p.step}  `,step:p.step,reason:p.reason}:{label:"  ",step:4,reason:"  ."},x=n.profile?.stage3Type??(n.profile?.originStage2Result==="AD"?"AD_MANAGEMENT":"PREVENTIVE_TRACKING"),y=n.model.status==="READY"&&n.model.result?{kind:"ready",label:x==="AD_MANAGEMENT"?`  ${Math.round(n.model.result.risk_2y_ad*100)}% (${e7(Math.round(n.model.result.risk_2y_ad*100))})`:`AD  (2) ${Math.round(n.model.result.risk_2y_ad*100)}% (${e7(Math.round(n.model.result.risk_2y_ad*100))})`,riskPct:Math.round(n.model.result.risk_2y_ad*100),modelVersion:n.model.result.modelVersion,computedAt:n.model.result.computedAt,tone:Math.round(n.model.result.risk_2y_ad*100)>=70?"danger":Math.round(n.model.result.risk_2y_ad*100)>=45?"warning":"success"}:{kind:"pending",label:" ",reason:"     ",tone:"warning"},N=n.loop.status==="ON_HOLD"||n.loop.status==="EXCLUDED"?" ":y.kind==="ready"?y.riskPct>=70?" ":y.riskPct>=45?"":"":"",v=N===" "?"":N===""?"":"",S=[...n.loop.blockers,...r.inconsistencyFlags.length>0?["  ."]:[]];return{caseId:n.caseId,source:n,display:{modelBadge:sje(n.model.status),riskBadge:y,loopProgress:{done:m,total:4,text:`${m}/4`},trackingStatus:N,intensity:v,stepCards:u,inconsistencyFlags:r.inconsistencyFlags,warnings:S,primaryCta:g},meta:{lastUpdatedAt:n.updatedAt}}}function Oz(e){return e??Y2e}function ije(e,t){if(!e)return null;const r=TN(e);if(!r||r.stage!==3)return null;const n=gz(r);return n?Tz(n,Oz(t)):null}function Rz(e,t){const r=ON(e),n=h.useMemo(()=>Oz(t),[t?.autoCompleteStep1]),s=n.autoCompleteStep1;return h.useEffect(()=>{e&&MEe(e,n)},[s,e,n]),h.useMemo(()=>{if(!r||r.stage!==3)return null;const i=gz(r);return i?Tz(i,n):null},[s,r,n])}typeof window<"u"&&new URLSearchParams(window.location.search).get("demo");typeof window<"u"&&new URLSearchParams(window.location.search).get("panel");const oje=[{label:"Stage 1",value:"Stage 1"},{label:"Stage 2",value:"Stage 2"},{label:"Stage 3",value:"Stage 3"}],lje=[{label:"",value:"ALL"},{label:"Agent",value:"AGENT"},{label:"",value:"HUMAN"},{label:"",value:"UNASSIGNED"}],cje=[{label:"",value:"ALL"},{label:"L3",value:"L3_ONLY"},{label:"L2~L3",value:"L2_L3"},{label:"L0~L1",value:"L0_L1"}],dje=[{label:"",value:"ALL"},{label:"",value:"NOT_TRIED"},{label:" ",value:"RETRY_NEEDED"},{label:"",value:"IN_PROGRESS"},{label:"",value:"SUCCESS"}];function kz(e){const t=new Date(e.replace(" ","T"));return Number.isNaN(t.getTime())?0:t.getTime()}function uje(e){return e.length>16?e.slice(0,16):e}function Md(e){return Math.max(0,Math.min(1,e))}function fje(e){return Math.max(0,Math.min(100,e))}function pje(e){return e>=85?"L3":e>=70?"L2":e>=50?"L1":"L0"}function mje(e){return e==="L3"?"bg-red-50 text-red-700 border-red-200":e==="L2"?"bg-orange-50 text-orange-700 border-orange-200":e==="L1"?"bg-blue-50 text-blue-700 border-blue-200":"bg-gray-100 text-gray-700 border-gray-200"}function t7(e){return e==="L3"?" ":e==="L2"?"":e==="L1"?"":""}function hje(e){return e==="L3"?"2   ":e==="L2"?"   ":e==="L1"?"/  ":"/ "}function gje(e){return e==="AGENT"?"bg-indigo-50 text-indigo-700 border-indigo-200":e==="HUMAN"?"bg-emerald-50 text-emerald-700 border-emerald-200":"bg-gray-100 text-gray-700 border-gray-200"}function fO(e){return e==="AGENT"?"Agent":e==="HUMAN"?"":""}function xje(e){return[...e.priorityFactors].sort((t,r)=>r.contribution-t.contribution).slice(0,3)}function bje(e,t){return t==="ALL"?!0:t==="NOT_TRIED"?e==="":t==="RETRY_NEEDED"?e===" "||e==="":t==="IN_PROGRESS"?e==="":e===""}function yje(e,t){return t==="ALL"?!0:t==="L3_ONLY"?e==="L3":t==="L2_L3"?e==="L3"||e==="L2":e==="L1"||e==="L0"}function Pz(e){return e.profile.phone.trim().length===0}function vje(e,t,r){const n=e.manager.trim().length>0&&!e.manager.includes(""),s=e.path.includes("")||e.action.includes(""),i=Pz(e);return n?i?{ownerType:"HUMAN",ownerName:e.manager,ownerReason:"      ."}:s?{ownerType:"AGENT",ownerName:e.manager,ownerReason:"       /   ."}:e.risk===""||e.alertTags.includes(" ")||r===""&&(t===" "||t==="")?{ownerType:"HUMAN",ownerName:e.manager,ownerReason:"         ."}:{ownerType:"HUMAN",ownerName:e.manager,ownerReason:"       ."}:s&&!i?{ownerType:"AGENT",ownerName:"  Agent",ownerReason:"        ."}:{ownerType:"UNASSIGNED",ownerName:void 0,ownerReason:i?"           .":"       ."}}function Nje(e,t,r,n){const s=e.alertTags.includes("SLA "),i=e.status===""||e.status===""||s?1:e.status===""?.5:e.status===""?.35:e.status===""?.2:0,o=n>0?(Date.now()-n)/(1e3*60*60):0,l=t===""?.6:o>=48?1:o>=24?.85:o>=12?.55:o>=6?.3:o>=3?.2:.1,d=e.risk===""?1:e.risk===""?.6:.25,u=e.alertTags.includes("High MCI")||e.alertTags.includes(" ")?.2:0,m=Md(d+u),p=t===" "||t===""?1:t===""?.6:t===""?.2:0,g=e.quality===""?.65:e.quality===""?.35:.1,x=Md(g+(r===""?.2:0)+(!e.profile.guardianPhone&&(t===""||t===" ")?.2:0)),y=[{key:"SLA_URGENCY",label:"SLA ",weight:40,value:Md(i),contribution:0},{key:"CONTACT_STALENESS",label:" ",weight:25,value:Md(l),contribution:0},{key:"RISK_LEVEL",label:" ",weight:20,value:Md(m),contribution:0},{key:"RETRY_NEEDED",label:" ",weight:10,value:Md(p),contribution:0},{key:"CHANNEL_FRICTION",label:" ",weight:5,value:Md(x),contribution:0}].map(v=>({...v,contribution:Number((v.weight*v.value).toFixed(1))})),N=Math.round(fje(y.reduce((v,S)=>v+S.contribution,0)));return{priorityScore:N,priorityTier:pje(N),priorityFactors:y,slaUrgencyScore:Md(i)}}function Sje(e){return e===" "?"bg-red-50 text-red-700 border-red-200":e===""?"bg-orange-50 text-orange-700 border-orange-200":e===""?"bg-blue-50 text-blue-700 border-blue-200":e===""?"bg-emerald-50 text-emerald-700 border-emerald-200":"bg-gray-100 text-gray-700 border-gray-200"}function Eje(e){return e===""?"bg-violet-50 text-violet-700 border-violet-200":e===""?"bg-blue-50 text-blue-700 border-blue-200":"bg-emerald-50 text-emerald-700 border-emerald-200"}function jje(e){return e===" "?"bg-gray-100 text-gray-700 border-gray-200":e===" "||e==="Stage2 "?"bg-indigo-50 text-indigo-700 border-indigo-200":e===" "?"bg-violet-50 text-violet-700 border-violet-200":e===" "?"bg-blue-50 text-blue-700 border-blue-200":"bg-orange-50 text-orange-700 border-orange-200"}function wje(e){return e==="AD"?"bg-red-50 text-red-700 border-red-200":e==="MCI"?"bg-orange-50 text-orange-700 border-orange-200":e===""?"bg-emerald-50 text-emerald-700 border-emerald-200":"bg-gray-100 text-gray-700 border-gray-200"}function Aje(e){return e===""?"bg-blue-50 text-blue-700 border-blue-200":"bg-amber-50 text-amber-700 border-amber-200"}function _je(e){return e==="Stage3"?"bg-violet-50 text-violet-700 border-violet-200":e===""?"bg-emerald-50 text-emerald-700 border-emerald-200":"bg-orange-50 text-orange-700 border-orange-200"}function Cje(e){return e===" "?"bg-red-50 text-red-700 border-red-200":e===""?"bg-orange-50 text-orange-700 border-orange-200":"bg-emerald-50 text-emerald-700 border-emerald-200"}function Tje(e){const t=e.status===""?"":e.status===""?"":e.status===""?"":e.status===""?" ":"",r=e.action.includes("")?"":e.action.includes("")||(t===""||t===" ")&&e.profile.guardianPhone?"":"",n=t===""&&(e.risk===""||e.alertTags.includes(" "))?"Stage2 ":t===""||t===""?" ":r!==""&&e.profile.guardianPhone?" ":"",s={" ":5,:4,:3,:2,:1},i=kz(e.updated),o=Pz(e),l=vje(e,t,r),d=Nje(e,t,r,i),u=l.ownerType==="UNASSIGNED"||o?" ":l.ownerType==="AGENT"&&(d.priorityTier==="L3"||d.priorityTier==="L2")?" ":n;return{kind:"Stage 1",stage:"Stage 1",caseId:e.id,manager:e.manager,updated:e.updated,source:e,contactStatus:t,lastContactAttemptAt:uje(e.updated),channel:r,nextAction:u,ownerType:l.ownerType,ownerName:l.ownerName,ownerReason:l.ownerReason,priorityScore:d.priorityScore,priorityTier:d.priorityTier,priorityFactors:d.priorityFactors,statusRank:s[t],lastContactMs:i,slaUrgencyScore:d.slaUrgencyScore,slaHint:e.status===""||e.status===""?e.status:void 0}}function Oje(e){const t=e.computed?.stage2,r=t?.predictedLabel,n=t?.modelAvailable&&r?r===""?"AD":r===""?"":"MCI":"",s=t?.classificationConfirmed?"":"",i=t?.modelAvailable?n===""?"":"Stage3":" ",o=[e.path];t?.missing&&t.missing.length>0&&o.push(` ${t.missing.slice(0,2).join(", ")}`),e.alertTags.length>0&&o.push(` ${e.alertTags.slice(0,2).join(", ")}`),e.quality!==""&&o.push(` ${e.quality}`);const l={AD:4,MCI:3,:2,:1};return{kind:"Stage 2",stage:"Stage 2",caseId:e.id,manager:e.manager,updated:e.updated,source:e,classification:n,rationale:o.join("  "),confirmation:s,nextPath:i,confirmationRank:s===""?2:1,classificationRank:l[n],updatedMs:kz(e.updated)}}function Rje(e){const t=ije(e.id),r=e.computed?.stage3?.originStage2Result??"-",n=e.computed?.stage3?.stage3Type==="AD_MANAGEMENT"?"AD":"",s=Math.round((e.computed?.stage3?.riskNow??0)*100),i=t?.display.trackingStatus??(e.alertTags.includes(" ")||e.status===""?" ":""),o=t?.display.intensity??(i===" "?"":i===""?"":"");return{kind:"Stage 3",stage:"Stage 3",caseId:e.id,manager:e.manager,updated:e.updated,source:e,stage2Result:r,stage3Type:n,currentRiskLabel:n==="AD"?`${s} `:`${s}%`,trackingStatus:i,intensity:o,intensityRank:o===""?3:o===""?2:1,riskRank:s}}const r7={"Stage 1":{operationQuestion:"   ?  ?   ?",operationHint:"Stage 1 /   .",sortLabel:"  ",defaultSortDescending:!0,mapRow:e=>Tje(e),compare:(e,t)=>{const r=e,n=t;return n.priorityScore!==r.priorityScore?n.priorityScore-r.priorityScore:n.slaUrgencyScore!==r.slaUrgencyScore?n.slaUrgencyScore-r.slaUrgencyScore:r.lastContactMs!==n.lastContactMs?r.lastContactMs-n.lastContactMs:n.statusRank-r.statusRank},searchBlob:e=>{const t=e;return[t.caseId,t.contactStatus,t.channel,t.nextAction,t.manager,fO(t.ownerType),t.ownerName??"",t.priorityTier,String(t.priorityScore)].join(" ")},summary:e=>{const t=e;return[{label:" ",value:t.length.toLocaleString(),color:"text-slate-900",icon:Gl},{label:" ",value:t.filter(r=>r.contactStatus!=="").length.toLocaleString(),color:"text-blue-600",icon:Fs},{label:" ",value:t.filter(r=>r.contactStatus===" "||r.contactStatus==="").length.toLocaleString(),color:"text-red-600",icon:ea},{label:"  ",value:t.filter(r=>r.nextAction===" ").length.toLocaleString(),color:"text-indigo-600",icon:Vo},{label:"Stage2  ",value:t.filter(r=>r.nextAction==="Stage2 ").length.toLocaleString(),color:"text-violet-600",icon:Da}]},quickActions:e=>{const t=e;return t.ownerType==="UNASSIGNED"||t.nextAction===" "?[{key:"precheck",label:" ",icon:mm,tone:"text-gray-700 bg-gray-100 border-gray-200 hover:bg-gray-200"},{key:"verify-channel",label:" ",icon:So,tone:"text-blue-700 bg-blue-50 border-blue-100 hover:bg-blue-100"}]:t.ownerType==="AGENT"?[{key:"agent-run",label:t.priorityTier==="L3"||t.priorityTier==="L2"?" Agent ":"Agent  ",icon:So,tone:"text-indigo-700 bg-indigo-50 border-indigo-100 hover:bg-indigo-100"},{key:"agent-status",label:" ",icon:ha,tone:"text-blue-700 bg-blue-50 border-blue-100 hover:bg-blue-100"}]:[{key:"call",label:"",icon:Fs,tone:"text-emerald-700 bg-emerald-50 border-emerald-100 hover:bg-emerald-100"},{key:"guardian",label:" ",icon:D0,tone:t.source.profile.guardianPhone?"text-violet-700 bg-violet-50 border-violet-100 hover:bg-violet-100":"text-gray-400 bg-gray-100 border-gray-200",disabled:!t.source.profile.guardianPhone},{key:"reserve",label:" ",icon:Vo,tone:"text-blue-700 bg-blue-50 border-blue-100 hover:bg-blue-100"}]}},"Stage 2":{operationQuestion:"    ,  ?",operationHint:"Stage 2    .",sortLabel:"  ",defaultSortDescending:!0,mapRow:e=>Oje(e),compare:(e,t)=>{const r=e,n=t;return n.confirmationRank!==r.confirmationRank?n.confirmationRank-r.confirmationRank:n.classificationRank!==r.classificationRank?n.classificationRank-r.classificationRank:n.updatedMs-r.updatedMs},searchBlob:e=>{const t=e;return[t.source.profile.name,t.caseId,t.classification,t.confirmation,t.nextPath,t.rationale,t.manager].join(" ")},summary:e=>{const t=e;return[{label:" ",value:t.length.toLocaleString(),color:"text-slate-900",icon:Gl},{label:" ",value:t.filter(r=>r.confirmation==="").length.toLocaleString(),color:"text-amber-600",icon:ea},{label:" ",value:t.filter(r=>r.confirmation==="").length.toLocaleString(),color:"text-blue-600",icon:D0},{label:"Stage3 ",value:t.filter(r=>r.nextPath==="Stage3").length.toLocaleString(),color:"text-violet-600",icon:Da},{label:"  ",value:t.filter(r=>r.nextPath===" ").length.toLocaleString(),color:"text-orange-600",icon:ha}]},quickActions:()=>[{key:"edit-classification",label:" ",icon:mm,tone:"text-indigo-700 bg-indigo-50 border-indigo-100 hover:bg-indigo-100"},{key:"review-rationale",label:" ",icon:ha,tone:"text-blue-700 bg-blue-50 border-blue-100 hover:bg-blue-100"},{key:"move-stage3",label:"Stage3 ",icon:Da,tone:"text-violet-700 bg-violet-50 border-violet-100 hover:bg-violet-100"}]},"Stage 3":{operationQuestion:" , ,   ?",operationHint:"Stage 3 /  .",sortLabel:"  ",defaultSortDescending:!0,mapRow:e=>Rje(e),compare:(e,t)=>{const r=e,n=t;return n.riskRank!==r.riskRank?n.riskRank-r.riskRank:n.intensityRank!==r.intensityRank?n.intensityRank-r.intensityRank:n.updated.localeCompare(r.updated)},searchBlob:e=>{const t=e;return[t.source.profile.name,t.caseId,t.stage2Result,t.stage3Type,t.currentRiskLabel,t.trackingStatus,t.intensity,t.manager].join(" ")},summary:e=>{const t=e;return[{label:" ",value:t.length.toLocaleString(),color:"text-slate-900",icon:Gl},{label:" ",value:t.filter(r=>r.trackingStatus===" ").length.toLocaleString(),color:"text-red-600",icon:ea},{label:"",value:t.filter(r=>r.trackingStatus==="").length.toLocaleString(),color:"text-orange-600",icon:ha},{label:" ",value:t.filter(r=>r.intensity==="").length.toLocaleString(),color:"text-red-600",icon:D0},{label:"7  ",value:t.filter(r=>r.nextEvalMs-Date.now()<=10080*60*1e3).length.toLocaleString(),color:"text-blue-600",icon:Vo}]},quickActions:()=>[{key:"add-tracking",label:"  ",icon:ha,tone:"text-blue-700 bg-blue-50 border-blue-100 hover:bg-blue-100"},{key:"book-recheck",label:" ",icon:Vo,tone:"text-orange-700 bg-orange-50 border-orange-100 hover:bg-orange-100"},{key:"adjust-intensity",label:"  ",icon:D0,tone:"text-violet-700 bg-violet-50 border-violet-100 hover:bg-violet-100"}]}};function kje({onSelectCase:e,initialFilter:t,externalSearchKeyword:r,onExternalSearchKeywordChange:n,initialViewState:s,onViewStateChange:i}){const{data:o}=eje(),l=o?.items??[],d=h.useMemo(()=>I2e(t),[t]),u=d.stageFilter==="all"?"Stage 1":d.stageFilter,m=h.useMemo(()=>({activeFilterTab:d.alertFilter,stageFilter:u,ownerFilter:"ALL",priorityFilter:"ALL",statusFilter:"ALL",sortDescending:r7[u].defaultSortDescending}),[u,d.alertFilter]),p=s??m,[g,x]=h.useState(p.activeFilterTab),[y,N]=h.useState(p.stageFilter),[v,S]=h.useState(r),[E,C]=h.useState("ALL"),[_,A]=h.useState("ALL"),[T,R]=h.useState("ALL"),[I,k]=h.useState(!1),[w,L]=h.useState(p.sortDescending),[H,B]=h.useState(null),M=h.useRef(null),G=h.useRef(null),$=h.useRef(!1),z=h.useMemo(()=>r7[y],[y]);h.useEffect(()=>{if(!$.current){$.current=!0;return}L(z.defaultSortDescending)},[z.defaultSortDescending,y]),h.useEffect(()=>{y!=="Stage 1"&&k(!1)},[y]),h.useEffect(()=>{S(r)},[r]),h.useEffect(()=>{i?.({activeFilterTab:g,stageFilter:y,ownerFilter:E,priorityFilter:_,statusFilter:T,sortDescending:w})},[g,i,E,_,w,y,T]);const U=le=>{S(le),n(le)};h.useEffect(()=>{if(!I)return;const le=ge=>{G.current&&(G.current.contains(ge.target)||k(!1))};return window.addEventListener("pointerdown",le),()=>window.removeEventListener("pointerdown",le)},[I]);const Z=h.useMemo(()=>{const le=v.trim().toLowerCase();return l.filter(ge=>ge.stage===y).map(ge=>{const _e=z.mapRow(ge);return{item:ge,row:_e,searchBlob:z.searchBlob(_e).toLowerCase()}}).filter(ge=>le?ge.searchBlob.includes(le):!0)},[z,l,v,y]),re=h.useMemo(()=>{const le=Object.fromEntries(vy.map(ge=>[ge,0]));le.=Z.length;for(const ge of vy)ge!==""&&(le[ge]=Z.reduce((_e,ee)=>_e+(qF(ee.item,ge)?1:0),0));return le},[Z]),X=h.useMemo(()=>{const le={"Stage 1":0,"Stage 2":0,"Stage 3":0};for(const ge of l)(ge.stage==="Stage 1"||ge.stage==="Stage 2"||ge.stage==="Stage 3")&&(le[ge.stage]+=1);return le},[l]),F=h.useMemo(()=>{const le=Z.filter(ee=>qF(ee.item,g)).map(ee=>ee.row),_e=[...y==="Stage 1"?le.filter(ee=>{const q=E==="ALL"?!0:ee.ownerType===E,ye=yje(ee.priorityTier,_),pe=bje(ee.contactStatus,T);return q&&ye&&pe}):le].sort(z.compare);return w||_e.reverse(),_e},[g,z,E,_,Z,w,y,T]),te=h.useMemo(()=>z.summary(F),[z,F]),ne=h.useMemo(()=>F.find(le=>le.caseId===H)??null,[H,F]),se=E!=="ALL"||_!=="ALL"||T!=="ALL",Ne=+(E!=="ALL")+ +(_!=="ALL")+ +(T!=="ALL"),fe=g!==""||v.trim().length>0||y==="Stage 1"&&se,we=()=>{C("ALL"),A("ALL"),R("ALL")},ve=()=>{x(""),U(""),we()},Oe=()=>{M.current&&(clearTimeout(M.current),M.current=null)},Fe=(le,ge=0)=>{if(Oe(),ge<=0){B(le);return}M.current=setTimeout(()=>{B(le),M.current=null},ge)},oe=(le=140)=>{Oe(),H&&(M.current=setTimeout(()=>{B(null),M.current=null},le))};return h.useEffect(()=>()=>Oe(),[]),a.jsxs("div",{className:"h-full flex flex-col gap-6",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:te.map((le,ge)=>a.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:le.label}),a.jsx("p",{className:ue("text-xl font-bold mt-1",le.color),children:le.value})]}),a.jsx("div",{className:ue("p-2 rounded-lg bg-gray-50",le.color),children:a.jsx(le.icon,{size:20,className:"opacity-20"})})]},ge))}),a.jsx("div",{className:"flex-1 flex flex-col min-h-0",children:a.jsxs("div",{className:"flex-1 bg-white rounded-xl border border-gray-200 shadow-sm flex flex-col overflow-hidden",children:[a.jsxs("div",{className:"p-4 border-b border-gray-100 bg-gray-50/30 space-y-3",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[a.jsx("div",{className:"flex gap-2 overflow-x-auto pb-1 md:pb-0 scrollbar-hide",children:vy.map(le=>a.jsxs("button",{onClick:()=>x(le),className:ue("group whitespace-nowrap rounded-xl border px-4 py-2 text-[12px] font-bold transition-all duration-200 ease-out active:scale-[0.98]",g===le?"border-blue-600 bg-gradient-to-b from-blue-500 to-blue-700 text-white shadow-[0_10px_20px_-12px_rgba(37,99,235,0.9)]":"border-gray-200 bg-white text-gray-600 shadow-[0_2px_8px_rgba(15,23,42,0.08)] hover:-translate-y-0.5 hover:scale-[1.03] hover:border-blue-200 hover:text-blue-700 hover:shadow-[0_12px_24px_-16px_rgba(37,99,235,0.75)]"),children:[le,a.jsxs("span",{className:ue("ml-1 text-[10px] font-semibold",g===le?"text-blue-100":"text-gray-400 transition-colors group-hover:text-blue-500"),children:["(",re[le].toLocaleString(),")"]})]},le))}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:()=>L(le=>!le),className:"flex items-center gap-1 text-[10px] font-bold text-gray-600 bg-white px-2 py-1 border border-gray-200 rounded",children:[z.sortLabel,a.jsx(EX,{size:10})]}),a.jsx("button",{className:"p-2 text-gray-500 hover:bg-gray-100 rounded-lg border border-gray-200",title:"",children:a.jsx(Xp,{size:16})})]})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsxs("span",{className:"inline-flex items-center gap-1 text-[10px] font-bold text-gray-500 bg-white border border-gray-200 rounded px-2 py-1",children:[a.jsx(mm,{size:10}),"Stage "]}),oje.map(le=>a.jsxs("button",{onClick:()=>N(le.value),className:ue("group rounded-lg border px-3.5 py-1.5 text-[12px] font-semibold transition-all duration-200 ease-out active:scale-[0.98]",y===le.value?"border-[#163b6f] bg-gradient-to-b from-[#244f87] to-[#163b6f] text-white shadow-[0_8px_18px_-12px_rgba(22,59,111,0.9)]":"border-gray-200 bg-white text-gray-600 shadow-[0_1px_6px_rgba(15,23,42,0.06)] hover:-translate-y-0.5 hover:scale-[1.03] hover:border-[#9eb5d8] hover:text-[#163b6f] hover:shadow-[0_10px_20px_-14px_rgba(30,64,175,0.6)]"),children:[le.label,a.jsxs("span",{className:ue("ml-1 text-[10px] font-semibold",y===le.value?"text-blue-100":"text-gray-400 transition-colors group-hover:text-[#295a9d]"),children:["(",X[le.value].toLocaleString(),")"]})]},le.value)),y==="Stage 1"&&a.jsxs("div",{ref:G,className:"relative",children:[a.jsxs("button",{type:"button",onClick:()=>k(le=>!le),"aria-expanded":I,className:ue("inline-flex items-center gap-2 rounded-lg border px-3 py-1.5 text-[11px] font-semibold transition-colors",se?"border-blue-200 bg-blue-50 text-blue-700":"border-gray-200 bg-white text-gray-600 hover:bg-gray-50"),children:[a.jsx(mm,{size:12})," ",Ne>0&&a.jsx("span",{className:"rounded bg-blue-600 px-1.5 py-0.5 text-[10px] font-bold text-white",children:Ne})]}),I&&a.jsx("div",{className:"absolute left-0 top-[calc(100%+8px)] z-40 w-[360px] rounded-xl border border-gray-200 bg-white p-3 shadow-xl",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"mb-1 text-[11px] font-bold text-gray-600",children:""}),a.jsx("div",{className:"flex flex-wrap gap-1",children:lje.map(le=>a.jsx("button",{onClick:()=>C(le.value),className:ue("rounded-md border px-2 py-1 text-[11px] font-semibold transition-colors",E===le.value?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-gray-200 text-gray-600 hover:bg-gray-50"),children:le.label},le.value))})]}),a.jsxs("div",{children:[a.jsx("p",{className:"mb-1 text-[11px] font-bold text-gray-600",children:" "}),a.jsx("div",{className:"flex flex-wrap gap-1",children:cje.map(le=>a.jsx("button",{onClick:()=>A(le.value),className:ue("rounded-md border px-2 py-1 text-[11px] font-semibold transition-colors",_===le.value?"border-orange-200 bg-orange-50 text-orange-700":"border-gray-200 text-gray-600 hover:bg-gray-50"),children:le.label},le.value))})]}),a.jsxs("div",{children:[a.jsx("p",{className:"mb-1 text-[11px] font-bold text-gray-600",children:""}),a.jsx("div",{className:"flex flex-wrap gap-1",children:dje.map(le=>a.jsx("button",{onClick:()=>R(le.value),className:ue("rounded-md border px-2 py-1 text-[11px] font-semibold transition-colors",T===le.value?"border-blue-200 bg-blue-50 text-blue-700":"border-gray-200 text-gray-600 hover:bg-gray-50"),children:le.label},le.value))})]}),a.jsxs("div",{className:"flex items-center justify-between border-t border-gray-100 pt-2",children:[a.jsx("span",{className:"text-[10px] text-gray-500",children:"   ."}),a.jsx("button",{type:"button",onClick:we,className:"text-[11px] font-semibold text-blue-600 hover:text-blue-700",children:"  "})]})]})})]}),y==="Stage 1"&&a.jsx("span",{className:"text-[10px] text-gray-500",children:" //   "}),y==="Stage 1"&&se&&a.jsx("button",{type:"button",onClick:we,className:"inline-flex items-center rounded-md border border-amber-200 bg-amber-50 px-2 py-1 text-[10px] font-semibold text-amber-700 hover:bg-amber-100",children:"  "}),a.jsxs("div",{className:"group relative",children:[a.jsx("span",{className:"inline-flex h-7 w-7 cursor-help items-center justify-center rounded-lg border border-blue-100 bg-blue-50 text-blue-700 shadow-sm transition-colors hover:bg-blue-100",children:a.jsx(hm,{size:13})}),a.jsxs("div",{className:"pointer-events-none invisible absolute left-0 top-full z-30 mt-2 w-[320px] rounded-lg border border-blue-100 bg-white p-3 opacity-0 shadow-xl transition-all duration-150 group-hover:visible group-hover:opacity-100",children:[a.jsx("p",{className:"text-[11px] font-bold text-blue-800",children:" "}),a.jsx("p",{className:"mt-1 text-xs text-gray-800",children:z.operationQuestion}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:z.operationHint})]})]}),a.jsxs("div",{className:"ml-auto flex w-full md:w-[280px] items-center gap-2 rounded-lg border border-gray-200 bg-white px-3 py-1.5",children:[a.jsx(rx,{size:14,className:"text-gray-400"}),a.jsx("input",{value:v,onChange:le=>U(le.target.value),placeholder:"/ID///  ",className:"w-full bg-transparent text-xs text-gray-700 outline-none placeholder:text-gray-400"})]}),fe&&a.jsx("button",{onClick:ve,className:"text-[11px] font-semibold text-blue-600 hover:text-blue-700",children:" "})]})]}),a.jsxs("div",{className:"flex-1 overflow-auto",children:[a.jsxs("table",{className:"w-full text-left border-collapse",children:[y==="Stage 1"&&a.jsxs(a.Fragment,{children:[a.jsx("thead",{className:"sticky top-0 bg-white z-20 shadow-sm",children:a.jsxs("tr",{className:"bg-gray-50/80 text-[11px] font-bold text-gray-500 uppercase tracking-wider",children:[a.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:" "}),a.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:""}),a.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:" "}),a.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:" "}),a.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:"  "}),a.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:" "}),a.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:" "})]})}),a.jsxs("tbody",{className:"text-sm",children:[F.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"px-4 py-16 text-center text-xs text-gray-400",children:"   ."})}),F.map(le=>a.jsxs("tr",{"data-case-id":le.caseId,className:ue("cursor-pointer transition-colors border-b border-gray-50 last:border-0",H===le.caseId?"bg-blue-50/60":"hover:bg-gray-50/70"),onClick:()=>e(le.caseId,le.stage),onMouseEnter:()=>Fe(le.caseId,30),onMouseLeave:()=>oe(150),children:[a.jsxs("td",{className:"px-4 py-3.5",children:[a.jsx("p",{className:"font-mono font-medium text-gray-900",children:le.caseId}),a.jsxs("p",{className:"text-[10px] text-gray-400",children:[" ",le.manager]})]}),a.jsx("td",{className:"px-4 py-3.5",children:a.jsxs("div",{className:"group relative inline-flex flex-col",children:[a.jsx("span",{className:ue("inline-flex w-fit rounded border px-2 py-0.5 text-[10px] font-semibold",gje(le.ownerType)),children:fO(le.ownerType)}),a.jsx("p",{className:"mt-1 text-[10px] text-gray-500",children:le.ownerName??" "}),a.jsx("div",{className:"pointer-events-none invisible absolute left-0 top-[calc(100%+6px)] z-20 w-56 rounded-lg border border-gray-200 bg-white p-2 text-[11px] text-gray-700 opacity-0 shadow-xl transition-all duration-150 group-hover:visible group-hover:opacity-100",children:le.ownerReason})]})}),a.jsx("td",{className:"px-4 py-3.5",children:a.jsxs("div",{className:"group relative inline-flex flex-col",children:[a.jsxs("span",{className:ue("inline-flex w-fit rounded border px-2 py-0.5 text-[10px] font-semibold",mje(le.priorityTier)),children:[le.priorityTier,"  ",t7(le.priorityTier)]}),a.jsxs("p",{className:"mt-1 text-[10px] text-gray-500",children:[hje(le.priorityTier),"   ",le.priorityScore]}),a.jsxs("div",{className:"pointer-events-none invisible absolute left-0 top-[calc(100%+6px)] z-20 w-60 rounded-lg border border-gray-200 bg-white p-2 text-[11px] text-gray-700 opacity-0 shadow-xl transition-all duration-150 group-hover:visible group-hover:opacity-100",children:[a.jsx("p",{className:"font-semibold text-gray-800",children:"  "}),xje(le).map(ge=>a.jsxs("p",{className:"mt-1",children:[" ",ge.label," ",ge.contribution.toFixed(1),""]},`${le.caseId}-${ge.key}`))]})]})}),a.jsxs("td",{className:"px-4 py-3.5",children:[a.jsx("span",{className:ue("rounded border px-2 py-0.5 text-[10px] font-semibold",Sje(le.contactStatus)),children:le.contactStatus}),le.slaHint?a.jsxs("p",{className:"mt-1 text-[10px] text-gray-500",children:["SLA  : ",le.slaHint]}):null]}),a.jsx("td",{className:"px-4 py-3.5 text-xs text-gray-700",children:le.lastContactAttemptAt}),a.jsx("td",{className:"px-4 py-3.5",children:a.jsx("span",{className:ue("rounded border px-2 py-0.5 text-[10px] font-semibold",Eje(le.channel)),children:le.channel})}),a.jsx("td",{className:"px-4 py-3.5",children:a.jsx("span",{className:ue("rounded border px-2 py-0.5 text-[10px] font-semibold",jje(le.nextAction)),children:le.nextAction})})]},le.caseId))]})]}),y==="Stage 2"&&a.jsxs(a.Fragment,{children:[a.jsx("thead",{className:"sticky top-0 bg-white z-20 shadow-sm",children:a.jsxs("tr",{className:"bg-gray-50/80 text-[11px] font-bold text-gray-500 uppercase tracking-wider",children:[a.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:" "}),a.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:""}),a.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:" "}),a.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:"  "}),a.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:"  "}),a.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:" "})]})}),a.jsxs("tbody",{className:"text-sm",children:[F.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"px-4 py-16 text-center text-xs text-gray-400",children:"   ."})}),F.map(le=>a.jsxs("tr",{"data-case-id":le.caseId,className:ue("cursor-pointer transition-colors border-b border-gray-50 last:border-0",H===le.caseId?"bg-blue-50/60":"hover:bg-gray-50/70"),onClick:()=>e(le.caseId,le.stage),onMouseEnter:()=>Fe(le.caseId,30),onMouseLeave:()=>oe(150),children:[a.jsx("td",{className:"px-4 py-3.5",children:a.jsx("p",{className:"font-medium text-gray-900",children:le.source.profile.name})}),a.jsx("td",{className:"px-4 py-3.5",children:a.jsx("p",{className:"text-xs font-semibold text-gray-700",children:le.manager})}),a.jsx("td",{className:"px-4 py-3.5",children:a.jsx("span",{className:ue("rounded border px-2 py-0.5 text-[10px] font-semibold",wje(le.classification)),children:le.classification})}),a.jsx("td",{className:"px-4 py-3.5 text-xs text-gray-700",children:le.rationale}),a.jsx("td",{className:"px-4 py-3.5",children:a.jsx("span",{className:ue("rounded border px-2 py-0.5 text-[10px] font-semibold",Aje(le.confirmation)),children:le.confirmation})}),a.jsx("td",{className:"px-4 py-3.5",children:a.jsx("span",{className:ue("rounded border px-2 py-0.5 text-[10px] font-semibold",_je(le.nextPath)),children:le.nextPath})})]},le.caseId))]})]}),y==="Stage 3"&&a.jsxs(a.Fragment,{children:[a.jsx("thead",{className:"sticky top-0 bg-white z-20 shadow-sm",children:a.jsxs("tr",{className:"bg-gray-50/80 text-[11px] font-bold text-gray-500 uppercase tracking-wider",children:[a.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:""}),a.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:"Stage2 "}),a.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:"Stage3 "}),a.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:" "}),a.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:" "}),a.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:""})]})}),a.jsxs("tbody",{className:"text-sm",children:[F.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"px-4 py-16 text-center text-xs text-gray-400",children:"   ."})}),F.map(le=>a.jsxs("tr",{"data-case-id":le.caseId,className:ue("cursor-pointer transition-colors border-b border-gray-50 last:border-0",H===le.caseId?"bg-blue-50/60":"hover:bg-gray-50/70"),onClick:()=>e(le.caseId,le.stage),onMouseEnter:()=>Fe(le.caseId,30),onMouseLeave:()=>oe(150),children:[a.jsx("td",{className:"px-4 py-3.5",children:a.jsx("p",{className:"font-medium text-gray-900",children:le.source.profile.name})}),a.jsx("td",{className:"px-4 py-3.5",children:a.jsx("span",{className:ue("rounded border px-2 py-0.5 text-[10px] font-semibold",le.stage2Result==="AD"?"bg-violet-50 text-violet-700 border-violet-200":le.stage2Result==="MCI-HIGH"?"bg-red-50 text-red-700 border-red-200":le.stage2Result==="MCI-MID"?"bg-orange-50 text-orange-700 border-orange-200":"bg-gray-100 text-gray-700 border-gray-200"),children:le.stage2Result})}),a.jsx("td",{className:"px-4 py-3.5",children:a.jsx("span",{className:ue("rounded border px-2 py-0.5 text-[10px] font-semibold",le.stage3Type==="AD"?"bg-violet-50 text-violet-700 border-violet-200":"bg-blue-50 text-blue-700 border-blue-200"),children:le.stage3Type})}),a.jsx("td",{className:"px-4 py-3.5 text-xs text-gray-700",children:le.currentRiskLabel}),a.jsx("td",{className:"px-4 py-3.5",children:a.jsx("span",{className:ue("rounded border px-2 py-0.5 text-[10px] font-semibold",Cje(le.trackingStatus)),children:le.trackingStatus})}),a.jsxs("td",{className:"px-4 py-3.5",children:[a.jsx("p",{className:"text-xs font-semibold text-gray-700",children:le.manager}),a.jsxs("p",{className:"text-[10px] text-gray-400",children:[" ",le.intensity]})]})]},le.caseId))]})]})]}),ne&&a.jsxs("div",{className:"fixed z-50 w-64 rounded-xl border border-gray-200 bg-white p-4 shadow-2xl",style:{top:(()=>{const le=document.querySelector(`tr[data-case-id="${ne.caseId}"]`);if(!le)return 180;const ge=le.getBoundingClientRect(),_e=250,ee=ge.top+ge.height/2-_e/2;return Math.max(80,Math.min(ee,window.innerHeight-_e-20))})(),right:24},onMouseEnter:()=>Oe(),onMouseLeave:()=>oe(120),children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wide text-gray-400",children:" "}),a.jsx("p",{className:ue("mt-0.5 text-sm font-bold text-blue-700",ne.kind==="Stage 1"?"font-mono":"font-sans"),children:ne.kind==="Stage 1"?ne.caseId:ne.source.profile.name}),a.jsxs("p",{className:"mt-0.5 text-[11px] text-gray-500",children:[" ",ne.manager]})]}),a.jsxs("div",{className:"mb-3 rounded-lg border border-gray-100 bg-gray-50 p-2 text-[11px] text-gray-700",children:[ne.kind==="Stage 1"&&a.jsxs("p",{children:[fO(ne.ownerType),"  ",ne.priorityTier," ",t7(ne.priorityTier),"(",ne.priorityScore,")   ",ne.contactStatus,"   ",ne.nextAction]}),ne.kind==="Stage 2"&&a.jsxs("p",{children:[" ",ne.classification,"  ",ne.confirmation,"   ",ne.nextPath]}),ne.kind==="Stage 3"&&a.jsxs("p",{children:[ne.stage2Result,"  ",ne.stage3Type,"   ",ne.currentRiskLabel,"   ",ne.trackingStatus]})]}),a.jsx("div",{className:"mb-3 grid grid-cols-2 gap-1.5",children:z.quickActions(ne).map(le=>a.jsxs("button",{onClick:ge=>ge.stopPropagation(),disabled:le.disabled,className:ue("inline-flex items-center gap-1 rounded-lg border px-2 py-2 text-[11px] font-semibold",le.tone,le.disabled?"cursor-not-allowed opacity-70":"cursor-pointer"),children:[a.jsx(le.icon,{size:12}),le.label]},`${ne.caseId}-${le.key}`))}),a.jsx("button",{className:"w-full rounded-lg bg-blue-600 py-2 text-[11px] font-bold text-white hover:bg-blue-700",onClick:()=>e(ne.caseId,ne.stage),children:" "})]})]}),a.jsxs("div",{className:"p-3 bg-gray-50 text-[10px] text-gray-500 border-t border-gray-100 flex items-center justify-between",children:[a.jsxs("span",{children:[y,"  : 1 - ",F.length," of ",l.filter(le=>le.stage===y).length]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"italic",children:"Stage  ///  ."}),a.jsxs("span",{className:"inline-flex items-center gap-1",children:[a.jsx(ha,{size:10}),"   "]})]})]})]})})]})}function ho(e){return String(e).padStart(2,"0")}function Pje(e){const t=new Date(e);return`${ho(t.getHours())}:${ho(t.getMinutes())}`}function Bc(e){return`${e.getFullYear()}-${ho(e.getMonth()+1)}-${ho(e.getDate())}`}function Bb(e){const[t,r,n]=e.split("-").map(Number);return new Date(t,(r||1)-1,n||1)}function Sy(e,t){const r=new Date(e);return r.setDate(e.getDate()+t),r}function Dje(e,t){const r=new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime(),n=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime();return Math.round((n-r)/(1440*60*1e3))}function Ije(e){return e==="pending"?"":e==="completed"?"":e==="cancelled"?"":""}function Mje(e){return e.includes("2 ")?"":e.includes("")?"":e.includes("")?"":e.includes("")?"":""}function XA(e,t){return t===""||e==="high"?"":e==="medium"?"":""}function Lje(e){const t=(e||"").toUpperCase();return t.includes("APPOINT")?"":t.includes("RECONTACT")||t.includes("CALL")?"":t.includes("FOLLOWUP")?"":t.includes("REFERRAL")?"":t.includes("EXAM")?"":""}function $je(e){const t=(e||"").toUpperCase();return t.includes("DONE")||t.includes("COMPLETED")?"":t.includes("CANCEL")?"":t.includes("QUEUED")||t.includes("WAIT")?"":t.includes("DELAY")||t.includes("OVERDUE")?"":""}function n7(e){return e===""?{icon:Fs,chip:"bg-blue-500 text-white"}:e===""?{icon:Vo,chip:"bg-emerald-500 text-white"}:e===""?{icon:oh,chip:"bg-violet-500 text-white"}:e===""?{icon:IZ,chip:"bg-indigo-600 text-white"}:{icon:Da,chip:"bg-cyan-600 text-white"}}function a7(e){return e===""?"text-red-700 bg-red-50 border-red-100":e===""?"text-amber-700 bg-amber-50 border-amber-100":e===""?"text-gray-600 bg-gray-50 border-gray-200":e===""?"text-slate-600 bg-slate-100 border-slate-200":"text-emerald-700 bg-emerald-50 border-emerald-100"}function s7(e){return e===""?"text-red-700 bg-red-50 border-red-100":e===""?"text-orange-700 bg-orange-50 border-orange-100":"text-blue-700 bg-blue-50 border-blue-100"}function QA(e){return e==="high"?{label:"",tone:"text-red-700 bg-red-50 border-red-100"}:e==="medium"?{label:"",tone:"text-amber-700 bg-amber-50 border-amber-100"}:{label:"",tone:"text-emerald-700 bg-emerald-50 border-emerald-100"}}function i7(e){return{title:"",caseId:"",patientName:"",patientAge:"70",date:e,time:"09:00",durationMinutes:"30",type:"",status:"",priority:"",riskLevel:"medium",assignee:"",location:"",reservationType:"",contactStatus:"",consultStatus:"",secondExamStatus:"",phone:"",guardianPhone:"",reminderSent:!1,reminderChannel:"SMS",followUpRequired:!1,reasonText:"",notes:""}}function Fje(e){return{title:e.title,caseId:e.caseId,patientName:e.patientName,patientAge:String(e.patientAge||70),date:e.date,time:e.time,durationMinutes:String(e.durationMinutes||30),type:e.type,status:e.status,priority:e.priority,riskLevel:e.riskLevel,assignee:e.assignee,location:e.location??"",reservationType:e.reservationType??"",contactStatus:e.contactStatus??"",consultStatus:e.consultStatus??"",secondExamStatus:e.secondExamStatus??"",phone:e.phone??"",guardianPhone:e.guardianPhone??"",reminderSent:e.reminderSent,reminderChannel:e.reminderChannel,followUpRequired:e.followUpRequired,reasonText:e.reasonText??"",notes:e.notes??""}}function Uje(e){const t=iz(),r=q2e(t).slice(0,24),n=new Map(t.map(l=>[l.id,l])),s=r.map((l,d)=>{const u=Ije(l.status),m=Mje(l.type),p=Bc(Sy(e,d%17-6)),g=d%2===0?"00":"30",x=n.get(l.caseId);return{id:`SCH-APT-${ho(d+1)}`,caseId:l.caseId,patientName:l.patientName,patientAge:l.patientAge||0,date:p,time:l.time||`${ho(9+d%8)}:${g}`,durationMinutes:m===""?60:30,type:m,status:u,priority:XA(l.riskLevel,u),riskLevel:l.riskLevel,title:l.type,assignee:l.counselor,location:x?.reservation?.locationText,reservationType:l.reservationType,contactStatus:l.caseContactStatus,consultStatus:l.caseConsultStatus,secondExamStatus:l.caseSecondExamStatus,phone:l.phone,guardianPhone:x?.guardianPhone,reminderSent:l.status==="reminder_sent"||!!l.reminderSent,reminderChannel:"SMS",followUpRequired:u===""||l.riskLevel==="high",reasonText:l.reasonText,notes:l.notes,autoMemoRecent:l.autoMemoRecent}}),i=t.filter(l=>l.contactStatus==="UNREACHED").slice(0,8).map((l,d)=>{const u=d%4===0?"":d%3===0?"":"";return{id:`SCH-CALL-${ho(d+1)}`,caseId:l.id,patientName:l.patientName,patientAge:l.age,date:Bc(Sy(e,d%9-2)),time:`${ho(10+d%6)}:${d%2===0?"00":"30"}`,durationMinutes:20,type:"",status:u,priority:XA(l.riskLevel,u),riskLevel:l.riskLevel,title:"  ",assignee:l.counselor,contactStatus:l.contactStatus,consultStatus:l.consultStatus,secondExamStatus:l.secondExamStatus,phone:l.phone,guardianPhone:l.guardianPhone,reminderSent:!1,reminderChannel:"",followUpRequired:!0,reasonText:"    ",notes:"3      ",autoMemoRecent:l.autoMemo.lines.slice(-3)}}),o=t.filter(l=>l.consultStatus!=="NOT_STARTED").slice(0,8).map((l,d)=>{const u=d%2===0,m=d%5===0?"":"";return{id:`SCH-SVC-${ho(d+1)}`,caseId:l.id,patientName:l.patientName,patientAge:l.age,date:Bc(Sy(e,d+1)),time:`${ho(9+d%7)}:${d%3===0?"00":"30"}`,durationMinutes:u?50:40,type:u?"":"",status:m,priority:XA(l.riskLevel,m),riskLevel:l.riskLevel,title:u?"  ":"   ",assignee:l.counselor,location:u?l.reservation?.locationText??"    ":" /",reservationType:l.reservation?.type,contactStatus:l.contactStatus,consultStatus:l.consultStatus,secondExamStatus:l.secondExamStatus,phone:l.phone,guardianPhone:l.guardianPhone,reminderSent:d%3===0,reminderChannel:u?"":"SMS",followUpRequired:l.secondExamStatus==="SCHEDULED"||m==="",reasonText:l.reservation?.reasonText??"   ",notes:l.autoMemo.lines.slice(-2).join(" / "),autoMemoRecent:l.autoMemo.lines.slice(-3)}});return[...s,...i,...o].sort((l,d)=>`${l.date} ${l.time}`.localeCompare(`${d.date} ${d.time}`))}function Bje(){const[e,t]=h.useState("month"),[r,n]=h.useState(()=>{const ee=new Date;return new Date(ee.getFullYear(),ee.getMonth(),1)}),[s,i]=h.useState(()=>Bc(new Date)),[o,l]=h.useState(!1),[d,u]=h.useState(null),[m,p]=h.useState(!1),[g,x]=h.useState("create"),[y,N]=h.useState(null),[v,S]=h.useState(()=>i7(Bc(new Date))),[E,C]=h.useState(""),[_,A]=h.useState(""),[T,R]=h.useState(""),[I,k]=h.useState(""),w=new Date,L=Bc(w),[H,B]=h.useState(()=>Uje(w)),[M,G]=h.useState(null);h.useEffect(()=>{let ee=!0,q=null,ye=0;const pe=async()=>{try{const he=await fetch(`/api/local-center/calendar/events?_=${Date.now()}`,{cache:"no-store"});if(!he.ok)throw new Error(`remote calendar fetch failed (${he.status})`);const rt=await he.json(),Me=(rt.items??[]).map(dt=>{const St=new Date(dt.startAt);return{id:`REMOTE-${dt.eventId}`,caseId:dt.caseId,patientName:`-${dt.caseId.slice(-4)}`,patientAge:0,date:Bc(St),time:Pje(dt.startAt),durationMinutes:dt.durationMin??30,type:Lje(dt.type),status:$je(dt.status??"SCHEDULED"),priority:dt.priority?.toUpperCase()==="HIGH"?"":"",riskLevel:"medium",title:dt.title||" ",assignee:" ",location:void 0,reminderSent:!1,reminderChannel:"SMS",followUpRequired:!1,notes:"API  "}});if(!ee)return;B(dt=>[...dt.filter(He=>!He.id.startsWith("REMOTE-")),...Me].sort((He,Ye)=>`${He.date} ${He.time}`.localeCompare(`${Ye.date} ${Ye.time}`))),ye=0,G(rt.degraded?"     .":null)}catch(he){if(!ee)return;ye+=1,console.error("calendar sync failed",he),ye>=3&&G("    .    .")}finally{ee&&(q=window.setTimeout(pe,2e4))}};return pe(),()=>{ee=!1,q!==null&&window.clearTimeout(q)}},[]);const $=h.useMemo(()=>H.find(ee=>ee.id===d)??null,[H,d]),z=h.useMemo(()=>Array.from(new Set(H.map(ee=>ee.assignee))).sort((ee,q)=>ee.localeCompare(q,"ko")),[H]),U=h.useMemo(()=>{const ee=E.trim().toLowerCase();return H.filter(q=>_!==""&&q.status!==_||T!==""&&q.type!==T||I!==""&&q.assignee!==I?!1:ee?[q.caseId,q.patientName,q.title,q.assignee,q.location,q.reasonText].filter(Boolean).join(" ").toLowerCase().includes(ee):!0)},[H,E,_,T,I]),Z=h.useMemo(()=>{const ee=r.getFullYear(),q=r.getMonth(),ye=new Date(ee,q,1).getDay(),pe=new Date(ee,q+1,0).getDate(),he=[];for(let rt=0;rt<ye;rt+=1)he.push(null);for(let rt=1;rt<=pe;rt+=1)he.push(rt);for(;he.length%7!==0;)he.push(null);return he},[r]),re=h.useMemo(()=>{const ee=new Map;for(const q of U){const ye=ee.get(q.date)??[];ye.push(q),ee.set(q.date,ye)}for(const q of ee.values())q.sort((ye,pe)=>ye.time.localeCompare(pe.time));return ee},[U]),X=h.useMemo(()=>U.filter(ee=>{if(ee.status!==""&&ee.status!==""||ee.reminderSent)return!1;const q=Dje(w,Bb(ee.date));return q>=0&&q<=3}),[U,w]),F=U.filter(ee=>ee.status===""),te=U.filter(ee=>ee.riskLevel==="high"),ne=re.get(L)??[],se=re.get(s)??[],Ne=h.useMemo(()=>{if(e==="month")return[];if(e==="day")return[s];const ee=Bb(s),q=new Date(ee);return q.setDate(ee.getDate()-ee.getDay()),Array.from({length:7}).map((ye,pe)=>Bc(Sy(q,pe)))},[e,s]),fe=`${r.getFullYear()} ${r.getMonth()+1}`,we=ee=>{n(q=>new Date(q.getFullYear(),q.getMonth()+ee,1))},ve=()=>{C(""),A(""),R(""),k("")},Oe=()=>{x("create"),N(null),S(i7(s)),p(!0)},Fe=ee=>{u(ee),l(!0)},oe=()=>{$&&(x("edit"),N($.id),S(Fje($)),l(!1),p(!0))},le=(ee,q)=>{S(ye=>({...ye,[ee]:q}))},ge=()=>{if(!v.title.trim()||!v.caseId.trim()||!v.patientName.trim()||!v.date||!v.time||!v.assignee.trim()){window.alert(" (,  ID, , , , ) .");return}const ee=Number(v.patientAge),q=Number(v.durationMinutes),ye=v.notes.trim(),pe=g==="create"?`SCH-${Date.now()}`:y??`SCH-${Date.now()}`,he={id:pe,caseId:v.caseId.trim(),patientName:v.patientName.trim(),patientAge:Number.isFinite(ee)&&ee>0?Math.round(ee):0,date:v.date,time:v.time,durationMinutes:Number.isFinite(q)&&q>0?Math.round(q):30,type:v.type,status:v.status,priority:v.priority,riskLevel:v.riskLevel,title:v.title.trim(),assignee:v.assignee.trim(),location:v.location.trim()||void 0,reservationType:v.reservationType||void 0,contactStatus:v.contactStatus||void 0,consultStatus:v.consultStatus||void 0,secondExamStatus:v.secondExamStatus||void 0,phone:v.phone.trim()||void 0,guardianPhone:v.guardianPhone.trim()||void 0,reminderSent:v.reminderSent,reminderChannel:v.reminderChannel,followUpRequired:v.followUpRequired,reasonText:v.reasonText.trim()||void 0,notes:ye||void 0,autoMemoRecent:ye?ye.split(`
`).map(Me=>Me.trim()).filter(Boolean).slice(0,3).map(Me=>`: ${Me}`):void 0};g==="create"?B(Me=>[he,...Me]):(B(Me=>Me.map(dt=>dt.id===pe?he:dt)),u(pe),l(!0));const rt=Bb(he.date);i(he.date),n(new Date(rt.getFullYear(),rt.getMonth(),1)),p(!1),N(null)},_e=()=>{!$||!window.confirm("  ?")||(B(q=>q.filter(ye=>ye.id!==$.id)),u(null),l(!1))};return a.jsxs("div",{className:"space-y-5",children:[M?a.jsx("section",{className:"rounded-xl border border-red-200 bg-red-50 px-4 py-3",children:a.jsxs("p",{className:"text-xs font-semibold text-red-700",children:["   : ",M]})}):null,X.length>0&&a.jsx("section",{className:"rounded-xl border border-amber-200 bg-amber-50 px-4 py-3",children:a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(TX,{size:16,className:"text-amber-700"}),a.jsxs("p",{className:"text-sm font-semibold text-amber-900",children:["   ",X.length,""]})]}),a.jsx("span",{className:"rounded-md border border-amber-300 bg-white px-2.5 py-1 text-[11px] font-semibold text-amber-800",children:"3  / "})]})}),a.jsxs("section",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2 xl:grid-cols-4",children:[a.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsx("p",{className:"text-[11px] font-semibold text-gray-500",children:"  "}),a.jsx("p",{className:"mt-1 text-2xl font-bold text-gray-900",children:U.length}),a.jsxs("p",{className:"mt-1 text-[11px] text-gray-500",children:[" ",H.length," "]})]}),a.jsxs("div",{className:"rounded-xl border border-blue-200 bg-blue-50 p-4",children:[a.jsx("p",{className:"text-[11px] font-semibold text-blue-700",children:" "}),a.jsx("p",{className:"mt-1 text-2xl font-bold text-blue-900",children:ne.length}),a.jsx("p",{className:"mt-1 text-[11px] text-blue-700",children:"   "})]}),a.jsxs("div",{className:"rounded-xl border border-red-200 bg-red-50 p-4",children:[a.jsx("p",{className:"text-[11px] font-semibold text-red-700",children:" "}),a.jsx("p",{className:"mt-1 text-2xl font-bold text-red-900",children:F.length}),a.jsx("p",{className:"mt-1 text-[11px] text-red-700",children:"SLA  "})]}),a.jsxs("div",{className:"rounded-xl border border-orange-200 bg-orange-50 p-4",children:[a.jsx("p",{className:"text-[11px] font-semibold text-orange-700",children:" "}),a.jsx("p",{className:"mt-1 text-2xl font-bold text-orange-900",children:te.length}),a.jsx("p",{className:"mt-1 text-[11px] text-orange-700",children:"  "})]})]}),a.jsx("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:a.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[a.jsxs("div",{className:"min-w-[220px] flex-1",children:[a.jsx($t,{className:"text-xs text-gray-600",children:""}),a.jsxs("div",{className:"relative mt-1.5",children:[a.jsx(rx,{size:14,className:"pointer-events-none absolute left-2.5 top-1/2 -translate-y-1/2 text-gray-400"}),a.jsx($r,{value:E,onChange:ee=>C(ee.target.value),className:"pl-8",placeholder:" ID, , , "})]})]}),a.jsxs("div",{className:"w-[150px]",children:[a.jsx($t,{className:"text-xs text-gray-600",children:""}),a.jsx("select",{value:_,onChange:ee=>A(ee.target.value),className:"mt-1.5 h-9 w-full rounded-md border border-gray-200 bg-white px-3 text-sm outline-none focus:ring-2 focus:ring-blue-200",children:["","","","","",""].map(ee=>a.jsx("option",{value:ee,children:ee},ee))})]}),a.jsxs("div",{className:"w-[150px]",children:[a.jsx($t,{className:"text-xs text-gray-600",children:""}),a.jsx("select",{value:T,onChange:ee=>R(ee.target.value),className:"mt-1.5 h-9 w-full rounded-md border border-gray-200 bg-white px-3 text-sm outline-none focus:ring-2 focus:ring-blue-200",children:["","","","","",""].map(ee=>a.jsx("option",{value:ee,children:ee},ee))})]}),a.jsxs("div",{className:"w-[150px]",children:[a.jsx($t,{className:"text-xs text-gray-600",children:""}),a.jsxs("select",{value:I,onChange:ee=>k(ee.target.value),className:"mt-1.5 h-9 w-full rounded-md border border-gray-200 bg-white px-3 text-sm outline-none focus:ring-2 focus:ring-blue-200",children:[a.jsx("option",{value:"",children:""}),z.map(ee=>a.jsx("option",{value:ee,children:ee},ee))]})]}),a.jsxs(jt,{variant:"outline",onClick:ve,className:"h-9",children:[a.jsx(mm,{size:14,className:"mr-1"})," "]})]})}),a.jsxs("div",{className:"grid grid-cols-1 gap-5 xl:grid-cols-12",children:[a.jsxs("section",{className:"xl:col-span-8 rounded-xl border border-gray-200 bg-white shadow-sm",children:[a.jsx("header",{className:"border-b border-gray-100 px-4 py-3",children:a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900",children:fe}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>we(-1),className:"rounded border border-gray-200 p-1 text-gray-600 hover:bg-gray-50",children:a.jsx(dm,{size:15})}),a.jsx("button",{onClick:()=>we(1),className:"rounded border border-gray-200 p-1 text-gray-600 hover:bg-gray-50",children:a.jsx(di,{size:15})})]}),a.jsx("button",{onClick:()=>{const ee=new Date;n(new Date(ee.getFullYear(),ee.getMonth(),1)),i(Bc(ee))},className:"text-xs font-semibold text-gray-500 hover:text-gray-800",children:""})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-1 text-[11px] font-semibold",children:["month","week","day"].map(ee=>a.jsx("button",{onClick:()=>t(ee),className:ue("rounded-md px-2.5 py-1",e===ee?"bg-white text-gray-900 shadow-sm":"text-gray-500"),children:ee==="month"?"":ee==="week"?"":""},ee))}),a.jsxs("button",{onClick:Oe,className:"inline-flex items-center gap-1 rounded-md bg-[#163b6f] px-3 py-1.5 text-xs font-semibold text-white",children:[a.jsx(xU,{size:13})," "]})]})]})}),a.jsx("div",{className:"px-3 pb-3 pt-2",children:e==="month"?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"grid grid-cols-7 border-b border-gray-100 pb-2 text-center text-[10px] font-bold uppercase tracking-wider text-gray-400",children:["","","","","","",""].map(ee=>a.jsx("div",{children:ee},ee))}),a.jsx("div",{className:"grid grid-cols-7 gap-1 pt-2",children:Z.map((ee,q)=>{if(!ee)return a.jsx("div",{className:"min-h-[92px] rounded-lg border border-transparent bg-gray-50/40"},`empty-${q}`);const ye=`${r.getFullYear()}-${ho(r.getMonth()+1)}-${ho(ee)}`,pe=re.get(ye)??[],he=ye===L,rt=ye===s;return a.jsxs("button",{onClick:()=>i(ye),className:ue("min-h-[92px] rounded-lg border p-2 text-left transition-colors",rt?"border-blue-300 bg-blue-50":"border-gray-100 bg-white hover:border-gray-200 hover:bg-gray-50",he&&!rt?"border-emerald-300":""),children:[a.jsxs("div",{className:"mb-1 flex items-center justify-between",children:[a.jsx("span",{className:ue("inline-flex h-5 w-5 items-center justify-center rounded-full text-[10px] font-bold",he?"bg-emerald-500 text-white":"text-gray-600"),children:ee}),a.jsx("span",{className:"text-[10px] text-gray-400",children:pe.length?`${pe.length}`:""})]}),a.jsxs("div",{className:"space-y-1",children:[pe.slice(0,3).map(Me=>{const dt=n7(Me.type),St=dt.icon;return a.jsxs("button",{onClick:He=>{He.stopPropagation(),Fe(Me.id)},className:ue("flex w-full items-center gap-1 rounded px-1 py-0.5 text-[10px] font-semibold transition-opacity hover:opacity-90",dt.chip,Me.riskLevel==="high"?"ring-1 ring-red-300":""),children:[a.jsx(St,{size:9}),a.jsxs("span",{className:"truncate",children:[Me.time," ",Me.patientName]})]},Me.id)}),pe.length>3?a.jsxs("p",{className:"text-[10px] text-gray-500",children:["+",pe.length-3,""]}):null]})]},ye)})}),a.jsx("div",{className:"mt-3 grid grid-cols-2 gap-2 border-t border-gray-100 pt-3 text-[11px] md:grid-cols-5",children:["","","","",""].map(ee=>{const ye=n7(ee).icon;return a.jsxs("div",{className:"inline-flex items-center gap-1 rounded border border-gray-100 bg-gray-50 px-2 py-1 text-gray-600",children:[a.jsx(ye,{size:11}),ee]},ee)})})]}):a.jsx("div",{className:"space-y-3 pt-2",children:Ne.map(ee=>{const q=re.get(ee)??[],ye=Bb(ee).toLocaleDateString("ko-KR",{month:"long",day:"numeric",weekday:"short"});return a.jsxs("section",{className:"rounded-lg border border-gray-200",children:[a.jsxs("header",{className:"flex items-center justify-between border-b border-gray-100 px-3 py-2",children:[a.jsx("button",{onClick:()=>i(ee),className:ue("text-sm font-semibold",ee===s?"text-blue-700":"text-gray-800"),children:ye}),a.jsxs("span",{className:"text-[11px] text-gray-500",children:[q.length,""]})]}),a.jsx("div",{className:"space-y-2 p-2",children:q.length===0?a.jsx("p",{className:"rounded-md border border-gray-100 bg-gray-50 px-3 py-2 text-xs text-gray-500",children:"  ."}):q.map(pe=>a.jsxs("button",{onClick:()=>Fe(pe.id),className:"w-full rounded-md border border-gray-100 bg-white px-3 py-2 text-left text-xs transition-colors hover:border-blue-200 hover:bg-blue-50/30",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("p",{className:"font-semibold text-gray-900",children:[pe.time,"  ",pe.title]}),a.jsx("span",{className:ue("rounded border px-1.5 py-0.5 text-[10px] font-semibold",a7(pe.status)),children:pe.status})]}),a.jsxs("p",{className:"mt-1 text-[11px] text-gray-600",children:[pe.caseId,"  ",pe.patientName,"   ",pe.assignee]})]},pe.id))})]},ee)})})})]}),a.jsxs("aside",{className:"space-y-4 xl:col-span-4 xl:sticky xl:top-4 xl:self-start xl:max-h-[calc(100vh-132px)] xl:overflow-y-auto xl:pr-1",children:[a.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsxs("h3",{className:"flex items-center gap-2 text-sm font-bold text-gray-900",children:[a.jsx(w1,{size:14,className:"text-blue-600"})," "]}),a.jsx("div",{className:"mt-3 space-y-2",children:ne.length===0?a.jsx("p",{className:"rounded-md border border-gray-100 bg-gray-50 px-3 py-2 text-xs text-gray-500",children:"  ."}):ne.map(ee=>a.jsxs("button",{onClick:()=>Fe(ee.id),className:"w-full rounded-md border border-gray-100 bg-gray-50 px-3 py-2 text-left text-xs transition-colors hover:border-blue-200 hover:bg-blue-50/40",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("p",{className:"font-semibold text-gray-800",children:[ee.time,"  ",ee.title]}),a.jsx("span",{className:ue("rounded border px-1.5 py-0.5 text-[10px] font-semibold",s7(ee.priority)),children:ee.priority})]}),a.jsxs("p",{className:"mt-1 text-[11px] text-gray-500",children:[ee.caseId,"  ",ee.patientName]})]},ee.id))})]}),a.jsxs("section",{className:"rounded-xl border border-red-200 bg-red-50 p-4",children:[a.jsxs("h3",{className:"flex items-center gap-2 text-sm font-bold text-red-800",children:[a.jsx(ea,{size:14})," "]}),a.jsx("div",{className:"mt-3 space-y-2",children:F.length===0?a.jsx("p",{className:"rounded-md border border-red-100 bg-white px-3 py-2 text-xs text-red-700",children:"  ."}):F.slice(0,8).map(ee=>a.jsxs("button",{onClick:()=>Fe(ee.id),className:"w-full rounded-md border border-red-100 bg-white px-3 py-2 text-left text-xs transition-colors hover:border-red-200 hover:bg-red-50",children:[a.jsxs("p",{className:"font-semibold text-gray-900",children:[ee.caseId,"  ",ee.patientName]}),a.jsx("p",{className:"mt-0.5 text-red-700",children:ee.title}),a.jsxs("p",{className:"mt-1 text-[11px] text-gray-500",children:[ee.date," ",ee.time]})]},ee.id))})]}),a.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsx("h3",{className:"text-sm font-bold text-gray-900",children:"  "}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:s}),a.jsx("div",{className:"mt-3 space-y-2",children:se.length===0?a.jsx("p",{className:"rounded-md border border-gray-100 bg-gray-50 px-3 py-2 text-xs text-gray-500",children:"   ."}):se.map(ee=>{const q=QA(ee.riskLevel);return a.jsxs("button",{onClick:()=>Fe(ee.id),className:"w-full rounded-md border border-gray-100 bg-gray-50 px-3 py-2 text-left text-xs transition-colors hover:border-gray-200 hover:bg-white",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("p",{className:"font-semibold text-gray-900",children:[ee.time,"  ",ee.type]}),a.jsx("span",{className:ue("rounded border px-1.5 py-0.5 text-[10px] font-semibold",q.tone),children:q.label})]}),a.jsx("p",{className:"mt-1 text-gray-700",children:ee.title}),a.jsxs("p",{className:"mt-1 text-[11px] text-gray-500",children:[ee.caseId,"   ",ee.assignee]})]},ee.id)})})]})]})]}),a.jsx(gf,{open:m,onOpenChange:p,children:a.jsxs(xf,{className:"max-h-[85vh] max-w-3xl overflow-y-auto",children:[a.jsxs(Fy,{children:[a.jsx(Uy,{children:g==="create"?" ":" "}),a.jsx(gC,{children:"v1         ."})]}),a.jsxs("div",{className:"space-y-4 py-2",children:[a.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx($t,{children:" *"}),a.jsx($r,{value:v.title,onChange:ee=>le("title",ee.target.value),className:"mt-1.5"})]}),a.jsxs("div",{children:[a.jsx($t,{children:" ID *"}),a.jsx($r,{value:v.caseId,onChange:ee=>le("caseId",ee.target.value),className:"mt-1.5"})]}),a.jsxs("div",{children:[a.jsx($t,{children:" *"}),a.jsx($r,{value:v.patientName,onChange:ee=>le("patientName",ee.target.value),className:"mt-1.5"})]}),a.jsxs("div",{children:[a.jsx($t,{children:""}),a.jsx($r,{type:"number",min:0,value:v.patientAge,onChange:ee=>le("patientAge",ee.target.value),className:"mt-1.5"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-4",children:[a.jsxs("div",{children:[a.jsx($t,{children:" *"}),a.jsx($r,{type:"date",value:v.date,onChange:ee=>le("date",ee.target.value),className:"mt-1.5"})]}),a.jsxs("div",{children:[a.jsx($t,{children:" *"}),a.jsx($r,{type:"time",value:v.time,onChange:ee=>le("time",ee.target.value),className:"mt-1.5"})]}),a.jsxs("div",{children:[a.jsx($t,{children:"()"}),a.jsx($r,{type:"number",min:10,step:10,value:v.durationMinutes,onChange:ee=>le("durationMinutes",ee.target.value),className:"mt-1.5"})]}),a.jsxs("div",{children:[a.jsx($t,{children:" *"}),a.jsx($r,{value:v.assignee,onChange:ee=>le("assignee",ee.target.value),className:"mt-1.5"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-4",children:[a.jsxs("div",{children:[a.jsx($t,{children:" "}),a.jsx("select",{value:v.type,onChange:ee=>le("type",ee.target.value),className:"mt-1.5 h-9 w-full rounded-md border border-gray-200 bg-white px-3 text-sm outline-none focus:ring-2 focus:ring-blue-200",children:["","","","",""].map(ee=>a.jsx("option",{value:ee,children:ee},ee))})]}),a.jsxs("div",{children:[a.jsx($t,{children:""}),a.jsx("select",{value:v.status,onChange:ee=>le("status",ee.target.value),className:"mt-1.5 h-9 w-full rounded-md border border-gray-200 bg-white px-3 text-sm outline-none focus:ring-2 focus:ring-blue-200",children:["","","","",""].map(ee=>a.jsx("option",{value:ee,children:ee},ee))})]}),a.jsxs("div",{children:[a.jsx($t,{children:""}),a.jsx("select",{value:v.priority,onChange:ee=>le("priority",ee.target.value),className:"mt-1.5 h-9 w-full rounded-md border border-gray-200 bg-white px-3 text-sm outline-none focus:ring-2 focus:ring-blue-200",children:["","",""].map(ee=>a.jsx("option",{value:ee,children:ee},ee))})]}),a.jsxs("div",{children:[a.jsx($t,{children:""}),a.jsxs("select",{value:v.riskLevel,onChange:ee=>le("riskLevel",ee.target.value),className:"mt-1.5 h-9 w-full rounded-md border border-gray-200 bg-white px-3 text-sm outline-none focus:ring-2 focus:ring-blue-200",children:[a.jsx("option",{value:"high",children:""}),a.jsx("option",{value:"medium",children:""}),a.jsx("option",{value:"low",children:""})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx($t,{children:" (v1 )"}),a.jsxs("select",{value:v.reservationType,onChange:ee=>le("reservationType",ee.target.value),className:"mt-1.5 h-9 w-full rounded-md border border-gray-200 bg-white px-3 text-sm outline-none focus:ring-2 focus:ring-blue-200",children:[a.jsx("option",{value:"",children:" "}),Object.keys(VA).map(ee=>a.jsx("option",{value:ee,children:VA[ee]},ee))]})]}),a.jsxs("div",{children:[a.jsx($t,{children:""}),a.jsx($r,{value:v.location,onChange:ee=>le("location",ee.target.value),className:"mt-1.5"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx($t,{children:""}),a.jsx($r,{value:v.phone,onChange:ee=>le("phone",ee.target.value),className:"mt-1.5",placeholder:"010-1234-5678"})]}),a.jsxs("div",{children:[a.jsx($t,{children:" "}),a.jsx($r,{value:v.guardianPhone,onChange:ee=>le("guardianPhone",ee.target.value),className:"mt-1.5",placeholder:"010-8765-4321"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-3",children:[a.jsxs("div",{children:[a.jsx($t,{children:" (v1)"}),a.jsxs("select",{value:v.contactStatus,onChange:ee=>le("contactStatus",ee.target.value),className:"mt-1.5 h-9 w-full rounded-md border border-gray-200 bg-white px-3 text-sm outline-none focus:ring-2 focus:ring-blue-200",children:[a.jsx("option",{value:"",children:" "}),Object.keys(qA).map(ee=>a.jsx("option",{value:ee,children:qA[ee]},ee))]})]}),a.jsxs("div",{children:[a.jsx($t,{children:" (v1)"}),a.jsxs("select",{value:v.consultStatus,onChange:ee=>le("consultStatus",ee.target.value),className:"mt-1.5 h-9 w-full rounded-md border border-gray-200 bg-white px-3 text-sm outline-none focus:ring-2 focus:ring-blue-200",children:[a.jsx("option",{value:"",children:" "}),Object.keys(WA).map(ee=>a.jsx("option",{value:ee,children:WA[ee]},ee))]})]}),a.jsxs("div",{children:[a.jsx($t,{children:"2 (v1)"}),a.jsxs("select",{value:v.secondExamStatus,onChange:ee=>le("secondExamStatus",ee.target.value),className:"mt-1.5 h-9 w-full rounded-md border border-gray-200 bg-white px-3 text-sm outline-none focus:ring-2 focus:ring-blue-200",children:[a.jsx("option",{value:"",children:" "}),Object.keys(zA).map(ee=>a.jsx("option",{value:ee,children:zA[ee]},ee))]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx($t,{children:" "}),a.jsx("select",{value:v.reminderChannel,onChange:ee=>le("reminderChannel",ee.target.value),className:"mt-1.5 h-9 w-full rounded-md border border-gray-200 bg-white px-3 text-sm outline-none focus:ring-2 focus:ring-blue-200",children:["SMS","",""].map(ee=>a.jsx("option",{value:ee,children:ee},ee))})]}),a.jsxs("div",{className:"flex items-center gap-6 pt-7",children:[a.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-gray-700",children:[a.jsx("input",{type:"checkbox",checked:v.reminderSent,onChange:ee=>le("reminderSent",ee.target.checked),className:"h-4 w-4 rounded border-gray-300"}),"  "]}),a.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-gray-700",children:[a.jsx("input",{type:"checkbox",checked:v.followUpRequired,onChange:ee=>le("followUpRequired",ee.target.checked),className:"h-4 w-4 rounded border-gray-300"})," "]})]})]}),a.jsxs("div",{children:[a.jsx($t,{children:"/ "}),a.jsx(qo,{value:v.reasonText,onChange:ee=>le("reasonText",ee.target.value),className:"mt-1.5",rows:2})]}),a.jsxs("div",{children:[a.jsx($t,{children:" "}),a.jsx(qo,{value:v.notes,onChange:ee=>le("notes",ee.target.value),className:"mt-1.5",rows:3})]})]}),a.jsxs(hC,{className:"gap-2 sm:gap-0",children:[a.jsx(jt,{variant:"outline",onClick:()=>p(!1),children:""}),a.jsx(jt,{onClick:ge,children:g==="create"?"":" "})]})]})}),a.jsx(gf,{open:o,onOpenChange:l,children:a.jsxs(xf,{className:"max-w-2xl",children:[a.jsxs(Fy,{children:[a.jsx(Uy,{children:" "}),a.jsx(gC,{children:"    /"})]}),$?a.jsxs("div",{className:"space-y-4 py-2",children:[a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-3",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[a.jsx("p",{className:"text-base font-bold text-gray-900",children:$.title}),a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("span",{className:ue("rounded border px-2 py-0.5 text-[10px] font-semibold",a7($.status)),children:$.status}),a.jsx("span",{className:ue("rounded border px-2 py-0.5 text-[10px] font-semibold",s7($.priority)),children:$.priority}),a.jsx("span",{className:ue("rounded border px-2 py-0.5 text-[10px] font-semibold",QA($.riskLevel).tone),children:QA($.riskLevel).label})]})]}),a.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[$.caseId,"  ",$.patientName]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[a.jsxs("div",{className:"rounded-lg border border-gray-200 p-3",children:[a.jsx("p",{className:"text-xs text-gray-500",children:" "}),a.jsxs("p",{className:"mt-1 font-semibold text-gray-900",children:[$.date," ",$.time," (",$.durationMinutes,")"]})]}),a.jsxs("div",{className:"rounded-lg border border-gray-200 p-3",children:[a.jsx("p",{className:"text-xs text-gray-500",children:" "}),a.jsx("p",{className:"mt-1 font-semibold text-gray-900",children:$.type})]}),a.jsxs("div",{className:"rounded-lg border border-gray-200 p-3",children:[a.jsx("p",{className:"text-xs text-gray-500",children:""}),a.jsxs("p",{className:"mt-1 flex items-center gap-1 font-semibold text-gray-900",children:[a.jsx(Xl,{size:13,className:"text-gray-400"}),$.assignee]})]}),a.jsxs("div",{className:"rounded-lg border border-gray-200 p-3",children:[a.jsx("p",{className:"text-xs text-gray-500",children:""}),a.jsxs("p",{className:"mt-1 font-semibold text-gray-900",children:[$.reminderChannel,"  ",$.reminderSent?" ":""]})]}),a.jsxs("div",{className:"rounded-lg border border-gray-200 p-3",children:[a.jsx("p",{className:"text-xs text-gray-500",children:""}),a.jsx("p",{className:"mt-1 font-semibold text-gray-900",children:$.phone?WF($.phone):"-"})]}),a.jsxs("div",{className:"rounded-lg border border-gray-200 p-3",children:[a.jsx("p",{className:"text-xs text-gray-500",children:" "}),a.jsx("p",{className:"mt-1 font-semibold text-gray-900",children:$.guardianPhone?WF($.guardianPhone):"-"})]})]}),$.location?a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-3",children:[a.jsx("p",{className:"text-xs text-gray-500",children:""}),a.jsx("p",{className:"mt-1 text-sm font-medium text-gray-900",children:$.location})]}):null,($.contactStatus||$.consultStatus||$.secondExamStatus)&&a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[a.jsxs("p",{className:"mb-2 flex items-center gap-1 text-xs font-semibold text-slate-700",children:[a.jsx(yU,{size:13}),"  (v1 )"]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-gray-700",children:[$.contactStatus?a.jsxs("span",{children:[": ",a.jsx("strong",{children:qA[$.contactStatus]})]}):null,$.consultStatus?a.jsxs("span",{children:[": ",a.jsx("strong",{children:WA[$.consultStatus]})]}):null,$.secondExamStatus?a.jsxs("span",{children:["2: ",a.jsx("strong",{children:zA[$.secondExamStatus]})]}):null,$.reservationType?a.jsxs("span",{children:[": ",a.jsx("strong",{children:VA[$.reservationType]})]}):null]})]}),$.reasonText?a.jsxs("div",{className:"rounded-lg border border-purple-100 bg-purple-50 p-3",children:[a.jsx("p",{className:"text-xs font-semibold text-purple-700",children:"/ "}),a.jsx("p",{className:"mt-1 text-sm text-purple-900",children:$.reasonText})]}):null,$.autoMemoRecent&&$.autoMemoRecent.length>0?a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-3",children:[a.jsxs("p",{className:"mb-2 flex items-center gap-1 text-xs font-semibold text-gray-700",children:[a.jsx(So,{size:13}),"  "]}),a.jsx("ul",{className:"space-y-1",children:$.autoMemoRecent.map((ee,q)=>a.jsxs("li",{className:"text-xs text-gray-700",children:[" ",ee]},`${ee}-${q}`))})]}):null,$.notes?a.jsxs("div",{className:"rounded-lg border border-blue-100 bg-blue-50 p-3",children:[a.jsx("p",{className:"text-xs font-semibold text-blue-700",children:""}),a.jsx("p",{className:"mt-1 text-sm text-blue-900",children:$.notes})]}):null,a.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-gray-200 bg-white px-3 py-2",children:[a.jsx("span",{className:"text-xs text-gray-600",children:$.followUpRequired?"  .":"   ."}),a.jsxs("span",{className:"inline-flex items-center gap-1 text-xs font-semibold text-emerald-700",children:[a.jsx(li,{size:13}),"  "]})]}),a.jsxs(hC,{className:"gap-2 sm:gap-0",children:[a.jsx(jt,{variant:"outline",onClick:()=>l(!1),children:""}),a.jsxs(jt,{variant:"outline",onClick:oe,children:[a.jsx(cZ,{size:14,className:"mr-1"}),""]}),a.jsxs(jt,{variant:"destructive",onClick:_e,children:[a.jsx($Z,{size:14,className:"mr-1"}),""]})]})]}):null]})})]})}function Gje(){const e=[{name:"   ",type:"PDF",lastRun:"2026-02-01",status:""},{name:"Stage   ",type:"XLSX",lastRun:"2026-02-10",status:""},{name:"   ( )",type:"CSV",lastRun:"2026-02-11",status:""},{name:"  ",type:"PDF",lastRun:"2026-01-31",status:""}];return a.jsxs("div",{className:"space-y-6 pb-12",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg px-3 py-2 flex items-center gap-2 text-xs font-semibold shadow-sm",children:[a.jsx(mm,{size:14,className:"text-gray-400"}),": 2026-01-01 ~ 2026-01-31"]}),a.jsx("div",{className:"bg-white border border-gray-200 rounded-lg px-3 py-2 flex items-center gap-2 text-xs font-semibold shadow-sm text-gray-400",children:": "})]}),a.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white text-xs font-bold rounded-lg shadow-sm",children:[a.jsx(Xp,{size:16}),"    "]})]}),a.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[a.jsxs("div",{className:"col-span-8 space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:[a.jsx("div",{className:"p-5 border-b border-gray-100 flex items-center justify-between",children:a.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(Ef,{size:18,className:"text-blue-600"})," "]})}),a.jsx("div",{className:"divide-y divide-gray-50",children:e.map((t,r)=>a.jsxs("div",{className:"p-4 hover:bg-gray-50 flex items-center justify-between group cursor-pointer transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:ue("w-10 h-10 rounded-lg flex items-center justify-center",t.type==="PDF"?"bg-red-50 text-red-600":t.type==="XLSX"?"bg-emerald-50 text-emerald-600":"bg-blue-50 text-blue-600"),children:t.type==="PDF"?a.jsx(Ef,{size:20}):a.jsx(CQ,{size:20})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-gray-900",children:t.name}),a.jsxs("p",{className:"text-[10px] text-gray-500",children:[" : ",t.lastRun," | ",a.jsx("span",{className:"text-blue-600 font-bold",children:t.status})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{className:"px-3 py-1.5 border border-gray-200 rounded text-[10px] font-bold text-gray-600 hover:bg-white",children:""}),a.jsx("button",{className:"px-3 py-1.5 bg-gray-900 text-white rounded text-[10px] font-bold hover:bg-black",children:""})]})]},r))}),a.jsx("div",{className:"p-4 bg-gray-50 flex items-center justify-center border-t border-gray-100",children:a.jsxs("button",{className:"text-xs font-bold text-gray-500 hover:text-blue-600 flex items-center gap-1",children:["    ",a.jsx(di,{size:14})]})})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[a.jsxs("h3",{className:"font-bold text-gray-800 mb-6 flex items-center justify-between",children:["   ",a.jsx("span",{className:"text-[10px] text-emerald-600 font-bold",children:"   12% "})]}),a.jsx("div",{className:"h-64",children:a.jsx(Ta,{width:"100%",height:"100%",children:a.jsxs(mf,{data:[{name:"",target:2,actual:1.2},{name:"",target:5,actual:4.5},{name:"",target:14,actual:15.4},{name:"",target:7,actual:5.2},{name:"",target:180,actual:192}],children:[a.jsx(ys,{strokeDasharray:"3 3",vertical:!1}),a.jsx(da,{dataKey:"name",fontSize:10,axisLine:!1,tickLine:!1}),a.jsx(Jn,{fontSize:10,axisLine:!1,tickLine:!1}),a.jsx(ln,{}),a.jsx(ns,{dataKey:"target",fill:"#e2e8f0",radius:[4,4,0,0],barSize:20}),a.jsx(ns,{dataKey:"actual",fill:"#2563eb",radius:[4,4,0,0],barSize:20})]})})})]})]}),a.jsxs("div",{className:"col-span-4 space-y-6",children:[a.jsxs("div",{className:"bg-blue-600 text-white rounded-xl p-6 shadow-md",children:[a.jsxs("h3",{className:"font-bold mb-4 flex items-center gap-2",children:[a.jsx(NU,{size:18}),"  (AI )"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"p-3 bg-white/10 rounded-lg border border-white/10",children:[a.jsx("p",{className:"text-[10px] font-bold text-white/60 uppercase",children:" "}),a.jsx("p",{className:"text-sm font-medium mt-1",children:"2      15% , 3      ."})]}),a.jsxs("div",{className:"p-3 bg-white/10 rounded-lg border border-white/10",children:[a.jsx("p",{className:"text-[10px] font-bold text-white/60 uppercase",children:" "}),a.jsx("p",{className:"text-sm font-medium mt-1",children:"        8% .     ."})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-5",children:[a.jsx("h3",{className:"font-bold text-gray-800 mb-4 text-sm",children:"  "}),a.jsx("div",{className:"space-y-4",children:[{label:"   ",value:"+4.2%",color:"text-emerald-600"},{label:" ",value:"92%",color:"text-blue-600"},{label:"  ",value:"115%",color:"text-red-600"}].map((t,r)=>a.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-50 last:border-0",children:[a.jsx("span",{className:"text-xs text-gray-500 font-medium",children:t.label}),a.jsx("span",{className:ue("text-sm font-bold",t.color),children:t.value})]},r))})]})]})]}),a.jsx("div",{className:"p-3 bg-gray-50 text-[10px] text-gray-500 italic text-center rounded-lg border border-gray-200",children:"*  :      ,           ."})]})}function Hje(){const[e,t]=h.useState(""),r=[{title:"  ( )",id:"",icon:Bl,items:[{label:"   (Stage 1)",value:"3",type:"number",desc:"  2        "},{label:"SLA   (/)",value:"24",type:"number",desc:"   SLA   "},{label:"  ( )",value:"10%",type:"number",desc:"        "},{label:"   ()",value:"3",type:"number",desc:"    "}]},{title:"   ",id:"",icon:ih,items:[{label:"   ",value:"On",type:"toggle"},{label:"    ",value:"On",type:"toggle"},{label:"   ",value:"Off",type:"toggle"},{label:"    ",value:"On",type:"toggle"}]}];return a.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 pb-12",children:[a.jsx("div",{className:"flex gap-1 border-b border-gray-200",children:["","","/",""].map(n=>a.jsx("button",{onClick:()=>t(n),className:ue("px-6 py-3 text-sm font-bold border-b-2 transition-all",e===n?"border-blue-600 text-blue-600":"border-transparent text-gray-400 hover:text-gray-600"),children:n},n))}),a.jsxs("div",{className:"grid grid-cols-12 gap-8",children:[a.jsx("div",{className:"col-span-8 space-y-8",children:r.map((n,s)=>a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:[a.jsxs("div",{className:"p-5 border-b border-gray-100 flex items-center gap-3 bg-gray-50/50",children:[a.jsx(n.icon,{className:"text-blue-600",size:20}),a.jsx("h3",{className:"font-bold text-gray-800",children:n.title})]}),a.jsx("div",{className:"p-0",children:n.items.map((i,o)=>a.jsxs("div",{className:"p-5 flex items-start justify-between border-b border-gray-50 last:border-0 hover:bg-gray-50/50 transition-colors",children:[a.jsxs("div",{className:"max-w-[70%]",children:[a.jsx("p",{className:"text-sm font-bold text-gray-700",children:i.label}),a.jsx("p",{className:"text-[11px] text-gray-400 mt-0.5",children:i.desc})]}),a.jsx("div",{className:"flex flex-col items-end gap-2",children:i.type==="number"?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"text",value:i.value,readOnly:!0,className:"w-16 text-right px-2 py-1.5 bg-gray-100 border border-gray-200 rounded-lg text-xs font-bold text-blue-600"}),a.jsx("button",{className:"text-[10px] font-bold text-blue-600 hover:underline",children:""})]}):a.jsx("div",{className:ue("w-10 h-5 rounded-full relative cursor-pointer transition-colors shadow-inner",i.value==="On"?"bg-emerald-500":"bg-gray-200"),children:a.jsx("div",{className:ue("absolute top-0.5 w-4 h-4 bg-white rounded-full shadow-md transition-transform",i.value==="On"?"translate-x-5.5":"translate-x-0.5")})})})]},o))})]},s))}),a.jsxs("div",{className:"col-span-4 space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[a.jsxs("h3",{className:"font-bold text-gray-800 mb-6 flex items-center gap-2",children:[a.jsx(yU,{className:"text-orange-500",size:20}),"  "]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"p-4 border border-gray-100 rounded-xl bg-gray-50/50",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(tu,{size:14,className:"text-gray-400"}),a.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "})]}),a.jsx("p",{className:"text-sm font-bold text-gray-900 leading-tight",children:",  (L2 )"}),a.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[a.jsx("span",{className:"text-[9px] text-emerald-600 font-bold bg-emerald-50 px-1.5 py-0.5 rounded",children:"2FA "}),a.jsx("button",{className:"text-[10px] font-bold text-blue-600 hover:underline",children:" "})]})]}),a.jsxs("div",{className:"p-4 border border-gray-100 rounded-xl bg-gray-50/50",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(id,{size:14,className:"text-gray-400"}),a.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"   "})]}),a.jsx("p",{className:"text-sm font-bold text-gray-900",children:"  5 ( )"}),a.jsx("p",{className:"text-[9px] text-gray-400 mt-2",children:"  : 2026-12-31"})]})]})]}),a.jsxs("div",{className:"bg-blue-600 text-white rounded-2xl p-6 shadow-xl relative overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:a.jsx(ha,{size:120})}),a.jsxs("div",{className:"relative z-10",children:[a.jsxs("h3",{className:"font-bold mb-4 flex items-center gap-2",children:[a.jsx(ha,{className:"text-blue-400",size:20}),"  "]}),a.jsxs("div",{className:"space-y-4 text-xs leading-relaxed text-white/70",children:[a.jsx("p",{children:"  , ,    ID, IP ,      ."}),a.jsxs("div",{className:"p-3 bg-white/10 rounded-xl border border-white/10",children:[a.jsxs("p",{className:"text-[10px] font-bold text-blue-400 uppercase mb-1 flex items-center gap-1",children:[a.jsx(pm,{size:10}),"   "]}),a.jsx("p",{className:"text-white/80",children:" (Stage 2)       ."})]}),a.jsx("p",{children:"        ."})]}),a.jsx("button",{className:"mt-6 w-full py-3 bg-white/10 hover:bg-white/20 border border-white/20 rounded-xl text-xs font-bold transition-all",children:"    "})]})]})]})]}),a.jsxs("div",{className:"p-4 bg-white border border-gray-200 rounded-xl flex items-center gap-4 shadow-sm",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-50 flex items-center justify-center text-orange-600 shrink-0",children:a.jsx(ea,{size:24})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-bold text-gray-900",children:"   "}),a.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"     ,        . (  )"})]})]})]})}function Kje({activeTab:e,setActiveTab:t,userName:r,centerName:n,userRole:s,onLogout:i}){const[o,l]=h.useState(!0),d=[{id:"main",label:"  ",icon:tx},{id:"cases",label:" ",icon:Gl},{id:"calendar",label:"",icon:Vo},{id:"reports",label:"",icon:cm},{id:"settings",label:"",icon:nx}];return a.jsxs("aside",{className:`${o?"w-64":"w-20"} bg-slate-800 border-r border-slate-700 text-white flex flex-col shrink-0 transition-all duration-300`,children:[a.jsx("div",{className:"h-16 flex items-center justify-between px-4 border-b border-slate-700",children:o?a.jsxs(a.Fragment,{children:[a.jsx(cR,{size:36,showText:!0,subtitle:" ",variant:"dark"}),a.jsx("button",{type:"button",onClick:()=>l(!1),className:"h-8 w-8 p-0 rounded-md inline-flex items-center justify-center text-slate-400 hover:text-white hover:bg-slate-700 shrink-0","aria-label":" ",children:a.jsx(uu,{className:"h-4 w-4"})})]}):a.jsx("button",{type:"button",onClick:()=>l(!0),className:"h-8 w-8 p-0 mx-auto rounded-md inline-flex items-center justify-center text-slate-400 hover:text-white hover:bg-slate-700","aria-label":" ",children:a.jsx(aR,{className:"h-4 w-4"})})}),a.jsx("nav",{className:"flex-1 py-4 px-3 space-y-1",children:d.map(u=>a.jsxs("button",{onClick:()=>t(u.id),className:ue("w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium transition-colors",e===u.id?"bg-blue-600 text-white shadow-sm":"text-slate-300 hover:bg-slate-700 hover:text-white"),title:o?void 0:u.label,children:[a.jsx(u.icon,{size:20,className:o?void 0:"mx-auto"}),o&&u.label]},u.id))}),a.jsxs("div",{className:"p-4 border-t border-slate-700",children:[o?a.jsxs("div",{className:"flex items-center gap-3 p-2 bg-slate-700 rounded-lg",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-100 text-slate-700 flex items-center justify-center text-xs font-bold",children:r.slice(0,1)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-semibold truncate",children:r}),a.jsxs("p",{className:"text-[10px] text-slate-300 truncate",children:[n," / ",s==="center_manager"?"":""]})]})]}):null,a.jsxs("button",{onClick:i,className:"mt-3 w-full flex items-center justify-center gap-2 rounded-lg border border-red-400/40 px-3 py-2 text-xs font-semibold text-red-200 hover:bg-red-500/10 hover:text-red-100 transition-colors",title:o?void 0:"",children:[a.jsx(nR,{size:14}),o?"":null]})]})]})}const Q3={"national-dashboard":{title:"  ",subtitle:"Neuro-Shield  "},"model-apply":{title:"  ",subtitle:"Neuro-Shield  "},"model-governance":{title:"/  ",subtitle:"Neuro-Shield  "},"quality-monitoring":{title:"& ",subtitle:"Neuro-Shield  "},"compliance-audit":{title:"   ",subtitle:"Neuro-Shield  "},"kpi-dictionary":{title:"KPI ",subtitle:"Neuro-Shield  "},settings:{title:"",subtitle:"Neuro-Shield  "},overview:{title:"  ",subtitle:"Neuro-Shield   "},cause:{title:" ",subtitle:"Neuro-Shield   "},interventions:{title:" ",subtitle:"Neuro-Shield   "},reports:{title:"",subtitle:"Neuro-Shield   "},"regional-settings":{title:"",subtitle:"Neuro-Shield   "},dashboard:{title:" ",subtitle:"Neuro-Shield   "},calendar:{title:" ",subtitle:"Neuro-Shield   "},"audit-log":{title:" ",subtitle:"Neuro-Shield   "},main:{title:"  ",subtitle:"Neuro-Shield   "},cases:{title:" ",subtitle:"Neuro-Shield   "}};function Z3({title:e,subtitle:t,icon:r,iconBg:n="from-blue-600 to-blue-700"}){return a.jsxs("div",{className:"flex items-center gap-2.5 min-w-0",children:[a.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-lg bg-gradient-to-br ${n} shadow-sm shrink-0`,"aria-hidden":"true",children:r??a.jsx(oh,{className:"h-4 w-4 text-white"})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("h2",{className:"text-[15px] font-bold text-slate-800 leading-[1.1] whitespace-nowrap overflow-hidden text-ellipsis",children:e}),a.jsx("p",{className:"text-[10px] font-medium text-slate-400 leading-[1.1] mt-[2px] whitespace-nowrap overflow-hidden text-ellipsis",children:t})]})]})}const zje={main:tx,cases:Gl,calendar:Vo,reports:cm,settings:nx};function qje({activeTab:e,caseSearchKeyword:t,onCaseSearchKeywordChange:r}){const n=zje[e]||tx,s=Q3[e],i=e==="cases";return a.jsxs("header",{className:"h-14 bg-white border-b border-gray-200 flex items-center justify-between px-6 shrink-0 z-10",children:[a.jsx("div",{className:"flex items-center gap-6",children:a.jsx(Z3,{title:s?.title??e,subtitle:s?.subtitle??"Neuro-Shield   ",icon:a.jsx(n,{className:"h-4 w-4 text-white"})})}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"relative group",children:[a.jsx("div",{className:"absolute inset-y-0 left-3 flex items-center pointer-events-none",children:a.jsx(rx,{size:16,className:"text-gray-400"})}),a.jsx("input",{type:"text",value:i?t:"",onChange:o=>{i&&r(o.target.value)},placeholder:i?" ID,  ...":"   ",disabled:!i,className:"bg-gray-100 border-none rounded-full pl-10 pr-4 py-2 text-sm focus:ring-2 focus:ring-blue-500 w-64 transition-all focus:w-80 outline-none disabled:cursor-not-allowed disabled:opacity-60"})]}),a.jsxs("button",{className:"relative p-2 text-gray-500 hover:bg-gray-100 rounded-full transition-colors",children:[a.jsx(ih,{size:20}),a.jsx("span",{className:"absolute top-1.5 right-1.5 w-2 h-2 bg-red-500 rounded-full border-2 border-white"})]}),a.jsx("div",{className:"w-px h-8 bg-gray-200 mx-1"}),a.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[a.jsx("span",{className:"w-8 h-8 rounded-full bg-emerald-100 text-emerald-700 flex items-center justify-center border border-emerald-200",children:a.jsx(li,{size:16})}),a.jsx("span",{children:" "})]})]})]})}const o7=new Map;let l7=1,c7=1;function Wje(){return new Date().toISOString()}function d7(e){return new Date(Date.now()+e*60*60*1e3).toISOString()}function Dz(){return globalThis?.__NEURO_SHIELD_USE_REAL_API__===!0}function Vje(){return globalThis?.__NEURO_SHIELD_FORCE_CALENDAR_ERROR__===!0}async function Iz(e=160){await new Promise(t=>setTimeout(t,e))}async function Mz(e,t){const r=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",...t.headers??{}},...t});if(!r.ok)throw new Error(`HTTP ${r.status}`);return await r.json()}function Yje(e){return e?{R1_SELF_REJECT:" ",R2_GUARDIAN_REJECT:" ",R3_OTHER_INSTITUTION:"  ",R4_ALREADY_DIAGNOSED:" / ",R5_CONTACT_INVALID:" ",R6_EMOTIONAL_BACKLASH:"  ",R7_OTHER:""}[e]:"  "}function Xje(e){return{CALL_RETRY:" ",SMS_RETRY:" ",TIME_CHANGE:"   ",PROTECTOR_CONTACT:"  ",AGENT_SMS:"  "}[e]}function Lz(e){const t=[];if(e.outcomeType==="NO_RESPONSE"&&e.noResponse?.nextContactAt&&t.push({caseId:e.caseId,type:"RECONTACT",title:`${Xje(e.noResponse.strategy)} `,startAt:e.noResponse.nextContactAt,durationMin:20,priority:e.noResponse.escalateLevel==="L3"?"HIGH":"NORMAL",payload:{strategy:e.noResponse.strategy,escalateLevel:e.noResponse.escalateLevel}}),e.outcomeType==="LATER"){const r=e.noResponse?.nextContactAt??d7(72);t.push({caseId:e.caseId,type:"RECONTACT",title:"  ",startAt:r,durationMin:20,priority:"NORMAL",payload:{memo:e.memo}})}return e.outcomeType==="REJECT"&&(e.reject?.followup?.createFollowupEvent||e.reject?.followup?.followupAt)&&t.push({caseId:e.caseId,type:"FOLLOWUP",title:`   (${Yje(e.reject?.code)})`,startAt:e.reject?.followup?.followupAt??d7(168),durationMin:20,priority:e.reject?.level==="FINAL"?"HIGH":"NORMAL",payload:{rejectCode:e.reject?.code,rejectLevel:e.reject?.level}}),t}async function Qje(e,t){if(await Iz(),Dz())return Mz(`/api/cases/${e}/outcomes`,{body:JSON.stringify(t)});const r=`OUT-${e}-${String(l7).padStart(5,"0")}`;l7+=1;const n=Lz({caseId:e,outcomeType:t.outcomeType,memo:t.memo,reject:t.reject,noResponse:t.noResponse});return{ok:!0,outcomeId:r,timelinePatch:{at:Wje(),outcomeType:t.outcomeType},nextAction:n.length?{type:"CREATE_CALENDAR_EVENT",events:n}:void 0}}async function pO(e){if(await Iz(),Dz())return Mz("/api/calendar/events",{body:JSON.stringify(e)});if(Vje())throw new Error("CALENDAR_FORCED_FAILURE");const t=o7.get(e.idempotencyKey);if(t)return t;const r={ok:!0,eventId:`CAL-${String(c7).padStart(6,"0")}`};return c7+=1,o7.set(e.idempotencyKey,r),r}function Zje(){return new Date().toISOString()}function ZA(e){return e instanceof Error?e.message:typeof e=="string"?e:"    ."}function u7(e){return{idempotencyKey:e.idempotencyKey,caseId:e.caseId,outcomeId:e.outcomeId,event:e.event,eventType:e.event.type,title:e.event.title,scheduledAt:e.event.startAt,errorMessage:e.errorMessage,retryCount:e.retryCount,recordedAt:Zje()}}function Jje(){const[e,t]=h.useState(!1),[r,n]=h.useState(null),[s,i]=h.useState([]),[o,l]=h.useState({}),d=h.useCallback(async({caseId:g,payload:x})=>{if(e)return null;t(!0),n(null);try{const y=await Qje(g,x),N=y.nextAction?.events??Lz({caseId:g,outcomeType:x.outcomeType,memo:x.memo,reject:x.reject,noResponse:x.noResponse}),v=[],S=[];for(let E=0;E<N.length;E+=1){const C=N[E],_=`${g}:${y.outcomeId}:${C.type}:${E}`;try{const A=await pO({idempotencyKey:_,event:C});v.push({idempotencyKey:_,eventId:A.eventId,event:C})}catch(A){S.push(u7({idempotencyKey:_,caseId:g,outcomeId:y.outcomeId,event:C,errorMessage:ZA(A),retryCount:0}))}}return i(E=>{const C=E.filter(_=>!S.some(A=>A.idempotencyKey===_.idempotencyKey));return[...S,...C]}),{outcome:y,calendar:{created:v,failed:S}}}catch(y){return n(ZA(y)),null}finally{t(!1)}},[e]),u=h.useCallback(async g=>{const x=s.find(y=>y.idempotencyKey===g);if(!x)return{ok:!1};l(y=>({...y,[g]:!0}));try{const y=await pO({idempotencyKey:x.idempotencyKey,event:x.event});return i(N=>N.filter(v=>v.idempotencyKey!==g)),{ok:!0,eventId:y.eventId}}catch(y){const N=u7({idempotencyKey:x.idempotencyKey,caseId:x.caseId,outcomeId:x.outcomeId,event:x.event,errorMessage:ZA(y),retryCount:x.retryCount+1});return i(v=>v.map(S=>S.idempotencyKey===g?N:S)),{ok:!1,failure:N}}finally{l(y=>{const N={...y};return delete N[g],N})}},[s]),m=h.useMemo(()=>Object.values(o).some(Boolean),[o]),p=h.useCallback(()=>n(null),[]);return{isSaving:e,submitError:r,calendarFailures:s,retryingKeys:o,isRetrying:m,submit:d,retryCalendarFailure:u,clearSubmitError:p}}const $z="080-000-0000",ewe=` ${$z}`,Fz="",Uz="  ",twe=[{id:"S1_SENT_BASE",stage:"STAGE1",situation:"DELIVERED",channel:"SMS",tone:"government",type:"CONTACT",label:"1  ",template:"[{{CENTER_NAME}}]   . ({{CASE_ALIAS}})        . {{LINK}}  {{CALLBACK_PHONE}} {{OPT_OUT}}"},{id:"S1_NO_RESPONSE",stage:"STAGE1",situation:"NO_RESPONSE",channel:"SMS",tone:"government",type:"REMINDER",label:"1  ",template:"[{{CENTER_NAME}}]    ,   /  . {{LINK}}  {{CALLBACK_PHONE}} {{OPT_OUT}}"},{id:"S1_FAILED",stage:"STAGE1",situation:"FAILED",channel:"SMS",tone:"government",type:"CONTACT",label:"1   ",template:"[{{CENTER_NAME}}]     .    {{CALLBACK_PHONE}}  . {{OPT_OUT}}"},{id:"S2_SENT_BASE",stage:"STAGE2",situation:"DELIVERED",channel:"SMS",tone:"government",type:"BOOKING",label:"2    ",template:"[{{CENTER_NAME}}] /     .          . {{LINK}}  {{CALLBACK_PHONE}} {{OPT_OUT}}"},{id:"S2_CLICKED_INCOMPLETE",stage:"STAGE2",situation:"CLICKED",channel:"SMS",tone:"government",type:"REMINDER",label:"2   ",template:"[{{CENTER_NAME}}]    .    ,     . {{LINK}}  {{CALLBACK_PHONE}} {{OPT_OUT}}"},{id:"S2_NO_RESPONSE",stage:"STAGE2",situation:"NO_RESPONSE",channel:"SMS",tone:"government",type:"REMINDER",label:"2  ",template:"[{{CENTER_NAME}}] /  .      . {{LINK}}  {{CALLBACK_PHONE}} {{OPT_OUT}}"},{id:"S3_SENT_BASE",stage:"STAGE3",situation:"DELIVERED",channel:"SMS",tone:"government",type:"CONTACT",label:"3   ",template:"[{{CENTER_NAME}}]     .  /     . {{LINK}}  {{CALLBACK_PHONE}} {{OPT_OUT}}"},{id:"S3_ACTION_COMPLETED",stage:"STAGE3",situation:"ACTION_COMPLETED",channel:"SMS",tone:"government",type:"REMINDER",label:"3   ",template:"[{{CENTER_NAME}}]    .    {{CALLBACK_PHONE}}  . {{OPT_OUT}}"},{id:"S3_NO_RESPONSE",stage:"STAGE3",situation:"NO_RESPONSE",channel:"SMS",tone:"government",type:"REMINDER",label:"3   ",template:"[{{CENTER_NAME}}]        . {{CALLBACK_PHONE}}  ,    . {{LINK}} {{OPT_OUT}}"}],f7={DRAFT:{label:"",tone:"border-slate-300 bg-slate-50 text-slate-700"},SCHEDULED:{label:"",tone:"border-blue-300 bg-blue-50 text-blue-700"},SENT:{label:"",tone:"border-indigo-300 bg-indigo-50 text-indigo-700"},DELIVERED:{label:"",tone:"border-emerald-300 bg-emerald-50 text-emerald-700"},FAILED:{label:"",tone:"border-red-300 bg-red-50 text-red-700"},CLICKED:{label:" ",tone:"border-cyan-300 bg-cyan-50 text-cyan-700"},ACTION_COMPLETED:{label:" ",tone:"border-green-300 bg-green-50 text-green-700"},NO_RESPONSE:{label:"",tone:"border-amber-300 bg-amber-50 text-amber-700"},OPTOUT:{label:"",tone:"border-zinc-300 bg-zinc-100 text-zinc-700"}},rwe={DRAFT:[{id:"MARK_COMPLETED",label:" ",nextStatus:"ACTION_COMPLETED"},{id:"MARK_OPTOUT",label:" ",nextStatus:"OPTOUT"}],SCHEDULED:[{id:"MARK_NO_RESPONSE",label:" ",nextStatus:"NO_RESPONSE"},{id:"SWITCH_TO_CALL",label:" "}],SENT:[{id:"SEND_REMINDER",label:" ",nextStatus:"CLICKED"},{id:"MARK_NO_RESPONSE",label:" ",nextStatus:"NO_RESPONSE"}],DELIVERED:[{id:"SEND_REMINDER",label:" ",nextStatus:"CLICKED"},{id:"MARK_COMPLETED",label:" ",nextStatus:"ACTION_COMPLETED"}],FAILED:[{id:"VERIFY_PHONE",label:" "},{id:"SWITCH_TO_CALL",label:" "}],CLICKED:[{id:"SEND_REMINDER",label:" "},{id:"MARK_COMPLETED",label:" ",nextStatus:"ACTION_COMPLETED"}],ACTION_COMPLETED:[{id:"CREATE_RECONTACT_TASK",label:"  "},{id:"MARK_OPTOUT",label:" ",nextStatus:"OPTOUT"}],NO_RESPONSE:[{id:"RETRY_WITH_ALT_TEMPLATE",label:"( )"},{id:"SWITCH_TO_CALL",label:" "}],OPTOUT:[{id:"SWITCH_TO_CALL",label:"  "},{id:"CREATE_RECONTACT_TASK",label:"   "}]};function nwe(e={}){const t=e.OPTOUT_NUMBER?.trim()||$z;return{CENTER_NAME:e.CENTER_NAME||" ",CALLBACK_PHONE:e.CALLBACK_PHONE||"02-555-0199",LINK:e.LINK||"",OPT_OUT:e.OPT_OUT||` ${t}`,CASE_ALIAS:e.CASE_ALIAS||Fz,DUE_DATE:e.DUE_DATE||Uz,OPTOUT_NUMBER:t}}function awe(e,t={}){const r=nwe(t),n=/\{\{\s*([A-Z0-9_]+)\s*\}\}/g,s=i=>i.replace(n,(o,l)=>r[l]??"");return s(s(e)).replace(/\s{2,}/g," ").trim()}function swe(e){return twe.filter(t=>t.stage===e)}function iwe(e){return swe(e).map(t=>({id:t.id,type:t.type,label:t.label,body:r=>awe(t.template,{CENTER_NAME:r.centerName,CALLBACK_PHONE:r.centerPhone,LINK:r.guideLink,CASE_ALIAS:r.caseAlias||Fz,DUE_DATE:r.dueDate||Uz,OPT_OUT:r.optOut||ewe})}))}function owe(e){return e.includes("3")?"STAGE3":e.includes("2")?"STAGE2":"STAGE1"}const Bz={VITE_BASE_PATH:"/neuro-shield/"},lg="/api/sms/messages",Ey="/api/outreach/send-sms",lwe="R-2ldKkoGbDF-marBFEbgVilAXB5Tw0r";function cwe(e){if(!e.trim())return"/neuro-shield/";let t=e.trim();return t.startsWith("/")||(t=`/${t}`),t.endsWith("/")||(t=`${t}/`),t}function dwe(){const e=Bz,t=e.VITE_PUBLIC_BASE_URL||e.DEPLOY_BASE_URL;if(t&&t.trim())return t.replace(/\/$/,"");if(typeof window<"u"){const r=cwe(e.VITE_BASE_PATH);return`${window.location.origin}${r.replace(/\/$/,"")}`}return"http://146.56.162.226/neuro-shield"}function RN(e){return`${dwe()}/p/sms?t=${encodeURIComponent(e)}`}function uwe(e){try{return(new URL(e,typeof window<"u"?window.location.origin:"http://localhost").searchParams.get("t")||"").trim()||void 0}catch{return}}function fwe(e){if(e!=="STAGE1")return null;const t=Bz,r=(t.VITE_STAGE1_DEMO_LINK||"").trim(),n=(t.VITE_CITIZEN_DEMO_TOKEN||lwe).trim(),s=r||RN(n);return{linkUrl:s,token:uwe(s)}}function J3(e){return`tmp-${(e||"case").replace(/[^a-zA-Z0-9_-]/g,"").slice(-18)||"case"}-${Date.now().toString(36)}`}function Gz(e,t="SENT"){if(!e)return t;const r=e.toUpperCase();return r.includes("FAIL")?"FAILED":r.includes("DELIVER")?"DELIVERED":r.includes("SCHEDULE")?"SCHEDULED":r.includes("CLICK")?"CLICKED":r.includes("OPT")?"OPTOUT":t}function pwe(e,t){return{case_id:e.caseId,center_id:e.centerId,citizen_phone:e.citizenPhone,template_id:e.templateId,variables:{template:e.renderedMessage,link_url:t,guideLink:t,...e.variables||{}},dedupe_key:e.dedupeKey||`${e.caseId}-${Date.now()}`,guardian_phone:e.guardianPhone}}function mwe(e,t,r){return{caseId:e.caseId,centerId:e.centerId,citizenPhone:e.citizenPhone,stage:e.stage||"STAGE1",templateId:e.templateId,variables:{LINK:t,...e.variables||{}},sendPolicy:e.sendPolicy==="SCHEDULE"?"SCHEDULED":"IMMEDIATE",scheduledAt:e.scheduledAt,channel:e.channel||"SMS",renderedText:e.renderedMessage,dedupeKey:e.dedupeKey||`${e.caseId}-${Date.now()}`,guardianPhone:e.guardianPhone,token:r,statusHint:e.statusHint}}function p7(e,t){return e.includes(t)?e:`${e} ${t}`.trim()}async function hwe(e,t,r){const n=await fetch(lg,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(mwe(e,t,r))});if(!n.ok){const o=await n.text();return{success:!1,endpoint:lg,error:`  (${n.status}): ${o}`}}const s=await n.json(),i=Gz(s.status,e.sendPolicy==="SCHEDULE"?"SCHEDULED":"SENT");return{success:!0,endpoint:lg,providerMessageId:s.providerMessageId||s.messageId,status:s.status||i,lifecycleStatus:i,renderedText:s.renderedText||s.renderedMessage||e.renderedMessage,renderedMessage:s.renderedMessage||s.renderedText||e.renderedMessage,token:s.token||r,linkUrl:s.linkUrl||t,actualTo:s.actualTo,intendedTo:s.intendedTo}}async function gwe(e,t){const r=await fetch(Ey,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(pwe(e,t))});if(!r.ok){const i=await r.text();return{success:!1,endpoint:Ey,error:`  (${r.status}): ${i}`}}const n=await r.json(),s=Gz(n.status,e.sendPolicy==="SCHEDULE"?"SCHEDULED":"SENT");return{success:!0,endpoint:Ey,providerMessageId:n.provider_message_id,status:n.status||s,lifecycleStatus:s,actualTo:n.actual_to,intendedTo:n.intended_to,renderedMessage:n.rendered_message||p7(e.renderedMessage,t),renderedText:n.rendered_message||p7(e.renderedMessage,t),token:e.linkToken,linkUrl:t}}function xwe(e,t){return e?t==="SCHEDULE"?"SCHEDULED":"SENT":"FAILED"}function bwe(e){return e==="SCHEDULED"?"SCHEDULED":e==="FAILED"?"FAILED":e==="DELIVERED"?"DELIVERED":e==="CLICKED"?"CLICKED":e==="ACTION_COMPLETED"?"ACTION_COMPLETED":e==="NO_RESPONSE"?"NO_RESPONSE":e==="OPTOUT"?"OPTOUT":"SENT"}function ywe(){return RN(J3("preview"))}async function Hz(e){const t=e.linkUrl?null:fwe(e.stage),r=e.linkToken||t?.token||J3(e.caseId),n=e.linkUrl||t?.linkUrl||RN(r);try{const s=await hwe(e,n,r);if(s.success)return s;console.warn(`[SMS] ${lg} , legacy fallback :`,s.error);const i=await gwe(e,n);return i.success?i:{success:!1,endpoint:i.endpoint,error:i.error||s.error||"  ",token:r,linkUrl:n}}catch(s){return console.warn(`[SMS] ${lg}/${Ey}  :`,s),{success:!1,token:r,linkUrl:n,error:"SMS    .  ."}}}function mO(){const e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")} ${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`}const JA={CONTACT:"",BOOKING:"",REMINDER:""},vwe={CONTACT:"bg-blue-100 text-blue-800",BOOKING:"bg-emerald-100 text-emerald-800",REMINDER:"bg-amber-100 text-amber-800"},Nwe={SENT:"",SCHEDULED:"",FAILED:"",DELIVERED:"",CLICKED:" ",ACTION_COMPLETED:" ",NO_RESPONSE:"",OPTOUT:""},Swe={SENT:"text-indigo-700 border-indigo-300",SCHEDULED:"text-blue-700 border-blue-300",FAILED:"text-red-700 border-red-300",DELIVERED:"text-emerald-700 border-emerald-300",CLICKED:"text-cyan-700 border-cyan-300",ACTION_COMPLETED:"text-green-700 border-green-300",NO_RESPONSE:"text-amber-700 border-amber-300",OPTOUT:"text-zinc-700 border-zinc-400"},Ewe=[{step:"greeting",title:"1:    ",content:".   .   ?       .",tips:["  ","    ","   "],checkpoints:["  ","/ ","   "]},{step:"purpose",title:"2:   ",content:"       .     , /    .",tips:["  ","   ","   "],checkpoints:["   ","   ","  "]},{step:"assessment",title:"3:   ",content:"   ,   , /    .",tips:["  ","  ","   "],checkpoints:["  ","   ","    "]},{step:"scheduling",title:"4:   ",content:"     , / ,   .",tips:["  1 ","   ","  "],checkpoints:["  ","   ","  "]}],jwe={centerName:" ",centerPhone:"02-555-0199",guideLink:ywe(),bookingLink:"(  )",caseAlias:"",dueDate:"  ",optOut:" 080-000-0000"};function e_(e,t,r){e(n=>[{id:`TL-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,at:mO(),status:t,note:r},...n])}function t_(e,t){return e.find(r=>r.type===t)}function m7({stageLabel:e,stageCode:t,templates:r,defaultVars:n,caseId:s,centerId:i="center-001",citizenPhone:o="010-****-1234",guardianPhone:l,onSmsSent:d,onConsultation:u,callScripts:m,onNavigateLink:p,showLinkageTab:g=!1,compact:x=!1}){const y=t??owe(e),N=h.useMemo(()=>iwe(y),[y]),v=h.useMemo(()=>r.length>0?r:N,[N,r]),S={...jwe,...n},E=m??Ewe,[C,_]=h.useState("CALL"),[A,T]=h.useState("citizen"),[R,I]=h.useState(0),[k,w]=h.useState({}),[L,H]=h.useState(!1),[B,M]=h.useState(0),[G,$]=h.useState("SUCCESS"),[z,U]=h.useState("");h.useEffect(()=>{if(!L)return;const je=setInterval(()=>M(Ve=>Ve+1),1e3);return()=>clearInterval(je)},[L]);const Z=`${String(Math.floor(B/60)).padStart(2,"0")}:${String(B%60).padStart(2,"0")}`,re=E[R]??E[0],X=()=>{u?.(`[] : ${A==="citizen"?"":""} / : ${G} / : ${Z}
${z}`,"CONTACT",` (${e})`),U(""),H(!1),M(0),w({}),I(0)},F=v[0]?.type??"CONTACT",[te,ne]=h.useState(F),[se,Ne]=h.useState(v[0]?.id??""),[fe,we]=h.useState(""),[ve,Oe]=h.useState("NOW"),[Fe,oe]=h.useState(""),[le,ge]=h.useState(""),[_e,ee]=h.useState(S),[q,ye]=h.useState(!1),[pe,he]=h.useState(!0),[rt,Me]=h.useState(!1),[dt,St]=h.useState(null),[He,Ye]=h.useState([]),[Mt,Xt]=h.useState(!1),[hr,Gt]=h.useState("DRAFT"),[sr,xr]=h.useState([{id:"TL-INIT",at:mO(),status:"DRAFT",note:"  "}]),mr=h.useMemo(()=>{const je=new Set,Ve=[];for(const yt of v)je.has(yt.type)||(je.add(yt.type),Ve.push(yt.type));return Ve},[v]);h.useEffect(()=>{mr.includes(te)||ne(mr[0]??"CONTACT")},[mr,te]);const br=h.useMemo(()=>v.filter(je=>je.type===te),[v,te]),kr=h.useMemo(()=>v.find(je=>je.id===se)??br[0]??v[0],[v,se,br]);h.useEffect(()=>{br.some(je=>je.id===se)||Ne(br[0]?.id??v[0]?.id??"")},[br,se,v]);const cn=h.useMemo(()=>{if(!kr||typeof kr.body!="function")return"";const je=kr.body(_e);if(!pe)return je;const Ve=_e.guideLink?.trim();return!Ve||je.includes(Ve)?je:`${je} ${Ve}`.trim()},[kr,_e,pe]),wt=f7[hr],Ge=(rwe[hr]??[]).slice(0,2),Qt=je=>{ne(je);const Ve=t_(v,je);Ve&&Ne(Ve.id)},Pr=je=>{const Ve=(yt,ir)=>{Gt(yt),e_(xr,yt,ir)};if(je.id==="RETRY_WITH_ALT_TEMPLATE"){Ve("DRAFT","   ");const yt=t_(v,"REMINDER")??v[0];yt&&(ne(yt.type),Ne(yt.id)),ke.info("    .");return}if(je.id==="SWITCH_TO_CALL"){Ve("NO_RESPONSE","   "),_("CALL"),p?.("call");return}if(je.id==="VERIFY_PHONE"){ge(yt=>yt?`${yt}
  `:"  "),Ve("FAILED","    ");return}if(je.id==="CREATE_RECONTACT_TASK"){ke.success(" ()  "),e_(xr,hr,"  ");return}if(je.id==="SEND_REMINDER"){const yt=t_(v,"REMINDER");yt&&(ne("REMINDER"),Ne(yt.id)),Ve("CLICKED","     ");return}if(je.id==="MARK_NO_RESPONSE"){Ve("NO_RESPONSE","   ");return}if(je.id==="MARK_COMPLETED"){Ve("ACTION_COMPLETED","  ");return}je.id==="MARK_OPTOUT"&&Ve("OPTOUT"," ")},_r=async()=>{if(!kr){St({success:!1,error:"   ."});return}if(hr==="OPTOUT"){St({success:!1,error:"  SMS   ."});return}if(ve==="SCHEDULE"&&!Fe.trim()){St({success:!1,error:"   ."});return}const je=J3(s),Ve=RN(je),yt={..._e,guideLink:pe?Ve:_e.guideLink},ir=kr.body(yt),Cr=pe&&yt.guideLink&&!ir.includes(yt.guideLink)?`${ir} ${yt.guideLink}`.trim():ir;Me(!0),St(null);const nn=await Hz({caseId:s,centerId:i,citizenPhone:fe===""&&l?l:o,templateId:kr.id,renderedMessage:Cr,guardianPhone:fe===""?l:void 0,stage:y,sendPolicy:ve,scheduledAt:ve==="SCHEDULE"?Fe:void 0,channel:"SMS",linkToken:je,linkUrl:Ve,statusHint:hr,variables:{CENTER_NAME:yt.centerName,CALLBACK_PHONE:yt.centerPhone,CASE_ALIAS:yt.caseAlias||"",DUE_DATE:yt.dueDate||"  ",OPT_OUT:yt.optOut||" 080-000-0000"}});Me(!1),St(nn);const wr=nn.lifecycleStatus||xwe(nn.success,ve),ze=bwe(wr);Gt(wr),e_(xr,wr,`${ve==="NOW"?"":""}   ${kr.label}`);const dn={id:`SMS-${Date.now()}`,at:ve==="SCHEDULE"?Fe.replace("T"," "):mO(),templateLabel:kr.label,type:kr.type,mode:ve,recipient:fe,status:ze,preview:Cr,note:le.trim(),providerMessageId:nn.providerMessageId,lifecycleStatus:wr,token:nn.token||je,linkUrl:nn.linkUrl||Ve};Ye(ur=>[dn,...ur]),d?.(dn),nn.success&&(ge(""),ee(ur=>({...ur,guideLink:nn.linkUrl||Ve})))},rr=()=>{kr&&(u?.(le.trim(),te,kr.label),ge(""))};return a.jsxs("div",{className:"bg-white rounded-xl overflow-hidden",children:[a.jsx("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 px-6 py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-base font-bold text-white flex items-center gap-2",children:[a.jsx(dC,{className:"h-4 w-4 text-blue-300"})," ",a.jsx(rn,{className:"ml-1 bg-blue-500/20 text-blue-200 border-blue-400/30 text-[10px]",children:e})]}),a.jsxs("p",{className:"text-[11px] text-slate-300 mt-1",children:["  ",g?"  ":"","   "]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(rn,{className:ue("text-xs px-2.5 py-1 border",wt.tone),children:wt.label}),He.length>0&&a.jsxs(rn,{className:"bg-white/10 text-white border-white/20 text-xs px-2.5 py-1",children:[He.length," "]})]})]})}),a.jsx("div",{className:"border-b border-slate-200 bg-slate-50",children:a.jsx("div",{className:"flex",children:[{key:"CALL",icon:dC,label:""},{key:"SMS",icon:So,label:""},...g?[{key:"LINK",icon:gm,label:""}]:[]].map(({key:je,icon:Ve,label:yt})=>a.jsxs("button",{onClick:()=>_(je),className:ue("flex-1 flex items-center justify-center gap-2 px-4 py-3 text-sm font-semibold transition-all border-b-2",C===je?"border-blue-600 text-blue-700 bg-white":"border-transparent text-slate-500 hover:text-slate-700 hover:bg-white/50"),children:[a.jsx(Ve,{className:"h-4 w-4"}),yt]},je))})}),C==="CALL"&&a.jsxs("div",{className:ue("space-y-4",x?"px-4 py-4":"px-6 py-5"),children:[a.jsxs("div",{className:"rounded-lg border border-amber-200 bg-amber-50/80 px-4 py-2.5 text-xs text-amber-800 flex items-start gap-2",children:[a.jsx(ea,{className:"h-3.5 w-3.5 mt-0.5 shrink-0"}),a.jsxs("span",{children:[a.jsx("strong",{children:" :"})," /AI   .   .   ."]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-semibold text-slate-600 mb-2 block",children:" "}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{key:"citizen",label:" ",sub:"  ",icon:Xl},{key:"guardian",label:"",sub:l?"  ":"  ",icon:Gl}].map(({key:je,label:Ve,sub:yt,icon:ir})=>a.jsxs("button",{onClick:()=>{T(je),I(0),w({})},disabled:je==="guardian"&&!l,className:ue("flex items-center gap-3 rounded-xl border-2 px-4 py-3 text-left transition-all",A===je?"border-blue-500 bg-blue-50 ring-1 ring-blue-200":"border-slate-200 bg-white hover:border-slate-300",je==="guardian"&&!l&&"opacity-40 cursor-not-allowed"),children:[a.jsx("div",{className:ue("h-8 w-8 rounded-full flex items-center justify-center",A===je?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-500"),children:a.jsx(ir,{className:"h-4 w-4"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold text-slate-900",children:Ve}),a.jsx("p",{className:"text-[11px] text-slate-500",children:yt})]}),A===je&&a.jsx(Sf,{className:"h-4 w-4 text-blue-600 ml-auto"})]},je))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-semibold text-slate-600 mb-2 block",children:" "}),a.jsx("div",{className:"grid grid-cols-4 gap-1 rounded-xl border border-slate-200 bg-slate-50 p-1",children:E.map((je,Ve)=>a.jsxs("button",{onClick:()=>I(Ve),className:ue("rounded-lg px-2 py-2 text-xs font-semibold transition-all",R===Ve?"bg-white text-slate-900 shadow-sm ring-1 ring-slate-200":"text-slate-500 hover:text-slate-700 hover:bg-white/50"),children:[Ve+1,""]},je.step))}),a.jsxs("div",{className:"mt-3 rounded-xl border border-blue-200 bg-gradient-to-br from-blue-50 to-indigo-50/50 p-4",children:[a.jsx("p",{className:"text-sm font-bold text-blue-900 mb-2",children:re.title}),a.jsx("p",{className:"text-xs leading-relaxed text-blue-800/90",children:re.content})]}),a.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"rounded-lg border border-slate-100 bg-slate-50/80 p-3",children:[a.jsx("p",{className:"text-[11px] font-bold text-slate-700 mb-2",children:" "}),a.jsx("ul",{className:"space-y-1",children:re.tips.map(je=>a.jsxs("li",{className:"text-[11px] text-slate-600 flex items-start gap-1.5",children:[a.jsx("span",{className:"text-blue-400 mt-0.5",children:""})," ",je]},je))})]}),a.jsxs("div",{className:"rounded-lg border border-slate-100 bg-slate-50/80 p-3",children:[a.jsx("p",{className:"text-[11px] font-bold text-slate-700 mb-2",children:""}),a.jsx("div",{className:"space-y-1.5",children:re.checkpoints.map(je=>a.jsxs("label",{className:"flex items-center gap-2 text-[11px] text-slate-600 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:!!k[je],onChange:Ve=>w(yt=>({...yt,[je]:Ve.target.checked})),className:"h-3.5 w-3.5 rounded border-slate-300 text-blue-600"}),a.jsx("span",{className:k[je]?"line-through text-slate-400":"",children:je})]},je))})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-semibold text-slate-600 mb-2 block",children:" "}),a.jsx("div",{className:"grid grid-cols-4 gap-2",children:[{value:"SUCCESS",label:"",icon:li,ac:"border-emerald-500 bg-emerald-50 text-emerald-700"},{value:"NO_ANSWER",label:"",icon:w1,ac:"border-amber-500 bg-amber-50 text-amber-700"},{value:"REJECTED",label:"",icon:fm,ac:"border-red-500 bg-red-50 text-red-700"},{value:"WRONG_NUMBER",label:"",icon:uu,ac:"border-slate-500 bg-slate-50 text-slate-700"}].map(({value:je,label:Ve,icon:yt,ac:ir})=>a.jsxs("button",{onClick:()=>$(je),className:ue("flex flex-col items-center gap-1.5 rounded-xl border-2 px-3 py-3 text-xs font-semibold transition-all",G===je?ir:"border-slate-200 bg-white text-slate-500 hover:border-slate-300"),children:[a.jsx(yt,{className:"h-4 w-4"}),Ve]},je))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-semibold text-slate-600 mb-1.5 block",children:" "}),a.jsx(qo,{value:z,onChange:je=>U(je.target.value),className:"min-h-[80px] text-xs rounded-lg border-slate-200",placeholder:"    "})]}),a.jsxs("div",{className:"flex items-center justify-between pt-1",children:[a.jsxs("div",{className:ue("inline-flex items-center gap-2 rounded-lg px-3 py-2 text-sm font-bold",L?"bg-red-50 text-red-700 border border-red-200":"bg-slate-100 text-slate-600"),children:[a.jsx(oR,{className:"h-4 w-4"}),L?`  ${Z}`:""]}),a.jsxs("div",{className:"flex gap-2",children:[L?a.jsxs(jt,{onClick:()=>H(!1),variant:"outline",className:"h-10 border-red-300 text-red-700 hover:bg-red-50 text-sm font-semibold gap-2 rounded-xl",children:[a.jsx(li,{className:"h-4 w-4"})," "]}):a.jsxs(jt,{onClick:()=>{H(!0),M(0)},className:"h-10 bg-blue-600 text-sm font-semibold text-white hover:bg-blue-700 gap-2 px-5 rounded-xl",children:[a.jsx(Fs,{className:"h-4 w-4"}),""]}),a.jsxs(jt,{onClick:X,className:"h-10 bg-slate-800 text-sm font-semibold text-white hover:bg-slate-900 gap-2 px-5 rounded-xl",children:[a.jsx(Sf,{className:"h-4 w-4"}),"  "]})]})]})]}),C==="SMS"&&a.jsxs("div",{className:ue("space-y-4",x?"px-4 py-4":"px-6 py-5"),children:[a.jsxs("div",{className:"rounded-lg border border-amber-200 bg-amber-50/80 px-4 py-2.5 text-xs text-amber-800 flex items-start gap-2",children:[a.jsx(ea,{className:"h-3.5 w-3.5 mt-0.5 shrink-0"}),a.jsxs("span",{children:[a.jsx("strong",{children:" :"}),"  /AI   .  .    ."]})]}),a.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-3",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(rn,{className:"bg-slate-800 text-white border-slate-700 text-[10px]",children:y}),a.jsx(rn,{className:ue("text-[10px] border",wt.tone),children:wt.label})]}),a.jsx("span",{className:"text-[11px] text-slate-500",children:"   1~2"})]}),a.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:Ge.map(je=>a.jsx(jt,{type:"button",variant:"outline",size:"sm",onClick:()=>Pr(je),className:"h-8 rounded-lg text-xs",children:je.label},je.id))})]}),a.jsx("div",{className:"grid grid-cols-3 gap-1.5 rounded-xl border border-slate-200 bg-slate-50 p-1.5",children:["CONTACT","BOOKING","REMINDER"].map(je=>{const Ve=!mr.includes(je);return a.jsx("button",{onClick:()=>Qt(je),disabled:Ve,className:ue("rounded-lg px-3 py-2.5 text-xs font-semibold transition-all",te===je?"bg-white text-slate-900 shadow-sm ring-1 ring-slate-200":"text-slate-500 hover:text-slate-700 hover:bg-white/50",Ve&&"opacity-40 cursor-not-allowed"),children:JA[je]},je)})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("select",{value:se,onChange:je=>Ne(je.target.value),className:"w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm outline-none focus:border-blue-400 focus:ring-2 focus:ring-blue-100",children:br.map(je=>a.jsx("option",{value:je.id,children:je.label},je.id))}),a.jsxs("label",{className:"inline-flex items-center gap-2 text-xs text-slate-700 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:pe,onChange:je=>he(je.target.checked),className:"h-3.5 w-3.5 rounded border-slate-300"}),"   "]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-semibold text-slate-600 mb-2 block",children:""}),a.jsx("div",{className:"flex gap-2",children:["",""].map(je=>a.jsxs("button",{onClick:()=>we(je),disabled:je===""&&!l,className:ue("flex-1 flex items-center justify-center gap-2 rounded-xl border-2 px-3 py-2.5 text-xs font-semibold transition-all",fe===je?"border-blue-500 bg-blue-50 text-blue-800 ring-1 ring-blue-200":"border-slate-200 bg-white text-slate-500 hover:border-slate-300",je===""&&!l&&"opacity-40 cursor-not-allowed"),children:[je===""?a.jsx(Xl,{className:"h-3.5 w-3.5"}):a.jsx(Gl,{className:"h-3.5 w-3.5"}),je]},je))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-semibold text-slate-600 mb-2 block",children:" "}),a.jsx("div",{className:"grid grid-cols-2 gap-1.5 rounded-xl border border-slate-200 bg-slate-50 p-1.5",children:[{key:"NOW",icon:pg,label:""},{key:"SCHEDULE",icon:eR,label:""}].map(({key:je,icon:Ve,label:yt})=>a.jsxs("button",{onClick:()=>Oe(je),className:ue("flex items-center justify-center gap-1.5 rounded-lg px-3 py-2.5 text-xs font-semibold transition-all",ve===je?"bg-white text-slate-900 shadow-sm ring-1 ring-slate-200":"text-slate-500"),children:[a.jsx(Ve,{className:"h-3.5 w-3.5"})," ",yt]},je))})]})]}),a.jsxs("div",{className:"flex items-center gap-3 rounded-xl border border-slate-100 bg-slate-50/50 px-4 py-2.5",children:[a.jsx("span",{className:"text-xs text-slate-500",children:":"}),a.jsx("span",{className:"text-xs font-medium text-slate-700",children:fe===""&&l?` ${l}`:` ${o}`}),a.jsx("span",{className:"text-[10px] text-slate-400 ml-auto",children:"(: TEST_SMS_TO  )"})]}),ve==="SCHEDULE"&&a.jsx("input",{type:"datetime-local",value:Fe,onChange:je=>oe(je.target.value),className:"w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm outline-none focus:border-blue-400 focus:ring-2 focus:ring-blue-100"}),a.jsxs("button",{onClick:()=>ye(!q),className:"flex items-center gap-1.5 text-xs text-blue-600 hover:text-blue-800 font-medium",children:[q?a.jsx(Zc,{className:"h-3.5 w-3.5"}):a.jsx(Ss,{className:"h-3.5 w-3.5"}),"  ",q?"":""]}),q&&a.jsx("div",{className:"grid grid-cols-2 gap-3 rounded-xl border border-slate-200 bg-slate-50/50 p-4",children:[["centerName",""],["centerPhone"," "],["guideLink"," "],["bookingLink"," "],["caseAlias"," "],["optOut"," "]].map(([je,Ve])=>a.jsxs("div",{children:[a.jsx("label",{className:"text-[11px] font-semibold text-slate-500",children:Ve}),a.jsx("input",{type:"text",value:_e[je]??"",onChange:yt=>ee(ir=>({...ir,[je]:yt.target.value})),className:"mt-1 w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-xs outline-none focus:border-blue-400"})]},je))}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 px-4 py-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-[11px] font-bold text-slate-600",children:""}),a.jsx(rn,{variant:"outline",className:ue("text-[10px]",vwe[te]),children:JA[te]})]}),a.jsx("p",{className:"whitespace-pre-wrap text-xs leading-relaxed text-slate-700 min-h-[80px]",children:cn}),a.jsxs("div",{className:"mt-2 flex items-center justify-between text-[10px] text-slate-400 border-t border-slate-200 pt-2",children:[a.jsxs("span",{children:[cn.length,"  ",cn.length>90?"LMS":"SMS"]}),a.jsxs("span",{children:[": ",fe]})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-[11px] font-bold text-slate-600 mb-1.5",children:"/ "}),a.jsx(qo,{value:le,onChange:je=>ge(je.target.value),className:"flex-1 min-h-[120px] text-xs rounded-lg border-slate-200",placeholder:"    ()"})]})]}),dt&&a.jsx("div",{className:ue("rounded-xl border px-4 py-3 text-xs flex items-center gap-2",dt.success?"border-emerald-200 bg-emerald-50 text-emerald-800":"border-red-200 bg-red-50 text-red-800"),children:dt.success?a.jsxs(a.Fragment,{children:[a.jsx(li,{className:"h-4 w-4 shrink-0"}),a.jsxs("span",{children:["  ",dt.actualTo&&`(: ${dt.actualTo})`,dt.endpoint&&`  ${dt.endpoint}`]})]}):a.jsxs(a.Fragment,{children:[a.jsx(fm,{className:"h-4 w-4 shrink-0"}),a.jsx("span",{children:dt.error??" "})]})}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-1",children:[a.jsxs(jt,{variant:"outline",className:"h-11 text-sm font-semibold gap-2 rounded-xl border-slate-300",onClick:rr,children:[a.jsx(Fs,{className:"h-4 w-4"})," "]}),a.jsxs(jt,{className:"h-11 bg-blue-600 text-sm font-semibold text-white hover:bg-blue-700 gap-2 rounded-xl",onClick:_r,disabled:rt||hr==="OPTOUT"||!kr,children:[a.jsx(So,{className:"h-4 w-4"}),rt?" ...":ve==="NOW"?" ":" "]})]}),hr==="OPTOUT"&&a.jsx("div",{className:"rounded-lg border border-zinc-300 bg-zinc-100 px-3 py-2 text-xs text-zinc-700",children:" .   ,      ."}),a.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-xs font-semibold text-slate-700",children:" "}),(hr==="FAILED"||hr==="NO_RESPONSE"||hr==="CLICKED")&&a.jsx(jt,{size:"sm",variant:"outline",className:"h-7 text-[11px]",onClick:()=>Pr({id:"CREATE_RECONTACT_TASK"}),children:"  "})]}),a.jsx("div",{className:"mt-2 space-y-1.5 max-h-[180px] overflow-y-auto",children:sr.map(je=>{const Ve=f7[je.status];return a.jsxs("div",{className:"rounded-lg border border-slate-100 bg-slate-50 px-3 py-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:ue("inline-flex rounded-full border px-2 py-0.5 text-[10px] font-semibold",Ve.tone),children:Ve.label}),a.jsx("span",{className:"text-[10px] text-slate-500",children:je.at})]}),je.note&&a.jsx("p",{className:"mt-1 text-[11px] text-slate-600",children:je.note})]},je.id)})})]}),He.length>0&&a.jsxs("div",{className:"border-t border-slate-100 pt-4",children:[a.jsxs("button",{onClick:()=>Xt(!Mt),className:"flex items-center gap-1.5 text-xs font-semibold text-slate-600",children:[Mt?a.jsx(Zc,{className:"h-3.5 w-3.5"}):a.jsx(Ss,{className:"h-3.5 w-3.5"}),"  (",He.length,")"]}),Mt&&a.jsx("div",{className:"mt-3 space-y-2 max-h-[240px] overflow-y-auto",children:He.map(je=>a.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 text-xs bg-white",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"font-semibold text-slate-800",children:je.templateLabel}),a.jsx(rn,{variant:"outline",className:ue("text-[10px]",Swe[je.status]),children:Nwe[je.status]})]}),a.jsxs("p",{className:"mt-1 text-[11px] text-slate-500",children:[je.at,"  ",je.recipient,"  ",JA[je.type]]}),je.note&&a.jsxs("p",{className:"mt-1 text-[11px] text-slate-600 italic",children:[": ",je.note]}),je.linkUrl&&a.jsxs("p",{className:"mt-1 text-[10px] text-slate-500",children:[": ",je.linkUrl]})]},je.id))})]})]}),C==="LINK"&&g&&a.jsxs("div",{className:ue("space-y-4",x?"px-4 py-4":"px-6 py-5"),children:[a.jsx("p",{className:"text-xs text-slate-500",children:" ,  ,      ."}),a.jsx("div",{className:"space-y-2",children:[{entry:"program",icon:gm,bg:"bg-blue-100 text-blue-700",label:" ",sub:"    "},{entry:"call",icon:Fs,bg:"bg-emerald-100 text-emerald-700",label:"  ",sub:"v1    "},{entry:"sms",icon:So,bg:"bg-amber-100 text-amber-700",label:"/ ",sub:"v1  /  "}].map(({entry:je,icon:Ve,bg:yt,label:ir,sub:Cr})=>a.jsxs("button",{onClick:()=>p?.(je),className:"w-full flex items-center justify-between rounded-xl border-2 border-slate-200 bg-white px-4 py-3.5 text-left hover:border-blue-300 hover:bg-blue-50/30 transition-all",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:ue("h-9 w-9 rounded-lg flex items-center justify-center",yt),children:a.jsx(Ve,{className:"h-4 w-4"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold text-slate-900",children:ir}),a.jsx("p",{className:"text-[11px] text-slate-500",children:Cr})]})]}),a.jsx(um,{className:"h-5 w-5 text-slate-400"})]},je))})]})]})}const Kz=["","","",""],lu=[{top:"",mid:"",sub:" ",code:"H-PH-001",label:"  ",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["","",""],dementiaFit:!0},{top:"",mid:"",sub:" ",code:"H-PH-002",label:"  ( 3 )",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["",""],dementiaFit:!1},{top:"",mid:"",sub:" ",code:"H-PH-003",label:"   ",keywords:["","","",""],stageFit:[2],mciSeverityFit:[""],dementiaFit:!1},{top:"",mid:"",sub:" ",code:"H-PH-004",label:"    ",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["","",""],dementiaFit:!0},{top:"",mid:"",sub:" ",code:"H-PH-005",label:" ( )",keywords:["","",""],stageFit:[3],mciSeverityFit:[""],dementiaFit:!0},{top:"",mid:"",sub:"",code:"H-CG-001",label:"  (8)",keywords:["","","","8"],stageFit:[2,3],mciSeverityFit:["",""],dementiaFit:!1},{top:"",mid:"",sub:"",code:"H-CG-002",label:"   ",keywords:["","","",""],stageFit:[2],mciSeverityFit:[""],dementiaFit:!1},{top:"",mid:"",sub:"",code:"H-CG-003",label:"  (1:1)",keywords:["","","","1:1"],stageFit:[2,3],mciSeverityFit:["",""],dementiaFit:!0},{top:"",mid:"",sub:" ",code:"H-CG-004",label:"    ",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["","",""],dementiaFit:!0},{top:"",mid:"",sub:" ",code:"H-CG-005",label:"/  ",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["",""],dementiaFit:!0},{top:"",mid:"",sub:"",code:"H-PR-001",label:"   ",keywords:["","",""],stageFit:[3],dementiaFit:!0},{top:"",mid:"",sub:"",code:"H-PR-002",label:" MRI/PET  ",keywords:["MRI","PET",""],stageFit:[3],dementiaFit:!0},{top:"",mid:"",sub:" ",code:"H-PR-003",label:"    ",keywords:["","","",""],stageFit:[2,3],dementiaFit:!0},{top:"",mid:" ",sub:" ",code:"L-DA-001",label:"   ",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["",""],dementiaFit:!0},{top:"",mid:" ",sub:" ",code:"L-DA-002",label:"  ()",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["",""],dementiaFit:!0},{top:"",mid:" ",sub:" ",code:"L-DA-003",label:" /   ",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["","",""],dementiaFit:!0},{top:"",mid:"",sub:"",code:"L-AD-001",label:"  (/)",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["",""],dementiaFit:!1},{top:"",mid:"",sub:"",code:"L-AD-002",label:"  /",keywords:["","",""],stageFit:[3],mciSeverityFit:[""],dementiaFit:!0},{top:"",mid:"",sub:" ",code:"L-EN-001",label:"   ",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["",""],dementiaFit:!0},{top:"",mid:"",sub:" ",code:"L-EN-002",label:"   ",keywords:["","",""],stageFit:[3],mciSeverityFit:[""],dementiaFit:!0},{top:"",mid:"",sub:"",code:"L-SP-001",label:"  ",keywords:["","",""],stageFit:[2,3],mciSeverityFit:["",""],dementiaFit:!0},{top:"",mid:"",sub:"",code:"L-SP-002",label:"   ",keywords:["","",""],stageFit:[2],mciSeverityFit:["",""],dementiaFit:!1},{top:"",mid:"",sub:"",code:"S-FA-001",label:"   ",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["","",""],dementiaFit:!0},{top:"",mid:"",sub:"",code:"S-FA-002",label:"    ",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["",""],dementiaFit:!0},{top:"",mid:"",sub:"",code:"S-WA-001",label:" /",keywords:["","","GPS",""],stageFit:[3],mciSeverityFit:[""],dementiaFit:!0},{top:"",mid:"",sub:"",code:"S-WA-002",label:"   ",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:[""],dementiaFit:!0},{top:"",mid:"",sub:"119",code:"S-EM-001",label:"119  ",keywords:["119","","",""],stageFit:[2,3],mciSeverityFit:["","",""],dementiaFit:!0},{top:"",mid:"",sub:"",code:"S-EM-002",label:"    ",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["",""],dementiaFit:!0},{top:"",mid:"",sub:"",code:"S-ME-001",label:"  (/)",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["","",""],dementiaFit:!0},{top:"",mid:"",sub:"",code:"S-ME-002",label:"    ",keywords:["","",""],stageFit:[2,3],mciSeverityFit:["",""],dementiaFit:!0},{top:"",mid:" ",sub:" ",code:"F-ED-001",label:"   (1)",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["","",""],dementiaFit:!0},{top:"",mid:" ",sub:" ",code:"F-ED-002",label:"   (2)",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["",""],dementiaFit:!0},{top:"",mid:" ",sub:" ",code:"F-ED-003",label:"    ",keywords:["","",""],stageFit:[2,3],mciSeverityFit:["",""],dementiaFit:!1},{top:"",mid:" ",sub:" ",code:"F-RC-001",label:"  ()",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["",""],dementiaFit:!0},{top:"",mid:" ",sub:" ",code:"F-RC-002",label:"  ",keywords:["","",""],stageFit:[2,3],mciSeverityFit:["","",""],dementiaFit:!0},{top:"",mid:"",sub:"",code:"F-CO-001",label:"  ",keywords:["","",""],stageFit:[2,3],mciSeverityFit:["","",""],dementiaFit:!0},{top:"",mid:"",sub:"",code:"F-CO-002",label:"/  ",keywords:["","","",""],stageFit:[3],mciSeverityFit:[""],dementiaFit:!0},{top:"",mid:"",sub:"",code:"F-DS-001",label:"  /",keywords:["","",""],stageFit:[3],dementiaFit:!0},{top:"",mid:"",sub:"",code:"F-DS-002",label:"  ",keywords:["","",""],stageFit:[2,3],dementiaFit:!0},{top:"",mid:"",sub:"",code:"F-DS-003",label:"   ",keywords:["","",""],stageFit:[3],dementiaFit:!0}];function wwe(e){const t=new Set;for(const r of lu)r.top===e&&t.add(r.mid);return Array.from(t)}function Awe(e,t){return lu.filter(r=>r.top===e&&r.mid===t)}function _we(e){if(!e.trim())return lu;const t=e.toLowerCase().trim();return lu.filter(r=>r.label.toLowerCase().includes(t)||r.code.toLowerCase().includes(t)||r.keywords.some(n=>n.toLowerCase().includes(t))||r.mid.toLowerCase().includes(t)||r.sub.toLowerCase().includes(t))}function Cwe(e){const t=[];e.stage===2&&(e.resultLabel==="MCI"?(e.mciSeverity===""?(En(t,"H-PH-002","rule","","MCI        "),En(t,"H-CG-001","rule","","   MCI    "),En(t,"S-ME-001","rule","","   MCI     ")):e.mciSeverity===""?(En(t,"H-CG-003","rule","","MCI  :      (  )"),En(t,"H-PH-004","rule","","        "),En(t,"F-ED-001","rule","","  MCI    (  )"),En(t,"L-DA-001","rule","","      ")):e.mciSeverity===""&&(En(t,"H-CG-003","rule","","MCI :   +     "),En(t,"H-CG-005","rule","","/     (  )"),En(t,"F-ED-002","rule","","        "),En(t,"S-FA-001","rule","","     MCI   "),En(t,"F-RC-001","rule","","         ")),e.riskTags.includes("")&&En(t,"S-FA-002","rule","","         "),e.riskTags.includes("")&&En(t,"S-WA-001","rule","","       "),e.riskTags.includes("")&&En(t,"F-RC-001","rule","","        ")):e.resultLabel===""&&(En(t,"H-PR-003","rule","","        "),En(t,"F-DS-001","rule","","    (  )"),En(t,"F-ED-002","rule","","     "))),e.stage===3&&(En(t,"H-PR-001","rule","","Stage3       (  )"),En(t,"H-PR-002","rule",""," MRI/PET    "),En(t,"H-CG-003","rule","","       "),e.resultLabel===""&&(En(t,"F-DS-001","rule","","      "),En(t,"F-DS-002","rule","","    (  )")),e.riskTags.includes("")&&(En(t,"S-EM-001","rule","","   119     "),En(t,"L-DA-003","rule","","      (  )")),e.riskTags.includes("")&&En(t,"S-ME-002","rule","","         "));const r=new Set;return t.filter(n=>r.has(n.code)?!1:(r.add(n.code),!0)).slice(0,5)}function En(e,t,r,n,s){const i=lu.find(o=>o.code===t);i&&e.push({code:i.code,label:i.label,top:i.top,mid:i.mid,reasonSummary:s,evidenceSnippets:[],source:r,confidenceLabel:n})}function Twe(e){const t=[];if(e.stage===2&&e.resultLabel==="MCI"&&e.mciSeverity===""){const r=lu.find(n=>n.code==="H-CG-004");r&&t.push({code:r.code,label:r.label,top:r.top,mid:r.mid,reasonSummary:"MCI          (  )",evidenceSnippets:["   3.2: MCI      ,     ."," :     ,      ."],source:"rag",confidenceLabel:""})}if(e.stage===3){const r=lu.find(n=>n.code==="F-CO-002");r&&t.push({code:r.code,label:r.label,top:r.top,mid:r.mid,reasonSummary:"Stage3         (  )",evidenceSnippets:["   :          ."],source:"rag",confidenceLabel:""})}return t.slice(0,3)}function Owe(e){const t=Cwe(e),r=Twe(e),n=new Set(t.map(i=>i.code)),s=[...t];for(const i of r)n.has(i.code)||(n.add(i.code),s.push(i));return s.slice(0,5)}let h7=0;function Rwe(e,t,r,n,s,i){return h7+=1,{eventId:`AE-${Date.now()}-${h7}`,caseId:e,actorId:t,actorName:r,at:new Date().toISOString(),type:n,payload:s,sourceMeta:i}}const kwe={ADD_SELECTED:"  ",REMOVE_SELECTED:"  ",UPDATE_EXECUTION:"  ",PIN:" ",UNPIN:" ",ADD_FROM_RECO:"  ",HOLD_RECO:"  ",STATUS_CHANGE:" "},Pwe=["","","","",""],Dwe=["","","",""],zz={:"bg-blue-100 text-blue-700",:"bg-amber-100 text-amber-700",:"bg-green-100 text-green-700",:"bg-gray-100 text-gray-500"};function Iwe(e){const t=new Date;return t.setDate(t.getDate()+e),`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`}const qz={:a.jsx(MQ,{className:"h-4 w-4"}),:a.jsx(oh,{className:"h-4 w-4"}),:a.jsx(Qo,{className:"h-4 w-4"}),:a.jsx(Gl,{className:"h-4 w-4"})};function Mwe({caseId:e,stage:t,resultLabel:r,mciSeverity:n,riskTags:s=[],actorId:i="OP-001",actorName:o="",readOnly:l=!1}){const[d,u]=h.useState([]),[m,p]=h.useState(new Set),[g,x]=h.useState(new Set),[y,N]=h.useState(!1),[v,S]=h.useState(""),[E,C]=h.useState(""),[_,A]=h.useState(new Set),[T,R]=h.useState([]),[I,k]=h.useState(null),[w,L]=h.useState(!1),[H,B]=h.useState(new Set),[M,G]=h.useState("picker"),$=h.useMemo(()=>({stage:t,resultLabel:r,mciSeverity:n,riskTags:s}),[t,r,n,s]),z=h.useMemo(()=>Owe($),[$]),U=h.useCallback((ge,_e,ee)=>{const q=Rwe(e,i,o,ge,_e,ee);R(ye=>[q,...ye])},[e,i,o]),Z=h.useCallback(ge=>{p(_e=>{const ee=new Set(_e);if(ee.has(ge))ee.delete(ge),u(q=>q.filter(ye=>ye.code!==ge)),U("REMOVE_SELECTED",{code:ge});else{ee.add(ge);const q=lu.find(ye=>ye.code===ge);if(q){const ye={code:q.code,label:q.label,top:q.top,mid:q.mid,mode:"",dueDate:"",assigneeId:i,assigneeName:o,notes:"",status:"",addedAt:new Date().toISOString(),addedSource:"manual"};u(pe=>[...pe,ye]),U("ADD_SELECTED",{code:ge,label:q.label})}}return ee})},[i,o,U]),re=h.useCallback(ge=>{if(m.has(ge.code))return;p(ee=>new Set(ee).add(ge.code));const _e={code:ge.code,label:ge.label,top:ge.top,mid:ge.mid,mode:"",dueDate:"",assigneeId:i,assigneeName:o,notes:"",status:"",addedAt:new Date().toISOString(),addedSource:ge.source};u(ee=>[...ee,_e]),U("ADD_FROM_RECO",{code:ge.code,label:ge.label,source:ge.source},{source:ge.source,code:ge.code})},[m,i,o,U]),X=h.useCallback(ge=>{x(_e=>{const ee=new Set(_e);return ee.has(ge)?(ee.delete(ge),U("UNPIN",{code:ge})):(ee.add(ge),U("PIN",{code:ge})),ee})},[U]),F=h.useCallback(()=>{if(l)return;const ge=z.filter(_e=>!m.has(_e.code)).slice(0,3);if(ge.length!==0)for(const _e of ge)re(_e)},[re,m,z,l]),te=h.useCallback(()=>{l||(u(ge=>ge.map((_e,ee)=>{const q=t===2?r===""?"":r==="MCI"?ee%2===0?"":"":"":ee%3===0?"":ee%3===1?"":"",ye=_e.status===""?"":"",pe=_e.dueDate||Iwe(t===2?3+ee:2+ee);return{..._e,mode:q,status:ye,dueDate:pe}})),U("STATUS_CHANGE",{reason:"  ",stage:t,resultLabel:r}))},[U,l,r,t]),ne=h.useMemo(()=>d.filter(ge=>ge.addedSource&&ge.addedSource!=="manual").length,[d]),se=h.useMemo(()=>d.filter(ge=>ge.status==="").length,[d]),Ne=h.useMemo(()=>d.filter(ge=>ge.status==="").length,[d]),fe=h.useMemo(()=>d.filter(ge=>ge.status!==""&&!ge.dueDate).length,[d]),we=h.useMemo(()=>{if(z.length===0)return 0;const ge=z.filter(_e=>m.has(_e.code)).length;return Math.round(ge/z.length*100)},[m,z]),ve=h.useMemo(()=>t===2?["1)      ","2)  // ","3)   "]:["1) /   ","2)   /  ","3)     "],[t]),Oe=h.useCallback(ge=>{k({...ge}),L(!0)},[]),Fe=h.useCallback(ge=>{u(_e=>_e.map(ee=>ee.code===ge.code?ge:ee)),U("UPDATE_EXECUTION",{code:ge.code,mode:ge.mode,status:ge.status,dueDate:ge.dueDate,assigneeName:ge.assigneeName}),L(!1),k(null)},[U]),oe=h.useMemo(()=>{if(!v.trim())return null;let ge=_we(v);return y&&(ge=ge.filter(_e=>g.has(_e.code))),ge},[v,y,g]),le=h.useCallback(ge=>{A(_e=>{const ee=new Set(_e);return ee.has(ge)?ee.delete(ge):ee.add(ge),ee})},[]);return a.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-12 gap-3",children:[a.jsxs("div",{className:"xl:col-span-8 space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsxs(rn,{variant:"outline",className:"text-xs",children:["Stage ",t]}),a.jsx(rn,{variant:"outline",className:"text-xs",children:r}),n&&a.jsxs(rn,{variant:"outline",className:"text-xs",children:["MCI ",n]}),s.map(ge=>a.jsx(rn,{variant:"destructive",className:"text-xs",children:ge},ge))]}),a.jsxs("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-4",children:[a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[a.jsx("p",{className:"text-[11px] text-slate-500",children:" "}),a.jsxs("p",{className:"mt-1 text-sm font-bold text-slate-900",children:[we,"%"]}),a.jsx("div",{className:"mt-1.5 h-1.5 w-full rounded-full bg-gray-200 overflow-hidden",children:a.jsx("div",{className:"h-full rounded-full bg-blue-500 transition-all",style:{width:`${we}%`}})}),a.jsxs("p",{className:"mt-1 text-[10px] text-slate-500",children:[" ",z.length,"  ",ne," "]})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[a.jsx("p",{className:"text-[11px] text-slate-500",children:" "}),a.jsxs("p",{className:"mt-1 text-sm font-bold text-slate-900",children:[d.length===0?0:Math.round(se/d.length*100),"%"]}),a.jsx("div",{className:"mt-1.5 h-1.5 w-full rounded-full bg-gray-200 overflow-hidden",children:a.jsx("div",{className:"h-full rounded-full bg-emerald-500 transition-all",style:{width:`${d.length===0?0:Math.round(se/d.length*100)}%`}})}),a.jsxs("p",{className:"mt-1 text-[10px] text-slate-500",children:[" ",se," /  ",Ne]})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[a.jsx("p",{className:"text-[11px] text-slate-500",children:" "}),a.jsxs("p",{className:"mt-1 text-sm font-bold text-slate-900",children:[fe,""]}),a.jsx("p",{className:"text-[10px] text-slate-500",children:"/  "})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[a.jsx("p",{className:"text-[11px] text-slate-500",children:" "}),ve.map(ge=>a.jsx("p",{className:"mt-1 text-[10px] text-slate-600",children:ge},ge))]})]}),!l&&a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsxs(jt,{size:"sm",variant:"outline",onClick:F,children:[a.jsx(Iy,{className:"mr-1 h-3.5 w-3.5"}),"  3  "]}),a.jsxs(jt,{size:"sm",variant:"outline",onClick:te,children:[a.jsx(Bl,{className:"mr-1 h-3.5 w-3.5"}),"   "]})]}),a.jsx("div",{className:"flex gap-1 border-b border-gray-200 pb-0",children:["picker","selected","audit"].map(ge=>a.jsxs("button",{onClick:()=>G(ge),className:ue("px-3 py-2 text-sm font-medium border-b-2 transition-colors",M===ge?"border-blue-600 text-blue-700":"border-transparent text-gray-500 hover:text-gray-700"),children:[ge==="picker"&&a.jsxs(a.Fragment,{children:[a.jsx(sR,{className:"inline h-3.5 w-3.5 mr-1"})," "]}),ge==="selected"&&a.jsxs(a.Fragment,{children:[a.jsx(Sf,{className:"inline h-3.5 w-3.5 mr-1"})," (",d.length,")"]}),ge==="audit"&&a.jsxs(a.Fragment,{children:[a.jsx(ha,{className:"inline h-3.5 w-3.5 mr-1"}),"  (",T.length,")"]})]},ge))}),M==="picker"&&a.jsx(Lwe,{activeTop:E,setActiveTop:C,expandedMids:_,toggleMid:le,checkedCodes:m,toggleCheck:Z,pinnedCodes:g,togglePin:X,showPinnedOnly:y,setShowPinnedOnly:N,searchQuery:v,setSearchQuery:S,searchResults:oe,readOnly:l}),M==="selected"&&a.jsx($we,{items:d,onOpenDrawer:Oe,readOnly:l}),M==="audit"&&a.jsx(Bwe,{events:T})]}),a.jsx("div",{className:"xl:col-span-4",children:a.jsx("div",{className:"sticky top-4",children:a.jsx(Uwe,{recommendations:z,checkedCodes:m,heldCodes:H,onAdd:re,onHold:ge=>{B(_e=>new Set(_e).add(ge)),U("HOLD_RECO",{code:ge})},readOnly:l})})}),w&&I&&a.jsx(Fwe,{item:I,onSave:Fe,onClose:()=>{L(!1),k(null)},readOnly:l})]})}function Lwe({activeTop:e,setActiveTop:t,expandedMids:r,toggleMid:n,checkedCodes:s,toggleCheck:i,pinnedCodes:o,togglePin:l,showPinnedOnly:d,setShowPinnedOnly:u,searchQuery:m,setSearchQuery:p,searchResults:g,readOnly:x}){const y=h.useRef(null);return a.jsxs(Or,{children:[a.jsxs(Dn,{className:"pb-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(In,{className:"text-sm flex items-center gap-1.5",children:[a.jsx(sR,{className:"h-4 w-4 text-blue-600"})," "]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("button",{onClick:()=>u(!d),className:ue("flex items-center gap-1 text-xs px-2 py-1 rounded-md transition-colors",d?"bg-amber-100 text-amber-700":"text-gray-500 hover:bg-gray-100"),children:[d?a.jsx(PX,{className:"h-3 w-3"}):a.jsx(IX,{className:"h-3 w-3"})," "]})})]}),a.jsxs("div",{className:"relative mt-2",children:[a.jsx(rx,{className:"absolute left-2.5 top-2.5 h-3.5 w-3.5 text-gray-400"}),a.jsx($r,{value:m,onChange:N=>p(N.target.value),placeholder:", ,  ...",className:"pl-8 h-8 text-xs"}),m&&a.jsx("button",{onClick:()=>p(""),className:"absolute right-2 top-2 text-gray-400 hover:text-gray-600",children:a.jsx(uu,{className:"h-3.5 w-3.5"})})]})]}),a.jsx(Rr,{className:"pt-0",children:g!==null?a.jsxs("div",{className:"mt-2",children:[a.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:[g.length,"  "]}),a.jsx("div",{ref:y,className:"max-h-[400px] overflow-y-auto space-y-0.5 pr-1",children:g.length===0?a.jsx("div",{className:"text-center text-xs text-gray-400 py-8",children:"  "}):g.map(N=>a.jsx(g7,{item:N,checked:s.has(N.code),pinned:o.has(N.code),onToggle:()=>i(N.code),onPin:()=>l(N.code),readOnly:x,showBreadcrumb:!0},N.code))})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"grid grid-cols-4 gap-1.5 mt-2 mb-3",children:Kz.map(N=>{const v=e===N;return a.jsxs("button",{onClick:()=>t(N),className:ue("flex flex-col items-center gap-1 py-2.5 rounded-lg text-xs font-medium transition-all border",v?"border-blue-300 bg-blue-50 text-blue-700 shadow-sm":"border-gray-200 bg-white text-gray-600 hover:bg-gray-50"),children:[a.jsx("span",{className:ue("p-1.5 rounded-md",v?"bg-blue-100":"bg-gray-100"),children:qz[N]}),N]},N)})}),a.jsx("div",{ref:y,className:"max-h-[400px] overflow-y-auto space-y-1 pr-1",children:wwe(e).map(N=>{const v=r.has(N);let S=Awe(e,N);return d&&(S=S.filter(E=>o.has(E.code))),a.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[a.jsxs("button",{onClick:()=>n(N),className:"w-full flex items-center justify-between px-3 py-2 text-xs font-semibold text-gray-700 bg-gray-50 hover:bg-gray-100 transition-colors","aria-expanded":v,children:[a.jsxs("span",{className:"flex items-center gap-1.5",children:[v?a.jsx(Ss,{className:"h-3.5 w-3.5"}):a.jsx(di,{className:"h-3.5 w-3.5"}),N,a.jsx(rn,{variant:"secondary",className:"text-[10px] ml-1",children:S.length})]}),S.some(E=>s.has(E.code))&&a.jsxs(rn,{className:"text-[10px] bg-blue-600",children:[S.filter(E=>s.has(E.code)).length," "]})]}),v&&a.jsx("div",{className:"border-t border-gray-100 divide-y divide-gray-50",children:S.length===0?a.jsx("div",{className:"text-xs text-gray-400 text-center py-3",children:d?"   ":" "}):S.map(E=>a.jsx(g7,{item:E,checked:s.has(E.code),pinned:o.has(E.code),onToggle:()=>i(E.code),onPin:()=>l(E.code),readOnly:x},E.code))})]},N)})})]})})]})}function g7({item:e,checked:t,pinned:r,onToggle:n,onPin:s,readOnly:i,showBreadcrumb:o=!1}){return a.jsxs("div",{className:ue("flex items-center gap-2 px-3 py-2 text-xs transition-colors group",t?"bg-blue-50/60":"hover:bg-gray-50"),children:[!i&&a.jsx("button",{onClick:n,className:ue("w-4 h-4 rounded border flex items-center justify-center shrink-0 transition-colors",t?"bg-blue-600 border-blue-600 text-white":"border-gray-300 hover:border-blue-400"),"aria-label":`${e.label} ${t?" ":""}`,children:t&&a.jsx(Sf,{className:"h-3 w-3"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-medium text-gray-800 truncate",children:e.label}),o&&a.jsxs("div",{className:"text-[10px] text-gray-400 truncate mt-0.5",children:[e.top,"  ",e.mid,"  ",e.sub]})]}),a.jsx("span",{className:"text-[10px] text-gray-400 font-mono shrink-0",children:e.code}),a.jsx("button",{onClick:s,className:ue("p-0.5 rounded transition-colors shrink-0",r?"text-amber-500":"text-gray-300 opacity-0 group-hover:opacity-100"),"aria-label":`${e.label} ${r?" ":" "}`,children:r?a.jsx(PZ,{className:"h-3 w-3 fill-current"}):a.jsx(RZ,{className:"h-3 w-3"})})]})}function $we({items:e,onOpenDrawer:t,readOnly:r}){if(e.length===0)return a.jsx(Or,{children:a.jsxs(Rr,{className:"py-8 text-center",children:[a.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-blue-50 flex items-center justify-center mb-3",children:a.jsx(sR,{className:"h-6 w-6 text-blue-400"})}),a.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"   "}),a.jsxs("p",{className:"text-xs text-gray-400 mt-1.5 max-w-[280px] mx-auto",children:['" "    ,',a.jsx("br",{}),"        ."]}),a.jsx("div",{className:"flex items-center justify-center gap-2 mt-4",children:a.jsxs("div",{className:"inline-flex items-center gap-1.5 rounded-md border border-blue-200 bg-blue-50 px-3 py-1.5 text-[11px] text-blue-700",children:[a.jsx(Iy,{className:"h-3.5 w-3.5"}),"       "]})})]})});const n=e.reduce((s,i)=>((s[i.top]??=[]).push(i),s),{});return a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:[a.jsxs("span",{children:[" ",e.length," "]}),a.jsx("span",{children:""}),a.jsxs("span",{className:"text-green-600",children:[e.filter(s=>s.status==="").length," "]}),a.jsxs("span",{className:"text-amber-600",children:[e.filter(s=>s.status==="").length," "]}),a.jsxs("span",{className:"text-blue-600",children:[e.filter(s=>s.status==="").length," "]}),a.jsxs("span",{className:"text-gray-400",children:[e.filter(s=>s.status==="").length," "]})]}),Kz.filter(s=>n[s]?.length).map(s=>a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[a.jsx("span",{className:"p-1 rounded bg-gray-100",children:qz[s]}),a.jsx("span",{className:"text-xs font-semibold text-gray-700",children:s}),a.jsx(rn,{variant:"secondary",className:"text-[10px]",children:n[s].length})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:n[s].map(i=>a.jsxs("button",{onClick:()=>!r&&t(i),className:ue("text-left border rounded-lg p-3 transition-all",r?"cursor-default":"hover:shadow-md hover:border-blue-300 cursor-pointer","bg-white border-gray-200"),children:[a.jsxs("div",{className:"flex items-start justify-between mb-1.5",children:[a.jsx("span",{className:"text-xs font-semibold text-gray-800 flex-1 min-w-0 truncate",children:i.label}),a.jsx(rn,{className:ue("text-[10px] shrink-0 ml-2",zz[i.status]),children:i.status})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-[11px] text-gray-500",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Ef,{className:"h-3 w-3"}),i.mode]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Xl,{className:"h-3 w-3"}),i.assigneeName]}),i.dueDate&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(HX,{className:"h-3 w-3"}),i.dueDate]}),i.orgLink?.name&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Dy,{className:"h-3 w-3"}),i.orgLink.name]})]}),i.notes&&a.jsxs("div",{className:"text-[10px] text-gray-400 mt-1.5 truncate",children:[" ",i.notes]}),i.addedSource&&i.addedSource!=="manual"&&a.jsxs("div",{className:"text-[10px] text-purple-500 mt-1",children:[a.jsx(Iy,{className:"inline h-3 w-3 mr-0.5"}),i.addedSource==="rule"?"   ":"   "," "]}),!r&&a.jsxs("div",{className:"text-[10px] mt-2 text-blue-600 font-medium flex items-center gap-1",children:[a.jsx(Da,{className:"h-3 w-3"}),"  "]})]},i.code))})]},s))]})}function Fwe({item:e,onSave:t,onClose:r,readOnly:n}){const[s,i]=h.useState({...e}),o=(d,u)=>{i(m=>({...m,[d]:u}))},l=(d,u)=>{i(m=>({...m,orgLink:{...m.orgLink,name:m.orgLink?.name??"",[d]:u}}))};return a.jsxs("div",{className:"fixed inset-0 z-50 flex justify-end",children:[a.jsx("div",{className:"absolute inset-0 bg-black/30",onClick:r}),a.jsxs("div",{className:"relative w-full max-w-md bg-white shadow-xl flex flex-col animate-in slide-in-from-right duration-200",children:[a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b bg-gray-50",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:"  "}),a.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:s.label})]}),a.jsx("button",{onClick:r,className:"p-1 rounded hover:bg-gray-200 text-gray-500",children:a.jsx(uu,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-3 space-y-4",children:[a.jsxs("div",{children:[a.jsx(Ld,{children:" "}),a.jsx("div",{className:"text-xs text-gray-600 bg-gray-50 px-2 py-1.5 rounded font-mono",children:s.code})]}),a.jsxs("div",{children:[a.jsx(Ld,{children:""}),a.jsxs("div",{className:"text-xs text-gray-600",children:[s.top,"  ",s.mid]})]}),a.jsxs("div",{children:[a.jsx(Ld,{children:" "}),a.jsx("div",{className:"grid grid-cols-5 gap-1 mt-1",children:Pwe.map(d=>a.jsx("button",{onClick:()=>!n&&o("mode",d),disabled:n,className:ue("text-xs py-1.5 rounded-md border transition-colors text-center",s.mode===d?"bg-blue-600 text-white border-blue-600":"border-gray-200 text-gray-600 hover:bg-gray-50"),children:d},d))})]}),a.jsxs("div",{children:[a.jsx(Ld,{children:""}),a.jsx("div",{className:"grid grid-cols-4 gap-1 mt-1",children:Dwe.map(d=>a.jsx("button",{onClick:()=>!n&&o("status",d),disabled:n,className:ue("text-xs py-1.5 rounded-md border transition-colors text-center",s.status===d?zz[d]+" border-transparent font-medium":"border-gray-200 text-gray-600 hover:bg-gray-50"),children:d},d))})]}),a.jsxs("div",{children:[a.jsx(Ld,{children:""}),a.jsx($r,{value:s.assigneeName,onChange:d=>o("assigneeName",d.target.value),className:"h-8 text-xs mt-1",disabled:n})]}),a.jsxs("div",{children:[a.jsx(Ld,{children:""}),a.jsx($r,{type:"date",value:s.dueDate,onChange:d=>o("dueDate",d.target.value),className:"h-8 text-xs mt-1",disabled:n})]}),a.jsxs("div",{children:[a.jsx(Ld,{children:" "}),a.jsxs("div",{className:"space-y-1.5 mt-1",children:[a.jsx($r,{placeholder:"",value:s.orgLink?.name??"",onChange:d=>l("name",d.target.value),className:"h-8 text-xs",disabled:n}),a.jsx($r,{placeholder:"",value:s.orgLink?.phone??"",onChange:d=>l("phone",d.target.value),className:"h-8 text-xs",disabled:n}),a.jsx($r,{placeholder:"",value:s.orgLink?.note??"",onChange:d=>l("note",d.target.value),className:"h-8 text-xs",disabled:n})]})]}),a.jsxs("div",{children:[a.jsx(Ld,{children:" (/)"}),a.jsx(qo,{value:s.notes,onChange:d=>o("notes",d.target.value),className:"text-xs mt-1 min-h-[60px]",placeholder:" ...",disabled:n})]})]}),!n&&a.jsxs("div",{className:"flex items-center justify-end gap-2 px-4 py-3 border-t bg-gray-50",children:[a.jsx(jt,{variant:"outline",size:"sm",onClick:r,children:""}),a.jsx(jt,{size:"sm",onClick:()=>t(s),children:""})]})]})]})}function Ld({children:e}){return a.jsx("label",{className:"text-xs font-medium text-gray-700",children:e})}function Uwe({recommendations:e,checkedCodes:t,heldCodes:r,onAdd:n,onHold:s,readOnly:i}){const[o,l]=h.useState(new Set),d=u=>{l(m=>{const p=new Set(m);return p.has(u)?p.delete(u):p.add(u),p})};return a.jsxs(Or,{className:"border-purple-200",children:[a.jsxs(Dn,{className:"pb-2",children:[a.jsxs(In,{className:"text-sm flex items-center gap-1.5",children:[a.jsx(Iy,{className:"h-4 w-4 text-purple-600"}),"   "]}),a.jsxs("div",{className:"flex items-start gap-1.5 bg-amber-50 border border-amber-200 rounded-md px-2.5 py-2 mt-2",children:[a.jsx(hm,{className:"h-3.5 w-3.5 text-amber-600 mt-0.5 shrink-0"}),a.jsx("p",{className:"text-[11px] text-amber-800 leading-relaxed",children:" ,      ."})]})]}),a.jsx(Rr,{className:"pt-0 space-y-2",children:e.length===0?a.jsx("div",{className:"text-center text-xs text-gray-400 py-6",children:"      "}):e.map(u=>{const m=t.has(u.code),p=r.has(u.code),g=o.has(u.code);return a.jsxs("div",{className:ue("border rounded-lg p-2.5 transition-colors",m?"border-green-300 bg-green-50/50":p?"border-gray-200 bg-gray-50 opacity-60":"border-gray-200 bg-white"),children:[a.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[a.jsx("span",{className:"text-xs font-semibold text-gray-800 flex-1",children:u.label}),a.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[a.jsx(rn,{variant:"outline",className:ue("text-[10px]",u.source==="rule"?"border-blue-300 text-blue-600":"border-purple-300 text-purple-600"),children:u.source==="rule"?"":" "}),a.jsx(rn,{variant:"outline",className:ue("text-[10px]",u.confidenceLabel===""?"border-green-300 text-green-600":u.confidenceLabel===""?"border-amber-300 text-amber-600":"border-gray-300 text-gray-500"),children:u.confidenceLabel})]})]}),a.jsx("p",{className:"text-[11px] text-gray-600 leading-relaxed mb-2",children:u.reasonSummary}),u.evidenceSnippets.length>0&&a.jsxs("div",{className:"mb-2",children:[a.jsxs("button",{onClick:()=>d(u.code),className:"text-[10px] text-purple-600 hover:underline flex items-center gap-0.5",children:[g?a.jsx(Zc,{className:"h-3 w-3"}):a.jsx(Ss,{className:"h-3 w-3"}),"  "]}),g&&a.jsx("div",{className:"mt-1.5 space-y-1.5",children:u.evidenceSnippets.map((x,y)=>a.jsx("div",{className:"bg-gray-50 border border-gray-100 rounded px-2 py-1.5 text-[10px] text-gray-600 leading-relaxed",children:x},y))})]}),!i&&!m&&!p&&a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsxs(jt,{size:"sm",variant:"outline",className:"text-[11px] h-7",onClick:()=>n(u),children:[a.jsx(xU,{className:"h-3 w-3 mr-0.5"}),"  "]}),a.jsx(jt,{size:"sm",variant:"ghost",className:"text-[11px] h-7 text-gray-400",onClick:()=>s(u.code),children:""})]}),m&&a.jsxs("div",{className:"text-[10px] text-green-600 flex items-center gap-1",children:[a.jsx(Sf,{className:"h-3 w-3"}),"  "]}),p&&!m&&a.jsx("div",{className:"text-[10px] text-gray-400 flex items-center gap-1",children:"  (  )"})]},u.code)})})]})}function Bwe({events:e}){return e.length===0?a.jsx(Or,{children:a.jsxs(Rr,{className:"py-8 text-center",children:[a.jsx(ha,{className:"h-8 w-8 text-gray-300 mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-gray-500",children:"  "}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:" /   "})]})}):a.jsxs(Or,{children:[a.jsx(Dn,{className:"pb-2",children:a.jsxs(In,{className:"text-sm flex items-center gap-1.5",children:[a.jsx(ha,{className:"h-4 w-4 text-gray-600"}),"  ",a.jsxs(rn,{variant:"secondary",className:"text-[10px] ml-1",children:[e.length,""]})]})}),a.jsx(Rr,{className:"pt-0",children:a.jsx("div",{className:"relative space-y-0 max-h-[400px] overflow-y-auto",children:e.map((t,r)=>a.jsxs("div",{className:"flex gap-3 pb-3",children:[a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:ue("w-2 h-2 rounded-full mt-1.5 shrink-0",t.type==="ADD_SELECTED"||t.type==="ADD_FROM_RECO"?"bg-blue-500":t.type==="UPDATE_EXECUTION"?"bg-amber-500":t.type==="REMOVE_SELECTED"?"bg-red-500":"bg-gray-400")}),r<e.length-1&&a.jsx("div",{className:"flex-1 w-px bg-gray-200 mt-1"})]}),a.jsxs("div",{className:"flex-1 min-w-0 pb-1",children:[a.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[a.jsx("span",{className:"font-medium text-gray-800",children:kwe[t.type]}),a.jsx("span",{className:"text-gray-400",children:""}),a.jsx("span",{className:"text-gray-400",children:t.actorName})]}),a.jsx("div",{className:"text-[10px] text-gray-400 mt-0.5",children:new Date(t.at).toLocaleString("ko-KR")}),t.payload&&a.jsx("div",{className:"text-[10px] text-gray-500 mt-1 bg-gray-50 rounded px-2 py-1",children:Object.entries(t.payload).map(([n,s])=>a.jsxs("span",{className:"mr-2",children:[n,": ",a.jsx("strong",{children:String(s)})]},n))}),t.sourceMeta&&a.jsxs("div",{className:"text-[10px] text-purple-500 mt-0.5",children:[": ",t.sourceMeta.source==="rule"?" ":" "]})]})]},t.eventId))})})]})}function r_(e){if(e==null||Number.isNaN(e))return 0;const t=e<=1?e*100:e;return Math.max(0,Math.min(100,Math.round(t)))}function Gwe(e){const t={NORMAL:r_(e?.NORMAL),MCI:r_(e?.MCI),AD:r_(e?.AD)},r=t.NORMAL+t.MCI+t.AD;return r<=0?{NORMAL:0,MCI:0,AD:0,hasData:!1}:{NORMAL:Math.round(t.NORMAL/r*100),MCI:Math.round(t.MCI/r*100),AD:Math.round(t.AD/r*100),hasData:!0}}function Hwe(e){return e<40?"":e<70?"":""}function Kwe(e){return e===""?82:e===""?34:58}function zwe(e){return e===""?"":e===""?"":""}function Wz({probs:e,predictedLabel:t,mciSeverity:r,mciScore:n}){const s=h.useMemo(()=>Gwe(e),[e]),i=[{key:"NORMAL",label:"NORMAL",value:s.NORMAL,tone:"bg-emerald-500",textTone:"text-emerald-700"},{key:"MCI",label:"MCI",value:s.MCI,tone:"bg-blue-500",textTone:"text-blue-700"},{key:"AD",label:"AD",value:s.AD,tone:"bg-rose-500",textTone:"text-rose-700"}],o=i.reduce((g,x)=>x.value>g.value?x:g,i[0]),l=t===""?"NORMAL":t===""?"AD":t==="MCI"?"MCI":void 0,d=Math.max(0,Math.min(100,Math.round(n??Kwe(r)))),u=Hwe(d),m=zwe(r),p=t==="MCI";return a.jsxs("section",{className:"rounded-xl border border-slate-200 bg-gradient-to-b from-white to-slate-50 p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("h4",{className:"text-sm font-bold text-slate-900",children:"Stage2   "}),a.jsx("span",{className:"rounded-full border border-slate-200 bg-white px-2 py-0.5 text-[11px] font-semibold text-slate-700",title:"   .  .",children:"  ( )"})]}),s.hasData?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"mt-3 overflow-hidden rounded-lg border border-slate-200 bg-white",children:a.jsx("div",{className:"flex h-10 w-full",children:i.map(g=>{const x=`${g.value}%`,y=g.key===o.key,N=l===g.key;return a.jsxs("div",{title:`${g.label}: ${g.value}%`,className:ue("relative flex min-w-0 items-center justify-center px-1 text-[11px] font-bold text-white",g.tone,y&&"ring-2 ring-white/80",N&&"outline outline-2 outline-slate-900/60 outline-offset-[-2px]"),style:{width:x},children:[g.value>=9?`${g.label} ${g.value}%`:`${g.value}%`,y?a.jsx("span",{className:"absolute right-1 top-1 rounded bg-white/85 px-1 py-[1px] text-[9px] font-bold text-slate-700",children:" "}):null]},g.key)})})}),a.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:i.map(g=>a.jsxs("span",{className:ue("rounded border border-slate-200 bg-white px-2 py-1 text-[11px] font-semibold",g.textTone),children:[g.label," ",g.value,"%"]},`legend-${g.key}`))})]}):a.jsx("p",{className:"mt-3 rounded-md border border-slate-200 bg-white px-3 py-2 text-[11px] text-slate-500",children:"   ."}),p?a.jsxs("div",{className:"mt-4 rounded-lg border border-blue-200 bg-blue-50/60 p-3",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("p",{className:"text-xs font-semibold text-blue-900",children:"MCI   (ANN)"}),a.jsxs("span",{className:"rounded-full border border-blue-200 bg-white px-2 py-0.5 text-[10px] font-semibold text-blue-700",title:":  , : /  , :   +  ",children:[" : ",u]})]}),a.jsxs("div",{className:"mt-2",children:[a.jsx("div",{className:"relative h-3 rounded-full bg-gradient-to-r from-emerald-400 via-amber-400 to-rose-500",children:a.jsx("span",{className:"absolute top-1/2 h-4 w-4 -translate-y-1/2 rounded-full border-2 border-white bg-slate-900 shadow",style:{left:`calc(${d}% - 8px)`},"aria-label":`MCI  ${d}`})}),a.jsxs("div",{className:"mt-1 flex items-center justify-between text-[10px] text-slate-500",children:[a.jsx("span",{children:"0 ()"}),a.jsx("span",{children:"40 ()"}),a.jsx("span",{children:"70 ()"}),a.jsx("span",{children:"100"})]}),a.jsxs("p",{className:"mt-1 text-[11px] font-semibold text-slate-700",children:[" ",d,"   ",m]})]})]}):null]})}function sf({stage:e,missing:t,onOpenStep:r,className:n}){const s=t.slice(0,3);return a.jsx("section",{className:ue("rounded-xl border border-amber-200 bg-amber-50 p-4",n),children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(ea,{size:16,className:"mt-0.5 text-amber-700"}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsxs("p",{className:"text-sm font-bold text-amber-900",children:["Stage ",e,"  "]}),a.jsx("p",{className:"mt-1 text-xs text-amber-800",children:"       .      ."}),s.length>0?a.jsx("ul",{className:"mt-2 space-y-1 text-[11px] text-amber-800",children:s.map(i=>a.jsxs("li",{children:["- ",i]},i))}):null,a.jsx("div",{className:"mt-3",children:a.jsxs("button",{type:"button",onClick:r,className:"inline-flex items-center gap-1 rounded-md border border-amber-300 bg-white px-2.5 py-1 text-[11px] font-semibold text-amber-800 hover:bg-amber-100",children:["   ",a.jsx(di,{size:12})]})})]})]})})}const qwe=["AGE_OVER_THRESHOLD","HAS_MCI_HISTORY","HAS_DEMENTIA_HISTORY","HAS_COMPLAINT_HISTORY","HAS_REFUSAL_HISTORY","GUARDIAN_PRIMARY","COMPREHENSION_DIFFICULTY"],Vz=new Set(qwe);function Wwe(e){const t=[];e.age>=80&&t.push("AGE_OVER_THRESHOLD"),e.dxHistory.hasMCI&&t.push("HAS_MCI_HISTORY"),e.dxHistory.hasDementia&&t.push("HAS_DEMENTIA_HISTORY"),e.contactHistory.hasComplaint&&t.push("HAS_COMPLAINT_HISTORY"),e.contactHistory.hasRefusal&&t.push("HAS_REFUSAL_HISTORY"),e.guardian.isPrimaryContact&&t.push("GUARDIAN_PRIMARY"),e.contactHistory.needsGuardian&&t.push("NEEDS_GUARDIAN_SUPPORT"),e.contactHistory.comprehensionDifficultyFlag&&t.push("COMPREHENSION_DIFFICULTY"),t.length===0&&t.push("STANDARD_CONTACT_PATH");const r=t.some(s=>Vz.has(s))?"HUMAN_FIRST":"AI_FIRST";return{strategy:r,triggers:t,policyNote:r==="HUMAN_FIRST"?"       .      .":" ()  /   .        .",confidence:"RULE"}}function ek(e){return e.some(t=>Vz.has(t))}function Vwe({outcomeCode:e,execution:t,linkageStatus:r,contactPlan:n}){const s=e==="REQUEST_HUMAN"||e==="REQUEST_GUARDIAN"||e==="CONFUSED"||e==="EMOTIONAL";let i=t.status;e==="CONTINUE_SELF"&&(i="DONE"),e==="SCHEDULE_LATER"&&(i="WAITING_RESPONSE"),e==="NO_RESPONSE"&&(i="RETRY_NEEDED"),e==="REFUSE"&&(i="STOPPED"),s&&(i="HANDOFF_TO_HUMAN");const o=e==="NO_RESPONSE"?t.retryCount+1:t.retryCount;let l=r,d=" ";e==="CONTINUE_SELF"?(l=r==="BOOKING_IN_PROGRESS"?"BOOKING_DONE":"BOOKING_IN_PROGRESS",d=l==="BOOKING_DONE"?"     ":"  "):e==="SCHEDULE_LATER"?(l="BOOKING_IN_PROGRESS",d="  "):s?(l="REFERRAL_CREATED",d="   /  "):e==="REFUSE"?(l="NOT_CREATED",d="   "):e==="NO_RESPONSE"&&(d="  ");let u=n;u&&e==="SCHEDULE_LATER"&&(u={...u});let m=!1;return u&&e==="NO_RESPONSE"&&o>=2&&u.channel!=="HYBRID"&&(u={...u,channel:"HYBRID"},m=!0),{executionStatus:i,retryCount:o,linkageStatus:l,contactPlan:u,requiresHandoffMemo:s,recommendedNextAction:d,recontactAfterHours:e==="SCHEDULE_LATER"?72:e==="NO_RESPONSE"?24:e==="REFUSE"?168:48,switchedToHybrid:m}}function Yz(e,t){return{specialist:t.specialist,mmse:t.mmse&&e==="HOSPITAL_REFERRAL",cdrOrGds:t.cdrOrGds,neuroCognitive:t.neuroCognitive}}function Xz(e,t,r){const n=Yz(t,r),s=[],i=typeof e.mmse=="number"&&Number.isFinite(e.mmse),o=typeof e.cdr=="number"&&Number.isFinite(e.cdr);return n.mmse&&!i&&s.push("mmse"),n.cdrOrGds&&!o&&s.push("cdr"),n.neuroCognitive&&!e.neuroCognitiveType&&s.push("neuro"),n.specialist&&!e.specialist&&s.push("specialist"),s}function _p(e,t,r,n){const s={},i=Xz(e,t,r);for(const o of i)o==="mmse"&&(s.mmse="MMSE  ."),o==="cdr"&&(s.cdr="CDR  GDS  ."),o==="neuro"&&(s.neuro="  ."),o==="specialist"&&(s.specialist="    .");return typeof e.mmse=="number"&&Number.isFinite(e.mmse)&&(e.mmse<0||e.mmse>30)&&(s.mmse="MMSE  0~30  ."),typeof e.cdr=="number"&&Number.isFinite(e.cdr)&&(e.cdr<0||e.cdr>7)&&(s.cdr="CDR/GDS  0~7  ."),n?.strategyMemo!=null&&n.strategyMemo.trim().length<20&&(s.step1StrategyMemo="  20  ."),n?.consentConfirmed===!1&&(s.step1Consent="Stage1 /   ."),n?.rationale!=null&&n.rationale.trim().length===0&&(s.rationale="  ."),n?.recommendedLabel&&n?.selectedLabel&&n.recommendedLabel!==n.selectedLabel&&(!n.overrideReason||n.overrideReason.trim().length===0)&&(s.overrideReason="     ."),n?.requireNextStep&&!n?.hasNextStep&&(s.nextStep="  1 ."),s}function Ywe(e,t,r){return Xz(e,t,r).length}function n_(e){const t=typeof e.mmse=="number"?e.mmse:null,r=typeof e.cdr=="number"?e.cdr:null;return t!=null&&t<=20||r!=null&&r>=2?"":t!=null&&t<=25||r!=null&&r>=.5?"MCI":""}function Xwe(e,t,r){return t?r?e>0?"PARTIAL":"VERIFY_NEEDED":"REQUESTED":"WAITING"}function Gb(e,t,r){return Number.isNaN(e)?t:Math.max(t,Math.min(r,e))}function Qwe(e){let t=0;for(let r=0;r<e.length;r+=1)t=Math.imul(31,t)+e.charCodeAt(r)|0;return t>>>0}function Zwe(e){const t=e.minDurationSec??30,r=e.maxDurationSec??180,n=Math.max(5,Math.min(t,r)),s=Math.max(n,r),i=Qwe(`${e.caseId??"CASE"}:${e.stage??"stage"}:${e.startedAt??"start"}`);return n+i%(s-n+1)}function Hb(e,t,r,n,s){return e?{status:"DONE",reason:r}:t?{status:"READY",reason:n}:{status:"TODO",reason:s}}function Jwe(e){const t=[],r=(n,s,i)=>{t.push({type:n,at:s.at,sourceType:s.type,summary:i??("summary"in s?s.summary:void 0)})};for(const n of e){if(n.type==="STAGE2_PLAN_CONFIRMED"){r("PLAN_CONFIRMED",n);continue}if(n.type==="RISK_REVIEWED"){r("PLAN_CONFIRMED",n);continue}if(n.type==="STAGE2_RESULTS_RECORDED"){r("RESULT_RECEIVED",n),(n.summary.includes("")||n.summary.includes("")||n.summary.includes(""))&&r("RESULT_VALIDATED",n),n.summary.includes("  ")&&r("INFERENCE_COMPLETED",n);continue}if(n.type==="STAGE2_STEP2_AUTOFILL_APPLIED"){r("RESULT_RECEIVED",n);continue}if(n.type==="STAGE2_MANUAL_EDIT_APPLIED"){r("RESULT_RECEIVED",n),r("RESULT_VALIDATED",n);continue}if(n.type==="DIFF_RESULT_APPLIED"||n.type==="REEVAL_COMPLETED"){r("RESULT_RECEIVED",n),r("RESULT_VALIDATED",n);continue}if(n.type==="CALL_ATTEMPT"){r("RESULT_RECEIVED",n,n.note);continue}if(n.type==="OUTCOME_RECORDED"){r("RESULT_VALIDATED",n,n.note);continue}if(n.type==="STAGE2_CLASS_CONFIRMED"){r("CLASSIFICATION_CONFIRMED",n);continue}if(n.type==="STAGE2_NEXT_STEP_SET"){r("NEXT_STEP_DECIDED",n);continue}if(n.type==="LINKAGE_APPROVED"||n.type==="LINKAGE_COMPLETED"){r("REFERRAL_CONFIRMED",n);continue}if(n.type==="PLAN_UPDATED"||n.type==="NEXT_TRACKING_SET"){r("NEXT_STEP_DECIDED",n);continue}if(n.type==="INFERENCE_REQUESTED"||n.type==="INFERENCE_STARTED"||n.type==="INFERENCE_PROGRESS"||n.type==="INFERENCE_COMPLETED"||n.type==="INFERENCE_FAILED"){n.type==="INFERENCE_REQUESTED"&&r("INFERENCE_REQUESTED",n),n.type==="INFERENCE_STARTED"&&r("INFERENCE_STARTED",n),n.type==="INFERENCE_PROGRESS"&&r("INFERENCE_PROGRESS",n),n.type==="INFERENCE_COMPLETED"&&r("INFERENCE_COMPLETED",n);continue}}return t}function Kb(e,t){const r=G=>e.some($=>$.type===G),n=t.stage,s=!!(t.hasPlanConfirmed||r("PLAN_CONFIRMED")),i=!!(t.hasResultReceived||r("RESULT_RECEIVED")),o=!!(t.hasResultValidated||r("RESULT_VALIDATED")),l=r("INFERENCE_REQUESTED"),d=r("INFERENCE_STARTED"),u=r("INFERENCE_PROGRESS"),m=!!(t.hasModelResult||r("INFERENCE_COMPLETED")),p=!!(t.classificationConfirmed||r("CLASSIFICATION_CONFIRMED")),g=!!(t.nextStepDecided||r("NEXT_STEP_DECIDED")),x=!!(t.referralConfirmed||r("REFERRAL_CONFIRMED")),N=s||(i||o||l||d||u||m||p||g||x),v=!s&&N,S=i||o||l||d||u||m||p||g||x,E=o||m||p||g||x,C=!o&&E,_=t.inferenceStatus==="RUNNING"||d||u||l&&!m,T={stage1:["  "," /","/","  "],stage2:["  ","  /"," ","  "],stage3:[" / ","  /"," ","/  "]}[n],R=Hb(N,!1,v?`${T[0]}     .`:`${T[0]}  .`,`${T[0]}  `,`${T[0]}   .`),I=Hb(E,S,C?`${T[1]}      .`:`${T[1]}  .`,`${T[1]}   .`,`${T[1]}   .`),k=Hb(p,m||_||l,`${T[2]}   .`,m?"    (READY) .":_?"  .    .":"     .",`${T[2]}     .`),w=Hb(g,x,`${T[3]} .`,"/    .",`${T[3]}   .`),L=[{id:"STEP1",label:T[0],...R},{id:"STEP2",label:T[1],...I},{id:"STEP3",label:T[2],...k,requiresHumanApproval:!0},{id:"STEP4",label:T[3],...w,requiresHumanApproval:!0}],H=L.filter(G=>G.status==="DONE").length,B=L.filter(G=>G.status==="READY").length,M=[];return S&&L[1].status==="TODO"&&M.push("    Step2 TODO."),m&&L[2].status==="TODO"&&M.push("   Step3 TODO."),p&&L[2].status!=="DONE"&&M.push("    Step3 DONE ."),g&&L[3].status!=="DONE"&&M.push("     Step4 DONE ."),t.storedDoneCount!=null&&t.storedDoneCount!==H&&M.push(`  (${t.storedDoneCount}) (${H}) .`),t.storedOpsStatus&&H===0&&B===0&&(N||S||m||p)&&M.push(`  (${t.storedOpsStatus})     .`),{stage:n,steps:L,doneCount:H,readyCount:B,totalCount:L.length,mismatch:M.length>0,mismatchReasons:M}}function x7(e){const t=e.jobStatus??"PENDING",r=!!e.hasResult,n=e.startedAt??void 0,s=e.updatedAt??void 0,i=e.completedAt??void 0;if(r||t==="DONE")return{jobStatus:"DONE",progress:100,etaSeconds:0,startedAt:n,updatedAt:s,completedAt:i,buffered:!1};if(t==="FAILED")return{jobStatus:"FAILED",progress:Gb(e.progress??0,0,99),etaSeconds:null,startedAt:n,updatedAt:s,completedAt:i,buffered:!1};const o=Zwe(e);if(!n)return{jobStatus:t,progress:t==="RUNNING"?6:2,etaSeconds:e.etaSeconds??o,startedAt:n,updatedAt:s,completedAt:i,buffered:!0};const l=new Date(n).getTime(),d=e.nowMs??Date.now(),u=Number.isNaN(l)?0:Math.max(0,Math.round((d-l)/1e3)),m=Gb(u/o,0,1),p=1-Math.exp(-3.2*m),g=m>=1?95:Gb(5+p*88,5,95),x=Gb(Math.max(e.progress??0,g),0,99),y=e.etaSeconds??Math.max(5,o-u);return{jobStatus:t,progress:x,etaSeconds:y,startedAt:n,updatedAt:s,completedAt:i,buffered:e.progress==null||e.etaSeconds==null}}function hO(e){if(e==null||Number.isNaN(e))return"ETA  ";if(e<=0)return" ";const t=Math.floor(e/60),r=e%60;return t<=0?`${r}`:`${t} ${r.toString().padStart(2,"0")}`}const eAe=new Set(["CASE-2026-175"]),tAe="";function rAe(e,t,r){const n=typeof t=="string"?t.toUpperCase():"";return n==="AD"?"AD":n==="MCI"?typeof r=="number"&&r>=70?"HIGH":"MID":n==="NORMAL"?"LOW":typeof r=="number"?r>=82?"AD":r>=70?"HIGH":r>=40?"MID":"LOW":e?.risk===""?"HIGH":e?.risk===""?"MID":"LOW"}function Qz(e,t){return t==="LOW"?{caseId:e,source:"SEEDED",syncedAt:ut(),mmse:26,gds:2,cogTestType:"CERAD-K",specialistOpinionStatus:"MISSING",receivedMeta:{linkageStatus:"WAITING",providerName:" "},missingRequiredCount:0,filledFields:["mmse","gds","cogTestType","specialistOpinionStatus"]}:t==="MID"?{caseId:e,source:"SEEDED",syncedAt:ut(),mmse:23,gds:4,cogTestType:"SNSB-II",specialistOpinionStatus:"MISSING",receivedMeta:{linkageStatus:"WAITING",providerName:" "},missingRequiredCount:0,filledFields:["mmse","gds","cogTestType","specialistOpinionStatus"]}:t==="HIGH"?{caseId:e,source:"SEEDED",syncedAt:ut(),mmse:19,gds:5,cdr:1,cogTestType:"SNSB-II",specialistOpinionStatus:"MISSING",receivedMeta:{linkageStatus:"WAITING",providerName:" "},missingRequiredCount:0,filledFields:["mmse","gds","cdr","cogTestType","specialistOpinionStatus"]}:{caseId:e,source:"SEEDED",syncedAt:ut(),mmse:14,gds:6,cdr:2,cogTestType:"SNSB-C",specialistOpinionStatus:"DONE",receivedMeta:{linkageStatus:"WAITING",providerName:" "},missingRequiredCount:0,filledFields:["mmse","gds","cdr","cogTestType","specialistOpinionStatus"]}}function nAe(e,t){const r=Qz(e.caseId,t),n=e.specialistOpinionStatus??(t==="AD"?"DONE":r.specialistOpinionStatus??"MISSING"),s={caseId:e.caseId,source:e.source,syncedAt:e.syncedAt||ut(),mmse:e.mmse??r.mmse,gds:e.gds??r.gds,cdr:e.cdr??r.cdr,cogTestType:e.cogTestType??r.cogTestType,specialistOpinionStatus:n,receivedMeta:{linkageStatus:e.receivedMeta?.linkageStatus??r.receivedMeta.linkageStatus,receivedAt:e.receivedMeta?.receivedAt,providerName:e.receivedMeta?.providerName??r.receivedMeta.providerName},missingRequiredCount:e.missingRequiredCount,filledFields:e.filledFields},o=(t==="LOW"||t==="MID"?["mmse","gds","cogTestType"]:t==="HIGH"?["mmse","gds","cdr","cogTestType"]:["mmse","gds","cdr","cogTestType","specialistOpinionStatus"]).filter(l=>l==="specialistOpinionStatus"?s.specialistOpinionStatus!=="DONE":s[l]==null).length;return s.missingRequiredCount=o,s.filledFields=["mmse","gds","cdr","cogTestType","specialistOpinionStatus"].filter(l=>l==="specialistOpinionStatus"?s.specialistOpinionStatus!=null:s[l]!=null),s}function aAe(e){const t=e.display.stepCards.map(s=>({id:`STEP${s.step}`,label:s.subtitle,status:s.state==="DONE"?"DONE":s.state==="IN_PROGRESS"?"READY":"TODO",reason:s.reason,requiresHumanApproval:s.step>=3})),r=t.filter(s=>s.status==="DONE").length,n=t.filter(s=>s.status==="READY").length;return{stage:"stage3",steps:t,doneCount:r,readyCount:n,totalCount:4,mismatch:e.display.inconsistencyFlags.length>0,mismatchReasons:[...e.display.inconsistencyFlags]}}const Ol="",a_=" ",_l="02-555-0199",sAe="R-2ldKkoGbDF-marBFEbgVilAXB5Tw0r";function iAe(){const e=sAe.trim();return typeof window<"u"?`${`${window.location.origin}${"/neuro-shield/".replace(/\/$/,"")}`}/p/sms?t=${encodeURIComponent(e)}`:`http://146.56.162.226/neuro-shield/p/sms?t=${encodeURIComponent(e)}`}const oAe=iAe(),Zz=" 080-000-0000",tk=[{id:"S1_CONTACT_BASE",messageType:"CONTACT",label:"1 ()",body:({centerName:e,guideLink:t,centerPhone:r})=>`[:${e}]     .  (/)   .      : ${t} / : ${r}`},{id:"S1_CONTACT_GUARDIAN",messageType:"CONTACT",label:"1 ( )",body:({centerName:e,guideLink:t,centerPhone:r})=>`[:${e}]        ()   .  / : ${t} / : ${r}`},{id:"S1_BOOKING_BASE",messageType:"BOOKING",label:"1 (/)",body:({centerName:e,centerPhone:t,reservationLink:r})=>`[:${e}]  . ${r}     ${t}  .`},{id:"S1_BOOKING_CHANNEL",messageType:"BOOKING",label:"1 (/ )",body:({centerName:e,centerPhone:t,reservationLink:r})=>`[:${e}]   . ${r}  /   . : ${t}`},{id:"S1_REMINDER_FIRST",messageType:"REMINDER",label:"1 (1 )",body:({centerName:e,centerPhone:t,unsubscribe:r})=>`[:${e}]       .    . : ${t} / ${r}`},{id:"S1_REMINDER_FINAL",messageType:"REMINDER",label:"1 ()",body:({centerName:e,centerPhone:t})=>`[:${e}]    .      . : ${t}`}],rk=[{id:"S2_CONTACT_BASE",messageType:"CONTACT",label:"2   ",body:({centerName:e,guideLink:t,centerPhone:r})=>`[:${e}] 2 (/)  .        . ${t} / : ${r}`},{id:"S2_CONTACT_RELIEF",messageType:"CONTACT",label:"2   ",body:({centerName:e,guideLink:t,centerPhone:r})=>`[:${e}] 2   .       .  : ${t} / : ${r}`},{id:"S2_BOOKING_NEURO",messageType:"BOOKING",label:"2   ",body:({centerName:e,reservationLink:t})=>`[:${e}] 2       . / : ${t}`},{id:"S2_BOOKING_CLINICAL",messageType:"BOOKING",label:"2   ",body:({centerName:e,reservationLink:t,centerPhone:r})=>`[:${e}] 2 (  )  . /: ${t} / : ${r}`},{id:"S2_REMINDER_BOOKING",messageType:"REMINDER",label:"2  / ",body:({centerName:e,guideLink:t,centerPhone:r})=>`[:${e}]      .         . ${t} / : ${r}`},{id:"S2_REMINDER_NOSHOW",messageType:"REMINDER",label:"2   ",body:({centerName:e,reservationLink:t})=>`[:${e}]      .    . ${t}`}],nk=[{id:"S3_CONTACT_BASE",messageType:"CONTACT",label:"3   ",body:({centerName:e,centerPhone:t})=>`[:${e}]     . /    . : ${t}`},{id:"S3_BOOKING_REEVAL",messageType:"BOOKING",label:"3 /  ",body:({centerName:e,reservationLink:t,centerPhone:r})=>`[:${e}] /  .   : ${t} / : ${r}`},{id:"S3_BOOKING_CONFIRM",messageType:"BOOKING",label:"3  / ",body:({centerName:e,reservationLink:t,centerPhone:r})=>`[:${e}]      .  /: ${t} / : ${r}`},{id:"S3_PROGRAM_GUIDE",messageType:"CONTACT",label:"3 (/) ",body:({centerName:e,guideLink:t,centerPhone:r})=>`[:${e}]  / .        . ${t} / : ${r}`},{id:"S3_REMINDER_TRACK",messageType:"REMINDER",label:"3 ( )",body:({centerName:e,centerPhone:t})=>`[:${e}]     .      . : ${t}`}],lAe=[{step:"greeting",title:"1:    ",content:".   .   ?       .",tips:["  ","    ","   "],checkpoints:["  ","/ ","   "]},{step:"purpose",title:"2:  ",content:"       . /     .",tips:["   ","   ","   "],checkpoints:["  ","   ","  "]},{step:"assessment",title:"3:   ",content:"   ,  (//), /    .       .",tips:["  ","  ","  "],checkpoints:["  ","  ","    "]},{step:"scheduling",title:"4:   ",content:"     , / ,   .     .",tips:["  1 ","   ","  "],checkpoints:["  ","   ","  "]}],cAe=[{step:"greeting",title:"1:   / ",content:".   .   ?       .",tips:["    ","/   ","   "],checkpoints:["  ","/ ","  "]},{step:"purpose",title:"2: 2  ",content:"  2 (/)   .        .",tips:["     ","   ","   "],checkpoints:["2   ","   ","   "]},{step:"assessment",title:"3: /  ",content:"   ,   ,     .       .",tips:["    ","   ","/    "],checkpoints:["/  ","/  ","  "]},{step:"scheduling",title:"4:    ",content:"     , / ,    .     .",tips:["  1 ","   ","  "],checkpoints:["  ","/  ","  "]}];function ut(){return new Date().toISOString()}function mt(e){if(!e)return"-";const t=new Date(e);return Number.isNaN(t.getTime())?e:`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")} ${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`}function gt(e){return new Date(Date.now()+e*60*60*1e3).toISOString()}function Fc(e){if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const r=t.getTimezoneOffset();return new Date(t.getTime()-r*60*1e3).toISOString().slice(0,16)}function Uc(e){if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toISOString()}function dAe(e,t){const r=e==="stage1"?lAe:cAe;return t?r.map((n,s)=>({...n,content:s===1?`${n.content}

 : ${t.scriptBody}`:n.content,tips:s===0?[...n.tips,` : ${t.useCase}`]:s===2?[...n.tips,...t.evidence.slice(0,2)]:n.tips})):r}function cg(e){if(!e||!e.scheduledAt)return"(  )";const t=e.place?.trim()||"  ",r=e.contactGuide?.trim()||_l;return`${e.reservationType} / ${mt(e.scheduledAt)} / ${t} /  ${r}`}function uAe(e){return e===""?10:e===""?7:e===""?6:e===""?3:1}function fAe(e){return e===""?{level:"OVERDUE",dueAt:gt(-4)}:e===""||e===""?{level:"DUE_SOON",dueAt:gt(18)}:{level:"OK",dueAt:gt(72)}}function kN(e){return e===""?{level:"EXCLUDE",score:58,notes:["  ","/  "]}:e===""?{level:"WARN",score:79,notes:["   "]}:{level:"GOOD",score:96,notes:["  "]}}function gO(e){const t={:62,:76,:24,:88,:94},r={:0,:8,:16},n={:0,:6,:18};if(!e)return 60;const s=Math.min(e.alertTags.length*3,12),i=t[e.status]+r[e.risk]+s-n[e.quality];return Math.max(5,Math.min(99,i))}function pAe(e){return e>=85?{label:"",tone:"border-red-200 bg-red-50 text-red-700",bar:"bg-red-500",guide:"24   "}:e>=65?{label:"",tone:"border-orange-200 bg-orange-50 text-orange-700",bar:"bg-orange-500",guide:" /  "}:e>=45?{label:"",tone:"border-blue-200 bg-blue-50 text-blue-700",bar:"bg-blue-500",guide:"  "}:{label:"",tone:"border-emerald-200 bg-emerald-50 text-emerald-700",bar:"bg-emerald-500",guide:"/ "}}function mAe(e){return e==="TRACKING"?"":e==="REEVAL_DUE"?" ":e==="REEVAL_PENDING"?" ":e==="LINKAGE_PENDING"?" ":e==="PLAN_NEEDS_UPDATE"?"  ":e==="CHURN_RISK"?" ":""}function u1(e){return e==="ACTIVE"?"ACTIVE":e==="PAUSED"?"PAUSED":"NEEDS_UPDATE"}function hAe(e){return e?e.status===""?"CLOSED":e.alertTags.includes(" ")?"CHURN_RISK":e.alertTags.includes(" ")?"LINKAGE_PENDING":e.alertTags.includes(" ")?e.status===""||e.status===""?"REEVAL_DUE":"REEVAL_PENDING":e.status===""?"PLAN_NEEDS_UPDATE":"TRACKING":"TRACKING"}function gAe(e){return e?e.status===""?"PAUSED":e.status===""||e.alertTags.includes(" ")?"NEEDS_UPDATE":"ACTIVE":"ACTIVE"}function xAe(e){return e?e.alertTags.includes(" ")||e.status===""?"HIGH":e.risk===""||e.status===""?"MID":"LOW":"MID"}function bAe(e){const t=hAe(e),r=gAe(e),n=xAe(e),s=e?.risk===""?14:e?.risk===""?21:30,i=gt(e?.status===""?12:e?.status===""?-6:72),o=gt(e?.status===""?8:36),l=gt(e?.risk===""?120:168);return{opsStatus:t,nextReevalAt:i,nextTrackingContactAt:o,nextProgramAt:l,planStatus:r,trackingCycleDays:s,churnRisk:n}}function yAe(e,t,r=!1){const n=[],s=e?.alertTags.includes(" ")??!0,i=e?.alertTags.includes(" ")??!1,o=e?.alertTags.includes(" ")??!1,l=kN(e?.quality).level;return(s||t.opsStatus==="REEVAL_DUE"||t.opsStatus==="REEVAL_PENDING")&&n.push({id:"s3-action-reeval",type:"SCHEDULE_REEVAL",title:r?"/  ":"  ",reason:r?"    .":"      .",severity:t.opsStatus==="REEVAL_DUE"?"HIGH":"MID",requiresApproval:!0,decision:"PENDING"}),(i||t.churnRisk==="HIGH")&&n.push({id:"s3-action-reminder",type:"SEND_REMINDER",title:r?" /  ":" / ",reason:r?"/         .":"/      .",severity:"HIGH",requiresApproval:!1,decision:"PENDING"}),t.planStatus==="NEEDS_UPDATE"&&n.push({id:"s3-action-plan",type:"UPDATE_PLAN",title:r?"  ":"  ",reason:r?" /      .":"       .",severity:"MID",requiresApproval:!0,decision:"PENDING"}),(o||t.opsStatus==="LINKAGE_PENDING")&&n.push({id:"s3-action-escalate",type:"ESCALATE_LEVEL",title:r?"  / ":" /  ",reason:r?"      .":"       .",severity:o?"MID":"LOW",requiresApproval:!0,decision:"PENDING"}),l==="EXCLUDE"&&n.unshift({id:"s3-action-quality",type:"SEND_REMINDER",title:"  ",reason:r?"       .":"      .",severity:"HIGH",requiresApproval:!1,decision:"PENDING"}),n.slice(0,3)}function Zn(e){return Math.max(0,Math.min(1,e))}function Ko(e){return Math.round(Zn(e)*100)}function eh(e){const t=Zn(e);return t>=.7?"HIGH":t>=.45?"MID":"LOW"}function vAe(e){return e>=85?"":e>=65?"":e>=45?"":""}function Dc(e){if(e==null||Number.isNaN(e))return;const t=e<=1?e*100:e;return Math.max(0,Math.min(100,Math.round(t)))}function NAe(e){const t=e.header.dataQuality.score;return t>=90?"HIGH":t>=70?"MID":"LOW"}function SAe(e){if(!e)return;const t=Zn(e.risk2y_now),r=e.trend==="UP"?.14:e.trend==="DOWN"?-.1:e.trend==="VOLATILE"?.08:.02;return Zn(t+r)}function EAe(e,t){if(e)return e==="MCI"?t===""?{MCI:.68,AD:.25,NORMAL:.07}:{MCI:.72,AD:.18,NORMAL:.1}:e===""?{AD:.74,MCI:.22,NORMAL:.04}:{NORMAL:.78,MCI:.16,AD:.06}}function xO(e){return e?.risk===""?"":e?.risk===""?"":""}function jAe(e){return e?e===""?"":e:"-"}function Jz(e){return e?e==="NOT_STARTED"?"":e==="IN_PROGRESS"?"":"":"-"}function bO(e){return e?.risk===""?"":e?.risk===""?"MCI":""}function s_(e){return e==="MCI"||e===""}function wAe(e){return e===""?"FOLLOWUP_2Y":e==="MCI"?"STAGE3":"DIFF_PATH"}function jy(e,t){return e===""?{NORMAL:.08,MCI:.2,AD:.72}:e==="MCI"?t===""?{NORMAL:.08,MCI:.66,AD:.26}:t===""?{NORMAL:.32,MCI:.56,AD:.12}:{NORMAL:.1,MCI:.72,AD:.18}:{NORMAL:.78,MCI:.17,AD:.05}}function i_(e){if(e)return e===""?"":e===""?"":"MCI"}function AAe(e){if(e)return e===""?"":e}function _Ae(e){return e===" "?"POS":e===" "?"NEG":"UNK"}function q0(e,t="HOSPITAL"){return+!!e.specialist+ +(t==="CENTER"?!0:typeof e.mmse=="number")+ +(typeof e.cdr=="number")+ +!!e.neuroCognitiveType}function wy(e,t,r="HOSPITAL"){const n=r==="CENTER"?3:4,s=q0(e,r);return t||s>=n?"COMPLETED":s>0?"IN_PROGRESS":"NOT_STARTED"}function b7(e,t){if(!!(t&&t.stage===2&&t.operationStep==="WAITING"&&!t.computed.model2.available))return{status:"NOT_STARTED",tests:{specialist:!1,mmse:void 0,cdr:void 0,neuroCognitiveType:void 0},classification:void 0,nextStep:void 0};const n=bO(e),s=n==="MCI"?xO(e):void 0,i=e?.status===""||e?.status===""||e?.status==="",o=e?.path?.includes("")||e?.path?.includes("")?"HOSPITAL":"CENTER",l={specialist:i?e?.risk!=="":!1,mmse:void 0,cdr:void 0,neuroCognitiveType:void 0};return{status:wy(l,!1,o),tests:l,classification:i?{label:n,probs:jy(n,s),mciStage:s}:void 0,nextStep:void 0}}function CAe({detail:e,modelPriorityValue:t,stage2ResultLabel:r,stage2MciSeverity:n,stage2TestAt:s,stage2Org:i}){const o=Math.max(0,Math.min(100,t)),l=Math.max(1,100-o),d=e.stage3?.transitionRisk,u=d?.risk2y_now,m=SAe(d),p=EAe(r,n),g=Date.now(),x=720*60*60*1e3,y=T=>{const R=new Date(T).getTime();return Number.isNaN(R)?!1:g-R<=x},N=e.timeline.filter(T=>y(T.at)),v=N.filter(T=>T.type==="CALL_ATTEMPT").length,S=N.filter(T=>T.type==="CALL_ATTEMPT"&&T.result==="SUCCESS").length,E=N.filter(T=>T.type==="CALL_ATTEMPT"&&T.result!=="SUCCESS"||T.type==="SMS_SENT"&&T.status==="FAILED").length,C=N.filter(T=>T.type==="REEVAL_SCHEDULED"||T.type==="REEVAL_RESCHEDULED"||T.type==="DIFF_SCHEDULED").length,_=e.stage3?.programs.filter(T=>T.selected&&(T.execution?.status==="PLANNED"||T.execution?.status==="IN_PROGRESS")).length??0,A=e.stage3?.programs.filter(T=>T.selected&&T.execution?.status==="DONE").length??0;return{stage1:{priorityScore:o,priorityBand:vAe(o),interventionLevel:e.interventionLevel,percentileTop:l,updatedAt:e.scoreSummary[0]?.updatedAt??e.timeline[0]?.at},stage2:{resultLabel:r,mciSeverity:n,probs:p,tests:{neuropsych:e.stage3?"DONE":"MISSING",clinical:e.stage3?"DONE":"MISSING",specialist:e.stage3?"DONE":"MISSING"},testAt:s,org:i},stage3:{risk2yNow:u,risk2yLabel:u==null?void 0:eh(u),confidence:NAe(e),status:e.stage3?.diffPathStatus==="COMPLETED"||e.stage3?.riskReviewedAt?"RESULT_APPLIED":"RESULT_PENDING",nextReevalAt:e.stage3?.headerMeta.nextReevalAt,nextContactAt:e.stage3?.headerMeta.nextTrackingContactAt,riskAt2y:m},opsCounts:{contactAttempts30d:v,contactSuccess30d:S,contactFail30d:E,bookings:C,programsPlanned:_,programsDone:A},dataQuality:{score:e.header.dataQuality.score,missingCount:e.header.dataQuality.notes?.length??0}}}function TAe(e){const t=gO(e),r=Zn(t/100),n=e?.risk===""?.12:e?.risk===""?.05:0,s=e?.status===""?.1:e?.status===""?.06:e?.status===""?-.08:0,i=Zn(r+n+s),l=(e?.status===""?[.18,.14,.1,.06,.03,0]:e?.status===""?[-.1,-.07,-.05,-.03,-.01,0]:[.04,.02,.03,.01,.005,0]).map((g,x)=>{const y=Zn(i-g),N=e?.quality===""?.08:e?.quality===""?.06:.04;return{t:gt(-(720*(5-x))),risk2y:y,ciLow:Zn(y-N),ciHigh:Zn(y+N),source:"model"}}),d=l[0]?.risk2y??i,u=i-d,p=Math.max(...l.map((g,x)=>x===0?0:Math.abs(g.risk2y-(l[x-1]?.risk2y??g.risk2y))))>=.08?"VOLATILE":u>=.04?"UP":u<=-.04?"DOWN":"FLAT";return{risk2y_now:i,risk2y_label:i>=.7?"HIGH":i>=.45?"MID":"LOW",trend:p,variabilityNote:p==="VOLATILE"?"  /     .":void 0,updatedAt:ut(),modelVersion:"stage3-risk-v1.2",series:l}}function OAe(e){const t=e?.risk===""||e?.status==="";return[{id:"program-precision-diff-neuro",major:" ",middle:" ",leaf:"  ",pinned:t},{id:"program-precision-mri-route",major:" ",middle:" ",leaf:" / ",pinned:t},{id:"program-case-followup-weekly",major:" ",middle:" ",leaf:"     ",pinned:!0},{id:"program-case-caregiver",major:" ",middle:" ",leaf:"  "},{id:"program-support-homevisit",major:"",middle:" ",leaf:" / "},{id:"program-support-education",major:"",middle:"",leaf:"   ",pinned:e?.quality!==""},{id:"program-family-rest",major:"/ ",middle:"",leaf:"    "},{id:"program-family-counseling",major:"/ ",middle:"",leaf:"  "}]}function RAe(e){const t=new Set(["program-precision-diff-neuro","program-case-followup-weekly","program-support-education"]);return e.filter(r=>t.has(r.id)).map(r=>({...r,selected:!0,execution:{owner:Ol,status:"PLANNED",dueDate:gt(72),method:""}}))}function y7(e){return e?e==="CONTINUE_SELF"?"":e==="NO_RESPONSE"||e==="REFUSE"?"":" ":" "}function kAe(e){const t=kN(e?.quality).level,r=!!e?.profile.guardianPhone;return[{key:"CONSENT_OK",label:" ",status:t==="EXCLUDE"?"FAIL":"PASS",failReason:t==="EXCLUDE"?"   ":void 0,fixAction:t==="EXCLUDE"?{label:" ",action:"REQUEST_CONSENT"}:void 0},{key:"CONTACTABLE_TIME_OK",label:"   ",status:e?.status===""?"UNKNOWN":"PASS",failReason:e?.status===""?"   ":void 0,fixAction:e?.status===""?{label:" ",action:"CONFIRM_CONTACT_TIME"}:void 0},{key:"PHONE_VERIFIED",label:" ",status:t==="GOOD"?"PASS":"FAIL",failReason:t==="GOOD"?void 0:"  ",fixAction:t==="GOOD"?void 0:{label:" ",action:"VERIFY_PHONE"}},{key:"GUARDIAN_OPTIONAL",label:" ",status:r?"PASS":"UNKNOWN",failReason:r?void 0:"   ",fixAction:r?void 0:{label:" ",action:"ADD_GUARDIAN"}}]}function PAe(e,t="stage1",r=!1){if(t==="stage3"&&!r)return{topFactors:[{title:"  ",description:"       .",recency:gt(-14)},{title:"  ",description:"    /  .",recency:gt(-20),isMissing:e?.quality!==""},{title:"  ",description:"    /  .",recency:gt(-32)}],computedAt:ut(),version:"stage3-risk-v1.2"};if(t==="stage3"&&r)return{topFactors:[{title:"  ",description:"SLA        .",recency:gt(-14)},{title:" ",description:"   /  .",recency:gt(-20),isMissing:e?.quality!==""},{title:"  ",description:"      .",recency:gt(-32)}],computedAt:ut(),version:"stage2-ops-v3.1"};const n=e?.risk??"";return{topFactors:n===""?[{title:"   ",description:" 2       .",recency:gt(-16)},{title:"  ",description:"       .",recency:gt(-30)},{title:"   ",description:"        .",recency:gt(-40),isMissing:e?.quality===""}]:n===""?[{title:"  ",description:"     .",recency:gt(-18)},{title:"   ",description:"     L0/L1   .",recency:gt(-34)},{title:"  ",description:"       .",recency:gt(-45),isMissing:e?.quality!==""}]:[{title:"  ",description:"     .",recency:gt(-20)},{title:"  ",description:"       .",recency:gt(-32)},{title:"  ",description:"      .",recency:gt(-46),isMissing:e?.quality!==""}],computedAt:ut(),version:t==="stage2"?"stage2-risk-v2.4":"stage1-risk-v2.4"}}function DAe(e,t="stage1",r,n=!1){if(t==="stage3"&&r){const l=e?.profile.stage3Type==="AD_MANAGEMENT",d=kN(e?.quality),u=r.recommendedActions.length,m=r.recommendedActions.some(y=>y.severity==="HIGH")?"HIGH":r.recommendedActions.some(y=>y.severity==="MID")?"MID":"LOW",p=e?.status===""?94:e?.status===""?58:e?.status===""?67:76,g=Ko(r.transitionRisk.risk2y_now),x=r.reevalStatus==="COMPLETED"?"COMPLETED":r.reevalStatus==="SCHEDULED"?"SCHEDULED":r.reevalStatus==="NOSHOW"?"NOSHOW":"PENDING";if(n){const y=(r.diffPathStatus==="SCHEDULED"||r.diffPathStatus==="COMPLETED"?2:1)+(r.reevalStatus==="SCHEDULED"||r.reevalStatus==="COMPLETED"?1:0)+(r.planProgressPct>=80?1:0),N=Math.max(0,Math.min(100,Math.round(y/4*100))),v=e?.status===""?7:e?.status===""?3:0,S=r.diffPathStatus==="SCHEDULED"||r.diffPathStatus==="COMPLETED"?0:1,E=r.planProgressPct>=80;return[{label:" ",value:N,unit:"%",updatedAt:r.transitionRisk.updatedAt,flags:[N>=100?"DONE":N>=40?"IN_PROGRESS":"BLOCKED"]},{label:"/ ",value:S,unit:"",updatedAt:r.headerMeta.nextReevalAt??ut(),flags:[S===0?"CONFIRMED":"WAITING"]},{label:"  ",value:v,unit:"",updatedAt:r.headerMeta.nextTrackingContactAt??ut(),flags:v>0?["DELAYED"]:["NORMAL"]},{label:"  ",value:E?1:0,unit:"",updatedAt:ut(),flags:[E?"CONFIRMED":"UNCONFIRMED"]},{label:" ",value:d.score,unit:"%",updatedAt:ut(),flags:d.level==="GOOD"?["OK"]:["MISSING_IMPACT"]}]}return[{label:l?" ( )":"2  ( )",value:g,unit:"%",updatedAt:r.transitionRisk.updatedAt,flags:[eh(r.transitionRisk.risk2y_now),r.transitionRisk.trend]},{label:" ",value:u,unit:"",updatedAt:r.headerMeta.nextReevalAt??ut(),flags:[` ${m}`,x]},{label:" ",value:p,unit:"%",updatedAt:r.headerMeta.nextTrackingContactAt??ut(),flags:p<70?[" "]:void 0},{label:" ",value:r.planProgressPct,unit:"%",updatedAt:ut(),flags:[u1(r.headerMeta.planStatus)]},{label:" ",value:d.score,unit:"%",updatedAt:ut(),flags:d.level==="GOOD"?["  "]:["  "]}]}const s=e?.risk??"",i=Number(e?.id.slice(-2)??0)%5,o=s===""?[41,53,47,44]:s===""?[79,83,86,82]:[61,68,65,66];return[{label:"CIST ",value:Math.max(0,Math.min(100,o[0]-i)),unit:"",updatedAt:gt(-12),flags:s===""?[" "]:void 0},{label:"  ",value:Math.max(0,Math.min(100,o[1]-i)),unit:"",updatedAt:gt(-14),flags:s!==""?[""]:void 0},{label:"  ",value:Math.max(0,Math.min(100,o[2]+i)),unit:"",updatedAt:gt(-26),flags:e?.quality!==""?[" "]:void 0},{label:"  ",value:Math.max(0,Math.min(100,o[3])),unit:"",updatedAt:gt(-8),flags:e?.status===""||e?.status===""?[" "]:void 0}]}function yO(e,t){const r={L0:[{id:"todo-L0-1",title:"    ",priority:1,status:"OPEN",suggestedAction:"VERIFY"},{id:"todo-L0-2",title:"   ",priority:2,status:"OPEN",suggestedAction:"SCHEDULE"},{id:"todo-L0-3",title:"  ",priority:2,status:"OPEN",suggestedAction:"VERIFY"}],L1:[{id:"todo-L1-1",title:"  ",priority:1,status:"OPEN",suggestedAction:"SMS"},{id:"todo-L1-2",title:"  ",priority:2,status:"OPEN",suggestedAction:"VERIFY"},{id:"todo-L1-3",title:"   ",priority:3,status:"OPEN",suggestedAction:"HOLD"}],L2:[{id:"todo-L2-1",title:"1  1 ",priority:1,status:"OPEN",suggestedAction:"CALL"},{id:"todo-L2-2",title:"    ",priority:1,status:"OPEN",suggestedAction:"SCHEDULE"},{id:"todo-L2-3",title:"2   ",priority:2,status:"OPEN",suggestedAction:"SMS"}],L3:[{id:"todo-L3-1",title:"2     ",priority:1,status:"OPEN",suggestedAction:"VERIFY"},{id:"todo-L3-2",title:"   ",priority:1,status:"OPEN",suggestedAction:"SMS"},{id:"todo-L3-3",title:"    ",priority:2,status:"OPEN",suggestedAction:"SCHEDULE"}]};return t==="EXCLUDE"?[{id:"todo-q-1",title:"   ",priority:1,status:"OPEN",suggestedAction:"VERIFY"},{id:"todo-q-2",title:"   ",priority:2,status:"OPEN",suggestedAction:"EXCLUDE"},{id:"todo-q-3",title:"   ",priority:3,status:"CANCELED",suggestedAction:"HOLD"}]:t==="WARN"?r[e].map((n,s)=>s===0?{...n,priority:2}:n):r[e]}function IAe(e,t,r="stage1"){const n=e?.status??"",s=e?.manager??Ol,i=r==="stage2"?"Stage2":r==="stage3"?"Stage3":"Stage1",o=r==="stage2"?"S2_CONTACT_BASE":r==="stage3"?"S3_CONTACT_BASE":"S1_CONTACT_BASE",l=[{type:"STATUS_CHANGE",at:gt(-72),from:"",to:n,reason:`${i}  `,by:s},{type:"LEVEL_CHANGE",at:gt(-48),from:"L0",to:t,reason:"   SLA  ",by:s}];return n!==""&&l.unshift({type:"CALL_ATTEMPT",at:gt(-18),result:"NO_ANSWER",note:"  ",by:s}),e?.alertTags.includes(" ")&&l.unshift({type:"SMS_SENT",at:gt(-14),templateId:o,status:"PENDING",by:s}),r==="stage3"&&(l.unshift({type:"RISK_SERIES_UPDATED",at:gt(-12),by:s,summary:"2    "}),l.unshift({type:"RISK_REVIEWED",at:gt(-11),by:s,summary:"    "}),l.unshift({type:"DIFF_RECO_CREATED",at:gt(-9),by:s,summary:"  "}),l.unshift({type:"PLAN_UPDATED",at:gt(-10),by:s,summary:"     "}),l.unshift({type:"REEVAL_SCHEDULED",at:gt(-8),scheduledAt:gt(72),by:s,reason:"   "})),l}function o_(e,t="stage1",r=!1){const n=L2e(e),s=kN(e?.quality),i=i_e(e),o=o_e(i),l=oq(o.strategy,e,t),d=l_e(),u="NOT_CREATED",m=t==="stage3"?bAe(e):void 0,p=t==="stage3"?TAe(e):void 0,g=t==="stage3"&&m?yAe(e,m,r):[],x=t==="stage3"?OAe(e):[],y=t==="stage3"?RAe(x):[],N=g.length>0?"RECOMMENDED":"NONE",v=m?.opsStatus==="REEVAL_DUE"||m?.opsStatus==="REEVAL_PENDING"?"PENDING":"SCHEDULED",S=t==="stage3"?m?.planStatus==="ACTIVE"?72:m?.planStatus==="NEEDS_UPDATE"?48:91:void 0,E=[];return ek(o.triggers)&&E.push("  :   "),o.triggers.includes("GUARDIAN_PRIMARY")&&E.push("  "),o.triggers.includes("HAS_COMPLAINT_HISTORY")&&E.push("   "),o.triggers.includes("HAS_REFUSAL_HISTORY")&&E.push("   "),t==="stage3"&&E.push(r?" :  /     // ":e?.profile.stage3Type==="AD_MANAGEMENT"?" :      ":" :       "),{header:{caseId:e?.id??"CASE-UNKNOWN",stage:t==="stage2"?"STAGE2":t==="stage3"?"STAGE3":"STAGE1",assigneeName:e?.manager??Ol,statusLabel:t==="stage3"&&m?r?"":mAe(m.opsStatus):e?.status===""?"":e?.status===""?"":e?.status??"",waitDays:uAe(e?.status),sla:fAe(e?.status),dataQuality:s,contactStrategy:o.strategy,effectiveStrategy:o.strategy,riskGuardrails:E.length>0?E:void 0},policyGates:kAe(e),interventionLevel:n.level,riskEvidence:PAe(e,t,r),scoreSummary:DAe(e,t,t==="stage3"&&m&&p&&S!=null?{headerMeta:m,transitionRisk:p,recommendedActions:g,planProgressPct:S,reevalStatus:v,diffPathStatus:N}:void 0,r),todos:yO(n.level,s.level),timeline:IAe(e,n.level,t),preTriageInput:i,preTriageResult:o,contactPlan:l,contactExecution:d,contactFlowSteps:si(d,o,u,t),linkageStatus:u,contactExecutor:o.strategy==="AI_FIRST"?"AGENT_SEND_ONLY":"HUMAN",agentExecutionLogs:[],stage3:t==="stage3"&&m&&p&&S!=null?{headerMeta:m,transitionRisk:p,reevalStatus:v,riskReviewedAt:void 0,diffPathStatus:N,triggersReviewedAt:void 0,planProgressPct:S,planUpdatedAt:m.planStatus==="NEEDS_UPDATE"?void 0:gt(-10),recommendedActions:g,programs:y}:void 0}}function v7(e,t,r="stage1",n=!1){const s=e?.manager??Ol,i=r==="stage2"?"Stage2":r==="stage3"?"Stage3":"Stage1";return[{id:`audit-${t.header.caseId}-1`,at:mt(gt(-72)),actor:s,message:"  :   "},{id:`audit-${t.header.caseId}-2`,at:mt(gt(-48)),actor:s,message:r==="stage3"?n?`  :  ${t.stage3?.headerMeta.trackingCycleDays??21} /  ${u1(t.stage3?.headerMeta.planStatus??"ACTIVE")}`:`  : ${t.stage3?.headerMeta.trackingCycleDays??21}  /  ${u1(t.stage3?.headerMeta.planStatus??"ACTIVE")}`:`${r==="stage2"?" ":" "} : ${t.preTriageResult?.strategy==="HUMAN_FIRST"?" ":" "}`},{id:`audit-${t.header.caseId}-3`,at:mt(gt(-32)),actor:s,message:`  : ${t.interventionLevel}`},{id:`audit-${t.header.caseId}-4`,at:mt(gt(-18)),actor:s,message:`${i}   : `}]}function MAe(e,t="stage1"){const r=e.riskEvidence.topFactors.map(u=>u.title).slice(0,2),n=ek(e.preTriageResult?.triggers??[]),s=e.preTriageInput?.contactHistory.hasComplaint??!1,i=e.preTriageInput?.contactHistory.hasRefusal??!1,o=e.header.sla.level!=="OK",l=e.contactExecutor==="AGENT_SEND_ONLY";return t==="stage3"?[{id:"RAG-S3-01",title:"  ",useCase:"    Stage3 ",evidence:[` : ${r.join(", ")||" "}`,"      .","        ."],scriptBody:"      ,     ."},{id:"RAG-S3-02",title:" /",useCase:"      ",evidence:["        .",o?"     .":"    .","    /   ."],scriptBody:"          ."},{id:"RAG-S3-03",title:" /",useCase:"      ",evidence:[" /       .",l?"Agent      .":"     .","/     ."],scriptBody:"/     .     ."}]:t==="stage2"?[{id:"RAG-S2-01",title:"2  ",useCase:"2 1/2    ",evidence:[` : ${r.join(", ")||"  "}`,"          .","      ."],scriptBody:"  2     .    ,      ."},{id:"RAG-S2-02",title:s||i?"  ":"  ",useCase:s||i?"/      ":"  /   ",evidence:[s?"       .":"       .",i?"        .":"       .","   /   ."],scriptBody:"         ,   ."},{id:"RAG-S2-03",title:o?"  ":" ",useCase:o?"SLA /    ":"      ",evidence:[o?"SLA    /   .":"   //   .",l?"Agent       .":"/     .","        ."],scriptBody:o?"       ,    .":"        ."}]:[{id:"RAG-GUIDE-01",title:n?"  ":" ",useCase:n?"   /  ":" ,   ",evidence:[` : ${r.join(", ")||"  "}`,n?"       .":"       .","     /  ."],scriptBody:n?"      .       .":"        .      ."},{id:"RAG-GUIDE-02",title:s||i?"  ":" ",useCase:s||i?"/   ":"     ",evidence:[s?"         .":"        .",i?"         .":"   /   .","        ."],scriptBody:"     .        ."},{id:"RAG-GUIDE-03",title:l?"Agent  ":"SLA  ",useCase:l?"      ":"SLA /  ",evidence:[o?"SLA /     .":" SLA       .",l?"Agent     Step3/4    .":"/        .","     ."],scriptBody:l?"   .     .":"          ."}].slice(0,3)}function LAe(e){return e.type==="CALL_ATTEMPT"?"CALL":e.type==="MESSAGE_SENT"?e.summary.includes("STAGE1_RESPONSE_RECORDED")||e.summary.includes("STAGE2_RESPONSE_RECORDED")?"STATUS":"SMS":e.type==="SMS_SENT"||e.type==="AGENT_SMS_SENT"?"SMS":"STATUS"}function Ay(e){return e.type==="CALL_ATTEMPT"?e.result==="SUCCESS"?" ":e.result==="NO_ANSWER"?"":e.result==="REJECTED"?" ":" ":e.type==="SMS_SENT"?`  (${zAe(e.templateId)})`:e.type==="MESSAGE_SENT"?e.summary.includes("STAGE1_RESPONSE_RECORDED")||e.summary.includes("STAGE2_RESPONSE_RECORDED")?"  ":"   ":e.type==="LEVEL_CHANGE"?`   ${e.from}  ${e.to}`:e.type==="POLICY_GATE_UPDATE"?`   (${e.key})`:e.type==="OUTCOME_RECORDED"?`   (${Fl[e.outcomeCode].label})`:e.type==="CALENDAR_SYNC"?e.status==="SUCCESS"?"  ":"   ":e.type==="CAL_EVENT_CREATED"?"  ":e.type==="STRATEGY_CHANGE"?`   ${qd[e.from]}  ${qd[e.to]}`:e.type==="AGENT_JOB_QUEUED"?"Agent   ":e.type==="AGENT_JOB_STARTED"?"Agent   ":e.type==="AGENT_SMS_SENT"?"Agent  ":e.type==="AGENT_JOB_SUCCEEDED"?"Agent   ":e.type==="AGENT_JOB_FAILED"?"Agent   ":e.type==="AGENT_JOB_CANCELED"?"Agent   ":e.type==="CONTACT_STRATEGY_CHANGED"?"  ":e.type==="OPERATOR_OVERRIDE_TO_HUMAN"?"  ":e.type==="REEVAL_SCHEDULED"?"/  ":e.type==="REEVAL_RESCHEDULED"?"/  ":e.type==="REEVAL_COMPLETED"?"/ ":e.type==="REEVAL_NOSHOW"?"/ ":e.type==="PLAN_CREATED"?" ":e.type==="PLAN_UPDATED"?" ":e.type==="PROGRAM_STARTED"?" ":e.type==="PROGRAM_COMPLETED"?" ":e.type==="PROGRAM_STOPPED"?" ":e.type==="LINKAGE_CREATED"?" ":e.type==="LINKAGE_APPROVED"?" ":e.type==="LINKAGE_COMPLETED"?" ":e.type==="STAGE3_ACTION_DECISION"?"  ":e.type==="RISK_SERIES_UPDATED"?"   ":e.type==="RISK_REVIEWED"?"  ":e.type==="DIFF_RECO_CREATED"?"   ":e.type==="DIFF_REFER_CREATED"?"  ":e.type==="DIFF_SCHEDULED"?"  ":e.type==="DIFF_COMPLETED"?"  ":e.type==="DIFF_RESULT_APPLIED"?"  ":e.type==="PROGRAM_SELECTED"?" ":e.type==="PROGRAM_EXEC_UPDATED"?"  ":e.type==="PROGRAM_EXEC_COMPLETED"?"  ":e.type==="NEXT_TRACKING_SET"?"   ":e.type==="STAGE2_PLAN_CONFIRMED"?"Stage2   ":e.type==="STAGE2_RESULTS_RECORDED"?"Stage2    ":e.type==="STAGE2_STEP2_AUTOFILL_APPLIED"?"Stage2 STEP2   ":e.type==="STAGE2_MANUAL_EDIT_APPLIED"?"Stage2 STEP2   ":e.type==="STAGE2_CLASS_CONFIRMED"?"Stage2  ":e.type==="STAGE2_NEXT_STEP_SET"?"Stage2   ":e.type==="INFERENCE_REQUESTED"?`Stage${e.stage}   `:e.type==="INFERENCE_STARTED"?`Stage${e.stage}   `:e.type==="INFERENCE_PROGRESS"?`Stage${e.stage}   `:e.type==="INFERENCE_COMPLETED"?`Stage${e.stage}   `:e.type==="INFERENCE_FAILED"?`Stage${e.stage}   `:`  ${e.from}  ${e.to}`}function eq(e){if(e.type==="CALL_ATTEMPT")return e.note??"  ";if(e.type==="SMS_SENT")return` : ${e.status}`;if(e.type==="MESSAGE_SENT")return e.summary;if(e.type==="LEVEL_CHANGE")return e.reason;if(e.type==="POLICY_GATE_UPDATE")return`: ${e.status}`;if(e.type==="OUTCOME_RECORDED"){const t=[];return e.reasonTags&&e.reasonTags.length>0&&t.push(` ${e.reasonTags.map(r=>f1[r].label).join(", ")}`),e.rejectCode&&t.push(` ${e.rejectCode}`),e.rejectLevel&&t.push(` ${e.rejectLevel}`),e.recontactStrategy&&t.push(`  ${e.recontactStrategy}`),e.nextContactAt&&t.push(`  ${mt(e.nextContactAt)}`),e.note&&t.push(e.note),t.length>0?t.join("  "):"  "}if(e.type==="CALENDAR_SYNC"){const t=`${e.title}  ${mt(e.scheduledAt)}`;return e.status==="FAILED"?`${t}  ${e.error??" "}`:t}return e.type==="CAL_EVENT_CREATED"?`${mt(e.scheduledAt)}  ${e.summary}`:e.type==="AGENT_SMS_SENT"?`${e.summary}   ${NO[e.channelResult]}${e.detail?`  ${e.detail}`:""}`:e.type==="AGENT_JOB_QUEUED"||e.type==="AGENT_JOB_STARTED"||e.type==="AGENT_JOB_SUCCEEDED"||e.type==="AGENT_JOB_FAILED"||e.type==="AGENT_JOB_CANCELED"||e.type==="CONTACT_STRATEGY_CHANGED"||e.type==="OPERATOR_OVERRIDE_TO_HUMAN"?[e.summary,e.detail].filter(Boolean).join("  "):e.type==="REEVAL_SCHEDULED"?`${mt(e.scheduledAt)}  ${e.reason??"  "}`:e.type==="REEVAL_RESCHEDULED"?`${mt(e.from)}  ${mt(e.to)}${e.reason?`  ${e.reason}`:""}`:e.type==="REEVAL_COMPLETED"||e.type==="REEVAL_NOSHOW"?e.note??"   ":e.type==="PLAN_CREATED"||e.type==="PLAN_UPDATED"||e.type==="PROGRAM_STARTED"||e.type==="PROGRAM_COMPLETED"||e.type==="PROGRAM_STOPPED"?e.summary:e.type==="LINKAGE_CREATED"||e.type==="LINKAGE_APPROVED"||e.type==="LINKAGE_COMPLETED"?`${e.linkageType}  ${e.summary??"  "}`:e.type==="STAGE3_ACTION_DECISION"?`${e.actionId}  ${e.decision}${e.note?`  ${e.note}`:""}`:e.type==="RISK_SERIES_UPDATED"||e.type==="RISK_REVIEWED"||e.type==="DIFF_RECO_CREATED"||e.type==="DIFF_REFER_CREATED"||e.type==="DIFF_SCHEDULED"||e.type==="DIFF_COMPLETED"||e.type==="DIFF_RESULT_APPLIED"||e.type==="PROGRAM_SELECTED"||e.type==="PROGRAM_EXEC_UPDATED"||e.type==="PROGRAM_EXEC_COMPLETED"||e.type==="STAGE2_PLAN_CONFIRMED"||e.type==="STAGE2_RESULTS_RECORDED"||e.type==="STAGE2_STEP2_AUTOFILL_APPLIED"||e.type==="STAGE2_MANUAL_EDIT_APPLIED"||e.type==="STAGE2_CLASS_CONFIRMED"||e.type==="STAGE2_NEXT_STEP_SET"?e.summary:e.type==="INFERENCE_REQUESTED"||e.type==="INFERENCE_STARTED"||e.type==="INFERENCE_COMPLETED"||e.type==="INFERENCE_FAILED"?`${e.summary}${e.reason?`  ${e.reason}`:""}`:e.type==="INFERENCE_PROGRESS"?`${e.summary}  ${Math.round(e.progress)}%${e.etaSeconds!=null?`  ETA ${hO(e.etaSeconds)}`:""}`:e.type==="NEXT_TRACKING_SET"?`${mt(e.nextAt)}${e.summary?`  ${e.summary}`:""}`:e.reason}function $Ae(e){return e==="PASS"?"border-emerald-200 bg-emerald-50 text-emerald-700":e==="FAIL"?"border-red-200 bg-red-50 text-red-700":"border-gray-200 bg-gray-50 text-gray-600"}function N7(e){return e==="OK"?"border-emerald-200 bg-emerald-50 text-emerald-700":e==="RESTRICTED"?"border-red-200 bg-red-50 text-red-700":"border-gray-200 bg-gray-50 text-gray-600"}function S7(e){return e==="OK"?"":e==="RESTRICTED"?"":" "}function Ju(e){return e==="OK"?" ":e==="RESTRICTED"?"/ ":"  "}function E7(e){return e?/|||/.test(e):!1}function FAe(e){const t=["CONSENT_OK","CONTACTABLE_TIME_OK","PHONE_VERIFIED"],r=e.filter(n=>t.includes(n.key));return r.some(n=>n.status==="FAIL")?"BLOCKED":r.some(n=>n.status!=="PASS")?"NEEDS_CHECK":"PASS"}function UAe(e,t,r,n){return`${e}:${t}:${r}:${n}`}function BAe(e){return e==="AUTO_ON_ENTER"?"   ":e==="AUTO_ON_STRATEGY"?"    ":e==="AUTO_ON_RETRY_DUE"?"   ":e==="MANUAL_RETRY_NOW"?"  ":"  "}function GAe({caseRecord:e,gates:t,attemptNo:r}){const n=t.find(i=>i.key==="PHONE_VERIFIED"),s=e?.profile.phone;return n?.status!=="PASS"||!s?{success:!1,channelResult:"FAILED",errorCode:"PHONE_INVALID",errorMessage:"      ."}:(e?.alertTags??[]).includes(" ")&&r===1?{success:!1,channelResult:"FAILED",errorCode:"CHANNEL_TEMP_ERROR",errorMessage:"     ."}:{success:!0,channelResult:"SENT"}}const j7={queueSms({caseId:e,idempotencyKey:t}){return{ok:!0,jobId:`agent-job:${e}:${t}`,queuedAt:ut()}},cancelJob(e){return e?{ok:!0}:{ok:!1}}};function w7(e,t){const r=e.find(n=>t.includes(n.key)&&n.status!=="PASS");return r?.failReason??(r?`${r.label}  `:void 0)}function HAe(e){return e==="SUCCESS"?" ":e==="NO_ANSWER"?"":e==="REJECTED"?"":" "}function KAe(e){return e==="CONTACT"?"":e==="BOOKING"?"":""}function zAe(e){const t=e.split("(")[0],r=[...tk,...rk,...nk].find(n=>n.id===t);return r?`${KAe(r.messageType)}  ${r.label}`:e}const qd={HUMAN_FIRST:" ",AI_FIRST:" ",MANUAL_OVERRIDE:" "},A7={HUMAN_FIRST:"border-red-200 bg-red-50 text-red-700",AI_FIRST:"border-blue-200 bg-blue-50 text-blue-700",MANUAL_OVERRIDE:"border-amber-200 bg-amber-50 text-amber-700"},qAe="   ()  ,  /  .",WAe={AGE_OVER_THRESHOLD:"      .",HAS_MCI_HISTORY:"      .",HAS_DEMENTIA_HISTORY:"       .",HAS_COMPLAINT_HISTORY:"       .",HAS_REFUSAL_HISTORY:"       .",GUARDIAN_PRIMARY:"       .",NEEDS_GUARDIAN_SUPPORT:"        .",COMPREHENSION_DIFFICULTY:"       .",STANDARD_CONTACT_PATH:"      .",CALL_RESPONSE_POOR:"       .",SMS_RESPONSE_POOR:"       ."};function _7(e){return e.startsWith(" :")?`   : ${e.replace(" :","").trim()}`:WAe[e]??e}const Fl={CONTINUE_SELF:{label:" ",tone:"border-emerald-200 bg-emerald-50 text-emerald-700"},SCHEDULE_LATER:{label:"",tone:"border-blue-200 bg-blue-50 text-blue-700"},REQUEST_GUARDIAN:{label:" ",tone:"border-violet-200 bg-violet-50 text-violet-700"},REQUEST_HUMAN:{label:" ",tone:"border-orange-200 bg-orange-50 text-orange-700"},REFUSE:{label:"/",tone:"border-red-200 bg-red-50 text-red-700"},NO_RESPONSE:{label:" ",tone:"border-gray-200 bg-gray-50 text-gray-600"},CONFUSED:{label:" ",tone:"border-amber-200 bg-amber-50 text-amber-700"},EMOTIONAL:{label:" ",tone:"border-yellow-200 bg-yellow-50 text-yellow-700"}},VAe=["CONTINUE_SELF","SCHEDULE_LATER","REQUEST_GUARDIAN","REQUEST_HUMAN","NO_RESPONSE","REFUSE"],f1={CONFUSION:{label:" ",hint:"     ",tone:"border-amber-200 bg-amber-50 text-amber-700"},EMOTIONAL:{label:" ",hint:"/    ",tone:"border-yellow-200 bg-yellow-50 text-yellow-700"}},tq={CALL:"CALL_RETRY",SMS:"SMS_RETRY"},C7={CALL:"",SMS:""},YAe={CONTINUE_SELF:"PROCEED",SCHEDULE_LATER:"LATER",REQUEST_GUARDIAN:"PROTECTOR_LINK",REQUEST_HUMAN:"COUNSELOR_LINK",REFUSE:"REJECT",NO_RESPONSE:"NO_RESPONSE",CONFUSED:"HARD_TO_UNDERSTAND",EMOTIONAL:"EMOTIONAL"},bo={HUMAN:"  ",AGENT_SEND_ONLY:"Agent ( )"},vO={HUMAN:"border-blue-200 bg-blue-50 text-blue-700",AGENT_SEND_ONLY:"border-violet-200 bg-violet-50 text-violet-700"},ak={SENT_SUCCESS:" ",SENT_FAILED:" ",NO_RESPONSE:" ",WAITING:" "},rq={IDLE:"",QUEUED:"",RUNNING:"",SUCCEEDED:"",FAILED:"",CANCELED:""},NO={SENT:"",DELIVERED:" ",FAILED:"",UNKNOWN:" "},zb={RECOMMEND_DIFF:"  ",HOLD:"  ",UPDATE_PLAN:"  "},im={CENTER_VISIT_BOOKING:{label:"  ",description:"    / ",linkageStatus:"BOOKING_IN_PROGRESS",reservationType:" ",defaultPlace:" "},HOSPITAL_REFERRAL_BOOKING:{label:" /",description:"     ",linkageStatus:"REFERRAL_CREATED",reservationType:" /",defaultPlace:" "},COUNSELING_CENTER_BOOKING:{label:" ",description:"   ",linkageStatus:"BOOKING_DONE",reservationType:" ",defaultPlace:" "},HOLD_TRACKING:{label:"/",description:"   ",linkageStatus:"NOT_CREATED",reservationType:" ",defaultPlace:"/ "}},XAe=[{code:"R1_SELF_REJECT",label:" "},{code:"R2_GUARDIAN_REJECT",label:" "},{code:"R3_OTHER_INSTITUTION",label:"  "},{code:"R4_ALREADY_DIAGNOSED",label:" / "},{code:"R5_CONTACT_INVALID",label:" "},{code:"R6_EMOTIONAL_BACKLASH",label:"  "},{code:"R7_OTHER",label:""}],QAe=[{value:"TEMP",label:" "},{value:"FINAL",label:" "}],nq=[{step:"PRE_TRIAGE",label:"A.  ",description:"   "},{step:"STRATEGY",label:"B.  ",description:" /  "},{step:"COMPOSE",label:"C.  ",description:"/  "},{step:"SEND",label:"D.  ",description:"   "},{step:"RESPONSE",label:"E.  ",description:"/// "},{step:"OUTCOME",label:"F.  ",description:"// "}],aq=[{step:"PRE_TRIAGE",label:"A.  ",description:"2     "},{step:"STRATEGY",label:"B.  ",description:"     "},{step:"COMPOSE",label:"C.  ",description:"/MCI/AD     "},{step:"SEND",label:"D.  ",description:" // "},{step:"RESPONSE",label:"E.  ",description:"/    "},{step:"OUTCOME",label:"F. /",description:"    "}],sq=[{step:"PRE_TRIAGE",label:"A.   ",description:" /  "},{step:"STRATEGY",label:"A-2.  ",description:"/// "},{step:"COMPOSE",label:"B.  ",description:"/  "},{step:"SEND",label:"B-2. /",description:"/   "},{step:"RESPONSE",label:"C.  ",description:"    "},{step:"OUTCOME",label:"D.  ()",description:"  /  "}],ZAe=[{step:"PRE_TRIAGE",label:"A.   ",description:"//   "},{step:"STRATEGY",label:"A-2.  ",description:"  / "},{step:"COMPOSE",label:"B.   ",description:"//  "},{step:"SEND",label:"B-2.  ",description:"// "},{step:"RESPONSE",label:"C.  ",description:"/MCI/    "},{step:"OUTCOME",label:"D.   ",description:" /MCI Stage3/  "}],JAe=[{id:"PRECHECK",title:"  ",description:"/   ",relatedSteps:["PRE_TRIAGE","STRATEGY"],action:"OPEN_PRECHECK"},{id:"CONTACT_EXECUTION",title:" ",description:"   ",relatedSteps:["COMPOSE","SEND"],action:"OPEN_CONTACT_EXECUTION"},{id:"RESPONSE_HANDLING",title:" ",description:" //  ",relatedSteps:["RESPONSE"],action:"OPEN_RESPONSE_HANDLING"},{id:"FOLLOW_UP",title:" ",description:"   ",relatedSteps:["OUTCOME"],action:"OPEN_FOLLOW_UP"}],e_e=[{id:"PRECHECK",title:"  ",description:" /     ",relatedSteps:["PRE_TRIAGE","STRATEGY"],action:"OPEN_PRECHECK"},{id:"CONTACT_EXECUTION",title:"  ",description:"MMSE/CDR//  ",relatedSteps:["COMPOSE","SEND"],action:"OPEN_CONTACT_EXECUTION"},{id:"RESPONSE_HANDLING",title:" ",description:"/MCI/  ",relatedSteps:["RESPONSE"],action:"OPEN_RESPONSE_HANDLING"},{id:"FOLLOW_UP",title:"  ",description:"2 /Stage3/ ",relatedSteps:["OUTCOME"],action:"OPEN_FOLLOW_UP"}],t_e=[{id:"PRECHECK",title:"  ()",description:" /  ",relatedSteps:["PRE_TRIAGE","STRATEGY"],action:"OPEN_PRECHECK"},{id:"CONTACT_EXECUTION",title:" ",description:"// ",relatedSteps:["COMPOSE","SEND"],action:"OPEN_CONTACT_EXECUTION"},{id:"RESPONSE_HANDLING",title:" ",description:" /  ",relatedSteps:["RESPONSE"],action:"OPEN_RESPONSE_HANDLING"},{id:"FOLLOW_UP",title:" ()",description:"  /  ",relatedSteps:["OUTCOME"],action:"OPEN_FOLLOW_UP"}],r_e=[{id:"PRECHECK",title:"  ",description:"//    ",relatedSteps:["PRE_TRIAGE","STRATEGY"],action:"OPEN_PRECHECK"},{id:"CONTACT_EXECUTION",title:"  ",description:" /  /  ",relatedSteps:["COMPOSE","SEND"],action:"OPEN_CONTACT_EXECUTION"},{id:"RESPONSE_HANDLING",title:" ",description:"/MCI/  ",relatedSteps:["RESPONSE"],action:"OPEN_RESPONSE_HANDLING"},{id:"FOLLOW_UP",title:"  ",description:" /MCI Stage3/  ",relatedSteps:["OUTCOME"],action:"OPEN_FOLLOW_UP"}],n_e={OPEN_PRECHECK:"PRECHECK",OPEN_CONTACT_EXECUTION:"CONTACT_EXECUTION",OPEN_RESPONSE_HANDLING:"RESPONSE_HANDLING",OPEN_FOLLOW_UP:"FOLLOW_UP"};function Lp(e,t){const r=e.findIndex(i=>i.id===t);if(r<=0)return null;const n=e.slice(0,r).find(i=>i.status!=="COMPLETED");if(!n)return null;const s=e[r]?.title??"";return`${n.title}    ${s}    .`}const a_e={COMPLETED:{label:"",icon:li,cardTone:"border-emerald-200 bg-emerald-50/70 text-emerald-900 shadow-sm hover:shadow-emerald-200/70",chipTone:"border border-emerald-200 bg-emerald-100 text-emerald-700",reasonTone:"border-emerald-200 bg-white/70 text-emerald-800"},READY:{label:"",icon:oR,cardTone:"border-cyan-200 bg-cyan-50/80 text-cyan-900 shadow-sm hover:shadow-cyan-200/60",chipTone:"border border-cyan-200 bg-cyan-100 text-cyan-700",reasonTone:"border-cyan-200 bg-white/80 text-cyan-900"},PENDING:{label:"",icon:w1,cardTone:"border-sky-200 bg-sky-50/70 text-slate-900 shadow-sm hover:shadow-sky-200/60",chipTone:"border border-sky-200 bg-sky-100 text-sky-700",reasonTone:"border-sky-200 bg-white/70 text-slate-700"},BLOCKED:{label:"",icon:ea,cardTone:"border-rose-200 bg-rose-50/80 text-rose-900 shadow-inner hover:shadow-rose-200/50",chipTone:"border border-rose-200 bg-rose-100 text-rose-700",reasonTone:"border-rose-200 bg-white/70 text-rose-800"}},iq={NOT_STARTED:"",SENT:" ",WAITING_RESPONSE:" ",RETRY_NEEDED:" ",HANDOFF_TO_HUMAN:" ",PAUSED:"",STOPPED:"",DONE:""},Zd={NOT_CREATED:"",BOOKING_IN_PROGRESS:"",BOOKING_DONE:"",REFERRAL_CREATED:""},SO={CENTER_LINKAGE:{title:" ",description:"  / ",nextStatus:"BOOKING_IN_PROGRESS",note:"    ."},HOSPITAL_LINKAGE:{title:" ",description:"     ",nextStatus:"REFERRAL_CREATED",note:"    ."},COUNSELING_LINKAGE:{title:" ",description:"     ",nextStatus:"BOOKING_DONE",note:"      ."}};function s_e(e,t,r=!1,n){return h.useMemo(()=>{const s=t==="stage2",i=t==="stage3",o=i?r?r_e:t_e:s?e_e:JAe,l=i?r?ZAe:sq:s?aq:nq,d=e.policyGates.filter(_=>_.status==="FAIL").length,u=!!e.preTriageInput&&e.header.dataQuality.level!=="EXCLUDE",m=!!e.preTriageResult?.strategy,p=e.contactExecution.status!=="NOT_STARTED",g=!!(e.contactExecution.lastOutcomeCode||e.contactExecution.lastResponseAt),x=e.linkageStatus!=="NOT_CREATED"||e.contactExecution.status==="DONE"||e.contactExecution.status==="STOPPED",y=new Map(e.contactFlowSteps.map(_=>[_.step,_.status])),N=new Map(l.map(_=>[_.step,_.label])),v=_=>_.map(A=>`${N.get(A)??A}:${y.get(A)??"WAITING"}`).join(" / ");if(n&&n.steps.length===o.length){const A=o.map((I,k)=>{const w=n.steps[k],L=v(I.relatedSteps),H=w.status==="DONE"?"COMPLETED":w.status==="READY"?"READY":"PENDING",B=w.status==="DONE"?"     .":w.status==="READY"?w.requiresHumanApproval?"   .  /  .":"  .   .":"   /    .";return{...I,status:H,reason:w.reason,nextActionHint:B,metricLabel:`${w.label}  ${L}`,isCurrent:!1}}).reduce((I,k,w)=>{if(w===0||I[w-1].status==="COMPLETED")return I.push(k),I;const H=w;return I.push({...k,status:"BLOCKED",reason:`STEP ${H}   ${k.title}    .`,nextActionHint:`STEP ${H}   .`,metricLabel:`    ${v(k.relatedSteps)}`,isCurrent:!1}),I},[]),T=A.findIndex(I=>I.status!=="COMPLETED"),R=T===-1?A.length-1:T;return A.map((I,k)=>({...I,isCurrent:k===R}))}if(i){const _=e.stage3,A=u&&m,T=_?.recommendedActions.filter(U=>U.requiresApproval&&U.decision==="PENDING").length??0,R=!!_?.riskReviewedAt,I=_?.diffPathStatus??"NONE",k=I==="SCHEDULED"||I==="COMPLETED",w=I==="COMPLETED",L=_?.programs.some(U=>{const Z=U.execution?.status;return Z==="PLANNED"||Z==="IN_PROGRESS"||Z==="DONE"})??!1,H=!!_?.planUpdatedAt||e.linkageStatus!=="NOT_CREATED",B=!!_?.headerMeta.nextTrackingContactAt,G=o.map(U=>{const Z=v(U.relatedSteps);return U.id==="PRECHECK"?r?A?R?{...U,status:"COMPLETED",reason:"    .",nextActionHint:"STEP2    .",metricLabel:`     ${Z}`,isCurrent:!1}:{...U,status:"PENDING",reason:"STEP1      .",nextActionHint:"    STEP2(  )  .",metricLabel:`      ${Z}`,isCurrent:!1}:{...U,status:"PENDING",reason:"        .",nextActionHint:"STEP1        .",metricLabel:`     ${Z}`,isCurrent:!1}:A?R?{...U,status:"COMPLETED",reason:"       .",nextActionHint:"/     .",metricLabel:`    ${Z}`,isCurrent:!1}:{...U,status:"PENDING",reason:"2       .",nextActionHint:"   '   '  .",metricLabel:`    ${Z}`,isCurrent:!1}:{...U,status:"PENDING",reason:" (//)    .",nextActionHint:"        .",metricLabel:`   ${Z}`,isCurrent:!1}:U.id==="CONTACT_EXECUTION"?r?!A||!R?{...U,status:"BLOCKED",reason:"STEP1        .",nextActionHint:"STEP1(  )  .",metricLabel:`     ${Z}`,isCurrent:!1}:k?{...U,status:"COMPLETED",reason:"   .",nextActionHint:"STEP3 /MCI/  .",metricLabel:`     ${Z}`,isCurrent:!1}:{...U,status:"PENDING",reason:"  (/ )   .",nextActionHint:"STEP2 MMSE/CDR/  .",metricLabel:`     ${Z}`,isCurrent:!1}:!A||!R?{...U,status:"BLOCKED",reason:"STEP1(   )       .",nextActionHint:"STEP1      .",metricLabel:`   ${Z}`,isCurrent:!1}:T>0?{...U,status:"PENDING",reason:`   ${T}  .`,nextActionHint:"    / .",metricLabel:`   ${T}  ${Z}`,isCurrent:!1}:k?w?{...U,status:"COMPLETED",reason:"/   .",nextActionHint:"     .",metricLabel:` ${I}  ${Z}`,isCurrent:!1}:{...U,status:"PENDING",reason:"   /   .",nextActionHint:"STEP2  /   .",metricLabel:` ${I}      ${Z}`,isCurrent:!1}:{...U,status:"PENDING",reason:"/      .",nextActionHint:"   /  .",metricLabel:` ${I}  ${Z}`,isCurrent:!1}:U.id==="RESPONSE_HANDLING"?r?k?_?.reevalStatus==="SCHEDULED"||_?.reevalStatus==="COMPLETED"?{...U,status:"COMPLETED",reason:"  .",nextActionHint:"STEP4   .",metricLabel:`    ${Z}`,isCurrent:!1}:{...U,status:"PENDING",reason:"/MCI/     .",nextActionHint:"STEP3    .",metricLabel:`    ${Z}`,isCurrent:!1}:{...U,status:"BLOCKED",reason:"STEP2       .",nextActionHint:"    .",metricLabel:`    ${Z}`,isCurrent:!1}:!w||T>0?{...U,status:"BLOCKED",reason:"           .",nextActionHint:"STEP2     / .",metricLabel:`   ${Z}`,isCurrent:!1}:L?{...U,status:"COMPLETED",reason:"    .",nextActionHint:" ()    .",metricLabel:`     ${Z}`,isCurrent:!1}:{...U,status:"PENDING",reason:"   (////)   .",nextActionHint:"       .",metricLabel:`    ${Z}`,isCurrent:!1}:r?_?.planUpdatedAt?{...U,status:"COMPLETED",reason:"   .",nextActionHint:"/    .",metricLabel:`     ${Z}`,isCurrent:!1}:{...U,status:"PENDING",reason:"  ( /MCI Stage3/ )  .",nextActionHint:"STEP4   .",metricLabel:`     ${Z}`,isCurrent:!1}:L?H&&B?{...U,status:"COMPLETED",reason:"/        .",nextActionHint:"/    .",metricLabel:` +     ${Z}`,isCurrent:!1}:{...U,status:"PENDING",reason:" / /      .",nextActionHint:"      .",metricLabel:`    ${Z}`,isCurrent:!1}:{...U,status:"BLOCKED",reason:"    1   ()    .",nextActionHint:"STEP3     .",metricLabel:`    ${Z}`,isCurrent:!1}}).reduce((U,Z,re)=>{if(re===0||U[re-1].status==="COMPLETED")return U.push(Z),U;const F=re;return U.push({...Z,status:"BLOCKED",reason:`STEP ${F}   ${Z.title}    .`,nextActionHint:`STEP ${F}   .`,metricLabel:`    ${v(Z.relatedSteps)}`,isCurrent:!1}),U},[]),$=G.findIndex(U=>U.status!=="COMPLETED"),z=$===-1?G.length-1:$;return G.map((U,Z)=>({...U,isCurrent:Z===z}))}const S=o.map(_=>{const A=v(_.relatedSteps);if(_.id==="PRECHECK")return d>0||!u?{..._,status:"BLOCKED",reason:d>0?s?`  ${d}   .`:`  ${d}   .`:s?"      .":"       .",nextActionHint:s?"/      .":" /     .",metricLabel:d>0?`${s?" ":""} FAIL ${d}  ${A}`:`${s?"  ":"  "}  ${A}`,isCurrent:!1}:m?{..._,status:"COMPLETED",reason:s?"2     .":"    .",nextActionHint:s?"/      .":"    / .",metricLabel:`${s?" ":""} ${e.preTriageResult?.strategy??""}  ${A}`,isCurrent:!1}:{..._,status:"PENDING",reason:s?"     .":"      .",nextActionHint:s?" /     .":"       .",metricLabel:`${s?" ":" "}   ${A}`,isCurrent:!1};if(_.id==="CONTACT_EXECUTION"){const R=(e.header.effectiveStrategy??e.preTriageResult?.strategy)==="AI_FIRST"&&e.contactExecutor==="AGENT_SEND_ONLY"?s?"Agent      ":"Agent      ":_.description;return!u||!m?{..._,description:R,status:"BLOCKED",reason:s?"    /  .":"      .",nextActionHint:s?"      .":"       .",metricLabel:`${s?" ":""}   ${A}`,isCurrent:!1}:p?{..._,description:R,status:"COMPLETED",reason:e.contactExecutor==="AGENT_SEND_ONLY"?s?"Agent    /   .":"Agent   .":s?"/   .":"   .",nextActionHint:s?"/      .":"      .",metricLabel:`${iq[e.contactExecution.status]}  ${bo[e.contactExecutor]}  ${A}`,isCurrent:!1}:{..._,description:R,status:"PENDING",reason:e.contactExecutor==="AGENT_SEND_ONLY"?s?"Agent     .":"Agent      .":s?" /   .":" /   .",nextActionHint:e.contactExecutor==="AGENT_SEND_ONLY"?s?"/   Agent     .":"   Agent     .":s?"/      .":"/    1  .",metricLabel:`${s?" ":""}  ${bo[e.contactExecutor]}  ${A}`,isCurrent:!1}}return _.id==="RESPONSE_HANDLING"?p?g?{..._,status:"COMPLETED",reason:s?"/   .":"     .",nextActionHint:s?"/      .":"   // .",metricLabel:e.contactExecution.lastOutcomeCode?`${Fl[e.contactExecution.lastOutcomeCode].label}  ${A}`:`${s?"  ":"  "}  ${A}`,isCurrent:!1}:{..._,status:"PENDING",reason:s?"     .":"     .",nextActionHint:s?"       .":"       .",metricLabel:`${s?"   ":"  "}  ${A}`,isCurrent:!1}:{..._,status:"BLOCKED",reason:s?"/   /   .":"       .",nextActionHint:s?"/     .":"    / .",metricLabel:`${s?"  ":" "}  ${A}`,isCurrent:!1}:g?x?{..._,status:"COMPLETED",reason:s?"     .":"    .",nextActionHint:s?"       .":"      .",metricLabel:`${Zd[e.linkageStatus]}  ${A}`,isCurrent:!1}:{..._,status:"PENDING",reason:s?"      .":"      .",nextActionHint:s?"       .":"   // .",metricLabel:`${Zd[e.linkageStatus]}  ${A}`,isCurrent:!1}:{..._,status:"BLOCKED",reason:s?"/    /   .":"       .",nextActionHint:s?"/     .":"   Outcome  .",metricLabel:`${Zd[e.linkageStatus]}  ${A}`,isCurrent:!1}}),E=S.findIndex(_=>_.status!=="COMPLETED"),C=E===-1?S.length-1:E;return S.map((_,A)=>({..._,isCurrent:A===C}))},[e,t,n,r])}function i_e(e){const t=e?.profile.age??70,r=!!e?.profile.guardianPhone,n=e?.quality===""||!!e?.alertTags.includes(" "),s=e?.status===""||!!e?.alertTags.includes(" "),i=!r&&t>=75,o=t>=80||e?.risk==="",l=!!(e?.alertTags.includes("High MCI")||e?.alertTags.includes(" ")),d=e?.risk===""&&t>=80;return{age:t,dxHistory:{hasMCI:l,hasDementia:d},contactHistory:{hasComplaint:n,hasRefusal:s,needsGuardian:i,comprehensionDifficultyFlag:o},guardian:{exists:r,isPrimaryContact:r&&(i||o)},responseHistory:{smsResponseGood:e?.risk!=="",callResponseGood:e?.status!=="",lastOutcome:e?.status===""?"NO_RESPONSE":void 0}}}function o_e(e){return Wwe(e)}function oq(e,t,r="stage1"){const n=r==="stage2",s=r==="stage3",i=n?t?.profile.guardianPhone?"S2_CONTACT_RELIEF":"S2_CONTACT_BASE":s?"S3_CONTACT_BASE":t?.profile.guardianPhone?"S1_CONTACT_GUARDIAN":"S1_CONTACT_BASE",o=n?"S2_CONTACT_BASE":s?"S3_CONTACT_BASE":"S1_CONTACT_BASE";return e==="HUMAN_FIRST"?{channel:"HYBRID",templateId:i,maxRetryPolicy:{maxRetries:3,intervalHours:24}}:{channel:"SMS",templateId:o,maxRetryPolicy:{maxRetries:2,intervalHours:24}}}function l_e(){return{status:"NOT_STARTED",retryCount:0}}function si(e,t,r="NOT_CREATED",n="stage1"){const s=!!t,i=!!t?.strategy,o=e.status!=="NOT_STARTED",l=!!(e.lastOutcomeCode||e.lastResponseAt),d=e.status==="HANDOFF_TO_HUMAN"||e.status==="STOPPED"||e.status==="RETRY_NEEDED";return(n==="stage2"?aq:n==="stage3"?sq:nq).map(({step:m,label:p,description:g})=>{let x="WAITING";return m==="PRE_TRIAGE"?x=s?"DONE":"MISSING":m==="STRATEGY"?x=i?"DONE":"MISSING":m==="COMPOSE"?x=i?o||n==="stage3"?"DONE":"WAITING":"MISSING":m==="SEND"?x=o||n==="stage3"?l?"DONE":"WAITING":"MISSING":m==="RESPONSE"?x=l?d?"WARNING":"DONE":o||n==="stage3"?"WAITING":"MISSING":m==="OUTCOME"&&(l?r==="NOT_CREATED"?x="WAITING":x="DONE":x="MISSING"),{step:m,label:p,status:x,description:g}})}function sk(e){return e.map(t=>({id:t.id,type:t.messageType,label:t.label,body:r=>t.body({caseId:r.caseAlias??"CASE",centerName:r.centerName,centerPhone:r.centerPhone,guideLink:r.guideLink,reservationLink:r.bookingLink,unsubscribe:r.optOut??Zz})}))}const c_e=sk(tk),d_e=sk(rk),u_e=sk(nk);function lq({caseId:e,caseRecord:t,onHeaderSummaryChange:r,onPrimaryActionChange:n,mode:s="stage1",surfaceStage:i}){const o=t?.id??e,l=s==="stage2",d=s==="stage3",u=d&&i==="Stage 2",m=l||u?"2":d?"3":"1",p=ON(o),g=Rz(d?o:null),x=g?.source.profile?.stage3Type??t?.profile.stage3Type??(g?.source.profile?.originStage2Result==="AD"?"AD_MANAGEMENT":void 0),y=p?.computed.evidence.stage2,N=p?.computed.evidence.stage3,v=p?.computed.model2,S=p?.computed.model3,E=!!v?.available,C=!!S?.available,_=y?.missing??[],A=N?.missing??[],T=l?rk:d?nk:tk,R=l?d_e:d?u_e:c_e,I=T[0]?.id??"",k=E1(),[w,L]=h.useState(()=>o_(t,s,u)),[H,B]=h.useState(()=>v7(t,o_(t,s,u),s,u)),[M,G]=h.useState("ALL"),[$,z]=h.useState(null),[U,Z]=h.useState("citizen"),[re,X]=h.useState(!1),[F,te]=h.useState(0),[ne,se]=h.useState(""),[Ne,fe]=h.useState("SUCCESS"),[we,ve]=h.useState({citizen:!0,guardian:!1}),[Oe,Fe]=h.useState(I),[oe,le]=h.useState("NOW"),[ge,_e]=h.useState(""),[ee,q]=h.useState(!0),[ye,pe]=h.useState(null),[he,rt]=h.useState(null),[Me,dt]=h.useState(!1),[St,He]=h.useState(Date.now()),[Ye,Mt]=h.useState(gt(24)),[Xt,hr]=h.useState(!1),[Gt,sr]=h.useState(""),[xr,mr]=h.useState("HUMAN_FIRST"),[br,kr]=h.useState(null),[cn,wt]=h.useState(""),[Ge,Qt]=h.useState(!0),[Pr,_r]=h.useState(!1),[rr,je]=h.useState(null),[Ve,yt]=h.useState(""),[ir,Cr]=h.useState("ALL"),[nn,wr]=h.useState(!1),[ze,dn]=h.useState(null),[ur,Ue]=h.useState({owner:t?.manager??Ol,status:"PLANNED",method:""}),[Se,nt]=h.useState({diffNeeded:!0,diffDecisionSet:!1,diffDecisionReason:"",priority:"HIGH",caregiverNeeded:!1,sensitiveHistory:!1,resultLinkedChecked:!1,consentConfirmed:!1,strategyMemo:""}),[Re,Et]=h.useState({orgName:" ",orgPhone:"02-555-0199",preferredHospital:" ",preferredTimeWindow:"  14:00~16:00",caregiverCompanion:!1,mobilityIssue:!1,testBiomarker:!0,testBrainImaging:!0,testOther:!1,bookingAt:gt(72),bookingAltAt:gt(96),bookingConfirmed:!1,prepGuide:"/ /   ",note:"",resultSummary:"",resultLabel:"",riskReady:!1,resultPerformedAt:"",biomarkerResultText:"",imagingResultText:"",abeta:"",tau:""}),[nr,Lt]=h.useState({consultStarted:!1,infoCollected:!1,ragGenerated:!1,bookingConfirmed:!1,messageSent:!1,calendarSynced:!1}),[Vr,Cn]=h.useState("REVIEW"),[xt,ta]=h.useState(null),[ra,fi]=h.useState({memo:"",nextAction:"RECOMMEND_DIFF"}),[Mn,Ir]=h.useState({nextTrackingAt:gt(504),reminderDaysBefore:2,reminderTime:"09:00",retryCount:2}),[ua,Ht]=h.useState(null),[Dr,Tr]=h.useState(!1),[_o,mn]=h.useState(!1),[hn,na]=h.useState({}),ll=h.useRef({}),[an,pi]=h.useState({code:null,level:"TEMP",detail:"",createFollowupEvent:!1,followupAt:gt(168)}),[un,ic]=h.useState({strategy:null,channel:"CALL",assigneeId:t?.manager??Ol,nextContactAt:gt(24),applyL3:!1}),[Fr,Es]=h.useState([]),[Va,Bn]=h.useState(null),[fa,Ks]=h.useState(!1),[js,aa]=h.useState(null),[ba,zs]=h.useState([]),[ws,mi]=h.useState(!1),[Tn,Ma]=h.useState(null),[Bi,Gi]=h.useState(""),[Ut,Co]=h.useState({route:"CENTER_VISIT_BOOKING",scheduledAt:gt(72),place:im.CENTER_VISIT_BOOKING.defaultPlace,contactGuide:_l,note:""}),[tt,On]=h.useState(()=>b7(t,p)),[V,de]=h.useState(()=>bO(t)),[De,ft]=h.useState(""),[ot,pt]=h.useState(!1),[Kt,qt]=h.useState(""),[tr,Nr]=h.useState(" "),[gr,qs]=h.useState(gt(72)),[Sr,La]=h.useState("HOSPITAL_REFERRAL"),[As,Gf]=h.useState({specialist:!0,mmse:!0,cdrOrGds:!0,neuroCognitive:!0}),[ud,vu]=h.useState({gdsk:!1,adl:!1,bpsd:!1}),[_s,Hi]=h.useState(!1),[sa,hi]=h.useState(""),[Mr,gi]=h.useState({}),Nu=h.useRef({}),xi=h.useRef({}),[Rn,Ki]=h.useState({sourceOrg:" "}),[Ws,Ya]=h.useState(null),[J,xe]=h.useState(!1),[Le,Ze]=h.useState(null),lt=h.useRef(null),[Je,ht]=h.useState({status:"PENDING",minDurationSec:45,maxDurationSec:160}),[bt,fr]=h.useState({status:"PENDING",minDurationSec:60,maxDurationSec:180}),[Ln,is]=h.useState(!1),[gn]=h.useState(()=>t?.created??gt(-96)),[Vs]=h.useState(()=>gt(240)),[zi,bi]=h.useState(void 0),qi=["step1Consent","step1Plan","step1StrategyMemo","manualEditReason","mmse","cdr","neuro","specialist","classification","rationale","overrideReason","nextStep"],Dt=h.useCallback(P=>K=>{Nu.current[P]=K},[]),Gn=h.useCallback(P=>{gi(P);const K=qi.find(ce=>!!P[ce]);if(!K)return!1;const Q=Nu.current[K];return Q&&(Q.scrollIntoView({behavior:"smooth",block:"center"}),"focus"in Q&&typeof Q.focus=="function"&&Q.focus()),!0},[qi]),Gr=h.useCallback(P=>{gi(K=>{if(!K[P])return K;const Q={...K};return delete Q[P],Q})},[]),oc=h.useCallback(P=>{const K=Nu.current[P];if(!K){(P==="mmse"||P==="cdr"||P==="neuro"||P==="specialist"||P==="manualEditReason")&&je("CONTACT_EXECUTION");return}K.scrollIntoView({behavior:"smooth",block:"center"}),"focus"in K&&typeof K.focus=="function"&&K.focus()},[]),fd=h.useMemo(()=>qi.filter(P=>!!Mr[P]).map(P=>({key:P,message:Mr[P]})),[qi,Mr]),Xa=h.useCallback((P,K)=>ue(K,Mr[P]?"border-rose-400 bg-rose-50 text-rose-900 placeholder:text-rose-400 focus:border-rose-500":""),[Mr]),lc=h.useCallback(P=>K=>{xi.current[P]=K},[]),yi={PRECHECK:["step1DiffDecision","step1Consent","step1DiffReason","step1StrategyMemo"],CONTACT_EXECUTION:["step2CallRecord","step2Hospital","step2TestSelection","step2BookingAt","step2PerformedAt","step2BiomarkerResult","step2ImagingResult","step2ResultSummary"],RESPONSE_HANDLING:[],FOLLOW_UP:[]},os=h.useCallback(P=>K=>{ll.current[P]=K},[]),Kn=h.useCallback((P,K)=>{na(Q=>{const ce=Q[P];if(!ce?.[K])return Q;const ae={...ce};return delete ae[K],{...Q,[P]:ae}})},[]),vi=h.useCallback((P,K,Q)=>ue(Q,hn[P]?.[K]?"border-rose-400 bg-rose-50 text-rose-900 placeholder:text-rose-400 focus:border-rose-500":""),[hn]),cc=h.useCallback((P,K)=>{na(ae=>({...ae,[P]:K}));const Q=yi[P].find(ae=>!!K[ae]);if(!Q)return!1;const ce=ll.current[Q];return ce&&(ce.scrollIntoView({behavior:"smooth",block:"center"}),"focus"in ce&&typeof ce.focus=="function"&&ce.focus()),!0},[yi]),Hf=h.useCallback(P=>{const K=ll.current[P];K&&(K.scrollIntoView({behavior:"smooth",block:"center"}),"focus"in K&&typeof K.focus=="function"&&K.focus())},[]),[jx,Cs]=h.useState(!1),[Kf,Oh]=h.useState(""),[Hr,dc]=h.useState({status:"IDLE",attemptNo:0}),uc=h.useRef(0),zf=h.useRef(new Set),Rh=h.useRef(new Set),kh=h.useRef(!1),{isSaving:cl,submitError:Ph,calendarFailures:Su,retryingKeys:qf,submit:Eu,retryCalendarFailure:wx,clearSubmitError:Wi}=Jje();h.useEffect(()=>{const P=o_(t,s,u);L(P),B(v7(t,P,s,u)),G("ALL"),z(null),Z("citizen"),X(!1),te(0),se(""),fe("SUCCESS"),ve({citizen:!0,guardian:!1}),Fe(I),le("NOW"),_e(""),q(!0),pe(null),rt(null),dt(!1),Mt(gt(24)),Qt(!0),_r(!1),je(null),yt(""),Cr("ALL"),wr(!1),dn(null),Ue({owner:t?.manager??Ol,status:"PLANNED",method:""}),nt({diffNeeded:!0,diffDecisionSet:!1,diffDecisionReason:"",priority:t?.risk===""?"HIGH":t?.risk===""?"MID":"LOW",caregiverNeeded:!!t?.profile.guardianPhone,sensitiveHistory:!!t?.alertTags.includes(" "),resultLinkedChecked:!1,consentConfirmed:!1,strategyMemo:""}),Et({orgName:" ",orgPhone:_l,preferredHospital:" ",preferredTimeWindow:"  14:00~16:00",caregiverCompanion:!1,mobilityIssue:!1,testBiomarker:!0,testBrainImaging:!0,testOther:!1,bookingAt:gt(72),bookingAltAt:gt(96),bookingConfirmed:!1,prepGuide:"/ /   ",note:"",resultSummary:"",resultLabel:"",riskReady:!1,resultPerformedAt:"",biomarkerResultText:"",imagingResultText:"",abeta:"",tau:""}),Lt({consultStarted:!1,infoCollected:!1,ragGenerated:!1,bookingConfirmed:!1,messageSent:!1,calendarSynced:!1}),Cn("REVIEW"),ta(null),fi({memo:"",nextAction:"RECOMMEND_DIFF"}),Ir({nextTrackingAt:gt((P.stage3?.headerMeta.trackingCycleDays??21)*24),reminderDaysBefore:2,reminderTime:"09:00",retryCount:2}),Ht(null),Tr(!1),mn(!1),na({}),kr(null),wt(""),pi({code:null,level:"TEMP",detail:"",createFollowupEvent:!1,followupAt:gt(168)}),ic({strategy:null,channel:"CALL",assigneeId:t?.manager??Ol,nextContactAt:gt(24),applyL3:!1}),Es([]),Bn(null),Ks(!1),aa(null),zs([]),mi(!1),Ma(null),Gi(""),Co({route:"CENTER_VISIT_BOOKING",scheduledAt:gt(72),place:im.CENTER_VISIT_BOOKING.defaultPlace,contactGuide:_l,note:""});const K=b7(t,p);On(K),de(K.classification?.label??bO(t)),ft(""),pt(!1),qt(""),Nr(" "),qs(gt(72)),La("HOSPITAL_REFERRAL"),Gf({specialist:!0,mmse:!0,cdrOrGds:!0,neuroCognitive:!0}),vu({gdsk:!1,adl:!1,bpsd:!1}),Hi(!1),hi(""),gi({}),Ki({sourceOrg:" "}),Ya(null),xe(!1),Ze(null),lt.current=null,ht({status:"PENDING",minDurationSec:45,maxDurationSec:160}),fr({status:"PENDING",minDurationSec:60,maxDurationSec:180}),is(!1),bi(void 0),dc({status:"IDLE",attemptNo:0}),uc.current=0,zf.current=new Set,Rh.current=new Set,kh.current=!1,Wi()},[t?.id,Wi,I,u,s]);const Nn=!!((l||u)&&p?.stage===2&&p.operationStep==="WAITING"&&!p.computed.model2.available);h.useEffect(()=>{Nn&&(On({status:"NOT_STARTED",tests:{specialist:!1,mmse:void 0,cdr:void 0,neuroCognitiveType:void 0},classification:void 0,nextStep:void 0}),pt(!1),ft(""),L(P=>({...P,timeline:P.timeline.filter(K=>K.type==="STATUS_CHANGE"||K.type==="LEVEL_CHANGE"),stage3:P.stage3?{...P.stage3,riskReviewedAt:void 0,triggersReviewedAt:void 0,planUpdatedAt:void 0,headerMeta:{...P.stage3.headerMeta,opsStatus:"REEVAL_PENDING"}}:P.stage3})))},[Nn]),h.useEffect(()=>{ht(P=>P.status==="RUNNING"||!E?P:{...P,status:"DONE",updatedAt:v?.updatedAt??P.updatedAt??ut(),completedAt:v?.updatedAt??P.completedAt??ut(),progress:100,etaSeconds:0,recommendedLabel:i_(v?.predictedLabel)})},[v?.predictedLabel,v?.updatedAt,E]),h.useEffect(()=>{fr(P=>P.status==="RUNNING"||!C?P:{...P,status:"DONE",updatedAt:S?.updatedAt??P.updatedAt??ut(),completedAt:S?.updatedAt??P.completedAt??ut(),progress:100,etaSeconds:0})},[S?.updatedAt,C]),h.useEffect(()=>{const P=window.setInterval(()=>He(Date.now()),1e3);return()=>window.clearInterval(P)},[]),h.useEffect(()=>{if(!re)return;const P=window.setInterval(()=>{te(K=>K+1)},1e3);return()=>window.clearInterval(P)},[re]),h.useEffect(()=>{if(!($==="CONTACT_EXECUTION"||d&&rr==="CONTACT_EXECUTION"))return;mi(!0);const K=window.setTimeout(()=>{const Q=MAe(w,s);zs(Q);const ce=Q[0];Ma(ce?.id??null),Gi(ce?.scriptBody??""),mi(!1)},180);return()=>window.clearTimeout(K)},[$,w,d,s,rr]);const Wf=h.useMemo(()=>M2e(),[]),Ax=h.useMemo(()=>w.todos.find(P=>P.status==="OPEN"),[w.todos]),Vf=h.useMemo(()=>M==="ALL"?w.timeline:w.timeline.filter(P=>LAe(P)===M),[w.timeline,M]),dl=h.useMemo(()=>T.find(P=>P.id===Oe)??T[0],[T,Oe]),YN=h.useMemo(()=>dl.body({caseId:w.header.caseId,centerName:a_,centerPhone:_l,guideLink:oAe,reservationLink:cg(w.reservationInfo),unsubscribe:Zz}),[w.header.caseId,w.reservationInfo,dl]),Ni=h.useMemo(()=>ba.find(P=>P.id===Tn)??null,[ba,Tn]),_x=h.useMemo(()=>dAe(s,Ni??void 0),[s,Ni]),Dh=h.useMemo(()=>w.contactExecutor==="AGENT_SEND_ONLY"?R.filter(P=>P.type!=="BOOKING"):w.reservationInfo?R:R.filter(P=>P.type!=="BOOKING"),[w.contactExecutor,w.reservationInfo,R]),Ih=!!t?.profile.guardianPhone,ju=w7(w.policyGates,["CONSENT_OK","CONTACTABLE_TIME_OK","PHONE_VERIFIED"]),wu=w7(w.policyGates,["CONSENT_OK","CONTACTABLE_TIME_OK","PHONE_VERIFIED"]),XN=ju??(U==="guardian"&&!Ih?"  ":void 0);wu??((we.guardian&&!Ih||!we.citizen&&!we.guardian)&&!we.citizen&&we.guardian);const Au=[w.preTriageInput?.contactHistory.hasComplaint?" ":null,w.preTriageInput?.contactHistory.hasRefusal?" ":null].filter(Boolean);new Date(St).getHours();const qe=h.useCallback(P=>{const K={id:`audit-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,at:mt(ut()),actor:w.header.assigneeName||Ol,message:P};B(Q=>[K,...Q])},[w.header.assigneeName]),Cx=P=>P.type==="CALL_ATTEMPT"?"CONTACT_RESULT":P.type==="SMS_SENT"||P.type==="MESSAGE_SENT"||P.type==="AGENT_SMS_SENT"?"CONTACT_SENT":P.type==="LINKAGE_CREATED"?"BOOKING_CREATED":P.type==="LINKAGE_APPROVED"||P.type==="LINKAGE_COMPLETED"?"BOOKING_CONFIRMED":P.type==="DIFF_SCHEDULED"?"STAGE3_DIFF_SCHEDULED":P.type==="DIFF_RESULT_APPLIED"?"STAGE3_RESULTS_RECORDED":P.type==="RISK_SERIES_UPDATED"||P.type==="RISK_REVIEWED"?"STAGE3_RISK_UPDATED":P.type==="STAGE2_PLAN_CONFIRMED"?"STAGE2_PLAN_CONFIRMED":P.type==="STAGE2_RESULTS_RECORDED"||P.type==="STAGE2_STEP2_AUTOFILL_APPLIED"||P.type==="STAGE2_MANUAL_EDIT_APPLIED"?"STAGE2_RESULTS_RECORDED":P.type==="STAGE2_CLASS_CONFIRMED"?"STAGE2_CLASS_CONFIRMED":P.type==="STAGE2_NEXT_STEP_SET"?"STAGE2_NEXT_STEP_SET":P.type==="INFERENCE_REQUESTED"?"INFERENCE_REQUESTED":P.type==="INFERENCE_STARTED"?"INFERENCE_STARTED":P.type==="INFERENCE_PROGRESS"?"INFERENCE_PROGRESS":P.type==="INFERENCE_COMPLETED"?"INFERENCE_COMPLETED":P.type==="INFERENCE_FAILED"?"INFERENCE_FAILED":P.type==="STATUS_CHANGE"&&(P.from.includes("Stage")||P.to.includes("Stage"))?"STAGE_CHANGE":"DATA_SYNCED",Xe=P=>{L(K=>({...K,timeline:[P,...K.timeline]})),t?.id&&as(t.id,Cx(P),{timelineType:P.type,at:P.at},w.header.assigneeName)},pd=h.useCallback(P=>Ws?P==="cdr"?Ws.cdr!=null||Ws.gds!=null:Ws[P]!=null:!1,[Ws]);h.useEffect(()=>{if(!u||rr!=="CONTACT_EXECUTION"||!t?.id)return;let P=!0;xe(!0),Ze(null);const K=rAe(t,p?.classification,p?.riskScore),Q=ce=>{const ae=nAe(ce,K),Ke=ae.cdr??ae.gds;Ya(ae),Ki(Te=>({...Te,lastSyncedAt:ae.syncedAt,receivedAt:ae.receivedMeta.receivedAt??Te.receivedAt,sourceOrg:ae.receivedMeta.providerName??Te.sourceOrg})),On(Te=>{const st=Sr==="HOSPITAL_REFERRAL"?"HOSPITAL":"CENTER",zt={...Te.tests,mmse:ae.mmse??Te.tests.mmse,cdr:Ke??Te.tests.cdr,neuroCognitiveType:ae.cogTestType??Te.tests.neuroCognitiveType,specialist:ae.specialistOpinionStatus!=null?ae.specialistOpinionStatus==="DONE":Te.tests.specialist};return{...Te,tests:zt,status:wy(zt,!!Te.classification?.label,st)}}),lt.current={mmse:ae.mmse??null,cdr:Ke??null,neuro:ae.cogTestType??null,specialist:ae.specialistOpinionStatus!=null?ae.specialistOpinionStatus==="DONE":null},Xe({type:"STAGE2_STEP2_AUTOFILL_APPLIED",at:ae.syncedAt,by:w.header.assigneeName,summary:`source=${ae.source}  fields=${(ae.filledFields??[]).join(", ")||"-"}`}),qe(`STEP2_AUTOFILL_APPLIED: ${ae.source}   ${ae.missingRequiredCount}   ${mt(ae.syncedAt)}`)};return QEe(t.id).then(ce=>{P&&Q(ce.item)}).catch(ce=>{if(!P)return;const ae=ce instanceof Error?ce.message:"  ",Ke=Qz(t.id,K);Ze(`${ae}    `),Q(Ke),ke("STEP2       .")}).finally(()=>{P&&xe(!1)}),()=>{P=!1}},[qe,t?.id,w.header.assigneeName,u,p?.classification,p?.riskScore,Sr,rr]);const Mh=h.useCallback(()=>{const P=lt.current;if(!P)return{};const K={},Q=typeof tt.tests.mmse=="number"?tt.tests.mmse:null,ce=typeof tt.tests.cdr=="number"?tt.tests.cdr:null,ae=tt.tests.neuroCognitiveType??null,Ke=tt.tests.specialist??!1;return P.mmse!==Q&&(K.mmse=Q),P.cdr!==ce&&(K.cdr=ce),P.neuro!==ae&&(K.cogTestType=ae),P.specialist!=null&&P.specialist!==Ke&&(K.specialistOpinionStatus=Ke?"DONE":"MISSING"),K},[tt.tests.cdr,tt.tests.mmse,tt.tests.neuroCognitiveType,tt.tests.specialist]),_u=()=>{const P=Mh(),K=_p(tt.tests,Sr,As),Q=Object.keys(P).length>0;if((_s||Q)&&sa.trim().length<5&&(K.manualEditReason="   5  ."),Gn(K))return ke.error(" /    ."),!1;gi({});const ce=!!tt.classification?.label,ae=wy(tt.tests,ce,kn),Ke=computeStage2MissingFields(tt.tests,Sr,As);if(On(Te=>({...Te,status:ae})),Ki(Te=>({...Te,receivedAt:Ke.length===0?ut():Te.receivedAt,lastSyncedAt:ut(),sourceOrg:tr||Te.sourceOrg})),t?.id&&REe(t.id,{specialist:!!tt.tests.specialist,mmse:typeof tt.tests.mmse=="number"?tt.tests.mmse:null,cdrOrGds:typeof tt.tests.cdr=="number"?tt.tests.cdr:null,neuroType:tt.tests.neuroCognitiveType??null},{route:Sr==="HOSPITAL_REFERRAL"?"HOSPITAL":"CENTER",actorId:w.header.assigneeName}),Ke.length===0){const Te=ut(),st=n_(tt.tests);E?(ht(zt=>({...zt,status:"DONE",startedAt:zt.startedAt??Te,updatedAt:Te,completedAt:Te,progress:100,etaSeconds:0,recommendedLabel:i_(v?.predictedLabel)??st})),qe("Stage2    .")):(ht(zt=>({...zt,status:"RUNNING",startedAt:Te,updatedAt:Te,completedAt:void 0,progress:3,etaSeconds:null,recommendedLabel:st,failureReason:void 0})),Xe({type:"INFERENCE_REQUESTED",stage:2,at:Te,by:w.header.assigneeName,summary:"Stage2   "}),Xe({type:"INFERENCE_STARTED",stage:2,at:Te,by:w.header.assigneeName,summary:"Stage2   "}),qe("Stage2   "))}else ht(Te=>({...Te,status:"PENDING",updatedAt:ut(),startedAt:void 0,completedAt:void 0,progress:0,etaSeconds:null}));if(Xe({type:"STATUS_CHANGE",at:ut(),from:"",to:"",reason:`Stage2    (${q0(tt.tests,kn)}/${Qi})`,by:w.header.assigneeName}),Q){const Te=sa.trim();Xe({type:"STAGE2_MANUAL_EDIT_APPLIED",at:ut(),by:w.header.assigneeName,summary:`fields=${Object.keys(P).join(", ")||"-"}  reason=${Te||"-"}`}),t?.id&&ZEe(t.id,{changedFields:P,reason:Te,editor:w.header.assigneeName}).catch(()=>{ke.error("    .")})}return lt.current={mmse:typeof tt.tests.mmse=="number"?tt.tests.mmse:null,cdr:typeof tt.tests.cdr=="number"?tt.tests.cdr:null,neuro:tt.tests.neuroCognitiveType??null,specialist:tt.tests.specialist??null},_s&&Hi(!1),hi(""),(_s||Q)&&sa.trim()&&qe(`Stage2  : ${sa.trim()}`),qe(`Stage2    : ${q0(tt.tests,kn)}/${Qi}`),t?.id&&k.invalidateQueries({queryKey:["caseDetail",t.id]}),k.invalidateQueries({queryKey:["stage2Cases"]}),k.invalidateQueries({queryKey:["dashboardStats"]}),t?.id&&k.invalidateQueries({queryKey:["local-center","case",t.id]}),k.invalidateQueries({queryKey:["local-center","cases"]}),k.invalidateQueries({queryKey:["local-center","dashboard-stats"]}),ke.success("   ."),!0},Cu=()=>{const P=_p(tt.tests,Sr,As,{rationale:Kt,recommendedLabel:Qs,selectedLabel:V,overrideReason:De});if(Gn(P)){ke.error("      .");return}if(!Ti){ke.error("   .");return}const K=V,Q=K==="MCI"?xO(t):void 0,ce=jy(K,Q),ae=wAe(K),Ke=ut(),Te=wy(tt.tests,!0,kn);On(st=>({...st,status:Te,classification:{label:K,probs:ce,mciStage:Q},nextStep:ae})),bi(Ke),pt(!1),gi({}),t?.id&&PEe(t.id,K,{mciBand:Q===""?"":Q,rationale:`${Kt.trim()}${Lu&&De.trim()?` (override: ${De.trim()})`:""}`,actorId:w.header.assigneeName}),Xe({type:"STATUS_CHANGE",at:Ke,from:"",to:`(${K}${Q?`-${Q}`:""})`,reason:Kt.trim()||"   ",by:w.header.assigneeName}),qe(`Stage2  : ${K}${Q?`(${Q})`:""}`),ke.success(" .")},md=(P,K)=>{On(Q=>({...Q,nextStep:P})),t?.id&&P&&DEe(t.id,P,{actorId:w.header.assigneeName,summary:K}),Xe({type:"PLAN_UPDATED",at:ut(),by:w.header.assigneeName,summary:K}),qe(`Stage2   : ${K}`),ke.success("  .")},QN=()=>{L(P=>({...P,linkageStatus:"BOOKING_DONE",reservationInfo:{route:"HOSPITAL_REFERRAL_BOOKING",reservationType:"2  ",scheduledAt:gr,place:tr,contactGuide:_l,note:"Stage2   "}})),t?.id&&QF(t.id,0,w.header.assigneeName),Xe({type:"LINKAGE_CREATED",at:ut(),by:w.header.assigneeName,linkageType:"HOSPITAL",summary:`   (${tr})`}),qe(`   : ${tr} / ${mt(gr)}`),ke.success("  .")},Tx=P=>{const K={...P,id:`agent-log-${Date.now()}-${Math.random().toString(36).slice(2,7)}`};L(Q=>({...Q,agentExecutionLogs:[K,...Q.agentExecutionLogs]}))},Yf=(P,K,Q)=>{L(ce=>({...ce,policyGates:ce.policyGates.map(ae=>ae.key===P?{...ae,status:K,failReason:void 0}:ae)})),Xe({type:"POLICY_GATE_UPDATE",at:ut(),key:P,status:K,by:w.header.assigneeName}),qe(`   (${Q})`)},Ox=(P,K)=>{L(Q=>{const ce=new Set(Q.todos.filter(Ke=>Ke.status==="DONE").map(Ke=>Ke.title)),ae=yO(P,K).map(Ke=>ce.has(Ke.title)?{...Ke,status:"DONE"}:Ke);return{...Q,todos:ae}})},Si=(P,K)=>{L(ce=>({...ce,todos:ce.todos.map(ae=>ae.id===P?{...ae,status:K}:ae)}));const Q=w.todos.find(ce=>ce.id===P);Q&&(Xe({type:"STATUS_CHANGE",at:ut(),from:Q.status,to:K,reason:`To-Do : ${Q.title}`,by:w.header.assigneeName}),qe(`To-Do : ${Q.title}`),ke.success(" ( )"))},Ei=P=>{const K=w.todos.find(Q=>Q.status==="OPEN"&&Q.suggestedAction===P);K&&Si(K.id,"DONE")},Rx=h.useCallback(async P=>{if(s!=="stage1"||l||d||!t)return!1;const K=(t.profile.name??"").replace(/\s+/g,""),Q=tAe.replace(/\s+/g,""),ce=(P.preview??"").replace(/\s+/g,"");if(!(eAe.has(t.id)||K===Q||ce.includes(Q)))return!1;const Ke=ut(),Te=gt(24),st=`${t.profile.name}    `,zt=`${t.id}:stage1-sms-complete:${P.id}`;let Pe="BOOKING_DONE";try{await pO({idempotencyKey:zt,event:{caseId:t.id,type:"FOLLOWUP",title:st,startAt:Te,durationMin:20,priority:"NORMAL",payload:{scenario:"STAGE1_SMS_CONTACT_COMPLETE",trigger:"SMS_SENT"}}}),Xe({type:"CALENDAR_SYNC",at:ut(),status:"SUCCESS",eventType:"FOLLOWUP",title:st,scheduledAt:Te,idempotencyKey:zt,by:w.header.assigneeName}),Xe({type:"CAL_EVENT_CREATED",at:ut(),scheduledAt:Te,summary:`${t.profile.name}      `,by:w.header.assigneeName}),qe(`  ( ): ${st}  ${mt(Te)}`)}catch(At){Pe="BOOKING_IN_PROGRESS";const Ur=At instanceof Error?At.message:"  ";Xe({type:"CALENDAR_SYNC",at:ut(),status:"FAILED",eventType:"FOLLOWUP",title:st,scheduledAt:Te,idempotencyKey:zt,error:Ur,by:w.header.assigneeName}),qe(`  ( ): ${Ur}`)}const Be="CONTINUE_SELF";return Ei("SMS"),Mt(Te),L(At=>{const Ur={...At.contactExecution,status:"DONE",lastSentAt:Ke,lastResponseAt:Ke,lastOutcomeCode:Be,retryCount:At.contactExecution.retryCount+1};return{...At,linkageStatus:Pe,contactExecution:Ur,contactFlowSteps:si(Ur,At.preTriageResult,Pe,s)}}),Xe({type:"OUTCOME_RECORDED",at:Ke,outcomeCode:Be,note:"Stage1    ( )",by:w.header.assigneeName}),Xe({type:"MESSAGE_SENT",at:Ke,summary:"STAGE1_SMS_AUTO_COMPLETE    ",by:w.header.assigneeName}),qe(`${t.profile.name}    :      `),Pe==="BOOKING_DONE"?ke.success("         ."):ke.error("    .   ."),!0},[qe,Xe,t,Ei,w.header.assigneeName,l,d,s]),kx=P=>{const K=P.fixAction?.action;if(K){if(K==="CONFIRM_CONTACT_TIME"){Yf("CONTACTABLE_TIME_OK","PASS","   "),ke.success(" ( )"),qe("   ");return}if(K==="REQUEST_CONSENT"){Yf("CONSENT_OK","PASS","  "),ke.success(" ( )");return}if(K==="VERIFY_PHONE"){Yf("PHONE_VERIFIED","PASS"," "),ke.success(" ( )");return}K==="ADD_GUARDIAN"&&(Yf("GUARDIAN_OPTIONAL","PASS","  "),ke.success(" ( )"))}},Xf=P=>{P!==w.interventionLevel&&pe({mode:"LEVEL",title:`   (${w.interventionLevel}  ${P})`,confirmLabel:" ",nextLevel:P,reason:""})},fc=P=>{pe({mode:"STATUS",title:`${P}   `,confirmLabel:`${P} `,nextStatus:P,reason:""})},Qf=P=>{const K=SO[P],Q=w.linkageStatus,ce=K.nextStatus;L(ae=>{const Ke={...ae.contactExecution,status:ae.contactExecution.status==="STOPPED"?"STOPPED":ae.contactExecution.status==="DONE"?"DONE":"HANDOFF_TO_HUMAN"};return{...ae,linkageStatus:ce,contactExecution:Ke,contactFlowSteps:si(Ke,ae.preTriageResult,ce,s)}}),Xe({type:"STATUS_CHANGE",at:ut(),from:Zd[Q],to:Zd[ce],reason:`${K.title} `,by:w.header.assigneeName}),qe(` : ${K.title}`),ke.success(`${K.title} .`)},Zf=(P,K)=>{if(!d)return;const Q=w.stage3?.recommendedActions.find(ae=>ae.id===P);if(!Q)return;const ce=ut();L(ae=>{if(!ae.stage3)return ae;const Ke=ae.stage3.recommendedActions.map(Ur=>Ur.id===P?{...Ur,decision:K}:Ur),Te=Ke.filter(Ur=>Ur.requiresApproval&&Ur.decision==="PENDING").length;let st=ae.stage3.reevalStatus,zt=ae.stage3.headerMeta.planStatus,Pe=ae.stage3.planUpdatedAt,Be=ae.linkageStatus;K==="APPROVED"&&(Q.type==="SCHEDULE_REEVAL"&&(st="SCHEDULED"),Q.type==="UPDATE_PLAN"&&(zt="ACTIVE",Pe=ce),Q.type==="ESCALATE_LEVEL"&&(Be="BOOKING_IN_PROGRESS"));const At={...ae.stage3,reevalStatus:st,planUpdatedAt:Pe,triggersReviewedAt:Te===0?ce:ae.stage3.triggersReviewedAt,recommendedActions:Ke,headerMeta:{...ae.stage3.headerMeta,planStatus:zt,opsStatus:zt==="NEEDS_UPDATE"?"PLAN_NEEDS_UPDATE":st==="PENDING"?"REEVAL_PENDING":Be!=="NOT_CREATED"?"LINKAGE_PENDING":"TRACKING"}};return{...ae,linkageStatus:Be,stage3:At,contactFlowSteps:si(ae.contactExecution,ae.preTriageResult,Be,s)}}),Xe({type:"STAGE3_ACTION_DECISION",at:ce,by:w.header.assigneeName,actionId:P,decision:K,note:Q.title}),K==="APPROVED"&&(Q.type==="SCHEDULE_REEVAL"?Xe({type:"REEVAL_SCHEDULED",at:ce,scheduledAt:w.stage3?.headerMeta.nextReevalAt??gt(72),by:w.header.assigneeName,reason:"  "}):Q.type==="UPDATE_PLAN"?Xe({type:"PLAN_UPDATED",at:ce,by:w.header.assigneeName,summary:"    "}):Q.type==="ESCALATE_LEVEL"?Xe({type:"LINKAGE_CREATED",at:ce,by:w.header.assigneeName,linkageType:"CENTER",summary:"   "}):Q.type==="SEND_REMINDER"&&Xe({type:"SMS_SENT",at:ce,templateId:"S3_REMINDER_TRACK",status:"PENDING",by:w.header.assigneeName})),qe(`Stage3  ${K==="APPROVED"?"":""}: ${Q.title}`),ke.success(` (  ): ${Q.title}`)},Px=P=>{if(!d)return;const K=ut(),Q=w.stage3?.headerMeta.nextReevalAt??gt(72),ce=P==="RESCHEDULE"?gt(120):P==="COMPLETE"?gt(336):Q;L(ae=>{if(!ae.stage3)return ae;const Ke=P==="COMPLETE"?"COMPLETED":P==="NOSHOW"?"NOSHOW":"SCHEDULED",Te=P==="COMPLETE"?ae.stage3.headerMeta.planStatus==="NEEDS_UPDATE"?"PLAN_NEEDS_UPDATE":"TRACKING":P==="NOSHOW"?"CHURN_RISK":"REEVAL_PENDING";return{...ae,stage3:{...ae.stage3,reevalStatus:Ke,headerMeta:{...ae.stage3.headerMeta,nextReevalAt:ce,opsStatus:Te}},contactFlowSteps:si(ae.contactExecution,ae.preTriageResult,ae.linkageStatus,s)}}),P==="SCHEDULE"?(Xe({type:"REEVAL_SCHEDULED",at:K,scheduledAt:Q,by:w.header.assigneeName,reason:"  "}),qe(`  : ${mt(Q)}`)):P==="RESCHEDULE"?(Xe({type:"REEVAL_RESCHEDULED",at:K,from:Q,to:ce,by:w.header.assigneeName,reason:" "}),qe(`  : ${mt(Q)}  ${mt(ce)}`)):P==="COMPLETE"?(Xe({type:"REEVAL_COMPLETED",at:K,by:w.header.assigneeName,note:"  "}),qe("  ")):(Xe({type:"REEVAL_NOSHOW",at:K,by:w.header.assigneeName,note:" "}),qe("  ")),ke.success(" ( )")},Ys=P=>{if(!d)return;const K=ut(),Q=P?.summary??(u?"   ":"    ");L(ce=>{if(!ce.stage3)return ce;const ae=[...ce.stage3.transitionRisk.series],Ke=ae[ae.length-1],Te=Ke?{t:K,risk2y:Ke.risk2y,ciLow:Ke.ciLow,ciHigh:Ke.ciHigh,source:"manual",event:"REEVAL"}:{t:K,risk2y:ce.stage3.transitionRisk.risk2y_now,source:"manual",event:"REEVAL"},st=[...ae.slice(-11),Te];return{...ce,stage3:{...ce.stage3,riskReviewedAt:K,transitionRisk:{...ce.stage3.transitionRisk,updatedAt:K,series:st}}}}),Xe({type:"RISK_REVIEWED",at:K,by:w.header.assigneeName,summary:Q}),Xe({type:"RISK_SERIES_UPDATED",at:K,by:w.header.assigneeName,summary:u?"     ":"     "}),qe(`${u?"Stage2   ":"Stage3   "} : ${Q}`),P?.nextAction&&Ht({at:K,memo:Q,nextAction:P.nextAction}),P?.silentToast||ke.success(u?"   .":"   .")},ji=P=>{if(!d)return;const K=ut();if(P==="APPLY_RESULT"&&Et(Q=>({...Q,riskReady:!0,resultPerformedAt:Q.resultPerformedAt||K})),L(Q=>{if(!Q.stage3)return Q;let ce=Q.stage3.diffPathStatus,ae=Q.stage3.reevalStatus,Ke=Q.stage3.headerMeta.planStatus,Te=Q.stage3.planUpdatedAt,st=Q.stage3.headerMeta.nextReevalAt,zt=Q.stage3.transitionRisk;if(P==="CREATE_RECO")ce="RECOMMENDED";else if(P==="CREATE_REFER")ce="REFERRED";else if(P==="SCHEDULE"){ce="SCHEDULED",ae="SCHEDULED",st=gt(72);const Be=Q.stage3.transitionRisk.series[Q.stage3.transitionRisk.series.length-1];zt={...Q.stage3.transitionRisk,updatedAt:K,series:[...Q.stage3.transitionRisk.series.slice(-11),{t:K,risk2y:Be?.risk2y??Q.stage3.transitionRisk.risk2y_now,ciLow:Be?.ciLow,ciHigh:Be?.ciHigh,source:"manual",event:"REEVAL"}]}}else if(P==="COMPLETE"){ce="COMPLETED",ae="COMPLETED";const Be=Q.stage3.transitionRisk.series[Q.stage3.transitionRisk.series.length-1],At=Zn((Be?.risk2y??Q.stage3.transitionRisk.risk2y_now)-.03);zt={...Q.stage3.transitionRisk,risk2y_now:At,risk2y_label:At>=.7?"HIGH":At>=.45?"MID":"LOW",updatedAt:K,series:[...Q.stage3.transitionRisk.series.slice(-11),{t:K,risk2y:At,ciLow:Zn(At-.04),ciHigh:Zn(At+.04),source:"manual",event:"REEVAL"}]}}else if(P==="APPLY_RESULT"){ce="COMPLETED",Ke="NEEDS_UPDATE",Te=K;const Be=Q.stage3.transitionRisk.series[Q.stage3.transitionRisk.series.length-1],At=Zn((Be?.risk2y??Q.stage3.transitionRisk.risk2y_now)+.04);zt={...Q.stage3.transitionRisk,risk2y_now:At,risk2y_label:At>=.7?"HIGH":At>=.45?"MID":"LOW",updatedAt:K,series:[...Q.stage3.transitionRisk.series.slice(-11),{t:K,risk2y:At,ciLow:Zn(At-.05),ciHigh:Zn(At+.05),source:"manual",event:"DIFF_RESULT_APPLIED"}]}}const Pe=Ke==="NEEDS_UPDATE"?"PLAN_NEEDS_UPDATE":ce==="REFERRED"||ce==="SCHEDULED"?"LINKAGE_PENDING":ae==="PENDING"?"REEVAL_PENDING":"TRACKING";return{...Q,stage3:{...Q.stage3,diffPathStatus:ce,reevalStatus:ae,planUpdatedAt:Te,transitionRisk:zt,headerMeta:{...Q.stage3.headerMeta,planStatus:Ke,nextReevalAt:st,opsStatus:Pe}},linkageStatus:P==="CREATE_REFER"||P==="SCHEDULE"?"REFERRAL_CREATED":Q.linkageStatus}}),P==="CREATE_RECO")Xe({type:"DIFF_RECO_CREATED",at:K,by:w.header.assigneeName,summary:u?"   ":"/  "}),qe(u?"   ":"  ");else if(P==="CREATE_REFER")Xe({type:"DIFF_REFER_CREATED",at:K,by:w.header.assigneeName,summary:u?"/  ":"  "}),Xe({type:"LINKAGE_CREATED",at:K,by:w.header.assigneeName,linkageType:"HOSPITAL",summary:u?"    ":"   "}),qe(u?"  ":"  ");else if(P==="SCHEDULE"){const Q=gt(72);Xe({type:"DIFF_SCHEDULED",at:K,by:w.header.assigneeName,summary:u?"  ":"  "}),Xe({type:"REEVAL_SCHEDULED",at:K,by:w.header.assigneeName,scheduledAt:Q,reason:u?"  ":"  "}),qe(u?"  ":"  ")}else P==="COMPLETE"?(Xe({type:"DIFF_COMPLETED",at:K,by:w.header.assigneeName,summary:u?"   ":"  "}),Xe({type:"REEVAL_COMPLETED",at:K,by:w.header.assigneeName,note:u?" ":" "}),qe(u?"  ":"  ")):(Xe({type:"DIFF_RESULT_APPLIED",at:K,by:w.header.assigneeName,summary:u?"      ":"       "}),qe(u?"  ":"  "));if(t?.id&&P==="APPLY_RESULT"){const Q=_Ae(Re.resultLabel),ce=ut();IEe(t.id,{biomarker:Re.testBiomarker,imaging:Re.testBrainImaging,biomarkerResult:Re.testBiomarker?Q:null,imagingResult:Re.testBrainImaging?Q:null,performedAt:ce},w.header.assigneeName),C?(fr(ae=>({...ae,status:"DONE",startedAt:ae.startedAt??ce,updatedAt:ce,completedAt:ce,progress:100,etaSeconds:0})),qe("Stage3    .")):(fr(ae=>({...ae,status:"RUNNING",startedAt:ce,updatedAt:ce,completedAt:void 0,progress:4,etaSeconds:null,failureReason:void 0})),Xe({type:"INFERENCE_REQUESTED",stage:3,at:ce,by:w.header.assigneeName,summary:"Stage3   "}),Xe({type:"INFERENCE_STARTED",stage:3,at:ce,by:w.header.assigneeName,summary:"Stage3   "}),qe("Stage3   "))}t?.id&&P==="SCHEDULE"&&as(t.id,"STAGE3_DIFF_SCHEDULED",{scheduledAt:gt(72)},w.header.assigneeName),ke.success(" (  )")},Tu=h.useCallback((P,K,Q)=>{if(!d)return;const ce=ut(),ae=P.trim();Lt(Ke=>({...Ke,consultStarted:!0,infoCollected:!0})),ae.length>0&&Et(Ke=>({...Ke,note:ae})),Xe({type:"CALL_ATTEMPT",at:ce,result:"SUCCESS",note:ae||`${K}  `,by:w.header.assigneeName}),qe(`Stage3  : ${Q}${ae?` (${ae.slice(0,80)})`:""}`)},[qe,w.header.assigneeName,d]),Lh=h.useCallback(P=>{if(!d)return;const K=ut();Xe({type:"SMS_SENT",at:K,templateId:P.templateLabel,status:P.status==="SENT"?"DELIVERED":P.status==="SCHEDULED"?"PENDING":"FAILED",by:w.header.assigneeName}),Xe({type:"MESSAGE_SENT",at:K,by:w.header.assigneeName,summary:`   ${P.mode==="NOW"?"":""}: ${P.templateLabel}`}),Lt(Q=>({...Q,messageSent:P.status!=="FAILED"})),qe(`Stage3  ${P.mode==="NOW"?"":""}: ${P.templateLabel} (${P.status})`)},[qe,w.header.assigneeName,d]),Dx=h.useCallback(()=>{if(!d)return;const P=ut(),K=[Re.note,ne,Bi,Ni?.scriptBody].filter(Boolean).join(" "),Q=K.length>=180?"":K.length>=80?"":"",ce={preferredHospital:Re.preferredHospital||Re.orgName||" ",preferredTimeWindow:K.includes("")||K.includes("")?"  10:00~12:00":K.includes("")?"  09:00~11:00":"  14:00~16:00",caregiverCompanion:K.includes("")||Se.caregiverNeeded,mobilityIssue:K.includes("")||K.includes(""),testBiomarker:!0,testBrainImaging:!0,prepGuide:" : / /  ,      ",orgName:Re.orgName||" ",orgPhone:Re.orgPhone||_l},ae=Object.keys(ce).filter(Te=>{const st=ce[Te],zt=Re[Te];return st!==zt}),Ke=[Ni?.title?` : ${Ni.title}`:"    ",K.length>0?`   : ${K.slice(0,60)}${K.length>60?"...":""}`:"      ",`     ${Q}`];ta({generatedAt:P,confidenceLabel:Q,reasonSnippets:Ke,patch:ce,changedFields:ae,applied:!1,ignored:!1}),Lt(Te=>({...Te,ragGenerated:!0})),qe(`Stage3 RAG    (${Q})`),ke.success("RAG   .    .")},[qe,ne,d,Bi,Ni?.scriptBody,Ni?.title,Re,Se.caregiverNeeded]),Jf=h.useCallback(()=>{if(!xt)return;const P=ut();Et(K=>({...K,...xt.patch})),ta(K=>K&&{...K,applied:!0,ignored:!1}),Lt(K=>({...K,infoCollected:!0,ragGenerated:!0})),Xe({type:"STAGE3_ACTION_DECISION",at:P,by:w.header.assigneeName,actionId:"RAG_AUTOFILL",decision:"APPROVED",note:`  (${xt.changedFields.length} )`}),qe(`Stage3 RAG  : ${xt.changedFields.join(", ")||" "}`)},[qe,w.header.assigneeName,xt]),hd=h.useCallback(()=>{if(!xt)return;const P=ut();ta(K=>K&&{...K,ignored:!0,applied:!1}),Xe({type:"STAGE3_ACTION_DECISION",at:P,by:w.header.assigneeName,actionId:"RAG_AUTOFILL",decision:"HOLD",note:"  "}),qe("Stage3 RAG  ")},[qe,w.header.assigneeName,xt]),$h=h.useCallback(()=>{if(!d)return;const P={};if(!ne.trim()&&!nr.consultStarted&&(P.step2CallRecord="  (   ) ."),Re.preferredHospital.trim()||(P.step2Hospital=" / ."),!Re.testBiomarker&&!Re.testBrainImaging&&!Re.testOther&&(P.step2TestSelection="   1 ."),Re.bookingAt||(P.step2BookingAt="    ."),Object.keys(P).length>0){cc("CONTACT_EXECUTION",P),ke.error("      .");return}na(ce=>({...ce,CONTACT_EXECUTION:{}}));const K=ut();ji("SCHEDULE"),Et(ce=>({...ce,bookingConfirmed:!0})),Lt(ce=>({...ce,bookingConfirmed:!0,messageSent:!0,calendarSynced:!0})),t?.id&&QF(t.id,0,w.header.assigneeName),Xe({type:"SMS_SENT",at:K,templateId:"S3_BOOKING_CONFIRM",status:"DELIVERED",by:w.header.assigneeName}),Xe({type:"MESSAGE_SENT",at:K,by:w.header.assigneeName,summary:`     ${mt(Re.bookingAt)}`});const Q=`S3-CAL-${Date.now()}`;Xe({type:"CALENDAR_SYNC",at:K,status:"SUCCESS",eventType:"FOLLOWUP",title:`Stage3   (${w.header.caseId})`,scheduledAt:Re.bookingAt,idempotencyKey:Q,by:w.header.assigneeName}),Xe({type:"CAL_EVENT_CREATED",at:K,by:w.header.assigneeName,scheduledAt:Re.bookingAt,summary:`${Re.preferredHospital||Re.orgName}  ${mt(Re.bookingAt)}`}),qe(`Stage3    : ${Re.preferredHospital||Re.orgName}  ${mt(Re.bookingAt)}  /  `),ke.success("//  .")},[cc,qe,t?.id,ne,w.header.assigneeName,w.header.caseId,ji,d,Re.bookingAt,Re.orgName,Re.preferredHospital,Re.testBiomarker,Re.testBrainImaging,Re.testOther,nr.consultStarted]),Fh=(P,K)=>{if(!d)return;const Q=ut();L(ce=>{if(!ce.stage3)return ce;const ae=ce.stage3.programs.map(Ke=>{if(Ke.id!==P)return Ke;const Te=K??!Ke.selected;return{...Ke,selected:Te,execution:Te?Ke.execution??{owner:ce.header.assigneeName,dueDate:gt(72),status:"PLANNED",method:""}:void 0}});return{...ce,stage3:{...ce.stage3,programs:ae}}}),Xe({type:"PROGRAM_SELECTED",at:Q,by:w.header.assigneeName,summary:`  : ${P}`}),qe(`  : ${P}`)},gd=(P,K)=>{if(!d)return;const Q=ut();L(ce=>{if(!ce.stage3)return ce;const ae=ce.stage3.programs.map(Ke=>Ke.id!==P?Ke:{...Ke,selected:!0,execution:{owner:ce.header.assigneeName,...Ke.execution,...K}});return{...ce,stage3:{...ce.stage3,programs:ae}}}),Xe({type:K.status==="DONE"?"PROGRAM_EXEC_COMPLETED":"PROGRAM_EXEC_UPDATED",at:Q,by:w.header.assigneeName,summary:`  : ${P}`}),qe(`  : ${P}`),ke.success("   .")},Uh=()=>{if(!d)return;const P=ut();L(K=>{if(!K.stage3)return K;const Q=K.stage3.transitionRisk.series[K.stage3.transitionRisk.series.length-1],ce=Q?.risk2y??K.stage3.transitionRisk.risk2y_now;return{...K,stage3:{...K.stage3,planUpdatedAt:P,transitionRisk:{...K.stage3.transitionRisk,updatedAt:P,series:[...K.stage3.transitionRisk.series.slice(-11),{t:P,risk2y:ce,ciLow:Q?.ciLow,ciHigh:Q?.ciHigh,source:"manual",event:"PLAN_UPDATED"}]},headerMeta:{...K.stage3.headerMeta,planStatus:"ACTIVE",opsStatus:"TRACKING"}}}}),Xe({type:"PLAN_UPDATED",at:P,by:w.header.assigneeName,summary:"   "}),qe("  "),ke.success("  .")},Bh=()=>{if(!d)return;const P=ut(),K=gt((w.stage3?.headerMeta.trackingCycleDays??21)*24);L(Q=>Q.stage3?{...Q,stage3:{...Q.stage3,headerMeta:{...Q.stage3.headerMeta,nextTrackingContactAt:K}}}:Q),Xe({type:"NEXT_TRACKING_SET",at:P,by:w.header.assigneeName,nextAt:K,summary:"   "}),qe(`   : ${mt(K)}`),ke.success("   .")},Gh=h.useCallback(()=>{if(!d)return;if(u){if(!w.stage3?.riskReviewedAt){Ys({summary:"STEP1  "});return}if(w.stage3.diffPathStatus==="NONE"||w.stage3.diffPathStatus==="RECOMMENDED"){ji("SCHEDULE");return}if(w.stage3.reevalStatus!=="SCHEDULED"&&w.stage3.reevalStatus!=="COMPLETED"){Px("SCHEDULE");return}je("FOLLOW_UP");return}const P=w.stage3?.recommendedActions.find(Q=>Q.decision==="PENDING");if(P){Zf(P.id,"APPROVED");return}if(!w.stage3?.riskReviewedAt){Ys();return}if(w.stage3.diffPathStatus==="NONE"){ji("CREATE_RECO");return}if(!w.stage3.programs.some(Q=>Q.selected&&(Q.execution?.status==="PLANNED"||Q.execution?.status==="IN_PROGRESS"||Q.execution?.status==="DONE"))){const Q=w.stage3.programs[0];if(Q){Fh(Q.id,!0),gd(Q.id,{status:"PLANNED",method:"",dueDate:gt(72)});return}}if(w.stage3.headerMeta.planStatus==="NEEDS_UPDATE"){Uh();return}Bh()},[Zf,Uh,w.stage3,ji,Ys,Px,d,u,Bh,je,Fh,gd]),ep=P=>{if(P===w.contactExecutor)return;const K=w.contactExecutor,Q=ut(),ce=ls==="AI_FIRST"&&P==="HUMAN";ce&&wc({actor:"operator",summary:"     .",detailMessage:"    ",moveToHuman:!0}),L(ae=>({...ae,contactExecutor:P})),Xe({type:"STATUS_CHANGE",at:Q,from:bo[K],to:bo[P],reason:"  ",by:w.header.assigneeName}),ce&&(Xe({type:"OPERATOR_OVERRIDE_TO_HUMAN",at:Q,actor:"operator",caseId:w.header.caseId,summary:"  ",detail:"      ",by:w.header.assigneeName}),qe("  :     ")),qe(`  : ${bo[K]}  ${bo[P]}`),ke.success("  .")},Hh=P=>{Ma(P.id),Gi(P.scriptBody)},tp=()=>{const P=im[Ut.route];if(Ut.route!=="HOLD_TRACKING"&&!Ut.scheduledAt)return ke.error("/  ."),!1;const K=Ut.route==="HOLD_TRACKING"?void 0:{route:Ut.route,reservationType:P.reservationType,scheduledAt:Ut.scheduledAt,place:Ut.place||P.defaultPlace,contactGuide:Ut.contactGuide||_l,note:Ut.note||void 0},Q=w.linkageStatus,ce=P.linkageStatus;return L(ae=>({...ae,linkageStatus:ce,reservationInfo:K,contactFlowSteps:si(ae.contactExecution,ae.preTriageResult,ce,s)})),K?.scheduledAt&&Mt(K.scheduledAt),Xe({type:"STATUS_CHANGE",at:ut(),from:Zd[Q],to:Zd[ce],reason:`${P.label} `,by:w.header.assigneeName}),qe(`  : ${P.label}`),ke.success("  ."),!0},ul=()=>{if(!ye||!ye.reason.trim())return;if(ye.mode==="LEVEL"){const Q=ye.nextLevel,ce=w.interventionLevel,ae=w.header.dataQuality.level;L(Ke=>({...Ke,interventionLevel:Q})),Ox(Q,ae),Xe({type:"LEVEL_CHANGE",at:ut(),from:ce,to:Q,reason:ye.reason,by:w.header.assigneeName}),qe(`  : ${ce}  ${Q} (${ye.reason})`),ke.success(" ( )"),pe(null);return}const P=w.header.statusLabel,K=ye.nextStatus;L(Q=>{const ce=K===" "?{level:"EXCLUDE",score:Math.min(Q.header.dataQuality.score,60),notes:["  ","    "]}:Q.header.dataQuality;return{...Q,header:{...Q.header,statusLabel:K,dataQuality:ce},todos:K===" "?yO(Q.interventionLevel,"EXCLUDE"):Q.todos}}),Xe({type:"STATUS_CHANGE",at:ut(),from:P,to:K,reason:ye.reason,by:w.header.assigneeName}),qe(` : ${P}  ${K} (${ye.reason})`),ke.success(" ( )"),pe(null)},Kh=()=>{XN||(X(!0),te(0),qe(`   (${U==="citizen"?"":""})`))},zh=async()=>{if(!he)return;if(dt(!0),he.mode==="CALL"){const Te=ut(),st=he.result,zt=he.note.trim();Xe({type:"CALL_ATTEMPT",at:Te,result:st,note:zt||void 0,by:w.header.assigneeName}),qe(`  : ${HAe(st)}${zt?` (${zt})`:""}`),L(Pe=>({...Pe,header:{...Pe.header,waitDays:st==="SUCCESS"?0:Pe.header.waitDays+1,statusLabel:st==="SUCCESS"?"":Pe.header.statusLabel}})),st==="SUCCESS"?(Ei("CALL"),Mt(gt(72))):Mt(gt(st==="NO_ANSWER"?6:24)),se(""),te(0),dt(!1),rt(null),ke.success(" ( )");return}const P=he.result,K=YN,Q=[{key:"citizen",label:"",phone:t?.profile.phone},{key:"guardian",label:"",phone:t?.profile.guardianPhone}].filter(Te=>we[Te.key]),ce=he.scheduled&&ge?new Date(ge).toISOString():ut();let ae=0,Ke=0;for(const Te of Q){let st=P;if(!he.scheduled&&Te.phone&&P!=="FAILED"){const zt=l?"STAGE2":d?"STAGE3":"STAGE1";(await Hz({caseId:w.header.caseId,citizenPhone:Te.phone,templateId:Oe,renderedMessage:K,dedupeKey:`${w.header.caseId}-${Oe}-${Te.label}-${Date.now()}`,stage:zt})).success||(st="FAILED")}(st==="DELIVERED"||st==="PENDING")&&(ae+=1),st==="FAILED"&&(Ke+=1),Xe({type:"SMS_SENT",at:ce,templateId:`${Oe}(${Te.label})`,status:st,by:w.header.assigneeName})}qe(` ${he.scheduled?"":""}: ${dl.label} (${Q.length}, / ${ae},  ${Ke})`),ae>0&&(Ei("SMS"),Mt(gt(48))),dt(!1),rt(null),ke.success(" ( )")};`${String(Math.floor(F/60)).padStart(2,"0")}${String(F%60).padStart(2,"0")}`;const ZN=()=>{if(!Gt.trim())return;const P=w.header.effectiveStrategy??w.preTriageResult?.strategy??"AI_FIRST",K=xr,Q=ek(w.preTriageResult?.triggers??[]);if(K==="AI_FIRST"&&Q&&Gt.trim().length<12){ke.error("        12   .");return}L(ce=>{const ae={strategy:K,triggers:[...ce.preTriageResult?.triggers??[],` : ${Gt}`],policyNote:`    (${qd[K]}). : ${Gt}`,confidence:"RULE"};return{...ce,header:{...ce.header,contactStrategy:"MANUAL_OVERRIDE",effectiveStrategy:K},contactExecutor:K==="AI_FIRST"?"AGENT_SEND_ONLY":"HUMAN",preTriageResult:ae,contactPlan:oq(K,t,s),contactFlowSteps:si(ce.contactExecution,ae,ce.linkageStatus,s)}}),Xe({type:"STRATEGY_CHANGE",at:ut(),from:P,to:K,reason:Gt,by:w.header.assigneeName}),Xe({type:"CONTACT_STRATEGY_CHANGED",at:ut(),actor:"operator",caseId:w.header.caseId,summary:`  : ${qd[P]}  ${qd[K]}`,detail:Gt,by:w.header.assigneeName}),K==="HUMAN_FIRST"&&wc({actor:"operator",summary:"     .",detailMessage:Gt,moveToHuman:!0}),qe(`   : ${qd[P]}  ${qd[K]} (${Gt})`),ke.success("  ."),hr(!1),sr("")},Vi=h.useCallback(()=>{Ks(!0),Va&&Bn(null),Wi()},[Wi,Va]),pc=h.useCallback(P=>{Vi(),kr(P)},[Vi]),qh=h.useCallback(P=>{Vi(),wt(P)},[Vi]),rp=h.useCallback(P=>{Vi(),pi(P)},[Vi]),np=h.useCallback(P=>{Vi(),ic(P)},[Vi]),sn=h.useCallback(P=>{Vi(),Es(K=>K.includes(P)?K.filter(Q=>Q!==P):[...K,P])},[Vi]),xd=h.useCallback(()=>{const P=w.header.sla.level!=="OK"||w.contactExecution.retryCount>=2||gO(t)>=85;kr(null),wt(""),pi({code:null,level:"TEMP",detail:"",createFollowupEvent:!1,followupAt:gt(168)}),ic({strategy:null,channel:"CALL",assigneeId:w.header.assigneeName||Ol,nextContactAt:gt(24),applyL3:P}),Es([]),Bn(null),Wi(),Ks(!1)},[t,Wi,w.contactExecution.retryCount,w.header.assigneeName,w.header.sla.level]),bd=async({code:P,note:K,reject:Q,noResponse:ce,reasonTags:ae=[]})=>{const Ke=K.trim(),Te=ce?.nextContactAt,st={outcomeType:YAe[P],memo:Ke||void 0,reasonTags:ae.length>0?ae:void 0};P==="REFUSE"&&Q?.code&&(st.reject={code:Q.code,level:Q.level,detail:Q.detail.trim()||void 0,followup:{createFollowupEvent:Q.createFollowupEvent,followupAt:Q.createFollowupEvent?Q.followupAt:void 0}}),P==="NO_RESPONSE"&&ce?.strategy&&Te&&(st.noResponse={strategy:ce.strategy,nextContactAt:Te,escalateLevel:ce.applyL3?"L3":void 0,channel:ce.channel,assigneeId:ce.assigneeId||void 0});const zt=await Eu({caseId:w.header.caseId,payload:st});if(!zt)return ke.error("   .   ."),!1;const Pe=ut();let Be=null,At="",Ur=!1;L(Xr=>{const vr=Vwe({outcomeCode:P,execution:Xr.contactExecution,linkageStatus:Xr.linkageStatus,contactPlan:Xr.contactPlan});At=vr.recommendedNextAction,Ur=vr.switchedToHybrid;let ei=vr.contactPlan;ei&&P==="SCHEDULE_LATER"&&(ei={...ei,scheduledAt:gt(vr.recontactAfterHours)}),ei&&P==="NO_RESPONSE"&&Te&&(ei={...ei,scheduledAt:Te}),vr.requiresHandoffMemo&&(Be={triggers:Xr.preTriageResult?.triggers??[],lastContactSummary:` : ${mt(Xr.contactExecution.lastSentAt??Pe)}`,currentOutcome:P,recommendedNextAction:At,generatedAt:Pe});const Ac={...Xr.contactExecution,status:vr.executionStatus,lastOutcomeCode:P,lastResponseAt:Pe,retryCount:vr.retryCount,handoffMemo:Be??Xr.contactExecution.handoffMemo};return{...Xr,linkageStatus:vr.linkageStatus,contactPlan:ei,contactExecution:Ac,contactFlowSteps:si(Ac,Xr.preTriageResult,vr.linkageStatus,s)}}),Xe({type:"OUTCOME_RECORDED",at:Pe,outcomeCode:P,reasonTags:ae.length>0?ae:void 0,note:Ke||void 0,rejectCode:st.reject?.code,rejectLevel:st.reject?.level,recontactStrategy:st.noResponse?.strategy,nextContactAt:st.noResponse?.nextContactAt??st.reject?.followup?.followupAt,outcomeId:zt.outcome.outcomeId,by:w.header.assigneeName});const yr=ae.length>0?`  : ${ae.map(Xr=>f1[Xr].label).join(", ")}`:"";qe(`  : ${Fl[P].label}${yr}${Ke?` (${Ke.slice(0,60)})`:""}`),Xe({type:"MESSAGE_SENT",at:Pe,summary:`${l?"STAGE2_RESPONSE_RECORDED":"STAGE1_RESPONSE_RECORDED"}  ${Fl[P].label}`,by:w.header.assigneeName});const ds=zt.outcome.nextAction?.events?.[0]?.startAt??st.noResponse?.nextContactAt??st.reject?.followup?.followupAt;if(Mt(ds??gt(P==="SCHEDULE_LATER"?72:P==="NO_RESPONSE"?24:P==="REFUSE"?168:48)),Ur&&qe("     : HYBRID"),st.noResponse?.escalateLevel==="L3"&&w.interventionLevel!=="L3"){const Xr=w.interventionLevel;L(vr=>({...vr,interventionLevel:"L3"})),Ox("L3",w.header.dataQuality.level),Xe({type:"LEVEL_CHANGE",at:Pe,from:Xr,to:"L3",reason:"       ",by:w.header.assigneeName}),qe(`  : ${Xr}  L3 (   )`)}return zt.calendar.created.forEach(Xr=>{Xe({type:"CALENDAR_SYNC",at:ut(),status:"SUCCESS",eventType:Xr.event.type,title:Xr.event.title,scheduledAt:Xr.event.startAt,idempotencyKey:Xr.idempotencyKey,by:w.header.assigneeName})}),zt.calendar.failed.forEach(Xr=>{Xe({type:"CALENDAR_SYNC",at:ut(),status:"FAILED",eventType:Xr.eventType,title:Xr.title,scheduledAt:Xr.scheduledAt,idempotencyKey:Xr.idempotencyKey,error:Xr.errorMessage,by:w.header.assigneeName})}),zt.calendar.failed.length>0?(qe(`  : ${zt.calendar.failed.length} ( )`),ke.error("      .  .")):zt.calendar.created.length>0?(qe(`  : ${zt.calendar.created.length}`),ke.success("   .")):ke.success("  ."),Be&&(Oh(`[ ]
 ( ): ${w.header.effectiveStrategy??w.preTriageResult?.strategy??"AI_FIRST"}
: ${Be.triggers.join(", ")}
${Be.lastContactSummary}
 : ${Fl[P].label}
  : ${Be.recommendedNextAction}`),Cs(!0)),!d&&$==="RESPONSE_HANDLING"?(z("FOLLOW_UP"),Cs(!0)):z(null),xd(),aa(Pe),!0},mc=async()=>{if(!cl){if(!br){const P="  .";Bn(P),ke.error(P);return}if(br==="REFUSE"){if(!an.code){const P="     .";Bn(P),ke.error(P);return}if(an.code==="R7_OTHER"&&!an.detail.trim()){const P="     .";Bn(P),ke.error(P);return}if(an.createFollowupEvent&&!an.followupAt){const P="   .";Bn(P),ke.error(P);return}Bn(null),await bd({code:"REFUSE",note:cn,reject:an,reasonTags:Fr});return}if(br==="NO_RESPONSE"){const P=un.strategy??tq[un.channel];if(!P){const K="       .";Bn(K),ke.error(K);return}if(!un.nextContactAt){const K="       .";Bn(K),ke.error(K);return}if(!un.assigneeId.trim()){const K="      .";Bn(K),ke.error(K);return}Bn(null),await bd({code:"NO_RESPONSE",note:cn,noResponse:{...un,strategy:P},reasonTags:Fr});return}Bn(null),await bd({code:br,note:cn,reasonTags:Fr})}},hc=h.useMemo(()=>gO(t),[t]),Ou=h.useMemo(()=>pAe(hc),[hc]),Ru=h.useMemo(()=>sz(t),[t]),ls=w.header.effectiveStrategy??w.preTriageResult?.strategy??"AI_FIRST",fl=w.header.contactStrategy??ls,Wh=w.contactFlowSteps.filter(P=>P.status==="MISSING").length,Ix=w.contactFlowSteps.filter(P=>P.status==="WARNING").length,ap=!!w.preTriageInput&&w.header.dataQuality.level!=="EXCLUDE",Kr=h.useMemo(()=>x7({caseId:w.header.caseId,stage:2,jobStatus:Je.status,progress:Je.progress,etaSeconds:Je.etaSeconds,startedAt:Je.startedAt,updatedAt:Je.updatedAt,completedAt:Je.completedAt,hasResult:Je.status==="DONE"||E&&Je.status!=="RUNNING",minDurationSec:Je.minDurationSec,maxDurationSec:Je.maxDurationSec,nowMs:St}),[w.header.caseId,St,Je.completedAt,Je.etaSeconds,Je.maxDurationSec,Je.minDurationSec,Je.progress,Je.startedAt,Je.status,Je.updatedAt,E]),Sn=h.useMemo(()=>x7({caseId:w.header.caseId,stage:3,jobStatus:bt.status,progress:bt.progress,etaSeconds:bt.etaSeconds,startedAt:bt.startedAt,updatedAt:bt.updatedAt,completedAt:bt.completedAt,hasResult:bt.status==="DONE"||C&&bt.status!=="RUNNING",minDurationSec:bt.minDurationSec,maxDurationSec:bt.maxDurationSec,nowMs:St}),[w.header.caseId,St,bt.completedAt,bt.etaSeconds,bt.maxDurationSec,bt.minDurationSec,bt.progress,bt.startedAt,bt.status,bt.updatedAt,C]),Yr=Kr.jobStatus==="DONE",ya=Sn.jobStatus==="DONE",ku=!!(N?.completed||Re.resultPerformedAt&&Re.resultSummary.trim()&&Re.biomarkerResultText?.trim()&&Re.imagingResultText?.trim()),yd=!!(zi||p?.status==="CLASS_CONFIRMED"||p?.status==="NEXT_STEP_SET"||p?.operationStep==="CLASSIFIED"||p?.operationStep==="FOLLOW_UP"||p?.operationStep==="COMPLETED"||p?.stage===3),gc=h.useMemo(()=>Jwe(w.timeline),[w.timeline]),Mx=h.useMemo(()=>u?Kb(gc,{stage:"stage2",storedOpsStatus:w.stage3?.headerMeta.opsStatus,hasPlanConfirmed:Nn?!1:!!w.stage3?.riskReviewedAt,hasResultReceived:Nn?!1:!!(Yr||Rn.receivedAt||y?.updatedAt||tt.status!=="NOT_STARTED"),hasResultValidated:Nn?!1:!!(Yr||y?.completed||tt.status==="COMPLETED"),hasModelResult:Nn?!1:Yr,inferenceStatus:Kr.jobStatus,classificationConfirmed:Nn?!1:yd,nextStepDecided:Nn?!1:!!tt.nextStep}):s==="stage2"?Kb(gc,{stage:"stage2",hasPlanConfirmed:Nn?!1:ap&&!!w.preTriageResult?.strategy,hasResultReceived:Nn?!1:!!(Yr||Rn.receivedAt||y?.updatedAt||tt.status!=="NOT_STARTED"),hasResultValidated:Nn?!1:!!(Yr||y?.completed||tt.status==="COMPLETED"),hasModelResult:Nn?!1:Yr,inferenceStatus:Kr.jobStatus,classificationConfirmed:Nn?!1:yd,nextStepDecided:Nn?!1:!!tt.nextStep}):s==="stage3"?g&&!u?aAe(g):Kb(gc,{stage:"stage3",storedOpsStatus:w.stage3?.headerMeta.opsStatus,hasPlanConfirmed:!!w.stage3?.riskReviewedAt,hasResultReceived:ku||ya,hasResultValidated:ku||ya,hasModelResult:ya,inferenceStatus:Sn.jobStatus,classificationConfirmed:!!(ua?.at||w.stage3?.riskReviewedAt),nextStepDecided:!!(w.stage3?.planUpdatedAt||w.stage3?.headerMeta.nextTrackingContactAt),referralConfirmed:w.linkageStatus==="BOOKING_DONE"||w.linkageStatus==="REFERRAL_CREATED"}):Kb(gc,{stage:"stage1",hasPlanConfirmed:ap&&!!w.preTriageResult?.strategy,hasResultReceived:w.contactExecution.status!=="NOT_STARTED",hasResultValidated:!!(w.contactExecution.lastOutcomeCode||w.contactExecution.lastResponseAt),hasModelResult:!!w.preTriageResult,classificationConfirmed:!!(w.contactExecution.lastOutcomeCode||w.contactExecution.lastResponseAt),nextStepDecided:w.linkageStatus!=="NOT_CREATED"||w.contactExecution.status==="DONE"||w.contactExecution.status==="STOPPED"}),[w.contactExecution.lastOutcomeCode,w.contactExecution.lastResponseAt,w.contactExecution.status,w.linkageStatus,w.preTriageResult,w.stage3?.headerMeta.nextTrackingContactAt,w.stage3?.headerMeta.opsStatus,w.stage3?.planUpdatedAt,w.stage3?.riskReviewedAt,u,gc,s,ap,g,yd,tt.nextStep,tt.status,y?.completed,y?.updatedAt,Kr.jobStatus,Rn.receivedAt,Nn,Yr,Sn.jobStatus,ua?.at,ya,ku]),ia=s_e(w,s,u,Mx),JN=w.stage3?.transitionRisk,pl=w.stage3?.programs??[],sp=h.useMemo(()=>pl.filter(P=>{if(ir!=="ALL"&&P.major!==ir||nn&&!P.pinned)return!1;if(!Ve.trim())return!0;const K=Ve.trim().toLowerCase();return`${P.major} ${P.middle} ${P.leaf}`.toLowerCase().includes(K)}),[ir,nn,Ve,pl]);h.useMemo(()=>sp.slice(0,24),[sp]),h.useMemo(()=>pl.filter(P=>P.selected),[pl]);const To=h.useMemo(()=>pl.some(P=>P.selected&&(P.execution?.status==="PLANNED"||P.execution?.status==="IN_PROGRESS"||P.execution?.status==="DONE")),[pl]),Pu=h.useMemo(()=>w.stage3?.recommendedActions.filter(P=>P.requiresApproval&&P.decision==="PENDING").length??0,[w.stage3?.recommendedActions]),vd=w.stage3?.diffPathStatus==="SCHEDULED"||w.stage3?.diffPathStatus==="COMPLETED",Xs=!!N?.completed||!!(Re.resultPerformedAt&&Re.resultSummary.trim()&&Re.biomarkerResultText?.trim()&&Re.imagingResultText?.trim()),wi=vd&&Xs,zn=h.useMemo(()=>pl.find(P=>P.id===ze)??null,[ze,pl]),Yi=["PRECHECK","CONTACT_EXECUTION","RESPONSE_HANDLING","FOLLOW_UP"],xc=Yi,ip=$?xc.indexOf($):-1,bc=$?ia.find(P=>P.id===$)??null:null,ml=rr?Yi.indexOf(rr):-1,Nd=rr?ia.find(P=>P.id===rr)??null:null,op=ia.find(P=>P.id==="FOLLOW_UP")?.status==="BLOCKED",lp=d?op:!l,oa=h.useMemo(()=>FAe(w.policyGates),[w.policyGates]),$a=ls==="AI_FIRST"&&w.contactExecutor==="AGENT_SEND_ONLY",Lr=w.contactPlan?.maxRetryPolicy.intervalHours??24,Jr=w.contactPlan?.maxRetryPolicy.maxRetries??2,Ai=w.contactPlan?.templateId??(l?"S2_CONTACT_BASE":d?"S3_CONTACT_BASE":"S1_CONTACT_BASE"),kn=p?.stage2Route??(Sr==="HOSPITAL_REFERRAL"?"HOSPITAL":"CENTER"),cs=h.useCallback(P=>{Cn(P),P==="RESULT"&&mn(!0),typeof window<"u"&&window.requestAnimationFrame(()=>{document.getElementById(`stage3-step2-panel-${P.toLowerCase()}`)?.scrollIntoView({behavior:"smooth",block:"start"})})},[]),va=__e({routeType:Sr,hospitalName:tr,dueAt:gr,tests:tt.tests,optionalTests:ud,integrationReceivedAt:Rn.receivedAt,integrationUpdatedAt:Rn.lastSyncedAt,manualEditEnabled:_s}),Xi=!!w.stage3?.riskReviewedAt,la=h.useMemo(()=>va.filter(P=>P.requiredLevel==="REQUIRED"&&(P.status==="MISSING"||P.status==="NEEDS_REVIEW"||P.status==="PENDING")),[va]),Du=h.useMemo(()=>{const P=va.filter(K=>K.status==="DONE"||K.status==="RECEIVED").length;return va.length?Math.round(P/va.length*100):0},[va]),Vh=h.useMemo(()=>{const P=va.filter(Q=>Q.requiredLevel==="REQUIRED"),K=P.filter(Q=>y_e.has(Q.status)).length;return P.length?Math.round(K/P.length*100):0},[va]),Sd=h.useMemo(()=>w.timeline.some(P=>P.type==="DIFF_REFER_CREATED"||P.type==="DIFF_SCHEDULED"||P.type==="LINKAGE_CREATED"),[w.timeline]),cp=h.useMemo(()=>({routeType:Sr,orgName:tr,dueAt:gr,lastSyncAt:Rn.lastSyncedAt??Rn.receivedAt??w.stage3?.riskReviewedAt,needsReasonOnChange:Sd}),[w.stage3?.riskReviewedAt,tr,Rn.lastSyncedAt,Rn.receivedAt,Sd,Sr,gr]),yc=h.useMemo(()=>{const P=va.some(Q=>Q.requiredLevel==="REQUIRED"&&(Q.status==="REFERRED"||Q.status==="SCHEDULED"||Q.status==="DONE"||Q.status==="RECEIVED"));return{status:la.length>0?"BLOCKED":Xi?"READY":P?"IN_PROGRESS":"PAUSED",completionRate:Du,requiredSatisfaction:Vh,missingCount:la.length,qualityScore:w.header.dataQuality.score,step1Reviewed:Xi,locks:{step2:ia.find(Q=>Q.id==="CONTACT_EXECUTION")?.status==="BLOCKED",step3:ia.find(Q=>Q.id==="RESPONSE_HANDLING")?.status==="BLOCKED",step4:ia.find(Q=>Q.id==="FOLLOW_UP")?.status==="BLOCKED"}}},[w.header.dataQuality.score,ia,Du,va,la.length,Vh,Xi]),Oo=h.useCallback(P=>{if(P===Sr)return;let K="";if(Sd&&typeof window<"u"&&(K=window.prompt(" /  .    .")?.trim()??"",!K)){ke.error("    .");return}const Q=Sr==="HOSPITAL_REFERRAL"?" ":"  ",ce=P==="HOSPITAL_REFERRAL"?" ":"  ";La(P),Gr("step1Plan"),Xe({type:"STATUS_CHANGE",at:ut(),from:Q,to:ce,reason:K||"Stage2   ",by:w.header.assigneeName}),qe(`Stage2   : ${Q}  ${ce}${K?` (${K})`:""}`)},[qe,Gr,w.header.assigneeName,Sd,Sr]),dp=h.useCallback(()=>{const P=ut();if(Sr==="HOSPITAL_REFERRAL"){Xe({type:"DIFF_REFER_CREATED",at:P,by:w.header.assigneeName,summary:` /: ${tr||""}   ${mt(gr)}`}),qe(`Stage2  /: ${tr||""}`),L(K=>K.stage3?{...K,stage3:{...K.stage3,diffPathStatus:K.stage3.diffPathStatus==="NONE"?"REFERRED":K.stage3.diffPathStatus}}:K),ke.success(" / .");return}Xe({type:"DIFF_SCHEDULED",at:P,by:w.header.assigneeName,summary:`  : ${mt(gr)}`}),qe(`Stage2   : ${mt(gr)}`),L(K=>K.stage3?{...K,stage3:{...K.stage3,diffPathStatus:K.stage3.diffPathStatus==="NONE"?"SCHEDULED":K.stage3.diffPathStatus}}:K),ke.success("   .")},[qe,w.header.assigneeName,tr,Sr,gr]),Yh=h.useCallback((P,K)=>{const Q=ut();if(K.key==="OPEN_PIPELINE"){je("CONTACT_EXECUTION");return}if(K.key==="VIEW_RESULT"){je("CONTACT_EXECUTION"),typeof window<"u"&&window.setTimeout(()=>{(document.getElementById("stage2-modal-step2-input")??document.getElementById("stage2-step2-input"))?.scrollIntoView({behavior:"smooth",block:"start"})},20);return}if(K.key==="REQUEST_RESULT"){Xe({type:"MESSAGE_SENT",at:Q,by:w.header.assigneeName,summary:`${P.label}  `}),qe(`Stage2  : ${P.label}`),ke.success(`${P.label}   .`);return}if(K.key==="MANUAL_EXCEPTION"){Hi(!0),je("CONTACT_EXECUTION"),qe(`Stage2  () : ${P.label}`),ke("STEP2      .");return}Xe({type:"STAGE2_RESULTS_RECORDED",at:Q,by:w.header.assigneeName,summary:`${P.label}  `}),qe(`Stage2  : ${P.label}`),ke.success(`${P.label}   .`)},[qe,w.header.assigneeName]),Iu=h.useMemo(()=>Yz(Sr,As),[As,Sr]),Qi=kn==="HOSPITAL"?4:3,Qa=y?Qi-y.missing.length:q0(tt.tests),Ro=Math.round(Math.max(0,Qa)/Qi*100),_i=i_(v?.predictedLabel)??Je.recommendedLabel,vc=AAe(v?.mciBand),Mu=_i??"MCI",Ts=t?.risk===""?"":t?.risk===""?"":"",fn=_i??V,Zi=vc,Ji=Yr?s_(fn):!1,eo=Math.max(0,Math.floor((Date.now()-new Date(Vs).getTime())/(1e3*60*60*24))),Nc=Ywe(tt.tests,Sr,As),Sc=[...Iu.mmse&&!(typeof tt.tests.mmse=="number"&&Number.isFinite(tt.tests.mmse))?["MMSE  "]:[],...Iu.cdrOrGds&&!(typeof tt.tests.cdr=="number"&&Number.isFinite(tt.tests.cdr))?["CDR/GDS  "]:[],...Iu.neuroCognitive&&!tt.tests.neuroCognitiveType?["  "]:[],...Iu.specialist&&!tt.tests.specialist?["  "]:[],..._,Kt.trim().length>0?null:"  1 "].filter(Boolean),Os=Math.max(Nc,_.length),Xh=+(w.linkageStatus!=="BOOKING_DONE")+ +(tt.status!=="COMPLETED"),$n=!!yd,Na=Kr.jobStatus==="DONE",xn=Math.max(0,Math.round((Qi+1-Sc.length)/(Qi+1)*100)),Ci=h.useMemo(()=>{const P=w.linkageStatus!=="NOT_CREATED",K=!!(Rn.receivedAt||y?.updatedAt||tt.status!=="NOT_STARTED");return Xwe(Os,P,K)},[w.linkageStatus,tt.status,y?.updatedAt,Rn.receivedAt,Os]),Lx=Kr.jobStatus==="DONE"&&Os===0?"READY":Ci,Qs=Na?_i??Je.recommendedLabel:void 0,Lu=!!Qs&&V!==Qs,up=Lu&&De.trim().length===0,Ti=Na&&Sc.length===0&&!up,Ed=tt.status==="NOT_STARTED"?"  ":tt.status==="IN_PROGRESS"?"  ":Ti?" ":"  ",to=V==="MCI"?xO(t):void 0,Oi=Na?jy(V,to):void 0,jd=_i??V,wd=vc??(jd==="MCI"?to:void 0),hl=Na?v?.probs??jy(jd,wd):void 0,zr=rr?hn[rr]??{}:{},$u=h.useMemo(()=>rr?yi[rr].filter(P=>!!zr[P]).map(P=>({key:P,message:zr[P]})):[],[zr,yi,rr]);h.useEffect(()=>{if(Je.status!=="RUNNING"||Kr.jobStatus!=="RUNNING"&&Kr.jobStatus!=="PENDING"||!(Kr.progress>=95))return;const K=ut(),Q=Je.recommendedLabel??n_(tt.tests);let ce=!1;if(ht(Ke=>Ke.status!=="RUNNING"?Ke:(ce=!0,{...Ke,status:"DONE",updatedAt:K,completedAt:K,progress:100,etaSeconds:0,recommendedLabel:Q})),!ce)return;let ae=!0;if(t?.id&&(ae=XF(t.id,w.header.assigneeName,{labelOverride:Q})),!ae){ht(Ke=>({...Ke,status:"FAILED",updatedAt:K,completedAt:K,failureReason:"STAGE2_GATE_FAILED"})),Xe({type:"INFERENCE_FAILED",stage:2,at:K,by:w.header.assigneeName,summary:"Stage2   ",reason:" /  "}),qe("Stage2   :   ");return}Xe({type:"INFERENCE_COMPLETED",stage:2,at:K,by:w.header.assigneeName,summary:`Stage2      ${Q}`,progress:100,etaSeconds:0}),Xe({type:"STAGE2_RESULTS_RECORDED",at:K,by:w.header.assigneeName,summary:`  :  ${Q} ( )`}),qe(`Stage2   :  ${Q}`)},[qe,t?.id,w.header.assigneeName,XF,tt.tests,Kr.jobStatus,Kr.progress,Je.recommendedLabel,Je.status]),h.useEffect(()=>{if(bt.status!=="RUNNING"||Sn.jobStatus!=="RUNNING"&&Sn.jobStatus!=="PENDING"||!(Sn.progress>=95))return;const K=ut();let Q=!1;if(fr(ae=>ae.status!=="RUNNING"?ae:(Q=!0,{...ae,status:"DONE",updatedAt:K,completedAt:K,progress:100,etaSeconds:0})),!Q)return;let ce=!0;if(t?.id&&(ce=ZF(t.id,w.header.assigneeName)),!ce){fr(ae=>({...ae,status:"FAILED",updatedAt:K,completedAt:K,failureReason:"STAGE3_GATE_FAILED"})),Xe({type:"INFERENCE_FAILED",stage:3,at:K,by:w.header.assigneeName,summary:"Stage3   ",reason:"Stage2  /   "}),qe("Stage3   :   ");return}Xe({type:"INFERENCE_COMPLETED",stage:3,at:K,by:w.header.assigneeName,summary:"Stage3   ",progress:100,etaSeconds:0}),qe("Stage3   ")},[qe,t?.id,w.header.assigneeName,ZF,Sn.jobStatus,Sn.progress,bt.status]);const Ec=h.useCallback(()=>{if(typeof window>"u")return;(document.getElementById("stage2-modal-step2-input")??document.getElementById("stage2-step2-input"))?.scrollIntoView({behavior:"smooth",block:"start"})},[]),jc=h.useCallback(()=>{je("CONTACT_EXECUTION"),mn(!0),!(typeof window>"u")&&window.setTimeout(()=>{document.getElementById("stage3-step2-input")?.scrollIntoView({behavior:"smooth",block:"start"}),Hf("step2PerformedAt")},30)},[Hf]),Fu=h.useCallback(()=>cl?!1:$!=="RESPONSE_HANDLING"||!fa?!0:window.confirm("     . ?"),[$,cl,fa]),gl=h.useCallback(P=>cl||$==="RESPONSE_HANDLING"&&P!=="RESPONSE_HANDLING"&&!Fu()?!1:(z(P),P==="FOLLOW_UP"&&Cs(!0),!0),[$,Fu,cl]),xl=h.useCallback(()=>{Fu()&&z(null)},[Fu]),ro=h.useCallback(()=>{je(null)},[]),wc=h.useCallback(({actor:P,summary:K,detailMessage:Q,moveToHuman:ce=!1})=>{if(Hr.status!=="QUEUED"&&Hr.status!=="RUNNING")return;const ae=ut(),Ke=uc.current+1;uc.current=Ke,Hr.idempotencyKey&&zf.current.delete(Hr.idempotencyKey),j7.cancelJob(Hr.jobId),dc(Te=>({...Te,status:"CANCELED",finishedAt:ae,summary:K,lastError:Q})),ce&&L(Te=>{const st={...Te.contactExecution,status:"HANDOFF_TO_HUMAN"};return{...Te,contactExecution:st,contactFlowSteps:si(st,Te.preTriageResult,Te.linkageStatus,s)}}),Xe({type:"AGENT_JOB_CANCELED",at:ae,actor:P,caseId:w.header.caseId,attemptNo:Hr.attemptNo,idempotencyKey:Hr.idempotencyKey??`${w.header.caseId}:0:SMS:${Ai}`,summary:K,detail:Q,by:P}),qe(`Agent   : ${K}${Q?` (${Q})`:""}`)},[Hr.attemptNo,Hr.idempotencyKey,Hr.status,Ai,qe,w.header.caseId]),Zs=h.useCallback(({trigger:P,runAfterMs:K=250,force:Q=!1})=>{if(ls!=="AI_FIRST"||w.contactExecutor!=="AGENT_SEND_ONLY"||oa!=="PASS"||!Q&&!["NOT_STARTED","RETRY_NEEDED"].includes(w.contactExecution.status)||!Q&&["QUEUED","RUNNING"].includes(Hr.status))return!1;const ce=w.contactExecution.retryCount+1;if(ce>Jr)return qe(`Agent   :   ${Jr} .`),!1;if(!Q&&w.contactExecution.status==="RETRY_NEEDED"&&w.contactExecution.lastSentAt&&Date.now()-new Date(w.contactExecution.lastSentAt).getTime()<Lr*60*60*1e3)return!1;const ae=UAe(w.header.caseId,ce,"SMS",Ai);if(zf.current.has(ae))return!1;const Ke=j7.queueSms({caseId:w.header.caseId,idempotencyKey:ae}),Te=Ke.queuedAt,st=`${BAe(P)}    `;dc({status:"QUEUED",attemptNo:ce,jobId:Ke.jobId,idempotencyKey:ae,queuedAt:Te,startedAt:void 0,finishedAt:void 0,nextRetryAt:K>5e3?new Date(Date.now()+K).toISOString():void 0,channelResult:void 0,lastError:void 0,summary:st}),zf.current.add(ae),Xe({type:"AGENT_JOB_QUEUED",at:Te,actor:"system",caseId:w.header.caseId,attemptNo:ce,idempotencyKey:ae,summary:st,detail:`trigger=${P}`,by:"system"}),qe(`Agent   : attempt ${ce} (${ae})`);const zt=uc.current+1;return uc.current=zt,window.setTimeout(()=>{if(uc.current!==zt)return;const Pe=ut();dc(Be=>Be.idempotencyKey!==ae||Be.status!=="QUEUED"?Be:{...Be,status:"RUNNING",startedAt:Pe,summary:"Agent    "}),Xe({type:"AGENT_JOB_STARTED",at:Pe,actor:"agent",caseId:w.header.caseId,attemptNo:ce,idempotencyKey:ae,summary:"Agent    ",detail:`attempt ${ce}`,by:"agent"}),qe(`Agent   : attempt ${ce}`),window.setTimeout(()=>{if(uc.current!==zt)return;const Be=ut(),At=GAe({caseRecord:t,gates:w.policyGates,attemptNo:ce});if(At.success){dc(yr=>({...yr,status:"SUCCEEDED",attemptNo:ce,idempotencyKey:ae,finishedAt:Be,channelResult:At.channelResult,lastError:void 0,nextRetryAt:void 0,summary:"Agent    "})),L(yr=>{const ds={...yr.contactExecution,status:"SENT",lastSentAt:Be,retryCount:Math.max(yr.contactExecution.retryCount,ce)};return{...yr,contactExecution:ds,contactFlowSteps:si(ds,yr.preTriageResult,yr.linkageStatus,s)}}),Mt(gt(48)),Xe({type:"AGENT_SMS_SENT",at:Be,actor:"agent",caseId:w.header.caseId,attemptNo:ce,idempotencyKey:ae,channelResult:At.channelResult,summary:"Agent    ",detail:NO[At.channelResult],by:"agent"}),Xe({type:"AGENT_JOB_SUCCEEDED",at:Be,actor:"agent",caseId:w.header.caseId,attemptNo:ce,idempotencyKey:ae,summary:"Agent   ",detail:NO[At.channelResult],by:"agent"}),Tx({at:Be,result:"SENT_SUCCESS",summary:"Agent    ",recommendationId:Tn??void 0,recommendationTitle:ba.find(yr=>yr.id===Tn)?.title,actor:"agent"}),qe(`Agent   : attempt ${ce} (${ae})`);return}const Ur=new Date(Date.now()+Lr*60*60*1e3).toISOString();dc(yr=>({...yr,status:"FAILED",attemptNo:ce,idempotencyKey:ae,finishedAt:Be,channelResult:At.channelResult,lastError:At.errorMessage,nextRetryAt:Ur,summary:"Agent    "})),L(yr=>{const ds={...yr.contactExecution,status:"RETRY_NEEDED",lastSentAt:Be,retryCount:Math.max(yr.contactExecution.retryCount,ce)};return{...yr,contactExecution:ds,contactFlowSteps:si(ds,yr.preTriageResult,yr.linkageStatus,s)}}),Mt(Ur),Xe({type:"AGENT_JOB_FAILED",at:Be,actor:"agent",caseId:w.header.caseId,attemptNo:ce,idempotencyKey:ae,summary:"Agent   ",detail:At.errorMessage,errorCode:At.errorCode,by:"agent"}),Tx({at:Be,result:"SENT_FAILED",summary:At.errorMessage??"Agent    ",recommendationId:Tn??void 0,recommendationTitle:ba.find(yr=>yr.id===Tn)?.title,actor:"agent"}),qe(`Agent   : ${At.errorMessage??At.errorCode??"unknown"}`)},1e3)},K),!0},[oa,Hr.status,Jr,Lr,Ai,qe,t,w.contactExecution.lastSentAt,w.contactExecution.retryCount,w.contactExecution.status,w.contactExecutor,w.header.caseId,w.policyGates,ls,ba,Tn]),Uu=h.useCallback(()=>{if(!Zs({trigger:"MANUAL_RETRY_NOW",runAfterMs:200,force:!0})){ke.error("    .");return}ke.success("Agent   .")},[Zs]),Bu=h.useCallback(()=>{if(!Zs({trigger:"MANUAL_RETRY_SCHEDULE",runAfterMs:Lr*60*60*1e3,force:!0})){ke.error("    .");return}ke.success(` ${Lr}  .`)},[Lr,Zs]);h.useEffect(()=>{if(!$a||oa!=="PASS"||w.contactExecution.status!=="NOT_STARTED"&&w.contactExecution.status!=="RETRY_NEEDED")return;const P=w.header.caseId;Rh.current.has(P)||(Rh.current.add(P),Zs({trigger:"AUTO_ON_ENTER",runAfterMs:250}))},[oa,w.contactExecution.status,w.header.caseId,$a,Zs]),h.useEffect(()=>{!kh.current&&$a&&oa==="PASS"&&Zs({trigger:"AUTO_ON_STRATEGY",runAfterMs:250}),kh.current=$a},[oa,$a,Zs]),h.useEffect(()=>{!$a||oa!=="PASS"||w.contactExecution.status!=="RETRY_NEEDED"||!w.contactExecution.lastSentAt||Date.now()-new Date(w.contactExecution.lastSentAt).getTime()<Lr*60*60*1e3||Zs({trigger:"AUTO_ON_RETRY_DUE",runAfterMs:200})},[oa,Lr,w.contactExecution.lastSentAt,w.contactExecution.status,$a,St,Zs]),h.useEffect(()=>{$a||Hr.status!=="QUEUED"&&Hr.status!=="RUNNING"||wc({actor:"system",summary:"     .",moveToHuman:!0})},[Hr.status,wc,$a]);const Rs=h.useCallback(P=>{const K=Lp(ia,P);if(K){ke.error(K);return}if(d){je(P);return}gl(P)},[d,gl,ia]),qn=h.useCallback(P=>{if(!rr)return;const K=Yi.indexOf(rr),Q=Yi[K+P];if(!Q)return;const ce=Lp(ia,Q);if(ce){ke.error(ce);return}je(Q)},[ia,rr,Yi]),Js=h.useCallback(P=>{if(!$)return;const K=xc.indexOf($),Q=xc[K+P];if(!Q)return;const ce=Lp(ia,Q);if(ce){ke.error(ce);return}gl(Q)},[$,gl,ia,xc]),Gu=h.useCallback(()=>{if(!rr||!w.stage3)return;const P=ut();if(rr==="PRECHECK"){if(u){const ae=la,Ke=_p(tt.tests,Sr,As,{strategyMemo:Se.strategyMemo,consentConfirmed:Se.consentConfirmed});if(ae.length>0&&(Ke.step1Plan=`   : ${ae.map(st=>st.label).join(", ")}`),Gn(Ke)){ae.length>0&&c_(ae.map(st=>st.id),xi),ke.error("STEP1  /    .");return}L(st=>{if(!st.stage3)return st;const zt=st.header.effectiveStrategy??st.preTriageResult?.strategy??"HUMAN_FIRST";return{...st,preTriageResult:st.preTriageResult??{strategy:zt,triggers:["STAGE2_PLAN_BASELINE_CONFIRMED"],policyNote:"Stage2      .",confidence:"RULE"},policyGates:st.policyGates.map(Pe=>Pe.key==="CONSENT_OK"||Pe.key==="PHONE_VERIFIED"||Pe.key==="CONTACTABLE_TIME_OK"?{...Pe,status:"PASS",failReason:void 0}:Pe),stage3:{...st.stage3,riskReviewedAt:P}}});const Te=` ${Sr==="HOSPITAL_REFERRAL"?" ":"  "}   ${tr}   ${mt(gr)}`;Xe({type:"STAGE2_PLAN_CONFIRMED",at:P,by:w.header.assigneeName,summary:Te}),qe(`STAGE2_PLAN_CONFIRMED: ${Te}`),gi({}),ke.success("STEP1   ."),je("CONTACT_EXECUTION");return}const K={};if(Se.diffDecisionSet||(K.step1DiffDecision=u?"Stage2     .":"    ."),Se.consentConfirmed||(K.step1Consent="   ."),Se.strategyMemo.trim().length<20&&(K.step1StrategyMemo="  20   ."),cc("PRECHECK",K)){ke.error("STEP1     .");return}na(ae=>({...ae,PRECHECK:{}})),L(ae=>{if(!ae.stage3)return ae;const Ke=[...ae.stage3.transitionRisk.series],Te=Ke[Ke.length-1],st={t:P,risk2y:Te?.risk2y??ae.stage3.transitionRisk.risk2y_now,ciLow:Te?.ciLow,ciHigh:Te?.ciHigh,source:"manual",event:"REEVAL"},zt=[...Ke.slice(-11),st],Pe=ae.header.effectiveStrategy??ae.preTriageResult?.strategy??"HUMAN_FIRST";return{...ae,preTriageResult:ae.preTriageResult??{strategy:Pe,triggers:["STAGE3_REVIEW_BASELINE_CONFIRMED"],policyNote:"Stage3      .",confidence:"RULE"},policyGates:ae.policyGates.map(Be=>Be.key==="CONSENT_OK"||Be.key==="PHONE_VERIFIED"||Be.key==="CONTACTABLE_TIME_OK"?{...Be,status:"PASS",failReason:void 0}:Be),stage3:{...ae.stage3,riskReviewedAt:P,transitionRisk:{...ae.stage3.transitionRisk,updatedAt:P,series:zt}}}});const Q=[Se.diffNeeded?u?"Stage2  ":" ":u?"Stage2  ":" ",Se.caregiverNeeded?"  ":null,Se.consentConfirmed?"  ":null,Se.diffDecisionReason.trim()?`:${Se.diffDecisionReason.trim()}`:null].filter(Boolean).join(", "),ce=`      ${Se.priority}${Q?`   ${Q}`:""}  : ${Se.strategyMemo.slice(0,80)}`;Xe({type:"RISK_REVIEWED",at:P,by:w.header.assigneeName,summary:ce}),qe(`${u?"Stage2   ":"Stage3  "} : ${Q||" "}  ${Se.strategyMemo}`),Ht({at:P,memo:Se.strategyMemo,nextAction:u?"UPDATE_PLAN":"RECOMMEND_DIFF"}),ke.success(u?"STEP1   .":"STEP1  ."),u?je("CONTACT_EXECUTION"):qn(1);return}if(rr==="CONTACT_EXECUTION"){if(u){const Q=_p(tt.tests,Sr,As);if(_s&&sa.trim().length<5&&(Q.manualEditReason="   5  ."),Gn(Q)){ke.error("STEP2 /    .");return}if(!_u())return;const ae=!Xi;if(L(Te=>Te.stage3?{...Te,stage3:{...Te.stage3,riskReviewedAt:Te.stage3.riskReviewedAt??P,diffPathStatus:"SCHEDULED"}}:Te),ae){const Te=`STEP2        ${Sr==="HOSPITAL_REFERRAL"?" ":"  "}`;Xe({type:"STAGE2_PLAN_CONFIRMED",at:P,by:w.header.assigneeName,summary:Te}),qe(`STAGE2_PLAN_CONFIRMED(AUTO): ${Te}`)}const Ke=`    (${q0(tt.tests,kn)}/${Qi})`;Xe({type:"STAGE2_RESULTS_RECORDED",at:P,by:w.header.assigneeName,summary:Ke}),qe(`STAGE2_RESULTS_RECORDED: ${Ke}`),gi({}),ke.success("STEP2    ."),je("RESPONSE_HANDLING");return}if(Pu>0){ke.error("     .");return}const K={};if(!ne.trim()&&!nr.consultStarted&&(K.step2CallRecord="  (   ) ."),Re.preferredHospital.trim()||(K.step2Hospital="/   ."),Se.diffNeeded&&!Re.testBiomarker&&!Re.testBrainImaging&&!Re.testOther&&(K.step2TestSelection="   1  ."),Re.bookingAt||(K.step2BookingAt="   ."),nr.bookingConfirmed||(K.step2BookingAt="     ."),Se.diffNeeded&&(Re.resultPerformedAt||(K.step2PerformedAt="    ."),Re.biomarkerResultText?.trim()||(K.step2BiomarkerResult="   ."),Re.imagingResultText?.trim()||(K.step2ImagingResult="   ."),Re.resultSummary.trim()||(K.step2ResultSummary="   .")),Object.keys(K).length>0){Se.diffNeeded&&(K.step2PerformedAt||K.step2BiomarkerResult||K.step2ImagingResult||K.step2ResultSummary)&&mn(!0),cc("CONTACT_EXECUTION",K),ke.error("STEP2     .");return}if(na(Q=>({...Q,CONTACT_EXECUTION:{}})),!wi){ke.error(u?"       STEP3   .":"    STEP3( /)   .");return}qe(`${u?"":""}   : ${w.stage3.diffPathStatus}`),ke.success(u?"STEP2    .":"STEP2  ."),qn(1);return}if(rr==="RESPONSE_HANDLING"){if(u){const Q=_p(tt.tests,Sr,As,{rationale:Kt,recommendedLabel:Qs,selectedLabel:V,overrideReason:De});if(Gn(Q)){ke.error("STEP3     .");return}if(!Ti){ke.error("   .");return}L(ae=>ae.stage3?{...ae,stage3:{...ae.stage3,reevalStatus:"SCHEDULED"}}:ae),Cu();const ce=`  ${V}${V==="MCI"?`(${to??"-"})`:""}`;Xe({type:"STAGE2_CLASS_CONFIRMED",at:P,by:w.header.assigneeName,summary:ce}),qe(`STAGE2_CLASS_CONFIRMED: ${ce}`),gi({}),ke.success("STEP3   ."),je("FOLLOW_UP");return}if(!wi){ke.error(u?"STEP2      .":" /      .");return}if(!ra.memo.trim()){ke.error(u?"(MMSE/CDR)      .":"      .");return}const K=u?`  : ${ra.memo.slice(0,120)}`:`  : ${ra.memo.slice(0,120)}   : ${zb[ra.nextAction]}`;Ys({summary:K,nextAction:u?"UPDATE_PLAN":ra.nextAction,silentToast:!0}),ke.success(u?"STEP3   .":"STEP3    ."),qn(1);return}if(u){const K=_p(tt.tests,Sr,As,{requireNextStep:!0,hasNextStep:!!tt.nextStep});if(Gn(K)){ke.error("STEP4    .");return}L(ce=>ce.stage3?{...ce,stage3:{...ce.stage3,planUpdatedAt:P,headerMeta:{...ce.stage3.headerMeta,planStatus:"ACTIVE",opsStatus:tt.nextStep==="FOLLOWUP_2Y"?"TRACKING":"LINKAGE_PENDING",nextTrackingContactAt:Mn.nextTrackingAt??ce.stage3.headerMeta.nextTrackingContactAt}}}:ce);const Q=tt.nextStep==="FOLLOWUP_2Y"?" (2  )":tt.nextStep==="STAGE3"?"MCI  Stage3 ":"  ";Xe({type:"STAGE2_NEXT_STEP_SET",at:P,by:w.header.assigneeName,summary:Q}),qe(`STAGE2_NEXT_STEP_SET: ${Q}`),gi({}),ke.success("STEP4    ."),ro();return}if(!To){ke.error("   1     .");return}if(!Mn.nextTrackingAt){ke.error("      .");return}L(K=>K.stage3?{...K,stage3:{...K.stage3,planUpdatedAt:P,headerMeta:{...K.stage3.headerMeta,planStatus:"ACTIVE",opsStatus:"TRACKING",nextTrackingContactAt:Mn.nextTrackingAt}}}:K),Xe({type:"PLAN_UPDATED",at:P,by:w.header.assigneeName,summary:"    ."}),Xe({type:"NEXT_TRACKING_SET",at:P,by:w.header.assigneeName,nextAt:Mn.nextTrackingAt,summary:` D-${Mn.reminderDaysBefore} / ${Mn.reminderTime}   ${Mn.retryCount}`}),qe(`Stage3  () :   ${mt(Mn.nextTrackingAt)}   D-${Mn.reminderDaysBefore}`),ke.success("STEP4  () ."),ro()},[ro,w.header.assigneeName,w.stage3,Ys,qn,wi,To,Pu,Se.caregiverNeeded,Se.consentConfirmed,Se.diffDecisionSet,Se.diffNeeded,Se.priority,Se.resultLinkedChecked,Se.sensitiveHistory,Se.strategyMemo,Se.diffDecisionReason,ra.memo,ra.nextAction,rr,Mn.nextTrackingAt,Mn.reminderDaysBefore,Mn.reminderTime,Mn.retryCount,Re.bookingAt,Re.preferredHospital,Re.testBiomarker,Re.testBrainImaging,Re.testOther,Re.resultPerformedAt,Re.resultSummary,Re.biomarkerResultText,Re.imagingResultText,nr.bookingConfirmed,nr.consultStarted,Ti,V,De,tt,to,tr,_s,sa,Qs,As,Sr,Os,gr,Xi,Gn,cc,Cu,u,_u,ne]),$x=h.useCallback(async()=>{if(!$)return;const P=ut();if($==="PRECHECK"){if(w.policyGates.filter(ce=>ce.key!=="GUARDIAN_OPTIONAL"&&ce.status!=="PASS").length>0){ke.error("        .");return}Xe({type:"MESSAGE_SENT",at:P,summary:"STAGE1_GATE_DONE     ",by:w.header.assigneeName}),qe("STAGE1_GATE_DONE:    "),ke.success("STEP1  ."),Js(1);return}if($==="CONTACT_EXECUTION"){if(w.contactExecution.status==="NOT_STARTED"){ke.error("       .");return}Xe({type:"MESSAGE_SENT",at:P,summary:"STAGE1_CONTACT_ATTEMPT    ",by:w.header.assigneeName}),qe("STAGE1_CONTACT_ATTEMPT:   "),ke.success("STEP2  ."),Js(1);return}if($==="RESPONSE_HANDLING"){if(!!!(w.contactExecution.lastOutcomeCode||w.contactExecution.lastResponseAt)){ke.error("       .");return}Xe({type:"MESSAGE_SENT",at:P,summary:`STAGE1_RESPONSE_RECORDED  ${w.contactExecution.lastOutcomeCode?Fl[w.contactExecution.lastOutcomeCode].label:" "} `,by:w.header.assigneeName}),qe("STAGE1_RESPONSE_RECORDED:    "),ke.success("STEP3  ."),Js(1);return}tp()&&(Xe({type:"MESSAGE_SENT",at:P,summary:"STAGE1_DECISION_DONE    ",by:w.header.assigneeName}),qe("STAGE1_DECISION_DONE:   "),ke.success("STEP4  ."),xl())},[$,qe,xl,w.contactExecution.lastOutcomeCode,w.contactExecution.lastResponseAt,w.contactExecution.status,w.header.assigneeName,w.policyGates,tp,Js]),ko=h.useCallback(P=>{const K=n_e[P];Rs(K)},[Rs]),bl=h.useCallback(async P=>{if(!(await wx(P)).ok){ke.error("   .");return}const Q=Su.find(ce=>ce.idempotencyKey===P);Q&&(Xe({type:"CALENDAR_SYNC",at:ut(),status:"SUCCESS",eventType:Q.eventType,title:Q.title,scheduledAt:Q.scheduledAt,idempotencyKey:Q.idempotencyKey,by:w.header.assigneeName}),qe(`   : ${Q.title}`)),ke.success("  .")},[qe,Su,w.header.assigneeName,wx]);if(h.useEffect(()=>{const P=s==="stage2"?Sc.length:Wh,K=s==="stage2"?Math.max(0,4-Qa):Ix,Q=s==="stage3"&&u?Math.max(0,Math.min(100,Math.round(w.header.sla.level==="OVERDUE"?76:w.header.sla.level==="DUE_SOON"?58:32+Math.max(0,P*4+K*3)))):void 0,ce=Q==null?"MID":Q>=70?"HIGH":Q>=45?"MID":"LOW",ae=Q==null?"FLAT":Q>=70?"UP":Q>=45?"VOLATILE":"DOWN";r?.({contactMode:fl,effectiveMode:ls,slaLevel:w.header.sla.level,qualityScore:w.header.dataQuality.score,missingCount:P,warningCount:K,lastUpdatedAt:w.timeline[0]?.at,nextActionLabel:s==="stage2"?Ed:void 0,stage2Meta:s==="stage2"||u?{diagnosisStatus:tt.status,completionPct:Ro,requiredDataPct:xn,completedCount:Qa,classificationLabel:Yr?fn:"",modelAvailable:Yr,missingEvidence:_,mciStage:Yr&&fn==="MCI"?wd:void 0,stage3EntryNeeded:Ji,enteredAt:gn,targetAt:Vs,delayDays:eo,nextActionLabel:Ed}:void 0,stage3Meta:s==="stage3"&&w.stage3?{opsStatus:w.stage3.headerMeta.opsStatus,stage3Type:g?.source.profile?.stage3Type,originStage2Result:g?.source.profile?.originStage2Result,risk2yNowPct:u?Q??0:ya?g?.display.riskBadge.kind==="ready"?g.display.riskBadge.riskPct:Ko(w.stage3.transitionRisk.risk2y_now):void 0,risk2yLabel:u?ce:ya?eh(w.stage3.transitionRisk.risk2y_now):void 0,modelAvailable:u?Yr:ya,missingEvidence:u?_:A,trend:u?ae:w.stage3.transitionRisk.trend,modelVersion:u?"stage2-ops-v1.0":w.stage3.transitionRisk.modelVersion,riskUpdatedAt:w.stage3.transitionRisk.updatedAt,nextReevalAt:w.stage3.headerMeta.nextReevalAt,nextTrackingContactAt:w.stage3.headerMeta.nextTrackingContactAt,nextProgramAt:w.stage3.headerMeta.nextProgramAt,diffPathStatus:w.stage3.diffPathStatus,planStatus:w.stage3.headerMeta.planStatus,trackingCycleDays:w.stage3.headerMeta.trackingCycleDays,churnRisk:u?w.header.sla.level==="OVERDUE"?"HIGH":w.header.sla.level==="DUE_SOON"?"MID":"LOW":w.stage3.headerMeta.churnRisk}:void 0})},[w.header.sla.level,w.header.dataQuality.score,w.stage3,w.timeline,ls,Wh,s,r,Qa,Ro,fn,wd,tt.status,gn,Sc.length,Ed,Ji,Vs,eo,Yr,g,ya,_,A,fl,Ix,u]),h.useEffect(()=>{if(n){if(s!=="stage3"){n(null);return}n(()=>Gh())}},[s,n,Gh]),h.useEffect(()=>{zn&&Ue({owner:zn.execution?.owner??w.header.assigneeName,dueDate:zn.execution?.dueDate,institution:zn.execution?.institution,method:zn.execution?.method??"",status:zn.execution?.status??"PLANNED",note:zn.execution?.note??""})},[zn,w.header.assigneeName]),l){const P=[{key:"STEP 1",title:"  ",status:Nn?"PENDING":w.reservationInfo?.scheduledAt?"DONE":w.linkageStatus!=="NOT_CREATED"?"IN_PROGRESS":"PENDING",reason:Nn?"Step1  ":w.reservationInfo?.scheduledAt?` ${mt(w.reservationInfo.scheduledAt)}`:"/   "},{key:"STEP 2",title:"  ",status:Nn?"PENDING":Qa>=Qi?"DONE":Qa>0?"IN_PROGRESS":"PENDING",reason:Nn?"Step1    ":` ${Qi}  ${Qa} `},{key:"STEP 3",title:" ",status:Nn?"BLOCKED":$n?"DONE":Ti?"IN_PROGRESS":"BLOCKED",reason:Nn?"Step2    ":$n?"  ":Ti?" ":" "},{key:"STEP 4",title:"  ",status:Nn?"PENDING":tt.nextStep?"DONE":$n?"IN_PROGRESS":"PENDING",reason:Nn?"Step3   ":tt.nextStep?` ${tt.nextStep}`:"   "}],K=[{label:" ",done:!!tt.tests.specialist,sub:tt.tests.specialist?"  ":"  "},{label:"MMSE",done:kn==="CENTER"?!0:typeof tt.tests.mmse=="number",sub:kn==="CENTER"&&typeof tt.tests.mmse!="number"?"   :  ":typeof tt.tests.mmse=="number"?` ${tt.tests.mmse}`:""},{label:"CDR or GDS",done:typeof tt.tests.cdr=="number",sub:typeof tt.tests.cdr=="number"?` ${tt.tests.cdr}`:""},{label:"",done:!!tt.tests.neuroCognitiveType,sub:tt.tests.neuroCognitiveType??" "}];return a.jsxs("div",{className:"space-y-5",children:[a.jsxs("div",{className:"grid grid-cols-1 gap-4 xl:grid-cols-12",children:[a.jsxs("aside",{className:"space-y-4 xl:col-span-3",children:[a.jsxs("section",{className:"rounded-xl border border-slate-200 bg-white p-4 shadow-sm",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"Stage1  "}),a.jsxs("div",{className:"mt-3 space-y-2 text-xs",children:[a.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 px-3 py-2",children:[a.jsx("p",{className:"text-[11px] text-slate-500",children:" "}),a.jsx("p",{className:"mt-1 font-semibold text-slate-900",children:w.riskEvidence.topFactors[0]?.title??"   "})]}),a.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 px-3 py-2",children:[a.jsx("p",{className:"text-[11px] text-slate-500",children:" "}),a.jsxs("p",{className:"mt-1 font-semibold text-slate-900",children:[hc,""]})]}),a.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 px-3 py-2",children:[a.jsx("p",{className:"text-[11px] text-slate-500",children:" "}),a.jsx("p",{className:"mt-1 font-semibold text-slate-900",children:fn===""?"":""})]})]})]}),a.jsxs("section",{className:"rounded-xl border border-slate-200 bg-white p-4 shadow-sm",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"Stage2   Scorecard"}),a.jsxs("div",{className:"mt-3 space-y-2 text-xs",children:[K.map(Q=>a.jsxs("article",{className:"rounded-md border border-slate-200 bg-slate-50 px-3 py-2",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("p",{className:"font-semibold text-slate-900",children:Q.label}),a.jsx("span",{className:ue("rounded-md border px-2 py-0.5 text-[10px] font-semibold",Q.done?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-amber-200 bg-amber-50 text-amber-700"),children:Q.done?"DONE":"MISSING"})]}),a.jsx("p",{className:"mt-1 text-[11px] text-slate-600",children:Q.sub})]},Q.label)),a.jsxs("p",{className:"rounded-md border border-slate-200 bg-white px-2 py-1 text-[11px] text-slate-700",children:[" ",Qa,"/",Qi," (",Ro,"%)"]})]})]}),a.jsxs("section",{className:"rounded-xl border border-slate-200 bg-white p-4 shadow-sm",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"Stage2   "}),Yr?a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"mt-3 text-xs text-slate-500",children:" "}),a.jsxs("p",{className:"mt-1 text-lg font-bold text-slate-900",children:[_i??"",_i==="MCI"&&vc?` (${vc})`:""]}),a.jsx("div",{className:"mt-3 space-y-2 text-xs",children:[{key:"NORMAL",label:"NORMAL",pct:Dc(hl?.NORMAL)??0,tone:"bg-emerald-500"},{key:"MCI",label:"MCI",pct:Dc(hl?.MCI)??0,tone:"bg-blue-500"},{key:"AD",label:"AD",pct:Dc(hl?.AD)??0,tone:"bg-rose-500"}].map(Q=>a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-[11px] font-semibold text-slate-700",children:Q.label}),a.jsxs("span",{className:"text-[11px] text-slate-600",children:[Q.pct,"%"]})]}),a.jsx("div",{className:"mt-1 h-2 rounded-full bg-slate-100",children:a.jsx("div",{className:ue("h-2 rounded-full",Q.tone),style:{width:`${Q.pct}%`}})})]},Q.key))}),a.jsxs("div",{className:"mt-3 rounded-md border border-slate-200 bg-slate-50 px-2 py-2 text-[11px] text-slate-700",children:[a.jsx("p",{children:"    "}),a.jsx("p",{children:"  ANN   "})]})]}):a.jsx("div",{className:"mt-3",children:a.jsx(sf,{stage:2,missing:_,onOpenStep:Ec})})]})]}),a.jsxs("section",{className:"space-y-4 xl:col-span-6",children:[a.jsxs("section",{className:"rounded-xl border border-slate-200 bg-white p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"Stage2 Step Workflow"}),a.jsxs("span",{className:"text-[11px] text-slate-500",children:[" ",P.filter(Q=>Q.status==="DONE").length,"/4"]})]}),a.jsx("div",{className:"mt-3 grid grid-cols-1 gap-2 md:grid-cols-2",children:P.map(Q=>a.jsxs("article",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("p",{className:"text-[11px] font-semibold text-slate-500",children:Q.key}),a.jsx("span",{className:ue("rounded-md border px-2 py-0.5 text-[10px] font-semibold",Q.status==="DONE"?"border-emerald-200 bg-emerald-50 text-emerald-700":Q.status==="IN_PROGRESS"?"border-blue-200 bg-blue-50 text-blue-700":Q.status==="BLOCKED"?"border-rose-200 bg-rose-50 text-rose-700":"border-slate-200 bg-white text-slate-600"),children:Q.status})]}),a.jsx("p",{className:"mt-1 text-sm font-bold text-slate-900",children:Q.title}),a.jsx("p",{className:"mt-1 text-[11px] text-slate-600",children:Q.reason})]},Q.key))})]}),a.jsxs("section",{id:"stage2-step2-input",className:"rounded-xl border border-slate-200 bg-white p-4 shadow-sm",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"STEP 2.   "}),a.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-2 md:grid-cols-2",children:[a.jsxs("label",{className:"text-[11px] text-slate-600",children:["MMSE ",a.jsx("input",{value:tt.tests.mmse??"",onChange:Q=>On(ce=>({...ce,tests:{...ce.tests,mmse:Q.target.value===""?void 0:Number(Q.target.value)}})),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-xs outline-none focus:border-blue-300"})]}),a.jsxs("label",{className:"text-[11px] text-slate-600",children:["CDR ",a.jsx("input",{value:tt.tests.cdr??"",onChange:Q=>On(ce=>({...ce,tests:{...ce.tests,cdr:Q.target.value===""?void 0:Number(Q.target.value)}})),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-xs outline-none focus:border-blue-300"})]}),a.jsxs("label",{className:"text-[11px] text-slate-600",children:["",a.jsxs("select",{value:tt.tests.neuroCognitiveType??"",onChange:Q=>On(ce=>({...ce,tests:{...ce.tests,neuroCognitiveType:Q.target.value||void 0}})),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-xs outline-none focus:border-blue-300",children:[a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"CERAD-K",children:"CERAD-K"}),a.jsx("option",{value:"SNSB-II",children:"SNSB-II"}),a.jsx("option",{value:"SNSB-C",children:"SNSB-C"}),a.jsx("option",{value:"LICA",children:"LICA"})]})]}),a.jsxs("label",{className:"text-[11px] text-slate-600",children:[" ",a.jsxs("select",{value:tt.tests.specialist?"DONE":"MISSING",onChange:Q=>On(ce=>({...ce,tests:{...ce.tests,specialist:Q.target.value==="DONE"}})),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-xs outline-none focus:border-blue-300",children:[a.jsx("option",{value:"MISSING",children:"MISSING"}),a.jsx("option",{value:"DONE",children:"DONE"})]})]})]}),a.jsxs("button",{onClick:_u,className:"mt-3 inline-flex items-center gap-1 rounded-md bg-[#163b6f] px-3 py-1.5 text-xs font-semibold text-white hover:bg-[#112f5a]",children:[a.jsx(li,{size:13}),"   "]})]}),a.jsxs("section",{className:"rounded-xl border border-slate-200 bg-white p-4 shadow-sm",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"STEP 3.  "}),a.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-2 md:grid-cols-2",children:[a.jsxs("label",{className:"text-[11px] text-slate-600",children:["  ",a.jsxs("select",{value:V,onChange:Q=>de(Q.target.value),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-xs outline-none focus:border-blue-300",children:[a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"MCI",children:"MCI"}),a.jsx("option",{value:"",children:""})]})]}),a.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 px-3 py-2 text-[11px] text-slate-700",children:[a.jsx("p",{className:"font-semibold",children:"MCI (ANN)"}),a.jsx("p",{className:"mt-1",children:V==="MCI"?to??" ":"-"})]})]}),Yr&&Oi?a.jsx("div",{className:"mt-2 space-y-2 text-xs",children:[{key:"NORMAL",label:"NORMAL",pct:Dc(Oi.NORMAL)??0,tone:"bg-emerald-500"},{key:"MCI",label:"MCI",pct:Dc(Oi.MCI)??0,tone:"bg-blue-500"},{key:"AD",label:"AD",pct:Dc(Oi.AD)??0,tone:"bg-rose-500"}].map(Q=>a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-[11px] font-semibold text-slate-700",children:Q.label}),a.jsxs("span",{className:"text-[11px] text-slate-600",children:[Q.pct,"%"]})]}),a.jsx("div",{className:"mt-1 h-2 rounded-full bg-slate-100",children:a.jsx("div",{className:ue("h-2 rounded-full",Q.tone),style:{width:`${Q.pct}%`}})})]},Q.key))}):a.jsx("div",{className:"mt-3",children:a.jsx(sf,{stage:2,missing:_,onOpenStep:Ec})}),a.jsxs("label",{className:"mt-3 block text-[11px] text-slate-600",children:["  1()",a.jsx("textarea",{value:Kt,onChange:Q=>qt(Q.target.value),className:"mt-1 h-20 w-full rounded-md border border-gray-200 px-2 py-1 text-xs outline-none focus:border-blue-300"})]}),a.jsxs("button",{onClick:Cu,disabled:!Ti,className:"mt-3 inline-flex items-center gap-1 rounded-md bg-[#163b6f] px-3 py-1.5 text-xs font-semibold text-white hover:bg-[#112f5a] disabled:opacity-50",children:[a.jsx(Yl,{size:13}),"  "]}),Ti?null:a.jsx("div",{className:"mt-2 rounded-md border border-amber-200 bg-amber-50 px-3 py-2 text-[11px] text-amber-800",children:Sc.map(Q=>a.jsxs("p",{children:["- ",Q]},Q))})]}),a.jsxs("section",{className:"rounded-xl border border-slate-200 bg-white p-4 shadow-sm",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"STEP 4.   "}),a.jsxs("p",{className:"mt-2 text-[11px] text-slate-600",children:["    .  : ",Yr?fn:"",Yr&&fn==="MCI"&&Zi?` (${Zi})`:""]}),a.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-2 md:grid-cols-3",children:[a.jsx("button",{onClick:()=>md("FOLLOWUP_2Y","  2    "),disabled:!$n||fn!=="",className:"rounded-md border border-slate-200 bg-slate-50 px-2 py-1.5 text-[11px] font-semibold text-slate-700 hover:bg-white disabled:opacity-50",children:"  2  "}),a.jsx("button",{onClick:()=>md("STAGE3","MCI/  Stage3  "),disabled:!$n||!s_(fn),className:"rounded-md border border-blue-200 bg-blue-50 px-2 py-1.5 text-[11px] font-semibold text-blue-700 hover:bg-blue-100 disabled:opacity-50",children:"Stage3 "}),a.jsx("button",{onClick:()=>md("DIFF_PATH","    "),disabled:!$n||fn!=="",className:"rounded-md border border-rose-200 bg-rose-50 px-2 py-1.5 text-[11px] font-semibold text-rose-700 hover:bg-rose-100 disabled:opacity-50",children:" "})]})]})]}),a.jsxs("aside",{className:"space-y-4 xl:col-span-3",children:[a.jsxs("section",{className:"rounded-xl border border-slate-200 bg-white p-4 shadow-sm",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"  "}),a.jsxs("div",{className:"mt-3 space-y-2",children:[a.jsxs("label",{className:"text-[11px] text-slate-600",children:[" ",a.jsxs("select",{value:tr,onChange:Q=>Nr(Q.target.value),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-xs outline-none focus:border-blue-300",children:[a.jsx("option",{value:" ",children:" "}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:" ",children:" "}),a.jsx("option",{value:" ",children:" "})]})]}),a.jsxs("label",{className:"text-[11px] text-slate-600",children:[" ",a.jsx("input",{type:"datetime-local",value:Fc(gr),onChange:Q=>qs(Uc(Q.target.value)||gr),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-xs outline-none focus:border-blue-300"})]}),a.jsxs("button",{onClick:QN,className:"inline-flex w-full items-center justify-center gap-1 rounded-md bg-[#163b6f] px-3 py-1.5 text-xs font-semibold text-white hover:bg-[#112f5a]",children:[a.jsx(dC,{size:13}),"  "]}),a.jsxs("button",{onClick:()=>{Xe({type:"CAL_EVENT_CREATED",at:ut(),scheduledAt:gr,summary:"Stage2    ",by:w.header.assigneeName}),qe(` : ${mt(gr)}`),ke.success("   .")},className:"inline-flex w-full items-center justify-center gap-1 rounded-md border border-slate-200 bg-slate-50 px-3 py-1.5 text-xs font-semibold text-slate-700 hover:bg-white",children:[a.jsx(oR,{size:13}),"  "]})]})]}),a.jsxs("section",{className:"rounded-xl border border-slate-200 bg-white p-4 shadow-sm",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"  "}),a.jsxs("div",{className:"mt-2 space-y-1 text-[11px] text-slate-600",children:[a.jsx("p",{children:"MMSE:  24     ."}),a.jsx("p",{children:"CDR: 0(), 0.5(MCI ), 1 ( )  ."})]})]}),a.jsxs("section",{className:"rounded-xl border border-slate-200 bg-white p-4 shadow-sm",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"ANN   "}),a.jsxs("div",{className:"mt-2 space-y-1 text-[11px] text-slate-600",children:[a.jsx("p",{children:"      ."}),a.jsx("p",{children:" 10%       ."}),a.jsx("p",{children:" /       ."})]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-[minmax(0,1.4fr)_minmax(0,1fr)]",children:[a.jsx(d_,{timeline:Vf,filter:M,onFilterChange:G,listClassName:"max-h-[360px] overflow-y-auto pr-1",mode:s,stage2OpsView:u,stage3Type:x}),a.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:" "}),a.jsx("div",{className:"mt-3 max-h-[360px] space-y-2 overflow-y-auto pr-1",children:H.length===0?a.jsx("p",{className:"rounded-md border border-slate-200 bg-slate-50 px-3 py-2 text-[11px] text-slate-500",children:"  ."}):H.map(Q=>a.jsxs("article",{className:"rounded-md border border-slate-200 bg-slate-50 px-3 py-2",children:[a.jsx("p",{className:"text-[11px] text-slate-500",children:Q.at}),a.jsx("p",{className:"text-xs font-semibold text-slate-800",children:Q.actor}),a.jsx("p",{className:"text-[11px] text-slate-700",children:Q.message})]},Q.id))})]})]})]})}return a.jsxs("div",{className:"space-y-5",children:[a.jsxs("div",{className:"grid grid-cols-1 gap-4 xl:grid-cols-12",children:[a.jsxs("section",{className:"space-y-4 xl:col-span-8",children:[a.jsx(P_e,{scoreSummary:w.scoreSummary,modelPriorityValue:hc,modelPriorityMeta:Ou,contactPriority:Ru,interventionLevel:w.interventionLevel,stage3Risk:JN,stage3DiffPathStatus:w.stage3?.diffPathStatus,stage3RiskReviewedAt:w.stage3?.riskReviewedAt,onStage3MarkRiskReviewed:Ys,mode:s,stage2OpsView:u,stage2ResultLabel:jd,stage2MciStage:wd,stage2Probs:hl,stage2DiagnosisStatus:tt.status,stage2CompletionPct:Ro,stage2RequiredDataPct:xn,stage2NextDiagnosisAt:w.stage3?.headerMeta.nextReevalAt,stage2QualityScore:w.header.dataQuality.score,stage2WaitingCount:Xh,stage2ResultMissingCount:Os,stage2ClassificationConfirmed:$n,stage2ModelAvailable:Yr,stage3ModelAvailable:ya,stage3Type:x,stage2MissingEvidence:_,stage3MissingEvidence:A,onOpenStage2Input:Ec,onOpenStage3Input:jc}),a.jsx(g_e,{flowCards:ia,onAction:ko,mode:s,stage2OpsView:u,opsLoopState:Mx,storedOpsStatus:d?w.stage3?.headerMeta.opsStatus??p?.status:p?.status}),d?null:a.jsx(f_e,{strategy:ls,strategyBadge:fl,contactExecutor:w.contactExecutor,executionStatus:w.contactExecution.status,lastSentAt:w.contactExecution.lastSentAt,lastOutcome:w.contactExecution.lastOutcomeCode,retryCount:w.contactExecution.retryCount,linkageStatus:w.linkageStatus,memoCount:H.length,lastContactAt:w.contactExecution.lastResponseAt??w.contactExecution.lastSentAt,timelineCount:w.timeline.length,preTriage:w.preTriageResult,riskGuardrails:w.header.riskGuardrails,onOpenStrategyOverride:()=>hr(!0),mode:s}),d?a.jsxs(a.Fragment,{children:[a.jsxs("section",{className:"rounded-xl border border-indigo-200 bg-indigo-50 p-4 shadow-sm",children:[a.jsx("h3",{className:"text-sm font-bold text-indigo-900",children:" "}),a.jsx("p",{className:"mt-1 text-[11px] text-indigo-800",children:u?"Step    ///   .":"Step    //   .      ."}),a.jsxs("div",{className:"mt-3 flex flex-wrap gap-2 text-[11px]",children:[a.jsxs("span",{className:"rounded-md border border-indigo-300 bg-white px-2 py-1",children:[u?"  ":" "," ",mt(w.stage3?.headerMeta.nextReevalAt)]}),a.jsxs("span",{className:"rounded-md border border-indigo-300 bg-white px-2 py-1",children:[u?" ":""," ",u1(w.stage3?.headerMeta.planStatus??"ACTIVE")]}),a.jsxs("span",{className:"rounded-md border border-indigo-300 bg-white px-2 py-1",children:[u?"  ":" "," ",w.stage3?.headerMeta.trackingCycleDays??21,""]})]})]}),a.jsx(u_,{level:w.interventionLevel,statusLabel:w.header.statusLabel,guides:Wf,onChangeLevel:Xf,onHold:()=>fc(""),onExclude:()=>fc(" "),mode:s})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[a.jsx(T7,{mode:s,stage2OpsView:u,contactExecutor:w.contactExecutor,executionStatus:w.contactExecution.status,strategy:ls,lastSentAt:w.contactExecution.lastSentAt,sensitivityFlags:Au,latestAgentLog:w.agentExecutionLogs[0],selectedRecommendation:Ni,agentJob:Hr,gateStatus:oa,onSwitchExecutor:ep,onOpen:()=>Rs("CONTACT_EXECUTION"),onRetryNow:Uu,onScheduleRetry:Bu}),a.jsx(O7,{linkageStatus:w.linkageStatus,reservationInfo:w.reservationInfo,locked:lp,lockReason:lp?"STEP4    /  .":void 0,onOpenStep4:()=>Rs("FOLLOW_UP"),onAction:Qf})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[a.jsx(l_,{expanded:Ge,onToggle:()=>Qt(P=>!P),executionStatus:w.contactExecution.status,lastSentAt:w.contactExecution.lastSentAt,assigneeName:w.header.assigneeName,selectedOutcomeCode:br,onSelectOutcomeCode:pc,reasonTags:Fr,onToggleReasonTag:sn,rejectReasonDraft:an,onRejectReasonDraftChange:rp,noResponsePlanDraft:un,onNoResponsePlanDraftChange:np,outcomeNote:cn,onOutcomeNoteChange:qh,isSaving:cl,submitError:Ph,validationError:Va,onClearError:Wi,onReset:xd,onConfirm:mc,hasUnsavedChanges:fa,lastSavedAt:js,onOpenHandoffMemo:()=>Cs(!0),mode:s}),a.jsx(R7,{expanded:jx||!!w.contactExecution.handoffMemo,onToggle:()=>Cs(P=>!P),memoText:Kf,onMemoChange:Oh,onSave:()=>{qe(`  : ${Kf.slice(0,80)}...`),ke.success("  ."),Cs(!1)},mode:s})]}),a.jsx(u_,{level:w.interventionLevel,statusLabel:w.header.statusLabel,guides:Wf,onChangeLevel:Xf,onHold:()=>fc(""),onExclude:()=>fc(" "),mode:s})]})]}),a.jsxs("aside",{className:"space-y-4 xl:col-span-4 xl:sticky xl:top-0 self-start",children:[d?a.jsxs(a.Fragment,{children:[a.jsxs("section",{className:"rounded-xl border border-indigo-200 bg-white p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:u?"   ":"  "}),a.jsx("button",{onClick:()=>Rs("CONTACT_EXECUTION"),className:"rounded-md border border-indigo-200 bg-indigo-50 px-2 py-1 text-[11px] font-semibold text-indigo-700 hover:bg-indigo-100",children:"STEP2  "})]}),a.jsxs("p",{className:"mt-1 text-[11px] text-gray-500",children:[u?"STEP2/3 ":""," ",w.stage3?.diffPathStatus??"NONE","    ",Pu," "," ",u?"":" "," ",mt(w.stage3?.headerMeta.nextReevalAt)]}),a.jsx("p",{className:"mt-2 text-[10px] text-indigo-700",children:u?" :    /        .":" :   /        ."})]}),a.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsxs("button",{onClick:()=>_r(P=>!P),className:"flex w-full items-center justify-between text-left",children:[a.jsxs("span",{className:"text-sm font-bold text-slate-900",children:["/  (",u?"/":"/",")"]}),a.jsx("span",{className:"text-[11px] font-semibold text-slate-500",children:Pr?"":""})]}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:u?" / /   .":"      ."}),Pr?a.jsxs("div",{className:"mt-3",children:[a.jsx(T7,{mode:s,stage2OpsView:u,contactExecutor:w.contactExecutor,executionStatus:w.contactExecution.status,strategy:ls,lastSentAt:w.contactExecution.lastSentAt,sensitivityFlags:Au,latestAgentLog:w.agentExecutionLogs[0],selectedRecommendation:Ni,agentJob:Hr,gateStatus:oa,onSwitchExecutor:ep,onOpen:()=>Rs("CONTACT_EXECUTION"),onRetryNow:Uu,onScheduleRetry:Bu}),a.jsx("div",{className:"mt-3",children:a.jsx(l_,{expanded:Ge,onToggle:()=>Qt(P=>!P),executionStatus:w.contactExecution.status,lastSentAt:w.contactExecution.lastSentAt,assigneeName:w.header.assigneeName,selectedOutcomeCode:br,onSelectOutcomeCode:pc,reasonTags:Fr,onToggleReasonTag:sn,rejectReasonDraft:an,onRejectReasonDraftChange:rp,noResponsePlanDraft:un,onNoResponsePlanDraftChange:np,outcomeNote:cn,onOutcomeNoteChange:qh,isSaving:cl,submitError:Ph,validationError:Va,onClearError:Wi,onReset:xd,onConfirm:mc,hasUnsavedChanges:fa,lastSavedAt:js,onOpenHandoffMemo:()=>Cs(!0),mode:s})})]}):null]}),ua?a.jsxs("section",{className:"rounded-xl border border-indigo-200 bg-indigo-50 p-4 shadow-sm",children:[a.jsx("h3",{className:"text-sm font-bold text-indigo-900",children:u?"   ":"   "}),a.jsx("p",{className:"mt-1 text-[11px] text-indigo-800",children:ua.memo}),a.jsxs("p",{className:"mt-1 text-[10px] text-indigo-700",children:[mt(ua.at),"  ",u?" ":" "," ",zb[ua.nextAction]]})]}):null,a.jsx(k7,{evidence:w.riskEvidence,quality:w.header.dataQuality,mode:s,stage2OpsView:u,stage3Type:x}),a.jsx(d_,{timeline:Vf,filter:M,onFilterChange:G,listClassName:"max-h-[300px] overflow-y-auto pr-1",mode:s,stage2OpsView:u,stage3Type:x})]}):a.jsxs(a.Fragment,{children:[a.jsx(k7,{evidence:w.riskEvidence,quality:w.header.dataQuality,mode:s,stage2OpsView:u,stage3Type:x}),a.jsx(d_,{timeline:Vf,filter:M,onFilterChange:G,listClassName:"max-h-[340px] overflow-y-auto pr-1",mode:s,stage2OpsView:u,stage3Type:x}),a.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"  ( )"}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:"    : Step   ."}),a.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3 text-xs",children:[a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[a.jsx("p",{className:"text-slate-500",children:"  "}),a.jsxs("p",{className:"mt-1 text-lg font-bold text-slate-900",children:[w.todos.filter(P=>P.status==="OPEN").length,""]})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[a.jsx("p",{className:"text-slate-500",children:"  "}),a.jsx("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:mt(Ye)}),Su.length>0?a.jsxs("div",{className:"mt-2 space-y-1",children:[a.jsxs("p",{className:"text-[11px] font-semibold text-red-600",children:["   ",Su.length,""]}),Su.slice(0,2).map(P=>a.jsxs("div",{className:"rounded-md border border-red-200 bg-red-50 px-2 py-1.5",children:[a.jsx("p",{className:"text-[10px] font-semibold text-red-700",children:P.title}),a.jsx("p",{className:"text-[10px] text-red-600",children:mt(P.scheduledAt)}),a.jsx("button",{onClick:()=>bl(P.idempotencyKey),disabled:!!qf[P.idempotencyKey],className:"mt-1 inline-flex items-center rounded-md border border-red-300 px-2 py-0.5 text-[10px] font-semibold text-red-700 hover:bg-red-100 disabled:opacity-50",children:qf[P.idempotencyKey]?" ...":""})]},P.idempotencyKey))]}):null]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[a.jsx("p",{className:"text-slate-500",children:"  "}),a.jsx("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:Ax?.title??"   ."})]})]})]})]}),a.jsx(h_e,{logs:w.agentExecutionLogs})]})]}),a.jsx(gf,{open:!!ze,onOpenChange:P=>{P||dn(null)},children:a.jsxs(xf,{className:"max-w-2xl p-4",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"ProgramExecutionDrawer"}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:"     Stage3 Step3  ."}),zn?a.jsxs("div",{className:"mt-3 space-y-3",children:[a.jsx("div",{className:"rounded-md border border-slate-200 bg-slate-50 px-3 py-2",children:a.jsxs("p",{className:"text-xs font-semibold text-slate-900",children:[zn.major," / ",zn.middle," / ",zn.leaf]})}),a.jsxs("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-2",children:[a.jsxs("label",{className:"text-[11px] text-slate-600",children:["",a.jsx("input",{value:ur.owner,onChange:P=>Ue(K=>({...K,owner:P.target.value})),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-blue-300"})]}),a.jsxs("label",{className:"text-[11px] text-slate-600",children:["Due Date",a.jsx("input",{type:"datetime-local",value:Fc(ur.dueDate),onChange:P=>Ue(K=>({...K,dueDate:Uc(P.target.value)||void 0})),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-blue-300"})]}),a.jsxs("label",{className:"text-[11px] text-slate-600",children:[" ",a.jsxs("select",{value:ur.method??"",onChange:P=>Ue(K=>({...K,method:P.target.value})),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-blue-300",children:[a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""})]})]}),a.jsxs("label",{className:"text-[11px] text-slate-600",children:["",a.jsxs("select",{value:ur.status??"PLANNED",onChange:P=>Ue(K=>({...K,status:P.target.value})),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-blue-300",children:[a.jsx("option",{value:"PLANNED",children:""}),a.jsx("option",{value:"IN_PROGRESS",children:""}),a.jsx("option",{value:"DONE",children:""}),a.jsx("option",{value:"HOLD",children:""})]})]}),a.jsxs("label",{className:"text-[11px] text-slate-600 md:col-span-2",children:["",a.jsx("input",{value:ur.institution??"",onChange:P=>Ue(K=>({...K,institution:P.target.value})),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-blue-300"})]}),a.jsxs("label",{className:"text-[11px] text-slate-600 md:col-span-2",children:["",a.jsx("textarea",{value:ur.note??"",onChange:P=>Ue(K=>({...K,note:P.target.value})),className:"mt-1 h-20 w-full rounded-md border border-gray-200 px-2 py-1 text-[11px] outline-none focus:border-blue-300"})]})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{onClick:()=>dn(null),className:"rounded-md border border-gray-200 px-3 py-1.5 text-xs font-semibold text-gray-700",children:""}),a.jsx("button",{onClick:()=>{ze&&(gd(ze,ur),dn(null))},className:"rounded-md bg-[#163b6f] px-3 py-1.5 text-xs font-semibold text-white",children:""})]})]}):null]})}),a.jsx(gf,{open:d&&!!rr,onOpenChange:P=>{P||ro()},children:a.jsx(xf,{className:"w-[96vw] max-w-[96vw] sm:max-w-[1460px] max-h-[92vh] overflow-y-auto p-4",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"rounded-lg border border-indigo-200 bg-indigo-50 p-3",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm font-bold text-indigo-900",children:[u?"Stage2 ":"Stage3 ","  ",Nd?.title??" "]}),a.jsx("p",{className:"text-[11px] text-indigo-700",children:u?"/   .      .":"   .      ."})]}),a.jsxs("span",{className:"rounded-md border border-indigo-300 bg-white px-2 py-1 text-[11px] font-semibold text-indigo-700",children:[" ",ml+1,"/",Yi.length]})]}),a.jsx("div",{className:"mt-2 grid grid-cols-2 gap-1.5 md:grid-cols-4",children:Yi.map((P,K)=>{const Q=ia.find(Ke=>Ke.id===P),ce=rr===P,ae=Object.keys(hn[P]??{}).length;return a.jsxs("button",{type:"button",onClick:()=>{const Ke=Lp(ia,P);if(Ke){ke.error(Ke);return}je(P)},className:ue("rounded-md border px-2 py-1.5 text-left text-[11px]",ce?"border-indigo-300 bg-white text-indigo-800":"border-indigo-100 bg-indigo-50/60 text-indigo-700"),children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("p",{className:"font-semibold",children:["STEP ",K+1]}),ae>0?a.jsxs("span",{className:"rounded-full border border-rose-200 bg-rose-50 px-1.5 py-0.5 text-[10px] font-semibold text-rose-700",children:[" ",ae]}):null]}),a.jsx("p",{className:"mt-0.5 truncate",children:Q?.title??P})]},P)})})]}),rr==="PRECHECK"?(()=>{const P=CAe({detail:w,modelPriorityValue:hc,stage2ResultLabel:Yr?Mu:void 0,stage2MciSeverity:Yr?Ts:void 0,stage2TestAt:t?.updated,stage2Org:"  "}),K=[{key:"AD",label:"AD"},{key:"MCI",label:"MCI"},{key:"NORMAL",label:""}],Q=Yr&&K.some(Te=>P.stage2.probs?.[Te.key]!=null),ce=ya?Dc(P.stage3.risk2yNow):void 0,ae=ya?Dc(P.stage3.riskAt2y):void 0,Ke=ya?P.stage3.status==="RESULT_APPLIED"?u?" ":" ":u?" ":" ":" ";if(u){const Te=w.timeline.filter(Be=>Be.type==="DIFF_REFER_CREATED"||Be.type==="DIFF_SCHEDULED"||Be.type==="LINKAGE_CREATED").length,st=w.timeline.filter(Be=>Be.type==="CALL_ATTEMPT"||Be.type==="SMS_SENT"||Be.type==="MESSAGE_SENT").length,zt=w.timeline.filter(Be=>Be.type==="STAGE2_RESULTS_RECORDED"||Be.type==="DIFF_RESULT_APPLIED").length,Pe=fd.filter(Be=>Be.key==="step1Plan"||Be.key==="step1StrategyMemo"||Be.key==="step1Consent");return a.jsxs("section",{className:"rounded-lg border border-gray-200 bg-white p-4",children:[a.jsx("h4",{className:"text-sm font-bold text-slate-900",children:"Stage2   &   "}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-600",children:"STEP1    ,   / /    ."}),a.jsx("div",{className:"mt-3",children:a.jsx(Wb,{items:qb.PRECHECK})}),Pe.length>0?a.jsxs("div",{className:"mt-3 rounded-md border border-rose-200 bg-rose-50 p-2",children:[a.jsx("p",{className:"text-[11px] font-semibold text-rose-700",children:"/ "}),a.jsx("ul",{className:"mt-1 space-y-1",children:Pe.map(Be=>a.jsx("li",{children:a.jsxs("button",{type:"button",onClick:()=>{if(Be.key==="step1Plan"){c_(la.map(At=>At.id),xi);return}oc(Be.key)},className:"text-[11px] text-rose-700 underline decoration-dotted underline-offset-2",children:["- ",Be.message]})},Be.key))})]}):null,a.jsx("div",{className:"mt-3",children:a.jsx(C_e,{summary:yc,route:cp,onOpenMissing:()=>c_(la.map(Be=>Be.id),xi),onPrimaryAction:dp,onReviewComplete:Gu})}),a.jsx("div",{className:"mt-2 flex justify-end",children:a.jsx("button",{type:"button",onClick:()=>je("CONTACT_EXECUTION"),className:"rounded-md border border-slate-200 bg-slate-50 px-3 py-1.5 text-[11px] font-semibold text-slate-700",children:"/  "})}),a.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3 xl:grid-cols-[1fr_1.2fr]",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 p-3",children:[a.jsx("p",{className:"text-xs font-semibold text-slate-800",children:"Stage1Stage2  Scorecard"}),a.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-[11px]",children:[a.jsxs("div",{className:"rounded border border-slate-200 bg-white px-2 py-1.5",children:[a.jsx("p",{className:"text-slate-500",children:"Stage1 "}),a.jsxs("p",{className:"font-semibold text-slate-900",children:[P.stage1.priorityScore??"-"," / ",P.stage1.priorityBand??" "]})]}),a.jsxs("div",{className:"rounded border border-slate-200 bg-white px-2 py-1.5",children:[a.jsx("p",{className:"text-slate-500",children:" "}),a.jsx("p",{className:"font-semibold text-slate-900",children:P.stage1.interventionLevel??"-"})]}),a.jsxs("div",{className:"rounded border border-slate-200 bg-white px-2 py-1.5",children:[a.jsx("p",{className:"text-slate-500",children:"Stage2 "}),a.jsx("p",{className:"font-semibold text-slate-900",children:mt(gn)})]}),a.jsxs("div",{className:"rounded border border-slate-200 bg-white px-2 py-1.5",children:[a.jsx("p",{className:"text-slate-500",children:"Stage2 "}),a.jsx("p",{className:"font-semibold text-slate-900",children:Jz(tt.status)})]}),a.jsxs("div",{className:"col-span-2 rounded border border-slate-200 bg-white px-2 py-1.5",children:[a.jsx("p",{className:"text-slate-500",children:"Stage2   "}),a.jsx("p",{className:"font-semibold text-slate-900",children:"Stage1   /   Stage2    ."})]})]})]}),a.jsxs("details",{className:"rounded-md border border-slate-200 bg-slate-50 p-3",children:[a.jsx("summary",{className:"cursor-pointer text-xs font-semibold text-slate-800",children:"  ()"}),a.jsxs("div",{className:"mt-2 grid grid-cols-3 gap-2 text-[11px]",children:[a.jsxs("div",{className:"rounded border border-slate-200 bg-white px-2 py-1.5",children:[a.jsx("p",{className:"text-slate-500",children:"/ "}),a.jsx("p",{className:"font-semibold text-slate-900",children:Te})]}),a.jsxs("div",{className:"rounded border border-slate-200 bg-white px-2 py-1.5",children:[a.jsx("p",{className:"text-slate-500",children:"/ "}),a.jsx("p",{className:"font-semibold text-slate-900",children:st})]}),a.jsxs("div",{className:"rounded border border-slate-200 bg-white px-2 py-1.5",children:[a.jsx("p",{className:"text-slate-500",children:"  "}),a.jsx("p",{className:"font-semibold text-slate-900",children:zt})]})]})]}),a.jsxs("label",{className:"text-[11px] text-slate-600",children:[" (, 20 )",a.jsx("textarea",{ref:Dt("step1StrategyMemo"),value:Se.strategyMemo,onChange:Be=>{Gr("step1StrategyMemo"),nt(At=>({...At,strategyMemo:Be.target.value}))},className:Xa("step1StrategyMemo","mt-1 h-24 w-full rounded-md border border-gray-200 px-2 py-1 text-[11px] outline-none focus:border-indigo-300"),placeholder:"Stage1  , Stage2  ,    ."})]}),Mr.step1StrategyMemo?a.jsx("p",{className:"-mt-2 text-[10px] font-semibold text-rose-600",children:Mr.step1StrategyMemo}):null,a.jsxs("label",{className:"flex items-center gap-1 text-[11px] text-slate-700",children:[a.jsx("input",{ref:Dt("step1Consent"),type:"checkbox",checked:Se.consentConfirmed,onChange:Be=>{Gr("step1Consent"),nt(At=>({...At,consentConfirmed:Be.target.checked}))}}),"Stage1 /   "]}),Mr.step1Consent?a.jsx("p",{className:"-mt-2 text-[10px] font-semibold text-rose-600",children:Mr.step1Consent}):null]}),a.jsxs("div",{className:"space-y-3 rounded-md border border-slate-200 bg-slate-50 p-3",children:[a.jsxs("div",{ref:Dt("step1Plan"),children:[a.jsx("p",{className:"text-xs font-semibold text-slate-800",children:"  "}),a.jsx("div",{className:"mt-2",children:a.jsx(T_e,{routeType:Sr,orgName:tr,dueAt:gr,needsReasonOnChange:Sd,onSelectRoute:Oo})})]}),Mr.step1Plan?a.jsx("p",{className:"text-[10px] font-semibold text-rose-600",children:Mr.step1Plan}):null,a.jsxs("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-2",children:[a.jsxs("label",{className:"text-[11px] text-slate-600",children:["",a.jsx("input",{value:tr,onChange:Be=>Nr(Be.target.value),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-indigo-300"})]}),a.jsxs("label",{className:"text-[11px] text-slate-600",children:["",a.jsx("input",{type:"datetime-local",value:Fc(gr),onChange:Be=>qs(Uc(Be.target.value)||gr),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-indigo-300"})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-semibold text-slate-800",children:"   "}),a.jsx("p",{className:"mt-1 text-[10px] text-slate-500",children:"  /   STEP2 .    /  ."}),a.jsx("div",{className:"mt-2",children:a.jsx(R_e,{items:va,onAction:Yh,registerRef:lc})})]}),a.jsxs("div",{className:"rounded-md border border-slate-200 bg-white p-2 text-[10px] text-slate-600",children:[a.jsxs("p",{children:["STEP  : STEP2 ",yc.locks.step2?"":"","  STEP3 ",yc.locks.step3?"":"","  STEP4 ",yc.locks.step4?"":""]}),a.jsxs("p",{className:"mt-1",children:["  : ",yc.step1Reviewed?"":"","   ",yc.completionRate,"%"]})]})]})]})]})}return a.jsxs("section",{className:"rounded-lg border border-gray-200 bg-white p-4",children:[a.jsx("h4",{className:"text-sm font-bold text-slate-900",children:u?"Stage1 / ":"   &  "}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-600",children:u?"Step1 Stage1  Stage2       .":"Step1       .       ."}),a.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 rounded-lg border border-indigo-200 bg-indigo-50 p-2 md:grid-cols-3 xl:grid-cols-6",children:[a.jsxs("div",{title:"       .",className:"rounded-md border border-indigo-100 bg-white p-2 shadow-sm transition-all duration-150 hover:-translate-y-0.5 hover:shadow-md",children:[a.jsx("p",{className:"text-[10px] font-semibold text-indigo-600",children:" "}),a.jsxs("p",{className:"mt-1 text-xs font-bold text-slate-900",children:[P.stage1.priorityBand??" ","  ",P.stage1.priorityScore??"-",""]}),a.jsxs("p",{className:"mt-1 text-[10px] text-slate-500",children:[" ",P.stage1.interventionLevel??"-"]})]}),a.jsxs("div",{title:"Stage2  ( ).",className:"rounded-md border border-indigo-100 bg-white p-2 shadow-sm transition-all duration-150 hover:-translate-y-0.5 hover:shadow-md",children:[a.jsx("p",{className:"text-[10px] font-semibold text-indigo-600",children:"Stage2 "}),a.jsxs("p",{className:"mt-1 text-xs font-bold text-slate-900",children:[Yr?P.stage2.resultLabel??"":"",Yr&&P.stage2.mciSeverity?`(${P.stage2.mciSeverity})`:""]}),a.jsx("p",{className:"mt-1 text-[10px] text-slate-500",children:mt(P.stage2.testAt)})]}),a.jsxs("div",{title:"/AD/MCI  .      .",className:"rounded-md border border-indigo-100 bg-white p-2 shadow-sm transition-all duration-150 hover:-translate-y-0.5 hover:shadow-md",children:[a.jsx("p",{className:"text-[10px] font-semibold text-indigo-600",children:"Stage2  "}),a.jsx("p",{className:"mt-1 text-xs font-bold text-slate-900",children:Q?" ( )":" ()"}),Q?a.jsx("div",{className:"mt-1 space-y-1",children:K.map(Te=>{const st=Dc(P.stage2.probs?.[Te.key])??0;return a.jsxs("div",{className:"space-y-0.5",children:[a.jsxs("div",{className:"flex items-center justify-between text-[10px] text-slate-500",children:[a.jsx("span",{children:Te.label}),a.jsxs("span",{children:[st,"%"]})]}),a.jsx("div",{className:"h-1.5 rounded bg-slate-100",children:a.jsx("div",{className:"h-full rounded bg-indigo-400",style:{width:`${st}%`}})})]},Te.key)})}):a.jsx("p",{className:"mt-1 text-[10px] text-slate-500",children:"   "})]}),a.jsxs("div",{title:u?"  ( ).":g?.source.profile?.stage3Type==="AD_MANAGEMENT"?" ( ).     .":"2  .     .",className:"rounded-md border border-indigo-100 bg-white p-2 shadow-sm transition-all duration-150 hover:-translate-y-0.5 hover:shadow-md",children:[a.jsx("p",{className:"text-[10px] font-semibold text-indigo-600",children:u?"  ()":g?.source.profile?.stage3Type==="AD_MANAGEMENT"?"Stage3  ()":"Stage3 ()"}),a.jsx("p",{className:"mt-1 text-xs font-bold text-slate-900",children:ce==null?" ( )":`${ce}%`}),a.jsxs("p",{className:"mt-1 text-[10px] text-slate-500",children:[u?" ":g?.source.profile?.stage3Type==="AD_MANAGEMENT"?" ":""," ",ya?P.stage3.risk2yLabel??"-":""]})]}),a.jsxs("div",{title:u?"   .":"   2  .",className:"rounded-md border border-indigo-100 bg-white p-2 shadow-sm transition-all duration-150 hover:-translate-y-0.5 hover:shadow-md",children:[a.jsx("p",{className:"text-[10px] font-semibold text-indigo-600",children:u?"  ":"Stage3 2  "}),a.jsx("p",{className:"mt-1 text-xs font-bold text-slate-900",children:ae==null?" ( )":`${ae}%`}),a.jsxs("p",{className:"mt-1 text-[10px] text-slate-500",children:[" ",P.stage3.confidence??"-"]})]}),a.jsxs("div",{title:"   .",className:"rounded-md border border-indigo-100 bg-white p-2 shadow-sm transition-all duration-150 hover:-translate-y-0.5 hover:shadow-md",children:[a.jsx("p",{className:"text-[10px] font-semibold text-indigo-600",children:" "}),a.jsxs("p",{className:"mt-1 text-xs font-bold text-slate-900",children:[P.dataQuality?.score??"-","%"]}),a.jsxs("p",{className:"mt-1 text-[10px] text-slate-500",children:[" ",P.dataQuality?.missingCount??0,""]})]})]}),a.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3 xl:grid-cols-[1.6fr_1fr]",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"grid grid-cols-1 gap-2 lg:grid-cols-3",children:[a.jsxs("article",{className:"rounded-md border border-slate-200 bg-slate-50 p-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-[10px] font-semibold text-slate-700",children:"Stage1  "}),a.jsx("button",{type:"button",onClick:()=>ke(Ou.guide),className:"rounded border border-slate-300 bg-white px-1.5 py-0.5 text-[10px] font-semibold text-slate-700",children:" "})]}),a.jsxs("p",{className:"mt-1 text-[11px] text-slate-700",children:[" : ",a.jsx("strong",{children:P.stage1.priorityBand??" "})," (",P.stage1.priorityScore??"-"," /"," ",P.stage1.interventionLevel??"-",")"]}),a.jsxs("p",{className:"mt-1 text-[10px] text-slate-500",children:[" ",P.stage1.percentileTop??"-","%   ",mt(P.stage1.updatedAt)]})]}),a.jsxs("article",{className:"rounded-md border border-slate-200 bg-slate-50 p-3",children:[a.jsx("p",{className:"text-[10px] font-semibold text-slate-700",children:"Stage2  ( )"}),a.jsxs("p",{className:"mt-1 text-[11px] text-slate-700",children:[" :"," ",a.jsxs("strong",{children:[Yr?P.stage2.resultLabel??"":"",Yr&&P.stage2.mciSeverity?`(${P.stage2.mciSeverity})`:""]})]}),a.jsxs("p",{className:"mt-1 text-[10px] text-slate-500",children:[" : ",Q?" ( )":" ()"]}),a.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:[["",P.stage2.tests?.neuropsych],["",P.stage2.tests?.clinical],["",P.stage2.tests?.specialist]].map(([Te,st])=>a.jsxs("span",{className:ue("rounded px-1.5 py-0.5 text-[10px] font-semibold",st==="DONE"?"bg-emerald-100 text-emerald-700":"bg-slate-200 text-slate-600"),children:[Te," ",st==="DONE"?"":""]},Te))}),a.jsxs("p",{className:"mt-1 text-[10px] text-slate-500",children:[" ",mt(P.stage2.testAt),"  ",P.stage2.org]})]}),a.jsxs("article",{className:"rounded-md border border-slate-200 bg-slate-50 p-3",children:[a.jsx("p",{className:"text-[10px] font-semibold text-slate-700",children:g?.source.profile?.stage3Type==="AD_MANAGEMENT"?"Stage3  /":"Stage3 /"}),a.jsxs("p",{className:"mt-1 text-[11px] text-slate-700",children:[g?.source.profile?.stage3Type==="AD_MANAGEMENT"?" :":":"," ",a.jsxs("strong",{children:[ya?P.stage3.risk2yLabel??"":""," (",ce==null?"-":`${ce}%`,")"]})]}),a.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-1",children:[a.jsxs("span",{className:ue("rounded px-1.5 py-0.5 text-[10px] font-semibold",P.stage3.status==="RESULT_APPLIED"?"bg-emerald-100 text-emerald-700":"bg-amber-100 text-amber-700"),children:[": ",Ke]}),P.stage3.status==="RESULT_PENDING"?a.jsx("span",{className:"rounded bg-amber-100 px-1.5 py-0.5 text-[10px] font-semibold text-amber-700",children:" "}):null]}),a.jsxs("p",{className:"mt-1 text-[10px] text-slate-500",children:[" ",ya?P.stage3.confidence??"-":"","   ",mt(P.stage3.nextReevalAt)]}),a.jsxs("p",{className:"mt-1 text-[10px] text-slate-500",children:["  ",mt(P.stage3.nextContactAt),"  2   ",ae??"-","%"]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 md:grid-cols-5",children:[a.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 p-2",children:[a.jsx("p",{className:"text-[10px] font-semibold text-slate-700",children:" (30)"}),a.jsx("p",{className:"mt-1 text-sm font-bold text-slate-900",children:P.opsCounts?.contactAttempts30d??0})]}),a.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 p-2",children:[a.jsx("p",{className:"text-[10px] font-semibold text-slate-700",children:"(30)"}),a.jsx("p",{className:"mt-1 text-sm font-bold text-emerald-700",children:P.opsCounts?.contactSuccess30d??0})]}),a.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 p-2",children:[a.jsx("p",{className:"text-[10px] font-semibold text-slate-700",children:" (30)"}),a.jsx("p",{className:"mt-1 text-sm font-bold text-rose-700",children:P.opsCounts?.contactFail30d??0})]}),a.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 p-2",children:[a.jsx("p",{className:"text-[10px] font-semibold text-slate-700",children:" "}),a.jsx("p",{className:"mt-1 text-sm font-bold text-slate-900",children:P.opsCounts?.bookings??0})]}),a.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 p-2",children:[a.jsx("p",{className:"text-[10px] font-semibold text-slate-700",children:"(/)"}),a.jsxs("p",{className:"mt-1 text-sm font-bold text-slate-900",children:[(P.opsCounts?.programsPlanned??0)+(P.opsCounts?.programsDone??0)," / ",P.opsCounts?.programsDone??0]})]})]}),a.jsxs("details",{className:"rounded-md border border-slate-200 bg-slate-50 p-3",children:[a.jsx("summary",{className:"cursor-pointer text-xs font-semibold text-slate-800",children:"()"}),a.jsxs("div",{className:"mt-2 space-y-1.5",children:[w.timeline.slice(0,8).map((Te,st)=>a.jsxs("div",{className:"rounded border border-slate-200 bg-white px-2 py-1.5",children:[a.jsx("p",{className:"text-[11px] font-semibold text-slate-700",children:Ay(Te)}),a.jsxs("p",{className:"text-[10px] text-slate-500",children:[mt(Te.at),"  ",Te.by]}),a.jsx("p",{className:"text-[10px] text-slate-600",children:eq(Te)})]},`${Te.at}-${st}`)),w.timeline.length===0?a.jsx("p",{className:"rounded border border-slate-200 bg-white px-2 py-1.5 text-[10px] text-slate-500",children:" ."}):null]})]}),a.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 p-3",children:[a.jsx("p",{className:"text-xs font-semibold text-slate-800",children:u?"Stage1Stage2  ( )":"Stage2Stage3  ( )"}),a.jsxs("ul",{className:"mt-1 space-y-1 text-[11px] text-slate-600",children:[a.jsx("li",{children:u?" Stage1    Stage2   .":"        ."}),a.jsx("li",{children:u?" /    .":"  /     ."}),a.jsx("li",{children:u?"     //    .":"     /   ."}),a.jsx("li",{children:"          ."})]})]})]}),a.jsxs("div",{className:"space-y-3",children:[$u.length>0?a.jsxs("div",{className:"rounded-md border border-rose-200 bg-rose-50 p-2",children:[a.jsxs("p",{className:"text-[11px] font-semibold text-rose-700",children:["   ",$u.length,""]}),a.jsx("ul",{className:"mt-1 space-y-1",children:$u.map(Te=>a.jsx("li",{children:a.jsxs("button",{type:"button",onClick:()=>Hf(Te.key),className:"text-[11px] text-rose-700 underline decoration-dotted underline-offset-2",children:["- ",Te.message]})},Te.key))})]}):null,a.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 p-3",children:[a.jsx("p",{className:"text-xs font-semibold text-slate-800",children:" ()"}),a.jsxs("div",{className:"mt-2 rounded-md border border-slate-200 bg-white p-2",children:[a.jsx("p",{className:"text-[11px] font-semibold text-slate-700",children:"  /"}),a.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:[Se.sensitiveHistory?"  ":null,Se.resultLinkedChecked?"   ":null,w.timeline.some(Te=>Te.type==="CALL_ATTEMPT"&&Te.result==="NO_ANSWER")?"  ":null,t?.profile.guardianPhone?"   ":"  "].filter(Boolean).map(Te=>a.jsx("span",{className:"rounded-full border border-slate-200 bg-slate-50 px-2 py-0.5 text-[10px] font-semibold text-slate-700",children:Te},Te))})]}),a.jsxs("div",{ref:os("step1DiffDecision"),className:ue("mt-2 grid grid-cols-1 gap-2",zr.step1DiffDecision?"rounded-md border border-rose-200 bg-rose-50 p-1":""),children:[a.jsx("p",{className:"text-[11px] font-semibold text-slate-700",children:"  ()"}),a.jsxs("button",{type:"button",onClick:()=>{Kn("PRECHECK","step1DiffDecision"),nt(Te=>({...Te,diffNeeded:!0,diffDecisionSet:!0}))},className:ue("flex w-full items-center justify-between rounded-md border px-3 py-2 text-left",Se.diffDecisionSet&&Se.diffNeeded?"border-indigo-300 bg-indigo-50 text-indigo-800":"border-slate-200 bg-white text-slate-700"),children:[a.jsx("span",{className:"text-xs font-semibold",children:" ()"}),a.jsx("span",{className:"text-[10px]",children:"    /  "})]}),a.jsxs("button",{type:"button",onClick:()=>{Kn("PRECHECK","step1DiffDecision"),nt(Te=>({...Te,diffNeeded:!1,diffDecisionSet:!0}))},className:ue("flex w-full items-center justify-between rounded-md border px-3 py-2 text-left",Se.diffDecisionSet&&!Se.diffNeeded?"border-slate-400 bg-slate-100 text-slate-800":"border-slate-200 bg-white text-slate-700"),children:[a.jsx("span",{className:"text-xs font-semibold",children:"(/  )"}),a.jsx("span",{className:"text-[10px]",children:"   /  "})]}),zr.step1DiffDecision?a.jsx("p",{className:"text-[10px] font-semibold text-rose-600",children:zr.step1DiffDecision}):null]}),Se.diffDecisionSet?a.jsxs("label",{className:"mt-2 block text-[11px] text-slate-600",children:[" ( )",a.jsx("input",{ref:os("step1DiffReason"),value:Se.diffDecisionReason,onChange:Te=>{Kn("PRECHECK","step1DiffReason"),nt(st=>({...st,diffDecisionReason:Te.target.value}))},className:vi("PRECHECK","step1DiffReason","mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-indigo-300"),placeholder:"   ."})]}):null,a.jsxs("label",{className:"mt-2 flex items-center gap-1 text-[11px] text-slate-700",children:[a.jsx("input",{ref:os("step1Consent"),type:"checkbox",checked:Se.consentConfirmed,onChange:Te=>{Kn("PRECHECK","step1Consent"),nt(st=>({...st,consentConfirmed:Te.target.checked}))}}),"  ()"]}),zr.step1Consent?a.jsx("p",{className:"text-[10px] font-semibold text-rose-600",children:zr.step1Consent}):null,a.jsxs("label",{className:"mt-1 flex items-center gap-1 text-[11px] text-slate-700",children:[a.jsx("input",{type:"checkbox",checked:Se.caregiverNeeded,onChange:Te=>nt(st=>({...st,caregiverNeeded:Te.target.checked}))}),"  ()"]}),a.jsxs("div",{className:"mt-2",children:[a.jsx("label",{className:"text-[11px] font-semibold text-slate-600",children:" ()"}),a.jsxs("select",{value:Se.priority,onChange:Te=>nt(st=>({...st,priority:Te.target.value})),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-indigo-300",children:[a.jsx("option",{value:"HIGH",children:"HIGH"}),a.jsx("option",{value:"MID",children:"MID"}),a.jsx("option",{value:"LOW",children:"LOW"})]})]}),a.jsxs("div",{className:"mt-2",children:[a.jsx("label",{className:"text-[11px] font-semibold text-slate-600",children:" ()"}),a.jsx("textarea",{ref:os("step1StrategyMemo"),value:Se.strategyMemo,onChange:Te=>{Kn("PRECHECK","step1StrategyMemo"),nt(st=>({...st,strategyMemo:Te.target.value}))},className:vi("PRECHECK","step1StrategyMemo","mt-1 h-28 w-full rounded-md border border-gray-200 px-2 py-1 text-[11px] outline-none focus:border-indigo-300"),placeholder:`1) Stage3  
2) / 
3) / `}),zr.step1StrategyMemo?a.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:zr.step1StrategyMemo}):null]})]}),a.jsxs("div",{className:"rounded-md border border-indigo-200 bg-indigo-50 p-3",children:[a.jsxs("p",{className:"text-[11px] text-indigo-800",children:["  ",a.jsx("strong",{children:u?"STEP1  ":"STAGE3_REVIEW_DONE"}),"    / ."]}),a.jsx("button",{type:"button",onClick:()=>qn(1),className:"mt-2 w-full rounded-md border border-indigo-300 bg-white px-2 py-1.5 text-[11px] font-semibold text-indigo-700 hover:bg-indigo-100",children:u?"Step2() ":"Step2() "})]})]})]})]})})():null,rr==="CONTACT_EXECUTION"?(()=>{const P=w.stage3?.diffPathStatus??"NONE";if(u){const Pe=fd.filter(Wt=>Wt.key==="manualEditReason"||Wt.key==="mmse"||Wt.key==="cdr"||Wt.key==="neuro"||Wt.key==="specialist"),At={WAITING:{label:"",chip:"bg-slate-100 text-slate-700 border-slate-200"},REQUESTED:{label:"",chip:"bg-blue-50 text-blue-700 border-blue-200"},PARTIAL:{label:" ",chip:"bg-amber-50 text-amber-700 border-amber-200"},VERIFY_NEEDED:{label:" ",chip:"bg-rose-50 text-rose-700 border-rose-200"},READY:{label:" ",chip:"bg-emerald-50 text-emerald-700 border-emerald-200"}}[Lx],Ur=w.timeline.filter(Wt=>Wt.type==="STAGE2_RESULTS_RECORDED"||Wt.type==="STAGE2_STEP2_AUTOFILL_APPLIED"||Wt.type==="STAGE2_MANUAL_EDIT_APPLIED"||Wt.type==="DIFF_RESULT_APPLIED"||Wt.type==="DIFF_REFER_CREATED"||Wt.type==="DIFF_SCHEDULED"||Wt.type==="MESSAGE_SENT").slice(0,6),yr=Ws?{RECEIVED:{label:"",chip:"border-emerald-200 bg-emerald-50 text-emerald-700"},MAPPED:{label:"",chip:"border-blue-200 bg-blue-50 text-blue-700"},SEEDED:{label:" ",chip:"border-violet-200 bg-violet-50 text-violet-700"}}[Ws.source]:null,ds=Mh(),Ad=Object.keys(ds),Xr=_s||Ad.length>0,vr=!_s,ei=Rn.lastSyncedAt??y?.updatedAt,Ac=Rn.receivedAt??y?.updatedAt,Qh=[{label:"   ",done:!!Ac},{label:"/ ",done:Os===0},{label:"  ",done:!!tt.tests.specialist},{label:"  STEP3   ",done:Kr.jobStatus==="DONE"}];return a.jsxs("section",{id:"stage2-modal-step2-input",className:"rounded-xl border border-slate-200 bg-gradient-to-b from-white to-slate-50 p-4 shadow-sm",children:[a.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-bold text-slate-900",children:"STEP2    //"}),a.jsx("p",{className:"mt-1 text-[11px] text-slate-600",children:"    ,   ."})]}),a.jsxs("span",{className:ue("rounded-full border px-2.5 py-1 text-[10px] font-semibold",At.chip),children:["  ",At.label]})]}),J?a.jsx("div",{className:"mt-2 rounded-md border border-slate-200 bg-slate-50 px-3 py-2 text-[11px] text-slate-600",children:"   ..."}):null,Le?a.jsx("div",{className:"mt-2 rounded-md border border-amber-200 bg-amber-50 px-3 py-2 text-[11px] text-amber-800",children:Le}):null,Ws&&yr?a.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2 rounded-md border border-slate-200 bg-slate-50 px-3 py-2 text-[11px] text-slate-700",children:[a.jsx("span",{className:"font-semibold text-slate-800",children:"  "}),a.jsx("span",{className:ue("rounded border px-2 py-0.5 text-[10px] font-semibold",yr.chip),children:yr.label}),a.jsxs("span",{className:"text-slate-500",children:[" ",mt(Ws.syncedAt)]})]}):null,a.jsx("div",{className:"mt-3",children:a.jsx(Wb,{items:qb.CONTACT_EXECUTION})}),a.jsx("div",{className:"mt-3 grid grid-cols-1 gap-2 md:grid-cols-2 xl:grid-cols-4",children:Qh.map(Wt=>a.jsxs("article",{className:ue("rounded-lg border px-2.5 py-2 text-[11px]",Wt.done?"border-emerald-200 bg-emerald-50 text-emerald-800":"border-slate-200 bg-white text-slate-700"),children:[a.jsx("p",{className:"font-semibold",children:Wt.done?"":""}),a.jsx("p",{className:"mt-1",children:Wt.label})]},Wt.label))}),a.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3 xl:grid-cols-[320px,1fr]",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"rounded-md border border-indigo-200 bg-indigo-50 p-3",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[a.jsx("p",{className:"text-xs font-semibold text-indigo-900",children:" "}),a.jsx("span",{className:ue("rounded border px-2 py-0.5 text-[10px] font-semibold",At.chip),children:At.label})]}),a.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-[11px] md:grid-cols-4",children:[a.jsxs("div",{className:"rounded border border-indigo-100 bg-white px-2 py-1.5",children:[a.jsx("p",{className:"text-slate-500",children:" "}),a.jsx("p",{className:"font-semibold text-slate-900",children:mt(ei)})]}),a.jsxs("div",{className:"rounded border border-indigo-100 bg-white px-2 py-1.5",children:[a.jsx("p",{className:"text-slate-500",children:"  "}),a.jsx("p",{className:"font-semibold text-slate-900",children:mt(Ac)})]}),a.jsxs("div",{className:"rounded border border-indigo-100 bg-white px-2 py-1.5",children:[a.jsx("p",{className:"text-slate-500",children:" "}),a.jsx("p",{className:"font-semibold text-slate-900",children:Rn.sourceOrg??tr})]}),a.jsxs("div",{className:"rounded border border-indigo-100 bg-white px-2 py-1.5",children:[a.jsx("p",{className:"text-slate-500",children:" "}),a.jsxs("p",{className:ue("font-semibold",Os>0?"text-rose-700":"text-emerald-700"),children:[Os,""]})]})]}),a.jsxs("div",{className:"mt-2 grid grid-cols-1 gap-1",children:[a.jsx("button",{type:"button",onClick:()=>{const Wt=ut();Ki(bn=>({...bn,lastSyncedAt:Wt})),ht(bn=>({...bn,status:"PENDING",updatedAt:Wt,startedAt:void 0,completedAt:void 0,progress:0,etaSeconds:null})),Xe({type:"MESSAGE_SENT",at:Wt,by:w.header.assigneeName,summary:"  "}),qe("Stage2   "),ke.success("   .")},className:"rounded border border-blue-200 bg-white px-2 py-1 text-[10px] font-semibold text-blue-700 hover:bg-blue-50",children:" "}),a.jsx("button",{type:"button",onClick:()=>{const Wt=ut();Ki(bn=>({...bn,lastSyncedAt:Wt})),Os>0&&ht(bn=>({...bn,status:"PENDING",updatedAt:Wt,startedAt:void 0,completedAt:void 0,progress:0,etaSeconds:null})),qe("Stage2  "),ke.success("  .")},className:"rounded border border-indigo-200 bg-white px-2 py-1 text-[10px] font-semibold text-indigo-700 hover:bg-indigo-50",children:""})]}),a.jsxs("details",{open:Ln,onToggle:Wt=>is(Wt.target.open),className:"mt-2 rounded border border-indigo-100 bg-white p-2",children:[a.jsx("summary",{className:"cursor-pointer text-[10px] font-semibold text-slate-700",children:"  "}),a.jsx("div",{className:"mt-2 space-y-1",children:Ur.length>0?Ur.map((Wt,bn)=>a.jsxs("div",{className:"rounded border border-slate-200 px-2 py-1 text-[10px] text-slate-600",children:[a.jsx("p",{className:"font-semibold text-slate-700",children:Ay(Wt)}),a.jsxs("p",{children:[mt(Wt.at),"  ",Wt.summary]})]},`${Wt.at}-${bn}`)):a.jsx("p",{className:"text-[10px] text-slate-500",children:"  ."})})]})]}),Pe.length>0?a.jsxs("div",{className:"rounded-md border border-rose-200 bg-rose-50 p-2",children:[a.jsx("p",{className:"text-[11px] font-semibold text-rose-700",children:"/ "}),a.jsx("ul",{className:"mt-1 space-y-1",children:Pe.map(Wt=>a.jsx("li",{children:a.jsxs("button",{type:"button",onClick:()=>oc(Wt.key),className:"text-[11px] text-rose-700 underline decoration-dotted underline-offset-2",children:["- ",Wt.message]})},Wt.key))})]}):null,Os>0?a.jsxs("div",{className:"rounded-md border border-amber-200 bg-amber-50 px-3 py-2 text-[11px] text-amber-800",children:[" :    ",Os,"  ."]}):a.jsx("div",{className:"rounded-md border border-emerald-200 bg-emerald-50 px-3 py-2 text-[11px] text-emerald-800",children:"    ."})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 p-3",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[a.jsx("p",{className:"text-xs font-semibold text-slate-800",children:"   "}),a.jsxs("label",{className:"flex items-center gap-1 text-[10px] font-semibold text-slate-700",children:[a.jsx("input",{type:"checkbox",checked:_s,onChange:Wt=>{if(!Wt.target.checked&&Ad.length>0){ke.error("         .");return}Hi(Wt.target.checked),Wt.target.checked||(hi(""),Gr("manualEditReason"))}})," "]})]}),a.jsx("p",{className:"mt-1 text-[10px] text-slate-600",children:" ( )  .      ."}),a.jsxs("div",{className:"mt-2 grid grid-cols-1 gap-2 md:grid-cols-2",children:[a.jsxs("label",{className:"text-[11px] text-slate-600",children:[a.jsxs("span",{className:"inline-flex items-center gap-1",children:[a.jsx(W0,{term:"MMSE"}),"  (0~30)",yr&&pd("mmse")?a.jsx("span",{className:ue("rounded border px-1.5 py-0.5 text-[10px] font-semibold",yr.chip),children:yr.label}):null]}),a.jsx("input",{ref:Dt("mmse"),type:"number",inputMode:"decimal",min:0,max:30,step:1,value:tt.tests.mmse??"",disabled:vr,onChange:Wt=>{Gr("mmse"),Gr("manualEditReason");const bn=Wt.target.value,Ri=bn===""?void 0:Number(bn);On(on=>({...on,tests:{...on.tests,mmse:bn===""||Number.isNaN(Ri)?void 0:Ri}}))},className:Xa("mmse","mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-xs outline-none focus:border-blue-300 disabled:cursor-not-allowed disabled:bg-slate-100")}),Mr.mmse?a.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:Mr.mmse}):null]}),a.jsxs("label",{className:"text-[11px] text-slate-600",children:[a.jsxs("span",{className:"inline-flex items-center gap-1",children:[a.jsx(W0,{term:"CDR"}),"/",a.jsx(W0,{term:"GDS"}),"  (0~7)",yr&&pd("cdr")?a.jsx("span",{className:ue("rounded border px-1.5 py-0.5 text-[10px] font-semibold",yr.chip),children:yr.label}):null]}),a.jsx("input",{ref:Dt("cdr"),type:"number",inputMode:"decimal",min:0,max:7,step:.5,value:tt.tests.cdr??"",disabled:vr,onChange:Wt=>{Gr("cdr"),Gr("manualEditReason");const bn=Wt.target.value,Ri=bn===""?void 0:Number(bn);On(on=>({...on,tests:{...on.tests,cdr:bn===""||Number.isNaN(Ri)?void 0:Ri}}))},className:Xa("cdr","mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-xs outline-none focus:border-blue-300 disabled:cursor-not-allowed disabled:bg-slate-100")}),Mr.cdr?a.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:Mr.cdr}):null]}),a.jsxs("label",{className:"text-[11px] text-slate-600",children:[a.jsxs("span",{className:"inline-flex items-center gap-1",children:[" ",yr&&pd("cogTestType")?a.jsx("span",{className:ue("rounded border px-1.5 py-0.5 text-[10px] font-semibold",yr.chip),children:yr.label}):null]}),a.jsxs("select",{ref:Dt("neuro"),value:tt.tests.neuroCognitiveType??"",disabled:vr,onChange:Wt=>{Gr("neuro"),Gr("manualEditReason"),On(bn=>({...bn,tests:{...bn.tests,neuroCognitiveType:Wt.target.value||void 0}}))},className:Xa("neuro","mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-xs outline-none focus:border-blue-300 disabled:cursor-not-allowed disabled:bg-slate-100"),children:[a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"CERAD-K",children:"CERAD-K"}),a.jsx("option",{value:"SNSB-II",children:"SNSB-II"}),a.jsx("option",{value:"SNSB-C",children:"SNSB-C"}),a.jsx("option",{value:"LICA",children:"LICA"})]}),Mr.neuro?a.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:Mr.neuro}):null]}),a.jsxs("label",{className:"text-[11px] text-slate-600",children:[a.jsxs("span",{className:"inline-flex items-center gap-1",children:["  ",yr&&pd("specialistOpinionStatus")?a.jsx("span",{className:ue("rounded border px-1.5 py-0.5 text-[10px] font-semibold",yr.chip),children:yr.label}):null]}),a.jsxs("select",{ref:Dt("specialist"),value:tt.tests.specialist?"DONE":"MISSING",disabled:vr,onChange:Wt=>{Gr("specialist"),Gr("manualEditReason"),On(bn=>({...bn,tests:{...bn.tests,specialist:Wt.target.value==="DONE"}}))},className:Xa("specialist","mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-xs outline-none focus:border-blue-300 disabled:cursor-not-allowed disabled:bg-slate-100"),children:[a.jsx("option",{value:"MISSING",children:"MISSING"}),a.jsx("option",{value:"DONE",children:"DONE"})]}),Mr.specialist?a.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:Mr.specialist}):null]})]}),Ad.length>0?a.jsxs("div",{className:"mt-2 rounded-md border border-amber-200 bg-amber-50 px-2 py-1.5 text-[10px] text-amber-800",children:[" : ",Ad.join(", "),"       ."]}):null,Xr?a.jsxs("label",{className:"mt-2 block text-[11px] text-slate-600",children:["  ()",a.jsx("textarea",{ref:Dt("manualEditReason"),value:sa,onChange:Wt=>{Gr("manualEditReason"),hi(Wt.target.value)},className:Xa("manualEditReason","mt-1 h-16 w-full rounded-md border border-gray-200 px-2 py-1 text-[11px] outline-none focus:border-blue-300"),placeholder:"    ."}),Mr.manualEditReason?a.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:Mr.manualEditReason}):null]}):null]}),a.jsxs("div",{className:"rounded-md border border-slate-200 bg-white px-3 py-2 text-[10px] text-slate-600",children:["    ",a.jsx("strong",{children:"  "}),"  ."]})]})]}),a.jsxs("div",{className:"mt-3 flex flex-wrap justify-end gap-2 border-t border-slate-200 pt-3",children:[a.jsx("button",{type:"button",onClick:()=>qn(1),className:"inline-flex items-center rounded-md border border-slate-300 bg-white px-3 py-1.5 text-xs font-semibold text-slate-700 hover:bg-slate-50",children:"Step3( )  "}),a.jsxs("button",{onClick:_u,className:"inline-flex items-center gap-1 rounded-md bg-[#163b6f] px-3 py-1.5 text-xs font-semibold text-white hover:bg-[#112f5a]",children:[a.jsx(li,{size:13}),"   "]})]})]})}const K=Pu===0,Q=ba.slice(0,3),ce=$u.filter(Pe=>yi.CONTACT_EXECUTION.includes(Pe.key)),ae=Se.diffNeeded,Ke=[`Stage1  ${Ou.bandLabel} (${Math.round(hc)})`,`Stage2  ${jd}${wd?`(${wd})`:""}`,`   ${P}`],Te=[{key:"REVIEW",title:"1)  / ",description:"    .",done:nr.consultStarted||ne.trim().length>0},{key:"BOOKING",title:"2)   ",description:"//  .",done:!!Re.preferredHospital.trim()&&(Re.testBiomarker||Re.testBrainImaging||Re.testOther)&&!!Re.bookingAt},{key:"RESULT",title:"3)   ",description:"//  .",done:Xs},{key:"MODEL",title:"4) Stage2  ",description:"     .",done:Sn.jobStatus==="DONE"},{key:"TRANSITION",title:"5) Stage3   ",description:" ( ) .",done:wi}],st=Te.map(Pe=>Pe.key),zt=Math.max(0,st.indexOf(Vr));return a.jsxs("section",{id:"stage3-step2-input",className:"rounded-lg border border-gray-200 bg-white p-4",children:[a.jsx("h4",{className:"text-sm font-bold text-slate-900",children:ae?"      //   ":"       / "}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-600",children:ae?"      / ,     .":"          ."}),a.jsx("div",{className:"mt-3 space-y-2",children:Te.map((Pe,Be)=>{const At=Vr===Pe.key,Ur=Be>zt+1;return a.jsxs("button",{type:"button",onClick:()=>{Ur||cs(Pe.key)},className:ue("flex w-full items-center justify-between rounded-md border px-3 py-2 text-left",At?"border-indigo-300 bg-indigo-50":Pe.done?"border-emerald-200 bg-emerald-50":"border-slate-200 bg-slate-50",Ur?"cursor-not-allowed opacity-60":"hover:border-indigo-200 hover:bg-white"),children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-[11px] font-semibold text-slate-900",children:Pe.title}),a.jsx("p",{className:"text-[10px] text-slate-600",children:Pe.description})]}),a.jsx("span",{className:ue("rounded border px-2 py-0.5 text-[10px] font-semibold",Pe.done?"border-emerald-300 bg-white text-emerald-700":At?"border-indigo-300 bg-white text-indigo-700":"border-slate-200 bg-white text-slate-600"),children:Pe.done?"":Ur?"":At?"":""})]},Pe.key)})}),ce.length>0?a.jsxs("div",{className:"mt-3 rounded-md border border-rose-200 bg-rose-50 p-2",children:[a.jsxs("p",{className:"text-[11px] font-semibold text-rose-700",children:["   ",ce.length,""]}),a.jsx("ul",{className:"mt-1 space-y-1",children:ce.map(Pe=>a.jsx("li",{children:a.jsxs("button",{type:"button",onClick:()=>Hf(Pe.key),className:"text-[11px] text-rose-700 underline decoration-dotted underline-offset-2",children:["- ",Pe.message]})},Pe.key))})]}):null,a.jsxs("div",{className:"mx-auto mt-3 max-w-[1100px] space-y-3 px-2 md:px-8",children:[Vr==="REVIEW"?a.jsxs("div",{id:"stage3-step2-panel-review",className:"space-y-3 rounded-md border border-slate-200 bg-slate-50 p-3",children:[a.jsxs("div",{className:"rounded-md border border-slate-200 bg-white p-2",children:[a.jsx("p",{className:"text-xs font-semibold text-slate-800",children:"  "}),a.jsx("ul",{className:"mt-1 space-y-1 text-[11px] text-slate-600",children:Ke.map(Pe=>a.jsxs("li",{children:[" ",Pe]},Pe))})]}),a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[a.jsx("p",{className:"text-xs font-semibold text-slate-800",children:"  "}),a.jsx("span",{className:"text-[10px] text-slate-500",children:"Stage1 /  "})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[a.jsx("button",{type:"button",onClick:()=>{Kn("CONTACT_EXECUTION","step2CallRecord"),Lt(Pe=>({...Pe,consultStarted:!0})),Kh()},className:"rounded border border-blue-200 bg-blue-50 px-2 py-1 text-[10px] font-semibold text-blue-700",children:" "}),a.jsx("button",{type:"button",onClick:()=>{const Pe=Q[0];Pe?(Hh(Pe),Lt(Be=>({...Be,consultStarted:!0})),ke.success("  .")):ke("   .")},className:"rounded border border-indigo-200 bg-indigo-50 px-2 py-1 text-[10px] font-semibold text-indigo-700",children:" "}),a.jsx("button",{type:"button",onClick:()=>{if(!ne.trim()){cc("CONTACT_EXECUTION",{...hn.CONTACT_EXECUTION,step2CallRecord:"   ."}),ke.error("    .");return}Kn("CONTACT_EXECUTION","step2CallRecord"),Lt(Pe=>({...Pe,infoCollected:!0})),Et(Pe=>({...Pe,note:ne.trim()})),qe(`Stage3   : ${ne.slice(0,60)}`)},className:"rounded border border-slate-200 bg-white px-2 py-1 text-[10px] font-semibold text-slate-700",children:"  "})]}),a.jsxs("label",{className:"text-[11px] text-slate-600",children:["  ()",a.jsx("textarea",{ref:os("step2CallRecord"),value:ne,onChange:Pe=>{Kn("CONTACT_EXECUTION","step2CallRecord"),se(Pe.target.value)},className:vi("CONTACT_EXECUTION","step2CallRecord","mt-1 h-14 w-full rounded-md border border-gray-200 px-2 py-1 text-[11px] outline-none focus:border-indigo-300"),placeholder:"    ."}),zr.step2CallRecord?a.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:zr.step2CallRecord}):null]}),a.jsx(m7,{stageLabel:"3",templates:Dh,defaultVars:{centerName:a_,centerPhone:_l,bookingLink:cg(w.reservationInfo)},caseId:w.header.caseId,citizenPhone:t?.profile.phone??"010-0000-0000",guardianPhone:t?.profile.guardianPhone,callScripts:_x,compact:!0,onConsultation:Tu,onSmsSent:Lh})]}):null,Vr==="BOOKING"||Vr==="RESULT"?a.jsxs("div",{id:"stage3-step2-panel-booking",className:"space-y-3 rounded-md border border-slate-200 bg-slate-50 p-3",children:[a.jsx("p",{className:"text-xs font-semibold text-slate-800",children:"/ "}),a.jsxs("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-2",children:[a.jsxs("label",{className:"text-[11px] text-slate-600",children:["/()",a.jsx("input",{ref:os("step2Hospital"),value:Re.preferredHospital,onChange:Pe=>{Kn("CONTACT_EXECUTION","step2Hospital"),Et(Be=>({...Be,preferredHospital:Pe.target.value}))},className:vi("CONTACT_EXECUTION","step2Hospital","mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-indigo-300")}),zr.step2Hospital?a.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:zr.step2Hospital}):null]}),a.jsxs("label",{className:"text-[11px] text-slate-600",children:[" ()",a.jsx("input",{ref:os("step2BookingAt"),type:"datetime-local",value:Fc(Re.bookingAt),onChange:Pe=>{Kn("CONTACT_EXECUTION","step2BookingAt"),Et(Be=>({...Be,bookingAt:Uc(Pe.target.value)||Be.bookingAt}))},className:vi("CONTACT_EXECUTION","step2BookingAt","mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-indigo-300")}),zr.step2BookingAt?a.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:zr.step2BookingAt}):null]})]}),a.jsxs("div",{ref:os("step2TestSelection"),className:ue("grid grid-cols-3 gap-2 rounded-md border border-slate-200 bg-white p-2 text-[11px] text-slate-700",zr.step2TestSelection?"border-rose-300 bg-rose-50":""),children:[a.jsxs("label",{className:"flex items-center gap-1",children:[a.jsx("input",{type:"checkbox",checked:Re.testBiomarker,onChange:Pe=>{Kn("CONTACT_EXECUTION","step2TestSelection"),Et(Be=>({...Be,testBiomarker:Pe.target.checked}))}}),""]}),a.jsxs("label",{className:"flex items-center gap-1",children:[a.jsx("input",{type:"checkbox",checked:Re.testBrainImaging,onChange:Pe=>{Kn("CONTACT_EXECUTION","step2TestSelection"),Et(Be=>({...Be,testBrainImaging:Pe.target.checked}))}}),""]}),a.jsxs("label",{className:"flex items-center gap-1",children:[a.jsx("input",{type:"checkbox",checked:Re.testOther,onChange:Pe=>{Kn("CONTACT_EXECUTION","step2TestSelection"),Et(Be=>({...Be,testOther:Pe.target.checked}))}})," "]})]}),zr.step2TestSelection?a.jsx("p",{className:"text-[10px] font-semibold text-rose-600",children:zr.step2TestSelection}):null,a.jsxs("details",{open:Dr,onToggle:Pe=>Tr(Pe.target.open),className:"rounded-md border border-slate-200 bg-white p-2",children:[a.jsx("summary",{className:"cursor-pointer text-[11px] font-semibold text-slate-700",children:" ()"}),a.jsxs("div",{className:"mt-2 grid grid-cols-1 gap-2 md:grid-cols-2",children:[a.jsxs("label",{className:"text-[11px] text-slate-600",children:["",a.jsx("input",{value:Re.orgPhone,onChange:Pe=>Et(Be=>({...Be,orgPhone:Pe.target.value})),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-indigo-300"})]}),a.jsxs("label",{className:"text-[11px] text-slate-600",children:[" ",a.jsx("input",{type:"datetime-local",value:Fc(Re.bookingAltAt),onChange:Pe=>Et(Be=>({...Be,bookingAltAt:Uc(Pe.target.value)||Be.bookingAltAt})),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-indigo-300"})]})]}),a.jsxs("label",{className:"mt-2 block text-[11px] text-slate-600",children:["/",a.jsx("textarea",{value:Re.prepGuide,onChange:Pe=>Et(Be=>({...Be,prepGuide:Pe.target.value})),className:"mt-1 h-14 w-full rounded-md border border-gray-200 px-2 py-1 text-[11px] outline-none focus:border-indigo-300"})]}),a.jsxs("label",{className:"mt-2 block text-[11px] text-slate-600",children:[" ",a.jsx("textarea",{value:Re.note,onChange:Pe=>Et(Be=>({...Be,note:Pe.target.value})),className:"mt-1 h-16 w-full rounded-md border border-gray-200 px-2 py-1 text-[11px] outline-none focus:border-indigo-300"})]})]}),a.jsxs("div",{className:"rounded-md border border-indigo-200 bg-white p-2",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-1",children:[a.jsx("button",{type:"button",onClick:Dx,className:"rounded border border-indigo-200 bg-indigo-50 px-2 py-1 text-[10px] font-semibold text-indigo-700",children:"RAG  "}),xt?a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",onClick:Jf,className:"rounded border border-emerald-200 bg-emerald-50 px-2 py-1 text-[10px] font-semibold text-emerald-700",children:""}),a.jsx("button",{type:"button",onClick:hd,className:"rounded border border-slate-200 bg-white px-2 py-1 text-[10px] font-semibold text-slate-700",children:""})]}):null]}),xt?a.jsxs("div",{className:"mt-2 rounded border border-slate-200 bg-slate-50 p-2 text-[10px] text-slate-600",children:[a.jsxs("p",{className:"font-semibold text-slate-800",children:[" ( )   ",xt.confidenceLabel]}),a.jsxs("p",{className:"mt-1",children:[" : ",xt.changedFields.join(", ")||""]}),xt.reasonSnippets.map(Pe=>a.jsxs("p",{className:"mt-0.5",children:["- ",Pe]},Pe))]}):null]}),a.jsxs("div",{className:"rounded-md border border-emerald-200 bg-emerald-50 p-2",children:[a.jsx("p",{className:"text-[10px] text-emerald-800",children:ae?"  :   +   +   +   ":"  :     +   +   +   "}),a.jsx("button",{type:"button",onClick:$h,disabled:!K,className:"mt-2 w-full rounded-md border border-emerald-300 bg-white px-2 py-1.5 text-[11px] font-semibold text-emerald-700 disabled:cursor-not-allowed disabled:opacity-60",children:ae?"   ":"   "}),K?null:a.jsx("p",{className:"mt-1 text-[10px] text-amber-700",children:"    ."})]}),a.jsxs("label",{id:"stage3-step2-panel-result",className:"flex items-center gap-1 text-[11px] font-semibold text-slate-700",children:[a.jsx("input",{type:"checkbox",checked:_o,onChange:Pe=>mn(Pe.target.checked)})," /    (Step3  )"]}),_o?a.jsxs("div",{className:"rounded-md border border-slate-200 bg-white p-2",children:[a.jsxs("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-2",children:[a.jsxs("label",{className:"text-[11px] text-slate-600",children:[" ()",a.jsx("input",{ref:os("step2PerformedAt"),type:"datetime-local",value:Fc(Re.resultPerformedAt),onChange:Pe=>{Kn("CONTACT_EXECUTION","step2PerformedAt"),Et(Be=>({...Be,resultPerformedAt:Uc(Pe.target.value)||""}))},className:vi("CONTACT_EXECUTION","step2PerformedAt","mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-indigo-300")}),zr.step2PerformedAt?a.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:zr.step2PerformedAt}):null]}),a.jsxs("label",{className:"text-[11px] text-slate-600",children:[" ",a.jsxs("select",{value:Re.resultLabel,onChange:Pe=>Et(Be=>({...Be,resultLabel:Pe.target.value})),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-indigo-300",children:[a.jsx("option",{value:" ",children:" "}),a.jsx("option",{value:" ",children:" "}),a.jsx("option",{value:"",children:""})]})]}),a.jsxs("label",{className:"text-[11px] text-slate-600",children:[" (",ae?"":"",")",a.jsx("input",{ref:os("step2BiomarkerResult"),value:Re.biomarkerResultText??"",onChange:Pe=>{Kn("CONTACT_EXECUTION","step2BiomarkerResult"),Et(Be=>({...Be,biomarkerResultText:Pe.target.value}))},className:vi("CONTACT_EXECUTION","step2BiomarkerResult","mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-indigo-300")}),zr.step2BiomarkerResult?a.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:zr.step2BiomarkerResult}):null]}),a.jsxs("label",{className:"text-[11px] text-slate-600",children:[" (",ae?"":"",")",a.jsx("input",{ref:os("step2ImagingResult"),value:Re.imagingResultText??"",onChange:Pe=>{Kn("CONTACT_EXECUTION","step2ImagingResult"),Et(Be=>({...Be,imagingResultText:Pe.target.value}))},className:vi("CONTACT_EXECUTION","step2ImagingResult","mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-indigo-300")}),zr.step2ImagingResult?a.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:zr.step2ImagingResult}):null]})]}),a.jsxs("label",{className:"mt-2 block text-[11px] text-slate-600",children:[" ()",a.jsx("textarea",{ref:os("step2ResultSummary"),value:Re.resultSummary,onChange:Pe=>{Kn("CONTACT_EXECUTION","step2ResultSummary"),Et(Be=>({...Be,resultSummary:Pe.target.value}))},className:vi("CONTACT_EXECUTION","step2ResultSummary","mt-1 h-16 w-full rounded-md border border-gray-200 px-2 py-1 text-[11px] outline-none focus:border-indigo-300"),placeholder:"  ."}),zr.step2ResultSummary?a.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:zr.step2ResultSummary}):null]}),a.jsx("button",{type:"button",onClick:()=>{const Pe={};if(Re.resultPerformedAt||(Pe.step2PerformedAt="   ."),ae&&!Re.biomarkerResultText?.trim()&&(Pe.step2BiomarkerResult="  ."),ae&&!Re.imagingResultText?.trim()&&(Pe.step2ImagingResult="  ."),Re.resultSummary.trim()||(Pe.step2ResultSummary="  ."),Object.keys(Pe).length>0){cc("CONTACT_EXECUTION",{...hn.CONTACT_EXECUTION,...Pe}),ke.error("    .");return}na(Be=>{const At={...Be.CONTACT_EXECUTION??{}};return delete At.step2PerformedAt,delete At.step2BiomarkerResult,delete At.step2ImagingResult,delete At.step2ResultSummary,{...Be,CONTACT_EXECUTION:At}}),ji("APPLY_RESULT"),ke.success("  .")},className:"mt-2 rounded border border-indigo-200 bg-indigo-50 px-3 py-1 text-[11px] font-semibold text-indigo-700",children:" / "})]}):null]}):null,Vr==="MODEL"?a.jsxs("div",{id:"stage3-step2-panel-model",className:"rounded-md border border-indigo-200 bg-indigo-50 p-3",children:[a.jsx("p",{className:"text-xs font-semibold text-indigo-900",children:"  "}),a.jsxs("p",{className:"mt-1 text-[11px] text-indigo-800",children:[" ",Sn.jobStatus,"   ",Math.round(Sn.progress),"%",Sn.updatedAt?`   ${mt(Sn.updatedAt)}`:""]}),a.jsx("div",{className:"mt-2 h-1.5 overflow-hidden rounded-full bg-indigo-100",children:a.jsx("div",{className:"h-full rounded-full bg-indigo-500 transition-all duration-700",style:{width:`${Math.round(Sn.progress)}%`}})}),a.jsx("button",{type:"button",onClick:()=>ji("APPLY_RESULT"),className:"mt-2 rounded border border-indigo-300 bg-white px-2 py-1 text-[10px] font-semibold text-indigo-700",children:"   "})]}):null,Vr==="TRANSITION"?a.jsxs("div",{id:"stage3-step2-panel-transition",className:"rounded-md border border-emerald-200 bg-emerald-50 p-3",children:[a.jsx("p",{className:"text-xs font-semibold text-emerald-900",children:"Stage3   "}),a.jsx("p",{className:"mt-1 text-[11px] text-emerald-800",children:wi?"  .    /  .":"        ."}),a.jsx("button",{type:"button",onClick:()=>qn(1),disabled:!wi,className:"mt-2 rounded border border-emerald-300 bg-white px-2 py-1 text-[10px] font-semibold text-emerald-700 disabled:cursor-not-allowed disabled:opacity-60",children:"Step3( /) "})]}):null]}),a.jsxs("div",{className:"mt-3 rounded-md border border-gray-200 bg-gray-50 p-2",children:[a.jsx("p",{className:"text-[11px] font-semibold text-slate-700",children:"  "}),a.jsxs("div",{className:"mt-1 space-y-1",children:[(w.stage3?.recommendedActions??[]).filter(Pe=>Pe.requiresApproval).map(Pe=>a.jsxs("div",{className:"flex items-center justify-between rounded border border-slate-200 bg-white px-2 py-1",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-[11px] font-semibold text-slate-800",children:Pe.title}),a.jsx("p",{className:"text-[10px] text-slate-500",children:Pe.reason})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>Zf(Pe.id,"APPROVED"),className:"rounded border border-emerald-200 bg-emerald-50 px-1.5 py-0.5 text-[10px] font-semibold text-emerald-700",children:""}),a.jsx("button",{onClick:()=>Zf(Pe.id,"HOLD"),className:"rounded border border-slate-200 bg-white px-1.5 py-0.5 text-[10px] font-semibold text-slate-700",children:""})]})]},Pe.id)),(w.stage3?.recommendedActions??[]).filter(Pe=>Pe.requiresApproval).length===0?a.jsx("p",{className:"rounded border border-slate-200 bg-white px-2 py-1 text-[10px] text-slate-500",children:"   ."}):null]})]})]})})():null,rr==="RESPONSE_HANDLING"?u?a.jsxs("section",{className:"rounded-lg border border-gray-200 bg-white p-4",children:[a.jsx("h4",{className:"text-sm font-bold text-slate-900",children:" "}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-600",children:"/MCI/    .     ."}),a.jsx("div",{className:"mt-3",children:a.jsx(Wb,{items:qb.RESPONSE_HANDLING})}),(()=>{const P=fd.filter(ae=>ae.key==="classification"||ae.key==="rationale"||ae.key==="overrideReason"||ae.key==="mmse"||ae.key==="cdr"||ae.key==="neuro"||ae.key==="specialist"),K=[...w.timeline.filter(ae=>ae.type==="STAGE2_PLAN_CONFIRMED"||ae.type==="STAGE2_RESULTS_RECORDED"||ae.type==="DIFF_RESULT_APPLIED"||ae.type==="STAGE2_CLASS_CONFIRMED"||ae.type==="INFERENCE_STARTED"||ae.type==="INFERENCE_COMPLETED"||ae.type==="INFERENCE_FAILED").slice(0,6).map(ae=>({at:ae.at,label:Ay(ae),summary:ae.summary})),...Kr.updatedAt?[{at:Kr.updatedAt,label:Kr.jobStatus==="RUNNING"?"  ":Kr.jobStatus==="DONE"?"  ":Kr.jobStatus==="FAILED"?"  ":"  ",summary:Kr.jobStatus==="DONE"?`  ${Qs??"-"}`:"      ."}]:[]].sort((ae,Ke)=>new Date(ae.at).getTime()-new Date(Ke.at).getTime()).slice(-6),Q=Kr.jobStatus==="DONE"?"bg-emerald-50 border-emerald-200 text-emerald-700":Kr.jobStatus==="RUNNING"?"bg-blue-50 border-blue-200 text-blue-700":Kr.jobStatus==="FAILED"?"bg-rose-50 border-rose-200 text-rose-700":"bg-slate-100 border-slate-200 text-slate-700",ce=Na&&Oi;return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mt-3 rounded-md border border-slate-200 bg-slate-50 p-3",children:[a.jsx("p",{className:"text-xs font-semibold text-slate-800",children:"Stage2  "}),a.jsx("div",{className:"mt-2 space-y-1.5",children:K.length>0?K.map(ae=>a.jsxs("div",{className:"rounded border border-slate-200 bg-white px-2 py-1.5 text-[10px]",children:[a.jsx("p",{className:"font-semibold text-slate-700",children:ae.label}),a.jsx("p",{className:"text-slate-500",children:mt(ae.at)}),a.jsx("p",{className:"text-slate-600",children:ae.summary})]},`${ae.at}-${ae.label}`)):a.jsx("p",{className:"rounded border border-slate-200 bg-white px-2 py-1 text-[10px] text-slate-500",children:"   ."})})]}),a.jsxs("div",{className:"mt-3 rounded-md border border-indigo-200 bg-indigo-50 p-3",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[a.jsx("p",{className:"text-xs font-semibold text-indigo-900",children:"  "}),a.jsx("span",{className:ue("rounded border px-2 py-0.5 text-[10px] font-semibold",Q),children:Kr.jobStatus})]}),a.jsxs("p",{className:"mt-1 text-[11px] text-indigo-800",children:[" : ",Qs??"","   ",mt(Kr.updatedAt)]}),Kr.jobStatus==="RUNNING"?a.jsxs("div",{className:"mt-2 rounded-md border border-blue-200 bg-white px-2 py-2",children:[a.jsxs("div",{className:"flex items-center justify-between text-[10px] text-blue-700",children:[a.jsx("span",{children:"   "}),a.jsxs("span",{children:[Math.round(Kr.progress),"%"]})]}),a.jsx("div",{className:"mt-1 h-1.5 overflow-hidden rounded-full bg-blue-100",children:a.jsx("div",{className:"h-full rounded-full bg-blue-500 transition-all duration-700",style:{width:`${Math.round(Kr.progress)}%`}})}),a.jsxs("p",{className:"mt-1 text-[10px] text-blue-700",children:["ETA ",hO(Kr.etaSeconds),Kr.buffered?"   ()":""]})]}):null,Kr.jobStatus==="FAILED"?a.jsxs("div",{className:"mt-2 rounded-md border border-rose-200 bg-white px-2 py-2 text-[10px] text-rose-700",children:[a.jsx("p",{children:"  .     ."}),a.jsx("button",{type:"button",onClick:()=>{const ae=ut();ht(Ke=>({...Ke,status:"RUNNING",startedAt:ae,updatedAt:ae,completedAt:void 0,progress:4,etaSeconds:null,failureReason:void 0,recommendedLabel:Ke.recommendedLabel??n_(tt.tests)})),Xe({type:"INFERENCE_REQUESTED",stage:2,at:ae,by:w.header.assigneeName,summary:"Stage2   "}),Xe({type:"INFERENCE_STARTED",stage:2,at:ae,by:w.header.assigneeName,summary:"Stage2   "}),qe("Stage2   ")},className:"mt-2 rounded border border-rose-300 bg-white px-2 py-1 text-[10px] font-semibold text-rose-700",children:""})]}):null,a.jsx("p",{className:"text-[10px] text-indigo-700",children:"   ,      ."})]}),P.length>0?a.jsxs("div",{className:"mt-3 rounded-md border border-rose-200 bg-rose-50 p-2",children:[a.jsx("p",{className:"text-[11px] font-semibold text-rose-700",children:"/ "}),a.jsx("ul",{className:"mt-1 space-y-1",children:P.map(ae=>a.jsx("li",{children:a.jsxs("button",{type:"button",onClick:()=>oc(ae.key),className:"text-[11px] text-rose-700 underline decoration-dotted underline-offset-2",children:["- ",ae.message]})},ae.key))})]}):null,a.jsx("div",{className:"mt-3 rounded-md border border-slate-200 bg-slate-50 p-3",children:ce?a.jsx(Wz,{probs:Oi,predictedLabel:Qs??V,mciSeverity:to,mciScore:(Qs??V)==="MCI"?to===""?82:to===""?34:58:void 0}):a.jsx(sf,{stage:2,missing:_,onOpenStep:Ec})}),a.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-2 md:grid-cols-2",children:[a.jsxs("label",{className:"text-[11px] text-slate-600",children:[" ",a.jsxs("select",{ref:Dt("classification"),value:V,onChange:ae=>{const Ke=ae.target.value;Gr("classification"),Gr("overrideReason"),pt(!0),de(Ke),Qs&&Ke===Qs&&ft("")},className:Xa("classification","mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-xs outline-none focus:border-blue-300"),children:[a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"MCI",children:"MCI"}),a.jsx("option",{value:"",children:""})]}),Mr.classification?a.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:Mr.classification}):null,ot?a.jsx("p",{className:"mt-1 text-[10px] font-semibold text-indigo-700",children:"   ."}):null]}),a.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 px-3 py-2 text-[11px] text-slate-700",children:[a.jsxs("p",{className:"font-semibold",children:[a.jsx(W0,{term:"ANN"})," "]}),a.jsx("p",{className:"mt-1",children:V==="MCI"?to??" ":"-"})]})]}),Lu?a.jsxs("label",{className:"mt-2 block text-[11px] text-slate-600",children:["    ()",a.jsx("textarea",{ref:Dt("overrideReason"),value:De,onChange:ae=>{Gr("overrideReason"),ft(ae.target.value)},className:Xa("overrideReason","mt-1 h-16 w-full rounded-md border border-gray-200 px-2 py-1 text-xs outline-none focus:border-blue-300"),placeholder:"      ."}),Mr.overrideReason?a.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:Mr.overrideReason}):null]}):null,a.jsxs("label",{className:"mt-3 block text-[11px] text-slate-600",children:["  1()",a.jsx("textarea",{ref:Dt("rationale"),value:Kt,onChange:ae=>{Gr("rationale"),qt(ae.target.value)},className:Xa("rationale","mt-1 h-20 w-full rounded-md border border-gray-200 px-2 py-1 text-xs outline-none focus:border-blue-300"),placeholder:": MMSE __, CDR/GDS __,  __   __ ."}),Mr.rationale?a.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:Mr.rationale}):null]}),Ti?null:a.jsxs("div",{className:"mt-2 rounded-md border border-amber-200 bg-amber-50 px-3 py-2 text-[11px] text-amber-800",children:[Sc.map(ae=>a.jsxs("p",{children:["- ",ae]},ae)),up?a.jsx("p",{children:"-      ."}):null,a.jsx("button",{type:"button",onClick:Ec,className:"mt-2 rounded border border-amber-300 bg-white px-2 py-1 text-[10px] font-semibold text-amber-700",children:"   "})]}),a.jsxs("button",{onClick:Cu,disabled:!Ti,className:"mt-3 inline-flex items-center gap-1 rounded-md bg-[#163b6f] px-3 py-1.5 text-xs font-semibold text-white hover:bg-[#112f5a] disabled:opacity-50",children:[a.jsx(Yl,{size:13}),"  "]})]})})()]}):a.jsxs("section",{className:"rounded-lg border border-gray-200 bg-white p-4",children:[a.jsx("h4",{className:"text-sm font-bold text-slate-900",children:g?.source.profile?.stage3Type==="AD_MANAGEMENT"?"   ":"    /"}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-600",children:" /        ."}),Xs?Sn.jobStatus==="FAILED"?a.jsxs("div",{className:"mt-3 rounded-md border border-rose-200 bg-rose-50 p-3 text-[11px] text-rose-800",children:["  : ",bt.failureReason??" ",a.jsx("button",{type:"button",onClick:()=>ji("APPLY_RESULT"),className:"mt-2 block rounded border border-rose-300 bg-white px-2 py-1 text-[10px] font-semibold text-rose-700",children:""})]}):Sn.jobStatus!=="DONE"?a.jsxs("div",{className:"mt-3 rounded-md border border-blue-200 bg-blue-50 p-3 text-[11px] text-blue-800",children:[a.jsx("p",{className:"font-semibold",children:"   "}),a.jsxs("p",{className:"mt-1",children:[" ",Math.round(Sn.progress),"%  ETA ",hO(Sn.etaSeconds),Sn.buffered?"   ()":""]}),a.jsx("div",{className:"mt-2 h-1.5 overflow-hidden rounded-full bg-blue-100",children:a.jsx("div",{className:"h-full rounded-full bg-blue-500 transition-all duration-700",style:{width:`${Math.round(Sn.progress)}%`}})}),a.jsx("button",{type:"button",onClick:()=>ji("APPLY_RESULT"),className:"mt-2 block rounded border border-blue-300 bg-white px-2 py-1 text-[10px] font-semibold text-blue-700",children:Sn.jobStatus==="RUNNING"?"  ":"  "})]}):wi?a.jsxs("div",{className:"mt-3 space-y-3",children:[a.jsxs("div",{className:"rounded-md border border-indigo-200 bg-indigo-50 p-3",children:[a.jsxs("p",{className:"text-xs font-semibold text-indigo-900",children:[g?.source.profile?.stage3Type==="AD_MANAGEMENT"?" ":"2  "," ",Ko(w.stage3?.transitionRisk.risk2y_now??0),"%"]}),a.jsxs("p",{className:"mt-1 text-[11px] text-indigo-800",children:[" ",eh(w.stage3?.transitionRisk.risk2y_now??0),"   ",w.stage3?.transitionRisk.trend,"  "," ",w.stage3?.transitionRisk.modelVersion]}),w.stage3?a.jsx(cq,{risk:w.stage3.transitionRisk,stage2OpsView:!1,stage3Type:x}):null]}),a.jsxs("div",{className:"grid grid-cols-1 gap-3 xl:grid-cols-2",children:[a.jsxs("label",{className:"text-[11px] text-slate-600",children:["  ()",a.jsx("textarea",{value:ra.memo,onChange:P=>fi(K=>({...K,memo:P.target.value})),className:"mt-1 h-24 w-full rounded-md border border-gray-200 px-2 py-1 text-[11px] outline-none focus:border-indigo-300",placeholder:"  /,     ."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[11px] text-slate-600",children:" "}),a.jsx("select",{value:ra.nextAction,onChange:P=>fi(K=>({...K,nextAction:P.target.value})),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-indigo-300",children:Object.entries(zb).map(([P,K])=>a.jsx("option",{value:P,children:K},P))}),a.jsx("button",{onClick:()=>Ys({summary:` : ${ra.memo||" "}   : ${zb[ra.nextAction]}`,nextAction:ra.nextAction}),className:"mt-3 rounded-md border border-indigo-200 bg-indigo-50 px-3 py-1.5 text-[11px] font-semibold text-indigo-700 hover:bg-indigo-100",children:"  "})]})]})]}):a.jsxs("div",{className:"mt-3 rounded-md border border-amber-200 bg-amber-50 p-3 text-[11px] text-amber-800",children:["  ",w.stage3?.diffPathStatus??"NONE"," . STEP2  /    ."]}):a.jsx("div",{className:"mt-3",children:a.jsx(sf,{stage:3,missing:A.length>0?A:["  "," "," "," "],onOpenStep:jc})})]}):null,rr==="FOLLOW_UP"?u?a.jsxs("section",{className:"space-y-3 rounded-lg border border-gray-200 bg-white p-4",children:[a.jsx("h4",{className:"text-sm font-bold text-slate-900",children:"  "}),a.jsx("p",{className:"text-[11px] text-gray-600",children:"     /Stage3 /   1  ."}),a.jsx(Wb,{items:qb.FOLLOW_UP}),a.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 p-3",children:[a.jsx("p",{className:"text-xs font-semibold text-slate-800",children:"  "}),a.jsxs("p",{className:"mt-1 text-[11px] text-slate-600",children:[" : ",fn,fn==="MCI"&&Zi?` (${Zi})`:""]}),a.jsxs("div",{className:"mt-2 grid grid-cols-1 gap-2 md:grid-cols-3",children:[a.jsx("button",{onClick:()=>md("FOLLOWUP_2Y","  2    "),disabled:!$n||fn!=="",className:"rounded-md border border-slate-200 bg-white px-2 py-1.5 text-[11px] font-semibold text-slate-700 disabled:opacity-50",children:"  2  "}),a.jsx("button",{onClick:()=>md("STAGE3","MCI/  Stage3  "),disabled:!$n||!s_(fn),className:"rounded-md border border-blue-200 bg-blue-50 px-2 py-1.5 text-[11px] font-semibold text-blue-700 disabled:opacity-50",children:"MCI  Stage3 "}),a.jsx("button",{onClick:()=>md("DIFF_PATH","    "),disabled:!$n||fn!=="",className:"rounded-md border border-rose-200 bg-rose-50 px-2 py-1.5 text-[11px] font-semibold text-rose-700 disabled:opacity-50",children:"   "})]})]}),a.jsxs("div",{className:"rounded-md border border-indigo-200 bg-indigo-50 p-3",children:[a.jsx("p",{className:"text-xs font-semibold text-indigo-900",children:" ()"}),a.jsx("p",{className:"mt-1 text-[11px] text-indigo-800",children:" /     .   /  ."})]})]}):a.jsxs("section",{className:"space-y-3 rounded-lg border border-gray-200 bg-white p-4",children:[a.jsx("h4",{className:"text-sm font-bold text-slate-900",children:" ()"}),a.jsx("p",{className:"text-[11px] text-gray-600",children:"   UI  /    ."}),a.jsxs("div",{className:"rounded-md border border-slate-200 bg-white p-3",children:[a.jsxs("p",{className:"mb-2 text-[11px] text-slate-600",children:["  ,    UI / .",a.jsx("span",{className:"ml-1 font-semibold text-slate-800",children:"  3  "}),"  ."]}),Yr?a.jsx(Mwe,{caseId:w.header.caseId,stage:3,resultLabel:Mu,mciSeverity:Ts,riskTags:w.header.riskGuardrails??[],actorName:w.header.assigneeName}):a.jsx(sf,{stage:2,missing:_,onOpenStep:Ec})]}),a.jsxs("div",{className:"rounded-md border border-indigo-200 bg-indigo-50 p-3",children:[a.jsx("p",{className:"text-xs font-semibold text-indigo-900",children:"  "}),a.jsxs("div",{className:"mt-2 grid grid-cols-1 gap-2 md:grid-cols-2",children:[a.jsxs("label",{className:"text-[11px] text-indigo-800",children:["  ",a.jsx("input",{type:"datetime-local",value:Fc(Mn.nextTrackingAt),onChange:P=>Ir(K=>({...K,nextTrackingAt:Uc(P.target.value)||K.nextTrackingAt})),className:"mt-1 h-8 w-full rounded-md border border-indigo-200 px-2 text-[11px] outline-none focus:border-indigo-400"})]}),a.jsxs("label",{className:"text-[11px] text-indigo-800",children:[" ",a.jsx("input",{type:"time",value:Mn.reminderTime,onChange:P=>Ir(K=>({...K,reminderTime:P.target.value})),className:"mt-1 h-8 w-full rounded-md border border-indigo-200 px-2 text-[11px] outline-none focus:border-indigo-400"})]})]})]})]}):null,a.jsxs("div",{className:"sticky bottom-0 z-10 flex flex-wrap items-center justify-end gap-2 rounded-lg border border-slate-200 bg-white/95 p-3 backdrop-blur",children:[a.jsx("button",{onClick:ro,className:"rounded-md border border-gray-200 px-3 py-1.5 text-xs font-semibold text-gray-700",children:""}),a.jsx("button",{onClick:()=>qn(-1),disabled:ml<=0,className:"rounded-md border border-gray-200 px-3 py-1.5 text-xs font-semibold text-gray-700 disabled:opacity-40",children:""}),a.jsx("button",{onClick:()=>{if(u&&rr==="CONTACT_EXECUTION"){Gu();return}qn(1)},disabled:ml<0||ml>=Yi.length-1,className:"rounded-md border border-gray-200 px-3 py-1.5 text-xs font-semibold text-gray-700 disabled:opacity-40",children:""}),a.jsx("button",{onClick:Gu,className:"rounded-md bg-[#15386a] px-3 py-1.5 text-xs font-semibold text-white",children:" "})]})]})})}),a.jsx(gf,{open:!d&&!!$,onOpenChange:P=>{P||xl()},children:a.jsx(xf,{className:"w-[96vw] max-w-[96vw] sm:max-w-[1700px] max-h-[92vh] overflow-y-auto p-4",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"rounded-lg border border-indigo-200 bg-indigo-50 p-3",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm font-bold text-indigo-900",children:[l?"Stage2 ":"Stage1 ","  ",bc?.title??" "]}),a.jsx("p",{className:"text-[11px] text-indigo-700",children:l?"        .":"        ."})]}),a.jsxs("span",{className:"rounded-md border border-indigo-300 bg-white px-2 py-1 text-[11px] font-semibold text-indigo-700",children:[" ",ip+1,"/",xc.length]})]}),a.jsx("div",{className:"mt-2 grid grid-cols-2 gap-1.5 md:grid-cols-4",children:xc.map((P,K)=>{const Q=ia.find(ae=>ae.id===P),ce=$===P;return a.jsxs("button",{type:"button",onClick:()=>{const ae=Lp(ia,P);if(ae){ke.error(ae);return}gl(P)},className:ue("rounded-md border px-2 py-1.5 text-left text-[11px]",ce?"border-indigo-300 bg-white text-indigo-800":"border-indigo-100 bg-indigo-50/60 text-indigo-700"),children:[a.jsxs("p",{className:"font-semibold",children:["STEP ",K+1]}),a.jsx("p",{className:"mt-0.5 truncate",children:Q?.title??P})]},P)})})]}),$==="PRECHECK"?a.jsxs("section",{className:"rounded-lg border border-gray-200 bg-white p-4",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:l?"2   ":"  "}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:l?"/  ,      .":"  ,       ."}),a.jsx("div",{className:"mt-3",children:a.jsx(b_e,{gates:w.policyGates,onFix:kx,mode:s})})]}):null,$==="CONTACT_EXECUTION"?a.jsxs("section",{className:"space-y-3 rounded-lg border border-gray-200 bg-white p-4",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:l?"/ ":" "}),a.jsx("p",{className:"text-[11px] text-slate-600",children:l?"       .":"     ."})]}),a.jsx("span",{className:ue("rounded-full border px-2.5 py-1 text-[11px] font-semibold",vO[w.contactExecutor]),children:bo[w.contactExecutor]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-3 xl:grid-cols-[minmax(340px,0.8fr)_minmax(600px,1.2fr)]",children:[a.jsx(p_e,{loading:ws,recommendations:ba,selectedId:Tn,editedScript:Bi,onSelect:Hh,onEditScript:Gi}),w.contactExecutor==="HUMAN"?a.jsx(m7,{stageLabel:m,templates:Dh,defaultVars:{centerName:a_,centerPhone:_l,bookingLink:cg(w.reservationInfo)},caseId:w.header.caseId,citizenPhone:t?.profile.phone?l||d?t.profile.phone:Xo(t.profile.phone):"010-****-1234",guardianPhone:t?.profile.guardianPhone?l||d?t.profile.guardianPhone:Xo(t.profile.guardianPhone):void 0,callScripts:_x,onSmsSent:P=>{if(P.type==="BOOKING"&&!w.reservationInfo){ke.error("       ."),qe("  :   ");return}if(Xe({type:"SMS_SENT",at:ut(),templateId:P.templateLabel,status:P.status==="SENT"?"DELIVERED":P.status==="SCHEDULED"?"PENDING":"FAILED",by:w.header.assigneeName}),qe(`${m}  ${P.mode==="NOW"?"":""}: ${P.templateLabel} (${P.status})`),P.status==="SENT"){if(!l&&!d){Rx(P).then(K=>{K||(Ei("SMS"),Mt(gt(48)),L(Q=>{const ce={...Q.contactExecution,status:"SENT",lastSentAt:ut(),retryCount:Q.contactExecution.retryCount+1};return{...Q,contactExecution:ce,contactFlowSteps:si(ce,Q.preTriageResult,Q.linkageStatus,s)}}))});return}Ei("SMS"),Mt(gt(48)),L(K=>{const Q={...K.contactExecution,status:"SENT",lastSentAt:ut(),retryCount:K.contactExecution.retryCount+1};return{...K,contactExecution:Q,contactFlowSteps:si(Q,K.preTriageResult,K.linkageStatus,s)}})}},onConsultation:(P,K,Q)=>{Xe({type:"CALL_ATTEMPT",at:ut(),result:"SUCCESS",note:P||void 0,by:w.header.assigneeName});const ce=Ni?` /  : ${Ni.title}`:"";qe(`${m}  : ${Q}${P?` (${P.slice(0,60)})`:""}${ce}`),K==="CONTACT"&&Ei("CALL"),L(ae=>{const Ke={...ae.contactExecution,status:"WAITING_RESPONSE",lastSentAt:ut(),retryCount:ae.contactExecution.retryCount+1};return{...ae,contactExecution:Ke,contactFlowSteps:si(Ke,ae.preTriageResult,ae.linkageStatus,s)}}),ke.success("  .")}}):a.jsxs("section",{className:"rounded-xl border border-violet-200 bg-violet-50/70 p-4",children:[a.jsx("h4",{className:"text-sm font-bold text-violet-900",children:"Agent   "}),a.jsx("p",{className:"mt-1 text-[11px] text-violet-700",children:"       .      ."}),a.jsxs("div",{className:"mt-3 rounded-lg border border-violet-200 bg-white p-3 text-xs text-slate-700",children:[a.jsxs("p",{children:[" : ",a.jsx("strong",{children:rq[Hr.status]})]}),a.jsxs("p",{className:"mt-1",children:[" : ",a.jsx("strong",{children:oa==="PASS"?"":oa==="NEEDS_CHECK"?" ":""})]}),a.jsxs("p",{className:"mt-1",children:[" : ",a.jsx("strong",{children:Hr.attemptNo||w.contactExecution.retryCount+1})]}),a.jsxs("p",{children:[" :"," ",a.jsx("strong",{children:w.agentExecutionLogs[0]?`${mt(w.agentExecutionLogs[0].at)}  ${ak[w.agentExecutionLogs[0].result]}`:" "})]}),Hr.idempotencyKey?a.jsxs("p",{className:"mt-1",children:["  : ",a.jsx("strong",{children:Hr.idempotencyKey})]}):null,Hr.lastError?a.jsxs("p",{className:"mt-1 text-red-700",children:[" : ",a.jsx("strong",{children:Hr.lastError})]}):null,Hr.nextRetryAt?a.jsxs("p",{className:"mt-1",children:[" : ",a.jsx("strong",{children:mt(Hr.nextRetryAt)})]}):null,a.jsx("p",{className:"mt-1",children:"STEP3/STEP4     ."})]}),a.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-2 md:grid-cols-2",children:[a.jsx("button",{onClick:()=>ke(" Agent   ."),className:"rounded-md border border-violet-200 bg-violet-50 px-3 py-2 text-xs font-semibold text-violet-700",children:"Agent   "}),(Hr.status==="FAILED"||Hr.status==="CANCELED")&&oa==="PASS"?a.jsx("button",{onClick:Uu,className:"rounded-md border border-emerald-200 bg-emerald-50 px-3 py-2 text-xs font-semibold text-emerald-700",children:" "}):null,Hr.status==="FAILED"&&oa==="PASS"?a.jsx("button",{onClick:Bu,className:"rounded-md border border-amber-200 bg-amber-50 px-3 py-2 text-xs font-semibold text-amber-700",children:" "}):null,Hr.status==="QUEUED"||Hr.status==="RUNNING"?a.jsx("button",{onClick:()=>wc({actor:"operator",summary:"  Agent  .",moveToHuman:!1}),className:"rounded-md border border-rose-200 bg-rose-50 px-3 py-2 text-xs font-semibold text-rose-700",children:" "}):null,a.jsx("button",{onClick:()=>ep("HUMAN"),className:"rounded-md border border-slate-300 bg-white px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-50",children:"   "})]})]})]})]}):null,$==="RESPONSE_HANDLING"?a.jsxs("section",{className:"rounded-lg border border-gray-200 bg-white p-4",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:" "}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:"     //   ."}),a.jsx("div",{className:"mt-3",children:a.jsx(l_,{expanded:!0,onToggle:xl,executionStatus:w.contactExecution.status,lastSentAt:w.contactExecution.lastSentAt,assigneeName:w.header.assigneeName,selectedOutcomeCode:br,onSelectOutcomeCode:pc,reasonTags:Fr,onToggleReasonTag:sn,rejectReasonDraft:an,onRejectReasonDraftChange:rp,noResponsePlanDraft:un,onNoResponsePlanDraftChange:np,outcomeNote:cn,onOutcomeNoteChange:qh,isSaving:cl,submitError:Ph,validationError:Va,onClearError:Wi,onReset:xd,onConfirm:mc,hasUnsavedChanges:fa,lastSavedAt:js,onOpenHandoffMemo:()=>Cs(!0),mode:s})})]}):null,$==="FOLLOW_UP"?a.jsxs("section",{className:"space-y-3 rounded-lg border border-gray-200 bg-white p-4",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:l?"/":" "}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:l?"   ,   ,    .":"  ///     ."}),a.jsx(m_e,{draft:Ut,reservationInfo:w.reservationInfo,onChange:Co,onSave:tp}),a.jsx(O7,{linkageStatus:w.linkageStatus,reservationInfo:w.reservationInfo,onAction:Qf,mode:s}),a.jsx(x_e,{mode:s,execution:w.contactExecution,strategy:ls,preTriageReady:ap,strategyDecided:!!w.preTriageResult?.strategy,hasVulnerableGuardrail:!!w.header.riskGuardrails?.length,linkageStatus:w.linkageStatus,onOpenSmsModal:()=>Rs("CONTACT_EXECUTION"),onOpenOutcomeTriage:()=>Rs("RESPONSE_HANDLING"),onOpenHandoffMemo:()=>Cs(!0),onOpenStrategyOverride:()=>hr(!0)}),a.jsx(R7,{expanded:jx||!!w.contactExecution.handoffMemo,onToggle:()=>Cs(P=>!P),memoText:Kf,onMemoChange:Oh,onSave:()=>{qe(`  : ${Kf.slice(0,80)}...`),ke.success("  ."),Cs(!1)},mode:s}),a.jsx(u_,{level:w.interventionLevel,statusLabel:w.header.statusLabel,guides:Wf,onChangeLevel:Xf,onHold:()=>fc(""),onExclude:()=>fc(" "),mode:s})]}):null,a.jsxs("div",{className:"sticky bottom-0 z-10 flex flex-wrap items-center justify-end gap-2 rounded-lg border border-slate-200 bg-white/95 p-3 backdrop-blur",children:[a.jsx("button",{onClick:xl,className:"rounded-md border border-gray-200 px-3 py-1.5 text-xs font-semibold text-gray-700",children:""}),a.jsx("button",{onClick:()=>Js(-1),disabled:ip<=0,className:"rounded-md border border-gray-200 px-3 py-1.5 text-xs font-semibold text-gray-700 disabled:opacity-40",children:""}),a.jsx("button",{onClick:()=>Js(1),disabled:ip<0||ip>=xc.length-1,className:"rounded-md border border-gray-200 px-3 py-1.5 text-xs font-semibold text-gray-700 disabled:opacity-40",children:""}),a.jsx("button",{onClick:$x,className:"rounded-md bg-[#15386a] px-3 py-1.5 text-xs font-semibold text-white",children:" "})]})]})})}),a.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between border-b border-gray-100 pb-2",children:[a.jsxs("h3",{className:"text-sm font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(ha,{size:15,className:"text-slate-500"}),"    "]}),a.jsx("span",{className:"rounded-full border border-emerald-200 bg-emerald-50 px-2 py-0.5 text-[11px] font-semibold text-emerald-700",children:"  "})]}),a.jsx("div",{className:"mt-3 overflow-x-auto",children:a.jsxs("table",{className:"min-w-full border-collapse text-xs",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-50 text-gray-600",children:[a.jsx("th",{className:"border border-gray-200 px-3 py-2 text-left font-semibold",children:""}),a.jsx("th",{className:"border border-gray-200 px-3 py-2 text-left font-semibold",children:""}),a.jsx("th",{className:"border border-gray-200 px-3 py-2 text-left font-semibold",children:""}),a.jsx("th",{className:"border border-gray-200 px-3 py-2 text-left font-semibold",children:""})]})}),a.jsx("tbody",{children:H.map(P=>{const[K,...Q]=P.message.split(":"),ce=Q.join(":").trim();return a.jsxs("tr",{className:"odd:bg-white even:bg-gray-50/60",children:[a.jsx("td",{className:"border border-gray-200 px-3 py-2 text-gray-600",children:P.at}),a.jsx("td",{className:"border border-gray-200 px-3 py-2 text-gray-700",children:P.actor}),a.jsx("td",{className:"border border-gray-200 px-3 py-2 font-semibold text-slate-800",children:K.trim()}),a.jsx("td",{className:"border border-gray-200 px-3 py-2 text-gray-600",children:ce||"-"})]},P.id)})})]})})]}),a.jsx(D_e,{draft:ye,onClose:()=>pe(null),onChangeReason:P=>pe(K=>K&&{...K,reason:P}),onConfirm:ul}),a.jsx(I_e,{draft:he,loading:Me,onClose:()=>{Me||rt(null)},onChangeResult:P=>rt(K=>K&&(K.mode==="CALL"?{...K,result:P}:{...K,result:P})),onChangeNote:P=>rt(K=>K&&{...K,note:P}),onConfirm:zh}),Xt&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/35 p-4",children:a.jsxs("div",{className:"w-full max-w-md rounded-xl border border-gray-200 bg-white p-5 shadow-2xl",children:[a.jsxs("h3",{className:"text-sm font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(Qo,{size:15,className:"text-amber-600"}),"   "]}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:qAe}),w.header.riskGuardrails&&w.header.riskGuardrails.length>0&&a.jsxs("div",{className:"mt-3 rounded-lg border border-amber-200 bg-amber-50 p-3",children:[a.jsxs("p",{className:"text-[11px] font-semibold text-amber-800 flex items-center gap-1",children:[a.jsx(ss,{size:12}),"   "]}),a.jsx("ul",{className:"mt-1 space-y-0.5",children:w.header.riskGuardrails.map(P=>a.jsxs("li",{className:"text-[11px] text-amber-700",children:[" ",P]},P))}),xr==="AI_FIRST"?a.jsx("p",{className:"mt-2 text-[10px] font-semibold text-amber-900",children:"          ."}):null]}),a.jsxs("div",{className:"mt-3",children:[a.jsx("label",{className:"text-[11px] font-semibold text-gray-600",children:"  "}),a.jsx("div",{className:"mt-1 grid grid-cols-2 gap-2",children:["HUMAN_FIRST","AI_FIRST"].map(P=>a.jsx("button",{onClick:()=>mr(P),className:ue("rounded-lg border-2 px-3 py-2 text-xs font-semibold transition-colors",xr===P?A7[P].replace("bg-","border-").split(" ")[0]+" "+A7[P]:"border-gray-200 bg-gray-50 text-gray-500"),children:qd[P]},P))})]}),a.jsxs("div",{className:"mt-3",children:[a.jsx("label",{className:"text-[11px] font-semibold text-gray-600",children:"  ()"}),a.jsx("textarea",{value:Gt,onChange:P=>sr(P.target.value),className:"mt-1 h-20 w-full rounded-lg border border-gray-200 px-2 py-1.5 text-xs outline-none focus:border-blue-400",placeholder:"    (  )"})]}),a.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[a.jsx("button",{onClick:()=>hr(!1),className:"rounded-md border border-gray-200 px-3 py-1.5 text-xs font-semibold text-gray-700",children:""}),a.jsx("button",{onClick:ZN,disabled:!Gt.trim(),className:"rounded-md bg-[#163b6f] px-3 py-1.5 text-xs font-semibold text-white disabled:bg-gray-300",children:"  "})]})]})})]})}function f_e({strategy:e,strategyBadge:t,contactExecutor:r,executionStatus:n,lastSentAt:s,lastOutcome:i,retryCount:o,linkageStatus:l,memoCount:d,lastContactAt:u,timelineCount:m,preTriage:p,riskGuardrails:g,onOpenStrategyOverride:x,mode:y="stage1",stage2OpsView:N=!1}){const[v,S]=h.useState(null),E=y==="stage3",C=E&&N,_={NOT_STARTED:{label:"",tone:"text-gray-600"},SENT:{label:"",tone:"text-blue-700"},WAITING_RESPONSE:{label:"",tone:"text-amber-700"},RETRY_NEEDED:{label:"",tone:"text-orange-700"},HANDOFF_TO_HUMAN:{label:"",tone:"text-red-700"},PAUSED:{label:"",tone:"text-gray-600"},STOPPED:{label:"",tone:"text-red-700"},DONE:{label:"",tone:"text-emerald-700"}},A={NOT_CREATED:"",BOOKING_IN_PROGRESS:"",BOOKING_DONE:"",REFERRAL_CREATED:""},T=e==="HUMAN_FIRST"?" ":" ",R=t==="MANUAL_OVERRIDE"?"   ":"   ",I=[...(p?.triggers??[]).slice(0,4).map(_7),...(g??[]).slice(0,2)];e==="HUMAN_FIRST"&&I.length===0&&I.push("      .");const k=C?[{title:" ",value:l==="BOOKING_DONE"||l==="REFERRAL_CREATED"?"75%":"50%",sub:`  ${A[l]}   ${m}`,helperTitle:" ",helper:[` : ${mt(u)}`,`/ : ${A[l]}`,"  //    ."],tone:"border-blue-200 bg-blue-50 text-blue-700",icon:Qo},{title:"/ ",value:l==="BOOKING_DONE"||l==="REFERRAL_CREATED"?"0":"1",sub:" /  ",helperTitle:" ",helper:[` : ${A[l]}`,"  Step2    .",` : ${o}`],tone:l==="BOOKING_DONE"||l==="REFERRAL_CREATED"?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-amber-200 bg-amber-50 text-amber-700",icon:ea},{title:"  ",value:o>=3?"":o>=1?"":"",sub:` ${o}  ${y7(i)}`,helperTitle:" ",helper:[` : ${mt(s)}`,`  : ${_[n].label}`,"   /   ."],tone:o>=3?"border-red-200 bg-red-50 text-red-700":"border-slate-200 bg-slate-50 text-slate-700",icon:J0},{title:"  ",value:l==="BOOKING_DONE"?" ":"",sub:`${mt(u)}   ${d}`,helperTitle:" ",helper:["  : // ",` : ${m}`,"   /   ."],tone:l==="BOOKING_DONE"?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-gray-200 bg-gray-50 text-gray-700",icon:ha}]:E?[{title:" ",value:o>=3?"HIGH":o>=1?"MID":"LOW",sub:` ${y7(i)}   ${m}`,helperTitle:" ",helper:[` : ${mt(u)}`,` : ${o}`,"        ."],tone:o>=3?"border-red-200 bg-red-50 text-red-700":"border-amber-200 bg-amber-50 text-amber-700",icon:Qo},{title:" ",value:`${(g?.length??0)+(p?.triggers.length??0)}`,sub:"/ ",helperTitle:" ",helper:[...g?.slice(0,2)??[],...(p?.triggers??[]).slice(0,2).map(_7)].slice(0,3),tone:"border-slate-200 bg-slate-50 text-slate-700",icon:ea},{title:" ",value:_[n].label,sub:l==="NOT_CREATED"?"  ":` ${A[l]}`,helperTitle:" ",helper:[`/ : ${A[l]}`,`  : ${_[n].label}`,l==="NOT_CREATED"?"    Workboard  .":"  ."],tone:l==="NOT_CREATED"?"border-red-200 bg-red-50 text-red-700":"border-emerald-200 bg-emerald-50 text-emerald-700",icon:J0},{title:"/",value:` ${d}`,sub:`${mt(u)}   ${m}`,helperTitle:" ",helper:[` : ${mt(u)}`,` : ${m}`,"     ."],tone:"border-gray-200 bg-gray-50 text-gray-700",icon:ha}]:[{title:" ",value:T,sub:`${R}  ${bo[r]}`,helperTitle:" ",helper:I.length>0?[...I.slice(0,2),`  : ${bo[r]}`]:["       .",`  : ${bo[r]}`,"       ."],tone:e==="HUMAN_FIRST"?"border-red-200 bg-red-50 text-red-700":"border-blue-200 bg-blue-50 text-blue-700",icon:Qo},{title:" ",value:_[n].label,sub:i?` : ${Fl[i].label}`:` ${o}`,helperTitle:" ",helper:[` /: ${mt(s)}`,`  : ${o}`,s?"    ":"     "],tone:`border-slate-200 bg-slate-50 ${_[n].tone}`,icon:J0},{title:"/",value:A[l],sub:s?` : ${mt(s)}`:" ",helperTitle:" ",helper:[l==="NOT_CREATED"?"  .":` : ${A[l]}`,"       .",l==="NOT_CREATED"?"     ":"    "],tone:"border-emerald-200 bg-emerald-50 text-emerald-700",icon:li},{title:" ",value:` ${d}`,sub:`${mt(u)}   ${m}`,helperTitle:" ",helper:[` : ${mt(u)}`,` : ${m}`,m===0?"    ":"    "],tone:"border-gray-200 bg-gray-50 text-gray-700",icon:ha}];return a.jsx("section",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-3",children:k.map((w,L)=>a.jsxs("article",{onMouseEnter:()=>S(L),onMouseLeave:()=>S(H=>H===L?null:H),onFocus:()=>S(L),onBlur:()=>S(H=>H===L?null:H),className:ue("relative rounded-xl border p-3 shadow-sm transition-all duration-200 hover:-translate-y-0.5 hover:shadow-md",w.tone),children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(w.icon,{size:14}),a.jsx("p",{className:"text-[11px] font-semibold opacity-80",children:w.title})]}),L===0&&!E?a.jsx("button",{type:"button",onClick:x,className:"rounded-md border border-current/40 bg-white/70 px-2 py-0.5 text-[10px] font-semibold",children:" "}):null]}),a.jsx("p",{className:"mt-1 text-lg font-bold",children:w.value}),a.jsx("p",{className:"mt-0.5 text-[10px] opacity-70",children:w.sub}),a.jsxs("div",{className:ue("pointer-events-none absolute inset-x-2 top-[calc(100%+8px)] z-20 rounded-lg border border-slate-200 bg-white p-3 text-slate-700 shadow-lg transition-all duration-150",v===L?"translate-y-0 opacity-100":"-translate-y-1 opacity-0"),children:[a.jsx("p",{className:"text-[11px] font-semibold text-slate-900",children:w.helperTitle}),a.jsx("div",{className:"mt-1 space-y-0.5 text-[11px] text-slate-600",children:w.helper.map(H=>a.jsxs("p",{children:["- ",H]},`${w.title}-${H}`))})]})]},w.title))})}function T7({mode:e="stage1",stage2OpsView:t=!1,contactExecutor:r,executionStatus:n,strategy:s,lastSentAt:i,sensitivityFlags:o,latestAgentLog:l,selectedRecommendation:d,agentJob:u,gateStatus:m,onSwitchExecutor:p,onOpen:g,onRetryNow:x,onScheduleRetry:y}){const N=e==="stage2",v=e==="stage3",S=v&&t;v&&stage3Type;const E={NOT_STARTED:"",SENT:"",WAITING_RESPONSE:"",RETRY_NEEDED:"",HANDOFF_TO_HUMAN:"",PAUSED:"",STOPPED:"",DONE:""};return a.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-sm font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(So,{size:15,className:"text-[#15386a]"}),"/  (",S?"/":v?"/":N?"2":"1",")"]}),a.jsx("span",{className:ue("rounded-full border px-2 py-0.5 text-[10px] font-semibold",vO[r]),children:bo[r]})]}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:r==="HUMAN"?v?S?" /     .":"        .":N?" /     .":"/    .":v?S?"Agent   /  .     .":"Agent   /  .   /  .":N?"Agent   /  .    .":"Agent   /  .    ."}),s==="AI_FIRST"?a.jsx("p",{className:"mt-1 text-[11px] text-violet-700",children:"    : Agent        "}):null,a.jsx("div",{className:"mt-3 grid grid-cols-2 gap-2",children:["HUMAN","AGENT_SEND_ONLY"].map(C=>a.jsx("button",{onClick:()=>p(C),className:ue("rounded-md border px-2.5 py-1.5 text-[11px] font-semibold transition-colors",r===C?vO[C]:"border-gray-200 bg-gray-50 text-gray-600 hover:bg-gray-100"),children:bo[C]},C))}),a.jsx("button",{type:"button",onClick:g,className:ue("mt-3 h-11 w-full rounded-lg text-sm font-semibold text-white transition-all duration-200 hover:-translate-y-0.5 hover:shadow-md",r==="HUMAN"?"bg-[#15386a] hover:bg-[#102b4e]":"bg-violet-700 hover:bg-violet-800"),children:r==="HUMAN"?v?S?"/   ":"   ":N?" /  ":"/  ":"Agent   "}),a.jsxs("div",{className:"mt-3 rounded-lg border border-slate-200 bg-slate-50 p-3 text-[11px] text-slate-700",children:[a.jsxs("p",{children:[" : ",a.jsx("strong",{children:E[n]})]}),a.jsxs("p",{className:"mt-0.5",children:[v||N?" ":" ",": ",a.jsx("strong",{children:s==="HUMAN_FIRST"?" ":" "})]}),a.jsxs("p",{className:"mt-0.5",children:[" : ",a.jsx("strong",{children:mt(i)})]}),a.jsxs("p",{className:"mt-0.5",children:[" : ",a.jsx("strong",{children:o.length>0?o.join(", "):"  "})]}),r==="AGENT_SEND_ONLY"?a.jsxs(a.Fragment,{children:[a.jsxs("p",{className:"mt-0.5",children:["Agent  : ",a.jsx("strong",{children:rq[u.status]})]}),a.jsxs("p",{className:"mt-0.5",children:[" : ",a.jsx("strong",{children:m==="PASS"?"":m==="NEEDS_CHECK"?" ":""})]}),a.jsxs("p",{className:"mt-0.5",children:[" Agent :"," ",a.jsx("strong",{children:l?`${mt(l.at)}  ${ak[l.result]}`:" "})]}),u.status==="FAILED"?a.jsxs("p",{className:"mt-0.5 text-red-700",children:[" : ",a.jsx("strong",{children:u.lastError??" "})]}):null,u.nextRetryAt?a.jsxs("p",{className:"mt-0.5",children:[" : ",a.jsx("strong",{children:mt(u.nextRetryAt)})]}):null,(u.status==="FAILED"||u.status==="CANCELED")&&m==="PASS"?a.jsxs("div",{className:"mt-2 flex flex-wrap gap-1.5",children:[a.jsx("button",{type:"button",onClick:x,className:"rounded-md border border-violet-200 bg-violet-50 px-2 py-1 text-[10px] font-semibold text-violet-700 hover:bg-violet-100",children:" "}),a.jsx("button",{type:"button",onClick:y,className:"rounded-md border border-slate-200 bg-white px-2 py-1 text-[10px] font-semibold text-slate-700 hover:bg-slate-100",children:" "})]}):null]}):d?a.jsxs("p",{className:"mt-0.5",children:[" : ",a.jsx("strong",{children:d.title})]}):null]})]})}function O7({linkageStatus:e,reservationInfo:t,locked:r=!1,lockReason:n,onOpenStep4:s,onAction:i,mode:o="stage1"}){const l=o==="stage3";return a.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsxs("h3",{className:"text-sm font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(Da,{size:15,className:"text-[#15386a]"}),l?"/ ":" "]}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:l?" /   ()  .":" /    ."}),r?a.jsxs("div",{className:"mt-3 rounded-lg border border-amber-200 bg-amber-50 p-3",children:[a.jsx("p",{className:"text-[11px] font-semibold text-amber-800",children:n??"    ."}),a.jsx("button",{onClick:s,className:"mt-2 rounded-md border border-amber-300 bg-white px-2.5 py-1 text-[11px] font-semibold text-amber-800 hover:bg-amber-100",children:"STEP4 "})]}):null,a.jsx("div",{className:"mt-3 space-y-2",children:Object.keys(SO).map(d=>{const u=SO[d];return a.jsxs("button",{type:"button",disabled:r,onClick:()=>i(d),className:ue("w-full rounded-lg border border-slate-200 px-3 py-2 text-left transition-colors",r?"cursor-not-allowed bg-slate-100 text-slate-400":"bg-slate-50 hover:bg-slate-100"),children:[a.jsx("p",{className:"text-xs font-semibold text-slate-900",children:u.title}),a.jsx("p",{className:"mt-0.5 text-[11px] text-slate-600",children:u.description})]},d)})}),a.jsxs("div",{className:"mt-3 rounded-lg border border-emerald-200 bg-emerald-50 p-3 text-[11px] text-emerald-800",children:[a.jsxs("p",{children:[" / : ",a.jsx("strong",{children:Zd[e]})]}),a.jsxs("p",{className:"mt-0.5",children:[" :"," ",a.jsx("strong",{children:t?cg(t):"  ."})]}),a.jsx("p",{className:"mt-0.5",children:"       ."})]})]})}function p_e({loading:e,recommendations:t,selectedId:r,editedScript:n,onSelect:s,onEditScript:i}){return a.jsxs("section",{className:"rounded-xl border border-slate-200 bg-slate-50/70 p-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h4",{className:"text-xs font-bold text-slate-900",children:"RAG / "}),a.jsx("span",{className:"text-[10px] text-slate-500",children:" ,    ."})]}),e?a.jsx("div",{className:"mt-2 rounded-md border border-slate-200 bg-white px-3 py-2 text-[11px] text-slate-500",children:"   ..."}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"mt-2 grid grid-cols-1 gap-2",children:t.map(o=>a.jsxs("button",{onClick:()=>s(o),className:ue("rounded-lg border px-3 py-2 text-left transition-colors",r===o.id?"border-blue-300 bg-blue-50":"border-slate-200 bg-white hover:bg-slate-50"),children:[a.jsx("p",{className:"text-xs font-semibold text-slate-900",children:o.title}),a.jsx("p",{className:"mt-0.5 text-[11px] text-slate-600",children:o.useCase}),a.jsx("div",{className:"mt-1 space-y-0.5 text-[10px] text-slate-500",children:o.evidence.slice(0,3).map(l=>a.jsxs("p",{children:["- ",l]},`${o.id}-${l}`))})]},o.id))}),a.jsxs("div",{className:"mt-2",children:[a.jsx("label",{className:"text-[11px] font-semibold text-slate-600",children:"  "}),a.jsx("textarea",{value:n,onChange:o=>i(o.target.value),className:"mt-1 h-20 w-full rounded-md border border-slate-200 bg-white px-2 py-1.5 text-xs outline-none focus:border-blue-400",placeholder:"    "})]})]})]})}function m_e({draft:e,reservationInfo:t,onChange:r,onSave:n}){const s=im[e.route],i=e.route!=="HOLD_TRACKING";return a.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsxs("h3",{className:"text-sm font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(Da,{size:15,className:"text-blue-600"}),"STEP4  "]}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:"/    ."}),a.jsx("div",{className:"mt-3 grid grid-cols-1 gap-2 md:grid-cols-2",children:Object.keys(im).map(o=>{const l=im[o];return a.jsxs("button",{onClick:()=>r({...e,route:o,place:l.defaultPlace}),className:ue("rounded-lg border px-3 py-2 text-left transition-colors",e.route===o?"border-blue-300 bg-blue-50":"border-gray-200 bg-gray-50 hover:bg-gray-100"),children:[a.jsx("p",{className:"text-xs font-semibold text-slate-900",children:l.label}),a.jsx("p",{className:"mt-0.5 text-[11px] text-slate-600",children:l.description})]},o)})}),a.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-2 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[11px] font-semibold text-gray-600",children:""}),a.jsx("input",{type:"datetime-local",value:Fc(e.scheduledAt),onChange:o=>r({...e,scheduledAt:Uc(o.target.value)||e.scheduledAt}),disabled:!i,className:"mt-1 w-full rounded-md border border-gray-200 px-2 py-1.5 text-xs outline-none focus:border-blue-400 disabled:bg-gray-100"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[11px] font-semibold text-gray-600",children:""}),a.jsx("input",{value:e.place,onChange:o=>r({...e,place:o.target.value}),disabled:!i,className:"mt-1 w-full rounded-md border border-gray-200 px-2 py-1.5 text-xs outline-none focus:border-blue-400 disabled:bg-gray-100"})]})]}),a.jsxs("div",{className:"mt-2 grid grid-cols-1 gap-2 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[11px] font-semibold text-gray-600",children:"/ "}),a.jsx("input",{value:e.contactGuide,onChange:o=>r({...e,contactGuide:o.target.value}),disabled:!i,className:"mt-1 w-full rounded-md border border-gray-200 px-2 py-1.5 text-xs outline-none focus:border-blue-400 disabled:bg-gray-100"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[11px] font-semibold text-gray-600",children:""}),a.jsx("input",{value:e.note,onChange:o=>r({...e,note:o.target.value}),className:"mt-1 w-full rounded-md border border-gray-200 px-2 py-1.5 text-xs outline-none focus:border-blue-400"})]})]}),a.jsxs("div",{className:"mt-3 rounded-md border border-slate-200 bg-slate-50 px-3 py-2 text-[11px] text-slate-700",children:[a.jsxs("p",{children:[" : ",a.jsx("strong",{children:s.label})]}),a.jsx("p",{className:"mt-0.5",children:"       ."}),a.jsxs("p",{className:"mt-0.5",children:["  : ",a.jsx("strong",{children:t?cg(t):""})]})]}),a.jsx("div",{className:"mt-3 flex justify-end",children:a.jsx("button",{onClick:n,className:"rounded-md bg-[#163b6f] px-3 py-1.5 text-xs font-semibold text-white",children:"  "})})]})}function h_e({logs:e}){return a.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"Agent  "}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:"   ( )"}),a.jsx("div",{className:"mt-3 space-y-2",children:e.length===0?a.jsx("p",{className:"rounded-md border border-gray-200 bg-gray-50 px-3 py-2 text-[11px] text-gray-500",children:"           ."}):e.slice(0,4).map(t=>a.jsxs("div",{className:"rounded-md border border-violet-200 bg-violet-50 px-3 py-2",children:[a.jsx("p",{className:"text-[11px] font-semibold text-violet-800",children:ak[t.result]}),a.jsx("p",{className:"mt-0.5 text-[11px] text-violet-700",children:t.summary}),a.jsxs("p",{className:"mt-0.5 text-[10px] text-violet-600",children:[mt(t.at),t.recommendationTitle?`   ${t.recommendationTitle}`:""]})]},t.id))})]})}function g_e({flowCards:e,onAction:t,mode:r="stage1",stage2OpsView:n=!1,opsLoopState:s,storedOpsStatus:i}){const o=r==="stage2"?"Stage2  ":r==="stage3"?n?"Stage2   ":"Stage3  ":"Stage1  ",l=e.filter(u=>u.status==="COMPLETED").length,d=e.filter(u=>u.status==="READY").length;return a.jsxs("section",{className:"relative z-10 rounded-2xl border border-gray-200 bg-gradient-to-b from-white to-slate-50 p-5 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-sm font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(J0,{size:15,className:"text-blue-600"}),o]}),i?a.jsxs("p",{className:"mt-1 text-[10px] text-slate-500",children:[" : ",i,"   :  ",s?.doneCount??l," /  ",s?.readyCount??d]}):null,s?.mismatch?a.jsxs("p",{className:"mt-1 inline-flex rounded border border-amber-300 bg-amber-50 px-2 py-0.5 text-[10px] font-semibold text-amber-800",children:[" : ",s.mismatchReasons[0]??"    ."]}):null]}),a.jsxs("span",{className:"text-[11px] text-gray-500",children:[l,"/",e.length,"     ",d,""]})]}),a.jsx("div",{className:"mt-4 overflow-x-auto overflow-y-visible pt-1 pb-3",children:a.jsx("ol",{className:"relative z-10 mx-auto flex w-max items-stretch justify-center gap-3 px-2",children:e.map((u,m)=>{const p=a_e[u.status],g=p.icon,x=Lp(e,u.id),y=!!x;return a.jsxs(Y.Fragment,{children:[a.jsx("li",{className:"shrink-0 py-1",children:a.jsxs("button",{type:"button",onClick:()=>{y||t(u.action)},"aria-disabled":y,title:y?x??void 0:void 0,className:ue("group relative z-0 w-[230px] transform-gpu rounded-2xl border p-4 text-left transition-all duration-200 ease-out focus-visible:z-20 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-300",p.cardTone,!y&&"hover:z-20 hover:-translate-y-0.5 hover:scale-[1.02]",y&&"cursor-not-allowed opacity-75 saturate-75",!y&&u.isCurrent&&"ring-2 ring-offset-1 ring-blue-300 motion-safe:animate-pulse"),children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"text-[10px] font-semibold tracking-wide text-slate-500",children:["STEP ",m+1]}),a.jsx("span",{className:ue("rounded-full px-2 py-0.5 text-[10px] font-semibold",p.chipTone),children:p.label})]}),a.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[a.jsx(g,{size:14,className:"shrink-0"}),a.jsx("p",{className:"text-sm font-bold tracking-tight",children:u.title})]}),a.jsx("p",{className:"mt-1 text-[11px] text-slate-600",children:u.description}),a.jsxs("div",{className:ue("mt-2 rounded-lg border px-2.5 py-2 text-[11px] leading-relaxed",p.reasonTone),children:[a.jsx("p",{className:"font-semibold",children:" "}),a.jsx("p",{className:"mt-0.5 text-[10px]",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:u.reason})]}),y?a.jsxs("div",{className:"mt-2 max-h-0 overflow-hidden rounded-lg border border-amber-300 bg-amber-50 px-2.5 py-0 text-[11px] leading-relaxed text-amber-900 opacity-0 transition-all duration-200 group-hover:max-h-24 group-hover:py-2 group-hover:opacity-100 group-focus-visible:max-h-24 group-focus-visible:py-2 group-focus-visible:opacity-100",children:[a.jsx("p",{className:"font-semibold",children:"  "}),a.jsx("p",{className:"mt-0.5 text-[10px]",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:x})]}):a.jsxs("div",{className:"mt-2 max-h-0 overflow-hidden rounded-lg border border-dashed border-slate-300 bg-white/70 px-2.5 py-0 text-[11px] text-slate-700 opacity-0 transition-all duration-200 group-hover:max-h-24 group-hover:py-2 group-hover:opacity-100 group-focus-visible:max-h-24 group-focus-visible:py-2 group-focus-visible:opacity-100",children:[a.jsx("p",{className:"font-semibold text-slate-800",children:" "}),a.jsx("p",{className:"mt-0.5",children:u.nextActionHint})]}),a.jsx("span",{className:"mt-2 inline-flex rounded-md border border-current/40 px-2.5 py-1 text-[11px] font-semibold",children:y?"  ":" "})]})}),m<e.length-1?a.jsx("li",{className:"flex shrink-0 items-center text-slate-300","aria-hidden":"true",children:a.jsx(di,{size:18})}):null]},u.id)})})}),a.jsx("p",{className:"mt-3 text-[11px] text-gray-500",children:r==="stage3"?n?"      /   .":"         .    .":"       Step1~4    ."})]})}function x_e({mode:e="stage1",execution:t,strategy:r,preTriageReady:n,strategyDecided:s,hasVulnerableGuardrail:i,linkageStatus:o,onOpenSmsModal:l,onOpenOutcomeTriage:d,onOpenHandoffMemo:u,onOpenStrategyOverride:m}){const p=e==="stage2",g=e==="stage3",x=[],y=[];return n||x.push({label:g?"    ":p?"2    ":"    ",action:m,tone:"bg-red-600 text-white hover:bg-red-700"}),(!s||i)&&x.push({label:g?" / ":p?"/ ":"  / ",action:m,tone:"bg-amber-600 text-white hover:bg-amber-700"}),(t.status==="NOT_STARTED"||t.status==="RETRY_NEEDED")&&x.push({label:g?"  /":p?`   (${r==="HUMAN_FIRST"?" ":" "})`:`1   (${r==="HUMAN_FIRST"?" ":" "})`,action:l,tone:"bg-[#15386a] text-white hover:bg-[#102b4e]"}),(t.status==="SENT"||t.status==="WAITING_RESPONSE")&&x.push({label:g?" / ":p?"/  ":"  ",action:d,tone:"bg-blue-600 text-white hover:bg-blue-700"}),(t.status==="HANDOFF_TO_HUMAN"||t.status==="PAUSED")&&x.push({label:g?"  / ":p?" / ":"   /",action:u,tone:"bg-red-600 text-white hover:bg-red-700"}),t.status==="STOPPED"&&y.push({label:g?" (/) ":p?"/  ":"   ",action:u,tone:"border-red-200 bg-red-50 text-red-700 hover:bg-red-100"}),t.status==="RETRY_NEEDED"&&y.push({label:g?" /  ":p?"   ":"    ",action:l,tone:"border-orange-200 bg-orange-50 text-orange-700 hover:bg-orange-100"}),(o==="BOOKING_IN_PROGRESS"||o==="REFERRAL_CREATED")&&y.push({label:g?"/   ":p?"/   ":"/   ",action:u,tone:"border-slate-200 bg-white text-slate-700 hover:bg-slate-50"}),a.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsxs("h3",{className:"text-sm font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(J0,{size:15,className:"text-orange-600"}),"  "]}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:"     "}),x.length>0&&a.jsxs("div",{className:"mt-3 space-y-2",children:[a.jsx("p",{className:"text-[11px] font-semibold text-red-700",children:"P1   "}),x.map(N=>a.jsx("button",{onClick:N.action,className:ue("w-full rounded-lg border px-3 py-2.5 text-xs font-semibold transition-colors",N.tone),children:N.label},N.label))]}),y.length>0&&a.jsxs("div",{className:"mt-3 space-y-2",children:[a.jsx("p",{className:"text-[11px] font-semibold text-blue-700",children:"P2   "}),y.map(N=>a.jsx("button",{onClick:N.action,className:ue("w-full rounded-lg border px-3 py-2 text-xs font-semibold transition-colors",N.tone),children:N.label},N.label))]}),t.lastOutcomeCode&&a.jsx("div",{className:"mt-3 rounded-md border border-gray-100 bg-gray-50 px-3 py-2",children:a.jsxs("p",{className:"text-[11px] text-gray-600",children:[" : ",a.jsx("strong",{children:Fl[t.lastOutcomeCode].label})]})})]})}function l_({expanded:e,onToggle:t,executionStatus:r,lastSentAt:n,assigneeName:s,selectedOutcomeCode:i,onSelectOutcomeCode:o,reasonTags:l,onToggleReasonTag:d,rejectReasonDraft:u,onRejectReasonDraftChange:m,noResponsePlanDraft:p,onNoResponsePlanDraftChange:g,outcomeNote:x,onOutcomeNoteChange:y,isSaving:N,submitError:v,validationError:S,onClearError:E,onReset:C,onConfirm:_,hasUnsavedChanges:A,lastSavedAt:T,onOpenHandoffMemo:R,mode:I="stage1"}){const k=I==="stage3",w=i?Fl[i].label:iq[r];return a.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-sm font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(um,{size:15,className:"text-blue-600"}),k?"   ()":"  "]}),a.jsx("button",{onClick:t,className:"rounded-md border border-gray-200 px-2 py-1 text-[11px] font-semibold text-gray-600 hover:bg-gray-50",children:e?"":""})]}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:k?"/     .":"     "}),e?a.jsxs("div",{className:"mt-3 space-y-3",children:[a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[a.jsxs("div",{className:"grid grid-cols-1 gap-2 text-[11px] md:grid-cols-3",children:[a.jsxs("p",{className:"text-slate-600",children:[" : ",a.jsx("strong",{className:"text-slate-900",children:w})]}),a.jsxs("p",{className:"text-slate-600",children:[" : ",a.jsx("strong",{className:"text-slate-900",children:mt(n)})]}),a.jsxs("p",{className:"text-slate-600",children:[": ",a.jsx("strong",{className:"text-slate-900",children:s})]})]}),a.jsx("p",{className:"mt-2 text-[11px] text-slate-600",children:"   ,     ."})]}),a.jsx("div",{className:"rounded-md border border-indigo-200 bg-indigo-50 px-3 py-2 text-[11px] font-semibold text-indigo-800",children:"     "}),S?a.jsx("div",{className:"rounded-md border border-red-200 bg-red-50 px-3 py-2",children:a.jsx("p",{className:"text-[11px] font-semibold text-red-700",children:S})}):null,v?a.jsx("div",{className:"rounded-md border border-red-200 bg-red-50 px-3 py-2",children:a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("p",{className:"text-[11px] font-semibold text-red-700",children:[" : ",v]}),a.jsx("button",{onClick:E,className:"rounded border border-red-200 px-1.5 py-0.5 text-[10px] font-semibold text-red-700 hover:bg-red-100",children:""})]})}):null,a.jsxs("div",{children:[a.jsx("p",{className:"text-[11px] font-semibold text-gray-600",children:"  ( )"}),a.jsx("div",{className:"mt-2 grid grid-cols-1 gap-2 md:grid-cols-2",children:VAe.map(L=>{const H=Fl[L],B=i===L;return a.jsxs("button",{type:"button",onClick:()=>{E(),o(L)},className:ue("rounded-lg border-2 px-3 py-2 text-left transition-colors",B?`${H.tone} border-current`:"border-gray-200 bg-gray-50 hover:bg-gray-100"),children:[a.jsx("p",{className:"text-xs font-semibold text-slate-900",children:H.label}),a.jsx("p",{className:"mt-1 text-[10px] text-slate-500",children:L==="CONTINUE_SELF"?"     ":L==="SCHEDULE_LATER"?"    ":L==="REQUEST_GUARDIAN"?"  ":L==="REQUEST_HUMAN"?"  ":L==="NO_RESPONSE"?"   ":"/  "})]},L)})})]}),i==="NO_RESPONSE"?a.jsxs("div",{className:"rounded-lg border border-blue-200 bg-blue-50 p-3",children:[a.jsx("p",{className:"text-[11px] font-semibold text-blue-800",children:"   ()"}),a.jsxs("p",{className:"mt-1 text-[10px] text-blue-700",children:["     +1 .  ",p.channel==="CALL"?"":"","   ."]}),a.jsxs("div",{className:"mt-2 grid grid-cols-1 gap-2 md:grid-cols-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-semibold text-gray-600",children:""}),a.jsx("div",{className:"mt-1 grid grid-cols-2 gap-1",children:Object.keys(C7).map(L=>a.jsx("button",{type:"button",onClick:()=>g({...p,channel:L,strategy:tq[L]}),className:ue("rounded-md border px-2 py-1 text-[10px] font-semibold",p.channel===L?"border-blue-300 bg-blue-100 text-blue-800":"border-gray-200 bg-white text-gray-600"),children:C7[L]},L))})]}),a.jsxs("label",{className:"text-[10px] font-semibold text-gray-600",children:["  ",a.jsx("input",{type:"datetime-local",value:Fc(p.nextContactAt),onChange:L=>{const H=Uc(L.target.value);g({...p,nextContactAt:H||p.nextContactAt})},className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-blue-400"})]}),a.jsxs("label",{className:"text-[10px] font-semibold text-gray-600",children:["",a.jsx("input",{type:"text",value:p.assigneeId,onChange:L=>{g({...p,assigneeId:L.target.value})},className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-blue-400",placeholder:"   ID"})]})]}),a.jsxs("label",{className:"mt-2 inline-flex items-center gap-2 text-[10px] text-blue-800",children:[a.jsx("input",{type:"checkbox",checked:p.applyL3,onChange:L=>g({...p,applyL3:L.target.checked})}),"    L3 ."]})]}):null,i==="REFUSE"?a.jsxs("div",{className:"rounded-lg border border-red-200 bg-red-50 p-3",children:[a.jsx("p",{className:"text-[11px] font-semibold text-red-800",children:"   ()"}),a.jsx("p",{className:"mt-1 text-[10px] text-red-700",children:"       ."}),a.jsxs("div",{className:"mt-2 grid grid-cols-1 gap-2 md:grid-cols-2",children:[a.jsxs("label",{className:"text-[10px] font-semibold text-gray-600",children:[" ",a.jsxs("select",{value:u.code??"",onChange:L=>{const H=L.target.value||null;m({...u,code:H})},className:"mt-1 h-8 w-full rounded-md border border-gray-200 bg-white px-2 text-[11px] outline-none focus:border-red-300",children:[a.jsx("option",{value:"",children:" "}),XAe.map(L=>a.jsx("option",{value:L.code,children:L.label},L.code))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-semibold text-gray-600",children:" "}),a.jsx("div",{className:"mt-1 grid grid-cols-2 gap-1",children:QAe.map(L=>a.jsx("button",{type:"button",onClick:()=>m({...u,level:L.value}),className:ue("h-8 rounded-md border px-2 text-[10px] font-semibold",u.level===L.value?"border-red-300 bg-red-100 text-red-700":"border-gray-200 bg-white text-gray-600"),children:L.label},L.value))})]})]}),u.code==="R7_OTHER"?a.jsxs("label",{className:"mt-2 block text-[10px] font-semibold text-gray-600",children:["  ()",a.jsx("textarea",{value:u.detail,onChange:L=>m({...u,detail:L.target.value}),className:"mt-1 h-14 w-full rounded-md border border-gray-200 px-2 py-1 text-[11px] outline-none focus:border-red-300",placeholder:"   "})]}):null]}):null,i==="REQUEST_GUARDIAN"||i==="REQUEST_HUMAN"?a.jsxs("div",{className:"rounded-lg border border-violet-200 bg-violet-50 p-3",children:[a.jsx("p",{className:"text-[11px] font-semibold text-violet-800",children:"   ()"}),a.jsx("p",{className:"mt-1 text-[10px] text-violet-700",children:"      ."}),a.jsx("button",{type:"button",onClick:R,className:"mt-2 rounded-md border border-violet-300 bg-white px-2.5 py-1 text-[11px] font-semibold text-violet-700 hover:bg-violet-100",children:"  "})]}):null,a.jsxs("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-3",children:[a.jsx("p",{className:"text-[11px] font-semibold text-amber-800",children:"   ( )"}),a.jsx("div",{className:"mt-2 flex flex-wrap gap-1.5",children:Object.keys(f1).map(L=>{const H=f1[L],B=l.includes(L);return a.jsx("button",{type:"button",onClick:()=>d(L),className:ue("rounded-full border px-2.5 py-1 text-[10px] font-semibold transition-colors",B?H.tone:"border-gray-200 bg-white text-gray-600"),title:H.hint,children:H.label},L)})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[11px] font-semibold text-gray-600",children:" ()"}),a.jsx("textarea",{value:x,onChange:L=>y(L.target.value),className:"mt-1 h-16 w-full rounded-md border border-gray-200 px-2 py-1 text-xs outline-none focus:border-blue-400",placeholder:"   "})]}),a.jsxs("div",{className:"sticky bottom-0 z-10 flex flex-wrap items-center justify-between gap-2 rounded-lg border border-slate-200 bg-white/95 px-3 py-2 backdrop-blur",children:[a.jsxs("div",{className:"flex items-center gap-2 text-[11px]",children:[a.jsx("span",{className:ue("rounded-full border px-2 py-0.5 font-semibold",A?"border-amber-200 bg-amber-50 text-amber-700":"border-emerald-200 bg-emerald-50 text-emerald-700"),children:A?" ":" "}),T?a.jsxs("span",{className:"text-gray-500",children:["  ",mt(T)]}):null]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:t,className:"rounded-md border border-gray-200 px-3 py-1.5 text-xs font-semibold text-gray-700",children:""}),a.jsx("button",{onClick:C,className:"rounded-md border border-gray-200 px-3 py-1.5 text-xs font-semibold text-gray-700",children:""}),a.jsx("button",{onClick:_,disabled:N,className:"rounded-md bg-[#163b6f] px-3 py-1.5 text-xs font-semibold text-white disabled:bg-gray-300",children:N?" ...":""})]})]})]}):null]})}function R7({expanded:e,onToggle:t,memoText:r,onMemoChange:n,onSave:s,mode:i="stage1"}){const o=i==="stage3";return a.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-sm font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(jQ,{size:15,className:"text-blue-600"}),o?" / ":"  "]}),a.jsx("button",{onClick:t,className:"rounded-md border border-gray-200 px-2 py-1 text-[11px] font-semibold text-gray-600 hover:bg-gray-50",children:e?"":""})]}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:o?" /   .":"     "}),e?a.jsxs("div",{className:"mt-3 space-y-2",children:[a.jsx("textarea",{value:r,onChange:l=>n(l.target.value),className:"h-40 w-full rounded-md border border-gray-200 px-3 py-2 text-xs font-mono outline-none focus:border-blue-400",placeholder:`[ ]
 ( ): ...
: ...
 : ...
 : ...
  : ...`}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{onClick:s,disabled:!r.trim(),className:"rounded-md bg-[#163b6f] px-3 py-1.5 text-xs font-semibold text-white disabled:bg-gray-300",children:""})})]}):null]})}function b_e({gates:e,onFix:t,mode:r="stage1"}){const n=r==="stage3",s=new Map(e.map(E=>[E.key,E])),o=["CONSENT_OK","PHONE_VERIFIED","GUARDIAN_OPTIONAL"].map(E=>s.get(E)).filter(E=>!!E),l=s.get("CONSENT_OK"),d=s.get("PHONE_VERIFIED"),u=s.get("GUARDIAN_OPTIONAL"),m=d?.status==="PASS"?"OK":d?.status==="FAIL"&&E7(d.failReason)?"RESTRICTED":"NEEDS_CHECK",p=l?.status==="FAIL"?"RESTRICTED":d?.status==="PASS"?"OK":d?.status==="FAIL"&&E7(d.failReason)?"RESTRICTED":"NEEDS_CHECK",g=u?.status==="PASS"?"OK":u?.status==="FAIL"?"RESTRICTED":"NEEDS_CHECK",x=m==="OK"?Ju(m):d?.failReason??Ju(m),y=p==="OK"?Ju(p):l?.status==="FAIL"?l.failReason??Ju(p):d?.failReason??Ju(p),N=g==="OK"?Ju(g):u?.failReason??Ju(g),v=[{key:"CALL",label:"",state:m,detail:x,actionLabel:m==="NEEDS_CHECK"?" ":m==="RESTRICTED"?"  ":void 0,onAction:m==="NEEDS_CHECK"&&d?.fixAction?.action==="VERIFY_PHONE"?()=>t(d):m==="RESTRICTED"?()=>ke.error(x):void 0},{key:"SMS",label:"",state:p,detail:y,actionLabel:p==="NEEDS_CHECK"?"  ":p==="RESTRICTED"?"  ":void 0,onAction:p==="NEEDS_CHECK"?()=>ke("    ."):p==="RESTRICTED"?()=>ke.error(y):void 0},{key:"GUARDIAN",label:"",state:g,detail:N,actionLabel:g==="RESTRICTED"?"  ":g==="NEEDS_CHECK"&&u?.fixAction?u.fixAction.label:void 0,onAction:g==="RESTRICTED"?()=>ke.error(N):g==="NEEDS_CHECK"&&u?.fixAction?()=>t(u):void 0}],S=v.some(E=>E.state==="RESTRICTED")?"RESTRICTED":v.some(E=>E.state==="NEEDS_CHECK")?"NEEDS_CHECK":"OK";return a.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-sm font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(D0,{size:15,className:"text-slate-500"}),n?"  ":"  "]}),a.jsx("span",{className:"text-[11px] text-gray-500",children:n?"   Step2 .":"     "})]}),a.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2",children:[o.map(E=>a.jsxs("div",{className:"rounded-lg border border-gray-100 bg-gray-50 p-3",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("p",{className:"text-xs font-semibold text-slate-800",children:E.label}),a.jsx("span",{className:ue("rounded px-2 py-0.5 text-[10px] font-semibold",$Ae(E.status)),children:E.status==="PASS"?"":E.status==="FAIL"?"":" "})]}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:E.failReason??"  "}),E.fixAction&&E.status!=="PASS"&&a.jsxs("button",{onClick:()=>t(E),className:"mt-2 inline-flex items-center gap-1 rounded-md border border-blue-200 bg-blue-50 px-2 py-1 text-[11px] font-semibold text-blue-700 hover:bg-blue-100",children:[a.jsx(um,{size:11})," ",E.fixAction.label]})]},E.key)),a.jsxs("div",{className:"rounded-lg border border-gray-100 bg-gray-50 p-3",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("p",{className:"text-xs font-semibold text-slate-800",children:"  "}),a.jsx("span",{className:ue("rounded px-2 py-0.5 text-[10px] font-semibold",N7(S)),children:S7(S)})]}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:"//   "}),a.jsx("div",{className:"mt-2 space-y-2",children:v.map(E=>a.jsxs("div",{className:"rounded-md border border-gray-100 bg-white px-2.5 py-2",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("p",{className:"text-[11px] font-semibold text-slate-700",children:E.label}),a.jsx("span",{className:ue("rounded px-2 py-0.5 text-[10px] font-semibold",N7(E.state)),children:S7(E.state)})]}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:E.detail}),E.onAction&&E.actionLabel?a.jsxs("button",{onClick:E.onAction,className:"mt-1.5 inline-flex items-center gap-1 rounded-md border border-blue-200 bg-blue-50 px-2 py-1 text-[11px] font-semibold text-blue-700 hover:bg-blue-100",children:[a.jsx(um,{size:11})," ",E.actionLabel]}):null]},E.key))})]})]}),a.jsxs("p",{className:"mt-3 text-[11px] text-gray-500",children:["    : ",n?"/     ":"/     "]})]})}function k7({evidence:e,quality:t,mode:r="stage1",stage2OpsView:n=!1,stage3Type:s}){const i=r==="stage3",o=i&&n,l=i&&s==="AD_MANAGEMENT"&&!o;return a.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-sm font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(gm,{size:15,className:"text-slate-500"}),o?"  ( )":i?l?"  ( )":"  ( )":"  "]}),a.jsxs("span",{className:"text-[11px] text-gray-500",children:["  ",mt(e.computedAt),"  ",e.version]})]}),a.jsx("div",{className:"mt-3 space-y-2",children:e.topFactors.slice(0,3).map(d=>a.jsxs("div",{className:"rounded-md border border-gray-100 bg-gray-50 px-3 py-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"text-xs font-semibold text-slate-900",children:d.title}),d.isMissing&&a.jsx("span",{className:"rounded bg-red-100 px-1.5 py-0.5 text-[10px] font-semibold text-red-700",children:" "})]}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-600",children:d.description}),a.jsxs("p",{className:"mt-1 text-[10px] text-gray-400",children:[": ",mt(d.recency)]})]},d.title))}),a.jsxs("div",{className:"mt-3 rounded-md border border-gray-100 bg-white px-3 py-2 text-[11px] text-gray-600",children:[a.jsx("p",{children:" :  48   "}),a.jsxs("p",{title:"   ,  ,    .",children:[" : ",t.score,"% (  )"]}),a.jsxs("p",{children:[" : ",t.notes?.join(", ")??""]}),o?a.jsx("p",{children:" :  //    ."}):null,!o&&i?a.jsx("p",{children:" :       ."}):null]})]})}function cq({risk:e,stageBadge:t,threshold:r=65,stage2OpsView:n=!1,stage3Type:s="PREVENTIVE_TRACKING"}){const i=h.useId().replace(/:/g,""),o=(M,G=!1)=>{const $=new Date(M);if(Number.isNaN($.getTime()))return M.slice(5,10);const z=String($.getFullYear()).slice(2),U=String($.getFullYear()),Z=String($.getMonth()+1).padStart(2,"0"),re=String($.getDate()).padStart(2,"0");return G?`${U}.${Z}.${re}`:`${z}.${Z}.${re}`},l=M=>M==="DIFF_RESULT_APPLIED"?n?" ":" ":M==="PLAN_UPDATED"?n?"/ ":" ":M==="REEVAL"?n?"  ":"":void 0,d=h.useMemo(()=>{const M=e.series.map(G=>{const $=new Date(G.t),z=Number.isNaN($.getTime())?new Date(e.updatedAt):$,U=Number.isNaN(z.getTime())?new Date:z;return{t:U.toISOString(),date:U,risk01:Zn(G.risk2y),ciLow01:G.ciLow==null?void 0:Zn(G.ciLow),ciHigh01:G.ciHigh==null?void 0:Zn(G.ciHigh),eventLabel:l(G.event??(G.source==="manual"?"REEVAL":void 0))}}).sort((G,$)=>G.date.getTime()-$.date.getTime());if(M.length===0){const G=(()=>{const $=new Date(e.updatedAt);return Number.isNaN($.getTime())?new Date:$})();return[{t:G.toISOString(),date:G,risk01:Zn(e.risk2y_now),ciLow01:void 0,ciHigh01:void 0,eventLabel:void 0}]}return M},[e.risk2y_now,e.series,e.updatedAt]),u=d[d.length-1],m=Zn(u?.risk01??e.risk2y_now),p=Ko(m),g=eh(m),x=s==="AD_MANAGEMENT"&&!n,y=e.trend==="UP"?.14:e.trend==="DOWN"?-.1:e.trend==="VOLATILE"?.08:.02,N=Zn(m+y),v=Ko(N),S=x?[]:[12,24,36],E=S.map((M,G)=>{const $=new Date(u.date);$.setMonth($.getMonth()+M);const z=(G+1)/S.length,U=Zn(m+(N-m)*z);return{t:$.toISOString(),date:$,riskPct:Ko(U),axisLabel:o($.toISOString())}}),C=[...d.map((M,G)=>{const $=Ko(M.risk01);return{t:M.t,axisLabel:o(M.t),pointKind:"HIST",histRiskPct:$,forecastRiskPct:E.length>0&&G===d.length-1?$:null,areaRiskPct:$,riskPct:$,ciLowPct:M.ciLow01==null?void 0:Ko(M.ciLow01),ciHighPct:M.ciHigh01==null?void 0:Ko(M.ciHigh01),eventLabel:M.eventLabel}}),...E.map(M=>({t:M.t,axisLabel:M.axisLabel,pointKind:"FORECAST",histRiskPct:null,forecastRiskPct:M.riskPct,areaRiskPct:M.riskPct,riskPct:M.riskPct,ciLowPct:void 0,ciHighPct:void 0,eventLabel:void 0}))],_=h.useMemo(()=>{const M=new Map;return C.forEach((G,$)=>{const z=new Date(G.t);if(Number.isNaN(z.getTime())){M.set(G.t,G.axisLabel);return}const U=$===0||$===C.length-1,Z=$>0?new Date(C[$-1].t):null,re=Z?Z.getFullYear()!==z.getFullYear():!1;M.set(G.t,o(G.t,U||re))}),M},[C]),A=C.some(M=>M.ciLowPct!=null&&M.ciHighPct!=null),T=C.filter(M=>M.pointKind==="HIST"&&!!M.eventLabel).slice(-3),R=C.filter(M=>M.riskPct>=r),I=R[R.length-1],k=E.length>0?C[C.length-1]:void 0,w=p>=r?{top:"#ef4444",bottom:"#ef4444"}:{top:"#2563eb",bottom:"#2563eb"},L=(()=>{if(d.length<4)return"      .";const M=d.slice(-4).map(Z=>Ko(Z.risk01)),G=M.slice(1).map((Z,re)=>Z-M[re]),$=G.filter(Z=>Z>0).length,z=G.filter(Z=>Z<0).length;return Math.max(...G.map(Z=>Math.abs(Z)))>=10?n?" 3  .  /   .":" 3  . /     .":$>=2?" 3    .":z>=2?" 3    .":"     ."})(),H=t==="COMPLETED"?n?" :   ":x?" : AD    ":" :   ":t==="SCHEDULED"?n?" :  ":x?" :   ":" :  ":t==="REFERRED"?" :  ":t==="RECOMMENDED"?n?" : / ":" :  ":n?" :   ":x?" :   ":" :  ",B=({active:M,payload:G})=>{if(!M||!G||G.length===0)return null;const $=G[0]?.payload;return $?a.jsxs("div",{className:"rounded-md border border-slate-200 bg-white px-2 py-1.5 text-[10px] shadow-sm",children:[a.jsxs("p",{className:"font-semibold text-slate-800",children:[mt($.t),"  ",$.pointKind==="FORECAST"?" (+3y)":"/"]}),a.jsxs("p",{className:"mt-0.5 text-slate-700",children:[n?" / ":x?"  ( )":"( )"," ",$.riskPct,"%"]}),$.ciLowPct!=null&&$.ciHighPct!=null?a.jsxs("p",{className:"text-slate-500",children:[" ",$.ciLowPct,"% ~ ",$.ciHighPct,"%"]}):null,$.eventLabel?a.jsxs("p",{className:"text-slate-500",children:[" ",$.eventLabel]}):null,$.riskPct>=r?a.jsx("p",{className:"text-red-600",children:n?`${r}%   `:`${r}%  `}):null]}):null};return a.jsxs("div",{className:"rounded-lg border border-slate-100 bg-slate-50 px-2.5 py-2.5",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-1.5",children:[a.jsxs("span",{className:"rounded-full border border-indigo-200 bg-indigo-50 px-2 py-0.5 text-[10px] font-semibold text-indigo-700",children:[n?" /":x?" ":" "," ",p,"% (",g,")"]}),a.jsxs("span",{className:"rounded-full border border-sky-200 bg-sky-50 px-2 py-0.5 text-[10px] font-semibold text-sky-700",children:[x?" ":n?" ":"3  "," ",x?e.trend:`${v}%`]}),a.jsxs("span",{className:"rounded-full border border-slate-200 bg-white px-2 py-0.5 text-[10px] font-semibold text-slate-700",children:[" ",e.trend]})]}),a.jsxs("div",{className:"mt-2 grid grid-cols-1 gap-2.5 xl:grid-cols-[1fr_220px]",children:[a.jsx("div",{className:"h-56 w-full",children:a.jsx(Ta,{width:"100%",height:"100%",children:a.jsxs(NN,{data:C,margin:{top:8,right:24,left:0,bottom:6},children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:`risk-grad-${i}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:w.top,stopOpacity:.3}),a.jsx("stop",{offset:"100%",stopColor:w.bottom,stopOpacity:.04})]})}),a.jsx(ys,{stroke:"#e5e7eb",strokeDasharray:"4 4"}),a.jsx(da,{dataKey:"t",tick:{fontSize:10,fill:"#64748b"},axisLine:!1,tickLine:!1,interval:"preserveStartEnd",minTickGap:16,tickMargin:8,tickFormatter:M=>_.get(M)??o(M,!0)}),a.jsx(Jn,{domain:[0,100],ticks:[0,25,50,75,100],tickFormatter:M=>`${M}%`,tick:{fontSize:10,fill:"#64748b"},axisLine:!1,tickLine:!1,width:34}),a.jsx(ln,{content:a.jsx(B,{})}),a.jsx(Wl,{y:r,stroke:"#dc2626",strokeDasharray:"4 3"}),T.map((M,G)=>a.jsx(Wl,{x:M.t,stroke:"#94a3b8",strokeDasharray:"3 3"},`event-${M.t}-${G}`)),A?a.jsx(qa,{type:"monotone",dataKey:"ciLowPct",stroke:"#94a3b8",strokeDasharray:"4 4",strokeWidth:1,dot:!1,isAnimationActive:!1}):null,A?a.jsx(qa,{type:"monotone",dataKey:"ciHighPct",stroke:"#94a3b8",strokeDasharray:"4 4",strokeWidth:1,dot:!1,isAnimationActive:!1}):null,a.jsx(rc,{type:"monotone",dataKey:"areaRiskPct",stroke:"none",fill:`url(#risk-grad-${i})`,isAnimationActive:!1}),a.jsx(qa,{type:"monotone",dataKey:"histRiskPct",stroke:"#334155",strokeWidth:2.2,isAnimationActive:!1,dot:M=>{if(M.cx==null||M.cy==null||!M.payload||M.payload.histRiskPct==null)return null;const G=M.payload.riskPct>=r;return a.jsx("circle",{cx:M.cx,cy:M.cy,r:G?4:3,fill:G?"#dc2626":"#334155",stroke:"#ffffff",strokeWidth:1.2})},activeDot:{r:5}}),E.length>0?a.jsx(qa,{type:"monotone",dataKey:"forecastRiskPct",stroke:"#2563eb",strokeDasharray:"6 4",strokeWidth:2,connectNulls:!1,isAnimationActive:!1,dot:M=>{if(M.cx==null||M.cy==null||!M.payload||M.payload.forecastRiskPct==null)return null;const G=M.payload.riskPct>=r;return a.jsx("circle",{cx:M.cx,cy:M.cy,r:G?4:3,fill:G?"#dc2626":"#2563eb",stroke:"#ffffff",strokeWidth:1.1})}}):null,E.length>0&&k?a.jsx(px,{x:k.t,y:k.riskPct,r:5,fill:k.riskPct>=r?"#dc2626":"#2563eb",stroke:"#fff",strokeWidth:1.4,label:{value:`+3y ${k.riskPct}%`,position:"top",fill:"#1e293b",fontSize:10}}):null]})})}),a.jsxs("div",{className:"space-y-2 rounded-md border border-slate-200 bg-white p-2",children:[a.jsx("p",{className:"text-[10px] font-semibold text-slate-700",children:H}),a.jsxs("p",{className:"text-[10px] text-slate-500",children:[" ",mt(e.updatedAt),"   ",e.modelVersion]}),I?a.jsxs("div",{className:"rounded border border-red-200 bg-red-50 px-2 py-1 text-[10px] text-red-700",children:[a.jsxs("p",{className:"font-semibold",children:[r,"%  "]}),a.jsxs("p",{children:[I.axisLabel,"  ",I.riskPct,"% ( )"]})]}):a.jsxs("div",{className:"rounded border border-emerald-200 bg-emerald-50 px-2 py-1 text-[10px] text-emerald-700",children:[a.jsxs("p",{className:"font-semibold",children:[r,"%   "]}),a.jsx("p",{children:"   ."})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-[10px] font-semibold text-slate-700",children:" "}),T.length?T.map(M=>a.jsxs("p",{className:"text-[10px] text-slate-600",children:[M.axisLabel,"  ",M.eventLabel]},`${M.t}-${M.eventLabel}`)):a.jsx("p",{className:"text-[10px] text-slate-500",children:"  "})]})]})]}),a.jsx("p",{className:"mt-1 text-[10px] text-slate-500",children:L}),a.jsx("p",{className:"mt-0.5 text-[10px] text-slate-500",children:n?" :   //   .":" :         ."})]})}const y_e=new Set(["REFERRED","SCHEDULED","DONE","RECEIVED","EXCEPTION"]);function v_e(e){return e==="PENDING"?"":e==="REFERRED"?"":e==="SCHEDULED"?"":e==="DONE"?"":e==="RECEIVED"?"":e==="NEEDS_REVIEW"?"":e==="MISSING"?"":"()"}function N_e(e){return e==="REQUIRED"?"":e==="RECOMMENDED"?"":""}function S_e(e){return e==="AUTO"?"AUTO()":e==="MANUAL"?"MANUAL()":e==="OVERRIDE"?"OVERRIDE":" "}function E_e(e){return e==="MISSING"||e==="NEEDS_REVIEW"?"border-rose-200 bg-rose-50 text-rose-700":e==="DONE"||e==="RECEIVED"?"border-emerald-200 bg-emerald-50 text-emerald-700":e==="REFERRED"||e==="SCHEDULED"?"border-amber-200 bg-amber-50 text-amber-700":e==="EXCEPTION"?"border-violet-200 bg-violet-50 text-violet-700":"border-slate-200 bg-slate-100 text-slate-700"}function j_e(e){return e==="PAUSED"?"PAUSED":e==="IN_PROGRESS"?"IN_PROGRESS":e==="READY"?"READY":"BLOCKED"}function w_e(e){return e==="READY"?"border-emerald-200 bg-emerald-50 text-emerald-700":e==="IN_PROGRESS"?"border-blue-200 bg-blue-50 text-blue-700":e==="BLOCKED"?"border-rose-200 bg-rose-50 text-rose-700":"border-slate-200 bg-slate-100 text-slate-700"}function A_e(e){return e.id==="MMSE"?a.jsx(Wd,{term:"MMSE",className:"text-[11px] font-semibold text-slate-900"}):e.id==="CDR_GDS"?a.jsxs("span",{className:"text-[11px] font-semibold text-slate-900",children:[a.jsx(Wd,{term:"CDR"}),"  ",a.jsx(Wd,{term:"GDS"})]}):e.id==="NEURO"?a.jsx("span",{className:"text-[11px] font-semibold text-slate-900",children:""}):e.id==="SPECIALIST"?a.jsx("span",{className:"text-[11px] font-semibold text-slate-900",children:" "}):e.id==="GDS_K"?a.jsx(Wd,{term:"GDS-K",className:"text-[11px] font-semibold text-slate-900"}):e.id==="ADL"?a.jsx(Wd,{term:"ADL",className:"text-[11px] font-semibold text-slate-900"}):a.jsx(Wd,{term:"BPSD",className:"text-[11px] font-semibold text-slate-900"})}function c_(e,t){const r=e[0];if(!r)return;const n=t.current[r];n&&(n.scrollIntoView({behavior:"smooth",block:"center"}),"focus"in n&&typeof n.focus=="function"&&n.focus())}function __e({routeType:e,hospitalName:t,dueAt:r,tests:n,optionalTests:s,integrationReceivedAt:i,integrationUpdatedAt:o,manualEditEnabled:l}){return h.useMemo(()=>{const d=r||"2026-02-20T09:00:00",u=o||i,m=l?"OVERRIDE":e==="HOSPITAL_REFERRAL"?"AUTO":"MANUAL",p=typeof n.mmse=="number"&&Number.isFinite(n.mmse),g=typeof n.cdr=="number"&&Number.isFinite(n.cdr),x=!!n.neuroCognitiveType,y=!!n.specialist,N=S=>S==="MISSING"?[{key:"OPEN_PIPELINE",label:"  ",enabled:!0,intent:"danger"},{key:"REQUEST_RESULT",label:" ",enabled:!0,intent:"warning"},{key:"MANUAL_EXCEPTION",label:" ()",enabled:!0,intent:"default"}]:S==="NEEDS_REVIEW"?[{key:"VIEW_RESULT",label:" ",enabled:!0,intent:"default"},{key:"MARK_REVIEWED",label:" ",enabled:!0,intent:"success"}]:S==="REFERRED"||S==="SCHEDULED"?[{key:"OPEN_PIPELINE",label:"/ ",enabled:!0,intent:"default"},{key:"REQUEST_RESULT",label:" ",enabled:!0,intent:"warning"}]:S==="DONE"||S==="RECEIVED"||S==="EXCEPTION"?[{key:"VIEW_RESULT",label:" ",enabled:!0,intent:"default"},{key:"MARK_REVIEWED",label:" ",enabled:!0,intent:"success"}]:[{key:"OPEN_PIPELINE",label:" ",enabled:!0,intent:"default"}];return[{id:"MMSE",label:"MMSE",fullName:" ",description:"     .",requiredLevel:e==="HOSPITAL_REFERRAL"?"REQUIRED":"RECOMMENDED",status:p?"RECEIVED":e==="HOSPITAL_REFERRAL"?"REFERRED":"PENDING",source:m,orgName:t,dueAt:d,updatedAt:u,actions:[]},{id:"CDR_GDS",label:"CDR  GDS",fullName:" ",description:"CDR  GDS    1  .",requiredLevel:"REQUIRED",status:g?"RECEIVED":"MISSING",source:m,orgName:t,dueAt:d,updatedAt:u,missingReason:g?void 0:"  ",actions:[]},{id:"NEURO",label:"",fullName:"CERAD-K / SNSB-II / SNSB-C / LICA",description:"   /.",requiredLevel:"REQUIRED",status:x?"RECEIVED":"PENDING",source:m,orgName:t,dueAt:d,updatedAt:u,actions:[]},{id:"SPECIALIST",label:" ",fullName:" / ",description:"      .",requiredLevel:"REQUIRED",status:y?"DONE":e==="HOSPITAL_REFERRAL"?"REFERRED":"PENDING",source:m,orgName:t,dueAt:d,updatedAt:u,actions:[]},{id:"GDS_K",label:"GDS-K",fullName:"()",description:"         .",requiredLevel:"OPTIONAL",status:s.gdsk?"SCHEDULED":"PENDING",source:s.gdsk?"MANUAL":null,orgName:t,dueAt:d,updatedAt:u,actions:[]},{id:"ADL",label:"ADL",fullName:" ",description:"     .",requiredLevel:"OPTIONAL",status:s.adl?"SCHEDULED":"PENDING",source:s.adl?"MANUAL":null,orgName:t,dueAt:d,updatedAt:u,actions:[]},{id:"BPSD",label:"BPSD",fullName:" ",description:"     .",requiredLevel:"OPTIONAL",status:s.bpsd?"SCHEDULED":"PENDING",source:s.bpsd?"MANUAL":null,orgName:t,dueAt:d,updatedAt:u,actions:[]}].map(S=>({...S,actions:N(S.status)}))},[r,t,i,o,l,s.adl,s.bpsd,s.gdsk,e,n.cdr,n.mmse,n.neuroCognitiveType,n.specialist])}function C_e({summary:e,route:t,onOpenMissing:r,onPrimaryAction:n,onReviewComplete:s}){const i=t.routeType==="HOSPITAL_REFERRAL"?" ":"  ";return a.jsxs("div",{className:"rounded-lg border border-indigo-200 bg-indigo-50 p-3",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-2 md:grid-cols-6",children:[a.jsxs("div",{className:"rounded-md border border-indigo-100 bg-white px-2 py-1.5",children:[a.jsx("p",{className:"text-[10px] text-slate-500",children:" "}),a.jsx("p",{className:ue("mt-1 inline-flex rounded border px-1.5 py-0.5 text-[10px] font-semibold",w_e(e.status)),children:j_e(e.status)})]}),a.jsxs("div",{className:"rounded-md border border-indigo-100 bg-white px-2 py-1.5",children:[a.jsx("p",{className:"text-[10px] text-slate-500",children:" "}),a.jsx("p",{className:"mt-1 text-[11px] font-semibold text-slate-900",children:i})]}),a.jsxs("div",{className:"rounded-md border border-indigo-100 bg-white px-2 py-1.5",children:[a.jsx("p",{className:"text-[10px] text-slate-500",children:""}),a.jsx("p",{className:"mt-1 text-[11px] font-semibold text-slate-900",children:mt(t.dueAt)})]}),a.jsxs("div",{className:"rounded-md border border-indigo-100 bg-white px-2 py-1.5",children:[a.jsx("p",{className:"text-[10px] text-slate-500",children:" "}),a.jsx("p",{className:"mt-1 text-[11px] font-semibold text-slate-900",children:mt(t.lastSyncAt)})]}),a.jsxs("div",{className:"rounded-md border border-indigo-100 bg-white px-2 py-1.5",children:[a.jsx("p",{className:"text-[10px] text-slate-500",children:" "}),a.jsxs("p",{className:"mt-1 text-[11px] font-semibold text-slate-900",children:[e.requiredSatisfaction,"%"]})]}),a.jsxs("div",{className:"rounded-md border border-indigo-100 bg-white px-2 py-1.5",children:[a.jsxs("button",{type:"button",onClick:r,className:ue("inline-flex items-center gap-1 rounded border px-1.5 py-0.5 text-[10px] font-semibold",e.missingCount>0?"border-rose-200 bg-rose-50 text-rose-700":"border-emerald-200 bg-emerald-50 text-emerald-700"),children:[a.jsx(ss,{size:12})," ",e.missingCount,""]}),a.jsxs("p",{className:"mt-1 text-[10px] text-slate-500",children:[" ",e.qualityScore,"%"]})]})]}),a.jsxs("div",{className:"mt-3 flex flex-wrap items-center justify-end gap-2",children:[a.jsx("button",{type:"button",onClick:n,className:"rounded-md border border-indigo-200 bg-white px-3 py-1.5 text-[11px] font-semibold text-indigo-700",children:t.routeType==="HOSPITAL_REFERRAL"?" /":"  "}),a.jsx("button",{type:"button",onClick:s,className:"rounded-md bg-[#163b6f] px-3 py-1.5 text-[11px] font-semibold text-white",children:" "})]})]})}function T_e({routeType:e,orgName:t,dueAt:r,needsReasonOnChange:n,onSelectRoute:s}){return a.jsxs("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-2",children:[a.jsxs("button",{type:"button",onClick:()=>s("HOSPITAL_REFERRAL"),className:ue("rounded-md border px-3 py-2 text-left",e==="HOSPITAL_REFERRAL"?"border-indigo-300 bg-indigo-50 text-indigo-800":"border-slate-200 bg-white text-slate-700"),children:[a.jsx("p",{className:"text-xs font-semibold",children:a.jsx(Wd,{term:" "})}),a.jsxs("p",{className:"mt-1 text-[10px]",children:[": ",t||"-"]}),a.jsxs("p",{className:"text-[10px]",children:[": ",mt(r)]})]}),a.jsxs("button",{type:"button",onClick:()=>s("CENTER_DIRECT"),className:ue("rounded-md border px-3 py-2 text-left",e==="CENTER_DIRECT"?"border-indigo-300 bg-indigo-50 text-indigo-800":"border-slate-200 bg-white text-slate-700"),children:[a.jsx("p",{className:"text-xs font-semibold",children:a.jsx(Wd,{term:"  "})}),a.jsx("p",{className:"mt-1 text-[10px]",children:"  /  "}),n?a.jsx("p",{className:"text-[10px] text-amber-700",children:"        ."}):null]})]})}function O_e({item:e,onAction:t,registerRef:r}){const n=e.status==="MISSING"||e.status==="NEEDS_REVIEW";return a.jsxs("div",{ref:r?.(e.id),tabIndex:-1,className:ue("rounded-md border bg-white p-3 outline-none",n?"border-rose-300 bg-rose-50/40":"border-slate-200"),children:[a.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2",children:[a.jsxs("div",{children:[A_e(e),a.jsx("p",{className:"mt-0.5 text-[10px] text-slate-500",children:e.fullName})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-1",children:[a.jsx("span",{className:"rounded border border-slate-200 bg-slate-50 px-1.5 py-0.5 text-[10px] font-semibold text-slate-700",children:N_e(e.requiredLevel)}),a.jsx("span",{className:ue("rounded border px-1.5 py-0.5 text-[10px] font-semibold",E_e(e.status)),children:v_e(e.status)})]})]}),a.jsx("p",{className:"mt-1 text-[10px] text-slate-600",children:e.description}),a.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-[10px] text-slate-600",children:[a.jsxs("p",{children:[": ",S_e(e.source)]}),a.jsxs("p",{children:[": ",e.orgName||"-"]}),a.jsxs("p",{children:[": ",mt(e.dueAt)]}),a.jsxs("p",{children:[": ",mt(e.updatedAt)]})]}),e.missingReason?a.jsx("p",{className:"mt-1 rounded border border-rose-200 bg-rose-50 px-2 py-1 text-[10px] font-semibold text-rose-700",children:e.missingReason}):null,a.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:e.actions.map(s=>a.jsx("button",{type:"button",disabled:!s.enabled,onClick:()=>t(e,s),className:ue("rounded border px-1.5 py-1 text-[10px] font-semibold",s.intent==="danger"?"border-rose-200 bg-rose-50 text-rose-700":s.intent==="warning"?"border-amber-200 bg-amber-50 text-amber-700":s.intent==="success"?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-slate-200 bg-slate-50 text-slate-700",s.enabled?"":"cursor-not-allowed opacity-50"),children:s.label},s.key))})]})}function R_e({items:e,onAction:t,registerRef:r}){return a.jsx("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-2",children:e.map(n=>a.jsx(O_e,{item:n,onAction:t,registerRef:r},n.id))})}const qb={PRECHECK:["Stage1   Stage2   ","  (/MMSE/CDRGDS/)   "," ( /  ) ","// "],CONTACT_EXECUTION:["MMSE  ","CDR  GDS  "," / "," /   "],RESPONSE_HANDLING:[" (/MCI/) ","   ( )","MCI  (//) ","    "],FOLLOW_UP:["/MCI/    1 "," (/)     ","    "]},k_e={MMSE:" (/ ) .",CDR:"   .",GDS:"   :   CDR      .","GDS-K":"         .",ADL:" (// ) .",BPSD:"   (// ) .",MCI:" .",AD:"    .",ANN:"()   ( )."," ":"        .","  ":"   /    ."};function Wd({term:e,className:t}){return a.jsx(W0,{term:e,className:t})}function W0({term:e,className:t}){const[r,n]=h.useState(!1),s=h.useId(),i=h.useRef(null),o=k_e[e];return h.useEffect(()=>{if(!r)return;const l=d=>{const u=d.target;i.current?.contains(u)||n(!1)};return window.addEventListener("pointerdown",l),()=>window.removeEventListener("pointerdown",l)},[r]),o?a.jsxs("span",{ref:i,className:ue("relative inline-flex items-center",t),children:[a.jsxs("button",{type:"button",className:"inline-flex items-center gap-1 rounded px-0.5 text-inherit underline decoration-dotted underline-offset-2 focus-visible:outline focus-visible:outline-2 focus-visible:outline-indigo-300","aria-describedby":r?s:void 0,"aria-expanded":r,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),onFocus:()=>n(!0),onBlur:l=>{const d=l.relatedTarget;i.current?.contains(d)||n(!1)},onClick:()=>n(l=>!l),children:[e,a.jsx(ea,{size:12,className:"text-slate-400"})]}),r?a.jsx("span",{id:s,role:"tooltip",className:"absolute left-0 top-[calc(100%+6px)] z-40 w-64 rounded-md border border-slate-200 bg-white px-2 py-1.5 text-[10px] font-medium text-slate-600 shadow-lg",children:o}):null]}):a.jsx("span",{className:t,children:e})}function Wb({items:e}){return a.jsxs("div",{className:"rounded-md border border-indigo-200 bg-indigo-50 p-3",children:[a.jsx("p",{className:"text-xs font-semibold text-indigo-900",children:"  "}),a.jsx("ul",{className:"mt-1 space-y-1 text-[11px] text-indigo-800",children:e.map(t=>a.jsxs("li",{children:[" ",t]},t))})]})}function P_e({scoreSummary:e,modelPriorityValue:t,modelPriorityMeta:r,contactPriority:n,interventionLevel:s,stage3Risk:i,stage3DiffPathStatus:o,stage3RiskReviewedAt:l,onStage3MarkRiskReviewed:d,mode:u="stage1",stage2OpsView:m=!1,stage2ResultLabel:p,stage2MciStage:g,stage2Probs:x,stage2DiagnosisStatus:y,stage2CompletionPct:N,stage2RequiredDataPct:v,stage2NextDiagnosisAt:S,stage2QualityScore:E,stage2WaitingCount:C,stage2ResultMissingCount:_,stage2ClassificationConfirmed:A,stage2ModelAvailable:T=!1,stage3ModelAvailable:R=!1,stage3Type:I,stage2MissingEvidence:k=[],stage3MissingEvidence:w=[],onOpenStage2Input:L,onOpenStage3Input:H}){const B=u==="stage2",M=u==="stage3",G=M&&m,$=M&&I==="AD_MANAGEMENT"&&!G,z=g===""?82:g===""?34:58,U=Math.max(0,Math.min(100,t)),Z=Math.max(1,100-U),re=U>=85?"":U>=65?"":U>=45?"":"",X=re===""?"text-red-600":re===""?"text-orange-600":re===""?"text-blue-600":"text-emerald-600",F=[{key:"",range:"0-44",tone:"border-emerald-300 bg-emerald-50 text-emerald-700",dot:"bg-emerald-500",guide:"/"},{key:"",range:"45-64",tone:"border-blue-300 bg-blue-50 text-blue-700",dot:"bg-blue-500",guide:"  "},{key:"",range:"65-84",tone:"border-orange-300 bg-orange-50 text-orange-700",dot:"bg-orange-500",guide:"  "},{key:"",range:"85-100",tone:"border-red-300 bg-red-50 text-red-700",dot:"bg-red-500",guide:"24  "}];if(M&&i){if(G){const se=[{label:" ",value:T?p==="MCI"?`${p}(${jAe(g)})`:p??"":"",hint:"  ( )"},{label:"2  ",value:Jz(y),hint:"IN_PROGRESS / COMPLETED"},{label:" ",value:`${N??0}%`,hint:"   "},{label:" ",value:`${v??0}%`,hint:"  "},{label:"  ",value:mt(S),hint:"/ "},{label:" ",value:`${E??0}%`,hint:"/"}];return a.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"Stage2   "}),a.jsx("span",{className:"rounded-full border border-slate-200 bg-slate-50 px-2 py-0.5 text-[11px] font-semibold text-slate-700",children:"  ( )"})]}),a.jsx("div",{className:"mt-3 grid grid-cols-2 gap-2 md:grid-cols-3 xl:grid-cols-6",children:se.map(Ne=>a.jsxs("article",{title:Ne.hint,className:"rounded-lg border border-slate-200 bg-gradient-to-b from-white to-slate-50 px-2.5 py-2 shadow-sm transition-all duration-150 hover:-translate-y-0.5 hover:shadow-md",children:[a.jsx("p",{className:"text-[10px] font-semibold text-slate-500",children:Ne.label}),a.jsx("p",{className:"mt-1 text-xs font-bold text-slate-900",children:Ne.value})]},Ne.label))}),a.jsx("div",{className:"mt-4",children:T?a.jsx(Wz,{probs:x,predictedLabel:p,mciSeverity:g,mciScore:z}):a.jsx(sf,{stage:2,missing:k,onOpenStep:L})}),a.jsx("div",{className:"mt-4 grid grid-cols-1 gap-2 md:grid-cols-2 xl:grid-cols-5",children:e.map(Ne=>a.jsxs("article",{className:"rounded-xl border border-gray-200 bg-gradient-to-b from-white to-slate-50 p-3 shadow-sm transition-all duration-150 hover:-translate-y-0.5 hover:shadow-md",title:"Stage2  KPI",children:[a.jsx("p",{className:"text-[11px] font-semibold text-gray-500",children:Ne.label}),a.jsxs("p",{className:"mt-1 text-lg font-bold text-slate-900",children:[Ne.value,Ne.unit?a.jsx("span",{className:"ml-0.5 text-xs text-gray-400",children:Ne.unit}):null]}),a.jsxs("p",{className:"text-[10px] text-gray-400",children:[" ",mt(Ne.updatedAt)]}),Ne.flags?.length?a.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:Ne.flags.map(fe=>a.jsx("span",{className:"rounded bg-amber-100 px-1.5 py-0.5 text-[10px] font-semibold text-amber-700",children:fe},`${Ne.label}-${fe}`))}):null]},Ne.label))}),a.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-2 md:grid-cols-3",children:[a.jsxs("article",{className:"rounded-xl border border-slate-200 bg-slate-50 p-3",children:[a.jsx("p",{className:"text-[11px] font-semibold text-slate-700",children:"/  "}),a.jsxs("p",{className:"mt-1 text-lg font-bold text-slate-900",children:[C??0,""]}),a.jsx("p",{className:"text-[10px] text-slate-500",children:" /   "})]}),a.jsxs("article",{className:"rounded-xl border border-amber-200 bg-amber-50 p-3",children:[a.jsx("p",{className:"text-[11px] font-semibold text-amber-800",children:"   "}),a.jsxs("p",{className:"mt-1 text-lg font-bold text-amber-900",children:[_??0,""]}),a.jsx("p",{className:"text-[10px] text-amber-700",children:"  (MMSE/CDR//) "})]}),a.jsxs("article",{className:"rounded-xl border border-indigo-200 bg-indigo-50 p-3",children:[a.jsx("p",{className:"text-[11px] font-semibold text-indigo-900",children:"  "}),a.jsx("p",{className:"mt-1 text-lg font-bold text-indigo-900",children:A?"CONFIRMED":"UNCONFIRMED"}),a.jsx("p",{className:"text-[10px] text-indigo-700",children:"     "})]})]})]})}if(!R)return a.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:$?"AD  ":"AD  (2)"}),a.jsx("span",{className:"rounded-full border border-slate-200 bg-slate-50 px-2 py-0.5 text-[11px] font-semibold text-slate-700",children:" "})]}),a.jsx("div",{className:"mt-3",children:a.jsx(sf,{stage:3,missing:w,onOpenStep:H})})]});const te=se=>{if(G){if(se.includes(" "))return"Stage2   . //  .";if(se.includes("/ "))return"/    .";if(se.includes("  "))return" /  .";if(se.includes("  "))return"/MCI/   .";if(se.includes(" "))return" //   ."}return se.includes(" ")?"2  AD     .    .":se.includes(" ")?"    .    .":se.includes(" ")?"/    .   .":se.includes(" ")?"    . /    .":se.includes(" ")?"   . /   .":se.includes(" ")?"//    .":"  ."},ne=se=>$?se.replace("2  "," ").replace("2 "," ").replace(" "," ").replace(""," ").replace(" ",""):se;return a.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[a.jsx("div",{children:a.jsxs("h3",{className:"group relative inline-flex items-center gap-1 text-sm font-bold text-slate-900",children:[G?"Stage2   ":$?"AD  ":"AD  (2)",a.jsx(ea,{size:13,className:"text-slate-400"}),a.jsx("span",{className:"pointer-events-none absolute left-0 top-[calc(100%+8px)] z-20 w-80 rounded-md border border-slate-200 bg-white px-2 py-1.5 text-[10px] font-medium text-slate-600 opacity-0 shadow-md transition-opacity duration-150 group-hover:opacity-100 group-focus-within:opacity-100",children:G?"Stage2  /    . //    .":$?"/       .      .":"/     2  AD     .      ."})]})}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsxs("span",{className:"group relative rounded-full border border-blue-200 bg-blue-50 px-2.5 py-1 text-[11px] font-semibold text-blue-700",children:[G?"  ":$?" ":"2 "," ",Ko(i.risk2y_now),"%",a.jsx("span",{className:"pointer-events-none absolute left-0 top-[calc(100%+6px)] z-20 w-56 rounded-md border border-slate-200 bg-white px-2 py-1 text-[10px] font-medium text-slate-600 opacity-0 shadow-md transition-opacity duration-150 group-hover:opacity-100",children:G?"  :    ":$?" :    ":":    "})]}),a.jsxs("span",{className:"group relative rounded-full border border-indigo-200 bg-indigo-50 px-2.5 py-1 text-[11px] font-semibold text-indigo-700",children:[G?" ":""," ",eh(i.risk2y_now),a.jsx("span",{className:"pointer-events-none absolute left-0 top-[calc(100%+6px)] z-20 w-52 rounded-md border border-slate-200 bg-white px-2 py-1 text-[10px] font-medium text-slate-600 opacity-0 shadow-md transition-opacity duration-150 group-hover:opacity-100",children:G?"     ":" /    "})]}),a.jsxs("span",{className:ue("group relative rounded-full border px-2.5 py-1 text-[11px] font-semibold",n.tone),children:[G?"  ":" "," ",n.label,a.jsx("span",{className:"pointer-events-none absolute left-0 top-[calc(100%+6px)] z-20 w-52 rounded-md border border-slate-200 bg-white px-2 py-1 text-[10px] font-medium text-slate-600 opacity-0 shadow-md transition-opacity duration-150 group-hover:opacity-100",children:G?"  : // ":" :      "})]})]})]}),a.jsx("div",{className:"mt-3 grid grid-cols-1 gap-2 md:grid-cols-2 xl:grid-cols-5",children:e.map(se=>{const Ne=ne(se.label);return a.jsxs("article",{className:"group relative rounded-xl border border-gray-200 bg-gradient-to-b from-white to-slate-50 p-3 shadow-sm transition-all duration-150 hover:-translate-y-0.5 hover:shadow-md",children:[a.jsx("p",{className:"text-[11px] font-semibold text-gray-500",children:Ne}),a.jsxs("p",{className:"mt-1 text-lg font-bold text-slate-900",children:[se.value,se.unit?a.jsx("span",{className:"ml-0.5 text-xs text-gray-400",children:se.unit}):null]}),a.jsxs("p",{className:"text-[10px] text-gray-400",children:[" ",mt(se.updatedAt)]}),se.flags?.length?a.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:se.flags.map(fe=>a.jsx("span",{className:"rounded bg-amber-100 px-1.5 py-0.5 text-[10px] font-semibold text-amber-700",children:fe},`${se.label}-${fe}`))}):a.jsx("span",{className:"mt-1 inline-flex rounded bg-emerald-100 px-1.5 py-0.5 text-[10px] font-semibold text-emerald-700",children:""}),a.jsx("span",{className:"pointer-events-none absolute left-3 top-[calc(100%+6px)] z-20 w-56 rounded-md border border-slate-200 bg-white px-2 py-1 text-[10px] font-medium text-slate-600 opacity-0 shadow-md transition-opacity duration-150 group-hover:opacity-100",children:te(Ne)})]},se.label)})}),a.jsxs("div",{className:"mt-4 rounded-xl border border-indigo-200 bg-indigo-50 p-3",children:[a.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-semibold text-indigo-900",children:G?" / ":I==="AD_MANAGEMENT"?"  ":"  ( + 123 )"}),a.jsxs("p",{className:"text-[11px] text-indigo-700",children:[G?" ":""," ",i.trend,"   ",mt(i.updatedAt),"   ",i.modelVersion]})]}),a.jsx("button",{type:"button",onClick:d,className:"rounded-md border border-indigo-300 bg-white px-2.5 py-1 text-[11px] font-semibold text-indigo-700 hover:bg-indigo-100",children:l?G?"   ":"   ":G?"   ":"   "})]}),a.jsx("div",{className:"mt-2",children:a.jsx(cq,{risk:i,stageBadge:o,stage2OpsView:G,stage3Type:I})}),a.jsx("p",{className:"mt-2 text-[11px] text-indigo-700",children:G?i.variabilityNote??" : //    .":i.variabilityNote??" :     //  ."})]}),a.jsxs("details",{className:"mt-4 rounded-xl border border-slate-200 bg-slate-50 p-3",children:[a.jsx("summary",{className:"cursor-pointer text-[11px] font-semibold text-slate-800",children:" () "}),a.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-4 xl:grid-cols-[210px,1fr]",children:[a.jsxs("div",{className:"rounded-lg border border-white bg-white px-3 py-2",children:[a.jsx("p",{className:"text-[10px] font-semibold text-gray-500",children:"   /  "}),a.jsxs("p",{className:ue("mt-1 text-3xl font-black",X),children:[U," ",a.jsxs("span",{className:"text-lg font-bold text-slate-600",children:["/ ",s]})]}),a.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[a.jsx("span",{className:ue("rounded-full border px-2 py-0.5 text-[10px] font-semibold",r.tone),children:re}),a.jsxs("span",{className:"text-[10px] font-semibold text-gray-500",children:[" ",Z,"% "]})]})]}),a.jsx("div",{className:"rounded-lg border border-white bg-white px-3 py-3",children:a.jsx("div",{className:"grid grid-cols-2 gap-2 lg:grid-cols-4",children:F.map(se=>{const Ne=se.key===re;return a.jsxs("div",{className:ue("rounded-lg border px-2 py-2 transition-colors",Ne?se.tone:"border-gray-200 bg-gray-50 text-gray-500"),children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-[11px] font-bold",children:se.key}),a.jsx("span",{className:ue("h-2 w-2 rounded-full",Ne?se.dot:"bg-gray-300")})]}),a.jsx("p",{className:"mt-0.5 text-[10px] font-semibold",children:se.range}),a.jsx("p",{className:"mt-1 text-[10px]",children:se.guide})]},se.key)})})})]})]})]})}return a.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:B?"2   ":"1  "}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:ue("rounded-full border px-2.5 py-1 text-[11px] font-semibold",n.tone),children:[B?" ":" "," ",n.label]}),a.jsxs("span",{className:ue("rounded-full border px-2.5 py-1 text-[11px] font-semibold",r.tone),children:[B?"  ":"  "," ",r.label," ",t]})]})]}),a.jsx("div",{className:"mt-3 grid grid-cols-1 gap-2 md:grid-cols-2 xl:grid-cols-4",children:e.map(te=>a.jsxs("article",{className:"rounded-lg border border-gray-100 bg-gray-50 p-3",children:[a.jsx("p",{className:"text-[11px] font-semibold text-gray-500",children:te.label}),a.jsxs("p",{className:"mt-1 text-lg font-bold text-slate-900",children:[te.value,te.unit?a.jsx("span",{className:"ml-0.5 text-xs text-gray-400",children:te.unit}):null]}),a.jsxs("p",{className:"text-[10px] text-gray-400",children:[" ",mt(te.updatedAt)]})]},te.label))}),a.jsxs("div",{className:"mt-4 rounded-xl border border-slate-200 bg-slate-50 p-3",children:[a.jsxs("div",{className:"flex items-center justify-between text-[11px] text-slate-700",children:[a.jsxs("span",{className:"relative inline-flex items-center gap-1 font-semibold group",children:[B?"   Bullet Chart":"  Bullet Chart",a.jsx(ea,{size:13,className:"text-slate-400"}),a.jsxs("span",{className:"pointer-events-none absolute left-0 top-[calc(100%+8px)] z-30 w-64 rounded-lg border border-slate-200 bg-white p-2 text-[11px] text-slate-600 opacity-0 shadow-md transition-opacity duration-150 group-hover:opacity-100 group-focus-within:opacity-100",children:[a.jsx("span",{className:"block font-semibold text-slate-900",children:"  "}),a.jsx("span",{className:"mt-1 block",children:"- //   ."}),a.jsx("span",{className:"block",children:"-     ."}),a.jsx("span",{className:"block",children:"-  (///)   ."})]})]}),a.jsx("span",{children:r.guide})]}),a.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-4 xl:grid-cols-[210px,1fr]",children:[a.jsxs("div",{className:"rounded-lg border border-white bg-white px-3 py-2",children:[a.jsx("p",{className:"text-[10px] font-semibold text-gray-500",children:"   /  "}),a.jsxs("p",{className:ue("mt-1 text-3xl font-black",X),children:[U," ",a.jsxs("span",{className:"text-lg font-bold text-slate-600",children:["/ ",s]})]}),a.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[a.jsx("span",{className:ue("rounded-full border px-2 py-0.5 text-[10px] font-semibold",r.tone),children:re}),a.jsxs("span",{className:"text-[10px] font-semibold text-gray-500",children:[" ",Z,"% "]})]})]}),a.jsxs("div",{className:"rounded-lg border border-white bg-white px-3 py-3",children:[a.jsx("div",{className:"grid grid-cols-2 gap-2 lg:grid-cols-4",children:F.map(te=>{const ne=te.key===re;return a.jsxs("div",{className:ue("rounded-lg border px-2 py-2 transition-colors",ne?te.tone:"border-gray-200 bg-gray-50 text-gray-500"),children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-[11px] font-bold",children:te.key}),a.jsx("span",{className:ue("h-2 w-2 rounded-full",ne?te.dot:"bg-gray-300")})]}),a.jsx("p",{className:"mt-0.5 text-[10px] font-semibold",children:te.range}),a.jsx("p",{className:"mt-1 text-[10px]",children:te.guide})]},te.key)})}),a.jsxs("div",{className:"mt-2 rounded-md border border-gray-100 bg-gray-50 px-2 py-1.5 text-[11px] text-gray-600",children:[" : ",a.jsx("span",{className:ue("font-bold",X),children:re}),"   ",U," / ",s]})]})]})]})]})}function d_({timeline:e,filter:t,onFilterChange:r,listClassName:n,mode:s="stage1",stage2OpsView:i=!1,stage3Type:o}){const l=s==="stage3",d=l&&i,u=l&&o==="AD_MANAGEMENT"&&!d;return a.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-sm font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(ha,{size:15,className:"text-slate-500"}),d?"// ":l?u?"/// ":"/// ":"// "]}),a.jsx("div",{className:"flex items-center gap-1 rounded-lg border border-gray-200 bg-gray-50 p-1 text-[11px] font-semibold",children:[{key:"ALL",label:""},{key:"CALL",label:""},{key:"SMS",label:""},{key:"STATUS",label:""}].map(m=>a.jsx("button",{onClick:()=>r(m.key),className:ue("rounded-md px-2 py-1 transition-colors",t===m.key?"bg-white text-slate-900 shadow-sm":"text-gray-500 hover:bg-white"),children:m.label},m.key))})]}),a.jsx("div",{className:ue("mt-3 space-y-2",n),children:e.length===0?a.jsx("p",{className:"rounded-md border border-gray-100 bg-gray-50 px-3 py-2 text-xs text-gray-500",children:d?"    //    .":l?"           .":"   ."}):e.map((m,p)=>a.jsxs("div",{className:"rounded-md border border-gray-100 bg-gray-50 px-3 py-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-xs font-semibold text-slate-800",children:Ay(m)}),a.jsx("span",{className:"text-[11px] text-gray-500",children:mt(m.at)})]}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-600",children:eq(m)}),a.jsxs("p",{className:"mt-1 text-[10px] text-gray-400",children:[": ",m.by]})]},`${m.type}-${m.at}-${p}`))}),a.jsx("p",{className:"mt-3 text-[11px] text-gray-500",children:d?"    : //     .":l?u?"    : ///       ":"    : ///       ":"    :  3    "})]})}function u_({level:e,statusLabel:t,guides:r,onChangeLevel:n,onHold:s,onExclude:i,mode:o="stage1"}){const l=o==="stage3";return a.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsxs("h3",{className:"text-sm font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(gm,{size:15,className:"text-slate-500"}),l?"  ( )":"  ( )"]}),a.jsx("div",{className:"mt-3 space-y-2",children:r.map(d=>a.jsxs("button",{onClick:()=>n(d.level),title:`${d.purpose} /  : ${d.whenToUse}`,className:ue("w-full rounded-lg border px-3 py-2 text-left transition-colors",d.level===e?d.tone:"border-gray-200 bg-gray-50 hover:bg-gray-100"),children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("p",{className:"text-xs font-semibold",children:[d.level,"  ",d.label]}),d.level===e?a.jsx(li,{size:13}):null]}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-600",children:d.purpose})]},d.level))}),a.jsx("div",{className:"mt-3 rounded-md border border-gray-100 bg-gray-50 p-2",children:a.jsxs("p",{className:"text-[11px] text-gray-600",children:[" : ",a.jsx("strong",{children:t})]})}),a.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[a.jsxs("button",{onClick:s,className:"inline-flex items-center justify-center gap-1 rounded-md border border-orange-200 bg-orange-50 px-2 py-1.5 text-[11px] font-semibold text-orange-700",children:[a.jsx(sQ,{size:12})," "]}),a.jsxs("button",{onClick:i,className:"inline-flex items-center justify-center gap-1 rounded-md border border-red-200 bg-red-50 px-2 py-1.5 text-[11px] font-semibold text-red-700",children:[a.jsx(AX,{size:12}),"  "]})]})]})}function D_e({draft:e,onClose:t,onChangeReason:r,onConfirm:n}){return e?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/35 p-4",children:a.jsxs("div",{className:"w-full max-w-md rounded-xl border border-gray-200 bg-white p-4 shadow-2xl",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:e.title}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"     ."}),a.jsx("textarea",{value:e.reason,onChange:s=>r(s.target.value),className:"mt-3 h-24 w-full rounded-lg border border-gray-200 px-2 py-1.5 text-xs outline-none focus:border-blue-400",placeholder:"  "}),a.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[a.jsx("button",{onClick:t,className:"rounded-md border border-gray-200 px-3 py-1.5 text-xs font-semibold text-gray-700",children:""}),a.jsx("button",{onClick:n,disabled:!e.reason.trim(),className:"rounded-md bg-[#163b6f] px-3 py-1.5 text-xs font-semibold text-white disabled:bg-gray-300",children:e.confirmLabel})]})]})}):null}function I_e({draft:e,loading:t,onClose:r,onChangeResult:n,onChangeNote:s,onConfirm:i}){if(!e)return null;const o=[{value:"SUCCESS",label:" "},{value:"NO_ANSWER",label:""},{value:"REJECTED",label:""},{value:"WRONG_NUMBER",label:" "}],l=[{value:"DELIVERED",label:" "},{value:"FAILED",label:" "},{value:"PENDING",label:" "}];return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/35 p-4",children:a.jsxs("div",{className:"w-full max-w-md rounded-xl border border-gray-200 bg-white p-4 shadow-2xl",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:e.title}),e.mode==="CALL"?a.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[" : ",String(Math.floor(e.durationSec/60)).padStart(2,"0"),":",String(e.durationSec%60).padStart(2,"0")]}):a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:e.scheduled?"   ":"   "}),a.jsxs("div",{className:"mt-3",children:[a.jsx("label",{className:"text-[11px] font-semibold text-gray-600",children:""}),a.jsx("select",{value:e.result,onChange:d=>n(d.target.value),className:"mt-1 w-full rounded-md border border-gray-200 bg-white px-2 py-2 text-xs outline-none focus:border-blue-400",children:(e.mode==="CALL"?o:l).map(d=>a.jsx("option",{value:d.value,children:d.label},d.value))})]}),a.jsxs("div",{className:"mt-3",children:[a.jsx("label",{className:"text-[11px] font-semibold text-gray-600",children:""}),a.jsx("textarea",{value:e.note,onChange:d=>s(d.target.value),className:"mt-1 h-20 w-full rounded-md border border-gray-200 px-2 py-1.5 text-xs outline-none focus:border-blue-400",placeholder:"  "})]}),a.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[a.jsx("button",{onClick:r,disabled:t,className:"rounded-md border border-gray-200 px-3 py-1.5 text-xs font-semibold text-gray-700 disabled:opacity-50",children:""}),a.jsx("button",{onClick:i,disabled:t,className:"rounded-md bg-[#163b6f] px-3 py-1.5 text-xs font-semibold text-white disabled:bg-gray-300",children:t?" ...":""})]})]})})}function Pi(e){if(!e)return"-";const t=new Date(e);return Number.isNaN(t.getTime())?e:`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")} ${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`}function M_e(e){return e?e.contactMode==="MANUAL_OVERRIDE"?`  (${e.effectiveMode==="HUMAN_FIRST"?" ":" "})`:e.effectiveMode==="HUMAN_FIRST"?" ":" ":"-"}function L_e(e){return e?e.slaLevel==="OVERDUE"?"":e.slaLevel==="DUE_SOON"?"":"":"-"}function P7(e){return e?.status??""}function $_e(e){return e?e==="TRACKING"?"":e==="REEVAL_DUE"?" ":e==="REEVAL_PENDING"?" ":e==="LINKAGE_PENDING"?" ":e==="PLAN_NEEDS_UPDATE"?"  ":e==="CHURN_RISK"?" ":"":"-"}function F_e(e){return e?e==="IN_PROGRESS"?"":e==="ON_HOLD"?"":e==="EXCLUDED"?"":"":"-"}function U_e(e){return e?e==="NONE"?"":e==="RECOMMENDED"?"":e==="REFERRED"?"":e==="SCHEDULED"?"":e==="COMPLETED"?"":e:"-"}function B_e(e){return e?e==="TRACKING"?"":e==="REEVAL_DUE"?"":e==="REEVAL_PENDING"?"":e==="LINKAGE_PENDING"?"":e==="PLAN_NEEDS_UPDATE"?"":e==="CHURN_RISK"?"()":"":"-"}function f_(e){return e?e==="NOT_STARTED"?"":e==="IN_PROGRESS"?"":e==="COMPLETED"?"":e:"-"}function p_(e){if(!e||e.length===0)return"  ";const t=e.slice(0,3).join(", ");return e.length<=3?t:`${t}  ${e.length-3}`}function dq({caseId:e,stage:t,onBack:r,forceMode:n}){const s=ON(e),i=h.useMemo(()=>{const A=wN(e);return A||(s?d1(s):void 0)},[e,s]),[o,l]=h.useState(null),d=t==="Stage 2",u=n??(d?"stage2":"stage3"),m=u==="stage3",p=d&&m,g=Rz(m?e:null),x=g?.source.profile?.originStage2Result??o?.stage3Meta?.originStage2Result,y=g?.source.profile?.stage3Type??o?.stage3Meta?.stage3Type??(x==="AD"?"AD_MANAGEMENT":"PREVENTIVE_TRACKING"),N=i?.profile.phone??s?.patient.phone??"-",v=i?.profile.name??s?.patient.name??" ",S=i?.profile.age??s?.patient.age,E=m?v:e,C=i?.manager??s?.assigneeId??" ",_=i?m?` ${v}   ${S??"-"}   ${N}`:` ${Zm(i.profile.age)}   ${d?N:Xo(i.profile.phone)}   ${i.id}`:s?m?` ${v}   ${S??"-"}   ${N}`:` ${Zm(s.patient.age)}   ${d?N:Xo(N)}   ${s.caseId}`:m?"/  ":` ${e}`;return a.jsxs("div",{className:"flex h-full flex-col bg-[#f4f7fb]",children:[a.jsxs("div",{className:"sticky top-0 z-20 border-b border-slate-200 bg-white/95 px-6 py-4 shadow-sm backdrop-blur",children:[a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:r,className:"rounded-full border border-slate-200 bg-white p-2 transition-colors hover:bg-slate-50",children:a.jsx(dm,{size:20})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:E}),a.jsx("span",{className:"rounded border border-blue-200 bg-blue-50 px-3.5 py-1.5 text-sm font-bold text-blue-700",children:t})]}),a.jsxs("p",{className:"mt-0.5 flex items-center gap-2 text-xs text-gray-500",children:[a.jsxs("span",{className:"font-bold text-gray-700",children:[": ",C]}),a.jsx("span",{className:"h-2 w-px bg-gray-200"}),a.jsxs("span",{children:[" :"," ",a.jsx("span",{className:"font-bold text-blue-700",children:p?B_e(o?.stage3Meta?.opsStatus):m?g?F_e(g.source.loop.status):o?.stage3Meta?$_e(o.stage3Meta.opsStatus):P7(i):d?f_(o?.stage2Meta?.diagnosisStatus):P7(i)})]}),a.jsx("span",{className:"h-2 w-px bg-gray-200"}),a.jsx("span",{className:"text-gray-600",children:_})]})]})]}),a.jsx("div",{className:"flex items-center gap-3",children:a.jsxs("button",{className:"flex items-center gap-2 rounded-lg border border-slate-200 px-4 py-2 text-xs font-bold text-slate-700 hover:bg-slate-50",children:[a.jsx(j1,{size:14}),"   "]})})]}),o?a.jsx("div",{className:"mt-3 rounded-xl border border-slate-700 bg-gradient-to-r from-slate-900 to-slate-800 px-3 py-2 text-white",children:p&&o.stage2Meta?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-[11px] font-semibold",children:[a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",title:"/MCI/   .",children:["  ",o.stage2Meta.classificationLabel,o.stage2Meta.classificationLabel==="MCI"&&o.stage2Meta.mciStage?`(${o.stage2Meta.mciStage===""?"":o.stage2Meta.mciStage})`:""]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",title:"Stage2   .",children:["2   ",f_(o.stage2Meta.diagnosisStatus)]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",title:"      .",children:["  ",o.stage2Meta.completionPct,"%"]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",title:"     .",children:["  ",o.stage2Meta.requiredDataPct,"%"]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",title:"      .",children:["   ",Pi(o.stage2Meta.targetAt)]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",title:"     .",children:["  ",o.qualityScore,"%   ",o.missingCount,""]}),o.stage2Meta.modelAvailable===!1?a.jsxs("span",{className:"rounded-md bg-amber-100/90 px-2 py-1 text-amber-950",title:"        .",children:["   ",p_(o.stage2Meta.missingEvidence)]}):null]}),a.jsx("p",{className:"mt-1 text-[11px] text-slate-200",children:" :  /    //     ."}),a.jsxs("details",{className:"mt-1 text-[10px] text-slate-300",children:[a.jsx("summary",{className:"cursor-pointer",children:""}),a.jsxs("p",{className:"mt-1",children:["Stage2  ",Pi(o.stage2Meta.enteredAt),"    ",Pi(o.stage2Meta.targetAt),"   ",o.stage2Meta.delayDays,"    ",o.stage2Meta.nextActionLabel,"    ",Pi(o.lastUpdatedAt)]})]})]}):m&&o.stage3Meta?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-[11px] font-semibold",children:[a.jsx("span",{className:"rounded-md bg-white/15 px-2 py-1",title:y==="AD_MANAGEMENT"?"    .":"2  AD     .",children:g?.display.riskBadge.kind==="ready"?g.display.riskBadge.label:y==="AD_MANAGEMENT"?`  ${o.stage3Meta.modelAvailable&&o.stage3Meta.risk2yNowPct!=null?`${o.stage3Meta.risk2yNowPct}% (${o.stage3Meta.risk2yLabel??"-"})`:""}`:`2  ${o.stage3Meta.modelAvailable&&o.stage3Meta.risk2yNowPct!=null?`${o.stage3Meta.risk2yNowPct}% (${o.stage3Meta.risk2yLabel??"-"})`:""}`}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",title:"Stage2   Stage3  .",children:[" ",y==="AD_MANAGEMENT"?"AD":""]}),o.stage3Meta.originStage2Result?a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",title:"Stage3   Stage2  .",children:["Stage2  ",o.stage3Meta.originStage2Result]}):null,a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",title:"  .",children:["  ",Pi(o.stage3Meta.nextReevalAt)]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",title:"/  .",children:[" ",U_e(o.stage3Meta.diffPathStatus)]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",title:"  .",children:[" ",o.stage3Meta.planStatus]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",title:"   .",children:["  ",o.stage3Meta.churnRisk]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",title:" / .",children:[" ",o.qualityScore,"%   ",o.missingCount,""]}),o.stage3Meta.modelAvailable===!1?a.jsxs("span",{className:"rounded-md bg-amber-100/90 px-2 py-1 text-amber-950",title:"        .",children:["   ",p_(o.stage3Meta.missingEvidence)]}):null]}),a.jsxs("p",{className:"mt-1 text-[11px] text-slate-200",children:[" : ",y==="AD_MANAGEMENT"?"         .":"    //     ."]}),a.jsxs("details",{className:"mt-1 text-[10px] text-slate-300",children:[a.jsx("summary",{className:"cursor-pointer",children:""}),o.stage3Meta.modelAvailable?a.jsxs("p",{className:"mt-1",children:["  ",Pi(o.lastUpdatedAt),"    ",Pi(o.stage3Meta.riskUpdatedAt),"   ",o.stage3Meta.trend,"   ",o.stage3Meta.modelVersion,"   ",o.stage3Meta.trackingCycleDays,"    ",Pi(o.stage3Meta.nextTrackingContactAt)]}):a.jsxs("p",{className:"mt-1",children:["  ",Pi(o.lastUpdatedAt),"        ."]})]})]}):d&&o.stage2Meta?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-[11px] font-semibold",children:[a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:["Stage2   ",f_(o.stage2Meta.diagnosisStatus)]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:["  ",o.stage2Meta.completionPct,"% ( ",o.stage2Meta.completedCount,")"]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:["  ",o.stage2Meta.classificationLabel,o.stage2Meta.classificationLabel==="MCI"&&o.stage2Meta.mciStage?`(${o.stage2Meta.mciStage})`:""]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:["MCI  ",o.stage2Meta.mciStage??"-"]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:["Stage3   ",o.stage2Meta.stage3EntryNeeded?"TRUE":"FALSE"]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:["  ",o.qualityScore,"%"]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:[" ",o.missingCount,""]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:["  ",Pi(o.lastUpdatedAt)]}),o.stage2Meta.modelAvailable===!1?a.jsxs("span",{className:"rounded-md bg-amber-100/90 px-2 py-1 text-amber-950",title:"        .",children:["   ",p_(o.stage2Meta.missingEvidence)]}):null]}),a.jsxs("p",{className:"mt-1 text-[11px] text-slate-200",children:["Stage2  ",Pi(o.stage2Meta.enteredAt),"    ",Pi(o.stage2Meta.targetAt),"   ",o.stage2Meta.delayDays,"    ",o.stage2Meta.nextActionLabel]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-[11px] font-semibold",children:[a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:[d?"/ ":" "," ",M_e(o)]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:["SLA ",L_e(o)]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:[d?" ":" "," ",o.qualityScore,"%"]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:[" ",o.missingCount,""]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:[d?" ":""," ",o.warningCount,""]})]}),a.jsxs("p",{className:"mt-1 text-[11px] text-slate-200",children:["  ",Pi(o.lastUpdatedAt),"   : ",d?"//     .":"        ."]})]})}):null]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:a.jsx(lq,{caseId:e,caseRecord:i,onHeaderSummaryChange:l,mode:u,surfaceStage:t})})]})}function uq({caseId:e,onBack:t}){return a.jsx(dq,{caseId:e,stage:"Stage 2",forceMode:"stage3",onBack:t})}function fq({caseId:e,onBack:t}){return a.jsx(dq,{caseId:e,stage:"Stage 3",onBack:t})}function G_e(e){if(!e)return"-";const t=new Date(e);return Number.isNaN(t.getTime())?e:`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")} ${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`}function H_e(e){return e?e.contactMode==="MANUAL_OVERRIDE"?`  (${e.effectiveMode==="HUMAN_FIRST"?" ":" "})`:e.effectiveMode==="HUMAN_FIRST"?" ":" ":"-"}function K_e(e){return e?e.slaLevel==="OVERDUE"?"":e.slaLevel==="DUE_SOON"?"":"":"-"}function z_e({caseId:e,stage:t,onBack:r}){const{data:n}=tje(e),s=ON(e),i=n?.item??null,o=h.useMemo(()=>i?d1(i):s?d1(s):wN(e),[i,e,s]),[l,d]=h.useState(null),u=t==="Stage 1",m=u&&o?` ${Zm(o.profile.age)}   ${Xo(o.profile.phone)}   ${o.id}`:null;return t==="Stage 2"?a.jsx(uq,{caseId:e,onBack:r}):t==="Stage 3"?a.jsx(fq,{caseId:e,onBack:r}):a.jsxs("div",{className:"flex h-full flex-col bg-[#f4f7fb]",children:[a.jsxs("div",{className:"sticky top-0 z-20 border-b border-slate-200 bg-white/95 px-6 py-4 shadow-sm backdrop-blur",children:[a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:r,className:"rounded-full border border-slate-200 bg-white p-2 transition-colors hover:bg-slate-50",children:a.jsx(dm,{size:20})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:e}),a.jsx("span",{className:"rounded border border-blue-200 bg-blue-50 px-3.5 py-1.5 text-sm font-bold text-blue-700",children:t})]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-0.5 flex items-center gap-2",children:[a.jsxs("span",{className:"font-bold text-gray-700",children:[": ",o?.manager??" "]}),a.jsx("span",{className:"w-px h-2 bg-gray-200"}),a.jsxs("span",{children:[" : ",a.jsx("span",{className:"font-bold text-blue-700",children:o?.status??i?.status??s?.status??""})]}),m?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"w-px h-2 bg-gray-200"}),a.jsx("span",{className:"text-gray-600",children:m})]}):null]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{className:"flex items-center gap-2 rounded-lg border border-slate-200 px-4 py-2 text-xs font-bold text-slate-700 hover:bg-slate-50",children:[a.jsx(j1,{size:14}),"   "]}),a.jsxs("button",{className:"flex items-center gap-2 rounded-lg bg-[#15386a] px-4 py-2 text-xs font-bold text-white shadow-sm transition-all hover:shadow-md",children:["  1  ",a.jsx(um,{size:14})]})]})]}),u&&l?a.jsxs("div",{className:"mt-3 rounded-xl border border-slate-700 bg-gradient-to-r from-slate-900 to-slate-800 px-3 py-2 text-white",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-[11px] font-semibold",children:[a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:["  ",H_e(l)]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:["SLA ",K_e(l)]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:["  ",l.qualityScore,"%"]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:[" ",l.missingCount,""]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:[" ",l.warningCount,""]})]}),a.jsxs("p",{className:"mt-1 text-[11px] text-slate-200",children:["  ",G_e(l.lastUpdatedAt),"   :         ."]})]}):null]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:u?a.jsx(a.Fragment,{children:a.jsx(lq,{caseId:e,caseRecord:o,onHeaderSummaryChange:d})}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-5",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(oQ,{size:16,className:"text-gray-500"})," "]}),a.jsx("span",{className:"text-[10px] font-semibold text-gray-500 bg-gray-100 px-2 py-1 rounded",children:t==="Stage 1"?"Stage 1: ID  ":"Stage 2+:   "})]}),o?a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-xs",children:[a.jsxs("div",{className:"rounded-lg border border-gray-100 bg-gray-50 px-3 py-2",children:[a.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase",children:" "}),a.jsx("p",{className:"mt-1 font-bold text-gray-800",children:t==="Stage 1"?o.id:`${$2e(o.profile.name)} (${o.id})`})]}),a.jsxs("div",{className:"rounded-lg border border-gray-100 bg-gray-50 px-3 py-2",children:[a.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase",children:""}),a.jsx("p",{className:"mt-1 font-bold text-gray-800",children:t==="Stage 1"?Zm(o.profile.age):`${o.profile.age}`})]}),a.jsxs("div",{className:"rounded-lg border border-gray-100 bg-gray-50 px-3 py-2",children:[a.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase",children:""}),a.jsx("p",{className:"mt-1 font-bold text-gray-800",children:Xo(o.profile.phone)}),t==="Stage 1"&&o.profile.guardianPhone&&a.jsxs("p",{className:"mt-1 text-[11px] text-gray-500",children:[": ",Xo(o.profile.guardianPhone)]})]})]}):a.jsx("p",{className:"text-xs text-gray-500",children:"       ."})]}),t==="Stage 2"&&a.jsx(q_e,{}),t==="Stage 3"&&a.jsx(W_e,{}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-5",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4 pb-2 border-b border-gray-100",children:[a.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(ha,{size:16,className:"text-gray-400"}),"    "]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:"text-[10px] font-bold text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded flex items-center gap-1",children:[a.jsx(Yl,{size:10}),"   "]}),a.jsx("button",{className:"text-[10px] font-bold text-gray-400 hover:text-gray-600",children:" "})]})]}),a.jsx("div",{className:"space-y-3",children:[{time:"2026-02-11 11:20",user:"",action:"  ",reason:"   (  15% )",logId:"LOG-9921"},{time:"2026-02-10 14:45",user:"",action:"  ",reason:"    ",logId:"LOG-8842"},{time:"2026-02-09 10:00",user:"System",action:"Stage ",reason:"2       ",logId:"LOG-7710"}].map((p,g)=>a.jsxs("div",{className:"flex gap-4 text-xs group",children:[a.jsx("div",{className:"w-32 shrink-0 font-mono text-gray-400",children:p.time}),a.jsx("div",{className:"shrink-0 font-bold text-gray-700 w-20",children:p.user}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("span",{className:"font-bold text-[#163b6f]",children:[p.action,": "]}),a.jsx("span",{className:"text-gray-600",children:p.reason})]}),a.jsxs("div",{className:"shrink-0 font-mono text-[10px] text-gray-300 opacity-0 group-hover:opacity-100 transition-opacity",children:["#",p.logId]})]},g))})]})]})})]})}function q_e(){const[e,t]=h.useState(!1),r=()=>{t(!0),ke.info("      .",{description:": ,  : 2026-02-11 11:50"})};return a.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[a.jsx("div",{className:"col-span-12",children:a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm px-6 py-4 flex items-center justify-between border-l-8 border-[#163b6f]",children:[a.jsxs("div",{className:"flex items-center gap-12",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),a.jsx("span",{className:"text-xl font-bold text-[#163b6f]",children:"  "})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),a.jsx("span",{className:"text-sm font-bold text-orange-600",children:"2   ()"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),a.jsx("span",{className:"text-sm font-bold text-gray-900",children:"   "})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{className:"p-2 border border-gray-200 rounded-lg hover:bg-gray-50",children:a.jsx(Fs,{size:16})}),a.jsx("button",{className:"p-2 border border-gray-200 rounded-lg hover:bg-gray-50",children:a.jsx(Vo,{size:16})})]})]})}),a.jsxs("div",{className:"col-span-8 space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[a.jsx("h3",{className:"font-bold text-gray-800 mb-6",children:"  "}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl border border-gray-100",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-white border border-gray-200 flex items-center justify-center font-bold text-[#163b6f] shadow-sm text-lg",children:"1"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-gray-900",children:"1   (CIST)"}),a.jsx("p",{className:"text-[11px] text-gray-500",children:"2026-01-15  |  "})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("span",{className:"text-xl font-bold text-orange-600",children:"18 / 30"}),a.jsx("p",{className:"text-[10px] text-gray-400",children:": "})]})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-[#163b6f]/5 rounded-xl border border-[#163b6f]/20 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-[#163b6f] flex items-center justify-center font-bold text-white shadow-lg text-lg",children:"2"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-[#163b6f]",children:"2   (SNSB)"}),a.jsx("p",{className:"text-[11px] text-gray-500",children:"2026-02-10  |   "})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("span",{className:"text-xl font-bold text-[#163b6f]",children:"-2.1 SD"}),a.jsx("p",{className:"text-[10px] text-red-600 font-bold",children:" 1 ( )"})]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:[a.jsxs("div",{className:"bg-gray-100/80 px-6 py-3 border-b border-gray-200 flex items-center justify-between",children:[a.jsxs("h3",{className:"text-xs font-bold text-gray-600 uppercase flex items-center gap-2",children:[a.jsx(tu,{size:14,className:"text-orange-500"}),"   (  )"]}),!e&&a.jsxs("button",{onClick:r,className:"flex items-center gap-1.5 px-3 py-1 bg-white border border-[#163b6f] rounded text-[10px] font-bold text-[#163b6f] hover:bg-blue-50 transition-colors shadow-sm",children:[a.jsx(pm,{size:12}),"   "]})]}),a.jsx("div",{className:"p-8 min-h-[140px] flex items-center justify-center bg-gray-50/30",children:e?a.jsxs("div",{className:"w-full grid grid-cols-2 gap-6 animate-in fade-in zoom-in duration-300",children:[a.jsxs("div",{className:"p-5 border border-red-200 bg-red-50/50 rounded-2xl text-center shadow-sm",children:[a.jsx("p",{className:"text-[10px] font-bold text-gray-400 mb-1 uppercase",children:"  "}),a.jsx("p",{className:"text-2xl font-bold text-red-700",children:"MCI (High)"})]}),a.jsxs("div",{className:"p-5 border border-blue-200 bg-blue-50/50 rounded-2xl text-center shadow-sm",children:[a.jsx("p",{className:"text-[10px] font-bold text-gray-400 mb-1 uppercase",children:"    "}),a.jsx("p",{className:"text-2xl font-bold text-blue-700",children:"82%"})]})]}):a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(tu,{size:24,className:"text-gray-300"}),a.jsx("p",{className:"text-sm text-gray-400 italic",children:"     ."})]})})]})]}),a.jsx("div",{className:"col-span-4 space-y-6",children:a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[a.jsxs("h3",{className:"font-bold text-gray-800 mb-6 flex items-center gap-2",children:[a.jsx(um,{size:18,className:"text-[#163b6f]"}),"   "]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-[10px] font-bold text-[#163b6f] uppercase border-l-2 border-[#163b6f] pl-2",children:"  "}),a.jsxs("button",{className:"w-full py-3 bg-[#163b6f] text-white text-xs font-bold rounded-xl hover:bg-[#0f2a50] flex items-center justify-center gap-2 shadow-md",children:[a.jsx(Ef,{size:16}),"    "]}),a.jsx("button",{className:"w-full py-2 border border-gray-200 text-gray-700 text-xs font-bold rounded-lg hover:bg-gray-50",children:"   "})]}),a.jsxs("div",{className:"space-y-2 pt-4 border-t border-gray-50",children:[a.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase border-l-2 border-gray-200 pl-2",children:"MCI  "}),a.jsx("button",{className:"w-full py-2 border border-gray-200 text-gray-700 text-xs font-bold rounded-lg hover:bg-gray-50",children:"   (CRF)"}),a.jsx("button",{className:"w-full py-2 border border-gray-200 text-gray-700 text-xs font-bold rounded-lg hover:bg-gray-50",children:"/  "})]}),a.jsxs("div",{className:"space-y-2 pt-4 border-t border-gray-50",children:[a.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase border-l-2 border-gray-200 pl-2",children:"  "}),a.jsx("button",{className:"w-full py-2 border border-gray-200 text-gray-400 text-xs font-bold rounded-lg cursor-not-allowed",disabled:!0,children:"  ( )"})]})]})]})}),a.jsx("div",{className:"col-span-12",children:a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 overflow-x-auto",children:[a.jsxs("h3",{className:"font-bold text-gray-800 mb-8 flex items-center gap-2",children:[a.jsx(ha,{size:16})," --- "]}),a.jsx("div",{className:"flex items-center min-w-[800px]",children:[{step:"",date:"01-15",status:"",color:"bg-emerald-500"},{step:"2",date:"02-10",status:"",color:"bg-emerald-500"},{step:"",date:"",status:"",color:"bg-orange-500"},{step:"",date:"",status:"",color:"bg-gray-200"},{step:"/",date:"",status:"",color:"bg-gray-200"}].map((n,s,i)=>a.jsxs(Y.Fragment,{children:[a.jsxs("div",{className:"flex flex-col items-center relative z-10",children:[a.jsx("div",{className:ue("w-10 h-10 rounded-full flex items-center justify-center text-white shadow-lg",n.color),children:n.status===""?a.jsx(li,{size:20}):a.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),a.jsx("p",{className:"text-[11px] font-bold text-gray-900 mt-2",children:n.step}),a.jsx("p",{className:"text-[10px] text-gray-400",children:n.date})]}),s<i.length-1&&a.jsx("div",{className:ue("flex-1 h-1 mx-2",n.status===""&&i[s+1].status===""?"bg-emerald-500":"bg-gray-100")})]},s))})]})})]})}function W_e(){const e=[{name:"24-Q3",score:85,trigger:!1},{name:"24-Q4",score:82,trigger:!1},{name:"25-Q1",score:75,trigger:!0},{name:"25-Q2",score:72,trigger:!0},{name:"26-Q1",score:68,trigger:!0}];return a.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[a.jsx("div",{className:"col-span-12",children:a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm px-6 py-4 flex items-center justify-between border-l-8 border-red-600",children:[a.jsxs("div",{className:"flex items-center gap-12",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"  "}),a.jsx("span",{className:"text-xl font-bold text-red-600",children:"  (Danger Zone)"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),a.jsx("span",{className:"text-sm font-bold text-[#163b6f]",children:"3  ()"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("div",{className:"w-2 h-2 bg-red-600 rounded-full animate-pulse"}),a.jsx("span",{className:"text-sm font-bold text-red-600",children:"  "})]})]})]}),a.jsx("div",{className:"flex items-center gap-3",children:a.jsx("span",{className:"text-[10px] font-bold text-gray-400 bg-gray-100 px-2 py-1 rounded",children:" : 95%"})})]})}),a.jsxs("div",{className:"col-span-8 space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-200 shadow-sm",children:[a.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase mb-2",children:"2  ()"}),a.jsx("p",{className:"text-2xl font-bold text-red-600",children:"-2.4 SD"}),a.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:"  15% "})]}),a.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-200 shadow-sm",children:[a.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase mb-2",children:"MRI "}),a.jsx("p",{className:"text-sm font-bold text-orange-600",children:"  "}),a.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:"MTA Scale 3"})]}),a.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-200 shadow-sm",children:[a.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase mb-2",children:" "}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"33%"}),a.jsx("p",{className:"text-[10px] text-red-600 font-bold mt-1",children:"3  "})]})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"font-bold text-gray-800",children:"  "}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("div",{className:"flex items-center gap-1.5 text-[9px] font-bold text-gray-500",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-red-600"}),"  "]}),a.jsxs("div",{className:"flex items-center gap-1.5 text-[9px] font-bold text-gray-500",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-200"}),"  "]})]})]}),a.jsx("div",{className:"h-64",children:a.jsx(Ta,{width:"100%",height:"100%",children:a.jsxs(NN,{data:e,children:[a.jsx(ys,{strokeDasharray:"3 3",vertical:!1,stroke:"#f1f5f9"}),a.jsx(da,{dataKey:"name",fontSize:10,axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8"}}),a.jsx(Jn,{fontSize:10,axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8"}}),a.jsx(ln,{}),a.jsx(qa,{type:"monotone",dataKey:"score",stroke:"#dc2626",strokeWidth:3,dot:{r:4,fill:"#dc2626"}}),a.jsx(qa,{type:"monotone",dataKey:"threshold",stroke:"#e2e8f0",strokeDasharray:"5 5",dot:!1,strokeWidth:2})]})})})]})]}),a.jsxs("div",{className:"col-span-4 space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[a.jsxs("h3",{className:"font-bold text-gray-800 mb-6 flex items-center gap-2 text-sm",children:[a.jsx(ss,{size:16,className:"text-red-600"}),"   "]}),a.jsx("div",{className:"space-y-4",children:[{label:"  (10% )",value:"15% ",status:"",color:"text-red-600 bg-red-50"},{label:"  (2 )",value:"1 ",status:"",color:"text-gray-400 bg-gray-50"},{label:"  (3 )",value:"4 ",status:"",color:"text-red-600 bg-red-50"}].map((t,r)=>a.jsxs("div",{className:"flex flex-col gap-1.5 border-b border-gray-50 pb-3 last:border-0 last:pb-0",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs font-bold text-gray-700",children:t.label}),a.jsx("span",{className:ue("text-[9px] font-bold px-1.5 py-0.5 rounded",t.color),children:t.status})]}),a.jsxs("p",{className:"text-[10px] text-gray-500",children:[" : ",t.value]})]},r))})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-5",children:[a.jsx("h3",{className:"font-bold text-gray-800 mb-4",children:" "}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("button",{className:"w-full py-3 bg-red-600 text-white text-xs font-bold rounded-xl flex flex-col items-center gap-1 shadow-lg hover:bg-red-700 transition-all",children:[a.jsx(Vo,{size:18}),a.jsx("span",{children:"  "})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsx("button",{className:"py-2.5 border border-gray-200 rounded-lg text-[10px] font-bold text-gray-700 hover:bg-gray-50",children:"  "}),a.jsx("button",{className:"py-2.5 border border-gray-200 rounded-lg text-[10px] font-bold text-gray-700 hover:bg-gray-50",children:"/ "})]}),a.jsx("button",{className:"w-full py-2.5 border-2 border-orange-500 text-orange-600 text-[10px] font-bold rounded-lg hover:bg-orange-50",children:"  "})]})]})]}),a.jsx("div",{className:"col-span-12",children:a.jsx("div",{className:"bg-red-50 border border-red-100 rounded-xl p-3 text-[10px] text-red-700 font-bold italic text-center",children:"*       : 26-Q1            (  )"})})]})}function D7(e){const t=V_e(e),r=h.forwardRef((n,s)=>{const{children:i,...o}=n,l=h.Children.toArray(i),d=l.find(X_e);if(d){const u=d.props.children,m=l.map(p=>p===d?h.Children.count(u)>1?h.Children.only(null):h.isValidElement(u)?u.props.children:null:p);return a.jsx(t,{...o,ref:s,children:h.isValidElement(u)?h.cloneElement(u,void 0,m):null})}return a.jsx(t,{...o,ref:s,children:i})});return r.displayName=`${e}.Slot`,r}function V_e(e){const t=h.forwardRef((r,n)=>{const{children:s,...i}=r;if(h.isValidElement(s)){const o=Z_e(s),l=Q_e(i,s.props);return s.type!==h.Fragment&&(l.ref=n?Mf(n,o):o),h.cloneElement(s,l)}return h.Children.count(s)>1?h.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Y_e=Symbol("radix.slottable");function X_e(e){return h.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Y_e}function Q_e(e,t){const r={...t};for(const n in t){const s=e[n],i=t[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...l)=>{const d=i(...l);return s(...l),d}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function Z_e(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function pq(e){const t=e+"CollectionProvider",[r,n]=jo(t),[s,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=N=>{const{scope:v,children:S}=N,E=Y.useRef(null),C=Y.useRef(new Map).current;return a.jsx(s,{scope:v,itemMap:C,collectionRef:E,children:S})};o.displayName=t;const l=e+"CollectionSlot",d=D7(l),u=Y.forwardRef((N,v)=>{const{scope:S,children:E}=N,C=i(l,S),_=Ar(v,C.collectionRef);return a.jsx(d,{ref:_,children:E})});u.displayName=l;const m=e+"CollectionItemSlot",p="data-radix-collection-item",g=D7(m),x=Y.forwardRef((N,v)=>{const{scope:S,children:E,...C}=N,_=Y.useRef(null),A=Ar(v,_),T=i(m,S);return Y.useEffect(()=>(T.itemMap.set(_,{ref:_,...C}),()=>void T.itemMap.delete(_))),a.jsx(g,{[p]:"",ref:A,children:E})});x.displayName=m;function y(N){const v=i(e+"CollectionConsumer",N);return Y.useCallback(()=>{const E=v.collectionRef.current;if(!E)return[];const C=Array.from(E.querySelectorAll(`[${p}]`));return Array.from(v.itemMap.values()).sort((T,R)=>C.indexOf(T.ref.current)-C.indexOf(R.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:u,ItemSlot:x},y,n]}const J_e=["top","right","bottom","left"],cu=Math.min,Li=Math.max,p1=Math.round,Vb=Math.floor,Vl=e=>({x:e,y:e}),eCe={left:"right",right:"left",bottom:"top",top:"bottom"},tCe={start:"end",end:"start"};function EO(e,t,r){return Li(e,cu(t,r))}function ad(e,t){return typeof e=="function"?e(t):e}function sd(e){return e.split("-")[0]}function Ah(e){return e.split("-")[1]}function ik(e){return e==="x"?"y":"x"}function ok(e){return e==="y"?"height":"width"}const rCe=new Set(["top","bottom"]);function Ul(e){return rCe.has(sd(e))?"y":"x"}function lk(e){return ik(Ul(e))}function nCe(e,t,r){r===void 0&&(r=!1);const n=Ah(e),s=lk(e),i=ok(s);let o=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=m1(o)),[o,m1(o)]}function aCe(e){const t=m1(e);return[jO(e),t,jO(t)]}function jO(e){return e.replace(/start|end/g,t=>tCe[t])}const I7=["left","right"],M7=["right","left"],sCe=["top","bottom"],iCe=["bottom","top"];function oCe(e,t,r){switch(e){case"top":case"bottom":return r?t?M7:I7:t?I7:M7;case"left":case"right":return t?sCe:iCe;default:return[]}}function lCe(e,t,r,n){const s=Ah(e);let i=oCe(sd(e),r==="start",n);return s&&(i=i.map(o=>o+"-"+s),t&&(i=i.concat(i.map(jO)))),i}function m1(e){return e.replace(/left|right|bottom|top/g,t=>eCe[t])}function cCe(e){return{top:0,right:0,bottom:0,left:0,...e}}function mq(e){return typeof e!="number"?cCe(e):{top:e,right:e,bottom:e,left:e}}function h1(e){const{x:t,y:r,width:n,height:s}=e;return{width:n,height:s,top:r,left:t,right:t+n,bottom:r+s,x:t,y:r}}function L7(e,t,r){let{reference:n,floating:s}=e;const i=Ul(t),o=lk(t),l=ok(o),d=sd(t),u=i==="y",m=n.x+n.width/2-s.width/2,p=n.y+n.height/2-s.height/2,g=n[l]/2-s[l]/2;let x;switch(d){case"top":x={x:m,y:n.y-s.height};break;case"bottom":x={x:m,y:n.y+n.height};break;case"right":x={x:n.x+n.width,y:p};break;case"left":x={x:n.x-s.width,y:p};break;default:x={x:n.x,y:n.y}}switch(Ah(t)){case"start":x[o]-=g*(r&&u?-1:1);break;case"end":x[o]+=g*(r&&u?-1:1);break}return x}async function dCe(e,t){var r;t===void 0&&(t={});const{x:n,y:s,platform:i,rects:o,elements:l,strategy:d}=e,{boundary:u="clippingAncestors",rootBoundary:m="viewport",elementContext:p="floating",altBoundary:g=!1,padding:x=0}=ad(t,e),y=mq(x),v=l[g?p==="floating"?"reference":"floating":p],S=h1(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(v)))==null||r?v:v.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:m,strategy:d})),E=p==="floating"?{x:n,y:s,width:o.floating.width,height:o.floating.height}:o.reference,C=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),_=await(i.isElement==null?void 0:i.isElement(C))?await(i.getScale==null?void 0:i.getScale(C))||{x:1,y:1}:{x:1,y:1},A=h1(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:E,offsetParent:C,strategy:d}):E);return{top:(S.top-A.top+y.top)/_.y,bottom:(A.bottom-S.bottom+y.bottom)/_.y,left:(S.left-A.left+y.left)/_.x,right:(A.right-S.right+y.right)/_.x}}const uCe=async(e,t,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:i=[],platform:o}=r,l=i.filter(Boolean),d=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:m,y:p}=L7(u,n,d),g=n,x={},y=0;for(let v=0;v<l.length;v++){var N;const{name:S,fn:E}=l[v],{x:C,y:_,data:A,reset:T}=await E({x:m,y:p,initialPlacement:n,placement:g,strategy:s,middlewareData:x,rects:u,platform:{...o,detectOverflow:(N=o.detectOverflow)!=null?N:dCe},elements:{reference:e,floating:t}});m=C??m,p=_??p,x={...x,[S]:{...x[S],...A}},T&&y<=50&&(y++,typeof T=="object"&&(T.placement&&(g=T.placement),T.rects&&(u=T.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):T.rects),{x:m,y:p}=L7(u,g,d)),v=-1)}return{x:m,y:p,placement:g,strategy:s,middlewareData:x}},fCe=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:s,rects:i,platform:o,elements:l,middlewareData:d}=t,{element:u,padding:m=0}=ad(e,t)||{};if(u==null)return{};const p=mq(m),g={x:r,y:n},x=lk(s),y=ok(x),N=await o.getDimensions(u),v=x==="y",S=v?"top":"left",E=v?"bottom":"right",C=v?"clientHeight":"clientWidth",_=i.reference[y]+i.reference[x]-g[x]-i.floating[y],A=g[x]-i.reference[x],T=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let R=T?T[C]:0;(!R||!await(o.isElement==null?void 0:o.isElement(T)))&&(R=l.floating[C]||i.floating[y]);const I=_/2-A/2,k=R/2-N[y]/2-1,w=cu(p[S],k),L=cu(p[E],k),H=w,B=R-N[y]-L,M=R/2-N[y]/2+I,G=EO(H,M,B),$=!d.arrow&&Ah(s)!=null&&M!==G&&i.reference[y]/2-(M<H?w:L)-N[y]/2<0,z=$?M<H?M-H:M-B:0;return{[x]:g[x]+z,data:{[x]:G,centerOffset:M-G-z,...$&&{alignmentOffset:z}},reset:$}}}),pCe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:s,middlewareData:i,rects:o,initialPlacement:l,platform:d,elements:u}=t,{mainAxis:m=!0,crossAxis:p=!0,fallbackPlacements:g,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:N=!0,...v}=ad(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const S=sd(s),E=Ul(l),C=sd(l)===l,_=await(d.isRTL==null?void 0:d.isRTL(u.floating)),A=g||(C||!N?[m1(l)]:aCe(l)),T=y!=="none";!g&&T&&A.push(...lCe(l,N,y,_));const R=[l,...A],I=await d.detectOverflow(t,v),k=[];let w=((n=i.flip)==null?void 0:n.overflows)||[];if(m&&k.push(I[S]),p){const M=nCe(s,o,_);k.push(I[M[0]],I[M[1]])}if(w=[...w,{placement:s,overflows:k}],!k.every(M=>M<=0)){var L,H;const M=(((L=i.flip)==null?void 0:L.index)||0)+1,G=R[M];if(G&&(!(p==="alignment"?E!==Ul(G):!1)||w.every(U=>Ul(U.placement)===E?U.overflows[0]>0:!0)))return{data:{index:M,overflows:w},reset:{placement:G}};let $=(H=w.filter(z=>z.overflows[0]<=0).sort((z,U)=>z.overflows[1]-U.overflows[1])[0])==null?void 0:H.placement;if(!$)switch(x){case"bestFit":{var B;const z=(B=w.filter(U=>{if(T){const Z=Ul(U.placement);return Z===E||Z==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(Z=>Z>0).reduce((Z,re)=>Z+re,0)]).sort((U,Z)=>U[1]-Z[1])[0])==null?void 0:B[0];z&&($=z);break}case"initialPlacement":$=l;break}if(s!==$)return{reset:{placement:$}}}return{}}}};function $7(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function F7(e){return J_e.some(t=>e[t]>=0)}const mCe=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r,platform:n}=t,{strategy:s="referenceHidden",...i}=ad(e,t);switch(s){case"referenceHidden":{const o=await n.detectOverflow(t,{...i,elementContext:"reference"}),l=$7(o,r.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:F7(l)}}}case"escaped":{const o=await n.detectOverflow(t,{...i,altBoundary:!0}),l=$7(o,r.floating);return{data:{escapedOffsets:l,escaped:F7(l)}}}default:return{}}}}},hq=new Set(["left","top"]);async function hCe(e,t){const{placement:r,platform:n,elements:s}=e,i=await(n.isRTL==null?void 0:n.isRTL(s.floating)),o=sd(r),l=Ah(r),d=Ul(r)==="y",u=hq.has(o)?-1:1,m=i&&d?-1:1,p=ad(t,e);let{mainAxis:g,crossAxis:x,alignmentAxis:y}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return l&&typeof y=="number"&&(x=l==="end"?y*-1:y),d?{x:x*m,y:g*u}:{x:g*u,y:x*m}}const gCe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:s,y:i,placement:o,middlewareData:l}=t,d=await hCe(t,e);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:s+d.x,y:i+d.y,data:{...d,placement:o}}}}},xCe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:s,platform:i}=t,{mainAxis:o=!0,crossAxis:l=!1,limiter:d={fn:S=>{let{x:E,y:C}=S;return{x:E,y:C}}},...u}=ad(e,t),m={x:r,y:n},p=await i.detectOverflow(t,u),g=Ul(sd(s)),x=ik(g);let y=m[x],N=m[g];if(o){const S=x==="y"?"top":"left",E=x==="y"?"bottom":"right",C=y+p[S],_=y-p[E];y=EO(C,y,_)}if(l){const S=g==="y"?"top":"left",E=g==="y"?"bottom":"right",C=N+p[S],_=N-p[E];N=EO(C,N,_)}const v=d.fn({...t,[x]:y,[g]:N});return{...v,data:{x:v.x-r,y:v.y-n,enabled:{[x]:o,[g]:l}}}}}},bCe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:s,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:d=!0,crossAxis:u=!0}=ad(e,t),m={x:r,y:n},p=Ul(s),g=ik(p);let x=m[g],y=m[p];const N=ad(l,t),v=typeof N=="number"?{mainAxis:N,crossAxis:0}:{mainAxis:0,crossAxis:0,...N};if(d){const C=g==="y"?"height":"width",_=i.reference[g]-i.floating[C]+v.mainAxis,A=i.reference[g]+i.reference[C]-v.mainAxis;x<_?x=_:x>A&&(x=A)}if(u){var S,E;const C=g==="y"?"width":"height",_=hq.has(sd(s)),A=i.reference[p]-i.floating[C]+(_&&((S=o.offset)==null?void 0:S[p])||0)+(_?0:v.crossAxis),T=i.reference[p]+i.reference[C]+(_?0:((E=o.offset)==null?void 0:E[p])||0)-(_?v.crossAxis:0);y<A?y=A:y>T&&(y=T)}return{[g]:x,[p]:y}}}},yCe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:s,rects:i,platform:o,elements:l}=t,{apply:d=()=>{},...u}=ad(e,t),m=await o.detectOverflow(t,u),p=sd(s),g=Ah(s),x=Ul(s)==="y",{width:y,height:N}=i.floating;let v,S;p==="top"||p==="bottom"?(v=p,S=g===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(S=p,v=g==="end"?"top":"bottom");const E=N-m.top-m.bottom,C=y-m.left-m.right,_=cu(N-m[v],E),A=cu(y-m[S],C),T=!t.middlewareData.shift;let R=_,I=A;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(I=C),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(R=E),T&&!g){const w=Li(m.left,0),L=Li(m.right,0),H=Li(m.top,0),B=Li(m.bottom,0);x?I=y-2*(w!==0||L!==0?w+L:Li(m.left,m.right)):R=N-2*(H!==0||B!==0?H+B:Li(m.top,m.bottom))}await d({...t,availableWidth:I,availableHeight:R});const k=await o.getDimensions(l.floating);return y!==k.width||N!==k.height?{reset:{rects:!0}}:{}}}};function PN(){return typeof window<"u"}function _h(e){return gq(e)?(e.nodeName||"").toLowerCase():"#document"}function Fi(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function sc(e){var t;return(t=(gq(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function gq(e){return PN()?e instanceof Node||e instanceof Fi(e).Node:!1}function el(e){return PN()?e instanceof Element||e instanceof Fi(e).Element:!1}function Zl(e){return PN()?e instanceof HTMLElement||e instanceof Fi(e).HTMLElement:!1}function U7(e){return!PN()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Fi(e).ShadowRoot}const vCe=new Set(["inline","contents"]);function yx(e){const{overflow:t,overflowX:r,overflowY:n,display:s}=tl(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!vCe.has(s)}const NCe=new Set(["table","td","th"]);function SCe(e){return NCe.has(_h(e))}const ECe=[":popover-open",":modal"];function DN(e){return ECe.some(t=>{try{return e.matches(t)}catch{return!1}})}const jCe=["transform","translate","scale","rotate","perspective"],wCe=["transform","translate","scale","rotate","perspective","filter"],ACe=["paint","layout","strict","content"];function ck(e){const t=dk(),r=el(e)?tl(e):e;return jCe.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||wCe.some(n=>(r.willChange||"").includes(n))||ACe.some(n=>(r.contain||"").includes(n))}function _Ce(e){let t=du(e);for(;Zl(t)&&!th(t);){if(ck(t))return t;if(DN(t))return null;t=du(t)}return null}function dk(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const CCe=new Set(["html","body","#document"]);function th(e){return CCe.has(_h(e))}function tl(e){return Fi(e).getComputedStyle(e)}function IN(e){return el(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function du(e){if(_h(e)==="html")return e;const t=e.assignedSlot||e.parentNode||U7(e)&&e.host||sc(e);return U7(t)?t.host:t}function xq(e){const t=du(e);return th(t)?e.ownerDocument?e.ownerDocument.body:e.body:Zl(t)&&yx(t)?t:xq(t)}function Jg(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const s=xq(e),i=s===((n=e.ownerDocument)==null?void 0:n.body),o=Fi(s);if(i){const l=wO(o);return t.concat(o,o.visualViewport||[],yx(s)?s:[],l&&r?Jg(l):[])}return t.concat(s,Jg(s,[],r))}function wO(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function bq(e){const t=tl(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const s=Zl(e),i=s?e.offsetWidth:r,o=s?e.offsetHeight:n,l=p1(r)!==i||p1(n)!==o;return l&&(r=i,n=o),{width:r,height:n,$:l}}function uk(e){return el(e)?e:e.contextElement}function om(e){const t=uk(e);if(!Zl(t))return Vl(1);const r=t.getBoundingClientRect(),{width:n,height:s,$:i}=bq(t);let o=(i?p1(r.width):r.width)/n,l=(i?p1(r.height):r.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const TCe=Vl(0);function yq(e){const t=Fi(e);return!dk()||!t.visualViewport?TCe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function OCe(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==Fi(e)?!1:t}function Pf(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const s=e.getBoundingClientRect(),i=uk(e);let o=Vl(1);t&&(n?el(n)&&(o=om(n)):o=om(e));const l=OCe(i,r,n)?yq(i):Vl(0);let d=(s.left+l.x)/o.x,u=(s.top+l.y)/o.y,m=s.width/o.x,p=s.height/o.y;if(i){const g=Fi(i),x=n&&el(n)?Fi(n):n;let y=g,N=wO(y);for(;N&&n&&x!==y;){const v=om(N),S=N.getBoundingClientRect(),E=tl(N),C=S.left+(N.clientLeft+parseFloat(E.paddingLeft))*v.x,_=S.top+(N.clientTop+parseFloat(E.paddingTop))*v.y;d*=v.x,u*=v.y,m*=v.x,p*=v.y,d+=C,u+=_,y=Fi(N),N=wO(y)}}return h1({width:m,height:p,x:d,y:u})}function MN(e,t){const r=IN(e).scrollLeft;return t?t.left+r:Pf(sc(e)).left+r}function vq(e,t){const r=e.getBoundingClientRect(),n=r.left+t.scrollLeft-MN(e,r),s=r.top+t.scrollTop;return{x:n,y:s}}function RCe(e){let{elements:t,rect:r,offsetParent:n,strategy:s}=e;const i=s==="fixed",o=sc(n),l=t?DN(t.floating):!1;if(n===o||l&&i)return r;let d={scrollLeft:0,scrollTop:0},u=Vl(1);const m=Vl(0),p=Zl(n);if((p||!p&&!i)&&((_h(n)!=="body"||yx(o))&&(d=IN(n)),Zl(n))){const x=Pf(n);u=om(n),m.x=x.x+n.clientLeft,m.y=x.y+n.clientTop}const g=o&&!p&&!i?vq(o,d):Vl(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-d.scrollLeft*u.x+m.x+g.x,y:r.y*u.y-d.scrollTop*u.y+m.y+g.y}}function kCe(e){return Array.from(e.getClientRects())}function PCe(e){const t=sc(e),r=IN(e),n=e.ownerDocument.body,s=Li(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=Li(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+MN(e);const l=-r.scrollTop;return tl(n).direction==="rtl"&&(o+=Li(t.clientWidth,n.clientWidth)-s),{width:s,height:i,x:o,y:l}}const B7=25;function DCe(e,t){const r=Fi(e),n=sc(e),s=r.visualViewport;let i=n.clientWidth,o=n.clientHeight,l=0,d=0;if(s){i=s.width,o=s.height;const m=dk();(!m||m&&t==="fixed")&&(l=s.offsetLeft,d=s.offsetTop)}const u=MN(n);if(u<=0){const m=n.ownerDocument,p=m.body,g=getComputedStyle(p),x=m.compatMode==="CSS1Compat"&&parseFloat(g.marginLeft)+parseFloat(g.marginRight)||0,y=Math.abs(n.clientWidth-p.clientWidth-x);y<=B7&&(i-=y)}else u<=B7&&(i+=u);return{width:i,height:o,x:l,y:d}}const ICe=new Set(["absolute","fixed"]);function MCe(e,t){const r=Pf(e,!0,t==="fixed"),n=r.top+e.clientTop,s=r.left+e.clientLeft,i=Zl(e)?om(e):Vl(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,d=s*i.x,u=n*i.y;return{width:o,height:l,x:d,y:u}}function G7(e,t,r){let n;if(t==="viewport")n=DCe(e,r);else if(t==="document")n=PCe(sc(e));else if(el(t))n=MCe(t,r);else{const s=yq(e);n={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return h1(n)}function Nq(e,t){const r=du(e);return r===t||!el(r)||th(r)?!1:tl(r).position==="fixed"||Nq(r,t)}function LCe(e,t){const r=t.get(e);if(r)return r;let n=Jg(e,[],!1).filter(l=>el(l)&&_h(l)!=="body"),s=null;const i=tl(e).position==="fixed";let o=i?du(e):e;for(;el(o)&&!th(o);){const l=tl(o),d=ck(o);!d&&l.position==="fixed"&&(s=null),(i?!d&&!s:!d&&l.position==="static"&&!!s&&ICe.has(s.position)||yx(o)&&!d&&Nq(e,o))?n=n.filter(m=>m!==o):s=l,o=du(o)}return t.set(e,n),n}function $Ce(e){let{element:t,boundary:r,rootBoundary:n,strategy:s}=e;const o=[...r==="clippingAncestors"?DN(t)?[]:LCe(t,this._c):[].concat(r),n],l=o[0],d=o.reduce((u,m)=>{const p=G7(t,m,s);return u.top=Li(p.top,u.top),u.right=cu(p.right,u.right),u.bottom=cu(p.bottom,u.bottom),u.left=Li(p.left,u.left),u},G7(t,l,s));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function FCe(e){const{width:t,height:r}=bq(e);return{width:t,height:r}}function UCe(e,t,r){const n=Zl(t),s=sc(t),i=r==="fixed",o=Pf(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const d=Vl(0);function u(){d.x=MN(s)}if(n||!n&&!i)if((_h(t)!=="body"||yx(s))&&(l=IN(t)),n){const x=Pf(t,!0,i,t);d.x=x.x+t.clientLeft,d.y=x.y+t.clientTop}else s&&u();i&&!n&&s&&u();const m=s&&!n&&!i?vq(s,l):Vl(0),p=o.left+l.scrollLeft-d.x-m.x,g=o.top+l.scrollTop-d.y-m.y;return{x:p,y:g,width:o.width,height:o.height}}function m_(e){return tl(e).position==="static"}function H7(e,t){if(!Zl(e)||tl(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return sc(e)===r&&(r=r.ownerDocument.body),r}function Sq(e,t){const r=Fi(e);if(DN(e))return r;if(!Zl(e)){let s=du(e);for(;s&&!th(s);){if(el(s)&&!m_(s))return s;s=du(s)}return r}let n=H7(e,t);for(;n&&SCe(n)&&m_(n);)n=H7(n,t);return n&&th(n)&&m_(n)&&!ck(n)?r:n||_Ce(e)||r}const BCe=async function(e){const t=this.getOffsetParent||Sq,r=this.getDimensions,n=await r(e.floating);return{reference:UCe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function GCe(e){return tl(e).direction==="rtl"}const HCe={convertOffsetParentRelativeRectToViewportRelativeRect:RCe,getDocumentElement:sc,getClippingRect:$Ce,getOffsetParent:Sq,getElementRects:BCe,getClientRects:kCe,getDimensions:FCe,getScale:om,isElement:el,isRTL:GCe};function Eq(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function KCe(e,t){let r=null,n;const s=sc(e);function i(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,d){l===void 0&&(l=!1),d===void 0&&(d=1),i();const u=e.getBoundingClientRect(),{left:m,top:p,width:g,height:x}=u;if(l||t(),!g||!x)return;const y=Vb(p),N=Vb(s.clientWidth-(m+g)),v=Vb(s.clientHeight-(p+x)),S=Vb(m),C={rootMargin:-y+"px "+-N+"px "+-v+"px "+-S+"px",threshold:Li(0,cu(1,d))||1};let _=!0;function A(T){const R=T[0].intersectionRatio;if(R!==d){if(!_)return o();R?o(!1,R):n=setTimeout(()=>{o(!1,1e-7)},1e3)}R===1&&!Eq(u,e.getBoundingClientRect())&&o(),_=!1}try{r=new IntersectionObserver(A,{...C,root:s.ownerDocument})}catch{r=new IntersectionObserver(A,C)}r.observe(e)}return o(!0),i}function zCe(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:d=!1}=n,u=uk(e),m=s||i?[...u?Jg(u):[],...Jg(t)]:[];m.forEach(S=>{s&&S.addEventListener("scroll",r,{passive:!0}),i&&S.addEventListener("resize",r)});const p=u&&l?KCe(u,r):null;let g=-1,x=null;o&&(x=new ResizeObserver(S=>{let[E]=S;E&&E.target===u&&x&&(x.unobserve(t),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var C;(C=x)==null||C.observe(t)})),r()}),u&&!d&&x.observe(u),x.observe(t));let y,N=d?Pf(e):null;d&&v();function v(){const S=Pf(e);N&&!Eq(N,S)&&r(),N=S,y=requestAnimationFrame(v)}return r(),()=>{var S;m.forEach(E=>{s&&E.removeEventListener("scroll",r),i&&E.removeEventListener("resize",r)}),p?.(),(S=x)==null||S.disconnect(),x=null,d&&cancelAnimationFrame(y)}}const qCe=gCe,WCe=xCe,VCe=pCe,YCe=yCe,XCe=mCe,K7=fCe,QCe=bCe,ZCe=(e,t,r)=>{const n=new Map,s={platform:HCe,...r},i={...s.platform,_c:n};return uCe(e,t,{...s,platform:i})};var JCe=typeof document<"u",eTe=function(){},_y=JCe?h.useLayoutEffect:eTe;function g1(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!g1(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,s[n]))return!1;for(n=r;n--!==0;){const i=s[n];if(!(i==="_owner"&&e.$$typeof)&&!g1(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function jq(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function z7(e,t){const r=jq(e);return Math.round(t*r)/r}function h_(e){const t=h.useRef(e);return _y(()=>{t.current=e}),t}function tTe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:d,open:u}=e,[m,p]=h.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[g,x]=h.useState(n);g1(g,n)||x(n);const[y,N]=h.useState(null),[v,S]=h.useState(null),E=h.useCallback(U=>{U!==T.current&&(T.current=U,N(U))},[]),C=h.useCallback(U=>{U!==R.current&&(R.current=U,S(U))},[]),_=i||y,A=o||v,T=h.useRef(null),R=h.useRef(null),I=h.useRef(m),k=d!=null,w=h_(d),L=h_(s),H=h_(u),B=h.useCallback(()=>{if(!T.current||!R.current)return;const U={placement:t,strategy:r,middleware:g};L.current&&(U.platform=L.current),ZCe(T.current,R.current,U).then(Z=>{const re={...Z,isPositioned:H.current!==!1};M.current&&!g1(I.current,re)&&(I.current=re,dh.flushSync(()=>{p(re)}))})},[g,t,r,L,H]);_y(()=>{u===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,p(U=>({...U,isPositioned:!1})))},[u]);const M=h.useRef(!1);_y(()=>(M.current=!0,()=>{M.current=!1}),[]),_y(()=>{if(_&&(T.current=_),A&&(R.current=A),_&&A){if(w.current)return w.current(_,A,B);B()}},[_,A,B,w,k]);const G=h.useMemo(()=>({reference:T,floating:R,setReference:E,setFloating:C}),[E,C]),$=h.useMemo(()=>({reference:_,floating:A}),[_,A]),z=h.useMemo(()=>{const U={position:r,left:0,top:0};if(!$.floating)return U;const Z=z7($.floating,m.x),re=z7($.floating,m.y);return l?{...U,transform:"translate("+Z+"px, "+re+"px)",...jq($.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:Z,top:re}},[r,l,$.floating,m.x,m.y]);return h.useMemo(()=>({...m,update:B,refs:G,elements:$,floatingStyles:z}),[m,B,G,$,z])}const rTe=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:s}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?K7({element:n.current,padding:s}).fn(r):{}:n?K7({element:n,padding:s}).fn(r):{}}}},nTe=(e,t)=>({...qCe(e),options:[e,t]}),aTe=(e,t)=>({...WCe(e),options:[e,t]}),sTe=(e,t)=>({...QCe(e),options:[e,t]}),iTe=(e,t)=>({...VCe(e),options:[e,t]}),oTe=(e,t)=>({...YCe(e),options:[e,t]}),lTe=(e,t)=>({...XCe(e),options:[e,t]}),cTe=(e,t)=>({...rTe(e),options:[e,t]});var dTe="Arrow",wq=h.forwardRef((e,t)=>{const{children:r,width:n=10,height:s=5,...i}=e;return a.jsx(dr.svg,{...i,ref:t,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});wq.displayName=dTe;var uTe=wq,fk="Popper",[Aq,Ch]=jo(fk),[fTe,_q]=Aq(fk),Cq=e=>{const{__scopePopper:t,children:r}=e,[n,s]=h.useState(null);return a.jsx(fTe,{scope:t,anchor:n,onAnchorChange:s,children:r})};Cq.displayName=fk;var Tq="PopperAnchor",Oq=h.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...s}=e,i=_q(Tq,r),o=h.useRef(null),l=Ar(t,o),d=h.useRef(null);return h.useEffect(()=>{const u=d.current;d.current=n?.current||o.current,u!==d.current&&i.onAnchorChange(d.current)}),n?null:a.jsx(dr.div,{...s,ref:l})});Oq.displayName=Tq;var pk="PopperContent",[pTe,mTe]=Aq(pk),Rq=h.forwardRef((e,t)=>{const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:d=!0,collisionBoundary:u=[],collisionPadding:m=0,sticky:p="partial",hideWhenDetached:g=!1,updatePositionStrategy:x="optimized",onPlaced:y,...N}=e,v=_q(pk,r),[S,E]=h.useState(null),C=Ar(t,fe=>E(fe)),[_,A]=h.useState(null),T=pR(_),R=T?.width??0,I=T?.height??0,k=n+(i!=="center"?"-"+i:""),w=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},L=Array.isArray(u)?u:[u],H=L.length>0,B={padding:w,boundary:L.filter(gTe),altBoundary:H},{refs:M,floatingStyles:G,placement:$,isPositioned:z,middlewareData:U}=tTe({strategy:"fixed",placement:k,whileElementsMounted:(...fe)=>zCe(...fe,{animationFrame:x==="always"}),elements:{reference:v.anchor},middleware:[nTe({mainAxis:s+I,alignmentAxis:o}),d&&aTe({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?sTe():void 0,...B}),d&&iTe({...B}),oTe({...B,apply:({elements:fe,rects:we,availableWidth:ve,availableHeight:Oe})=>{const{width:Fe,height:oe}=we.reference,le=fe.floating.style;le.setProperty("--radix-popper-available-width",`${ve}px`),le.setProperty("--radix-popper-available-height",`${Oe}px`),le.setProperty("--radix-popper-anchor-width",`${Fe}px`),le.setProperty("--radix-popper-anchor-height",`${oe}px`)}}),_&&cTe({element:_,padding:l}),xTe({arrowWidth:R,arrowHeight:I}),g&&lTe({strategy:"referenceHidden",...B})]}),[Z,re]=Dq($),X=vs(y);xa(()=>{z&&X?.()},[z,X]);const F=U.arrow?.x,te=U.arrow?.y,ne=U.arrow?.centerOffset!==0,[se,Ne]=h.useState();return xa(()=>{S&&Ne(window.getComputedStyle(S).zIndex)},[S]),a.jsx("div",{ref:M.setFloating,"data-radix-popper-content-wrapper":"",style:{...G,transform:z?G.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:se,"--radix-popper-transform-origin":[U.transformOrigin?.x,U.transformOrigin?.y].join(" "),...U.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:a.jsx(pTe,{scope:r,placedSide:Z,onArrowChange:A,arrowX:F,arrowY:te,shouldHideArrow:ne,children:a.jsx(dr.div,{"data-side":Z,"data-align":re,...N,ref:C,style:{...N.style,animation:z?void 0:"none"}})})})});Rq.displayName=pk;var kq="PopperArrow",hTe={top:"bottom",right:"left",bottom:"top",left:"right"},Pq=h.forwardRef(function(t,r){const{__scopePopper:n,...s}=t,i=mTe(kq,n),o=hTe[i.placedSide];return a.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:a.jsx(uTe,{...s,ref:r,style:{...s.style,display:"block"}})})});Pq.displayName=kq;function gTe(e){return e!==null}var xTe=e=>({name:"transformOrigin",options:e,fn(t){const{placement:r,rects:n,middlewareData:s}=t,o=s.arrow?.centerOffset!==0,l=o?0:e.arrowWidth,d=o?0:e.arrowHeight,[u,m]=Dq(r),p={start:"0%",center:"50%",end:"100%"}[m],g=(s.arrow?.x??0)+l/2,x=(s.arrow?.y??0)+d/2;let y="",N="";return u==="bottom"?(y=o?p:`${g}px`,N=`${-d}px`):u==="top"?(y=o?p:`${g}px`,N=`${n.floating.height+d}px`):u==="right"?(y=`${-d}px`,N=o?p:`${x}px`):u==="left"&&(y=`${n.floating.width+d}px`,N=o?p:`${x}px`),{data:{x:y,y:N}}}});function Dq(e){const[t,r="center"]=e.split("-");return[t,r]}var mk=Cq,LN=Oq,hk=Rq,gk=Pq;function bTe(e){const t=yTe(e),r=h.forwardRef((n,s)=>{const{children:i,...o}=n,l=h.Children.toArray(i),d=l.find(NTe);if(d){const u=d.props.children,m=l.map(p=>p===d?h.Children.count(u)>1?h.Children.only(null):h.isValidElement(u)?u.props.children:null:p);return a.jsx(t,{...o,ref:s,children:h.isValidElement(u)?h.cloneElement(u,void 0,m):null})}return a.jsx(t,{...o,ref:s,children:i})});return r.displayName=`${e}.Slot`,r}function yTe(e){const t=h.forwardRef((r,n)=>{const{children:s,...i}=r;if(h.isValidElement(s)){const o=ETe(s),l=STe(i,s.props);return s.type!==h.Fragment&&(l.ref=n?Mf(n,o):o),h.cloneElement(s,l)}return h.Children.count(s)>1?h.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var vTe=Symbol("radix.slottable");function NTe(e){return h.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===vTe}function STe(e,t){const r={...t};for(const n in t){const s=e[n],i=t[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...l)=>{const d=i(...l);return s(...l),d}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function ETe(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Iq=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),jTe="VisuallyHidden",Mq=h.forwardRef((e,t)=>a.jsx(dr.span,{...e,ref:t,style:{...Iq,...e.style}}));Mq.displayName=jTe;var wTe=Mq,ATe=[" ","Enter","ArrowUp","ArrowDown"],_Te=[" ","Enter"],Df="Select",[$N,FN,CTe]=pq(Df),[Th]=jo(Df,[CTe,Ch]),UN=Ch(),[TTe,xu]=Th(Df),[OTe,RTe]=Th(Df),Lq=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:s,onOpenChange:i,value:o,defaultValue:l,onValueChange:d,dir:u,name:m,autoComplete:p,disabled:g,required:x,form:y}=e,N=UN(t),[v,S]=h.useState(null),[E,C]=h.useState(null),[_,A]=h.useState(!1),T=ix(u),[R,I]=Jc({prop:n,defaultProp:s??!1,onChange:i,caller:Df}),[k,w]=Jc({prop:o,defaultProp:l,onChange:d,caller:Df}),L=h.useRef(null),H=v?y||!!v.closest("form"):!0,[B,M]=h.useState(new Set),G=Array.from(B).map($=>$.props.value).join(";");return a.jsx(mk,{...N,children:a.jsxs(TTe,{required:x,scope:t,trigger:v,onTriggerChange:S,valueNode:E,onValueNodeChange:C,valueNodeHasChildren:_,onValueNodeHasChildrenChange:A,contentId:Hl(),value:k,onValueChange:w,open:R,onOpenChange:I,dir:T,triggerPointerDownPosRef:L,disabled:g,children:[a.jsx($N.Provider,{scope:t,children:a.jsx(OTe,{scope:e.__scopeSelect,onNativeOptionAdd:h.useCallback($=>{M(z=>new Set(z).add($))},[]),onNativeOptionRemove:h.useCallback($=>{M(z=>{const U=new Set(z);return U.delete($),U})},[]),children:r})}),H?a.jsxs(sW,{"aria-hidden":!0,required:x,tabIndex:-1,name:m,autoComplete:p,value:k,onChange:$=>w($.target.value),disabled:g,form:y,children:[k===void 0?a.jsx("option",{value:""}):null,Array.from(B)]},G):null]})})};Lq.displayName=Df;var $q="SelectTrigger",Fq=h.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...s}=e,i=UN(r),o=xu($q,r),l=o.disabled||n,d=Ar(t,o.onTriggerChange),u=FN(r),m=h.useRef("touch"),[p,g,x]=oW(N=>{const v=u().filter(C=>!C.disabled),S=v.find(C=>C.value===o.value),E=lW(v,N,S);E!==void 0&&o.onValueChange(E.value)}),y=N=>{l||(o.onOpenChange(!0),x()),N&&(o.triggerPointerDownPosRef.current={x:Math.round(N.pageX),y:Math.round(N.pageY)})};return a.jsx(LN,{asChild:!0,...i,children:a.jsx(dr.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":iW(o.value)?"":void 0,...s,ref:d,onClick:Bt(s.onClick,N=>{N.currentTarget.focus(),m.current!=="mouse"&&y(N)}),onPointerDown:Bt(s.onPointerDown,N=>{m.current=N.pointerType;const v=N.target;v.hasPointerCapture(N.pointerId)&&v.releasePointerCapture(N.pointerId),N.button===0&&N.ctrlKey===!1&&N.pointerType==="mouse"&&(y(N),N.preventDefault())}),onKeyDown:Bt(s.onKeyDown,N=>{const v=p.current!=="";!(N.ctrlKey||N.altKey||N.metaKey)&&N.key.length===1&&g(N.key),!(v&&N.key===" ")&&ATe.includes(N.key)&&(y(),N.preventDefault())})})})});Fq.displayName=$q;var Uq="SelectValue",Bq=h.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,children:i,placeholder:o="",...l}=e,d=xu(Uq,r),{onValueNodeHasChildrenChange:u}=d,m=i!==void 0,p=Ar(t,d.onValueNodeChange);return xa(()=>{u(m)},[u,m]),a.jsx(dr.span,{...l,ref:p,style:{pointerEvents:"none"},children:iW(d.value)?a.jsx(a.Fragment,{children:o}):i})});Bq.displayName=Uq;var kTe="SelectIcon",Gq=h.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...s}=e;return a.jsx(dr.span,{"aria-hidden":!0,...s,ref:t,children:n||""})});Gq.displayName=kTe;var PTe="SelectPortal",Hq=e=>a.jsx(sx,{asChild:!0,...e});Hq.displayName=PTe;var If="SelectContent",Kq=h.forwardRef((e,t)=>{const r=xu(If,e.__scopeSelect),[n,s]=h.useState();if(xa(()=>{s(new DocumentFragment)},[]),!r.open){const i=n;return i?dh.createPortal(a.jsx(zq,{scope:e.__scopeSelect,children:a.jsx($N.Slot,{scope:e.__scopeSelect,children:a.jsx("div",{children:e.children})})}),i):null}return a.jsx(qq,{...e,ref:t})});Kq.displayName=If;var Bo=10,[zq,bu]=Th(If),DTe="SelectContentImpl",ITe=bTe("SelectContent.RemoveScroll"),qq=h.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:d,align:u,alignOffset:m,arrowPadding:p,collisionBoundary:g,collisionPadding:x,sticky:y,hideWhenDetached:N,avoidCollisions:v,...S}=e,E=xu(If,r),[C,_]=h.useState(null),[A,T]=h.useState(null),R=Ar(t,fe=>_(fe)),[I,k]=h.useState(null),[w,L]=h.useState(null),H=FN(r),[B,M]=h.useState(!1),G=h.useRef(!1);h.useEffect(()=>{if(C)return gR(C)},[C]),hR();const $=h.useCallback(fe=>{const[we,...ve]=H().map(oe=>oe.ref.current),[Oe]=ve.slice(-1),Fe=document.activeElement;for(const oe of fe)if(oe===Fe||(oe?.scrollIntoView({block:"nearest"}),oe===we&&A&&(A.scrollTop=0),oe===Oe&&A&&(A.scrollTop=A.scrollHeight),oe?.focus(),document.activeElement!==Fe))return},[H,A]),z=h.useCallback(()=>$([I,C]),[$,I,C]);h.useEffect(()=>{B&&z()},[B,z]);const{onOpenChange:U,triggerPointerDownPosRef:Z}=E;h.useEffect(()=>{if(C){let fe={x:0,y:0};const we=Oe=>{fe={x:Math.abs(Math.round(Oe.pageX)-(Z.current?.x??0)),y:Math.abs(Math.round(Oe.pageY)-(Z.current?.y??0))}},ve=Oe=>{fe.x<=10&&fe.y<=10?Oe.preventDefault():C.contains(Oe.target)||U(!1),document.removeEventListener("pointermove",we),Z.current=null};return Z.current!==null&&(document.addEventListener("pointermove",we),document.addEventListener("pointerup",ve,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",we),document.removeEventListener("pointerup",ve,{capture:!0})}}},[C,U,Z]),h.useEffect(()=>{const fe=()=>U(!1);return window.addEventListener("blur",fe),window.addEventListener("resize",fe),()=>{window.removeEventListener("blur",fe),window.removeEventListener("resize",fe)}},[U]);const[re,X]=oW(fe=>{const we=H().filter(Fe=>!Fe.disabled),ve=we.find(Fe=>Fe.ref.current===document.activeElement),Oe=lW(we,fe,ve);Oe&&setTimeout(()=>Oe.ref.current.focus())}),F=h.useCallback((fe,we,ve)=>{const Oe=!G.current&&!ve;(E.value!==void 0&&E.value===we||Oe)&&(k(fe),Oe&&(G.current=!0))},[E.value]),te=h.useCallback(()=>C?.focus(),[C]),ne=h.useCallback((fe,we,ve)=>{const Oe=!G.current&&!ve;(E.value!==void 0&&E.value===we||Oe)&&L(fe)},[E.value]),se=n==="popper"?AO:Wq,Ne=se===AO?{side:l,sideOffset:d,align:u,alignOffset:m,arrowPadding:p,collisionBoundary:g,collisionPadding:x,sticky:y,hideWhenDetached:N,avoidCollisions:v}:{};return a.jsx(zq,{scope:r,content:C,viewport:A,onViewportChange:T,itemRefCallback:F,selectedItem:I,onItemLeave:te,itemTextRefCallback:ne,focusSelectedItem:z,selectedItemText:w,position:n,isPositioned:B,searchRef:re,children:a.jsx(O1,{as:ITe,allowPinchZoom:!0,children:a.jsx(C1,{asChild:!0,trapped:E.open,onMountAutoFocus:fe=>{fe.preventDefault()},onUnmountAutoFocus:Bt(s,fe=>{E.trigger?.focus({preventScroll:!0}),fe.preventDefault()}),children:a.jsx(ax,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:fe=>fe.preventDefault(),onDismiss:()=>E.onOpenChange(!1),children:a.jsx(se,{role:"listbox",id:E.contentId,"data-state":E.open?"open":"closed",dir:E.dir,onContextMenu:fe=>fe.preventDefault(),...S,...Ne,onPlaced:()=>M(!0),ref:R,style:{display:"flex",flexDirection:"column",outline:"none",...S.style},onKeyDown:Bt(S.onKeyDown,fe=>{const we=fe.ctrlKey||fe.altKey||fe.metaKey;if(fe.key==="Tab"&&fe.preventDefault(),!we&&fe.key.length===1&&X(fe.key),["ArrowUp","ArrowDown","Home","End"].includes(fe.key)){let Oe=H().filter(Fe=>!Fe.disabled).map(Fe=>Fe.ref.current);if(["ArrowUp","End"].includes(fe.key)&&(Oe=Oe.slice().reverse()),["ArrowUp","ArrowDown"].includes(fe.key)){const Fe=fe.target,oe=Oe.indexOf(Fe);Oe=Oe.slice(oe+1)}setTimeout(()=>$(Oe)),fe.preventDefault()}})})})})})})});qq.displayName=DTe;var MTe="SelectItemAlignedPosition",Wq=h.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...s}=e,i=xu(If,r),o=bu(If,r),[l,d]=h.useState(null),[u,m]=h.useState(null),p=Ar(t,R=>m(R)),g=FN(r),x=h.useRef(!1),y=h.useRef(!0),{viewport:N,selectedItem:v,selectedItemText:S,focusSelectedItem:E}=o,C=h.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&N&&v&&S){const R=i.trigger.getBoundingClientRect(),I=u.getBoundingClientRect(),k=i.valueNode.getBoundingClientRect(),w=S.getBoundingClientRect();if(i.dir!=="rtl"){const Fe=w.left-I.left,oe=k.left-Fe,le=R.left-oe,ge=R.width+le,_e=Math.max(ge,I.width),ee=window.innerWidth-Bo,q=xC(oe,[Bo,Math.max(Bo,ee-_e)]);l.style.minWidth=ge+"px",l.style.left=q+"px"}else{const Fe=I.right-w.right,oe=window.innerWidth-k.right-Fe,le=window.innerWidth-R.right-oe,ge=R.width+le,_e=Math.max(ge,I.width),ee=window.innerWidth-Bo,q=xC(oe,[Bo,Math.max(Bo,ee-_e)]);l.style.minWidth=ge+"px",l.style.right=q+"px"}const L=g(),H=window.innerHeight-Bo*2,B=N.scrollHeight,M=window.getComputedStyle(u),G=parseInt(M.borderTopWidth,10),$=parseInt(M.paddingTop,10),z=parseInt(M.borderBottomWidth,10),U=parseInt(M.paddingBottom,10),Z=G+$+B+U+z,re=Math.min(v.offsetHeight*5,Z),X=window.getComputedStyle(N),F=parseInt(X.paddingTop,10),te=parseInt(X.paddingBottom,10),ne=R.top+R.height/2-Bo,se=H-ne,Ne=v.offsetHeight/2,fe=v.offsetTop+Ne,we=G+$+fe,ve=Z-we;if(we<=ne){const Fe=L.length>0&&v===L[L.length-1].ref.current;l.style.bottom="0px";const oe=u.clientHeight-N.offsetTop-N.offsetHeight,le=Math.max(se,Ne+(Fe?te:0)+oe+z),ge=we+le;l.style.height=ge+"px"}else{const Fe=L.length>0&&v===L[0].ref.current;l.style.top="0px";const le=Math.max(ne,G+N.offsetTop+(Fe?F:0)+Ne)+ve;l.style.height=le+"px",N.scrollTop=we-ne+N.offsetTop}l.style.margin=`${Bo}px 0`,l.style.minHeight=re+"px",l.style.maxHeight=H+"px",n?.(),requestAnimationFrame(()=>x.current=!0)}},[g,i.trigger,i.valueNode,l,u,N,v,S,i.dir,n]);xa(()=>C(),[C]);const[_,A]=h.useState();xa(()=>{u&&A(window.getComputedStyle(u).zIndex)},[u]);const T=h.useCallback(R=>{R&&y.current===!0&&(C(),E?.(),y.current=!1)},[C,E]);return a.jsx($Te,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:x,onScrollButtonChange:T,children:a.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:a.jsx(dr.div,{...s,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});Wq.displayName=MTe;var LTe="SelectPopperPosition",AO=h.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=Bo,...i}=e,o=UN(r);return a.jsx(hk,{...o,...i,ref:t,align:n,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});AO.displayName=LTe;var[$Te,xk]=Th(If,{}),_O="SelectViewport",Vq=h.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...s}=e,i=bu(_O,r),o=xk(_O,r),l=Ar(t,i.onViewportChange),d=h.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),a.jsx($N.Slot,{scope:r,children:a.jsx(dr.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Bt(s.onScroll,u=>{const m=u.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:g}=o;if(g?.current&&p){const x=Math.abs(d.current-m.scrollTop);if(x>0){const y=window.innerHeight-Bo*2,N=parseFloat(p.style.minHeight),v=parseFloat(p.style.height),S=Math.max(N,v);if(S<y){const E=S+x,C=Math.min(y,E),_=E-C;p.style.height=C+"px",p.style.bottom==="0px"&&(m.scrollTop=_>0?_:0,p.style.justifyContent="flex-end")}}}d.current=m.scrollTop})})})]})});Vq.displayName=_O;var Yq="SelectGroup",[FTe,UTe]=Th(Yq),BTe=h.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=Hl();return a.jsx(FTe,{scope:r,id:s,children:a.jsx(dr.div,{role:"group","aria-labelledby":s,...n,ref:t})})});BTe.displayName=Yq;var Xq="SelectLabel",GTe=h.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=UTe(Xq,r);return a.jsx(dr.div,{id:s.id,...n,ref:t})});GTe.displayName=Xq;var x1="SelectItem",[HTe,Qq]=Th(x1),Zq=h.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:i,...o}=e,l=xu(x1,r),d=bu(x1,r),u=l.value===n,[m,p]=h.useState(i??""),[g,x]=h.useState(!1),y=Ar(t,E=>d.itemRefCallback?.(E,n,s)),N=Hl(),v=h.useRef("touch"),S=()=>{s||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(HTe,{scope:r,value:n,disabled:s,textId:N,isSelected:u,onItemTextChange:h.useCallback(E=>{p(C=>C||(E?.textContent??"").trim())},[]),children:a.jsx($N.ItemSlot,{scope:r,value:n,disabled:s,textValue:m,children:a.jsx(dr.div,{role:"option","aria-labelledby":N,"data-highlighted":g?"":void 0,"aria-selected":u&&g,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:y,onFocus:Bt(o.onFocus,()=>x(!0)),onBlur:Bt(o.onBlur,()=>x(!1)),onClick:Bt(o.onClick,()=>{v.current!=="mouse"&&S()}),onPointerUp:Bt(o.onPointerUp,()=>{v.current==="mouse"&&S()}),onPointerDown:Bt(o.onPointerDown,E=>{v.current=E.pointerType}),onPointerMove:Bt(o.onPointerMove,E=>{v.current=E.pointerType,s?d.onItemLeave?.():v.current==="mouse"&&E.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Bt(o.onPointerLeave,E=>{E.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:Bt(o.onKeyDown,E=>{d.searchRef?.current!==""&&E.key===" "||(_Te.includes(E.key)&&S(),E.key===" "&&E.preventDefault())})})})})});Zq.displayName=x1;var V0="SelectItemText",Jq=h.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,...i}=e,o=xu(V0,r),l=bu(V0,r),d=Qq(V0,r),u=RTe(V0,r),[m,p]=h.useState(null),g=Ar(t,S=>p(S),d.onItemTextChange,S=>l.itemTextRefCallback?.(S,d.value,d.disabled)),x=m?.textContent,y=h.useMemo(()=>a.jsx("option",{value:d.value,disabled:d.disabled,children:x},d.value),[d.disabled,d.value,x]),{onNativeOptionAdd:N,onNativeOptionRemove:v}=u;return xa(()=>(N(y),()=>v(y)),[N,v,y]),a.jsxs(a.Fragment,{children:[a.jsx(dr.span,{id:d.textId,...i,ref:g}),d.isSelected&&o.valueNode&&!o.valueNodeHasChildren?dh.createPortal(i.children,o.valueNode):null]})});Jq.displayName=V0;var eW="SelectItemIndicator",tW=h.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return Qq(eW,r).isSelected?a.jsx(dr.span,{"aria-hidden":!0,...n,ref:t}):null});tW.displayName=eW;var CO="SelectScrollUpButton",rW=h.forwardRef((e,t)=>{const r=bu(CO,e.__scopeSelect),n=xk(CO,e.__scopeSelect),[s,i]=h.useState(!1),o=Ar(t,n.onScrollButtonChange);return xa(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=d.scrollTop>0;i(u)};const d=r.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?a.jsx(aW,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=r;l&&d&&(l.scrollTop=l.scrollTop-d.offsetHeight)}}):null});rW.displayName=CO;var TO="SelectScrollDownButton",nW=h.forwardRef((e,t)=>{const r=bu(TO,e.__scopeSelect),n=xk(TO,e.__scopeSelect),[s,i]=h.useState(!1),o=Ar(t,n.onScrollButtonChange);return xa(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=d.scrollHeight-d.clientHeight,m=Math.ceil(d.scrollTop)<u;i(m)};const d=r.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?a.jsx(aW,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=r;l&&d&&(l.scrollTop=l.scrollTop+d.offsetHeight)}}):null});nW.displayName=TO;var aW=h.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...s}=e,i=bu("SelectScrollButton",r),o=h.useRef(null),l=FN(r),d=h.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return h.useEffect(()=>()=>d(),[d]),xa(()=>{l().find(m=>m.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[l]),a.jsx(dr.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:Bt(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:Bt(s.onPointerMove,()=>{i.onItemLeave?.(),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:Bt(s.onPointerLeave,()=>{d()})})}),KTe="SelectSeparator",zTe=h.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return a.jsx(dr.div,{"aria-hidden":!0,...n,ref:t})});zTe.displayName=KTe;var OO="SelectArrow",qTe=h.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=UN(r),i=xu(OO,r),o=bu(OO,r);return i.open&&o.position==="popper"?a.jsx(gk,{...s,...n,ref:t}):null});qTe.displayName=OO;var WTe="SelectBubbleInput",sW=h.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{const s=h.useRef(null),i=Ar(n,s),o=fR(t);return h.useEffect(()=>{const l=s.current;if(!l)return;const d=window.HTMLSelectElement.prototype,m=Object.getOwnPropertyDescriptor(d,"value").set;if(o!==t&&m){const p=new Event("change",{bubbles:!0});m.call(l,t),l.dispatchEvent(p)}},[o,t]),a.jsx(dr.select,{...r,style:{...Iq,...r.style},ref:i,defaultValue:t})});sW.displayName=WTe;function iW(e){return e===""||e===void 0}function oW(e){const t=vs(e),r=h.useRef(""),n=h.useRef(0),s=h.useCallback(o=>{const l=r.current+o;t(l),(function d(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>d(""),1e3))})(l)},[t]),i=h.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return h.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,i]}function lW(e,t,r){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=VTe(e,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==r));const d=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return d!==r?d:void 0}function VTe(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var YTe=Lq,XTe=Fq,QTe=Bq,ZTe=Gq,JTe=Hq,eOe=Kq,tOe=Vq,rOe=Zq,nOe=Jq,aOe=tW,sOe=rW,iOe=nW;function g_({...e}){return a.jsx(YTe,{"data-slot":"select",...e})}function x_({...e}){return a.jsx(QTe,{"data-slot":"select-value",...e})}function b_({className:e,size:t="default",children:r,...n}){return a.jsxs(XTe,{"data-slot":"select-trigger","data-size":t,className:ue("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...n,children:[r,a.jsx(ZTe,{asChild:!0,children:a.jsx(Ss,{className:"size-4 opacity-50"})})]})}function y_({className:e,children:t,position:r="popper",...n}){return a.jsx(JTe,{children:a.jsxs(eOe,{"data-slot":"select-content",className:ue("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[a.jsx(oOe,{}),a.jsx(tOe,{className:ue("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),a.jsx(lOe,{})]})})}function Vn({className:e,children:t,...r}){return a.jsxs(rOe,{"data-slot":"select-item",className:ue("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...r,children:[a.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:a.jsx(aOe,{children:a.jsx(Sf,{className:"size-4"})})}),a.jsx(nOe,{children:t})]})}function oOe({className:e,...t}){return a.jsx(sOe,{"data-slot":"select-scroll-up-button",className:ue("flex cursor-default items-center justify-center py-1",e),...t,children:a.jsx(Zc,{className:"size-4"})})}function lOe({className:e,...t}){return a.jsx(iOe,{"data-slot":"select-scroll-down-button",className:ue("flex cursor-default items-center justify-center py-1",e),...t,children:a.jsx(Ss,{className:"size-4"})})}var v_="rovingFocusGroup.onEntryFocus",cOe={bubbles:!1,cancelable:!0},vx="RovingFocusGroup",[RO,cW,dOe]=pq(vx),[uOe,BN]=jo(vx,[dOe]),[fOe,pOe]=uOe(vx),dW=h.forwardRef((e,t)=>a.jsx(RO.Provider,{scope:e.__scopeRovingFocusGroup,children:a.jsx(RO.Slot,{scope:e.__scopeRovingFocusGroup,children:a.jsx(mOe,{...e,ref:t})})}));dW.displayName=vx;var mOe=h.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:d,onEntryFocus:u,preventScrollOnEntryFocus:m=!1,...p}=e,g=h.useRef(null),x=Ar(t,g),y=ix(i),[N,v]=Jc({prop:o,defaultProp:l??null,onChange:d,caller:vx}),[S,E]=h.useState(!1),C=vs(u),_=cW(r),A=h.useRef(!1),[T,R]=h.useState(0);return h.useEffect(()=>{const I=g.current;if(I)return I.addEventListener(v_,C),()=>I.removeEventListener(v_,C)},[C]),a.jsx(fOe,{scope:r,orientation:n,dir:y,loop:s,currentTabStopId:N,onItemFocus:h.useCallback(I=>v(I),[v]),onItemShiftTab:h.useCallback(()=>E(!0),[]),onFocusableItemAdd:h.useCallback(()=>R(I=>I+1),[]),onFocusableItemRemove:h.useCallback(()=>R(I=>I-1),[]),children:a.jsx(dr.div,{tabIndex:S||T===0?-1:0,"data-orientation":n,...p,ref:x,style:{outline:"none",...e.style},onMouseDown:Bt(e.onMouseDown,()=>{A.current=!0}),onFocus:Bt(e.onFocus,I=>{const k=!A.current;if(I.target===I.currentTarget&&k&&!S){const w=new CustomEvent(v_,cOe);if(I.currentTarget.dispatchEvent(w),!w.defaultPrevented){const L=_().filter($=>$.focusable),H=L.find($=>$.active),B=L.find($=>$.id===N),G=[H,B,...L].filter(Boolean).map($=>$.ref.current);pW(G,m)}}A.current=!1}),onBlur:Bt(e.onBlur,()=>E(!1))})})}),uW="RovingFocusGroupItem",fW=h.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:i,children:o,...l}=e,d=Hl(),u=i||d,m=pOe(uW,r),p=m.currentTabStopId===u,g=cW(r),{onFocusableItemAdd:x,onFocusableItemRemove:y,currentTabStopId:N}=m;return h.useEffect(()=>{if(n)return x(),()=>y()},[n,x,y]),a.jsx(RO.ItemSlot,{scope:r,id:u,focusable:n,active:s,children:a.jsx(dr.span,{tabIndex:p?0:-1,"data-orientation":m.orientation,...l,ref:t,onMouseDown:Bt(e.onMouseDown,v=>{n?m.onItemFocus(u):v.preventDefault()}),onFocus:Bt(e.onFocus,()=>m.onItemFocus(u)),onKeyDown:Bt(e.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){m.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const S=xOe(v,m.orientation,m.dir);if(S!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let C=g().filter(_=>_.focusable).map(_=>_.ref.current);if(S==="last")C.reverse();else if(S==="prev"||S==="next"){S==="prev"&&C.reverse();const _=C.indexOf(v.currentTarget);C=m.loop?bOe(C,_+1):C.slice(_+1)}setTimeout(()=>pW(C))}}),children:typeof o=="function"?o({isCurrentTabStop:p,hasTabStop:N!=null}):o})})});fW.displayName=uW;var hOe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function gOe(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function xOe(e,t,r){const n=gOe(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return hOe[n]}function pW(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function bOe(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var mW=dW,hW=fW,bk="Radio",[yOe,gW]=jo(bk),[vOe,NOe]=yOe(bk),xW=h.forwardRef((e,t)=>{const{__scopeRadio:r,name:n,checked:s=!1,required:i,disabled:o,value:l="on",onCheck:d,form:u,...m}=e,[p,g]=h.useState(null),x=Ar(t,v=>g(v)),y=h.useRef(!1),N=p?u||!!p.closest("form"):!0;return a.jsxs(vOe,{scope:r,checked:s,disabled:o,children:[a.jsx(dr.button,{type:"button",role:"radio","aria-checked":s,"data-state":NW(s),"data-disabled":o?"":void 0,disabled:o,value:l,...m,ref:x,onClick:Bt(e.onClick,v=>{s||d?.(),N&&(y.current=v.isPropagationStopped(),y.current||v.stopPropagation())})}),N&&a.jsx(vW,{control:p,bubbles:!y.current,name:n,value:l,checked:s,required:i,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});xW.displayName=bk;var bW="RadioIndicator",yW=h.forwardRef((e,t)=>{const{__scopeRadio:r,forceMount:n,...s}=e,i=NOe(bW,r);return a.jsx(Gs,{present:n||i.checked,children:a.jsx(dr.span,{"data-state":NW(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:t})})});yW.displayName=bW;var SOe="RadioBubbleInput",vW=h.forwardRef(({__scopeRadio:e,control:t,checked:r,bubbles:n=!0,...s},i)=>{const o=h.useRef(null),l=Ar(o,i),d=fR(r),u=pR(t);return h.useEffect(()=>{const m=o.current;if(!m)return;const p=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(p,"checked").set;if(d!==r&&x){const y=new Event("click",{bubbles:n});x.call(m,r),m.dispatchEvent(y)}},[d,r,n]),a.jsx(dr.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});vW.displayName=SOe;function NW(e){return e?"checked":"unchecked"}var EOe=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],GN="RadioGroup",[jOe]=jo(GN,[BN,gW]),SW=BN(),EW=gW(),[wOe,AOe]=jOe(GN),jW=h.forwardRef((e,t)=>{const{__scopeRadioGroup:r,name:n,defaultValue:s,value:i,required:o=!1,disabled:l=!1,orientation:d,dir:u,loop:m=!0,onValueChange:p,...g}=e,x=SW(r),y=ix(u),[N,v]=Jc({prop:i,defaultProp:s??null,onChange:p,caller:GN});return a.jsx(wOe,{scope:r,name:n,required:o,disabled:l,value:N,onValueChange:v,children:a.jsx(mW,{asChild:!0,...x,orientation:d,dir:y,loop:m,children:a.jsx(dr.div,{role:"radiogroup","aria-required":o,"aria-orientation":d,"data-disabled":l?"":void 0,dir:y,...g,ref:t})})})});jW.displayName=GN;var wW="RadioGroupItem",AW=h.forwardRef((e,t)=>{const{__scopeRadioGroup:r,disabled:n,...s}=e,i=AOe(wW,r),o=i.disabled||n,l=SW(r),d=EW(r),u=h.useRef(null),m=Ar(t,u),p=i.value===s.value,g=h.useRef(!1);return h.useEffect(()=>{const x=N=>{EOe.includes(N.key)&&(g.current=!0)},y=()=>g.current=!1;return document.addEventListener("keydown",x),document.addEventListener("keyup",y),()=>{document.removeEventListener("keydown",x),document.removeEventListener("keyup",y)}},[]),a.jsx(hW,{asChild:!0,...l,focusable:!o,active:p,children:a.jsx(xW,{disabled:o,required:i.required,checked:p,...d,...s,name:i.name,ref:m,onCheck:()=>i.onValueChange(s.value),onKeyDown:Bt(x=>{x.key==="Enter"&&x.preventDefault()}),onFocus:Bt(s.onFocus,()=>{g.current&&u.current?.click()})})})});AW.displayName=wW;var _Oe="RadioGroupIndicator",_W=h.forwardRef((e,t)=>{const{__scopeRadioGroup:r,...n}=e,s=EW(r);return a.jsx(yW,{...s,...n,ref:t})});_W.displayName=_Oe;var COe=jW,TOe=AW,OOe=_W;function q7({className:e,...t}){return a.jsx(COe,{"data-slot":"radio-group",className:ue("grid gap-3",e),...t})}function Cp({className:e,...t}){return a.jsx(TOe,{"data-slot":"radio-group-item",className:ue("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:a.jsx(OOe,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:a.jsx(dQ,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}var ROe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],kOe=ROe.reduce((e,t)=>{const r=A1(`Primitive.${t}`),n=h.forwardRef((s,i)=>{const{asChild:o,...l}=s,d=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(d,{...l,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),POe="Separator",W7="horizontal",DOe=["horizontal","vertical"],CW=h.forwardRef((e,t)=>{const{decorative:r,orientation:n=W7,...s}=e,i=IOe(n)?n:W7,l=r?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return a.jsx(kOe.div,{"data-orientation":i,...l,...s,ref:t})});CW.displayName=POe;function IOe(e){return DOe.includes(e)}var MOe=CW;function S0({className:e,orientation:t="horizontal",decorative:r=!0,...n}){return a.jsx(MOe,{"data-slot":"separator-root",decorative:r,orientation:t,className:ue("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...n})}var HN="Tabs",[LOe]=jo(HN,[BN]),TW=BN(),[$Oe,yk]=LOe(HN),OW=h.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:d="automatic",...u}=e,m=ix(l),[p,g]=Jc({prop:n,onChange:s,defaultProp:i??"",caller:HN});return a.jsx($Oe,{scope:r,baseId:Hl(),value:p,onValueChange:g,orientation:o,dir:m,activationMode:d,children:a.jsx(dr.div,{dir:m,"data-orientation":o,...u,ref:t})})});OW.displayName=HN;var RW="TabsList",kW=h.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...s}=e,i=yk(RW,r),o=TW(r);return a.jsx(mW,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:a.jsx(dr.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:t})})});kW.displayName=RW;var PW="TabsTrigger",DW=h.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:s=!1,...i}=e,o=yk(PW,r),l=TW(r),d=LW(o.baseId,n),u=$W(o.baseId,n),m=n===o.value;return a.jsx(hW,{asChild:!0,...l,focusable:!s,active:m,children:a.jsx(dr.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":u,"data-state":m?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:d,...i,ref:t,onMouseDown:Bt(e.onMouseDown,p=>{!s&&p.button===0&&p.ctrlKey===!1?o.onValueChange(n):p.preventDefault()}),onKeyDown:Bt(e.onKeyDown,p=>{[" ","Enter"].includes(p.key)&&o.onValueChange(n)}),onFocus:Bt(e.onFocus,()=>{const p=o.activationMode!=="manual";!m&&!s&&p&&o.onValueChange(n)})})})});DW.displayName=PW;var IW="TabsContent",MW=h.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:s,children:i,...o}=e,l=yk(IW,r),d=LW(l.baseId,n),u=$W(l.baseId,n),m=n===l.value,p=h.useRef(m);return h.useEffect(()=>{const g=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(g)},[]),a.jsx(Gs,{present:s||m,children:({present:g})=>a.jsx(dr.div,{"data-state":m?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":d,hidden:!g,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:p.current?"0s":void 0},children:g&&i})})});MW.displayName=IW;function LW(e,t){return`${e}-trigger-${t}`}function $W(e,t){return`${e}-content-${t}`}var FOe=OW,UOe=kW,BOe=DW,GOe=MW;function HOe({className:e,...t}){return a.jsx(FOe,{"data-slot":"tabs",className:ue("flex flex-col gap-2",e),...t})}function KOe({className:e,...t}){return a.jsx(UOe,{"data-slot":"tabs-list",className:ue("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",e),...t})}function Yb({className:e,...t}){return a.jsx(BOe,{"data-slot":"tabs-trigger",className:ue("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function Xb({className:e,...t}){return a.jsx(GOe,{"data-slot":"tabs-content",className:ue("flex-1 outline-none",e),...t})}function zOe(e){return e===""?"reconsultation":e===""||e===""?"dropout_recontact":e===""||e===""?"contacted":"new"}function qOe(e,t){return Math.max(1,Math.min(99,(t===""?92:t===""?78:t===""?58:38)+(e===""?6:e===""?-6:0)))}function WOe({caseId:e,patientName:t,initialTab:r="consultation",showReferralTab:n=!0,onComplete:s,onCancel:i,onBack:o}){const l=h.useMemo(()=>wN(e),[e]),d=h.useMemo(()=>sz(l),[l]),[u,m]=h.useState(r),[p,g]=h.useState("new"),[x,y]=h.useState(null),[N,v]=h.useState(!0),[S,E]=h.useState("greeting"),[C,_]=h.useState(""),[A,T]=h.useState(""),[R,I]=h.useState(""),[k,w]=h.useState(""),[L,H]=h.useState(""),[B,M]=h.useState(""),[G,$]=h.useState(""),[z,U]=h.useState(""),[Z,re]=h.useState(""),[X,F]=h.useState(""),[te,ne]=h.useState(""),[se,Ne]=h.useState(""),[fe,we]=h.useState(""),[ve,Oe]=h.useState({}),[Fe,oe]=h.useState(!1),[le,ge]=h.useState(""),[_e,ee]=h.useState([]),[q,ye]=h.useState("citizen"),pe=h.useMemo(()=>l?{id:l.id,patientId:l.id,patientName:l.profile.name,ageGroup:Zm(l.profile.age),gender:"",phone:l.profile.phone,guardianPhone:l.profile.guardianPhone??"",address:"    ",riskLevel:l.risk===""?"high":l.risk===""?"medium":"low",riskScore:qOe(l.risk,d.label),contactPriorityLabel:d.label,status:zOe(l.status),counselor:l.manager,registeredDate:l.updated.split(" ")[0],lastContact:l.updated.split(" ")[0]}:{id:e,patientId:e,patientName:t??"  ",ageGroup:" ",gender:"",phone:"010-0000-0000",guardianPhone:"",address:"  ",riskLevel:"medium",riskScore:60,contactPriorityLabel:"",status:"new",counselor:" ",registeredDate:new Date().toISOString().split("T")[0],lastContact:new Date().toISOString().split("T")[0]},[e,l,d.label,t]),[he]=h.useState([{id:"CONS-001",date:"2026-02-01",time:"10:30",counselor:"",duration:15,result:"completed",summary:"  .    .",actions:["   (2026-02-10)"]}]),rt={new:{greeting:{step:"greeting",title:"1:    ",content:`,    ${pe.counselor} .   ?

       ?`,tips:["   ","    ","    "],checkpoints:["  ","  ","  "]},purpose:{step:"purpose",title:"2:   ",content:`          .

             .    ,   .`,tips:["   ","    ","   "],checkpoints:["  "," ","  "]},assessment:{step:"assessment",title:"3:   ",content:`   ?

 :
-     ?
-   ?
-       ?
-    ?`,tips:["   ","  ","  "],checkpoints:["  ","  ","   "]},scheduling:{step:"scheduling",title:"4:     ",content:`      .  30  ,     .

  ${pe.address} ,     .

    .   ?`,tips:["   ","   ","(,  ) "],checkpoints:["  ","  "," "]}},contacted:{greeting:{step:"greeting",title:"1:  ",content:`,   ${pe.counselor} .     ?`,tips:[" ","   "],checkpoints:[" ","   "]},purpose:{step:"purpose",title:"2:  ",content:"     .     ?",tips:["  ","   "],checkpoints:["  ","  "]},assessment:{step:"assessment",title:"3:   ",content:"     ?    .",tips:["  ","  "],checkpoints:["  ","  "]},scheduling:{step:"scheduling",title:"4:  ",content:"     .       .",tips:["  "," "],checkpoints:[" ","SMS  "]}},reconsultation:{greeting:{step:"greeting",title:"1:   ",content:`, ${pe.counselor} .      .`,tips:["   ","  "],checkpoints:[" ","   "]},purpose:{step:"purpose",title:"2:  ",content:"  ,      .",tips:["  "," "],checkpoints:["  "," "]},assessment:{step:"assessment",title:"3:    ",content:"          .  .",tips:["   "," "],checkpoints:["  "," "]},scheduling:{step:"scheduling",title:"4:   ",content:"    .  ?",tips:[" ","   "],checkpoints:[" ","  "]}},dropout_recontact:{greeting:{step:"greeting",title:"1:  ",content:",  .  .   ?",tips:["  ","   "],checkpoints:[" ","  "]},purpose:{step:"purpose",title:"2:  ",content:"      .",tips:["  ","  "],checkpoints:[" "," "]},assessment:{step:"assessment",title:"3:   ",content:"  ?    .",tips:["  ","  "],checkpoints:["  ","  "]},scheduling:{step:"scheduling",title:"4:  ",content:"     ?      .",tips:["  ","  "],checkpoints:["  ","  "]}}};h.useEffect(()=>{if(N&&C.trim()){const Ge=setInterval(()=>{dt()},3e4);return()=>clearInterval(Ge)}},[C,N]),h.useEffect(()=>{g(pe.status)},[pe.status]),h.useEffect(()=>{m(r)},[r]),h.useEffect(()=>{!n&&u==="referral"&&m("consultation")},[n,u]),h.useEffect(()=>{oe(!1)},[S,p]),h.useEffect(()=>{if(L&&B&&G){const _r=`[ ] ${new Date(B).toLocaleDateString("ko-KR",{month:"long",day:"numeric",weekday:"short"})} ${G} ${L==="screening"?"":L==="health_center"?" ":" "}  .

:    123-45
: 02-1234-5678

${z?": "+z:""}`;re(_r)}else re("")},[L,B,G,z]);const Me=()=>{y(new Date),console.log("[AUDIT] Consultation Started:",{action:"CONSULTATION_START",caseId:pe.id,counselor:pe.counselor,timestamp:new Date().toISOString()})},dt=()=>{console.log("[AUTO-SAVE] Consultation Draft Saved:",{caseId:pe.id,notes:C,timestamp:new Date().toISOString()})},St=()=>{const Ge=`${p}-${S}`,Qt=rt[p][S].content;ge(ve[Ge]??Qt),oe(!0)},He=()=>{const Ge=`${p}-${S}`,Qt=rt[p][S].content,Pr=ve[Ge]??Qt;Oe(_r=>({..._r,[Ge]:le})),ee(_r=>[{id:`EDIT-${Date.now()}`,step:S,title:rt[p][S].title,before:Pr,after:le,ts:new Date().toISOString()},..._r]),_(_r=>_r+(_r?`

`:"")+`[${rt[p][S].title} - ]
${le}`),oe(!1)},Ye=()=>{oe(!1)},Mt=()=>{console.log("[AUDIT] Temporary Save:",{action:"CONSULTATION_TEMP_SAVE",caseId:pe.id,notes:C,result:A,timestamp:new Date().toISOString()}),alert(" .")},Xt=()=>{if(!A){alert("  .");return}if((A==="postponed"||A==="refused")&&!k){alert("  .");return}const Ge=x?Math.floor((new Date().getTime()-x.getTime())/6e4):0;console.log("[AUDIT] Consultation Completed:",{action:"CONSULTATION_COMPLETE",caseId:pe.id,counselor:pe.counselor,result:A,reasonCode:k,reason:R,notes:C,duration:Ge,referral:L?{type:L,date:B,time:G}:null,dropout:X?{reason:X,details:te}:null,timestamp:new Date().toISOString()}),alert(` !

 : ${Ge}
: ${A==="completed"?"":A==="postponed"?"":""}

  .`),s&&s()},hr=()=>{if(!L||!B||!G){alert("   .");return}console.log("[AUDIT] Appointment Confirmed & SMS Sent:",{action:"APPOINTMENT_CREATE",caseId:pe.id,counselor:pe.counselor,referralType:L,appointmentDate:B,appointmentTime:G,preVisitNotes:z,smsContent:Z,recipientPhone:pe.phone,timestamp:new Date().toISOString()}),alert(`  !

SMS ${pe.phone} .

 :
${Z}`);const Ge=`

[/ ]
: ${L==="screening"?" ":L==="health_center"?" ":" "}
: ${B} ${G}
SMS : `;_(C+Ge),m("consultation")},Gt=()=>{if(!X||!te.trim()){alert("     .");return}console.log("[AUDIT] Case Dropout:",{action:"CASE_DROPOUT",caseId:pe.id,counselor:pe.counselor,dropoutReason:X,dropoutDetails:te,recontactDate:se,recontactPlan:fe,timestamp:new Date().toISOString()}),alert(`   .

  '' .${se?`

 : ${se}`:""}`);const Ge=`

[  ]
: ${X}
: ${te}
${se?" : "+se:""}`;_(C+Ge),m("consultation")},sr=rt[p],xr=`${p}-${S}`,mr=sr[S],br={greeting:{content:`,    ${pe.counselor} . ?

   .   ?`,tips:[" (,  ) ","   ","   "]},purpose:{content:`           .

    1    .      .`,tips:["   ","    "," "]},assessment:{content:`    ?

     ?     ,      ?`,tips:["     ","    ","  "]},scheduling:{content:`      .

     .     .

      .`,tips:["   ","   ","   "]}},kr=q==="guardian"&&!!pe.guardianPhone,cn=(()=>{const Ge={...mr,content:ve[xr]??mr.content};if(kr&&!ve[xr]){const Qt=br[S];return{...Ge,content:Qt.content,tips:Qt.tips}}return Ge})(),wt=()=>{if(!x)return"00:00";const Ge=Math.floor((new Date().getTime()-x.getTime())/1e3),Qt=Math.floor(Ge/60),Pr=Ge%60;return`${String(Qt).padStart(2,"0")}:${String(Pr).padStart(2,"0")}`};return a.jsxs("div",{className:"h-screen flex flex-col bg-gray-50",children:[a.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4 sticky top-0 z-10",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(jt,{variant:"ghost",onClick:o||i,size:"sm",children:[a.jsx(Tl,{className:"h-4 w-4 mr-2"}),""]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold text-gray-900",children:" "}),a.jsxs("p",{className:"text-sm text-gray-500",children:[" ID: ",pe.patientId]})]})]}),a.jsx("div",{className:"flex items-center gap-3",children:x?a.jsxs(rn,{variant:"destructive",className:"text-base px-4 py-2",children:[a.jsx(Bl,{className:"h-4 w-4 mr-2"}),"  ",wt()]}):a.jsxs(jt,{onClick:Me,variant:"default",children:[a.jsx(So,{className:"h-4 w-4 mr-2"})," "]})})]}),a.jsxs("div",{className:"mt-4 grid grid-cols-6 gap-4 bg-gray-50 p-4 rounded-lg border border-gray-200",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),a.jsx("p",{className:"font-semibold text-sm",children:pe.patientName}),a.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[pe.ageGroup," / ",pe.gender]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),a.jsxs("p",{className:"font-semibold text-sm flex items-center gap-1",children:[a.jsx(Fs,{className:"h-3 w-3 text-gray-400"}),pe.phone]}),pe.guardianPhone&&a.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1 mt-0.5",children:[a.jsx(Xl,{className:"h-3 w-3 text-blue-400"}),a.jsx("span",{className:"text-blue-600",children:""})," ",pe.guardianPhone]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),a.jsxs("p",{className:"font-semibold text-sm flex items-center gap-1",children:[a.jsx(Dy,{className:"h-3 w-3 text-gray-400"}),pe.address]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),a.jsxs(rn,{className:`text-xs ${pe.contactPriorityLabel===""?"bg-red-50 text-red-700 border border-red-200":pe.contactPriorityLabel===""?"bg-orange-50 text-orange-700 border border-orange-200":pe.contactPriorityLabel===""?"bg-blue-50 text-blue-700 border border-blue-200":"bg-emerald-50 text-emerald-700 border border-emerald-200"}`,children:[pe.contactPriorityLabel," (",pe.riskScore,")"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),a.jsx(rn,{variant:"outline",className:"text-xs",children:pe.status==="contacted"?"":""})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:" "}),a.jsxs("p",{className:"font-semibold text-sm flex items-center gap-1",children:[a.jsx(Xl,{className:"h-3 w-3 text-gray-400"}),pe.counselor]})]})]})]}),a.jsx("div",{className:"flex-1 overflow-hidden",children:a.jsxs(HOe,{value:u,onValueChange:Ge=>m(Ge),className:"h-full flex flex-col",children:[a.jsx("div",{className:"bg-white border-b border-gray-200 px-6",children:a.jsxs(KOe,{className:"w-full justify-start bg-transparent",children:[a.jsxs(Yb,{value:"consultation",className:"data-[state=active]:bg-blue-50 data-[state=active]:text-blue-900",children:[a.jsx(So,{className:"h-4 w-4 mr-2"})," "]}),n&&a.jsxs(Yb,{value:"referral",className:"data-[state=active]:bg-purple-50 data-[state=active]:text-purple-900",children:[a.jsx(cC,{className:"h-4 w-4 mr-2"}),"/"]}),a.jsxs(Yb,{value:"dropout",className:"data-[state=active]:bg-orange-50 data-[state=active]:text-orange-900",children:[a.jsx(KS,{className:"h-4 w-4 mr-2"})," "]}),a.jsxs(Yb,{value:"history",className:"data-[state=active]:bg-gray-50",children:[a.jsx(ha,{className:"h-4 w-4 mr-2"})," "]})]})}),a.jsxs("div",{className:"flex-1 overflow-auto",children:[a.jsx(Xb,{value:"consultation",className:"h-full m-0 p-6",children:a.jsx("div",{className:"max-w-[1400px] mx-auto",children:a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs(Or,{className:"h-fit",children:[a.jsxs(Dn,{className:"bg-gradient-to-r from-blue-50 to-purple-50 border-b",children:[a.jsxs(In,{className:"flex items-center gap-2 text-blue-900",children:[a.jsx(fg,{className:"h-5 w-5"}),"AI   "]}),a.jsxs(Rl,{children:[" : ",a.jsx(rn,{variant:"outline",className:"ml-2",children:p==="new"?"":p==="contacted"?"":p==="reconsultation"?"":"  "})]})]}),a.jsxs(Rr,{className:"p-4 space-y-4",children:[a.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-white",children:[a.jsx("p",{className:"text-[10px] font-semibold text-gray-500 mb-2",children:" "}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>ye("citizen"),className:`flex-1 flex items-center gap-2 px-3 py-2.5 rounded-lg border-2 transition-all text-left ${q==="citizen"?"border-blue-500 bg-blue-50":"border-gray-200 bg-gray-50 hover:border-gray-300"}`,children:[a.jsx("div",{className:`w-3 h-3 rounded-full border-2 flex items-center justify-center ${q==="citizen"?"border-blue-500":"border-gray-300"}`,children:q==="citizen"&&a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-semibold text-gray-900",children:" "}),a.jsxs("div",{className:"text-[10px] text-gray-500 flex items-center gap-1",children:[a.jsx(Fs,{className:"h-2.5 w-2.5"}),pe.phone]})]})]}),pe.guardianPhone?a.jsxs("button",{onClick:()=>ye("guardian"),className:`flex-1 flex items-center gap-2 px-3 py-2.5 rounded-lg border-2 transition-all text-left ${q==="guardian"?"border-violet-500 bg-violet-50":"border-gray-200 bg-gray-50 hover:border-gray-300"}`,children:[a.jsx("div",{className:`w-3 h-3 rounded-full border-2 flex items-center justify-center ${q==="guardian"?"border-violet-500":"border-gray-300"}`,children:q==="guardian"&&a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-violet-500"})}),a.jsxs("div",{children:[a.jsxs("div",{className:"text-xs font-semibold text-gray-900 flex items-center gap-1",children:["",a.jsx("span",{className:"inline-flex px-1 py-0 rounded text-[8px] font-medium bg-blue-100 text-blue-700",children:""})]}),a.jsxs("div",{className:"text-[10px] text-gray-500 flex items-center gap-1",children:[a.jsx(Fs,{className:"h-2.5 w-2.5"}),pe.guardianPhone]})]})]}):a.jsxs("div",{className:"flex-1 flex items-center gap-2 px-3 py-2.5 rounded-lg border-2 border-dashed border-gray-200 bg-gray-50 opacity-50",children:[a.jsx("div",{className:"w-3 h-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-medium text-gray-400",children:""}),a.jsx("div",{className:"text-[10px] text-gray-400",children:"  "})]})]})]})]}),a.jsx("div",{className:"grid grid-cols-4 gap-2",children:["greeting","purpose","assessment","scheduling"].map((Ge,Qt)=>a.jsxs(jt,{variant:S===Ge?"default":"outline",size:"sm",onClick:()=>E(Ge),children:[Qt+1,""]},Ge))}),a.jsx(S0,{}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:cn.title}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:Fe?a.jsxs("div",{className:"space-y-3",children:[a.jsx(qo,{value:le,onChange:Ge=>ge(Ge.target.value),rows:6,className:"bg-white"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(jt,{size:"sm",onClick:He,children:""}),a.jsx(jt,{variant:"outline",size:"sm",onClick:Ye,children:""})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"text-sm text-blue-900 whitespace-pre-line leading-relaxed",children:cn.content}),a.jsxs(jt,{variant:"ghost",size:"sm",className:"mt-3 text-blue-600 hover:text-blue-700 hover:bg-blue-100",onClick:St,children:[a.jsx(gQ,{className:"h-4 w-4 mr-2"})," "]})]})}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[a.jsx(ea,{className:"h-4 w-4 text-orange-500"})," "]}),a.jsx("ul",{className:"space-y-1",children:cn.tips.map((Ge,Qt)=>a.jsxs("li",{className:"text-xs text-gray-600 flex items-start gap-2",children:[a.jsx("span",{className:"text-orange-500 font-bold",children:""}),a.jsx("span",{children:Ge})]},Qt))})]}),a.jsxs("div",{children:[a.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[a.jsx(Yo,{className:"h-4 w-4 text-green-500"}),""]}),a.jsx("div",{className:"space-y-1",children:cn.checkpoints.map((Ge,Qt)=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",className:"rounded"}),a.jsx("span",{className:"text-xs text-gray-600",children:Ge})]},Qt))})]})]}),_e.length>0&&a.jsxs("div",{className:"mt-4 border-t pt-3",children:[a.jsx("h4",{className:"text-xs font-semibold text-gray-600 mb-2",children:"  "}),a.jsx("div",{className:"space-y-2",children:_e.slice(0,3).map(Ge=>a.jsxs("div",{className:"rounded-md border border-gray-200 bg-white p-2",children:[a.jsxs("div",{className:"flex items-center justify-between text-[11px] text-gray-500",children:[a.jsx("span",{children:Ge.title}),a.jsx("span",{children:new Date(Ge.ts).toLocaleString("ko-KR")})]}),a.jsx("p",{className:"mt-1 text-xs text-gray-700 line-clamp-2",children:Ge.after})]},Ge.id))})]})]})]})]}),a.jsxs(Or,{className:"h-fit",children:[a.jsxs(Dn,{className:"bg-gradient-to-r from-green-50 to-blue-50 border-b",children:[a.jsxs(In,{className:"flex items-center gap-2 text-green-900",children:[a.jsx(Ef,{className:"h-5 w-5"}),"    "]}),a.jsx(Rl,{className:"flex items-center gap-4",children:x&&a.jsxs(a.Fragment,{children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Bl,{className:"h-3 w-3"}),": ",x.toLocaleTimeString("ko-KR")]}),a.jsxs("span",{className:"flex items-center gap-1",children:[" : ",wt()]})]})})]}),a.jsxs(Rr,{className:"p-4 space-y-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx($t,{htmlFor:"consultation-notes",children:" "}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",id:"auto-save",checked:N,onChange:Ge=>v(Ge.target.checked),className:"rounded"}),a.jsx("label",{htmlFor:"auto-save",className:"text-xs text-gray-500",children:"30 "})]})]}),a.jsx(qo,{id:"consultation-notes",value:C,onChange:Ge=>_(Ge.target.value),placeholder:" ,  ,    ...",rows:12,className:"font-mono text-sm"}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[C.length,"  / : ",N?"":""]})]}),a.jsx(S0,{}),a.jsxs("div",{children:[a.jsx($t,{children:"  *"}),a.jsxs(q7,{value:A,onValueChange:Ge=>T(Ge),className:"mt-2",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Cp,{value:"completed",id:"completed"}),a.jsxs($t,{htmlFor:"completed",className:"font-normal flex items-center gap-2",children:[a.jsx(Yo,{className:"h-4 w-4 text-green-600"})," "]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Cp,{value:"postponed",id:"postponed"}),a.jsxs($t,{htmlFor:"postponed",className:"font-normal flex items-center gap-2",children:[a.jsx(ea,{className:"h-4 w-4 text-yellow-600"}),""]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Cp,{value:"refused",id:"refused"}),a.jsxs($t,{htmlFor:"refused",className:"font-normal flex items-center gap-2",children:[a.jsx(fm,{className:"h-4 w-4 text-red-600"}),""]})]})]})]}),(A==="postponed"||A==="refused")&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx($t,{htmlFor:"result-reason-code",children:"  *"}),a.jsxs(g_,{value:k,onValueChange:w,children:[a.jsx(b_,{id:"result-reason-code",className:"mt-2",children:a.jsx(x_,{placeholder:"  "})}),a.jsx(y_,{children:A==="postponed"?a.jsxs(a.Fragment,{children:[a.jsx(Vn,{value:"P001",children:"P001 -  "}),a.jsx(Vn,{value:"P002",children:"P002 -   "}),a.jsx(Vn,{value:"P003",children:"P003 -   "}),a.jsx(Vn,{value:"P999",children:"P999 - "})]}):a.jsxs(a.Fragment,{children:[a.jsx(Vn,{value:"R001",children:"R001 -   ( )"}),a.jsx(Vn,{value:"R002",children:"R002 -  "}),a.jsx(Vn,{value:"R003",children:"R003 -  "}),a.jsx(Vn,{value:"R004",children:"R004 -  "}),a.jsx(Vn,{value:"R999",children:"R999 - "})]})})]})]}),a.jsxs("div",{children:[a.jsx($t,{htmlFor:"result-reason",children:" "}),a.jsx($r,{id:"result-reason",value:R,onChange:Ge=>I(Ge.target.value),placeholder:"  ",className:"mt-2"})]})]}),a.jsx(S0,{}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n?a.jsxs(jt,{variant:"outline",onClick:()=>m("referral"),className:"w-full",children:[a.jsx(cC,{className:"h-4 w-4 mr-2"}),"/"]}):a.jsx("div",{className:"w-full rounded-md border border-gray-200 bg-gray-50 px-3 py-2 text-center text-xs text-gray-500",children:"/   "}),a.jsxs(jt,{variant:"outline",onClick:()=>m("dropout"),className:"w-full",children:[a.jsx(KS,{className:"h-4 w-4 mr-2"})," "]})]}),a.jsx(S0,{}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(jt,{variant:"outline",onClick:Mt,className:"flex-1",children:[a.jsx(iR,{className:"h-4 w-4 mr-2"})," "]}),a.jsxs(jt,{onClick:Xt,className:"flex-1",disabled:!A,children:[a.jsx(Yo,{className:"h-4 w-4 mr-2"})," "]})]})]})]})]})})}),n&&a.jsx(Xb,{value:"referral",className:"h-full m-0 p-6",children:a.jsx("div",{className:"max-w-[1200px] mx-auto",children:a.jsxs(Or,{children:[a.jsxs(Dn,{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-b",children:[a.jsxs(In,{className:"flex items-center gap-2 text-purple-900",children:[a.jsx(Vo,{className:"h-5 w-5"}),"  "]}),a.jsx(Rl,{children:"  ,  ,    -      "})]}),a.jsx(Rr,{className:"p-6",children:a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx($t,{children:"  *"}),a.jsxs(q7,{value:L,onValueChange:Ge=>H(Ge),className:"mt-2 space-y-2",children:[a.jsxs("div",{className:"flex items-center space-x-2 border border-gray-200 rounded-lg p-3 hover:bg-gray-50",children:[a.jsx(Cp,{value:"screening",id:"screening"}),a.jsxs($t,{htmlFor:"screening",className:"font-normal flex items-center gap-2 cursor-pointer flex-1",children:[a.jsx(fg,{className:"h-4 w-4 text-purple-600"}),"  "]})]}),a.jsxs("div",{className:"flex items-center space-x-2 border border-gray-200 rounded-lg p-3 hover:bg-gray-50",children:[a.jsx(Cp,{value:"health_center",id:"health_center"}),a.jsxs($t,{htmlFor:"health_center",className:"font-normal flex items-center gap-2 cursor-pointer flex-1",children:[a.jsx(Yp,{className:"h-4 w-4 text-blue-600"})," "]})]}),a.jsxs("div",{className:"flex items-center space-x-2 border border-gray-200 rounded-lg p-3 hover:bg-gray-50",children:[a.jsx(Cp,{value:"medical",id:"medical"}),a.jsxs($t,{htmlFor:"medical",className:"font-normal flex items-center gap-2 cursor-pointer flex-1",children:[a.jsx(FQ,{className:"h-4 w-4 text-red-600"})," "]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx($t,{htmlFor:"appointment-date",children:"  *"}),a.jsx($r,{id:"appointment-date",type:"date",value:B,onChange:Ge=>M(Ge.target.value),className:"mt-2",min:new Date().toISOString().split("T")[0]})]}),a.jsxs("div",{children:[a.jsx($t,{htmlFor:"appointment-time",children:"  *"}),a.jsxs(g_,{value:G,onValueChange:$,children:[a.jsx(b_,{id:"appointment-time",className:"mt-2",children:a.jsx(x_,{placeholder:" "})}),a.jsxs(y_,{children:[a.jsx(Vn,{value:"09:00",children:" 09:00"}),a.jsx(Vn,{value:"10:00",children:" 10:00"}),a.jsx(Vn,{value:"11:00",children:" 11:00"}),a.jsx(Vn,{value:"14:00",children:" 02:00"}),a.jsx(Vn,{value:"15:00",children:" 03:00"}),a.jsx(Vn,{value:"16:00",children:" 04:00"})]})]})]})]}),a.jsxs("div",{children:[a.jsx($t,{htmlFor:"pre-visit",children:"  "}),a.jsx(qo,{id:"pre-visit",value:z,onChange:Ge=>U(Ge.target.value),placeholder:":  ,   ,  ",rows:3,className:"mt-2"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx($t,{children:"SMS  "}),a.jsx("div",{className:"mt-2 bg-gray-900 text-white p-4 rounded-lg min-h-[200px] font-mono text-sm whitespace-pre-line",children:Z||"      SMS "})]}),a.jsxs(Qp,{children:[a.jsx(pg,{className:"h-4 w-4"}),a.jsxs(Zp,{className:"text-sm",children:[a.jsx("strong",{children:":"})," ",pe.phone,a.jsx("br",{}),"    SMS ,    ."]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(jt,{variant:"outline",onClick:()=>m("consultation"),className:"flex-1",children:" "}),a.jsxs(jt,{onClick:hr,className:"flex-1",disabled:!L||!B||!G,children:[a.jsx(pg,{className:"h-4 w-4 mr-2"})," "]})]})]})]})})]})})}),a.jsx(Xb,{value:"dropout",className:"h-full m-0 p-6",children:a.jsx("div",{className:"max-w-[1200px] mx-auto",children:a.jsxs(Or,{className:"border-orange-200",children:[a.jsxs(Dn,{className:"bg-gradient-to-r from-orange-50 to-red-50 border-b border-orange-200",children:[a.jsxs(In,{className:"flex items-center gap-2 text-orange-900",children:[a.jsx(KS,{className:"h-5 w-5"}),"   "]}),a.jsx(Rl,{children:"       -      "})]}),a.jsxs(Rr,{className:"p-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[a.jsx(ss,{className:"h-4 w-4 text-orange-600"})," "]}),a.jsxs("div",{children:[a.jsx($t,{htmlFor:"dropout-reason",children:"  *"}),a.jsxs(g_,{value:X,onValueChange:F,children:[a.jsx(b_,{id:"dropout-reason",className:"mt-2",children:a.jsx(x_,{placeholder:" "})}),a.jsxs(y_,{children:[a.jsx(Vn,{value:"no_response",children:"D001 -   (3  )"}),a.jsx(Vn,{value:"refused",children:"D002 -   "}),a.jsx(Vn,{value:"family_refused",children:"D003 -  "}),a.jsx(Vn,{value:"relocated",children:"D004 -  / "}),a.jsx(Vn,{value:"deceased",children:"D005 - "}),a.jsx(Vn,{value:"other_service",children:"D006 -   "}),a.jsx(Vn,{value:"other",children:"D999 - "})]})]})]}),a.jsxs("div",{children:[a.jsx($t,{htmlFor:"dropout-details",children:"  *"}),a.jsx(qo,{id:"dropout-details",value:te,onChange:Ge=>ne(Ge.target.value),placeholder:" ,   ,    ",rows:6,className:"mt-2"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[a.jsx(yP,{className:"h-4 w-4 text-blue-600"})," "]}),a.jsxs("div",{children:[a.jsx($t,{htmlFor:"recontact-date",children:" "}),a.jsx($r,{id:"recontact-date",type:"date",value:se,onChange:Ge=>Ne(Ge.target.value),className:"mt-2",min:new Date().toISOString().split("T")[0]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:se&&" 1    "})]}),a.jsxs("div",{children:[a.jsx($t,{htmlFor:"recontact-plan",children:"   "}),a.jsx(qo,{id:"recontact-plan",value:fe,onChange:Ge=>we(Ge.target.value),placeholder:": 1     ,    ",rows:6,className:"mt-2"})]}),a.jsxs(Qp,{className:"border-blue-200 bg-blue-50",children:[a.jsx(yP,{className:"h-4 w-4 text-blue-600"}),a.jsx(Zp,{className:"text-sm text-blue-900",children:"       ,   ."})]})]})]}),a.jsx(S0,{className:"my-6"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(jt,{variant:"outline",onClick:()=>m("consultation"),className:"flex-1",children:" "}),a.jsxs(jt,{variant:"destructive",onClick:Gt,disabled:!X||!te.trim(),className:"flex-1",children:[a.jsx(fm,{className:"h-4 w-4 mr-2"}),"  "]})]})]})]})})}),a.jsx(Xb,{value:"history",className:"h-full m-0 p-6",children:a.jsx("div",{className:"max-w-[1200px] mx-auto",children:a.jsxs(Or,{children:[a.jsxs(Dn,{children:[a.jsxs(In,{className:"flex items-center gap-2",children:[a.jsx(Bl,{className:"h-5 w-5"}),"  "]}),a.jsx(Rl,{children:"      "})]}),a.jsx(Rr,{className:"p-6",children:a.jsx("div",{className:"space-y-4",children:he.map((Ge,Qt)=>a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 border-2 border-blue-600 flex items-center justify-center",children:a.jsx(So,{className:"h-4 w-4 text-blue-600"})}),Qt<he.length-1&&a.jsx("div",{className:"w-0.5 h-full bg-gray-300 mt-2"})]}),a.jsxs("div",{className:"flex-1 pb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{children:[a.jsxs("h4",{className:"font-semibold text-gray-900",children:[" #",he.length-Qt]}),a.jsxs("p",{className:"text-sm text-gray-500",children:[Ge.date," ",Ge.time,"  ",Ge.counselor,"  ",Ge.duration,""]})]}),a.jsx(rn,{variant:Ge.result==="completed"?"default":Ge.result==="postponed"?"secondary":"destructive",children:Ge.result==="completed"?"":Ge.result==="postponed"?"":""})]}),a.jsx("p",{className:"text-sm text-gray-700 mb-2",children:Ge.summary}),Ge.actions.length>0&&a.jsx("div",{className:"space-y-1",children:Ge.actions.map((Pr,_r)=>a.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[a.jsx(Yo,{className:"h-3 w-3 text-green-600"}),Pr]},_r))})]})]},Ge.id))})})]})})})]})]})})]})}const N_=[{id:"CONTACT_PRIMARY",category:"CONTACT",label:"1  ",hint:"  ",build:({centerName:e,link:t,centerPhone:r})=>`[:${e}]    .      (/)   .      : ${t} / : ${r}`},{id:"CONTACT_GUARDIAN_OPTION",category:"CONTACT",label:"1   ( )",hint:"    ",build:({centerName:e,link:t,centerPhone:r})=>`[:${e}]        ()   .  / : ${t} / : ${r}`},{id:"BOOKING_PRIMARY",category:"BOOKING",label:"1 ",hint:"/  ",build:({centerName:e,bookingLink:t,centerPhone:r})=>`[:${e}]  /  .   . /: ${t} / : ${r}`},{id:"BOOKING_CHANNEL_OPTION",category:"BOOKING",label:"1  (/ )",hint:"   ",build:({centerName:e,bookingLink:t})=>`[:${e}] /      .    . ${t}`},{id:"REMINDER_FIRST",category:"REMINDER",label:"1 ",hint:"/ 1 ",build:({centerName:e,link:t,centerPhone:r})=>`[:${e}]        .    ,    . ${t} / : ${r}`},{id:"REMINDER_FINAL",category:"REMINDER",label:" ",hint:" ",build:({centerName:e,link:t,centerPhone:r})=>`[:${e}]    .     /  . ${t} / : ${r}`}],S_={CONTACT:{label:"1 ",tone:"border-blue-200 bg-blue-50 text-blue-800"},BOOKING:{label:"",tone:"border-emerald-200 bg-emerald-50 text-emerald-800"},REMINDER:{label:"",tone:"border-amber-200 bg-amber-50 text-amber-800"}};function VOe(e){if(!e)return"-";const t=new Date(e);return Number.isNaN(t.getTime())?e:`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")} ${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`}async function YOe(e){const t=["/api/outreach/send-sms","http://localhost:4120/api/outreach/send-sms"];for(const r of t)try{if((await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)return!0}catch{}return!1}function XOe({caseId:e,onBack:t}){const r=h.useMemo(()=>wN(e),[e]),[n,s]=h.useState("CONTACT_PRIMARY"),[i,o]=h.useState("citizen"),[l,d]=h.useState("NOW"),[u,m]=h.useState(""),[p,g]=h.useState(" "),[x,y]=h.useState("02-1234-5678"),[N,v]=h.useState("https://neuro-shield.local/check"),[S,E]=h.useState("https://neuro-shield.local/booking"),[C,_]=h.useState([]),[A,T]=h.useState(!1),R=N_.find(M=>M.id===n)??N_[0],I=R.build({centerName:p,link:N,bookingLink:S,centerPhone:x}),k=h.useMemo(()=>{const M={CONTACT:[],BOOKING:[],REMINDER:[]};for(const G of N_)M[G.category].push(G);return M},[]),w=i==="guardian"?r?.profile.guardianPhone:r?.profile.phone,L=i==="guardian"&&!r?.profile.guardianPhone,H=A||!w||l==="SCHEDULE"&&!u,B=async()=>{if(!w)return;T(!0);const M=new Date().toISOString();let G=l==="NOW"?"SENT":"SCHEDULED";l==="NOW"&&(G=await YOe({case_id:e,template_id:R.id,citizen_phone:w,message:I,channel:"sms",dedupe_key:`${e}-${R.id}-${i}-${Date.now()}`})?"SENT":"FAILED"),_($=>[{id:`${Date.now()}`,at:l==="SCHEDULE"?new Date(u).toISOString():M,recipient:i,templateLabel:R.label,status:G},...$]),T(!1)};return a.jsxs("div",{className:"h-full flex flex-col bg-gray-50",children:[a.jsx("div",{className:"sticky top-0 z-10 border-b border-gray-200 bg-white px-6 py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("button",{onClick:t,className:"inline-flex items-center gap-1 rounded-md border border-gray-200 px-3 py-1.5 text-xs font-semibold text-gray-700 hover:bg-gray-50",children:[a.jsx(Tl,{size:14})," "]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"/ "}),a.jsxs("p",{className:"text-xs text-gray-500",children:["CASE ID: ",e]})]})]}),a.jsx("span",{className:"rounded-full border border-blue-200 bg-blue-50 px-3 py-1 text-[11px] font-semibold text-blue-700",children:"Stage1   "})]})}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[a.jsx("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:a.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-4",children:[a.jsxs("div",{className:"rounded-lg border border-gray-100 bg-gray-50 p-3",children:[a.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),a.jsx("p",{className:"mt-1 text-sm font-bold text-gray-900",children:r?.id??e})]}),a.jsxs("div",{className:"rounded-lg border border-gray-100 bg-gray-50 p-3",children:[a.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase",children:""}),a.jsx("p",{className:"mt-1 text-sm font-bold text-gray-900",children:r?Zm(r.profile.age):"-"})]}),a.jsxs("div",{className:"rounded-lg border border-gray-100 bg-gray-50 p-3",children:[a.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),a.jsx("p",{className:"mt-1 text-sm font-bold text-gray-900",children:r?Xo(r.profile.phone):"-"})]}),a.jsxs("div",{className:"rounded-lg border border-gray-100 bg-gray-50 p-3",children:[a.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),a.jsx("p",{className:"mt-1 text-sm font-bold text-gray-900",children:r?.profile.guardianPhone?Xo(r.profile.guardianPhone):""})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 gap-6 xl:grid-cols-12",children:[a.jsxs("section",{className:"xl:col-span-8 space-y-4",children:[a.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsxs("h3",{className:"text-sm font-bold text-gray-900 flex items-center gap-2",children:[a.jsx(So,{size:15,className:"text-gray-500"})," "]}),a.jsx("div",{className:"mt-3 space-y-3",children:Object.keys(k).map(M=>a.jsxs("div",{className:"rounded-lg border border-gray-100 bg-gray-50 p-3",children:[a.jsx("p",{className:"mb-2 text-xs font-bold text-gray-700",children:S_[M].label}),a.jsx("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-2",children:k[M].map(G=>a.jsxs("button",{onClick:()=>s(G.id),className:`rounded-lg border px-3 py-2 text-left transition-colors ${n===G.id?"border-blue-300 bg-blue-50":"border-gray-200 bg-white hover:bg-gray-50"}`,children:[a.jsx("p",{className:"text-xs font-semibold text-gray-900",children:G.label}),a.jsx("p",{className:"mt-0.5 text-[11px] text-gray-500",children:G.hint})]},G.id))})]},M))})]}),a.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsxs("h3",{className:"text-sm font-bold text-gray-900 flex items-center gap-2",children:[a.jsx(gU,{size:15,className:"text-gray-500"})," "]}),a.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3 md:grid-cols-2",children:[a.jsxs("label",{className:"text-xs",children:[a.jsx("span",{className:"text-gray-500",children:""}),a.jsx("input",{value:p,onChange:M=>g(M.target.value),className:"mt-1 w-full rounded-md border border-gray-200 px-2 py-2 text-xs outline-none focus:border-blue-400"})]}),a.jsxs("label",{className:"text-xs",children:[a.jsx("span",{className:"text-gray-500",children:" "}),a.jsx("input",{value:x,onChange:M=>y(M.target.value),className:"mt-1 w-full rounded-md border border-gray-200 px-2 py-2 text-xs outline-none focus:border-blue-400"})]}),a.jsxs("label",{className:"text-xs",children:[a.jsx("span",{className:"text-gray-500",children:" "}),a.jsx("input",{value:N,onChange:M=>v(M.target.value),className:"mt-1 w-full rounded-md border border-gray-200 px-2 py-2 text-xs outline-none focus:border-blue-400"})]}),a.jsxs("label",{className:"text-xs",children:[a.jsx("span",{className:"text-gray-500",children:" "}),a.jsx("input",{value:S,onChange:M=>E(M.target.value),className:"mt-1 w-full rounded-md border border-gray-200 px-2 py-2 text-xs outline-none focus:border-blue-400"})]})]})]}),a.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-sm font-bold text-gray-900",children:" "}),a.jsx("span",{className:`rounded-full border px-2 py-0.5 text-[10px] font-semibold ${S_[R.category].tone}`,children:S_[R.category].label})]}),a.jsx("p",{className:"mt-3 whitespace-pre-wrap rounded-lg border border-gray-100 bg-gray-50 p-3 text-sm leading-relaxed text-gray-800",children:I}),a.jsxs("p",{className:"mt-2 text-[11px] text-gray-500",children:[" : ",I.length,""]})]})]}),a.jsxs("aside",{className:"xl:col-span-4 space-y-4",children:[a.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsxs("h3",{className:"text-sm font-bold text-gray-900 flex items-center gap-2",children:[a.jsx(pg,{size:15,className:"text-gray-500"})," "]}),a.jsxs("div",{className:"mt-3 space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2 rounded-lg border border-gray-200 bg-gray-50 px-3 py-2 text-xs",children:[a.jsx("input",{type:"radio",checked:i==="citizen",onChange:()=>o("citizen")}),a.jsx(Xl,{size:12,className:"text-gray-500"})," (",r?Xo(r.profile.phone):"-",")"]}),a.jsxs("label",{className:`flex items-center gap-2 rounded-lg border px-3 py-2 text-xs ${L?"border-dashed border-gray-200 bg-gray-50 text-gray-400":"border-gray-200 bg-gray-50"}`,children:[a.jsx("input",{type:"radio",checked:i==="guardian",onChange:()=>o("guardian"),disabled:L}),a.jsx(HZ,{size:12,className:"text-gray-500"})," (",r?.profile.guardianPhone?Xo(r.profile.guardianPhone):"",")"]})]}),a.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-1 rounded-lg border border-gray-200 bg-gray-50 p-1 text-[11px] font-semibold",children:[a.jsx("button",{onClick:()=>d("NOW"),className:`rounded-md px-2 py-1 ${l==="NOW"?"bg-white text-gray-900 shadow-sm":"text-gray-500"}`,children:" "}),a.jsx("button",{onClick:()=>d("SCHEDULE"),className:`rounded-md px-2 py-1 ${l==="SCHEDULE"?"bg-white text-gray-900 shadow-sm":"text-gray-500"}`,children:" "})]}),l==="SCHEDULE"?a.jsxs("label",{className:"mt-3 block text-xs text-gray-500",children:[" ",a.jsx("input",{type:"datetime-local",value:u,onChange:M=>m(M.target.value),className:"mt-1 w-full rounded-md border border-gray-200 px-2 py-2 text-xs outline-none focus:border-blue-400"})]}):null,a.jsx("button",{onClick:B,disabled:H,className:"mt-3 inline-flex w-full items-center justify-center gap-2 rounded-md bg-[#163b6f] px-3 py-2 text-xs font-semibold text-white disabled:cursor-not-allowed disabled:bg-gray-300",children:A?" ...":l==="NOW"?" ":" "}),w?null:a.jsx("p",{className:"mt-2 text-[11px] text-red-600",children:"   ."})]}),a.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsxs("h3",{className:"text-sm font-bold text-gray-900 flex items-center gap-2",children:[a.jsx(ha,{size:15,className:"text-gray-500"})," "]}),a.jsx("div",{className:"mt-3 space-y-2",children:C.length===0?a.jsx("p",{className:"rounded-md border border-gray-100 bg-gray-50 px-3 py-2 text-xs text-gray-500",children:"  ."}):C.map(M=>a.jsxs("div",{className:"rounded-md border border-gray-100 bg-gray-50 px-3 py-2 text-xs",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"font-semibold text-gray-800",children:M.templateLabel}),a.jsx("span",{className:`rounded px-1.5 py-0.5 text-[10px] font-semibold ${M.status==="SENT"?"bg-emerald-100 text-emerald-700":M.status==="SCHEDULED"?"bg-blue-100 text-blue-700":"bg-red-100 text-red-700"}`,children:M.status==="SENT"?"":M.status==="SCHEDULED"?"":""})]}),a.jsxs("p",{className:"mt-1 text-[11px] text-gray-500",children:[M.recipient==="citizen"?"":"","  ",VOe(M.at)]})]},M.id))})]}),a.jsxs("div",{className:"rounded-xl border border-blue-100 bg-blue-50 p-4",children:[a.jsxs("h4",{className:"text-xs font-bold text-blue-900 flex items-center gap-1",children:[a.jsx(eR,{size:13})," "]}),a.jsxs("ul",{className:"mt-2 space-y-1 text-[11px] text-blue-800",children:[a.jsx("li",{children:"1 :      "}),a.jsx("li",{children:": /  "}),a.jsx("li",{children:":  "})]})]})]})]})]})]})}function QOe({userRole:e="counselor",userName:t="",centerName:r="  ",onLogout:n}){const[s,i]=h.useState("main"),[o,l]=h.useState(null),[d,u]=h.useState("Stage 1"),[m,p]=h.useState(null),[g,x]=h.useState("detail"),[y,N]=h.useState(""),[v,S]=h.useState(null),E=h.useRef(null),C=h.useRef(0),_=h.useRef(!1),A=h.useCallback((w,L)=>{C.current=E.current?.scrollTop??0,l(w),u(L),x("detail"),i("cases")},[]),T=h.useCallback(w=>{jz(w),p(w),S(null),_.current=!1,l(null),x("detail"),i("cases")},[]),R=h.useCallback(()=>{_.current=!0,l(null),x("detail")},[]);h.useEffect(()=>{if(!_.current||s!=="cases"||o!==null)return;const w=window.requestAnimationFrame(()=>{E.current&&(E.current.scrollTop=C.current),_.current=!1});return()=>window.cancelAnimationFrame(w)},[s,o]);const I=()=>{if(o&&s==="cases")return g==="consultation"?a.jsx(WOe,{caseId:o,showReferralTab:!1,onComplete:R,onCancel:()=>x("detail"),onBack:()=>x("detail")}):g==="sms"?a.jsx(XOe,{caseId:o,onBack:()=>x("detail")}):g==="stage-workflow"&&d==="Stage 2"?a.jsx(uq,{caseId:o,onBack:R}):g==="stage-workflow"&&d==="Stage 3"?a.jsx(fq,{caseId:o,onBack:R}):a.jsx(z_e,{caseId:o,stage:d,onBack:R});switch(s){case"main":return a.jsx(JF,{onNavigateToCases:T,onSelectCase:A,centerName:r});case"cases":return a.jsx(kje,{onSelectCase:A,initialFilter:m,externalSearchKeyword:y,onExternalSearchKeywordChange:N,initialViewState:v,onViewStateChange:S});case"calendar":return a.jsx(Bje,{});case"reports":return a.jsx(Gje,{});case"settings":return a.jsx(Hje,{});default:return a.jsx(JF,{onNavigateToCases:T,onSelectCase:A,centerName:r})}},k=s==="cases"&&o!==null;return a.jsxs("div",{className:"flex h-screen w-full bg-gray-50 overflow-hidden text-slate-900 font-sans",children:[a.jsx(Kje,{activeTab:s,setActiveTab:w=>{w!=="cases"&&Mp({stage:"ALL",status:"ALL",keyword:""}),i(w),_.current=!1,l(null),p(null),x("detail")},userName:t,centerName:r,userRole:e,onLogout:n}),a.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[!k&&a.jsx(qje,{activeTab:s,caseSearchKeyword:y,onCaseSearchKeywordChange:N}),a.jsx("main",{ref:E,className:"flex-1 overflow-y-auto p-6",children:I()})]})]})}const ZOe=["","","","","",""],JOe={:" ",:" ",:" ",:"  ",:"",:" "};function eRe(e){let t=e;return ZOe.forEach(r=>{t=t.split(r).join(JOe[r])}),t}function vt(e){return eRe(e)}const FW={11:[{code:"11010",label:""},{code:"11020",label:""},{code:"11030",label:""},{code:"11040",label:""}],26:[{code:"26010",label:""},{code:"26020",label:""},{code:"26030",label:""},{code:"26040",label:""}],27:[{code:"27010",label:""},{code:"27020",label:""},{code:"27030",label:""},{code:"27040",label:""}],29:[{code:"29010",label:""},{code:"29020",label:""},{code:"29030",label:""}],31:[{code:"31010",label:""},{code:"31020",label:""},{code:"31030",label:""},{code:"31040",label:""}],41:[{code:"41010",label:""},{code:"41020",label:""},{code:"41030",label:""},{code:"41040",label:""}],44:[{code:"44010",label:""},{code:"44020",label:""},{code:"44030",label:""},{code:"44040",label:""}],46:[{code:"46010",label:""},{code:"46020",label:""},{code:"46030",label:""},{code:"46040",label:""}],47:[{code:"47010",label:""},{code:"47020",label:""},{code:"47030",label:""},{code:"47040",label:""}],48:[{code:"48010",label:""},{code:"48020",label:""},{code:"48030",label:""},{code:"48040",label:""}],50:[{code:"50010",label:""},{code:"50020",label:""}]},tRe={slaBreachRate:.35,notReachedRate:.3,avgWaitTimeNorm:.2,longWaitRate:.15},V7={kpi:.6,volume:.4},UW=e=>Math.max(0,Math.min(1,e));function rRe(e,t,r,n){if(r<=t)return .5;const s=UW((e-t)/(r-t));return n==="higherWorse"?s:1-s}function nRe(e,t,r){return r<=t?.5:UW((e-t)/(r-t))}function aRe(e){const t=rRe(e.kpiValue,e.kpiMin,e.kpiMax,e.direction),r=nRe(e.volume,e.volumeMin,e.volumeMax);return Number((t*V7.kpi+r*V7.volume).toFixed(3))}const Y0={thresholds:{longWaitDays:7,slaNearDays:3},weights:{...tRe},notifications:{slaBreachAlert:!0,slaImminentAlert:!0,longWaitSurge:!1,riskIncrease:!1}};function BW(e){try{const t=localStorage.getItem(`regional.settings.${e}.thresholds`),r=localStorage.getItem(`regional.settings.${e}.weights`),n=localStorage.getItem(`regional.settings.${e}.notifications`);return{thresholds:t?JSON.parse(t):Y0.thresholds,weights:r?JSON.parse(r):Y0.weights,notifications:n?JSON.parse(n):Y0.notifications}}catch{return{...Y0}}}function sRe(e,t){localStorage.setItem(`regional.settings.${e}.thresholds`,JSON.stringify(t.thresholds)),localStorage.setItem(`regional.settings.${e}.weights`,JSON.stringify(t.weights)),localStorage.setItem(`regional.settings.${e}.notifications`,JSON.stringify(t.notifications))}const iRe={regionalSla:"regional_sla_violation",regionalQueueRisk:"regional_queue_risk",regionalRecontact:"regional_recontact_rate",regionalDataReadiness:"regional_data_readiness",regionalGovernance:"regional_governance_missing",regionalAdTransitionHotspot:"regional_ad_transition_hotspot",regionalDxDelayHotspot:"regional_dx_delay_hotspot",regionalScreenToDxRate:"regional_screen_to_dx_rate"},Y7={regionalSla:"blue",regionalQueueRisk:"orange",regionalRecontact:"red",regionalDataReadiness:"orange",regionalGovernance:"purple",regionalAdTransitionHotspot:"red",regionalDxDelayHotspot:"orange",regionalScreenToDxRate:"teal"},$d="    ",kO=[{key:"regionalSla",label:" (/24h)",shortLabel:" ",unit:"",direction:"higherWorse",tooltip:"     ",scopeLine:$d,clickAction:"   .",drilldownKind:"inflow",mapMetricLabel:"  ",trendGoal:280,color:"#2563eb",iconBg:"bg-blue-100 text-blue-700"},{key:"regionalQueueRisk",label:" ( )",shortLabel:" ",unit:"",direction:"higherWorse",tooltip:"  /   ",scopeLine:$d,clickAction:"    .",drilldownKind:"queue",mapMetricLabel:"  ",trendGoal:160,color:"#ea580c",iconBg:"bg-orange-100 text-orange-700"},{key:"regionalRecontact",label:"SLA (/)",shortLabel:"SLA ",unit:"%",direction:"higherWorse",tooltip:" /     ",scopeLine:$d,clickAction:"   .",drilldownKind:"sla",mapMetricLabel:" SLA  ",trendGoal:6,color:"#ef4444",iconBg:"bg-red-100 text-red-700"},{key:"regionalDataReadiness",label:" ",shortLabel:"",unit:"%",direction:"higherWorse",tooltip:"     ",scopeLine:$d,clickAction:"   .",drilldownKind:"recontact",mapMetricLabel:"   ",trendGoal:9,color:"#d97706",iconBg:"bg-amber-100 text-amber-700"},{key:"regionalGovernance",label:" ( )",shortLabel:" ",unit:"",direction:"higherWorse",tooltip:"  SLA    ",scopeLine:$d,clickAction:"   .",drilldownKind:"centerRisk",mapMetricLabel:"   ",trendGoal:40,color:"#7c3aed",iconBg:"bg-violet-100 text-violet-700"},{key:"regionalAdTransitionHotspot",label:"AD    ",shortLabel:" ",unit:"",direction:"higherWorse",tooltip:"      ",scopeLine:$d,clickAction:"      .",drilldownKind:"centerRisk",mapMetricLabel:" AD   ",trendGoal:42,color:"#dc2626",iconBg:"bg-rose-100 text-rose-700"},{key:"regionalDxDelayHotspot",label:"  ",shortLabel:" ",unit:"",direction:"higherWorse",tooltip:"       ",scopeLine:$d,clickAction:"      .",drilldownKind:"queue",mapMetricLabel:"   ",trendGoal:24,color:"#f97316",iconBg:"bg-orange-100 text-orange-700"},{key:"regionalScreenToDxRate",label:"  ",shortLabel:"",unit:"%",direction:"higherBetter",tooltip:"      ",scopeLine:$d,clickAction:"      .",drilldownKind:"sla",mapMetricLabel:"  ",trendGoal:68,color:"#0f766e",iconBg:"bg-teal-100 text-teal-700"}],lm=kO.reduce((e,t)=>(e[t.key]=t,e),{}),oRe="drill",lRe="kpi",cRe="range",dRe="view",rh={REGION:0,SIGUNGU:1,EUPMYEONDONG:2,CUSTOM:3};function uRe(e){return e==="REGION"||e==="SIGUNGU"||e==="EUPMYEONDONG"||e==="CUSTOM"?e:null}function fRe(e){if(!e||typeof e!="object")return null;const t=e,r=uRe(t.l??t.level),n=t.i??t.id;if(!r||typeof n!="string"&&typeof n!="number")return null;const s=String(n),i=t.n??t.label??s,o=typeof i=="string"&&i.trim()?i:s;return{l:r,i:s,n:o}}function KN(e){const t=e.filter(Boolean).map(n=>({l:n.l,i:String(n.i),n:n.n})),r=[];return t.forEach(n=>{const s=rh[n.l];for(;r.length>0;){const i=r[r.length-1];if(rh[i.l]<s)break;r.pop()}r.push(n)}),r}function PO(e){const t=KN(e);return JSON.stringify(t.map(r=>({l:r.l,i:String(r.i),n:r.n})))}function X7(e){try{const t=JSON.parse(e);return Array.isArray(t)?KN(t.map(r=>fRe(r)).filter(r=>!!r)):[]}catch{return[]}}function GW(e){if(!e)return[];const t=X7(e);if(t.length>0)return t;try{const r=decodeURIComponent(e);if(r!==e)return X7(r)}catch{return[]}return[]}function DO(e){return e.map(t=>({l:t.level,i:String(t.id),n:t.label}))}function Q7(e){const t=[];return e.forEach(r=>{const n=rh[r.level];for(;t.length>0;){const s=t[t.length-1];if(rh[s.level]<n)break;t.pop()}t.push({...r,id:String(r.id)})}),t}function E0(e,t){return{level:e.level,id:String(e.id),label:e.label,filters:{...t},timestamp:Date.now()}}function HW(e,t){return e==="geomap"||e==="heatmap"?e:t}function KW(e,t){return e==="24h"||e==="7d"||e==="30d"||e==="90d"?e:e==="weekly"?"7d":e==="monthly"?"30d":e==="quarterly"?"90d":t}function E_(e,t,r,n,s){if(typeof window>"u")return[e];const i=new URLSearchParams(window.location.search),o=GW(i.get(t)),l={kpi:i.get(r)??e.filters.kpi,range:KW(i.get(n)??e.filters.range,e.filters.range),view:HW(i.get(s),e.filters.view)};if(!o.length)return[{...e,filters:{...l}}];const d={l:e.level,i:String(e.id),n:e.label};return KN([d,...o.filter(m=>!(m.l===d.l&&m.i===d.i))]).map((m,p)=>({level:m.l,id:m.i,label:p===0?e.label:m.n,filters:{...l},timestamp:Date.now()+p}))}function pRe(e,t){return e.kpi===t.kpi&&e.range===t.range&&e.view===t.view&&(e.overlay??"")===(t.overlay??"")}function Tp(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r+=1)if(e[r].level!==t[r].level||String(e[r].id)!==String(t[r].id)||e[r].label!==t[r].label||!pRe(e[r].filters,t[r].filters))return!1;return!0}function IO(e,t){return`${e}|${t.kpi}|${t.range}|${t.view}`}function Z7(e){const{stack:t,mode:r,queryKey:n,kpiKey:s,rangeKey:i,viewKey:o,defaultFilters:l,lastAppliedQueryRef:d}=e;if(typeof window>"u"||!t.length)return!1;const u=new URL(window.location.href),m=new URL(window.location.href),p=t[t.length-1],g=PO(DO(t)),y=KN(DO(t)).length<=1,N=p.filters.kpi===l.kpi&&p.filters.range===l.range&&p.filters.view===l.view;if(y?m.searchParams.delete(n):m.searchParams.set(n,g),y&&N?(m.searchParams.delete(o),m.searchParams.delete(s),m.searchParams.delete(i)):(p.filters.view===l.view?m.searchParams.delete(o):m.searchParams.set(o,p.filters.view),p.filters.kpi===l.kpi?m.searchParams.delete(s):m.searchParams.set(s,p.filters.kpi),p.filters.range===l.range?m.searchParams.delete(i):m.searchParams.set(i,p.filters.range)),m.search===u.search)return!1;r==="replace"?window.history.replaceState({},"",m.toString()):window.history.pushState({},"",m.toString());const v=y?"":g;return d.current=IO(v,p.filters),!0}function mRe({root:e,initialFilters:t,queryKey:r=oRe,kpiKey:n=lRe,rangeKey:s=cRe,viewKey:i=dRe}){const o=h.useRef(t),l=h.useRef("");h.useEffect(()=>{o.current=t},[t.kpi,t.overlay,t.range,t.view]);const d=h.useMemo(()=>`${e.level}:${String(e.id)}:${e.label}`,[e.id,e.label,e.level]),u=h.useMemo(()=>E0(e,t),[t.kpi,t.overlay,t.range,t.view,e.id,e.label,e.level,d]),[m,p]=h.useState(()=>E_(u,r,n,s,i)),g=m[m.length-1]??u,x=m.length>1,y=x;h.useEffect(()=>{l.current=IO(PO(DO(m)),g.filters)},[g.filters.kpi,g.filters.range,g.filters.view,m]);const N=h.useCallback((A,T)=>{const R=A.length?Q7(A):[E0({level:e.level,id:String(e.id),label:e.label},o.current)];return Z7({stack:R,mode:T,queryKey:r,kpiKey:n,rangeKey:s,viewKey:i,defaultFilters:o.current,lastAppliedQueryRef:l}),R},[n,r,s,e.id,e.label,e.level,i]);h.useEffect(()=>{const A=E0(e,o.current),T=E_(A,r,n,s,i);p(R=>Tp(R,T)?R:T),Z7({stack:T,mode:"replace",queryKey:r,kpiKey:n,rangeKey:s,viewKey:i,defaultFilters:o.current,lastAppliedQueryRef:l})},[n,r,s,e.id,e.label,e.level,d,i]),h.useEffect(()=>{const A=()=>{const T=new URLSearchParams(window.location.search),R=PO(GW(T.get(r)));if(IO(R,{kpi:T.get(n)??o.current.kpi,range:KW(T.get(s)??o.current.range,o.current.range),view:HW(T.get(i),o.current.view)})===l.current)return;const k=E0(e,o.current),w=E_(k,r,n,s,i);p(L=>Tp(L,w)?L:w)};return window.addEventListener("popstate",A),()=>window.removeEventListener("popstate",A)},[n,r,s,e.id,e.label,e.level,d,i]);const v=h.useCallback((A,T="replace")=>{p(R=>{const I=R.length?R:[u],k=I.map(w=>({...w,filters:{...w.filters,...A}}));return Tp(I,k)?I:N(k,T)})},[N,u]),S=h.useCallback((A,T="push")=>{p(R=>{const I=Q7(R.length?R:[u]),k=I[I.length-1],w={...A,id:String(A.id),filters:{...k.filters,...A.filters},timestamp:Date.now()},L=rh[w.level],H=[...I.filter(B=>rh[B.level]<L),w];return Tp(I,H)?I:N(H,T)})},[N,u]),E=h.useCallback(()=>{p(A=>{if(A.length<=1)return A;const T=A.slice(0,-1);return N(T,"push")})},[N]),C=h.useCallback(A=>{p(T=>{if(A<0||A>=T.length)return T;const R=T.slice(0,A+1);return Tp(T,R)?T:N(R,"push")})},[N]),_=h.useCallback(()=>{const A=[E0({level:e.level,id:String(e.id),label:e.label},o.current)];p(T=>Tp(T,A)?T:N(A,"push"))},[N,e.id,e.label,e.level]);return{stack:m,current:g,canBack:y,canGoBack:x,push:S,back:E,jumpTo:C,reset:_,syncFilters:v}}const hRe={nation:"sido",sido:"sigungu",sigungu:"eupmyeondong",center:"case"};function J7(e,t,r){return r?e==="nation"?r.length===2:e==="sido"||e==="sigungu"?t?r.startsWith(t)&&r.length>t.length:!1:!0:!1}function zW({level:e,parentRegionCode:t,candidates:r}){const n=hRe[e],s=new Set,i=[];for(const d of r){const u=String(d.code??"").trim();u&&(s.has(u)||(s.add(u),i.push({code:u,name:String(d.name??"").trim()})))}let o=[];if(e==="nation")o=i.filter(d=>J7(e,t,d.code));else if(t){const d=i.filter(u=>u.code===t?!1:J7(e,t,u.code));d.length>0?o=d:(o=i.filter(u=>u.code!==t),o.length>0&&console.warn("[ChildrenScope] parent-child code prefix mismatch, fallback to candidate children",{level:e,parentRegionCode:t,sampleChildCode:o[0]?.code}))}else o=i;const l=o.reduce((d,u)=>(u.name&&(d[u.code]=u.name),d),{});return{childrenType:n,childrenCodes:o.map(d=>d.code),childrenNameMap:l,children:o}}function e8({height:e=220}){return a.jsx("div",{className:"animate-pulse rounded-lg bg-gray-200",style:{height:e}})}var gRe=Symbol("radix.slottable");function xRe(e){const t=({children:r})=>a.jsx(a.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=gRe,t}var[zN]=jo("Tooltip",[Ch]),qN=Ch(),qW="TooltipProvider",bRe=700,MO="tooltip.open",[yRe,vk]=zN(qW),WW=e=>{const{__scopeTooltip:t,delayDuration:r=bRe,skipDelayDuration:n=300,disableHoverableContent:s=!1,children:i}=e,o=h.useRef(!0),l=h.useRef(!1),d=h.useRef(0);return h.useEffect(()=>{const u=d.current;return()=>window.clearTimeout(u)},[]),a.jsx(yRe,{scope:t,isOpenDelayedRef:o,delayDuration:r,onOpen:h.useCallback(()=>{window.clearTimeout(d.current),o.current=!1},[]),onClose:h.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>o.current=!0,n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:h.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:i})};WW.displayName=qW;var ex="Tooltip",[vRe,Nx]=zN(ex),VW=e=>{const{__scopeTooltip:t,children:r,open:n,defaultOpen:s,onOpenChange:i,disableHoverableContent:o,delayDuration:l}=e,d=vk(ex,e.__scopeTooltip),u=qN(t),[m,p]=h.useState(null),g=Hl(),x=h.useRef(0),y=o??d.disableHoverableContent,N=l??d.delayDuration,v=h.useRef(!1),[S,E]=Jc({prop:n,defaultProp:s??!1,onChange:R=>{R?(d.onOpen(),document.dispatchEvent(new CustomEvent(MO))):d.onClose(),i?.(R)},caller:ex}),C=h.useMemo(()=>S?v.current?"delayed-open":"instant-open":"closed",[S]),_=h.useCallback(()=>{window.clearTimeout(x.current),x.current=0,v.current=!1,E(!0)},[E]),A=h.useCallback(()=>{window.clearTimeout(x.current),x.current=0,E(!1)},[E]),T=h.useCallback(()=>{window.clearTimeout(x.current),x.current=window.setTimeout(()=>{v.current=!0,E(!0),x.current=0},N)},[N,E]);return h.useEffect(()=>()=>{x.current&&(window.clearTimeout(x.current),x.current=0)},[]),a.jsx(mk,{...u,children:a.jsx(vRe,{scope:t,contentId:g,open:S,stateAttribute:C,trigger:m,onTriggerChange:p,onTriggerEnter:h.useCallback(()=>{d.isOpenDelayedRef.current?T():_()},[d.isOpenDelayedRef,T,_]),onTriggerLeave:h.useCallback(()=>{y?A():(window.clearTimeout(x.current),x.current=0)},[A,y]),onOpen:_,onClose:A,disableHoverableContent:y,children:r})})};VW.displayName=ex;var LO="TooltipTrigger",YW=h.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,s=Nx(LO,r),i=vk(LO,r),o=qN(r),l=h.useRef(null),d=Ar(t,l,s.onTriggerChange),u=h.useRef(!1),m=h.useRef(!1),p=h.useCallback(()=>u.current=!1,[]);return h.useEffect(()=>()=>document.removeEventListener("pointerup",p),[p]),a.jsx(LN,{asChild:!0,...o,children:a.jsx(dr.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...n,ref:d,onPointerMove:Bt(e.onPointerMove,g=>{g.pointerType!=="touch"&&!m.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),m.current=!0)}),onPointerLeave:Bt(e.onPointerLeave,()=>{s.onTriggerLeave(),m.current=!1}),onPointerDown:Bt(e.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",p,{once:!0})}),onFocus:Bt(e.onFocus,()=>{u.current||s.onOpen()}),onBlur:Bt(e.onBlur,s.onClose),onClick:Bt(e.onClick,s.onClose)})})});YW.displayName=LO;var Nk="TooltipPortal",[NRe,SRe]=zN(Nk,{forceMount:void 0}),XW=e=>{const{__scopeTooltip:t,forceMount:r,children:n,container:s}=e,i=Nx(Nk,t);return a.jsx(NRe,{scope:t,forceMount:r,children:a.jsx(Gs,{present:r||i.open,children:a.jsx(sx,{asChild:!0,container:s,children:n})})})};XW.displayName=Nk;var nh="TooltipContent",QW=h.forwardRef((e,t)=>{const r=SRe(nh,e.__scopeTooltip),{forceMount:n=r.forceMount,side:s="top",...i}=e,o=Nx(nh,e.__scopeTooltip);return a.jsx(Gs,{present:n||o.open,children:o.disableHoverableContent?a.jsx(ZW,{side:s,...i,ref:t}):a.jsx(ERe,{side:s,...i,ref:t})})}),ERe=h.forwardRef((e,t)=>{const r=Nx(nh,e.__scopeTooltip),n=vk(nh,e.__scopeTooltip),s=h.useRef(null),i=Ar(t,s),[o,l]=h.useState(null),{trigger:d,onClose:u}=r,m=s.current,{onPointerInTransitChange:p}=n,g=h.useCallback(()=>{l(null),p(!1)},[p]),x=h.useCallback((y,N)=>{const v=y.currentTarget,S={x:y.clientX,y:y.clientY},E=_Re(S,v.getBoundingClientRect()),C=CRe(S,E),_=TRe(N.getBoundingClientRect()),A=RRe([...C,..._]);l(A),p(!0)},[p]);return h.useEffect(()=>()=>g(),[g]),h.useEffect(()=>{if(d&&m){const y=v=>x(v,m),N=v=>x(v,d);return d.addEventListener("pointerleave",y),m.addEventListener("pointerleave",N),()=>{d.removeEventListener("pointerleave",y),m.removeEventListener("pointerleave",N)}}},[d,m,x,g]),h.useEffect(()=>{if(o){const y=N=>{const v=N.target,S={x:N.clientX,y:N.clientY},E=d?.contains(v)||m?.contains(v),C=!ORe(S,o);E?g():C&&(g(),u())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[d,m,o,u,g]),a.jsx(ZW,{...e,ref:i})}),[jRe,wRe]=zN(ex,{isInside:!1}),ARe=xRe("TooltipContent"),ZW=h.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=e,d=Nx(nh,r),u=qN(r),{onClose:m}=d;return h.useEffect(()=>(document.addEventListener(MO,m),()=>document.removeEventListener(MO,m)),[m]),h.useEffect(()=>{if(d.trigger){const p=g=>{g.target?.contains(d.trigger)&&m()};return window.addEventListener("scroll",p,{capture:!0}),()=>window.removeEventListener("scroll",p,{capture:!0})}},[d.trigger,m]),a.jsx(ax,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:p=>p.preventDefault(),onDismiss:m,children:a.jsxs(hk,{"data-state":d.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[a.jsx(ARe,{children:n}),a.jsx(jRe,{scope:r,isInside:!0,children:a.jsx(wTe,{id:d.contentId,role:"tooltip",children:s||n})})]})})});QW.displayName=nh;var JW="TooltipArrow",eV=h.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,s=qN(r);return wRe(JW,r).isInside?null:a.jsx(gk,{...s,...n,ref:t})});eV.displayName=JW;function _Re(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(r,n,s,i)){case i:return"left";case s:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function CRe(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function TRe(e){const{top:t,right:r,bottom:n,left:s}=e;return[{x:s,y:t},{x:r,y:t},{x:r,y:n},{x:s,y:n}]}function ORe(e,t){const{x:r,y:n}=e;let s=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],d=t[o],u=l.x,m=l.y,p=d.x,g=d.y;m>n!=g>n&&r<(p-u)*(n-m)/(g-m)+u&&(s=!s)}return s}function RRe(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),kRe(t)}function kRe(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const s=e[n];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))t.pop();else break}t.push(s)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const s=e[n];for(;r.length>=2;){const i=r[r.length-1],o=r[r.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))r.pop();else break}r.push(s)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var Sk=WW,Ek=VW,jk=YW,wk=XW,Ak=QW,_k=eV;function PRe({delayDuration:e=0,...t}){return a.jsx(Sk,{"data-slot":"tooltip-provider",delayDuration:e,...t})}function DRe({...e}){return a.jsx(PRe,{children:a.jsx(Ek,{"data-slot":"tooltip",...e})})}function IRe({...e}){return a.jsx(jk,{"data-slot":"tooltip-trigger",...e})}function MRe({className:e,sideOffset:t=0,children:r,...n}){return a.jsx(wk,{children:a.jsxs(Ak,{"data-slot":"tooltip-content",sideOffset:t,className:ue("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...n,children:[r,a.jsx(_k,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}function nf({help:e,onActionClick:t,actionLabel:r="  "}){return a.jsxs(DRe,{children:[a.jsx(IRe,{asChild:!0,children:a.jsx("button",{type:"button",className:"inline-flex h-4 w-4 items-center justify-center rounded-full border border-gray-300 bg-white text-gray-500 hover:text-gray-700","aria-label":"  ",children:a.jsx(hm,{className:"h-3 w-3"})})}),a.jsx(MRe,{sideOffset:8,className:"max-w-[300px] rounded-lg border border-gray-200 bg-white px-3 py-2 text-gray-800 shadow-lg",children:a.jsxs("div",{className:"space-y-1.5 text-[11px] leading-relaxed",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold",children:":"})," ",e.definition]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold",children:" :"})," ",e.scope]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold",children:":"})," ",e.period]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold",children:":"})," ",e.threshold]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold",children:":"})," ",e.interpretation]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold",children:" :"})," ",e.nextAction]}),t?a.jsx("button",{type:"button",onClick:t,className:"mt-1 inline-flex h-6 items-center rounded border border-blue-200 bg-blue-50 px-2 text-[10px] font-medium text-blue-700 hover:bg-blue-100",children:r}):null]})})]})}function LRe({label:e,help:t,onActionClick:r,className:n}){return a.jsxs("span",{className:`inline-flex items-center gap-1.5 ${n??""}`,children:[a.jsx("span",{children:e}),a.jsx(nf,{help:t,onActionClick:r})]})}function $Re(e,t){const r={scope:`${t.scopeLabel}  `,period:`${t.rangeLabel} `};switch(e){case"slaRisk":return{definition:"     ",scope:r.scope,period:r.period,threshold:` ${t.longWaitDays}   `,interpretation:"   ",nextAction:"      ",actionTab:"bottleneck"};case"unprocessedWork":return{definition:"     ",scope:r.scope,period:`${t.rangeLabel} `,threshold:` ${t.longWaitDays}   `,interpretation:"       ",nextAction:"/    ",actionTab:"actions"};case"examDelay":return{definition:"     ",scope:r.scope,period:r.period,threshold:`  ${t.longWaitDays}`,interpretation:"  ",nextAction:"      ",actionTab:"bottleneck"};case"followupDelay":return{definition:"    ",scope:r.scope,period:r.period,threshold:` ${t.longWaitDays}    `,interpretation:"    ",nextAction:"/    ",actionTab:"actions"};case"conversionGap":return{definition:"    (-)",scope:r.scope,period:r.period,threshold:"    ",interpretation:"    ",nextAction:"    ",actionTab:"reports"};case"top5Share":return{definition:" 5    ",scope:r.scope,period:r.period,threshold:"       ",interpretation:"     ",nextAction:"/     ",actionTab:"actions"};case"insightHeadline":default:return{definition:"      ",scope:r.scope,period:r.period,threshold:` ${t.longWaitDays}  `,interpretation:"      ",nextAction:"      ",actionTab:"bottleneck"}}}const Lc={unprocessedWork:{user:" ( )",technical:"Queue backlog /    "},workQueue:{user:" ",technical:" Queue"},queuePressure:{user:"  ",technical:"Queue pressure"},deadlineOverdue:{user:"  ",technical:"Long-wait backlog"},sla:{user:" ( )",technical:"SLA (  )"},examDelay:{user:"  ()",technical:"Differential exam delay hotspot"},conversionGap:{user:"   ",technical:"Screening-to-diagnostic conversion gap"},followupDelay:{user:"  ",technical:"Recontact delay"},contactUnsuccessful:{user:" ",technical:"Contact failure"}},FRe=[[/ \( \)/g,Lc.unprocessedWork.user],[//g,Lc.workQueue.user],[/ /g," "],[/ /g,Lc.queuePressure.user],[//g,Lc.deadlineOverdue.user],[/\( \)/g,Lc.examDelay.user],[/\(\)/g,Lc.conversionGap.user],[/ /g,Lc.followupDelay.user],[/ /g,Lc.contactUnsuccessful.user]];function j_(e){return Lc[e]}function w_(e){return FRe.reduce((t,[r,n])=>t.replace(r,n),e)}const URe=[{causeKey:"staff_shortage",ownerOrg:"center",actionable:!0,regionalNeed:"high",escalationPath:[{toOrgRole:"centerLead",channel:"internal",slaHours:12},{toOrgRole:"regionalDutyOfficer",channel:"email",slaHours:24}],defaultActions:[{title:"   ",steps:[" 2    ","48  "],expectedEffectTags:["SLA "," "]}]},{causeKey:"contact_failure",ownerOrg:"center",actionable:!0,regionalNeed:"high",escalationPath:[{toOrgRole:"centerLead",channel:"internal",slaHours:12},{toOrgRole:"regionalCallOps",channel:"sms",slaHours:24}],defaultActions:[{title:"  ",steps:["  ","   "],expectedEffectTags:["SLA "," "]}]},{causeKey:"hospital_slot_delay",ownerOrg:"hospital",actionable:!1,regionalNeed:"high",escalationPath:[{toOrgRole:"hospitalLead",channel:"email",slaHours:12},{toOrgRole:"regionalPartnershipManager",channel:"internal",slaHours:24}],defaultActions:[{title:"   ",steps:["    ","   "],expectedEffectTags:["  ","SLA "]}]},{causeKey:"data_gap",ownerOrg:"system",actionable:!0,regionalNeed:"medium",escalationPath:[{toOrgRole:"systemOps",channel:"internal",slaHours:24},{toOrgRole:"regionalDataSteward",channel:"email",slaHours:48}],defaultActions:[{title:"   ",steps:["  ","   "],expectedEffectTags:[" "]}]},{causeKey:"external_dependency",ownerOrg:"external",actionable:!1,regionalNeed:"medium",escalationPath:[{toOrgRole:"externalPartner",channel:"email",slaHours:24},{toOrgRole:"regionalDutyOfficer",channel:"internal",slaHours:48}],defaultActions:[{title:"    ",steps:["    ","   "],expectedEffectTags:[" "]}]}],BRe=[{kpiKey:"regionalSla",thresholds:{watch:12,critical:18},trendRules:[{type:"increasing_streak",metric:"ratio",days:3,deltaMin:1.5},{type:"no_decrease",metric:"ratio",days:5}]},{kpiKey:"regionalDxDelayHotspot",thresholds:{watch:30,critical:45},trendRules:[{type:"increasing_streak",metric:"count",days:3,deltaMin:5},{type:"rebound",metric:"count",days:4}]},{kpiKey:"regionalQueueRisk",thresholds:{watch:180,critical:260},trendRules:[{type:"increasing_streak",metric:"count",days:3,deltaMin:20},{type:"no_decrease",metric:"count",days:5}]},{kpiKey:"regionalRecontact",thresholds:{watch:14,critical:20},trendRules:[{type:"increasing_streak",metric:"ratio",days:4,deltaMin:1.2},{type:"rebound",metric:"ratio",days:4}]}],t8=[{regionKey:"seoul",ownerOrg:"center",assigneeId:"center-lead-seoul",assigneeRole:" ",defaultDueSlaHours:48},{regionKey:"seoul",ownerOrg:"hospital",assigneeId:"hospital-partner-seoul",assigneeRole:"  ",defaultDueSlaHours:72},{regionKey:"seoul",ownerOrg:"system",assigneeId:"system-ops-core",assigneeRole:" ",defaultDueSlaHours:72},{regionKey:"seoul",ownerOrg:"external",assigneeId:"external-link-manager",assigneeRole:"  ",defaultDueSlaHours:96}];function Ck(e){return URe.find(t=>t.causeKey===e)}function Tk(e){const t=t8.find(r=>r.regionKey===e.regionKey&&r.ownerOrg===e.ownerOrg&&(r.areaKey==null||r.areaKey===e.areaKey)&&(r.causeKey==null||r.causeKey===e.causeKey))??t8.find(r=>r.regionKey===e.regionKey&&r.ownerOrg===e.ownerOrg);return t||{regionKey:e.regionKey,ownerOrg:e.ownerOrg,assigneeId:"regional-duty-officer",assigneeRole:"  ",defaultDueSlaHours:72}}function GRe(e){return BRe.find(t=>t.kpiKey===e)}function r8(e){return`${e.kpiKey}|${e.areaLabel}|${e.causeKey}|${e.stageKey}|${e.period}`}function HRe(e,t="open"){const r=e.selectedRegionSgg??`${e.regionLabel} `;return[{id:"todo-sla-risk",title:"SLA    ",reason:`   ${e.alertSummary.slaAtRiskRegions}  `,target:`${r}   `,recommendedAction:" 2    ",dueSlaHours:24,status:t,relatedQueryState:{regionKey:e.regionKey,period:e.selectedRange,kpiKey:"regionalSla",areaKey:e.selectedRegionSgg,layer:"RISK"}},{id:"todo-dx-delay",title:"    ",reason:`  ${Math.round(e.avgExamDelayDays)},  ${e.longWaitDays} `,target:`${r}   `,recommendedAction:"       ",dueSlaHours:24,status:t,relatedQueryState:{regionKey:e.regionKey,period:e.selectedRange,kpiKey:"regionalDxDelayHotspot",areaKey:e.selectedRegionSgg,layer:"BOTTLENECK"}},{id:"todo-followup",title:"   ",reason:`   ${e.overdueFollowups.toLocaleString()}`,target:`${r}    `,recommendedAction:"     ",dueSlaHours:48,status:t,relatedQueryState:{regionKey:e.regionKey,period:e.selectedRange,kpiKey:"regionalRecontact",areaKey:e.selectedRegionSgg,layer:"BOTTLENECK"}}]}function KRe(e){const t=e.selectedRegionSgg?[e.selectedRegionSgg]:e.districtOptions.slice(0,Math.min(4,Math.max(1,e.districtOptions.length))),r=[{kpiKey:"regionalSla",stageKey:"Stage1",causeKey:"staff_shortage",ruleId:"RULE-SLA-15",ruleLabel:"SLA  15% "},{kpiKey:"regionalDxDelayHotspot",stageKey:"Stage2",causeKey:"hospital_slot_delay",ruleId:"RULE-DX-7D",ruleLabel:"  7 "},{kpiKey:"regionalAdTransitionHotspot",stageKey:"Stage3",causeKey:"contact_failure",ruleId:"RULE-AD-HR-5",ruleLabel:"AD    5 "}],n=new Set(e.existingOpenInterventions.filter(i=>i.status==="TODO"||i.status==="IN_PROGRESS").map(i=>r8({kpiKey:i.kpiKey,areaLabel:i.areaLabel,causeKey:i.causeKey,stageKey:i.stageKey,period:i.period}))),s=[];return t.forEach((i,o)=>{r.forEach((l,d)=>{const u=Ck(l.causeKey),m=Tk({regionKey:e.regionKey,areaKey:i,causeKey:l.causeKey,ownerOrg:u?.ownerOrg??"regional"}),p=GRe(l.kpiKey),g=r8({kpiKey:l.kpiKey,areaLabel:i,causeKey:l.causeKey,stageKey:l.stageKey,period:e.selectedRange}),x=n.has(g);s.push({previewId:`preview-${o}-${d}`,dedupeKey:g,regionLabel:i,kpiKey:l.kpiKey,stageKey:l.stageKey,causeKey:l.causeKey,ownerOrg:u?.ownerOrg??"regional",assigneeId:m.assigneeId,assigneeRole:m.assigneeRole,dueSlaHours:p?.thresholds.critical?Math.max(24,Math.round(m.defaultDueSlaHours)):m.defaultDueSlaHours,blockedByDuplicate:x,blockedReason:x?" open  ":void 0,ruleId:l.ruleId,ruleLabel:l.ruleLabel})})}),s}const zRe={regionalSla:"LOAD",regionalQueueRisk:"BOTTLENECK",regionalRecontact:"BOTTLENECK",regionalDataReadiness:"LOAD",regionalGovernance:"LOAD",regionalAdTransitionHotspot:"RISK",regionalDxDelayHotspot:"BOTTLENECK",regionalScreenToDxRate:"GAP"},Qb={RISK:"regionalAdTransitionHotspot",BOTTLENECK:"regionalDxDelayHotspot",GAP:"regionalScreenToDxRate",LOAD:"regionalQueueRisk"},qRe={regionalSla:" ( )",regionalQueueRisk:" ( )",regionalRecontact:"  ",regionalDataReadiness:"  ",regionalGovernance:" ",regionalAdTransitionHotspot:"  ",regionalDxDelayHotspot:"  ()",regionalScreenToDxRate:"   "},WRe={regionalSla:"slaRisk",regionalQueueRisk:"unprocessedWork",regionalRecontact:"followupDelay",regionalDataReadiness:"unprocessedWork",regionalGovernance:"unprocessedWork",regionalAdTransitionHotspot:"slaRisk",regionalDxDelayHotspot:"examDelay",regionalScreenToDxRate:"conversionGap"};function VRe(){const e=h.useRef(null),[t,r]=h.useState({width:typeof window<"u"?window.innerWidth:1920,height:typeof window<"u"?window.innerHeight:1080}),n=h.useRef(null);return h.useEffect(()=>{const s=e.current;if(!s)return;const i=()=>{n.current&&cancelAnimationFrame(n.current),n.current=requestAnimationFrame(()=>{const l=s.getBoundingClientRect();r(d=>d.width===l.width&&d.height===l.height?d:{width:l.width,height:l.height})})},o=new ResizeObserver(i);return o.observe(s),window.addEventListener("resize",i,{passive:!0}),i(),()=>{o.disconnect(),window.removeEventListener("resize",i),n.current&&cancelAnimationFrame(n.current)}},[]),[e,t]}const YRe=e=>{let t=0;for(let r=0;r<e.length;r+=1)t=t*31+e.charCodeAt(r)>>>0;return t},kt=(e,t,r)=>t+(r-t)*(YRe(e)%1e3/1e3),$O={week:1,month:1.1,quarter:1.25},XRe={"24h":"week","7d":"week","30d":"month","90d":"quarter"},Op={"24h":"24h","7d":"7","30d":"30","90d":"90"},tV={"24h":.35,"7d":1,"30d":2.8,"90d":6.8},rV={"24h":.85,"7d":1,"30d":1.25,"90d":1.45},nV={"24h":-.4,"7d":0,"30d":.5,"90d":.8},Qr={regionalSla:[35,260],regionalQueueRisk:[40,320],regionalRecontact:[3,21],regionalDataReadiness:[4,24],regionalGovernance:[22,78],regionalAdTransitionHotspot:[18,92],regionalDxDelayHotspot:[8,68],regionalScreenToDxRate:[34,91]},QRe={regionalSla:a.jsx(ss,{className:"h-4 w-4"}),regionalQueueRisk:a.jsx(cm,{className:"h-4 w-4"}),regionalRecontact:a.jsx(Fs,{className:"h-4 w-4"}),regionalDataReadiness:a.jsx(id,{className:"h-4 w-4"}),regionalGovernance:a.jsx(Qo,{className:"h-4 w-4"}),regionalAdTransitionHotspot:a.jsx(fg,{className:"h-4 w-4"}),regionalDxDelayHotspot:a.jsx(w1,{className:"h-4 w-4"}),regionalScreenToDxRate:a.jsx(NU,{className:"h-4 w-4"})},A_={density:.45,transition:.35,delta:.2},__={wait:.45,delayed:.3,backlog:.25},C_={gapRate:.45,deltaGap:.35,support:.2},n8={seoul:["","","","","","","","","","","","","","","","","","","","","","","","",""],busan:["","","","","","","","","","","","","","","",""],daegu:["","","","","","","",""],incheon:["","","","","","","","","",""],gwangju:["","","","",""],daejeon:["","","","",""],ulsan:["","","","",""],sejong:[""],gyeonggi:["","","","","","","","","","","","","","","","","","","",""],gangwon:["","","","","","","","","",""],chungbuk:["","","","","","","","","",""],chungnam:["","","","","","","","","",""],jeonbuk:["","","","","","","","","",""],jeonnam:["","","","","","","","","",""],gyeongbuk:["","","","","","","","","",""],gyeongnam:["","","","","","","","","",""],jeju:["",""]},ZRe=["08-10","10-12","12-14","14-16","16-18","18-20"];function El(e){return String(e??"").trim().replace(/\s+/g,"").replace(/[()]/g,"")}function j0(e){return e==="REGION"?"SIGUNGU":"EUPMYEONDONG"}function Zb(e,t){const r=lm[e];return r.unit===""?`${Math.round(t).toLocaleString()}`:r.unit===""?`${Math.round(t)}`:r.unit===""?`${Math.round(t)}`:`${t.toFixed(1)}%`}function uo(e){const t=new Map;return e.forEach(r=>{r.forEach(n=>{t.set(n.name,(t.get(n.name)??0)+n.value)})}),[...t.entries()].map(([r,n])=>({name:r,value:Number(n.toFixed(1))})).sort((r,n)=>n.value-r.value)}function Ic(e,t,r){if(!Number.isFinite(e)||!Number.isFinite(t)||!Number.isFinite(r)||r<=t)return .5;const n=(e-t)/(r-t);return Math.max(0,Math.min(1,n))}function $p(e,t,r,n,s){const i=`${t}-${r}-${e}`,o=$O[r],l=tV[n]*o,d=rV[n]*o,u=nV[n],m=Math.round(kt(`${i}-volume`,120,1100)*l),p=Math.round(kt(`${i}-inflow`,Qr.regionalSla[0],Qr.regionalSla[1])*l),g=Math.round(kt(`${i}-queue`,Qr.regionalQueueRisk[0],Qr.regionalQueueRisk[1])*d),x=Number(Math.max(Qr.regionalRecontact[0],Math.min(Qr.regionalRecontact[1],kt(`${i}-sla-risk`,Qr.regionalRecontact[0],Qr.regionalRecontact[1])+u)).toFixed(1)),y=Number(Math.max(Qr.regionalDataReadiness[0],Math.min(Qr.regionalDataReadiness[1],kt(`${i}-recontact-need`,Qr.regionalDataReadiness[0],Qr.regionalDataReadiness[1])+u)).toFixed(1)),N=Number(Math.max(Qr.regionalGovernance[0],Math.min(Qr.regionalGovernance[1],kt(`${i}-center-risk`,Qr.regionalGovernance[0],Qr.regionalGovernance[1])+u*4)).toFixed(1)),v=Number(Math.max(Qr.regionalAdTransitionHotspot[0],Math.min(Qr.regionalAdTransitionHotspot[1],kt(`${i}-ad-density`,Qr.regionalAdTransitionHotspot[0],Qr.regionalAdTransitionHotspot[1])+u*3)).toFixed(1)),S=Math.round(kt(`${i}-ad-highrisk`,28,240)*l),E=Math.round(kt(`${i}-ad-tr30`,8,88)*l),C=Math.round(kt(`${i}-ad-tr90`,22,210)*l),_=Number(Math.max(Qr.regionalDxDelayHotspot[0],Math.min(Qr.regionalDxDelayHotspot[1],kt(`${i}-dx-wait`,Qr.regionalDxDelayHotspot[0],Qr.regionalDxDelayHotspot[1])+u*2.5)).toFixed(1)),A=Number(Math.max(.04,Math.min(.42,kt(`${i}-dx-delayed-ratio`,.08,.36)+u*.01)).toFixed(3)),T=Math.round(kt(`${i}-dx-backlog`,20,210)*d),R=Number(Math.max(Qr.regionalScreenToDxRate[0],Math.min(Qr.regionalScreenToDxRate[1],kt(`${i}-screen-dx-rate`,Qr.regionalScreenToDxRate[0],Qr.regionalScreenToDxRate[1])-u)).toFixed(1)),I=Number(kt(`${i}-screen-dx-recontact`,6,24).toFixed(1)),k=Number(kt(`${i}-screen-dx-delay`,8,46).toFixed(1)),w={:kt(`${i}-sla-contact`,12,34),:kt(`${i}-sla-recontact`,10,26),L2:kt(`${i}-sla-l2`,8,20),"2":kt(`${i}-sla-s2`,10,24),"3":kt(`${i}-sla-s3`,8,20)},L=Object.values(w).reduce((Ne,fe)=>Ne+fe,0),H=Object.entries(w).map(([Ne,fe])=>({name:Ne,value:Number((fe/L*100).toFixed(1))})),B=[{name:" ",value:Math.round(kt(`${i}-qt-recontact`,18,165)*d)},{name:"L2 ",value:Math.round(kt(`${i}-qt-l2`,14,132)*d)},{name:"2 ",value:Math.round(kt(`${i}-qt-s2`,10,120)*d)},{name:"3 ",value:Math.round(kt(`${i}-qt-s3`,8,95)*d)}],M=[{name:" ",value:Math.round(kt(`${i}-cause-contact`,10,65)*d)},{name:"  ",value:Math.round(kt(`${i}-cause-staff`,8,52)*d)},{name:" ",value:Math.round(kt(`${i}-cause-data`,6,44)*d)},{name:"2/3 ",value:Math.round(kt(`${i}-cause-stage`,7,48)*d)},{name:" ",value:Math.round(kt(`${i}-cause-booking`,5,36)*d)}].sort((Ne,fe)=>fe.value-Ne.value),G=[{name:" ",value:Math.round(kt(`${i}-rr-contact`,12,58)*d)},{name:"",value:Math.round(kt(`${i}-rr-noanswer`,18,82)*d)},{name:" ",value:Math.round(kt(`${i}-rr-time`,10,52)*d)}].sort((Ne,fe)=>fe.value-Ne.value),$=["D-6","D-5","D-4","D-3","D-2","D-1","D0"].map((Ne,fe)=>({day:Ne,value:Number(kt(`${i}-rt-${fe}`,6,40).toFixed(1))})),z=ZRe.map((Ne,fe)=>({slot:Ne,successRate:Number(kt(`${i}-slot-rate-${fe}`,42,88).toFixed(1)),attempts:Math.round(kt(`${i}-slot-attempt-${fe}`,18,120)*d)})),U=[{name:" ",value:Math.round(kt(`${i}-mf-phone`,10,64)*d)},{name:" ",value:Math.round(kt(`${i}-mf-guardian`,8,44)*d)},{name:" ",value:Math.round(kt(`${i}-mf-condition`,7,40)*d)},{name:"  ",value:Math.round(kt(`${i}-mf-history`,6,36)*d)}].sort((Ne,fe)=>fe.value-Ne.value),Z=[{name:"0-1",value:Math.round(kt(`${i}-lead-0`,22,96)*d)},{name:"2-3",value:Math.round(kt(`${i}-lead-1`,16,76)*d)},{name:"4-7",value:Math.round(kt(`${i}-lead-2`,10,58)*d)},{name:"8+",value:Math.round(kt(`${i}-lead-3`,6,42)*d)}],re=[{name:" ",value:Math.round(kt(`${i}-gov-owner`,5,32)*d)},{name:"  ",value:Math.round(kt(`${i}-gov-proof`,6,36)*d)},{name:"  ",value:Math.round(kt(`${i}-gov-log`,7,40)*d)}].sort((Ne,fe)=>fe.value-Ne.value),X=[{status:"",value:Math.round(kt(`${i}-gact-open`,8,48)*d)},{status:"",value:Math.round(kt(`${i}-gact-progress`,6,36)*d)},{status:"",value:Math.round(kt(`${i}-gact-done`,4,30)*d)}],F=[{name:" ",value:S},{name:" 30  ",value:E},{name:"   ",value:Number((v-45).toFixed(1))}],te=[{name:" ",value:_},{name:" ",value:Number((A*100).toFixed(1))},{name:" ",value:T}],ne=[{name:" ",value:Number((100-R).toFixed(1))},{name:" ",value:I},{name:" ",value:k}],se={stage1SignalDelta:Number(kt(`${i}-s1-signal`,-18,24).toFixed(1)),stage1QueueDelta:Math.round(kt(`${i}-s1-queue`,-14,36)*d),stage2SignalDelta:Number(kt(`${i}-s2-signal`,-16,22).toFixed(1)),stage2QueueDelta:Math.round(kt(`${i}-s2-queue`,-12,32)*d),stage3SignalDelta:Number(kt(`${i}-s3-signal`,-12,18).toFixed(1)),stage3QueueDelta:Math.round(kt(`${i}-s3-queue`,-10,26)*d)};return{regionId:s??e,name:e,volume:m,kpi:{regionalSla:p,regionalQueueRisk:g,regionalRecontact:x,regionalDataReadiness:y,regionalGovernance:N,regionalAdTransitionHotspot:v,regionalDxDelayHotspot:_,regionalScreenToDxRate:R},mapMetric:{regionalSla:p,regionalQueueRisk:g,regionalRecontact:x,regionalDataReadiness:y,regionalGovernance:N,regionalAdTransitionHotspot:v,regionalDxDelayHotspot:_,regionalScreenToDxRate:R},adTransitionSignal:{regionId:`${t}-${e}`,regionName:e,highRiskCount:S,transition30d:E,transition90d:C,densityScore:v,deltaFromAvg:Number((v-45).toFixed(1))},differentialDelay:{regionId:`${t}-${e}`,regionName:e,avgWaitDays:_,delayedRatio:A,backlogCount:T,deltaFromAvg:Number((_-24).toFixed(1))},stageConversionRate:{regionId:`${t}-${e}`,regionName:e,conversionRate:Number((R/100).toFixed(3)),deltaFromRegional:Number((R-64).toFixed(1))},adTransitionDrivers:F,dxDelayDrivers:te,screenToDxDrivers:ne,policyImpactLocal:Number(kt(`${i}-policy-impact`,42,88).toFixed(1)),slaStageContribution:H,queueTypeBacklog:B,queueCauseTop:M,recontactReasons:G,recontactTrend:$,recontactSlots:z,missingFields:U,collectionLeadtime:Z,governanceMissingTypes:re,governanceActionStatus:X,stageImpact:se}}function JRe(e){if(!e.length)return $p("","empty","week","7d","empty");const t=e.reduce((x,y)=>x+y.volume,0),r=x=>t>0?x.volume/t:1/e.length,n=x=>Number(e.reduce((y,N)=>y+N.kpi[x]*r(N),0).toFixed(1)),s=x=>Number(e.reduce((y,N)=>y+N.mapMetric[x]*r(N),0).toFixed(1)),i=new Map;e.forEach(x=>{x.recontactSlots.forEach(y=>{const N=i.get(y.slot)??{attempts:0,weightedSuccess:0};i.set(y.slot,{attempts:N.attempts+y.attempts,weightedSuccess:N.weightedSuccess+y.successRate*y.attempts})})});const o=[...i.entries()].map(([x,y])=>({slot:x,attempts:y.attempts,successRate:y.attempts>0?Number((y.weightedSuccess/y.attempts).toFixed(1)):0})),l=e[0].recontactTrend.length,d=Array.from({length:l},(x,y)=>{const N=e[0].recontactTrend[y].day,v=Number(e.reduce((S,E)=>S+E.recontactTrend[y].value*r(E),0).toFixed(1));return{day:N,value:v}}),u={stage1SignalDelta:Number(e.reduce((x,y)=>x+y.stageImpact.stage1SignalDelta*r(y),0).toFixed(1)),stage1QueueDelta:Math.round(e.reduce((x,y)=>x+y.stageImpact.stage1QueueDelta*r(y),0)),stage2SignalDelta:Number(e.reduce((x,y)=>x+y.stageImpact.stage2SignalDelta*r(y),0).toFixed(1)),stage2QueueDelta:Math.round(e.reduce((x,y)=>x+y.stageImpact.stage2QueueDelta*r(y),0)),stage3SignalDelta:Number(e.reduce((x,y)=>x+y.stageImpact.stage3SignalDelta*r(y),0).toFixed(1)),stage3QueueDelta:Math.round(e.reduce((x,y)=>x+y.stageImpact.stage3QueueDelta*r(y),0))},m=Number(e.reduce((x,y)=>x+y.adTransitionSignal.densityScore*r(y),0).toFixed(1)),p=Number(e.reduce((x,y)=>x+y.differentialDelay.avgWaitDays*r(y),0).toFixed(1)),g=Number(e.reduce((x,y)=>x+y.stageConversionRate.conversionRate*r(y),0).toFixed(3));return{regionId:"regional-avg",name:" ",volume:t,kpi:{regionalSla:n("regionalSla"),regionalQueueRisk:n("regionalQueueRisk"),regionalRecontact:n("regionalRecontact"),regionalDataReadiness:n("regionalDataReadiness"),regionalGovernance:n("regionalGovernance"),regionalAdTransitionHotspot:n("regionalAdTransitionHotspot"),regionalDxDelayHotspot:n("regionalDxDelayHotspot"),regionalScreenToDxRate:n("regionalScreenToDxRate")},mapMetric:{regionalSla:s("regionalSla"),regionalQueueRisk:s("regionalQueueRisk"),regionalRecontact:s("regionalRecontact"),regionalDataReadiness:s("regionalDataReadiness"),regionalGovernance:s("regionalGovernance"),regionalAdTransitionHotspot:s("regionalAdTransitionHotspot"),regionalDxDelayHotspot:s("regionalDxDelayHotspot"),regionalScreenToDxRate:s("regionalScreenToDxRate")},adTransitionSignal:{regionId:"regional-avg",regionName:" ",highRiskCount:Math.round(e.reduce((x,y)=>x+y.adTransitionSignal.highRiskCount,0)),transition30d:Math.round(e.reduce((x,y)=>x+y.adTransitionSignal.transition30d,0)),transition90d:Math.round(e.reduce((x,y)=>x+(y.adTransitionSignal.transition90d??0),0)),densityScore:m,deltaFromAvg:0},differentialDelay:{regionId:"regional-avg",regionName:" ",avgWaitDays:p,delayedRatio:Number(e.reduce((x,y)=>x+y.differentialDelay.delayedRatio*r(y),0).toFixed(3)),backlogCount:Math.round(e.reduce((x,y)=>x+y.differentialDelay.backlogCount,0)),deltaFromAvg:0},stageConversionRate:{regionId:"regional-avg",regionName:" ",conversionRate:g,bestRate:Number(Math.max(...e.map(x=>x.stageConversionRate.conversionRate)).toFixed(3)),worstRate:Number(Math.min(...e.map(x=>x.stageConversionRate.conversionRate)).toFixed(3)),deltaFromRegional:0},adTransitionDrivers:uo(e.map(x=>x.adTransitionDrivers)),dxDelayDrivers:uo(e.map(x=>x.dxDelayDrivers)),screenToDxDrivers:uo(e.map(x=>x.screenToDxDrivers)),policyImpactLocal:Number(e.reduce((x,y)=>x+y.policyImpactLocal*r(y),0).toFixed(1)),slaStageContribution:uo(e.map(x=>x.slaStageContribution)),queueTypeBacklog:uo(e.map(x=>x.queueTypeBacklog)),queueCauseTop:uo(e.map(x=>x.queueCauseTop)),recontactReasons:uo(e.map(x=>x.recontactReasons)),recontactTrend:d,recontactSlots:o,missingFields:uo(e.map(x=>x.missingFields)),collectionLeadtime:uo(e.map(x=>x.collectionLeadtime)),governanceMissingTypes:uo(e.map(x=>x.governanceMissingTypes)),governanceActionStatus:uo(e.map(x=>x.governanceActionStatus.map(y=>({name:y.status,value:y.value})))).map(x=>({status:x.name,value:x.value})),stageImpact:u}}function FO(e){return lm[e]?.direction??"higherWorse"}function e3e(e){return e==="REGION"?"sido":e==="SIGUNGU"?"sigungu":"center"}function T_(e,t){const r=lm[e];return r?.unit===""?`${t>0?"+":""}${Math.round(t)}`:r?.unit===""?`${t>0?"+":""}${Math.round(t)}`:r?.unit===""?`${t>0?"+":""}${Math.round(t)}`:`${t>0?"+":""}${t.toFixed(1)}%p`}function t3e(e,t){return t===""?`${Math.round(e).toLocaleString()}`:t===""?`${Math.round(e)}`:`${Math.round(e).toLocaleString()}`}function r3e(e,t){const r=e>0?"+":"";return t===""?`${r}${Math.round(e)}`:t===""?`${r}${Math.round(e)}`:`${r}${Math.round(e)}`}function n3e(e,t,r){if(!e.length)return[];const n=Math.min(...e),s=Math.max(...e),i=Math.max(1,e.length-1);return e.map((o,l)=>{const d=l/i*t,u=s===n?.5:(o-n)/(s-n),m=r-u*(r-6)-3;return{x:d,y:m}})}function a3e(e,t,r){if(!r)return"normal";const s=FO(e)==="higherBetter"?r-t:t-r;return s>=8?"warning":s>=3?"attention":"normal"}function s3e(e,t,r,n){return[`${e}: ${t}`,` : ${r}`,n]}function i3e({region:e,selectedKpiKey:t,selectedRegionSgg:r,selectedRange:n,onSelectedKpiKeyChange:s,onSelectedRegionSggChange:i,onSelectedRangeChange:o,onCreateIntervention:l,onNavigateModule:d}){const[u,m]=h.useState("week"),[p,g]=h.useState("7d"),[x,y]=h.useState("regionalSla"),[N,v]=h.useState("geomap"),[S,E]=VRe(),[C,_]=h.useState(null),[A,T]=h.useState(null),[R,I]=h.useState(void 0),[k,w]=h.useState(void 0),[L,H]=h.useState({}),[B,M]=h.useState(!1),[G,$]=h.useState(!1),[z,U]=h.useState(null),[Z,re]=h.useState(!1),[X,F]=h.useState("STAFFING"),[te,ne]=h.useState(!1),[se,Ne]=h.useState({}),[fe,we]=h.useState("Initial"),ve=h.useRef(""),Oe=h.useRef(null),Fe=h.useRef(""),oe=h.useRef(void 0),le=h.useRef(r),ge=h.useRef(i),_e=h.useRef({}),ee=fe==="RegionChange";h.useEffect(()=>{le.current=r,ge.current=i},[i,r]);const q=h.useMemo(()=>BW(e.id),[e.id]),ye=n??u,pe=ye==="month"?"30d":ye==="quarter"?"90d":p,he=t??x,rt=r??C,Me=A,dt=mRe({root:{level:"REGION",id:e.ctprvnCode,label:e.label},initialFilters:{kpi:he,range:pe,view:N}}),{stack:St,current:He,canGoBack:Ye,push:Mt,back:Xt,jumpTo:hr,reset:Gt,syncFilters:sr}=dt,xr=h.useMemo(()=>St.map(J=>`${J.level}:${J.id}`).join(">"),[St]),mr=h.useMemo(()=>{const J=L[xr],xe=J?.length?void 0:Object.entries(L).filter(([lt,Je])=>Je.length>0&&xr.startsWith(lt)).sort((lt,Je)=>Je[0].length-lt[0].length)[0]?.[1],Le=J?.length?J:xe??[];if(!Le.length)return[];const Ze=new Map;return Le.forEach(lt=>{const Je=Xn(lt.code)||Xn(kc(lt.regionId)),ht=String(lt.name??"").trim();!Je||!ht||Ze.has(Je)||Ze.set(Je,{...lt,code:Je,name:ht,regionKey:{...lt.regionKey,code:Je,name:ht},regionId:lt.regionId||Ds({level:lt.regionKey.level,code:Je})})}),[...Ze.values()]},[L,xr]),br=h.useCallback(J=>{t==null&&y(J),s?.(J)},[s,t]),kr=h.useCallback(J=>{n==null&&m(J),o?.(J)},[o,n]),cn=h.useCallback(J=>{g(J),kr(XRe[J])},[kr]),wt=h.useCallback(J=>{_(Le=>Le===J?Le:J),(le.current??null)!==J&&ge.current?.(J)},[]),Ge=h.useCallback(J=>{T(J)},[]);h.useEffect(()=>{_(null),Ge(null),I(void 0),w(void 0),H({}),_e.current={},$(!1),re(!1),Ne({})},[e.id,Ge]),h.useEffect(()=>{ye==="month"&&p!=="30d"&&g("30d"),ye==="quarter"&&p!=="90d"&&g("90d")},[ye,p]),h.useEffect(()=>{U(null)},[he,rt]),h.useEffect(()=>{ne(!1),re(!1)},[rt,he]),h.useEffect(()=>{const J=`${he}|${pe}|${N}`;if(J!==ve.current)return Oe.current&&window.clearTimeout(Oe.current),Oe.current=window.setTimeout(()=>{sr({kpi:he,range:pe,view:N},"replace"),ve.current=J},180),()=>{Oe.current&&window.clearTimeout(Oe.current)}},[pe,he,sr,N]),h.useEffect(()=>{He.filters.view!==N&&v(He.filters.view)},[He.filters.view,N]);const Qt=h.useMemo(()=>{const J=E.width||(typeof window<"u"?window.innerWidth:1920);return J>=1024?"desktop":J>=768?"tablet":"mobile"},[E.width]),Pr=h.useMemo(()=>{const J=E.height||(typeof window<"u"?window.innerHeight:900);return Math.max(360,Math.min(680,Math.round(J-(Qt==="desktop"?320:260))))},[E.height,Qt]),_r=h.useMemo(()=>n8[e.id]??n8.seoul,[e.id]),rr=h.useMemo(()=>{const J=new Map;return _r.forEach(xe=>J.set(El(xe),xe)),J},[_r]),je=h.useMemo(()=>mr.filter(J=>J.regionKey.level==="SIGUNGU"),[mr]),Ve=h.useMemo(()=>{const J=new Map;return je.forEach(xe=>J.set(El(xe.name),xe)),J},[je]),yt=h.useMemo(()=>_r.map(J=>{const xe=El(J),Le=Ve.get(xe);return{name:J,code:Le?.code??""}}).filter(J=>J.code),[_r,Ve]),ir=h.useMemo(()=>mr.filter(J=>J.regionKey.level==="EUPMYEONDONG"),[mr]),Cr=h.useMemo(()=>{const J=new Map;return je.forEach(xe=>J.set(String(xe.code),xe.name)),J},[je]),nn=h.useMemo(()=>{const J=new Map;return ir.forEach(xe=>J.set(String(xe.code),{code:String(xe.code),name:xe.name})),J},[ir]),wr=h.useMemo(()=>{for(let J=St.length-1;J>=0;J-=1){const xe=St[J];if(xe.level==="SIGUNGU")return Cr.get(String(xe.id))??xe.label;if(xe.level==="EUPMYEONDONG"){const Le=String(xe.id).slice(0,5),Ze=Cr.get(Le);if(Ze)return Ze}}return null},[St,Cr]);h.useEffect(()=>{if(He.level==="REGION"){rt!==null&&wt(null),Me!==null&&Ge(null),I("sig"),w(e.ctprvnCode);return}if(wr&&rt!==wr&&wt(wr),He.level==="SIGUNGU"){const xe=Ds({level:"SIGUNGU",code:String(He.id),name:He.label});Me!==xe&&Ge(xe),I("emd"),w(He.id);return}const J=Ds({level:"EUPMYEONDONG",code:String(He.id),name:He.label});Me!==J&&Ge(J),I("emd"),w(He.id)},[wr,He.id,He.label,He.level,e.ctprvnCode,rt,Me,wt,Ge]),h.useEffect(()=>{const J=oe.current!==r;if(oe.current=r,!J||!r||He.level!=="REGION"||St.some(lt=>lt.level==="SIGUNGU"&&El(lt.label)===El(r)))return;const Le=Ve.get(El(r));if(!Le?.code)return;const Ze=rr.get(El(r))??r;Ge(Ds({level:"SIGUNGU",code:Le.code})),h.startTransition(()=>{Mt({level:"SIGUNGU",id:Le.code,label:Ze,filters:{kpi:he,range:pe,view:N}},"replace")})},[He.level,St,rr,Mt,pe,he,r,Ve,Ge,N]);const ze=h.useMemo(()=>({level:He.level==="REGION"||He.level==="SIGUNGU"||He.level==="EUPMYEONDONG"?He.level:"REGION",id:String(He.id),name:He.label}),[He.id,He.label,He.level]),dn=h.useMemo(()=>j0(ze.level),[ze.level]),ur=h.useMemo(()=>mr.filter(J=>J.regionKey.level===dn),[dn,mr]),Ue=h.useMemo(()=>{if(je.length>=3)return je.map(xe=>({code:String(xe.code),name:xe.name}));const J=FW[e.ctprvnCode]??[];return J.length?J.map(xe=>({code:String(xe.code),name:xe.label})):yt.map(xe=>({code:String(xe.code),name:xe.name}))},[yt,e.ctprvnCode,je]),Se=h.useMemo(()=>Ue.map(J=>$p(J.name,`${e.id}-${pe}`,ye,pe,J.code)),[Ue,e.id,ye,pe]),nt=h.useMemo(()=>ir.length?ir.map(J=>$p(J.name,`${e.id}-${He.level}-${He.id}-${pe}`,ye,pe,J.code)):[],[ye,He.id,He.level,ir,pe,e.id]),Re=h.useMemo(()=>{if(He.level!=="SIGUNGU")return[];if(!ur.length)return[];const J=ur.filter(Le=>{const Ze=String(Le.code);return Ze.startsWith(String(He.id))&&Ze.length>String(He.id).length});return(J.length>0?J:ur.filter(Le=>String(Le.code)!==String(He.id))).map(Le=>$p(Le.name,`${e.id}-${He.level}-${He.id}-${pe}-map-fallback`,ye,pe,Le.code))},[ye,He.id,He.level,pe,e.id,ur]),Et=h.useMemo(()=>{if(ze.level==="REGION")return ur.length>0?ur.map(J=>({code:String(J.code),name:J.name})):Se.map(J=>({code:String(J.regionId),name:J.name}));if(ze.level==="SIGUNGU"){const J=ur.filter(Le=>{const Ze=String(Le.code);return Ze.startsWith(String(ze.id))&&Ze.length>String(ze.id).length}).map(Le=>({code:String(Le.code),name:Le.name})),xe=J.length>0?J:ur.filter(Le=>String(Le.code)!==String(ze.id)).map(Le=>({code:String(Le.code),name:Le.name}));return xe.length>0?xe:nt.map(Le=>({code:String(Le.regionId),name:Le.name}))}return[]},[ze.id,ze.level,Se,nt,ur]),nr=h.useMemo(()=>zW({level:e3e(ze.level),parentRegionCode:String(ze.id),candidates:Et}),[Et,ze.id,ze.level]),Lt=h.useMemo(()=>{const J=new Map;return[...Se,...nt,...Re].forEach(xe=>{J.set(String(xe.regionId),xe)}),nr.children.map(xe=>{const Le=J.get(xe.code);return Le||$p(xe.name,`${e.id}-${ze.level}-${ze.id}-${pe}-scope-fill`,ye,pe,xe.code)})},[ye,nr.children,ze.id,ze.level,Se,nt,pe,e.id,Re]),Vr=h.useMemo(()=>{if(ze.level==="EUPMYEONDONG"){const J=nt.find(xe=>String(xe.regionId)===String(ze.id))??Re.find(xe=>String(xe.regionId)===String(ze.id));return J?[J]:[$p(ze.name,`${e.id}-${ze.level}-${ze.id}-${pe}-leaf`,ye,pe,ze.id)]}return Lt.length>0?Lt:ze.level==="REGION"?Se:ze.level==="SIGUNGU"?Re.length>0?Re:nt.length>0?nt:[]:[]},[ye,ze.id,ze.level,ze.name,Se,nt,pe,e.id,Lt,Re]),Cn=h.useRef({});h.useEffect(()=>{Vr.length&&(Cn.current[xr]=Vr)},[Vr,xr]);const xt=h.useMemo(()=>{if(Vr.length)return Vr;const J=Cn.current[xr];return J?.length?J:ze.level==="REGION"?Se:ze.level==="SIGUNGU"&&Re.length?Re:ze.level==="SIGUNGU"&&nt.length?nt:[]},[Vr,ze.level,Se,nt,xr,Re]),ta=xt.length>0,ra=`${xr}|${he}|${pe}|${N}`;h.useEffect(()=>{ra!==Fe.current&&(Fe.current=ra,fe!=="Initial"&&we("RegionChange"))},[fe,ra]),h.useEffect(()=>{if(fe!=="RegionChange")return;const J=window.setTimeout(()=>{we(ta?"Ready":"PartialData")},140);return()=>window.clearTimeout(J)},[ta,fe]),h.useEffect(()=>{fe==="Initial"&&we(ta?"Ready":"Empty")},[ta,fe]),h.useEffect(()=>{ta&&(fe==="Ready"||fe==="RegionChange"||we("Ready"))},[ta,fe]);const fi=fe==="RegionChange"?"transition-[opacity,transform] duration-200 ease-out opacity-60 translate-y-[2px] pointer-events-none":"transition-[opacity,transform] duration-200 ease-out opacity-100 translate-y-0",Mn=h.useMemo(()=>He.level==="SIGUNGU"?String(He.id):He.level==="EUPMYEONDONG"?String(He.id).slice(0,5):null,[He.id,He.level]),Ir=h.useMemo(()=>{if(Mn){const J=Se.find(xe=>String(xe.regionId)===Mn);if(J)return J}return rt?Se.find(J=>El(J.name)===El(rt))??null:null},[Se,rt,Mn]),ua=h.useMemo(()=>JRe(xt.length?xt:Se),[Se,xt]),Ht=h.useMemo(()=>He.level==="REGION"?Ir??ua:He.level==="SIGUNGU"?ua:He.level==="EUPMYEONDONG"?xt[0]??ua:Ir??ua,[ua,He.level,xt,Ir]),Dr=h.useMemo(()=>lm[he]??kO[0],[he]),Tr=zRe[he],_o=h.useMemo(()=>[{key:"RISK",label:"",kpi:Qb.RISK},{key:"BOTTLENECK",label:"",kpi:Qb.BOTTLENECK},{key:"GAP",label:"",kpi:Qb.GAP},{key:"LOAD",label:"",kpi:Qb.LOAD}],[]),mn=h.useMemo(()=>kO.map(J=>{const xe=J.key;return{...J,key:xe,value:ua.kpi[xe],mapColorScheme:Y7[xe]??"blue",tooltipLines:s3e(J.label,J.tooltip,J.scopeLine,J.clickAction)}}),[ua]),hn=iRe[he]??"regional_sla_violation",na=Y7[he]??"blue";h.useMemo(()=>zd[na]??zd.blue,[na]);const ll=St,an=He.level==="REGION"?e.label:He.label,pi=h.useCallback(J=>{d&&(J==="bottleneck"&&d("cause"),J==="actions"&&d("interventions"),J==="reports"&&d("reports"),J==="settings"&&d("settings"))},[d]),un=h.useCallback((J,xe,Le)=>{const Ze=$Re(xe,{scopeLabel:an,rangeLabel:Op[pe],longWaitDays:q.thresholds.longWaitDays});return a.jsx(LRe,{label:J,help:Ze,className:Le,onActionClick:()=>pi(Ze.actionTab)})},[an,pi,pe,q.thresholds.longWaitDays]),ic=`${Op[pe]}  ${e.label}  ${w_(Dr.shortLabel)}  `,Fr=h.useMemo(()=>xt.map(J=>J.mapMetric[he]),[xt,he]),Es=h.useMemo(()=>Fr.length?Math.min(...Fr):0,[Fr]),Va=h.useMemo(()=>Fr.length?Math.max(...Fr):0,[Fr]),Bn=h.useMemo(()=>Fr.length?Number((Fr.reduce((J,xe)=>J+xe,0)/Fr.length).toFixed(1)):0,[Fr]);h.useMemo(()=>{const J=zd[na]??zd.blue,xe=Va-Es||1;return xt.map(Le=>{const Ze=Le.mapMetric[he],lt=(Ze-Es)/xe,Je=Math.max(0,Math.min(J.length-1,Math.floor(lt*J.length))),ht=String(Le.regionId);return{code:ht,name:Le.name,regionId:Ds({level:j0(ze.level),code:ht,name:Le.name}),size:Math.max(1,Ze),value:Ze,fill:J[Je]}})},[ze.level,xt,he,Es,Va,na]);const fa=ua.kpi[he],Ks=h.useMemo(()=>{const J=FO(he),xe=xt.map(Dt=>Dt.kpi[he]),Le=xt.map(Dt=>Dt.volume),Ze=Math.min(...xe),lt=Math.max(...xe),Je=Math.min(...Le),ht=Math.max(...Le),bt=xt.map(Dt=>Dt.adTransitionSignal.densityScore),fr=xt.map(Dt=>Dt.adTransitionSignal.transition30d),Ln=xt.map(Dt=>Dt.adTransitionSignal.deltaFromAvg),is=xt.map(Dt=>Dt.differentialDelay.avgWaitDays),gn=xt.map(Dt=>Dt.differentialDelay.delayedRatio),Vs=xt.map(Dt=>Dt.differentialDelay.backlogCount),zi=xt.map(Dt=>1-Dt.stageConversionRate.conversionRate),bi=xt.map(Dt=>-Dt.stageConversionRate.deltaFromRegional),qi=xt.map(Dt=>Dt.screenToDxDrivers.reduce((Gn,Gr)=>Gn+Gr.value,0)/Math.max(1,Dt.screenToDxDrivers.length));return xt.map(Dt=>{const Gn=Dt.kpi[he];let Gr=aRe({kpiValue:Gn,kpiMin:Ze,kpiMax:lt,volume:Dt.volume,volumeMin:Je,volumeMax:ht,direction:J});if(he==="regionalAdTransitionHotspot"){const Xa=Ic(Dt.adTransitionSignal.densityScore,Math.min(...bt),Math.max(...bt)),lc=Ic(Dt.adTransitionSignal.transition30d,Math.min(...fr),Math.max(...fr)),yi=Ic(Dt.adTransitionSignal.deltaFromAvg,Math.min(...Ln),Math.max(...Ln));Gr=Number((Xa*A_.density+lc*A_.transition+yi*A_.delta).toFixed(3))}else if(he==="regionalDxDelayHotspot"){const Xa=Ic(Dt.differentialDelay.avgWaitDays,Math.min(...is),Math.max(...is)),lc=Ic(Dt.differentialDelay.delayedRatio,Math.min(...gn),Math.max(...gn)),yi=Ic(Dt.differentialDelay.backlogCount,Math.min(...Vs),Math.max(...Vs));Gr=Number((Xa*__.wait+lc*__.delayed+yi*__.backlog).toFixed(3))}else if(he==="regionalScreenToDxRate"){const Xa=Ic(1-Dt.stageConversionRate.conversionRate,Math.min(...zi),Math.max(...zi)),lc=Ic(-Dt.stageConversionRate.deltaFromRegional,Math.min(...bi),Math.max(...bi)),yi=Dt.screenToDxDrivers.reduce((Kn,vi)=>Kn+vi.value,0)/Math.max(1,Dt.screenToDxDrivers.length),os=Ic(yi,Math.min(...qi),Math.max(...qi));Gr=Number((Xa*C_.gapRate+lc*C_.deltaGap+os*C_.support).toFixed(3))}const oc=Number(kt(`national-${he}-${pe}-${ye}-${He.level}-${He.id}-${Dt.name}`,Qr[he][0],Qr[he][1]).toFixed(1)),fd=Xn(kc(Dt.regionId))||Xn(Dt.regionId);return{code:fd,regionId:Ds({level:j0(ze.level),code:fd,name:Dt.name}),name:Dt.name,kpiValue:Gn,volume:Dt.volume,priorityScore:Gr,nationalDelta:Number((Gn-oc).toFixed(1))}}).sort((Dt,Gn)=>{if(Gn.priorityScore!==Dt.priorityScore)return Gn.priorityScore-Dt.priorityScore;const Gr=Dt.name.localeCompare(Gn.name,"ko-KR");return Gr!==0?Gr:Dt.code.localeCompare(Gn.code)})},[ye,ze.level,He.id,He.level,pe,xt,he]),js=h.useMemo(()=>new Set(nr.childrenCodes.map(J=>Xn(J)).filter(Boolean)),[nr.childrenCodes]),aa=h.useMemo(()=>{const J=j0(ze.level),xe=Ks.filter(lt=>{const Je=Xn(lt.code)||Xn(kc(lt.code));return Je?js.size?js.has(Je):!0:!1}),Le=(xe.length>0?xe:Ks).slice(0,5),Ze=[];return Le.forEach(lt=>{const Je=Xn(lt.code)||Xn(kc(lt.regionId));Je&&Ze.push({...lt,code:Je,regionKey:{level:J,code:Je,name:lt.name},regionId:Ds({level:J,code:Je,name:lt.name})})}),Ze},[js,ze.level,Ks]),ba=h.useMemo(()=>xt.reduce((J,xe)=>J+xe.volume,0),[xt]),zs=h.useMemo(()=>{if(!aa.length||ba<=0)return null;const J=aa.reduce((xe,Le)=>xe+Le.volume,0);return Number((J/ba*100).toFixed(1))},[aa,ba]),ws=zs==null?"":`${zs.toFixed(1)}%`,mi=h.useMemo(()=>{const J=aa.slice(0,2).map(xe=>xe.name);return J.length?J.join("/"):`${e.label} `},[e.label,aa]),Tn=qRe[he]??w_(Dr.shortLabel),Ma=h.useMemo(()=>{const J=_o.find(Le=>Le.key===Tr)?.label??Tr,xe=Dr.direction==="higherWorse"?`${Tn} `:`${Tn}  `;return vt(`${Op[pe]}  ${J}  ${xe}   : ${mi}`)},[Tr,_o,pe,Dr.direction,Tn,mi]),Bi=h.useMemo(()=>{const J=pe==="7d"?["D-6","D-5","D-4","D-3","D-2","D-1","D0"]:["T-7","T-6","T-5","T-4","T-3","T-2","T-1","T0"],xe=xt.filter(Je=>Je.kpi.regionalRecontact>=10).length,Le=xt.reduce((Je,ht)=>Je+(ht.recontactReasons.find(bt=>bt.name==="")?.value??0),0),Ze=xt.length>0?Number((xt.reduce((Je,ht)=>Je+ht.differentialDelay.avgWaitDays,0)/xt.length).toFixed(1)):0,lt=(Je,ht,bt,fr)=>{const Ln=kt(`${e.id}-${Je}-${pe}-drift`,-1.2,1.2),is=bt===""?Math.max(6,fr*.08):bt===""?1.5:1,gn=J.map((bi,qi)=>{const Dt=qi-(J.length-1),Gn=fr+Dt*Ln+kt(`${e.id}-${Je}-${pe}-${bi}`,-is,is),Gr=Math.max(0,bt===""?Number(Gn.toFixed(1)):Math.round(Gn));return{t:bi,v:Gr}});gn.length&&(gn[gn.length-1]={...gn[gn.length-1],v:bt===""?Number(fr.toFixed(1)):Math.round(fr)});const Vs=gn[gn.length-1]?.v??0,zi=gn[Math.max(0,gn.length-2)]?.v??Vs;return{key:Je,label:ht,unit:bt,points:gn,value:Vs,delta:Number((Vs-zi).toFixed(1))}};return[lt("slaRisk","SLA  ","",xe),lt("bottleneck"," ","",Ze),lt("overdueFollowup"," ","",Le)]},[pe,xt,e.id]),Gi=h.useMemo(()=>{const J=Math.round(lm.regionalDxDelayHotspot.target??24),xe=Math.round(lm.regionalRecontact.target??12);return[{label:`SLA   ${q.thresholds.longWaitDays} `,tooltip:`SLA  : ${q.thresholds.longWaitDays}    `},{label:`   ${J}`,tooltip:`   : ${J}`},{label:`  ${xe}%`,tooltip:`   : ${xe}%`}]},[q.thresholds.longWaitDays]),Ut=h.useMemo(()=>{const J=xt.filter(lt=>lt.kpi.regionalRecontact>=10).length,xe=xt.filter(lt=>lt.differentialDelay.avgWaitDays>=q.thresholds.longWaitDays).length,Le=xt.reduce((lt,Je)=>lt+(Je.recontactReasons.find(ht=>ht.name==="")?.value??0),0),Ze=xt.filter(lt=>lt.stageImpact.stage1QueueDelta>=12).length;return{slaAtRiskRegions:J,examDelayRegions:xe,overdueFollowups:Math.round(Le),surgeRegions:Ze}},[xt,q.thresholds.longWaitDays]),Co=h.useMemo(()=>{const J=xt.filter(bt=>bt.adTransitionSignal.densityScore>=70).length,xe=xt.reduce((bt,fr)=>bt+fr.adTransitionSignal.highRiskCount,0),Le=xt.length>0?Number((xt.reduce((bt,fr)=>bt+fr.differentialDelay.avgWaitDays,0)/xt.length).toFixed(1)):0,Ze=Math.round(xt.reduce((bt,fr)=>bt+(fr.queueTypeBacklog.find(Ln=>Ln.name==="2 ")?.value??0),0)),lt=xt.map(bt=>bt.stageConversionRate.conversionRate*100),Je=lt.length>1?Number((Math.max(...lt)-Math.min(...lt)).toFixed(1)):0,ht=xt.length>1?Number((Math.max(...xt.map(bt=>bt.differentialDelay.avgWaitDays))-Math.min(...xt.map(bt=>bt.differentialDelay.avgWaitDays))).toFixed(1)):0;return[{id:"risk",title:"Risk",value:J,unit:"",delta:{value:Ut.slaAtRiskRegions,unit:"",direction:Ut.slaAtRiskRegions>0?"up":"flat"},severity:Ut.slaAtRiskRegions>4?"critical":Ut.slaAtRiskRegions>2?"warn":"normal",bindLayer:"RISK"},{id:"bottleneck",title:"Bottleneck",value:Le,unit:"",delta:{value:Ze,unit:"",direction:Ze>0?"up":"flat"},severity:Le>q.thresholds.longWaitDays?"critical":Le>q.thresholds.longWaitDays-1?"warn":"normal",bindLayer:"BOTTLENECK"},{id:"gap",title:"Gap",value:Je,unit:"%p",delta:{value:ht,unit:"",direction:ht>0?"up":"flat"},severity:Je>18?"critical":Je>10?"warn":"normal",bindLayer:"GAP"},{id:"load",title:"Load",value:xe,unit:"",delta:{value:Ut.surgeRegions,unit:"",direction:Ut.surgeRegions>0?"up":"flat"},severity:Ut.surgeRegions>3?"warn":"normal",bindLayer:"LOAD"}]},[Ut,xt,q.thresholds.longWaitDays]),tt=h.useMemo(()=>{const J=Co.find(Le=>Le.id==="bottleneck"),xe=Co.find(Le=>Le.id==="gap");return[{id:"sla-risk",label:`${j_("sla").user}  `,helpKey:"slaRisk",value:`${Ut.slaAtRiskRegions.toLocaleString()}`,tone:Ut.slaAtRiskRegions>3?"text-red-700 bg-red-50 border-red-100":"text-emerald-700 bg-emerald-50 border-emerald-100"},{id:"bottleneck",label:j_("examDelay").user,helpKey:"examDelay",value:`${Math.round(J?.value??0)}`,tone:(J?.severity??"normal")==="critical"?"text-red-700 bg-red-50 border-red-100":"text-amber-700 bg-amber-50 border-amber-100"},{id:"gap",label:j_("conversionGap").user,helpKey:"conversionGap",value:`${(xe?.value??0).toFixed(1)}%p`,tone:(xe?.severity??"normal")==="critical"?"text-red-700 bg-red-50 border-red-100":"text-indigo-700 bg-indigo-50 border-indigo-100"}]},[Ut.slaAtRiskRegions,Co]),On=h.useMemo(()=>Ir?Number((Ir.kpi[he]-fa).toFixed(1)):null,[fa,Ir,he]),V=h.useMemo(()=>{const J=new Map;return xt.forEach(xe=>{const Le=String(xe.regionId),Ze=Xn(kc(Le));J.set(Le,xe),Ze&&J.set(Ze,xe)}),J},[xt]),de=h.useCallback(({code:J,name:xe})=>{const Le=Xn(J)||Xn(kc(J)),Ze=(Le?V.get(Le):void 0)??V.get(String(J));if(!Ze)return[];const lt=Number(kt(`${e.id}-${xe}-${he}-delta7-${pe}-${ye}`,-12,12).toFixed(1)),Je=Dr.unit===""?"":Dr.unit===""?"":Dr.unit===""?"":"%p";return[`: ${Ze.volume.toLocaleString()}`,` 7 : ${lt>0?"+":""}${Dr.unit===""||Dr.unit===""?Math.round(lt):lt}${Je}`]},[ye,V,pe,e.id,Dr.unit,he]),De=h.useCallback(()=>{wt(null),Ge(null),Gt(),$(!1)},[Gt,wt,Ge]),ft=h.useCallback(()=>{Ye&&(St.length<=2&&(wt(null),Ge(null)),Xt(),$(!1))},[Xt,Ye,St.length,wt,Ge]),ot=h.useCallback(({level:J,code:xe,name:Le,regionId:Ze})=>{if(J==="ctprvn"){De();return}const lt=Xn(xe)||Xn(kc(Ze)),Je=J==="sig"||J==="emd"&&lt.length===5,ht=El(Le);if(Je&&lt){const bt=Cr.get(lt)??rr.get(ht)??Le,fr=Ze??Ds({level:"SIGUNGU",code:lt});Ge(fr),wt(bt),h.startTransition(()=>{Mt({level:"SIGUNGU",id:lt,label:bt,filters:{kpi:he,range:pe,view:N}})});return}if(J==="emd"){if(!lt)return;const bt=nn.get(lt)?.name??Le,fr=Ze??Ds({level:"EUPMYEONDONG",code:lt});Ge(fr),h.startTransition(()=>{Mt({level:"EUPMYEONDONG",id:lt,label:bt,filters:{kpi:he,range:pe,view:N}})})}},[nn,De,rr,Mt,pe,he,Cr,wt,Ge,N]),pt=h.useCallback(J=>{const xe=j0(ze.level),Ze=J.map(ht=>{const bt=Xn(ht.code)||Xn(kc(ht.regionId)),fr=String(ht.name??"").trim();return!bt||!fr?null:{...ht,code:bt,name:fr,regionKey:{...ht.regionKey,level:ht.regionKey.level,code:bt,name:fr},regionId:ht.regionId||Ds({level:ht.regionKey.level,code:bt})}}).filter(ht=>!!ht).filter((ht,bt,fr)=>fr.findIndex(Ln=>Ln.code===ht.code)===bt).filter(ht=>ht.regionKey.level===xe).sort((ht,bt)=>ht.code.localeCompare(bt.code,"ko-KR"));if(!Ze.length)return;const lt=`${xe}|${Ze.map(ht=>`${ht.code}:${ht.name}`).join("|")}`;_e.current[xr]!==lt&&(_e.current[xr]=lt,H(ht=>{const bt=ht[xr]??[];return bt.length===Ze.length&&bt.every((fr,Ln)=>fr.code===Ze[Ln]?.code&&fr.name===Ze[Ln]?.name&&fr.regionKey.level===Ze[Ln]?.regionKey.level)?ht:{...ht,[xr]:Ze}}))},[ze.level,xr]),Kt=h.useCallback((J,xe,Le)=>{const Ze=Xn(J)||Xn(kc(Le));if(!Ze)return;const lt=Le?.startsWith("EUPMYEONDONG:")?"EUPMYEONDONG":Le?.startsWith("SIGUNGU:")||He.level==="REGION"?"SIGUNGU":"EUPMYEONDONG",Je=Ds({level:lt,code:Ze});if(Ge(Je),Je!==Me){if(lt==="SIGUNGU"){wt(xe),h.startTransition(()=>{Mt({level:"SIGUNGU",id:Ze,label:xe,filters:{kpi:he,range:pe,view:N}})});return}h.startTransition(()=>{Mt({level:"EUPMYEONDONG",id:Ze,label:xe,filters:{kpi:he,range:pe,view:N}},He.level==="EUPMYEONDONG"?"replace":"push")})}},[He.level,Mt,pe,Me,he,wt,Ge,N]),qt=h.useMemo(()=>{const J=ye==="week"?7:4,xe=ye==="week"?["","","","","","",""]:ye==="month"?["1","2","3","4"]:["Q1","Q2","Q3","Q4"],[Le,Ze]=Qr[he],lt=he==="regionalSla"?tV[pe]*$O[ye]:rV[pe]*$O[ye],Je=nV[pe],ht=bt=>Dr.unit===""?Number((bt*lt).toFixed(1)):Dr.unit===""?Number(Math.max(Le,Math.min(Ze,bt+Je*4)).toFixed(1)):Dr.unit===""?Number(Math.max(Le,Math.min(Ze,bt+Je*2)).toFixed(1)):Number(Math.max(Le,Math.min(Ze,bt+Je)).toFixed(1));return Array.from({length:J},(bt,fr)=>{const Ln=ht(kt(`${e.id}-${he}-${ye}-reg-${fr}`,Le,Ze)),is=ht(kt(`national-${he}-${pe}-${ye}-tr-${fr}`,Le,Ze)),gn=rt?ht(kt(`${e.id}-${rt}-${he}-${pe}-${ye}-dist-${fr}`,Le,Ze)):void 0;return{label:xe[fr],regional:Ln,national:is,district:gn}})},[ye,pe,e.id,rt,Dr.unit,he]);h.useMemo(()=>{const J=Number((Se.reduce((xe,Le)=>xe+Le.mapMetric.regionalSla,0)/Math.max(1,Se.length)).toFixed(1));return Se.map(xe=>({name:xe.name,value:xe.mapMetric.regionalSla,delta:Number((xe.mapMetric.regionalSla-J).toFixed(1))})).sort((xe,Le)=>Le.value-xe.value).slice(0,8)},[Se]),h.useMemo(()=>Se.map(xe=>({name:xe.name,missing:xe.mapMetric.regionalGovernance,statuses:xe.governanceActionStatus})).sort((xe,Le)=>Le.missing-xe.missing).slice(0,5).map(xe=>{const Le=xe.statuses.find(Je=>Je.status==="")?.value??0,Ze=xe.statuses.find(Je=>Je.status==="")?.value??0,lt=xe.statuses.find(Je=>Je.status==="")?.value??0;return{name:xe.name,:Le,:Ze,:lt}}),[Se]),h.useMemo(()=>{const J=Ht.stageImpact;return[{stage:"Stage1 (ML)",signal:J.stage1SignalDelta,queue:J.stage1QueueDelta,desc:"       "},{stage:"Stage2 (ANN)",signal:J.stage2SignalDelta,queue:J.stage2QueueDelta,desc:"2    2   "},{stage:"Stage3 (CNN)",signal:J.stage3SignalDelta,queue:J.stage3QueueDelta,desc:"3    3    "}]},[Ht.stageImpact]);const tr=h.useMemo(()=>he==="regionalSla"?[vt("Stage        "),vt("          ")]:he==="regionalQueueRisk"?[vt("        "),vt("       ")]:he==="regionalRecontact"?[vt("SLA      "),vt("SLA       ")]:he==="regionalDataReadiness"?[vt("       "),vt("       ")]:he==="regionalAdTransitionHotspot"?[vt("     Stage3     "),vt("        ")]:he==="regionalDxDelayHotspot"?[vt("        "),vt("       ")]:he==="regionalScreenToDxRate"?[vt("         "),vt("       ")]:[vt("       "),vt("       ")],[he]),Nr=h.useMemo(()=>he==="regionalSla"?Ht.queueTypeBacklog.slice(0,3):he==="regionalQueueRisk"?Ht.queueCauseTop.slice(0,3):he==="regionalRecontact"?Ht.slaStageContribution.slice(0,3):he==="regionalDataReadiness"?Ht.recontactReasons.slice(0,3):he==="regionalAdTransitionHotspot"?Ht.adTransitionDrivers.slice(0,3):he==="regionalDxDelayHotspot"?Ht.dxDelayDrivers.slice(0,3):he==="regionalScreenToDxRate"?Ht.screenToDxDrivers.slice(0,3):Ht.governanceMissingTypes.slice(0,3),[Ht,he]),gr=h.useCallback(J=>he==="regionalRecontact"?`${J.value.toFixed(1)}%`:he==="regionalAdTransitionHotspot"?J.name.includes("")?`${J.value.toFixed(1)}`:`${Math.round(J.value).toLocaleString()}`:he==="regionalDxDelayHotspot"?J.name.includes("")?`${J.value.toFixed(1)}%`:J.name.includes("")?`${Math.round(J.value)}`:`${Math.round(J.value).toLocaleString()}`:he==="regionalScreenToDxRate"?J.name.includes("")?`${J.value.toFixed(1)}%p`:`${J.value.toFixed(1)}`:`${Math.round(J.value).toLocaleString()}`,[he]);h.useMemo(()=>uo([Ht.missingFields]),[Ht.missingFields]);const qs=h.useMemo(()=>{if(he==="regionalSla"){const xe=[...Ht.queueTypeBacklog].sort((Le,Ze)=>Ze.value-Le.value)[0];return{stage:xe?.name??" ",valueLabel:xe?`${Math.round(xe.value)}`:"",basis:vt("    ")}}if(he==="regionalQueueRisk"){const xe=Ht.queueCauseTop[0];return{stage:xe?.name??" ",valueLabel:xe?`${Math.round(xe.value)}`:"",basis:vt("      ")}}if(he==="regionalRecontact"){const xe=Ht.slaStageContribution[0];return{stage:xe?.name??"SLA ",valueLabel:xe?`${xe.value.toFixed(1)}%`:"",basis:vt("SLA     ")}}if(he==="regionalDataReadiness"){const xe=Ht.recontactReasons[0];return{stage:xe?.name??"",valueLabel:xe?`${Math.round(xe.value)}`:"",basis:vt("      ")}}if(he==="regionalAdTransitionHotspot")return{stage:" ",valueLabel:`${Math.round(Ht.adTransitionSignal.highRiskCount)}  ${Math.round(Ht.adTransitionSignal.densityScore)}`,basis:vt("     ")};if(he==="regionalDxDelayHotspot")return{stage:" ",valueLabel:`${Math.round(Ht.differentialDelay.avgWaitDays)}  ${(Ht.differentialDelay.delayedRatio*100).toFixed(1)}%`,basis:vt("      ")};if(he==="regionalScreenToDxRate")return{stage:" ",valueLabel:`${(Ht.stageConversionRate.conversionRate*100).toFixed(1)}%`,basis:vt("      ")};const J=Ht.governanceMissingTypes[0];return{stage:J?.name??" ",valueLabel:J?`${Math.round(J.value)}`:"",basis:vt("     ")}},[Ht.adTransitionSignal.densityScore,Ht.adTransitionSignal.highRiskCount,Ht.differentialDelay.avgWaitDays,Ht.differentialDelay.delayedRatio,Ht.governanceMissingTypes,Ht.queueCauseTop,Ht.queueTypeBacklog,Ht.recontactReasons,Ht.slaStageContribution,Ht.stageConversionRate.conversionRate,he]),Sr=h.useMemo(()=>({primaryDriverStage:qs.stage,alertLevel:a3e(he,fa,Dr.trendGoal)}),[qs.stage,fa,Dr.trendGoal,he]);h.useMemo(()=>vt(he==="regionalSla"?`${Sr.primaryDriverStage}          `:he==="regionalQueueRisk"?`${Sr.primaryDriverStage}         `:he==="regionalRecontact"?"SLA /       ":he==="regionalDataReadiness"?"        ":he==="regionalAdTransitionHotspot"?"          ":he==="regionalDxDelayHotspot"?"         ":he==="regionalScreenToDxRate"?"          ":"        "),[he,Sr.primaryDriverStage]);const La=h.useMemo(()=>{const J=aa.slice(0,2).map(xe=>xe.name);return J.length?J.join(", "):`${e.label}  `},[e.label,aa]),As=h.useMemo(()=>vt(`${e.label}() ${Tn} ${Zb(he,fa)} (  ${Zb(he,Bn)},  ${T_(he,Number((fa-Bn).toFixed(1)))})`),[Bn,e.label,fa,he,Tn]),Gf=h.useMemo(()=>vt(`    ${q.thresholds.longWaitDays}    `),[q.thresholds.longWaitDays]),ud=h.useMemo(()=>vt(he==="regionalQueueRisk"?`   : ${La}     `:he==="regionalRecontact"?`   : ${La} SLA    `:he==="regionalDataReadiness"?`   : ${La}     `:he==="regionalGovernance"?`   : ${La}     `:he==="regionalAdTransitionHotspot"?`   : ${La}      `:he==="regionalDxDelayHotspot"?`   : ${La}       `:he==="regionalScreenToDxRate"?`   : ${La}       `:`   : ${La}     `),[he,La]),vu=h.useMemo(()=>HRe({regionKey:e.id,regionLabel:e.label,selectedRegionSgg:rt,selectedRange:ye,alertSummary:Ut,avgExamDelayDays:Ht.differentialDelay.avgWaitDays,overdueFollowups:Ut.overdueFollowups,longWaitDays:q.thresholds.longWaitDays}),[Tr,Ut,ye,Ht.differentialDelay.avgWaitDays,e.id,e.label,rt,he,q.thresholds.longWaitDays]),_s=h.useMemo(()=>vu.map(J=>{const xe=se[J.id];return{...J,status:xe?.status??J.status,dismissReason:xe?.dismissReason??J.dismissReason}}),[vu,se]),Hi=h.useMemo(()=>_s.filter(J=>J.status==="open"||J.status==="acknowledged").length,[_s]),sa=h.useCallback((J,xe,Le)=>{Ne(Ze=>({...Ze,[J]:{status:xe,dismissReason:Le??Ze[J]?.dismissReason}}))},[]),hi=h.useCallback(J=>{const xe=J.relatedQueryState.kpiKey;br(xe),J.relatedQueryState.areaKey&&wt(J.relatedQueryState.areaKey),kr(J.relatedQueryState.period),sa(J.id,"acknowledged"),d?.("cause")},[d,sa,wt,br,kr]),Mr=h.useCallback(J=>{const xe=J.relatedQueryState.kpiKey;l?.({kpi:xe,sgg:J.relatedQueryState.areaKey??rt??null,range:J.relatedQueryState.period,source:"overview",primaryDriverStage:Sr.primaryDriverStage}),sa(J.id,"converted_to_intervention")},[l,rt,sa,Sr.primaryDriverStage]),gi=h.useCallback(J=>{const xe=window.prompt("To-Do   .");if(xe==null)return;const Le=xe.trim();sa(J.id,"dismissed",Le||" ")},[sa]),Nu=h.useMemo(()=>{const J=Ht.queueTypeBacklog.reduce((Ze,lt)=>Ze+lt.value,0),xe=Ht.recontactReasons.reduce((Ze,lt)=>Ze+lt.value,0),Le=Math.max(0,Math.round(Ht.volume-J));return[{label:"Stage  ",value:`${qs.stage}  ${qs.valueLabel}`},{label:"  ",value:` ${Math.round(Ht.differentialDelay.avgWaitDays)}   ${(Ht.differentialDelay.delayedRatio*100).toFixed(1)}%`},{label:"  ",value:`${Math.round(xe).toLocaleString()}`},{label:"  ",value:`${Le.toLocaleString()}`}]},[Ht.differentialDelay.avgWaitDays,Ht.differentialDelay.delayedRatio,Ht.queueTypeBacklog,Ht.recontactReasons,Ht.volume,qs.stage,qs.valueLabel]),xi=h.useMemo(()=>{const J=Ir?.name??`${e.label} `,Le=Math.max(.8,Math.min(5.8,(zs??20)/8));return[{id:"STAFFING",title:"   ",detail:vt(`${J} /    `),expected:`SLA   +${(Le*1.05).toFixed(1)}%p`,stage:""},{id:"EXAM_SLOT",title:"   ",detail:vt(`${J}      `),expected:`SLA   +${(Le*.85).toFixed(1)}%p`,stage:"2"},{id:"FOLLOWUP_AUTOMATION",title:"  ",detail:vt(`${J} /    `),expected:`SLA   +${(Le*.72).toFixed(1)}%p`,stage:""},{id:"HOSPITAL_LINK",title:"  ",detail:vt(`${J}        `),expected:`SLA   +${(Le*.66).toFixed(1)}%p`,stage:"3"}]},[e.label,Ir?.name,zs]),Rn=h.useMemo(()=>xi.find(J=>J.id===X)??xi[0]??null,[xi,X]);h.useEffect(()=>{Rn&&Rn.id!==X&&F(Rn.id)},[Rn,X]);const Ki=h.useMemo(()=>Ir?he==="regionalSla"?Ir.queueTypeBacklog[0]?.name??" ":he==="regionalQueueRisk"?Ir.queueCauseTop[0]?.name??" ":he==="regionalRecontact"?Ir.slaStageContribution[0]?.name??"SLA ":he==="regionalDataReadiness"?Ir.recontactReasons[0]?.name??"":he==="regionalAdTransitionHotspot"?Ir.adTransitionDrivers[0]?.name??" ":he==="regionalDxDelayHotspot"?Ir.dxDelayDrivers[0]?.name??" ":he==="regionalScreenToDxRate"?Ir.screenToDxDrivers[0]?.name??" ":Ir.governanceMissingTypes[0]?.name??" ":null,[Ir,he]),Ws=h.useMemo(()=>Ir&&On!=null?vt(`${Ir.name}:    ${T_(he,On)}   1: ${Ki??""}`):vt("       "),[Ir,On,he,Ki]);h.useMemo(()=>{const J=Ir?Ir.name:`${e.label} `,xe=aa[0]?.name??J,Le=Nr.slice(0,2).map(Ze=>Dr.unit==="%"?`${Ze.name} ${Ze.value.toFixed(1)}%`:Dr.unit===""?`${Ze.name} ${Math.round(Ze.value)}`:Dr.unit===""?`${Ze.name} ${Math.round(Ze.value)}`:`${Ze.name} ${Math.round(Ze.value)}`);return[{id:"scenario-a",target:J,action:tr[0]??vt("   "),effect:"  ",risk:vt("    "),evidence:Le[0]??vt("  ")},{id:"scenario-b",target:xe,action:tr[1]??vt("   "),effect:"  ",risk:vt("   "),evidence:Le[1]??vt("  ")}]},[tr,Nr,e.label,Ir,Dr.unit,aa]);const Ya=h.useMemo(()=>qt.length<3?null:Math.max(1,Math.floor(qt.length/2)),[qt]);return h.useMemo(()=>{if(!qt.length)return vt("  ");const J=Math.max(1,Math.floor(qt.length/2)),xe=qt.slice(0,J).reduce((is,gn)=>is+gn.regional,0)/J,Le=qt.slice(J),Ze=Le.reduce((is,gn)=>is+gn.regional,0)/Math.max(1,Le.length),lt=Number((Ze-xe).toFixed(1)),Je=FO(he),ht=Je==="higherBetter"&&lt>.4||Je==="higherWorse"&&lt<-.4,bt=Je==="higherBetter"&&lt<-.4||Je==="higherWorse"&&lt>.4,fr=ht?" ":bt?"/ ":" ",Ln=pe==="24h"?" 24":`${Op[pe]} `;return vt(`${Ln}:    ${fr} (    )`)},[pe,he,qt]),h.useMemo(()=>{if(Ya==null||Ya>=qt.length)return"";const J=qt.slice(0,Ya).map(Je=>Je.regional),xe=qt.slice(Ya).map(Je=>Je.regional);if(!J.length||!xe.length)return"";const Le=J.reduce((Je,ht)=>Je+ht,0)/J.length,Ze=xe.reduce((Je,ht)=>Je+ht,0)/xe.length,lt=Number((Ze-Le).toFixed(1));return T_(he,lt)},[he,qt,Ya]),a.jsxs("div",{ref:S,className:"flex h-full min-h-0 flex-col overflow-hidden bg-gray-50",children:[a.jsxs("div",{className:"bg-white border-b border-gray-200 px-4 py-2 shrink-0",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-1.5 flex-1 min-w-0",children:tt.map(J=>a.jsxs("div",{role:"status",className:`rounded-md border px-2.5 py-2 ${J.tone}`,children:[un(J.label,J.helpKey,"text-[10px] font-semibold"),a.jsx("div",{className:"text-[14px] font-bold mt-0.5",children:J.value})]},J.id))}),a.jsxs("button",{onClick:()=>M(J=>!J),className:"h-8 px-2.5 rounded-md border border-gray-200 text-xs text-gray-600 hover:bg-gray-50 shrink-0",children:["  ",B?"":""]})]}),B&&a.jsx("div",{className:"mt-2 grid grid-cols-2 lg:grid-cols-4 gap-1.5",children:mn.map(J=>{const xe=he===J.key;return a.jsxs("div",{className:`rounded-md border px-2.5 py-2 ${xe?"border-blue-200 bg-blue-50":"border-gray-200 bg-gray-50"}`,children:[a.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] font-semibold text-gray-600",children:[a.jsx("span",{className:`p-1 rounded ${J.iconBg}`,children:QRe[J.key]}),a.jsx("span",{className:"truncate",children:w_(J.shortLabel)})]}),a.jsx("div",{className:"text-[13px] font-bold text-gray-800 mt-1",children:Zb(J.key,J.value)})]},J.key)})})]}),a.jsx("div",{className:"flex-1 overflow-hidden min-h-0",children:a.jsxs("div",{className:`p-2 gap-2 h-full min-h-0 ${Qt==="desktop"?"grid overflow-hidden":"flex flex-col overflow-y-auto"}`,style:Qt==="desktop"?{gridTemplateColumns:"3fr 6fr 3fr",minHeight:0,alignItems:"stretch"}:void 0,children:[a.jsxs("div",{className:`${Qt==="desktop"?"min-w-0 min-h-0 overflow-hidden":Qt==="tablet"?"hidden":"w-full shrink-0"} flex flex-col gap-2`,children:[a.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-2 text-center",children:[a.jsx("span",{className:"text-xs text-indigo-700 font-medium",children:rt?` ${rt}`:` ${e.label}`}),a.jsxs("span",{className:"ml-2 text-[12px] text-indigo-500",children:["   ",Op[pe]]})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"  To-Do"}),a.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded border border-blue-200 bg-blue-50 text-blue-700",children:[" ",Hi,""]})]}),a.jsx("div",{className:"space-y-1.5",children:_s.map((J,xe)=>{const Le=J.status==="converted_to_intervention"?"border-emerald-200 bg-emerald-50 text-emerald-700":J.status==="dismissed"?"border-slate-200 bg-slate-100 text-slate-600":J.status==="acknowledged"?"border-blue-200 bg-blue-50 text-blue-700":"border-amber-200 bg-amber-50 text-amber-700",Ze=J.status==="converted_to_intervention"?" ":J.status==="dismissed"?"":J.status==="acknowledged"?"":"";return a.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-2 py-2",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsxs("div",{className:"text-[11px] font-semibold text-gray-800 truncate",children:[xe+1,". ",J.title]}),a.jsx("div",{className:"text-[10px] text-gray-600 mt-0.5",children:J.reason}),a.jsxs("div",{className:"text-[10px] text-gray-500 mt-0.5",children:[" ",J.target,"  SLA ",J.dueSlaHours,"h"]})]}),a.jsx("span",{className:`shrink-0 rounded border px-1.5 py-0.5 text-[10px] font-semibold ${Le}`,children:Ze})]}),J.status==="dismissed"&&J.dismissReason?a.jsxs("div",{className:"mt-1 rounded border border-slate-200 bg-white px-1.5 py-1 text-[10px] text-slate-600",children:[" : ",J.dismissReason]}):null,a.jsxs("div",{className:"mt-1.5 flex items-center gap-1",children:[a.jsx("button",{type:"button",onClick:()=>hi(J),className:"rounded border border-blue-200 bg-blue-50 px-1.5 py-1 text-[10px] font-medium text-blue-700 hover:bg-blue-100",children:" "}),a.jsx("button",{type:"button",onClick:()=>Mr(J),className:"rounded border border-emerald-200 bg-emerald-50 px-1.5 py-1 text-[10px] font-medium text-emerald-700 hover:bg-emerald-100",children:" "}),a.jsx("button",{type:"button",onClick:()=>sa(J.id,"acknowledged"),className:"rounded border border-gray-200 bg-white px-1.5 py-1 text-[10px] text-gray-600 hover:bg-gray-100",children:""}),a.jsx("button",{type:"button",onClick:()=>gi(J),className:"rounded border border-gray-200 bg-white px-1.5 py-1 text-[10px] text-gray-500 hover:bg-gray-100",children:""})]})]},J.id)})})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"1.  (  )"}),a.jsx("span",{className:"text-[11px] px-1.5 py-0.5 rounded bg-blue-50 text-blue-700",children:un(Tn,WRe[he])})]}),a.jsx("div",{className:"mb-2 text-[11px] text-gray-500",children:"    "}),a.jsxs("div",{className:"space-y-1.5 text-[12px] leading-relaxed",children:[a.jsx("div",{className:"p-2 rounded border border-gray-100 bg-gray-50 text-gray-800",children:As}),a.jsx("div",{className:"p-2 rounded border border-amber-100 bg-amber-50 text-amber-900",children:Gf}),a.jsx("div",{className:"p-2 rounded border border-blue-100 bg-blue-50 text-blue-900",children:ud})]})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3 min-h-0 overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[un("Top  ","top5Share","text-sm font-semibold text-gray-700"),a.jsx("span",{className:"text-[11px] px-1.5 py-0.5 rounded bg-rose-50 text-rose-700 border border-rose-200",children:" 5"})]}),a.jsx("div",{className:"mb-2 rounded border border-blue-100 bg-blue-50 px-2 py-1.5 text-[11px] text-blue-800",children:un(`Top5  ${Tn}  ${ws} `,"top5Share","text-[11px] text-blue-800")}),a.jsxs("div",{className:"space-y-1.5 overflow-y-auto pr-1",children:[aa.map((J,xe)=>a.jsx("button",{onClick:()=>Kt(J.code,J.name,J.regionId),className:`w-full rounded-md border px-2 py-2 text-left ${Me===J.regionId?"border-blue-300 bg-blue-50":"border-gray-200 bg-white hover:bg-gray-50"}`,children:a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("div",{className:"flex items-center gap-1.5 min-w-0",children:[a.jsx("span",{className:"w-5 h-5 shrink-0 rounded-full bg-gray-100 text-gray-700 text-[11px] font-semibold flex items-center justify-center",children:xe+1}),a.jsx("span",{className:"text-[12px] font-medium text-gray-800 truncate",children:J.name})]}),a.jsx("span",{className:"text-[12px] font-semibold text-gray-900",children:Zb(he,J.kpiValue)})]})},J.regionId)),aa.length===0&&a.jsx("div",{className:"rounded border border-dashed border-gray-200 bg-gray-50 px-2 py-3 text-[11px] text-gray-500",children:"     "})]})]})]}),a.jsx("div",{className:`${Qt==="desktop"?"min-w-0 min-h-0 flex flex-col overflow-hidden":"w-full shrink-0"} ${fi}`,children:a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden flex flex-col flex-1",children:[a.jsx("div",{className:"px-4 py-3 border-b border-gray-200 bg-white rounded-t-lg",children:a.jsxs("div",{className:"flex items-center justify-between gap-2 flex-wrap",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:ft,disabled:!Ye,className:`flex items-center gap-1 h-8 px-3 text-sm rounded-lg transition-colors font-medium ${Ye?"text-blue-600 bg-blue-50 hover:bg-blue-100":"text-gray-400 bg-gray-100 cursor-not-allowed"}`,children:[a.jsx(dm,{className:"h-4 w-4"}),a.jsx("span",{children:""})]}),a.jsx("button",{onClick:De,className:"h-8 px-3 text-xs rounded-lg border border-gray-200 text-gray-600 hover:bg-gray-50",children:""}),a.jsx("span",{className:"text-sm font-semibold text-gray-800",children:ic})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"rounded-md border border-blue-200 bg-blue-50 px-3 py-1.5 text-xs font-semibold text-blue-700",children:""}),a.jsx("div",{className:"flex rounded-md border border-gray-200 overflow-hidden",children:_o.map(J=>a.jsx("button",{onClick:()=>br(J.kpi),className:`px-2.5 py-1.5 text-[11px] font-medium transition border-l first:border-l-0 ${Tr===J.key?"bg-slate-700 text-white border-slate-700":"bg-white text-gray-600 border-gray-200 hover:bg-gray-100"}`,title:`${J.label}  `,children:J.label},J.key))}),a.jsx("div",{className:"flex items-center gap-0.5",children:["7d","30d","90d"].map(J=>a.jsx("button",{onClick:()=>cn(J),className:`rounded-md px-3 py-1.5 text-xs font-medium transition ${pe===J?"bg-blue-600 text-white":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,children:Op[J]},J))})]})]})}),a.jsx("div",{className:"px-4 py-2 border-b border-gray-100 bg-gray-50",children:a.jsx("div",{className:"flex items-center gap-1.5 overflow-x-auto",children:ll.map((J,xe)=>a.jsxs(Y.Fragment,{children:[xe>0&&a.jsx(di,{className:"h-3.5 w-3.5 text-gray-400 shrink-0"}),a.jsx("button",{onClick:()=>hr(xe),className:`text-[11px] whitespace-nowrap ${xe===ll.length-1?"font-semibold text-blue-700":"text-gray-600 hover:text-blue-700"}`,children:J.label})]},`${J.level}-${J.id}-${xe}`))})}),a.jsxs("div",{className:"px-4 py-2 border-b border-gray-100 bg-white",children:[a.jsx("div",{className:"text-[12px] font-medium text-gray-700 truncate",children:un(Ma,"insightHeadline")}),a.jsx("div",{className:"mt-1.5 flex flex-wrap gap-1.5",children:Gi.map(J=>a.jsx("span",{title:J.tooltip,className:"rounded-full border border-gray-200 bg-gray-50 px-2 py-0.5 text-[10px] text-gray-600",children:J.label},J.label))}),a.jsx("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-3 gap-2",children:Bi.map(J=>{const xe=n3e(J.points.map(Je=>Je.v),124,28),Le=xe.map((Je,ht)=>`${ht===0?"M":"L"} ${Je.x} ${Je.y}`).join(" "),Ze=xe[xe.length-1],lt=J.delta>0?"text-red-600":J.delta<0?"text-blue-600":"text-gray-500";return a.jsxs("div",{className:"rounded-md border border-gray-200 bg-gray-50 px-2 py-1.5",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("span",{className:"text-[10px] text-gray-500",children:J.label}),a.jsx("span",{className:`text-[10px] font-semibold ${lt}`,children:r3e(J.delta,J.unit)})]}),a.jsxs("div",{className:"flex items-end justify-between gap-2 mt-0.5",children:[a.jsx("span",{className:"text-[12px] font-semibold text-gray-800",children:t3e(J.value,J.unit)}),a.jsxs("svg",{viewBox:"0 0 124 28",className:"h-7 w-[124px] shrink-0",children:[a.jsx("path",{d:Le,fill:"none",stroke:Dr.color,strokeWidth:"1.8",strokeLinecap:"round"}),Ze?a.jsx("circle",{cx:Ze.x,cy:Ze.y,r:"2.5",fill:Dr.color}):null]})]})]},J.key)})})]}),a.jsxs("div",{className:"relative p-2 min-h-0",children:[a.jsxs("div",{className:"absolute left-4 top-4 z-20 w-[min(420px,calc(100%-2rem))] rounded-lg border border-blue-200 bg-white/95 backdrop-blur px-3 py-2 shadow-sm",children:[a.jsx("div",{className:"text-[12px] font-semibold text-blue-800",children:" "}),a.jsx("div",{className:"text-[12px] text-gray-700 mt-1 leading-relaxed",children:Ws})]}),a.jsx(G3,{title:"",indicatorId:hn,year:2026,scope:{mode:"regional",ctprvnCodes:[e.ctprvnCode],label:e.label},variant:"portal",mapHeight:Pr,hideBreadcrumb:!0,onRegionSelect:ot,externalColorScheme:na,hideLegendPanel:!0,externalLevel:R,externalSelectedCode:k,onSubRegionsChange:pt,getTooltipExtraLines:de})]}),a.jsxs("div",{className:"mx-2 mb-2 px-3 py-2 rounded-lg bg-gradient-to-r from-gray-50 to-gray-100/80 border border-gray-200/60 shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full",style:{backgroundColor:Dr.color}}),a.jsxs("span",{className:"text-[12px] font-bold text-gray-600 tracking-wide",children:[Tn,"  "]}),a.jsx("span",{className:"text-[11px] text-gray-400",children:":  "})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-[12px] font-semibold text-gray-500 tabular-nums min-w-[42px] text-right",children:Dr.unit===""?`${Math.round(Es)}`:Dr.unit===""?`${Math.round(Es)}`:Dr.unit===""?`${Math.round(Es)}`:`${Es.toFixed(1)}%`}),a.jsx("div",{className:"flex-1 h-3 rounded-md overflow-hidden flex shadow-inner",children:(zd[na]||zd.blue).map((J,xe)=>a.jsx("div",{className:"flex-1",style:{backgroundColor:J}},xe))}),a.jsx("span",{className:"text-[12px] font-semibold text-gray-500 tabular-nums min-w-[42px]",children:Dr.unit===""?`${Math.round(Va)}`:Dr.unit===""?`${Math.round(Va)}`:Dr.unit===""?`${Math.round(Va)}`:`${Va.toFixed(1)}%`})]})]})]})}),a.jsxs("div",{className:`${Qt==="desktop"?"min-w-0 min-h-0 overflow-hidden":Qt==="tablet"?"hidden":"w-full shrink-0"} flex flex-col gap-2 ${fi}`,children:[a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3 shrink-0",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"2.  ( )"}),a.jsx("span",{className:"text-[11px] px-1.5 py-0.5 bg-indigo-50 text-indigo-600 rounded border border-indigo-200",children:an})]}),a.jsx("div",{className:"text-[11px] text-gray-500 mb-1",children:"  /  3 "}),a.jsxs("div",{className:"text-[12px] text-gray-500",children:[" : ",a.jsx("span",{className:"font-medium text-gray-700",children:Tn}),"  :  "]}),d?a.jsx("button",{type:"button",onClick:()=>d("cause"),className:"mt-2 text-[11px] text-blue-700 hover:text-blue-800 underline underline-offset-2",children:"     "}):null]}),a.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto overscroll-contain pr-1 space-y-2",children:ee?a.jsxs("div",{className:"space-y-2",children:[a.jsx(e8,{height:176}),a.jsx(e8,{height:176})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[a.jsx("div",{className:"grid grid-cols-1 gap-1.5",children:Nu.map(J=>a.jsxs("div",{className:"rounded border border-gray-100 bg-gray-50 px-2 py-1.5",children:[a.jsx("div",{className:"text-[10px] text-gray-500",children:J.label}),a.jsx("div",{className:"text-[12px] font-medium text-gray-800 mt-0.5",children:J.value})]},J.label))}),a.jsxs("div",{className:"mt-2 rounded border border-gray-100 bg-gray-50 px-2 py-2",children:[a.jsx("div",{className:"text-[11px] font-semibold text-gray-700 mb-1",children:" Top3"}),a.jsx("div",{className:"space-y-1",children:Nr.slice(0,3).map((J,xe)=>a.jsxs("div",{className:"flex items-center justify-between text-[11px]",children:[a.jsxs("span",{className:"text-gray-700",children:[xe+1,". ",J.name]}),a.jsx("span",{className:"font-semibold text-gray-900",children:gr(J)})]},`${J.name}-${xe}`))})]})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"3.  ( )"}),a.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded border border-emerald-200 bg-emerald-50 text-emerald-700",children:" "})]}),a.jsx("div",{className:"text-[11px] text-gray-500 mb-1.5",children:"    "}),d?a.jsx("button",{type:"button",onClick:()=>d("interventions"),className:"mb-2 text-[11px] text-blue-700 hover:text-blue-800 underline underline-offset-2",children:"/   "}):null,a.jsx("div",{className:"space-y-1.5",children:xi.map(J=>a.jsxs("button",{onClick:()=>F(J.id),className:`w-full rounded border px-2 py-2 text-left ${X===J.id?"border-blue-300 bg-blue-50":"border-gray-200 bg-white hover:bg-gray-50"}`,children:[a.jsx("div",{className:"text-[12px] font-medium text-gray-800",children:J.title}),a.jsx("div",{className:"text-[11px] text-gray-600 mt-0.5",children:J.detail}),a.jsx("div",{className:"text-[11px] text-blue-700 mt-1",children:J.expected})]},J.id))}),a.jsx("button",{onClick:()=>l?.({kpi:he,sgg:rt,range:ye,source:"overview",primaryDriverStage:Rn?.stage??Sr.primaryDriverStage}),className:"mt-2.5 w-full h-9 rounded-md text-[12px] font-semibold text-white bg-blue-600 hover:bg-blue-700",children:" "})]})]})})]})]})})]})}function o3e({regionCode:e,regionLabel:t,userRole:r="center_director"}){const n=r==="center_director",[s,i]=h.useState(!1),[o,l]=h.useState(()=>BW(e)),d=h.useCallback((y,N)=>{l(v=>({...v,thresholds:{...v.thresholds,[y]:N}})),i(!1)},[]),u=h.useCallback((y,N)=>{l(v=>({...v,weights:{...v.weights,[y]:N}})),i(!1)},[]),m=h.useCallback(y=>{l(N=>({...N,notifications:{...N.notifications,[y]:!N.notifications[y]}})),i(!1)},[]),p=h.useCallback(()=>{sRe(e,o),i(!0),setTimeout(()=>i(!1),3e3)},[e,o]),g=h.useCallback(()=>{l({...Y0}),i(!1)},[]),x=h.useMemo(()=>{const y=o.weights;return Number((y.slaBreachRate+y.notReachedRate+y.avgWaitTimeNorm+y.longWaitRate).toFixed(2))},[o.weights]);return a.jsxs("div",{className:"p-6 max-w-4xl mx-auto space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-bold text-gray-800",children:""}),a.jsxs("p",{className:"text-sm text-gray-500 mt-0.5",children:[t,"     "]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[s&&a.jsxs("span",{className:"flex items-center gap-1 text-green-600 text-sm font-medium animate-pulse",children:[a.jsx(Yo,{className:"h-4 w-4"}),"  "]}),a.jsx("button",{onClick:g,disabled:!n,className:"px-3 py-1.5 text-xs border border-gray-300 rounded-lg text-gray-600 hover:bg-gray-50 disabled:opacity-40 disabled:cursor-not-allowed",children:" "}),a.jsxs("button",{onClick:p,disabled:!n,className:"flex items-center gap-1.5 px-4 py-1.5 text-xs font-semibold bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-40 disabled:cursor-not-allowed shadow-sm",children:[a.jsx(iR,{className:"h-3.5 w-3.5"}),""]})]})]}),a.jsxs("section",{className:"bg-white border border-gray-200 rounded-xl p-5",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(RX,{className:"h-4.5 w-4.5 text-indigo-600"}),a.jsx("h3",{className:"text-sm font-bold text-gray-800",children:" "}),a.jsx("span",{className:"text-[10px] bg-gray-100 text-gray-500 px-2 py-0.5 rounded-full",children:" "})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-3",children:[a.jsx("div",{className:"text-[10px] text-indigo-500 font-medium mb-1",children:" "}),a.jsx("div",{className:"text-sm font-semibold text-indigo-800",children:"case_id ( )"}),a.jsx("div",{className:"text-[10px] text-indigo-400 mt-1",children:"     1 "})]}),a.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-3",children:[a.jsx("div",{className:"text-[10px] text-indigo-500 font-medium mb-1",children:" "}),a.jsx("div",{className:"text-sm font-semibold text-indigo-800",children:"event_id/signal_id  "}),a.jsx("div",{className:"text-[10px] text-indigo-400 mt-1",children:"  signal   "})]}),a.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-3",children:[a.jsx("div",{className:"text-[10px] text-indigo-500 font-medium mb-1",children:"  "}),a.jsx("div",{className:"text-sm font-semibold text-indigo-800",children:"   "}),a.jsx("div",{className:"text-[10px] text-indigo-400 mt-1",children:" KPI       "})]})]})]}),a.jsxs("section",{className:"bg-white border border-gray-200 rounded-xl p-5",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(vU,{className:"h-4.5 w-4.5 text-orange-600"}),a.jsx("h3",{className:"text-sm font-bold text-gray-800",children:" / "}),!n&&a.jsx(tu,{className:"h-3.5 w-3.5 text-gray-400"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"   (thresholdDays)"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"number",min:1,max:90,value:o.thresholds.longWaitDays,onChange:y=>d("longWaitDays",Number(y.target.value)),disabled:!n,className:"w-24 px-3 py-1.5 border border-gray-300 rounded-lg text-sm disabled:bg-gray-100 disabled:cursor-not-allowed focus:ring-1 focus:ring-blue-500 focus:outline-none"}),a.jsx("span",{className:"text-xs text-gray-500",children:""}),a.jsxs("span",{className:"text-[10px] text-gray-400 ml-2",children:["  ",o.thresholds.longWaitDays,'    " "']})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"SLA   (slaNearDays)"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"number",min:1,max:30,value:o.thresholds.slaNearDays,onChange:y=>d("slaNearDays",Number(y.target.value)),disabled:!n,className:"w-24 px-3 py-1.5 border border-gray-300 rounded-lg text-sm disabled:bg-gray-100 disabled:cursor-not-allowed focus:ring-1 focus:ring-blue-500 focus:outline-none"}),a.jsx("span",{className:"text-xs text-gray-500",children:""}),a.jsxs("span",{className:"text-[10px] text-gray-400 ml-2",children:["SLA  ",o.thresholds.slaNearDays,'  ""']})]})]})]}),a.jsxs("div",{className:"border-t border-gray-100 pt-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("span",{className:"text-xs font-semibold text-gray-700",children:"Top5   (w1~w4)"}),a.jsxs("span",{className:`text-[10px] font-medium px-2 py-0.5 rounded-full ${x===1?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:[": ",x," ",x===1?"":" 1.00"]})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{key:"slaBreachRate",label:"w1  SLA ",color:"text-red-600"},{key:"notReachedRate",label:"w2  ",color:"text-orange-600"},{key:"avgWaitTimeNorm",label:"w3  ",color:"text-purple-600"},{key:"longWaitRate",label:"w4  ",color:"text-blue-600"}].map(({key:y,label:N,color:v})=>a.jsxs("div",{children:[a.jsx("label",{className:`text-[10px] font-medium ${v} block mb-1`,children:N}),a.jsx("input",{type:"number",min:0,max:1,step:.05,value:o.weights[y],onChange:S=>u(y,Number(S.target.value)),disabled:!n,className:"w-full px-3 py-1.5 border border-gray-300 rounded-lg text-sm disabled:bg-gray-100 disabled:cursor-not-allowed focus:ring-1 focus:ring-blue-500 focus:outline-none"})]},y))}),a.jsx("div",{className:"mt-2 text-[10px] text-gray-400",children:"risk_score = w1SLA + w2 + w3() + w4"})]})]}),a.jsxs("section",{className:"bg-white border border-gray-200 rounded-xl p-5",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(ih,{className:"h-4.5 w-4.5 text-yellow-600"}),a.jsx("h3",{className:"text-sm font-bold text-gray-800",children:" "}),!n&&a.jsx(tu,{className:"h-3.5 w-3.5 text-gray-400"})]}),a.jsx("div",{className:"space-y-3",children:[{key:"slaBreachAlert",label:"SLA  ",desc:"SLA     ",ready:!0},{key:"slaImminentAlert",label:"SLA  ",desc:"SLA  N  ",ready:!0},{key:"longWaitSurge",label:"  ",desc:"    30%   ",ready:!1},{key:"riskIncrease",label:"  ",desc:"     ",ready:!1}].map(({key:y,label:N,desc:v,ready:S})=>a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-100 hover:bg-gray-50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ss,{className:`h-4 w-4 ${o.notifications[y]?"text-yellow-500":"text-gray-300"}`}),a.jsxs("div",{children:[a.jsxs("div",{className:"text-xs font-medium text-gray-800 flex items-center gap-1.5",children:[N,!S&&a.jsx("span",{className:"text-[9px] bg-gray-100 text-gray-400 px-1.5 py-0.5 rounded-full",children:""})]}),a.jsx("div",{className:"text-[10px] text-gray-500",children:v})]})]}),a.jsx("button",{onClick:()=>m(y),disabled:!n,className:`relative w-10 h-5.5 rounded-full transition-colors disabled:opacity-40 disabled:cursor-not-allowed ${o.notifications[y]?"bg-blue-500":"bg-gray-300"}`,style:{height:"22px"},children:a.jsx("span",{className:"absolute top-0.5 w-4 h-4 rounded-full bg-white shadow transition-transform",style:{left:o.notifications[y]?"22px":"2px"}})})]},y))})]}),a.jsxs("section",{className:"bg-white border border-gray-200 rounded-xl p-5",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(Yl,{className:"h-4.5 w-4.5 text-green-600"}),a.jsx("h3",{className:"text-sm font-bold text-gray-800",children:" / "})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-green-50 border border-green-200",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"w-6 h-6 rounded-full bg-green-500 text-white flex items-center justify-center text-[10px] font-bold",children:""}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-medium text-green-800",children:""}),a.jsx("div",{className:"text-[10px] text-green-600",children:"   "})]})]}),a.jsx("span",{className:`text-[10px] font-semibold px-2 py-0.5 rounded-full ${n?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:n?" ":""})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-100",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"w-6 h-6 rounded-full bg-gray-400 text-white flex items-center justify-center text-[10px] font-bold",children:""}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-medium text-gray-700",children:" "}),a.jsx("div",{className:"text-[10px] text-gray-500",children:"     "})]})]}),a.jsx("span",{className:`text-[10px] font-semibold px-2 py-0.5 rounded-full ${n?"":"bg-gray-100 text-gray-600"}`,children:n?"":" "})]})]}),a.jsxs("div",{className:"mt-3 text-[10px] text-gray-400",children:[" : localStorage  regional.settings.",e,".*    "]})]})]})}const UO={regionalSla:" SLA",regionalQueueRisk:" ( )",regionalRecontact:"  ",regionalDataReadiness:"  ",regionalGovernance:"  ",regionalAdTransitionHotspot:"AD  ",regionalDxDelayHotspot:" ",regionalScreenToDxRate:" "},Ok={contact:"",recontact:"",L2:"L2","3rd":"3"},l3e=["contact","recontact","L2","3rd"],a8={week:"",month:"",quarter:""},Jb={center:"",hospital:"",system:"",external:""},s8={high:"High",medium:"Med",low:"Low"},c3e={watch:"bg-amber-50 text-amber-700 border-amber-200",critical:"bg-red-50 text-red-700 border-red-200"},X0={count:"",ratio:""},i8={call_log:"",appointment:"",integration:"",manual:""},o8={high:"High",med:"Med",low:"Low"},d3e={high:"border-emerald-200 bg-emerald-50 text-emerald-700",med:"border-amber-200 bg-amber-50 text-amber-700",low:"border-rose-200 bg-rose-50 text-rose-700"},O_={backlogType:{snapshot_waiting:" ",period_accumulated:" "},denominator:{overall:" ",stage:"Stage ",cause:" "},areaOwnership:{resident:" ",center:" ",hospital:"  "}},u3e={none:"bg-gray-50 text-gray-600 border-gray-200",watch:"bg-amber-50 text-amber-700 border-amber-200",critical:"bg-red-50 text-red-700 border-red-200"},aV=[{causeKey:"staff_shortage",causeLabel:"  ",owner:"center",actionable:!0,regionalNeed:"high"},{causeKey:"contact_failure",causeLabel:" ",owner:"center",actionable:!0,regionalNeed:"high"},{causeKey:"data_gap",causeLabel:" ",owner:"system",actionable:!0,regionalNeed:"medium"},{causeKey:"hospital_slot_delay",causeLabel:"  ",owner:"hospital",actionable:!1,regionalNeed:"high"},{causeKey:"external_dependency",causeLabel:"  ",owner:"external",actionable:!1,regionalNeed:"medium"}],f3e={contact:["contact_failure","staff_shortage","data_gap"],recontact:["contact_failure","staff_shortage","external_dependency"],L2:["data_gap","hospital_slot_delay","staff_shortage"],"3rd":["hospital_slot_delay","external_dependency","data_gap"]},p3e={staff_shortage:{contact:1.2,recontact:1.15,L2:.95,"3rd":.9},contact_failure:{contact:1.28,recontact:1.35,L2:.8,"3rd":.78},data_gap:{contact:.84,recontact:.88,L2:1.2,"3rd":1.16},hospital_slot_delay:{contact:.7,recontact:.76,L2:1.22,"3rd":1.32},external_dependency:{contact:.75,recontact:.83,L2:1.06,"3rd":1.24}},m3e={staff_shortage:["    "," 2    ","48   "],contact_failure:["     ","   ","    "],data_gap:["     ","     ","24   "],hospital_slot_delay:["     ","     ","    "],external_dependency:["    ","    ","     "]};function za(e){let t=0;for(let r=0;r<e.length;r+=1)t=t*31+e.charCodeAt(r)>>>0;return t}function ka(e,t,r){return t+(r-t)*(za(e)%1e3/1e3)}function sV(e,t,r){return Math.max(t,Math.min(r,e))}function l8(e){return e==="contact"||e==="recontact"||e==="L2"||e==="3rd"?e:null}function h3e(e){return e==="week"||e==="month"||e==="quarter"?e:null}function g3e(e){return e?e in UO:!1}function fo(e){return`${Math.round(e).toLocaleString()}`}function Uo(e){return`${e.toFixed(1)}%`}function c8(e,t){return e==="count"?fo(t):Uo(t)}function x3e(e){const t=l3e.map((n,s)=>{const i=Math.round(ka(`${e}-${n}-count`,82+s*12,360+s*20)),o=Math.round(ka(`${e}-${n}-dwell`,48+s*28,420+s*35)),l=Number(ka(`${e}-${n}-delta`,-18,22).toFixed(1)),d=f3e[n].slice(0,2).map((u,m)=>({causeKey:u,ratio:Number(ka(`${e}-${n}-${u}-top-${m}`,14,44-m*6).toFixed(1))}));return{stageKey:n,stageLabel:Ok[n],count:i,avgDwellMinutes:o,deltaVsRegionalAvg:l,topCauses:d}}),r=t.reduce((n,s)=>n+s.count,0);return t.map(n=>({...n,ratio:r>0?Number((n.count/r*100).toFixed(1)):0}))}function b3e(e,t,r){const n=aV.map(i=>{const o=t?p3e[i.causeKey]?.[t]??1:1,l=r?1+(za(`${r}-${i.causeKey}`)%120-60)/700:1,d=Math.max(8,Math.round(ka(`${e}-${i.causeKey}-count`,42,260)*o*l)),u=["call_log","appointment","integration","manual"],m=u[za(`${e}-${i.causeKey}-evidence-type`)%u.length],p=["high","med","low"],g=p[za(`${e}-${i.causeKey}-evidence-confidence`)%p.length],x=za(`${e}-${i.causeKey}-evidence-link`)%100>=23,y=["  "," ","  ","   "],N=y[za(`${e}-${i.causeKey}-missing`)%y.length];return{...i,count:d,evidence:{type:m,link:x?`/regional/bottleneck?cause=${i.causeKey}`:null,confidence:g,...x?{}:{missingReason:N}}}}).sort((i,o)=>o.count-i.count),s=n.reduce((i,o)=>i+o.count,0);return n.map(i=>({causeKey:i.causeKey,causeLabel:i.causeLabel,ratio:s>0?Number((i.count/s*100).toFixed(1)):0,count:i.count,meta:{owner:i.owner,actionable:i.actionable,regionalNeed:i.regionalNeed},evidence:i.evidence}))}function y3e(e,t,r,n){const s=t.slice(0,Math.min(10,t.length));if(!s.length)return[];const i=r?1+za(`${r}-weight`)%90/200:1,o=n?1+za(`${n}-weight`)%70/220:1,l=s.map(p=>{const g=Math.round(ka(`${e}-area-${p}-count`,36,220)*i*o);return{areaKey:p,areaLabel:p,count:g}}),d=l.reduce((p,g)=>p+g.count,0),u=l.map(p=>({...p,ratio:d>0?Number((p.count/d*100).toFixed(1)):0})),m=u.reduce((p,g)=>p+g.ratio,0)/Math.max(1,u.length);return u.map(p=>{const g=Number((p.ratio-m).toFixed(1)),x=Math.abs(g),y=x>=8?"critical":x>=4?"watch":"none";return{...p,deltaVsAvg:g,highlightLevel:y}}).sort((p,g)=>g.ratio-p.ratio)}function v3e(e,t,r,n,s){const i=t==="week"?7:t==="month"?8:12,o=Array.from({length:i},(y,N)=>t==="week"?`D-${i-1-N}`:t==="month"?`W-${i-1-N}`:`M-${i-1-N}`),l=s?za(`${s}-trend-bias`)%90/18:0,d=n?za(`${n}-trend-bias`)%60/20:0,u=r?za(`${r}-trend-bias`)%70/18:0,m=ka(`${e}-trend-base-count`,80,220)+l+d+u,p=ka(`${e}-trend-slope-count`,-6,9),g=ka(`${e}-trend-base-ratio`,10,36)+u/3,x=ka(`${e}-trend-slope-ratio`,-1.2,1.8);return o.map((y,N)=>{const v=ka(`${e}-${y}-count-noise`,-14,14),S=ka(`${e}-${y}-ratio-noise`,-1.8,1.8),E=Math.max(1,Math.round(m+p*N+v)),C=Number(sV(g+x*N+S,0,100).toFixed(1));return{dateKey:y,count:E,ratio:C}})}function iV(e){const t=za(`${e}-backlog-type`)%100<82?"snapshot_waiting":"period_accumulated",r=["overall","stage","cause"],n=r[za(`${e}-denominator`)%r.length],s=["center","resident","hospital"],i=s[za(`${e}-area-ownership`)%s.length];return{backlogType:t,denominator:n,areaOwnership:i}}function Rk(e,t,r){const n=t?za(`${t}-coverage`)%16-8:0,s=r?za(`${r}-coverage`)%14-7:0,i=sV(Number((ka(`${e}-classified`,64,94)+n+s).toFixed(1)),28,98),o=Number((100-i).toFixed(1)),l=["system","center","hospital","external"],d=l[za(`${e}-unclassified-owner`)%l.length];return{classifiedRatio:i,unclassifiedRatio:o,unclassifiedOwner:d}}function N3e(e,t){if(e.length<3)return[];const r=[],n=e.map(u=>t==="count"?u.count:u.ratio);let s=1;for(let u=n.length-1;u>0&&n[u]>n[u-1];u-=1)s+=1;if(s>=3){const u=Number((n[n.length-1]-n[Math.max(0,n.length-s)]).toFixed(1));r.push({type:"increasing_streak",metric:t,days:s,severity:s>=5?"critical":"watch",delta:u})}const i=n.slice(-Math.min(5,n.length));if(!i.some((u,m)=>m>0&&u<i[m-1])&&i.length>=4&&i[i.length-1]>=i[0]){const u=Number((i[i.length-1]-i[0]).toFixed(1));r.push({type:"no_decrease",metric:t,days:i.length,severity:i.length>=5?"critical":"watch",delta:u})}const l=Math.max(1,n.length-4),d=n.slice(l-1);if(d.length>=4&&d[1]<d[0]&&d[2]>d[1]&&d[3]>d[2]){const u=Number((d[3]-d[1]).toFixed(1));r.push({type:"rebound",metric:t,days:2,severity:"watch",delta:u})}return r}function S3e(e){return[{stage:"Stage1 (ML)",signal:Number(ka(`${e}-stage1-signal`,-16,20).toFixed(1)),queue:Math.round(ka(`${e}-stage1-queue`,-20,48)),desc:"       "},{stage:"Stage2 (ANN)",signal:Number(ka(`${e}-stage2-signal`,-14,18).toFixed(1)),queue:Math.round(ka(`${e}-stage2-queue`,-18,42)),desc:"   2    "},{stage:"Stage3 (CNN)",signal:Number(ka(`${e}-stage3-signal`,-12,16).toFixed(1)),queue:Math.round(ka(`${e}-stage3-queue`,-16,38)),desc:"   3     "}]}function E3e(e,t,r){return{stageBacklogBreakdown:x3e(`${e}-stage`),kpiDefinition:iV(`${e}-definition`),classificationCoverage:Rk(`${e}-coverage`,t,r)}}function j3e(e,t,r){return{causes:b3e(`${e}-causes`,t,r),coverage:Rk(`${e}-coverage`,t,null)}}function w3e(e,t,r,n,s,i){const o=v3e(e,t,r,n,s),l=N3e(o,i);return{metric:i,points:o.map(d=>({dateKey:d.dateKey,value:i==="count"?d.count:d.ratio,count:d.count,ratio:d.ratio})),alerts:l}}function A3e(e,t,r,n){const s=t.reduce((l,d)=>l+d.count,0),i=t.reduce((l,d)=>l+d.avgDwellMinutes*d.count,0)/Math.max(1,s);return{kpiValue:(()=>{if(e==="regionalQueueRisk")return s;if(e==="regionalDxDelayHotspot")return Number((i/60).toFixed(1));if(e==="regionalSla"){const l=t.find(d=>d.stageKey==="recontact")?.ratio??t[0]?.ratio??0;return Number((100-l).toFixed(1))}return Number(e==="regionalRecontact"?(r.find(l=>l.causeKey==="contact_failure")?.ratio??r[0]?.ratio??0).toFixed(1):e==="regionalDataReadiness"?(100-(r.find(l=>l.causeKey==="data_gap")?.ratio??0)).toFixed(1):e==="regionalGovernance"?(100-n.unclassifiedRatio).toFixed(1):e==="regionalAdTransitionHotspot"?(r[0]?.ratio??0).toFixed(1):e==="regionalScreenToDxRate"?(100-(r.find(l=>l.causeKey==="hospital_slot_delay")?.ratio??0)).toFixed(1):(r[0]?.ratio??0).toFixed(1))})(),backlogCount:s,avgDwellMin:Number(i.toFixed(1)),stageBreakdown:t,causeBreakdownTop5:r.slice(0,5),coverage:n}}async function _3e(e){const t="regional_bottleneck_intervention_snapshots_v1",r=window.localStorage.getItem(t),n=r?JSON.parse(r):[],s=`INT-${Date.now()}`,i=`SNAP-${Date.now()}`;return n.unshift({snapshotId:i,interventionId:s,createdAt:new Date().toISOString(),payload:e}),window.localStorage.setItem(t,JSON.stringify(n.slice(0,200))),{interventionId:s,snapshotId:i,redirectUrl:`/regional/interventions/new?interventionId=${s}&snapshotId=${i}`}}function C3e(e,t,r,n,s,i,o){const l=s?r.find(p=>p.stageKey===s)??r[0]:r[0],d=o?n.find(p=>p.areaKey===o)??n[0]:n[0];return(i?t.filter(p=>p.causeKey===i):t.slice(0,3)).filter(p=>!!(p&&typeof p.ratio=="number"&&typeof p.count=="number")).slice(0,3).map((p,g)=>{const x=Number((p.ratio*.62+(l?.ratio??0)*.22+Math.max(0,d?.deltaVsAvg??0)*.16).toFixed(1)),y=p.meta.owner,N=m3e[p.causeKey]??["    ","    ","   "];return{recId:`REC-${g+1}-${za(`${e}-${p.causeKey}`)}`,evidence:{causeKey:p.causeKey,causeLabel:p.causeLabel,stageKey:l?.stageKey??"contact",stageLabel:l?.stageLabel??Ok.contact,areaKey:d?.areaKey??null,areaLabel:d?.areaLabel??" "},action:{title:vt(`${p.causeLabel}    `),steps:N,ownerSuggested:y},expectedEffect:{qualitative:vt("       ")},priorityScore:x}})}function T3e(e){return e>=8?"text-red-700":e>=4?"text-amber-700":e<=-6?"text-blue-700":"text-gray-700"}function O3e(e,t=""){return`${e>0?"+":""}${e.toFixed(1)}${t}`}function R3e(e){const t=X0[e.metric],r=e.metric==="ratio"?`${e.delta>0?"+":""}${e.delta.toFixed(1)}%p`:`${e.delta>0?"+":""}${Math.round(e.delta)}`;return e.type==="increasing_streak"?`${t} ${e.days}  (${r})`:e.type==="no_decrease"?`${t} ${e.days}  (${r})`:`${t}   (${r})`}function w0(){return a.jsxs("div",{className:"animate-pulse space-y-2",children:[a.jsx("div",{className:"h-4 w-1/3 rounded bg-gray-200"}),a.jsx("div",{className:"h-40 rounded bg-gray-100"}),a.jsx("div",{className:"h-4 w-2/3 rounded bg-gray-200"})]})}function k3e({region:e,districtOptions:t,selectedKpiKey:r,selectedRegionSgg:n,selectedRange:s,onSelectedKpiKeyChange:i,onSelectedRegionSggChange:o,onSelectedRangeChange:l,onCreateIntervention:d}){const u=h.useMemo(()=>new URLSearchParams(window.location.search),[]),[m,p]=h.useState(u.get("stageImpact")!=="0"),[g,x]=h.useState(l8(u.get("stage"))),[y,N]=h.useState(u.get("cause")||null),[v,S]=h.useState(u.get("trendMetric")==="count"?"count":"ratio"),[E,C]=h.useState(u.get("compareArea")||u.get("area")||null),_=h.useRef(null),A=h.useRef(null),T=h.useCallback(()=>{const q=new URLSearchParams(window.location.search),ye=q.get("kpi"),pe=q.get("sigungu"),he=h3e(q.get("period"));g3e(ye)&&ye!==r&&i(ye),pe!==null&&pe!==(n??"")&&o(pe||null),he&&he!==s&&l(he);const rt=q.get("stageImpact")!=="0",Me=l8(q.get("stage")),dt=q.get("cause")||null,St=q.get("compareArea")||q.get("area")||null,He=q.get("trendMetric")==="count"?"count":"ratio";p(Ye=>Ye===rt?Ye:rt),x(Ye=>Ye===Me?Ye:Me),N(Ye=>Ye===dt?Ye:dt),C(Ye=>Ye===St?Ye:St),S(Ye=>Ye===He?Ye:He)},[i,l,o,r,s,n]);h.useEffect(()=>{T()},[T]),h.useEffect(()=>{const q=()=>T();return window.addEventListener("popstate",q),()=>window.removeEventListener("popstate",q)},[T]),h.useEffect(()=>{E&&!t.includes(E)&&C(null)},[t,E]),h.useEffect(()=>(_.current&&window.clearTimeout(_.current),_.current=window.setTimeout(()=>{const q=new URL(window.location.href),ye=q.searchParams;ye.set("kpi",r),ye.set("period",s),n?ye.set("sigungu",n):ye.delete("sigungu"),ye.set("stageImpact",m?"1":"0"),g?ye.set("stage",g):ye.delete("stage"),y?ye.set("cause",y):ye.delete("cause"),E?ye.set("area",E):ye.delete("area"),E?ye.set("compareArea",E):ye.delete("compareArea"),ye.set("trendMetric",v);const pe=ye.toString();`?${pe}`!==q.search&&window.history.replaceState({},"",`${q.pathname}?${pe}${q.hash}`)},180),()=>{_.current&&window.clearTimeout(_.current)}),[E,y,r,s,n,g,m,v]);const R=h.useMemo(()=>({kpiKey:r,sigungu:n??"",period:s,stageImpactOn:m,selectedStage:g,selectedCauseKey:y,selectedCompareAreaKey:E,trendMetric:v}),[E,y,r,s,n,g,m,v]),I=h.useMemo(()=>`${e.id}-${R.sigungu||"all"}-${R.kpiKey}-${R.period}`,[R.kpiKey,R.period,R.sigungu,e.id]),k=Ml({queryKey:["regional-cause","summary",R.kpiKey,R.sigungu,R.period,R.selectedStage??"all",R.selectedCauseKey??"all",R.stageImpactOn?"impact-on":"impact-off"],queryFn:async()=>E3e(`${I}-summary`,R.selectedStage,R.selectedCauseKey),staleTime:3e4,placeholderData:q=>q}),w=Ml({queryKey:["regional-cause","causes",R.kpiKey,R.sigungu,R.period,R.selectedStage??"all",R.selectedCompareAreaKey??"all"],queryFn:async()=>j3e(`${I}-causes`,R.selectedStage,R.selectedCompareAreaKey),staleTime:3e4,placeholderData:q=>q}),L=Ml({queryKey:["regional-cause","area-comparison",R.kpiKey,R.sigungu,R.period,R.selectedStage??"all",R.selectedCauseKey??"all",R.selectedCompareAreaKey??"all"],queryFn:async()=>y3e(`${I}-area-${R.selectedCauseKey??"all"}`,t,R.selectedCauseKey,R.selectedStage),staleTime:3e4,placeholderData:q=>q}),H=Ml({queryKey:["regional-cause","trend",R.kpiKey,R.sigungu,R.period,R.selectedStage??"all",R.selectedCauseKey??"all",R.selectedCompareAreaKey??"all",R.trendMetric],queryFn:async()=>w3e(`${I}-trend`,R.period,R.selectedCauseKey,R.selectedStage,R.selectedCompareAreaKey,R.trendMetric),staleTime:3e4,placeholderData:q=>q}),B=h.useMemo(()=>S3e(`${I}-impact`),[I]),M=k.data?.stageBacklogBreakdown??[],G=k.data?.kpiDefinition??iV(`${I}-fallback-definition`),$=k.data?.classificationCoverage??Rk(`${I}-fallback-summary-cov`,g,y),z=w.data?.causes??[],U=w.data?.coverage??$,Z=L.data??[],re=H.data,X=re?.points??[],F=re?.alerts??[],te=h.useMemo(()=>C3e(`${I}-rec`,z,M,Z,g,y,E),[Z,I,z,E,y,g,M]),ne=k.isPending||w.isPending||L.isPending;h.useEffect(()=>{z.length&&(y&&z.some(q=>q.causeKey===y)||N(z[0].causeKey))},[z,y]),h.useEffect(()=>{!Z.length||!E||Z.some(q=>q.areaKey===E)||C(null)},[Z,E]);const se=h.useMemo(()=>z.find(q=>q.causeKey===y)??null,[z,y]),Ne=h.useMemo(()=>Z.find(q=>q.areaKey===E)??null,[Z,E]),fe=h.useMemo(()=>M.reduce((q,ye)=>q+ye.count,0),[M]),we=h.useMemo(()=>M.length?[...M].sort((q,ye)=>ye.count-q.count)[0]:null,[M]),ve=h.useMemo(()=>z.length?z[0]:null,[z]),Oe=h.useMemo(()=>Z.filter(q=>q.highlightLevel==="critical").length,[Z]),Fe=h.useCallback(q=>{const{x:ye=0,y:pe=0,width:he=0,payload:rt,index:Me,value:dt}=q??{},St=rt??(typeof Me=="number"?M[Me]:void 0),He=St?.ratio,Ye=St?.count??dt;return typeof He!="number"||typeof Ye!="number"?null:a.jsxs("text",{x:ye+he+8,y:pe+13,fill:"#374151",fontSize:11,children:[Uo(He),"  ",fo(Ye)]})},[M]),oe=h.useCallback(q=>{const{x:ye=0,y:pe=0,width:he=0,payload:rt,index:Me,value:dt}=q??{},St=rt??(typeof Me=="number"?z[Me]:void 0),He=St?.ratio,Ye=St?.count??dt;return typeof He!="number"||typeof Ye!="number"?null:a.jsxs("text",{x:ye+he+8,y:pe+13,fill:"#1f2937",fontSize:11,children:[Uo(He),"  ",fo(Ye)]})},[z]),le=h.useMemo(()=>{if(!X.length)return vt("  ");const q=X[X.length-1],ye=X0[v];return vt(`${q.dateKey}  ${ye} ${c8(v,q.value)} (  )`)},[v,X]),ge=iX({mutationFn:_3e}),_e=h.useCallback(q=>{const ye=q?.stage??g,pe=q?.causeKey??y,he=q?.area??E??n,rt=A3e(r,M,z,U),Me={...R,selectedStage:ye,selectedCauseKey:pe,selectedCompareAreaKey:he};ge.mutate({from:"bottleneck",queryState:Me,beforeSnapshot:rt},{onSuccess:({snapshotId:dt})=>{const St=ye?Ok[ye]:null;d?.({region:he??null,kpiKey:r,range:s,source:"cause",primaryDriverStage:St??void 0,selectedStage:ye??null,selectedCauseKey:pe??null,selectedArea:he??null,snapshotId:dt})}})},[U,z,ge,R,d,y,r,s,n,g,E,M]),ee=h.useCallback(q=>{x(q.evidence.stageKey),N(q.evidence.causeKey),C(q.evidence.areaKey),A.current?.scrollIntoView({behavior:"smooth",block:"start"})},[]);return a.jsxs("div",{className:"h-full overflow-auto bg-slate-50 px-4 py-3 space-y-3",children:[a.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-semibold text-slate-900",children:" "}),a.jsx("div",{className:"text-[12px] text-slate-500",children:"()  ()  () 2  "})]}),a.jsx("button",{onClick:()=>_e(),disabled:ge.isPending,className:"px-3 py-1.5 rounded-md bg-blue-600 text-white text-sm font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:ge.isPending?" ...":" "})]}),a.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-5 gap-2.5",children:[a.jsx("select",{value:r,onChange:q=>i(q.target.value),className:"px-2.5 py-2 border border-slate-300 rounded-lg text-sm text-slate-700 bg-white",children:Object.entries(UO).map(([q,ye])=>a.jsx("option",{value:q,children:ye},q))}),a.jsxs("select",{value:n??"",onChange:q=>o(q.target.value||null),className:"px-2.5 py-2 border border-slate-300 rounded-lg text-sm text-slate-700 bg-white",children:[a.jsxs("option",{value:"",children:[e.label," "]}),t.map(q=>a.jsx("option",{value:q,children:q},q))]}),a.jsxs("select",{value:s,onChange:q=>l(q.target.value),className:"px-2.5 py-2 border border-slate-300 rounded-lg text-sm text-slate-700 bg-white",children:[a.jsx("option",{value:"week",children:""}),a.jsx("option",{value:"month",children:""}),a.jsx("option",{value:"quarter",children:""})]}),a.jsxs("button",{onClick:()=>p(q=>!q),className:`px-2.5 py-2 border rounded-lg text-sm flex items-center justify-center gap-1 ${m?"border-indigo-300 bg-indigo-50 text-indigo-700":"border-slate-300 text-slate-700 hover:bg-slate-50"}`,children:["Stage  ",m?"ON":"OFF"," ",m?a.jsx(Zc,{className:"h-4 w-4"}):a.jsx(Ss,{className:"h-4 w-4"})]}),a.jsxs("div",{className:"px-2.5 py-2 border border-slate-200 rounded-lg text-xs text-slate-600 flex items-center bg-slate-50",children:["URL sync: ",n??" ","  ",a8[s]]})]}),a.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2 text-[11px]",children:[a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-2.5 py-1 text-slate-700",children:[" : ",O_.backlogType[G.backlogType],"  : ",O_.denominator[G.denominator],"  : ",O_.areaOwnership[G.areaOwnership]]}),a.jsxs("div",{className:"rounded-lg border border-indigo-200 bg-indigo-50 px-2.5 py-1 text-indigo-700",children:["   ",$.classifiedRatio.toFixed(1),"% /  ",$.unclassifiedRatio.toFixed(1),"%"]}),a.jsxs("div",{className:"rounded-lg border border-amber-200 bg-amber-50 px-2.5 py-1 text-amber-700",children:[" : ",Jb[$.unclassifiedOwner]]})]}),a.jsxs("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-2",children:[a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white px-3 py-2",children:[a.jsx("div",{className:"text-[11px] text-slate-500",children:"  "}),a.jsx("div",{className:"text-[16px] font-semibold text-slate-900",children:fo(fe)}),a.jsx("div",{className:"text-[11px] text-slate-500",children:" KPI    "})]}),a.jsxs("div",{className:"rounded-lg border border-red-200 bg-red-50 px-3 py-2",children:[a.jsx("div",{className:"text-[11px] text-red-600",children:" "}),a.jsx("div",{className:"text-[16px] font-semibold text-red-700",children:we?`${we.stageLabel} ${Uo(we.ratio)}`:"-"}),a.jsx("div",{className:"text-[11px] text-red-600",children:we?`${fo(we.count)}   ${O3e(we.deltaVsRegionalAvg,"%p")}`:"  "})]}),a.jsxs("div",{className:"rounded-lg border border-amber-200 bg-amber-50 px-3 py-2",children:[a.jsx("div",{className:"text-[11px] text-amber-700",children:" "}),a.jsx("div",{className:"text-[16px] font-semibold text-amber-800",children:ve?ve.causeLabel:"-"}),a.jsx("div",{className:"text-[11px] text-amber-700",children:ve?`${Uo(ve.ratio)}  ${fo(ve.count)}`:"  "})]}),a.jsxs("div",{className:"rounded-lg border border-blue-200 bg-blue-50 px-3 py-2",children:[a.jsx("div",{className:"text-[11px] text-blue-700",children:" "}),a.jsxs("div",{className:"text-[16px] font-semibold text-blue-800",children:[Oe,""]}),a.jsx("div",{className:"text-[11px] text-blue-700",children:"      "})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-12 gap-3",children:[a.jsxs("div",{className:"xl:col-span-5 bg-white border border-slate-200 rounded-xl p-3.5 relative shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"text-sm font-semibold text-slate-700",children:"  "}),a.jsx("div",{className:"text-[11px] text-slate-500",children:"Stage   /  "})]}),!M.length&&k.isPending?a.jsx(w0,{}):a.jsx("div",{className:"rounded-lg border border-slate-100 bg-slate-50/60 p-2",style:{height:312},children:a.jsx(Ta,{width:"100%",height:"100%",children:a.jsxs(mf,{data:M,margin:{top:12,right:104,left:-4,bottom:10},children:[a.jsx(ys,{strokeDasharray:"2 3",vertical:!1,stroke:"#e2e8f0"}),a.jsx(da,{dataKey:"stageLabel",tick:{fontSize:12,fill:"#64748b"},axisLine:!1,tickLine:!1}),a.jsx(Jn,{tick:{fontSize:11,fill:"#64748b"},axisLine:!1,tickLine:!1,width:26}),a.jsx(ln,{cursor:{fill:"#eff6ff"},content:({active:q,payload:ye})=>{if(!q||!ye?.length)return null;const pe=ye[0].payload;return a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white px-2.5 py-2 text-[11px] shadow-md",children:[a.jsx("div",{className:"font-semibold text-slate-800",children:pe.stageLabel}),a.jsxs("div",{className:"text-slate-700",children:[" ",Uo(pe.ratio),"   ",fo(pe.count)]}),a.jsxs("div",{className:"text-slate-600",children:[" : ",Math.round(pe.avgDwellMinutes),""]}),a.jsxs("div",{className:T3e(pe.deltaVsRegionalAvg),children:["    ",pe.deltaVsRegionalAvg>0?"+":"",pe.deltaVsRegionalAvg.toFixed(1),"%p"]}),a.jsxs("div",{className:"text-slate-600",children:[" Top2:"," ",pe.topCauses.map(he=>`${aV.find(Me=>Me.causeKey===he.causeKey)?.causeLabel??he.causeKey} ${Uo(he.ratio)}`).join("  ")]})]})}}),a.jsx("defs",{children:a.jsxs("linearGradient",{id:"stageBarFill",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:"#fb923c"}),a.jsx("stop",{offset:"100%",stopColor:"#f97316"})]})}),a.jsxs(ns,{dataKey:"count",radius:[5,5,0,0],onClick:q=>{x(ye=>ye===q.stageKey?null:q.stageKey)},children:[M.map(q=>a.jsx(yo,{fill:g===q.stageKey?"#dc2626":"url(#stageBarFill)",stroke:g===q.stageKey?"#991b1b":"#fb923c",strokeWidth:g===q.stageKey?1.2:0},q.stageKey)),a.jsx(Ns,{content:Fe})]})]})})}),a.jsx("div",{className:"mt-2 flex flex-wrap gap-1.5",children:M.map(q=>a.jsxs("button",{onClick:()=>x(ye=>ye===q.stageKey?null:q.stageKey),className:`px-2 py-1 rounded-md border text-[11px] transition-colors ${g===q.stageKey?"border-red-300 bg-red-50 text-red-700":"border-slate-200 text-slate-600 hover:bg-slate-50"}`,children:[q.stageLabel," ",Uo(q.ratio),"  ",fo(q.count)]},q.stageKey))}),k.isFetching&&M.length?a.jsx("div",{className:"absolute inset-0 rounded-xl bg-white/50 backdrop-blur-[1px] pointer-events-none"}):null]}),a.jsxs("div",{className:"xl:col-span-7 bg-white border border-slate-200 rounded-xl p-3.5 relative shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"text-sm font-semibold text-slate-700",children:"  TopN"}),a.jsx("div",{className:"text-[11px] text-slate-500",children:"   //  "})]}),a.jsxs("div",{className:"mb-2 flex flex-wrap gap-1.5",children:[a.jsxs("span",{className:"rounded border border-indigo-200 bg-indigo-50 px-2 py-0.5 text-[11px] text-indigo-700",children:["  ",U.classifiedRatio.toFixed(1),"%"]}),a.jsxs("span",{className:"rounded border border-amber-200 bg-amber-50 px-2 py-0.5 text-[11px] text-amber-700",children:[" ",U.unclassifiedRatio.toFixed(1),"%   ",Jb[U.unclassifiedOwner]]})]}),!z.length&&w.isPending?a.jsx(w0,{}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"rounded-lg border border-slate-100 bg-slate-50/60 p-2",style:{height:312},children:a.jsx(Ta,{width:"100%",height:"100%",children:a.jsxs(mf,{data:z,layout:"vertical",margin:{top:10,right:114,left:16,bottom:10},children:[a.jsx(ys,{strokeDasharray:"2 3",horizontal:!1,stroke:"#e2e8f0"}),a.jsx(da,{type:"number",tick:{fontSize:11,fill:"#64748b"},axisLine:!1,tickLine:!1}),a.jsx(Jn,{dataKey:"causeLabel",type:"category",width:120,tick:{fontSize:11,fill:"#64748b"},axisLine:!1,tickLine:!1}),a.jsx(ln,{cursor:{fill:"#fff7ed"},content:({active:q,payload:ye})=>{if(!q||!ye?.length)return null;const pe=ye[0].payload,he=pe.meta.actionable?"   ":"   (/  )";return a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white px-2.5 py-2 text-[11px] shadow-md",children:[a.jsx("div",{className:"font-semibold text-slate-800",children:pe.causeLabel}),a.jsxs("div",{className:"text-slate-700",children:[" ",Uo(pe.ratio),"   ",fo(pe.count)]}),a.jsxs("div",{className:"text-slate-600",children:[" : ",Jb[pe.meta.owner]]}),a.jsxs("div",{className:"text-slate-600",children:["  : ",s8[pe.meta.regionalNeed]]}),a.jsxs("div",{className:"text-slate-600",children:[": ",i8[pe.evidence.type],"   ",o8[pe.evidence.confidence]]}),pe.evidence.link?a.jsx("div",{className:"text-blue-700",children:"  "}):a.jsxs("div",{className:"text-amber-700",children:[" : ",pe.evidence.missingReason??"  "]}),a.jsx("div",{className:pe.meta.actionable?"text-blue-700":"text-amber-700",children:he})]})}}),a.jsxs(ns,{dataKey:"count",radius:[0,6,6,0],onClick:q=>N(q.causeKey),children:[z.map(q=>a.jsx(yo,{fill:y===q.causeKey?"#ea580c":"#f59e0b"},q.causeKey)),a.jsx(Ns,{content:oe})]})]})})}),a.jsx("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-1.5",children:z.map(q=>a.jsxs("div",{onClick:()=>N(q.causeKey),onKeyDown:ye=>{(ye.key==="Enter"||ye.key===" ")&&(ye.preventDefault(),N(q.causeKey))},role:"button",tabIndex:0,className:`w-full rounded-lg border px-2 py-1.5 text-left transition-colors ${y===q.causeKey?"border-orange-300 bg-orange-50":"border-slate-200 bg-white hover:bg-slate-50"}`,children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("div",{className:"text-[12px] font-medium text-gray-800",children:q.causeLabel}),a.jsxs("div",{className:"text-[11px] text-gray-600",children:[Uo(q.ratio),"  ",fo(q.count)]})]}),a.jsxs("div",{className:"mt-1 flex flex-wrap gap-1",children:[a.jsxs("span",{className:"rounded border border-gray-200 bg-gray-50 px-1.5 py-0.5 text-[10px] text-gray-600",children:[": ",Jb[q.meta.owner]]}),a.jsxs("span",{className:`rounded border px-1.5 py-0.5 text-[10px] ${q.meta.actionable?"border-blue-200 bg-blue-50 text-blue-700":"border-amber-200 bg-amber-50 text-amber-700"}`,children:[" : ",q.meta.actionable?"Yes":"No"]}),a.jsxs("span",{className:`rounded border px-1.5 py-0.5 text-[10px] ${q.meta.regionalNeed==="high"?"border-red-200 bg-red-50 text-red-700":q.meta.regionalNeed==="medium"?"border-amber-200 bg-amber-50 text-amber-700":"border-emerald-200 bg-emerald-50 text-emerald-700"}`,children:[" : ",s8[q.meta.regionalNeed]]}),a.jsxs("span",{className:"rounded border border-blue-200 bg-blue-50 px-1.5 py-0.5 text-[10px] text-blue-700",children:[": ",i8[q.evidence.type]]}),a.jsxs("span",{className:`rounded border px-1.5 py-0.5 text-[10px] ${d3e[q.evidence.confidence]}`,children:[": ",o8[q.evidence.confidence]]})]}),a.jsx("div",{className:"mt-1 text-[10px]",children:q.evidence.link?a.jsx("button",{type:"button",onClick:ye=>{ye.stopPropagation(),window.open(q.evidence.link,"_blank","noopener,noreferrer")},className:"rounded border border-blue-200 bg-white px-1.5 py-0.5 text-blue-700 hover:bg-blue-50",children:" "}):a.jsxs("span",{className:"text-amber-700",children:[" : ",q.evidence.missingReason??"  "]})})]},q.causeKey))})]}),w.isFetching&&z.length?a.jsx("div",{className:"absolute inset-0 rounded-xl bg-white/50 backdrop-blur-[1px] pointer-events-none"}):null]})]}),a.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-12 gap-3",children:[a.jsxs("div",{className:"xl:col-span-7 bg-white border border-slate-200 rounded-xl p-3.5 relative shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"text-sm font-semibold text-slate-700",children:"  (   )"}),a.jsx("div",{className:"text-[11px] text-slate-500",children:"      "})]}),!Z.length&&L.isPending?a.jsx(w0,{}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"rounded-lg border border-slate-100 bg-slate-50/60 p-2",style:{height:320},children:a.jsx(Ta,{width:"100%",height:"100%",children:a.jsxs(k3,{data:Z,margin:{top:10,right:8,left:-8,bottom:64},children:[a.jsx(ys,{strokeDasharray:"2 3",vertical:!1,stroke:"#e2e8f0"}),a.jsx(da,{dataKey:"areaLabel",tick:{fontSize:11,fill:"#64748b"},tickMargin:8,interval:0,angle:-30,textAnchor:"end",height:64,axisLine:!1,tickLine:!1}),a.jsx(Jn,{yAxisId:"left",tick:{fontSize:11,fill:"#64748b"},axisLine:!1,tickLine:!1}),a.jsx(Jn,{yAxisId:"right",orientation:"right",tick:{fontSize:11,fill:"#64748b"},axisLine:!1,tickLine:!1}),a.jsx(ln,{formatter:(q,ye)=>ye==="deltaVsAvg"?`${q>0?"+":""}${Number(q).toFixed(1)}%p`:`${Math.round(Number(q)).toLocaleString()}`}),a.jsx(Kl,{wrapperStyle:{fontSize:"12px"},formatter:q=>q==="count"?"":"   "}),a.jsxs(ns,{yAxisId:"left",dataKey:"count",radius:[5,5,0,0],onClick:q=>C(ye=>ye===q.areaKey?null:q.areaKey),children:[Z.map(q=>a.jsx(yo,{fill:E===q.areaKey?"#1d4ed8":q.highlightLevel==="critical"?"#ef4444":q.highlightLevel==="watch"?"#f59e0b":"#93c5fd"},q.areaKey)),a.jsx(Ns,{dataKey:"count",position:"top",formatter:q=>`${Math.round(q)}`})]}),a.jsx(qa,{yAxisId:"right",dataKey:"deltaVsAvg",stroke:"#1d4ed8",strokeWidth:2.2,dot:{r:3.2},children:a.jsx(Ns,{dataKey:"deltaVsAvg",position:"top",formatter:q=>`${q>0?"+":""}${Number(q).toFixed(1)}`})})]})})}),a.jsx("div",{className:"mt-2 flex flex-wrap gap-1.5",children:Z.slice(0,8).map(q=>a.jsxs("button",{onClick:()=>C(ye=>ye===q.areaKey?null:q.areaKey),className:`rounded-md border px-2 py-1 text-[11px] ${E===q.areaKey?"border-blue-300 bg-blue-50 text-blue-700":u3e[q.highlightLevel]}`,children:[q.areaLabel,"   ",q.deltaVsAvg>0?"+":"",q.deltaVsAvg.toFixed(1),"%p  ",fo(q.count)]},q.areaKey))}),E?a.jsx("div",{className:"mt-2",children:a.jsx("button",{onClick:()=>_e(),className:"h-8 rounded-md border border-blue-200 bg-blue-50 px-3 text-[12px] font-medium text-blue-700 hover:bg-blue-100",children:"  "})}):null]}),L.isFetching&&Z.length?a.jsx("div",{className:"absolute inset-0 rounded-xl bg-white/50 backdrop-blur-[1px] pointer-events-none"}):null]}),a.jsxs("div",{ref:A,className:"xl:col-span-5 bg-white border border-slate-200 rounded-xl p-3.5 relative shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"text-sm font-semibold text-slate-700",children:"  "}),a.jsx("div",{className:"text-[11px] text-slate-500",children:le})]}),a.jsx("div",{className:"mb-2 inline-flex rounded-md border border-gray-200 bg-white p-0.5",children:["ratio","count"].map(q=>a.jsx("button",{onClick:()=>S(q),className:`px-2 py-1 text-[11px] rounded ${v===q?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"}`,children:X0[q]},q))}),a.jsx("div",{className:"mb-2 flex flex-wrap gap-1.5",children:F.length?F.map(q=>a.jsx("span",{className:`rounded border px-2 py-0.5 text-[11px] ${c3e[q.severity]}`,children:R3e(q)},`${q.type}-${q.days}`)):a.jsx("span",{className:"rounded border border-gray-200 bg-gray-50 px-2 py-0.5 text-[11px] text-gray-600",children:"   "})}),!X.length&&H.isPending?a.jsx(w0,{}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"rounded-lg border border-slate-100 bg-slate-50/60 p-2",style:{height:320},children:a.jsx(Ta,{width:"100%",height:"100%",children:a.jsxs(NN,{data:X,margin:{top:8,right:12,left:0,bottom:8},children:[a.jsx(ys,{strokeDasharray:"2 3",vertical:!1,stroke:"#e2e8f0"}),a.jsx(da,{dataKey:"dateKey",tick:{fontSize:11,fill:"#64748b"},axisLine:!1,tickLine:!1}),a.jsx(Jn,{tick:{fontSize:11,fill:"#64748b"},domain:v==="ratio"?[0,100]:["auto","auto"],axisLine:!1,tickLine:!1}),a.jsx(ln,{content:({active:q,payload:ye,label:pe})=>{if(!q||!ye?.length)return null;const he=ye[0].payload;if(!he)return null;const rt=F.some(dt=>dt.type==="increasing_streak"&&dt.metric===v),Me=X0[v];return a.jsxs("div",{className:"rounded border border-gray-200 bg-white px-2 py-1.5 text-[11px] shadow-sm",children:[a.jsx("div",{className:"font-semibold text-gray-800",children:pe}),a.jsxs("div",{className:"text-gray-700",children:[Me," ",c8(v,he.value)]}),a.jsxs("div",{className:"text-gray-600",children:[" ",fo(he.count),"   ",Uo(he.ratio)]}),rt?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"text-red-700",children:"n   "}),a.jsx("div",{className:"text-red-700",children:"   SLA   "})]}):null]})}}),a.jsx(Kl,{wrapperStyle:{fontSize:"12px"},formatter:()=>X0[v]}),a.jsx(qa,{type:"monotone",dataKey:"value",stroke:"#ef4444",strokeWidth:2.3,dot:{r:3.2},children:a.jsx(Ns,{dataKey:"value",position:"top",formatter:q=>v==="count"?`${Math.round(Number(q)).toLocaleString()}`:`${Number(q).toFixed(1)}%`})})]})})}),a.jsx("div",{className:"mt-2 text-[11px] text-gray-600",children:F.some(q=>q.type==="increasing_streak"&&q.metric===v)?"   SLA   ":"       "})]}),H.isFetching&&X.length?a.jsx("div",{className:"absolute inset-0 rounded-xl bg-white/50 backdrop-blur-[1px] pointer-events-none"}):null]})]}),a.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-3.5 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[a.jsx(ss,{className:"h-4 w-4 text-orange-500"}),a.jsx("span",{className:"text-sm font-semibold text-slate-700",children:" "})]}),!te.length&&ne?a.jsx(w0,{}):a.jsx("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-2.5",children:te.map(q=>a.jsxs("div",{className:"p-3 rounded-lg border border-orange-100 bg-gradient-to-br from-orange-50 to-amber-50",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("div",{className:"text-[13px] font-medium text-orange-900",children:q.action.title}),a.jsxs("div",{className:"text-[11px] text-orange-700",children:[" ",q.priorityScore]})]}),a.jsxs("div",{className:"mt-1 text-[12px] text-orange-800",children:[" : ",q.evidence.causeLabel,"   Stage: ",q.evidence.stageLabel,"   : ",q.evidence.areaLabel]}),a.jsxs("div",{className:"mt-1 text-[12px] text-orange-900",children:[" : ",q.action.steps.join("  ")]}),a.jsxs("div",{className:"mt-1 text-[12px] text-orange-800",children:[" : ",q.expectedEffect.qualitative]}),a.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[a.jsx("button",{onClick:()=>_e({stage:q.evidence.stageKey,causeKey:q.evidence.causeKey,area:q.evidence.areaKey}),className:"h-8 rounded-md bg-blue-600 px-3 text-[12px] font-medium text-white hover:bg-blue-700",children:"  "}),a.jsx("button",{onClick:()=>ee(q),className:"h-8 rounded-md border border-orange-200 bg-white px-3 text-[12px] font-medium text-orange-700 hover:bg-orange-100",children:"  "})]})]},q.recId))})]}),m&&a.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-3.5 shadow-sm",children:[a.jsx("div",{className:"text-sm font-semibold text-slate-700 mb-2",children:"Stage  ( )"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:B.map(q=>a.jsxs("div",{className:"p-2.5 rounded-lg border border-slate-100 bg-slate-50",children:[a.jsx("div",{className:"text-[13px] font-medium text-slate-800",children:q.stage}),a.jsxs("div",{className:"text-[12px] text-slate-600",children:["  ",q.signal>0?"":""," (",q.signal>0?"+":"",q.signal,"%)   ",q.queue>0?"":""," (",q.queue>0?"+":"",q.queue,")"]}),a.jsx("div",{className:"text-[11px] text-slate-500",children:q.desc})]},q.stage))})]}),a.jsxs("div",{className:"text-[12px] text-slate-500 pb-2",children:[": ",e.label,"  ",n??" ","  ",UO[r],"  ",a8[s],se?`   : ${se.causeLabel}`:"",Ne?`   : ${Ne.areaLabel}`:""]})]})}const b1=1440*60*1e3,y1=48,P3e=3,Rp={regionalSla:" SLA",regionalQueueRisk:" ",regionalRecontact:" ",regionalDataReadiness:" ",regionalGovernance:"/ ",regionalAdTransitionHotspot:"AD  ",regionalDxDelayHotspot:" ",regionalScreenToDxRate:" "},of={regionalSla:"%",regionalQueueRisk:"",regionalRecontact:"%",regionalDataReadiness:"%",regionalGovernance:"%",regionalAdTransitionHotspot:"",regionalDxDelayHotspot:"",regionalScreenToDxRate:"%"},BO={regionalSla:!0,regionalQueueRisk:!1,regionalRecontact:!1,regionalDataReadiness:!0,regionalGovernance:!0,regionalAdTransitionHotspot:!1,regionalDxDelayHotspot:!1,regionalScreenToDxRate:!0},GO={STAFFING:" ",RECONTACT_PUSH:" ",DATA_FIX:" ",PATHWAY_TUNE:" ",GOVERNANCE_FIX:" "},A0={TODO:"",IN_PROGRESS:"",DONE:"",BLOCKED:""},d8={TODO:"bg-gray-100 text-gray-700 border-gray-200",IN_PROGRESS:"bg-blue-100 text-blue-700 border-blue-200",DONE:"bg-green-100 text-green-700 border-green-200",BLOCKED:"bg-amber-100 text-amber-700 border-amber-200"},D3e={instruction:"",adjustment:"",confirmation:"",completion:" ",escalation:""},Cy={Stage1:"Stage1",Stage2:"Stage2",Stage3:"Stage3"},u8={contact:"Stage1",recontact:"Stage1",L2:"Stage2","3rd":"Stage3"},Ty={staff_shortage:"  ",contact_failure:" ",data_gap:" ",hospital_slot_delay:"  ",governance_gap:"  ",external_dependency:"  "},Jd=["","","",""],I3e="regional_bottleneck_intervention_snapshots_v1",_0={regional:"",center:"",hospital:"",system:"",external:""},HO=e=>{let t=0;for(let r=0;r<e.length;r+=1)t=t*31+e.charCodeAt(r)>>>0;return t},Cl=(e,t,r)=>t+(r-t)*(HO(e)%1e3/1e3),ef=e=>new Date(e).toLocaleString("ko-KR",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}),M3e=e=>new Date(e).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"}),L3e=e=>Math.max(0,Math.floor((Date.now()-Date.parse(e))/b1));function f8(e){return{regionalSla:Number(Cl(`${e}-sla`,72,96).toFixed(1)),regionalQueueRisk:Math.round(Cl(`${e}-queue`,110,540)),regionalRecontact:Number(Cl(`${e}-recontact`,7,26).toFixed(1)),regionalDataReadiness:Number(Cl(`${e}-readiness`,58,92).toFixed(1)),regionalGovernance:Number(Cl(`${e}-gov`,68,98).toFixed(1)),regionalAdTransitionHotspot:Number(Cl(`${e}-ad-risk`,22,81).toFixed(1)),regionalDxDelayHotspot:Number(Cl(`${e}-dx-delay`,9,52).toFixed(1)),regionalScreenToDxRate:Number(Cl(`${e}-conv`,34,84).toFixed(1))}}function p8(e,t){return e[t]}function Oy(e,t){return t===""?`${Math.round(e).toLocaleString()}`:t===""?`${e.toFixed(1)}`:t===""?`${e.toFixed(1)}`:`${e.toFixed(1)}%`}function $3e(e){return e==="regionalAdTransitionHotspot"?"RISK":e==="regionalScreenToDxRate"?"GAP":e==="regionalDxDelayHotspot"||e==="regionalRecontact"?"BOTTLENECK":"LOAD"}function R_(e){return of[e]===""?"count":"ratio"}function F3e(e){if(!e)return null;try{const t=window.localStorage.getItem(I3e);return t?JSON.parse(t).find(s=>s.snapshotId===e)?.payload?.beforeSnapshot??null:null}catch{return null}}function m8(e){return e==="regionalGovernance"?"GOVERNANCE_FIX":e==="regionalDxDelayHotspot"?"STAFFING":e==="regionalAdTransitionHotspot"||e==="regionalScreenToDxRate"?"PATHWAY_TUNE":e==="regionalDataReadiness"?"DATA_FIX":e==="regionalQueueRisk"?"STAFFING":"RECONTACT_PUSH"}function U3e(e){if(e.selectedStage&&u8[e.selectedStage])return u8[e.selectedStage];const t=e.primaryDriverStage??"";return/3/.test(t)?"Stage3":/2|L2/i.test(t)?"Stage2":"Stage1"}function B3e(e){return e==="regionalDxDelayHotspot"?"hospital_slot_delay":e==="regionalGovernance"?"governance_gap":e==="regionalDataReadiness"?"data_gap":e==="regionalQueueRisk"?"staff_shortage":"contact_failure"}function G3e(e){return e==="regionalSla"?["SLA "," "]:e==="regionalQueueRisk"?[" ","SLA "]:e==="regionalDxDelayHotspot"?["  "," "]:e==="regionalAdTransitionHotspot"?["AD    ","SLA "]:e==="regionalScreenToDxRate"?["AD    ","SLA "]:e==="regionalDataReadiness"?[" ","SLA "]:["SLA "," "]}function H3e(e,t,r){const n=p8(t,e),s=t.regionalQueueRisk;if(!r)return{before:{value:n,backlog:s},after:void 0,delta:void 0};const i=p8(r,e),o=r.regionalQueueRisk;return{before:{value:n,backlog:s},after:{value:i,backlog:o},delta:{value:Number((i-n).toFixed(1)),backlog:Number((o-s).toFixed(1))}}}function K3e(e,t,r,n,s){const i=Date.parse(s),o=new Date(i).toISOString(),l=new Date(i+600*60*1e3).toISOString(),d=new Date(i+1320*60*1e3).toISOString(),u=new Date(i+2400*60*1e3).toISOString(),m=[{id:`${e}-log-instruction`,type:"instruction",actor:t,actorOrg:r,timestamp:o,referenceLink:"/regional/bottleneck",requiresFollowup:!0,followupDueAt:new Date(Date.parse(o)+y1*60*60*1e3).toISOString(),note:vt("       ")}];return n!=="TODO"&&m.push({id:`${e}-log-adjustment`,type:"adjustment",actor:Jd[(HO(e)+1)%Jd.length],actorOrg:r,timestamp:l,referenceLink:"/regional/ops",requiresFollowup:!0,followedUpAt:n==="BLOCKED"?void 0:d,followupDueAt:new Date(Date.parse(l)+y1*60*60*1e3).toISOString(),note:vt("      ")}),(n==="IN_PROGRESS"||n==="DONE")&&m.push({id:`${e}-log-confirm`,type:"confirmation",actor:Jd[(HO(e)+2)%Jd.length],actorOrg:r,timestamp:d,referenceLink:"https://hospital.example.local/sync",requiresFollowup:!1,note:vt("      ")}),n==="DONE"&&m.push({id:`${e}-log-complete`,type:"completion",actor:t,actorOrg:r,timestamp:u,referenceLink:"/regional/reports",requiresFollowup:!1,note:vt("      ")}),m}function k_(e){const t=L3e(e.createdAt),r=e.status!=="DONE"&&t>P3e,n=e.kpiComparison,s=!!n.after,i=n.before.value,o=n.after?.value,l=BO[e.kpiKey];let d=!1,u=!1,m=!1;if(s&&o!=null){const x=o-i;Math.abs(x)<.01?m=!0:l?(d=x>0,u=x<0):(d=x<0,u=x>0)}const p=!s&&e.status!=="DONE";return{elapsedDays:t,delayed:r,improved:d,worsened:u,noImprovement:m,missingAfter:p,needsAttention:r||m||u||p}}function z3e(e){return!e.requiresFollowup||e.followedUpAt?!1:Date.now()-Date.parse(e.timestamp)>y1*60*60*1e3}function KO(e){const t=f8(`${e.seed}-before`);e.beforeSnapshot&&(t[e.kpiKey]=Number(e.beforeSnapshot.kpiValue),t.regionalQueueRisk=Number(e.beforeSnapshot.backlogCount));const r=e.includeAfter?f8(`${e.seed}-after`):void 0,n=H3e(e.kpiKey,t,r),i=`[${Ty[e.causeKey]??e.causeKey}] ${e.areaLabel} ${Cy[e.stageKey]} `,o=Ck(e.causeKey),l=e.ownerOrg??o?.ownerOrg??"regional",d=e.assignmentOverride?{assigneeId:e.assignmentOverride.assigneeId,assigneeRole:e.assignmentOverride.assigneeRole,defaultDueSlaHours:e.assignmentOverride.dueSlaHours}:Tk({regionKey:e.regionId,areaKey:e.areaLabel,causeKey:e.causeKey,ownerOrg:l}),u=e.dueAt??new Date(Date.parse(e.createdAt)+d.defaultDueSlaHours*60*60*1e3).toISOString(),m={regionKey:e.regionId,period:e.period,kpiKey:e.kpiKey,areaKey:e.areaLabel,layer:$3e(e.kpiKey),selectedStage:e.stageKey==="Stage3"?"3rd":e.stageKey==="Stage2"?"L2":"contact",selectedCauseKey:e.causeKey,trendMetric:R_(e.kpiKey)},p={kpiKey:e.kpiKey,metricType:R_(e.kpiKey),targetDelta:R_(e.kpiKey)==="count"?-12:-2.5,evaluationWindowDays:7};return{id:e.id,title:i,stageKey:e.stageKey,areaKey:`${e.regionId}:${e.areaLabel}`,areaLabel:e.areaLabel,region:e.areaLabel,kpiKey:e.kpiKey,type:e.type,status:e.status,owner:e.owner,ownerOrg:l,createdAt:e.createdAt,dueAt:u,ruleId:e.ruleId,context:m,assignment:{ownerOrg:l,assigneeId:d.assigneeId,assigneeName:d.assigneeRole,dueAt:u,slaHours:d.defaultDueSlaHours,escalationPolicyId:`ESC-${e.causeKey.toUpperCase()}`},successMetric:{...p},createdFrom:{causeKey:e.causeKey,kpiKey:e.kpiKey,queryState:m,snapshot:{kpiValue:n.before.value,backlogCount:n.before.backlog,avgDwell:e.beforeSnapshot?Number((e.beforeSnapshot.avgDwellMin/60).toFixed(1)):Number(Cl(`${e.seed}-dwell`,24,96).toFixed(1)),deltaVsRegional:e.beforeSnapshot?Number((e.beforeSnapshot.stageBreakdown?.[0]?.deltaVsRegionalAvg??0).toFixed(1)):Number(Cl(`${e.seed}-delta`,-12,24).toFixed(1)),unit:of[e.kpiKey]}},expectedEffectTags:G3e(e.kpiKey),logs:K3e(e.seed,e.owner,l,e.status,e.createdAt),kpiComparison:n,notes:e.notes??vt(`${e.areaLabel}  ${GO[e.type]}  `),evidenceLinks:["/regional/bottleneck","https://hospital.example.local/sync"],beforeMetrics:t,afterMetrics:r,timeline:[{id:`${e.id}-timeline-created`,at:e.createdAt,actor:"",message:vt("  ")}]}}function h8(e,t,r){const n=t.length?t:[" "],s=Date.now();return[{kpiKey:"regionalQueueRisk",status:"IN_PROGRESS",stageKey:"Stage2",causeKey:"staff_shortage",type:"STAFFING",includeAfter:!0},{kpiKey:"regionalDxDelayHotspot",status:"TODO",stageKey:"Stage2",causeKey:"hospital_slot_delay",type:"PATHWAY_TUNE",includeAfter:!1},{kpiKey:"regionalRecontact",status:"DONE",stageKey:"Stage1",causeKey:"contact_failure",type:"RECONTACT_PUSH",includeAfter:!0},{kpiKey:"regionalDataReadiness",status:"BLOCKED",stageKey:"Stage1",causeKey:"data_gap",type:"DATA_FIX",includeAfter:!1},{kpiKey:"regionalAdTransitionHotspot",status:"IN_PROGRESS",stageKey:"Stage3",causeKey:"external_dependency",type:"PATHWAY_TUNE",includeAfter:!0}].map((o,l)=>{const d=new Date(s-b1*(l+1.4)).toISOString(),u=new Date(Date.parse(d)+b1*(2+l%3)).toISOString(),m=n[l%n.length];return KO({id:`INT-${l+1}`,regionId:e,areaLabel:m,period:r,kpiKey:o.kpiKey,type:o.type,status:o.status,owner:Jd[l%Jd.length],stageKey:o.stageKey,causeKey:o.causeKey,createdAt:d,dueAt:u,includeAfter:o.includeAfter,seed:`${e}-${m}-${o.kpiKey}-${l}`})})}function g8({value:e,unit:t,className:r}){const[n,s]=h.useState(e);return h.useEffect(()=>{const i=n,o=e,l=performance.now(),d=260;let u=0;const m=p=>{const g=Math.min(1,(p-l)/d),x=1-Math.pow(1-g,3);s(i+(o-i)*x),g<1&&(u=window.requestAnimationFrame(m))};return u=window.requestAnimationFrame(m),()=>window.cancelAnimationFrame(u)},[e]),a.jsx("span",{className:r,children:Oy(n,t)})}function q3e({region:e,districtOptions:t,selectedKpiKey:r,selectedRegionSgg:n,selectedRange:s,onSelectedKpiKeyChange:i,onSelectedRegionSggChange:o,onSelectedRangeChange:l,pendingDraft:d,onPendingDraftConsumed:u}){const[m,p]=h.useState(()=>h8(e.id,t,s)),[g,x]=h.useState(null),[y,N]=h.useState("ALL"),[v,S]=h.useState("ALL"),[E,C]=h.useState("ALL"),[_,A]=h.useState(!1),T=h.useRef(!1);h.useEffect(()=>{p(h8(e.id,t,s)),x(null)},[t,e.id]);const R=h.useCallback((F,te="manual")=>{const ne=new Date().toISOString(),se=F.region??n??t[0]??`${e.label} `,Ne=F.kpiKey,fe=F.type??m8(Ne),we=U3e(F),ve=F.selectedCauseKey??B3e(Ne),Oe=`${e.id}-${se}-${Ne}-${ne}`,Fe=F3e(F.snapshotId),oe=vt(te==="url"?"      ":"   "),le=KO({id:`INT-${Date.now()}`,regionId:e.id,areaLabel:se,period:F.range??s,kpiKey:Ne,type:fe,status:"TODO",owner:Jd[0],stageKey:we,causeKey:ve,createdAt:ne,dueAt:new Date(Date.parse(ne)+b1*3).toISOString(),includeAfter:!1,seed:Oe,beforeSnapshot:Fe,notes:vt(`${oe}
[] ${Ty[ve]??ve}
[] ${Cy[we]}
[] ${F.selectedArea??se}${F.snapshotId?`
[] ${F.snapshotId}`:""}`)});p(ge=>[le,...ge]),x(le.id)},[t,e.id,e.label,s,n]);h.useEffect(()=>{d&&(R(d,"manual"),u?.())},[R,u,d]),h.useEffect(()=>{if(d||T.current)return;const F=new URLSearchParams(window.location.search);if(F.get("create")!=="1"||F.get("source")!=="cause")return;const te=F.get("kpi");if(!te)return;const ne=F.get("range"),se=ne==="monthly"?"month":ne==="quarterly"?"quarter":"week",Ne={region:F.get("area")??n??null,kpiKey:te,range:se,source:"cause",selectedStage:F.get("stage")??null,selectedCauseKey:F.get("cause"),selectedArea:F.get("area"),primaryDriverStage:F.get("stage")??void 0,snapshotId:F.get("snapshotId")};R(Ne,"url"),T.current=!0},[R,d,n]);const I=h.useMemo(()=>m.filter(F=>!(n&&F.areaLabel!==n||r&&F.kpiKey!==r||y!=="ALL"&&F.status!==y||v!=="ALL"&&F.type!==v||E!=="ALL"&&F.owner!==E)),[m,E,r,n,y,v]),k=h.useMemo(()=>Array.from(new Set([...Jd,...m.map(F=>F.owner)])),[m]),w=h.useMemo(()=>I.length?g?I.find(F=>F.id===g)??I[0]:I[0]:null,[I,g]),L=h.useMemo(()=>I.filter(F=>k_(F).needsAttention).length,[I]),H=h.useMemo(()=>KRe({regionKey:e.id,selectedRange:s,selectedRegionSgg:n,districtOptions:t,existingOpenInterventions:m.map(F=>({kpiKey:F.kpiKey,areaLabel:F.areaLabel,causeKey:F.createdFrom.causeKey,stageKey:F.stageKey,period:F.context?.period??s,status:F.status}))}),[t,m,e.id,s,n]),B=h.useMemo(()=>H.filter(F=>!F.blockedByDuplicate).length,[H]),M=h.useMemo(()=>Array.from(new Map(H.map(F=>[F.ruleId,F.ruleLabel])).entries()).map(([F,te])=>({ruleId:F,ruleLabel:te})),[H]),G=h.useMemo(()=>Array.from(new Map(H.map(F=>[`${F.ownerOrg}-${F.assigneeId}`,`${_0[F.ownerOrg]}  ${F.assigneeRole}`])).values()),[H]),$=F=>{w&&p(te=>te.map(ne=>{if(ne.id!==w.id)return ne;const se=new Date().toISOString(),Ne={id:`${ne.id}-status-${Date.now()}`,type:F==="DONE"?"completion":F==="IN_PROGRESS"?"adjustment":"confirmation",actor:" ",actorOrg:"regional",timestamp:se,referenceLink:"/regional/actions",requiresFollowup:F!=="DONE",followupDueAt:F!=="DONE"?new Date(Date.parse(se)+y1*60*60*1e3).toISOString():void 0,note:vt(` ${A0[F]} `)};return{...ne,status:F,logs:[...ne.logs,Ne],timeline:[...ne.timeline,{id:`${ne.id}-timeline-${Date.now()}`,at:se,actor:" ",message:vt(` : ${A0[F]}`)}]}}))},z=()=>{const F=Date.now(),te=H.filter(se=>!se.blockedByDuplicate);if(!te.length){window.alert("    .   .");return}const ne=te.map((se,Ne)=>{const fe=Tk({regionKey:e.id,areaKey:se.regionLabel,causeKey:se.causeKey,ownerOrg:se.ownerOrg});return KO({id:`INT-AUTO-${F+Ne}`,regionId:e.id,areaLabel:se.regionLabel,period:s,kpiKey:se.kpiKey,type:m8(se.kpiKey),status:"TODO",owner:fe.assigneeRole,ownerOrg:se.ownerOrg,stageKey:se.stageKey,causeKey:se.causeKey,createdAt:new Date(F).toISOString(),dueAt:new Date(F+se.dueSlaHours*60*60*1e3).toISOString(),includeAfter:!1,ruleId:se.ruleId,seed:`${e.id}-${se.regionLabel}-auto-${Ne}`,assignmentOverride:{assigneeId:se.assigneeId,assigneeRole:se.assigneeRole,dueSlaHours:se.dueSlaHours},notes:vt(`    : ${se.ruleLabel}
 : ${se.dedupeKey}`)})});p(se=>[...ne,...se]),x(ne[0]?.id??null),A(!1)},U=()=>{if(!w)return;const te=Ck(w.createdFrom.causeKey)?.escalationPath?.[0];if(!te){window.alert("   .");return}const ne=new Date().toISOString(),se=new Date(Date.parse(ne)+te.slaHours*60*60*1e3).toISOString();p(Ne=>Ne.map(fe=>{if(fe.id!==w.id)return fe;const we={id:`${fe.id}-escalation-${Date.now()}`,type:"escalation",actor:" ",actorOrg:"regional",timestamp:ne,referenceLink:"/regional/actions",requiresFollowup:!0,followupDueAt:se,note:vt(`: ${te.toOrgRole}(${te.channel})   SLA ${te.slaHours}h`)};return{...fe,logs:[...fe.logs,we],timeline:[...fe.timeline,{id:`${fe.id}-timeline-escalation-${Date.now()}`,at:ne,actor:" ",message:vt(" ")}]}}))},Z=w?k_(w):null,re=w?Ty[w.createdFrom.causeKey]??w.createdFrom.causeKey:"-",X=h.useMemo(()=>{if(!w)return[];const F=w.logs.find(se=>se.type==="instruction"),te=w.logs.find(se=>se.type==="adjustment"),ne=w.logs.find(se=>se.type==="completion");return[{key:"created",label:"",at:w.createdAt,actor:"",done:!0},{key:"instruction",label:" ",at:F?.timestamp,actor:F?.actor,done:!!F},{key:"progress",label:"",at:te?.timestamp,actor:te?.actor,done:w.status==="IN_PROGRESS"||w.status==="DONE"||w.status==="BLOCKED"},{key:"done",label:"",at:ne?.timestamp,actor:ne?.actor,done:w.status==="DONE"},{key:"blocked",label:"/",at:w.status==="BLOCKED"?w.logs[w.logs.length-1]?.timestamp:void 0,actor:w.status==="BLOCKED"?w.logs[w.logs.length-1]?.actor:void 0,done:w.status==="BLOCKED"||(Z?.delayed??!1)}]},[w,Z?.delayed]);return a.jsxs("div",{className:"h-full overflow-auto bg-gray-50 p-4 space-y-3",children:[a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-semibold text-gray-800",children:" "}),a.jsx("div",{className:"text-[12px] text-gray-500",children:"         "})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:"px-2.5 py-1 rounded border border-amber-200 bg-amber-50 text-amber-700 text-xs font-semibold",children:["  ",L,""]}),a.jsx("button",{type:"button",onClick:()=>A(!0),className:"px-3 py-1.5 rounded-md border border-purple-200 bg-purple-50 text-purple-700 text-sm font-medium hover:bg-purple-100",children:"    "})]})]}),a.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-6 gap-2",children:[a.jsxs("select",{value:s,onChange:F=>l(F.target.value),className:"px-2 py-1.5 border border-gray-300 rounded text-sm",children:[a.jsx("option",{value:"week",children:""}),a.jsx("option",{value:"month",children:""}),a.jsx("option",{value:"quarter",children:""})]}),a.jsxs("select",{value:n??"",onChange:F=>o(F.target.value||null),className:"px-2 py-1.5 border border-gray-300 rounded text-sm",children:[a.jsxs("option",{value:"",children:[e.label," "]}),t.map(F=>a.jsx("option",{value:F,children:F},F))]}),a.jsx("select",{value:r,onChange:F=>i(F.target.value),className:"px-2 py-1.5 border border-gray-300 rounded text-sm",children:Object.entries(Rp).map(([F,te])=>a.jsx("option",{value:F,children:te},F))}),a.jsxs("select",{value:y,onChange:F=>N(F.target.value),className:"px-2 py-1.5 border border-gray-300 rounded text-sm",children:[a.jsx("option",{value:"ALL",children:" "}),Object.entries(A0).map(([F,te])=>a.jsx("option",{value:F,children:te},F))]}),a.jsxs("select",{value:v,onChange:F=>S(F.target.value),className:"px-2 py-1.5 border border-gray-300 rounded text-sm",children:[a.jsx("option",{value:"ALL",children:" "}),Object.entries(GO).map(([F,te])=>a.jsx("option",{value:F,children:te},F))]}),a.jsxs("select",{value:E,onChange:F=>C(F.target.value),className:"px-2 py-1.5 border border-gray-300 rounded text-sm",children:[a.jsx("option",{value:"ALL",children:" "}),k.map(F=>a.jsx("option",{value:F,children:F},F))]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-[420px_1fr] gap-3 min-h-[700px]",children:[a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3 overflow-y-auto",children:[a.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:" "}),a.jsxs("div",{className:"space-y-2",children:[I.map(F=>{const te=k_(F),ne=Ty[F.createdFrom.causeKey]??F.createdFrom.causeKey,se=F.dueAt?Date.now()>Date.parse(F.dueAt)&&F.status!=="DONE":!1;return a.jsxs("button",{type:"button",onClick:()=>x(F.id),className:`w-full text-left rounded-lg border p-2.5 transition ${w?.id===F.id?"border-blue-300 bg-blue-50":te.needsAttention?"border-rose-300 bg-rose-50 hover:bg-rose-100":"border-gray-200 bg-white hover:bg-gray-50"}`,children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsx("div",{className:"text-[13px] font-semibold text-gray-900 truncate",children:F.title}),a.jsxs("div",{className:"mt-0.5 text-[11px] text-gray-600",children:[F.areaLabel,"  ",Cy[F.stageKey],"  ",GO[F.type]]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-1 shrink-0",children:[a.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${d8[F.status]}`,children:A0[F.status]}),(te.delayed||se)&&a.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded border border-rose-300 bg-rose-100 text-rose-700",children:" "})]})]}),a.jsxs("div",{className:"mt-2 rounded border border-gray-200 bg-white px-2 py-1.5",children:[a.jsx("div",{className:"text-[10px] text-gray-500",children:" "}),a.jsxs("div",{className:"text-[11px] text-gray-700 mt-0.5",children:[ne,"  ",Rp[F.createdFrom.kpiKey]]}),a.jsxs("div",{className:"text-[11px] text-gray-700",children:["  ",Oy(F.createdFrom.snapshot.kpiValue,F.createdFrom.snapshot.unit??of[F.kpiKey])]})]}),a.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:F.expectedEffectTags.map(Ne=>a.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded border border-emerald-200 bg-emerald-50 text-emerald-700",children:Ne},`${F.id}-${Ne}`))}),a.jsxs("div",{className:"mt-2 flex items-center justify-between text-[11px]",children:[a.jsxs("span",{className:"text-gray-500",children:["T+",te.elapsedDays,""]}),F.ruleId?a.jsx("span",{className:"text-violet-600 font-medium",children:F.ruleId}):a.jsx("span",{className:"text-gray-500",children:" "})]})]},F.id)}),!I.length&&a.jsx("div",{className:"rounded border border-dashed border-gray-300 bg-gray-50 px-3 py-4 text-sm text-gray-500",children:"    ."})]})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3 overflow-y-auto",children:[!w&&a.jsx("div",{className:"text-sm text-gray-500",children:"   ."}),w&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2 flex-wrap",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-semibold text-gray-800",children:w.title}),a.jsxs("div",{className:"text-[12px] text-gray-500",children:[" ",w.areaLabel,"   ",w.owner,"   ",M3e(w.createdAt)]}),a.jsxs("div",{className:"text-[11px] text-gray-500",children:["  ",_0[w.ownerOrg??"regional"],"  "," ",w.assignment?.dueAt?ef(w.assignment.dueAt):w.dueAt?ef(w.dueAt):""]})]}),a.jsxs("div",{className:"flex items-center gap-1.5",children:[["TODO","IN_PROGRESS","DONE","BLOCKED"].map(F=>a.jsx("button",{type:"button",onClick:()=>$(F),className:`px-2 py-1 rounded border text-[11px] font-medium ${w.status===F?d8[F]:"border-gray-200 text-gray-600 hover:bg-gray-50"}`,children:A0[F]},F)),a.jsx("button",{type:"button",onClick:U,className:"px-2 py-1 rounded border border-rose-200 bg-rose-50 text-[11px] font-medium text-rose-700 hover:bg-rose-100",children:""})]})]}),a.jsxs("section",{className:"rounded-lg border border-gray-200 p-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"text-[13px] font-semibold text-gray-800",children:"1)  "}),(Z?.delayed??!1)&&a.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded border border-rose-300 bg-rose-100 text-rose-700",children:" 3  "})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2",children:X.map(F=>a.jsxs("div",{className:`rounded border px-2 py-2 ${F.done?"border-blue-200 bg-blue-50":"border-gray-200 bg-gray-50"}`,children:[a.jsx("div",{className:"text-[11px] font-semibold text-gray-700",children:F.label}),a.jsx("div",{className:"text-[10px] text-gray-500 mt-1",children:F.at?ef(F.at):""}),a.jsx("div",{className:"text-[10px] text-gray-500",children:F.actor??"-"})]},F.key))})]}),a.jsxs("section",{className:"rounded-lg border border-gray-200 p-3",children:[a.jsx("div",{className:"text-[13px] font-semibold text-gray-800 mb-2",children:"2)  "}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-[12px]",children:[a.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-2 py-2",children:[a.jsx("div",{className:"text-gray-500",children:" "}),a.jsx("div",{className:"mt-1 font-medium text-gray-800",children:re})]}),a.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-2 py-2",children:[a.jsx("div",{className:"text-gray-500",children:" Stage"}),a.jsx("div",{className:"mt-1 font-medium text-gray-800",children:Cy[w.stageKey]})]}),a.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-2 py-2",children:[a.jsx("div",{className:"text-gray-500",children:" "}),a.jsx("div",{className:"mt-1 font-medium text-gray-800",children:w.areaLabel})]}),a.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-2 py-2",children:[a.jsx("div",{className:"text-gray-500",children:"  KPI Snapshot"}),a.jsxs("div",{className:"mt-1 font-medium text-gray-800",children:[Rp[w.createdFrom.kpiKey]," ",Oy(w.createdFrom.snapshot.kpiValue,w.createdFrom.snapshot.unit??of[w.kpiKey])]}),a.jsxs("div",{className:"text-gray-600 mt-0.5",children:[" ",Math.round(w.createdFrom.snapshot.backlogCount).toLocaleString(),"    ",w.createdFrom.snapshot.avgDwell.toFixed(1),""]}),a.jsxs("div",{className:"text-gray-600",children:["   ",w.createdFrom.snapshot.deltaVsRegional!=null?`${w.createdFrom.snapshot.deltaVsRegional>0?"+":""}${w.createdFrom.snapshot.deltaVsRegional.toFixed(1)}`:"-"]})]}),a.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-2 py-2",children:[a.jsx("div",{className:"text-gray-500",children:"/"}),a.jsxs("div",{className:"mt-1 font-medium text-gray-800",children:[_0[w.assignment?.ownerOrg??w.ownerOrg??"regional"],"  ",w.assignment?.assigneeName??w.owner]}),a.jsxs("div",{className:"text-gray-600 mt-0.5",children:["SLA ",w.assignment?.slaHours??"-","h  "," ",w.assignment?.dueAt?ef(w.assignment.dueAt):w.dueAt?ef(w.dueAt):""]})]}),a.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-2 py-2",children:[a.jsx("div",{className:"text-gray-500",children:" "}),a.jsxs("div",{className:"mt-1 font-medium text-gray-800",children:[Rp[w.successMetric?.kpiKey??w.kpiKey],"  ",w.successMetric?.metricType==="count"?"":""]}),a.jsxs("div",{className:"text-gray-600 mt-0.5",children:["  ",w.successMetric?.targetDelta!=null?`${w.successMetric.targetDelta>0?"+":""}${w.successMetric.targetDelta}`:"-","   ",w.successMetric?.evaluationWindowDays??7,""]})]})]})]}),a.jsxs("section",{className:"rounded-lg border border-gray-200 p-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"text-[13px] font-semibold text-gray-800",children:"3) KPI Before / After "}),a.jsx("span",{className:"text-[11px] text-gray-500",children:Rp[w.kpiKey]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[a.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-2 py-2",children:[a.jsx("div",{className:"text-[11px] text-gray-500",children:"Before (  )"}),a.jsx("div",{className:"mt-1 text-[14px] font-semibold text-gray-900",children:a.jsx(g8,{value:w.kpiComparison.before.value,unit:of[w.kpiKey]})}),a.jsxs("div",{className:"text-[11px] text-gray-600 mt-0.5",children:[" ",Math.round(w.kpiComparison.before.backlog).toLocaleString(),""]})]}),a.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-2 py-2",children:[a.jsx("div",{className:"text-[11px] text-gray-500",children:"After ()"}),w.kpiComparison.after?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"mt-1 text-[14px] font-semibold text-gray-900",children:a.jsx(g8,{value:w.kpiComparison.after.value,unit:of[w.kpiKey]})}),a.jsxs("div",{className:"text-[11px] text-gray-600 mt-0.5",children:[" ",Math.round(w.kpiComparison.after.backlog).toLocaleString(),""]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"mt-1 text-[13px] font-semibold text-amber-700",children:" "}),a.jsxs("div",{className:"text-[11px] text-gray-600 mt-0.5",children:[" : ",w.owner," (  )"]})]})]})]}),w.kpiComparison.delta&&a.jsxs("div",{className:"mt-2 rounded border border-gray-200 bg-white px-2 py-2 text-[12px]",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"  "}),a.jsxs("span",{className:`font-semibold ${w.kpiComparison.delta.value===0?"text-gray-700":w.kpiComparison.delta.value>0?BO[w.kpiKey]?"text-emerald-700":"text-rose-700":BO[w.kpiKey]?"text-rose-700":"text-emerald-700"}`,children:[w.kpiComparison.delta.value>0?"+":"",Oy(w.kpiComparison.delta.value,of[w.kpiKey])]})]}),a.jsxs("div",{className:"flex items-center justify-between mt-1",children:[a.jsx("span",{className:"text-gray-600",children:"  "}),a.jsxs("span",{className:`font-semibold ${w.kpiComparison.delta.backlog>0?"text-rose-700":"text-emerald-700"}`,children:[w.kpiComparison.delta.backlog>0?"+":"",Math.round(w.kpiComparison.delta.backlog).toLocaleString(),""]})]})]})]}),a.jsxs("section",{className:"rounded-lg border border-gray-200 p-3",children:[a.jsx("div",{className:"text-[13px] font-semibold text-gray-800 mb-2",children:"4)   &  "}),a.jsx("div",{className:"space-y-2",children:w.logs.map(F=>{const te=z3e(F);return a.jsxs("div",{className:`rounded border px-2 py-2 ${te?"border-rose-300 bg-rose-50":"border-gray-200 bg-gray-50"}`,children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("div",{className:"text-[12px] font-medium text-gray-800",children:[D3e[F.type],"  ",F.actor,F.actorOrg?` (${_0[F.actorOrg]})`:""]}),a.jsxs("div",{className:"flex items-center gap-1",children:[F.requiresFollowup&&a.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${F.followedUpAt?"border-emerald-300 bg-emerald-100 text-emerald-700":"border-amber-300 bg-amber-100 text-amber-700"}`,children:F.followedUpAt?" ":" "}),te&&a.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded border border-rose-300 bg-rose-100 text-rose-700",children:" 48 "})]})]}),a.jsx("div",{className:"text-[11px] text-gray-500 mt-0.5",children:ef(F.timestamp)}),a.jsx("div",{className:"text-[12px] text-gray-700 mt-1",children:F.note}),F.followupDueAt?a.jsxs("div",{className:"mt-1 text-[11px] text-gray-600",children:[" : ",ef(F.followupDueAt)]}):null,a.jsx("div",{className:"mt-1 text-[11px]",children:F.referenceLink?a.jsx("a",{href:F.referenceLink,target:"_blank",rel:"noreferrer",className:"text-blue-700 underline underline-offset-2",children:" "}):a.jsx("span",{className:"text-gray-500",children:"  "})})]},F.id)})})]})]})]})]}),_&&a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/35",onClick:()=>A(!1)}),a.jsxs("div",{className:"relative w-full max-w-xl rounded-lg border border-gray-200 bg-white p-4 shadow-xl",children:[a.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"    "}),a.jsx("div",{className:"text-[12px] text-gray-500 mt-1",children:"       ."}),a.jsxs("div",{className:"mt-3 rounded border border-gray-200 bg-gray-50 p-3",children:[a.jsx("div",{className:"text-[12px] font-semibold text-gray-700 mb-1.5",children:"  "}),a.jsx("div",{className:"space-y-1 text-[12px] text-gray-700",children:M.map(F=>a.jsxs("div",{children:["- ",F.ruleLabel]},F.ruleId))})]}),a.jsx("div",{className:"mt-2 rounded border border-violet-200 bg-violet-50 p-3",children:a.jsxs("div",{className:"text-[12px] font-semibold text-violet-800",children:["  : ",B," /   ",H.length,""]})}),a.jsxs("div",{className:"mt-2 rounded border border-gray-200 bg-gray-50 p-3",children:[a.jsx("div",{className:"text-[12px] font-semibold text-gray-700 mb-1.5",children:"   "}),a.jsx("div",{className:"space-y-1 text-[12px] text-gray-700",children:G.map(F=>a.jsxs("div",{children:["- ",F]},F))})]}),a.jsxs("div",{className:"mt-2 rounded border border-gray-200 bg-white p-3 max-h-56 overflow-y-auto",children:[a.jsx("div",{className:"text-[12px] font-semibold text-gray-700 mb-1.5",children:"  "}),a.jsx("div",{className:"space-y-1.5",children:H.map(F=>a.jsxs("div",{className:`rounded border px-2 py-1.5 text-[11px] ${F.blockedByDuplicate?"border-rose-200 bg-rose-50 text-rose-700":"border-emerald-200 bg-emerald-50 text-emerald-700"}`,children:[a.jsxs("div",{className:"font-semibold",children:[F.regionLabel,"  ",Rp[F.kpiKey],"  ",F.stageKey]}),a.jsxs("div",{className:"mt-0.5",children:[F.ruleLabel,"  ",_0[F.ownerOrg],"  ",F.assigneeRole,"  SLA ",F.dueSlaHours,"h"]}),F.blockedByDuplicate?a.jsxs("div",{className:"mt-0.5",children:[" : ",F.blockedReason]}):null]},F.previewId))})]}),a.jsxs("div",{className:"mt-4 flex items-center justify-end gap-2",children:[a.jsx("button",{type:"button",onClick:()=>A(!1),className:"px-3 py-1.5 rounded border border-gray-300 text-sm text-gray-700 hover:bg-gray-50",children:""}),a.jsx("button",{type:"button",onClick:z,disabled:B===0,className:`px-3 py-1.5 rounded text-sm font-semibold text-white ${B===0?"bg-gray-300 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700"}`,children:"  "})]})]})]})]})}const x8={regionalSla:" SLA",regionalQueueRisk:" ",regionalRecontact:" ",regionalDataReadiness:" ",regionalGovernance:"/ ",regionalAdTransitionHotspot:"AD  ",regionalDxDelayHotspot:" ",regionalScreenToDxRate:" "},W3e={week:"",month:"",quarter:""},kp={queue:"  ",actions:"  ",pending:" ",bottleneckRelief:" ",effectRate:"   ",slaDelta:"SLA   "},V3e=e=>{let t=0;for(let r=0;r<e.length;r+=1)t=t*31+e.charCodeAt(r)>>>0;return t},ms=(e,t,r)=>t+(r-t)*(V3e(e)%1e3/1e3);function P_(e){return`${e.toFixed(1)}%`}function ey(e){return`${Math.round(e).toLocaleString()}`}function Y3e(e,t){return`${e>0?"+":""}${e.toFixed(1)}%p`}function D_(e,t){return t==="%"?`${e.toFixed(1)}%`:`${Math.round(e).toLocaleString()}`}function X3e(){const t=window.location.pathname.indexOf("/regional/");return t<0?"":window.location.pathname.slice(0,t)}function ty(e,t){const r=new URLSearchParams(t).toString();return`${X3e()}${e}${r?`?${r}`:""}`}function Pp(e,t,r){const n={scope:`${e} `,period:`${t} `},s={queue:{definition:"         ",threshold:" 7   ",interpretation:"    ",nextAction:"      "},actions:{definition:"      ",threshold:" 80%     ",interpretation:"    ",nextAction:"    "},pending:{definition:"       ",threshold:"T+3    ",interpretation:"    ",nextAction:"    "},bottleneckRelief:{definition:"     ",threshold:"(  -  )/   100",interpretation:"    ",nextAction:"     "},effectRate:{definition:"After         ",threshold:"   48  After ",interpretation:"    ",nextAction:"     "},slaDelta:{definition:"  SLA  (  )",threshold:"  ",interpretation:"   ,  ",nextAction:"     "}};return{definition:s[r].definition,scope:n.scope,period:n.period,threshold:s[r].threshold,interpretation:s[r].interpretation,nextAction:s[r].nextAction,actionTab:"reports"}}function Q3e({region:e,districtOptions:t,selectedKpiKey:r,selectedRegionSgg:n,selectedRange:s}){const[i,o]=h.useState(n?"sigungu":"regional"),[l,d]=h.useState(n??t[0]??""),[u,m]=h.useState(r),[p,g]=h.useState(s),[x,y]=h.useState("pdf"),N=i==="sigungu"?l||t[0]||e.label:"",v=i==="sigungu"?N:`${e.label}  `,S=W3e[p],E=`${e.id}-${i}-${N||"all"}-${u}-${p}`,C=h.useMemo(()=>{const B=Math.round(ms(`${E}-queue-before`,250,760)),M=Math.round(ms(`${E}-queue-after`,140,620)),G=Math.round(ms(`${E}-actions`,14,64)),$=Math.round(ms(`${E}-pending`,4,28)),z=Math.max(0,Math.min(G,Math.round(G*ms(`${E}-effect-ratio`,.42,.89)))),U=(B-M)/Math.max(B,1)*100,Z=Number(ms(`${E}-sla-prev`,11,24).toFixed(1)),re=Number((Z+ms(`${E}-sla-delta`,-6.4,4.2)).toFixed(1)),X=Number((re-Z).toFixed(1));return{queueBefore:B,queueAfter:M,queue:M,actions:G,pending:$,bottleneckRelief:Number(Math.max(-20,Math.min(95,U)).toFixed(1)),effectRate:Number((z/Math.max(G,1)*100).toFixed(1)),slaPrev:Z,slaNow:re,slaDelta:X}},[E]),_=h.useMemo(()=>{const B=[{key:"contact_failure",label:" ",count:Math.round(ms(`${E}-cause-contact`,80,280))},{key:"staff_shortage",label:"  ",count:Math.round(ms(`${E}-cause-staff`,60,260))},{key:"hospital_slot_delay",label:"  ",count:Math.round(ms(`${E}-cause-hospital`,50,220))},{key:"data_gap",label:" ",count:Math.round(ms(`${E}-cause-data`,40,170))},{key:"external_dependency",label:"  ",count:Math.round(ms(`${E}-cause-external`,20,130))}],M=B.reduce((G,$)=>G+$.count,0);return B.sort((G,$)=>$.count-G.count).slice(0,3).map(G=>({...G,ratio:Number((G.count/Math.max(M,1)*100).toFixed(1))}))},[E]),A=h.useMemo(()=>[{title:"  ",owner:" ",stage:"Stage1",count:Math.round(ms(`${E}-itv-1`,2,8)),status:""},{title:"   ",owner:"  ",stage:"Stage2",count:Math.round(ms(`${E}-itv-2`,1,6)),status:""},{title:"   ",owner:" ",stage:"Stage3",count:Math.round(ms(`${E}-itv-3`,1,5)),status:""}],[E]),T=h.useMemo(()=>[{label:"SLA ",before:C.slaPrev,after:C.slaNow,unit:"%",higherBetter:!1},{label:"  ",before:C.queueBefore,after:C.queueAfter,unit:"",higherBetter:!1},{label:"   ",before:Number(Math.max(15,C.effectRate-ms(`${E}-effect-before`,6,18)).toFixed(1)),after:C.effectRate,unit:"%",higherBetter:!0}].map(M=>({...M,delta:Number((M.after-M.before).toFixed(1))})),[C.effectRate,C.queueAfter,C.queueBefore,C.slaNow,C.slaPrev,E]),R=h.useMemo(()=>[{title:"Stage2      ",risk:"",recommendation:"    "},{title:"After     ",risk:"",recommendation:"     "},{title:"    ",risk:"",recommendation:"   "}],[]),I=h.useMemo(()=>{const B={kpi:u==="all"?r:u,range:p==="week"?"weekly":p==="month"?"monthly":"quarterly",...i==="sigungu"?{sgg:N}:{}};return{bottleneck:ty("/regional/bottleneck",B),actions:ty("/regional/actions",B),ops:ty("/regional/ops",B),reports:ty("/regional/reports",B)}},[N,u,p,i,r]),k=h.useMemo(()=>{const B=_[0],M=A.reduce((Z,re)=>Z+re.count,0),G=C.slaDelta>0?`${C.slaDelta.toFixed(1)}%p `:`${Math.abs(C.slaDelta).toFixed(1)}%p `,$=`${S} ${v} ${B?.label??" "}    ,    ${_.map(Z=>Z.label).join(", ")}  .`,z=`   ${M} ,  ${A[0].title}  .`,U=`SLA     ${G},   ${R.length}     .`;return{line1:$,line2:z,line3:U}},[_,A,C.slaDelta,S,v,R.length]),w=h.useMemo(()=>[{id:1,title:" ",evidence:I.ops},{id:2,title:"   Top3",evidence:I.bottleneck},{id:3,title:"   ",evidence:I.actions},{id:4,title:" / KPI ",evidence:I.actions},{id:5,title:"     ",evidence:I.reports}],[I.actions,I.bottleneck,I.ops,I.reports]),L={pdf:"PDF",ppt:"PPT",csv:"CSV"},H=`${L[x]}   ${v}  ${u==="all"?"KPI ":x8[u]}  ${S}`;return a.jsxs("div",{className:"h-full overflow-auto bg-gray-50 p-4 space-y-3",children:[a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-start justify-between gap-3 flex-wrap",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-semibold text-gray-800",children:""}),a.jsx("div",{className:"text-[12px] text-gray-500 mt-0.5",children:"  +      "})]}),a.jsx("div",{className:"flex items-center gap-2",children:["pdf","ppt","csv"].map(B=>a.jsx("button",{type:"button",onClick:()=>y(B),className:`px-3 py-1.5 rounded border text-sm ${x===B?"border-blue-600 bg-blue-600 text-white":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:L[B]},B))})]}),a.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-4 gap-2",children:[a.jsxs("select",{value:i,onChange:B=>o(B.target.value),className:"px-2 py-1.5 border border-gray-300 rounded text-sm",children:[a.jsx("option",{value:"regional",children:" "}),a.jsx("option",{value:"sigungu",children:" "})]}),a.jsx("select",{value:N,onChange:B=>d(B.target.value),disabled:i!=="sigungu",className:"px-2 py-1.5 border border-gray-300 rounded text-sm disabled:bg-gray-100 disabled:text-gray-400",children:t.map(B=>a.jsx("option",{value:B,children:B},B))}),a.jsxs("select",{value:u,onChange:B=>m(B.target.value),className:"px-2 py-1.5 border border-gray-300 rounded text-sm",children:[a.jsx("option",{value:"all",children:"KPI "}),Object.entries(x8).map(([B,M])=>a.jsx("option",{value:B,children:M},B))]}),a.jsxs("select",{value:p,onChange:B=>g(B.target.value),className:"px-2 py-1.5 border border-gray-300 rounded text-sm",children:[a.jsx("option",{value:"week",children:""}),a.jsx("option",{value:"month",children:""}),a.jsx("option",{value:"quarter",children:""})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-3",children:[a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"text-[12px] text-gray-500",children:kp.queue}),a.jsx(nf,{help:Pp(v,S,"queue")})]}),a.jsx("div",{className:"text-xl font-bold text-gray-900 mt-1",children:ey(C.queue)}),a.jsx("a",{className:"text-[11px] text-blue-700 underline underline-offset-2",href:I.bottleneck,children:"  "})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"text-[12px] text-gray-500",children:kp.actions}),a.jsx(nf,{help:Pp(v,S,"actions")})]}),a.jsx("div",{className:"text-xl font-bold text-gray-900 mt-1",children:ey(C.actions)}),a.jsx("a",{className:"text-[11px] text-blue-700 underline underline-offset-2",href:I.actions,children:"  "})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"text-[12px] text-gray-500",children:kp.pending}),a.jsx(nf,{help:Pp(v,S,"pending")})]}),a.jsx("div",{className:"text-xl font-bold text-gray-900 mt-1",children:ey(C.pending)}),a.jsx("a",{className:"text-[11px] text-blue-700 underline underline-offset-2",href:I.actions,children:"  "})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"text-[12px] text-gray-500",children:kp.bottleneckRelief}),a.jsx(nf,{help:Pp(v,S,"bottleneckRelief")})]}),a.jsx("div",{className:`text-xl font-bold mt-1 ${C.bottleneckRelief>=0?"text-emerald-700":"text-rose-700"}`,children:P_(C.bottleneckRelief)}),a.jsx("a",{className:"text-[11px] text-blue-700 underline underline-offset-2",href:I.bottleneck,children:"  "})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"text-[12px] text-gray-500",children:kp.effectRate}),a.jsx(nf,{help:Pp(v,S,"effectRate")})]}),a.jsx("div",{className:"text-xl font-bold text-gray-900 mt-1",children:P_(C.effectRate)}),a.jsx("a",{className:"text-[11px] text-blue-700 underline underline-offset-2",href:I.actions,children:"  "})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"text-[12px] text-gray-500",children:kp.slaDelta}),a.jsx(nf,{help:Pp(v,S,"slaDelta")})]}),a.jsx("div",{className:`text-xl font-bold mt-1 ${C.slaDelta<=0?"text-emerald-700":"text-rose-700"}`,children:Y3e(C.slaDelta)}),a.jsx("a",{className:"text-[11px] text-blue-700 underline underline-offset-2",href:I.ops,children:"  "})]})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm font-semibold text-gray-700",children:"  "}),a.jsxs("div",{className:"mt-2 space-y-2",children:[a.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-3 py-2 text-[13px] text-gray-800",children:[k.line1,a.jsx("a",{className:"ml-2 text-blue-700 underline underline-offset-2 text-[12px]",href:I.bottleneck,children:"[]"})]}),a.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-3 py-2 text-[13px] text-gray-800",children:[k.line2,a.jsx("a",{className:"ml-2 text-blue-700 underline underline-offset-2 text-[12px]",href:I.actions,children:"[]"})]}),a.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-3 py-2 text-[13px] text-gray-800",children:[k.line3,a.jsx("a",{className:"ml-2 text-blue-700 underline underline-offset-2 text-[12px]",href:I.reports,children:"[]"})]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:H}),a.jsx("div",{className:"space-y-2",children:w.map(B=>a.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-3 py-2 flex items-center justify-between gap-2",children:[a.jsxs("div",{className:"text-[13px] text-gray-800",children:[B.id,". ",B.title]}),a.jsx("a",{href:B.evidence,className:"text-[11px] text-blue-700 underline underline-offset-2",children:" "})]},B.id))})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:[a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"   Top3"}),a.jsx("div",{className:"space-y-2",children:_.map((B,M)=>a.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-3 py-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"text-[13px] font-medium text-gray-800",children:[M+1,". ",B.label]}),a.jsxs("div",{className:"text-[12px] font-semibold text-gray-900",children:[ey(B.count),"  ",P_(B.ratio)]})]}),a.jsx("a",{href:I.bottleneck,className:"text-[11px] text-blue-700 underline underline-offset-2",children:"  "})]},B.key))})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"   "}),a.jsx("div",{className:"space-y-2",children:A.map(B=>a.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-3 py-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"text-[13px] font-medium text-gray-800",children:B.title}),a.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${B.status===""?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-blue-200 bg-blue-50 text-blue-700"}`,children:B.status})]}),a.jsxs("div",{className:"text-[12px] text-gray-600 mt-1",children:[B.stage,"  ",B.owner,"  ",B.count,""]}),a.jsx("a",{href:I.actions,className:"text-[11px] text-blue-700 underline underline-offset-2",children:"  "})]},B.title))})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:[a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:" / KPI "}),a.jsxs("table",{className:"w-full text-[12px]",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-200",children:[a.jsx("th",{className:"text-left py-1",children:""}),a.jsx("th",{className:"text-right py-1",children:"Before"}),a.jsx("th",{className:"text-right py-1",children:"After"}),a.jsx("th",{className:"text-right py-1",children:""}),a.jsx("th",{className:"text-right py-1",children:""})]})}),a.jsx("tbody",{children:T.map(B=>{const M=B.higherBetter?B.delta>0:B.delta<0;return a.jsxs("tr",{className:"border-b border-gray-100 last:border-b-0",children:[a.jsx("td",{className:"py-1 text-gray-700",children:B.label}),a.jsx("td",{className:"py-1 text-right text-gray-600",children:D_(B.before,B.unit)}),a.jsx("td",{className:"py-1 text-right text-gray-600",children:D_(B.after,B.unit)}),a.jsxs("td",{className:`py-1 text-right font-semibold ${M?"text-emerald-700":B.delta===0?"text-gray-700":"text-rose-700"}`,children:[B.delta>0?"+":"",D_(B.delta,B.unit)]}),a.jsx("td",{className:"py-1 text-right",children:a.jsx("a",{href:I.actions,className:"text-blue-700 underline underline-offset-2",children:""})})]},B.label)})})]})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"     "}),a.jsx("div",{className:"space-y-2",children:R.map(B=>a.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-3 py-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"text-[13px] font-medium text-gray-800",children:B.title}),a.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${B.risk===""?"border-rose-300 bg-rose-100 text-rose-700":"border-amber-300 bg-amber-100 text-amber-700"}`,children:B.risk})]}),a.jsxs("div",{className:"text-[12px] text-gray-600 mt-1",children:[": ",B.recommendation]}),a.jsx("a",{href:I.actions,className:"text-[11px] text-blue-700 underline underline-offset-2",children:"  "})]},B.title))}),a.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[a.jsxs("button",{className:"px-3 py-1.5 rounded border border-gray-300 text-sm text-gray-700 hover:bg-gray-50",children:[S,"  PDF"]}),a.jsxs("button",{className:"px-3 py-1.5 rounded border border-gray-300 text-sm text-gray-700 hover:bg-gray-50",children:[S,"  PPT"]}),a.jsx("button",{className:"px-3 py-1.5 rounded border border-gray-300 text-sm text-gray-700 hover:bg-gray-50",children:"KPI CSV"})]})]})]})]})}const Z3e={overview:"/regional/ops",cause:"/regional/bottleneck",interventions:"/regional/actions",reports:"/regional/reports",settings:"/regional/settings"};function J3e(e){if(!e.trim())return"/";let t=e.trim();return t.startsWith("/")||(t=`/${t}`),t.endsWith("/")||(t=`${t}/`),t}const qp=J3e("/neuro-shield/");function oV(e){if(qp==="/")return e;if(e===qp.slice(0,-1))return"/";if(!e.startsWith(qp))return e;const t=e.slice(qp.length);return t.startsWith("/")?t:`/${t}`}function eke(e){if(qp==="/")return e;const t=e.startsWith("/")?e.slice(1):e;return`${qp}${t}`}const tke={week:"weekly",month:"monthly",quarter:"quarterly"},b8={weekly:"week",monthly:"month",quarterly:"quarter"};function rke(e){return tke[e]}function nke(e){return e&&e in b8?b8[e]:"week"}function ake(e){const t=oV(e);if(t==="/"||t==="/regional/overview"||t==="/regional/ops")return"overview";const n=t.match(/^\/regional\/([^/?#]+)/)?.[1];return n?n==="bottleneck"||n==="cause"?"cause":n==="actions"||n==="interventions"?"interventions":n==="reports"?"reports":n==="settings"?"settings":"overview":"overview"}function ske(e){const t=oV(e);return t==="/"||t.startsWith("/regional/")}function ry(e,t,r){const n=new URLSearchParams,s=eke(Z3e[e]);t.selectedKpiKey!=="regionalSla"&&n.set("kpi",t.selectedKpiKey),t.selectedRange!=="week"&&n.set("range",rke(t.selectedRange)),t.selectedRegionSgg&&n.set("sgg",t.selectedRegionSgg),r&&Object.entries(r).forEach(([d,u])=>{u==null||u===""||n.set(d,u)});const i=!!(r&&Object.values(r).some(d=>d!=null&&d!==""));if(e==="overview"&&t.selectedKpiKey==="regionalSla"&&t.selectedRange==="week"&&!t.selectedRegionSgg&&!i)return s;const l=n.toString();return l?`${s}?${l}`:s}function ike(e,t){const r=new URLSearchParams(e),n=r.get("kpi")??t;return{selectedKpiKey:n==="regionalSla"||n==="regionalQueueRisk"||n==="regionalRecontact"||n==="regionalDataReadiness"||n==="regionalGovernance"||n==="regionalAdTransitionHotspot"||n==="regionalDxDelayHotspot"||n==="regionalScreenToDxRate"?n:t,selectedRange:nke(r.get("range")),selectedRegionSgg:r.get("sgg")}}const I_="regionalSla",y8=[{id:"overview",label:" ",icon:tx},{id:"cause",label:"  ",icon:ss},{id:"interventions",label:" ",icon:rR},{id:"reports",label:"",icon:Ef},{id:"settings",label:"",icon:nx}],v8={seoul:["","","","","","","","","","","","","","","","","","","","","","","","",""],busan:["","","","","","","","","","","","","","","",""],daegu:["","","","","","","",""],incheon:["","","","","","","","","",""],gwangju:["","","","",""],daejeon:["","","","",""],ulsan:["","","","",""],sejong:[""],gyeonggi:["","","","","","","","","","","","","","","","","","","",""],gangwon:["","","","","","","","","",""],chungbuk:["","","","","","","","","",""],chungnam:["","","","","","","","","",""],jeonbuk:["","","","","","","","","",""],jeonnam:["","","","","","","","","",""],gyeongbuk:["","","","","","","","","",""],gyeongnam:["","","","","","","","","",""],jeju:["",""]};function oke(e){return e==="month"?"month":e==="quarter"?"quarter":"week"}function N8(e,t){return e.selectedKpiKey===t.selectedKpiKey&&e.selectedRegionSgg===t.selectedRegionSgg&&e.selectedRange===t.selectedRange}function M_(e){const t=ake(window.location.pathname),r=ike(window.location.search,e);return{page:t,selection:r}}function lke({userName:e="",centerName:t=" ",onLogout:r}){const n=P2e(t),[s,i]=h.useState(n.id),[o,l]=h.useState(!0),[d,u]=h.useState(!1),m=h.useMemo(()=>M_(I_),[]),[p,g]=h.useState(m.page),[x,y]=h.useState(m.selection),[N,v]=h.useState(null),S=Qc.find(k=>k.id===s)??Qc[0],E=v8[s]??v8.seoul,C=h.useCallback((k,w,L="push",H)=>{const B=ry(k,w,H),M=new URL(B,window.location.origin),G=new URL(window.location.href);k==="overview"&&["drill","view"].forEach(z=>{if(!M.searchParams.has(z)&&G.searchParams.has(z)){const U=G.searchParams.get(z);U&&M.searchParams.set(z,U)}}),k==="cause"&&["stageImpact","stage","cause","area","period"].forEach(z=>{if(!M.searchParams.has(z)&&G.searchParams.has(z)){const U=G.searchParams.get(z);U&&M.searchParams.set(z,U)}}),!(M.pathname===G.pathname&&M.search===G.search&&M.hash===G.hash)&&(L==="replace"?window.history.replaceState({},"",`${M.pathname}${M.search}${M.hash}`):window.history.pushState({},"",`${M.pathname}${M.search}${M.hash}`))},[]);h.useEffect(()=>{const{page:k,selection:w}=M_(I_),L=window.location.pathname.replace(/\/+$/,""),H=/\/regional\/overview$/i.test(L);if(!ske(window.location.pathname)){const M={selectedKpiKey:w.selectedKpiKey,selectedRegionSgg:w.selectedRegionSgg,selectedRange:w.selectedRange};g("overview"),y(M),C("overview",M,"replace");return}if(k==="overview"&&H){const M=ry("overview",w);window.history.replaceState({},"",M)}g(k),y(w);const B=()=>{const M=M_(I_),G=window.location.pathname.replace(/\/+$/,""),$=/\/regional\/overview$/i.test(G);if(M.page==="overview"&&$){const z=ry("overview",M.selection);window.history.replaceState({},"",z)}g(M.page),y(M.selection)};return window.addEventListener("popstate",B),()=>window.removeEventListener("popstate",B)},[C]),h.useEffect(()=>{if(x.selectedRegionSgg&&!E.includes(x.selectedRegionSgg)){const k={...x,selectedRegionSgg:null};y(k),C(p,k,"replace")}},[p,E,x,C]);const _=h.useCallback((k,w,L)=>{g(k),y(H=>{const B={...H,...w};return N8(H,B)?(C(k,B,"replace",L),H):(C(k,B,"push",L),B)})},[C]),A=h.useCallback(k=>{y(w=>{const L={...w,...k};return N8(w,L)?w:(C(p,L,"replace"),L)})},[p,C]),T=h.useCallback(k=>{if(v(k),k.source==="top5")return;const w={selectedKpiKey:k.kpiKey,selectedRegionSgg:k.region,selectedRange:k.range},L={create:"1",source:k.source??"overview"};if(k.primaryDriverStage&&(L.primaryDriverStage=k.primaryDriverStage),k.selectedStage&&(L.stage=k.selectedStage),k.selectedCauseKey&&(L.cause=k.selectedCauseKey),k.selectedArea&&(L.area=k.selectedArea),k.snapshotId&&(L.snapshotId=k.snapshotId),k.source==="cause"){g("interventions"),y(w);const H=ry("interventions",w,L),B=new URL(H,window.location.origin);B.pathname=B.pathname.replace(/\/regional\/(?:actions|interventions)$/i,"/regional/interventions/new");const M=new URL(window.location.href);(B.pathname!==M.pathname||B.search!==M.search||B.hash!==M.hash)&&window.history.pushState({},"",`${B.pathname}${B.search}${B.hash}`);return}_("interventions",w,L)},[_]),R=()=>{switch(p){case"overview":return a.jsx(i3e,{region:S,selectedKpiKey:x.selectedKpiKey,selectedRegionSgg:x.selectedRegionSgg,selectedRange:oke(x.selectedRange),onSelectedKpiKeyChange:k=>A({selectedKpiKey:k}),onSelectedRegionSggChange:k=>A({selectedRegionSgg:k}),onSelectedRangeChange:k=>A({selectedRange:k}),onCreateIntervention:({kpi:k,sgg:w,range:L,source:H,primaryDriverStage:B})=>T({kpiKey:k,region:w,range:L,source:H,primaryDriverStage:B}),onNavigateModule:k=>_(k)});case"cause":return a.jsx(k3e,{region:S,districtOptions:E,selectedKpiKey:x.selectedKpiKey,selectedRegionSgg:x.selectedRegionSgg,selectedRange:x.selectedRange,onSelectedKpiKeyChange:k=>A({selectedKpiKey:k}),onSelectedRegionSggChange:k=>A({selectedRegionSgg:k}),onSelectedRangeChange:k=>A({selectedRange:k}),onCreateIntervention:k=>T(k)});case"interventions":return a.jsx(q3e,{region:S,districtOptions:E,selectedKpiKey:x.selectedKpiKey,selectedRegionSgg:x.selectedRegionSgg,selectedRange:x.selectedRange,onSelectedKpiKeyChange:k=>A({selectedKpiKey:k}),onSelectedRegionSggChange:k=>A({selectedRegionSgg:k}),onSelectedRangeChange:k=>A({selectedRange:k}),pendingDraft:N,onPendingDraftConsumed:()=>v(null)});case"reports":return a.jsx(Q3e,{region:S,districtOptions:E,selectedKpiKey:x.selectedKpiKey,selectedRegionSgg:x.selectedRegionSgg,selectedRange:x.selectedRange});case"settings":return a.jsx(o3e,{regionCode:S.id,regionLabel:S.label});default:return null}},I=()=>{window.confirm(" ?")&&r&&r()};return a.jsxs("div",{className:"flex h-[100dvh] min-h-0 overflow-hidden bg-gray-50",children:[a.jsxs("aside",{className:`${o?"w-64":"w-20"} bg-slate-800 border-r border-slate-700 transition-all duration-300 flex flex-col shrink-0`,children:[a.jsx("div",{className:"h-16 flex items-center justify-between px-4 border-b border-slate-700",children:o?a.jsxs(a.Fragment,{children:[a.jsx(cR,{size:36,showText:!0,subtitle:`${S.label}  `,variant:"dark"}),a.jsx(jt,{variant:"ghost",size:"sm",onClick:()=>l(!1),className:"h-8 w-8 p-0 text-slate-400 hover:text-white hover:bg-slate-700 shrink-0",children:a.jsx(uu,{className:"h-4 w-4"})})]}):a.jsx(jt,{variant:"ghost",size:"sm",onClick:()=>l(!0),className:"h-8 w-8 p-0 mx-auto text-slate-400 hover:text-white hover:bg-slate-700",children:a.jsx(aR,{className:"h-4 w-4"})})}),o&&a.jsxs("div",{className:"px-4 py-3 border-b border-slate-700",children:[a.jsx("label",{className:"text-[10px] text-slate-400 block mb-1",children:" "}),a.jsx("select",{value:s,onChange:k=>{i(k.target.value),A({selectedRegionSgg:null})},className:"w-full bg-slate-700 border border-slate-600 text-slate-200 rounded px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500",children:Qc.map(k=>a.jsx("option",{value:k.id,children:k.label},k.id))})]}),a.jsx("nav",{className:"flex-1 p-4 space-y-1",children:y8.map(k=>{const w=k.icon,L=p===k.id;return a.jsxs("button",{onClick:()=>_(k.id),className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${L?"bg-blue-600 text-white":"text-slate-300 hover:bg-slate-700 hover:text-white"}`,title:o?void 0:k.label,children:[a.jsx(w,{className:`h-5 w-5 ${o?"":"mx-auto"}`}),o&&a.jsx("span",{className:"text-sm font-medium",children:k.label})]},k.id)})}),o&&a.jsxs("div",{className:"p-4 border-t border-slate-700",children:[a.jsxs("div",{className:"text-xs text-slate-400 mb-1",children:[S.label," "]}),a.jsx("div",{className:"text-sm font-medium text-white",children:e}),a.jsx("div",{className:"text-xs text-slate-400",children:" "})]})]}),a.jsxs("div",{className:"flex-1 flex min-h-0 flex-col overflow-hidden min-w-0",children:[a.jsxs("header",{className:"h-14 bg-white border-b border-gray-200 flex items-center justify-between px-6 shrink-0",children:[a.jsx("div",{className:"flex items-center gap-4",children:(()=>{const k=y8.find(H=>H.id===p),w=k?.icon||tx,L=Q3[p];return a.jsx(Z3,{title:L?.title??k?.label??"  ",subtitle:L?.subtitle??"Neuro-Shield   ",icon:a.jsx(w,{className:"h-4 w-4 text-white"})})})()}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(jt,{variant:"ghost",size:"sm",className:"relative",children:[a.jsx(ih,{className:"h-5 w-5"}),a.jsx(rn,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs",children:"3"})]}),a.jsxs("div",{className:"relative",children:[a.jsxs(jt,{variant:"ghost",className:"flex items-center gap-2",onClick:()=>u(!d),children:[a.jsx("div",{className:"h-8 w-8 rounded-full bg-slate-100 flex items-center justify-center text-slate-600 font-semibold text-sm",children:e.charAt(0)}),a.jsx("span",{className:"text-sm font-medium",children:e}),a.jsx(Ss,{className:"h-4 w-4 text-gray-400"})]}),d&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>u(!1)}),a.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-md shadow-lg border border-gray-200 z-50",children:[a.jsxs("div",{className:"px-3 py-2 border-b border-gray-200",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:e}),a.jsx("div",{className:"text-xs text-gray-500",children:" "})]}),a.jsx("div",{className:"border-t border-gray-200 py-1",children:a.jsxs("button",{onClick:()=>{u(!1),I()},className:"w-full flex items-center px-3 py-2 text-sm text-red-600 hover:bg-red-50",children:[a.jsx(nR,{className:"mr-2 h-4 w-4"}),""]})})]})]})]})]})]}),a.jsx("main",{className:"relative flex-1 min-h-0 w-full overflow-hidden",children:R()})]})]})}function cke(e,t=[]){let r=[];function n(i,o){const l=h.createContext(o);l.displayName=i+"Context";const d=r.length;r=[...r,o];const u=p=>{const{scope:g,children:x,...y}=p,N=g?.[e]?.[d]||l,v=h.useMemo(()=>y,Object.values(y));return a.jsx(N.Provider,{value:v,children:x})};u.displayName=i+"Provider";function m(p,g){const x=g?.[e]?.[d]||l,y=h.useContext(x);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${p}\` must be used within \`${i}\``)}return[u,m]}const s=()=>{const i=r.map(o=>h.createContext(o));return function(l){const d=l?.[e]||i;return h.useMemo(()=>({[`__scope${e}`]:{...l,[e]:d}}),[l,d])}};return s.scopeName=e,[n,dke(s,...t)]}function dke(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=n.reduce((l,{useScope:d,scopeName:u})=>{const p=d(i)[`__scope${u}`];return{...l,...p}},{});return h.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}var uke=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],kk=uke.reduce((e,t)=>{const r=A1(`Primitive.${t}`),n=h.forwardRef((s,i)=>{const{asChild:o,...l}=s,d=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(d,{...l,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),L_={exports:{}},$_={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S8;function fke(){if(S8)return $_;S8=1;var e=S1();function t(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,s=e.useEffect,i=e.useLayoutEffect,o=e.useDebugValue;function l(p,g){var x=g(),y=n({inst:{value:x,getSnapshot:g}}),N=y[0].inst,v=y[1];return i(function(){N.value=x,N.getSnapshot=g,d(N)&&v({inst:N})},[p,x,g]),s(function(){return d(N)&&v({inst:N}),p(function(){d(N)&&v({inst:N})})},[p]),o(x),x}function d(p){var g=p.getSnapshot;p=p.value;try{var x=g();return!r(p,x)}catch{return!0}}function u(p,g){return g()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:l;return $_.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:m,$_}var E8;function pke(){return E8||(E8=1,L_.exports=fke()),L_.exports}var mke=pke();function hke(){return mke.useSyncExternalStore(gke,()=>!0,()=>!1)}function gke(){return()=>{}}var Pk="Avatar",[xke]=cke(Pk),[bke,lV]=xke(Pk),cV=h.forwardRef((e,t)=>{const{__scopeAvatar:r,...n}=e,[s,i]=h.useState("idle");return a.jsx(bke,{scope:r,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:a.jsx(kk.span,{...n,ref:t})})});cV.displayName=Pk;var dV="AvatarImage",yke=h.forwardRef((e,t)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:s=()=>{},...i}=e,o=lV(dV,r),l=vke(n,i),d=vs(u=>{s(u),o.onImageLoadingStatusChange(u)});return xa(()=>{l!=="idle"&&d(l)},[l,d]),l==="loaded"?a.jsx(kk.img,{...i,ref:t,src:n}):null});yke.displayName=dV;var uV="AvatarFallback",fV=h.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:n,...s}=e,i=lV(uV,r),[o,l]=h.useState(n===void 0);return h.useEffect(()=>{if(n!==void 0){const d=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(d)}},[n]),o&&i.imageLoadingStatus!=="loaded"?a.jsx(kk.span,{...s,ref:t}):null});fV.displayName=uV;function j8(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function vke(e,{referrerPolicy:t,crossOrigin:r}){const n=hke(),s=h.useRef(null),i=n?(s.current||(s.current=new window.Image),s.current):null,[o,l]=h.useState(()=>j8(i,e));return xa(()=>{l(j8(i,e))},[i,e]),xa(()=>{const d=p=>()=>{l(p)};if(!i)return;const u=d("loaded"),m=d("error");return i.addEventListener("load",u),i.addEventListener("error",m),t&&(i.referrerPolicy=t),typeof r=="string"&&(i.crossOrigin=r),()=>{i.removeEventListener("load",u),i.removeEventListener("error",m)}},[i,r,t]),o}var Nke=cV,Ske=fV;function Eke({className:e,...t}){return a.jsx(Nke,{"data-slot":"avatar",className:ue("relative flex size-10 shrink-0 overflow-hidden rounded-full",e),...t})}function jke({className:e,...t}){return a.jsx(Ske,{"data-slot":"avatar-fallback",className:ue("bg-muted flex size-full items-center justify-center rounded-full",e),...t})}const w8=[{id:"national-dashboard",label:"  ",icon:oh,roles:["central_admin","policy_maker"]},{id:"model-apply",label:"  ",icon:fg,roles:["central_admin","policy_maker"]},{id:"model-governance",label:"/  ",icon:Qo,roles:["central_admin"]},{id:"quality-monitoring",label:"& ",icon:id,roles:["central_admin","policy_maker"]},{id:"compliance-audit",label:"   ",icon:tR,roles:["central_admin"]},{id:"kpi-dictionary",label:"KPI ",icon:cm,roles:["central_admin","policy_maker"]},{id:"settings",label:"",icon:nx,roles:["central_admin","policy_maker"]}];function wke({children:e,currentPage:t,userRole:r,userName:n,onPageChange:s,onLogout:i}){const[o,l]=h.useState(!0),[d]=h.useState(5),[u,m]=h.useState(!1),p=w8.filter(y=>y.roles.includes(r)),g=y=>{switch(y){case"central_admin":return" ";case"policy_maker":return" ";default:return""}},x=()=>{window.confirm(" ?")&&i()};return a.jsxs("div",{className:"flex h-screen bg-gray-50",children:[a.jsxs("aside",{className:`${o?"w-64":"w-20"} bg-slate-800 border-r border-slate-700 transition-all duration-300 flex flex-col`,children:[a.jsx("div",{className:"h-16 flex items-center justify-between px-4 border-b border-slate-700",children:o?a.jsxs(a.Fragment,{children:[a.jsx(cR,{size:36,showText:!0,subtitle:" ",variant:"dark"}),a.jsx(jt,{variant:"ghost",size:"sm",onClick:()=>l(!1),className:"h-8 w-8 p-0 text-slate-400 hover:text-white hover:bg-slate-700",children:a.jsx(uu,{className:"h-4 w-4"})})]}):a.jsx(jt,{variant:"ghost",size:"sm",onClick:()=>l(!0),className:"h-8 w-8 p-0 mx-auto text-slate-400 hover:text-white hover:bg-slate-700",children:a.jsx(aR,{className:"h-4 w-4"})})}),a.jsx("nav",{className:"flex-1 p-4 space-y-1",children:p.map(y=>{const N=y.icon,v=t===y.id;return a.jsxs("button",{onClick:()=>s(y.id),className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${v?"bg-blue-600 text-white":"text-slate-300 hover:bg-slate-700 hover:text-white"}`,children:[a.jsx(N,{className:`h-5 w-5 ${!o&&"mx-auto"}`}),o&&a.jsx("span",{className:"text-sm font-medium",children:y.label})]},y.id)})}),o&&a.jsxs("div",{className:"p-4 border-t border-slate-700",children:[a.jsx("div",{className:"text-xs text-slate-400 mb-1",children:""}),a.jsx("div",{className:"text-sm font-medium text-white",children:n}),a.jsx("div",{className:"text-xs text-slate-400",children:g(r)})]})]}),a.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[a.jsxs("header",{className:"h-14 bg-white border-b border-gray-200 flex items-center justify-between px-6",children:[a.jsx("div",{className:"flex items-center gap-3",children:(()=>{const y=w8.find(S=>S.id===t),N=y?.icon||oh,v=Q3[t];return a.jsx(Z3,{title:v?.title??y?.label??"  ",subtitle:v?.subtitle??"Neuro-Shield  ",icon:a.jsx(N,{className:"h-4 w-4 text-white"})})})()}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(jt,{variant:"ghost",size:"sm",className:"relative",children:[a.jsx(ih,{className:"h-5 w-5"}),d>0&&a.jsx(rn,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs",children:d})]}),a.jsxs("div",{className:"relative",children:[a.jsxs(jt,{variant:"ghost",className:"flex items-center gap-2",onClick:()=>m(!u),children:[a.jsx(Eke,{className:"h-8 w-8",children:a.jsx(jke,{className:"bg-slate-100 text-slate-600",children:n.charAt(0)})}),a.jsx("span",{className:"text-sm font-medium",children:n}),a.jsx(Ss,{className:"h-4 w-4 text-gray-400"})]}),u&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>m(!1)}),a.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-md shadow-lg border border-gray-200 z-50",children:[a.jsxs("div",{className:"px-3 py-2 border-b border-gray-200",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:n}),a.jsx("div",{className:"text-xs text-gray-500",children:g(r)})]}),a.jsx("div",{className:"py-1",children:a.jsxs("button",{onClick:()=>{m(!1),s("settings")},className:"w-full flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[a.jsx(nx,{className:"mr-2 h-4 w-4"}),""]})}),a.jsx("div",{className:"border-t border-gray-200 py-1",children:a.jsxs("button",{onClick:()=>{m(!1),x()},className:"w-full flex items-center px-3 py-2 text-sm text-red-600 hover:bg-red-50",children:[a.jsx(nR,{className:"mr-2 h-4 w-4"}),""]})})]})]})]})]})]}),a.jsx("main",{className:"flex-1 w-full overflow-auto relative",children:e})]})]})}const F_={drillLevel:"nation",drillPath:[{level:"nation",code:"KR",name:""}],selectedRegion:null};function Ake(){const[e,t]=h.useState(F_),r=h.useCallback((d,u={})=>{const m=u.replace??!0;t(p=>{if(d.level==="nation")return C0("nation","KR",m),F_;const g=p.drillPath[p.drillPath.length-1],x=p.drillPath.findIndex(N=>N.level===d.level&&N.code===d.code);let y;return x>=0?(y=p.drillPath.slice(0,x+1),y[y.length-1]={level:d.level,code:d.code,name:d.name}):g?.level===d.level?y=[...p.drillPath.slice(0,-1),d]:y=[...p.drillPath,d],C0(d.level,d.code,m),{drillLevel:d.level,drillPath:y,selectedRegion:d}})},[]),n=h.useCallback(d=>{r(d,{replace:!0})},[r]),s=h.useCallback(()=>{t(d=>{if(d.drillPath.length<=1)return d;const u=d.drillPath.slice(0,-1),m=u[u.length-1];return C0(m.level,m.code,!0),{drillLevel:m.level,drillPath:u,selectedRegion:m.level==="nation"?null:{code:m.code,name:m.name,level:m.level}}})},[]),i=h.useCallback(d=>{t(u=>{if(d<0||d>=u.drillPath.length)return u;const m=u.drillPath.slice(0,d+1),p=m[m.length-1];return C0(p.level,p.code,!0),{drillLevel:p.level,drillPath:m,selectedRegion:p.level==="nation"?null:{code:p.code,name:p.name,level:p.level}}})},[]),o=h.useCallback(()=>{t(F_),C0("nation","KR",!0)},[]),l=h.useCallback(d=>{t(u=>({...u,selectedRegion:d}))},[]);return{...e,drillDown:n,drillUp:s,drillTo:i,resetDrill:o,setSelectedRegion:l,setScope:r}}function C0(e,t,r=!0){if(typeof window>"u")return;const n=new URL(window.location.href);if(n.searchParams.set("level",e),n.searchParams.set("region",t),r){window.history.replaceState({},"",n.toString());return}window.history.pushState({},"",n.toString())}function U_(e){return{nation:"",sido:"",sigungu:"",center:""}[e]||e}const WN=[{id:"sla-status",name:"SLA ",description:"SLA / ",domain:"sla",metric:{numerator:"sla_compliant_count",denominator:"total_count",aggregation:"rate",unit:"%"},visualization:{chartType:"donut",breakdown:"status",colorScheme:"sla",format:{decimals:2,suffix:"%"}},filters:{allowedLevels:["nation","sido","sigungu","center"],defaultTimeRange:"week"},priority:1,isActive:!0},{id:"data-status",name:" ",description:" / ",domain:"data",metric:{numerator:"data_sufficient_count",denominator:"total_count",aggregation:"rate",unit:"%"},visualization:{chartType:"donut",breakdown:"status",colorScheme:"data",format:{decimals:2,suffix:"%"}},filters:{allowedLevels:["nation","sido","sigungu","center"],defaultTimeRange:"week"},priority:2,isActive:!0},{id:"case-distribution",name:" ",description:"/  ",domain:"case",metric:{valueField:"case_count",aggregation:"sum",unit:""},visualization:{chartType:"bar",breakdown:"ageGroup",colorScheme:"age",format:{decimals:0}},filters:{allowedLevels:["nation","sido","sigungu","center"],defaultTimeRange:"week"},priority:3,isActive:!0},{id:"center-load",name:"  ",description:"   ",domain:"case",metric:{valueField:"transfer_count",aggregation:"sum",unit:""},visualization:{chartType:"bar",breakdown:"centerType",colorScheme:"blue",format:{decimals:0}},filters:{allowedLevels:["nation","sido"],defaultTimeRange:"week"},priority:4,isActive:!0},{id:"trend-timeseries",name:"  ",description:"    ",domain:"case",metric:{valueField:"processed_count",aggregation:"sum",unit:""},visualization:{chartType:"line",breakdown:"month",colorScheme:"green",format:{decimals:0}},filters:{allowedLevels:["nation","sido","sigungu"],defaultTimeRange:"year"},priority:10,isActive:!0},{id:"kpi-summary-table",name:"KPI ",description:"KPI // ",domain:"case",metric:{valueField:"kpi_value",aggregation:"avg",unit:"%"},visualization:{chartType:"table",format:{decimals:1}},filters:{allowedLevels:["nation","sido"],defaultTimeRange:"week"},priority:5,isActive:!0,chartEnabled:!1},{id:"kpi-sla-rate",name:"SLA ",description:"   SLA   ",domain:"sla",metric:{numerator:"sla_compliant_count",denominator:"total_count",aggregation:"rate",unit:"%",baseline:92,target:95,higherBetter:!0},visualization:{chartType:"bullet",format:{decimals:1,suffix:"%"}},filters:{allowedLevels:["nation","sido","sigungu","center"],defaultTimeRange:"week"},priority:100,isActive:!0,chartEnabled:!0},{id:"kpi-data-rate",name:" ",description:"      ",domain:"data",metric:{numerator:"data_sufficient_count",denominator:"total_count",aggregation:"rate",unit:"%",baseline:88,target:90,higherBetter:!0},visualization:{chartType:"bullet",format:{decimals:1,suffix:"%"}},filters:{allowedLevels:["nation","sido","sigungu","center"],defaultTimeRange:"week"},priority:101,isActive:!0,chartEnabled:!0},{id:"kpi-completion-rate",name:" ",description:"      ",domain:"case",metric:{numerator:"completed_count",denominator:"total_count",aggregation:"rate",unit:"%",baseline:88,target:90,higherBetter:!0},visualization:{chartType:"bullet",format:{decimals:1,suffix:"%"}},filters:{allowedLevels:["nation","sido","sigungu","center"],defaultTimeRange:"week"},priority:102,isActive:!0,chartEnabled:!0},{id:"kpi-response-rate",name:" ",description:"     ",domain:"response",metric:{numerator:"timely_response_count",denominator:"total_count",aggregation:"rate",unit:"%",baseline:82,target:85,higherBetter:!0},visualization:{chartType:"bullet",format:{decimals:1,suffix:"%"}},filters:{allowedLevels:["nation","sido","sigungu","center"],defaultTimeRange:"week"},priority:103,isActive:!0,chartEnabled:!0},{id:"kpi-quality-score",name:" ",description:"    ",domain:"quality",metric:{valueField:"quality_score",aggregation:"avg",unit:"",baseline:85,target:88,higherBetter:!0},visualization:{chartType:"bullet",format:{decimals:1,suffix:""}},filters:{allowedLevels:["nation","sido","sigungu","center"],defaultTimeRange:"week"},priority:104,isActive:!0,chartEnabled:!0},{id:"kpi-avg-processing-time",name:" ",description:"     ()",domain:"time",metric:{valueField:"processing_time_days",aggregation:"avg",unit:"",baseline:3,target:2.5,higherBetter:!1},visualization:{chartType:"bullet",format:{decimals:1,suffix:""}},filters:{allowedLevels:["nation","sido","sigungu","center"],defaultTimeRange:"week"},priority:105,isActive:!0,chartEnabled:!0},{id:"total-cases",name:" ",description:"   ",domain:"case",metric:{valueField:"total_case_count",aggregation:"sum",unit:""},visualization:{chartType:"treemap",breakdown:"region",colorScheme:"blue",format:{decimals:0}},filters:{allowedLevels:["nation","sido","sigungu","center"],defaultTimeRange:"week"},priority:0,isActive:!0}];function A8(e){const t=WN.filter(r=>r.isActive);switch(e){case"left":return t.filter(r=>r.visualization.chartType==="treemap"||r.id==="total-cases").sort((r,n)=>r.priority-n.priority);case"right":return t.filter(r=>["donut","bar","table"].includes(r.visualization.chartType)&&r.id!=="total-cases").sort((r,n)=>r.priority-n.priority);case"bottom":return t.filter(r=>r.visualization.chartType==="line").sort((r,n)=>r.priority-n.priority);default:return[]}}function _ke(e){return WN.find(t=>t.id===e)}function Cke(e){return WN.filter(t=>t.isActive&&t.filters.allowedLevels.includes(e)).sort((t,r)=>t.priority-r.priority)}function Tke(e){return WN.filter(t=>t.isActive&&t.chartEnabled===!0&&(!e||t.filters.allowedLevels.includes(e))).sort((t,r)=>t.priority-r.priority)}function Oke(e){let t=0;for(let r=0;r<e.length;r++)t=t*31+e.charCodeAt(r)>>>0;return t}function Yn(e,t,r){const n=Oke(e)%1e3/1e3;return t+(r-t)*n}function Rke(e,t,r,n){const s=_ke(e);if(!s)return null;const i=`${e}-${t}-${r}`;switch(s.visualization.chartType){case"donut":{if(e==="sla-status"){const o=100-Yn(`${i}-sla`,2,6);return[{name:"",value:Number(o.toFixed(2)),color:"#3b82f6"},{name:"",value:Number((100-o).toFixed(2)),color:"#ef4444"}]}if(e==="data-status"){const o=100-Yn(`${i}-data`,3,8);return[{name:"",value:Number(o.toFixed(2)),color:"#3b82f6"},{name:"",value:Number((100-o).toFixed(2)),color:"#f59e0b"}]}return[{name:"1",value:Math.round(Yn(`${i}-1`,40,60)),color:"#3b82f6"},{name:"2",value:Math.round(Yn(`${i}-2`,20,40)),color:"#22c55e"},{name:"3",value:Math.round(Yn(`${i}-3`,10,20)),color:"#f59e0b"}]}case"bar":{if(e==="case-distribution"){const o=["20~24","25~29","30~34","35~39","40~44","45~49","50~54","55~59","60~64","65~69","70~74","75~79","80~84","85~"],l=[1200,1800,2200,2300,2700,3400,3600,3300,3900,3800,4400,4200,4100,3500,2300,1700,1300,1e3];return o.map((d,u)=>({label:d,value:Math.round(l[u]*(.9+Yn(`${i}-age-${u}`,0,.2)))}))}return e==="center-load"?[{label:"",value:Math.round(Yn(`${i}-load-1`,35e3,45e3))},{label:" ",value:Math.round(Yn(`${i}-load-2`,4e3,6e3))},{label:" ",value:Math.round(Yn(`${i}-load-3`,1500,2500))},{label:" ",value:Math.round(Yn(`${i}-load-4`,1200,2e3))},{label:"",value:Math.round(Yn(`${i}-load-5`,1e3,1800))}]:[{label:"A",value:Math.round(Yn(`${i}-a`,1e3,5e3))},{label:"B",value:Math.round(Yn(`${i}-b`,1e3,5e3))},{label:"C",value:Math.round(Yn(`${i}-c`,1e3,5e3))}]}case"table":return{columns:[{key:"kpi",label:"KPI ",align:"left"},{key:"avg",label:"",align:"right",format:"percent"},{key:"min",label:"()",align:"right"},{key:"max",label:"()",align:"right"}],rows:[{kpi:"SLA ",avg:96.2,min:"91.3% ()",max:"99.1% ()"},{kpi:" ",avg:94.8,min:"88.5% ()",max:"98.2% ()"},{kpi:" ",avg:2.3,min:"1.8 ()",max:"3.5 ()"}]};case"line":return["2018","2019","2020","2021","2022","2023","2024","2025","2026"].map((l,d)=>({x:l,value:Math.round(Yn(`${i}-ts-${d}`,12e3,18e3))}));case"treemap":return[{name:"",value:Math.round(Yn(`${i}-tree-`,2500,3500))},{name:"",value:Math.round(Yn(`${i}-tree-`,1800,2500))},{name:"",value:Math.round(Yn(`${i}-tree-`,1500,2200))},{name:"",value:Math.round(Yn(`${i}-tree-`,1200,1800))},{name:"",value:Math.round(Yn(`${i}-tree-`,1e3,1500))}];case"bullet":{const o=s.metric,l=o.baseline??85,d=o.target??90,u=o.higherBetter!==!1,m=o.unit||"%",p=[],g=(y,N)=>{const v=N.match(/\d+/),S=v?Number(v[0]):0,E=Yn(`${i}-phase`,0,6.28),C=Math.sin(S*.9+E),_=Yn(`${i}-${y}-${N}`,-1,1);return y==="kpi-sla-rate"?92+C*4+_*2:y==="kpi-data-rate"?91+C*5+_*2:y==="kpi-completion-rate"?90+C*4.5+_*2:y==="kpi-response-rate"?85+C*5+_*3:y==="kpi-quality-score"?88+C*4+_*2:y==="kpi-avg-processing-time"?2.8+C*.8+_*.3:l+C*5+_*3};if(n==="week"){const y=new Date(2026,1,5);for(let N=6;N>=0;N--){const v=new Date(y);v.setDate(v.getDate()-N);const S=`${v.getMonth()+1}/${v.getDate()}`;p.push({date:S,value:Number(g(e,`d${N}`).toFixed(1))})}}else if(n==="month"){const y=["1","2","3","4","5","6","7","8","9","10","11","12"];for(let N=0;N<12;N++)p.push({date:y[N],value:Number(g(e,`m${N}`).toFixed(1))})}else{const y=["1","2","3","4"];for(let N=0;N<4;N++)p.push({date:y[N],value:Number(g(e,`q${N}`).toFixed(1))})}const x=p[p.length-1].value;return{dailyData:p,current:x,baseline:l,target:d,unit:m,higherBetter:u}}default:return null}}const Q0=[{id:"chg_20260124",title:"L2  6560  ",type:"rule_threshold",version:"v2.3.2 (draft)",deployedAt:"2026-01-24T14:00:00+09:00",deployedBy:"-",status:"reviewing",description:"   L2   . 60~64   24%     .",before:{slaRate:89.8,responseTimeliness:85.1,completionRate:92.7,dataFulfillment:94.3},after:{slaRate:89.8,responseTimeliness:85.1,completionRate:92.7,dataFulfillment:94.3},impactSummary:[{kpi:"SLA",label:"SLA ",changePp:0,verdict:"insignificant"},{kpi:"RESP",label:" ",changePp:0,verdict:"insignificant"},{kpi:"COMP",label:" ",changePp:0,verdict:"insignificant"},{kpi:"DATA",label:" ",changePp:0,verdict:"insignificant"}],affectedRegions:[""],riskLevel:"medium",requestedBy:" ()",approvedBy:null,currentRule:"  65  L2",proposedRule:"  60  L2",reason:" 3   , 60~64   ( 24%).      15%     ."},{id:"chg_20260120",title:"L2  6065  ",type:"rule_threshold",version:"v2.3.1",deployedAt:"2026-01-20T09:00:00+09:00",deployedBy:" ()",status:"deployed",description:"L2    60 65 .         .",before:{slaRate:87.2,responseTimeliness:82.5,completionRate:91.3,dataFulfillment:94.1},after:{slaRate:89.8,responseTimeliness:85.1,completionRate:92.7,dataFulfillment:94.3},impactSummary:[{kpi:"SLA",label:"SLA ",changePp:2.6,verdict:"improved"},{kpi:"RESP",label:" ",changePp:2.6,verdict:"improved"},{kpi:"COMP",label:" ",changePp:1.4,verdict:"improved"},{kpi:"DATA",label:" ",changePp:.2,verdict:"insignificant"}],affectedRegions:[""],riskLevel:"medium",requestedBy:" ()",approvedBy:" ()"},{id:"chg_20260115",title:"  75 ",type:"contact_rule",version:"v2.3.0",deployedAt:"2026-01-15T14:30:00+09:00",deployedBy:" ()",status:"deployed",description:"L3    7 5 .    .",before:{slaRate:85.8,responseTimeliness:80.1,completionRate:89.5,dataFulfillment:93.8},after:{slaRate:87.2,responseTimeliness:82.5,completionRate:91.3,dataFulfillment:94.1},impactSummary:[{kpi:"SLA",label:"SLA ",changePp:1.4,verdict:"improved"},{kpi:"RESP",label:" ",changePp:2.4,verdict:"improved"},{kpi:"COMP",label:" ",changePp:1.8,verdict:"improved"},{kpi:"DATA",label:" ",changePp:.3,verdict:"insignificant"}],affectedRegions:[""],riskLevel:"low",requestedBy:" ( )",approvedBy:" ()"},{id:"chg_20260110",title:"  v3.2 ",type:"model_version",version:"v3.2.0",deployedAt:"2026-01-10T11:00:00+09:00",deployedBy:" ()",status:"deployed",description:"   v3.2  .  +3.2%p,  +1.8%p .",before:{slaRate:84.1,responseTimeliness:78.9,completionRate:88.2,dataFulfillment:93.2},after:{slaRate:85.8,responseTimeliness:80.1,completionRate:89.5,dataFulfillment:93.8},impactSummary:[{kpi:"SLA",label:"SLA ",changePp:1.7,verdict:"improved"},{kpi:"RESP",label:" ",changePp:1.2,verdict:"improved"},{kpi:"COMP",label:" ",changePp:1.3,verdict:"improved"},{kpi:"DATA",label:" ",changePp:.6,verdict:"insignificant"}],affectedRegions:[""],riskLevel:"low",requestedBy:" ()",approvedBy:" ()"},{id:"chg_20260105",title:"  1.21.35 ",type:"ruleset",version:"v2.2.5",deployedAt:"2026-01-05T10:00:00+09:00",deployedBy:" ()",status:"rollback",description:"   1.2 1.35 .   1  .",before:{slaRate:84.5,responseTimeliness:79.2,completionRate:88.8,dataFulfillment:93.5},after:{slaRate:82.3,responseTimeliness:76.8,completionRate:86.1,dataFulfillment:93.4},impactSummary:[{kpi:"SLA",label:"SLA ",changePp:-2.2,verdict:"worsened"},{kpi:"RESP",label:" ",changePp:-2.4,verdict:"worsened"},{kpi:"COMP",label:" ",changePp:-2.7,verdict:"worsened"},{kpi:"DATA",label:" ",changePp:-.1,verdict:"insignificant"}],affectedRegions:[""],riskLevel:"high",requestedBy:" ()",approvedBy:" ()"}],kke=[{key:"ops_bottleneck",label:" ",icon:"",description:" , SLA ,        ",severity:"critical",score:38,contributionPct:35,topRegions:[{code:"26",name:"",score:22,detail:"SLA 78.2%,  42"},{code:"27",name:"",score:35,detail:"SLA 82.5%,  "},{code:"31",name:"",score:41,detail:"  SLA 84%"}],indicators:[{label:" SLA ",value:89.8,unit:"%",threshold:90,status:"yellow"},{label:"  ",value:156,unit:"",threshold:100,status:"red"},{label:"  ",value:4.2,unit:"",threshold:3,status:"red"},{label:"   ",value:28.5,unit:"/",threshold:25,status:"yellow"}]},{key:"data_quality",label:" ",icon:"",description:" ,  ,      ",severity:"warning",score:62,contributionPct:28,topRegions:[{code:"26",name:"",score:48,detail:"  8.2%"},{code:"27",name:"",score:55,detail:"   48"},{code:"28",name:"",score:61,detail:"  12"}],indicators:[{label:" ",value:95.5,unit:"%",threshold:95,status:"green"},{label:" ",value:96.8,unit:"%",threshold:95,status:"green"},{label:" ",value:93.8,unit:"%",threshold:95,status:"yellow"},{label:"  ",value:4.5,unit:"%",threshold:5,status:"yellow"}]},{key:"contact_strategy",label:" ",icon:"",description:" ,  ,       ",severity:"good",score:75,contributionPct:22,topRegions:[{code:"30",name:"",score:58,detail:"  62%"},{code:"29",name:"",score:65,detail:"  68%"},{code:"31",name:"",score:70,detail:"  "}],indicators:[{label:" ",value:78.5,unit:"%",threshold:80,status:"yellow"},{label:" ",value:72.3,unit:"%",threshold:70,status:"green"},{label:"  ",value:2.8,unit:"",threshold:3,status:"green"},{label:" ",value:85.1,unit:"%",threshold:85,status:"green"}]},{key:"model_fitness",label:" ",icon:"",description:"  ,  ,      ",severity:"good",score:82,contributionPct:15,topRegions:[{code:"27",name:"",score:68,detail:"F1 89.2%,  "},{code:"26",name:"",score:72,detail:"Precision  "},{code:"28",name:"",score:78,detail:" "}],indicators:[{label:" F1 ",value:91.6,unit:"%",threshold:90,status:"green"},{label:"  ",value:.12,unit:"",threshold:.15,status:"green"},{label:" ",value:90.5,unit:"%",threshold:90,status:"green"},{label:"",value:92.8,unit:"%",threshold:90,status:"green"}]}],Ry=[{id:"qa_001",type:"sla_breach",severity:"critical",title:" SLA  ",description:"SLA  78.2% (85%) .  42 .",region:"",detectedAt:"2026-01-24T08:00:00+09:00",resolved:!1,relatedDriver:"ops_bottleneck"},{id:"qa_002",type:"update_delay",severity:"warning",title:"   ",description:"   48. (24) .",region:"",detectedAt:"2026-01-23T10:00:00+09:00",resolved:!1,relatedDriver:"data_quality"},{id:"qa_003",type:"model_drift",severity:"warning",title:"L3     ",description:"F1 89.2%    -2.4%p.  .",region:"",detectedAt:"2026-01-22T15:00:00+09:00",resolved:!1,relatedDriver:"model_fitness"},{id:"qa_004",type:"data_missing",severity:"info",title:"   ",description:"  12 .    .",region:"",detectedAt:"2026-01-21T09:00:00+09:00",resolved:!0,relatedDriver:"data_quality"}],Pke=[{id:"ua_001",timestamp:"2026-01-24T09:15:00+09:00",type:"violation",severity:"high",status:"reviewing",title:"  PII  ",actor:" (CS-1042)",actorRole:"",center:" ",target:"  DB",violationType:"  ",violatedRegulation:" 29,  SEC-003",cause:"      . IP     .",requestor:" (CS-1042)",executor:" (CS-1042)",policyRef:" 29",internalStandardId:"SEC-003",approvalComment:"     .    .",rationale:"  PII    .    .",kpiSnapshot:{slaRate:89.8,riskTop3:[" "," "," "],regionContext:""}},{id:"ua_002",timestamp:"2026-01-22T14:20:00+09:00",type:"violation",severity:"medium",status:"resolved",title:"   ",actor:"",actorRole:"  ",center:" ",target:"   #2847",violationType:"   ",violatedRegulation:" ACC-007 (   )",cause:"      .  .",relatedChangeId:"chg_20260120",requestor:"",approver:" ()",executor:"  ",policyRef:"     v2.1",internalStandardId:"ACC-007",approvalComment:"    .  .",rationale:"     .       .",kpiSnapshot:{slaRate:88.5,riskTop3:[" "," "," "],regionContext:""}},{id:"ua_003",timestamp:"2026-01-20T16:00:00+09:00",type:"violation",severity:"low",status:"resolved",title:"SLA   (3)",actor:" ",actorRole:" ",center:" ",target:"SLA  (48   )",violationType:"SLA  ",violatedRegulation:" SLA-001 (  48)",cause:"     (+15).   .",requestor:" ",executor:"  ",approvalComment:"  1  . 3  72   .",policyRef:" SLA-001",internalStandardId:"SLA-001",rationale:"   48 SLA .     .",kpiSnapshot:{slaRate:87.2,riskTop3:[" "," "," "],regionContext:""}},{id:"ua_004",timestamp:"2026-01-20T09:00:00+09:00",type:"policy_change",severity:"medium",status:"resolved",title:"L2  6065  ",actor:"",actorRole:" ",target:"L2   ()",cause:"        .",relatedChangeId:"chg_20260120",requestor:" ()",approver:" ()",executor:" ()",policyRef:"    v4.2",internalStandardId:"RULE-L2-001",approvalComment:"  . SLA +2.6%p  .   .",rationale:"       .   .",kpiSnapshot:{slaRate:87.2,riskTop3:[" "," "," "],regionContext:""}},{id:"ua_005",timestamp:"2026-01-15T14:30:00+09:00",type:"policy_change",severity:"low",status:"resolved",title:"  75  ()",actor:"",actorRole:" ",target:"L3   ()",cause:"L3  7    2 . 5  .",relatedChangeId:"chg_20260115",requestor:" ()",approver:" ()",executor:"  ",policyRef:"   v3.0",internalStandardId:"RULE-CT-002",approvalComment:"   . 2    .",rationale:"L3  7    2 . 5     .",kpiSnapshot:{slaRate:86.1,riskTop3:[" "," "," "],regionContext:""}},{id:"ua_006",timestamp:"2026-01-10T11:00:00+09:00",type:"model_deploy",severity:"medium",status:"resolved",title:"   v3.2  ",actor:"",actorRole:" ",target:"    ",cause:"v3.1   +3.2%p . A/B  2 .",relatedChangeId:"chg_20260110",requestor:" ()",approver:" ()",executor:" ()",policyRef:"    v1.3",internalStandardId:"MDL-DEP-001",approvalComment:"A/B   .  +3.2%p,  +1.8%p.   .",rationale:"v3.1   +3.2%p. A/B  2    .",kpiSnapshot:{slaRate:85.8,riskTop3:[" "," "," "],regionContext:""}},{id:"ua_007",timestamp:"2026-01-24T17:00:00+09:00",type:"resolution",severity:"high",status:"resolved",title:"     ",actor:"",actorRole:" ",target:"  5 ",cause:"SLA  78.2%  .  42   .",requestor:" ",approver:" ()",executor:"",policyRef:"    v2.0",internalStandardId:"OPS-EMG-001",approvalComment:"5   2 10  . 48    50% .",rationale:"SLA  78.2%  .   42 .    .",kpiSnapshot:{slaRate:78.2,riskTop3:[" "," "," "],regionContext:""}},{id:"ua_008",timestamp:"2026-01-18T11:30:00+09:00",type:"resolution",severity:"medium",status:"resolved",title:"    ",actor:"",actorRole:" ",target:"   ",cause:"        .",requestor:"  ",approver:" ()",executor:"  ",policyRef:"     v1.5",internalStandardId:"SEC-POST-001",approvalComment:"     .   .",rationale:"   48    .      .",kpiSnapshot:{slaRate:88.5,riskTop3:[" "," "," "],regionContext:""}},{id:"ua_009",timestamp:"2026-01-05T10:00:00+09:00",type:"policy_change",severity:"high",status:"resolved",title:"  1.21.35  ( )",actor:"",actorRole:" ",target:"   ",cause:"    .   .",relatedChangeId:"chg_20260105",requestor:" ()",approver:"",executor:"  ",policyRef:"   v2.0",internalStandardId:"RULE-WT-001",approvalComment:" +22%  1   . SLA -2.2%p  .",rationale:"     1  . SLA  .",kpiSnapshot:{slaRate:82.3,riskTop3:[" "," "," "],regionContext:""}}];function Dke(e){let t=0;for(let r=0;r<e.length;r++)t=t*31+e.charCodeAt(r)>>>0;return t}function Ie(e,t,r){return t+Dke(e)%1e4/1e4*(r-t)}function Ca(e,t,r){return Math.min(r,Math.max(t,e))}function Fp(e,t,r){const n=Math.max(.1,r.spread),s=Ca(r.volatility??.28,.12,.6),i=Ca(r.trendBias??0,-1,1),o=Ie(`${e}-slope`,-n*.24,n*.24)+i*n*.14,l=Ie(`${e}-cycle`,n*.12,n*.42),d=Ie(`${e}-phase`,0,Math.PI*2),u=n*s,m=Math.round(Ie(`${e}-shock-day`,1,Math.max(1,t-2))),p=Ie(`${e}-shock-amp`,n*.25,n*.85),g=Ie(`${e}-shock-recovery`,.35,.72),x=Ie(`${e}-pre-shock`,.15,.35);let y=Ie(`${e}-shock-sign`,-1,1)>=0?1:-1;r.shockDirection==="up"&&(y=1),r.shockDirection==="down"&&(y=-1);const N=p*y,v=[],S=Math.max(1,t-1);for(let E=0;E<t;E+=1){const C=(E-S/2)*o,_=Math.sin(E/S*Math.PI*2+d)*l,A=Math.sin(E/S*Math.PI+d*.5)*(l*.35),T=Ie(`${e}-noise-${E}`,-u,u);let R=0;E===m&&(R+=N),E===m-1&&(R+=N*x),E===m+1&&(R-=N*g),E===m+2&&(R-=N*g*.35);const I=r.base+C+_+A+T+R;v.push(Number(Ca(I,r.min,r.max).toFixed(1)))}return v}function Il(e,t=9){if(!e.length)return 0;const r=Math.max(0,e.length-3),n=e[e.length-1]-e[r];return Number(Ca(n,-t,t).toFixed(1))}const pV=[{code:"11",name:""},{code:"26",name:""},{code:"27",name:""},{code:"28",name:""},{code:"29",name:""},{code:"30",name:""},{code:"31",name:""},{code:"36",name:""},{code:"41",name:""},{code:"43",name:""},{code:"44",name:""},{code:"45",name:""},{code:"46",name:""},{code:"47",name:""},{code:"48",name:""},{code:"50",name:""},{code:"51",name:""}],Sx=e=>new Promise(t=>setTimeout(t,e));async function Ike(e="LAST_7D",t="default"){await Sx(200);const r=`central-kpis-${e}-${t}`,n=Fp(`${r}-sq-sp`,7,{base:92.2,spread:3.4,min:84,max:99,volatility:.24,trendBias:.12,shockDirection:"down"}),s=Fp(`${r}-pi-sp`,7,{base:27.5,spread:9.2,min:8,max:48,volatility:.34,trendBias:.08,shockDirection:"both"}),i=Fp(`${r}-br-sp`,7,{base:38.5,spread:8.5,min:15,max:58,volatility:.33,trendBias:.16,shockDirection:"up"}),o=Fp(`${r}-dr-sp`,7,{base:90.8,spread:4.8,min:78,max:99,volatility:.26,trendBias:.1,shockDirection:"down"}),l=Fp(`${r}-gs-sp`,7,{base:95.1,spread:2.8,min:88,max:99,volatility:.2,trendBias:.06,shockDirection:"down"}),d=Number(Ca(n[n.length-1]+Ie(`${r}-sq-adjust`,-.6,.6),85,97).toFixed(1)),u=Number(Ca(s[s.length-1]+Ie(`${r}-pi-adjust`,-1.2,1.2),12,42).toFixed(1)),m=Number(Ca(i[i.length-1]+Ie(`${r}-br-adjust`,-1.5,1.5),18,55).toFixed(1)),p=Number(Ca(o[o.length-1]+Ie(`${r}-dr-adjust`,-.8,.8),80,98).toFixed(1)),g=Number(Ca(l[l.length-1]+Ie(`${r}-gs-adjust`,-.5,.5),88,99).toFixed(1)),x=Math.round(Ie(`${r}-sq-d`,1e4,18e3)),y=Math.round(Ie(`${r}-dr-d`,8e3,17e3)),N=Math.round(Ie(`${r}-gs-d`,900,2e3)),v=[{kpiId:"SIGNAL_QUALITY",window:e,numerator:Math.round(Ca(x*d/100+Ie(`${r}-sq-n-jitter`,-120,120),0,x)),denominator:x,value:d,delta7d:Il(n,3.5),sparkline:n},{kpiId:"POLICY_IMPACT",window:e,numerator:Math.round(Ca(u+Ie(`${r}-pi-n-jitter`,-2.5,2.5),0,100)),denominator:100,value:u,delta7d:Il(s,8),auxiliary:{rollbackCount:Math.round(Ie(`${r}-pi-rb`,0,3)),warningRegions:Math.round(Ie(`${r}-pi-wr`,1,5))},sparkline:s},{kpiId:"BOTTLENECK_RISK",window:e,numerator:Math.round(Ca(m+Ie(`${r}-br-n-jitter`,-3,3),0,100)),denominator:100,value:m,delta7d:Il(i,7),auxiliary:{slaViolationRate:Number(Ie(`${r}-br-sla`,5,25).toFixed(1)),l2BacklogCount:Math.round(Ie(`${r}-br-bc`,30,200))},sparkline:i},{kpiId:"DATA_READINESS",window:e,numerator:Math.round(Ca(y*p/100+Ie(`${r}-dr-n-jitter`,-140,140),0,y)),denominator:y,value:p,delta7d:Il(o,4.5),auxiliary:{missingFieldRate:Number(Ie(`${r}-dr-mf`,1,12).toFixed(1)),linkagePendingRate:Number(Ie(`${r}-dr-lp`,2,15).toFixed(1))},sparkline:o},{kpiId:"GOVERNANCE_SAFETY",window:e,numerator:Math.round(Ca(N*g/100+Ie(`${r}-gs-n-jitter`,-20,20),0,N)),denominator:N,value:g,delta7d:Il(l,3),auxiliary:{missingResponsible:Math.round(Ie(`${r}-gs-mr`,0,8)),missingExplanation:Math.round(Ie(`${r}-gs-me`,0,6))},sparkline:l}];return{window:e,timestamp:new Date().toISOString(),kpis:v}}async function Mke(e="LAST_7D",t="default"){await Sx(150);const r=`central-funnel-${e}-${t}`,n=Math.round(Ie(`${r}-reach`,5e4,12e4)),s=Math.round(n*Ie(`${r}-s0r`,.25,.4)),i=Math.round(s*Ie(`${r}-s1r`,.1,.2)),o=Math.round(i*Ie(`${r}-cnr`,.5,.72)),l=Math.round(o*Ie(`${r}-l0r`,.3,.45)),d=Math.round(o*Ie(`${r}-l1r`,.25,.38)),u=Math.round(o*Ie(`${r}-l2r`,.12,.25)),m=Math.round((d+u)*Ie(`${r}-s2r`,.35,.55)),p=Math.round(m*Ie(`${r}-s3r`,.15,.35)),g=[{stage:"Reach",label:"(Reach)",count:n},{stage:"Stage0",label:"0 ",count:s},{stage:"Stage1",label:"1  ",count:i},{stage:"Consent",label:" ",count:o},{stage:"L0",label:"L0 ",count:l},{stage:"L1",label:"L1 ",count:d},{stage:"L2",label:"L2 ",count:u},{stage:"Stage2",label:"2 ",count:m},{stage:"Stage3",label:"3 ",count:p}],x=g.map((y,N)=>({...y,conversionRate:N===0?100:Number((y.count/g[N-1].count*100).toFixed(1))}));return{window:e,stages:x}}async function Lke(e="LAST_7D",t="default"){await Sx(150);const r=`central-bn-${e}-${t}`,n=[{key:"consent_pending_rate",label:" ",value:Number(Ie(`${r}-cp`,15,45).toFixed(1)),unit:"%",threshold:30,status:Ie(`${r}-cp`,15,45)>30?"red":Ie(`${r}-cp`,15,45)>20?"yellow":"green",category:"consent"},{key:"consent_median_days",label:"  ",value:Number(Ie(`${r}-cd`,1.5,6).toFixed(1)),unit:"",threshold:3,status:Ie(`${r}-cd`,1.5,6)>3?"red":Ie(`${r}-cd`,1.5,6)>2?"yellow":"green",category:"consent"},{key:"input_readiness_rate",label:" ",value:Number(Ie(`${r}-ir`,70,98).toFixed(1)),unit:"%",threshold:90,status:Ie(`${r}-ir`,70,98)<90?"red":"green",category:"readiness"},{key:"data_completeness",label:" ",value:Number(Ie(`${r}-dc`,82,99).toFixed(1)),unit:"%",threshold:95,status:Ie(`${r}-dc`,82,99)<95?"yellow":"green",category:"readiness"},{key:"stage2_blocked_rate",label:"2 ",value:Number(Ie(`${r}-s2b`,5,25).toFixed(1)),unit:"%",threshold:15,status:Ie(`${r}-s2b`,5,25)>15?"red":Ie(`${r}-s2b`,5,25)>10?"yellow":"green",category:"blocked"},{key:"stage3_blocked_rate",label:"3 ",value:Number(Ie(`${r}-s3b`,3,20).toFixed(1)),unit:"%",threshold:12,status:Ie(`${r}-s3b`,3,20)>12?"red":Ie(`${r}-s3b`,3,20)>8?"yellow":"green",category:"blocked"},{key:"api_p95_latency",label:"API P95 ",value:Math.round(Ie(`${r}-api`,120,800)),unit:"ms",threshold:500,status:Ie(`${r}-api`,120,800)>500?"red":Ie(`${r}-api`,120,800)>300?"yellow":"green",category:"system"},{key:"queue_depth",label:"  ",value:Math.round(Ie(`${r}-qd`,0,500)),unit:"",threshold:200,status:Ie(`${r}-qd`,0,500)>200?"red":Ie(`${r}-qd`,0,500)>100?"yellow":"green",category:"system"}];return{window:e,metrics:n}}async function $ke(e="LAST_7D",t="default"){await Sx(150);const r=`central-link-${e}-${t}`,n=[{stage:"stage2",linkageRate:Number(Ie(`${r}-s2lr`,55,82).toFixed(1)),medianLeadTimeDays:Number(Ie(`${r}-s2lt`,3,12).toFixed(1)),blockedCount:Math.round(Ie(`${r}-s2bc`,15,90)),blockedReasons:[{reason:" ",count:Math.round(Ie(`${r}-s2r1`,5,30))},{reason:" ",count:Math.round(Ie(`${r}-s2r2`,3,20))},{reason:" ",count:Math.round(Ie(`${r}-s2r3`,2,15))},{reason:" ",count:Math.round(Ie(`${r}-s2r4`,1,10))}]},{stage:"stage3",linkageRate:Number(Ie(`${r}-s3lr`,40,70).toFixed(1)),medianLeadTimeDays:Number(Ie(`${r}-s3lt`,7,28).toFixed(1)),blockedCount:Math.round(Ie(`${r}-s3bc`,5,40)),blockedReasons:[{reason:"(dropout)",count:Math.round(Ie(`${r}-s3r1`,3,15))},{reason:" ",count:Math.round(Ie(`${r}-s3r2`,2,10))},{reason:" ",count:Math.round(Ie(`${r}-s3r3`,1,8))}]}];return{window:e,metrics:n}}async function Fke(e="LAST_7D",t="default"){await Sx(200);const r=`central-reg-${e}-${t}`,n=pV.map(s=>{const i=`${r}-${s.code}`;return{regionCode:s.code,regionName:s.name,signalQuality:Number(Ie(`${i}-sq`,80,98).toFixed(1)),policyImpact:Number(Ie(`${i}-pi`,10,45).toFixed(1)),bottleneckRisk:Number(Ie(`${i}-br`,15,55).toFixed(1)),dataReadiness:Number(Ie(`${i}-dr`,78,99).toFixed(1)),governanceSafety:Number(Ie(`${i}-gs`,85,99).toFixed(1)),blockedPct:Number(Ie(`${i}-blk`,5,30).toFixed(1)),consentPct:Number(Ie(`${i}-cnp`,40,80).toFixed(1)),backlogCount:Math.round(Ie(`${i}-bc`,5,120))}});return n.sort((s,i)=>i.blockedPct-s.blockedPct),{window:e,rows:n}}async function Uke(e="LAST_7D",t,r,n,s="default"){const i=n?`${r}-${n}`:"nation",o=`bundle-${e}-${s}-${i}`,l=t&&t.length>0?t:pV,d=(re,X,F)=>l.map(te=>({regionCode:te.code,regionName:te.name,value:Number(Ie(`${o}-${re}-${te.code}`,X,F).toFixed(1))})),u=(re,X)=>{const F=X.length??7,te=Fp(`${o}-${re}-tr`,F,{base:X.base,spread:X.spread,min:X.min,max:X.max,volatility:X.volatility,trendBias:X.trendBias,shockDirection:X.shockDirection});return{values:te,points:te.map((ne,se)=>({period:`D${se+1}`,value:ne}))}},m=(re,X)=>{const F=[...re].sort((te,ne)=>X?te.value-ne.value:ne.value-te.value);return{worst:F.slice(0,5),best:F.slice(-5).reverse()}},p=d("sq",80,98),g=m(p,!0),x=u("sq",{base:92,spread:3.2,min:84,max:99,volatility:.24,trendBias:.1,shockDirection:"down"}),N={national:{value:Number(Ca(x.values[x.values.length-1]+Ie(`${o}-sq-nat-j`,-.6,.6),85,97).toFixed(1)),deltaPP:Il(x.values,3.5),target:95},regions:p,breakdown:[{name:" ",value:Math.round(Ie(`${o}-sq-b1`,8500,16e3)),color:"#2563eb"},{name:"",value:Math.round(Ie(`${o}-sq-b2`,200,800)),color:"#f59e0b"},{name:"",value:Math.round(Ie(`${o}-sq-b3`,100,400)),color:"#ef4444"},{name:"",value:Math.round(Ie(`${o}-sq-b4`,50,200)),color:"#6b7280"}],breakdownType:"donut",cause:[{name:" ",value:Math.round(Ie(`${o}-sq-c1`,120,350))},{name:" ",value:Math.round(Ie(`${o}-sq-c2`,80,250))},{name:" ",value:Math.round(Ie(`${o}-sq-c3`,50,180))},{name:" ",value:Math.round(Ie(`${o}-sq-c4`,30,120))},{name:"",value:Math.round(Ie(`${o}-sq-c5`,10,60))}],causeType:"bar",trend:x.points,worstRegions:g.worst,bestRegions:g.best},v=d("pi",10,50),S=m(v,!1),E=u("pi",{base:27.8,spread:9.4,min:8,max:48,volatility:.34,trendBias:.08,shockDirection:"both"}),_={national:{value:Number(Ca(E.values[E.values.length-1]+Ie(`${o}-pi-nat-j`,-1.4,1.4),12,42).toFixed(1)),deltaPP:Il(E.values,8),target:20},regions:v,breakdown:[{name:" ",value:Math.round(Ie(`${o}-pi-b1`,3,12)),color:"#7c3aed"},{name:" ",value:Math.round(Ie(`${o}-pi-b2`,1,5)),color:"#a855f7"},{name:" ",value:Math.round(Ie(`${o}-pi-b3`,2,8)),color:"#c084fc"},{name:"",value:Math.round(Ie(`${o}-pi-b4`,1,4)),color:"#e9d5ff"}],breakdownType:"bar",cause:[{name:"SLA ",value:Number(Ie(`${o}-pi-c1`,1,8).toFixed(1))},{name:"  ",value:Number(Ie(`${o}-pi-c2`,.5,5).toFixed(1))},{name:" ",value:Number(Ie(`${o}-pi-c3`,.3,4).toFixed(1))},{name:"  ",value:Number(Ie(`${o}-pi-c4`,.1,2).toFixed(1))}],causeType:"bar",trend:E.points,worstRegions:S.worst,bestRegions:S.best},A=d("br",15,60),T=m(A,!1),R=u("br",{base:38.6,spread:8.9,min:15,max:60,volatility:.35,trendBias:.16,shockDirection:"up"}),k={national:{value:Number(Ca(R.values[R.values.length-1]+Ie(`${o}-br-nat-j`,-1.8,1.8),18,55).toFixed(1)),deltaPP:Il(R.values,7),target:30},regions:A,breakdown:[{name:"SLA ",value:Number(Ie(`${o}-br-b1`,5,25).toFixed(1)),color:"#dc2626"},{name:"L2 ",value:Number(Ie(`${o}-br-b2`,8,30).toFixed(1)),color:"#f87171"},{name:" ",value:Number(Ie(`${o}-br-b3`,3,18).toFixed(1)),color:"#fca5a5"}],breakdownType:"stacked",cause:[{name:" ",value:Math.round(Ie(`${o}-br-c1`,20,80))},{name:" ",value:Math.round(Ie(`${o}-br-c2`,10,45))},{name:" ",value:Math.round(Ie(`${o}-br-c3`,8,35))},{name:" ",value:Math.round(Ie(`${o}-br-c4`,5,20))},{name:"",value:Math.round(Ie(`${o}-br-c5`,3,15))}],causeType:"bar",trend:R.points,worstRegions:T.worst,bestRegions:T.best},w=d("dr",78,99),L=m(w,!0),H=u("dr",{base:90.8,spread:4.6,min:78,max:99,volatility:.26,trendBias:.1,shockDirection:"down"}),M={national:{value:Number(Ca(H.values[H.values.length-1]+Ie(`${o}-dr-nat-j`,-.9,.9),80,98).toFixed(1)),deltaPP:Il(H.values,4.5),target:95},regions:w,breakdown:[{name:" ",value:Math.round(Ie(`${o}-dr-b1`,7e3,15e3)),color:"#059669"},{name:" ",value:Math.round(Ie(`${o}-dr-b2`,200,900)),color:"#f59e0b"},{name:" ",value:Math.round(Ie(`${o}-dr-b3`,100,500)),color:"#ef4444"}],breakdownType:"donut",cause:[{name:" ",value:Math.round(Ie(`${o}-dr-c1`,80,300))},{name:" ",value:Math.round(Ie(`${o}-dr-c2`,60,250))},{name:" ",value:Math.round(Ie(`${o}-dr-c3`,40,180))},{name:" ",value:Math.round(Ie(`${o}-dr-c4`,20,120))}],causeType:"donut",trend:H.points,worstRegions:L.worst,bestRegions:L.best},G=d("gs",85,99),$=m(G,!0),z=u("gs",{base:95.1,spread:2.6,min:88,max:99,volatility:.2,trendBias:.06,shockDirection:"down"}),Z={national:{value:Number(Ca(z.values[z.values.length-1]+Ie(`${o}-gs-nat-j`,-.5,.5),88,99).toFixed(1)),deltaPP:Il(z.values,3),target:98},regions:G,breakdown:[{name:" ",value:Math.round(Ie(`${o}-gs-b1`,30,150)),color:"#d97706"},{name:" ",value:Math.round(Ie(`${o}-gs-b2`,20,100)),color:"#f59e0b"},{name:" ",value:Math.round(Ie(`${o}-gs-b3`,10,60)),color:"#fbbf24"},{name:" ",value:Math.round(Ie(`${o}-gs-b4`,5,40)),color:"#fcd34d"}],breakdownType:"donut",cause:[{name:"",value:Math.round(Ie(`${o}-gs-c1`,8,25))},{name:"",value:Math.round(Ie(`${o}-gs-c2`,6,20))},{name:"",value:Math.round(Ie(`${o}-gs-c3`,4,18))},{name:"",value:Math.round(Ie(`${o}-gs-c4`,3,15))},{name:"",value:Math.round(Ie(`${o}-gs-c5`,2,12))}],causeType:"lineRank",trend:z.points,worstRegions:$.worst,bestRegions:$.best};return{signalQuality:N,policyImpact:_,bottleneckRisk:k,dataReadiness:M,governanceSafety:Z}}const Bke={SIGNAL_QUALITY:{id:"SIGNAL_QUALITY",name:" ",shortName:" ",description:"  :      ( )",formula:"ValidSignals / TotalSignals  100",numeratorField:"validSignals",denominatorField:"totalSignals",unit:"%",higherBetter:!0,baseline:88,target:95,drillToken:"VALID_SIGNALS"},POLICY_IMPACT:{id:"POLICY_IMPACT",name:" ",shortName:" ",description:"/   KPI  (  0-100)",formula:"PolicyChangeImpactScore ()",numeratorField:"impactScore",denominatorField:"maxScore",unit:"%",higherBetter:!1,baseline:35,target:20,drillToken:"POLICY_IMPACT_SCORE",auxiliaryKeys:["rollbackCount","warningRegions"]},BOTTLENECK_RISK:{id:"BOTTLENECK_RISK",name:" ",shortName:" ",description:"SLA    (0-100 )",formula:"(SLAViolation0.4 + L2Backlog0.35 + RecontactNeed0.25)",numeratorField:"weightedRisk",denominatorField:"maxRisk",unit:"%",higherBetter:!1,baseline:45,target:30,drillToken:"BOTTLENECK_SCORE",auxiliaryKeys:["slaViolationRate","l2BacklogCount"]},DATA_READINESS:{id:"DATA_READINESS",name:" ",shortName:" ",description:"     ",formula:"ReadyCases / TotalCases  100",numeratorField:"readyCases",denominatorField:"totalCases",unit:"%",higherBetter:!0,baseline:85,target:95,drillToken:"DATA_READY_CASES",auxiliaryKeys:["missingFieldRate","linkagePendingRate"]},GOVERNANCE_SAFETY:{id:"GOVERNANCE_SAFETY",name:" ",shortName:"",description:"       ()",formula:"AuditReady / TotalAuditable  100",numeratorField:"auditReady",denominatorField:"totalAuditable",unit:"%",higherBetter:!0,baseline:90,target:98,drillToken:"AUDIT_READY",auxiliaryKeys:["missingResponsible","missingExplanation"]}};function mV(){return Object.values(Bke)}const Gke={SIGNAL_QUALITY:{bg:"bg-blue-50",text:"text-blue-700",border:"border-blue-300",icon:"",hex:"#2563eb"},POLICY_IMPACT:{bg:"bg-violet-50",text:"text-violet-700",border:"border-violet-300",icon:"",hex:"#7c3aed"},BOTTLENECK_RISK:{bg:"bg-red-50",text:"text-red-700",border:"border-red-300",icon:"",hex:"#dc2626"},DATA_READINESS:{bg:"bg-emerald-50",text:"text-emerald-700",border:"border-emerald-300",icon:"",hex:"#059669"},GOVERNANCE_SAFETY:{bg:"bg-amber-50",text:"text-amber-700",border:"border-amber-300",icon:"",hex:"#d97706"}},Dp=e=>`${e.toFixed(1)}%`,ny=e=>e.toFixed(1),B_={signalQuality:{key:"signalQuality",label:" ",shortLabel:"",unit:"%",description:"  :     ",tooltipLines:["       ",": ()  {period}"," ,  //  "],primaryColor:"#2563eb",softBg:"#dbeafe",palette:["#eff6ff","#bfdbfe","#93c5fd","#60a5fa","#3b82f6","#2563eb","#1d4ed8"],valueFormatter:Dp,target:95,warnBelow:90,riskBelow:85,legend:{ticks:[0,20,40,60,80,100],format:Dp,direction:"higherBetter"},analysisSummary:" , /    "},policyImpact:{key:"policyImpact",label:" ",shortLabel:"",unit:"",description:"/   KPI (  0-100)",tooltipLines:["/      ",": ()  {period}","  ,      "],primaryColor:"#7c3aed",softBg:"#ede9fe",palette:["#faf5ff","#e9d5ff","#d8b4fe","#c084fc","#a855f7","#7c3aed","#6d28d9"],valueFormatter:ny,higherIsWorse:!0,legend:{ticks:[0,20,40,60,80,100],format:ny,direction:"higherWorse"},analysisSummary:"/      "},bottleneckRisk:{key:"bottleneckRisk",label:" ",shortLabel:"",unit:"",description:"SLA    (0-100 )",tooltipLines:["    ",": ()  {period}"," ,  //  "],primaryColor:"#dc2626",softBg:"#fee2e2",palette:["#fef2f2","#fecaca","#fca5a5","#f87171","#ef4444","#dc2626","#b91c1c"],valueFormatter:ny,higherIsWorse:!0,warnBelow:void 0,legend:{ticks:[0,20,40,60,80,100],format:ny,direction:"higherWorse"},analysisSummary:"SLA //    "},dataReadiness:{key:"dataReadiness",label:" ",shortLabel:"",unit:"%",description:"    ",tooltipLines:["   /   ",": ()  {period}"," ,   /  "],primaryColor:"#059669",softBg:"#d1fae5",palette:["#ecfdf5","#d1fae5","#a7f3d0","#6ee7b7","#34d399","#059669","#047857"],valueFormatter:Dp,target:95,warnBelow:90,riskBelow:85,legend:{ticks:[0,20,40,60,80,100],format:Dp,direction:"higherBetter"},analysisSummary:"  /    "},governanceSafety:{key:"governanceSafety",label:" ",shortLabel:"",unit:"%",description:" /    ",tooltipLines:["    ",": ()  {period}"," ,   /  "],primaryColor:"#d97706",softBg:"#fef3c7",palette:["#fffbeb","#fef3c7","#fde68a","#fcd34d","#fbbf24","#d97706","#b45309"],valueFormatter:Dp,target:98,warnBelow:95,riskBelow:90,legend:{ticks:[0,20,40,60,80,100],format:Dp,direction:"higherBetter"},analysisSummary:"/  /  "}},G_={SIGNAL_QUALITY:"signalQuality",POLICY_IMPACT:"policyImpact",BOTTLENECK_RISK:"bottleneckRisk",DATA_READINESS:"dataReadiness",GOVERNANCE_SAFETY:"governanceSafety"},H_={signalQuality:"SIGNAL_QUALITY",policyImpact:"POLICY_IMPACT",bottleneckRisk:"BOTTLENECK_RISK",dataReadiness:"DATA_READINESS",governanceSafety:"GOVERNANCE_SAFETY"},Hke={neutral:"text-slate-600",good:"text-emerald-600",warn:"text-amber-600",bad:"text-rose-600"};function zO(e){return typeof e=="number"&&Number.isFinite(e)?e.toLocaleString("ko-KR"):String(e??"-")}function v1(e){return typeof e!="number"||!Number.isFinite(e)?null:`${Math.max(0,Math.min(100,e)).toFixed(1)}%`}function _8(e,t){const r=[`${t+1}`,e.title,` ${zO(e.value)}`],n=v1(e.percentOfTotal);n&&r.push(`  ${n}`);const s=v1(e.conversionFromPrev);return s&&r.push(` ${s}`),e.helperText&&r.push(e.helperText),r.join(", ")}function Kke({steps:e,ariaLabel:t="  ",density:r="comfortable",layout:n="scroll"}){const s=r==="compact",i=n==="scroll";return!e||e.length===0?a.jsx("div",{className:"rounded-xl border border-slate-200 bg-slate-50 px-3 py-4 text-center text-xs text-slate-500",children:"   ."}):a.jsx("div",{className:ue("rounded-2xl border border-slate-200 bg-white p-3 shadow-sm",s?"p-2.5":"p-3"),children:a.jsx("div",{className:ue(i?"overflow-x-auto pb-1":"overflow-visible"),children:a.jsx("ol",{className:ue("items-stretch",i?"flex min-w-max gap-2":"flex flex-wrap gap-2"),"aria-label":t,children:e.map((o,l)=>{const d=v1(o.percentOfTotal),u=v1(o.conversionFromPrev),m=Hke[o.status??"neutral"],p=typeof o.onClick=="function";return a.jsxs(Y.Fragment,{children:[a.jsx("li",{className:ue("rounded-xl border border-slate-200 bg-slate-50/70 transition-all",i?"w-[198px] shrink-0":"min-w-[180px] grow basis-[180px]",p&&"hover:border-slate-300 hover:shadow-md"),children:p?a.jsxs("button",{type:"button",onClick:o.onClick,className:ue("h-full w-full rounded-xl px-4 py-3 text-left outline-none focus-visible:ring-2 focus-visible:ring-blue-300",s?"px-3 py-2.5":"px-4 py-3"),"aria-label":_8(o,l),title:o.helperText,children:[a.jsx("p",{className:ue("font-semibold text-slate-800",s?"text-[11px]":"text-xs"),children:o.title}),a.jsx("p",{className:ue("mt-1.5 font-bold leading-none text-slate-900",s?"text-2xl":"text-[30px]"),children:zO(o.value)}),a.jsxs("div",{className:"mt-2 flex items-center justify-between text-[11px]",children:[a.jsx("span",{className:"text-slate-500",children:o.subLabel??" "}),d?a.jsx("span",{className:ue("font-semibold",m),children:d}):null]}),u?a.jsxs("div",{className:"mt-2 border-t border-slate-200 pt-1.5 text-[11px]",children:[a.jsx("span",{className:"text-slate-500",children:": "}),a.jsx("span",{className:ue("font-semibold",m),children:u})]}):null]}):a.jsxs("div",{className:ue("h-full rounded-xl px-4 py-3 text-left outline-none focus-visible:ring-2 focus-visible:ring-blue-300",s?"px-3 py-2.5":"px-4 py-3"),tabIndex:0,"aria-label":_8(o,l),title:o.helperText,children:[a.jsx("p",{className:ue("font-semibold text-slate-800",s?"text-[11px]":"text-xs"),children:o.title}),a.jsx("p",{className:ue("mt-1.5 font-bold leading-none text-slate-900",s?"text-2xl":"text-[30px]"),children:zO(o.value)}),a.jsxs("div",{className:"mt-2 flex items-center justify-between text-[11px]",children:[a.jsx("span",{className:"text-slate-500",children:o.subLabel??" "}),d?a.jsx("span",{className:ue("font-semibold",m),children:d}):null]}),u?a.jsxs("div",{className:"mt-2 border-t border-slate-200 pt-1.5 text-[11px]",children:[a.jsx("span",{className:"text-slate-500",children:": "}),a.jsx("span",{className:ue("font-semibold",m),children:u})]}):null]})}),l<e.length-1?a.jsx("li",{"aria-hidden":"true",className:"flex shrink-0 items-center justify-center px-0.5 text-slate-300",children:a.jsx(di,{size:18})}):null]},o.id)})})})})}async function hV(e="LAST_7D",t="default"){return Ike(e,t)}async function zke(e="LAST_7D",t="default"){return Mke(e,t)}async function qke(e="LAST_7D",t="default"){return Lke(e,t)}async function Wke(e="LAST_7D",t="default"){return $ke(e,t)}async function Vke(e="LAST_7D",t="default"){return Fke(e,t)}async function C8(e="LAST_7D",t,r,n,s="default"){return Uke(e,t,r,n,s)}async function gV(e={}){return Q0}async function Yke(e={}){return kke}async function Xke(e={}){return Ry}async function Qke(e={}){return Pke}const ay=6e4,sy=30*6e4,Zke={funnelData:[],bottleneckData:[],linkageData:[],regionData:[]};function T8(e){if(e.level!=="nation"&&e.subRegions?.length)return e.subRegions.map(t=>({code:t.id,name:t.name}))}function O8(e,t,r,n){const s=e.subRegions?.length?e.subRegions.map(i=>i.id).join("|"):"none";return["dashboard",e.level,e.regionCode??"KR",s,t,n??"default",r]}function Jke(e,t,r,n={}){const s=E1(),i=h.useMemo(()=>T8(e),[e]),o=n.loadDrilldown??!1,l=n.periodVariant,d=h.useMemo(()=>O8(e,t,r,l),[e,t,l,r]),u=Ml({queryKey:[...d,"kpis"],queryFn:async()=>(await hV(t,l)).kpis,placeholderData:Vp,staleTime:ay,gcTime:sy,refetchOnWindowFocus:!1}),m=Ml({queryKey:[...d,"bundle"],queryFn:()=>C8(t,i,e.level,e.regionCode,l),placeholderData:Vp,staleTime:ay,gcTime:sy,refetchOnWindowFocus:!1}),p=Ml({queryKey:[...d,"drilldown"],queryFn:async()=>{const[S,E,C,_]=await Promise.all([zke(t,l),qke(t,l),Wke(t,l),Vke(t,l)]);return{funnelData:S.stages,bottleneckData:E.metrics,linkageData:C.metrics,regionData:_.rows}},enabled:o,placeholderData:Vp,staleTime:ay,gcTime:sy,refetchOnWindowFocus:!1}),g=h.useCallback(S=>{const E=T8(S),C=O8(S,t,r,l);s.prefetchQuery({queryKey:[...C,"bundle"],queryFn:()=>C8(t,E,S.level,S.regionCode,l),staleTime:ay,gcTime:sy})},[t,l,s,r]),x=!!(m.data&&u.data),y=x&&(m.isFetching||o&&p.isFetching),N=x&&!y&&u.isFetching,v=x?y?"loadingScopeChange":N?"refreshing":"ready":"loadingInitial";return{centralKpis:u.data??[],dashData:m.data??null,drilldownData:p.data??Zke,loadingStage:v,isInitialLoading:v==="loadingInitial",isScopeChangeLoading:v==="loadingScopeChange",isRefreshing:v==="refreshing",prefetchScope:g}}function e5e({visible:e,stage:t="scopeChange",label:r,className:n}){if(!e)return null;const s=r??(t==="refreshing"?"   ":"  ");return a.jsxs("div",{className:ue("pointer-events-none absolute inset-0 z-30",n),children:[a.jsx("div",{className:ue("absolute inset-0 transition-opacity duration-300",t==="scopeChange"?"bg-white/35 backdrop-blur-[1px]":"bg-white/18")}),a.jsx("div",{className:"absolute inset-x-0 top-0 h-0.5 overflow-hidden bg-blue-100/90",children:a.jsx("div",{className:"ns-loading-overlay-bar h-full w-1/3 bg-blue-600"})}),a.jsx("div",{className:"absolute right-3 top-3 rounded-md border border-blue-100 bg-white/90 px-2 py-1 text-[11px] font-medium text-blue-700 shadow-sm",children:s})]})}function xV({value:e,className:t,decimals:r=0,duration:n=420,locale:s="ko-KR",formatter:i,prefix:o="",suffix:l=""}){const[d,u]=h.useState(e),m=h.useRef(e),p=h.useRef(null);h.useEffect(()=>{if(!Number.isFinite(e)){u(e),m.current=e;return}const x=performance.now(),y=m.current,N=e;if(!Number.isFinite(y)||n<=0){u(N),m.current=N;return}p.current&&cancelAnimationFrame(p.current);const v=S=>{const E=Math.min(1,(S-x)/n),C=1-Math.pow(1-E,3),_=y+(N-y)*C;u(_),E<1?p.current=requestAnimationFrame(v):(m.current=N,p.current=null)};return p.current=requestAnimationFrame(v),()=>{p.current&&cancelAnimationFrame(p.current),p.current=null}},[n,e]);const g=i?i(d):new Intl.NumberFormat(s,{minimumFractionDigits:r,maximumFractionDigits:r}).format(d);return a.jsx("span",{className:ue("tabular-nums",t),children:`${o}${g}${l}`})}function t5e({top5:e,childrenCodes:t,parentRegionCode:r}){const n=new Set(t),s=e.some(l=>!n.has(l.code)),i=r!=null&&e.some(l=>l.code===r),o=!s&&!i;return console.assert(o,"[Top5] invalid candidate detected",{top5Codes:e.map(l=>l.code),parentRegionCode:r,childrenCodes:t}),o}const Dk="central.settings.v1",K_=(e,t,r)=>Math.min(r,Math.max(t,e)),_a={matrixThresholds:{slaCut:86,dataCut:86},headline:{maxItems:3,includePartialBadge:!0},drilldown:{keepPreviousData:!0,prefetchEnabled:!0,useScopeOverlay:!0},notifications:{batchDelayed:!0,qualityRisk:!0,governanceGap:!0,policyImpactSpike:!1},reports:{defaultPeriod:"weekly",includeFilterContext:!0}};function r5e(e){return e==="weekly"||e==="monthly"||e==="quarterly"||e==="yearly_cum"}function bV(e){return{matrixThresholds:{slaCut:K_(Number(e?.matrixThresholds?.slaCut??_a.matrixThresholds.slaCut),70,99),dataCut:K_(Number(e?.matrixThresholds?.dataCut??_a.matrixThresholds.dataCut),70,99)},headline:{maxItems:K_(Number(e?.headline?.maxItems??_a.headline.maxItems),1,5),includePartialBadge:!!(e?.headline?.includePartialBadge??_a.headline.includePartialBadge)},drilldown:{keepPreviousData:!!(e?.drilldown?.keepPreviousData??_a.drilldown.keepPreviousData),prefetchEnabled:!!(e?.drilldown?.prefetchEnabled??_a.drilldown.prefetchEnabled),useScopeOverlay:!!(e?.drilldown?.useScopeOverlay??_a.drilldown.useScopeOverlay)},notifications:{batchDelayed:!!(e?.notifications?.batchDelayed??_a.notifications.batchDelayed),qualityRisk:!!(e?.notifications?.qualityRisk??_a.notifications.qualityRisk),governanceGap:!!(e?.notifications?.governanceGap??_a.notifications.governanceGap),policyImpactSpike:!!(e?.notifications?.policyImpactSpike??_a.notifications.policyImpactSpike)},reports:{defaultPeriod:r5e(e?.reports?.defaultPeriod)?e.reports.defaultPeriod:_a.reports.defaultPeriod,includeFilterContext:!!(e?.reports?.includeFilterContext??_a.reports.includeFilterContext)}}}function yV(){try{if(typeof window>"u")return{..._a};const e=localStorage.getItem(Dk);if(!e)return{..._a};const t=JSON.parse(e);return bV(t)}catch{return{..._a}}}function n5e(e){const t=bV(e);typeof window>"u"||localStorage.setItem(Dk,JSON.stringify(t))}function a5e(){return typeof window<"u"&&localStorage.removeItem(Dk),{..._a}}function s5e(){const e=h.useRef(null),[t,r]=h.useState({width:typeof window<"u"?window.innerWidth:1920,height:typeof window<"u"?window.innerHeight:1080}),n=h.useRef(null);return h.useEffect(()=>{const s=e.current;if(!s)return;const i=()=>{n.current&&cancelAnimationFrame(n.current),n.current=requestAnimationFrame(()=>{const d=s.getBoundingClientRect();r(u=>u.width===d.width&&u.height===d.height?u:{width:d.width,height:d.height})})},o=new ResizeObserver(i);o.observe(s);const l=()=>i();return window.addEventListener("resize",l,{passive:!0}),i(),()=>{o.disconnect(),window.removeEventListener("resize",l),n.current&&cancelAnimationFrame(n.current)}},[]),[e,t]}const T0={blue:"#3b82f6",red:"#ef4444",green:"#22c55e",orange:"#f59e0b",cyan:"#06b6d4"},R8=[{id:"total_cases",label:" ",unit:"",color:"blue",iconBg:"bg-blue-100 text-blue-600",getValue:e=>Math.round(Fn(`${e}-new`,1200,2800))},{id:"completion",label:" ",unit:"",color:"green",iconBg:"bg-green-100 text-green-600",getValue:e=>Math.round(Fn(`${e}-progress`,800,1500))},{id:"consultation_time",label:"SLA ",unit:"%",color:"red",iconBg:"bg-red-100 text-red-600",getValue:e=>Number(Fn(`${e}-sla`,2.5,8.5).toFixed(1))},{id:"followup_dropout",label:" ",unit:"%",color:"orange",iconBg:"bg-amber-100 text-amber-600",getValue:e=>Number(Fn(`${e}-data`,3,12).toFixed(1))},{id:"dropout",label:" ",unit:"%",color:"purple",iconBg:"bg-purple-100 text-purple-600",getValue:e=>Number(Fn(`${e}-recontact`,5,15).toFixed(1))}],i5e=e=>{const{cx:t,cy:r,midAngle:n,innerRadius:s,outerRadius:i,percent:o,name:l}=e;if(o*100<5)return null;const d=Math.PI/180,u=s+(i-s)*.5,m=t+u*Math.cos(-n*d),p=r+u*Math.sin(-n*d);return a.jsx("text",{x:m,y:p,fill:"#fff",textAnchor:"middle",dominantBaseline:"central",fontSize:10,fontWeight:600,style:{textShadow:"0 1px 2px rgba(0,0,0,0.3)"},children:`${(o*100).toFixed(1)}%`})},o5e=e=>{let t=0;for(let r=0;r<e.length;r++)t=t*31+e.charCodeAt(r)>>>0;return t},Fn=(e,t,r)=>{const n=o5e(e)%1e3/1e3;return t+(r-t)*n},k8=["#3b82f6","#22c55e","#f59e0b","#8b5cf6","#ec4899","#06b6d4"];function l5e({kpiDef:e,data:t,colorIndex:r,analyticsPeriod:n}){if(!t)return a.jsx("div",{className:"bg-gray-50 rounded-lg p-2 h-[80px] flex items-center justify-center border border-gray-200 shadow-sm",children:a.jsx("div",{className:"w-full h-10 bg-gray-100 rounded animate-pulse"})});const{dailyData:s,current:i,baseline:o,target:l,unit:d,higherBetter:u}=t,m=k8[r%k8.length],p=u?i>=l:i<=l,g=n==="week"?0:n==="month"?2:n==="year"?3:0,x=["bg-blue-50/50","bg-green-50/50","bg-amber-50/50","bg-purple-50/50","bg-pink-50/50","bg-cyan-50/50"],y=x[r%x.length];return a.jsxs("div",{className:`${y} rounded-lg p-2 border border-gray-200 shadow-sm`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-1 pb-1 border-b border-gray-200/60",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("span",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:m}}),a.jsx("span",{className:"text-[12px] font-semibold text-gray-700 truncate",children:e.name})]}),a.jsxs("span",{className:`text-[13px] font-bold flex-shrink-0 ${p?"text-green-600":"text-amber-600"}`,children:[i,d]})]}),a.jsx("div",{style:{height:"90px"},children:a.jsx(Ta,{width:"100%",height:"100%",children:a.jsxs(k3,{data:s,margin:{top:5,right:8,left:8,bottom:2},children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:`kpiGrad-${e.id}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:m,stopOpacity:.35}),a.jsx("stop",{offset:"100%",stopColor:m,stopOpacity:.05})]})}),a.jsx(ys,{strokeDasharray:"3 3",vertical:!1,stroke:"#e5e7eb"}),a.jsx(da,{dataKey:"date",tick:{fontSize:14,fill:"#374151",fontWeight:500},tickLine:!1,axisLine:{stroke:"#d1d5db"},interval:g}),a.jsx(Jn,{tick:{fontSize:13,fill:"#6b7280"},tickLine:!1,axisLine:!1,domain:["auto","auto"],width:44}),a.jsx(ln,{contentStyle:{fontSize:"14px",padding:"6px 10px",borderRadius:"6px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)"},formatter:N=>[`${N}${d}`,e.name],labelFormatter:N=>`${N}`}),a.jsx(Wl,{y:l,stroke:"#ef4444",strokeDasharray:"4 2",strokeWidth:1.5,label:{value:"",fontSize:12,fill:"#ef4444",position:"right"}}),a.jsx(Wl,{y:o,stroke:"#9ca3af",strokeDasharray:"3 3",strokeWidth:1}),a.jsx(rc,{type:"monotone",dataKey:"value",fill:`url(#kpiGrad-${e.id})`,stroke:"none",isAnimationActive:!0,animationDuration:500,animationEasing:"ease-out"}),a.jsx(qa,{type:"monotone",dataKey:"value",stroke:m,strokeWidth:2,dot:!1,isAnimationActive:!0,animationDuration:500,animationEasing:"ease-out",activeDot:{r:4,fill:m,stroke:"#fff",strokeWidth:2}})]})})})]})}function O0({title:e,isOpen:t,onToggle:r,summary:n,children:s,className:i=""}){return a.jsxs("div",{className:`bg-white border border-gray-200 rounded-lg overflow-hidden ${i}`,children:[a.jsxs("button",{onClick:r,className:"w-full flex items-center justify-between px-3 py-2 hover:bg-gray-50 transition-colors",children:[a.jsx("span",{className:"text-[12px] font-semibold text-gray-700",children:e}),a.jsxs("div",{className:"flex items-center gap-2",children:[!t&&n&&a.jsx("span",{className:"text-[11px] text-gray-400 truncate max-w-[120px]",children:n}),t?a.jsx(Zc,{className:"h-3.5 w-3.5 text-gray-400 shrink-0"}):a.jsx(Ss,{className:"h-3.5 w-3.5 text-gray-400 shrink-0"})]})]}),t&&a.jsx("div",{className:"border-t border-gray-100 px-3 py-2",children:s})]})}function P8({title:e,badge:t,height:r=280,children:n,className:s=""}){return a.jsxs("div",{className:`bg-white border border-gray-200 rounded-lg overflow-hidden flex flex-col ${s}`,style:{height:`${r}px`},children:[a.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-gray-100 shrink-0",children:[a.jsx("span",{className:"text-[12px] font-semibold text-gray-700",children:e}),t]}),a.jsx("div",{className:"flex-1 overflow-y-auto px-3 py-2 min-h-0",children:n})]})}const c5e={SIGNAL_QUALITY:a.jsx(ss,{className:"h-4 w-4"}),POLICY_IMPACT:a.jsx(rR,{className:"h-4 w-4"}),BOTTLENECK_RISK:a.jsx(Bl,{className:"h-4 w-4"}),DATA_READINESS:a.jsx(gU,{className:"h-4 w-4"}),GOVERNANCE_SAFETY:a.jsx(Gl,{className:"h-4 w-4"})},D8=["dualRisk","dataRisk","slaRisk","good"],I8={SIGNAL_QUALITY:"     ",POLICY_IMPACT:"/      ",BOTTLENECK_RISK:"SLA     ",DATA_READINESS:"      ",GOVERNANCE_SAFETY:"     "},d5e={SIGNAL_QUALITY:"         .",POLICY_IMPACT:"          .",BOTTLENECK_RISK:"          .",DATA_READINESS:"          .",GOVERNANCE_SAFETY:"            ."},M8={SIGNAL_QUALITY:"    /  .",POLICY_IMPACT:"         .",BOTTLENECK_RISK:"SLA ,  ,      .",DATA_READINESS:"         .",GOVERNANCE_SAFETY:"//      ."},u5e={SIGNAL_QUALITY:":   (   )",POLICY_IMPACT:":   (100  )",BOTTLENECK_RISK:":   (100  )",DATA_READINESS:":      ",GOVERNANCE_SAFETY:":     "},R0={ok:"",warn:"",risk:" "},z_={ok:"bg-green-50 text-green-700 border-green-200",warn:"bg-amber-50 text-amber-700 border-amber-200",risk:"bg-red-50 text-red-700 border-red-200"},Mc={good:{label:"",guideLabel:"",description:" SLA   ",badgeClass:"bg-green-50 text-green-700 border-green-200",dotClass:"bg-green-500"},dataRisk:{label:"  ",guideLabel:" ",description:" SLA   ",badgeClass:"bg-amber-50 text-amber-700 border-amber-200",dotClass:"bg-amber-400"},slaRisk:{label:"  ",guideLabel:" ",description:" SLA   ",badgeClass:"bg-orange-50 text-orange-700 border-orange-200",dotClass:"bg-orange-500"},dualRisk:{label:"  ",guideLabel:" ",description:" SLA   ",badgeClass:"bg-red-50 text-red-700 border-red-200",dotClass:"bg-red-500"}};function f5e(e){return D8.reduce((t,r)=>e[r]>e[t]?r:t,D8[0])}function L8(e,t){const r=Number(e);return Number.isFinite(r)?Math.min(99,Math.max(70,r)):t}const $8=[" "," "," "," "];function jl(e){return`${e>=0?"+":""}${e.toFixed(1)}pp`}function F8(e,t){return Number((t-e.target).toFixed(1))}function p5e(e,t){const r=e.higherBetter?-t:t;return Number(r.toFixed(1))}function m5e(e,t,r){const n=e+Math.max(0,t*.8)+(r?2.5:0);return n>=7?"risk":n>=3?"warn":"ok"}function k0(e,t,r,n){const s=e>=r,i=t>=n;return s&&i?"good":s&&!i?"dataRisk":!s&&i?"slaRisk":"dualRisk"}const h5e={weekly:"LAST_7D",monthly:"LAST_30D",quarterly:"LAST_90D",yearly_cum:"LAST_90D"},g5e={weekly:"",monthly:"",quarterly:"",yearly_cum:"()"},U8=260,q_=420;function x5e({title:e,lines:t,color:r,anchorRef:n,visible:s}){const i=h.useRef(null),[o,l]=h.useState(null);return h.useEffect(()=>{if(!s||!n.current){l(null);return}const d=n.current.getBoundingClientRect(),u=340,m=34+t.length*19;let p=d.bottom+6,g=d.left+d.width/2-u/2;g<8&&(g=8),g+u>window.innerWidth-8&&(g=window.innerWidth-u-8),p+m>window.innerHeight-8&&(p=d.top-m-6),l({top:p,left:g})},[s,n,t.length]),!s||!o?null:dh.createPortal(a.jsxs("div",{ref:i,role:"tooltip",className:"fixed z-[9999] rounded-lg shadow-lg border border-gray-200 bg-white text-left pointer-events-none",style:{top:o.top,left:o.left,maxWidth:360,minWidth:300},children:[a.jsx("div",{className:"h-[3px] rounded-t-lg",style:{backgroundColor:r}}),a.jsxs("div",{className:"px-3 py-2.5 space-y-1",children:[a.jsx("p",{className:"text-[11px] leading-[1.45] font-semibold text-gray-800",children:e}),t.map((d,u)=>a.jsx("p",{className:`text-[11px] leading-[1.45] ${u===t.length-1?"text-gray-500":"text-gray-600"}`,children:d},u))]})]}),document.body)}function b5e({kpi:e,def:t,isActive:r,onClick:n,plainLine:s,tooltipTitle:i,tooltipLines:o,tooltipColor:l,severityLabel:d,severityClass:u}){const m=Gke[t.id],p=t.higherBetter?e.delta7d>=0?"text-green-600":"text-red-600":e.delta7d<=0?"text-green-600":"text-red-600",g=t.higherBetter?e.value>=t.target:e.value<=t.target,x=h.useRef(null),[y,N]=h.useState(!1),v=h.useRef(),S=h.useCallback(()=>{v.current=setTimeout(()=>N(!0),200)},[]),E=h.useCallback(()=>{clearTimeout(v.current),N(!1)},[]);return h.useEffect(()=>()=>clearTimeout(v.current),[]),a.jsxs(a.Fragment,{children:[a.jsxs("button",{ref:x,onClick:n,onMouseEnter:S,onMouseLeave:E,onFocus:S,onBlur:E,onKeyDown:C=>{C.key==="Escape"&&E()},"aria-describedby":y?`kpi-tip-${t.id}`:void 0,className:`relative flex flex-col gap-2 px-3.5 py-3 rounded-xl border-2 transition-all min-w-[196px] text-left ${r?`${m.border} ${m.bg} shadow-md ring-2 ring-offset-1 ring-${m.border.replace("border-","")}/30`:"border-gray-200 bg-white hover:border-gray-300 hover:shadow-sm"}`,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:`p-1 rounded-md ${r?m.bg:"bg-gray-100"} ${r?m.text:"text-gray-500"}`,children:c5e[t.id]}),a.jsx("span",{className:`text-[11px] font-semibold truncate ${r?m.text:"text-gray-600"}`,children:t.shortName})]}),a.jsx("p",{className:"text-[10px] text-gray-500 leading-[1.4]",children:s}),a.jsx("span",{className:`inline-flex w-fit items-center rounded-full border px-1.5 py-0.5 text-[10px] font-semibold ${u}`,children:d}),a.jsxs("div",{className:"flex items-end gap-1.5",children:[a.jsxs("span",{className:`text-lg font-bold tabular-nums ${r?m.text:"text-gray-800"}`,children:[a.jsx(xV,{value:e.value,decimals:t.unit==="%"?1:0}),t.unit]}),a.jsxs("span",{className:`text-[11px] font-medium ${p}`,children:[e.delta7d>0?"+":"",e.delta7d,"pp"]})]}),a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("div",{className:"flex-1 h-1.5 rounded-full bg-gray-200 overflow-hidden",children:a.jsx("div",{className:`h-full rounded-full transition-all ${g?"bg-green-500":"bg-amber-400"}`,style:{width:`${Math.min(100,e.value/t.target*100)}%`}})}),a.jsxs("span",{className:"text-[10px] text-gray-400",children:[" ",t.target,t.unit]})]}),a.jsxs("div",{className:"text-[10px] text-gray-400",children:[e.numerator.toLocaleString()," / ",e.denominator.toLocaleString()]})]}),a.jsx(x5e,{title:i,lines:o,color:l,anchorRef:x,visible:y})]})}function y5e({stages:e}){const t=e[0]?.count??0,r=e.map((n,s)=>{const i=t>0?Number((n.count/t*100).toFixed(1)):0,o=s===0?void 0:n.conversionRate,l=o==null?"neutral":o>=80?"good":o>=55?"warn":"bad";return{id:`funnel-${n.stage}-${s}`,title:n.label,value:n.count,subLabel:" ",percentOfTotal:i,conversionFromPrev:o,status:l}});return a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs font-semibold text-gray-700 mb-3",children:"  "}),a.jsx(Kke,{steps:r,ariaLabel:"    ",density:"compact",layout:"scroll"})]})}function v5e({metrics:e}){const t=[{key:"consent",label:"",color:"#8b5cf6"},{key:"readiness",label:" Readiness",color:"#3b82f6"},{key:"blocked",label:" ",color:"#ef4444"},{key:"system",label:" ",color:"#06b6d4"}];return a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs font-semibold text-gray-700 mb-3",children:" "}),a.jsx("div",{className:"space-y-3",children:t.map(r=>{const n=e.filter(s=>s.category===r.key);return n.length===0?null:a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-1.5 mb-1.5",children:[a.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:r.color}}),a.jsx("span",{className:"text-[11px] font-semibold text-gray-600",children:r.label})]}),a.jsx("div",{className:"space-y-1",children:n.map(s=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"flex-1 text-[11px] text-gray-600 truncate",children:s.label}),a.jsxs("span",{className:`text-[11px] font-bold ${s.status==="red"?"text-red-600":s.status==="yellow"?"text-amber-600":"text-green-600"}`,children:[s.value,s.unit]}),a.jsx("span",{className:`w-2 h-2 rounded-full ${s.status==="red"?"bg-red-500":s.status==="yellow"?"bg-amber-400":"bg-green-500"}`})]},s.key))})]},r.key)})})]})}function N5e({metrics:e}){return a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs font-semibold text-gray-700 mb-3",children:" & "}),a.jsx("div",{className:"space-y-3",children:e.map(t=>a.jsxs("div",{className:"border border-gray-100 rounded-lg p-2.5",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-[12px] font-semibold text-gray-700",children:t.stage==="stage2"?"2 ":"3 "}),a.jsxs("span",{className:`text-sm font-bold ${t.linkageRate>=60?"text-green-600":t.linkageRate>=40?"text-amber-600":"text-red-600"}`,children:[t.linkageRate,"%"]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-[11px] mb-2",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"median "}),a.jsxs("div",{className:"font-semibold text-gray-800",children:[t.medianLeadTimeDays,""]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:" "}),a.jsxs("div",{className:"font-semibold text-red-600",children:[t.blockedCount,""]})]})]}),t.blockedReasons.length>0&&a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("span",{className:"text-[10px] text-gray-400",children:" "}),t.blockedReasons.map(r=>a.jsxs("div",{className:"flex items-center justify-between text-[11px]",children:[a.jsx("span",{className:"text-gray-600",children:r.reason}),a.jsxs("span",{className:"font-medium text-gray-800",children:[r.count,""]})]},r.reason))]})]},t.stage))})]})}function S5e({rows:e}){const t=r=>r.replace(/||||$/g,"").trim()||r.slice(0,2);return a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[a.jsxs("div",{className:"text-xs font-semibold text-gray-700 mb-2",children:["   ",a.jsx("span",{className:"text-[10px] text-gray-400 ml-1",children:"(worst-first)"})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-[11px]",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[a.jsx("th",{className:"px-1.5 py-1 text-left font-medium text-gray-600 sticky left-0 bg-gray-50 z-10",children:""}),a.jsx("th",{className:"px-1.5 py-1 text-right font-medium text-gray-600",children:""}),a.jsx("th",{className:"px-1.5 py-1 text-right font-medium text-gray-600",children:""}),a.jsx("th",{className:"px-1.5 py-1 text-right font-medium text-gray-600",children:""}),a.jsx("th",{className:"px-1.5 py-1 text-right font-medium text-gray-600",children:""}),a.jsx("th",{className:"px-1.5 py-1 text-right font-medium text-gray-600",children:""}),a.jsx("th",{className:"px-1.5 py-1 text-right font-medium text-gray-600",children:"%"}),a.jsx("th",{className:"px-1.5 py-1 text-right font-medium text-gray-600",children:""})]})}),a.jsx("tbody",{children:e.map((r,n)=>a.jsxs("tr",{className:`border-b border-gray-100 hover:bg-amber-50/30 ${n<3?"bg-red-50/30":""}`,children:[a.jsx("td",{className:"px-1.5 py-1 font-medium text-gray-800 sticky left-0 bg-inherit z-10",children:t(r.regionName)}),a.jsxs("td",{className:"px-1.5 py-1 text-right tabular-nums",children:[r.signalQuality,"%"]}),a.jsxs("td",{className:"px-1.5 py-1 text-right tabular-nums",children:[r.policyImpact,"%"]}),a.jsxs("td",{className:`px-1.5 py-1 text-right tabular-nums font-medium ${r.bottleneckRisk>40?"text-red-600":""}`,children:[r.bottleneckRisk,"%"]}),a.jsxs("td",{className:"px-1.5 py-1 text-right tabular-nums",children:[r.dataReadiness,"%"]}),a.jsxs("td",{className:"px-1.5 py-1 text-right tabular-nums",children:[r.governanceSafety,"%"]}),a.jsxs("td",{className:`px-1.5 py-1 text-right tabular-nums font-medium ${r.blockedPct>20?"text-red-600":r.blockedPct>15?"text-amber-600":"text-green-600"}`,children:[r.blockedPct,"%"]}),a.jsx("td",{className:"px-1.5 py-1 text-right tabular-nums",children:r.backlogCount})]},r.regionCode))})]})})]})}function B8({onNavigate:e}){const t="total_cases",[r,n]=h.useState("weekly"),s=h.useMemo(()=>h5e[r],[r]),i=g5e[r],o=h.useMemo(()=>({weekly:"week",monthly:"month",quarterly:"quarter",yearly_cum:"year"})[r],[r]),[l,d]=h.useState("geomap"),[u,m]=h.useState(null),[p,g]=h.useState(!1),[x,y]=h.useState({opsSummary:!1,ageRisk:!1,kpiTable:!1}),N=h.useCallback(V=>{y(de=>({...de,[V]:!de[V]}))},[]),[v,S]=h.useState(!1),[E,C]=h.useState(!1),[_,A]=h.useState({type:"none"}),[T,R]=h.useState(null),[I,k]=h.useState(null),[w,L]=h.useState({slaMatrix:!1,stageDistribution:!1}),H=h.useCallback(V=>{L(de=>({...de,[V]:!de[V]}))},[]),B=t,[M,G]=s5e(),[$,z]=h.useState(null),[U,Z]=h.useState([]),re=h.useCallback(V=>{Z(V.map(de=>({id:de.code,name:de.name})))},[]),[X,F]=h.useState("SIGNAL_QUALITY"),[te,ne]=h.useState(!1),[se,Ne]=h.useState(q_),[fe,we]=h.useState(!1),ve=h.useRef({startY:0,startHeight:q_}),Oe=h.useMemo(()=>mV(),[]),Fe=h.useMemo(()=>G_[X],[X]),oe=h.useMemo(()=>B_[Fe],[Fe]),le=h.useMemo(()=>Oe.find(V=>V.id===X)??Oe[0],[Oe,X]),ge=h.useMemo(()=>({SIGNAL_QUALITY:"blue",POLICY_IMPACT:"purple",BOTTLENECK_RISK:"red",DATA_READINESS:"green",GOVERNANCE_SAFETY:"orange"})[X],[X]),{drillLevel:_e,drillPath:ee,selectedRegion:q,drillUp:ye,drillTo:pe,resetDrill:he,setScope:rt}=Ake(),[Me,dt]=h.useState(null),St=Me?.code??q?.code??"national",He=h.useMemo(()=>{const V=G.width||(typeof window<"u"?window.innerWidth:1920);return V>=1024?"desktop":V>=768?"tablet":"mobile"},[G.width]),Ye=h.useMemo(()=>{const V=G.height||(typeof window<"u"?window.innerHeight:900),de=He==="mobile"?.55:.72;return Math.max(U8+40,Math.floor(V*de))},[G.height,He]),Mt=h.useCallback(V=>Math.min(Ye,Math.max(U8,V)),[Ye]);h.useEffect(()=>{Ne(V=>Mt(V))},[Mt]);const Xt=h.useCallback(V=>{He!=="mobile"&&(V.preventDefault(),ve.current={startY:V.clientY,startHeight:se},we(!0))},[He,se]),hr=h.useCallback(()=>{Ne(Mt(q_))},[Mt]);h.useEffect(()=>{if(!fe)return;const V=De=>{const ft=De.clientY-ve.current.startY,ot=Mt(ve.current.startHeight+ft);Ne(ot)},de=()=>{we(!1)};return window.addEventListener("mousemove",V),window.addEventListener("mouseup",de),document.body.style.userSelect="none",document.body.style.cursor="ns-resize",()=>{window.removeEventListener("mousemove",V),window.removeEventListener("mouseup",de),document.body.style.userSelect="",document.body.style.cursor=""}},[fe,Mt]),h.useMemo(()=>{const V=G.width;return V<768?{left:1,center:1,right:1}:V<1024?{left:1,center:1,right:1}:{left:1.35,center:2.35,right:2.3}},[G.width]);const Gt=h.useMemo(()=>A8("left"),[]),sr=h.useMemo(()=>Cke(_e).filter(V=>["donut","bar","table"].includes(V.visualization.chartType)&&V.id!=="total-cases"&&V.id!=="center-load"&&V.id!=="case-distribution"&&V.id!=="kpi-summary-table"),[_e]),xr=h.useMemo(()=>A8("bottom"),[]),mr=h.useMemo(()=>Tke(_e),[_e]),br=h.useMemo(()=>{const V={};return[...Gt,...sr,...xr,...mr].forEach(de=>{V[de.id]=Rke(de.id,q?.code||"KR",_e,r)}),V},[Gt,sr,xr,mr,q,_e,r]),kr=[{id:"11",name:""},{id:"21",name:""},{id:"22",name:""},{id:"23",name:""},{id:"24",name:""},{id:"25",name:""},{id:"26",name:""},{id:"29",name:""},{id:"31",name:""},{id:"33",name:""},{id:"34",name:""},{id:"35",name:""},{id:"36",name:""},{id:"37",name:""},{id:"38",name:""},{id:"39",name:""},{id:"32",name:""}],cn=h.useMemo(()=>{if(_e==="nation")return kr.map(V=>({code:V.id,name:V.name}));if(U.length>0)return U.map(V=>({code:V.id,name:V.name}));if(_e==="sido"&&q?.code){const V=FW[q.code]??[];if(V.length>0)return V.map(de=>({code:de.code,name:de.label}))}return[]},[_e,U,q?.code]),wt=h.useMemo(()=>zW({level:_e,parentRegionCode:q?.code,candidates:cn}),[_e,q?.code,cn]),Ge=h.useMemo(()=>wt.children.map(V=>({id:V.code,name:V.name})),[wt]);h.useEffect(()=>{dt(null)},[_e,q?.code]),h.useEffect(()=>{Me&&(wt.childrenCodes.includes(Me.code)||dt(null))},[Me,wt.childrenCodes]);const Qt=h.useMemo(()=>({level:_e,regionCode:q?.code,regionName:q?.name,subRegions:Ge}),[_e,q,Ge]),{centralKpis:Pr,dashData:_r,drilldownData:rr,loadingStage:je,isScopeChangeLoading:Ve,prefetchScope:yt}=Jke(Qt,s,X,{loadDrilldown:te,periodVariant:r}),{funnelData:ir,bottleneckData:Cr,linkageData:nn,regionData:wr}=rr,ze=h.useMemo(()=>_r?_r[Fe]:null,[_r,Fe]),dn=h.useMemo(()=>yV(),[]),ur=h.useMemo(()=>Math.min(5,Math.max(1,dn.headline.maxItems)),[dn.headline.maxItems]),Ue=h.useMemo(()=>Pr.find(V=>V.kpiId==="DATA_READINESS")?.value??null,[Pr]),Se=h.useMemo(()=>{const V=new Map(Oe.map(de=>[de.id,de]));return Pr.map(de=>{const De=V.get(de.kpiId);if(!De)return null;const ft=De.target,ot=F8(De,de.value),pt=Math.max(0,De.higherBetter?ft-de.value:de.value-ft),Kt=p5e(De,de.delta7d),qt=de.kpiId==="DATA_READINESS"?de.value<Math.max(88,ft-3):Ue!=null&&Ue<90,tr=m5e(pt,Kt,qt),Nr=Number((pt+Math.max(0,Kt*.8)+(qt?2.5:0)).toFixed(2));return{kpiKey:G_[de.kpiId],actual:de.value,target:ft,deltaPp:ot,trendWorseningPp:Kt,severity:tr,partialPossible:qt,score:Nr}}).filter(de=>de!=null)},[Pr,Oe,Ue]),nt=h.useMemo(()=>Se.reduce((V,de)=>(V[H_[de.kpiKey]]=de,V),{SIGNAL_QUALITY:void 0,POLICY_IMPACT:void 0,BOTTLENECK_RISK:void 0,DATA_READINESS:void 0,GOVERNANCE_SAFETY:void 0}),[Se]),Re=h.useMemo(()=>{const V={risk:3,warn:2,ok:1};return[...Se].filter(de=>de.severity!=="ok"||de.partialPossible).sort((de,De)=>{const ft=V[De.severity]-V[de.severity];if(ft!==0)return ft;const ot=De.score-de.score;return ot!==0?ot:De.actual-de.actual}).slice(0,ur)},[Se,ur]),Et=h.useMemo(()=>[...Q0].filter(V=>V.status==="deployed"||V.status==="reviewing").sort((V,de)=>new Date(de.deployedAt).getTime()-new Date(V.deployedAt).getTime()).slice(0,3).map(V=>({policyId:V.id,title:V.title,effectiveAt:V.deployedAt.slice(0,10),impactedKpis:V.impactSummary.map(de=>({kpiKey:de.label,deltaPp:de.changePp})),impactedRegions:V.affectedRegions.includes("")?Math.max(Ge.length,17):V.affectedRegions.length,notes:`/   SLA ${V.before.slaRate}%${V.after.slaRate}%   ${V.before.responseTimeliness}%${V.after.responseTimeliness}%`})),[Ge.length]),nr=h.useCallback((V,de)=>{const De=de||Me?.name||q?.name||"";return Array.from({length:4},(ft,ot)=>{const pt=ot+1;return{orgName:`${De.replace(/|||/g,"").trim()} ${pt}`,regionName:De,count:Math.round(Fn(`${V}-${De}-owner-count-${ot}`,8,46)),lastOccurredAt:`2026-02-${String(Math.round(Fn(`${V}-${De}-owner-day-${ot}`,4,12))).padStart(2,"0")}`,ownerRole:$8[ot%$8.length]}})},[Me?.name,q?.name]),Lt=h.useCallback(V=>V.includes("")?"       .":V.includes("")?"      .":V.includes("")?"      .":V.includes("")||V.includes("")?"       .":"       .",[]),Vr=h.useCallback(V=>{if(V==="POLICY_IMPACT"){A({type:"policy",items:Et});return}const de=nt[V];de&&A({type:"kpi",kpiId:V,severity:de.severity,deltaPp:de.deltaPp,trendWorseningPp:de.trendWorseningPp,partialPossible:de.partialPossible})},[nt,Et]),Cn=h.useMemo(()=>{if(!ze)return[];const V=new Map(ze.regions.map(pt=>[pt.regionCode,pt])),de=ze.national.target??ze.national.value,De=oe.target??de,ft=new Set(q?.code?[q.code]:[]);return wt.childrenCodes.filter(pt=>!ft.has(pt)).map(pt=>{const Kt=V.get(pt),qt=Kt?.value;if(qt==null||!Number.isFinite(qt))return null;const tr=Kt?.regionName,Nr=wt.childrenNameMap[pt]||tr;Nr||console.warn(`[Top5] missing nameMap for code: ${pt}`);const gr=Number(Fn(`${pt}-${Fe}-wdelta`,-3.8,3.8).toFixed(1)),qs=Number((oe.higherIsWorse?gr:-gr).toFixed(1)),Sr=Number((qt-De).toFixed(1));return{code:pt,name:Nr||`: ${pt}`,value:qt,targetGapPp:Sr,gapAbs:Math.abs(Sr),weeklyDeltaPp:gr,worseningPp:qs}}).filter(pt=>pt!=null).sort((pt,Kt)=>{const qt=Kt.gapAbs-pt.gapAbs;if(qt!==0)return qt;const tr=Kt.worseningPp-pt.worseningPp;if(tr!==0)return tr;const Nr=Kt.value-pt.value;return Nr!==0?Nr:pt.name.localeCompare(Kt.name,"ko-KR")}).slice(0,5).map((pt,Kt)=>({...pt,rank:Kt+1}))},[ze,oe.target,oe.higherIsWorse,Fe,wt.childrenCodes,wt.childrenNameMap,q?.code]),xt=h.useMemo(()=>ze?Me?.code?ze.cause.map((V,de)=>({...V,value:Math.max(1,Math.round(V.value+Fn(`${Me.code}-${Fe}-cause-${de}`,-12,14)))})):ze.cause:[],[ze,Me?.code,Fe]),ta=h.useMemo(()=>xt[0]?.name??" ",[xt]),ra=h.useCallback(V=>{dt({code:V.code,name:V.name}),A({type:"top5",row:V,causeName:ta,owners:nr(ta,V.name),actionText:Lt(ta)})},[Lt,nr,ta]),fi=h.useMemo(()=>!Me||!ze?null:ze.regions.find(V=>V.regionCode===Me.code)??null,[ze,Me]),Mn=h.useMemo(()=>ze?Me?.code?ze.trend.map((V,de)=>({...V,value:Number((V.value+Fn(`${Me.code}-${Fe}-trend-${de}`,-2.8,2.8)).toFixed(1))})):ze.trend:[],[ze,Me?.code,Fe]);h.useEffect(()=>{_e==="sido"&&console.assert(wt.childrenType==="sigungu","[Top5] expected childrenType=sigungu when level=sido",{childrenType:wt.childrenType})},[_e,wt.childrenType]),h.useEffect(()=>{Cn.length&&t5e({top5:Cn,childrenCodes:wt.childrenCodes,parentRegionCode:q?.code})},[Cn,wt.childrenCodes,q?.code]),h.useEffect(()=>{_.type==="none"&&Pr.length&&Vr(X)},[_.type,Pr.length,Vr,X]);const Ir=h.useMemo(()=>{const V=o==="week"?1:o==="month"?4.2:o==="year"?52:13,de=`${St}-${o}`,De=Ge.map(qt=>({name:qt.name,size:Math.round(Fn(`${de}-tree-${qt.id}`,250,3500)*V)})),ft=Math.max(...De.map(qt=>qt.size)),ot=Math.min(...De.map(qt=>qt.size)),pt=oe.palette,Kt=qt=>{const tr=(qt-ot)/(ft-ot||1);return tr<.14?pt[0]:tr<.28?pt[1]:tr<.42?pt[2]:tr<.57?pt[3]:tr<.71?pt[4]:tr<.85?pt[5]:pt[6]};return De.map(qt=>({...qt,fill:Kt(qt.size)}))},[St,o,oe.palette,Ge]),ua=h.useMemo(()=>Ir.reduce((V,de)=>V+de.size,0),[Ir]),Ht=o==="week"?"":o==="month"?"":o==="year"?"()":"",Dr=h.useMemo(()=>R8.find(V=>V.id===B)??R8[0],[B]),Tr=h.useMemo(()=>{const de={total_cases:{min:300,max:2200},completion:{min:60,max:98},consultation_time:{min:1,max:15},followup_dropout:{min:2,max:20},dropout:{min:3,max:25}}[B]??{min:10,max:100},De=`${St}-${B}-heat`,ft=Ge.map(Nr=>({name:Nr.name,value:Fn(`${De}-${Nr.id}`,de.min,de.max)})),ot=Math.max(...ft.map(Nr=>Nr.value)),pt=Math.min(...ft.map(Nr=>Nr.value)),Kt=oe.palette,qt=Nr=>{const gr=(Nr-pt)/(ot-pt||1);return gr<.14?Kt[0]:gr<.28?Kt[1]:gr<.42?Kt[2]:gr<.57?Kt[3]:gr<.71?Kt[4]:gr<.85?Kt[5]:Kt[6]},tr=new Set([Kt[0],Kt[1]]);return ft.map(Nr=>{const gr=qt(Nr.value);return{name:Nr.name,size:Math.round(Nr.value),fill:gr,textColor:tr.has(gr)?"#1e293b":"#ffffff"}})},[St,B,oe.palette,Ge]),_o=h.useMemo(()=>({slaCut:L8(void 0,dn.matrixThresholds.slaCut),dataCut:L8(void 0,dn.matrixThresholds.dataCut)}),[dn.matrixThresholds.dataCut,dn.matrixThresholds.slaCut]),mn=_o.slaCut,hn=_o.dataCut,na={:[{id:"11010",name:""},{id:"11020",name:""},{id:"11030",name:""},{id:"11040",name:""},{id:"11050",name:""},{id:"11060",name:""},{id:"11070",name:""},{id:"11080",name:""},{id:"11090",name:""},{id:"11100",name:""},{id:"11110",name:""},{id:"11120",name:""},{id:"11130",name:""},{id:"11140",name:""},{id:"11150",name:""},{id:"11160",name:""},{id:"11170",name:""},{id:"11180",name:""},{id:"11190",name:""},{id:"11200",name:""},{id:"11210",name:""},{id:"11220",name:""},{id:"11230",name:""},{id:"11240",name:""},{id:"11250",name:""}],:[{id:"21010",name:""},{id:"21020",name:""},{id:"21030",name:""},{id:"21040",name:""},{id:"21050",name:""},{id:"21060",name:""},{id:"21070",name:""},{id:"21080",name:""},{id:"21090",name:""},{id:"21100",name:""},{id:"21110",name:""},{id:"21120",name:""},{id:"21130",name:""},{id:"21140",name:""},{id:"21150",name:""},{id:"21310",name:""}],:[{id:"22010",name:""},{id:"22020",name:""},{id:"22030",name:""},{id:"22040",name:""},{id:"22050",name:""},{id:"22060",name:""},{id:"22070",name:""},{id:"22310",name:""}],:[{id:"23010",name:""},{id:"23020",name:""},{id:"23030",name:""},{id:"23040",name:""},{id:"23050",name:""},{id:"23060",name:""},{id:"23070",name:""},{id:"23080",name:""},{id:"23310",name:""},{id:"23320",name:""}],:[{id:"24010",name:""},{id:"24020",name:""},{id:"24030",name:""},{id:"24040",name:""},{id:"24050",name:""}],:[{id:"25010",name:""},{id:"25020",name:""},{id:"25030",name:""},{id:"25040",name:""},{id:"25050",name:""}],:[{id:"26010",name:""},{id:"26020",name:""},{id:"26030",name:""},{id:"26040",name:""},{id:"26310",name:""}],:[{id:"29010",name:""}],:[{id:"31011",name:""},{id:"31021",name:""},{id:"31030",name:""},{id:"31041",name:""},{id:"31050",name:""},{id:"31060",name:""},{id:"31070",name:""},{id:"31080",name:""},{id:"31091",name:""},{id:"31101",name:""},{id:"31110",name:""},{id:"31120",name:""},{id:"31130",name:""},{id:"31140",name:""},{id:"31150",name:""},{id:"31160",name:""},{id:"31170",name:""},{id:"31180",name:""},{id:"31191",name:""},{id:"31200",name:""},{id:"31210",name:""},{id:"31220",name:""},{id:"31230",name:""},{id:"31240",name:""},{id:"31250",name:""},{id:"31260",name:""},{id:"31270",name:""},{id:"31280",name:""},{id:"31350",name:""},{id:"31370",name:""},{id:"31380",name:""}],:[{id:"33041",name:""},{id:"33020",name:""},{id:"33030",name:""},{id:"33320",name:""},{id:"33330",name:""},{id:"33340",name:""},{id:"33390",name:""},{id:"33350",name:""},{id:"33360",name:""},{id:"33370",name:""},{id:"33380",name:""}],:[{id:"34011",name:""},{id:"34020",name:""},{id:"34030",name:""},{id:"34040",name:""},{id:"34050",name:""},{id:"34060",name:""},{id:"34070",name:""},{id:"34080",name:""},{id:"34310",name:""},{id:"34330",name:""},{id:"34340",name:""},{id:"34350",name:""},{id:"34360",name:""},{id:"34370",name:""},{id:"34380",name:""}],:[{id:"35011",name:""},{id:"35020",name:""},{id:"35030",name:""},{id:"35040",name:""},{id:"35050",name:""},{id:"35060",name:""},{id:"35310",name:""},{id:"35320",name:""},{id:"35330",name:""},{id:"35340",name:""},{id:"35350",name:""},{id:"35360",name:""},{id:"35370",name:""},{id:"35380",name:""}],:[{id:"36010",name:""},{id:"36020",name:""},{id:"36030",name:""},{id:"36040",name:""},{id:"36060",name:""},{id:"36310",name:""},{id:"36320",name:""},{id:"36330",name:""},{id:"36350",name:""},{id:"36360",name:""},{id:"36370",name:""},{id:"36380",name:""},{id:"36390",name:""},{id:"36400",name:""},{id:"36410",name:""},{id:"36420",name:""},{id:"36430",name:""},{id:"36440",name:""},{id:"36450",name:""},{id:"36460",name:""},{id:"36470",name:""},{id:"36480",name:""}],:[{id:"37011",name:""},{id:"37020",name:""},{id:"37030",name:""},{id:"37040",name:""},{id:"37050",name:""},{id:"37060",name:""},{id:"37070",name:""},{id:"37080",name:""},{id:"37090",name:""},{id:"37100",name:""},{id:"37310",name:""},{id:"37320",name:""},{id:"37330",name:""},{id:"37340",name:""},{id:"37350",name:""},{id:"37360",name:""},{id:"37370",name:""},{id:"37380",name:""},{id:"37390",name:""},{id:"37400",name:""},{id:"37410",name:""},{id:"37420",name:""},{id:"37430",name:""}],:[{id:"38111",name:""},{id:"38030",name:""},{id:"38050",name:""},{id:"38060",name:""},{id:"38070",name:""},{id:"38080",name:""},{id:"38090",name:""},{id:"38100",name:""},{id:"38310",name:""},{id:"38320",name:""},{id:"38330",name:""},{id:"38340",name:""},{id:"38350",name:""},{id:"38360",name:""},{id:"38370",name:""},{id:"38380",name:""},{id:"38390",name:""},{id:"38400",name:""}],:[{id:"39010",name:""},{id:"39020",name:""}],:[{id:"32010",name:""},{id:"32020",name:""},{id:"32030",name:""},{id:"32040",name:""},{id:"32050",name:""},{id:"32060",name:""},{id:"32070",name:""},{id:"32310",name:""},{id:"32320",name:""},{id:"32330",name:""},{id:"32340",name:""},{id:"32350",name:""},{id:"32360",name:""},{id:"32370",name:""},{id:"32380",name:""},{id:"32390",name:""},{id:"32400",name:""},{id:"32410",name:""}]},ll={11010:[{id:"1111051",name:""},{id:"1111053",name:""},{id:"1111055",name:""},{id:"1111057",name:""},{id:"1111060",name:""},{id:"1111064",name:""},{id:"1111068",name:""},{id:"1111070",name:""}],11020:[{id:"1114051",name:""},{id:"1114053",name:""},{id:"1114055",name:""},{id:"1114057",name:""},{id:"1114060",name:""},{id:"1114062",name:""},{id:"1114065",name:""},{id:"1114067",name:""}],11030:[{id:"1117051",name:""},{id:"1117053",name:"2"},{id:"1117055",name:""},{id:"1117057",name:""},{id:"1117060",name:"1"},{id:"1117062",name:"2"},{id:"1117065",name:"1"},{id:"1117067",name:"2"},{id:"1117070",name:""},{id:"1117072",name:""}],11040:[{id:"1120051",name:"2"},{id:"1120053",name:""},{id:"1120055",name:""},{id:"1120057",name:""},{id:"1120060",name:"1"},{id:"1120062",name:"2"},{id:"1120065",name:""},{id:"1120067",name:"1"},{id:"1120070",name:""},{id:"1120072",name:"11"},{id:"1120074",name:"12"},{id:"1120076",name:"21"},{id:"1120078",name:"23"},{id:"1120080",name:""}],11140:[{id:"1144051",name:""},{id:"1144053",name:""},{id:"1144055",name:""},{id:"1144057",name:""},{id:"1144060",name:""},{id:"1144062",name:""},{id:"1144065",name:""},{id:"1144067",name:"1"},{id:"1144070",name:"2"},{id:"1144072",name:""},{id:"1144074",name:"1"},{id:"1144076",name:"2"},{id:"1144078",name:""}],11190:[{id:"1156051",name:""},{id:"1156053",name:"1"},{id:"1156055",name:"2"},{id:"1156057",name:""},{id:"1156060",name:""},{id:"1156062",name:""},{id:"1156065",name:""},{id:"1156067",name:"1"},{id:"1156070",name:"3"},{id:"1156072",name:"4"},{id:"1156074",name:"5"},{id:"1156076",name:"1"},{id:"1156078",name:"2"},{id:"1156080",name:"3"}],11220:[{id:"1165051",name:"1"},{id:"1165053",name:"2"},{id:"1165055",name:"3"},{id:"1165057",name:"4"},{id:"1165060",name:""},{id:"1165062",name:"1"},{id:"1165065",name:"2"},{id:"1165067",name:"3"},{id:"1165070",name:"4"},{id:"1165072",name:""},{id:"1165074",name:"1"},{id:"1165076",name:"2"},{id:"1165078",name:"3"},{id:"1165080",name:"4"},{id:"1165082",name:""}],11230:[{id:"1168051",name:""},{id:"1168053",name:"1"},{id:"1168055",name:"2"},{id:"1168057",name:""},{id:"1168060",name:""},{id:"1168062",name:"1"},{id:"1168064",name:"2"},{id:"1168066",name:"1"},{id:"1168068",name:"2"},{id:"1168070",name:"4"},{id:"1168072",name:"1"},{id:"1168074",name:"2"},{id:"1168076",name:"1"},{id:"1168078",name:"2"},{id:"1168080",name:"1"},{id:"1168082",name:"4"},{id:"1168084",name:""},{id:"1168086",name:"1"},{id:"1168088",name:""},{id:"1168090",name:""}],11240:[{id:"1171051",name:""},{id:"1171053",name:"2"},{id:"1171055",name:"3"},{id:"1171057",name:"4"},{id:"1171060",name:"6"},{id:"1171062",name:"7"},{id:"1171064",name:"1"},{id:"1171066",name:"2"},{id:"1171068",name:""},{id:"1171070",name:"1"},{id:"1171072",name:"2"},{id:"1171074",name:"1"},{id:"1171076",name:"2"},{id:"1171078",name:"1"},{id:"1171080",name:"2"},{id:"1171082",name:"1"},{id:"1171084",name:"2"},{id:"1171086",name:""},{id:"1171088",name:"1"},{id:"1171090",name:"2"},{id:"1171092",name:""},{id:"1171094",name:""}],11250:[{id:"1174051",name:""},{id:"1174053",name:"1"},{id:"1174055",name:"2"},{id:"1174057",name:"1"},{id:"1174060",name:"2"},{id:"1174062",name:"1"},{id:"1174064",name:"2"},{id:"1174066",name:"1"},{id:"1174068",name:"2"},{id:"1174070",name:"3"},{id:"1174072",name:"1"},{id:"1174074",name:"2"},{id:"1174076",name:"3"},{id:"1174078",name:"1"},{id:"1174080",name:"2"},{id:"1174082",name:"3"},{id:"1174084",name:"1"},{id:"1174086",name:"2"}],21010:[{id:"2611051",name:""},{id:"2611053",name:""},{id:"2611055",name:""},{id:"2611057",name:""},{id:"2611060",name:""},{id:"2611062",name:""},{id:"2611064",name:""},{id:"2611066",name:""}],21050:[{id:"2623051",name:"1"},{id:"2623053",name:"2"},{id:"2623055",name:""},{id:"2623057",name:""},{id:"2623060",name:"1"},{id:"2623062",name:"2"},{id:"2623064",name:"1"},{id:"2623066",name:"2"},{id:"2623068",name:"1"},{id:"2623070",name:"3"},{id:"2623072",name:"1"},{id:"2623074",name:"4"},{id:"2623076",name:"1"},{id:"2623078",name:"2"},{id:"2623080",name:"1"},{id:"2623082",name:"2"},{id:"2623084",name:"3"},{id:"2623086",name:"1"},{id:"2623088",name:"2"}],21090:[{id:"2635051",name:"1"},{id:"2635053",name:"2"},{id:"2635055",name:"3"},{id:"2635057",name:"1"},{id:"2635060",name:"2"},{id:"2635062",name:"1"},{id:"2635064",name:"2"},{id:"2635066",name:"3"},{id:"2635068",name:"4"},{id:"2635070",name:""},{id:"2635072",name:"1"},{id:"2635074",name:"2"},{id:"2635076",name:"3"},{id:"2635078",name:"4"},{id:"2635080",name:"1"},{id:"2635082",name:"2"},{id:"2635084",name:"1"},{id:"2635086",name:"2"}],22010:[{id:"2711051",name:""},{id:"2711053",name:""},{id:"2711055",name:"1"},{id:"2711057",name:"2"},{id:"2711060",name:"3"},{id:"2711062",name:""},{id:"2711064",name:"1"},{id:"2711066",name:"2"},{id:"2711068",name:"3"},{id:"2711070",name:"4"},{id:"2711072",name:"1"},{id:"2711074",name:"2"}],22060:[{id:"2726051",name:"1"},{id:"2726053",name:"2"},{id:"2726055",name:"3"},{id:"2726057",name:"4"},{id:"2726060",name:"1"},{id:"2726062",name:"2"},{id:"2726064",name:"3"},{id:"2726066",name:"1"},{id:"2726068",name:"23"},{id:"2726070",name:"4"},{id:"2726072",name:"1"},{id:"2726074",name:"2"},{id:"2726076",name:""},{id:"2726078",name:""},{id:"2726080",name:""},{id:"2726082",name:""},{id:"2726084",name:""},{id:"2726086",name:"1"},{id:"2726088",name:"2"},{id:"2726090",name:"1"},{id:"2726092",name:"2"},{id:"2726094",name:"3"}],23040:[{id:"2818551",name:"1"},{id:"2818553",name:"2"},{id:"2818555",name:""},{id:"2818557",name:"1"},{id:"2818560",name:"2"},{id:"2818562",name:"3"},{id:"2818564",name:""},{id:"2818566",name:"1"},{id:"2818568",name:"2"},{id:"2818570",name:"3"},{id:"2818572",name:"1"},{id:"2818574",name:"2"},{id:"2818576",name:"3"}],23050:[{id:"2820051",name:"1"},{id:"2820053",name:"2"},{id:"2820055",name:"3"},{id:"2820057",name:"4"},{id:"2820060",name:"1"},{id:"2820062",name:"2"},{id:"2820064",name:"3"},{id:"2820066",name:"4"},{id:"2820068",name:"1"},{id:"2820070",name:"2"},{id:"2820072",name:"3"},{id:"2820074",name:"4"},{id:"2820076",name:"5"},{id:"2820078",name:"6"},{id:"2820080",name:""},{id:"2820082",name:"2"},{id:"2820084",name:""},{id:"2820086",name:"1"},{id:"2820088",name:"2"},{id:"2820090",name:""},{id:"2820092",name:"1"}],24010:[{id:"2911051",name:""},{id:"2911053",name:""},{id:"2911055",name:"1"},{id:"2911057",name:"2"},{id:"2911060",name:"1"},{id:"2911062",name:"2"},{id:"2911064",name:"1"},{id:"2911066",name:"2"},{id:"2911068",name:""},{id:"2911070",name:""}],24020:[{id:"2914051",name:""},{id:"2914053",name:"1"},{id:"2914055",name:"2"},{id:"2914057",name:""},{id:"2914060",name:""},{id:"2914062",name:""},{id:"2914064",name:"1"},{id:"2914066",name:"2"},{id:"2914068",name:"1"},{id:"2914070",name:"2"},{id:"2914072",name:""},{id:"2914074",name:"1"},{id:"2914076",name:"2"},{id:"2914078",name:""},{id:"2914080",name:""}],25030:[{id:"3017051",name:""},{id:"3017053",name:"1"},{id:"3017055",name:"2"},{id:"3017057",name:""},{id:"3017060",name:""},{id:"3017062",name:""},{id:"3017064",name:""},{id:"3017066",name:"1"},{id:"3017068",name:"2"},{id:"3017070",name:"3"},{id:"3017072",name:""},{id:"3017074",name:"1"},{id:"3017076",name:"2"},{id:"3017078",name:"1"},{id:"3017080",name:"2"},{id:"3017082",name:"3"},{id:"3017084",name:""},{id:"3017086",name:""},{id:"3017088",name:""},{id:"3017090",name:"1"},{id:"3017092",name:"2"}],25040:[{id:"3020051",name:""},{id:"3020053",name:""},{id:"3020055",name:"1"},{id:"3020057",name:"2"},{id:"3020060",name:"1"},{id:"3020062",name:"2"},{id:"3020064",name:"3"},{id:"3020066",name:""},{id:"3020068",name:""},{id:"3020070",name:""},{id:"3020072",name:""},{id:"3020074",name:""}],26010:[{id:"3111051",name:""},{id:"3111053",name:""},{id:"3111055",name:""},{id:"3111057",name:""},{id:"3111060",name:"1"},{id:"3111062",name:"2"},{id:"3111064",name:""},{id:"3111066",name:""},{id:"3111068",name:""},{id:"3111070",name:""},{id:"3111072",name:"1"},{id:"3111074",name:"2"},{id:"3111076",name:"3"},{id:"3111078",name:"4"},{id:"3111080",name:"5"}],26020:[{id:"3114051",name:""},{id:"3114053",name:""},{id:"3114055",name:""},{id:"3114057",name:""},{id:"3114060",name:""},{id:"3114062",name:""},{id:"3114064",name:""},{id:"3114066",name:""}],29010:[{id:"3611051",name:""},{id:"3611053",name:""},{id:"3611055",name:""},{id:"3611057",name:""},{id:"3611060",name:""},{id:"3611062",name:""},{id:"3611064",name:""},{id:"3611066",name:""},{id:"3611068",name:""},{id:"3611070",name:""},{id:"3611072",name:""},{id:"3611074",name:""},{id:"3611076",name:""},{id:"3611078",name:""},{id:"3611080",name:""},{id:"3611082",name:""}],31011:[{id:"4111051",name:""},{id:"4111053",name:""},{id:"4111055",name:""},{id:"4111057",name:""}],31021:[{id:"4113051",name:""},{id:"4113053",name:""},{id:"4113055",name:""}],31101:[{id:"4128051",name:""},{id:"4128053",name:""},{id:"4128055",name:""}],31191:[{id:"4146051",name:""},{id:"4146053",name:""},{id:"4146055",name:""}],33041:[{id:"4311051",name:""},{id:"4311053",name:""},{id:"4311055",name:""},{id:"4311057",name:""}],33020:[{id:"4313051",name:""},{id:"4313053",name:""},{id:"4313055",name:""},{id:"4313057",name:""},{id:"4313060",name:""},{id:"4313062",name:""},{id:"4313064",name:""},{id:"4313066",name:""},{id:"4313068",name:""},{id:"4313070",name:""},{id:"4313072",name:""},{id:"4313074",name:""},{id:"4313076",name:""},{id:"4313078",name:""}],33030:[{id:"4315051",name:""},{id:"4315053",name:""},{id:"4315055",name:""},{id:"4315057",name:""},{id:"4315060",name:""},{id:"4315062",name:""},{id:"4315064",name:""},{id:"4315066",name:""},{id:"4315068",name:""},{id:"4315070",name:""},{id:"4315072",name:""},{id:"4315074",name:""}],34011:[{id:"4413051",name:""},{id:"4413053",name:""}],34040:[{id:"4420051",name:"1"},{id:"4420053",name:"2"},{id:"4420055",name:"3"},{id:"4420057",name:"4"},{id:"4420060",name:"5"},{id:"4420062",name:"6"},{id:"4420064",name:""},{id:"4420066",name:""},{id:"4420068",name:""},{id:"4420070",name:""},{id:"4420072",name:""},{id:"4420074",name:""},{id:"4420076",name:""},{id:"4420078",name:""},{id:"4420080",name:""},{id:"4420082",name:""}],35011:[{id:"4511051",name:""},{id:"4511053",name:""}],35020:[{id:"4513051",name:""},{id:"4513053",name:""},{id:"4513055",name:""},{id:"4513057",name:"1"},{id:"4513060",name:"2"},{id:"4513062",name:""},{id:"4513064",name:""},{id:"4513066",name:""},{id:"4513068",name:""},{id:"4513070",name:""},{id:"4513072",name:""},{id:"4513074",name:""},{id:"4513076",name:""},{id:"4513078",name:""},{id:"4513080",name:""},{id:"4513082",name:""},{id:"4513084",name:""}],36010:[{id:"4611051",name:"1"},{id:"4611053",name:"2"},{id:"4611055",name:""},{id:"4611057",name:""},{id:"4611060",name:""},{id:"4611062",name:""},{id:"4611064",name:""},{id:"4611066",name:""},{id:"4611068",name:""},{id:"4611070",name:""},{id:"4611072",name:""},{id:"4611074",name:""},{id:"4611076",name:""},{id:"4611078",name:""},{id:"4611080",name:""},{id:"4611082",name:""}],36020:[{id:"4613051",name:""},{id:"4613053",name:""},{id:"4613055",name:""},{id:"4613057",name:""},{id:"4613060",name:""},{id:"4613062",name:""},{id:"4613064",name:""},{id:"4613066",name:""},{id:"4613068",name:""},{id:"4613070",name:""},{id:"4613072",name:""},{id:"4613074",name:""},{id:"4613076",name:""},{id:"4613078",name:""},{id:"4613080",name:""},{id:"4613082",name:""}],37011:[{id:"4711151",name:""},{id:"4711153",name:""},{id:"4711155",name:""},{id:"4711157",name:""},{id:"4711160",name:""},{id:"4711162",name:""},{id:"4711164",name:""},{id:"4711166",name:""}],37020:[{id:"4713051",name:""},{id:"4713053",name:""},{id:"4713055",name:""},{id:"4713057",name:""},{id:"4713060",name:""},{id:"4713062",name:""},{id:"4713064",name:""},{id:"4713066",name:""},{id:"4713068",name:""},{id:"4713070",name:""},{id:"4713072",name:""},{id:"4713074",name:""},{id:"4713076",name:""},{id:"4713078",name:""},{id:"4713080",name:""}],38111:[{id:"4812151",name:""},{id:"4812153",name:""},{id:"4812155",name:""},{id:"4812157",name:""},{id:"4812160",name:""}],38070:[{id:"4825051",name:""},{id:"4825053",name:""},{id:"4825055",name:""},{id:"4825057",name:""},{id:"4825060",name:""},{id:"4825062",name:""},{id:"4825064",name:""},{id:"4825066",name:""},{id:"4825068",name:"1"},{id:"4825070",name:"2"},{id:"4825072",name:"3"},{id:"4825074",name:""},{id:"4825076",name:""},{id:"4825078",name:""},{id:"4825080",name:""},{id:"4825082",name:""},{id:"4825084",name:""}],39010:[{id:"5011051",name:"1"},{id:"5011053",name:"2"},{id:"5011055",name:"1"},{id:"5011057",name:"2"},{id:"5011060",name:"1"},{id:"5011062",name:"2"},{id:"5011064",name:"1"},{id:"5011066",name:"2"},{id:"5011068",name:""},{id:"5011070",name:""},{id:"5011072",name:""},{id:"5011074",name:""},{id:"5011076",name:""},{id:"5011078",name:""},{id:"5011080",name:""},{id:"5011082",name:""},{id:"5011084",name:""},{id:"5011086",name:""},{id:"5011088",name:""},{id:"5011090",name:""},{id:"5011092",name:""},{id:"5011094",name:""},{id:"5011096",name:""},{id:"5011098",name:""},{id:"5011100",name:""}],39020:[{id:"5013051",name:""},{id:"5013053",name:""},{id:"5013055",name:""},{id:"5013057",name:""},{id:"5013060",name:""},{id:"5013062",name:""},{id:"5013064",name:""},{id:"5013066",name:""},{id:"5013068",name:""},{id:"5013070",name:""},{id:"5013072",name:""},{id:"5013074",name:""},{id:"5013076",name:""},{id:"5013078",name:""},{id:"5013080",name:""},{id:"5013082",name:""}],32010:[{id:"5111051",name:""},{id:"5111053",name:""},{id:"5111055",name:""},{id:"5111057",name:""},{id:"5111060",name:""},{id:"5111062",name:"1"},{id:"5111064",name:"2"},{id:"5111066",name:"3"},{id:"5111068",name:""},{id:"5111070",name:""},{id:"5111072",name:""},{id:"5111074",name:""},{id:"5111076",name:""},{id:"5111078",name:""},{id:"5111080",name:""},{id:"5111082",name:""},{id:"5111084",name:""},{id:"5111086",name:""},{id:"5111088",name:""}],32020:[{id:"5113051",name:""},{id:"5113053",name:""},{id:"5113055",name:""},{id:"5113057",name:"1"},{id:"5113060",name:"2"},{id:"5113062",name:""},{id:"5113064",name:""},{id:"5113066",name:""},{id:"5113068",name:""},{id:"5113070",name:""},{id:"5113072",name:"1"},{id:"5113074",name:"2"},{id:"5113076",name:""},{id:"5113078",name:""},{id:"5113080",name:""},{id:"5113082",name:""},{id:"5113084",name:""},{id:"5113086",name:""},{id:"5113088",name:""},{id:"5113090",name:""}],32030:[{id:"5115051",name:"1"},{id:"5115053",name:"2"},{id:"5115055",name:"1"},{id:"5115057",name:"2"},{id:"5115060",name:""},{id:"5115062",name:""},{id:"5115064",name:""},{id:"5115066",name:""},{id:"5115068",name:""},{id:"5115070",name:""},{id:"5115072",name:""},{id:"5115074",name:""},{id:"5115076",name:""},{id:"5115078",name:""},{id:"5115080",name:""},{id:"5115082",name:""}]},an=h.useMemo(()=>{const V=[{id:"11",name:""},{id:"21",name:""},{id:"22",name:""},{id:"23",name:""},{id:"24",name:""},{id:"25",name:""},{id:"26",name:""},{id:"29",name:""},{id:"31",name:""},{id:"33",name:""},{id:"34",name:""},{id:"35",name:""},{id:"36",name:""},{id:"37",name:""},{id:"38",name:""},{id:"39",name:""},{id:"32",name:""}];let de;if(_e==="nation")de=V;else if(U.length>0)de=U;else if(_e==="sido"){const De={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},ft=q?.name||"",ot=De[ft]||ft.replace(/||||$/g,"").trim()||ft;de=na[ot]||V}else{const De=q?.code||"00",ft=ll[De];if(ft)de=ft;else{const ot=q?.name||"";if(ot.endsWith("")){const pt=ot.slice(0,-1);de=[{id:`${De}-E1`,name:`${pt}`},{id:`${De}-E2`,name:""},{id:`${De}-E3`,name:""},{id:`${De}-E4`,name:""},{id:`${De}-E5`,name:""},{id:`${De}-E6`,name:""},{id:`${De}-E7`,name:""},{id:`${De}-E8`,name:""},{id:`${De}-E9`,name:""}]}else de=[{id:`${De}-E1`,name:""},{id:`${De}-E2`,name:""},{id:`${De}-E3`,name:""},{id:`${De}-E4`,name:""},{id:`${De}-E5`,name:""},{id:`${De}-E6`,name:""},{id:`${De}-E7`,name:""},{id:`${De}-E8`,name:""}]}}return de.map(De=>{const ft=`${St}-${o}-risk-${De.id}`,ot=Number(Fn(`${ft}-sla`,78,100).toFixed(1)),pt=Number(Fn(`${ft}-data`,75,100).toFixed(1)),Kt=Math.round(Fn(`${ft}-cases`,200,3e3));return{regionId:De.id,regionName:De.name,slaRate:ot,dataRate:pt,totalCases:Kt}})},[St,o,_e,q,U]),pi=["incoming","inProgress","needRecontact","slaBreach","completed"],un={incoming:"",inProgress:"",needRecontact:" ",slaBreach:"SLA ",completed:""},ic={incoming:T0.blue,inProgress:T0.cyan,needRecontact:T0.orange,slaBreach:T0.red,completed:T0.green},Fr=h.useMemo(()=>Ge.map(V=>{const de=`${St}-${o}-stage-${V.id}`,De=V.name.length>3?V.name.replace(/||||$/g,"").trim()||V.name.slice(0,2):V.name;return{regionName:De.length>4?De.slice(0,4):De,incoming:Math.round(Fn(`${de}-inc`,50,300)),inProgress:Math.round(Fn(`${de}-inp`,100,500)),needRecontact:Math.round(Fn(`${de}-nrc`,20,150)),slaBreach:Math.round(Fn(`${de}-sla`,5,80)),completed:Math.round(Fn(`${de}-cmp`,200,800))}}),[St,o,Ge]),Es=h.useMemo(()=>{const V=["20-39","40-59","60-69","70-79","80+"],de=`${St}-${o}-agestat`;return V.map(De=>{const ft=`${de}-${De}`;return{age:De,normal:Math.round(Fn(`${ft}-n`,120,450)),caution:Math.round(Fn(`${ft}-c`,40,180)),highRisk:Math.round(Fn(`${ft}-h`,15,90)),slaViolation:Math.round(Fn(`${ft}-s`,5,40))}})},[St,o]),Va=V=>{const{x:de,y:De,width:ft,height:ot,name:pt,fill:Kt,textColor:qt}=V;if(!pt||ft<25||ot<18)return null;const tr=pt.length>5?pt.replace(/|||/g,"").trim()||pt.slice(0,4):pt,Nr=qt||"#fff";return a.jsxs("g",{children:[a.jsx("rect",{x:de,y:De,width:ft,height:ot,fill:Kt,stroke:"#fff",strokeWidth:1.5,rx:2,style:{filter:"brightness(1.0)",transition:"filter 0.2s"}}),ft>35&&ot>25&&a.jsx("text",{x:de+ft/2,y:De+ot/2,textAnchor:"middle",dominantBaseline:"middle",fill:Nr,fontSize:ft>70?10:8,fontWeight:"600",style:{textShadow:Nr==="#ffffff"?"0 1px 2px rgba(0,0,0,0.4)":"none"},children:tr})]})},Bn=h.useCallback(V=>V==="nation"?"sido":"sigungu",[]),fa=h.useCallback(({level:V,code:de,name:De})=>{const ot={sig:"sido",emd:"sigungu"}[V];ot&&(yt({level:ot,regionCode:de,regionName:De}),rt({code:de,name:De,level:ot},{replace:!0}))},[yt,rt]);h.useEffect(()=>{if(!ze?.worstRegions?.length)return;const V=Bn(_e);ze.worstRegions.slice(0,3).forEach(de=>{yt({level:V,regionCode:de.regionCode,regionName:de.regionName})})},[ze,_e,Bn,yt]);const Ks=h.useMemo(()=>Se.some(V=>V.partialPossible),[Se]),js=h.useCallback((V,de)=>{const De=nt[V.id],ft=R0[De?.severity??"ok"],ot=De?.deltaPp??F8(V,de.value);return[`: ${I8[V.id]}`,`: ${d5e[V.id]}`,` : ${ft}   (${i}) ${de.value.toFixed(1)}${V.unit} (  ${jl(ot)})`,` : ${M8[V.id]}`,`/: ${V.target}${V.unit}    ${jl(de.delta7d)}`,`${u5e[V.id]}  ${de.numerator.toLocaleString()} / ${de.denominator.toLocaleString()}`]},[nt,i]),aa=h.useCallback(V=>{const de=H_[V.kpiKey];F(de),Vr(de)},[Vr]),ba=h.useMemo(()=>an.reduce((V,de)=>{const De=k0(de.slaRate,de.dataRate,mn,hn);return V[De]+=1,V},{good:0,dataRisk:0,slaRisk:0,dualRisk:0}),[an,mn,hn]),zs=h.useMemo(()=>{const V={good:[],dataRisk:[],slaRisk:[],dualRisk:[]};return an.forEach(de=>{const De=k0(de.slaRate,de.dataRate,mn,hn);V[De].push(de)}),Object.keys(V).forEach(de=>{V[de].sort((De,ft)=>ft.totalCases-De.totalCases)}),V},[an,mn,hn]),ws=h.useMemo(()=>f5e(ba),[ba]),mi=T??ws,Tn=h.useCallback(V=>zs[V].slice(0,8).map(de=>({regionName:de.regionName,slaRate:de.slaRate,dataRate:de.dataRate,totalCases:de.totalCases})),[zs]),Ma=h.useCallback((V,de)=>{const De=Tn(V);A({type:"matrix",quadrant:V,selectedRegionName:de??De[0]?.regionName??" ",items:De})},[Tn]),Bi=h.useCallback(V=>{const de=T===V?null:V;R(de),k(null),Ma(de??ws)},[T,ws,Ma]),Gi=h.useCallback(V=>{if(!V?.regionId)return;const de=k0(V.slaRate,V.dataRate,mn,hn);dt({code:V.regionId,name:V.regionName}),R(de),k(null),Ma(de,V.regionName)},[mn,hn,Ma]),Ut=h.useMemo(()=>T?zs[T]:an,[T,an,zs]),Co=h.useMemo(()=>{const V=Math.min(96,Math.max(4,(hn-70)/30*100)),de=Math.min(96,Math.max(4,(1-(mn-70)/30)*100));return{good:{left:(V+100)/2,top:de/2},dataRisk:{left:V/2,top:de/2},slaRisk:{left:(V+100)/2,top:(de+100)/2},dualRisk:{left:V/2,top:(de+100)/2}}},[mn,hn]);h.useEffect(()=>{!w.slaMatrix||an.length===0||_.type!=="matrix"&&Ma(mi)},[w.slaMatrix,an.length,_.type,mi,Ma]),h.useEffect(()=>{if(I===null)return;const V=De=>{De.target?.closest("[data-matrix-help-popover]")||k(null)},de=De=>{De.key==="Escape"&&k(null)};return document.addEventListener("mousedown",V),document.addEventListener("keydown",de),()=>{document.removeEventListener("mousedown",V),document.removeEventListener("keydown",de)}},[I]);const tt=h.useCallback(()=>{if(!Ut.length)return;const De=["period,kpi,scope,quadrant,quadrantFilter,region,slaRate,dataRate,slaCut,dataCut,totalCases",...Ut.map(tr=>{const Nr=k0(tr.slaRate,tr.dataRate,mn,hn);return[i,oe.shortLabel,q?.name??"",Mc[Nr].label,T?Mc[T].label:"",tr.regionName,tr.slaRate.toFixed(1),tr.dataRate.toFixed(1),`${mn.toFixed(1)}%`,`${hn.toFixed(1)}%`,String(tr.totalCases)].join(",")})].join(`
`),ft=new Blob([`\uFEFF${De}`],{type:"text/csv;charset=utf-8;"}),ot=URL.createObjectURL(ft),pt=document.createElement("a"),Kt=(q?.name??"").replace(/\s+/g,""),qt=T?Mc[T].guideLabel:"all";pt.href=ot,pt.download=`sla-data-matrix_${i}_${Kt}_${qt}.csv`,document.body.appendChild(pt),pt.click(),document.body.removeChild(pt),URL.revokeObjectURL(ot)},[Ut,i,oe.shortLabel,q?.name,mn,hn,T]),On=je==="loadingScopeChange"||je==="refreshing";return a.jsxs("div",{ref:M,className:"flex flex-col bg-gray-50 h-full min-h-0",children:[a.jsxs("div",{className:"bg-white border-b border-gray-200 px-4 py-2 shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"flex items-center gap-2 overflow-x-auto flex-1 min-w-0 pb-0.5",children:Oe.map(V=>{const de=Pr.find(ot=>ot.kpiId===V.id);if(!de)return a.jsx("div",{className:"min-w-[196px] h-[124px] rounded-xl border border-gray-200 bg-gray-50 animate-pulse"},V.id);const ft=nt[V.id]?.severity??"ok";return a.jsx(b5e,{kpi:de,def:V,isActive:X===V.id,onClick:()=>{F(V.id),Vr(V.id)},plainLine:I8[V.id],tooltipTitle:`${V.shortName}  ${R0[ft]}`,tooltipLines:js(V,de),tooltipColor:B_[G_[V.id]].primaryColor,severityLabel:R0[ft],severityClass:z_[ft]},V.id)})}),a.jsx("div",{className:"w-px h-10 bg-gray-200 shrink-0"}),a.jsxs("button",{onClick:()=>{const V=!te;ne(V),L({slaMatrix:V,stageDistribution:V}),y(de=>({...de,opsSummary:V,ageRisk:V,kpiTable:V}))},className:`px-3 py-1.5 text-[11px] font-medium rounded-md transition flex items-center gap-1.5 shrink-0 ${te?"bg-violet-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[a.jsx(cm,{className:"h-3.5 w-3.5"}),te?" ":""]}),a.jsx("div",{className:"w-px h-8 bg-gray-200 shrink-0"}),a.jsxs("div",{className:"flex items-center gap-1.5 shrink-0",children:[ee.length>1&&a.jsxs("button",{onClick:ye,className:"flex items-center gap-1 px-2 py-1 text-xs text-blue-600 bg-blue-50 rounded hover:bg-blue-100 transition-colors",children:[a.jsx(dm,{className:"h-3 w-3"}),a.jsx("span",{children:""})]}),a.jsx("div",{className:"flex items-center gap-1 text-xs text-gray-600",children:ee.map((V,de)=>a.jsxs(Y.Fragment,{children:[a.jsx("button",{onClick:()=>pe(de),className:`px-1.5 py-0.5 rounded transition-colors ${de===ee.length-1?"bg-blue-500 text-white font-medium":"hover:bg-gray-200 text-gray-600"}`,children:V.name}),de<ee.length-1&&a.jsx(di,{className:"h-3 w-3 text-gray-400"})]},`${V.level}-${V.code}`))}),ee.length>1&&a.jsx("button",{onClick:he,className:"p-1 text-gray-500 hover:text-blue-600 hover:bg-gray-100 rounded transition-colors",title:" ",children:a.jsx(oh,{className:"h-3.5 w-3.5"})})]}),a.jsx("div",{className:"w-px h-8 bg-gray-200 shrink-0"}),a.jsxs("div",{className:"flex items-center gap-1 text-gray-500 shrink-0",children:[a.jsx("button",{className:"p-1.5 hover:bg-gray-100 rounded",title:"",children:a.jsx(oC,{className:"h-4 w-4"})}),a.jsx("button",{className:"p-1.5 hover:bg-gray-100 rounded",title:" ",children:a.jsx(cm,{className:"h-4 w-4"})}),a.jsx("button",{className:"p-1.5 hover:bg-gray-100 rounded",title:"",children:a.jsx(Xp,{className:"h-4 w-4"})})]})]}),a.jsx("div",{className:"mt-2 border-t border-gray-100 pt-2",children:a.jsxs("div",{className:"flex flex-wrap items-center gap-1.5",children:[a.jsx("span",{className:"inline-flex items-center rounded-md bg-slate-100 px-2 py-1 text-[11px] font-semibold text-slate-700",children:"   "}),Re.length>0?Re.map(V=>{const de=H_[V.kpiKey],De=B_[V.kpiKey];return a.jsxs("button",{onClick:()=>aa(V),className:"inline-flex items-center gap-1 rounded-md border border-slate-200 bg-white px-2 py-1 text-[11px] text-slate-700 hover:bg-slate-50",children:[a.jsx("span",{className:`inline-flex rounded-full border px-1.5 py-0.5 font-semibold ${z_[V.severity]}`,children:R0[V.severity]}),a.jsx("span",{className:"font-semibold",children:De.shortLabel}),a.jsxs("span",{className:"text-slate-500",children:["(  ",jl(V.deltaPp),")"]}),X===de&&a.jsx("span",{className:"text-blue-600",children:""})]},V.kpiKey)}):a.jsx("span",{className:"text-[11px] text-slate-500",children:"     ."}),Ks&&a.jsx("span",{className:"inline-flex items-center rounded-md border border-amber-200 bg-amber-50 px-2 py-1 text-[11px] font-medium text-amber-700",children:"  "})]})})]}),te&&a.jsxs("div",{className:"bg-gradient-to-b from-slate-50 to-white border-b border-gray-200 px-4 py-3 shrink-0",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-bold text-gray-800",children:" "}),a.jsx("span",{className:"text-[11px] text-gray-400 bg-gray-100 px-2 py-0.5 rounded-full",children:i}),X&&a.jsxs("span",{className:"text-[11px] px-2 py-0.5 rounded-full font-medium",style:{backgroundColor:`${oe.primaryColor}15`,color:oe.primaryColor},children:[oe.shortLabel," "]})]}),a.jsx("button",{onClick:()=>ne(!1),className:"text-[11px] text-gray-500 hover:text-gray-700 px-2 py-1 rounded hover:bg-gray-100",children:" "})]}),a.jsxs("div",{className:"overflow-y-auto pr-1",style:{height:`${se}px`},children:[a.jsx(y5e,{stages:ir}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-3 mt-3",children:[a.jsx(v5e,{metrics:Cr}),a.jsx(N5e,{metrics:nn}),a.jsx(S5e,{rows:wr})]})]}),He!=="mobile"&&a.jsx("button",{type:"button",onMouseDown:Xt,onDoubleClick:hr,"aria-label":"   ",title:"  ,   ",className:`mt-2 flex w-full cursor-ns-resize items-center justify-center rounded-md border py-1 transition-colors ${fe?"border-blue-300 bg-blue-50/70":"border-gray-200 bg-white/70 hover:bg-gray-50"}`,children:a.jsx("span",{className:`h-1.5 w-16 rounded-full ${fe?"bg-blue-400":"bg-gray-300"}`})})]}),a.jsxs("div",{className:"relative flex-1 overflow-y-auto min-h-0",children:[a.jsx("div",{className:`transition-opacity duration-300 ${On?"opacity-60":"opacity-100"}`,children:a.jsxs("div",{className:`p-2 gap-2 ${He==="desktop"?"grid":"flex flex-col"}`,style:He==="desktop"?{gridTemplateColumns:"1.2fr 2.2fr 2.6fr",minHeight:"calc(100vh - 140px)",alignItems:"stretch"}:void 0,children:[a.jsxs("div",{className:`flex flex-col gap-2 ${He==="desktop"?"min-w-0":He==="tablet"?"hidden":"w-full shrink-0"}`,children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-1.5 text-center",children:[a.jsxs("span",{className:"text-[11px] text-blue-700 font-medium",children:[U_(_e)," "]}),q&&a.jsxs("span",{className:"ml-1.5 text-[11px] text-blue-600",children:["(",q.name,")"]})]}),a.jsxs("div",{className:"bg-slate-50/70 border border-slate-200 rounded-lg p-3 shadow-[inset_0_1px_0_rgba(255,255,255,0.7)]",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-semibold text-gray-700",children:" KPI "}),a.jsx("span",{className:"text-[11px] px-1.5 py-0.5 rounded font-medium",style:{backgroundColor:`${oe.primaryColor}15`,color:oe.primaryColor},children:oe.shortLabel})]}),ze?(()=>{const{national:V,worstRegions:de,bestRegions:De}=ze,ft=fi?.value??V.value,ot=fi?`${(Me?.name||fi.regionName).replace(/|||/g,"").trim()} `:_e==="nation"?" ":`${q?.name?.replace(/|||/g,"").trim()||""} `,pt=oe.higherIsWorse?V.deltaPP<=0?"text-green-600":"text-red-600":V.deltaPP>=0?"text-green-600":"text-red-600";return a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-[12px] text-gray-500",children:ot}),a.jsx("span",{className:"text-sm font-bold",style:{color:oe.primaryColor},children:a.jsx(xV,{value:ft,formatter:Kt=>oe.valueFormatter(Kt)})})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-[12px] text-gray-500",children:" "}),a.jsxs("span",{className:`text-sm font-bold ${pt}`,children:[V.deltaPP>0?"+":"",V.deltaPP,"pp"]})]}),V.target!=null&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-[12px] text-gray-500",children:""}),a.jsx("span",{className:"text-xs font-semibold text-gray-600",children:oe.valueFormatter(V.target)})]}),De[0]&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"text-[12px] text-gray-500",children:[" (",De[0].regionName.replace(/|||/g,"").trim(),")"]}),a.jsx("span",{className:"text-xs font-semibold text-green-600",children:oe.valueFormatter(De[0].value)})]}),de[0]&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"text-[12px] text-gray-500",children:[" (",de[0].regionName.replace(/|||/g,"").trim(),")"]}),a.jsx("span",{className:"text-xs font-semibold text-red-600",children:oe.valueFormatter(de[0].value)})]})]})})():a.jsx("div",{className:"h-24 flex items-center justify-center text-xs text-gray-400 animate-pulse",children:" "})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("span",{className:"text-sm font-semibold text-gray-700",children:[oe.legend.direction==="higherWorse"?"":""," Top 5"]}),a.jsx("span",{className:"text-[11px] px-1.5 py-0.5 rounded font-medium",style:{backgroundColor:`${oe.primaryColor}15`,color:oe.primaryColor},children:oe.shortLabel})]}),a.jsx("p",{className:"text-[10px] text-gray-500 mb-1",children:" :         "}),a.jsxs("div",{className:"space-y-0.5",children:[(()=>{if(!Cn.length)return null;const V=Cn.map(ot=>ot.gapAbs),de=Math.min(...V),ft=Math.max(...V)-de||1;return Cn.map((ot,pt)=>a.jsxs("div",{role:"button",tabIndex:0,onMouseEnter:()=>{yt({level:Bn(_e),regionCode:ot.code,regionName:ot.name})},onClick:()=>{ra(ot)},onKeyDown:Kt=>{(Kt.key==="Enter"||Kt.key===" ")&&(Kt.preventDefault(),ra(ot))},className:`w-full flex items-center gap-2 px-2 py-1.5 rounded transition-colors cursor-pointer select-none ${Me?.code===ot.code?"bg-blue-50 ring-1 ring-blue-200":"hover:bg-gray-50"} ${Ve?"animate-pulse":""}`,children:[a.jsx("span",{className:"w-5 h-5 rounded-full flex items-center justify-center text-[11px] font-bold text-white shrink-0",style:{backgroundColor:pt===0?oe.primaryColor:pt===1?`${oe.primaryColor}cc`:`${oe.primaryColor}88`},children:ot.rank}),a.jsx("div",{className:"min-w-[54px] shrink-0",children:a.jsx("span",{className:"text-[12px] text-gray-800 truncate block",children:ot.name.replace(/|||/g,"").trim()})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"h-[6px] bg-gray-100 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full rounded-full transition-all",style:{width:`${Math.max(10,(ot.gapAbs-de)/ft*100)}%`,backgroundColor:oe.primaryColor,opacity:.55+.35*(1-pt/5)}})}),a.jsxs("div",{className:"mt-0.5 text-[10px] text-gray-500 tabular-nums",children:[" ",jl(ot.targetGapPp),"   ",jl(ot.weeklyDeltaPp)]})]}),a.jsx("span",{className:"text-[12px] font-bold tabular-nums text-right min-w-[58px] shrink-0",style:{color:oe.primaryColor},children:oe.valueFormatter(ot.value)})]},ot.code))})(),ze&&Cn.length===0&&a.jsx("div",{className:"text-xs text-gray-400 text-center py-4",children:"   ."}),!ze&&a.jsx("div",{className:"text-xs text-gray-400 text-center py-4 animate-pulse",children:" "})]})]}),a.jsx(O0,{title:" ",isOpen:x.opsSummary,onToggle:()=>N("opsSummary"),summary:`${Q0.filter(V=>V.status==="deployed").length} `,children:a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("button",{onClick:()=>e?.("model-governance",{}),className:"w-full flex items-center gap-2 p-2 rounded-md hover:bg-blue-50 transition-colors text-left",children:[a.jsx(j1,{className:"h-4 w-4 text-blue-500 shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-[12px] font-medium text-gray-900",children:"  "}),a.jsxs("div",{className:"text-[11px] text-gray-500 truncate",children:[Q0.filter(V=>V.status==="deployed").length,"   ",Q0.filter(V=>V.status==="pending").length," "]})]}),a.jsx(Da,{className:"h-3 w-3 text-gray-400 shrink-0"})]}),a.jsxs("button",{onClick:()=>e?.("compliance-audit",{}),className:"w-full flex items-center gap-2 p-2 rounded-md hover:bg-orange-50 transition-colors text-left",children:[a.jsx(Qo,{className:"h-4 w-4 text-orange-500 shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-[12px] font-medium text-gray-900",children:"  "}),a.jsx("div",{className:"text-[11px] text-gray-500",children:" 0   4/4 "})]}),a.jsx(Da,{className:"h-3 w-3 text-gray-400 shrink-0"})]}),a.jsxs("button",{onClick:()=>e?.("quality-monitoring",{}),className:"w-full flex items-center gap-2 p-2 rounded-md hover:bg-purple-50 transition-colors text-left",children:[a.jsx(id,{className:"h-4 w-4 text-purple-500 shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-[12px] font-medium text-gray-900",children:" &  "}),a.jsxs("div",{className:"text-[11px] text-gray-500",children:[" ",Ry.filter(V=>V.severity!=="info").length,"",Ry.filter(V=>V.severity==="critical").length>0&&a.jsxs("span",{className:"ml-1 text-red-600 font-medium",children:["  ",Ry.filter(V=>V.severity==="critical").length,""]})]})]}),a.jsx(Da,{className:"h-3 w-3 text-gray-400 shrink-0"})]})]})}),a.jsx(O0,{title:" / ",isOpen:x.ageRisk,onToggle:()=>N("ageRisk"),summary:"5  2",children:a.jsx("div",{style:{height:"190px"},children:a.jsx(Ta,{width:"100%",height:"100%",children:a.jsxs(mf,{data:Es.map(V=>{const de=V.normal+V.caution+V.highRisk+V.slaViolation;return{age:V.age,slaViolation:de>0?Number((V.slaViolation/de*100).toFixed(1)):0,recontactNeed:de>0?Number(((V.highRisk+V.caution)/de*100).toFixed(1)):0}}),margin:{top:8,right:6,left:6,bottom:4},children:[a.jsx(ys,{strokeDasharray:"3 3",vertical:!1,stroke:"#e5e7eb"}),a.jsx(da,{dataKey:"age",tick:{fontSize:14,fill:"#4b5563"},tickLine:!1}),a.jsx(Jn,{tick:{fontSize:13,fill:"#6b7280"},tickLine:!1,axisLine:!1,width:44,tickFormatter:V=>`${V}%`}),a.jsx(ln,{content:({active:V,payload:de,label:De})=>!V||!de?.length?null:a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-2 shadow-lg text-xs",children:[a.jsxs("div",{className:"font-semibold text-gray-800 mb-1",children:[De,""]}),de.map((ft,ot)=>a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:ft.color}}),a.jsxs("span",{children:[ft.dataKey==="slaViolation"?"SLA ":" ",": ",Number(ft.value).toFixed(1),"%"]})]},ot))]})}),a.jsx(Kl,{formatter:V=>V==="slaViolation"?"SLA ":" ",wrapperStyle:{fontSize:"13px"}}),a.jsx(ns,{dataKey:"slaViolation",fill:"#ef4444",radius:[3,3,0,0],isAnimationActive:!0,animationDuration:460,animationEasing:"ease-out"}),a.jsx(ns,{dataKey:"recontactNeed",fill:"#f59e0b",radius:[3,3,0,0],isAnimationActive:!0,animationDuration:460,animationEasing:"ease-out"})]})})})}),a.jsx(O0,{title:"KPI  ",isOpen:x.kpiTable,onToggle:()=>N("kpiTable"),summary:`${mr.length} `,children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-[12px]",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[a.jsx("th",{className:"px-1.5 py-1 text-left font-medium text-gray-600",children:"KPI"}),a.jsx("th",{className:"px-1.5 py-1 text-right font-medium text-gray-600",children:""}),a.jsx("th",{className:"px-1.5 py-1 text-right font-medium text-gray-600",children:""}),a.jsx("th",{className:"px-1.5 py-1 text-right font-medium text-gray-600",children:""})]})}),a.jsx("tbody",{children:mr.map(V=>{const de=br[V.id];return de?a.jsxs("tr",{className:"border-b border-gray-100 hover:bg-blue-50/30",children:[a.jsx("td",{className:"px-1.5 py-1 truncate max-w-[80px]",children:V.name}),a.jsxs("td",{className:"px-1.5 py-1 text-right whitespace-nowrap",children:[de.current,de.unit]}),a.jsxs("td",{className:"px-1.5 py-1 text-right text-red-600 whitespace-nowrap",children:[(de.current*.95).toFixed(1),de.unit]}),a.jsxs("td",{className:"px-1.5 py-1 text-right text-blue-600 whitespace-nowrap",children:[(de.current*1.03).toFixed(1),de.unit]})]},V.id):null})})]})})})]}),a.jsx("div",{className:`${He==="desktop"?"min-w-0 flex flex-col":"w-full shrink-0"}`,children:a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden flex flex-col flex-1",children:[a.jsxs("div",{className:"px-3 py-2 border-b border-gray-200 bg-white rounded-t-lg space-y-1.5",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[_e!=="nation"&&a.jsxs("button",{onClick:ye,className:"flex items-center gap-0.5 px-2 py-1 text-xs text-blue-600 bg-blue-50 rounded hover:bg-blue-100 transition-colors font-medium shrink-0",children:[a.jsx(dm,{className:"h-3.5 w-3.5"}),""]}),a.jsxs("span",{className:"text-[12px] text-gray-600",children:[Ht,"  2026  ",a.jsx("span",{className:"font-semibold",style:{color:oe.primaryColor},children:oe.shortLabel}),"  ",U_(_e),q&&a.jsxs("span",{className:"text-gray-500",children:[" (",q.name,")"]})]})]}),a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsxs("div",{className:"flex rounded-md border border-gray-200 overflow-hidden",children:[a.jsx("button",{onClick:()=>d("geomap"),className:`px-2.5 py-1 text-[11px] font-medium transition ${l==="geomap"?"bg-blue-600 text-white":"bg-white text-gray-500 hover:bg-gray-100"}`,children:""}),a.jsx("button",{onClick:()=>d("heatmap"),className:`px-2.5 py-1 text-[11px] font-medium transition border-l border-gray-200 ${l==="heatmap"?"bg-blue-600 text-white":"bg-white text-gray-500 hover:bg-gray-100"}`,children:""})]}),a.jsx("div",{className:"flex items-center gap-0.5",children:["weekly","monthly","quarterly","yearly_cum"].map(V=>a.jsx("button",{onClick:()=>n(V),className:`rounded-md px-2.5 py-1 text-[11px] font-medium transition ${r===V?"bg-blue-600 text-white":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,children:V==="weekly"?"":V==="monthly"?"":V==="quarterly"?"":"()"},V))}),a.jsx("button",{className:"h-6 w-6 flex items-center justify-center hover:bg-gray-100 rounded transition-colors ml-auto shrink-0",children:a.jsx(Xp,{className:"h-3 w-3 text-gray-500"})})]})]}),a.jsx("div",{className:"p-2 min-h-0",children:l==="geomap"?a.jsx(G3,{indicatorId:t,periodType:r,year:2026,scope:{mode:"national"},variant:"portal",mapHeight:670,hideBreadcrumb:!0,externalLevel:_e==="nation"?"ctprvn":_e==="sido"?"sig":"emd",externalSelectedCode:Me?.code??q?.code,onRegionSelect:fa,onGoBack:ye,externalColorScheme:ge,hideLegendPanel:!0,onSubRegionsChange:re}):a.jsxs("div",{className:"relative w-full",style:{height:"clamp(320px, 44vh, 480px)"},children:[a.jsx(Ta,{width:"100%",height:"100%",children:a.jsx(Xv,{data:Tr,dataKey:"size",stroke:"#fff",isAnimationActive:!0,animationDuration:520,animationEasing:"ease-out",content:Va})}),$&&(()=>{const de=[...Tr].sort((ot,pt)=>pt.size-ot.size).findIndex(ot=>ot.name===$.name)+1,De=Tr.reduce((ot,pt)=>ot+pt.size,0),ft=De>0?($.size/De*100).toFixed(1):"0";return a.jsxs("div",{className:"absolute z-50 pointer-events-none bg-white border border-gray-200 rounded-lg p-2.5 shadow-xl text-xs min-w-[170px]",style:{left:Math.min($.x+12,200),top:Math.max($.y-60,0)},children:[a.jsxs("div",{className:"flex items-center justify-between mb-1 pb-1 border-b border-gray-100",children:[a.jsx("span",{className:"font-semibold text-gray-800",children:$.name}),a.jsx("span",{className:"text-[11px] bg-orange-50 text-orange-600 px-1.5 py-0.5 rounded font-medium",children:r==="weekly"?"":r==="monthly"?"":r==="quarterly"?"":"()"})]}),a.jsxs("div",{className:"flex justify-between py-0.5",children:[a.jsx("span",{className:"text-gray-500",children:t}),a.jsx("span",{className:"font-bold text-blue-600",children:$.size.toLocaleString()})]}),a.jsxs("div",{className:"flex justify-between py-0.5",children:[a.jsx("span",{className:"text-gray-500",children:""}),a.jsxs("span",{className:"font-bold text-gray-700",children:[de,"/",Tr.length]})]}),a.jsxs("div",{className:"flex justify-between py-0.5",children:[a.jsx("span",{className:"text-gray-500",children:""}),a.jsxs("span",{className:"font-bold text-gray-700",children:[ft,"%"]})]})]})})()]})}),a.jsxs("div",{className:"mx-2 mb-2 px-3 py-2 rounded-lg bg-gradient-to-r from-gray-50 to-gray-100/80 border border-gray-200/60 shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full",style:{backgroundColor:oe.primaryColor}}),a.jsx("span",{className:"text-[12px] font-bold text-gray-600 tracking-wide",children:oe.shortLabel}),a.jsx("span",{className:"text-[11px] text-gray-400 ml-auto",children:oe.unit})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-[12px] font-semibold text-gray-500 tabular-nums min-w-[36px] text-right",children:oe.legend.format(oe.legend.ticks[0])}),a.jsx("div",{className:"flex-1 h-3 rounded-md overflow-hidden flex shadow-inner",children:oe.palette.map((V,de)=>a.jsx("div",{className:"flex-1 transition-colors",style:{backgroundColor:V}},de))}),a.jsx("span",{className:"text-[12px] font-semibold text-gray-500 tabular-nums min-w-[36px]",children:oe.legend.format(oe.legend.ticks[oe.legend.ticks.length-1])})]}),a.jsx("div",{className:"flex items-center justify-center gap-1 mt-1",children:a.jsx("span",{className:"text-[10px] text-gray-400",children:oe.legend.direction==="higherBetter"?"  ()   () ":"  ()   () "})})]})]})}),a.jsxs("div",{className:`flex flex-col gap-2 ${He==="desktop"?"min-w-0":He==="tablet"?"hidden":"w-full shrink-0"}`,children:[a.jsx("div",{className:"bg-white border border-gray-200 rounded-lg px-3 py-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"w-2 h-2 rounded-full shrink-0",style:{backgroundColor:oe.primaryColor}}),a.jsx("span",{className:"text-[12px] font-semibold text-gray-700 shrink-0",children:oe.shortLabel}),a.jsx("p",{className:"text-[11px] text-gray-500 truncate flex-1",title:oe.analysisSummary,children:oe.analysisSummary})]})}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg px-3 py-2.5",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[a.jsx("span",{className:"text-[12px] font-semibold text-gray-700",children:" "}),_.type==="kpi"&&a.jsx("span",{className:`inline-flex items-center rounded-full border px-1.5 py-0.5 text-[10px] font-semibold ${z_[_.severity]}`,children:R0[_.severity]}),_.type==="matrix"&&a.jsx("span",{className:`inline-flex items-center rounded-full border px-1.5 py-0.5 text-[10px] font-semibold ${Mc[_.quadrant].badgeClass}`,children:Mc[_.quadrant].label})]}),_.type==="none"&&a.jsx("p",{className:"text-[11px] text-gray-500",children:"Top5,  ,      ."}),_.type==="kpi"&&a.jsxs("div",{className:"space-y-1.5 text-[11px] text-gray-600",children:[a.jsxs("p",{className:"font-semibold text-gray-800",children:[le.shortName,"  "]}),a.jsxs("p",{children:["   ",jl(_.deltaPp),"    ",jl(_.trendWorseningPp)]}),a.jsxs("p",{children:[" : ",M8[_.kpiId]]}),_.partialPossible&&a.jsx("span",{className:"inline-flex items-center rounded-md border border-amber-200 bg-amber-50 px-1.5 py-0.5 text-[10px] font-medium text-amber-700",children:"  "})]}),_.type==="top5"&&a.jsxs("div",{className:"space-y-1.5 text-[11px]",children:[a.jsxs("p",{className:"font-semibold text-gray-800",children:[_.row.name,"  ",oe.valueFormatter(_.row.value)]}),a.jsxs("p",{className:"text-gray-600",children:["  ",jl(_.row.targetGapPp),"    ",jl(_.row.weeklyDeltaPp)]}),a.jsxs("p",{className:"text-gray-600",children:[": ",_.causeName]}),a.jsx("p",{className:"text-gray-600",children:_.actionText}),a.jsx("div",{className:"space-y-1 pt-1 border-t border-gray-100",children:_.owners.slice(0,3).map(V=>a.jsxs("div",{className:"flex items-center justify-between text-[10px]",children:[a.jsx("span",{className:"truncate text-gray-600",children:V.orgName}),a.jsxs("span",{className:"font-semibold text-gray-800",children:[V.count,""]})]},`${V.orgName}-${V.lastOccurredAt}`))})]}),_.type==="cause"&&a.jsxs("div",{className:"space-y-1.5 text-[11px]",children:[a.jsxs("p",{className:"font-semibold text-gray-800",children:[": ",_.causeName]}),a.jsx("p",{className:"text-gray-600",children:_.actionText}),a.jsx("div",{className:"space-y-1 pt-1 border-t border-gray-100",children:_.owners.slice(0,4).map(V=>a.jsxs("div",{className:"rounded border border-gray-100 bg-gray-50 px-2 py-1",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-[10px] font-medium text-gray-700",children:V.orgName}),a.jsxs("span",{className:"text-[10px] font-semibold text-gray-800",children:[V.count,""]})]}),a.jsxs("div",{className:"text-[10px] text-gray-500",children:[V.regionName,"  ",V.lastOccurredAt]})]},`${V.orgName}-${V.lastOccurredAt}`))}),a.jsx("button",{onClick:()=>e?.("compliance-audit",{region:Me?.code??q?.code??"KR",kpi:X}),className:"text-[10px] text-blue-600 hover:text-blue-700 font-semibold",children:" /   "})]}),_.type==="matrix"&&a.jsxs("div",{className:"space-y-1.5 text-[11px] text-gray-600",children:[a.jsxs("p",{className:"font-semibold text-gray-800",children:[_.selectedRegionName,"   ",Mc[_.quadrant].description]}),a.jsx("div",{className:"space-y-1 pt-1 border-t border-gray-100 max-h-[120px] overflow-y-auto",children:_.items.map(V=>a.jsxs("div",{className:"flex items-center justify-between text-[10px]",children:[a.jsx("span",{className:"truncate",children:V.regionName}),a.jsxs("span",{className:"tabular-nums text-gray-800",children:["SLA ",V.slaRate.toFixed(1),"%   ",V.dataRate.toFixed(1),"%"]})]},`${V.regionName}-${V.slaRate}`))})]}),_.type==="policy"&&a.jsxs("div",{className:"space-y-1.5 text-[11px] text-gray-600",children:[a.jsx("p",{className:"font-semibold text-gray-800",children:" /  Top 3"}),a.jsx("div",{className:"space-y-1 max-h-[132px] overflow-y-auto",children:_.items.map(V=>a.jsxs("div",{className:"rounded border border-gray-100 bg-gray-50 px-2 py-1",children:[a.jsx("div",{className:"text-[10px] font-semibold text-gray-800",children:V.title}),a.jsxs("div",{className:"text-[10px] text-gray-500",children:[V.effectiveAt,"    ",V.impactedRegions,""]}),a.jsx("div",{className:"text-[10px] text-gray-600 mt-0.5",children:V.impactedKpis.map(de=>`${de.kpiKey} ${jl(de.deltaPp)}`).join("  ")}),V.notes&&a.jsx("div",{className:"text-[10px] text-gray-500 mt-0.5",children:V.notes})]},V.policyId))})]})]}),ze&&a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs(P8,{title:" ",height:300,badge:a.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded font-medium",style:{backgroundColor:`${oe.primaryColor}15`,color:oe.primaryColor},children:ze.breakdownType==="donut"?"":""}),children:[ze.breakdownType==="donut"?a.jsxs("div",{className:"relative",style:{height:"160px"},children:[a.jsx(Ta,{width:"100%",height:"100%",children:a.jsxs(vK,{children:[a.jsx(tc,{data:ze.breakdown,cx:"50%",cy:"50%",innerRadius:35,outerRadius:60,dataKey:"value",startAngle:90,endAngle:-270,paddingAngle:2,strokeWidth:0,label:i5e,labelLine:!1,isAnimationActive:!0,animationDuration:460,animationEasing:"ease-out",children:ze.breakdown.map((V,de)=>a.jsx(yo,{fill:V.color||oe.palette[de%oe.palette.length]},de))}),a.jsx(ln,{formatter:V=>[V.toLocaleString(),""],contentStyle:{fontSize:"11px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.12)"}})]})}),a.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center pointer-events-none",children:[a.jsx("div",{className:"text-[10px] text-gray-500",children:""}),a.jsx("div",{className:"text-[12px] font-bold text-gray-800",children:ze.breakdown.reduce((V,de)=>V+de.value,0).toLocaleString()})]})]}):a.jsx("div",{style:{height:"160px"},children:a.jsx(Ta,{width:"100%",height:"100%",children:a.jsxs(mf,{data:ze.breakdown,margin:{top:4,right:8,left:6,bottom:4},children:[a.jsx(ys,{strokeDasharray:"3 3",vertical:!1,stroke:"#e5e7eb"}),a.jsx(da,{dataKey:"name",tick:{fontSize:10,fill:"#4b5563"},tickLine:!1}),a.jsx(Jn,{tick:{fontSize:10,fill:"#6b7280"},tickLine:!1,axisLine:!1,width:40}),a.jsx(ln,{contentStyle:{fontSize:"11px",borderRadius:"8px"}}),a.jsx(ns,{dataKey:"value",radius:[3,3,0,0],isAnimationActive:!0,animationDuration:460,animationEasing:"ease-out",children:ze.breakdown.map((V,de)=>a.jsx(yo,{fill:V.color||oe.palette[de%oe.palette.length]},de))})]})})}),a.jsxs("div",{className:"space-y-0.5 mt-1 pt-1 border-t border-gray-100",children:[ze.breakdown.slice(0,v?ze.breakdown.length:3).map((V,de)=>a.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-600",children:[a.jsx("span",{className:"w-2 h-2 rounded-sm shrink-0",style:{backgroundColor:V.color||oe.palette[de%oe.palette.length]}}),a.jsx("span",{className:"truncate",children:V.name}),a.jsx("span",{className:"font-semibold text-gray-800 ml-auto tabular-nums",children:V.value.toLocaleString()})]},de)),ze.breakdown.length>3&&a.jsx("button",{onClick:()=>S(!v),title:v?"  ":` : ${ze.breakdown.slice(3,6).map(V=>V.name).join(", ")}`,className:"text-[10px] text-blue-500 hover:text-blue-700 w-full text-center pt-0.5",children:v?"":`+${ze.breakdown.length-3} `})]})]}),a.jsxs(P8,{title:" ",height:300,children:[a.jsx("div",{style:{height:"180px"},children:a.jsx(Ta,{width:"100%",height:"100%",children:a.jsxs(mf,{data:xt.slice(0,E?xt.length:3),layout:"vertical",margin:{top:4,right:24,left:4,bottom:4},children:[a.jsx(ys,{strokeDasharray:"3 3",horizontal:!1,stroke:"#e5e7eb"}),a.jsx(da,{type:"number",tick:{fontSize:10,fill:"#6b7280"}}),a.jsx(Jn,{type:"category",dataKey:"name",tick:{fontSize:10,fill:"#4b5563"},width:60}),a.jsx(ln,{contentStyle:{fontSize:"11px",borderRadius:"8px"}}),a.jsx(ns,{dataKey:"value",radius:[0,3,3,0],fill:oe.primaryColor,isAnimationActive:!0,animationDuration:460,animationEasing:"ease-out",onClick:V=>{const De=(V?.payload??V)?.name;De&&A({type:"cause",causeName:De,owners:nr(De),actionText:Lt(De)})},label:{position:"right",fontSize:10,fill:"#374151",formatter:V=>V.toLocaleString()},children:xt.slice(0,E?xt.length:3).map((V,de)=>a.jsx(yo,{fill:oe.palette[Math.min(de+1,oe.palette.length-2)]},de))})]})})}),xt.length>3&&a.jsx("button",{onClick:()=>C(!E),title:E?"  ":` : ${xt.slice(3,6).map(V=>V.name).join(", ")}`,className:"text-[10px] text-blue-500 hover:text-blue-700 w-full text-center pt-1",children:E?"":`+${xt.length-3} `})]})]}),ze&&a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:oe.primaryColor}}),a.jsxs("span",{className:"text-[12px] font-semibold text-gray-700",children:[oe.shortLabel," ",Me?.name?` (${Me.name})`:""]})]}),a.jsx("span",{className:"text-[10px] text-gray-400",children:Ht})]}),a.jsx("div",{style:{height:"160px"},children:a.jsx(Ta,{width:"100%",height:"100%",children:a.jsxs(k3,{data:Mn,margin:{top:6,right:10,left:10,bottom:4},children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"kpiTrendGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:oe.primaryColor,stopOpacity:.25}),a.jsx("stop",{offset:"100%",stopColor:oe.primaryColor,stopOpacity:.03})]})}),a.jsx(ys,{strokeDasharray:"3 3",vertical:!1,stroke:"#f3f4f6"}),a.jsx(da,{dataKey:"period",tick:{fontSize:10,fill:"#6b7280"},tickLine:!1}),a.jsx(Jn,{tick:{fontSize:10,fill:"#9ca3af"},tickLine:!1,axisLine:!1,tickMargin:4,width:oe.unit==="%"?58:46,tickFormatter:V=>oe.valueFormatter(V)}),a.jsx(ln,{contentStyle:{fontSize:"11px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.12)"},formatter:V=>[oe.valueFormatter(V),oe.shortLabel]}),oe.target!=null&&a.jsx(Wl,{y:oe.target,stroke:"#ef4444",strokeDasharray:"4 2",strokeWidth:1.5,label:{value:` ${oe.valueFormatter(oe.target)}`,fontSize:10,fill:"#ef4444",position:"right"}}),a.jsx(rc,{type:"monotone",dataKey:"value",fill:"url(#kpiTrendGrad)",stroke:"none",isAnimationActive:!0,animationDuration:500,animationEasing:"ease-out"}),a.jsx(qa,{type:"monotone",dataKey:"value",stroke:oe.primaryColor,strokeWidth:2,isAnimationActive:!0,animationDuration:500,animationEasing:"ease-out",dot:!1,activeDot:{r:4,fill:oe.primaryColor,stroke:"#fff",strokeWidth:2}})]})})})]}),a.jsxs(O0,{title:"SLA    ",isOpen:w.slaMatrix,onToggle:()=>H("slaMatrix"),summary:` ${an.filter(de=>de.slaRate<mn&&de.dataRate<hn).length} `,children:[a.jsxs("div",{className:"flex items-center justify-between gap-2 text-[10px] text-gray-500 mb-1",children:[a.jsx("span",{className:"text-[11px] text-gray-500",children:" (SLA)      "}),a.jsxs("button",{onClick:tt,className:"inline-flex items-center gap-1 rounded border border-gray-200 bg-white px-2 py-0.5 text-[10px] font-medium text-gray-600 hover:bg-gray-50",children:[a.jsx(Xp,{className:"h-3 w-3"}),""]})]}),a.jsxs("div",{className:"mb-1 flex items-center justify-between gap-2",children:[a.jsxs("button",{type:"button",onClick:()=>Bi(ws),className:"inline-flex items-center gap-1 rounded-md border border-blue-200 bg-blue-50/70 px-2 py-0.5 text-[10px] font-semibold text-blue-700 hover:bg-blue-100/80",children:["   :",a.jsx("span",{children:Mc[ws].guideLabel}),a.jsxs("span",{children:["(",ba[ws]," )"]})]}),a.jsxs("div",{className:"flex items-center justify-end gap-2 text-[10px] text-gray-500",children:[a.jsxs("span",{className:"flex items-center gap-0.5",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"}),""]}),a.jsxs("span",{className:"flex items-center gap-0.5",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-amber-400"}),""]}),a.jsxs("span",{className:"flex items-center gap-0.5",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"}),""]})]})]}),a.jsxs("div",{className:"mb-1 text-[10px] text-gray-500",children:[" : SLA ",mn.toFixed(1),"% /  ",hn.toFixed(1),"%"]}),an.length>0?a.jsxs("div",{className:"relative",style:{height:"220px"},children:[a.jsx(Ta,{width:"100%",height:"100%",children:a.jsxs(Bve,{margin:{top:8,right:12,left:8,bottom:8},children:[a.jsx(ys,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),a.jsx(da,{type:"number",dataKey:"dataRate",name:" ",unit:"%",domain:[70,100],tick:{fontSize:11},label:{value:" (%)",position:"insideBottom",offset:-2,fontSize:11,fill:"#6b7280"}}),a.jsx(Jn,{type:"number",dataKey:"slaRate",name:"SLA ",unit:"%",domain:[70,100],tick:{fontSize:11},width:46,label:{value:"SLA(%)",angle:-90,position:"insideLeft",offset:0,fontSize:11,fill:"#6b7280"}}),a.jsx(Sh,{type:"number",dataKey:"totalCases",range:[30,250],name:" "}),a.jsx(Wl,{x:hn,stroke:"#9ca3af",strokeDasharray:"4 2"}),a.jsx(Wl,{y:mn,stroke:"#9ca3af",strokeDasharray:"4 2"}),a.jsx(ln,{content:({active:V,payload:de})=>{if(!V||!de?.[0])return null;const De=de[0].payload;return a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-2 shadow-lg text-xs",children:[a.jsx("div",{className:"font-semibold text-gray-800 mb-1",children:De.regionName}),a.jsxs("div",{children:["SLA : ",a.jsxs("span",{className:"font-medium",children:[De.slaRate,"%"]})]}),a.jsxs("div",{children:[" : ",a.jsxs("span",{className:"font-medium",children:[De.dataRate,"%"]})]}),a.jsxs("div",{children:[": ",a.jsxs("span",{className:"font-medium",children:[De.totalCases.toLocaleString(),""]})]})]})}}),a.jsx(Eh,{data:an,isAnimationActive:!0,animationDuration:480,animationEasing:"ease-out",onClick:Gi,children:an.map((V,de)=>{const De=k0(V.slaRate,V.dataRate,mn,hn),ft=De==="good"?"#22c55e":De==="dualRisk"?"#ef4444":"#f59e0b",ot=T!==null&&T!==De;return a.jsx(yo,{fill:ft,fillOpacity:ot?.2:.95,stroke:ot?"#d1d5db":ft,strokeWidth:ot?1:1.5,style:{cursor:"pointer"}},de)})})]})}),a.jsx("div",{className:"pointer-events-none absolute inset-0",children:["good","dataRisk","slaRisk","dualRisk"].map(V=>{const de=Mc[V],De=Co[V],ft=mi===V;return a.jsxs("button",{type:"button",onClick:()=>Bi(V),className:`pointer-events-auto absolute -translate-x-1/2 -translate-y-1/2 rounded-md border px-1.5 py-0.5 text-[10px] font-semibold transition-colors ${ft?"border-blue-200 bg-white/95 text-blue-700 shadow-sm":"border-gray-200 bg-white/70 text-gray-500 hover:bg-white/90"}`,style:{left:`${De.left}%`,top:`${De.top}%`},children:[de.guideLabel," (",ba[V],")"]},`overlay-${V}`)})})]}):a.jsx("div",{className:"h-[160px] flex items-center justify-center text-xs text-gray-400",children:" "}),a.jsx("div",{className:"mt-2 grid grid-cols-2 gap-1.5",children:["good","dataRisk","slaRisk","dualRisk"].map(V=>{const de=Mc[V],De=T===V,ft=T===null&&ws===V;return a.jsxs("div",{role:"button",tabIndex:0,"aria-pressed":De,title:de.description,onClick:()=>Bi(V),onKeyDown:ot=>{(ot.key==="Enter"||ot.key===" ")&&(ot.preventDefault(),Bi(V))},className:`rounded-md border px-2 py-1 text-left transition-colors ${De?"ring-1 ring-blue-300 border-blue-200 bg-blue-50/70":ft?"border-indigo-200 bg-indigo-50/60":"border-gray-200 bg-gray-50/70 hover:bg-gray-100"}`,children:[a.jsxs("div",{className:"flex items-start justify-between gap-1",children:[a.jsx("span",{className:`inline-flex items-center rounded-full border px-1.5 py-0.5 text-[10px] font-semibold ${de.badgeClass}`,children:de.guideLabel}),a.jsxs("div",{className:"relative","data-matrix-help-popover":!0,children:[a.jsx("button",{type:"button","aria-label":`${de.guideLabel}  `,className:"inline-flex items-center justify-center rounded text-gray-400 hover:text-gray-600",onClick:ot=>{ot.stopPropagation(),k(pt=>pt===V?null:V)},children:a.jsx(oC,{className:"h-3 w-3"})}),I===V&&a.jsx("div",{className:"absolute right-0 top-4 z-20 min-w-[130px] rounded border border-gray-200 bg-white px-2 py-1 text-[10px] text-gray-600 shadow-lg",children:de.description})]})]}),a.jsxs("p",{className:"mt-1 text-[11px] font-semibold text-gray-700",children:["  ",ba[V],""]})]},V)})})]}),a.jsx(O0,{title:"   ()",isOpen:w.stageDistribution,onToggle:()=>H("stageDistribution"),summary:`${Fr.length} `,children:Fr.length>0?a.jsx("div",{style:{height:"240px"},children:a.jsx(Ta,{width:"100%",height:"100%",children:a.jsxs(mf,{data:Fr,margin:{top:5,right:8,left:8,bottom:22},children:[a.jsx(ys,{strokeDasharray:"3 3",vertical:!1,stroke:"#e5e7eb"}),a.jsx(da,{dataKey:"regionName",tick:{fontSize:11,fill:"#4b5563"},interval:0,angle:-35,textAnchor:"end"}),a.jsx(Jn,{tick:{fontSize:11,fill:"#6b7280"},width:46,tickFormatter:V=>V>=1e3?`${(V/1e3).toFixed(0)}K`:String(V)}),a.jsx(ln,{content:({active:V,payload:de,label:De})=>{if(!V||!de?.length)return null;const ft=de.reduce((ot,pt)=>ot+(Number(pt.value)||0),0);return a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-2 shadow-lg text-xs",children:[a.jsx("div",{className:"font-semibold text-gray-800 mb-1",children:De}),de.map((ot,pt)=>a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:ot.color}}),a.jsxs("span",{children:[un[ot.dataKey]||ot.dataKey,": ",Number(ot.value).toLocaleString()," (",ft>0?(Number(ot.value)/ft*100).toFixed(1):0,"%)"]})]},pt)),a.jsxs("div",{className:"mt-1 pt-1 border-t border-gray-100 font-medium",children:[": ",ft.toLocaleString(),""]})]})}}),a.jsx(Kl,{formatter:V=>un[V]||V,wrapperStyle:{fontSize:"11px"}}),pi.map(V=>a.jsx(ns,{dataKey:V,stackId:"stage",fill:ic[V],isAnimationActive:!0,animationDuration:460,animationEasing:"ease-out"},V))]})})}):a.jsx("div",{className:"h-[180px] flex items-center justify-center text-xs text-gray-400",children:" "})})]}),He==="tablet"&&a.jsxs("div",{className:"flex gap-2 flex-1 min-h-0",children:[a.jsxs("div",{className:"flex-1 flex flex-col gap-2 overflow-y-auto",children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-2 text-center",children:[a.jsxs("span",{className:"text-xs text-blue-700 font-medium",children:[U_(_e)," "]}),q&&a.jsxs("span",{className:"ml-2 text-xs text-blue-600",children:["(",q.name,")"]})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3 flex-1",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsxs("div",{className:"text-xs text-gray-500",children:[Ht,"  "]}),a.jsx("div",{className:"text-[11px] text-blue-500 bg-blue-50 px-1.5 py-0.5 rounded",children:Ht})]}),a.jsxs("div",{className:"text-2xl font-bold text-blue-600 mb-2",children:[ua.toLocaleString()," ",a.jsx("span",{className:"text-sm font-normal text-gray-500",children:""})]}),a.jsxs("div",{className:"text-[12px] text-gray-500 mb-2",children:[Dr.label," ()"]}),a.jsx("div",{className:"h-[140px]",children:a.jsx(Ta,{width:"100%",height:"100%",children:a.jsx(Xv,{data:Tr,dataKey:"size",aspectRatio:4/3,stroke:"#fff",isAnimationActive:!0,animationDuration:520,animationEasing:"ease-out",content:a.jsx(Va,{})})})})]})]}),a.jsx("div",{className:"flex-1 flex flex-col gap-2 overflow-y-auto",children:a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3 flex-1",children:[a.jsx("div",{className:"text-xs font-medium text-gray-700 mb-2",children:"KPI  "}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:mr.slice(0,4).map((V,de)=>a.jsx(l5e,{kpiDef:V,data:br[V.id],colorIndex:de,analyticsPeriod:o},V.id))})]})})]})]})}),a.jsx(e5e,{visible:On,stage:je==="refreshing"?"refreshing":"scopeChange"})]})]})}const E5e={"national-dashboard":"","model-governance":"/  ","quality-monitoring":"& ","compliance-audit":"   "},j5e=["SIGNAL_QUALITY","POLICY_IMPACT","BOTTLENECK_RISK","DATA_READINESS","GOVERNANCE_SAFETY"],vV={SIGNAL_QUALITY:{id:"SIGNAL_QUALITY",category:"",scope:"",definition:{what:"             .",why:"      ,      ."},calculation:{numeratorLabel:"   (validSignals)",denominatorLabel:"    (totalSignals)",includeRules:["Stage0    +      ","         ","       "],excludeRules:["  ,  ,    ","/   ","       "]},interpretation:{high:"   , Stage0/Stage1   .",low:"             ."},linkedModelStages:["Reach","Stage0","Stage1"],usageScreens:[{page:"national-dashboard",label:"",reason:" KPI    "},{page:"quality-monitoring",label:"& ",reason:"  Driver "},{page:"compliance-audit",label:"   ",reason:" /   "}],linkedTabs:[{page:"model-governance",label:"",reason:" /    "},{page:"quality-monitoring",label:"",reason:"  "},{page:"compliance-audit",label:"",reason:"      "}],changeHistory:[{version:"v2.4",changedAt:"2026-02-03",changedBy:" ",definitionChange:"        ",formulaChange:"          ",impactedScreens:["national-dashboard","quality-monitoring","compliance-audit"]},{version:"v2.3",changedAt:"2026-01-20",changedBy:" ",definitionChange:"       1  ",formulaChange:"   citizenId+eventDate  ",impactedScreens:["national-dashboard","quality-monitoring"]},{version:"v2.1",changedAt:"2025-11-18",changedBy:" TF",definitionChange:"     ",formulaChange:"    ",impactedScreens:["national-dashboard","compliance-audit"]}],whyChecklist:["  (window)  ","(validSignals) (totalSignals)    ","/     ","         "]},POLICY_IMPACT:{id:"POLICY_IMPACT",category:"",scope:"",definition:{what:"     KPI   (0~100) .",why:"    , /     ."},calculation:{numeratorLabel:"    (impactScore)",denominatorLabel:"   (maxScore=100)",includeRules:[" (deployed)  (rollback)   ","SLA,  , ,    ","     KPI  "],excludeRules:[" (reviewing)  (pending)  "," /     ","      "]},interpretation:{high:"      ,     .",low:"      ."},linkedModelStages:["Stage1","L1","L2","Stage2"],usageScreens:[{page:"national-dashboard",label:"",reason:"  KPI / "},{page:"model-governance",label:"/  ",reason:"     "},{page:"compliance-audit",label:"   ",reason:"   "}],linkedTabs:[{page:"model-governance",label:"",reason:"   "},{page:"quality-monitoring",label:"",reason:"   /   "},{page:"compliance-audit",label:"",reason:"       "}],changeHistory:[{version:"v3.0",changedAt:"2026-01-24",changedBy:"",definitionChange:"       ",formulaChange:"     (+0.2) ",impactedScreens:["national-dashboard","model-governance","compliance-audit"]},{version:"v2.6",changedAt:"2026-01-10",changedBy:" ",definitionChange:"  7  (window)   ",formulaChange:"      ",impactedScreens:["model-governance","compliance-audit"]},{version:"v2.2",changedAt:"2025-10-28",changedBy:"",definitionChange:"   ( )  ",formulaChange:"  maxScore 120100 ",impactedScreens:["national-dashboard"]}],whyChecklist:["   /   ","  KPI    ","      ","         "]},BOTTLENECK_RISK:{id:"BOTTLENECK_RISK",category:"",scope:"",definition:{what:"SLA , L2 ,        0~100 .",why:"     /     ."},calculation:{numeratorLabel:"   (weightedRisk)",denominatorLabel:"   (maxRisk=100)",includeRules:["SLA , L2 backlog,       ","       ","     "],excludeRules:["/    ","        ","   1 "]},interpretation:{high:"     (/ )  .",low:"        ."},linkedModelStages:["L1","L2","Stage2","Stage3"],usageScreens:[{page:"national-dashboard",label:"",reason:" Top5    "},{page:"quality-monitoring",label:"& ",reason:"  Driver  "},{page:"model-governance",label:"/  ",reason:"    "}],linkedTabs:[{page:"model-governance",label:"",reason:"L2 /   "},{page:"quality-monitoring",label:"",reason:"  Driver   "},{page:"compliance-audit",label:"",reason:"    "}],changeHistory:[{version:"v2.8",changedAt:"2026-01-22",changedBy:"",definitionChange:"      ",formulaChange:" SLA 0.450.40, L2Backlog 0.300.35 ",impactedScreens:["national-dashboard","quality-monitoring","model-governance"]},{version:"v2.4",changedAt:"2025-12-15",changedBy:" ",definitionChange:"    ",formulaChange:"      ",impactedScreens:["national-dashboard","quality-monitoring"]},{version:"v2.0",changedAt:"2025-09-30",changedBy:"  TF",definitionChange:"  KPI    ",formulaChange:"3    ",impactedScreens:["national-dashboard"]}],whyChecklist:["SLA /L2 /  3  ","       ","     ","   L2   "]},DATA_READINESS:{id:"DATA_READINESS",category:"",scope:"",definition:{what:"        .",why:"      ,      ."},calculation:{numeratorLabel:"    (readyCases)",denominatorLabel:"     (totalCases)",includeRules:[" ( )   ","      ","   /  "],excludeRules:["/  ","/   ","        "]},interpretation:{high:"          .",low:"       ."},linkedModelStages:["Stage0","Consent","L0","L1","L2"],usageScreens:[{page:"national-dashboard",label:"",reason:"  KPI / "},{page:"quality-monitoring",label:"& ",reason:"/   "},{page:"compliance-audit",label:"   ",reason:"    "}],linkedTabs:[{page:"model-governance",label:"",reason:" /    "},{page:"quality-monitoring",label:"",reason:" /  "},{page:"compliance-audit",label:"",reason:"      "}],changeHistory:[{version:"v2.5",changedAt:"2026-01-18",changedBy:"  ",definitionChange:"        ",formulaChange:"  linkagePending   ",impactedScreens:["national-dashboard","quality-monitoring","compliance-audit"]},{version:"v2.2",changedAt:"2025-12-03",changedBy:" ",definitionChange:"     ",formulaChange:"    ",impactedScreens:["national-dashboard","quality-monitoring"]},{version:"v1.9",changedAt:"2025-08-21",changedBy:"",definitionChange:"/     ",formulaChange:" /  ",impactedScreens:["national-dashboard"]}],whyChecklist:["  (readyCases)  (totalCases)   ","        ","//     ","       "]},GOVERNANCE_SAFETY:{id:"GOVERNANCE_SAFETY",category:"",scope:"",definition:{what:"   ()     .",why:"    ,       ."},calculation:{numeratorLabel:"    (auditReady)",denominatorLabel:"    (totalAuditable)",includeRules:[", , ,      "," / /   ","      "],excludeRules:[" heartbeat     ","     ","       "]},interpretation:{high:"      ,    .",low:"  /     ."},linkedModelStages:["Stage2","Stage3","PolicyChange"],usageScreens:[{page:"national-dashboard",label:"",reason:"  KPI  "},{page:"compliance-audit",label:"   ",reason:"//  "},{page:"model-governance",label:"/  ",reason:"/   "}],linkedTabs:[{page:"model-governance",label:"",reason:"    "},{page:"quality-monitoring",label:"",reason:" /   "},{page:"compliance-audit",label:"",reason:"    "}],changeHistory:[{version:"v3.1",changedAt:"2026-01-26",changedBy:" ",definitionChange:"     ",formulaChange:"  missingExplanation=0  ",impactedScreens:["national-dashboard","compliance-audit","model-governance"]},{version:"v2.9",changedAt:"2026-01-09",changedBy:"",definitionChange:"     ",formulaChange:"  missingResponsible>0  ",impactedScreens:["compliance-audit","national-dashboard"]},{version:"v2.4",changedAt:"2025-10-10",changedBy:"",definitionChange:"    30  ",formulaChange:"  30   ",impactedScreens:["national-dashboard","compliance-audit"]}],whyChecklist:["  (auditReady)   (totalAuditable) "," (missingExplanation)  (missingResponsible)  ","/    ","       "]}};function w5e(e){return vV[e]}function A5e(){return j5e.map(e=>vV[e])}const G8={LAST_24H:" 24",LAST_7D:" 7",LAST_30D:" 30",LAST_90D:" 90"},W_={:"bg-blue-50 text-blue-700 border-blue-200",:"bg-violet-50 text-violet-700 border-violet-200",:"bg-red-50 text-red-700 border-red-200",:"bg-emerald-50 text-emerald-700 border-emerald-200",:"bg-amber-50 text-amber-700 border-amber-200"},_5e={SIGNAL_QUALITY:{kpi:"SIGNAL_QUALITY",auditId:"ua_002",driver:"data_quality"},POLICY_IMPACT:{kpi:"POLICY_IMPACT",changeId:"chg_20260124",auditId:"ua_004",driver:"model_fitness"},BOTTLENECK_RISK:{kpi:"BOTTLENECK_RISK",changeId:"chg_20260120",auditId:"ua_001",driver:"ops_bottleneck"},DATA_READINESS:{kpi:"DATA_READINESS",auditId:"ua_003",driver:"data_quality"},GOVERNANCE_SAFETY:{kpi:"GOVERNANCE_SAFETY",changeId:"chg_20260110",auditId:"ua_001",driver:"contact_strategy"}},C5e=["national-dashboard","model-governance","quality-monitoring","compliance-audit"];function NV(e,t){const r=_5e[e],n={level:"nation",region:"KR",period:"WEEK",kpi:r.kpi};return t==="model-governance"&&r.changeId&&(n.changeId=r.changeId),t==="quality-monitoring"&&r.driver&&(n.driver=r.driver),t==="compliance-audit"&&r.auditId&&(n.auditId=r.auditId),n}function H8({screens:e,onNavigate:t,kpiId:r}){return a.jsx("div",{className:"flex flex-wrap gap-1.5",children:e.map(n=>a.jsx("button",{type:"button",onClick:()=>t?.(n,NV(r,n)),className:"text-[11px] px-2 py-1 rounded border border-gray-200 bg-white hover:bg-gray-50",children:E5e[n]},n))})}function T5e({onNavigate:e}){const t=h.useMemo(()=>mV(),[]),r=h.useMemo(()=>A5e(),[]),n=h.useMemo(()=>Object.fromEntries(t.map(A=>[A.id,A])),[t]),[s,i]=h.useState(""),[o,l]=h.useState(r[0]?.id??"SIGNAL_QUALITY"),[d,u]=h.useState("LAST_7D"),[m,p]=h.useState([]),[g,x]=h.useState(!1);h.useEffect(()=>{let A=!1;return x(!0),hV(d).then(T=>{A||(p(T.kpis),x(!1))}).catch(()=>{A||(p([]),x(!1))}),()=>{A=!0}},[d]);const y=h.useMemo(()=>{const A=s.trim().toLowerCase();return A?r.filter(T=>{const R=n[T.id];return[R?.name,R?.shortName,T.category,T.scope,...T.usageScreens.map(k=>k.label)].join(" ").toLowerCase().includes(A)}):r},[s,r,n]);h.useEffect(()=>{if(y.length===0)return;y.some(T=>T.id===o)||l(y[0].id)},[y,o]);const N=w5e(o),v=n[o],S=m.find(A=>A.kpiId===o),E=h.useMemo(()=>!S||S.denominator===0?null:Number((S.numerator/S.denominator*100).toFixed(1)),[S]),C=h.useMemo(()=>r.flatMap(A=>{const T=n[A.id];return A.changeHistory.map(R=>({...R,id:A.id,kpiName:T?.name??A.id,category:A.category}))}).sort((A,T)=>new Date(T.changedAt).getTime()-new Date(A.changedAt).getTime()),[r,n]),_=(A,T)=>{e?.(A,NV(T,A))};return a.jsxs("div",{className:"space-y-4 p-1",children:[a.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"KPI  (  )"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:" KPI     ."})]}),a.jsx("div",{className:"flex items-center gap-1.5 rounded-lg border border-gray-200 bg-white p-1",children:["LAST_24H","LAST_7D","LAST_30D","LAST_90D"].map(A=>a.jsx("button",{type:"button",onClick:()=>u(A),className:`px-2.5 py-1.5 text-[11px] rounded-md font-medium transition ${d===A?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:G8[A]},A))})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-4 2xl:grid-cols-12",children:[a.jsxs(Or,{className:"2xl:col-span-5",children:[a.jsxs(Dn,{className:"pb-3",children:[a.jsx(In,{className:"text-base",children:"KPI  "}),a.jsxs("div",{className:"relative",children:[a.jsx(rx,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx($r,{value:s,onChange:A=>i(A.target.value),placeholder:"KPI// ",className:"pl-10"})]})]}),a.jsx(Rr,{className:"pt-0",children:a.jsx("div",{className:"overflow-auto rounded-md border border-gray-200",children:a.jsxs("table",{className:"w-full min-w-[760px]",children:[a.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:a.jsxs("tr",{children:[a.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-700",children:"KPI"}),a.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-700",children:"KPI "}),a.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-700",children:" "}),a.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-700",children:"  ()"})]})}),a.jsxs("tbody",{children:[y.map(A=>{const T=n[A.id],R=o===A.id;return a.jsxs("tr",{className:`border-b border-gray-100 cursor-pointer ${R?"bg-blue-50/50":"hover:bg-gray-50"}`,onClick:()=>l(A.id),children:[a.jsxs("td",{className:"px-3 py-2 align-top",children:[a.jsx("div",{className:"text-sm font-semibold text-gray-900",children:T?.name}),a.jsx("div",{className:"text-[11px] text-gray-500",children:A.id})]}),a.jsx("td",{className:"px-3 py-2 align-top",children:a.jsx("span",{className:`inline-flex items-center rounded-md border px-2 py-1 text-[11px] font-medium ${W_[A.category]}`,children:A.category})}),a.jsx("td",{className:"px-3 py-2 text-sm text-gray-700 align-top",children:A.scope}),a.jsx("td",{className:"px-3 py-2 align-top",children:a.jsx("div",{className:"flex flex-wrap gap-1.5",children:A.usageScreens.map(I=>a.jsxs("button",{type:"button",onClick:k=>{k.stopPropagation(),C5e.includes(I.page)&&_(I.page,A.id)},className:"inline-flex items-center gap-1 rounded-md border border-gray-200 bg-white px-2 py-1 text-[11px] text-gray-700 hover:bg-gray-50",title:I.reason,children:[I.label,a.jsx(Da,{className:"h-3 w-3"})]},`${A.id}-${I.page}`))})})]},A.id)}),y.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:4,className:"px-3 py-10 text-center text-sm text-gray-500",children:"   KPI ."})})]})]})})})]}),a.jsxs(Or,{className:"2xl:col-span-7",children:[a.jsx(Dn,{children:a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[a.jsxs("div",{children:[a.jsx(In,{className:"text-base",children:v?.name}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'KPI   ("  ")    '})]}),a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(rn,{variant:"outline",className:W_[N.category],children:N.category}),a.jsx(rn,{variant:"outline",children:N.scope}),a.jsx(rn,{variant:"outline",children:o})]})]})}),a.jsxs(Rr,{className:"space-y-4",children:[a.jsxs("section",{className:"rounded-lg border border-gray-200 p-3",children:[a.jsx("div",{className:"text-sm font-semibold text-gray-900 mb-2",children:""}),a.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[a.jsxs("div",{className:"rounded-md bg-gray-50 p-3 border border-gray-200",children:[a.jsx("div",{className:"text-[11px] font-medium text-gray-500 mb-1",children:" "}),a.jsx("div",{className:"text-sm text-gray-800 leading-relaxed",children:N.definition.what})]}),a.jsxs("div",{className:"rounded-md bg-gray-50 p-3 border border-gray-200",children:[a.jsx("div",{className:"text-[11px] font-medium text-gray-500 mb-1",children:" "}),a.jsx("div",{className:"text-sm text-gray-800 leading-relaxed",children:N.definition.why})]})]})]}),a.jsxs("section",{className:"rounded-lg border border-gray-200 p-3",children:[a.jsxs("div",{className:"flex items-center gap-1.5 text-sm font-semibold text-gray-900 mb-2",children:[a.jsx(_Z,{className:"h-4 w-4"}),""]}),a.jsx("div",{className:"rounded-md border border-gray-200 bg-gray-50 px-3 py-2 text-[13px] font-mono text-gray-900",children:v?.formula}),a.jsxs("div",{className:"grid grid-cols-1 gap-3 mt-3 md:grid-cols-2",children:[a.jsxs("div",{className:"rounded-md border border-blue-200 bg-blue-50 p-3",children:[a.jsx("div",{className:"text-[11px] font-semibold text-blue-700 mb-1",children:""}),a.jsx("div",{className:"text-sm text-blue-900",children:N.calculation.numeratorLabel}),a.jsxs("div",{className:"text-[11px] text-blue-700 mt-1",children:[": ",v?.numeratorField]})]}),a.jsxs("div",{className:"rounded-md border border-indigo-200 bg-indigo-50 p-3",children:[a.jsx("div",{className:"text-[11px] font-semibold text-indigo-700 mb-1",children:""}),a.jsx("div",{className:"text-sm text-indigo-900",children:N.calculation.denominatorLabel}),a.jsxs("div",{className:"text-[11px] text-indigo-700 mt-1",children:[": ",v?.denominatorField]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-3 mt-3 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-[11px] font-semibold text-gray-700 mb-1.5",children:" "}),a.jsx("ul",{className:"space-y-1",children:N.calculation.includeRules.map((A,T)=>a.jsx("li",{className:"text-xs text-gray-700 leading-relaxed list-disc list-inside",children:A},`${o}-in-${T}`))})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-[11px] font-semibold text-gray-700 mb-1.5",children:" "}),a.jsx("ul",{className:"space-y-1",children:N.calculation.excludeRules.map((A,T)=>a.jsx("li",{className:"text-xs text-gray-700 leading-relaxed list-disc list-inside",children:A},`${o}-out-${T}`))})]})]})]}),a.jsxs("section",{className:"rounded-lg border border-gray-200 p-3",children:[a.jsx("div",{className:"text-sm font-semibold text-gray-900 mb-2",children:" "}),a.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[a.jsxs("div",{className:"rounded-md border border-green-200 bg-green-50 p-3",children:[a.jsx("div",{className:"text-[11px] font-semibold text-green-700 mb-1",children:"   "}),a.jsx("div",{className:"text-sm text-green-900 leading-relaxed",children:N.interpretation.high})]}),a.jsxs("div",{className:"rounded-md border border-orange-200 bg-orange-50 p-3",children:[a.jsx("div",{className:"text-[11px] font-semibold text-orange-700 mb-1",children:"   "}),a.jsx("div",{className:"text-sm text-orange-900 leading-relaxed",children:N.interpretation.low})]})]})]}),a.jsxs("section",{className:"rounded-lg border border-gray-200 p-3",children:[a.jsxs("div",{className:"flex items-center gap-1.5 text-sm font-semibold text-gray-900 mb-2",children:[a.jsx(gm,{className:"h-4 w-4"})," "]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("div",{className:"text-[11px] font-semibold text-gray-600 mb-1.5",children:"   Stage"}),a.jsx("div",{className:"flex flex-wrap gap-1.5",children:N.linkedModelStages.map(A=>a.jsx("span",{className:"text-[11px] px-2 py-1 rounded border border-gray-200 bg-gray-50 text-gray-700",children:A},`${o}-${A}`))})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-[11px] font-semibold text-gray-600 mb-1.5",children:"   (//)"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:N.linkedTabs.map(A=>a.jsxs(jt,{variant:"outline",size:"sm",onClick:()=>_(A.page,o),className:"h-7 text-[11px]",children:[A.label,a.jsx(Da,{className:"h-3 w-3 ml-1"})]},`${o}-tab-${A.page}`))}),a.jsx("div",{className:"space-y-1 mt-2",children:N.linkedTabs.map(A=>a.jsxs("div",{className:"text-[11px] text-gray-600",children:[a.jsx("span",{className:"font-medium",children:A.label}),": ",A.reason]},`${o}-tab-reason-${A.page}`))})]})]}),a.jsxs("section",{className:"rounded-lg border border-gray-200 p-3",children:[a.jsxs("div",{className:"flex items-center gap-1.5 text-sm font-semibold text-gray-900 mb-2",children:[a.jsx(aZ,{className:"h-4 w-4"}),"  KPI   ( )"]}),a.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:[" : ",G8[d]]}),g&&a.jsx("div",{className:"text-sm text-gray-500",children:"    ..."}),!g&&!S&&a.jsx("div",{className:"text-sm text-gray-500",children:"    ."}),!g&&S&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-3",children:[a.jsxs("div",{className:"rounded-md border border-gray-200 bg-gray-50 p-2.5",children:[a.jsx("div",{className:"text-[11px] text-gray-500 mb-0.5",children:""}),a.jsx("div",{className:"text-sm font-bold text-gray-900",children:S.numerator.toLocaleString()})]}),a.jsxs("div",{className:"rounded-md border border-gray-200 bg-gray-50 p-2.5",children:[a.jsx("div",{className:"text-[11px] text-gray-500 mb-0.5",children:""}),a.jsx("div",{className:"text-sm font-bold text-gray-900",children:S.denominator.toLocaleString()})]}),a.jsxs("div",{className:"rounded-md border border-gray-200 bg-gray-50 p-2.5",children:[a.jsx("div",{className:"text-[11px] text-gray-500 mb-0.5",children:" KPI "}),a.jsxs("div",{className:"text-sm font-bold text-gray-900",children:[S.value,v?.unit]})]})]}),E!==null&&a.jsxs("div",{className:"rounded-md border border-blue-200 bg-blue-50 px-3 py-2 text-sm text-blue-900",children:[" : ",S.numerator.toLocaleString()," / ",S.denominator.toLocaleString(),"  100 = ",E,"%",a.jsxs("span",{className:"ml-2 text-[11px] text-blue-700",children:["( ",S.value,v?.unit,", 7d ",S.delta7d,"pp)"]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-[11px] font-semibold text-gray-700 mb-1.5",children:" "}),a.jsx("ul",{className:"space-y-1",children:N.whyChecklist.map((A,T)=>a.jsx("li",{className:"text-xs text-gray-700 leading-relaxed list-disc list-inside",children:A},`${o}-why-${T}`))})]})]})]}),a.jsxs("section",{className:"rounded-lg border border-gray-200 p-3",children:[a.jsxs("div",{className:"flex items-center gap-1.5 text-sm font-semibold text-gray-900 mb-2",children:[a.jsx(DQ,{className:"h-4 w-4"}),"KPI  "]}),a.jsx("div",{className:"overflow-auto rounded-md border border-gray-200",children:a.jsxs("table",{className:"w-full min-w-[760px]",children:[a.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:a.jsxs("tr",{children:[a.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-700",children:""}),a.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-700",children:""}),a.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-700",children:" "}),a.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-700",children:" "}),a.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-700",children:"  "})]})}),a.jsx("tbody",{children:N.changeHistory.map(A=>a.jsxs("tr",{className:"border-b border-gray-100",children:[a.jsx("td",{className:"px-3 py-2 text-xs font-semibold text-gray-900",children:A.version}),a.jsxs("td",{className:"px-3 py-2 text-xs text-gray-700",children:[a.jsx("div",{children:A.changedAt}),a.jsx("div",{className:"text-[11px] text-gray-500",children:A.changedBy})]}),a.jsx("td",{className:"px-3 py-2 text-xs text-gray-700 leading-relaxed",children:A.definitionChange}),a.jsx("td",{className:"px-3 py-2 text-xs text-gray-700 leading-relaxed",children:A.formulaChange}),a.jsx("td",{className:"px-3 py-2",children:a.jsx(H8,{screens:A.impactedScreens,onNavigate:e,kpiId:o})})]},`${o}-${A.version}-${A.changedAt}`))})]})})]})]})]})]}),a.jsxs(Or,{children:[a.jsx(Dn,{children:a.jsx(In,{className:"text-base",children:" KPI   ()"})}),a.jsx(Rr,{className:"pt-0",children:a.jsx("div",{className:"overflow-auto rounded-md border border-gray-200",children:a.jsxs("table",{className:"w-full min-w-[920px]",children:[a.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:a.jsxs("tr",{children:[a.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-700",children:""}),a.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-700",children:"KPI"}),a.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-700",children:""}),a.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-700",children:" "}),a.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-700",children:" "}),a.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-700",children:" "})]})}),a.jsx("tbody",{children:C.map(A=>a.jsxs("tr",{className:"border-b border-gray-100",children:[a.jsx("td",{className:"px-3 py-2 text-xs text-gray-700",children:A.changedAt}),a.jsx("td",{className:"px-3 py-2",children:a.jsx("button",{type:"button",onClick:()=>l(A.id),className:"text-xs font-semibold text-blue-700 hover:underline",children:A.kpiName})}),a.jsx("td",{className:"px-3 py-2",children:a.jsx("span",{className:`inline-flex items-center rounded-md border px-2 py-1 text-[11px] font-medium ${W_[A.category]}`,children:A.category})}),a.jsx("td",{className:"px-3 py-2 text-xs text-gray-700 leading-relaxed",children:A.definitionChange}),a.jsx("td",{className:"px-3 py-2 text-xs text-gray-700 leading-relaxed",children:A.formulaChange}),a.jsx("td",{className:"px-3 py-2",children:a.jsx(H8,{screens:A.impactedScreens,onNavigate:e,kpiId:A.id})})]},`${A.id}-${A.version}-${A.changedAt}`))})]})})})]})]})}function O5e(e){const t=R5e(e),r=h.forwardRef((n,s)=>{const{children:i,...o}=n,l=h.Children.toArray(i),d=l.find(P5e);if(d){const u=d.props.children,m=l.map(p=>p===d?h.Children.count(u)>1?h.Children.only(null):h.isValidElement(u)?u.props.children:null:p);return a.jsx(t,{...o,ref:s,children:h.isValidElement(u)?h.cloneElement(u,void 0,m):null})}return a.jsx(t,{...o,ref:s,children:i})});return r.displayName=`${e}.Slot`,r}function R5e(e){const t=h.forwardRef((r,n)=>{const{children:s,...i}=r;if(h.isValidElement(s)){const o=I5e(s),l=D5e(i,s.props);return s.type!==h.Fragment&&(l.ref=n?Mf(n,o):o),h.cloneElement(s,l)}return h.Children.count(s)>1?h.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var k5e=Symbol("radix.slottable");function P5e(e){return h.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===k5e}function D5e(e,t){const r={...t};for(const n in t){const s=e[n],i=t[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...l)=>{const d=i(...l);return s(...l),d}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function I5e(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var VN="Popover",[SV]=jo(VN,[Ch]),Ex=Ch(),[M5e,yu]=SV(VN),EV=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:s,onOpenChange:i,modal:o=!1}=e,l=Ex(t),d=h.useRef(null),[u,m]=h.useState(!1),[p,g]=Jc({prop:n,defaultProp:s??!1,onChange:i,caller:VN});return a.jsx(mk,{...l,children:a.jsx(M5e,{scope:t,contentId:Hl(),triggerRef:d,open:p,onOpenChange:g,onOpenToggle:h.useCallback(()=>g(x=>!x),[g]),hasCustomAnchor:u,onCustomAnchorAdd:h.useCallback(()=>m(!0),[]),onCustomAnchorRemove:h.useCallback(()=>m(!1),[]),modal:o,children:r})})};EV.displayName=VN;var jV="PopoverAnchor",L5e=h.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=yu(jV,r),i=Ex(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=s;return h.useEffect(()=>(o(),()=>l()),[o,l]),a.jsx(LN,{...i,...n,ref:t})});L5e.displayName=jV;var wV="PopoverTrigger",AV=h.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=yu(wV,r),i=Ex(r),o=Ar(t,s.triggerRef),l=a.jsx(dr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":RV(s.open),...n,ref:o,onClick:Bt(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:a.jsx(LN,{asChild:!0,...i,children:l})});AV.displayName=wV;var Ik="PopoverPortal",[$5e,F5e]=SV(Ik,{forceMount:void 0}),_V=e=>{const{__scopePopover:t,forceMount:r,children:n,container:s}=e,i=yu(Ik,t);return a.jsx($5e,{scope:t,forceMount:r,children:a.jsx(Gs,{present:r||i.open,children:a.jsx(sx,{asChild:!0,container:s,children:n})})})};_V.displayName=Ik;var ah="PopoverContent",CV=h.forwardRef((e,t)=>{const r=F5e(ah,e.__scopePopover),{forceMount:n=r.forceMount,...s}=e,i=yu(ah,e.__scopePopover);return a.jsx(Gs,{present:n||i.open,children:i.modal?a.jsx(B5e,{...s,ref:t}):a.jsx(G5e,{...s,ref:t})})});CV.displayName=ah;var U5e=O5e("PopoverContent.RemoveScroll"),B5e=h.forwardRef((e,t)=>{const r=yu(ah,e.__scopePopover),n=h.useRef(null),s=Ar(t,n),i=h.useRef(!1);return h.useEffect(()=>{const o=n.current;if(o)return gR(o)},[]),a.jsx(O1,{as:U5e,allowPinchZoom:!0,children:a.jsx(TV,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Bt(e.onCloseAutoFocus,o=>{o.preventDefault(),i.current||r.triggerRef.current?.focus()}),onPointerDownOutside:Bt(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,d=l.button===0&&l.ctrlKey===!0,u=l.button===2||d;i.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:Bt(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),G5e=h.forwardRef((e,t)=>{const r=yu(ah,e.__scopePopover),n=h.useRef(!1),s=h.useRef(!1);return a.jsx(TV,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{e.onCloseAutoFocus?.(i),i.defaultPrevented||(n.current||r.triggerRef.current?.focus(),i.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:i=>{e.onInteractOutside?.(i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;r.triggerRef.current?.contains(o)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),TV=h.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:d,onFocusOutside:u,onInteractOutside:m,...p}=e,g=yu(ah,r),x=Ex(r);return hR(),a.jsx(C1,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:i,children:a.jsx(ax,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:m,onEscapeKeyDown:l,onPointerDownOutside:d,onFocusOutside:u,onDismiss:()=>g.onOpenChange(!1),children:a.jsx(hk,{"data-state":RV(g.open),role:"dialog",id:g.contentId,...x,...p,ref:t,style:{...p.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),OV="PopoverClose",H5e=h.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=yu(OV,r);return a.jsx(dr.button,{type:"button",...n,ref:t,onClick:Bt(e.onClick,()=>s.onOpenChange(!1))})});H5e.displayName=OV;var K5e="PopoverArrow",z5e=h.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=Ex(r);return a.jsx(gk,{...s,...n,ref:t})});z5e.displayName=K5e;function RV(e){return e?"open":"closed"}var kV=EV,PV=AV,DV=_V,IV=CV;const Ga="2026-02-12",Fd=`: ${Ga}  D-1`,Z0={baseDate:Ga,receiveDeadline:"08:30",modelWindow:"08:35-08:48",dispatchTime:"08:52",status:"partial",impactedStages:["S2","S3"],notes:" (7)   Stage2/3   .",receiveRate:76.4,missingInstitutionCount:7,expectedRetryAt:"2026-02-13 11:30"},Hd={baseDate:Ga,receivedN:157204,adPct:23.4,mciPct:62.1,normalPct:14.5},wl={cnn_mri_extractor:"v1.0.3",ann_multimodal_conversion:"v2.1.0",guardrails:"v1.0.0"},Al={stage1_sources:["health_check","survey_lifestyle","admin_info","history"],stage2_sources:["cognition_summary","blood_biomarker","pre_questionnaire","medication_dx_history"],mri_cnn_used:!0},V_=["3 ","  "],q5e=[{case_id:"C-2026-000101",stage:3,model_version:wl,inputs_summary:Al,upstream_cnn_signal:{mri_quality:"OK",cnn_risk_score:.18,key_rois:["hippocampus_stable"]},outputs:{conversion_risk_2y:.14,conversion_risk_band_2y:"Low",conversion_reason_codes:["MMSE_STABLE","BIO_LOW_RISK","MRI_STABLE"],conversion_top_features:[{name:"MMSE trend",contribution:.11},{name:"p-tau",contribution:.08}],followup_priority:"Low",recommended_actions:["6 "," "],guardrail_flags:[]}},{case_id:"C-2026-000102",stage:3,model_version:wl,inputs_summary:Al,upstream_cnn_signal:{mri_quality:"WARN",cnn_risk_score:.42,key_rois:["temporal_cortex_thinning"]},outputs:{conversion_risk_2y:.33,conversion_risk_band_2y:"Med",conversion_reason_codes:["MMSE_DROP","MRI_TEMPORAL_THINNING","FAMILY_HISTORY"],conversion_top_features:[{name:"MMSE trend",contribution:.17},{name:"CNN MRI risk",contribution:.14}],followup_priority:"Med",recommended_actions:V_,guardrail_flags:["MRI_QUALITY_WARN"]}},{case_id:"C-2026-000103",stage:3,model_version:wl,inputs_summary:Al,upstream_cnn_signal:{mri_quality:"OK",cnn_risk_score:.63,key_rois:["hippocampus_volume_low"]},outputs:{conversion_risk_2y:.58,conversion_risk_band_2y:"High",conversion_reason_codes:["MRI_HIPPOCAMPUS_LOW","BIO_PTAU_HIGH","MMSE_DROP"],conversion_top_features:[{name:"p-tau",contribution:.21},{name:"CNN MRI risk",contribution:.15}],followup_priority:"High",recommended_actions:["MRI  ","3 ","  "],guardrail_flags:[]}},{case_id:"C-2026-000104",stage:3,model_version:wl,inputs_summary:Al,upstream_cnn_signal:{mri_quality:"OK",cnn_risk_score:.48,key_rois:["parietal_atrophy_index_high"]},outputs:{conversion_risk_2y:.41,conversion_reason_codes:["IADL_DECLINE","MRI_PARIETAL_ATROPHY","BIO_BORDERLINE"],conversion_top_features:[{name:"IADL change",contribution:.16},{name:"CNN MRI risk",contribution:.13}],followup_priority:"Med",recommended_actions:V_,guardrail_flags:[]}},{case_id:"C-2026-000105",stage:3,model_version:wl,inputs_summary:Al,upstream_cnn_signal:{mri_quality:"WARN",cnn_risk_score:.54,key_rois:["temporal_cortex_thinning"]},outputs:{conversion_risk_2y:.47,conversion_risk_band_2y:"Med",conversion_reason_codes:["MMSE_DROP","APOE4_POSITIVE","MRI_TEMPORAL_THINNING"],conversion_top_features:[{name:"APOE4",contribution:.18},{name:"MMSE trend",contribution:.16}],followup_priority:"High",recommended_actions:["  ","3 "],guardrail_flags:["PARTIAL_STAGE2_RECEIVED"]}},{case_id:"C-2026-000106",stage:3,model_version:wl,inputs_summary:Al,upstream_cnn_signal:{mri_quality:"OK",cnn_risk_score:.22,key_rois:["hippocampus_stable"]},outputs:{conversion_risk_2y:.19,conversion_risk_band_2y:"Low",conversion_reason_codes:["MMSE_STABLE","BIO_LOW_RISK","FOLLOWUP_ADHERENT"],conversion_top_features:[{name:"Follow-up adherence",contribution:.12},{name:"MMSE trend",contribution:.1}],followup_priority:"Low",recommended_actions:["6 "," "],guardrail_flags:[]}},{case_id:"C-2026-000107",stage:3,model_version:wl,inputs_summary:Al,upstream_cnn_signal:{mri_quality:"OK",cnn_risk_score:.67,key_rois:["hippocampus_volume_low","temporal_cortex_thinning"]},outputs:{conversion_risk_2y:.62,conversion_risk_band_2y:"High",conversion_reason_codes:["BIO_PTAU_HIGH","MMSE_DROP","MRI_HIPPOCAMPUS_LOW"],conversion_top_features:[{name:"p-tau",contribution:.22},{name:"CNN MRI risk",contribution:.16}],followup_priority:"High",recommended_actions:["MRI  ","3 ","  "],guardrail_flags:[]}},{case_id:"C-2026-000108",stage:3,model_version:wl,inputs_summary:Al,upstream_cnn_signal:{mri_quality:"WARN",cnn_risk_score:.39,key_rois:["frontal_cortex_borderline"]},outputs:{conversion_risk_2y:.29,conversion_reason_codes:["SLEEP_ISSUE","MMSE_MINOR_DROP","MRI_BORDERLINE"],conversion_top_features:[{name:"Sleep quality",contribution:.12},{name:"CNN MRI risk",contribution:.11}],followup_priority:"Med",recommended_actions:V_,guardrail_flags:["MRI_QUALITY_WARN"]}},{case_id:"C-2026-000109",stage:3,model_version:wl,inputs_summary:Al,upstream_cnn_signal:{mri_quality:"OK",cnn_risk_score:.71,key_rois:["hippocampus_volume_low","parietal_atrophy_index_high"]},outputs:{conversion_risk_2y:.69,conversion_risk_band_2y:"High",conversion_reason_codes:["MRI_HIPPOCAMPUS_LOW","MMSE_SHARP_DROP","BIO_PTAU_HIGH"],conversion_top_features:[{name:"CNN MRI risk",contribution:.2},{name:"MMSE trend",contribution:.18}],followup_priority:"High",recommended_actions:["  ","3 "," "],guardrail_flags:["PARTIAL_STAGE2_RECEIVED"]}},{case_id:"C-2026-000110",stage:3,model_version:wl,inputs_summary:Al,upstream_cnn_signal:{mri_quality:"OK",cnn_risk_score:.31,key_rois:["temporal_cortex_mild_change"]},outputs:{conversion_risk_2y:.24,conversion_risk_band_2y:"Med",conversion_reason_codes:["MMSE_MINOR_DROP","BIO_BORDERLINE","MRI_MILD_CHANGE"],conversion_top_features:[{name:"MMSE trend",contribution:.14},{name:"Biomarker",contribution:.12}],followup_priority:"Med",recommended_actions:["6 ","  "],guardrail_flags:[]}}];function W5e(e,t){return t||(e<.2?"Low":e<.5?"Med":"High")}const qO=q5e.map(e=>({...e,outputs:{...e.outputs,conversion_risk_band_2y:W5e(e.outputs.conversion_risk_2y,e.outputs.conversion_risk_band_2y)}})),MV=Number((qO.reduce((e,t)=>e+t.outputs.conversion_risk_2y,0)/qO.length*100).toFixed(1)),Y_=qO.reduce((e,t)=>{const r=t.outputs.conversion_risk_band_2y;return e[r]+=1,e},{Low:0,Med:0,High:0}),Wp=[{stage:"S1",destination:"",sentCount:38124,failedCount:18,retryCount:18,lastSentAt:"2026-02-13 08:53",slaStatus:"ok"},{stage:"S2",destination:"",sentCount:11832,failedCount:64,retryCount:41,lastSentAt:"2026-02-13 08:54",slaStatus:"delayed"},{stage:"S3",destination:"",sentCount:7405,failedCount:39,retryCount:27,lastSentAt:"2026-02-13 08:56",slaStatus:"delayed"}],V5e=[{key:"total-subjects",label:" ",value:1247653,unit:"",delta:1.2,baseDate:Ga,scopeLine:Fd,status:"neutral",help:{title:" ",body:`(D-1): ${Ga}
     ( )`}},{key:"s1-applied-rate",label:"1  ",value:87.3,unit:"%",delta:2.1,baseDate:Ga,scopeLine:Fd,status:"good",help:{title:"1  ",body:`(D-1): ${Ga}
/  1    `},jumpTo:"stage1",modeOverride:{quality:{label:"1  ",value:4.2,unit:"%",status:"warn"},audit:{label:"1   Top1",value:56.3,unit:"%",status:"warn"}}},{key:"s1-high-risk-rate",label:"1  ",value:12.3,unit:"%",delta:-.8,baseDate:Ga,scopeLine:Fd,status:"warn",help:{title:"1  ",body:`(D-1): ${Ga}
    ''   (  )`},jumpTo:"stage1"},{key:"s2-receive-rate",label:"2  ",value:76.4,unit:"%",delta:-1.7,baseDate:Ga,partialStages:["S2","S3"],scopeLine:Fd,status:"warn",help:{title:"2  ",body:`(D-1): ${Ga}
 2     
 80%    `},jumpTo:"stage2",modeOverride:{quality:{label:"2 ",value:6.8,unit:"%",status:"warn"},audit:{label:"2  ",value:18.3,unit:"",status:"risk"}}},{key:"s2-distribution",label:"2  (MCI/AD)",value:Hd.adPct,valuePrefix:"AD",secondaryValueLine:`MCI ${Hd.mciPct}%`,unit:"%",delta:1.1,baseDate:Ga,partialStages:["S2"],scopeLine:Fd,status:"risk",help:{title:"2  (MCI/AD)",body:`(D-1): ${Hd.baseDate}
: 2     ${Hd.receivedN.toLocaleString()}
AD ${Hd.adPct}%  MCI ${Hd.mciPct}%   ${Hd.normalPct}%
  `},jumpTo:"stage2"},{key:"s3-enrollment-rate",label:"2 (MCIAD)",value:MV,secondaryValueLine:" ANN (S1/2 + MRI-CNN)",unit:"%",delta:1.8,baseDate:Ga,partialStages:["S3"],scopeLine:Fd,status:"warn",help:{title:"2 (MCIAD)",body:`(D-1): ${Ga}
: 2  MCI AD  (0100%)
: Stage1/2   + MRI(CNN)    ANN 
: Low ${Y_.Low}  Med ${Y_.Med}  High ${Y_.High}
:      `},jumpTo:"stage3",modeOverride:{quality:{label:" ",value:8.1,unit:"%",status:"warn"},audit:{label:"SLA ",value:12,unit:"",status:"risk"}}},{key:"s3-adherence-rate",label:"3  ",value:71.4,unit:"%",delta:-2.3,baseDate:Ga,partialStages:["S3"],scopeLine:Fd,status:"warn",help:{title:" ",body:`(D-1): ${Ga}
 //    `},jumpTo:"stage3"},{key:"sla-violation",label:"SLA /",value:12,unit:"",delta:-3,baseDate:Ga,partialStages:["S2","S3"],scopeLine:Fd,status:"risk",help:{title:"SLA ",body:`(D-1): ${Ga}
      `}}],X_=[{stageId:"stage1",examLabel:"1 ",title:"1 ",purposeLine:"   '  '     ",inputs:[{name:" ",desc:"  "},{name:"/",desc:"   "},{name:"",desc:", ,   "},{name:"  ",desc:"   "}],processing:[{name:"Stage1 Risk Scoring",desc:"  ",version:"v3.2.1"},{name:"Eligibility Rules",desc:"   ",version:"v1.4"}],outputs:[{name:"risk_score",desc:"   (0100)"},{name:"risk_band",desc:" /  / "},{name:"reason_codes",desc:" 35  "},{name:"data_quality_flags",desc:"  "}],transition:[{to:"stage2",ruleLine:"(risk_band=)  2  "},{to:"end",ruleLine:"/   (6)"}],metrics:{applied:1089353,appliedRate:87.3,conversionRate:14.4,avgLatencyDays:3.2,topIssues:[{code:"NA-01",label:" ",count:89234},{code:"NA-02",label:" ",count:45678},{code:"NA-03",label:"",count:23388}]}},{stageId:"stage2",examLabel:"2 ",title:"2  ",purposeLine:"/   ' ' ,     ",inputs:[{name:"1  ",desc:"Stage1 risk_score, risk_band, reason_codes"},{name:"2  ",desc:"PET/MRI/   "}],processing:[{name:"  ",desc:"   ",version:"v2.1"},{name:"Consistency Check",desc:"  vs    ()",version:"v1.2"}],outputs:[{name:"diagnosis_class",desc:"AD / MCI /  (  )"},{name:"model_support_signal",desc:"   (//)"},{name:"next_step_policy",desc:"3  /  /  "}],transition:[{to:"stage3",ruleLine:"MCI   3  "},{to:"end",ruleLine:"AD     /    "}],metrics:{applied:157204,appliedRate:91.1,conversionRate:38.4,avgLatencyDays:18.3,topIssues:[{code:"DL-01",label:"  (30+)",count:4128},{code:"DL-02",label:"( vs )",count:2347}]}},{stageId:"stage3",examLabel:"3 ",title:"3  ",purposeLine:"Stage1/2   MRI(CNN)   2  MCIAD (%) ",inputs:[{name:"Stage1/2  ",desc:"///  "},{name:"MRI  CNN ",desc:"  ROI  "},{name:" ",desc:"//  "}],processing:[{name:"S3 MRI Feature Extractor (CNN)",desc:"MRI    /  ",version:"v1.0.3"},{name:"S3 Conversion Risk Predictor ( ANN)",desc:"2  MCIAD (%) ",version:"v2.1.0"},{name:"Transition Policy",desc:"//  ",version:"v1.3"}],outputs:[{name:"conversion_risk_2y",desc:"2  MCIAD  (%)"},{name:"conversion_risk_band_2y",desc:"Low / Med / High"},{name:"conversion_reason_codes",desc:"   (35)"},{name:"conversion_top_features",desc:"   "},{name:"upstream_cnn_signal",desc:"MRI // ROI "},{name:"followup_priority",desc:"High / Med / Low"},{name:"recommended_actions",desc:"//  "},{name:"guardrail_flags",desc:"// "}],transition:[{to:"end",ruleLine:"/   "}],metrics:{applied:60234,appliedRate:78.6,conversionRate:MV,avgLatencyDays:14.7,topIssues:[{code:"FU-01",label:"  ",count:3891},{code:"FU-02",label:"()",count:1245},{code:"FU-03",label:" ",count:987}]}}],Y5e=[{id:"in-health",group:"input",label:"",shortDesc:" ",stageTag:"stage1"},{id:"in-survey",group:"input",label:"/",shortDesc:"   ",stageTag:"stage1"},{id:"in-admin",group:"input",label:"",shortDesc:", , ",stageTag:"stage1"},{id:"in-history",group:"input",label:"",shortDesc:"   ",stageTag:"stage1"},{id:"in-cogtest",group:"input",label:" ",shortDesc:"MMSE/MoCA/CDR ",stageTag:"stage2"},{id:"in-biomarker",group:"input",label:"/",shortDesc:"A42, p-tau, NfL ",stageTag:"stage2"},{id:"in-survey2",group:"input",label:"2 ",shortDesc:"  +  ",stageTag:"stage2"},{id:"in-medhist",group:"input",label:"/",shortDesc:", / ",stageTag:"stage2"},{id:"in-mri",group:"input",label:"MRI ",shortDesc:" ,   ",stageTag:"stage3"},{id:"in-pet",group:"input",label:"PET ",shortDesc:"A/Tau SUVR, Centiloid",stageTag:"stage3"},{id:"in-imgderiv",group:"input",label:" ",shortDesc:"ROI ,  ",stageTag:"stage3"},{id:"in-followup",group:"input",label:"",shortDesc:"// ",stageTag:"stage3"},{id:"ft-builder",group:"feature",label:"S1 Feature Builder",shortDesc:"1  ",stageTag:"stage1"},{id:"ft-s2-vec",group:"feature",label:"S2 Vectorizer",shortDesc:"++ ",stageTag:"stage2"},{id:"ft-s3-enc",group:"feature",label:"S3 MRI Encoder",shortDesc:"MRI    ",stageTag:"stage3"},{id:"md-s1-risk",group:"model",label:"S1 Risk Scoring",shortDesc:"   v3.2.1",stageTag:"stage1"},{id:"md-s1-rule",group:"model",label:"Eligibility Rules",shortDesc:"    v1.4",stageTag:"stage1"},{id:"md-s2-ann",group:"model",label:"S2 ANN Classifier",shortDesc:"ANN    v1.0",stageTag:"stage2"},{id:"md-s2-consist",group:"model",label:"Consistency Check",shortDesc:"   v1.2",stageTag:"stage2"},{id:"md-s3-cnn",group:"model",label:"S3 MRI Feature Extractor (CNN)",shortDesc:"  /  v1.0.3",stageTag:"stage3"},{id:"md-s3-prio",group:"model",label:"S3 Conversion Risk Predictor ( ANN)",shortDesc:"2  MCIAD (%)  v2.1.0",stageTag:"stage3"},{id:"md-guardrail",group:"model",label:"Post-Model Guardrails",shortDesc:"  v1.0",stageTag:"common"},{id:"md-transition",group:"model",label:"Transition Policy",shortDesc:"    v1.3",stageTag:"common"},{id:"out-score",group:"output",label:"risk_score",shortDesc:"   0100",stageTag:"stage1"},{id:"out-band",group:"output",label:"risk_band",shortDesc:"//",stageTag:"stage1"},{id:"out-reason",group:"output",label:"reason_codes",shortDesc:" 35  ",stageTag:"stage1"},{id:"out-quality",group:"output",label:"data_quality_flags",shortDesc:"  ",stageTag:"stage1"},{id:"out-s2-class",group:"output",label:"s2_support_class",shortDesc:"   ()",stageTag:"stage2"},{id:"out-s2-conf",group:"output",label:"s2_support_confidence",shortDesc:"  ",stageTag:"stage2"},{id:"out-s2-reason",group:"output",label:"s2_reason_codes",shortDesc:"S2   ",stageTag:"stage2"},{id:"out-diag",group:"output",label:"diagnosis_class",shortDesc:"AD/MCI/ ( )",stageTag:"stage2",isExternal:!0},{id:"out-signal",group:"output",label:"model_support_signal",shortDesc:"// ()",stageTag:"stage2"},{id:"out-s3-class",group:"output",label:"conversion_risk_2y",shortDesc:"2  MCIAD (%)",stageTag:"stage3"},{id:"out-s3-conf",group:"output",label:"conversion_risk_band_2y",shortDesc:"Low/Med/High  ",stageTag:"stage3"},{id:"out-s3-reason",group:"output",label:"conversion_reason_codes",shortDesc:"   ",stageTag:"stage3"},{id:"out-s3-top",group:"output",label:"conversion_top_features",shortDesc:"  Top",stageTag:"stage3"},{id:"out-s3-cnn",group:"output",label:"upstream_cnn_signal",shortDesc:"MRI //ROI ",stageTag:"stage3"},{id:"out-priority",group:"output",label:"followup_priority",shortDesc:"High/Med/Low",stageTag:"stage3"},{id:"out-actions",group:"output",label:"recommended_actions",shortDesc:"  ",stageTag:"stage3"},{id:"out-guardrail",group:"output",label:"guardrail_flags",shortDesc:"/  ",stageTag:"common"},{id:"dispatch-s1",group:"dispatch",label:"S1 Dispatch",shortDesc:"   /   ",stageTag:"stage1"},{id:"dispatch-s2",group:"dispatch",label:"S2 Dispatch",shortDesc:"    /  ",stageTag:"stage2"},{id:"dispatch-s3",group:"dispatch",label:"S3 Dispatch",shortDesc:"  /  /  ",stageTag:"stage3"},{id:"ops-case",group:"ops",label:" ",shortDesc:"  ",stageTag:"stage1"},{id:"ops-booking",group:"ops",label:" ",shortDesc:"2   ",stageTag:"stage1"},{id:"ops-s2-prio",group:"ops",label:"2  ",shortDesc:"2   ",stageTag:"stage2"},{id:"ops-s3-route",group:"ops",label:" ",shortDesc:"   ",stageTag:"stage3"},{id:"ops-s3-resched",group:"ops",label:"/ ",shortDesc:"  ",stageTag:"stage3"},{id:"ops-resource",group:"ops",label:" ",shortDesc:"  ",stageTag:"common"},{id:"ops-tracking",group:"ops",label:"MCI ",shortDesc:"  ",stageTag:"stage3"}],X5e=[{from:"in-health",to:"ft-builder",label:" "},{from:"in-survey",to:"ft-builder",label:" "},{from:"in-admin",to:"ft-builder",label:" "},{from:"in-history",to:"ft-builder",label:" "},{from:"ft-builder",to:"md-s1-risk",label:" "},{from:"ft-builder",to:"md-s1-rule",label:" "},{from:"md-s1-risk",to:"out-score",label:"risk_score"},{from:"md-s1-risk",to:"out-band",label:"risk_band"},{from:"md-s1-risk",to:"out-reason",label:"reason_codes"},{from:"md-s1-rule",to:"out-quality",label:"quality_flags"},{from:"out-score",to:"md-guardrail",label:"S1 "},{from:"out-score",to:"dispatch-s1",label:"  "},{from:"out-band",to:"dispatch-s1",label:"  "},{from:"dispatch-s1",to:"ops-case",label:"  "},{from:"dispatch-s1",to:"ops-booking",label:"  "},{from:"in-cogtest",to:"ft-s2-vec",label:" "},{from:"in-biomarker",to:"ft-s2-vec",label:""},{from:"in-survey2",to:"ft-s2-vec",label:"2 "},{from:"in-medhist",to:"ft-s2-vec",label:""},{from:"out-band",to:"ft-s2-vec",label:"1  ",style:"dashed"},{from:"ft-s2-vec",to:"md-s2-ann",label:"S2 "},{from:"md-s2-ann",to:"out-s2-class",label:" "},{from:"md-s2-ann",to:"out-s2-conf",label:""},{from:"md-s2-ann",to:"out-s2-reason",label:" "},{from:"out-s2-class",to:"md-guardrail",label:"S2 "},{from:"out-diag",to:"md-s2-consist",label:" ",style:"dashed"},{from:"out-s2-class",to:"md-s2-consist",label:"  "},{from:"md-s2-consist",to:"out-signal",label:" "},{from:"out-diag",to:"md-transition",style:"dashed"},{from:"out-diag",to:"dispatch-s2",label:"   "},{from:"out-signal",to:"dispatch-s2",label:" "},{from:"dispatch-s2",to:"ops-s2-prio",label:" "},{from:"in-mri",to:"ft-s3-enc",label:"MRI "},{from:"in-pet",to:"ft-s3-enc",label:"PET "},{from:"in-imgderiv",to:"ft-s3-enc",label:" "},{from:"ft-s2-vec",to:"md-s3-prio",label:"S1/2  ",style:"dashed"},{from:"out-diag",to:"md-s3-prio",label:"  ",style:"dashed"},{from:"out-signal",to:"md-s3-prio",label:" ",style:"dashed"},{from:"in-followup",to:"md-s3-prio",label:" "},{from:"ft-s3-enc",to:"md-s3-cnn",label:"MRI "},{from:"md-s3-cnn",to:"out-s3-cnn",label:"MRI  "},{from:"out-s3-cnn",to:"md-s3-prio",label:" CNN "},{from:"md-s3-prio",to:"out-s3-class",label:"(2)"},{from:"md-s3-prio",to:"out-s3-conf",label:" "},{from:"md-s3-prio",to:"out-s3-reason",label:" "},{from:"md-s3-prio",to:"out-s3-top",label:" "},{from:"md-s3-prio",to:"out-priority",label:""},{from:"md-s3-prio",to:"out-actions",label:" "},{from:"out-s3-class",to:"md-guardrail",label:"S3  "},{from:"md-transition",to:"md-s3-prio",label:"MCI "},{from:"md-guardrail",to:"out-guardrail",label:" "},{from:"out-s3-class",to:"dispatch-s3",label:"(%)"},{from:"out-s3-conf",to:"dispatch-s3",label:" "},{from:"out-priority",to:"dispatch-s3",label:"High  "},{from:"out-actions",to:"dispatch-s3",label:"  "},{from:"out-guardrail",to:"dispatch-s3",label:"  "},{from:"dispatch-s3",to:"ops-tracking",label:" "},{from:"dispatch-s3",to:"ops-resource",label:"  "},{from:"dispatch-s3",to:"ops-s3-route",label:" "},{from:"dispatch-s3",to:"ops-s3-resched",label:" "}],Vt="  : /.     .",Q5e={"batch-cycle":{id:"batch-cycle",definition:{what:"D-1     / /   .",why:"           .",whereUsed:["Batch Cycle Banner","  ","  "],responsibility:Vt},dataContract:{outputs:[{field:"baseDate",type:"date",nullable:!1,note:"D-1 "},{field:"receiveDeadline",type:"time",nullable:!1,note:"  "},{field:"modelWindow",type:"string",nullable:!1,note:"  "},{field:"dispatchTime",type:"time",nullable:!1,note:"  "}],refreshCadence:" 1 "},qualityAudit:{changeLog:[{version:"BATCH-2026-02-13",date:"2026-02-13",summary:"S2/S3      "}]},batchSummary:{impactedStages:Z0.impactedStages,receiveRate:Z0.receiveRate,missingInstitutionCount:Z0.missingInstitutionCount,expectedRetryAt:Z0.expectedRetryAt,impactedMetrics:["2  (MCI/AD)","2 (MCIAD)","3  "],dispatchLogs:Wp}},stage1:{id:"stage1",definition:{what:"   '  '     .",why:" 2     ,     .",whereUsed:[" "," ","   "],responsibility:Vt},dataContract:{inputs:[{field:"health_exam_result",type:"object",nullable:!1,note:"  "},{field:"survey_responses",type:"array",nullable:!0,note:"/ "},{field:"admin_info",type:"object",nullable:!1,note:", "},{field:"prior_screening_history",type:"array",nullable:!0,note:"  "}],outputs:[{field:"risk_score",type:"number(0-100)",nullable:!1},{field:"risk_band",type:"enum(||)",nullable:!1},{field:"reason_codes",type:"string[]",nullable:!1,note:" 35 "},{field:"data_quality_flags",type:"string[]",nullable:!0},{field:"transition_eligible",type:"boolean",nullable:!1}],refreshCadence:" 1 "},qualityAudit:{missingRate:4.2,driftSignals:[{name:"risk_score  ",level:"low",note:" +1.3 ( )"}],biasAlerts:[{group:"75+ ",level:"mid",note:"     +8.1%p"}],changeLog:[{version:"v3.2.1",date:"2026-01-15",summary:"  ",impact:"75+  -2.3%p"},{version:"v3.2.0",date:"2025-12-01",summary:"BMI  ",impact:"  +1.1%p"},{version:"v3.1.0",date:"2025-09-20",summary:"   "}]}},stage2:{id:"stage2",definition:{what:"/   ' ' ,     .",why:" ( )  ()    ,  /   .",whereUsed:["2   "," ","3   "],responsibility:Vt},dataContract:{inputs:[{field:"stage1_result",type:"object",nullable:!1,note:"risk_score, risk_band"},{field:"exam_result",type:"object",nullable:!1,note:"PET/MRI/"}],outputs:[{field:"diagnosis_class",type:"enum(AD|MCI|NORMAL)",nullable:!1,note:"  =  "},{field:"model_support_signal",type:"enum(||)",nullable:!1,note:"  = (   )"},{field:"next_step_policy",type:"enum(3||)",nullable:!1}],refreshCadence:" 1  (D-1  )"},qualityAudit:{missingRate:8.9,driftSignals:[{name:" ",level:"mid",note:"  +1.2%p "}],biasAlerts:[{group:" ",level:"mid",note:"    +5.2"}],changeLog:[{version:"v2.1",date:"2026-01-20",summary:"  ",impact:" +3.4%p"},{version:"v2.0",date:"2025-11-15",summary:"PET/MRI   "}]},batchSummary:{impactedStages:["S2","S3"],receiveRate:76.4,missingInstitutionCount:7,expectedRetryAt:"2026-02-13 11:30",impactedMetrics:["2  (MCI/AD)","2 (MCIAD)","3  "]}},stage3:{id:"stage3",definition:{what:"Stage1/2   MRI(CNN)   2  MCIAD (0100%)   .",why:"     ,         .",whereUsed:["  "," (High/Med/Low) ","/ "," (// )"],responsibility:Vt},dataContract:{inputs:[{field:"stage12_feature_vector",type:"number[96]",nullable:!1,note:"Stage1/2   "},{field:"diagnosis_class",type:"enum(MCI|AD)",nullable:!1,note:"  "},{field:"upstream_cnn_signal",type:"object",nullable:!1,note:"MRI // ROI "},{field:"followup_history",type:"array",nullable:!0,note:"// "}],outputs:[{field:"conversion_risk_2y",type:"number(0-1)",nullable:!1,note:"UI : 0100%"},{field:"conversion_risk_band_2y",type:"enum(Low|Med|High)",nullable:!1},{field:"conversion_reason_codes",type:"string[]",nullable:!1,note:" 35  "},{field:"conversion_top_features",type:"object[]",nullable:!0,note:"name/contribution"},{field:"upstream_cnn_signal",type:"object",nullable:!1,note:"mri_quality/cnn_risk_score/key_rois"},{field:"followup_priority",type:"enum(High|Med|Low)",nullable:!1},{field:"recommended_actions",type:"string[]",nullable:!1},{field:"guardrail_flags",type:"string[]",nullable:!0}],refreshCadence:" 1  (D-1  )"},qualityAudit:{missingRate:8.1,driftSignals:[{name:"  ",level:"mid",note:"3  -1.5%p/"}],biasAlerts:[{group:" ",level:"high",note:"   +12.3%p"}],changeLog:[{version:"v2.0",date:"2026-01-10",summary:"   ",impact:"High  +4.2%p"},{version:"v1.3",date:"2025-10-05",summary:"    "}]}},"md-s1-risk":{id:"md-s1-risk",definition:{what:"    (0100)    .",why:"     2     .",whereUsed:["1  risk_score ","  "],responsibility:Vt},dataContract:{inputs:[{field:"feature_vector",type:"number[48]",nullable:!1,note:"Feature Builder "}],outputs:[{field:"risk_score",type:"number(0-100)",nullable:!1},{field:"risk_band",type:"enum",nullable:!1},{field:"reason_codes",type:"string[3-5]",nullable:!1}],refreshCadence:" 1 "},qualityAudit:{missingRate:.3,driftSignals:[{name:"  ",level:"low",note:"PSI 0.02 ()"}],biasAlerts:[],changeLog:[{version:"v3.2.1",date:"2026-01-15",summary:"   "},{version:"v3.2.0",date:"2025-12-01",summary:"BMI  "}]}},"ft-builder":{id:"ft-builder",definition:{what:"1         .",why:"        .",whereUsed:["Stage1 Risk Scoring ","Eligibility Rules "],responsibility:Vt},dataContract:{inputs:[{field:"raw_health_exam",type:"object",nullable:!1},{field:"raw_survey",type:"array",nullable:!0},{field:"raw_admin",type:"object",nullable:!1}],outputs:[{field:"feature_vector",type:"number[48]",nullable:!1},{field:"missing_flags",type:"string[]",nullable:!0}],refreshCadence:" 1 "},qualityAudit:{missingRate:4.2,driftSignals:[],biasAlerts:[],changeLog:[{version:"v2.1",date:"2025-12-01",summary:"BMI   "}]}},"ft-s2-vec":{id:"ft-s2-vec",definition:{what:"  ANN    .",why:"  2      ANN   .",whereUsed:["S2 ANN Classifier "],responsibility:Vt},dataContract:{inputs:[{field:"cogtest_features",type:"number[6]",nullable:!1,note:" "},{field:"biomarker_features",type:"number[4]",nullable:!0,note:" "},{field:"survey2_features",type:"number[8]",nullable:!0,note:"2  "},{field:"medhist_features",type:"number[5]",nullable:!0,note:" "}],outputs:[{field:"s2_feature_vector",type:"number[64]",nullable:!1},{field:"missing_flags",type:"string[]",nullable:!0}],refreshCadence:"  "},qualityAudit:{missingRate:8.3,driftSignals:[{name:"  ",level:"low",note:"PSI 0.03 ()"}],biasAlerts:[],changeLog:[{version:"v1.0",date:"2026-01-15",summary:" "}]}},"ft-s3-enc":{id:"ft-s3-enc",definition:{what:"MRI   Stage3  CNN   .",why:"    /      .",whereUsed:["S3 MRI Feature Extractor (CNN) "],responsibility:Vt},dataContract:{inputs:[{field:"mri_features",type:"number[128]",nullable:!1,note:"MRI  "},{field:"pet_features",type:"number[64]",nullable:!0,note:"PET  "},{field:"derived_metrics",type:"number[16]",nullable:!0,note:"  "}],outputs:[{field:"s3_tensor",type:"tensor[1,208]",nullable:!1},{field:"missing_flags",type:"string[]",nullable:!0}],refreshCadence:"  "},qualityAudit:{missingRate:18.7,driftSignals:[{name:"  ",level:"mid",note:"    4.2%"}],biasAlerts:[],changeLog:[{version:"v1.0",date:"2026-01-20",summary:" "}]}},"in-health":{id:"in-health",definition:{what:"    .",why:"1     , BMI    .",whereUsed:["Feature Builder ","1  risk_score "],responsibility:Vt},dataContract:{inputs:[{field:"exam_date",type:"date",nullable:!1,note:" "},{field:"bmi",type:"number",nullable:!0,note:""},{field:"blood_pressure",type:"object",nullable:!0,note:"/"},{field:"chronic_diseases",type:"string[]",nullable:!0,note:" "}],refreshCadence:" 1  "},qualityAudit:{missingRate:3.1,driftSignals:[{name:"   ",level:"low",note:" 2 "}],biasAlerts:[],changeLog:[{version:"v1.0",date:"2025-06-01",summary:"  "}]}},"in-survey":{id:"in-survey",definition:{what:"        .",why:" ,           .",whereUsed:["Feature Builder "],responsibility:Vt},dataContract:{inputs:[{field:"survey_id",type:"string",nullable:!1},{field:"responses",type:"object[]",nullable:!1,note:" "}],refreshCadence:"  1"},qualityAudit:{missingRate:12.7,driftSignals:[],biasAlerts:[{group:"75+ ",level:"mid",note:"   +8%p"}],changeLog:[{version:"v1.2",date:"2025-11-01",summary:"  (1520)"}]}},"in-admin":{id:"in-admin",definition:{what:" (, ,  ).",why:"  ,         .",whereUsed:["Feature Builder ","    "],responsibility:Vt},dataContract:{inputs:[{field:"address",type:"object",nullable:!1},{field:"household_type",type:"enum",nullable:!0,note:"//"},{field:"contact_phone",type:"string",nullable:!0}],refreshCadence:"/ "},qualityAudit:{missingRate:5.4,driftSignals:[],biasAlerts:[],changeLog:[{version:"v1.1",date:"2025-08-15",summary:"  "}]}},"in-history":{id:"in-history",definition:{what:"  1      .",why:"            .",whereUsed:["Feature Builder "],responsibility:Vt},dataContract:{inputs:[{field:"prior_risk_scores",type:"number[]",nullable:!0},{field:"prior_risk_bands",type:"string[]",nullable:!0},{field:"last_screening_date",type:"date",nullable:!0}],refreshCadence:" 1 "},qualityAudit:{missingRate:18.3,driftSignals:[{name:"    ",level:"low",note:"22.1% ( )"}],biasAlerts:[],changeLog:[{version:"v1.0",date:"2025-06-01",summary:" "}]}},"in-exam":{id:"in-cogtest",definition:{what:"(MMSE, MoCA, CDR )   .",why:"2 ANN   ,      .",whereUsed:["S2 Vectorizer ","ANN Classifier "],responsibility:Vt},dataContract:{inputs:[{field:"mmse_score",type:"number(0-30)",nullable:!1,note:"MMSE "},{field:"moca_score",type:"number(0-30)",nullable:!0,note:"MoCA "},{field:"cdr_global",type:"number(0-3)",nullable:!0,note:"CDR  "},{field:"exam_date",type:"date",nullable:!1}],refreshCadence:"  1"},qualityAudit:{missingRate:6.4,driftSignals:[{name:"   ",level:"low",note:"MoCA v8.1  v7.1  2.1%"}],biasAlerts:[{group:" ",level:"mid",note:"MMSE    +6.2%p"}],changeLog:[{version:"v1.0",date:"2025-09-01",summary:"  "}]}},"in-cogtest":{id:"in-cogtest",definition:{what:"(MMSE, MoCA, CDR )   .",why:"2 ANN   ,      .",whereUsed:["S2 Vectorizer ","ANN Classifier "],responsibility:Vt},dataContract:{inputs:[{field:"mmse_score",type:"number(0-30)",nullable:!1,note:"MMSE "},{field:"moca_score",type:"number(0-30)",nullable:!0,note:"MoCA "},{field:"cdr_global",type:"number(0-3)",nullable:!0,note:"CDR  "},{field:"exam_date",type:"date",nullable:!1}],refreshCadence:"  1"},qualityAudit:{missingRate:6.4,driftSignals:[{name:"   ",level:"low",note:"MoCA v8.1  v7.1  2.1%"}],biasAlerts:[{group:" ",level:"mid",note:"MMSE    +6.2%p"}],changeLog:[{version:"v1.0",date:"2025-09-01",summary:"  "}]}},"in-biomarker":{id:"in-biomarker",definition:{what:"  (A42, p-tau181, NfL )  .",why:"ANN   ,     .",whereUsed:["S2 Vectorizer "],responsibility:Vt},dataContract:{inputs:[{field:"ab42_ratio",type:"number",nullable:!0,note:"A42/40 "},{field:"ptau181",type:"number",nullable:!0,note:"pg/mL"},{field:"nfl",type:"number",nullable:!0,note:"Neurofilament light"},{field:"sample_date",type:"date",nullable:!1}],refreshCadence:"  1"},qualityAudit:{missingRate:22.1,driftSignals:[{name:"  ",level:"mid",note:"Elecsys  Lumipulse   2.3% "}],biasAlerts:[],changeLog:[{version:"v1.0",date:"2025-10-01",summary:" "}]}},"in-survey2":{id:"in-survey2",definition:{what:"2         .",why:"          .",whereUsed:["S2 Vectorizer "],responsibility:Vt},dataContract:{inputs:[{field:"adl_score",type:"number",nullable:!0,note:" "},{field:"iadl_score",type:"number",nullable:!0,note:" "},{field:"guardian_responses",type:"object[]",nullable:!0,note:"  "}],refreshCadence:"2   1"},qualityAudit:{missingRate:15.3,driftSignals:[],biasAlerts:[{group:" ",level:"high",note:"   42.1%"}],changeLog:[{version:"v1.0",date:"2025-11-01",summary:" "}]}},"in-medhist":{id:"in-medhist",definition:{what:"     () .",why:"           .",whereUsed:["S2 Vectorizer "],responsibility:Vt},dataContract:{inputs:[{field:"rx_codes",type:"string[]",nullable:!0,note:"  ATC "},{field:"visit_history",type:"object[]",nullable:!0,note:"/ "},{field:"comorbidity_index",type:"number",nullable:!0,note:"Charlson  "}],refreshCadence:" 1 "},qualityAudit:{missingRate:11.7,driftSignals:[],biasAlerts:[],changeLog:[{version:"v1.0",date:"2025-11-15",summary:"   "}]}},"in-mri":{id:"in-mri",definition:{what:" MRI   ,  ,     .",why:"Stage3  ANN   CNN       .",whereUsed:["S3 MRI Encoder ","S3 MRI Feature Extractor(CNN) "],responsibility:Vt},dataContract:{inputs:[{field:"hippocampal_volume",type:"number",nullable:!1,note:"  (mm)"},{field:"cortical_thickness",type:"number[]",nullable:!0,note:"ROI  "},{field:"ventricular_ratio",type:"number",nullable:!0,note:" "},{field:"scan_date",type:"date",nullable:!1}],refreshCadence:"  1"},qualityAudit:{missingRate:14.2,driftSignals:[{name:"  ",level:"mid",note:"3T/1.5T     3.1%"}],biasAlerts:[],changeLog:[{version:"v1.0",date:"2025-12-01",summary:"FreeSurfer  "}]}},"in-pet":{id:"in-pet",definition:{what:"/ PET  SUVR, Centiloid   .",why:"        Stage3    .",whereUsed:["S3 MRI Encoder "],responsibility:Vt},dataContract:{inputs:[{field:"amyloid_suvr",type:"number",nullable:!0,note:"A PET SUVR"},{field:"centiloid",type:"number",nullable:!0,note:"Centiloid "},{field:"tau_suvr",type:"number",nullable:!0,note:"Tau PET SUVR"},{field:"scan_date",type:"date",nullable:!1}],refreshCadence:"  1"},qualityAudit:{missingRate:31.4,driftSignals:[{name:"  ",level:"mid",note:"Florbetaben vs Flutemetamol "}],biasAlerts:[{group:" ",level:"high",note:"PET      +18%p"}],changeLog:[{version:"v1.0",date:"2025-12-15",summary:"PET   "}]}},"in-imgderiv":{id:"in-imgderiv",definition:{what:"MRI/PET     (ROI ,   ).",why:"          .",whereUsed:["S3 MRI Encoder "],responsibility:Vt},dataContract:{inputs:[{field:"atrophy_index",type:"number",nullable:!0,note:"   "},{field:"roi_ratios",type:"number[]",nullable:!0,note:"ROI  "},{field:"asymmetry_score",type:"number",nullable:!0,note:"  "}],refreshCadence:"MRI/PET   "},qualityAudit:{missingRate:16.8,driftSignals:[],biasAlerts:[],changeLog:[{version:"v1.0",date:"2026-01-05",summary:"   "}]}},"in-followup":{id:"in-followup",definition:{what:"MCI   //   .",why:"  , Stage3   ( ANN)  .",whereUsed:["S3 Conversion Risk Predictor "," "],responsibility:Vt},dataContract:{inputs:[{field:"visit_records",type:"object[]",nullable:!0},{field:"last_contact_date",type:"date",nullable:!0},{field:"program_participation",type:"string[]",nullable:!0}],refreshCadence:" 1 "},qualityAudit:{missingRate:8.1,driftSignals:[{name:" ",level:"mid",note:"3  -1.5%p/"}],biasAlerts:[{group:" ",level:"high",note:" +12.3%p"}],changeLog:[{version:"v1.0",date:"2025-06-01",summary:" "}]}},"md-s1-rule":{id:"md-s1-rule",definition:{what:"       .",why:",   ,         .",whereUsed:["1    ","   "],responsibility:Vt},dataContract:{inputs:[{field:"base_criteria",type:"object",nullable:!1,note:"//"}],outputs:[{field:"eligible",type:"boolean",nullable:!1},{field:"exclusion_reason",type:"string",nullable:!0},{field:"data_quality_flags",type:"string[]",nullable:!0}],refreshCadence:" 1 "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[{version:"v1.4",date:"2025-12-15",summary:"75+  "},{version:"v1.3",date:"2025-09-01",summary:"   "}]}},"md-s2-ann":{id:"md-s2-ann",definition:{what:"   2     ANN .",why:"        ,     .",whereUsed:["S2    ","Consistency Check  "],responsibility:Vt},dataContract:{inputs:[{field:"s2_feature_vector",type:"number[64]",nullable:!1,note:"S2 Vectorizer "}],outputs:[{field:"s2_support_class",type:"enum(AD|MCI|NORMAL)",nullable:!1,note:"  ()"},{field:"s2_support_confidence",type:"number(0-1)",nullable:!1,note:" "},{field:"s2_reason_codes",type:"string[3-5]",nullable:!1,note:"  "}],refreshCadence:"  "},qualityAudit:{missingRate:.5,driftSignals:[{name:"  ",level:"low",note:"PSI 0.04 ()"}],biasAlerts:[{group:"75+ ",level:"mid",note:"AD    +5.4%p"}],changeLog:[{version:"v1.0",date:"2026-01-15",summary:"ANN Classifier  "}]}},"md-s2-consist":{id:"md-s2-consist",definition:{what:"  2   1       .",why:" (: 1   2 AD)    .",whereUsed:[" ","model_support_signal "],responsibility:Vt},dataContract:{inputs:[{field:"stage1_risk_band",type:"enum",nullable:!1},{field:"exam_diagnosis",type:"enum(AD|MCI|NORMAL)",nullable:!1}],outputs:[{field:"model_support_signal",type:"enum(||)",nullable:!1},{field:"inconsistency_score",type:"number",nullable:!1}],refreshCadence:""},qualityAudit:{missingRate:0,driftSignals:[{name:" ",level:"mid",note:"  +1.2%p"}],biasAlerts:[],changeLog:[{version:"v1.2",date:"2026-01-10",summary:"  "}]}},"md-transition":{id:"md-transition",definition:{what:"2     (3 //)   .",why:"         .",whereUsed:["3 MCI   ","/ "],responsibility:Vt},dataContract:{inputs:[{field:"diagnosis_class",type:"enum(AD|MCI|NORMAL)",nullable:!1}],outputs:[{field:"next_step_policy",type:"enum(3||)",nullable:!1}],refreshCadence:""},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[{version:"v1.3",date:"2026-01-10",summary:"MCI   "},{version:"v1.2",date:"2025-10-01",summary:"AD     "}]}},"md-s3-cnn":{id:"md-s3-cnn",definition:{what:"MRI    Stage3  ANN     CNN     .",why:"      ( ANN)    .",whereUsed:["upstream_cnn_signal ","S3 Conversion Risk Predictor "],responsibility:Vt},dataContract:{inputs:[{field:"s3_tensor",type:"tensor[1,208]",nullable:!1,note:"S3 Encoder "}],outputs:[{field:"upstream_cnn_signal.mri_quality",type:"enum(OK|WARN|FAIL)",nullable:!1},{field:"upstream_cnn_signal.cnn_risk_score",type:"number(0-1)",nullable:!1},{field:"upstream_cnn_signal.key_rois",type:"string[]",nullable:!1,note:"  ROI"}],refreshCadence:"  "},qualityAudit:{missingRate:.8,driftSignals:[{name:"  ",level:"low",note:"KL divergence 0.02 ()"}],biasAlerts:[{group:"1.5T ",level:"mid",note:"3T  cnn_risk_score -0.08 "}],changeLog:[{version:"v1.0.3",date:"2026-02-01",summary:"S3 MRI Feature Extractor(CNN) "}]}},"md-s3-prio":{id:"md-s3-prio",definition:{what:"Stage1/2   MRI(CNN)   2  MCIAD (%)  Stage3  ( ANN).",why:"       .",whereUsed:["2 (MCIAD) ","followup_priority ","recommended_actions "],responsibility:Vt},dataContract:{inputs:[{field:"stage12_feature_vector",type:"number[96]",nullable:!1,note:"Stage1/2  "},{field:"diagnosis_class",type:"enum(MCI|AD)",nullable:!1},{field:"upstream_cnn_signal",type:"object",nullable:!1},{field:"followup_history",type:"array",nullable:!0}],outputs:[{field:"conversion_risk_2y",type:"number(0-1)",nullable:!1,note:"UI : 0100%"},{field:"conversion_risk_band_2y",type:"enum(Low|Med|High)",nullable:!1},{field:"conversion_reason_codes",type:"string[]",nullable:!1},{field:"conversion_top_features",type:"object[]",nullable:!0,note:"{name, contribution}"},{field:"followup_priority",type:"enum(High|Med|Low)",nullable:!1},{field:"recommended_actions",type:"string[]",nullable:!1}],refreshCadence:" 1  (D-1 )"},qualityAudit:{missingRate:.5,driftSignals:[{name:"  ",level:"low",note:" +0.9%p ()"}],biasAlerts:[{group:" ",level:"high",note:"High  +12%p"}],changeLog:[{version:"v2.1.0",date:"2026-01-10",summary:" ANN    ",impact:"2   AUC +3.9%p"}]}},"out-score":{id:"out-score",definition:{what:"1    (0100).",why:"         .",whereUsed:["  ","  "],responsibility:Vt},dataContract:{outputs:[{field:"risk_score",type:"number(0-100)",nullable:!1}],refreshCadence:" 1 "},qualityAudit:{missingRate:.3,driftSignals:[],biasAlerts:[],changeLog:[]}},"out-band":{id:"out-band",definition:{what:"  (//).",why:" 3     .",whereUsed:["  ","2   "],responsibility:Vt},dataContract:{outputs:[{field:"risk_band",type:"enum(||)",nullable:!1}],refreshCadence:" 1 "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"out-reason":{id:"out-reason",definition:{what:"   35  .",why:"      .",whereUsed:["   ","  "],responsibility:Vt},dataContract:{outputs:[{field:"reason_codes",type:"string[3-5]",nullable:!1}],refreshCadence:" 1 "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"out-diag":{id:"out-diag",definition:{what:"2   (AD/MCI/).   ,   .",why:"        .",whereUsed:["3  ","  "],responsibility:Vt},dataContract:{outputs:[{field:"diagnosis_class",type:"enum(AD|MCI|NORMAL)",nullable:!1,note:"  "}],refreshCadence:" (  )"},qualityAudit:{missingRate:8.9,driftSignals:[],biasAlerts:[],changeLog:[]}},"out-signal":{id:"out-signal",definition:{what:"  (//).   1     .",why:"   ,     .",whereUsed:["  "," "],responsibility:Vt},dataContract:{outputs:[{field:"model_support_signal",type:"enum(||)",nullable:!1,note:"  "}],refreshCadence:""},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"out-priority":{id:"out-priority",definition:{what:"MCI  (High/Med/Low) .",why:"        .",whereUsed:["MCI   ","  "],responsibility:Vt},dataContract:{outputs:[{field:"followup_priority",type:"enum(High|Med|Low)",nullable:!1}],refreshCadence:" 1 "},qualityAudit:{missingRate:.5,driftSignals:[],biasAlerts:[],changeLog:[]}},"out-actions":{id:"out-actions",definition:{what:"   (// ).",why:"       .",whereUsed:["   ","  "],responsibility:Vt},dataContract:{outputs:[{field:"recommended_actions",type:"string[]",nullable:!1}],refreshCadence:" 1 "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"out-quality":{id:"out-quality",definition:{what:"   .",why:"        .",whereUsed:["  ","1   "],responsibility:Vt},dataContract:{outputs:[{field:"data_quality_flags",type:"string[]",nullable:!0}],refreshCadence:" 1 "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"out-s2-class":{id:"out-s2-class",definition:{what:"ANN  2   (AD/MCI/NORMAL).      .",why:"   (Consistency Check)   .",whereUsed:["Consistency Check ","S2  "],responsibility:Vt},dataContract:{outputs:[{field:"s2_support_class",type:"enum(AD|MCI|NORMAL)",nullable:!1,note:"   ()"}],refreshCadence:"  "},qualityAudit:{missingRate:.5,driftSignals:[],biasAlerts:[],changeLog:[]}},"out-s2-conf":{id:"out-s2-conf",definition:{what:"ANN   (01).",why:"     ,      .",whereUsed:["2   "," "],responsibility:Vt},dataContract:{outputs:[{field:"s2_support_confidence",type:"number(0-1)",nullable:!1}],refreshCadence:"  "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"out-s2-reason":{id:"out-s2-reason",definition:{what:"ANN   35   .",why:"       .",whereUsed:["Inspector "," "],responsibility:Vt},dataContract:{outputs:[{field:"s2_reason_codes",type:"string[3-5]",nullable:!1}],refreshCadence:"  "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"out-s3-class":{id:"out-s3-class",definition:{what:"2  MCI AD  (0100%)  .",why:"/          .",whereUsed:["  ","  ","Guardrails "],responsibility:Vt},dataContract:{outputs:[{field:"conversion_risk_2y",type:"number(0-1)",nullable:!1,note:"UI : 0100%"}],refreshCadence:" 1  (D-1 )"},qualityAudit:{missingRate:.8,driftSignals:[],biasAlerts:[],changeLog:[]}},"out-s3-conf":{id:"out-s3-conf",definition:{what:"2 (%)  (Low/Med/High)  .",why:"       .",whereUsed:["  ","  "],responsibility:Vt},dataContract:{outputs:[{field:"conversion_risk_band_2y",type:"enum(Low|Med|High)",nullable:!1}],refreshCadence:" 1  (D-1 )"},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"out-s3-reason":{id:"out-s3-reason",definition:{what:"     35  .",why:"    /     .",whereUsed:["Inspector "," "],responsibility:Vt},dataContract:{outputs:[{field:"conversion_reason_codes",type:"string[3-5]",nullable:!1}],refreshCadence:" 1  (D-1 )"},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"out-s3-top":{id:"out-s3-top",definition:{what:"      .",why:"       .",whereUsed:["Inspector "," "],responsibility:Vt},dataContract:{outputs:[{field:"conversion_top_features",type:"object[]",nullable:!0,note:"{name, contribution}"}],refreshCadence:" 1  (D-1 )"},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"out-s3-cnn":{id:"out-s3-cnn",definition:{what:"MRI  CNN   (mri_quality, cnn_risk_score, key_rois).",why:"     ANN       .",whereUsed:["S3 Conversion Risk Predictor "," "],responsibility:Vt},dataContract:{outputs:[{field:"upstream_cnn_signal.mri_quality",type:"enum(OK|WARN|FAIL)",nullable:!1},{field:"upstream_cnn_signal.cnn_risk_score",type:"number(0-1)",nullable:!1},{field:"upstream_cnn_signal.key_rois",type:"string[]",nullable:!1}],refreshCadence:"  "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"md-guardrail":{id:"md-guardrail",definition:{what:"S1/S2/S3     ,  ,     .",why:"           .",whereUsed:["guardrail_flags ","/   "],responsibility:Vt},dataContract:{inputs:[{field:"risk_score",type:"number",nullable:!0,note:"S1 "},{field:"s2_support_class",type:"enum",nullable:!0,note:"S2 "},{field:"conversion_risk_2y",type:"number",nullable:!0,note:"S3 "}],outputs:[{field:"guardrail_flags",type:"string[]",nullable:!1,note:"/ "},{field:"confidence_adjusted",type:"boolean",nullable:!1}],refreshCadence:"   "},qualityAudit:{missingRate:0,driftSignals:[{name:" ",level:"low",note:"2.1% ( )"}],biasAlerts:[],changeLog:[{version:"v1.0",date:"2026-02-01",summary:"Guardrails  "}]}},"out-guardrail":{id:"out-guardrail",definition:{what:"Post-Model Guardrails  /  .",why:"        .",whereUsed:["/  "," "],responsibility:Vt},dataContract:{outputs:[{field:"guardrail_flags",type:"string[]",nullable:!1,note:"/ "}],refreshCadence:"   "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"dispatch-s1":{id:"dispatch-s1",definition:{what:"S1 (  /  )      .",why:"          .",whereUsed:["S1 Dispatch ","  "," "],responsibility:Vt},dataContract:{inputs:[{field:"risk_score",type:"number",nullable:!1},{field:"risk_band",type:"enum",nullable:!1}],outputs:[{field:"dispatch_payload",type:"object[]",nullable:!1,note:"  /   "}],refreshCadence:" 1  "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]},batchSummary:{dispatchLogs:Wp.filter(e=>e.stage==="S1")}},"dispatch-s2":{id:"dispatch-s2",definition:{what:"S2           .",why:"     /  .",whereUsed:["S2 Dispatch ","  ","2  "],responsibility:Vt},dataContract:{inputs:[{field:"diagnosis_class",type:"enum(AD|MCI|NORMAL)",nullable:!1},{field:"model_support_signal",type:"enum(||)",nullable:!1}],outputs:[{field:"dispatch_payload",type:"object[]",nullable:!1,note:"   /  "}],refreshCadence:" 1  "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]},batchSummary:{impactedStages:["S2"],dispatchLogs:Wp.filter(e=>e.stage==="S2")}},"dispatch-s3":{id:"dispatch-s3",definition:{what:"S3 (2)   /      .",why:"    //  .",whereUsed:["S3 Dispatch ","MCI/AD  "," "],responsibility:Vt},dataContract:{inputs:[{field:"conversion_risk_2y",type:"number(0-1)",nullable:!1,note:"UI : 0100%"},{field:"conversion_risk_band_2y",type:"enum(Low|Med|High)",nullable:!1},{field:"followup_priority",type:"enum(High|Med|Low)",nullable:!1},{field:"recommended_actions",type:"string[]",nullable:!1}],outputs:[{field:"dispatch_payload",type:"object[]",nullable:!1,note:"  / High   /  "}],refreshCadence:" 1  "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]},batchSummary:{impactedStages:["S3"],dispatchLogs:Wp.filter(e=>e.stage==="S3")}},"ops-case":{id:"ops-case",definition:{what:"        .",why:"        .",whereUsed:["  "],responsibility:Vt},dataContract:{inputs:[{field:"risk_score",type:"number",nullable:!1},{field:"risk_band",type:"enum",nullable:!1}],refreshCadence:" 1  "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"ops-booking":{id:"ops-booking",definition:{what:"  2     .",why:"    2     .",whereUsed:["SMS/ ","  "],responsibility:Vt},dataContract:{inputs:[{field:"risk_band",type:"enum",nullable:!1}],refreshCadence:" 1  "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"ops-resource":{id:"ops-resource",definition:{what:"    (//)   .",why:"      .",whereUsed:["  "," "],responsibility:Vt},dataContract:{inputs:[{field:"recommended_actions",type:"string[]",nullable:!1}],refreshCadence:" 1  "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"ops-tracking":{id:"ops-tracking",definition:{what:"MCI      .",why:"  //   .",whereUsed:["MCI   "," "],responsibility:Vt},dataContract:{inputs:[{field:"followup_priority",type:"enum(High|Med|Low)",nullable:!1}],refreshCadence:" 1  "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"ops-s2-prio":{id:"ops-s2-prio",definition:{what:"    2     .",why:" 2        .",whereUsed:["2    "],responsibility:Vt},dataContract:{inputs:[{field:"s2_support_confidence",type:"number(0-1)",nullable:!1}],refreshCadence:" 1  "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"ops-s3-route":{id:"ops-s3-route",definition:{what:"3    (PET/MRI/)   .",why:"2 (%)  ,  CNN     .",whereUsed:["3   "],responsibility:Vt},dataContract:{inputs:[{field:"conversion_risk_2y",type:"number(0-1)",nullable:!1},{field:"conversion_risk_band_2y",type:"enum(Low|Med|High)",nullable:!1},{field:"upstream_cnn_signal.cnn_risk_score",type:"number(0-1)",nullable:!0}],refreshCadence:" 1  "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"ops-s3-resched":{id:"ops-s3-resched",definition:{what:"Guardrails       .",why:"         .",whereUsed:["  ","  "],responsibility:Vt},dataContract:{inputs:[{field:"guardrail_flags",type:"string[]",nullable:!1}],refreshCadence:"  "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}}},K8={ops:{label:"",icon:pm,color:"bg-blue-600"},quality:{label:"",icon:j1,color:"bg-amber-500"},audit:{label:"",icon:Yl,color:"bg-purple-600"}};function Z5e({mode:e,onChange:t}){return a.jsx("div",{className:"inline-flex items-center rounded-lg border border-slate-200 bg-white p-0.5 shadow-sm",children:Object.keys(K8).map(r=>{const n=K8[r],s=n.icon,i=e===r;return a.jsxs("button",{onClick:()=>t(r),className:`flex items-center gap-1.5 px-3.5 py-1.5 rounded-md text-xs font-semibold transition-all ${i?`${n.color} text-white shadow-sm`:"text-slate-500 hover:text-slate-700 hover:bg-slate-50"}`,children:[a.jsx(s,{className:"h-3.5 w-3.5"}),n.label]},r)})})}const J5e={completed:{label:"",chip:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:li},running:{label:"",chip:"bg-blue-100 text-blue-700 border-blue-200",icon:Bl},partial:{label:"",chip:"bg-amber-100 text-amber-700 border-amber-200",icon:ss},delayed:{label:"",chip:"bg-orange-100 text-orange-700 border-orange-200",icon:ss},failed:{label:"",chip:"bg-red-100 text-red-700 border-red-200",icon:fm}};function ePe({meta:e,onOpenDetail:t}){const r=J5e[e.status],n=r.icon,s=e.status==="partial"||e.status==="delayed"||e.status==="failed";return a.jsxs("div",{className:"bg-white border-b border-slate-200 px-5 py-2.5 flex items-center justify-between gap-3 flex-shrink-0",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-[11px] text-slate-600",children:[a.jsxs("span",{className:"inline-flex items-center gap-1 rounded-md bg-slate-100 px-2 py-1 text-slate-700 font-semibold",children:["D-1 : ",e.baseDate]}),a.jsxs("span",{className:"rounded-md bg-slate-50 px-2 py-1 border border-slate-200",children:[" : ",e.receiveDeadline]}),a.jsxs("span",{className:"rounded-md bg-slate-50 px-2 py-1 border border-slate-200",children:[" : ",e.modelWindow]}),a.jsxs("span",{className:"rounded-md bg-slate-50 px-2 py-1 border border-slate-200",children:["  : ",e.dispatchTime]}),a.jsxs("span",{className:`inline-flex items-center gap-1 rounded-md border px-2 py-1 font-semibold ${r.chip}`,children:[a.jsx(n,{className:"h-3 w-3"}),": ",r.label]}),s&&e.impactedStages&&e.impactedStages.length>0&&a.jsxs("span",{className:"inline-flex items-center gap-1",children:[a.jsx("span",{className:"text-slate-400",children:" Stage"}),e.impactedStages.map(i=>a.jsx("span",{className:"rounded-md bg-amber-100 text-amber-700 border border-amber-200 px-1.5 py-0.5 font-semibold",children:i},i))]}),e.notes&&a.jsx("span",{className:"text-slate-500",children:e.notes})]}),a.jsx("button",{className:"text-[11px] text-blue-600 hover:text-blue-700 font-semibold whitespace-nowrap",onClick:t,children:"  "})]})}const tPe={good:"border-emerald-200 bg-gradient-to-br from-white to-emerald-50/80 shadow-sm",warn:"border-amber-200 bg-gradient-to-br from-white to-amber-50/80 shadow-sm",risk:"border-red-200 bg-gradient-to-br from-white to-red-50/80 shadow-sm",neutral:"border-slate-200 bg-gradient-to-br from-white to-slate-50/60 shadow-sm"},rPe={good:"bg-emerald-500",warn:"bg-amber-500",risk:"bg-red-500",neutral:"bg-slate-400"};function nPe({kpi:e,viewMode:t,onJump:r}){const[n,s]=h.useState(!1),i=e.modeOverride?.[t],o=i?.label??e.label,l=i?.value??e.value,d=i?.valuePrefix??e.valuePrefix,u=i?.secondaryValueLine??e.secondaryValueLine,m=i?.unit??e.unit,p=i?.status??e.status??"neutral",g=m===""?l.toLocaleString():`${l}`,x=e.delta==null?null:e.delta>0?a.jsx(pU,{className:"h-3 w-3 text-emerald-500"}):e.delta<0?a.jsx(fU,{className:"h-3 w-3 text-red-500"}):a.jsx(rZ,{className:"h-3 w-3 text-slate-400"});return a.jsxs("div",{className:`relative flex flex-col justify-between rounded-xl border p-3.5 transition-all duration-200 ease-out hover:shadow-lg hover:scale-[1.04] hover:-translate-y-0.5 ${tPe[p]} ${e.jumpTo?"cursor-pointer":""}`,onClick:()=>e.jumpTo&&r?.(e.jumpTo),children:[e.help&&a.jsx("button",{className:"absolute top-2 left-2 text-slate-300 hover:text-slate-500",onClick:y=>{y.stopPropagation(),s(!n)},children:a.jsx(oC,{className:"h-3.5 w-3.5"})}),a.jsxs("div",{className:"absolute top-2 right-2 flex flex-col items-end gap-1",children:[a.jsxs("span",{className:"rounded bg-slate-100 px-1.5 py-0.5 text-[9px] text-slate-500",children:[": ",e.baseDate,"  D-1"]}),e.partialStages&&e.partialStages.length>0&&a.jsx("span",{className:"rounded bg-amber-100 px-1.5 py-0.5 text-[9px] text-amber-700",title:` : ${e.partialStages.join("/")}`,children:" "})]}),n&&e.help&&a.jsxs("div",{className:"absolute top-8 left-2 z-20 w-60 rounded-lg border border-slate-200 bg-white p-3 text-xs shadow-lg",children:[a.jsx("p",{className:"font-semibold text-slate-700 mb-1",children:e.help.title}),a.jsx("p",{className:"text-slate-500 leading-relaxed whitespace-pre-line",children:e.help.body})]}),a.jsxs("div",{className:"flex items-center gap-1.5 mb-2 mt-8",children:[a.jsx("span",{className:`h-1.5 w-1.5 rounded-full ${rPe[p]}`}),a.jsx("span",{className:"text-[11px] font-medium text-slate-500 leading-tight truncate",children:o})]}),a.jsxs("div",{className:"flex items-end gap-1.5",children:[a.jsxs("span",{className:"text-xl font-bold text-slate-800 leading-none",children:[d?`${d} `:"",g]}),m&&a.jsx("span",{className:"text-xs text-slate-400 mb-0.5",children:m})]}),u&&a.jsx("p",{className:"mt-1 text-[10px] text-slate-500 font-medium",children:u}),a.jsxs("div",{className:"flex items-center justify-between mt-2",children:[a.jsx("span",{className:"text-[10px] text-slate-400",children:e.scopeLine}),e.delta!=null&&a.jsxs("span",{className:"flex items-center gap-0.5 text-[10px] text-slate-500",children:[x,Math.abs(e.delta),m===""||m===""?"":"%p"]})]})]})}function aPe({kpis:e,viewMode:t,onJump:r}){return a.jsx("div",{className:"grid grid-cols-4 lg:grid-cols-8 gap-3",children:e.map(n=>a.jsx(nPe,{kpi:n,viewMode:t,onJump:r},n.key))})}const sPe={stage1:{bg:"bg-blue-50/60",border:"border-blue-200",accent:"text-blue-700",headerBg:"bg-blue-600"},stage2:{bg:"bg-amber-50/60",border:"border-amber-200",accent:"text-amber-700",headerBg:"bg-amber-500"},stage3:{bg:"bg-emerald-50/60",border:"border-emerald-200",accent:"text-emerald-700",headerBg:"bg-emerald-600"}},Mk={stage1:"S1",stage2:"S2",stage3:"S3"},N1={completed:{label:"",badgeClass:"bg-emerald-100 text-emerald-700 border-emerald-200"},partial:{label:" ",badgeClass:"bg-amber-100 text-amber-700 border-amber-200"},delayed:{label:"",badgeClass:"bg-orange-100 text-orange-700 border-orange-200"},failed:{label:"",badgeClass:"bg-red-100 text-red-700 border-red-200"}};function iPe(){const[e,t]=h.useState(!1);return h.useEffect(()=>{if(typeof window>"u")return;const r=window.matchMedia("(hover: none), (pointer: coarse)"),n=()=>t(r.matches||navigator.maxTouchPoints>0);return n(),r.addEventListener?.("change",n),()=>r.removeEventListener?.("change",n)},[]),e}function LV(e,t,r){const n=r.filter(i=>i.stage===e),s=!!t.impactedStages?.includes(e);return n.some(i=>i.slaStatus==="breached")||t.status==="failed"&&s?"failed":n.some(i=>i.slaStatus==="delayed")||t.status==="delayed"&&s?"delayed":n.some(i=>i.failedCount>0||i.retryCount>0)||t.status==="partial"&&s?"partial":"completed"}function oPe(e,t,r){const n=Mk[e.stageId],s=LV(n,t,r),i=N1[s].label,o=s==="partial"||s==="delayed"||s==="failed";return e.stageId==="stage1"?{dispatchState:s,meta:{stage:n,title:"Stage1  1 ",baseDate:t.baseDate,definition:"//      ",denominator:{label:"",n:e.metrics.applied},coverage:{receivedPct:e.metrics.appliedRate,partial:o,notes:t.notes},outputs:["   ","2()  / "," ( )"],caution:"     / ",modelChip:`ML ${e.processing[0]?.version??"v-"}`,dispatchChip:`: ${i}`}}:e.stageId==="stage2"?{dispatchState:s,meta:{stage:n,title:"Stage2  2 ",baseDate:t.baseDate,definition:"   ,     ",denominator:{label:"  ",n:Hd.receivedN},coverage:{receivedPct:t.receiveRate,partial:o,notes:t.notes},outputs:["AD/MCI/  ","/ ","  "],caution:"      (   )",modelChip:"ANN v1.0",dispatchChip:`: ${i}`}}:{dispatchState:s,meta:{stage:n,title:"Stage3  3  ( )",baseDate:t.baseDate,definition:"Stage1/2   MRI(CNN)   2  MCIAD (0100%) ",denominator:{label:" ",n:e.metrics.applied},coverage:{receivedPct:e.metrics.appliedRate,partial:o,notes:t.notes},outputs:["2 (MCIAD) %"," / "," "],caution:"    . MRI-CNN   .",modelChip:"ANN v2.1.0 + CNN v1.0.3",dispatchChip:`: ${i}`}}}function z8({hoverMeta:e,dispatchState:t,onOpenDetail:r}){const n=e.coverage?.receivedPct!=null?`${e.coverage.receivedPct.toFixed(1)}%`:"-",s=e.coverage?.partial?" ":"",i=N1[t];return a.jsxs("div",{className:"w-[340px] rounded-lg border border-slate-200 bg-white p-2.5 text-[11px] leading-4 shadow-xl",children:[a.jsxs("p",{className:"flex items-center justify-between gap-2 text-slate-800 font-semibold",children:[a.jsx("span",{className:"truncate",children:e.title}),a.jsx("span",{className:`shrink-0 rounded border px-1.5 py-0.5 text-[10px] font-semibold ${i.badgeClass}`,children:i.label})]}),a.jsxs("p",{className:"mt-1 truncate text-slate-500",children:["(D-1): ",e.baseDate,"  ",e.modelChip??" ","  ",e.dispatchChip??": -"]}),a.jsxs("p",{className:"mt-1 truncate text-slate-600",children:[": ",e.definition]}),a.jsxs("p",{className:"mt-1 truncate text-slate-600",children:[": ",e.denominator.label," ",e.denominator.n.toLocaleString(),"   ",n,"  ",s]}),a.jsxs("p",{className:"mt-1 truncate text-slate-600",children:[": ",e.outputs.slice(0,3).join(" / ")]}),a.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[a.jsxs("p",{className:"min-w-0 flex-1 truncate text-slate-500",children:[": ",e.caution??"-"]}),a.jsxs("button",{className:"inline-flex items-center gap-1 text-[10px] font-semibold text-blue-600 hover:text-blue-700 shrink-0",onClick:o=>{o.stopPropagation(),r()},children:[" ",a.jsx(Da,{className:"h-3 w-3"})]})]})]})}function lPe({stage:e,viewMode:t,isSelected:r,isBatchImpacted:n,hoverMeta:s,dispatchState:i,isTouchDevice:o,onOpenDetail:l,onClick:d}){const u=sPe[e.stageId],[m,p]=h.useState(!1),[g,x]=h.useState(!1),[y,N]=h.useState(!1),v=h.useCallback(()=>{x(!1),N(!1),l()},[l]),S=a.jsxs("div",{className:`relative pt-2 rounded-xl border-2 transition-all cursor-pointer ${u.bg} ${r?`${u.border} shadow-lg ring-2 ring-offset-1 ring-blue-300`:`${u.border} hover:shadow-md`}`,onClick:d,role:"button",tabIndex:0,onKeyDown:E=>{(E.key==="Enter"||E.key===" ")&&(E.preventDefault(),d())},children:[a.jsx("span",{className:"absolute left-3 -top-2.5 rounded-full border border-slate-200 bg-slate-50 px-2 py-0.5 text-[10px] font-semibold text-slate-700 whitespace-nowrap",children:e.examLabel}),a.jsxs("div",{className:`${u.headerBg} rounded-t-[10px] px-4 py-2.5 flex items-center justify-between`,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-white/80 text-xs font-mono",children:e.stageId.toUpperCase()}),a.jsx("span",{className:"text-white font-semibold text-sm",children:e.title})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[n&&a.jsx("span",{className:"rounded bg-amber-100/90 px-1.5 py-0.5 text-[9px] font-semibold text-amber-700",children:" "}),o&&a.jsxs(kV,{open:y,onOpenChange:N,children:[a.jsx(PV,{asChild:!0,children:a.jsx("button",{className:"text-[11px] font-semibold text-white/90 hover:text-white rounded px-1",onClick:E=>E.stopPropagation(),"aria-label":`${s.title} `,children:""})}),a.jsx(DV,{children:a.jsx(IV,{side:"top",align:"end",sideOffset:8,collisionPadding:12,className:"z-50 p-0 bg-transparent border-0 shadow-none",children:a.jsx(z8,{hoverMeta:s,dispatchState:i,onOpenDetail:v})})})]}),a.jsx("button",{className:"text-white/70 hover:text-white",onClick:E=>{E.stopPropagation(),p(!m)},children:m?a.jsx(Ss,{className:"h-4 w-4"}):a.jsx(di,{className:"h-4 w-4"})})]})]}),a.jsx("div",{className:"px-4 py-2 border-b border-dashed border-slate-200/80",children:a.jsx("p",{className:"text-[11px] text-slate-500 italic",children:e.purposeLine})}),e.stageId==="stage2"&&a.jsx("div",{className:"mx-4 mt-2 rounded-md border border-amber-200 bg-amber-50 px-2.5 py-1.5 text-[10px] text-amber-700 font-semibold",children:"  =      = (   )"}),e.stageId==="stage3"&&a.jsx("div",{className:"mx-4 mt-2 rounded-md border border-emerald-200 bg-emerald-50 px-2.5 py-1.5 text-[10px] text-emerald-700 font-semibold",children:"  = 2 (MCIAD, %)     "}),a.jsxs("div",{className:"px-4 py-3 grid grid-cols-2 gap-x-4 gap-y-2 text-xs",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-slate-400",children:""}),a.jsxs("span",{className:"ml-1.5 font-bold text-slate-700",children:[e.metrics.applied.toLocaleString(),""]})]}),e.metrics.appliedRate!=null&&a.jsxs("div",{children:[a.jsx("span",{className:"text-slate-400",children:""}),a.jsxs("span",{className:"ml-1.5 font-bold text-slate-700",children:[e.metrics.appliedRate,"%"]})]}),e.metrics.conversionRate!=null&&a.jsxs("div",{children:[a.jsx("span",{className:"text-slate-400",children:e.stageId==="stage3"?"2 ":""}),a.jsxs("span",{className:"ml-1.5 font-bold text-slate-700",children:[e.metrics.conversionRate,"%"]})]}),e.metrics.avgLatencyDays!=null&&a.jsxs("div",{children:[a.jsx("span",{className:"text-slate-400",children:""}),a.jsxs("span",{className:"ml-1.5 font-bold text-slate-700",children:[e.metrics.avgLatencyDays,""]})]})]}),t==="quality"&&a.jsxs("div",{className:"mx-4 mb-2 px-2.5 py-1.5 bg-amber-100/80 rounded text-[10px] text-amber-700 flex items-center gap-1",children:[a.jsx(ss,{className:"h-3 w-3"}),"   ",e.metrics.topIssues?.length??0,""]}),t==="audit"&&a.jsxs("div",{className:"mx-4 mb-2 px-2.5 py-1.5 bg-purple-100/80 rounded text-[10px] text-purple-700 flex items-center gap-1",children:[a.jsx(Yl,{className:"h-3 w-3"})," : ",e.processing[0]?.version??"-"]}),m&&a.jsxs("div",{className:"px-4 pb-3 space-y-2.5 border-t border-slate-200/60 mt-1 pt-3",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-1",children:[a.jsx(id,{className:"h-3 w-3"})," "]}),a.jsx("div",{className:"flex flex-wrap gap-1",children:e.inputs.map(E=>a.jsx("span",{className:"inline-block bg-blue-100 text-blue-700 text-[10px] px-1.5 py-0.5 rounded",children:E.name},E.name))})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-1",children:[a.jsx(hU,{className:"h-3 w-3"})," /"]}),a.jsx("div",{className:"flex flex-wrap gap-1",children:e.processing.map(E=>a.jsxs("span",{className:"inline-flex items-center gap-1 bg-slate-100 text-slate-600 text-[10px] px-1.5 py-0.5 rounded",children:[E.name,E.version&&a.jsx("span",{className:"text-slate-400 font-mono",children:E.version})]},E.name))})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-1",children:[a.jsx(ug,{className:"h-3 w-3"})," "]}),a.jsx("div",{className:"flex flex-wrap gap-1",children:e.outputs.map(E=>a.jsx("span",{className:"inline-block bg-emerald-100 text-emerald-700 text-[10px] px-1.5 py-0.5 rounded font-mono",children:E.name},E.name))})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-1",children:[a.jsx(lR,{className:"h-3 w-3"})," "]}),e.transition.map((E,C)=>a.jsxs("p",{className:"text-[10px] text-slate-500 ml-4",children:[" ",E.to==="end"?"":E.to.toUpperCase(),": ",E.ruleLine]},C))]}),e.metrics.topIssues&&e.metrics.topIssues.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-1",children:[a.jsx(ss,{className:"h-3 w-3"}),"  "]}),e.metrics.topIssues.map(E=>a.jsxs("div",{className:"flex items-center justify-between text-[10px] text-slate-500 ml-4",children:[a.jsx("span",{className:"font-mono text-slate-400",children:E.code}),a.jsx("span",{children:E.label}),a.jsx("span",{className:"font-bold text-slate-600",children:E.count.toLocaleString()})]},E.code))]})]})]});return o?S:a.jsxs(Ek,{open:g,onOpenChange:x,delayDuration:180,children:[a.jsx(jk,{asChild:!0,children:S}),a.jsx(wk,{children:a.jsxs(Ak,{side:"top",align:"end",sideOffset:8,collisionPadding:12,className:"z-50 p-0 bg-transparent border-0 shadow-none",children:[a.jsx(z8,{hoverMeta:s,dispatchState:i,onOpenDetail:v}),a.jsx(_k,{className:"fill-white"})]})})]})}function cPe({stages:e,viewMode:t,selectedStage:r,batchMeta:n,dispatchLogs:s,onSelectStage:i,onOpenStageDetail:o}){const l=iPe(),d=h.useMemo(()=>e.reduce((u,m)=>(u[m.stageId]=oPe(m,n,s),u),{}),[e,n,s]);return a.jsx(Sk,{delayDuration:180,children:a.jsx("div",{className:"flex items-stretch gap-3",children:e.map((u,m)=>{const p=d[u.stageId];return a.jsxs(Y.Fragment,{children:[a.jsx("div",{className:"flex-1 min-w-0",children:a.jsx(lPe,{stage:u,viewMode:t,isSelected:r===u.stageId,isBatchImpacted:!!n.impactedStages?.includes(Mk[u.stageId]),hoverMeta:p.meta,dispatchState:p.dispatchState,isTouchDevice:l,onClick:()=>i(u.stageId),onOpenDetail:()=>o(u.stageId)})}),m<e.length-1&&a.jsx("div",{className:"flex items-center",children:a.jsx(ug,{className:"h-5 w-5 text-slate-300"})})]},u.stageId)})})})}const iy=[{key:"input",label:"INPUT SOURCES",labelKo:" ",color:"#3b82f6",bg:"#dbeafe",bgSoft:"bg-blue-50/40",borderColor:"border-blue-200",icon:id},{key:"feature",label:"FEATURE BUILDER",labelKo:" ",color:"#8b5cf6",bg:"#ede9fe",bgSoft:"bg-violet-50/40",borderColor:"border-violet-200",icon:$X},{key:"model",label:"MODELS & RULES",labelKo:" / ",color:"#f59e0b",bg:"#fef3c7",bgSoft:"bg-amber-50/40",borderColor:"border-amber-200",icon:hU},{key:"output",label:"OUTPUTS",labelKo:"",color:"#10b981",bg:"#d1fae5",bgSoft:"bg-emerald-50/40",borderColor:"border-emerald-200",icon:ug},{key:"dispatch",label:"DISPATCH",labelKo:"",color:"#2563eb",bg:"#dbeafe",bgSoft:"bg-blue-50/30",borderColor:"border-blue-200",icon:Gl},{key:"ops",label:"DOWNSTREAM OPS",labelKo:" ",color:"#ef4444",bg:"#fee2e2",bgSoft:"bg-red-50/40",borderColor:"border-red-200",icon:lR}],WO={stage1:{bg:"bg-blue-100",text:"text-blue-600",label:"S1"},stage2:{bg:"bg-amber-100",text:"text-amber-600",label:"S2"},stage3:{bg:"bg-emerald-100",text:"text-emerald-600",label:"S3"},common:{bg:"bg-slate-100",text:"text-slate-500",label:""}};function dPe({node:e,meta:t,isSelected:r,isHovered:n,isConnected:s,dimmed:i,onSelect:o,onHover:l,onLeave:d}){const u=e.stageTag?WO[e.stageTag]:null;return a.jsxs("button",{onClick:o,onMouseEnter:l,onMouseLeave:d,className:`
        group relative w-full text-left rounded-lg border px-3 py-2.5
        transition-all duration-150 ease-out
        ${e.isExternal?"border-dashed":""}
        ${r?"shadow-md ring-2 ring-offset-1 text-white":n||s?"shadow-sm -translate-y-0.5":i?"opacity-30":"hover:shadow-sm hover:-translate-y-0.5"}
      `,style:{background:r?t.color:n?t.bg:"#ffffff",borderColor:r||n||s?t.color:e.isExternal?"#f59e0b":"#e2e8f0",...s&&!r&&!n?{borderColor:t.color,borderWidth:2}:{}},children:[u&&a.jsx("span",{className:`absolute -top-1.5 -left-1 text-[7px] font-bold px-1 py-px rounded ${r?"bg-white/30 text-white":`${u.bg} ${u.text}`}`,children:u.label}),e.isExternal&&!r&&a.jsx("span",{className:"absolute -top-1.5 -right-1 text-[7px] font-bold px-1 py-px rounded bg-amber-100 text-amber-600",children:""}),a.jsx("p",{className:`text-[11px] font-semibold leading-tight truncate ${r?"text-white":"text-slate-700"}`,children:e.label}),a.jsx("p",{className:`text-[9px] mt-0.5 leading-tight truncate ${r?"text-white/70":"text-slate-400"}`,children:e.shortDesc}),s&&!r&&a.jsx("span",{className:"absolute -top-1 -right-1 h-2.5 w-2.5 rounded-full ring-2 ring-white",style:{background:t.color}})]})}function uPe({nodes:e,edges:t,selectedNode:r,onSelectNode:n,viewMode:s}){const[i,o]=h.useState(null),l=h.useMemo(()=>{const x={};for(const y of e)(x[y.group]??=[]).push(y);return x},[e]),d=["stage1","stage2","stage3","common",void 0],u={stage1:"Stage 1",stage2:"Stage 2",stage3:"Stage 3",common:""},m=h.useMemo(()=>{const x={};for(const y of iy){const N=l[y.key]??[],v=[];for(const S of d){const E=N.filter(C=>(C.stageTag??void 0)===S);E.length>0&&v.push({tag:S??"etc",label:u[S??""]??"",nodes:E})}x[y.key]=v}return x},[l]),{connectedNodes:p}=h.useMemo(()=>{const x=i??r;if(!x)return{connectedNodes:new Set};const y=new Set;for(const N of t)(N.from===x||N.to===x)&&(y.add(N.from),y.add(N.to));return{connectedNodes:y}},[t,i,r]),g=i!=null||r!=null;return a.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:[a.jsx("div",{className:"grid grid-cols-6 border-b border-slate-100",children:iy.map(x=>{const y=x.icon;return a.jsxs("div",{className:`flex flex-col items-center gap-0.5 py-3 ${x.bgSoft} border-r last:border-r-0 ${x.borderColor}`,children:[a.jsx(y,{className:"h-4 w-4",style:{color:x.color}}),a.jsx("span",{className:"text-[10px] font-bold tracking-wider",style:{color:x.color},children:x.label}),a.jsx("span",{className:"text-[9px] text-slate-400",children:x.labelKo})]},x.key)})}),a.jsxs("div",{className:"relative",children:[a.jsx("svg",{className:"absolute inset-0 w-full h-full pointer-events-none z-0",preserveAspectRatio:"none"}),a.jsx("div",{className:"grid grid-cols-6 min-h-[420px]",children:iy.map((x,y)=>{const N=m[x.key]??[];return a.jsx("div",{className:`flex flex-col gap-1.5 p-3 ${x.bgSoft} ${y<iy.length-1?`border-r ${x.borderColor}`:""}`,children:N.map((v,S)=>a.jsxs(Y.Fragment,{children:[v.label&&a.jsx("div",{className:`flex items-center gap-1 ${S>0?"mt-2 pt-2 border-t border-dashed border-slate-200/60":""}`,children:a.jsx("span",{className:`text-[8px] font-bold px-1 py-px rounded ${WO[v.tag]?.bg??"bg-slate-100"} ${WO[v.tag]?.text??"text-slate-400"}`,children:v.label})}),v.nodes.map(E=>{const C=r===E.id,_=i===E.id,A=p.has(E.id);return a.jsx(dPe,{node:E,meta:x,isSelected:C,isHovered:_,isConnected:A&&!C&&!_,dimmed:g&&!A&&!C&&!_,onSelect:()=>n(E.id),onHover:()=>o(E.id),onLeave:()=>o(null)},E.id)})]},v.tag))},x.key)})})]}),(i||r)&&(()=>{const x=i??r,y=e.find(v=>v.id===x),N=t.filter(v=>v.from===x||v.to===x);return!y||N.length===0?null:a.jsxs("div",{className:"border-t border-slate-100 bg-slate-50/80 px-4 py-2.5",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[a.jsx("span",{className:"text-[10px] font-bold text-slate-600",children:y.label}),a.jsx("span",{className:"text-[9px] text-slate-400",children:"  "})]}),a.jsx("div",{className:"flex flex-wrap gap-1.5",children:N.map(v=>{const S=v.from===x,E=S?v.to:v.from,C=e.find(_=>_.id===E);return a.jsxs("span",{className:"inline-flex items-center gap-1 text-[9px] bg-white border border-slate-200 rounded px-2 py-0.5 text-slate-500",children:[S?"":"",a.jsx("span",{className:"font-medium text-slate-700",children:C?.label??E}),v.label&&a.jsxs("span",{className:"text-slate-300",children:["(",v.label,")"]})]},`${v.from}-${v.to}`)})})]})})(),s==="quality"&&a.jsxs("div",{className:"border-t border-amber-200 bg-amber-50 px-4 py-2 text-[10px] text-amber-700 flex items-center gap-1.5",children:[a.jsx(ss,{className:"h-3 w-3"})," :      "]}),s==="audit"&&a.jsxs("div",{className:"border-t border-purple-200 bg-purple-50 px-4 py-2 text-[10px] text-purple-700 flex items-center gap-1.5",children:[a.jsx(Yl,{className:"h-3 w-3"})," :    /   Inspector "]})]})}const fPe=[{id:"definition",label:"",icon:AQ},{id:"contract",label:" ",icon:id},{id:"quality",label:"/",icon:Yl}];function pPe({content:e,viewMode:t,selectedContext:r,stages:n,batchMeta:s,dispatchLogs:i,focusMode:o,focusNonce:l}){const[d,u]=h.useState("definition"),m=h.useRef(null),p=h.useMemo(()=>{const S={};for(const E of n)S[E.stageId]=E;return S},[n]),g=r?p[r]:null,x=g?Mk[g.stageId]:null,y=x?i.filter(S=>S.stage===x):[],N=x?LV(x,s,i):null,v=!!g;return h.useEffect(()=>{o==="stage-detail"&&v&&(l<1||(u("quality"),requestAnimationFrame(()=>{m.current?.scrollTo({top:0,behavior:"smooth"})})))},[o,l,v]),e?a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsxs("div",{className:"border-b border-slate-200 px-4 pt-3 pb-0",children:[a.jsxs("p",{className:"text-xs font-bold text-slate-700 mb-2 flex items-center gap-1.5",children:[a.jsx(rQ,{className:"h-3.5 w-3.5 text-blue-500"}),e.id]}),a.jsx("div",{className:"flex gap-1",children:fPe.map(S=>{const E=S.icon;return a.jsxs("button",{onClick:()=>u(S.id),className:`flex items-center gap-1 px-2.5 py-1.5 text-[11px] font-medium rounded-t-md transition ${d===S.id?"bg-white border border-b-0 border-slate-200 text-slate-800 -mb-px":"text-slate-400 hover:text-slate-600"}`,children:[a.jsx(E,{className:"h-3 w-3"}),S.label]},S.id)})})]}),a.jsxs("div",{ref:m,className:"flex-1 overflow-y-auto p-4 text-xs leading-relaxed space-y-3",children:[d==="definition"&&a.jsxs(a.Fragment,{children:[a.jsx(es,{title:" ",children:a.jsx("p",{className:"text-slate-600",children:e.definition.what})}),a.jsx(es,{title:" ",children:a.jsx("p",{className:"text-slate-600",children:e.definition.why})}),a.jsx(es,{title:" ",children:a.jsx("div",{className:"flex flex-wrap gap-1",children:e.definition.whereUsed.map(S=>a.jsx("span",{className:"bg-blue-50 text-blue-700 px-1.5 py-0.5 rounded text-[10px]",children:S},S))})}),a.jsx(es,{title:" ",children:a.jsxs("p",{className:"text-slate-600 font-medium bg-amber-50 px-2 py-1.5 rounded border border-amber-200",children:[" ",e.definition.responsibility]})}),e.batchSummary&&a.jsx(es,{title:"  ",children:a.jsxs("div",{className:"space-y-1.5",children:[e.batchSummary.impactedStages&&e.batchSummary.impactedStages.length>0&&a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("span",{className:"text-slate-400",children:" Stage"}),e.batchSummary.impactedStages.map(S=>a.jsx("span",{className:"rounded bg-amber-100 px-1.5 py-0.5 text-[10px] font-semibold text-amber-700",children:S},S))]}),e.batchSummary.receiveRate!=null&&a.jsxs("p",{className:"text-slate-600",children:["  : ",a.jsxs("span",{className:"font-semibold",children:[e.batchSummary.receiveRate,"%"]})]}),e.batchSummary.missingInstitutionCount!=null&&a.jsxs("p",{className:"text-slate-600",children:["  : ",a.jsxs("span",{className:"font-semibold",children:[e.batchSummary.missingInstitutionCount,""]})]}),e.batchSummary.expectedRetryAt&&a.jsxs("p",{className:"text-slate-600",children:["  : ",a.jsx("span",{className:"font-semibold",children:e.batchSummary.expectedRetryAt})]})]})})]}),d==="contract"&&a.jsxs(a.Fragment,{children:[e.dataContract.inputs&&a.jsx(es,{title:" ",children:a.jsxs("table",{className:"w-full text-[10px]",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-slate-400 border-b border-slate-100",children:[a.jsx("th",{className:"text-left py-1",children:""}),a.jsx("th",{className:"text-left py-1",children:""}),a.jsx("th",{className:"text-center py-1",children:"null"}),a.jsx("th",{className:"text-left py-1",children:""})]})}),a.jsx("tbody",{children:e.dataContract.inputs.map(S=>a.jsxs("tr",{className:"border-b border-slate-50",children:[a.jsx("td",{className:"py-1 font-mono text-slate-700",children:S.field}),a.jsx("td",{className:"py-1 text-slate-500",children:S.type}),a.jsx("td",{className:"py-1 text-center",children:S.nullable?"":""}),a.jsx("td",{className:"py-1 text-slate-400",children:S.note??""})]},S.field))})]})}),e.dataContract.outputs&&a.jsx(es,{title:" ",children:a.jsxs("table",{className:"w-full text-[10px]",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-slate-400 border-b border-slate-100",children:[a.jsx("th",{className:"text-left py-1",children:""}),a.jsx("th",{className:"text-left py-1",children:""}),a.jsx("th",{className:"text-center py-1",children:"null"}),a.jsx("th",{className:"text-left py-1",children:""})]})}),a.jsx("tbody",{children:e.dataContract.outputs.map(S=>a.jsxs("tr",{className:"border-b border-slate-50",children:[a.jsx("td",{className:"py-1 font-mono text-slate-700",children:S.field}),a.jsx("td",{className:"py-1 text-slate-500",children:S.type}),a.jsx("td",{className:"py-1 text-center",children:S.nullable?"":""}),a.jsx("td",{className:"py-1 text-slate-400",children:S.note??""})]},S.field))})]})}),e.dataContract.refreshCadence&&a.jsx(es,{title:" ",children:a.jsxs("span",{className:"inline-flex items-center gap-1 bg-slate-100 text-slate-600 px-2 py-1 rounded",children:[a.jsx(Bl,{className:"h-3 w-3"}),e.dataContract.refreshCadence]})})]}),d==="quality"&&a.jsxs(a.Fragment,{children:[v&&g&&N&&a.jsxs(a.Fragment,{children:[a.jsx(es,{title:"Daily Batch Timeline",children:a.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 p-2.5 text-[11px] text-slate-600 space-y-1",children:[a.jsxs("p",{className:"flex items-center justify-between",children:[a.jsx("span",{children:g.examLabel}),a.jsx("span",{className:`rounded border px-1.5 py-0.5 text-[10px] font-semibold ${N1[N].badgeClass}`,children:N1[N].label})]}),a.jsxs("p",{children:["(D-1): ",s.baseDate]}),a.jsxs("p",{children:["  ",s.receiveDeadline,"   ",s.modelWindow,"   ",s.dispatchTime]}),s.impactedStages?.includes(x)&&a.jsxs("p",{className:"text-amber-700",children:["   Stage (",x,")"]})]})}),a.jsx(es,{title:"Model Meta",children:a.jsxs("div",{className:"rounded-md border border-slate-200 bg-white p-2.5 text-[11px] text-slate-600 space-y-1",children:[g.processing.map(S=>a.jsxs("p",{children:[S.name,S.version?a.jsx("span",{className:"ml-1 text-slate-400 font-mono",children:S.version}):null]},S.name)),a.jsx("p",{className:"text-slate-500",children:g.stageId==="stage2"?"  =   /   = (   )":g.stageId==="stage3"?"2 (MCIAD, %)     / MRI-CNN   ":" /  "})]})}),a.jsx(es,{title:"Dispatch Log",children:a.jsxs("table",{className:"w-full text-[10px]",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-slate-400 border-b border-slate-100",children:[a.jsx("th",{className:"text-left py-1",children:""}),a.jsx("th",{className:"text-right py-1",children:""}),a.jsx("th",{className:"text-right py-1",children:"/"}),a.jsx("th",{className:"text-left py-1",children:"SLA"})]})}),a.jsxs("tbody",{children:[y.map(S=>a.jsxs("tr",{className:"border-b border-slate-50 text-slate-600",children:[a.jsx("td",{className:"py-1",children:S.destination}),a.jsx("td",{className:"py-1 text-right",children:S.sentCount.toLocaleString()}),a.jsxs("td",{className:"py-1 text-right",children:[S.failedCount,"/",S.retryCount]}),a.jsx("td",{className:"py-1",children:S.slaStatus})]},`${S.stage}-${S.destination}`)),y.length===0&&a.jsx("tr",{children:a.jsx("td",{className:"py-2 text-slate-400",colSpan:4,children:"  ."})})]})]})})]}),!v&&e.batchSummary?.impactedMetrics&&e.batchSummary.impactedMetrics.length>0&&a.jsx(es,{title:" ",children:a.jsx("div",{className:"flex flex-wrap gap-1",children:e.batchSummary.impactedMetrics.map(S=>a.jsx("span",{className:"rounded bg-amber-100 px-1.5 py-0.5 text-[10px] font-medium text-amber-700",children:S},S))})}),e.qualityAudit.missingRate!=null&&a.jsx(es,{title:" ",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"flex-1 bg-slate-100 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full ${e.qualityAudit.missingRate>5?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${Math.min(e.qualityAudit.missingRate*5,100)}%`}})}),a.jsxs("span",{className:"text-slate-600 font-bold",children:[e.qualityAudit.missingRate,"%"]})]})}),e.qualityAudit.driftSignals&&e.qualityAudit.driftSignals.length>0&&a.jsx(es,{title:"Drift ",children:e.qualityAudit.driftSignals.map(S=>a.jsxs("div",{className:"flex items-start gap-2 bg-slate-50 p-2 rounded mb-1",children:[a.jsx(q8,{level:S.level}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-slate-700",children:S.name}),a.jsx("p",{className:"text-slate-400",children:S.note})]})]},S.name))}),e.qualityAudit.biasAlerts&&e.qualityAudit.biasAlerts.length>0&&a.jsx(es,{title:" ",children:e.qualityAudit.biasAlerts.map(S=>a.jsxs("div",{className:"flex items-start gap-2 bg-slate-50 p-2 rounded mb-1",children:[a.jsx(q8,{level:S.level}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-slate-700",children:S.group}),a.jsx("p",{className:"text-slate-400",children:S.note})]})]},S.group))}),e.qualityAudit.changeLog&&e.qualityAudit.changeLog.length>0&&a.jsx(es,{title:" ",children:a.jsx("div",{className:"space-y-1.5",children:e.qualityAudit.changeLog.map(S=>a.jsx("div",{className:"flex items-start gap-2 border-l-2 border-blue-300 pl-2.5",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-mono font-semibold text-blue-600",children:S.version}),a.jsx("span",{className:"text-slate-400",children:S.date})]}),a.jsx("p",{className:"text-slate-600",children:S.summary}),S.impact&&a.jsxs("p",{className:"text-slate-400 mt-0.5",children:[": ",S.impact]})]})},S.version+S.date))})}),!v&&e.batchSummary?.dispatchLogs&&e.batchSummary.dispatchLogs.length>0&&a.jsx(es,{title:"DISPATCH ",children:a.jsxs("table",{className:"w-full text-[10px]",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-slate-400 border-b border-slate-100",children:[a.jsx("th",{className:"text-left py-1",children:"Stage"}),a.jsx("th",{className:"text-left py-1",children:""}),a.jsx("th",{className:"text-right py-1",children:""}),a.jsx("th",{className:"text-right py-1",children:"/"}),a.jsx("th",{className:"text-left py-1",children:"SLA"})]})}),a.jsx("tbody",{children:e.batchSummary.dispatchLogs.map(S=>a.jsxs("tr",{className:"border-b border-slate-50 text-slate-600",children:[a.jsx("td",{className:"py-1 font-semibold",children:S.stage}),a.jsx("td",{className:"py-1",children:S.destination}),a.jsx("td",{className:"py-1 text-right",children:S.sentCount.toLocaleString()}),a.jsxs("td",{className:"py-1 text-right",children:[S.failedCount,"/",S.retryCount]}),a.jsx("td",{className:"py-1",children:S.slaStatus})]},`${S.stage}-${S.destination}`))})]})})]})]})]}):a.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400 text-xs p-6",children:[a.jsx(gm,{className:"h-8 w-8 mb-2 text-slate-300"}),a.jsx("p",{children:"     "}),a.jsx("p",{children:"    ."})]})}function es({title:e,children:t}){return a.jsxs("div",{children:[a.jsx("h4",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-1.5",children:e}),t]})}function q8({level:e}){const t={low:"bg-emerald-100 text-emerald-700",mid:"bg-amber-100 text-amber-700",high:"bg-red-100 text-red-700"};return a.jsx("span",{className:`inline-block text-[9px] font-bold px-1.5 py-0.5 rounded ${t[e]}`,children:e.toUpperCase()})}function mPe(){const[e,t]=h.useState("ops"),[r,n]=h.useState(null),[s,i]=h.useState("default"),[o,l]=h.useState(0),d=Z0,u=h.useRef({}),m=h.useCallback(y=>{n(y),i("default"),u.current[y]?.scrollIntoView({behavior:"smooth",block:"center"})},[]),p=h.useCallback(y=>{n(y),i("default")},[]),g=h.useCallback(y=>{n(y),i("stage-detail"),l(N=>N+1),u.current[y]?.scrollIntoView({behavior:"smooth",block:"center"})},[]),x=r?Q5e[r]??null:null;return a.jsxs("div",{className:"h-full flex flex-col overflow-hidden bg-slate-50",children:[a.jsxs("div",{className:"bg-slate-700 text-slate-300 text-[10px] text-center py-1.5 px-4 flex-shrink-0",children:[a.jsx(hm,{className:"inline h-3 w-3 mr-1 -mt-0.5"}),"      ,     .        ."]}),a.jsxs("div",{className:"flex items-center justify-between px-5 py-3 bg-white border-b border-slate-200 flex-shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h1",{className:"text-base font-bold text-slate-800",children:"  "}),a.jsx("span",{className:"text-[10px] text-slate-400 bg-slate-100 px-2 py-0.5 rounded",children:" : 2026-02-13 09:00"})]}),a.jsx(Z5e,{mode:e,onChange:t})]}),a.jsx(ePe,{meta:d,onOpenDetail:()=>p("batch-cycle")}),a.jsxs("div",{className:"flex-1 flex min-h-0 overflow-hidden",children:[a.jsxs("div",{className:"flex-1 overflow-y-auto p-5 space-y-5",children:[a.jsxs("section",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx("h2",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Pipeline KPI"}),a.jsx("span",{className:"text-[9px] bg-slate-100 text-slate-400 px-1.5 py-0.5 rounded",children:e==="ops"?" ":e==="quality"?" ":" "})]}),a.jsx(aPe,{kpis:V5e,viewMode:e,onJump:m})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-3",children:"3  "}),a.jsx("div",{ref:y=>{u.current.stage1=y}}),a.jsx(cPe,{stages:X_,viewMode:e,batchMeta:d,dispatchLogs:Wp,selectedStage:r,onSelectStage:p,onOpenStageDetail:g}),X_.map(y=>a.jsx("div",{ref:N=>{u.current[y.stageId]=N}},y.stageId))]}),a.jsxs("section",{children:[a.jsxs("h2",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-3 flex items-center gap-2",children:["Model Use Map    ",a.jsx("span",{className:"text-[9px] bg-slate-100 text-slate-400 px-1.5 py-0.5 rounded font-normal normal-case",children:"    Inspector "})]}),a.jsx(uPe,{nodes:Y5e,edges:X5e,selectedNode:r,onSelectNode:p,viewMode:e})]}),a.jsxs("section",{className:"bg-white rounded-xl border border-slate-200 p-4",children:[a.jsxs("h3",{className:"text-xs font-bold text-slate-700 mb-2 flex items-center gap-1.5",children:[a.jsx(hm,{className:"h-3.5 w-3.5 text-amber-500"}),"Stage 2      "]}),a.jsx("div",{className:"rounded-lg border border-amber-200 bg-amber-50 px-3 py-2 mb-3 text-[11px] font-semibold text-amber-700",children:"  =      = (   )"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 text-[11px]",children:[a.jsxs("div",{className:"bg-amber-50 rounded-lg p-3 border border-amber-200",children:[a.jsx("p",{className:"font-semibold text-amber-700 mb-1",children:"2   (  )"}),a.jsx("p",{className:"text-amber-600",children:"    (AD / MCI / )"}),a.jsx("p",{className:"text-amber-500 mt-1 italic",children:"  /  "})]}),a.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 border border-blue-200",children:[a.jsx("p",{className:"font-semibold text-blue-700 mb-1",children:"  "}),a.jsx("p",{className:"text-blue-600",children:" /  /  "}),a.jsx("p",{className:"text-blue-500 mt-1 italic",children:"   ,     "})]})]}),d.status==="partial"&&a.jsxs("p",{className:"mt-3 text-[11px] text-amber-700",children:["  :  ",d.receiveRate,"%    ",d.missingInstitutionCount,"    ",d.expectedRetryAt]})]}),a.jsxs("section",{className:"bg-slate-100/50 rounded-xl border border-slate-200 p-4",children:[a.jsxs("h3",{className:"text-xs font-bold text-slate-600 mb-2 flex items-center gap-1.5",children:[a.jsx(bU,{className:"h-3.5 w-3.5"}),"View Mode "]}),a.jsxs("div",{className:"grid grid-cols-3 gap-3 text-[10px]",children:[a.jsxs("div",{className:`p-2.5 rounded-lg border ${e==="ops"?"bg-blue-50 border-blue-300":"bg-white border-slate-200"}`,children:[a.jsx("p",{className:"font-semibold text-blue-700",children:" "}),a.jsx("p",{className:"text-slate-500 mt-0.5",children:", , , "})]}),a.jsxs("div",{className:`p-2.5 rounded-lg border ${e==="quality"?"bg-amber-50 border-amber-300":"bg-white border-slate-200"}`,children:[a.jsx("p",{className:"font-semibold text-amber-700",children:" "}),a.jsx("p",{className:"text-slate-500 mt-0.5",children:", drift,  "})]}),a.jsxs("div",{className:`p-2.5 rounded-lg border ${e==="audit"?"bg-purple-50 border-purple-300":"bg-white border-slate-200"}`,children:[a.jsx("p",{className:"font-semibold text-purple-700",children:" "}),a.jsx("p",{className:"text-slate-500 mt-0.5",children:"/ ,  , SLA"})]})]})]})]}),a.jsx("div",{className:"w-80 border-l border-slate-200 bg-white flex-shrink-0",children:a.jsx(pPe,{content:x,viewMode:e,selectedContext:r,stages:X_,batchMeta:d,dispatchLogs:Wp,focusMode:s,focusNonce:o})})]})]})}function hPe(){return a.jsx(mPe,{})}const gPe=720*60*60*1e3,$V={Stage1:["signalQuality","bottleneckRisk"],Stage2:["dataReadiness","bottleneckRisk"],Stage3:["governanceSafety","dataQuality"]},Q_={signalQuality:{label:"",chipClass:"bg-blue-50 text-blue-700 border-blue-200",stroke:"#2563eb"},policyImpact:{label:"",chipClass:"bg-violet-50 text-violet-700 border-violet-200",stroke:"#7c3aed"},bottleneckRisk:{label:"",chipClass:"bg-red-50 text-red-700 border-red-200",stroke:"#dc2626"},dataReadiness:{label:" ",chipClass:"bg-emerald-50 text-emerald-700 border-emerald-200",stroke:"#059669"},dataQuality:{label:" ",chipClass:"bg-cyan-50 text-cyan-700 border-cyan-200",stroke:"#0891b2"},governanceSafety:{label:"",chipClass:"bg-amber-50 text-amber-700 border-amber-200",stroke:"#d97706"}},xPe={model_version_change:"  ",rule_parameter_change:"  ",guardrail_change:"Guardrail "},bPe={none:{label:" ",className:"bg-slate-100 text-slate-600 border-slate-200"},watch:{label:"",className:"bg-amber-50 text-amber-700 border-amber-200"},warning:{label:"",className:"bg-red-50 text-red-700 border-red-200"}},yPe={rule_threshold:"Stage1",model_version:"Stage2",ruleset:"Stage2",contact_rule:"Stage3"},vPe={rule_threshold:"rule_parameter_change",model_version:"model_version_change",ruleset:"guardrail_change",contact_rule:"guardrail_change"},NPe={chg_20260124:{stage:"Stage1",changeType:"rule_parameter_change",targetName:"L2  ",summaryLine:"60~64        .",scope:"",scopeDetail:" 6 ",beforeLabel:"",beforeValue:"  65  L2",afterLabel:"",afterValue:"  60  L2 ()",reason:" 3  60~64          .",observedKpis:["policyImpact"],sparklineByKpi:{signalQuality:[89.8,89.7,89.8,89.8,89.9,89.8,89.8],bottleneckRisk:[41.5,41.7,41.8,41.9,41.8,41.8,41.9],policyImpact:[24,24.8,25.6,26.1,26.4,26.2,26]},deltaPpByKpi:{signalQuality:0,bottleneckRisk:.4,policyImpact:2},topRegions:[" "," "," "]},chg_20260120:{stage:"Stage1",changeType:"rule_parameter_change",targetName:"L2  ",summaryLine:"    Stage1    .",scope:"",scopeDetail:" 17 ",beforeLabel:"",beforeValue:"  60  L2",afterLabel:"",afterValue:"  65  L2",observedKpis:["policyImpact"],sparklineByKpi:{signalQuality:[88.9,89.1,89.3,89.5,89.7,89.8,89.8],bottleneckRisk:[44,43.4,42.9,42.3,41.9,41.5,41.1],policyImpact:[31.2,30.4,29.8,29.1,28.8,28.5,28.1]},deltaPpByKpi:{signalQuality:.9,bottleneckRisk:-2.9,policyImpact:-3.1},topRegions:[" "," "," "]},chg_20260115:{stage:"Stage3",changeType:"guardrail_change",targetName:"L3  ",summaryLine:"    /   .",scope:"",scopeDetail:"",beforeLabel:" ",beforeValue:" 7 ",afterLabel:" ",afterValue:" 5 ",observedKpis:["policyImpact"],sparklineByKpi:{governanceSafety:[95,95.1,95.3,95.6,95.8,95.9,96.1],dataQuality:[94.2,94.4,94.5,94.6,94.8,94.8,94.9],policyImpact:[27.5,27.2,27,26.8,26.6,26.4,26.3]},deltaPpByKpi:{governanceSafety:1.1,dataQuality:.7,policyImpact:-1.2},topRegions:[" "," "," "]},chg_20260110:{stage:"Stage2",changeType:"model_version_change",targetName:"  ",summaryLine:"    Stage2     .",scope:"",scopeDetail:" 17 ",beforeLabel:" ",beforeValue:"v3.1.4",afterLabel:" ",afterValue:"v3.2.0",observedKpis:["policyImpact"],sparklineByKpi:{dataReadiness:[93.2,93.3,93.5,93.6,93.7,93.8,93.8],bottleneckRisk:[45,44.3,43.8,43.4,43,42.7,42.4],policyImpact:[25.4,24.8,24.2,23.8,23.2,22.8,22.3]},deltaPpByKpi:{dataReadiness:.6,bottleneckRisk:-2.6,policyImpact:-3.1},topRegions:[" "," "," "]},chg_20260105:{stage:"Stage2",changeType:"rule_parameter_change",targetName:"  ",summaryLine:"       .",scope:"",scopeDetail:" 17 ",beforeLabel:"",beforeValue:"1.20",afterLabel:"",afterValue:"1.35 ( 1.20 )",observedKpis:["policyImpact"],sparklineByKpi:{dataReadiness:[93.5,93.3,93.1,92.9,93,93.2,93.4],bottleneckRisk:[40.2,43.6,46.8,48.1,47.4,44,41.4],policyImpact:[34,39.2,46.4,52.1,57.2,50.6,41.3]},deltaPpByKpi:{dataReadiness:-.1,bottleneckRisk:1.2,policyImpact:7.3},topRegions:[" "," "," "]}};function SPe(e){const t=new Date(e);return{date:t.toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"}),time:t.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!1})}}function EPe(e){return Array.from(new Set(e))}function jPe(e){const t=Math.max(0,...e.impactSummary.map(r=>Math.abs(r.changePp)));return e.status==="rollback"||t>=2?"warning":t>=.5||e.status==="deployed"?"watch":"none"}function wPe(e){const t=yPe[e.type],r=$V[t];return{stage:t,changeType:vPe[e.type],targetName:e.title,summaryLine:"KPI       .",scope:e.affectedRegions[0]===""?"":"",scopeDetail:e.affectedRegions.join(", "),beforeLabel:"",beforeValue:e.version,afterLabel:"",afterValue:e.version,reason:e.reason,observedKpis:["policyImpact"],sparklineByKpi:{[r[0]]:[0,0,0,0,0,0,0],[r[1]]:[0,0,0,0,0,0,0],policyImpact:[0,0,0,0,0,0,0]},deltaPpByKpi:{[r[0]]:0,[r[1]]:0,policyImpact:0},topRegions:e.affectedRegions.slice(0,3)}}function APe(e,t){const r=e.replace("#",""),n=r.length===3?r.split("").map(l=>l+l).join(""):r.padEnd(6,"0").slice(0,6),s=parseInt(n.slice(0,2),16),i=parseInt(n.slice(2,4),16),o=parseInt(n.slice(4,6),16);return`rgba(${s}, ${i}, ${o}, ${t})`}function _Pe(e){if(!e.length)return"";if(e.length===1)return`M ${e[0].x} ${e[0].y}`;const t=[`M ${e[0].x} ${e[0].y}`];for(let r=0;r<e.length-1;r+=1){const n=e[r],s=e[r+1],i=(n.x+s.x)/2;t.push(`C ${i} ${n.y}, ${i} ${s.y}, ${s.x} ${s.y}`)}return t.join(" ")}function CPe(e,t,r){if(!e||t.length<2)return"";const n=t[0],s=t[t.length-1];return`${e} L ${s.x} ${r} L ${n.x} ${r} Z`}function TPe({points:e,stroke:t,chartId:r}){if(e.length<2)return a.jsx("div",{className:"h-20 w-full rounded-lg border border-slate-100 bg-slate-50"});const n=r.replace(/[^a-zA-Z0-9_-]/g,""),s=4,i=32,o=31,l=Math.max(...e),d=Math.min(...e),u=l-d||1,m=100/(e.length-1),p=e.map((v,S)=>({x:Number((S*m).toFixed(2)),y:Number((i-(v-d)/u*(i-s)).toFixed(2))})),g=_Pe(p),x=CPe(g,p,o),y=p[p.length-1],N=p[0];return a.jsxs("div",{className:"rounded-lg border border-slate-100 bg-white p-2",children:[a.jsxs("svg",{viewBox:"0 0 100 34",className:"h-16 w-full",children:[a.jsxs("defs",{children:[a.jsxs("linearGradient",{id:`fill-${n}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:t,stopOpacity:"0.32"}),a.jsx("stop",{offset:"100%",stopColor:t,stopOpacity:"0.02"})]}),a.jsxs("radialGradient",{id:`halo-${n}`,cx:"50%",cy:"50%",r:"50%",children:[a.jsx("stop",{offset:"0%",stopColor:t,stopOpacity:"0.42"}),a.jsx("stop",{offset:"100%",stopColor:t,stopOpacity:"0"})]})]}),[6,14,22,30].map(v=>a.jsx("line",{x1:0,y1:v,x2:100,y2:v,stroke:"#e2e8f0",strokeDasharray:"2.5 2.5",strokeWidth:.6},`${n}-grid-${v}`)),a.jsx("path",{d:x,fill:`url(#fill-${n})`}),a.jsx("path",{d:g,fill:"none",stroke:t,strokeWidth:2.1,strokeLinecap:"round"}),a.jsx("circle",{cx:N.x,cy:N.y,r:1.6,fill:"#ffffff",stroke:t,strokeWidth:1.2}),a.jsx("circle",{cx:y.x,cy:y.y,r:4.6,fill:`url(#halo-${n})`}),a.jsx("circle",{cx:y.x,cy:y.y,r:2.1,fill:"#ffffff",stroke:t,strokeWidth:1.4})]}),a.jsxs("div",{className:"mt-1.5 flex items-center justify-between text-[10px] text-slate-500",children:[a.jsxs("span",{children:["D1 ",e[0].toFixed(1)]}),a.jsxs("span",{children:[d.toFixed(1)," ~ ",l.toFixed(1)]}),a.jsxs("span",{children:["D7 ",e[e.length-1].toFixed(1)]})]})]})}function OPe({context:e,onNavigate:t}){const[r,n]=h.useState(e?.changeId??""),[s,i]=h.useState({}),[o,l]=h.useState([]);h.useEffect(()=>{let p=!1;return gV().then(g=>{p||l(g)}).catch(()=>{p||l([])}),()=>{p=!0}},[]);const d=h.useMemo(()=>[...o].sort((p,g)=>new Date(g.deployedAt).getTime()-new Date(p.deployedAt).getTime()).map(p=>{const g=NPe[p.id]??wPe(p),x=$V[g.stage],y=EPe([...x,...g.observedKpis]);return{event:p,extension:g,stageLinkedKpis:x,impactKpis:y,impactStatus:jPe(p),rollback:p.status==="rollback"}}),[o]);h.useEffect(()=>{e?.changeId&&n(e.changeId)},[e?.changeId]),h.useEffect(()=>{if(!d.length)return;d.some(g=>g.event.id===r)||n(d[0].event.id)},[d,r]);const u=h.useMemo(()=>d.find(p=>p.event.id===r)??d[0]??null,[d,r]),m=h.useMemo(()=>{const p=Date.now(),g=d.filter(E=>p-new Date(E.event.deployedAt).getTime()<=gPe),x=g.length>0?g:d,y=x.filter(E=>E.impactStatus!=="none").length,N=x.filter(E=>E.rollback).length,v={Stage1:0,Stage2:0,Stage3:0};x.forEach(E=>{v[E.extension.stage]+=1});const S=x.length?Number((y/x.length*100).toFixed(1)):0;return{recentCount:x.length,impactRatio:S,rollbackCount:N,stageDistribution:v}},[d]);return u?a.jsxs("div",{className:"space-y-4 p-1",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"/   "}),a.jsx("p",{className:"mt-1 text-xs text-slate-500",children:" ,    KPI  Stage1~3    ."})]}),a.jsx("div",{className:"sticky top-0 z-10 rounded-xl border border-slate-200 bg-white/95 px-4 py-3 backdrop-blur",children:a.jsxs("div",{className:"flex flex-wrap items-center gap-x-6 gap-y-2 text-xs text-slate-700",children:[a.jsxs("span",{children:[" 30   ",a.jsxs("strong",{className:"ml-1 text-slate-900",children:[m.recentCount,""]})]}),a.jsxs("span",{children:[" KPI   ",a.jsxs("strong",{className:"ml-1 text-slate-900",children:[m.impactRatio,"%"]})]}),a.jsxs("span",{children:["   ",a.jsxs("strong",{className:"ml-1 text-slate-900",children:[m.rollbackCount,""]})]}),a.jsxs("span",{children:["Stage  "," ",a.jsxs("strong",{className:"ml-1 text-slate-900",children:["Stage1 ",m.stageDistribution.Stage1,"  Stage2 ",m.stageDistribution.Stage2,"  Stage3 ",m.stageDistribution.Stage3]})]})]})}),a.jsxs(Or,{children:[a.jsxs(Dn,{className:"pb-2",children:[a.jsx(In,{className:"text-sm",children:"  (KPI  )"}),a.jsx("p",{className:"text-[11px] text-slate-500",children:"       KPI   ."})]}),a.jsx(Rr,{className:"p-0",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-[1200px] w-full text-xs",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-y border-slate-200 bg-slate-50 text-slate-600",children:[a.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:""}),a.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:" "}),a.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:"Stage"}),a.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:" /"}),a.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:" "}),a.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:" KPI"}),a.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:" "}),a.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:" "})]})}),a.jsx("tbody",{children:d.map(p=>{const g=u.event.id===p.event.id,{date:x,time:y}=SPe(p.event.deployedAt),N=!!s[p.event.id],v=bPe[p.impactStatus];return a.jsxs(Y.Fragment,{children:[a.jsxs("tr",{onClick:()=>n(p.event.id),className:`cursor-pointer border-b border-slate-100 transition-colors ${g?"bg-blue-50/40":"hover:bg-slate-50"}`,children:[a.jsx("td",{className:"px-3 py-2 align-top",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("button",{onClick:S=>{S.stopPropagation(),i(E=>({...E,[p.event.id]:!E[p.event.id]}))},className:"mt-0.5 rounded p-0.5 text-slate-500 hover:bg-slate-100","aria-label":"  ",children:N?a.jsx(Ss,{className:"h-3.5 w-3.5"}):a.jsx(di,{className:"h-3.5 w-3.5"})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-slate-900",children:x}),a.jsx("div",{className:"text-[11px] text-slate-500",children:y})]})]})}),a.jsx("td",{className:"px-3 py-2 align-top text-slate-700",children:xPe[p.extension.changeType]}),a.jsx("td",{className:"px-3 py-2 align-top",children:a.jsx("span",{className:"inline-flex rounded border border-slate-200 bg-white px-2 py-0.5 text-[11px] font-medium text-slate-700",children:p.extension.stage})}),a.jsx("td",{className:"px-3 py-2 align-top font-medium text-slate-900",children:p.extension.targetName}),a.jsx("td",{className:"px-3 py-2 align-top text-slate-700",children:p.extension.summaryLine}),a.jsx("td",{className:"px-3 py-2 align-top",children:a.jsx("div",{className:"flex flex-wrap gap-1",children:p.impactKpis.map(S=>{const E=Q_[S];return a.jsx("span",{className:`inline-flex rounded border px-1.5 py-0.5 text-[10px] font-medium ${E.chipClass}`,children:E.label},`${p.event.id}-${S}`)})})}),a.jsx("td",{className:"px-3 py-2 align-top",children:a.jsx("span",{className:`inline-flex rounded border px-2 py-0.5 text-[11px] font-medium ${v.className}`,children:v.label})}),a.jsx("td",{className:"px-3 py-2 align-top",children:p.rollback?a.jsx("span",{className:"text-[11px] font-semibold text-red-600",children:""}):a.jsx("span",{className:"text-[11px] text-slate-400",children:""})})]}),N&&a.jsx("tr",{className:"border-b border-slate-100 bg-slate-50/70",children:a.jsxs("td",{colSpan:8,className:"px-4 py-3",children:[a.jsx("div",{className:"text-[11px] font-semibold text-slate-600",children:" "}),a.jsx("p",{className:"mt-1 text-xs leading-relaxed text-slate-700",children:p.extension.reason||p.event.reason||"  ."})]})})]},p.event.id)})})]})})})]}),a.jsxs("div",{className:"grid grid-cols-12 gap-4",children:[a.jsx("div",{className:"col-span-12 lg:col-span-6",children:a.jsxs(Or,{className:"h-full",children:[a.jsxs(Dn,{className:"pb-2",children:[a.jsx(In,{className:"text-sm",children:" "}),a.jsx("p",{className:"text-[11px] text-slate-500",children:" / ,  ,  Stage  ."})]}),a.jsxs(Rr,{className:"space-y-3",children:[a.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[a.jsx("div",{className:"text-[11px] text-slate-500",children:" /"}),a.jsx("div",{className:"mt-0.5 text-sm font-semibold text-slate-900",children:u.extension.targetName}),a.jsxs("div",{className:"mt-2 flex flex-wrap gap-1.5",children:[a.jsxs("span",{className:"rounded border border-slate-200 bg-slate-50 px-2 py-0.5 text-[11px] font-medium text-slate-700",children:[" Stage: ",u.extension.stage]}),a.jsxs("span",{className:"rounded border border-slate-200 bg-slate-50 px-2 py-0.5 text-[11px] font-medium text-slate-700",children:[" : ",u.extension.scope]}),a.jsx("span",{className:"rounded border border-slate-200 bg-slate-50 px-2 py-0.5 text-[11px] font-medium text-slate-700",children:u.extension.scopeDetail})]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[a.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[a.jsx("div",{className:"text-[11px] text-slate-500",children:" "}),a.jsx("div",{className:"mt-1 text-sm font-semibold text-slate-900",children:u.extension.beforeValue}),a.jsx("div",{className:"mt-0.5 text-[11px] text-slate-500",children:u.extension.beforeLabel})]}),a.jsxs("div",{className:"rounded-lg border border-blue-200 bg-blue-50/40 p-3",children:[a.jsx("div",{className:"text-[11px] text-blue-600",children:" "}),a.jsx("div",{className:"mt-1 text-sm font-semibold text-blue-900",children:u.extension.afterValue}),a.jsx("div",{className:"mt-0.5 text-[11px] text-blue-700",children:u.extension.afterLabel})]})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[a.jsx("div",{className:"text-[11px] text-slate-500",children:"Stage   KPI"}),a.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:u.stageLinkedKpis.map(p=>{const g=Q_[p];return a.jsx("span",{className:`inline-flex rounded border px-1.5 py-0.5 text-[10px] font-medium ${g.chipClass}`,children:g.label},`stage-link-${p}`)})})]})]})]})}),a.jsx("div",{className:"col-span-12 lg:col-span-6",children:a.jsxs(Or,{className:"h-full",children:[a.jsxs(Dn,{className:"pb-2",children:[a.jsx(In,{className:"text-sm",children:"KPI "}),a.jsx("p",{className:"text-[11px] text-slate-500",children:"  7 KPI  "})]}),a.jsxs(Rr,{className:"space-y-3",children:[u.stageLinkedKpis.map(p=>{const g=Q_[p],x=u.extension.sparklineByKpi[p]??[],y=u.extension.deltaPpByKpi[p]??0,N=x[0]??0,v=x[x.length-1]??0,S=v-N,E=S>.15?" ":S<-.15?" ":" ",C=S>.15?"text-emerald-700":S<-.15?"text-red-700":"text-slate-600";return a.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 shadow-sm",style:{backgroundImage:`linear-gradient(135deg, ${APe(g.stroke,.16)} 0%, #ffffff 52%, #f8fafc 100%)`},children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("span",{className:`inline-flex rounded border px-1.5 py-0.5 text-[10px] font-medium ${g.chipClass}`,children:g.label}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:`text-xs font-semibold ${y>=0?"text-emerald-600":"text-red-600"}`,children:[" ",y>=0?"+":"",y.toFixed(1),"pp"]}),a.jsx("div",{className:"text-[10px] text-slate-500",children:"7 "})]})]}),a.jsx("div",{className:"mt-2",children:a.jsx(TPe,{points:x,stroke:g.stroke,chartId:`${u.event.id}-${p}`})}),a.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[a.jsx("span",{className:`text-[10px] font-medium ${C}`,children:E}),a.jsxs("span",{className:"text-[10px] text-slate-500",children:[" ",N.toFixed(1),"   ",v.toFixed(1)]})]})]},`spark-${p}`)}),a.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[a.jsx("div",{className:"text-[11px] text-slate-500",children:"   Top3"}),a.jsx("div",{className:"mt-1 flex flex-wrap gap-1.5",children:u.extension.topRegions.slice(0,3).map(p=>a.jsx("span",{className:"rounded border border-slate-200 bg-slate-50 px-2 py-0.5 text-[11px] font-medium text-slate-700",children:p},`${u.event.id}-${p}`))})]}),a.jsx("p",{className:"text-[11px] text-slate-500",children:" KPI        ."}),a.jsxs("div",{className:"flex flex-wrap gap-2 pt-1",children:[a.jsxs("button",{onClick:()=>t?.("quality-monitoring",{changeId:u.event.id}),className:"inline-flex items-center gap-1 rounded border border-slate-200 px-2 py-1 text-[11px] font-medium text-slate-700 hover:bg-slate-50",children:["  ",a.jsx(Da,{className:"h-3 w-3"})]}),a.jsxs("button",{onClick:()=>t?.("compliance-audit",{changeId:u.event.id}),className:"inline-flex items-center gap-1 rounded border border-slate-200 px-2 py-1 text-[11px] font-medium text-slate-700 hover:bg-slate-50",children:["  ",a.jsx(Da,{className:"h-3 w-3"})]})]})]})]})})]})]}):a.jsx("div",{className:"p-4 text-sm text-slate-500",children:"/    ."})}function RPe({...e}){return a.jsx(vB,{"data-slot":"sheet",...e})}function kPe({...e}){return a.jsx(NB,{"data-slot":"sheet-portal",...e})}function PPe({className:e,...t}){return a.jsx(SB,{"data-slot":"sheet-overlay",className:ue("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function DPe({className:e,children:t,side:r="right",...n}){return a.jsxs(kPe,{children:[a.jsx(PPe,{}),a.jsxs(EB,{"data-slot":"sheet-content",className:ue("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",r==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",r==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",r==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",r==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",e),...n,children:[t,a.jsxs(AB,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[a.jsx(uu,{className:"size-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function IPe({className:e,...t}){return a.jsx("div",{"data-slot":"sheet-header",className:ue("flex flex-col gap-1.5 p-4",e),...t})}function MPe({className:e,...t}){return a.jsx(jB,{"data-slot":"sheet-title",className:ue("text-foreground font-semibold",e),...t})}function LPe({className:e,...t}){return a.jsx(wB,{"data-slot":"sheet-description",className:ue("text-muted-foreground text-sm",e),...t})}const Z_=[{id:"stage1",name:"Stage1",title:"  &  ",responsibility:" / ",status:"caution",kpiLinks:[""," "],metrics:[{label:"  ",value:"96.8%",target:" 97% ",signal:"watch",note:"/    "},{label:"/ ",value:"4.9%",target:" 3% ",signal:"risk",note:"24    "},{label:"  ",value:"2  ",target:"0 ",signal:"watch",note:"     "}]},{id:"stage2",name:"Stage2",title:"ANN / ",responsibility:" /  ",status:"warning",kpiLinks:[""," "],metrics:[{label:"Feature   ",value:"JS Divergence 0.11",target:" 0.10 ",signal:"risk",note:" 7   "},{label:"Class  ",value:"  6.3%p",target:" 5.0%p ",signal:"watch",note:"L2     "},{label:"Confidence  ",value:"+17%",target:" 10% ",signal:"risk",note:"   "}]},{id:"stage3",name:"Stage3",title:"CNN / ",responsibility:" / ",status:"caution",kpiLinks:[""," "],metrics:[{label:"  ",value:"Drift Score 0.21",target:" 0.20 ",signal:"watch",note:"    "},{label:"Class   ",value:" +0.08",target:" +0.05 ",signal:"watch",note:"   "},{label:"Guardrail Flag ",value:"2.2%",target:" 2.0% ",signal:"risk",note:" fallback   "}]}],$Pe=[{id:"qa-stage1-20260211",occurredAt:"2026-02-11 08:55",stage:"stage1",causeType:"",impactKpi:" ",status:" "},{id:"qa-stage2-20260211",occurredAt:"2026-02-11 10:20",stage:"stage2",causeType:"",impactKpi:"",status:" "},{id:"qa-stage3-20260210",occurredAt:"2026-02-10 16:40",stage:"stage3",causeType:"",impactKpi:"",status:""},{id:"qa-link-20260210",occurredAt:"2026-02-10 11:05",stage:"stage2",causeType:"",impactKpi:" ",status:""},{id:"qa-stage1-20260209",occurredAt:"2026-02-09 09:30",stage:"stage1",causeType:"",impactKpi:"",status:" "}],FPe={normal:"bg-green-100 text-green-700",caution:"bg-amber-100 text-amber-700",warning:"bg-red-100 text-red-700"},oy={normal:"",caution:"",warning:""},UPe={good:"bg-green-50 text-green-700 border-green-200",watch:"bg-amber-50 text-amber-700 border-amber-200",risk:"bg-red-50 text-red-700 border-red-200"},BPe={:"bg-blue-50 text-blue-700 border-blue-200"," ":"bg-red-50 text-red-700 border-red-200"," ":"bg-green-50 text-green-700 border-green-200"},GPe={:"bg-sky-50 text-sky-700 border-sky-200",:"bg-violet-50 text-violet-700 border-violet-200",:"bg-orange-50 text-orange-700 border-orange-200"},FV="2026-02-12",W8={good:"ok",watch:"warn",risk:"risk"},HPe={ok:{label:" ",className:"bg-green-50 text-green-700 border-green-200"},warn:{label:" ",className:"bg-amber-50 text-amber-700 border-amber-200"},risk:{label:" ",className:"bg-red-50 text-red-700 border-red-200"}},KPe={"  ":{key:"stage1-required-fields",title:"  ",subtitlePlain:"       .",whyItMatters:"           .",interpretTemplate:{ok:"       .",warn:" /       .",risk:"        ."},actionHint:{ok:"    .",warn:"  /   .",risk:"        ."},targetLine:" 97% "},"/ ":{key:"stage1-delay-missing-rate",title:"/ ",subtitlePlain:"       .",whyItMatters:"        .",interpretTemplate:{ok:"         .",warn:"       .",risk:"24         ."},actionHint:{ok:"     .",warn:"  /   .",risk:"     ."},targetLine:" 3% "},"  ":{key:"stage1-distribution-drift",title:"  ",subtitlePlain:"      .",whyItMatters:"         .",interpretTemplate:{ok:"       .",warn:"       .",risk:"       ."},actionHint:{ok:"    .",warn:"      .",risk:"      ."},targetLine:"0 "},"Feature   ":{key:"stage2-feature-jsd",title:"Feature    (JS Divergence)",subtitlePlain:"       .",whyItMatters:"       .",interpretTemplate:{ok:"       .",warn:"        .",risk:"        ."},actionHint:{ok:"   .",warn:"   /   .",risk:"       ."},targetLine:" 0.10 ",terms:["JS Divergence:   (0  )"]},"Class  ":{key:"stage2-class-bias",title:"Class  ",subtitlePlain:"        .",whyItMatters:"    /   .",interpretTemplate:{ok:"       .",warn:"        .",risk:"        ."},actionHint:{ok:"    .",warn:" /      .",risk:"      ."},targetLine:" 5.0%p "},"Confidence  ":{key:"stage2-confidence-variance",title:"Confidence  ",subtitlePlain:"      .",whyItMatters:"         .",interpretTemplate:{ok:"      .",warn:"     .",risk:"      ."},actionHint:{ok:"   .",warn:"      .",risk:" / /    ."},targetLine:" 10% "},"  ":{key:"stage3-embedding-drift",title:"   (Drift Score)",subtitlePlain:"       .",whyItMatters:"         .",interpretTemplate:{ok:"       .",warn:"     .",risk:"      ."},actionHint:{ok:"    .",warn:" (/)   .",risk:" /     ."},targetLine:" 0.20 "},"Class   ":{key:"stage3-entropy-shift",title:"Class    ()",subtitlePlain:"      .",whyItMatters:"         .",interpretTemplate:{ok:"      .",warn:"      .",risk:"        ."},actionHint:{ok:"    .",warn:"     .",risk:"/     ."},targetLine:" +0.05 ",terms:[":   ( )"]},"Guardrail Flag ":{key:"stage3-guardrail-rate",title:"Guardrail Flag ",subtitlePlain:"( )    .",whyItMatters:"/        .",interpretTemplate:{ok:"       .",warn:"     .",risk:"fallback       ."},actionHint:{ok:"   .",warn:"     .",risk:" / /     ."},targetLine:" 2.0% "}};function zPe(){const[e,t]=h.useState(!1);return h.useEffect(()=>{if(typeof window>"u")return;const r=window.matchMedia("(hover: none), (pointer: coarse)"),n=()=>t(r.matches||navigator.maxTouchPoints>0);return n(),r.addEventListener?.("change",n),()=>r.removeEventListener?.("change",n)},[]),e}function V8(e){return KPe[e.label]??{key:e.label,title:e.label,subtitlePlain:"         .",whyItMatters:"         .",interpretTemplate:{ok:"     .",warn:"      .",risk:"        ."},actionHint:{ok:"   .",warn:"    .",risk:"      ."},targetLine:e.target}}function qPe(e){return e==="data_quality"?"stage1":e==="model_fitness"?"stage3":"stage2"}function WPe(e){return e==="stage1"?"Stage1":e==="stage2"?"Stage2":"Stage3"}function VPe(e,t){return t==="risk"?e.interpretTemplate.risk:t==="warn"?e.interpretTemplate.warn:e.interpretTemplate.ok}function YPe(e,t){return t==="risk"?e.actionHint.risk:t==="warn"?e.actionHint.warn:e.actionHint.ok}function XPe(e){return e==="risk"?" 7         .":e==="warn"?" 7        .":" 7        ."}function Y8({stage:e,metric:t,explain:r,severity:n,onOpenDetail:s}){const i=HPe[n];return a.jsxs("div",{className:"w-[min(92vw,460px)] max-w-[460px] rounded-lg border border-slate-200 bg-white p-3 text-[11px] leading-[1.35] shadow-xl",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"text-[10px] font-semibold text-slate-500",children:e.name}),a.jsx("p",{className:"truncate text-slate-800 font-semibold",children:r.title})]}),a.jsx("span",{className:`inline-flex shrink-0 items-center whitespace-nowrap rounded-full border px-2 py-0.5 text-[10px] font-semibold leading-none ${i.className}`,children:i.label})]}),a.jsxs("p",{className:"mt-1 truncate text-slate-600",children:[": ",r.subtitlePlain]}),a.jsxs("p",{className:"mt-1 truncate text-slate-600",children:[" : ",i.label,"  ",t.value]}),a.jsxs("p",{className:"mt-1 truncate text-slate-600",children:[": ",VPe(r,n)]}),a.jsxs("p",{className:"mt-1 truncate text-slate-600",children:[" : ",YPe(r,n)]}),a.jsxs("div",{className:"mt-1 flex items-center justify-between gap-2",children:[a.jsxs("span",{className:"truncate text-slate-500",children:[": ",r.targetLine||t.target,"  D-1 ",FV]}),a.jsxs("button",{type:"button",className:"inline-flex items-center gap-1 text-[10px] font-semibold text-blue-600 hover:text-blue-700 shrink-0",onClick:o=>{o.stopPropagation(),s()},children:["",a.jsx(Da,{className:"h-3 w-3"})]})]})]})}function QPe({context:e,onNavigate:t}){const r=h.useMemo(()=>qPe(e?.driver),[e?.driver]),[n,s]=h.useState([r]),[i,o]=h.useState(!1),[l,d]=h.useState(null),[u,m]=h.useState([]),[p,g]=h.useState([]),x=zPe(),y=h.useRef({});h.useEffect(()=>{let k=!1;return Promise.all([Xke(),Yke()]).then(([w,L])=>{k||(m(w),g(L))}).catch(()=>{k||(m([]),g([]))}),()=>{k=!0}},[]);const N=h.useMemo(()=>{if(!u.length)return $Pe;const k=B=>B.type==="model_drift"?"stage3":B.type==="sla_breach"?"stage2":B.relatedDriver==="data_quality"?"stage1":B.relatedDriver==="model_fitness"?"stage3":"stage2",w=B=>B.type==="model_drift"||B.relatedDriver==="model_fitness"?"":B.type==="data_missing"||B.type==="update_delay"||B.relatedDriver==="data_quality"?"":"",L=B=>B.resolved?" ":B.severity==="critical"?" ":"",H=B=>B.relatedDriver==="data_quality"?" ":B.relatedDriver==="model_fitness"?"":B.relatedDriver==="ops_bottleneck"?"":" ";return u.map(B=>({id:B.id,occurredAt:B.detectedAt.replace("T"," ").slice(0,16),stage:k(B),causeType:w(B),impactKpi:H(B),status:L(B)}))},[u]),v=h.useMemo(()=>{const k=p.find(L=>L.key==="data_quality");return k?k.indicators.find(L=>L.label.includes(""))?.value??95.1:95.1},[p]),S=N.filter(k=>k.status!==" ").length,E=h.useMemo(()=>N.reduce((k,w)=>(w.status!==" "&&(k[w.causeType]+=1),k),{:0,:0,:0}),[N]),C=h.useMemo(()=>Z_.reduce((k,w)=>(k[w.id]=w.status,k),{}),[]),_=k=>{s(w=>w.includes(k)?w.filter(L=>L!==k):[...w,k])},A=h.useCallback((k,w)=>`${k}::${w}`,[]),T=h.useCallback((k,w)=>{const L=V8(w);s(B=>B.includes(k.id)?B:[...B,k.id]),d({stage:k,metric:w,explain:L}),o(!0);const H=A(k.id,w.label);requestAnimationFrame(()=>{setTimeout(()=>{y.current[H]?.scrollIntoView({behavior:"smooth",block:"center"})},120)})},[A]),R=l?W8[l.metric.signal]:null,I=h.useMemo(()=>l?N.filter(k=>k.stage===l.stage.id&&k.status!==" "):[],[l,N]);return a.jsx(Sk,{delayDuration:200,children:a.jsxs("div",{className:"space-y-5 p-1",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:" &  "}),a.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Stage     / /   ."})]}),a.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-5",children:[{label:"  ",value:`${v.toFixed(1)}%`,sub:" ",icon:a.jsx(id,{className:"h-5 w-5"}),color:v>=96?"text-green-600":"text-amber-600",bg:v>=96?"bg-green-50":"bg-amber-50"},{label:"Stage1 ",value:oy[C.stage1],sub:"  & ",icon:a.jsx(lR,{className:"h-5 w-5"}),color:C.stage1==="warning"?"text-red-600":C.stage1==="caution"?"text-amber-600":"text-green-600",bg:C.stage1==="warning"?"bg-red-50":C.stage1==="caution"?"bg-amber-50":"bg-green-50"},{label:"Stage2 ",value:oy[C.stage2],sub:"ANN /",icon:a.jsx(fg,{className:"h-5 w-5"}),color:C.stage2==="warning"?"text-red-600":C.stage2==="caution"?"text-amber-600":"text-green-600",bg:C.stage2==="warning"?"bg-red-50":C.stage2==="caution"?"bg-amber-50":"bg-green-50"},{label:"Stage3 ",value:oy[C.stage3],sub:"CNN /",icon:a.jsx(Yl,{className:"h-5 w-5"}),color:C.stage3==="warning"?"text-red-600":C.stage3==="caution"?"text-amber-600":"text-green-600",bg:C.stage3==="warning"?"bg-red-50":C.stage3==="caution"?"bg-amber-50":"bg-green-50"},{label:"  ",value:`${S}`,sub:"  ",icon:a.jsx(ss,{className:"h-5 w-5"}),color:S>2?"text-red-600":"text-amber-600",bg:S>2?"bg-red-50":"bg-amber-50"}].map((k,w)=>a.jsx(Or,{className:"border-0 shadow-sm",children:a.jsx(Rr,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`p-2 rounded-lg ${k.bg} ${k.color}`,children:k.icon}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-xs text-gray-500",children:k.label}),a.jsx("div",{className:"text-xl font-bold text-gray-900",children:k.value}),a.jsx("div",{className:"text-[11px] text-gray-400 truncate",children:k.sub})]})]})})},w))}),a.jsxs(Or,{children:[a.jsx(Dn,{className:"pb-3",children:a.jsxs(In,{className:"text-sm flex items-center gap-2",children:[a.jsx(vX,{className:"h-4 w-4 text-slate-600"}),"5  "]})}),a.jsx(Rr,{className:"pt-0",children:a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsxs("span",{className:"inline-flex items-center rounded-full border px-2 py-1 text-xs font-medium bg-sky-50 text-sky-700 border-sky-200",children:["  ",E.,""]}),a.jsxs("span",{className:"inline-flex items-center rounded-full border px-2 py-1 text-xs font-medium bg-violet-50 text-violet-700 border-violet-200",children:["  ",E.,""]}),a.jsxs("span",{className:"inline-flex items-center rounded-full border px-2 py-1 text-xs font-medium bg-orange-50 text-orange-700 border-orange-200",children:["  ",E.,""]}),a.jsxs("span",{className:"text-xs text-gray-500",children:[" Stage: ",Z_.filter(k=>k.status==="warning").map(k=>k.name).join(", ")||""]})]})})]}),a.jsx("div",{className:"space-y-3",children:Z_.map(k=>{const w=n.includes(k.id);return a.jsxs(Or,{className:"border border-slate-200 overflow-hidden gap-0",children:[a.jsx("button",{type:"button",onClick:()=>_(k.id),className:"w-full px-5 py-4 bg-white hover:bg-slate-50 transition-colors text-left",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-sm font-semibold text-slate-800 min-w-16",children:k.name}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold text-gray-900",children:k.title}),a.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:k.responsibility})]}),a.jsx("span",{className:`ml-auto inline-flex items-center rounded-full px-2 py-1 text-[11px] font-medium ${FPe[k.status]}`,children:oy[k.status]}),w?a.jsx(Zc,{className:"h-4 w-4 text-gray-400"}):a.jsx(Ss,{className:"h-4 w-4 text-gray-400"})]})}),w&&a.jsxs(Rr,{className:"pt-1 pb-5 px-5 space-y-4 border-t border-slate-100",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx("span",{className:"text-[11px] text-slate-500",children:"KPI "}),k.kpiLinks.map(L=>a.jsx("span",{className:"inline-flex items-center rounded-full border border-slate-200 bg-slate-50 px-2 py-0.5 text-[11px] font-medium text-slate-700",children:L},L))]}),a.jsx("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-3",children:k.metrics.map(L=>{const H=W8[L.signal],B=V8(L),M=A(k.id,L.label),G=a.jsxs("div",{ref:$=>{y.current[M]=$},role:"button",tabIndex:0,onKeyDown:$=>{$.key==="Enter"&&($.preventDefault(),T(k,L))},className:"relative rounded-lg border border-slate-200 bg-white p-3 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-200",children:[a.jsx("p",{className:"text-xs text-slate-500 pr-8",children:L.label}),a.jsx("p",{className:"text-lg font-semibold text-gray-900 mt-1",children:L.value}),a.jsxs("div",{className:"flex items-center justify-between mt-2",children:[a.jsx("span",{className:"text-[11px] text-slate-500",children:L.target}),a.jsx("span",{className:`inline-flex items-center rounded-full border px-2 py-0.5 text-[10px] font-semibold ${UPe[L.signal]}`,children:L.signal==="risk"?"":L.signal==="watch"?"":""})]}),a.jsx("p",{className:"text-[11px] text-slate-500 mt-2",children:L.note}),x&&a.jsxs(kV,{children:[a.jsx(PV,{asChild:!0,children:a.jsx("button",{type:"button","aria-label":`${L.label} `,className:"absolute right-2 top-2 inline-flex h-5 w-5 items-center justify-center rounded border border-slate-200 bg-slate-50 text-slate-500 hover:bg-slate-100",onClick:$=>$.stopPropagation(),children:a.jsx(hm,{className:"h-3 w-3"})})}),a.jsx(DV,{children:a.jsx(IV,{side:"top",align:"end",sideOffset:8,collisionPadding:12,className:"z-50 max-w-[92vw] p-0 border-0 bg-transparent shadow-none",children:a.jsx(Y8,{stage:k,metric:L,explain:B,severity:H,onOpenDetail:()=>T(k,L)})})})]})]});return x?a.jsx(Y.Fragment,{children:G},M):a.jsxs(Ek,{delayDuration:200,children:[a.jsx(jk,{asChild:!0,children:G}),a.jsx(wk,{children:a.jsxs(Ak,{side:"top",align:"end",sideOffset:8,collisionPadding:12,className:"z-50 max-w-[92vw] p-0 border-0 bg-transparent shadow-none",children:[a.jsx(Y8,{stage:k,metric:L,explain:B,severity:H,onOpenDetail:()=>T(k,L)}),a.jsx(_k,{className:"fill-white"})]})})]},M)})})]})]},k.id)})}),a.jsxs(Or,{children:[a.jsx(Dn,{className:"pb-3",children:a.jsxs(In,{className:"text-base flex items-center gap-2",children:[a.jsx(ss,{className:"h-4 w-4 text-amber-500"})," "]})}),a.jsxs(Rr,{className:"pt-0",children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[760px]",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50/70",children:[a.jsx("th",{className:"text-left py-2.5 px-3 text-xs font-semibold text-gray-600",children:""}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs font-semibold text-gray-600",children:"Stage"}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs font-semibold text-gray-600",children:" "}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs font-semibold text-gray-600",children:" KPI"}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs font-semibold text-gray-600",children:""})]})}),a.jsxs("tbody",{children:[N.map(k=>a.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50/50",children:[a.jsx("td",{className:"py-3 px-3 text-sm text-gray-700",children:k.occurredAt}),a.jsx("td",{className:"py-3 px-3",children:a.jsx("span",{className:"text-sm font-medium text-gray-900",children:WPe(k.stage)})}),a.jsx("td",{className:"py-3 px-3",children:a.jsx("span",{className:`inline-flex items-center rounded-full border px-2 py-1 text-[11px] font-medium ${GPe[k.causeType]}`,children:k.causeType})}),a.jsx("td",{className:"py-3 px-3 text-sm text-gray-700",children:k.impactKpi}),a.jsx("td",{className:"py-3 px-3",children:a.jsx("span",{className:`inline-flex items-center rounded-full border px-2 py-1 text-[11px] font-medium ${BPe[k.status]}`,children:k.status})})]},k.id)),N.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"py-6 text-center text-sm text-gray-500",children:"   ."})})]})]})}),a.jsx("div",{className:"mt-3 text-[11px] text-gray-500",children:" : ( ),  (/  ),  (  )"})]})]}),a.jsx(RPe,{open:i,onOpenChange:o,children:a.jsx(DPe,{side:"right",className:"w-[420px] sm:max-w-[420px]",children:l?a.jsxs(a.Fragment,{children:[a.jsxs(IPe,{className:"border-b border-slate-200 pb-3",children:[a.jsxs(MPe,{className:"text-base text-slate-900",children:[l.stage.name,"  ",l.metric.label]}),a.jsxs(LPe,{className:"text-xs text-slate-500",children:[l.stage.title,"     ",FV," (D-1)"]})]}),a.jsxs("div",{className:"flex-1 space-y-3 overflow-y-auto px-4 pb-4 text-sm",children:[a.jsxs("section",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[a.jsx("p",{className:"text-[11px] font-semibold text-slate-600",children:" 7 "}),a.jsx("p",{className:"mt-1 text-sm text-slate-800",children:XPe(R??"ok")}),a.jsxs("p",{className:"mt-1 text-[11px] text-slate-500",children:[" : ",l.metric.value,"  ",l.explain.targetLine||l.metric.target]})]}),a.jsxs("section",{className:"rounded-lg border border-slate-200 p-3",children:[a.jsx("p",{className:"text-[11px] font-semibold text-slate-600",children:" "}),a.jsx("p",{className:"mt-1 text-sm text-slate-700",children:l.metric.note})]}),a.jsxs("section",{className:"rounded-lg border border-slate-200 p-3",children:[a.jsx("p",{className:"text-[11px] font-semibold text-slate-600",children:" "}),a.jsx("div",{className:"mt-2 flex flex-wrap gap-1.5",children:l.stage.kpiLinks.map(k=>a.jsx("span",{className:"inline-flex items-center rounded-full border border-slate-200 bg-slate-50 px-2 py-0.5 text-[11px] text-slate-700",children:k},k))})]}),a.jsxs("section",{className:"rounded-lg border border-slate-200 p-3",children:[a.jsx("p",{className:"text-[11px] font-semibold text-slate-600",children:" "}),I.length>0?a.jsx("ul",{className:"mt-2 space-y-2",children:I.slice(0,4).map(k=>a.jsxs("li",{className:"rounded border border-slate-100 bg-slate-50 px-2 py-1.5",children:[a.jsx("p",{className:"text-[11px] text-slate-600",children:k.occurredAt}),a.jsxs("p",{className:"text-xs text-slate-800",children:[k.causeType,"  ",k.impactKpi,"  ",k.status]})]},k.id))}):a.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"    ."})]})]})]}):a.jsx("div",{className:"flex h-full items-center justify-center text-sm text-slate-500",children:"KPI    ."})})})]})})}const ly={regulation:{label:" ",dotClass:"bg-amber-500",badgeClass:"bg-amber-50 text-amber-700 border-amber-200",icon:a.jsx(Qo,{className:"h-3.5 w-3.5"})},model:{label:" ",dotClass:"bg-purple-500",badgeClass:"bg-purple-50 text-purple-700 border-purple-200",icon:a.jsx(hZ,{className:"h-3.5 w-3.5"})},policy:{label:" ",dotClass:"bg-blue-500",badgeClass:"bg-blue-50 text-blue-700 border-blue-200",icon:a.jsx(tR,{className:"h-3.5 w-3.5"})}},ZPe={:{cls:"bg-green-50 text-green-700 border-green-200"},:{cls:"bg-amber-50 text-amber-700 border-amber-200"},:{cls:"bg-red-50 text-red-700 border-red-200"}},JPe=[{question:"AI   ?",answer:"",detail:"Stage1~3         .",verdict:"no"},{question:"()   ?",answer:"",detail:"//        .",verdict:"yes"},{question:"     ?",answer:"",detail:"  /      .",verdict:"yes"}];function cy(e,t){return t<=0?100:Math.round(e/t*100)}function P0(e){return e===0?"":e===1?"":""}function X8(e){return new Date(e).toLocaleString("ko-KR",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function eDe(e){const t=e.type==="model_version"?"model":"regulation",r=e.approvedBy||e.deployedBy||"",n=` ${e.requestedBy||"-"} /  ${e.approvedBy||""} /  ${e.deployedBy||"-"}`;return{id:`timeline-policy-${e.id}`,timestamp:e.deployedAt,category:t,title:e.title,owner:r,decisionLog:n,evidence:e.reason||e.description,changeId:e.id,statusLabel:e.status}}function tDe(e){return{id:`timeline-audit-${e.id}`,timestamp:e.timestamp,category:"policy",title:e.title,owner:e.approver||e.actor,decisionLog:` ${e.requestor||"-"} /  ${e.approver||""} /  ${e.executor||"-"}`,evidence:e.rationale,changeId:e.relatedChangeId,auditId:e.id,statusLabel:e.status}}function rDe({context:e,onNavigate:t}){const[r,n]=h.useState([]),[s,i]=h.useState([]),[o,l]=h.useState("all"),[d,u]=h.useState(null),[m,p]=h.useState(!1);h.useEffect(()=>{let _=!1;return Promise.all([gV(),Qke()]).then(([A,T])=>{_||(n(A),i(T))}).catch(()=>{_||(n([]),i([]))}),()=>{_=!0}},[]);const g=h.useMemo(()=>{const _=r.map(eDe),A=s.filter(T=>T.type==="policy_change").map(tDe);return[..._,...A].sort((T,R)=>new Date(R.timestamp).getTime()-new Date(T.timestamp).getTime())},[r,s]),x=h.useMemo(()=>o==="all"?g:g.filter(_=>_.category===o),[g,o]);h.useEffect(()=>{if(g.length){if(e?.auditId){const _=g.find(A=>A.auditId===e.auditId);if(_){u(_.id);return}}if(e?.changeId){const _=g.find(A=>A.changeId===e.changeId);if(_){u(_.id);return}}u(_=>_||g[0].id)}},[g,e?.auditId,e?.changeId]),h.useEffect(()=>{if(!x.length){u(null);return}x.some(A=>A.id===d)||u(x[0].id)},[x,d]);const y=h.useMemo(()=>g.find(_=>_.id===d)||null,[g,d]),N=h.useMemo(()=>{const _=s.length,A=s.filter(w=>!!w.cause&&w.kpiSnapshot.riskTop3.length>0).length,T=s.filter(w=>!!w.requestor&&!!w.approver&&!!w.rationale).length,R=s.filter(w=>!!w.executor&&!!w.approvalComment).length,I=A+T+R,k=_*3;return{stage1:A,stage2:T,stage3:R,totalEvents:_,rate:cy(I,k)}},[s]),v=h.useMemo(()=>{const _=s.length,A=s.filter(I=>!!I.approver).length,T=s.filter(I=>!!I.rationale&&(!!I.policyRef||!!I.internalStandardId)).length,R=s.filter(I=>/ai|  /i.test(I.approver||"")).length;return{totalEvents:_,ownerAssigned:A,rationaleAttached:T,aiFinalDecisionCount:R,humanDecisionCount:A}},[s]),S=h.useMemo(()=>{const _=s.filter(w=>!w.approver),A=s.filter(w=>!w.rationale||!w.policyRef&&!w.internalStandardId),T=s.filter(w=>!w.executor),R=s.filter(w=>w.type==="violation"&&w.severity==="high"&&w.status!=="resolved"),I=s.filter(w=>!w.cause||!w.requestor||!w.approver||!w.executor),k=r[0]?.id;return[{id:"owner",itemName:" () ",stage:"Stage2",nonComplianceCases:_.length,status:P0(_.length),linkLabel:"  ",navPage:"compliance-audit",navContext:_[0]?{auditId:_[0].id}:void 0},{id:"evidence",itemName:" (/) ",stage:"Stage2~3",nonComplianceCases:A.length,status:P0(A.length),linkLabel:"  ",navPage:"model-governance",navContext:{changeId:A[0]?.relatedChangeId||k}},{id:"executor",itemName:" (Executor)  ",stage:"Stage3",nonComplianceCases:T.length,status:P0(T.length),linkLabel:"  ",navPage:"compliance-audit",navContext:T[0]?{auditId:T[0].id}:void 0},{id:"high-risk",itemName:"    ",stage:"Stage3",nonComplianceCases:R.length,status:P0(R.length),linkLabel:"  ",navPage:"compliance-audit",navContext:R[0]?{auditId:R[0].id}:void 0},{id:"stage-chain",itemName:"Stage1~3   ",stage:"Stage1~3",nonComplianceCases:I.length,status:P0(I.length),linkLabel:"  ",navPage:"compliance-audit",navContext:I[0]?{auditId:I[0].id}:void 0}]},[r,s]),E=h.useMemo(()=>{const _=S.filter(A=>A.status==="").length;return cy(_,S.length)},[S]),C=h.useMemo(()=>[{label:"  ",value:`${cy(v.ownerAssigned,v.totalEvents)}%`,detail:`${v.ownerAssigned}/${v.totalEvents}`},{label:"  ",value:`${cy(v.rationaleAttached,v.totalEvents)}%`,detail:`${v.rationaleAttached}/${v.totalEvents}`},{label:" ",value:`${E}%`,detail:`${S.filter(_=>_.status==="").length}/${S.length} `},{label:"Stage  ",value:`${N.rate}%`,detail:`S1 ${N.stage1}/${N.totalEvents}  S2 ${N.stage2}/${N.totalEvents}  S3 ${N.stage3}/${N.totalEvents}`}],[S,E,N,v]);return a.jsxs("div",{className:"space-y-5 p-1",children:[a.jsxs("div",{className:"flex justify-between items-start gap-3",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"   "}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"             ."})]}),a.jsxs(jt,{size:"sm",onClick:()=>alert("   (mock)"),children:[a.jsx(Xp,{className:"h-4 w-4 mr-2"}),"  "]})]}),a.jsxs("div",{className:"rounded-xl border-2 border-blue-200 bg-gradient-to-r from-blue-50 via-white to-white p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(Qo,{className:"h-4 w-4 text-blue-600"}),a.jsx("span",{className:"text-sm font-bold text-gray-900",children:"  "})]}),a.jsx("div",{className:"grid gap-3 md:grid-cols-3",children:JPe.map(_=>a.jsx(nDe,{question:_.question,answer:_.answer,detail:_.detail,verdict:_.verdict},_.question))}),a.jsxs("div",{className:"mt-3 text-xs text-gray-600",children:["AI  "," ",a.jsxs("span",{className:"font-semibold text-red-600",children:[v.aiFinalDecisionCount,""]})," /   "," ",a.jsxs("span",{className:"font-semibold text-blue-700",children:[v.humanDecisionCount,""]})]})]}),a.jsx("div",{className:"grid gap-3 md:grid-cols-4",children:C.map(_=>a.jsx(aDe,{label:_.label,value:_.value,detail:_.detail},_.label))}),a.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(Xl,{className:"h-4 w-4 text-indigo-600"}),a.jsx("h2",{className:"text-sm font-bold text-gray-900",children:"  "})]}),a.jsxs("div",{className:"grid gap-3 lg:grid-cols-[1fr_auto_1fr_auto_1fr] items-center",children:[a.jsx(J_,{title:"Stage1",subtitle:"  ",description:" /  .",badge:" ",badgeClass:"bg-gray-100 text-gray-700 border-gray-200"}),a.jsx(ug,{className:"h-4 w-4 text-gray-400 justify-self-center hidden lg:block"}),a.jsx(J_,{title:"Stage2",subtitle:" ",description:"/      .",badge:" ",badgeClass:"bg-blue-50 text-blue-700 border-blue-200"}),a.jsx(ug,{className:"h-4 w-4 text-gray-400 justify-self-center hidden lg:block"}),a.jsx(J_,{title:"Stage3",subtitle:" ",description:"       .",badge:" ",badgeClass:"bg-green-50 text-green-700 border-green-200"})]}),a.jsx("div",{className:"mt-3 rounded-lg border border-indigo-200 bg-indigo-50 p-3",children:a.jsx("p",{className:"text-sm font-semibold text-indigo-900",children:"   (). AI/       ."})})]}),a.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4",children:[a.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(tR,{className:"h-4 w-4 text-gray-700"}),a.jsx("h2",{className:"text-sm font-bold text-gray-900",children:" "})]}),a.jsxs("button",{onClick:()=>p(_=>!_),className:"text-xs text-gray-500 inline-flex items-center gap-1 hover:text-gray-700",children:["Stage  ",m?a.jsx(Zc,{className:"h-4 w-4"}):a.jsx(Ss,{className:"h-4 w-4"})]})]}),m&&a.jsx("div",{className:"mb-3 rounded-lg border border-gray-200 bg-gray-50 p-3 text-xs text-gray-600",children:"Stage1:   (cause, riskTop3) / Stage2:  / Stage3:  "}),a.jsx("div",{className:"overflow-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-left text-xs text-gray-500 border-b border-gray-200",children:[a.jsx("th",{className:"py-2 pr-3",children:" "}),a.jsx("th",{className:"py-2 pr-3",children:" Stage"}),a.jsx("th",{className:"py-2 pr-3",children:""}),a.jsx("th",{className:"py-2 pr-3",children:"  "}),a.jsx("th",{className:"py-2",children:"  "})]})}),a.jsx("tbody",{children:S.map(_=>a.jsxs("tr",{className:"border-b border-gray-100 last:border-b-0",children:[a.jsx("td",{className:"py-2.5 pr-3 font-medium text-gray-900",children:_.itemName}),a.jsx("td",{className:"py-2.5 pr-3 text-gray-600",children:_.stage}),a.jsx("td",{className:"py-2.5 pr-3",children:a.jsx("span",{className:`inline-flex items-center px-2 py-0.5 text-xs rounded border ${ZPe[_.status].cls}`,children:_.status})}),a.jsxs("td",{className:"py-2.5 pr-3 text-gray-700",children:[_.nonComplianceCases,""]}),a.jsx("td",{className:"py-2.5",children:a.jsxs("button",{onClick:()=>t?.(_.navPage,_.navContext),className:"text-xs inline-flex items-center gap-1 text-blue-600 hover:text-blue-800 hover:underline",children:[a.jsx(Da,{className:"h-3.5 w-3.5"}),_.linkLabel]})})]},_.id))})]})})]}),a.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Bl,{className:"h-4 w-4 text-gray-700"}),a.jsx("h2",{className:"text-sm font-bold text-gray-900",children:"  "})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(dy,{label:"",active:o==="all",onClick:()=>l("all")}),a.jsx(dy,{label:" ",active:o==="regulation",onClick:()=>l("regulation")}),a.jsx(dy,{label:" ",active:o==="model",onClick:()=>l("model")}),a.jsx(dy,{label:" ",active:o==="policy",onClick:()=>l("policy")})]})]}),a.jsxs("div",{className:"grid gap-4 lg:grid-cols-[2fr_3fr]",children:[a.jsxs("div",{className:"relative max-h-[420px] overflow-y-auto pr-1",children:[a.jsx("div",{className:"absolute left-[11px] top-0 bottom-0 w-0.5 bg-gray-200"}),x.length===0?a.jsx("div",{className:"py-16 text-center text-sm text-gray-400",children:"   ."}):a.jsx("div",{className:"space-y-1.5",children:x.map(_=>{const A=_.id===d,T=ly[_.category];return a.jsxs("button",{onClick:()=>u(_.id),className:`relative w-full text-left pl-8 pr-3 py-2.5 rounded-lg border transition-colors ${A?"border-blue-300 bg-blue-50":"border-transparent hover:bg-gray-50 hover:border-gray-200"}`,children:[a.jsx("div",{className:`absolute left-[5px] top-3.5 w-3 h-3 rounded-full ${T.dotClass}`}),a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("span",{className:`inline-flex items-center gap-1 px-1.5 py-0.5 text-[10px] rounded border ${T.badgeClass}`,children:[T.icon,T.label]}),a.jsx("span",{className:"text-[10px] text-gray-400",children:X8(_.timestamp)})]}),a.jsx("div",{className:"mt-1 text-sm font-semibold text-gray-900 leading-snug",children:_.title}),a.jsxs("div",{className:"mt-1 text-[11px] text-gray-500",children:[": ",_.owner]})]},_.id)})})]}),a.jsx("div",{children:y?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-3",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 text-xs rounded border ${ly[y.category].badgeClass}`,children:[ly[y.category].icon,ly[y.category].label]}),a.jsx("span",{className:"text-xs text-gray-500",children:X8(y.timestamp)})]}),a.jsx("h3",{className:"mt-2 text-base font-bold text-gray-900",children:y.title}),a.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[": ",y.statusLabel]})]}),a.jsx(eC,{icon:a.jsx(Xl,{className:"h-4 w-4 text-blue-600"}),title:" ",children:a.jsx("p",{className:"text-sm font-semibold text-gray-900",children:y.owner})}),a.jsx(eC,{icon:a.jsx(Yo,{className:"h-4 w-4 text-green-600"}),title:" ",children:a.jsx("p",{className:"text-sm text-gray-800 leading-relaxed",children:y.decisionLog})}),a.jsx(eC,{icon:a.jsx(Ef,{className:"h-4 w-4 text-indigo-600"}),title:" ",children:a.jsx("p",{className:"text-sm text-gray-800 leading-relaxed",children:y.evidence})}),a.jsx("div",{className:"rounded-lg border border-blue-200 bg-blue-50 p-3",children:a.jsx("p",{className:"text-xs font-semibold text-blue-900",children:" :       /    ."})}),a.jsxs("div",{className:"flex flex-wrap gap-2 justify-end",children:[y.changeId&&a.jsxs(jt,{size:"sm",variant:"outline",className:"text-xs text-blue-700",onClick:()=>t?.("model-governance",{changeId:y.changeId}),children:[a.jsx(Da,{className:"h-3.5 w-3.5 mr-1"}),"  "]}),y.auditId&&a.jsxs(jt,{size:"sm",variant:"outline",className:"text-xs",onClick:()=>t?.("compliance-audit",{auditId:y.auditId}),children:[a.jsx(Da,{className:"h-3.5 w-3.5 mr-1"}),"  "]})]})]}):a.jsx("div",{className:"h-[240px] rounded-lg border border-dashed border-gray-200 flex items-center justify-center text-sm text-gray-400",children:"       ."})})]})]})]})}function nDe({question:e,answer:t,detail:r,verdict:n}){return a.jsxs("div",{className:`rounded-lg border p-3 ${n==="yes"?"border-green-200 bg-green-50/50":"border-red-200 bg-red-50/50"}`,children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n==="yes"?a.jsx(Yo,{className:"h-4 w-4 text-green-600"}):a.jsx(fm,{className:"h-4 w-4 text-red-600"}),a.jsx("span",{className:"text-xs font-semibold text-gray-700",children:e})]}),a.jsx("p",{className:`text-sm font-bold ${n==="yes"?"text-green-700":"text-red-700"}`,children:t}),a.jsx("p",{className:"mt-1 text-xs text-gray-600 leading-relaxed",children:r})]})}function aDe({label:e,value:t,detail:r}){return a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-3",children:[a.jsx("p",{className:"text-xs text-gray-500",children:e}),a.jsx("p",{className:"text-xl font-bold text-gray-900 mt-1",children:t}),a.jsx("p",{className:"text-[11px] text-gray-500 mt-1",children:r})]})}function J_({title:e,subtitle:t,description:r,badge:n,badgeClass:s}){return a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-3",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("span",{className:"text-xs font-bold text-gray-700",children:e}),a.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${s}`,children:n})]}),a.jsx("p",{className:"text-sm font-semibold text-gray-900 mt-1",children:t}),a.jsx("p",{className:"text-xs text-gray-600 mt-1 leading-relaxed",children:r})]})}function dy({label:e,active:t,onClick:r}){return a.jsx("button",{onClick:r,className:`text-xs px-2 py-1 rounded border transition-colors ${t?"bg-blue-50 text-blue-700 border-blue-200":"bg-white text-gray-600 border-gray-200 hover:bg-gray-50"}`,children:e})}function eC({icon:e,title:t,children:r}){return a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-3",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e,a.jsx("span",{className:"text-xs font-semibold text-gray-700",children:t})]}),r]})}const Q8=(e,t,r)=>Math.min(r,Math.max(t,e));function sDe({userRole:e}){const t=e==="central_admin",[r,n]=h.useState(!1),[s,i]=h.useState(()=>yV()),o=h.useCallback((v,S)=>{i(E=>({...E,matrixThresholds:{...E.matrixThresholds,[v]:Q8(S,70,99)}})),n(!1)},[]),l=h.useCallback((v,S)=>{i(E=>({...E,headline:{...E.headline,[v]:S}})),n(!1)},[]),d=h.useCallback(v=>{i(S=>({...S,drilldown:{...S.drilldown,[v]:!S.drilldown[v]}})),n(!1)},[]),u=h.useCallback(v=>{i(S=>({...S,notifications:{...S.notifications,[v]:!S.notifications[v]}})),n(!1)},[]),m=h.useCallback(v=>{i(S=>({...S,reports:{...S.reports,defaultPeriod:v}})),n(!1)},[]),p=h.useCallback(()=>{i(v=>({...v,reports:{...v.reports,includeFilterContext:!v.reports.includeFilterContext}})),n(!1)},[]),g=h.useCallback(()=>{n5e(s),n(!0),setTimeout(()=>n(!1),3e3)},[s]),x=h.useCallback(()=>{const v=a5e();i(v),n(!1)},[]),y=h.useMemo(()=>Math.abs(s.matrixThresholds.slaCut-s.matrixThresholds.dataCut)<=1?" ":s.matrixThresholds.slaCut>s.matrixThresholds.dataCut?"SLA   ":"   ",[s.matrixThresholds.dataCut,s.matrixThresholds.slaCut]),N=t?" ":" ";return a.jsxs("div",{className:"p-6 max-w-5xl mx-auto space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-bold text-gray-800",children:" "}),a.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:"     /  ."})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[r&&a.jsxs("span",{className:"inline-flex items-center gap-1 text-green-600 text-sm font-medium animate-pulse",children:[a.jsx(li,{className:"h-4 w-4"})," "]}),a.jsxs("button",{type:"button",onClick:x,disabled:!t,className:"inline-flex items-center gap-1 px-3 py-1.5 text-xs border border-gray-300 rounded-lg text-gray-600 hover:bg-gray-50 disabled:opacity-40 disabled:cursor-not-allowed",children:[a.jsx(xZ,{className:"h-3.5 w-3.5"})," "]}),a.jsxs("button",{type:"button",onClick:g,disabled:!t,className:"inline-flex items-center gap-1.5 px-4 py-1.5 text-xs font-semibold bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-40 disabled:cursor-not-allowed shadow-sm",children:[a.jsx(iR,{className:"h-3.5 w-3.5"}),""]})]})]}),a.jsxs("section",{className:"bg-white border border-gray-200 rounded-xl p-5",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(zQ,{className:"h-4.5 w-4.5 text-indigo-600"}),a.jsx("h3",{className:"text-sm font-bold text-gray-800",children:" "}),a.jsx("span",{className:"text-[10px] bg-gray-100 text-gray-500 px-2 py-0.5 rounded-full",children:" "})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-3",children:[a.jsx("div",{className:"text-[10px] text-indigo-500 font-medium mb-1",children:" "}),a.jsx("div",{className:"text-sm font-semibold text-indigo-800",children:"D-1  "}),a.jsx("div",{className:"text-[10px] text-indigo-400 mt-1",children:"       ."})]}),a.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-3",children:[a.jsx("div",{className:"text-[10px] text-indigo-500 font-medium mb-1",children:" "}),a.jsx("div",{className:"text-sm font-semibold text-indigo-800",children:"  "}),a.jsx("div",{className:"text-[10px] text-indigo-400 mt-1",children:"       ."})]}),a.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-3",children:[a.jsx("div",{className:"text-[10px] text-indigo-500 font-medium mb-1",children:" "}),a.jsx("div",{className:"text-sm font-semibold text-indigo-800",children:"  "}),a.jsx("div",{className:"text-[10px] text-indigo-400 mt-1",children:"     ."})]})]})]}),a.jsxs("section",{className:"bg-white border border-gray-200 rounded-xl p-5",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(kQ,{className:"h-4.5 w-4.5 text-orange-600"}),a.jsx("h3",{className:"text-sm font-bold text-gray-800",children:"SLA    "}),!t&&a.jsx(tu,{className:"h-3.5 w-3.5 text-gray-400"}),a.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-orange-50 text-orange-700 border border-orange-200 ml-auto",children:y})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-2",children:"SLA  (%)"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("input",{type:"range",min:70,max:99,value:s.matrixThresholds.slaCut,onChange:v=>o("slaCut",Number(v.target.value)),disabled:!t,className:"w-full accent-blue-600 disabled:opacity-40"}),a.jsx("input",{type:"number",min:70,max:99,value:s.matrixThresholds.slaCut,onChange:v=>o("slaCut",Number(v.target.value)||s.matrixThresholds.slaCut),disabled:!t,className:"w-16 px-2 py-1.5 border border-gray-300 rounded-lg text-sm disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-2",children:"  (%)"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("input",{type:"range",min:70,max:99,value:s.matrixThresholds.dataCut,onChange:v=>o("dataCut",Number(v.target.value)),disabled:!t,className:"w-full accent-emerald-600 disabled:opacity-40"}),a.jsx("input",{type:"number",min:70,max:99,value:s.matrixThresholds.dataCut,onChange:v=>o("dataCut",Number(v.target.value)||s.matrixThresholds.dataCut),disabled:!t,className:"w-16 px-2 py-1.5 border border-gray-300 rounded-lg text-sm disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]})]}),a.jsx("div",{className:"mt-3 text-[11px] text-gray-500",children:"         ."})]}),a.jsxs("section",{className:"bg-white border border-gray-200 rounded-xl p-5",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(vU,{className:"h-4.5 w-4.5 text-blue-600"}),a.jsx("h3",{className:"text-sm font-bold text-gray-800",children:"/ "}),!t&&a.jsx(tu,{className:"h-3.5 w-3.5 text-gray-400"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"rounded-lg border border-gray-100 p-3",children:[a.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-2",children:"   "}),a.jsx("input",{type:"number",min:1,max:5,value:s.headline.maxItems,onChange:v=>l("maxItems",Q8(Number(v.target.value)||1,1,5)),disabled:!t,className:"w-20 px-3 py-1.5 border border-gray-300 rounded-lg text-sm disabled:bg-gray-100 disabled:cursor-not-allowed"}),a.jsx("div",{className:"text-[10px] text-gray-500 mt-1",children:"      "})]}),a.jsxs("div",{className:"rounded-lg border border-gray-100 p-3 space-y-2",children:[a.jsxs("label",{className:"inline-flex items-center gap-2 text-xs text-gray-700",children:[a.jsx("input",{type:"checkbox",checked:s.headline.includePartialBadge,onChange:v=>l("includePartialBadge",v.target.checked),disabled:!t,className:"accent-blue-600"}),"   "]}),a.jsx("div",{className:"text-[10px] text-gray-500",children:"        "})]}),[{key:"keepPreviousData",label:"  (keepPreviousData)",desc:"      "},{key:"prefetchEnabled",label:" ",desc:"     "},{key:"useScopeOverlay",label:"  ",desc:"      "}].map(v=>a.jsxs("button",{type:"button",onClick:()=>d(v.key),disabled:!t,className:`rounded-lg border px-3 py-2 text-left transition-colors disabled:opacity-40 disabled:cursor-not-allowed ${s.drilldown[v.key]?"border-blue-200 bg-blue-50":"border-gray-200 bg-gray-50"}`,children:[a.jsx("div",{className:"text-xs font-semibold text-gray-800",children:v.label}),a.jsx("div",{className:"text-[10px] text-gray-500 mt-0.5",children:v.desc})]},v.key))]})]}),a.jsxs("section",{className:"bg-white border border-gray-200 rounded-xl p-5",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(ih,{className:"h-4.5 w-4.5 text-amber-600"}),a.jsx("h3",{className:"text-sm font-bold text-gray-800",children:"/ "}),!t&&a.jsx(tu,{className:"h-3.5 w-3.5 text-gray-400"})]}),a.jsx("div",{className:"space-y-3",children:[{key:"batchDelayed",label:"  ",desc:"D-1        "},{key:"qualityRisk",label:"  ",desc:"       "},{key:"governanceGap",label:"  ",desc:"       "},{key:"policyImpactSpike",label:"   ",desc:"      "}].map(v=>a.jsxs("button",{type:"button",onClick:()=>u(v.key),disabled:!t,className:`w-full rounded-lg border px-3 py-2 text-left transition-colors disabled:opacity-40 disabled:cursor-not-allowed ${s.notifications[v.key]?"border-amber-200 bg-amber-50/70":"border-gray-200 bg-gray-50"}`,children:[a.jsx("div",{className:"text-xs font-semibold text-gray-800",children:v.label}),a.jsx("div",{className:"text-[10px] text-gray-500 mt-0.5",children:v.desc})]},v.key))}),a.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"rounded-lg border border-gray-100 p-3",children:[a.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"  "}),a.jsxs("select",{value:s.reports.defaultPeriod,onChange:v=>m(v.target.value),disabled:!t,className:"w-full px-3 py-1.5 border border-gray-300 rounded-lg text-sm disabled:bg-gray-100 disabled:cursor-not-allowed",children:[a.jsx("option",{value:"weekly",children:""}),a.jsx("option",{value:"monthly",children:""}),a.jsx("option",{value:"quarterly",children:""}),a.jsx("option",{value:"yearly_cum",children:"()"})]})]}),a.jsxs("div",{className:"rounded-lg border border-gray-100 p-3",children:[a.jsxs("label",{className:"inline-flex items-center gap-2 text-xs text-gray-700",children:[a.jsx("input",{type:"checkbox",checked:s.reports.includeFilterContext,onChange:p,disabled:!t,className:"accent-amber-600"}),"     "]}),a.jsx("div",{className:"text-[10px] text-gray-500 mt-1",children:"KPI///  CSV  "})]})]})]}),a.jsxs("section",{className:"bg-white border border-gray-200 rounded-xl p-5",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(Yl,{className:"h-4.5 w-4.5 text-green-600"}),a.jsx("h3",{className:"text-sm font-bold text-gray-800",children:"   "})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[a.jsxs("div",{className:"rounded-lg border border-green-200 bg-green-50 p-3",children:[a.jsx("div",{className:"text-xs font-semibold text-green-800",children:" "}),a.jsx("div",{className:"text-[10px] text-green-700 mt-1",children:" /// "})]}),a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-3",children:[a.jsx("div",{className:"text-xs font-semibold text-gray-800",children:" "}),a.jsx("div",{className:"text-[10px] text-gray-600 mt-1",children:"   ( )"})]})]}),a.jsxs("div",{className:"mt-3 text-[10px] text-gray-400 flex items-center gap-1.5",children:[a.jsx(id,{className:"h-3.5 w-3.5"})," : central.settings.v1   : ",N,"  : SLA ",_a.matrixThresholds.slaCut,"% /  ",_a.matrixThresholds.dataCut,"%"]})]})]})}const iDe={level:"nation",region:"KR",kpi:"SLA",period:"WEEK"};function oDe(e,t){return{...e,...t}}function lDe({userRole:e,userName:t,onLogout:r}){const[n,s]=h.useState("national-dashboard"),[i,o]=h.useState(iDe),l=h.useCallback((u,m)=>{o(p=>oDe(p,m)),s(u)},[]),d=()=>{switch(n){case"national-dashboard":return a.jsx(B8,{onNavigate:l});case"kpi-dictionary":return a.jsx(T5e,{onNavigate:l});case"model-apply":return a.jsx(hPe,{});case"model-governance":return a.jsx(OPe,{context:i,onNavigate:l});case"quality-monitoring":return a.jsx(QPe,{context:i,onNavigate:l});case"compliance-audit":return a.jsx(rDe,{context:i,onNavigate:l});case"settings":return a.jsx(sDe,{userRole:e});default:return a.jsx(B8,{onNavigate:l})}};return a.jsx(wke,{currentPage:n,userRole:e,userName:t,onPageChange:s,onLogout:r,children:d()})}var cDe=(e,t,r,n,s,i,o,l)=>{let d=document.documentElement,u=["light","dark"];function m(x){(Array.isArray(e)?e:[e]).forEach(y=>{let N=y==="class",v=N&&i?s.map(S=>i[S]||S):s;N?(d.classList.remove(...v),d.classList.add(i&&i[x]?i[x]:x)):d.setAttribute(y,x)}),p(x)}function p(x){l&&u.includes(x)&&(d.style.colorScheme=x)}function g(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(n)m(n);else try{let x=localStorage.getItem(t)||r,y=o&&x==="system"?g():x;m(y)}catch{}},dDe=h.createContext(void 0),uDe={setTheme:e=>{},themes:[]},fDe=()=>{var e;return(e=h.useContext(dDe))!=null?e:uDe};h.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:n,enableColorScheme:s,defaultTheme:i,value:o,themes:l,nonce:d,scriptProps:u})=>{let m=JSON.stringify([r,t,i,e,l,o,n,s]).slice(1,-1);return h.createElement("script",{...u,suppressHydrationWarning:!0,nonce:typeof window>"u"?d:"",dangerouslySetInnerHTML:{__html:`(${cDe.toString()})(${m})`}})});const uy=({...e})=>{const{theme:t="system"}=fDe();return a.jsx(Kee,{theme:t,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...e})};function UV(e){if(!e.trim())return"/neuro-shield/";let t=e.trim();return t.startsWith("/")||(t=`/${t}`),t.endsWith("/")||(t=`${t}/`),t}function Z8(e){if(e==="/p/sms"||e==="/p/sms/")return!0;const t=UV("/neuro-shield/");if(!e.startsWith(t))return!1;const r=e.slice(t.length-1);return r==="/p/sms"||r==="/p/sms/"}function J8(e){const t=new Set(["/citizen","/citizen/","/p/citizen","/p/citizen/","/citizen-portal","/citizen-portal/"]);if(t.has(e))return!0;const r=UV("/neuro-shield/");if(!e.startsWith(r))return!1;const n=e.slice(r.length-1);return t.has(n)}function pDe(){const[e,t]=h.useState(()=>window.location.hash==="#citizen");return h.useEffect(()=>{const r=()=>t(window.location.hash==="#citizen");return window.addEventListener("hashchange",r),()=>window.removeEventListener("hashchange",r)},[]),e}function mDe(){const[e,t]=h.useState(()=>J8(window.location.pathname));return h.useEffect(()=>{const r=()=>t(J8(window.location.pathname));return window.addEventListener("popstate",r),window.addEventListener("hashchange",r),()=>{window.removeEventListener("popstate",r),window.removeEventListener("hashchange",r)}},[]),e}function hDe(){const[e,t]=h.useState(()=>Z8(window.location.pathname));return h.useEffect(()=>{const r=()=>t(Z8(window.location.pathname));return window.addEventListener("popstate",r),window.addEventListener("hashchange",r),()=>{window.removeEventListener("popstate",r),window.removeEventListener("hashchange",r)}},[]),e}function gDe(){const[e,t]=h.useState(null),r=pDe(),n=mDe(),s=r||n,i=hDe(),o=d=>{t(d),console.log("[AUDIT] User Logged In:",{email:d.email,role:d.role,timestamp:new Date().toISOString()})},l=()=>{console.log("[AUDIT] User Logged Out:",{email:e?.email,timestamp:new Date().toISOString()}),t(null),window.location.hash==="#citizen"&&history.replaceState(null,"",window.location.pathname)};return i?a.jsxs(a.Fragment,{children:[a.jsx(uy,{}),a.jsx(Bre,{})]}):s?a.jsxs(a.Fragment,{children:[a.jsx(uy,{}),a.jsx(bC,{})]}):e?a.jsxs(a.Fragment,{children:[a.jsx(uy,{}),e.role==="citizen"&&a.jsx(bC,{}),e.role==="local_center"&&a.jsx(QOe,{userRole:"counselor",userName:e.name,centerName:e.organization||"",onLogout:l}),e.role==="regional_center"&&a.jsx(lke,{userRole:"counselor",userName:e.name,centerName:e.organization||"",onLogout:l}),e.role==="central_admin"&&a.jsx(lDe,{userRole:"central_admin",userName:e.name,onLogout:l})]}):a.jsxs(a.Fragment,{children:[a.jsx(uy,{}),a.jsx(Yee,{onLogin:o})]})}const xDe=new WY({defaultOptions:{queries:{staleTime:6e4,gcTime:30*6e4,refetchOnWindowFocus:!1}}});uX.createRoot(document.getElementById("root")).render(a.jsx(VY,{client:xDe,children:a.jsx(gDe,{})}));
