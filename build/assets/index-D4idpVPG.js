function HY(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var _b=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Jn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var WS={exports:{}},N0={},YS={exports:{}},Cn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lI;function KY(){if(lI)return Cn;lI=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.iterator;function g(V){return V===null||typeof V!="object"?null:(V=p&&V[p]||V["@@iterator"],typeof V=="function"?V:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,v={};function N(V,ee,ae){this.props=V,this.context=ee,this.refs=v,this.updater=ae||x}N.prototype.isReactComponent={},N.prototype.setState=function(V,ee){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,ee,"setState")},N.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function S(){}S.prototype=N.prototype;function j(V,ee,ae){this.props=V,this.context=ee,this.refs=v,this.updater=ae||x}var C=j.prototype=new S;C.constructor=j,y(C,N.prototype),C.isPureReactComponent=!0;var _=Array.isArray,A=Object.prototype.hasOwnProperty,T={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function M(V,ee,ae){var ue,ce={},Z=null,ie=null;if(ee!=null)for(ue in ee.ref!==void 0&&(ie=ee.ref),ee.key!==void 0&&(Z=""+ee.key),ee)A.call(ee,ue)&&!R.hasOwnProperty(ue)&&(ce[ue]=ee[ue]);var Se=arguments.length-2;if(Se===1)ce.children=ae;else if(1<Se){for(var fe=Array(Se),Te=0;Te<Se;Te++)fe[Te]=arguments[Te+2];ce.children=fe}if(V&&V.defaultProps)for(ue in Se=V.defaultProps,Se)ce[ue]===void 0&&(ce[ue]=Se[ue]);return{$$typeof:e,type:V,key:Z,ref:ie,props:ce,_owner:T.current}}function P(V,ee){return{$$typeof:e,type:V.type,key:ee,ref:V.ref,props:V.props,_owner:V._owner}}function $(V){return typeof V=="object"&&V!==null&&V.$$typeof===e}function w(V){var ee={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ae){return ee[ae]})}var U=/\/+/g;function X(V,ee){return typeof V=="object"&&V!==null&&V.key!=null?w(""+V.key):ee.toString(36)}function I(V,ee,ae,ue,ce){var Z=typeof V;(Z==="undefined"||Z==="boolean")&&(V=null);var ie=!1;if(V===null)ie=!0;else switch(Z){case"string":case"number":ie=!0;break;case"object":switch(V.$$typeof){case e:case t:ie=!0}}if(ie)return ie=V,ce=ce(ie),V=ue===""?"."+X(ie,0):ue,_(ce)?(ae="",V!=null&&(ae=V.replace(U,"$&/")+"/"),I(ce,ee,ae,"",function(Te){return Te})):ce!=null&&($(ce)&&(ce=P(ce,ae+(!ce.key||ie&&ie.key===ce.key?"":(""+ce.key).replace(U,"$&/")+"/")+V)),ee.push(ce)),1;if(ie=0,ue=ue===""?".":ue+":",_(V))for(var Se=0;Se<V.length;Se++){Z=V[Se];var fe=ue+X(Z,Se);ie+=I(Z,ee,ae,fe,ce)}else if(fe=g(V),typeof fe=="function")for(V=fe.call(V),Se=0;!(Z=V.next()).done;)Z=Z.value,fe=ue+X(Z,Se++),ie+=I(Z,ee,ae,fe,ce);else if(Z==="object")throw ee=String(V),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.");return ie}function G(V,ee,ae){if(V==null)return V;var ue=[],ce=0;return I(V,ue,"","",function(Z){return ee.call(ae,Z,ce++)}),ue}function L(V){if(V._status===-1){var ee=V._result;ee=ee(),ee.then(function(ae){(V._status===0||V._status===-1)&&(V._status=1,V._result=ae)},function(ae){(V._status===0||V._status===-1)&&(V._status=2,V._result=ae)}),V._status===-1&&(V._status=0,V._result=ee)}if(V._status===1)return V._result.default;throw V._result}var H={current:null},F={transition:null},K={ReactCurrentDispatcher:H,ReactCurrentBatchConfig:F,ReactCurrentOwner:T};function ne(){throw Error("act(...) is not supported in production builds of React.")}return Cn.Children={map:G,forEach:function(V,ee,ae){G(V,function(){ee.apply(this,arguments)},ae)},count:function(V){var ee=0;return G(V,function(){ee++}),ee},toArray:function(V){return G(V,function(ee){return ee})||[]},only:function(V){if(!$(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},Cn.Component=N,Cn.Fragment=n,Cn.Profiler=s,Cn.PureComponent=j,Cn.StrictMode=r,Cn.Suspense=c,Cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K,Cn.act=ne,Cn.cloneElement=function(V,ee,ae){if(V==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+V+".");var ue=y({},V.props),ce=V.key,Z=V.ref,ie=V._owner;if(ee!=null){if(ee.ref!==void 0&&(Z=ee.ref,ie=T.current),ee.key!==void 0&&(ce=""+ee.key),V.type&&V.type.defaultProps)var Se=V.type.defaultProps;for(fe in ee)A.call(ee,fe)&&!R.hasOwnProperty(fe)&&(ue[fe]=ee[fe]===void 0&&Se!==void 0?Se[fe]:ee[fe])}var fe=arguments.length-2;if(fe===1)ue.children=ae;else if(1<fe){Se=Array(fe);for(var Te=0;Te<fe;Te++)Se[Te]=arguments[Te+2];ue.children=Se}return{$$typeof:e,type:V.type,key:ce,ref:Z,props:ue,_owner:ie}},Cn.createContext=function(V){return V={$$typeof:o,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},V.Provider={$$typeof:i,_context:V},V.Consumer=V},Cn.createElement=M,Cn.createFactory=function(V){var ee=M.bind(null,V);return ee.type=V,ee},Cn.createRef=function(){return{current:null}},Cn.forwardRef=function(V){return{$$typeof:l,render:V}},Cn.isValidElement=$,Cn.lazy=function(V){return{$$typeof:m,_payload:{_status:-1,_result:V},_init:L}},Cn.memo=function(V,ee){return{$$typeof:u,type:V,compare:ee===void 0?null:ee}},Cn.startTransition=function(V){var ee=F.transition;F.transition={};try{V()}finally{F.transition=ee}},Cn.unstable_act=ne,Cn.useCallback=function(V,ee){return H.current.useCallback(V,ee)},Cn.useContext=function(V){return H.current.useContext(V)},Cn.useDebugValue=function(){},Cn.useDeferredValue=function(V){return H.current.useDeferredValue(V)},Cn.useEffect=function(V,ee){return H.current.useEffect(V,ee)},Cn.useId=function(){return H.current.useId()},Cn.useImperativeHandle=function(V,ee,ae){return H.current.useImperativeHandle(V,ee,ae)},Cn.useInsertionEffect=function(V,ee){return H.current.useInsertionEffect(V,ee)},Cn.useLayoutEffect=function(V,ee){return H.current.useLayoutEffect(V,ee)},Cn.useMemo=function(V,ee){return H.current.useMemo(V,ee)},Cn.useReducer=function(V,ee,ae){return H.current.useReducer(V,ee,ae)},Cn.useRef=function(V){return H.current.useRef(V)},Cn.useState=function(V){return H.current.useState(V)},Cn.useSyncExternalStore=function(V,ee,ae){return H.current.useSyncExternalStore(V,ee,ae)},Cn.useTransition=function(){return H.current.useTransition()},Cn.version="18.3.1",Cn}var cI;function P1(){return cI||(cI=1,YS.exports=KY()),YS.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dI;function zY(){if(dI)return N0;dI=1;var e=P1(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(l,c,u){var m,p={},g=null,x=null;u!==void 0&&(g=""+u),c.key!==void 0&&(g=""+c.key),c.ref!==void 0&&(x=c.ref);for(m in c)r.call(c,m)&&!i.hasOwnProperty(m)&&(p[m]=c[m]);if(l&&l.defaultProps)for(m in c=l.defaultProps,c)p[m]===void 0&&(p[m]=c[m]);return{$$typeof:t,type:l,key:g,ref:x,props:p,_owner:s.current}}return N0.Fragment=n,N0.jsx=o,N0.jsxs=o,N0}var uI;function qY(){return uI||(uI=1,WS.exports=zY()),WS.exports}var a=qY(),hh=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},VY={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},WY=class{#e=VY;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},Cf=new WY;function YY(e){setTimeout(e,0)}var $f=typeof window>"u"||"Deno"in globalThis;function Xs(){}function QY(e,t){return typeof e=="function"?e(t):e}function fC(e){return typeof e=="number"&&e>=0&&e!==1/0}function EU(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Eu(e,t){return typeof e=="function"?e(t):e}function uo(e,t){return typeof e=="function"?e(t):e}function fI(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==sR(o,t.options))return!1}else if(!_g(t.queryKey,o))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||i&&!i(t))}function pI(e,t){const{exact:n,status:r,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(Ff(t.options.mutationKey)!==Ff(i))return!1}else if(!_g(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function sR(e,t){return(t?.queryKeyHashFn||Ff)(e)}function Ff(e){return JSON.stringify(e,(t,n)=>pC(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function _g(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>_g(e[n],t[n])):!1}var XY=Object.prototype.hasOwnProperty;function jU(e,t,n=0){if(e===t)return e;if(n>500)return t;const r=mI(e)&&mI(t);if(!r&&!(pC(e)&&pC(t)))return t;const i=(r?e:Object.keys(e)).length,o=r?t:Object.keys(t),l=o.length,c=r?new Array(l):{};let u=0;for(let m=0;m<l;m++){const p=r?m:o[m],g=e[p],x=t[p];if(g===x){c[p]=g,(r?m<i:XY.call(e,p))&&u++;continue}if(g===null||x===null||typeof g!="object"||typeof x!="object"){c[p]=x;continue}const y=jU(g,x,n+1);c[p]=y,y===g&&u++}return i===l&&u===i?e:c}function zy(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function mI(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function pC(e){if(!hI(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!hI(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function hI(e){return Object.prototype.toString.call(e)==="[object Object]"}function JY(e){return new Promise(t=>{Cf.setTimeout(t,e)})}function mC(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?jU(e,t):t}function am(e){return e}function ZY(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function eQ(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var iR=Symbol();function wU(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===iR?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function oR(e,t){return typeof e=="function"?e(...t):!!e}function tQ(e,t,n){let r=!1,s;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(s??=t(),r||(r=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),e}var nQ=class extends hh{#e;#t;#n;constructor(){super(),this.#n=e=>{if(!$f&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},lR=new nQ;function hC(){let e,t;const n=new Promise((s,i)=>{e=s,t=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}var rQ=YY;function aQ(){let e=[],t=0,n=l=>{l()},r=l=>{l()},s=rQ;const i=l=>{t?e.push(l):s(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var Ma=aQ(),sQ=class extends hh{#e=!0;#t;#n;constructor(){super(),this.#n=e=>{if(!$f&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(n=>{n(e)}))}isOnline(){return this.#e}},qy=new sQ;function iQ(e){return Math.min(1e3*2**e,3e4)}function AU(e){return(e??"online")==="online"?qy.isOnline():!0}var gC=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function _U(e){let t=!1,n=0,r;const s=hC(),i=()=>s.status!=="pending",o=v=>{if(!i()){const N=new gC(v);g(N),e.onCancel?.(N)}},l=()=>{t=!0},c=()=>{t=!1},u=()=>lR.isFocused()&&(e.networkMode==="always"||qy.isOnline())&&e.canRun(),m=()=>AU(e.networkMode)&&e.canRun(),p=v=>{i()||(r?.(),s.resolve(v))},g=v=>{i()||(r?.(),s.reject(v))},x=()=>new Promise(v=>{r=N=>{(i()||u())&&v(N)},e.onPause?.()}).then(()=>{r=void 0,i()||e.onContinue?.()}),y=()=>{if(i())return;let v;const N=n===0?e.initialPromise:void 0;try{v=N??e.fn()}catch(S){v=Promise.reject(S)}Promise.resolve(v).then(p).catch(S=>{if(i())return;const j=e.retry??($f?0:3),C=e.retryDelay??iQ,_=typeof C=="function"?C(n,S):C,A=j===!0||typeof j=="number"&&n<j||typeof j=="function"&&j(n,S);if(t||!A){g(S);return}n++,e.onFail?.(n,S),JY(_).then(()=>u()?void 0:x()).then(()=>{t?g(S):y()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r?.(),s),cancelRetry:l,continueRetry:c,canStart:m,start:()=>(m()?y():x().then(y),s)}}var CU=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),fC(this.gcTime)&&(this.#e=Cf.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??($f?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Cf.clearTimeout(this.#e),this.#e=void 0)}},oQ=class extends CU{#e;#t;#n;#a;#r;#i;#o;constructor(e){super(),this.#o=!1,this.#i=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#a=e.client,this.#n=this.#a.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=xI(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(e){if(this.options={...this.#i,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=xI(this.options);t.data!==void 0&&(this.setState(gI(t.data,t.dataUpdatedAt)),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(e,t){const n=mC(this.state.data,e,this.options);return this.#s({data:n,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),n}setState(e,t){this.#s({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#r?.promise;return this.#r?.cancel(e),t?t.then(Xs).catch(Xs):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>uo(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===iR||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Eu(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!EU(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#r&&(this.#o?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#r?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(e&&this.setOptions(e),!this.options.queryFn){const l=this.observers.find(c=>c.options.queryFn);l&&this.setOptions(l.options)}const n=new AbortController,r=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(this.#o=!0,n.signal)})},s=()=>{const l=wU(this.options,t),u=(()=>{const m={client:this.#a,queryKey:this.queryKey,meta:this.meta};return r(m),m})();return this.#o=!1,this.options.persister?this.options.persister(l,u,this):l(u)},o=(()=>{const l={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#a,state:this.state,fetchFn:s};return r(l),l})();this.options.behavior?.onFetch(o,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#s({type:"fetch",meta:o.fetchOptions?.meta}),this.#r=_U({initialPromise:t?.initialPromise,fn:o.fetchFn,onCancel:l=>{l instanceof gC&&l.revert&&this.setState({...this.#t,fetchStatus:"idle"}),n.abort()},onFail:(l,c)=>{this.#s({type:"failed",failureCount:l,error:c})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0});try{const l=await this.#r.start();if(l===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(l),this.#n.config.onSuccess?.(l,this),this.#n.config.onSettled?.(l,this.state.error,this),l}catch(l){if(l instanceof gC){if(l.silent)return this.#r.promise;if(l.revert){if(this.state.data===void 0)throw l;return this.state.data}}throw this.#s({type:"error",error:l}),this.#n.config.onError?.(l,this),this.#n.config.onSettled?.(this.state.data,l,this),l}finally{this.scheduleGc()}}#s(e){const t=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...TU(n.data,this.options),fetchMeta:e.meta??null};case"success":const r={...n,...gI(e.data,e.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?r:void 0,r;case"error":const s=e.error;return{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=t(this.state),Ma.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:e})})}};function TU(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:AU(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function gI(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function xI(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var lQ=class extends hh{constructor(e,t){super(),this.options=t,this.#e=e,this.#s=null,this.#o=hC(),this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#n=void 0;#a=void 0;#r;#i;#o;#s;#h;#f;#p;#c;#d;#l;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),bI(this.#t,this.options)?this.#u():this.updateResult(),this.#y())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return xC(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return xC(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#v(),this.#N(),this.#t.removeObserver(this)}setOptions(e){const t=this.options,n=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof uo(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#S(),this.#t.setOptions(this.options),t._defaulted&&!zy(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const r=this.hasListeners();r&&yI(this.#t,n,this.options,t)&&this.#u(),this.updateResult(),r&&(this.#t!==n||uo(this.options.enabled,this.#t)!==uo(t.enabled,this.#t)||Eu(this.options.staleTime,this.#t)!==Eu(t.staleTime,this.#t))&&this.#g();const s=this.#x();r&&(this.#t!==n||uo(this.options.enabled,this.#t)!==uo(t.enabled,this.#t)||s!==this.#l)&&this.#b(s)}getOptimisticResult(e){const t=this.#e.getQueryCache().build(this.#e,e),n=this.createResult(t,e);return dQ(this,n)&&(this.#a=n,this.#i=this.options,this.#r=this.#t.state),n}getCurrentResult(){return this.#a}trackResult(e,t){return new Proxy(e,{get:(n,r)=>(this.trackProp(r),t?.(r),r==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,r))})}trackProp(e){this.#m.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#e.defaultQueryOptions(e),n=this.#e.getQueryCache().build(this.#e,t);return n.fetch().then(()=>this.createResult(n,t))}fetch(e){return this.#u({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#a))}#u(e){this.#S();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(Xs)),t}#g(){this.#v();const e=Eu(this.options.staleTime,this.#t);if($f||this.#a.isStale||!fC(e))return;const n=EU(this.#a.dataUpdatedAt,e)+1;this.#c=Cf.setTimeout(()=>{this.#a.isStale||this.updateResult()},n)}#x(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#b(e){this.#N(),this.#l=e,!($f||uo(this.options.enabled,this.#t)===!1||!fC(this.#l)||this.#l===0)&&(this.#d=Cf.setInterval(()=>{(this.options.refetchIntervalInBackground||lR.isFocused())&&this.#u()},this.#l))}#y(){this.#g(),this.#b(this.#x())}#v(){this.#c&&(Cf.clearTimeout(this.#c),this.#c=void 0)}#N(){this.#d&&(Cf.clearInterval(this.#d),this.#d=void 0)}createResult(e,t){const n=this.#t,r=this.options,s=this.#a,i=this.#r,o=this.#i,c=e!==n?e.state:this.#n,{state:u}=e;let m={...u},p=!1,g;if(t._optimisticResults){const M=this.hasListeners(),P=!M&&bI(e,t),$=M&&yI(e,n,t,r);(P||$)&&(m={...m,...TU(u.data,e.options)}),t._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:x,errorUpdatedAt:y,status:v}=m;g=m.data;let N=!1;if(t.placeholderData!==void 0&&g===void 0&&v==="pending"){let M;s?.isPlaceholderData&&t.placeholderData===o?.placeholderData?(M=s.data,N=!0):M=typeof t.placeholderData=="function"?t.placeholderData(this.#p?.state.data,this.#p):t.placeholderData,M!==void 0&&(v="success",g=mC(s?.data,M,t),p=!0)}if(t.select&&g!==void 0&&!N)if(s&&g===i?.data&&t.select===this.#h)g=this.#f;else try{this.#h=t.select,g=t.select(g),g=mC(s?.data,g,t),this.#f=g,this.#s=null}catch(M){this.#s=M}this.#s&&(x=this.#s,g=this.#f,y=Date.now(),v="error");const S=m.fetchStatus==="fetching",j=v==="pending",C=v==="error",_=j&&S,A=g!==void 0,R={status:v,fetchStatus:m.fetchStatus,isPending:j,isSuccess:v==="success",isError:C,isInitialLoading:_,isLoading:_,data:g,dataUpdatedAt:m.dataUpdatedAt,error:x,errorUpdatedAt:y,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>c.dataUpdateCount||m.errorUpdateCount>c.errorUpdateCount,isFetching:S,isRefetching:S&&!j,isLoadingError:C&&!A,isPaused:m.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:C&&A,isStale:cR(e,t),refetch:this.refetch,promise:this.#o,isEnabled:uo(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const M=R.data!==void 0,P=R.status==="error"&&!M,$=X=>{P?X.reject(R.error):M&&X.resolve(R.data)},w=()=>{const X=this.#o=R.promise=hC();$(X)},U=this.#o;switch(U.status){case"pending":e.queryHash===n.queryHash&&$(U);break;case"fulfilled":(P||R.data!==U.value)&&w();break;case"rejected":(!P||R.error!==U.reason)&&w();break}}return R}updateResult(){const e=this.#a,t=this.createResult(this.#t,this.options);if(this.#r=this.#t.state,this.#i=this.options,this.#r.data!==void 0&&(this.#p=this.#t),zy(t,e))return;this.#a=t;const n=()=>{if(!e)return!0;const{notifyOnChangeProps:r}=this.options,s=typeof r=="function"?r():r;if(s==="all"||!s&&!this.#m.size)return!0;const i=new Set(s??this.#m);return this.options.throwOnError&&i.add("error"),Object.keys(this.#a).some(o=>{const l=o;return this.#a[l]!==e[l]&&i.has(l)})};this.#E({listeners:n()})}#S(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const t=this.#t;this.#t=e,this.#n=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#y()}#E(e){Ma.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#a)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function cQ(e,t){return uo(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function bI(e,t){return cQ(e,t)||e.state.data!==void 0&&xC(e,t,t.refetchOnMount)}function xC(e,t,n){if(uo(t.enabled,e)!==!1&&Eu(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&cR(e,t)}return!1}function yI(e,t,n,r){return(e!==t||uo(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&cR(e,n)}function cR(e,t){return uo(t.enabled,e)!==!1&&e.isStaleByTime(Eu(t.staleTime,e))}function dQ(e,t){return!zy(e.getCurrentResult(),t)}function vI(e){return{onFetch:(t,n)=>{const r=t.options,s=t.fetchOptions?.meta?.fetchMore?.direction,i=t.state.data?.pages||[],o=t.state.data?.pageParams||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let m=!1;const p=y=>{tQ(y,()=>t.signal,()=>m=!0)},g=wU(t.options,t.fetchOptions),x=async(y,v,N)=>{if(m)return Promise.reject();if(v==null&&y.pages.length)return Promise.resolve(y);const j=(()=>{const T={client:t.client,queryKey:t.queryKey,pageParam:v,direction:N?"backward":"forward",meta:t.options.meta};return p(T),T})(),C=await g(j),{maxPages:_}=t.options,A=N?eQ:ZY;return{pages:A(y.pages,C,_),pageParams:A(y.pageParams,v,_)}};if(s&&i.length){const y=s==="backward",v=y?uQ:NI,N={pages:i,pageParams:o},S=v(r,N);l=await x(N,S,y)}else{const y=e??i.length;do{const v=c===0?o[0]??r.initialPageParam:NI(r,l);if(c>0&&v==null)break;l=await x(l,v),c++}while(c<y)}return l};t.options.persister?t.fetchFn=()=>t.options.persister?.(u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n):t.fetchFn=u}}}function NI(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function uQ(e,{pages:t,pageParams:n}){return t.length>0?e.getPreviousPageParam?.(t[0],t,n[0],n):void 0}var fQ=class extends CU{#e;#t;#n;#a;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#n=e.mutationCache,this.#t=[],this.state=e.state||OU(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#a?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#r({type:"continue"})},n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#a=_U({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(i,o)=>{this.#r({type:"failed",failureCount:i,error:o})},onPause:()=>{this.#r({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const r=this.state.status==="pending",s=!this.#a.canStart();try{if(r)t();else{this.#r({type:"pending",variables:e,isPaused:s}),this.#n.config.onMutate&&await this.#n.config.onMutate(e,this,n);const o=await this.options.onMutate?.(e,n);o!==this.state.context&&this.#r({type:"pending",context:o,variables:e,isPaused:s})}const i=await this.#a.start();return await this.#n.config.onSuccess?.(i,e,this.state.context,this,n),await this.options.onSuccess?.(i,e,this.state.context,n),await this.#n.config.onSettled?.(i,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(i,null,e,this.state.context,n),this.#r({type:"success",data:i}),i}catch(i){try{await this.#n.config.onError?.(i,e,this.state.context,this,n)}catch(o){Promise.reject(o)}try{await this.options.onError?.(i,e,this.state.context,n)}catch(o){Promise.reject(o)}try{await this.#n.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this,n)}catch(o){Promise.reject(o)}try{await this.options.onSettled?.(void 0,i,e,this.state.context,n)}catch(o){Promise.reject(o)}throw this.#r({type:"error",error:i}),i}finally{this.#n.runNext(this)}}#r(e){const t=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Ma.batch(()=>{this.#t.forEach(n=>{n.onMutationUpdate(e)}),this.#n.notify({mutation:this,type:"updated",action:e})})}};function OU(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var pQ=class extends hh{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(e,t,n){const r=new fQ({client:e,mutationCache:this,mutationId:++this.#n,options:e.defaultMutationOptions(t),state:n});return this.add(r),r}add(e){this.#e.add(e);const t=Cb(e);if(typeof t=="string"){const n=this.#t.get(t);n?n.push(e):this.#t.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=Cb(e);if(typeof t=="string"){const n=this.#t.get(t);if(n)if(n.length>1){const r=n.indexOf(e);r!==-1&&n.splice(r,1)}else n[0]===e&&this.#t.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Cb(e);if(typeof t=="string"){const r=this.#t.get(t)?.find(s=>s.state.status==="pending");return!r||r===e}else return!0}runNext(e){const t=Cb(e);return typeof t=="string"?this.#t.get(t)?.find(r=>r!==e&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Ma.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(n=>pI(t,n))}findAll(e={}){return this.getAll().filter(t=>pI(e,t))}notify(e){Ma.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Ma.batch(()=>Promise.all(e.map(t=>t.continue().catch(Xs))))}};function Cb(e){return e.options.scope?.id}var mQ=class extends hh{#e;#t=void 0;#n;#a;constructor(t,n){super(),this.#e=t,this.setOptions(n),this.bindMethods(),this.#r()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const n=this.options;this.options=this.#e.defaultMutationOptions(t),zy(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),n?.mutationKey&&this.options.mutationKey&&Ff(n.mutationKey)!==Ff(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(t){this.#r(),this.#i(t)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#r(),this.#i()}mutate(t,n){return this.#a=n,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(t)}#r(){const t=this.#n?.state??OU();this.#t={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#i(t){Ma.batch(()=>{if(this.#a&&this.hasListeners()){const n=this.#t.variables,r=this.#t.context,s={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(t?.type==="success"){try{this.#a.onSuccess?.(t.data,n,r,s)}catch(i){Promise.reject(i)}try{this.#a.onSettled?.(t.data,null,n,r,s)}catch(i){Promise.reject(i)}}else if(t?.type==="error"){try{this.#a.onError?.(t.error,n,r,s)}catch(i){Promise.reject(i)}try{this.#a.onSettled?.(void 0,t.error,n,r,s)}catch(i){Promise.reject(i)}}}this.listeners.forEach(n=>{n(this.#t)})})}},hQ=class extends hh{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,n){const r=t.queryKey,s=t.queryHash??sR(r,t);let i=this.get(s);return i||(i=new oQ({client:e,queryKey:r,queryHash:s,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(r)}),this.add(i)),i}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Ma.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(n=>fI(t,n))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(n=>fI(e,n)):t}notify(e){Ma.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Ma.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Ma.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},gQ=class{#e;#t;#n;#a;#r;#i;#o;#s;constructor(e={}){this.#e=e.queryCache||new hQ,this.#t=e.mutationCache||new pQ,this.#n=e.defaultOptions||{},this.#a=new Map,this.#r=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#o=lR.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#s=qy.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#o?.(),this.#o=void 0,this.#s?.(),this.#s=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=this.#e.build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(Eu(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),i=this.#e.get(r.queryHash)?.state.data,o=QY(t,i);if(o!==void 0)return this.#e.build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return Ma.batch(()=>this.#e.findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;Ma.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=this.#e;return Ma.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=Ma.batch(()=>this.#e.findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(Xs).catch(Xs)}invalidateQueries(e,t={}){return Ma.batch(()=>(this.#e.findAll(e).forEach(n=>{n.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=Ma.batch(()=>this.#e.findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Xs)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Xs)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=this.#e.build(this,t);return n.isStaleByTime(Eu(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Xs).catch(Xs)}fetchInfiniteQuery(e){return e.behavior=vI(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Xs).catch(Xs)}ensureInfiniteQueryData(e){return e.behavior=vI(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return qy.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(e){this.#n=e}setQueryDefaults(e,t){this.#a.set(Ff(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#a.values()],n={};return t.forEach(r=>{_g(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){this.#r.set(Ff(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#r.values()],n={};return t.forEach(r=>{_g(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#n.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=sR(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===iR&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#n.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},h=P1();const W=Jn(h),dR=HY({__proto__:null,default:W},[h]);var RU=h.createContext(void 0),M1=e=>{const t=h.useContext(RU);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},xQ=({client:e,children:t})=>(h.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),a.jsx(RU.Provider,{value:e,children:t})),kU=h.createContext(!1),bQ=()=>h.useContext(kU);kU.Provider;function yQ(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var vQ=h.createContext(yQ()),NQ=()=>h.useContext(vQ),SQ=(e,t,n)=>{const r=n?.state.error&&typeof e.throwOnError=="function"?oR(e.throwOnError,[n.state.error,n]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||r)&&(t.isReset()||(e.retryOnMount=!1))},EQ=e=>{h.useEffect(()=>{e.clearReset()},[e])},jQ=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(s&&e.data===void 0||oR(n,[e.error,r])),wQ=e=>{if(e.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},AQ=(e,t)=>e.isLoading&&e.isFetching&&!t,_Q=(e,t)=>e?.suspense&&t.isPending,SI=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function CQ(e,t,n){const r=bQ(),s=NQ(),i=M1(),o=i.defaultQueryOptions(e);i.getDefaultOptions().queries?._experimental_beforeQuery?.(o);const l=i.getQueryCache().get(o.queryHash);o._optimisticResults=r?"isRestoring":"optimistic",wQ(o),SQ(o,s,l),EQ(s);const c=!i.getQueryCache().get(o.queryHash),[u]=h.useState(()=>new t(i,o)),m=u.getOptimisticResult(o),p=!r&&e.subscribed!==!1;if(h.useSyncExternalStore(h.useCallback(g=>{const x=p?u.subscribe(Ma.batchCalls(g)):Xs;return u.updateResult(),x},[u,p]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),h.useEffect(()=>{u.setOptions(o)},[o,u]),_Q(o,m))throw SI(o,u,s);if(jQ({result:m,errorResetBoundary:s,throwOnError:o.throwOnError,query:l,suspense:o.suspense}))throw m.error;return i.getDefaultOptions().queries?._experimental_afterQuery?.(o,m),o.experimental_prefetchInRender&&!$f&&AQ(m,r)&&(c?SI(o,u,s):l?.promise)?.catch(Xs).finally(()=>{u.updateResult()}),o.notifyOnChangeProps?m:u.trackResult(m)}function go(e,t){return CQ(e,lQ)}function TQ(e,t){const n=M1(),[r]=h.useState(()=>new mQ(n,e));h.useEffect(()=>{r.setOptions(e)},[r,e]);const s=h.useSyncExternalStore(h.useCallback(o=>r.subscribe(Ma.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=h.useCallback((o,l)=>{r.mutate(o,l).catch(Xs)},[r]);if(s.error&&oR(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}var Tb={},QS={exports:{}},bi={},XS={exports:{}},JS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EI;function OQ(){return EI||(EI=1,(function(e){function t(F,K){var ne=F.length;F.push(K);e:for(;0<ne;){var V=ne-1>>>1,ee=F[V];if(0<s(ee,K))F[V]=K,F[ne]=ee,ne=V;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var K=F[0],ne=F.pop();if(ne!==K){F[0]=ne;e:for(var V=0,ee=F.length,ae=ee>>>1;V<ae;){var ue=2*(V+1)-1,ce=F[ue],Z=ue+1,ie=F[Z];if(0>s(ce,ne))Z<ee&&0>s(ie,ce)?(F[V]=ie,F[Z]=ne,V=Z):(F[V]=ce,F[ue]=ne,V=ue);else if(Z<ee&&0>s(ie,ne))F[V]=ie,F[Z]=ne,V=Z;else break e}}return K}function s(F,K){var ne=F.sortIndex-K.sortIndex;return ne!==0?ne:F.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],m=1,p=null,g=3,x=!1,y=!1,v=!1,N=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(F){for(var K=n(u);K!==null;){if(K.callback===null)r(u);else if(K.startTime<=F)r(u),K.sortIndex=K.expirationTime,t(c,K);else break;K=n(u)}}function _(F){if(v=!1,C(F),!y)if(n(c)!==null)y=!0,L(A);else{var K=n(u);K!==null&&H(_,K.startTime-F)}}function A(F,K){y=!1,v&&(v=!1,S(M),M=-1),x=!0;var ne=g;try{for(C(K),p=n(c);p!==null&&(!(p.expirationTime>K)||F&&!w());){var V=p.callback;if(typeof V=="function"){p.callback=null,g=p.priorityLevel;var ee=V(p.expirationTime<=K);K=e.unstable_now(),typeof ee=="function"?p.callback=ee:p===n(c)&&r(c),C(K)}else r(c);p=n(c)}if(p!==null)var ae=!0;else{var ue=n(u);ue!==null&&H(_,ue.startTime-K),ae=!1}return ae}finally{p=null,g=ne,x=!1}}var T=!1,R=null,M=-1,P=5,$=-1;function w(){return!(e.unstable_now()-$<P)}function U(){if(R!==null){var F=e.unstable_now();$=F;var K=!0;try{K=R(!0,F)}finally{K?X():(T=!1,R=null)}}else T=!1}var X;if(typeof j=="function")X=function(){j(U)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,G=I.port2;I.port1.onmessage=U,X=function(){G.postMessage(null)}}else X=function(){N(U,0)};function L(F){R=F,T||(T=!0,X())}function H(F,K){M=N(function(){F(e.unstable_now())},K)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(F){F.callback=null},e.unstable_continueExecution=function(){y||x||(y=!0,L(A))},e.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<F?Math.floor(1e3/F):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(F){switch(g){case 1:case 2:case 3:var K=3;break;default:K=g}var ne=g;g=K;try{return F()}finally{g=ne}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(F,K){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var ne=g;g=F;try{return K()}finally{g=ne}},e.unstable_scheduleCallback=function(F,K,ne){var V=e.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?V+ne:V):ne=V,F){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=ne+ee,F={id:m++,callback:K,priorityLevel:F,startTime:ne,expirationTime:ee,sortIndex:-1},ne>V?(F.sortIndex=ne,t(u,F),n(c)===null&&F===n(u)&&(v?(S(M),M=-1):v=!0,H(_,ne-V))):(F.sortIndex=ee,t(c,F),y||x||(y=!0,L(A))),F},e.unstable_shouldYield=w,e.unstable_wrapCallback=function(F){var K=g;return function(){var ne=g;g=K;try{return F.apply(this,arguments)}finally{g=ne}}}})(JS)),JS}var jI;function RQ(){return jI||(jI=1,XS.exports=OQ()),XS.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wI;function kQ(){if(wI)return bi;wI=1;var e=P1(),t=RQ();function n(d){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+d,b=1;b<arguments.length;b++)f+="&args[]="+encodeURIComponent(arguments[b]);return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function i(d,f){o(d,f),o(d+"Capture",f)}function o(d,f){for(s[d]=f,d=0;d<f.length;d++)r.add(f[d])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},p={};function g(d){return c.call(p,d)?!0:c.call(m,d)?!1:u.test(d)?p[d]=!0:(m[d]=!0,!1)}function x(d,f,b,E){if(b!==null&&b.type===0)return!1;switch(typeof f){case"function":case"symbol":return!0;case"boolean":return E?!1:b!==null?!b.acceptsBooleans:(d=d.toLowerCase().slice(0,5),d!=="data-"&&d!=="aria-");default:return!1}}function y(d,f,b,E){if(f===null||typeof f>"u"||x(d,f,b,E))return!0;if(E)return!1;if(b!==null)switch(b.type){case 3:return!f;case 4:return f===!1;case 5:return isNaN(f);case 6:return isNaN(f)||1>f}return!1}function v(d,f,b,E,O,D,q){this.acceptsBooleans=f===2||f===3||f===4,this.attributeName=E,this.attributeNamespace=O,this.mustUseProperty=b,this.propertyName=d,this.type=f,this.sanitizeURL=D,this.removeEmptyString=q}var N={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(d){N[d]=new v(d,0,!1,d,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(d){var f=d[0];N[f]=new v(f,1,!1,d[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(d){N[d]=new v(d,2,!1,d.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(d){N[d]=new v(d,2,!1,d,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(d){N[d]=new v(d,3,!1,d.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(d){N[d]=new v(d,3,!0,d,null,!1,!1)}),["capture","download"].forEach(function(d){N[d]=new v(d,4,!1,d,null,!1,!1)}),["cols","rows","size","span"].forEach(function(d){N[d]=new v(d,6,!1,d,null,!1,!1)}),["rowSpan","start"].forEach(function(d){N[d]=new v(d,5,!1,d.toLowerCase(),null,!1,!1)});var S=/[\-:]([a-z])/g;function j(d){return d[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(d){var f=d.replace(S,j);N[f]=new v(f,1,!1,d,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(d){var f=d.replace(S,j);N[f]=new v(f,1,!1,d,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(d){var f=d.replace(S,j);N[f]=new v(f,1,!1,d,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(d){N[d]=new v(d,1,!1,d.toLowerCase(),null,!1,!1)}),N.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(d){N[d]=new v(d,1,!1,d.toLowerCase(),null,!0,!0)});function C(d,f,b,E){var O=N.hasOwnProperty(f)?N[f]:null;(O!==null?O.type!==0:E||!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(y(f,b,O,E)&&(b=null),E||O===null?g(f)&&(b===null?d.removeAttribute(f):d.setAttribute(f,""+b)):O.mustUseProperty?d[O.propertyName]=b===null?O.type===3?!1:"":b:(f=O.attributeName,E=O.attributeNamespace,b===null?d.removeAttribute(f):(O=O.type,b=O===3||O===4&&b===!0?"":""+b,E?d.setAttributeNS(E,f,b):d.setAttribute(f,b))))}var _=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,A=Symbol.for("react.element"),T=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),$=Symbol.for("react.provider"),w=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),H=Symbol.for("react.offscreen"),F=Symbol.iterator;function K(d){return d===null||typeof d!="object"?null:(d=F&&d[F]||d["@@iterator"],typeof d=="function"?d:null)}var ne=Object.assign,V;function ee(d){if(V===void 0)try{throw Error()}catch(b){var f=b.stack.trim().match(/\n( *(at )?)/);V=f&&f[1]||""}return`
`+V+d}var ae=!1;function ue(d,f){if(!d||ae)return"";ae=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(Re){var E=Re}Reflect.construct(d,[],f)}else{try{f.call()}catch(Re){E=Re}d.call(f.prototype)}else{try{throw Error()}catch(Re){E=Re}d()}}catch(Re){if(Re&&E&&typeof Re.stack=="string"){for(var O=Re.stack.split(`
`),D=E.stack.split(`
`),q=O.length-1,se=D.length-1;1<=q&&0<=se&&O[q]!==D[se];)se--;for(;1<=q&&0<=se;q--,se--)if(O[q]!==D[se]){if(q!==1||se!==1)do if(q--,se--,0>se||O[q]!==D[se]){var ge=`
`+O[q].replace(" at new "," at ");return d.displayName&&ge.includes("<anonymous>")&&(ge=ge.replace("<anonymous>",d.displayName)),ge}while(1<=q&&0<=se);break}}}finally{ae=!1,Error.prepareStackTrace=b}return(d=d?d.displayName||d.name:"")?ee(d):""}function ce(d){switch(d.tag){case 5:return ee(d.type);case 16:return ee("Lazy");case 13:return ee("Suspense");case 19:return ee("SuspenseList");case 0:case 2:case 15:return d=ue(d.type,!1),d;case 11:return d=ue(d.type.render,!1),d;case 1:return d=ue(d.type,!0),d;default:return""}}function Z(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case R:return"Fragment";case T:return"Portal";case P:return"Profiler";case M:return"StrictMode";case X:return"Suspense";case I:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case w:return(d.displayName||"Context")+".Consumer";case $:return(d._context.displayName||"Context")+".Provider";case U:var f=d.render;return d=d.displayName,d||(d=f.displayName||f.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case G:return f=d.displayName||null,f!==null?f:Z(d.type)||"Memo";case L:f=d._payload,d=d._init;try{return Z(d(f))}catch{}}return null}function ie(d){var f=d.type;switch(d.tag){case 24:return"Cache";case 9:return(f.displayName||"Context")+".Consumer";case 10:return(f._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return d=f.render,d=d.displayName||d.name||"",f.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case 7:return"Fragment";case 5:return f;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Z(f);case 8:return f===M?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f}return null}function Se(d){switch(typeof d){case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function fe(d){var f=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function Te(d){var f=fe(d)?"checked":"value",b=Object.getOwnPropertyDescriptor(d.constructor.prototype,f),E=""+d[f];if(!d.hasOwnProperty(f)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var O=b.get,D=b.set;return Object.defineProperty(d,f,{configurable:!0,get:function(){return O.call(this)},set:function(q){E=""+q,D.call(this,q)}}),Object.defineProperty(d,f,{enumerable:b.enumerable}),{getValue:function(){return E},setValue:function(q){E=""+q},stopTracking:function(){d._valueTracker=null,delete d[f]}}}}function Pe(d){d._valueTracker||(d._valueTracker=Te(d))}function oe(d){if(!d)return!1;var f=d._valueTracker;if(!f)return!0;var b=f.getValue(),E="";return d&&(E=fe(d)?d.checked?"true":"false":d.value),d=E,d!==b?(f.setValue(d),!0):!1}function le(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}function ye(d,f){var b=f.checked;return ne({},f,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:b??d._wrapperState.initialChecked})}function _e(d,f){var b=f.defaultValue==null?"":f.defaultValue,E=f.checked!=null?f.checked:f.defaultChecked;b=Se(f.value!=null?f.value:b),d._wrapperState={initialChecked:E,initialValue:b,controlled:f.type==="checkbox"||f.type==="radio"?f.checked!=null:f.value!=null}}function te(d,f){f=f.checked,f!=null&&C(d,"checked",f,!1)}function z(d,f){te(d,f);var b=Se(f.value),E=f.type;if(b!=null)E==="number"?(b===0&&d.value===""||d.value!=b)&&(d.value=""+b):d.value!==""+b&&(d.value=""+b);else if(E==="submit"||E==="reset"){d.removeAttribute("value");return}f.hasOwnProperty("value")?me(d,f.type,b):f.hasOwnProperty("defaultValue")&&me(d,f.type,Se(f.defaultValue)),f.checked==null&&f.defaultChecked!=null&&(d.defaultChecked=!!f.defaultChecked)}function Ne(d,f,b){if(f.hasOwnProperty("value")||f.hasOwnProperty("defaultValue")){var E=f.type;if(!(E!=="submit"&&E!=="reset"||f.value!==void 0&&f.value!==null))return;f=""+d._wrapperState.initialValue,b||f===d.value||(d.value=f),d.defaultValue=f}b=d.name,b!==""&&(d.name=""),d.defaultChecked=!!d._wrapperState.initialChecked,b!==""&&(d.name=b)}function me(d,f,b){(f!=="number"||le(d.ownerDocument)!==d)&&(b==null?d.defaultValue=""+d._wrapperState.initialValue:d.defaultValue!==""+b&&(d.defaultValue=""+b))}var xe=Array.isArray;function et(d,f,b,E){if(d=d.options,f){f={};for(var O=0;O<b.length;O++)f["$"+b[O]]=!0;for(b=0;b<d.length;b++)O=f.hasOwnProperty("$"+d[b].value),d[b].selected!==O&&(d[b].selected=O),O&&E&&(d[b].defaultSelected=!0)}else{for(b=""+Se(b),f=null,O=0;O<d.length;O++){if(d[O].value===b){d[O].selected=!0,E&&(d[O].defaultSelected=!0);return}f!==null||d[O].disabled||(f=d[O])}f!==null&&(f.selected=!0)}}function Fe(d,f){if(f.dangerouslySetInnerHTML!=null)throw Error(n(91));return ne({},f,{value:void 0,defaultValue:void 0,children:""+d._wrapperState.initialValue})}function pt(d,f){var b=f.value;if(b==null){if(b=f.children,f=f.defaultValue,b!=null){if(f!=null)throw Error(n(92));if(xe(b)){if(1<b.length)throw Error(n(93));b=b[0]}f=b}f==null&&(f=""),b=f}d._wrapperState={initialValue:Se(b)}}function St(d,f){var b=Se(f.value),E=Se(f.defaultValue);b!=null&&(b=""+b,b!==d.value&&(d.value=b),f.defaultValue==null&&d.defaultValue!==b&&(d.defaultValue=b)),E!=null&&(d.defaultValue=""+E)}function qe(d){var f=d.textContent;f===d._wrapperState.initialValue&&f!==""&&f!==null&&(d.value=f)}function rn(d){switch(d){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function at(d,f){return d==null||d==="http://www.w3.org/1999/xhtml"?rn(f):d==="http://www.w3.org/2000/svg"&&f==="foreignObject"?"http://www.w3.org/1999/xhtml":d}var jt,It=(function(d){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(f,b,E,O){MSApp.execUnsafeLocalFunction(function(){return d(f,b,E,O)})}:d})(function(d,f){if(d.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in d)d.innerHTML=f;else{for(jt=jt||document.createElement("div"),jt.innerHTML="<svg>"+f.valueOf().toString()+"</svg>",f=jt.firstChild;d.firstChild;)d.removeChild(d.firstChild);for(;f.firstChild;)d.appendChild(f.firstChild)}});function an(d,f){if(f){var b=d.firstChild;if(b&&b===d.lastChild&&b.nodeType===3){b.nodeValue=f;return}}d.textContent=f}var Ut={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ht=["Webkit","ms","Moz","O"];Object.keys(Ut).forEach(function(d){Ht.forEach(function(f){f=f+d.charAt(0).toUpperCase()+d.substring(1),Ut[f]=Ut[d]})});function qt(d,f,b){return f==null||typeof f=="boolean"||f===""?"":b||typeof f!="number"||f===0||Ut.hasOwnProperty(d)&&Ut[d]?(""+f).trim():f+"px"}function Tn(d,f){d=d.style;for(var b in f)if(f.hasOwnProperty(b)){var E=b.indexOf("--")===0,O=qt(b,f[b],E);b==="float"&&(b="cssFloat"),E?d.setProperty(b,O):d[b]=O}}var hn=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ar(d,f){if(f){if(hn[d]&&(f.children!=null||f.dangerouslySetInnerHTML!=null))throw Error(n(137,d));if(f.dangerouslySetInnerHTML!=null){if(f.children!=null)throw Error(n(60));if(typeof f.dangerouslySetInnerHTML!="object"||!("__html"in f.dangerouslySetInnerHTML))throw Error(n(61))}if(f.style!=null&&typeof f.style!="object")throw Error(n(62))}}function yt(d,f){if(d.indexOf("-")===-1)return typeof f.is=="string";switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ve=null;function Xt(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var On=null,Rn=null,Or=null;function Ee(d){if(d=li(d)){if(typeof On!="function")throw Error(n(280));var f=d.stateNode;f&&(f=nf(f),On(d.stateNode,d.type,f))}}function ze(d){Rn?Or?Or.push(d):Or=[d]:Rn=d}function ht(){if(Rn){var d=Rn,f=Or;if(Or=Rn=null,Ee(d),f)for(d=0;d<f.length;d++)Ee(f[d])}}function pn(d,f){return d(f)}function En(){}var lr=!1;function jn(d,f,b){if(lr)return d(f,b);lr=!0;try{return pn(d,f,b)}finally{lr=!1,(Rn!==null||Or!==null)&&(En(),ht())}}function Qe(d,f){var b=d.stateNode;if(b===null)return null;var E=nf(b);if(E===null)return null;b=E[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(E=!E.disabled)||(d=d.type,E=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!E;break e;default:d=!1}if(d)return null;if(b&&typeof b!="function")throw Error(n(231,f,typeof b));return b}var sr=!1;if(l)try{var bn={};Object.defineProperty(bn,"passive",{get:function(){sr=!0}}),window.addEventListener("test",bn,bn),window.removeEventListener("test",bn,bn)}catch{sr=!1}function Ke(d,f,b,E,O,D,q,se,ge){var Re=Array.prototype.slice.call(arguments,3);try{f.apply(b,Re)}catch(tt){this.onError(tt)}}var Be=!1,Me=null,xt=!1,Le=null,$t={onError:function(d){Be=!0,Me=d}};function Bt(d,f,b,E,O,D,q,se,ge){Be=!1,Me=null,Ke.apply($t,arguments)}function Zn(d,f,b,E,O,D,q,se,ge){if(Bt.apply(this,arguments),Be){if(Be){var Re=Me;Be=!1,Me=null}else throw Error(n(198));xt||(xt=!0,Le=Re)}}function Mn(d){var f=d,b=d;if(d.alternate)for(;f.return;)f=f.return;else{d=f;do f=d,(f.flags&4098)!==0&&(b=f.return),d=f.return;while(d)}return f.tag===3?b:null}function Ur(d){if(d.tag===13){var f=d.memoizedState;if(f===null&&(d=d.alternate,d!==null&&(f=d.memoizedState)),f!==null)return f.dehydrated}return null}function bt(d){if(Mn(d)!==d)throw Error(n(188))}function ms(d){var f=d.alternate;if(!f){if(f=Mn(d),f===null)throw Error(n(188));return f!==d?null:d}for(var b=d,E=f;;){var O=b.return;if(O===null)break;var D=O.alternate;if(D===null){if(E=O.return,E!==null){b=E;continue}break}if(O.child===D.child){for(D=O.child;D;){if(D===b)return bt(O),d;if(D===E)return bt(O),f;D=D.sibling}throw Error(n(188))}if(b.return!==E.return)b=O,E=D;else{for(var q=!1,se=O.child;se;){if(se===b){q=!0,b=O,E=D;break}if(se===E){q=!0,E=O,b=D;break}se=se.sibling}if(!q){for(se=D.child;se;){if(se===b){q=!0,b=D,E=O;break}if(se===E){q=!0,E=D,b=O;break}se=se.sibling}if(!q)throw Error(n(189))}}if(b.alternate!==E)throw Error(n(190))}if(b.tag!==3)throw Error(n(188));return b.stateNode.current===b?d:f}function Dr(d){return d=ms(d),d!==null?jo(d):null}function jo(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){var f=jo(d);if(f!==null)return f;d=d.sibling}return null}var jr=t.unstable_scheduleCallback,Fn=t.unstable_cancelCallback,Br=t.unstable_shouldYield,Jt=t.unstable_requestPaint,Kt=t.unstable_now,Ai=t.unstable_getCurrentPriorityLevel,hr=t.unstable_ImmediatePriority,gr=t.unstable_UserBlockingPriority,Ps=t.unstable_NormalPriority,Ba=t.unstable_LowPriority,Gr=t.unstable_IdlePriority,la=null,ca=null;function Ga(d){if(ca&&typeof ca.onCommitFiberRoot=="function")try{ca.onCommitFiberRoot(la,d,void 0,(d.current.flags&128)===128)}catch{}}var ta=Math.clz32?Math.clz32:Ha,na=Math.log,ns=Math.LN2;function Ha(d){return d>>>=0,d===0?32:31-(na(d)/ns|0)|0}var wr=64,da=4194304;function hs(d){switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return d&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return d}}function ai(d,f){var b=d.pendingLanes;if(b===0)return 0;var E=0,O=d.suspendedLanes,D=d.pingedLanes,q=b&268435455;if(q!==0){var se=q&~O;se!==0?E=hs(se):(D&=q,D!==0&&(E=hs(D)))}else q=b&~O,q!==0?E=hs(q):D!==0&&(E=hs(D));if(E===0)return 0;if(f!==0&&f!==E&&(f&O)===0&&(O=E&-E,D=f&-f,O>=D||O===16&&(D&4194240)!==0))return f;if((E&4)!==0&&(E|=b&16),f=d.entangledLanes,f!==0)for(d=d.entanglements,f&=E;0<f;)b=31-ta(f),O=1<<b,E|=d[b],f&=~O;return E}function Pr(d,f){switch(d){case 1:case 2:case 4:return f+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ua(d,f){for(var b=d.suspendedLanes,E=d.pingedLanes,O=d.expirationTimes,D=d.pendingLanes;0<D;){var q=31-ta(D),se=1<<q,ge=O[q];ge===-1?((se&b)===0||(se&E)!==0)&&(O[q]=Pr(se,f)):ge<=f&&(d.expiredLanes|=se),D&=~se}}function Hr(d){return d=d.pendingLanes&-1073741825,d!==0?d:d&1073741824?1073741824:0}function xl(){var d=wr;return wr<<=1,(wr&4194240)===0&&(wr=64),d}function Ms(d){for(var f=[],b=0;31>b;b++)f.push(d);return f}function cr(d,f,b){d.pendingLanes|=f,f!==536870912&&(d.suspendedLanes=0,d.pingedLanes=0),d=d.eventTimes,f=31-ta(f),d[f]=b}function Bi(d,f){var b=d.pendingLanes&~f;d.pendingLanes=f,d.suspendedLanes=0,d.pingedLanes=0,d.expiredLanes&=f,d.mutableReadLanes&=f,d.entangledLanes&=f,f=d.entanglements;var E=d.eventTimes;for(d=d.expirationTimes;0<b;){var O=31-ta(b),D=1<<O;f[O]=0,E[O]=-1,d[O]=-1,b&=~D}}function Ls(d,f){var b=d.entangledLanes|=f;for(d=d.entanglements;b;){var E=31-ta(b),O=1<<E;O&f|d[E]&f&&(d[E]|=f),b&=~O}}var wn=0;function ra(d){return d&=-d,1<d?4<d?(d&268435455)!==0?16:536870912:4:1}var Gi,rs,Q,pe,Ge,st=!1,it=[],Ce=null,Dt=null,zt=null,cn=new Map,gn=new Map,Vn=[],zu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function as(d,f){switch(d){case"focusin":case"focusout":Ce=null;break;case"dragenter":case"dragleave":Dt=null;break;case"mouseover":case"mouseout":zt=null;break;case"pointerover":case"pointerout":cn.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":gn.delete(f.pointerId)}}function fa(d,f,b,E,O,D){return d===null||d.nativeEvent!==D?(d={blockedOn:f,domEventName:b,eventSystemFlags:E,nativeEvent:D,targetContainers:[O]},f!==null&&(f=li(f),f!==null&&rs(f)),d):(d.eventSystemFlags|=E,f=d.targetContainers,O!==null&&f.indexOf(O)===-1&&f.push(O),d)}function $s(d,f,b,E,O){switch(f){case"focusin":return Ce=fa(Ce,d,f,b,E,O),!0;case"dragenter":return Dt=fa(Dt,d,f,b,E,O),!0;case"mouseover":return zt=fa(zt,d,f,b,E,O),!0;case"pointerover":var D=O.pointerId;return cn.set(D,fa(cn.get(D)||null,d,f,b,E,O)),!0;case"gotpointercapture":return D=O.pointerId,gn.set(D,fa(gn.get(D)||null,d,f,b,E,O)),!0}return!1}function aa(d){var f=Cc(d.target);if(f!==null){var b=Mn(f);if(b!==null){if(f=b.tag,f===13){if(f=Ur(b),f!==null){d.blockedOn=f,Ge(d.priority,function(){Q(b)});return}}else if(f===3&&b.stateNode.current.memoizedState.isDehydrated){d.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}d.blockedOn=null}function bl(d){if(d.blockedOn!==null)return!1;for(var f=d.targetContainers;0<f.length;){var b=ss(d.domEventName,d.eventSystemFlags,f[0],d.nativeEvent);if(b===null){b=d.nativeEvent;var E=new b.constructor(b.type,b);Ve=E,b.target.dispatchEvent(E),Ve=null}else return f=li(b),f!==null&&rs(f),d.blockedOn=b,!1;f.shift()}return!0}function Mr(d,f,b){bl(d)&&b.delete(f)}function Ed(){st=!1,Ce!==null&&bl(Ce)&&(Ce=null),Dt!==null&&bl(Dt)&&(Dt=null),zt!==null&&bl(zt)&&(zt=null),cn.forEach(Mr),gn.forEach(Mr)}function kn(d,f){d.blockedOn===f&&(d.blockedOn=null,st||(st=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Ed)))}function yl(d){function f(O){return kn(O,d)}if(0<it.length){kn(it[0],d);for(var b=1;b<it.length;b++){var E=it[b];E.blockedOn===d&&(E.blockedOn=null)}}for(Ce!==null&&kn(Ce,d),Dt!==null&&kn(Dt,d),zt!==null&&kn(zt,d),cn.forEach(f),gn.forEach(f),b=0;b<Vn.length;b++)E=Vn[b],E.blockedOn===d&&(E.blockedOn=null);for(;0<Vn.length&&(b=Vn[0],b.blockedOn===null);)aa(b),b.blockedOn===null&&Vn.shift()}var xr=_.ReactCurrentBatchConfig,jd=!0;function $h(d,f,b,E){var O=wn,D=xr.transition;xr.transition=null;try{wn=1,Fs(d,f,b,E)}finally{wn=O,xr.transition=D}}function Fh(d,f,b,E){var O=wn,D=xr.transition;xr.transition=null;try{wn=4,Fs(d,f,b,E)}finally{wn=O,xr.transition=D}}function Fs(d,f,b,E){if(jd){var O=ss(d,f,b,E);if(O===null)r0(d,f,E,si,b),as(d,E);else if($s(O,d,f,b,E))E.stopPropagation();else if(as(d,E),f&4&&-1<zu.indexOf(d)){for(;O!==null;){var D=li(O);if(D!==null&&Gi(D),D=ss(d,f,b,E),D===null&&r0(d,f,E,si,b),D===O)break;O=D}O!==null&&E.stopPropagation()}else r0(d,f,E,null,b)}}var si=null;function ss(d,f,b,E){if(si=null,d=Xt(E),d=Cc(d),d!==null)if(f=Mn(d),f===null)d=null;else if(b=f.tag,b===13){if(d=Ur(f),d!==null)return d;d=null}else if(b===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;d=null}else f!==d&&(d=null);return si=d,null}function vl(d){switch(d){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ai()){case hr:return 1;case gr:return 4;case Ps:case Ba:return 16;case Gr:return 536870912;default:return 16}default:return 16}}var An=null,ya=null,J=null;function be(){if(J)return J;var d,f=ya,b=f.length,E,O="value"in An?An.value:An.textContent,D=O.length;for(d=0;d<b&&f[d]===O[d];d++);var q=b-d;for(E=1;E<=q&&f[b-E]===O[D-E];E++);return J=O.slice(d,1<E?1-E:void 0)}function Ie(d){var f=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&f===13&&(d=13)):d=f,d===10&&(d=13),32<=d||d===13?d:0}function Je(){return!0}function ot(){return!1}function ct(d){function f(b,E,O,D,q){this._reactName=b,this._targetInst=O,this.type=E,this.nativeEvent=D,this.target=q,this.currentTarget=null;for(var se in d)d.hasOwnProperty(se)&&(b=d[se],this[se]=b?b(D):D[se]);return this.isDefaultPrevented=(D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1)?Je:ot,this.isPropagationStopped=ot,this}return ne(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=Je)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=Je)},persist:function(){},isPersistent:Je}),f}var wt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vt=ct(wt),xn=ne({},wt,{view:0,detail:0}),Kr=ct(xn),pa,ln,Lr,Wn=ne({},xn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sc,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==Lr&&(Lr&&d.type==="mousemove"?(pa=d.screenX-Lr.screenX,ln=d.screenY-Lr.screenY):ln=pa=0,Lr=d),pa)},movementY:function(d){return"movementY"in d?d.movementY:ln}}),Us=ct(Wn),wd=ne({},Wn,{dataTransfer:0}),Zt=ct(wd),va=ne({},xn,{relatedTarget:0}),Na=ct(va),Uh=ne({},wt,{animationName:0,elapsedTime:0,pseudoElement:0}),qu=ct(Uh),Hi=ne({},wt,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),Sa=ct(Hi),Bs=ne({},wt,{data:0}),$r=ct(Bs),Vu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sS(d){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(d):(d=wo[d])?!!f[d]:!1}function Sc(){return sS}var ii=ne({},xn,{key:function(d){if(d.key){var f=Vu[d.key]||d.key;if(f!=="Unidentified")return f}return d.type==="keypress"?(d=Ie(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?Wu[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sc,charCode:function(d){return d.type==="keypress"?Ie(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?Ie(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),Ea=ct(ii),Ao=ne({},Wn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nl=ct(Ao),ip=ne({},xn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sc}),zx=ct(ip),_i=ne({},wt,{propertyName:0,elapsedTime:0,pseudoElement:0}),op=ct(_i),Bh=ne({},Wn,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),Hn=ct(Bh),Ad=[9,13,27,32],_o=l&&"CompositionEvent"in window,Sl=null;l&&"documentMode"in document&&(Sl=document.documentMode);var Gh=l&&"TextEvent"in window&&!Sl,lp=l&&(!_o||Sl&&8<Sl&&11>=Sl),Co=" ",cp=!1;function _d(d,f){switch(d){case"keyup":return Ad.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hh(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var Cd=!1;function qx(d,f){switch(d){case"compositionend":return Hh(f);case"keypress":return f.which!==32?null:(cp=!0,Co);case"textInput":return d=f.data,d===Co&&cp?null:d;default:return null}}function To(d,f){if(Cd)return d==="compositionend"||!_o&&_d(d,f)?(d=be(),J=ya=An=null,Cd=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return lp&&f.locale!=="ko"?null:f.data;default:return null}}var Ar={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vx(d){var f=d&&d.nodeName&&d.nodeName.toLowerCase();return f==="input"?!!Ar[d.type]:f==="textarea"}function Oo(d,f,b,E){ze(E),f=Md(f,"onChange"),0<f.length&&(b=new Vt("onChange","change",null,b,E),d.push({event:b,listeners:f}))}var El=null,Ec=null;function iS(d){fp(d,0)}function Td(d){var f=Tc(d);if(oe(f))return d}function Kh(d,f){if(d==="change")return f}var dp=!1;if(l){var zh;if(l){var Gs="oninput"in document;if(!Gs){var qh=document.createElement("div");qh.setAttribute("oninput","return;"),Gs=typeof qh.oninput=="function"}zh=Gs}else zh=!1;dp=zh&&(!document.documentMode||9<document.documentMode)}function Vh(){El&&(El.detachEvent("onpropertychange",Wh),Ec=El=null)}function Wh(d){if(d.propertyName==="value"&&Td(Ec)){var f=[];Oo(f,Ec,d,Xt(d)),jn(iS,f)}}function oS(d,f,b){d==="focusin"?(Vh(),El=f,Ec=b,El.attachEvent("onpropertychange",Wh)):d==="focusout"&&Vh()}function lS(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return Td(Ec)}function cS(d,f){if(d==="click")return Td(f)}function Wx(d,f){if(d==="input"||d==="change")return Td(f)}function We(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var Ci=typeof Object.is=="function"?Object.is:We;function Ye(d,f){if(Ci(d,f))return!0;if(typeof d!="object"||d===null||typeof f!="object"||f===null)return!1;var b=Object.keys(d),E=Object.keys(f);if(b.length!==E.length)return!1;for(E=0;E<b.length;E++){var O=b[E];if(!c.call(f,O)||!Ci(d[O],f[O]))return!1}return!0}function Yh(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function Yu(d,f){var b=Yh(d);d=0;for(var E;b;){if(b.nodeType===3){if(E=d+b.textContent.length,d<=f&&E>=f)return{node:b,offset:f-d};d=E}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=Yh(b)}}function Qh(d,f){return d&&f?d===f?!0:d&&d.nodeType===3?!1:f&&f.nodeType===3?Qh(d,f.parentNode):"contains"in d?d.contains(f):d.compareDocumentPosition?!!(d.compareDocumentPosition(f)&16):!1:!1}function Qu(){for(var d=window,f=le();f instanceof d.HTMLIFrameElement;){try{var b=typeof f.contentWindow.location.href=="string"}catch{b=!1}if(b)d=f.contentWindow;else break;f=le(d.document)}return f}function Od(d){var f=d&&d.nodeName&&d.nodeName.toLowerCase();return f&&(f==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||f==="textarea"||d.contentEditable==="true")}function Rd(d){var f=Qu(),b=d.focusedElem,E=d.selectionRange;if(f!==b&&b&&b.ownerDocument&&Qh(b.ownerDocument.documentElement,b)){if(E!==null&&Od(b)){if(f=E.start,d=E.end,d===void 0&&(d=f),"selectionStart"in b)b.selectionStart=f,b.selectionEnd=Math.min(d,b.value.length);else if(d=(f=b.ownerDocument||document)&&f.defaultView||window,d.getSelection){d=d.getSelection();var O=b.textContent.length,D=Math.min(E.start,O);E=E.end===void 0?D:Math.min(E.end,O),!d.extend&&D>E&&(O=E,E=D,D=O),O=Yu(b,D);var q=Yu(b,E);O&&q&&(d.rangeCount!==1||d.anchorNode!==O.node||d.anchorOffset!==O.offset||d.focusNode!==q.node||d.focusOffset!==q.offset)&&(f=f.createRange(),f.setStart(O.node,O.offset),d.removeAllRanges(),D>E?(d.addRange(f),d.extend(q.node,q.offset)):(f.setEnd(q.node,q.offset),d.addRange(f)))}}for(f=[],d=b;d=d.parentNode;)d.nodeType===1&&f.push({element:d,left:d.scrollLeft,top:d.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<f.length;b++)d=f[b],d.element.scrollLeft=d.left,d.element.scrollTop=d.top}}var dS=l&&"documentMode"in document&&11>=document.documentMode,jc=null,kd=null,Id=null,Xh=!1;function jl(d,f,b){var E=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;Xh||jc==null||jc!==le(E)||(E=jc,"selectionStart"in E&&Od(E)?E={start:E.selectionStart,end:E.selectionEnd}:(E=(E.ownerDocument&&E.ownerDocument.defaultView||window).getSelection(),E={anchorNode:E.anchorNode,anchorOffset:E.anchorOffset,focusNode:E.focusNode,focusOffset:E.focusOffset}),Id&&Ye(Id,E)||(Id=E,E=Md(kd,"onSelect"),0<E.length&&(f=new Vt("onSelect","select",null,f,b),d.push({event:f,listeners:E}),f.target=jc)))}function up(d,f){var b={};return b[d.toLowerCase()]=f.toLowerCase(),b["Webkit"+d]="webkit"+f,b["Moz"+d]="moz"+f,b}var Dd={animationend:up("Animation","AnimationEnd"),animationiteration:up("Animation","AnimationIteration"),animationstart:up("Animation","AnimationStart"),transitionend:up("Transition","TransitionEnd")},Xu={},wc={};l&&(wc=document.createElement("div").style,"AnimationEvent"in window||(delete Dd.animationend.animation,delete Dd.animationiteration.animation,delete Dd.animationstart.animation),"TransitionEvent"in window||delete Dd.transitionend.transition);function Ac(d){if(Xu[d])return Xu[d];if(!Dd[d])return d;var f=Dd[d],b;for(b in f)if(f.hasOwnProperty(b)&&b in wc)return Xu[d]=f[b];return d}var Jh=Ac("animationend"),wl=Ac("animationiteration"),Ki=Ac("animationstart"),Yx=Ac("transitionend"),Qx=new Map,Xx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Al(d,f){Qx.set(d,f),i(f,[d])}for(var Zh=0;Zh<Xx.length;Zh++){var e0=Xx[Zh],Jx=e0.toLowerCase(),t0=e0[0].toUpperCase()+e0.slice(1);Al(Jx,"on"+t0)}Al(Jh,"onAnimationEnd"),Al(wl,"onAnimationIteration"),Al(Ki,"onAnimationStart"),Al("dblclick","onDoubleClick"),Al("focusin","onFocus"),Al("focusout","onBlur"),Al(Yx,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pd));function n0(d,f,b){var E=d.type||"unknown-event";d.currentTarget=b,Zn(E,f,void 0,d),d.currentTarget=null}function fp(d,f){f=(f&4)!==0;for(var b=0;b<d.length;b++){var E=d[b],O=E.event;E=E.listeners;e:{var D=void 0;if(f)for(var q=E.length-1;0<=q;q--){var se=E[q],ge=se.instance,Re=se.currentTarget;if(se=se.listener,ge!==D&&O.isPropagationStopped())break e;n0(O,se,Re),D=ge}else for(q=0;q<E.length;q++){if(se=E[q],ge=se.instance,Re=se.currentTarget,se=se.listener,ge!==D&&O.isPropagationStopped())break e;n0(O,se,Re),D=ge}}}if(xt)throw d=Le,xt=!1,Le=null,d}function dr(d,f){var b=f[_c];b===void 0&&(b=f[_c]=new Set);var E=d+"__bubble";b.has(E)||(eb(f,d,2,!1),b.add(E))}function Ju(d,f,b){var E=0;f&&(E|=4),eb(b,d,E,f)}var pp="_reactListening"+Math.random().toString(36).slice(2);function Zu(d){if(!d[pp]){d[pp]=!0,r.forEach(function(b){b!=="selectionchange"&&(Zx.has(b)||Ju(b,!1,d),Ju(b,!0,d))});var f=d.nodeType===9?d:d.ownerDocument;f===null||f[pp]||(f[pp]=!0,Ju("selectionchange",!1,f))}}function eb(d,f,b,E){switch(vl(f)){case 1:var O=$h;break;case 4:O=Fh;break;default:O=Fs}b=O.bind(null,f,b,d),O=void 0,!sr||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(O=!0),E?O!==void 0?d.addEventListener(f,b,{capture:!0,passive:O}):d.addEventListener(f,b,!0):O!==void 0?d.addEventListener(f,b,{passive:O}):d.addEventListener(f,b,!1)}function r0(d,f,b,E,O){var D=E;if((f&1)===0&&(f&2)===0&&E!==null)e:for(;;){if(E===null)return;var q=E.tag;if(q===3||q===4){var se=E.stateNode.containerInfo;if(se===O||se.nodeType===8&&se.parentNode===O)break;if(q===4)for(q=E.return;q!==null;){var ge=q.tag;if((ge===3||ge===4)&&(ge=q.stateNode.containerInfo,ge===O||ge.nodeType===8&&ge.parentNode===O))return;q=q.return}for(;se!==null;){if(q=Cc(se),q===null)return;if(ge=q.tag,ge===5||ge===6){E=D=q;continue e}se=se.parentNode}}E=E.return}jn(function(){var Re=D,tt=Xt(b),rt=[];e:{var Ze=Qx.get(d);if(Ze!==void 0){var vt=Vt,Tt=d;switch(d){case"keypress":if(Ie(b)===0)break e;case"keydown":case"keyup":vt=Ea;break;case"focusin":Tt="focus",vt=Na;break;case"focusout":Tt="blur",vt=Na;break;case"beforeblur":case"afterblur":vt=Na;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":vt=Us;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":vt=Zt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":vt=zx;break;case Jh:case wl:case Ki:vt=qu;break;case Yx:vt=op;break;case"scroll":vt=Kr;break;case"wheel":vt=Hn;break;case"copy":case"cut":case"paste":vt=Sa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":vt=Nl}var Lt=(f&4)!==0,ia=!Lt&&d==="scroll",we=Lt?Ze!==null?Ze+"Capture":null:Ze;Lt=[];for(var ve=Re,Ae;ve!==null;){Ae=ve;var ft=Ae.stateNode;if(Ae.tag===5&&ft!==null&&(Ae=ft,we!==null&&(ft=Qe(ve,we),ft!=null&&Lt.push(gs(ve,ft,Ae)))),ia)break;ve=ve.return}0<Lt.length&&(Ze=new vt(Ze,Tt,null,b,tt),rt.push({event:Ze,listeners:Lt}))}}if((f&7)===0){e:{if(Ze=d==="mouseover"||d==="pointerover",vt=d==="mouseout"||d==="pointerout",Ze&&b!==Ve&&(Tt=b.relatedTarget||b.fromElement)&&(Cc(Tt)||Tt[_n]))break e;if((vt||Ze)&&(Ze=tt.window===tt?tt:(Ze=tt.ownerDocument)?Ze.defaultView||Ze.parentWindow:window,vt?(Tt=b.relatedTarget||b.toElement,vt=Re,Tt=Tt?Cc(Tt):null,Tt!==null&&(ia=Mn(Tt),Tt!==ia||Tt.tag!==5&&Tt.tag!==6)&&(Tt=null)):(vt=null,Tt=Re),vt!==Tt)){if(Lt=Us,ft="onMouseLeave",we="onMouseEnter",ve="mouse",(d==="pointerout"||d==="pointerover")&&(Lt=Nl,ft="onPointerLeave",we="onPointerEnter",ve="pointer"),ia=vt==null?Ze:Tc(vt),Ae=Tt==null?Ze:Tc(Tt),Ze=new Lt(ft,ve+"leave",vt,b,tt),Ze.target=ia,Ze.relatedTarget=Ae,ft=null,Cc(tt)===Re&&(Lt=new Lt(we,ve+"enter",Tt,b,tt),Lt.target=Ae,Lt.relatedTarget=ia,ft=Lt),ia=ft,vt&&Tt)t:{for(Lt=vt,we=Tt,ve=0,Ae=Lt;Ae;Ae=_l(Ae))ve++;for(Ae=0,ft=we;ft;ft=_l(ft))Ae++;for(;0<ve-Ae;)Lt=_l(Lt),ve--;for(;0<Ae-ve;)we=_l(we),Ae--;for(;ve--;){if(Lt===we||we!==null&&Lt===we.alternate)break t;Lt=_l(Lt),we=_l(we)}Lt=null}else Lt=null;vt!==null&&mp(rt,Ze,vt,Lt,!1),Tt!==null&&ia!==null&&mp(rt,ia,Tt,Lt,!0)}}e:{if(Ze=Re?Tc(Re):window,vt=Ze.nodeName&&Ze.nodeName.toLowerCase(),vt==="select"||vt==="input"&&Ze.type==="file")var Gt=Kh;else if(Vx(Ze))if(dp)Gt=Wx;else{Gt=lS;var en=oS}else(vt=Ze.nodeName)&&vt.toLowerCase()==="input"&&(Ze.type==="checkbox"||Ze.type==="radio")&&(Gt=cS);if(Gt&&(Gt=Gt(d,Re))){Oo(rt,Gt,b,tt);break e}en&&en(d,Ze,Re),d==="focusout"&&(en=Ze._wrapperState)&&en.controlled&&Ze.type==="number"&&me(Ze,"number",Ze.value)}switch(en=Re?Tc(Re):window,d){case"focusin":(Vx(en)||en.contentEditable==="true")&&(jc=en,kd=Re,Id=null);break;case"focusout":Id=kd=jc=null;break;case"mousedown":Xh=!0;break;case"contextmenu":case"mouseup":case"dragend":Xh=!1,jl(rt,b,tt);break;case"selectionchange":if(dS)break;case"keydown":case"keyup":jl(rt,b,tt)}var tn;if(_o)e:{switch(d){case"compositionstart":var dn="onCompositionStart";break e;case"compositionend":dn="onCompositionEnd";break e;case"compositionupdate":dn="onCompositionUpdate";break e}dn=void 0}else Cd?_d(d,b)&&(dn="onCompositionEnd"):d==="keydown"&&b.keyCode===229&&(dn="onCompositionStart");dn&&(lp&&b.locale!=="ko"&&(Cd||dn!=="onCompositionStart"?dn==="onCompositionEnd"&&Cd&&(tn=be()):(An=tt,ya="value"in An?An.value:An.textContent,Cd=!0)),en=Md(Re,dn),0<en.length&&(dn=new $r(dn,d,null,b,tt),rt.push({event:dn,listeners:en}),tn?dn.data=tn:(tn=Hh(b),tn!==null&&(dn.data=tn)))),(tn=Gh?qx(d,b):To(d,b))&&(Re=Md(Re,"onBeforeInput"),0<Re.length&&(tt=new $r("onBeforeInput","beforeinput",null,b,tt),rt.push({event:tt,listeners:Re}),tt.data=tn))}fp(rt,f)})}function gs(d,f,b){return{instance:d,listener:f,currentTarget:b}}function Md(d,f){for(var b=f+"Capture",E=[];d!==null;){var O=d,D=O.stateNode;O.tag===5&&D!==null&&(O=D,D=Qe(d,b),D!=null&&E.unshift(gs(d,D,O)),D=Qe(d,f),D!=null&&E.push(gs(d,D,O))),d=d.return}return E}function _l(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5);return d||null}function mp(d,f,b,E,O){for(var D=f._reactName,q=[];b!==null&&b!==E;){var se=b,ge=se.alternate,Re=se.stateNode;if(ge!==null&&ge===E)break;se.tag===5&&Re!==null&&(se=Re,O?(ge=Qe(b,D),ge!=null&&q.unshift(gs(b,ge,se))):O||(ge=Qe(b,D),ge!=null&&q.push(gs(b,ge,se)))),b=b.return}q.length!==0&&d.push({event:f,listeners:q})}var a0=/\r\n?/g,s0=/\u0000|\uFFFD/g;function ef(d){return(typeof d=="string"?d:""+d).replace(a0,`
`).replace(s0,"")}function Ld(d,f,b){if(f=ef(f),ef(d)!==f&&b)throw Error(n(425))}function $d(){}var Cl=null,tf=null;function i0(d,f){return d==="textarea"||d==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var Hs=typeof setTimeout=="function"?setTimeout:void 0,o0=typeof clearTimeout=="function"?clearTimeout:void 0,l0=typeof Promise=="function"?Promise:void 0,tb=typeof queueMicrotask=="function"?queueMicrotask:typeof l0<"u"?function(d){return l0.resolve(null).then(d).catch(hp)}:Hs;function hp(d){setTimeout(function(){throw d})}function Un(d,f){var b=f,E=0;do{var O=b.nextSibling;if(d.removeChild(b),O&&O.nodeType===8)if(b=O.data,b==="/$"){if(E===0){d.removeChild(O),yl(f);return}E--}else b!=="$"&&b!=="$?"&&b!=="$!"||E++;b=O}while(b);yl(f)}function er(d){for(;d!=null;d=d.nextSibling){var f=d.nodeType;if(f===1||f===3)break;if(f===8){if(f=d.data,f==="$"||f==="$!"||f==="$?")break;if(f==="/$")return null}}return d}function ir(d){d=d.previousSibling;for(var f=0;d;){if(d.nodeType===8){var b=d.data;if(b==="$"||b==="$!"||b==="$?"){if(f===0)return d;f--}else b==="/$"&&f++}d=d.previousSibling}return null}var zr=Math.random().toString(36).slice(2),oi="__reactFiber$"+zr,zi="__reactProps$"+zr,_n="__reactContainer$"+zr,_c="__reactEvents$"+zr,nb="__reactListeners$"+zr,ma="__reactHandles$"+zr;function Cc(d){var f=d[oi];if(f)return f;for(var b=d.parentNode;b;){if(f=b[_n]||b[oi]){if(b=f.alternate,f.child!==null||b!==null&&b.child!==null)for(d=ir(d);d!==null;){if(b=d[oi])return b;d=ir(d)}return f}d=b,b=d.parentNode}return null}function li(d){return d=d[oi]||d[_n],!d||d.tag!==5&&d.tag!==6&&d.tag!==13&&d.tag!==3?null:d}function Tc(d){if(d.tag===5||d.tag===6)return d.stateNode;throw Error(n(33))}function nf(d){return d[zi]||null}var Fd=[],Ud=-1;function qi(d){return{current:d}}function Bn(d){0>Ud||(d.current=Fd[Ud],Fd[Ud]=null,Ud--)}function Nn(d,f){Ud++,Fd[Ud]=d.current,d.current=f}var is={},Rr=qi(is),ja=qi(!1),Oc=is;function Ro(d,f){var b=d.type.contextTypes;if(!b)return is;var E=d.stateNode;if(E&&E.__reactInternalMemoizedUnmaskedChildContext===f)return E.__reactInternalMemoizedMaskedChildContext;var O={},D;for(D in b)O[D]=f[D];return E&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=f,d.__reactInternalMemoizedMaskedChildContext=O),O}function xs(d){return d=d.childContextTypes,d!=null}function wa(){Bn(ja),Bn(Rr)}function Vi(d,f,b){if(Rr.current!==is)throw Error(n(168));Nn(Rr,f),Nn(ja,b)}function ko(d,f,b){var E=d.stateNode;if(f=f.childContextTypes,typeof E.getChildContext!="function")return b;E=E.getChildContext();for(var O in E)if(!(O in f))throw Error(n(108,ie(d)||"Unknown",O));return ne({},b,E)}function Bd(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||is,Oc=Rr.current,Nn(Rr,d),Nn(ja,ja.current),!0}function rf(d,f,b){var E=d.stateNode;if(!E)throw Error(n(169));b?(d=ko(d,f,Oc),E.__reactInternalMemoizedMergedChildContext=d,Bn(ja),Bn(Rr),Nn(Rr,d)):Bn(ja),Nn(ja,b)}var Aa=null,gp=!1,Ks=!1;function Gd(d){Aa===null?Aa=[d]:Aa.push(d)}function Hd(d){gp=!0,Gd(d)}function Io(){if(!Ks&&Aa!==null){Ks=!0;var d=0,f=wn;try{var b=Aa;for(wn=1;d<b.length;d++){var E=b[d];do E=E(!0);while(E!==null)}Aa=null,gp=!1}catch(O){throw Aa!==null&&(Aa=Aa.slice(d+1)),jr(hr,Io),O}finally{wn=f,Ks=!1}}return null}var Rc=[],Wi=0,xp=null,Do=0,ci=[],di=0,kc=null,ui=1,sa="";function bs(d,f){Rc[Wi++]=Do,Rc[Wi++]=xp,xp=d,Do=f}function af(d,f,b){ci[di++]=ui,ci[di++]=sa,ci[di++]=kc,kc=d;var E=ui;d=sa;var O=32-ta(E)-1;E&=~(1<<O),b+=1;var D=32-ta(f)+O;if(30<D){var q=O-O%5;D=(E&(1<<q)-1).toString(32),E>>=q,O-=q,ui=1<<32-ta(f)+O|b<<O|E,sa=D+d}else ui=1<<D|b<<O|E,sa=d}function Tl(d){d.return!==null&&(bs(d,1),af(d,1,0))}function Kd(d){for(;d===xp;)xp=Rc[--Wi],Rc[Wi]=null,Do=Rc[--Wi],Rc[Wi]=null;for(;d===kc;)kc=ci[--di],ci[di]=null,sa=ci[--di],ci[di]=null,ui=ci[--di],ci[di]=null}var ys=null,vs=null,vn=!1,Ns=null;function c0(d,f){var b=no(5,null,null,0);b.elementType="DELETED",b.stateNode=f,b.return=d,f=d.deletions,f===null?(d.deletions=[b],d.flags|=16):f.push(b)}function d0(d,f){switch(d.tag){case 5:var b=d.type;return f=f.nodeType!==1||b.toLowerCase()!==f.nodeName.toLowerCase()?null:f,f!==null?(d.stateNode=f,ys=d,vs=er(f.firstChild),!0):!1;case 6:return f=d.pendingProps===""||f.nodeType!==3?null:f,f!==null?(d.stateNode=f,ys=d,vs=null,!0):!1;case 13:return f=f.nodeType!==8?null:f,f!==null?(b=kc!==null?{id:ui,overflow:sa}:null,d.memoizedState={dehydrated:f,treeContext:b,retryLane:1073741824},b=no(18,null,null,0),b.stateNode=f,b.return=d,d.child=b,ys=d,vs=null,!0):!1;default:return!1}}function u0(d){return(d.mode&1)!==0&&(d.flags&128)===0}function Ol(d){if(vn){var f=vs;if(f){var b=f;if(!d0(d,f)){if(u0(d))throw Error(n(418));f=er(b.nextSibling);var E=ys;f&&d0(d,f)?c0(E,b):(d.flags=d.flags&-4097|2,vn=!1,ys=d)}}else{if(u0(d))throw Error(n(418));d.flags=d.flags&-4097|2,vn=!1,ys=d}}}function fi(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;ys=d}function bp(d){if(d!==ys)return!1;if(!vn)return fi(d),vn=!0,!1;var f;if((f=d.tag!==3)&&!(f=d.tag!==5)&&(f=d.type,f=f!=="head"&&f!=="body"&&!i0(d.type,d.memoizedProps)),f&&(f=vs)){if(u0(d))throw Po(),Error(n(418));for(;f;)c0(d,f),f=er(f.nextSibling)}if(fi(d),d.tag===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(n(317));e:{for(d=d.nextSibling,f=0;d;){if(d.nodeType===8){var b=d.data;if(b==="/$"){if(f===0){vs=er(d.nextSibling);break e}f--}else b!=="$"&&b!=="$!"&&b!=="$?"||f++}d=d.nextSibling}vs=null}}else vs=ys?er(d.stateNode.nextSibling):null;return!0}function Po(){for(var d=vs;d;)d=er(d.nextSibling)}function Yi(){vs=ys=null,vn=!1}function yp(d){Ns===null?Ns=[d]:Ns.push(d)}var uS=_.ReactCurrentBatchConfig;function sf(d,f,b){if(d=b.ref,d!==null&&typeof d!="function"&&typeof d!="object"){if(b._owner){if(b=b._owner,b){if(b.tag!==1)throw Error(n(309));var E=b.stateNode}if(!E)throw Error(n(147,d));var O=E,D=""+d;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===D?f.ref:(f=function(q){var se=O.refs;q===null?delete se[D]:se[D]=q},f._stringRef=D,f)}if(typeof d!="string")throw Error(n(284));if(!b._owner)throw Error(n(290,d))}return d}function Ss(d,f){throw d=Object.prototype.toString.call(f),Error(n(31,d==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":d))}function vp(d){var f=d._init;return f(d._payload)}function f0(d){function f(we,ve){if(d){var Ae=we.deletions;Ae===null?(we.deletions=[ve],we.flags|=16):Ae.push(ve)}}function b(we,ve){if(!d)return null;for(;ve!==null;)f(we,ve),ve=ve.sibling;return null}function E(we,ve){for(we=new Map;ve!==null;)ve.key!==null?we.set(ve.key,ve):we.set(ve.index,ve),ve=ve.sibling;return we}function O(we,ve){return we=nu(we,ve),we.index=0,we.sibling=null,we}function D(we,ve,Ae){return we.index=Ae,d?(Ae=we.alternate,Ae!==null?(Ae=Ae.index,Ae<ve?(we.flags|=2,ve):Ae):(we.flags|=2,ve)):(we.flags|=1048576,ve)}function q(we){return d&&we.alternate===null&&(we.flags|=2),we}function se(we,ve,Ae,ft){return ve===null||ve.tag!==6?(ve=GS(Ae,we.mode,ft),ve.return=we,ve):(ve=O(ve,Ae),ve.return=we,ve)}function ge(we,ve,Ae,ft){var Gt=Ae.type;return Gt===R?tt(we,ve,Ae.props.children,ft,Ae.key):ve!==null&&(ve.elementType===Gt||typeof Gt=="object"&&Gt!==null&&Gt.$$typeof===L&&vp(Gt)===ve.type)?(ft=O(ve,Ae.props),ft.ref=sf(we,ve,Ae),ft.return=we,ft):(ft=yb(Ae.type,Ae.key,Ae.props,null,we.mode,ft),ft.ref=sf(we,ve,Ae),ft.return=we,ft)}function Re(we,ve,Ae,ft){return ve===null||ve.tag!==4||ve.stateNode.containerInfo!==Ae.containerInfo||ve.stateNode.implementation!==Ae.implementation?(ve=HS(Ae,we.mode,ft),ve.return=we,ve):(ve=O(ve,Ae.children||[]),ve.return=we,ve)}function tt(we,ve,Ae,ft,Gt){return ve===null||ve.tag!==7?(ve=hf(Ae,we.mode,ft,Gt),ve.return=we,ve):(ve=O(ve,Ae),ve.return=we,ve)}function rt(we,ve,Ae){if(typeof ve=="string"&&ve!==""||typeof ve=="number")return ve=GS(""+ve,we.mode,Ae),ve.return=we,ve;if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case A:return Ae=yb(ve.type,ve.key,ve.props,null,we.mode,Ae),Ae.ref=sf(we,null,ve),Ae.return=we,Ae;case T:return ve=HS(ve,we.mode,Ae),ve.return=we,ve;case L:var ft=ve._init;return rt(we,ft(ve._payload),Ae)}if(xe(ve)||K(ve))return ve=hf(ve,we.mode,Ae,null),ve.return=we,ve;Ss(we,ve)}return null}function Ze(we,ve,Ae,ft){var Gt=ve!==null?ve.key:null;if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number")return Gt!==null?null:se(we,ve,""+Ae,ft);if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case A:return Ae.key===Gt?ge(we,ve,Ae,ft):null;case T:return Ae.key===Gt?Re(we,ve,Ae,ft):null;case L:return Gt=Ae._init,Ze(we,ve,Gt(Ae._payload),ft)}if(xe(Ae)||K(Ae))return Gt!==null?null:tt(we,ve,Ae,ft,null);Ss(we,Ae)}return null}function vt(we,ve,Ae,ft,Gt){if(typeof ft=="string"&&ft!==""||typeof ft=="number")return we=we.get(Ae)||null,se(ve,we,""+ft,Gt);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case A:return we=we.get(ft.key===null?Ae:ft.key)||null,ge(ve,we,ft,Gt);case T:return we=we.get(ft.key===null?Ae:ft.key)||null,Re(ve,we,ft,Gt);case L:var en=ft._init;return vt(we,ve,Ae,en(ft._payload),Gt)}if(xe(ft)||K(ft))return we=we.get(Ae)||null,tt(ve,we,ft,Gt,null);Ss(ve,ft)}return null}function Tt(we,ve,Ae,ft){for(var Gt=null,en=null,tn=ve,dn=ve=0,Va=null;tn!==null&&dn<Ae.length;dn++){tn.index>dn?(Va=tn,tn=null):Va=tn.sibling;var zn=Ze(we,tn,Ae[dn],ft);if(zn===null){tn===null&&(tn=Va);break}d&&tn&&zn.alternate===null&&f(we,tn),ve=D(zn,ve,dn),en===null?Gt=zn:en.sibling=zn,en=zn,tn=Va}if(dn===Ae.length)return b(we,tn),vn&&bs(we,dn),Gt;if(tn===null){for(;dn<Ae.length;dn++)tn=rt(we,Ae[dn],ft),tn!==null&&(ve=D(tn,ve,dn),en===null?Gt=tn:en.sibling=tn,en=tn);return vn&&bs(we,dn),Gt}for(tn=E(we,tn);dn<Ae.length;dn++)Va=vt(tn,we,dn,Ae[dn],ft),Va!==null&&(d&&Va.alternate!==null&&tn.delete(Va.key===null?dn:Va.key),ve=D(Va,ve,dn),en===null?Gt=Va:en.sibling=Va,en=Va);return d&&tn.forEach(function(ru){return f(we,ru)}),vn&&bs(we,dn),Gt}function Lt(we,ve,Ae,ft){var Gt=K(Ae);if(typeof Gt!="function")throw Error(n(150));if(Ae=Gt.call(Ae),Ae==null)throw Error(n(151));for(var en=Gt=null,tn=ve,dn=ve=0,Va=null,zn=Ae.next();tn!==null&&!zn.done;dn++,zn=Ae.next()){tn.index>dn?(Va=tn,tn=null):Va=tn.sibling;var ru=Ze(we,tn,zn.value,ft);if(ru===null){tn===null&&(tn=Va);break}d&&tn&&ru.alternate===null&&f(we,tn),ve=D(ru,ve,dn),en===null?Gt=ru:en.sibling=ru,en=ru,tn=Va}if(zn.done)return b(we,tn),vn&&bs(we,dn),Gt;if(tn===null){for(;!zn.done;dn++,zn=Ae.next())zn=rt(we,zn.value,ft),zn!==null&&(ve=D(zn,ve,dn),en===null?Gt=zn:en.sibling=zn,en=zn);return vn&&bs(we,dn),Gt}for(tn=E(we,tn);!zn.done;dn++,zn=Ae.next())zn=vt(tn,we,dn,zn.value,ft),zn!==null&&(d&&zn.alternate!==null&&tn.delete(zn.key===null?dn:zn.key),ve=D(zn,ve,dn),en===null?Gt=zn:en.sibling=zn,en=zn);return d&&tn.forEach(function(GY){return f(we,GY)}),vn&&bs(we,dn),Gt}function ia(we,ve,Ae,ft){if(typeof Ae=="object"&&Ae!==null&&Ae.type===R&&Ae.key===null&&(Ae=Ae.props.children),typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case A:e:{for(var Gt=Ae.key,en=ve;en!==null;){if(en.key===Gt){if(Gt=Ae.type,Gt===R){if(en.tag===7){b(we,en.sibling),ve=O(en,Ae.props.children),ve.return=we,we=ve;break e}}else if(en.elementType===Gt||typeof Gt=="object"&&Gt!==null&&Gt.$$typeof===L&&vp(Gt)===en.type){b(we,en.sibling),ve=O(en,Ae.props),ve.ref=sf(we,en,Ae),ve.return=we,we=ve;break e}b(we,en);break}else f(we,en);en=en.sibling}Ae.type===R?(ve=hf(Ae.props.children,we.mode,ft,Ae.key),ve.return=we,we=ve):(ft=yb(Ae.type,Ae.key,Ae.props,null,we.mode,ft),ft.ref=sf(we,ve,Ae),ft.return=we,we=ft)}return q(we);case T:e:{for(en=Ae.key;ve!==null;){if(ve.key===en)if(ve.tag===4&&ve.stateNode.containerInfo===Ae.containerInfo&&ve.stateNode.implementation===Ae.implementation){b(we,ve.sibling),ve=O(ve,Ae.children||[]),ve.return=we,we=ve;break e}else{b(we,ve);break}else f(we,ve);ve=ve.sibling}ve=HS(Ae,we.mode,ft),ve.return=we,we=ve}return q(we);case L:return en=Ae._init,ia(we,ve,en(Ae._payload),ft)}if(xe(Ae))return Tt(we,ve,Ae,ft);if(K(Ae))return Lt(we,ve,Ae,ft);Ss(we,Ae)}return typeof Ae=="string"&&Ae!==""||typeof Ae=="number"?(Ae=""+Ae,ve!==null&&ve.tag===6?(b(we,ve.sibling),ve=O(ve,Ae),ve.return=we,we=ve):(b(we,ve),ve=GS(Ae,we.mode,ft),ve.return=we,we=ve),q(we)):b(we,ve)}return ia}var Ka=f0(!0),zd=f0(!1),qd=qi(null),pi=null,Ti=null,Vd=null;function Rl(){Vd=Ti=pi=null}function Wd(d){var f=qd.current;Bn(qd),d._currentValue=f}function Yn(d,f,b){for(;d!==null;){var E=d.alternate;if((d.childLanes&f)!==f?(d.childLanes|=f,E!==null&&(E.childLanes|=f)):E!==null&&(E.childLanes&f)!==f&&(E.childLanes|=f),d===b)break;d=d.return}}function Mo(d,f){pi=d,Vd=Ti=null,d=d.dependencies,d!==null&&d.firstContext!==null&&((d.lanes&f)!==0&&(hi=!0),d.firstContext=null)}function _a(d){var f=d._currentValue;if(Vd!==d)if(d={context:d,memoizedValue:f,next:null},Ti===null){if(pi===null)throw Error(n(308));Ti=d,pi.dependencies={lanes:0,firstContext:d}}else Ti=Ti.next=d;return f}var kl=null;function Yd(d){kl===null?kl=[d]:kl.push(d)}function Qi(d,f,b,E){var O=f.interleaved;return O===null?(b.next=b,Yd(f)):(b.next=O.next,O.next=b),f.interleaved=b,zs(d,E)}function zs(d,f){d.lanes|=f;var b=d.alternate;for(b!==null&&(b.lanes|=f),b=d,d=d.return;d!==null;)d.childLanes|=f,b=d.alternate,b!==null&&(b.childLanes|=f),b=d,d=d.return;return b.tag===3?b.stateNode:null}var mi=!1;function Ic(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oi(d,f){d=d.updateQueue,f.updateQueue===d&&(f.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,effects:d.effects})}function Ri(d,f){return{eventTime:d,lane:f,tag:0,payload:null,callback:null,next:null}}function Xi(d,f,b){var E=d.updateQueue;if(E===null)return null;if(E=E.shared,(Gn&2)!==0){var O=E.pending;return O===null?f.next=f:(f.next=O.next,O.next=f),E.pending=f,zs(d,b)}return O=E.interleaved,O===null?(f.next=f,Yd(E)):(f.next=O.next,O.next=f),E.interleaved=f,zs(d,b)}function Ji(d,f,b){if(f=f.updateQueue,f!==null&&(f=f.shared,(b&4194240)!==0)){var E=f.lanes;E&=d.pendingLanes,b|=E,f.lanes=b,Ls(d,b)}}function Il(d,f){var b=d.updateQueue,E=d.alternate;if(E!==null&&(E=E.updateQueue,b===E)){var O=null,D=null;if(b=b.firstBaseUpdate,b!==null){do{var q={eventTime:b.eventTime,lane:b.lane,tag:b.tag,payload:b.payload,callback:b.callback,next:null};D===null?O=D=q:D=D.next=q,b=b.next}while(b!==null);D===null?O=D=f:D=D.next=f}else O=D=f;b={baseState:E.baseState,firstBaseUpdate:O,lastBaseUpdate:D,shared:E.shared,effects:E.effects},d.updateQueue=b;return}d=b.lastBaseUpdate,d===null?b.firstBaseUpdate=f:d.next=f,b.lastBaseUpdate=f}function of(d,f,b,E){var O=d.updateQueue;mi=!1;var D=O.firstBaseUpdate,q=O.lastBaseUpdate,se=O.shared.pending;if(se!==null){O.shared.pending=null;var ge=se,Re=ge.next;ge.next=null,q===null?D=Re:q.next=Re,q=ge;var tt=d.alternate;tt!==null&&(tt=tt.updateQueue,se=tt.lastBaseUpdate,se!==q&&(se===null?tt.firstBaseUpdate=Re:se.next=Re,tt.lastBaseUpdate=ge))}if(D!==null){var rt=O.baseState;q=0,tt=Re=ge=null,se=D;do{var Ze=se.lane,vt=se.eventTime;if((E&Ze)===Ze){tt!==null&&(tt=tt.next={eventTime:vt,lane:0,tag:se.tag,payload:se.payload,callback:se.callback,next:null});e:{var Tt=d,Lt=se;switch(Ze=f,vt=b,Lt.tag){case 1:if(Tt=Lt.payload,typeof Tt=="function"){rt=Tt.call(vt,rt,Ze);break e}rt=Tt;break e;case 3:Tt.flags=Tt.flags&-65537|128;case 0:if(Tt=Lt.payload,Ze=typeof Tt=="function"?Tt.call(vt,rt,Ze):Tt,Ze==null)break e;rt=ne({},rt,Ze);break e;case 2:mi=!0}}se.callback!==null&&se.lane!==0&&(d.flags|=64,Ze=O.effects,Ze===null?O.effects=[se]:Ze.push(se))}else vt={eventTime:vt,lane:Ze,tag:se.tag,payload:se.payload,callback:se.callback,next:null},tt===null?(Re=tt=vt,ge=rt):tt=tt.next=vt,q|=Ze;if(se=se.next,se===null){if(se=O.shared.pending,se===null)break;Ze=se,se=Ze.next,Ze.next=null,O.lastBaseUpdate=Ze,O.shared.pending=null}}while(!0);if(tt===null&&(ge=rt),O.baseState=ge,O.firstBaseUpdate=Re,O.lastBaseUpdate=tt,f=O.shared.interleaved,f!==null){O=f;do q|=O.lane,O=O.next;while(O!==f)}else D===null&&(O.shared.lanes=0);uf|=q,d.lanes=q,d.memoizedState=rt}}function Qd(d,f,b){if(d=f.effects,f.effects=null,d!==null)for(f=0;f<d.length;f++){var E=d[f],O=E.callback;if(O!==null){if(E.callback=null,E=b,typeof O!="function")throw Error(n(191,O));O.call(E)}}}var lf={},Zi=qi(lf),cf=qi(lf),k=qi(lf);function B(d){if(d===lf)throw Error(n(174));return d}function Y(d,f){switch(Nn(k,f),Nn(cf,d),Nn(Zi,lf),d=f.nodeType,d){case 9:case 11:f=(f=f.documentElement)?f.namespaceURI:at(null,"");break;default:d=d===8?f.parentNode:f,f=d.namespaceURI||null,d=d.tagName,f=at(f,d)}Bn(Zi),Nn(Zi,f)}function de(){Bn(Zi),Bn(cf),Bn(k)}function re(d){B(k.current);var f=B(Zi.current),b=at(f,d.type);f!==b&&(Nn(cf,d),Nn(Zi,b))}function Oe(d){cf.current===d&&(Bn(Zi),Bn(cf))}var je=qi(0);function nt(d){for(var f=d;f!==null;){if(f.tag===13){var b=f.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||b.data==="$?"||b.data==="$!"))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===d)break;for(;f.sibling===null;){if(f.return===null||f.return===d)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var Mt=[];function $e(){for(var d=0;d<Mt.length;d++)Mt[d]._workInProgressVersionPrimary=null;Mt.length=0}var ke=_.ReactCurrentDispatcher,Et=_.ReactCurrentBatchConfig,Pn=0,Ct=null,Kn=null,br=null,Ln=!1,qr=!1,qs=0,df=0;function za(){throw Error(n(321))}function Qt(d,f){if(f===null)return!1;for(var b=0;b<f.length&&b<d.length;b++)if(!Ci(d[b],f[b]))return!1;return!0}function fr(d,f,b,E,O,D){if(Pn=D,Ct=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,ke.current=d===null||d.memoizedState===null?mY:hY,d=b(E,O),qr){D=0;do{if(qr=!1,qs=0,25<=D)throw Error(n(301));D+=1,br=Kn=null,f.updateQueue=null,ke.current=gY,d=b(E,O)}while(qr)}if(ke.current=sb,f=Kn!==null&&Kn.next!==null,Pn=0,br=Kn=Ct=null,Ln=!1,f)throw Error(n(300));return d}function Dc(){var d=qs!==0;return qs=0,d}function Es(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return br===null?Ct.memoizedState=br=d:br=br.next=d,br}function eo(){if(Kn===null){var d=Ct.alternate;d=d!==null?d.memoizedState:null}else d=Kn.next;var f=br===null?Ct.memoizedState:br.next;if(f!==null)br=f,Kn=d;else{if(d===null)throw Error(n(310));Kn=d,d={memoizedState:Kn.memoizedState,baseState:Kn.baseState,baseQueue:Kn.baseQueue,queue:Kn.queue,next:null},br===null?Ct.memoizedState=br=d:br=br.next=d}return br}function p0(d,f){return typeof f=="function"?f(d):f}function fS(d){var f=eo(),b=f.queue;if(b===null)throw Error(n(311));b.lastRenderedReducer=d;var E=Kn,O=E.baseQueue,D=b.pending;if(D!==null){if(O!==null){var q=O.next;O.next=D.next,D.next=q}E.baseQueue=O=D,b.pending=null}if(O!==null){D=O.next,E=E.baseState;var se=q=null,ge=null,Re=D;do{var tt=Re.lane;if((Pn&tt)===tt)ge!==null&&(ge=ge.next={lane:0,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null}),E=Re.hasEagerState?Re.eagerState:d(E,Re.action);else{var rt={lane:tt,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null};ge===null?(se=ge=rt,q=E):ge=ge.next=rt,Ct.lanes|=tt,uf|=tt}Re=Re.next}while(Re!==null&&Re!==D);ge===null?q=E:ge.next=se,Ci(E,f.memoizedState)||(hi=!0),f.memoizedState=E,f.baseState=q,f.baseQueue=ge,b.lastRenderedState=E}if(d=b.interleaved,d!==null){O=d;do D=O.lane,Ct.lanes|=D,uf|=D,O=O.next;while(O!==d)}else O===null&&(b.lanes=0);return[f.memoizedState,b.dispatch]}function pS(d){var f=eo(),b=f.queue;if(b===null)throw Error(n(311));b.lastRenderedReducer=d;var E=b.dispatch,O=b.pending,D=f.memoizedState;if(O!==null){b.pending=null;var q=O=O.next;do D=d(D,q.action),q=q.next;while(q!==O);Ci(D,f.memoizedState)||(hi=!0),f.memoizedState=D,f.baseQueue===null&&(f.baseState=D),b.lastRenderedState=D}return[D,E]}function V3(){}function W3(d,f){var b=Ct,E=eo(),O=f(),D=!Ci(E.memoizedState,O);if(D&&(E.memoizedState=O,hi=!0),E=E.queue,mS(X3.bind(null,b,E,d),[d]),E.getSnapshot!==f||D||br!==null&&br.memoizedState.tag&1){if(b.flags|=2048,m0(9,Q3.bind(null,b,E,O,f),void 0,null),qa===null)throw Error(n(349));(Pn&30)!==0||Y3(b,f,O)}return O}function Y3(d,f,b){d.flags|=16384,d={getSnapshot:f,value:b},f=Ct.updateQueue,f===null?(f={lastEffect:null,stores:null},Ct.updateQueue=f,f.stores=[d]):(b=f.stores,b===null?f.stores=[d]:b.push(d))}function Q3(d,f,b,E){f.value=b,f.getSnapshot=E,J3(f)&&Z3(d)}function X3(d,f,b){return b(function(){J3(f)&&Z3(d)})}function J3(d){var f=d.getSnapshot;d=d.value;try{var b=f();return!Ci(d,b)}catch{return!0}}function Z3(d){var f=zs(d,1);f!==null&&Uo(f,d,1,-1)}function e5(d){var f=Es();return typeof d=="function"&&(d=d()),f.memoizedState=f.baseState=d,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:p0,lastRenderedState:d},f.queue=d,d=d.dispatch=pY.bind(null,Ct,d),[f.memoizedState,d]}function m0(d,f,b,E){return d={tag:d,create:f,destroy:b,deps:E,next:null},f=Ct.updateQueue,f===null?(f={lastEffect:null,stores:null},Ct.updateQueue=f,f.lastEffect=d.next=d):(b=f.lastEffect,b===null?f.lastEffect=d.next=d:(E=b.next,b.next=d,d.next=E,f.lastEffect=d)),d}function t5(){return eo().memoizedState}function rb(d,f,b,E){var O=Es();Ct.flags|=d,O.memoizedState=m0(1|f,b,void 0,E===void 0?null:E)}function ab(d,f,b,E){var O=eo();E=E===void 0?null:E;var D=void 0;if(Kn!==null){var q=Kn.memoizedState;if(D=q.destroy,E!==null&&Qt(E,q.deps)){O.memoizedState=m0(f,b,D,E);return}}Ct.flags|=d,O.memoizedState=m0(1|f,b,D,E)}function n5(d,f){return rb(8390656,8,d,f)}function mS(d,f){return ab(2048,8,d,f)}function r5(d,f){return ab(4,2,d,f)}function a5(d,f){return ab(4,4,d,f)}function s5(d,f){if(typeof f=="function")return d=d(),f(d),function(){f(null)};if(f!=null)return d=d(),f.current=d,function(){f.current=null}}function i5(d,f,b){return b=b!=null?b.concat([d]):null,ab(4,4,s5.bind(null,f,d),b)}function hS(){}function o5(d,f){var b=eo();f=f===void 0?null:f;var E=b.memoizedState;return E!==null&&f!==null&&Qt(f,E[1])?E[0]:(b.memoizedState=[d,f],d)}function l5(d,f){var b=eo();f=f===void 0?null:f;var E=b.memoizedState;return E!==null&&f!==null&&Qt(f,E[1])?E[0]:(d=d(),b.memoizedState=[d,f],d)}function c5(d,f,b){return(Pn&21)===0?(d.baseState&&(d.baseState=!1,hi=!0),d.memoizedState=b):(Ci(b,f)||(b=xl(),Ct.lanes|=b,uf|=b,d.baseState=!0),f)}function uY(d,f){var b=wn;wn=b!==0&&4>b?b:4,d(!0);var E=Et.transition;Et.transition={};try{d(!1),f()}finally{wn=b,Et.transition=E}}function d5(){return eo().memoizedState}function fY(d,f,b){var E=eu(d);if(b={lane:E,action:b,hasEagerState:!1,eagerState:null,next:null},u5(d))f5(f,b);else if(b=Qi(d,f,b,E),b!==null){var O=Ws();Uo(b,d,E,O),p5(b,f,E)}}function pY(d,f,b){var E=eu(d),O={lane:E,action:b,hasEagerState:!1,eagerState:null,next:null};if(u5(d))f5(f,O);else{var D=d.alternate;if(d.lanes===0&&(D===null||D.lanes===0)&&(D=f.lastRenderedReducer,D!==null))try{var q=f.lastRenderedState,se=D(q,b);if(O.hasEagerState=!0,O.eagerState=se,Ci(se,q)){var ge=f.interleaved;ge===null?(O.next=O,Yd(f)):(O.next=ge.next,ge.next=O),f.interleaved=O;return}}catch{}finally{}b=Qi(d,f,O,E),b!==null&&(O=Ws(),Uo(b,d,E,O),p5(b,f,E))}}function u5(d){var f=d.alternate;return d===Ct||f!==null&&f===Ct}function f5(d,f){qr=Ln=!0;var b=d.pending;b===null?f.next=f:(f.next=b.next,b.next=f),d.pending=f}function p5(d,f,b){if((b&4194240)!==0){var E=f.lanes;E&=d.pendingLanes,b|=E,f.lanes=b,Ls(d,b)}}var sb={readContext:_a,useCallback:za,useContext:za,useEffect:za,useImperativeHandle:za,useInsertionEffect:za,useLayoutEffect:za,useMemo:za,useReducer:za,useRef:za,useState:za,useDebugValue:za,useDeferredValue:za,useTransition:za,useMutableSource:za,useSyncExternalStore:za,useId:za,unstable_isNewReconciler:!1},mY={readContext:_a,useCallback:function(d,f){return Es().memoizedState=[d,f===void 0?null:f],d},useContext:_a,useEffect:n5,useImperativeHandle:function(d,f,b){return b=b!=null?b.concat([d]):null,rb(4194308,4,s5.bind(null,f,d),b)},useLayoutEffect:function(d,f){return rb(4194308,4,d,f)},useInsertionEffect:function(d,f){return rb(4,2,d,f)},useMemo:function(d,f){var b=Es();return f=f===void 0?null:f,d=d(),b.memoizedState=[d,f],d},useReducer:function(d,f,b){var E=Es();return f=b!==void 0?b(f):f,E.memoizedState=E.baseState=f,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:f},E.queue=d,d=d.dispatch=fY.bind(null,Ct,d),[E.memoizedState,d]},useRef:function(d){var f=Es();return d={current:d},f.memoizedState=d},useState:e5,useDebugValue:hS,useDeferredValue:function(d){return Es().memoizedState=d},useTransition:function(){var d=e5(!1),f=d[0];return d=uY.bind(null,d[1]),Es().memoizedState=d,[f,d]},useMutableSource:function(){},useSyncExternalStore:function(d,f,b){var E=Ct,O=Es();if(vn){if(b===void 0)throw Error(n(407));b=b()}else{if(b=f(),qa===null)throw Error(n(349));(Pn&30)!==0||Y3(E,f,b)}O.memoizedState=b;var D={value:b,getSnapshot:f};return O.queue=D,n5(X3.bind(null,E,D,d),[d]),E.flags|=2048,m0(9,Q3.bind(null,E,D,b,f),void 0,null),b},useId:function(){var d=Es(),f=qa.identifierPrefix;if(vn){var b=sa,E=ui;b=(E&~(1<<32-ta(E)-1)).toString(32)+b,f=":"+f+"R"+b,b=qs++,0<b&&(f+="H"+b.toString(32)),f+=":"}else b=df++,f=":"+f+"r"+b.toString(32)+":";return d.memoizedState=f},unstable_isNewReconciler:!1},hY={readContext:_a,useCallback:o5,useContext:_a,useEffect:mS,useImperativeHandle:i5,useInsertionEffect:r5,useLayoutEffect:a5,useMemo:l5,useReducer:fS,useRef:t5,useState:function(){return fS(p0)},useDebugValue:hS,useDeferredValue:function(d){var f=eo();return c5(f,Kn.memoizedState,d)},useTransition:function(){var d=fS(p0)[0],f=eo().memoizedState;return[d,f]},useMutableSource:V3,useSyncExternalStore:W3,useId:d5,unstable_isNewReconciler:!1},gY={readContext:_a,useCallback:o5,useContext:_a,useEffect:mS,useImperativeHandle:i5,useInsertionEffect:r5,useLayoutEffect:a5,useMemo:l5,useReducer:pS,useRef:t5,useState:function(){return pS(p0)},useDebugValue:hS,useDeferredValue:function(d){var f=eo();return Kn===null?f.memoizedState=d:c5(f,Kn.memoizedState,d)},useTransition:function(){var d=pS(p0)[0],f=eo().memoizedState;return[d,f]},useMutableSource:V3,useSyncExternalStore:W3,useId:d5,unstable_isNewReconciler:!1};function Lo(d,f){if(d&&d.defaultProps){f=ne({},f),d=d.defaultProps;for(var b in d)f[b]===void 0&&(f[b]=d[b]);return f}return f}function gS(d,f,b,E){f=d.memoizedState,b=b(E,f),b=b==null?f:ne({},f,b),d.memoizedState=b,d.lanes===0&&(d.updateQueue.baseState=b)}var ib={isMounted:function(d){return(d=d._reactInternals)?Mn(d)===d:!1},enqueueSetState:function(d,f,b){d=d._reactInternals;var E=Ws(),O=eu(d),D=Ri(E,O);D.payload=f,b!=null&&(D.callback=b),f=Xi(d,D,O),f!==null&&(Uo(f,d,O,E),Ji(f,d,O))},enqueueReplaceState:function(d,f,b){d=d._reactInternals;var E=Ws(),O=eu(d),D=Ri(E,O);D.tag=1,D.payload=f,b!=null&&(D.callback=b),f=Xi(d,D,O),f!==null&&(Uo(f,d,O,E),Ji(f,d,O))},enqueueForceUpdate:function(d,f){d=d._reactInternals;var b=Ws(),E=eu(d),O=Ri(b,E);O.tag=2,f!=null&&(O.callback=f),f=Xi(d,O,E),f!==null&&(Uo(f,d,E,b),Ji(f,d,E))}};function m5(d,f,b,E,O,D,q){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(E,D,q):f.prototype&&f.prototype.isPureReactComponent?!Ye(b,E)||!Ye(O,D):!0}function h5(d,f,b){var E=!1,O=is,D=f.contextType;return typeof D=="object"&&D!==null?D=_a(D):(O=xs(f)?Oc:Rr.current,E=f.contextTypes,D=(E=E!=null)?Ro(d,O):is),f=new f(b,D),d.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=ib,d.stateNode=f,f._reactInternals=d,E&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=O,d.__reactInternalMemoizedMaskedChildContext=D),f}function g5(d,f,b,E){d=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(b,E),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(b,E),f.state!==d&&ib.enqueueReplaceState(f,f.state,null)}function xS(d,f,b,E){var O=d.stateNode;O.props=b,O.state=d.memoizedState,O.refs={},Ic(d);var D=f.contextType;typeof D=="object"&&D!==null?O.context=_a(D):(D=xs(f)?Oc:Rr.current,O.context=Ro(d,D)),O.state=d.memoizedState,D=f.getDerivedStateFromProps,typeof D=="function"&&(gS(d,f,D,b),O.state=d.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(f=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),f!==O.state&&ib.enqueueReplaceState(O,O.state,null),of(d,b,O,E),O.state=d.memoizedState),typeof O.componentDidMount=="function"&&(d.flags|=4194308)}function Np(d,f){try{var b="",E=f;do b+=ce(E),E=E.return;while(E);var O=b}catch(D){O=`
Error generating stack: `+D.message+`
`+D.stack}return{value:d,source:f,stack:O,digest:null}}function bS(d,f,b){return{value:d,source:null,stack:b??null,digest:f??null}}function yS(d,f){try{console.error(f.value)}catch(b){setTimeout(function(){throw b})}}var xY=typeof WeakMap=="function"?WeakMap:Map;function x5(d,f,b){b=Ri(-1,b),b.tag=3,b.payload={element:null};var E=f.value;return b.callback=function(){pb||(pb=!0,DS=E),yS(d,f)},b}function b5(d,f,b){b=Ri(-1,b),b.tag=3;var E=d.type.getDerivedStateFromError;if(typeof E=="function"){var O=f.value;b.payload=function(){return E(O)},b.callback=function(){yS(d,f)}}var D=d.stateNode;return D!==null&&typeof D.componentDidCatch=="function"&&(b.callback=function(){yS(d,f),typeof E!="function"&&(Jd===null?Jd=new Set([this]):Jd.add(this));var q=f.stack;this.componentDidCatch(f.value,{componentStack:q!==null?q:""})}),b}function y5(d,f,b){var E=d.pingCache;if(E===null){E=d.pingCache=new xY;var O=new Set;E.set(f,O)}else O=E.get(f),O===void 0&&(O=new Set,E.set(f,O));O.has(b)||(O.add(b),d=RY.bind(null,d,f,b),f.then(d,d))}function v5(d){do{var f;if((f=d.tag===13)&&(f=d.memoizedState,f=f!==null?f.dehydrated!==null:!0),f)return d;d=d.return}while(d!==null);return null}function N5(d,f,b,E,O){return(d.mode&1)===0?(d===f?d.flags|=65536:(d.flags|=128,b.flags|=131072,b.flags&=-52805,b.tag===1&&(b.alternate===null?b.tag=17:(f=Ri(-1,1),f.tag=2,Xi(b,f,1))),b.lanes|=1),d):(d.flags|=65536,d.lanes=O,d)}var bY=_.ReactCurrentOwner,hi=!1;function Vs(d,f,b,E){f.child=d===null?zd(f,null,b,E):Ka(f,d.child,b,E)}function S5(d,f,b,E,O){b=b.render;var D=f.ref;return Mo(f,O),E=fr(d,f,b,E,D,O),b=Dc(),d!==null&&!hi?(f.updateQueue=d.updateQueue,f.flags&=-2053,d.lanes&=~O,Pc(d,f,O)):(vn&&b&&Tl(f),f.flags|=1,Vs(d,f,E,O),f.child)}function E5(d,f,b,E,O){if(d===null){var D=b.type;return typeof D=="function"&&!BS(D)&&D.defaultProps===void 0&&b.compare===null&&b.defaultProps===void 0?(f.tag=15,f.type=D,j5(d,f,D,E,O)):(d=yb(b.type,null,E,f,f.mode,O),d.ref=f.ref,d.return=f,f.child=d)}if(D=d.child,(d.lanes&O)===0){var q=D.memoizedProps;if(b=b.compare,b=b!==null?b:Ye,b(q,E)&&d.ref===f.ref)return Pc(d,f,O)}return f.flags|=1,d=nu(D,E),d.ref=f.ref,d.return=f,f.child=d}function j5(d,f,b,E,O){if(d!==null){var D=d.memoizedProps;if(Ye(D,E)&&d.ref===f.ref)if(hi=!1,f.pendingProps=E=D,(d.lanes&O)!==0)(d.flags&131072)!==0&&(hi=!0);else return f.lanes=d.lanes,Pc(d,f,O)}return vS(d,f,b,E,O)}function w5(d,f,b){var E=f.pendingProps,O=E.children,D=d!==null?d.memoizedState:null;if(E.mode==="hidden")if((f.mode&1)===0)f.memoizedState={baseLanes:0,cachePool:null,transitions:null},Nn(Ep,ki),ki|=b;else{if((b&1073741824)===0)return d=D!==null?D.baseLanes|b:b,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:d,cachePool:null,transitions:null},f.updateQueue=null,Nn(Ep,ki),ki|=d,null;f.memoizedState={baseLanes:0,cachePool:null,transitions:null},E=D!==null?D.baseLanes:b,Nn(Ep,ki),ki|=E}else D!==null?(E=D.baseLanes|b,f.memoizedState=null):E=b,Nn(Ep,ki),ki|=E;return Vs(d,f,O,b),f.child}function A5(d,f){var b=f.ref;(d===null&&b!==null||d!==null&&d.ref!==b)&&(f.flags|=512,f.flags|=2097152)}function vS(d,f,b,E,O){var D=xs(b)?Oc:Rr.current;return D=Ro(f,D),Mo(f,O),b=fr(d,f,b,E,D,O),E=Dc(),d!==null&&!hi?(f.updateQueue=d.updateQueue,f.flags&=-2053,d.lanes&=~O,Pc(d,f,O)):(vn&&E&&Tl(f),f.flags|=1,Vs(d,f,b,O),f.child)}function _5(d,f,b,E,O){if(xs(b)){var D=!0;Bd(f)}else D=!1;if(Mo(f,O),f.stateNode===null)lb(d,f),h5(f,b,E),xS(f,b,E,O),E=!0;else if(d===null){var q=f.stateNode,se=f.memoizedProps;q.props=se;var ge=q.context,Re=b.contextType;typeof Re=="object"&&Re!==null?Re=_a(Re):(Re=xs(b)?Oc:Rr.current,Re=Ro(f,Re));var tt=b.getDerivedStateFromProps,rt=typeof tt=="function"||typeof q.getSnapshotBeforeUpdate=="function";rt||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(se!==E||ge!==Re)&&g5(f,q,E,Re),mi=!1;var Ze=f.memoizedState;q.state=Ze,of(f,E,q,O),ge=f.memoizedState,se!==E||Ze!==ge||ja.current||mi?(typeof tt=="function"&&(gS(f,b,tt,E),ge=f.memoizedState),(se=mi||m5(f,b,se,E,Ze,ge,Re))?(rt||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount()),typeof q.componentDidMount=="function"&&(f.flags|=4194308)):(typeof q.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=E,f.memoizedState=ge),q.props=E,q.state=ge,q.context=Re,E=se):(typeof q.componentDidMount=="function"&&(f.flags|=4194308),E=!1)}else{q=f.stateNode,Oi(d,f),se=f.memoizedProps,Re=f.type===f.elementType?se:Lo(f.type,se),q.props=Re,rt=f.pendingProps,Ze=q.context,ge=b.contextType,typeof ge=="object"&&ge!==null?ge=_a(ge):(ge=xs(b)?Oc:Rr.current,ge=Ro(f,ge));var vt=b.getDerivedStateFromProps;(tt=typeof vt=="function"||typeof q.getSnapshotBeforeUpdate=="function")||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(se!==rt||Ze!==ge)&&g5(f,q,E,ge),mi=!1,Ze=f.memoizedState,q.state=Ze,of(f,E,q,O);var Tt=f.memoizedState;se!==rt||Ze!==Tt||ja.current||mi?(typeof vt=="function"&&(gS(f,b,vt,E),Tt=f.memoizedState),(Re=mi||m5(f,b,Re,E,Ze,Tt,ge)||!1)?(tt||typeof q.UNSAFE_componentWillUpdate!="function"&&typeof q.componentWillUpdate!="function"||(typeof q.componentWillUpdate=="function"&&q.componentWillUpdate(E,Tt,ge),typeof q.UNSAFE_componentWillUpdate=="function"&&q.UNSAFE_componentWillUpdate(E,Tt,ge)),typeof q.componentDidUpdate=="function"&&(f.flags|=4),typeof q.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof q.componentDidUpdate!="function"||se===d.memoizedProps&&Ze===d.memoizedState||(f.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||se===d.memoizedProps&&Ze===d.memoizedState||(f.flags|=1024),f.memoizedProps=E,f.memoizedState=Tt),q.props=E,q.state=Tt,q.context=ge,E=Re):(typeof q.componentDidUpdate!="function"||se===d.memoizedProps&&Ze===d.memoizedState||(f.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||se===d.memoizedProps&&Ze===d.memoizedState||(f.flags|=1024),E=!1)}return NS(d,f,b,E,D,O)}function NS(d,f,b,E,O,D){A5(d,f);var q=(f.flags&128)!==0;if(!E&&!q)return O&&rf(f,b,!1),Pc(d,f,D);E=f.stateNode,bY.current=f;var se=q&&typeof b.getDerivedStateFromError!="function"?null:E.render();return f.flags|=1,d!==null&&q?(f.child=Ka(f,d.child,null,D),f.child=Ka(f,null,se,D)):Vs(d,f,se,D),f.memoizedState=E.state,O&&rf(f,b,!0),f.child}function C5(d){var f=d.stateNode;f.pendingContext?Vi(d,f.pendingContext,f.pendingContext!==f.context):f.context&&Vi(d,f.context,!1),Y(d,f.containerInfo)}function T5(d,f,b,E,O){return Yi(),yp(O),f.flags|=256,Vs(d,f,b,E),f.child}var SS={dehydrated:null,treeContext:null,retryLane:0};function ES(d){return{baseLanes:d,cachePool:null,transitions:null}}function O5(d,f,b){var E=f.pendingProps,O=je.current,D=!1,q=(f.flags&128)!==0,se;if((se=q)||(se=d!==null&&d.memoizedState===null?!1:(O&2)!==0),se?(D=!0,f.flags&=-129):(d===null||d.memoizedState!==null)&&(O|=1),Nn(je,O&1),d===null)return Ol(f),d=f.memoizedState,d!==null&&(d=d.dehydrated,d!==null)?((f.mode&1)===0?f.lanes=1:d.data==="$!"?f.lanes=8:f.lanes=1073741824,null):(q=E.children,d=E.fallback,D?(E=f.mode,D=f.child,q={mode:"hidden",children:q},(E&1)===0&&D!==null?(D.childLanes=0,D.pendingProps=q):D=vb(q,E,0,null),d=hf(d,E,b,null),D.return=f,d.return=f,D.sibling=d,f.child=D,f.child.memoizedState=ES(b),f.memoizedState=SS,d):jS(f,q));if(O=d.memoizedState,O!==null&&(se=O.dehydrated,se!==null))return yY(d,f,q,E,se,O,b);if(D){D=E.fallback,q=f.mode,O=d.child,se=O.sibling;var ge={mode:"hidden",children:E.children};return(q&1)===0&&f.child!==O?(E=f.child,E.childLanes=0,E.pendingProps=ge,f.deletions=null):(E=nu(O,ge),E.subtreeFlags=O.subtreeFlags&14680064),se!==null?D=nu(se,D):(D=hf(D,q,b,null),D.flags|=2),D.return=f,E.return=f,E.sibling=D,f.child=E,E=D,D=f.child,q=d.child.memoizedState,q=q===null?ES(b):{baseLanes:q.baseLanes|b,cachePool:null,transitions:q.transitions},D.memoizedState=q,D.childLanes=d.childLanes&~b,f.memoizedState=SS,E}return D=d.child,d=D.sibling,E=nu(D,{mode:"visible",children:E.children}),(f.mode&1)===0&&(E.lanes=b),E.return=f,E.sibling=null,d!==null&&(b=f.deletions,b===null?(f.deletions=[d],f.flags|=16):b.push(d)),f.child=E,f.memoizedState=null,E}function jS(d,f){return f=vb({mode:"visible",children:f},d.mode,0,null),f.return=d,d.child=f}function ob(d,f,b,E){return E!==null&&yp(E),Ka(f,d.child,null,b),d=jS(f,f.pendingProps.children),d.flags|=2,f.memoizedState=null,d}function yY(d,f,b,E,O,D,q){if(b)return f.flags&256?(f.flags&=-257,E=bS(Error(n(422))),ob(d,f,q,E)):f.memoizedState!==null?(f.child=d.child,f.flags|=128,null):(D=E.fallback,O=f.mode,E=vb({mode:"visible",children:E.children},O,0,null),D=hf(D,O,q,null),D.flags|=2,E.return=f,D.return=f,E.sibling=D,f.child=E,(f.mode&1)!==0&&Ka(f,d.child,null,q),f.child.memoizedState=ES(q),f.memoizedState=SS,D);if((f.mode&1)===0)return ob(d,f,q,null);if(O.data==="$!"){if(E=O.nextSibling&&O.nextSibling.dataset,E)var se=E.dgst;return E=se,D=Error(n(419)),E=bS(D,E,void 0),ob(d,f,q,E)}if(se=(q&d.childLanes)!==0,hi||se){if(E=qa,E!==null){switch(q&-q){case 4:O=2;break;case 16:O=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:O=32;break;case 536870912:O=268435456;break;default:O=0}O=(O&(E.suspendedLanes|q))!==0?0:O,O!==0&&O!==D.retryLane&&(D.retryLane=O,zs(d,O),Uo(E,d,O,-1))}return US(),E=bS(Error(n(421))),ob(d,f,q,E)}return O.data==="$?"?(f.flags|=128,f.child=d.child,f=kY.bind(null,d),O._reactRetry=f,null):(d=D.treeContext,vs=er(O.nextSibling),ys=f,vn=!0,Ns=null,d!==null&&(ci[di++]=ui,ci[di++]=sa,ci[di++]=kc,ui=d.id,sa=d.overflow,kc=f),f=jS(f,E.children),f.flags|=4096,f)}function R5(d,f,b){d.lanes|=f;var E=d.alternate;E!==null&&(E.lanes|=f),Yn(d.return,f,b)}function wS(d,f,b,E,O){var D=d.memoizedState;D===null?d.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:E,tail:b,tailMode:O}:(D.isBackwards=f,D.rendering=null,D.renderingStartTime=0,D.last=E,D.tail=b,D.tailMode=O)}function k5(d,f,b){var E=f.pendingProps,O=E.revealOrder,D=E.tail;if(Vs(d,f,E.children,b),E=je.current,(E&2)!==0)E=E&1|2,f.flags|=128;else{if(d!==null&&(d.flags&128)!==0)e:for(d=f.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&R5(d,b,f);else if(d.tag===19)R5(d,b,f);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===f)break e;for(;d.sibling===null;){if(d.return===null||d.return===f)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}E&=1}if(Nn(je,E),(f.mode&1)===0)f.memoizedState=null;else switch(O){case"forwards":for(b=f.child,O=null;b!==null;)d=b.alternate,d!==null&&nt(d)===null&&(O=b),b=b.sibling;b=O,b===null?(O=f.child,f.child=null):(O=b.sibling,b.sibling=null),wS(f,!1,O,b,D);break;case"backwards":for(b=null,O=f.child,f.child=null;O!==null;){if(d=O.alternate,d!==null&&nt(d)===null){f.child=O;break}d=O.sibling,O.sibling=b,b=O,O=d}wS(f,!0,b,null,D);break;case"together":wS(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function lb(d,f){(f.mode&1)===0&&d!==null&&(d.alternate=null,f.alternate=null,f.flags|=2)}function Pc(d,f,b){if(d!==null&&(f.dependencies=d.dependencies),uf|=f.lanes,(b&f.childLanes)===0)return null;if(d!==null&&f.child!==d.child)throw Error(n(153));if(f.child!==null){for(d=f.child,b=nu(d,d.pendingProps),f.child=b,b.return=f;d.sibling!==null;)d=d.sibling,b=b.sibling=nu(d,d.pendingProps),b.return=f;b.sibling=null}return f.child}function vY(d,f,b){switch(f.tag){case 3:C5(f),Yi();break;case 5:re(f);break;case 1:xs(f.type)&&Bd(f);break;case 4:Y(f,f.stateNode.containerInfo);break;case 10:var E=f.type._context,O=f.memoizedProps.value;Nn(qd,E._currentValue),E._currentValue=O;break;case 13:if(E=f.memoizedState,E!==null)return E.dehydrated!==null?(Nn(je,je.current&1),f.flags|=128,null):(b&f.child.childLanes)!==0?O5(d,f,b):(Nn(je,je.current&1),d=Pc(d,f,b),d!==null?d.sibling:null);Nn(je,je.current&1);break;case 19:if(E=(b&f.childLanes)!==0,(d.flags&128)!==0){if(E)return k5(d,f,b);f.flags|=128}if(O=f.memoizedState,O!==null&&(O.rendering=null,O.tail=null,O.lastEffect=null),Nn(je,je.current),E)break;return null;case 22:case 23:return f.lanes=0,w5(d,f,b)}return Pc(d,f,b)}var I5,AS,D5,P5;I5=function(d,f){for(var b=f.child;b!==null;){if(b.tag===5||b.tag===6)d.appendChild(b.stateNode);else if(b.tag!==4&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===f)break;for(;b.sibling===null;){if(b.return===null||b.return===f)return;b=b.return}b.sibling.return=b.return,b=b.sibling}},AS=function(){},D5=function(d,f,b,E){var O=d.memoizedProps;if(O!==E){d=f.stateNode,B(Zi.current);var D=null;switch(b){case"input":O=ye(d,O),E=ye(d,E),D=[];break;case"select":O=ne({},O,{value:void 0}),E=ne({},E,{value:void 0}),D=[];break;case"textarea":O=Fe(d,O),E=Fe(d,E),D=[];break;default:typeof O.onClick!="function"&&typeof E.onClick=="function"&&(d.onclick=$d)}ar(b,E);var q;b=null;for(Re in O)if(!E.hasOwnProperty(Re)&&O.hasOwnProperty(Re)&&O[Re]!=null)if(Re==="style"){var se=O[Re];for(q in se)se.hasOwnProperty(q)&&(b||(b={}),b[q]="")}else Re!=="dangerouslySetInnerHTML"&&Re!=="children"&&Re!=="suppressContentEditableWarning"&&Re!=="suppressHydrationWarning"&&Re!=="autoFocus"&&(s.hasOwnProperty(Re)?D||(D=[]):(D=D||[]).push(Re,null));for(Re in E){var ge=E[Re];if(se=O?.[Re],E.hasOwnProperty(Re)&&ge!==se&&(ge!=null||se!=null))if(Re==="style")if(se){for(q in se)!se.hasOwnProperty(q)||ge&&ge.hasOwnProperty(q)||(b||(b={}),b[q]="");for(q in ge)ge.hasOwnProperty(q)&&se[q]!==ge[q]&&(b||(b={}),b[q]=ge[q])}else b||(D||(D=[]),D.push(Re,b)),b=ge;else Re==="dangerouslySetInnerHTML"?(ge=ge?ge.__html:void 0,se=se?se.__html:void 0,ge!=null&&se!==ge&&(D=D||[]).push(Re,ge)):Re==="children"?typeof ge!="string"&&typeof ge!="number"||(D=D||[]).push(Re,""+ge):Re!=="suppressContentEditableWarning"&&Re!=="suppressHydrationWarning"&&(s.hasOwnProperty(Re)?(ge!=null&&Re==="onScroll"&&dr("scroll",d),D||se===ge||(D=[])):(D=D||[]).push(Re,ge))}b&&(D=D||[]).push("style",b);var Re=D;(f.updateQueue=Re)&&(f.flags|=4)}},P5=function(d,f,b,E){b!==E&&(f.flags|=4)};function h0(d,f){if(!vn)switch(d.tailMode){case"hidden":f=d.tail;for(var b=null;f!==null;)f.alternate!==null&&(b=f),f=f.sibling;b===null?d.tail=null:b.sibling=null;break;case"collapsed":b=d.tail;for(var E=null;b!==null;)b.alternate!==null&&(E=b),b=b.sibling;E===null?f||d.tail===null?d.tail=null:d.tail.sibling=null:E.sibling=null}}function js(d){var f=d.alternate!==null&&d.alternate.child===d.child,b=0,E=0;if(f)for(var O=d.child;O!==null;)b|=O.lanes|O.childLanes,E|=O.subtreeFlags&14680064,E|=O.flags&14680064,O.return=d,O=O.sibling;else for(O=d.child;O!==null;)b|=O.lanes|O.childLanes,E|=O.subtreeFlags,E|=O.flags,O.return=d,O=O.sibling;return d.subtreeFlags|=E,d.childLanes=b,f}function NY(d,f,b){var E=f.pendingProps;switch(Kd(f),f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return js(f),null;case 1:return xs(f.type)&&wa(),js(f),null;case 3:return E=f.stateNode,de(),Bn(ja),Bn(Rr),$e(),E.pendingContext&&(E.context=E.pendingContext,E.pendingContext=null),(d===null||d.child===null)&&(bp(f)?f.flags|=4:d===null||d.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,Ns!==null&&(LS(Ns),Ns=null))),AS(d,f),js(f),null;case 5:Oe(f);var O=B(k.current);if(b=f.type,d!==null&&f.stateNode!=null)D5(d,f,b,E,O),d.ref!==f.ref&&(f.flags|=512,f.flags|=2097152);else{if(!E){if(f.stateNode===null)throw Error(n(166));return js(f),null}if(d=B(Zi.current),bp(f)){E=f.stateNode,b=f.type;var D=f.memoizedProps;switch(E[oi]=f,E[zi]=D,d=(f.mode&1)!==0,b){case"dialog":dr("cancel",E),dr("close",E);break;case"iframe":case"object":case"embed":dr("load",E);break;case"video":case"audio":for(O=0;O<Pd.length;O++)dr(Pd[O],E);break;case"source":dr("error",E);break;case"img":case"image":case"link":dr("error",E),dr("load",E);break;case"details":dr("toggle",E);break;case"input":_e(E,D),dr("invalid",E);break;case"select":E._wrapperState={wasMultiple:!!D.multiple},dr("invalid",E);break;case"textarea":pt(E,D),dr("invalid",E)}ar(b,D),O=null;for(var q in D)if(D.hasOwnProperty(q)){var se=D[q];q==="children"?typeof se=="string"?E.textContent!==se&&(D.suppressHydrationWarning!==!0&&Ld(E.textContent,se,d),O=["children",se]):typeof se=="number"&&E.textContent!==""+se&&(D.suppressHydrationWarning!==!0&&Ld(E.textContent,se,d),O=["children",""+se]):s.hasOwnProperty(q)&&se!=null&&q==="onScroll"&&dr("scroll",E)}switch(b){case"input":Pe(E),Ne(E,D,!0);break;case"textarea":Pe(E),qe(E);break;case"select":case"option":break;default:typeof D.onClick=="function"&&(E.onclick=$d)}E=O,f.updateQueue=E,E!==null&&(f.flags|=4)}else{q=O.nodeType===9?O:O.ownerDocument,d==="http://www.w3.org/1999/xhtml"&&(d=rn(b)),d==="http://www.w3.org/1999/xhtml"?b==="script"?(d=q.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild)):typeof E.is=="string"?d=q.createElement(b,{is:E.is}):(d=q.createElement(b),b==="select"&&(q=d,E.multiple?q.multiple=!0:E.size&&(q.size=E.size))):d=q.createElementNS(d,b),d[oi]=f,d[zi]=E,I5(d,f,!1,!1),f.stateNode=d;e:{switch(q=yt(b,E),b){case"dialog":dr("cancel",d),dr("close",d),O=E;break;case"iframe":case"object":case"embed":dr("load",d),O=E;break;case"video":case"audio":for(O=0;O<Pd.length;O++)dr(Pd[O],d);O=E;break;case"source":dr("error",d),O=E;break;case"img":case"image":case"link":dr("error",d),dr("load",d),O=E;break;case"details":dr("toggle",d),O=E;break;case"input":_e(d,E),O=ye(d,E),dr("invalid",d);break;case"option":O=E;break;case"select":d._wrapperState={wasMultiple:!!E.multiple},O=ne({},E,{value:void 0}),dr("invalid",d);break;case"textarea":pt(d,E),O=Fe(d,E),dr("invalid",d);break;default:O=E}ar(b,O),se=O;for(D in se)if(se.hasOwnProperty(D)){var ge=se[D];D==="style"?Tn(d,ge):D==="dangerouslySetInnerHTML"?(ge=ge?ge.__html:void 0,ge!=null&&It(d,ge)):D==="children"?typeof ge=="string"?(b!=="textarea"||ge!=="")&&an(d,ge):typeof ge=="number"&&an(d,""+ge):D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&D!=="autoFocus"&&(s.hasOwnProperty(D)?ge!=null&&D==="onScroll"&&dr("scroll",d):ge!=null&&C(d,D,ge,q))}switch(b){case"input":Pe(d),Ne(d,E,!1);break;case"textarea":Pe(d),qe(d);break;case"option":E.value!=null&&d.setAttribute("value",""+Se(E.value));break;case"select":d.multiple=!!E.multiple,D=E.value,D!=null?et(d,!!E.multiple,D,!1):E.defaultValue!=null&&et(d,!!E.multiple,E.defaultValue,!0);break;default:typeof O.onClick=="function"&&(d.onclick=$d)}switch(b){case"button":case"input":case"select":case"textarea":E=!!E.autoFocus;break e;case"img":E=!0;break e;default:E=!1}}E&&(f.flags|=4)}f.ref!==null&&(f.flags|=512,f.flags|=2097152)}return js(f),null;case 6:if(d&&f.stateNode!=null)P5(d,f,d.memoizedProps,E);else{if(typeof E!="string"&&f.stateNode===null)throw Error(n(166));if(b=B(k.current),B(Zi.current),bp(f)){if(E=f.stateNode,b=f.memoizedProps,E[oi]=f,(D=E.nodeValue!==b)&&(d=ys,d!==null))switch(d.tag){case 3:Ld(E.nodeValue,b,(d.mode&1)!==0);break;case 5:d.memoizedProps.suppressHydrationWarning!==!0&&Ld(E.nodeValue,b,(d.mode&1)!==0)}D&&(f.flags|=4)}else E=(b.nodeType===9?b:b.ownerDocument).createTextNode(E),E[oi]=f,f.stateNode=E}return js(f),null;case 13:if(Bn(je),E=f.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(vn&&vs!==null&&(f.mode&1)!==0&&(f.flags&128)===0)Po(),Yi(),f.flags|=98560,D=!1;else if(D=bp(f),E!==null&&E.dehydrated!==null){if(d===null){if(!D)throw Error(n(318));if(D=f.memoizedState,D=D!==null?D.dehydrated:null,!D)throw Error(n(317));D[oi]=f}else Yi(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;js(f),D=!1}else Ns!==null&&(LS(Ns),Ns=null),D=!0;if(!D)return f.flags&65536?f:null}return(f.flags&128)!==0?(f.lanes=b,f):(E=E!==null,E!==(d!==null&&d.memoizedState!==null)&&E&&(f.child.flags|=8192,(f.mode&1)!==0&&(d===null||(je.current&1)!==0?Ca===0&&(Ca=3):US())),f.updateQueue!==null&&(f.flags|=4),js(f),null);case 4:return de(),AS(d,f),d===null&&Zu(f.stateNode.containerInfo),js(f),null;case 10:return Wd(f.type._context),js(f),null;case 17:return xs(f.type)&&wa(),js(f),null;case 19:if(Bn(je),D=f.memoizedState,D===null)return js(f),null;if(E=(f.flags&128)!==0,q=D.rendering,q===null)if(E)h0(D,!1);else{if(Ca!==0||d!==null&&(d.flags&128)!==0)for(d=f.child;d!==null;){if(q=nt(d),q!==null){for(f.flags|=128,h0(D,!1),E=q.updateQueue,E!==null&&(f.updateQueue=E,f.flags|=4),f.subtreeFlags=0,E=b,b=f.child;b!==null;)D=b,d=E,D.flags&=14680066,q=D.alternate,q===null?(D.childLanes=0,D.lanes=d,D.child=null,D.subtreeFlags=0,D.memoizedProps=null,D.memoizedState=null,D.updateQueue=null,D.dependencies=null,D.stateNode=null):(D.childLanes=q.childLanes,D.lanes=q.lanes,D.child=q.child,D.subtreeFlags=0,D.deletions=null,D.memoizedProps=q.memoizedProps,D.memoizedState=q.memoizedState,D.updateQueue=q.updateQueue,D.type=q.type,d=q.dependencies,D.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),b=b.sibling;return Nn(je,je.current&1|2),f.child}d=d.sibling}D.tail!==null&&Kt()>jp&&(f.flags|=128,E=!0,h0(D,!1),f.lanes=4194304)}else{if(!E)if(d=nt(q),d!==null){if(f.flags|=128,E=!0,b=d.updateQueue,b!==null&&(f.updateQueue=b,f.flags|=4),h0(D,!0),D.tail===null&&D.tailMode==="hidden"&&!q.alternate&&!vn)return js(f),null}else 2*Kt()-D.renderingStartTime>jp&&b!==1073741824&&(f.flags|=128,E=!0,h0(D,!1),f.lanes=4194304);D.isBackwards?(q.sibling=f.child,f.child=q):(b=D.last,b!==null?b.sibling=q:f.child=q,D.last=q)}return D.tail!==null?(f=D.tail,D.rendering=f,D.tail=f.sibling,D.renderingStartTime=Kt(),f.sibling=null,b=je.current,Nn(je,E?b&1|2:b&1),f):(js(f),null);case 22:case 23:return FS(),E=f.memoizedState!==null,d!==null&&d.memoizedState!==null!==E&&(f.flags|=8192),E&&(f.mode&1)!==0?(ki&1073741824)!==0&&(js(f),f.subtreeFlags&6&&(f.flags|=8192)):js(f),null;case 24:return null;case 25:return null}throw Error(n(156,f.tag))}function SY(d,f){switch(Kd(f),f.tag){case 1:return xs(f.type)&&wa(),d=f.flags,d&65536?(f.flags=d&-65537|128,f):null;case 3:return de(),Bn(ja),Bn(Rr),$e(),d=f.flags,(d&65536)!==0&&(d&128)===0?(f.flags=d&-65537|128,f):null;case 5:return Oe(f),null;case 13:if(Bn(je),d=f.memoizedState,d!==null&&d.dehydrated!==null){if(f.alternate===null)throw Error(n(340));Yi()}return d=f.flags,d&65536?(f.flags=d&-65537|128,f):null;case 19:return Bn(je),null;case 4:return de(),null;case 10:return Wd(f.type._context),null;case 22:case 23:return FS(),null;case 24:return null;default:return null}}var cb=!1,ws=!1,EY=typeof WeakSet=="function"?WeakSet:Set,At=null;function Sp(d,f){var b=d.ref;if(b!==null)if(typeof b=="function")try{b(null)}catch(E){Vr(d,f,E)}else b.current=null}function _S(d,f,b){try{b()}catch(E){Vr(d,f,E)}}var M5=!1;function jY(d,f){if(Cl=jd,d=Qu(),Od(d)){if("selectionStart"in d)var b={start:d.selectionStart,end:d.selectionEnd};else e:{b=(b=d.ownerDocument)&&b.defaultView||window;var E=b.getSelection&&b.getSelection();if(E&&E.rangeCount!==0){b=E.anchorNode;var O=E.anchorOffset,D=E.focusNode;E=E.focusOffset;try{b.nodeType,D.nodeType}catch{b=null;break e}var q=0,se=-1,ge=-1,Re=0,tt=0,rt=d,Ze=null;t:for(;;){for(var vt;rt!==b||O!==0&&rt.nodeType!==3||(se=q+O),rt!==D||E!==0&&rt.nodeType!==3||(ge=q+E),rt.nodeType===3&&(q+=rt.nodeValue.length),(vt=rt.firstChild)!==null;)Ze=rt,rt=vt;for(;;){if(rt===d)break t;if(Ze===b&&++Re===O&&(se=q),Ze===D&&++tt===E&&(ge=q),(vt=rt.nextSibling)!==null)break;rt=Ze,Ze=rt.parentNode}rt=vt}b=se===-1||ge===-1?null:{start:se,end:ge}}else b=null}b=b||{start:0,end:0}}else b=null;for(tf={focusedElem:d,selectionRange:b},jd=!1,At=f;At!==null;)if(f=At,d=f.child,(f.subtreeFlags&1028)!==0&&d!==null)d.return=f,At=d;else for(;At!==null;){f=At;try{var Tt=f.alternate;if((f.flags&1024)!==0)switch(f.tag){case 0:case 11:case 15:break;case 1:if(Tt!==null){var Lt=Tt.memoizedProps,ia=Tt.memoizedState,we=f.stateNode,ve=we.getSnapshotBeforeUpdate(f.elementType===f.type?Lt:Lo(f.type,Lt),ia);we.__reactInternalSnapshotBeforeUpdate=ve}break;case 3:var Ae=f.stateNode.containerInfo;Ae.nodeType===1?Ae.textContent="":Ae.nodeType===9&&Ae.documentElement&&Ae.removeChild(Ae.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(ft){Vr(f,f.return,ft)}if(d=f.sibling,d!==null){d.return=f.return,At=d;break}At=f.return}return Tt=M5,M5=!1,Tt}function g0(d,f,b){var E=f.updateQueue;if(E=E!==null?E.lastEffect:null,E!==null){var O=E=E.next;do{if((O.tag&d)===d){var D=O.destroy;O.destroy=void 0,D!==void 0&&_S(f,b,D)}O=O.next}while(O!==E)}}function db(d,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var b=f=f.next;do{if((b.tag&d)===d){var E=b.create;b.destroy=E()}b=b.next}while(b!==f)}}function CS(d){var f=d.ref;if(f!==null){var b=d.stateNode;switch(d.tag){case 5:d=b;break;default:d=b}typeof f=="function"?f(d):f.current=d}}function L5(d){var f=d.alternate;f!==null&&(d.alternate=null,L5(f)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(f=d.stateNode,f!==null&&(delete f[oi],delete f[zi],delete f[_c],delete f[nb],delete f[ma])),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function $5(d){return d.tag===5||d.tag===3||d.tag===4}function F5(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||$5(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function TS(d,f,b){var E=d.tag;if(E===5||E===6)d=d.stateNode,f?b.nodeType===8?b.parentNode.insertBefore(d,f):b.insertBefore(d,f):(b.nodeType===8?(f=b.parentNode,f.insertBefore(d,b)):(f=b,f.appendChild(d)),b=b._reactRootContainer,b!=null||f.onclick!==null||(f.onclick=$d));else if(E!==4&&(d=d.child,d!==null))for(TS(d,f,b),d=d.sibling;d!==null;)TS(d,f,b),d=d.sibling}function OS(d,f,b){var E=d.tag;if(E===5||E===6)d=d.stateNode,f?b.insertBefore(d,f):b.appendChild(d);else if(E!==4&&(d=d.child,d!==null))for(OS(d,f,b),d=d.sibling;d!==null;)OS(d,f,b),d=d.sibling}var os=null,$o=!1;function Xd(d,f,b){for(b=b.child;b!==null;)U5(d,f,b),b=b.sibling}function U5(d,f,b){if(ca&&typeof ca.onCommitFiberUnmount=="function")try{ca.onCommitFiberUnmount(la,b)}catch{}switch(b.tag){case 5:ws||Sp(b,f);case 6:var E=os,O=$o;os=null,Xd(d,f,b),os=E,$o=O,os!==null&&($o?(d=os,b=b.stateNode,d.nodeType===8?d.parentNode.removeChild(b):d.removeChild(b)):os.removeChild(b.stateNode));break;case 18:os!==null&&($o?(d=os,b=b.stateNode,d.nodeType===8?Un(d.parentNode,b):d.nodeType===1&&Un(d,b),yl(d)):Un(os,b.stateNode));break;case 4:E=os,O=$o,os=b.stateNode.containerInfo,$o=!0,Xd(d,f,b),os=E,$o=O;break;case 0:case 11:case 14:case 15:if(!ws&&(E=b.updateQueue,E!==null&&(E=E.lastEffect,E!==null))){O=E=E.next;do{var D=O,q=D.destroy;D=D.tag,q!==void 0&&((D&2)!==0||(D&4)!==0)&&_S(b,f,q),O=O.next}while(O!==E)}Xd(d,f,b);break;case 1:if(!ws&&(Sp(b,f),E=b.stateNode,typeof E.componentWillUnmount=="function"))try{E.props=b.memoizedProps,E.state=b.memoizedState,E.componentWillUnmount()}catch(se){Vr(b,f,se)}Xd(d,f,b);break;case 21:Xd(d,f,b);break;case 22:b.mode&1?(ws=(E=ws)||b.memoizedState!==null,Xd(d,f,b),ws=E):Xd(d,f,b);break;default:Xd(d,f,b)}}function B5(d){var f=d.updateQueue;if(f!==null){d.updateQueue=null;var b=d.stateNode;b===null&&(b=d.stateNode=new EY),f.forEach(function(E){var O=IY.bind(null,d,E);b.has(E)||(b.add(E),E.then(O,O))})}}function Fo(d,f){var b=f.deletions;if(b!==null)for(var E=0;E<b.length;E++){var O=b[E];try{var D=d,q=f,se=q;e:for(;se!==null;){switch(se.tag){case 5:os=se.stateNode,$o=!1;break e;case 3:os=se.stateNode.containerInfo,$o=!0;break e;case 4:os=se.stateNode.containerInfo,$o=!0;break e}se=se.return}if(os===null)throw Error(n(160));U5(D,q,O),os=null,$o=!1;var ge=O.alternate;ge!==null&&(ge.return=null),O.return=null}catch(Re){Vr(O,f,Re)}}if(f.subtreeFlags&12854)for(f=f.child;f!==null;)G5(f,d),f=f.sibling}function G5(d,f){var b=d.alternate,E=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:if(Fo(f,d),Dl(d),E&4){try{g0(3,d,d.return),db(3,d)}catch(Lt){Vr(d,d.return,Lt)}try{g0(5,d,d.return)}catch(Lt){Vr(d,d.return,Lt)}}break;case 1:Fo(f,d),Dl(d),E&512&&b!==null&&Sp(b,b.return);break;case 5:if(Fo(f,d),Dl(d),E&512&&b!==null&&Sp(b,b.return),d.flags&32){var O=d.stateNode;try{an(O,"")}catch(Lt){Vr(d,d.return,Lt)}}if(E&4&&(O=d.stateNode,O!=null)){var D=d.memoizedProps,q=b!==null?b.memoizedProps:D,se=d.type,ge=d.updateQueue;if(d.updateQueue=null,ge!==null)try{se==="input"&&D.type==="radio"&&D.name!=null&&te(O,D),yt(se,q);var Re=yt(se,D);for(q=0;q<ge.length;q+=2){var tt=ge[q],rt=ge[q+1];tt==="style"?Tn(O,rt):tt==="dangerouslySetInnerHTML"?It(O,rt):tt==="children"?an(O,rt):C(O,tt,rt,Re)}switch(se){case"input":z(O,D);break;case"textarea":St(O,D);break;case"select":var Ze=O._wrapperState.wasMultiple;O._wrapperState.wasMultiple=!!D.multiple;var vt=D.value;vt!=null?et(O,!!D.multiple,vt,!1):Ze!==!!D.multiple&&(D.defaultValue!=null?et(O,!!D.multiple,D.defaultValue,!0):et(O,!!D.multiple,D.multiple?[]:"",!1))}O[zi]=D}catch(Lt){Vr(d,d.return,Lt)}}break;case 6:if(Fo(f,d),Dl(d),E&4){if(d.stateNode===null)throw Error(n(162));O=d.stateNode,D=d.memoizedProps;try{O.nodeValue=D}catch(Lt){Vr(d,d.return,Lt)}}break;case 3:if(Fo(f,d),Dl(d),E&4&&b!==null&&b.memoizedState.isDehydrated)try{yl(f.containerInfo)}catch(Lt){Vr(d,d.return,Lt)}break;case 4:Fo(f,d),Dl(d);break;case 13:Fo(f,d),Dl(d),O=d.child,O.flags&8192&&(D=O.memoizedState!==null,O.stateNode.isHidden=D,!D||O.alternate!==null&&O.alternate.memoizedState!==null||(IS=Kt())),E&4&&B5(d);break;case 22:if(tt=b!==null&&b.memoizedState!==null,d.mode&1?(ws=(Re=ws)||tt,Fo(f,d),ws=Re):Fo(f,d),Dl(d),E&8192){if(Re=d.memoizedState!==null,(d.stateNode.isHidden=Re)&&!tt&&(d.mode&1)!==0)for(At=d,tt=d.child;tt!==null;){for(rt=At=tt;At!==null;){switch(Ze=At,vt=Ze.child,Ze.tag){case 0:case 11:case 14:case 15:g0(4,Ze,Ze.return);break;case 1:Sp(Ze,Ze.return);var Tt=Ze.stateNode;if(typeof Tt.componentWillUnmount=="function"){E=Ze,b=Ze.return;try{f=E,Tt.props=f.memoizedProps,Tt.state=f.memoizedState,Tt.componentWillUnmount()}catch(Lt){Vr(E,b,Lt)}}break;case 5:Sp(Ze,Ze.return);break;case 22:if(Ze.memoizedState!==null){z5(rt);continue}}vt!==null?(vt.return=Ze,At=vt):z5(rt)}tt=tt.sibling}e:for(tt=null,rt=d;;){if(rt.tag===5){if(tt===null){tt=rt;try{O=rt.stateNode,Re?(D=O.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none"):(se=rt.stateNode,ge=rt.memoizedProps.style,q=ge!=null&&ge.hasOwnProperty("display")?ge.display:null,se.style.display=qt("display",q))}catch(Lt){Vr(d,d.return,Lt)}}}else if(rt.tag===6){if(tt===null)try{rt.stateNode.nodeValue=Re?"":rt.memoizedProps}catch(Lt){Vr(d,d.return,Lt)}}else if((rt.tag!==22&&rt.tag!==23||rt.memoizedState===null||rt===d)&&rt.child!==null){rt.child.return=rt,rt=rt.child;continue}if(rt===d)break e;for(;rt.sibling===null;){if(rt.return===null||rt.return===d)break e;tt===rt&&(tt=null),rt=rt.return}tt===rt&&(tt=null),rt.sibling.return=rt.return,rt=rt.sibling}}break;case 19:Fo(f,d),Dl(d),E&4&&B5(d);break;case 21:break;default:Fo(f,d),Dl(d)}}function Dl(d){var f=d.flags;if(f&2){try{e:{for(var b=d.return;b!==null;){if($5(b)){var E=b;break e}b=b.return}throw Error(n(160))}switch(E.tag){case 5:var O=E.stateNode;E.flags&32&&(an(O,""),E.flags&=-33);var D=F5(d);OS(d,D,O);break;case 3:case 4:var q=E.stateNode.containerInfo,se=F5(d);TS(d,se,q);break;default:throw Error(n(161))}}catch(ge){Vr(d,d.return,ge)}d.flags&=-3}f&4096&&(d.flags&=-4097)}function wY(d,f,b){At=d,H5(d)}function H5(d,f,b){for(var E=(d.mode&1)!==0;At!==null;){var O=At,D=O.child;if(O.tag===22&&E){var q=O.memoizedState!==null||cb;if(!q){var se=O.alternate,ge=se!==null&&se.memoizedState!==null||ws;se=cb;var Re=ws;if(cb=q,(ws=ge)&&!Re)for(At=O;At!==null;)q=At,ge=q.child,q.tag===22&&q.memoizedState!==null?q5(O):ge!==null?(ge.return=q,At=ge):q5(O);for(;D!==null;)At=D,H5(D),D=D.sibling;At=O,cb=se,ws=Re}K5(d)}else(O.subtreeFlags&8772)!==0&&D!==null?(D.return=O,At=D):K5(d)}}function K5(d){for(;At!==null;){var f=At;if((f.flags&8772)!==0){var b=f.alternate;try{if((f.flags&8772)!==0)switch(f.tag){case 0:case 11:case 15:ws||db(5,f);break;case 1:var E=f.stateNode;if(f.flags&4&&!ws)if(b===null)E.componentDidMount();else{var O=f.elementType===f.type?b.memoizedProps:Lo(f.type,b.memoizedProps);E.componentDidUpdate(O,b.memoizedState,E.__reactInternalSnapshotBeforeUpdate)}var D=f.updateQueue;D!==null&&Qd(f,D,E);break;case 3:var q=f.updateQueue;if(q!==null){if(b=null,f.child!==null)switch(f.child.tag){case 5:b=f.child.stateNode;break;case 1:b=f.child.stateNode}Qd(f,q,b)}break;case 5:var se=f.stateNode;if(b===null&&f.flags&4){b=se;var ge=f.memoizedProps;switch(f.type){case"button":case"input":case"select":case"textarea":ge.autoFocus&&b.focus();break;case"img":ge.src&&(b.src=ge.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(f.memoizedState===null){var Re=f.alternate;if(Re!==null){var tt=Re.memoizedState;if(tt!==null){var rt=tt.dehydrated;rt!==null&&yl(rt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}ws||f.flags&512&&CS(f)}catch(Ze){Vr(f,f.return,Ze)}}if(f===d){At=null;break}if(b=f.sibling,b!==null){b.return=f.return,At=b;break}At=f.return}}function z5(d){for(;At!==null;){var f=At;if(f===d){At=null;break}var b=f.sibling;if(b!==null){b.return=f.return,At=b;break}At=f.return}}function q5(d){for(;At!==null;){var f=At;try{switch(f.tag){case 0:case 11:case 15:var b=f.return;try{db(4,f)}catch(ge){Vr(f,b,ge)}break;case 1:var E=f.stateNode;if(typeof E.componentDidMount=="function"){var O=f.return;try{E.componentDidMount()}catch(ge){Vr(f,O,ge)}}var D=f.return;try{CS(f)}catch(ge){Vr(f,D,ge)}break;case 5:var q=f.return;try{CS(f)}catch(ge){Vr(f,q,ge)}}}catch(ge){Vr(f,f.return,ge)}if(f===d){At=null;break}var se=f.sibling;if(se!==null){se.return=f.return,At=se;break}At=f.return}}var AY=Math.ceil,ub=_.ReactCurrentDispatcher,RS=_.ReactCurrentOwner,to=_.ReactCurrentBatchConfig,Gn=0,qa=null,ha=null,ls=0,ki=0,Ep=qi(0),Ca=0,x0=null,uf=0,fb=0,kS=0,b0=null,gi=null,IS=0,jp=1/0,Mc=null,pb=!1,DS=null,Jd=null,mb=!1,Zd=null,hb=0,y0=0,PS=null,gb=-1,xb=0;function Ws(){return(Gn&6)!==0?Kt():gb!==-1?gb:gb=Kt()}function eu(d){return(d.mode&1)===0?1:(Gn&2)!==0&&ls!==0?ls&-ls:uS.transition!==null?(xb===0&&(xb=xl()),xb):(d=wn,d!==0||(d=window.event,d=d===void 0?16:vl(d.type)),d)}function Uo(d,f,b,E){if(50<y0)throw y0=0,PS=null,Error(n(185));cr(d,b,E),((Gn&2)===0||d!==qa)&&(d===qa&&((Gn&2)===0&&(fb|=b),Ca===4&&tu(d,ls)),xi(d,E),b===1&&Gn===0&&(f.mode&1)===0&&(jp=Kt()+500,gp&&Io()))}function xi(d,f){var b=d.callbackNode;ua(d,f);var E=ai(d,d===qa?ls:0);if(E===0)b!==null&&Fn(b),d.callbackNode=null,d.callbackPriority=0;else if(f=E&-E,d.callbackPriority!==f){if(b!=null&&Fn(b),f===1)d.tag===0?Hd(W5.bind(null,d)):Gd(W5.bind(null,d)),tb(function(){(Gn&6)===0&&Io()}),b=null;else{switch(ra(E)){case 1:b=hr;break;case 4:b=gr;break;case 16:b=Ps;break;case 536870912:b=Gr;break;default:b=Ps}b=nI(b,V5.bind(null,d))}d.callbackPriority=f,d.callbackNode=b}}function V5(d,f){if(gb=-1,xb=0,(Gn&6)!==0)throw Error(n(327));var b=d.callbackNode;if(wp()&&d.callbackNode!==b)return null;var E=ai(d,d===qa?ls:0);if(E===0)return null;if((E&30)!==0||(E&d.expiredLanes)!==0||f)f=bb(d,E);else{f=E;var O=Gn;Gn|=2;var D=Q5();(qa!==d||ls!==f)&&(Mc=null,jp=Kt()+500,pf(d,f));do try{TY();break}catch(se){Y5(d,se)}while(!0);Rl(),ub.current=D,Gn=O,ha!==null?f=0:(qa=null,ls=0,f=Ca)}if(f!==0){if(f===2&&(O=Hr(d),O!==0&&(E=O,f=MS(d,O))),f===1)throw b=x0,pf(d,0),tu(d,E),xi(d,Kt()),b;if(f===6)tu(d,E);else{if(O=d.current.alternate,(E&30)===0&&!_Y(O)&&(f=bb(d,E),f===2&&(D=Hr(d),D!==0&&(E=D,f=MS(d,D))),f===1))throw b=x0,pf(d,0),tu(d,E),xi(d,Kt()),b;switch(d.finishedWork=O,d.finishedLanes=E,f){case 0:case 1:throw Error(n(345));case 2:mf(d,gi,Mc);break;case 3:if(tu(d,E),(E&130023424)===E&&(f=IS+500-Kt(),10<f)){if(ai(d,0)!==0)break;if(O=d.suspendedLanes,(O&E)!==E){Ws(),d.pingedLanes|=d.suspendedLanes&O;break}d.timeoutHandle=Hs(mf.bind(null,d,gi,Mc),f);break}mf(d,gi,Mc);break;case 4:if(tu(d,E),(E&4194240)===E)break;for(f=d.eventTimes,O=-1;0<E;){var q=31-ta(E);D=1<<q,q=f[q],q>O&&(O=q),E&=~D}if(E=O,E=Kt()-E,E=(120>E?120:480>E?480:1080>E?1080:1920>E?1920:3e3>E?3e3:4320>E?4320:1960*AY(E/1960))-E,10<E){d.timeoutHandle=Hs(mf.bind(null,d,gi,Mc),E);break}mf(d,gi,Mc);break;case 5:mf(d,gi,Mc);break;default:throw Error(n(329))}}}return xi(d,Kt()),d.callbackNode===b?V5.bind(null,d):null}function MS(d,f){var b=b0;return d.current.memoizedState.isDehydrated&&(pf(d,f).flags|=256),d=bb(d,f),d!==2&&(f=gi,gi=b,f!==null&&LS(f)),d}function LS(d){gi===null?gi=d:gi.push.apply(gi,d)}function _Y(d){for(var f=d;;){if(f.flags&16384){var b=f.updateQueue;if(b!==null&&(b=b.stores,b!==null))for(var E=0;E<b.length;E++){var O=b[E],D=O.getSnapshot;O=O.value;try{if(!Ci(D(),O))return!1}catch{return!1}}}if(b=f.child,f.subtreeFlags&16384&&b!==null)b.return=f,f=b;else{if(f===d)break;for(;f.sibling===null;){if(f.return===null||f.return===d)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function tu(d,f){for(f&=~kS,f&=~fb,d.suspendedLanes|=f,d.pingedLanes&=~f,d=d.expirationTimes;0<f;){var b=31-ta(f),E=1<<b;d[b]=-1,f&=~E}}function W5(d){if((Gn&6)!==0)throw Error(n(327));wp();var f=ai(d,0);if((f&1)===0)return xi(d,Kt()),null;var b=bb(d,f);if(d.tag!==0&&b===2){var E=Hr(d);E!==0&&(f=E,b=MS(d,E))}if(b===1)throw b=x0,pf(d,0),tu(d,f),xi(d,Kt()),b;if(b===6)throw Error(n(345));return d.finishedWork=d.current.alternate,d.finishedLanes=f,mf(d,gi,Mc),xi(d,Kt()),null}function $S(d,f){var b=Gn;Gn|=1;try{return d(f)}finally{Gn=b,Gn===0&&(jp=Kt()+500,gp&&Io())}}function ff(d){Zd!==null&&Zd.tag===0&&(Gn&6)===0&&wp();var f=Gn;Gn|=1;var b=to.transition,E=wn;try{if(to.transition=null,wn=1,d)return d()}finally{wn=E,to.transition=b,Gn=f,(Gn&6)===0&&Io()}}function FS(){ki=Ep.current,Bn(Ep)}function pf(d,f){d.finishedWork=null,d.finishedLanes=0;var b=d.timeoutHandle;if(b!==-1&&(d.timeoutHandle=-1,o0(b)),ha!==null)for(b=ha.return;b!==null;){var E=b;switch(Kd(E),E.tag){case 1:E=E.type.childContextTypes,E!=null&&wa();break;case 3:de(),Bn(ja),Bn(Rr),$e();break;case 5:Oe(E);break;case 4:de();break;case 13:Bn(je);break;case 19:Bn(je);break;case 10:Wd(E.type._context);break;case 22:case 23:FS()}b=b.return}if(qa=d,ha=d=nu(d.current,null),ls=ki=f,Ca=0,x0=null,kS=fb=uf=0,gi=b0=null,kl!==null){for(f=0;f<kl.length;f++)if(b=kl[f],E=b.interleaved,E!==null){b.interleaved=null;var O=E.next,D=b.pending;if(D!==null){var q=D.next;D.next=O,E.next=q}b.pending=E}kl=null}return d}function Y5(d,f){do{var b=ha;try{if(Rl(),ke.current=sb,Ln){for(var E=Ct.memoizedState;E!==null;){var O=E.queue;O!==null&&(O.pending=null),E=E.next}Ln=!1}if(Pn=0,br=Kn=Ct=null,qr=!1,qs=0,RS.current=null,b===null||b.return===null){Ca=1,x0=f,ha=null;break}e:{var D=d,q=b.return,se=b,ge=f;if(f=ls,se.flags|=32768,ge!==null&&typeof ge=="object"&&typeof ge.then=="function"){var Re=ge,tt=se,rt=tt.tag;if((tt.mode&1)===0&&(rt===0||rt===11||rt===15)){var Ze=tt.alternate;Ze?(tt.updateQueue=Ze.updateQueue,tt.memoizedState=Ze.memoizedState,tt.lanes=Ze.lanes):(tt.updateQueue=null,tt.memoizedState=null)}var vt=v5(q);if(vt!==null){vt.flags&=-257,N5(vt,q,se,D,f),vt.mode&1&&y5(D,Re,f),f=vt,ge=Re;var Tt=f.updateQueue;if(Tt===null){var Lt=new Set;Lt.add(ge),f.updateQueue=Lt}else Tt.add(ge);break e}else{if((f&1)===0){y5(D,Re,f),US();break e}ge=Error(n(426))}}else if(vn&&se.mode&1){var ia=v5(q);if(ia!==null){(ia.flags&65536)===0&&(ia.flags|=256),N5(ia,q,se,D,f),yp(Np(ge,se));break e}}D=ge=Np(ge,se),Ca!==4&&(Ca=2),b0===null?b0=[D]:b0.push(D),D=q;do{switch(D.tag){case 3:D.flags|=65536,f&=-f,D.lanes|=f;var we=x5(D,ge,f);Il(D,we);break e;case 1:se=ge;var ve=D.type,Ae=D.stateNode;if((D.flags&128)===0&&(typeof ve.getDerivedStateFromError=="function"||Ae!==null&&typeof Ae.componentDidCatch=="function"&&(Jd===null||!Jd.has(Ae)))){D.flags|=65536,f&=-f,D.lanes|=f;var ft=b5(D,se,f);Il(D,ft);break e}}D=D.return}while(D!==null)}J5(b)}catch(Gt){f=Gt,ha===b&&b!==null&&(ha=b=b.return);continue}break}while(!0)}function Q5(){var d=ub.current;return ub.current=sb,d===null?sb:d}function US(){(Ca===0||Ca===3||Ca===2)&&(Ca=4),qa===null||(uf&268435455)===0&&(fb&268435455)===0||tu(qa,ls)}function bb(d,f){var b=Gn;Gn|=2;var E=Q5();(qa!==d||ls!==f)&&(Mc=null,pf(d,f));do try{CY();break}catch(O){Y5(d,O)}while(!0);if(Rl(),Gn=b,ub.current=E,ha!==null)throw Error(n(261));return qa=null,ls=0,Ca}function CY(){for(;ha!==null;)X5(ha)}function TY(){for(;ha!==null&&!Br();)X5(ha)}function X5(d){var f=tI(d.alternate,d,ki);d.memoizedProps=d.pendingProps,f===null?J5(d):ha=f,RS.current=null}function J5(d){var f=d;do{var b=f.alternate;if(d=f.return,(f.flags&32768)===0){if(b=NY(b,f,ki),b!==null){ha=b;return}}else{if(b=SY(b,f),b!==null){b.flags&=32767,ha=b;return}if(d!==null)d.flags|=32768,d.subtreeFlags=0,d.deletions=null;else{Ca=6,ha=null;return}}if(f=f.sibling,f!==null){ha=f;return}ha=f=d}while(f!==null);Ca===0&&(Ca=5)}function mf(d,f,b){var E=wn,O=to.transition;try{to.transition=null,wn=1,OY(d,f,b,E)}finally{to.transition=O,wn=E}return null}function OY(d,f,b,E){do wp();while(Zd!==null);if((Gn&6)!==0)throw Error(n(327));b=d.finishedWork;var O=d.finishedLanes;if(b===null)return null;if(d.finishedWork=null,d.finishedLanes=0,b===d.current)throw Error(n(177));d.callbackNode=null,d.callbackPriority=0;var D=b.lanes|b.childLanes;if(Bi(d,D),d===qa&&(ha=qa=null,ls=0),(b.subtreeFlags&2064)===0&&(b.flags&2064)===0||mb||(mb=!0,nI(Ps,function(){return wp(),null})),D=(b.flags&15990)!==0,(b.subtreeFlags&15990)!==0||D){D=to.transition,to.transition=null;var q=wn;wn=1;var se=Gn;Gn|=4,RS.current=null,jY(d,b),G5(b,d),Rd(tf),jd=!!Cl,tf=Cl=null,d.current=b,wY(b),Jt(),Gn=se,wn=q,to.transition=D}else d.current=b;if(mb&&(mb=!1,Zd=d,hb=O),D=d.pendingLanes,D===0&&(Jd=null),Ga(b.stateNode),xi(d,Kt()),f!==null)for(E=d.onRecoverableError,b=0;b<f.length;b++)O=f[b],E(O.value,{componentStack:O.stack,digest:O.digest});if(pb)throw pb=!1,d=DS,DS=null,d;return(hb&1)!==0&&d.tag!==0&&wp(),D=d.pendingLanes,(D&1)!==0?d===PS?y0++:(y0=0,PS=d):y0=0,Io(),null}function wp(){if(Zd!==null){var d=ra(hb),f=to.transition,b=wn;try{if(to.transition=null,wn=16>d?16:d,Zd===null)var E=!1;else{if(d=Zd,Zd=null,hb=0,(Gn&6)!==0)throw Error(n(331));var O=Gn;for(Gn|=4,At=d.current;At!==null;){var D=At,q=D.child;if((At.flags&16)!==0){var se=D.deletions;if(se!==null){for(var ge=0;ge<se.length;ge++){var Re=se[ge];for(At=Re;At!==null;){var tt=At;switch(tt.tag){case 0:case 11:case 15:g0(8,tt,D)}var rt=tt.child;if(rt!==null)rt.return=tt,At=rt;else for(;At!==null;){tt=At;var Ze=tt.sibling,vt=tt.return;if(L5(tt),tt===Re){At=null;break}if(Ze!==null){Ze.return=vt,At=Ze;break}At=vt}}}var Tt=D.alternate;if(Tt!==null){var Lt=Tt.child;if(Lt!==null){Tt.child=null;do{var ia=Lt.sibling;Lt.sibling=null,Lt=ia}while(Lt!==null)}}At=D}}if((D.subtreeFlags&2064)!==0&&q!==null)q.return=D,At=q;else e:for(;At!==null;){if(D=At,(D.flags&2048)!==0)switch(D.tag){case 0:case 11:case 15:g0(9,D,D.return)}var we=D.sibling;if(we!==null){we.return=D.return,At=we;break e}At=D.return}}var ve=d.current;for(At=ve;At!==null;){q=At;var Ae=q.child;if((q.subtreeFlags&2064)!==0&&Ae!==null)Ae.return=q,At=Ae;else e:for(q=ve;At!==null;){if(se=At,(se.flags&2048)!==0)try{switch(se.tag){case 0:case 11:case 15:db(9,se)}}catch(Gt){Vr(se,se.return,Gt)}if(se===q){At=null;break e}var ft=se.sibling;if(ft!==null){ft.return=se.return,At=ft;break e}At=se.return}}if(Gn=O,Io(),ca&&typeof ca.onPostCommitFiberRoot=="function")try{ca.onPostCommitFiberRoot(la,d)}catch{}E=!0}return E}finally{wn=b,to.transition=f}}return!1}function Z5(d,f,b){f=Np(b,f),f=x5(d,f,1),d=Xi(d,f,1),f=Ws(),d!==null&&(cr(d,1,f),xi(d,f))}function Vr(d,f,b){if(d.tag===3)Z5(d,d,b);else for(;f!==null;){if(f.tag===3){Z5(f,d,b);break}else if(f.tag===1){var E=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(Jd===null||!Jd.has(E))){d=Np(b,d),d=b5(f,d,1),f=Xi(f,d,1),d=Ws(),f!==null&&(cr(f,1,d),xi(f,d));break}}f=f.return}}function RY(d,f,b){var E=d.pingCache;E!==null&&E.delete(f),f=Ws(),d.pingedLanes|=d.suspendedLanes&b,qa===d&&(ls&b)===b&&(Ca===4||Ca===3&&(ls&130023424)===ls&&500>Kt()-IS?pf(d,0):kS|=b),xi(d,f)}function eI(d,f){f===0&&((d.mode&1)===0?f=1:(f=da,da<<=1,(da&130023424)===0&&(da=4194304)));var b=Ws();d=zs(d,f),d!==null&&(cr(d,f,b),xi(d,b))}function kY(d){var f=d.memoizedState,b=0;f!==null&&(b=f.retryLane),eI(d,b)}function IY(d,f){var b=0;switch(d.tag){case 13:var E=d.stateNode,O=d.memoizedState;O!==null&&(b=O.retryLane);break;case 19:E=d.stateNode;break;default:throw Error(n(314))}E!==null&&E.delete(f),eI(d,b)}var tI;tI=function(d,f,b){if(d!==null)if(d.memoizedProps!==f.pendingProps||ja.current)hi=!0;else{if((d.lanes&b)===0&&(f.flags&128)===0)return hi=!1,vY(d,f,b);hi=(d.flags&131072)!==0}else hi=!1,vn&&(f.flags&1048576)!==0&&af(f,Do,f.index);switch(f.lanes=0,f.tag){case 2:var E=f.type;lb(d,f),d=f.pendingProps;var O=Ro(f,Rr.current);Mo(f,b),O=fr(null,f,E,d,O,b);var D=Dc();return f.flags|=1,typeof O=="object"&&O!==null&&typeof O.render=="function"&&O.$$typeof===void 0?(f.tag=1,f.memoizedState=null,f.updateQueue=null,xs(E)?(D=!0,Bd(f)):D=!1,f.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,Ic(f),O.updater=ib,f.stateNode=O,O._reactInternals=f,xS(f,E,d,b),f=NS(null,f,E,!0,D,b)):(f.tag=0,vn&&D&&Tl(f),Vs(null,f,O,b),f=f.child),f;case 16:E=f.elementType;e:{switch(lb(d,f),d=f.pendingProps,O=E._init,E=O(E._payload),f.type=E,O=f.tag=PY(E),d=Lo(E,d),O){case 0:f=vS(null,f,E,d,b);break e;case 1:f=_5(null,f,E,d,b);break e;case 11:f=S5(null,f,E,d,b);break e;case 14:f=E5(null,f,E,Lo(E.type,d),b);break e}throw Error(n(306,E,""))}return f;case 0:return E=f.type,O=f.pendingProps,O=f.elementType===E?O:Lo(E,O),vS(d,f,E,O,b);case 1:return E=f.type,O=f.pendingProps,O=f.elementType===E?O:Lo(E,O),_5(d,f,E,O,b);case 3:e:{if(C5(f),d===null)throw Error(n(387));E=f.pendingProps,D=f.memoizedState,O=D.element,Oi(d,f),of(f,E,null,b);var q=f.memoizedState;if(E=q.element,D.isDehydrated)if(D={element:E,isDehydrated:!1,cache:q.cache,pendingSuspenseBoundaries:q.pendingSuspenseBoundaries,transitions:q.transitions},f.updateQueue.baseState=D,f.memoizedState=D,f.flags&256){O=Np(Error(n(423)),f),f=T5(d,f,E,b,O);break e}else if(E!==O){O=Np(Error(n(424)),f),f=T5(d,f,E,b,O);break e}else for(vs=er(f.stateNode.containerInfo.firstChild),ys=f,vn=!0,Ns=null,b=zd(f,null,E,b),f.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(Yi(),E===O){f=Pc(d,f,b);break e}Vs(d,f,E,b)}f=f.child}return f;case 5:return re(f),d===null&&Ol(f),E=f.type,O=f.pendingProps,D=d!==null?d.memoizedProps:null,q=O.children,i0(E,O)?q=null:D!==null&&i0(E,D)&&(f.flags|=32),A5(d,f),Vs(d,f,q,b),f.child;case 6:return d===null&&Ol(f),null;case 13:return O5(d,f,b);case 4:return Y(f,f.stateNode.containerInfo),E=f.pendingProps,d===null?f.child=Ka(f,null,E,b):Vs(d,f,E,b),f.child;case 11:return E=f.type,O=f.pendingProps,O=f.elementType===E?O:Lo(E,O),S5(d,f,E,O,b);case 7:return Vs(d,f,f.pendingProps,b),f.child;case 8:return Vs(d,f,f.pendingProps.children,b),f.child;case 12:return Vs(d,f,f.pendingProps.children,b),f.child;case 10:e:{if(E=f.type._context,O=f.pendingProps,D=f.memoizedProps,q=O.value,Nn(qd,E._currentValue),E._currentValue=q,D!==null)if(Ci(D.value,q)){if(D.children===O.children&&!ja.current){f=Pc(d,f,b);break e}}else for(D=f.child,D!==null&&(D.return=f);D!==null;){var se=D.dependencies;if(se!==null){q=D.child;for(var ge=se.firstContext;ge!==null;){if(ge.context===E){if(D.tag===1){ge=Ri(-1,b&-b),ge.tag=2;var Re=D.updateQueue;if(Re!==null){Re=Re.shared;var tt=Re.pending;tt===null?ge.next=ge:(ge.next=tt.next,tt.next=ge),Re.pending=ge}}D.lanes|=b,ge=D.alternate,ge!==null&&(ge.lanes|=b),Yn(D.return,b,f),se.lanes|=b;break}ge=ge.next}}else if(D.tag===10)q=D.type===f.type?null:D.child;else if(D.tag===18){if(q=D.return,q===null)throw Error(n(341));q.lanes|=b,se=q.alternate,se!==null&&(se.lanes|=b),Yn(q,b,f),q=D.sibling}else q=D.child;if(q!==null)q.return=D;else for(q=D;q!==null;){if(q===f){q=null;break}if(D=q.sibling,D!==null){D.return=q.return,q=D;break}q=q.return}D=q}Vs(d,f,O.children,b),f=f.child}return f;case 9:return O=f.type,E=f.pendingProps.children,Mo(f,b),O=_a(O),E=E(O),f.flags|=1,Vs(d,f,E,b),f.child;case 14:return E=f.type,O=Lo(E,f.pendingProps),O=Lo(E.type,O),E5(d,f,E,O,b);case 15:return j5(d,f,f.type,f.pendingProps,b);case 17:return E=f.type,O=f.pendingProps,O=f.elementType===E?O:Lo(E,O),lb(d,f),f.tag=1,xs(E)?(d=!0,Bd(f)):d=!1,Mo(f,b),h5(f,E,O),xS(f,E,O,b),NS(null,f,E,!0,d,b);case 19:return k5(d,f,b);case 22:return w5(d,f,b)}throw Error(n(156,f.tag))};function nI(d,f){return jr(d,f)}function DY(d,f,b,E){this.tag=d,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function no(d,f,b,E){return new DY(d,f,b,E)}function BS(d){return d=d.prototype,!(!d||!d.isReactComponent)}function PY(d){if(typeof d=="function")return BS(d)?1:0;if(d!=null){if(d=d.$$typeof,d===U)return 11;if(d===G)return 14}return 2}function nu(d,f){var b=d.alternate;return b===null?(b=no(d.tag,f,d.key,d.mode),b.elementType=d.elementType,b.type=d.type,b.stateNode=d.stateNode,b.alternate=d,d.alternate=b):(b.pendingProps=f,b.type=d.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=d.flags&14680064,b.childLanes=d.childLanes,b.lanes=d.lanes,b.child=d.child,b.memoizedProps=d.memoizedProps,b.memoizedState=d.memoizedState,b.updateQueue=d.updateQueue,f=d.dependencies,b.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},b.sibling=d.sibling,b.index=d.index,b.ref=d.ref,b}function yb(d,f,b,E,O,D){var q=2;if(E=d,typeof d=="function")BS(d)&&(q=1);else if(typeof d=="string")q=5;else e:switch(d){case R:return hf(b.children,O,D,f);case M:q=8,O|=8;break;case P:return d=no(12,b,f,O|2),d.elementType=P,d.lanes=D,d;case X:return d=no(13,b,f,O),d.elementType=X,d.lanes=D,d;case I:return d=no(19,b,f,O),d.elementType=I,d.lanes=D,d;case H:return vb(b,O,D,f);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case $:q=10;break e;case w:q=9;break e;case U:q=11;break e;case G:q=14;break e;case L:q=16,E=null;break e}throw Error(n(130,d==null?d:typeof d,""))}return f=no(q,b,f,O),f.elementType=d,f.type=E,f.lanes=D,f}function hf(d,f,b,E){return d=no(7,d,E,f),d.lanes=b,d}function vb(d,f,b,E){return d=no(22,d,E,f),d.elementType=H,d.lanes=b,d.stateNode={isHidden:!1},d}function GS(d,f,b){return d=no(6,d,null,f),d.lanes=b,d}function HS(d,f,b){return f=no(4,d.children!==null?d.children:[],d.key,f),f.lanes=b,f.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},f}function MY(d,f,b,E,O){this.tag=f,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ms(0),this.expirationTimes=Ms(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ms(0),this.identifierPrefix=E,this.onRecoverableError=O,this.mutableSourceEagerHydrationData=null}function KS(d,f,b,E,O,D,q,se,ge){return d=new MY(d,f,b,se,ge),f===1?(f=1,D===!0&&(f|=8)):f=0,D=no(3,null,null,f),d.current=D,D.stateNode=d,D.memoizedState={element:E,isDehydrated:b,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ic(D),d}function LY(d,f,b){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:T,key:E==null?null:""+E,children:d,containerInfo:f,implementation:b}}function rI(d){if(!d)return is;d=d._reactInternals;e:{if(Mn(d)!==d||d.tag!==1)throw Error(n(170));var f=d;do{switch(f.tag){case 3:f=f.stateNode.context;break e;case 1:if(xs(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break e}}f=f.return}while(f!==null);throw Error(n(171))}if(d.tag===1){var b=d.type;if(xs(b))return ko(d,b,f)}return f}function aI(d,f,b,E,O,D,q,se,ge){return d=KS(b,E,!0,d,O,D,q,se,ge),d.context=rI(null),b=d.current,E=Ws(),O=eu(b),D=Ri(E,O),D.callback=f??null,Xi(b,D,O),d.current.lanes=O,cr(d,O,E),xi(d,E),d}function Nb(d,f,b,E){var O=f.current,D=Ws(),q=eu(O);return b=rI(b),f.context===null?f.context=b:f.pendingContext=b,f=Ri(D,q),f.payload={element:d},E=E===void 0?null:E,E!==null&&(f.callback=E),d=Xi(O,f,q),d!==null&&(Uo(d,O,q,D),Ji(d,O,q)),q}function Sb(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 5:return d.child.stateNode;default:return d.child.stateNode}}function sI(d,f){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var b=d.retryLane;d.retryLane=b!==0&&b<f?b:f}}function zS(d,f){sI(d,f),(d=d.alternate)&&sI(d,f)}function $Y(){return null}var iI=typeof reportError=="function"?reportError:function(d){console.error(d)};function qS(d){this._internalRoot=d}Eb.prototype.render=qS.prototype.render=function(d){var f=this._internalRoot;if(f===null)throw Error(n(409));Nb(d,f,null,null)},Eb.prototype.unmount=qS.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var f=d.containerInfo;ff(function(){Nb(null,d,null,null)}),f[_n]=null}};function Eb(d){this._internalRoot=d}Eb.prototype.unstable_scheduleHydration=function(d){if(d){var f=pe();d={blockedOn:null,target:d,priority:f};for(var b=0;b<Vn.length&&f!==0&&f<Vn[b].priority;b++);Vn.splice(b,0,d),b===0&&aa(d)}};function VS(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function jb(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11&&(d.nodeType!==8||d.nodeValue!==" react-mount-point-unstable "))}function oI(){}function FY(d,f,b,E,O){if(O){if(typeof E=="function"){var D=E;E=function(){var Re=Sb(q);D.call(Re)}}var q=aI(f,E,d,0,null,!1,!1,"",oI);return d._reactRootContainer=q,d[_n]=q.current,Zu(d.nodeType===8?d.parentNode:d),ff(),q}for(;O=d.lastChild;)d.removeChild(O);if(typeof E=="function"){var se=E;E=function(){var Re=Sb(ge);se.call(Re)}}var ge=KS(d,0,!1,null,null,!1,!1,"",oI);return d._reactRootContainer=ge,d[_n]=ge.current,Zu(d.nodeType===8?d.parentNode:d),ff(function(){Nb(f,ge,b,E)}),ge}function wb(d,f,b,E,O){var D=b._reactRootContainer;if(D){var q=D;if(typeof O=="function"){var se=O;O=function(){var ge=Sb(q);se.call(ge)}}Nb(f,q,d,O)}else q=FY(b,f,d,O,E);return Sb(q)}Gi=function(d){switch(d.tag){case 3:var f=d.stateNode;if(f.current.memoizedState.isDehydrated){var b=hs(f.pendingLanes);b!==0&&(Ls(f,b|1),xi(f,Kt()),(Gn&6)===0&&(jp=Kt()+500,Io()))}break;case 13:ff(function(){var E=zs(d,1);if(E!==null){var O=Ws();Uo(E,d,1,O)}}),zS(d,1)}},rs=function(d){if(d.tag===13){var f=zs(d,134217728);if(f!==null){var b=Ws();Uo(f,d,134217728,b)}zS(d,134217728)}},Q=function(d){if(d.tag===13){var f=eu(d),b=zs(d,f);if(b!==null){var E=Ws();Uo(b,d,f,E)}zS(d,f)}},pe=function(){return wn},Ge=function(d,f){var b=wn;try{return wn=d,f()}finally{wn=b}},On=function(d,f,b){switch(f){case"input":if(z(d,b),f=b.name,b.type==="radio"&&f!=null){for(b=d;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll("input[name="+JSON.stringify(""+f)+'][type="radio"]'),f=0;f<b.length;f++){var E=b[f];if(E!==d&&E.form===d.form){var O=nf(E);if(!O)throw Error(n(90));oe(E),z(E,O)}}}break;case"textarea":St(d,b);break;case"select":f=b.value,f!=null&&et(d,!!b.multiple,f,!1)}},pn=$S,En=ff;var UY={usingClientEntryPoint:!1,Events:[li,Tc,nf,ze,ht,$S]},v0={findFiberByHostInstance:Cc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},BY={bundleType:v0.bundleType,version:v0.version,rendererPackageName:v0.rendererPackageName,rendererConfig:v0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(d){return d=Dr(d),d===null?null:d.stateNode},findFiberByHostInstance:v0.findFiberByHostInstance||$Y,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ab=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ab.isDisabled&&Ab.supportsFiber)try{la=Ab.inject(BY),ca=Ab}catch{}}return bi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UY,bi.createPortal=function(d,f){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!VS(f))throw Error(n(200));return LY(d,f,null,b)},bi.createRoot=function(d,f){if(!VS(d))throw Error(n(299));var b=!1,E="",O=iI;return f!=null&&(f.unstable_strictMode===!0&&(b=!0),f.identifierPrefix!==void 0&&(E=f.identifierPrefix),f.onRecoverableError!==void 0&&(O=f.onRecoverableError)),f=KS(d,1,!1,null,null,b,!1,E,O),d[_n]=f.current,Zu(d.nodeType===8?d.parentNode:d),new qS(f)},bi.findDOMNode=function(d){if(d==null)return null;if(d.nodeType===1)return d;var f=d._reactInternals;if(f===void 0)throw typeof d.render=="function"?Error(n(188)):(d=Object.keys(d).join(","),Error(n(268,d)));return d=Dr(f),d=d===null?null:d.stateNode,d},bi.flushSync=function(d){return ff(d)},bi.hydrate=function(d,f,b){if(!jb(f))throw Error(n(200));return wb(null,d,f,!0,b)},bi.hydrateRoot=function(d,f,b){if(!VS(d))throw Error(n(405));var E=b!=null&&b.hydratedSources||null,O=!1,D="",q=iI;if(b!=null&&(b.unstable_strictMode===!0&&(O=!0),b.identifierPrefix!==void 0&&(D=b.identifierPrefix),b.onRecoverableError!==void 0&&(q=b.onRecoverableError)),f=aI(f,null,d,1,b??null,O,!1,D,q),d[_n]=f.current,Zu(d),E)for(d=0;d<E.length;d++)b=E[d],O=b._getVersion,O=O(b._source),f.mutableSourceEagerHydrationData==null?f.mutableSourceEagerHydrationData=[b,O]:f.mutableSourceEagerHydrationData.push(b,O);return new Eb(f)},bi.render=function(d,f,b){if(!jb(f))throw Error(n(200));return wb(null,d,f,!1,b)},bi.unmountComponentAtNode=function(d){if(!jb(d))throw Error(n(40));return d._reactRootContainer?(ff(function(){wb(null,null,d,!1,function(){d._reactRootContainer=null,d[_n]=null})}),!0):!1},bi.unstable_batchedUpdates=$S,bi.unstable_renderSubtreeIntoContainer=function(d,f,b,E){if(!jb(b))throw Error(n(200));if(d==null||d._reactInternals===void 0)throw Error(n(38));return wb(d,f,b,!1,E)},bi.version="18.3.1-next-f1338f8080-20240426",bi}var AI;function IU(){if(AI)return QS.exports;AI=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),QS.exports=kQ(),QS.exports}var _I;function IQ(){if(_I)return Tb;_I=1;var e=IU();return Tb.createRoot=e.createRoot,Tb.hydrateRoot=e.hydrateRoot,Tb}var DQ=IQ();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PQ=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),MQ=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),CI=e=>{const t=MQ(e);return t.charAt(0).toUpperCase()+t.slice(1)},DU=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var LQ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Q=h.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...l},c)=>h.createElement("svg",{ref:c,...LQ,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:DU("lucide",s),...l},[...o.map(([u,m])=>h.createElement(u,m)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=(e,t)=>{const n=h.forwardRef(({className:r,...s},i)=>h.createElement($Q,{ref:i,iconNode:t,className:DU(`lucide-${PQ(CI(e))}`,`lucide-${e}`,r),...s}));return n.displayName=CI(e),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FQ=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],vx=Xe("activity",FQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UQ=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],PU=Xe("arrow-down-right",UQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BQ=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Hl=Xe("arrow-left",BQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GQ=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],HQ=Xe("arrow-right-left",GQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KQ=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Cg=Xe("arrow-right",KQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zQ=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],qQ=Xe("arrow-up-down",zQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VQ=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],MU=Xe("arrow-up-right",VQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WQ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]],YQ=Xe("ban",WQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QQ=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],gh=Xe("bell",QQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XQ=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],JQ=Xe("bell-ring",XQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZQ=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],eX=Xe("book-open",ZQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tX=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z",key:"169p4p"}],["path",{d:"m9 10 2 2 4-4",key:"1gnqz4"}]],nX=Xe("bookmark-check",tX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rX=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],aX=Xe("bookmark",rX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sX=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],LU=Xe("bot",sX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iX=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],oX=Xe("box",iX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lX=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],Tg=Xe("brain",lX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cX=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],sm=Xe("building-2",cX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dX=[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]],uR=Xe("calendar-clock",dX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uX=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],fX=Xe("calendar-days",uX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pX=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Zo=Xe("calendar",pX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mX=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],ym=Xe("chart-column",mX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hX=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Uf=Xe("check",hX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gX=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ds=Xe("chevron-down",gX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xX=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],vm=Xe("chevron-left",xX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bX=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ji=Xe("chevron-right",bX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yX=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],id=Xe("chevron-up",yX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ea=Xe("circle-alert",vX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"m12 16 4-4-4-4",key:"1i9zcv"}]],Nm=Xe("circle-arrow-right",NX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SX=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],el=Xe("circle-check-big",SX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Si=Xe("circle-check",EX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]],wX=Xe("circle-dot",jX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],bC=Xe("circle-help",AX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _X=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]],CX=Xe("circle-pause",_X);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],OX=Xe("circle-user",TX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Sm=Xe("circle-x",RX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],IX=Xe("circle",kX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DX=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],fR=Xe("clipboard-check",DX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PX=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],pR=Xe("clipboard-list",PX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16.5 12",key:"1aq6pp"}]],L1=Xe("clock-3",MX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Zl=Xe("clock",LX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $X=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],FX=Xe("copy",$X);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UX=[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]],$U=Xe("cpu",UX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BX=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],gd=Xe("database",BX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GX=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],im=Xe("download",GX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HX=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],es=Xe("external-link",HX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KX=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],yC=Xe("eye-off",KX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zX=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Em=Xe("eye",zX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qX=[["path",{d:"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"142zxg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]],VX=Xe("file-pen-line",qX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WX=[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M4.268 21a2 2 0 0 0 1.727 1H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"ms7g94"}],["path",{d:"m9 18-1.5-1.5",key:"1j6qii"}],["circle",{cx:"5",cy:"14",r:"3",key:"ufru5t"}]],YX=Xe("file-search",WX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QX=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],XX=Xe("file-spreadsheet",QX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JX=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Bf=Xe("file-text",JX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZX=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],jm=Xe("funnel",ZX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eJ=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],tJ=Xe("gauge",eJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nJ=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]],rJ=Xe("git-compare",nJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aJ=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],sJ=Xe("heart",aJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iJ=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],xa=Xe("history",iJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oJ=[["path",{d:"M12 6v4",key:"16clxf"}],["path",{d:"M14 14h-4",key:"esezmu"}],["path",{d:"M14 18h-4",key:"16mqa2"}],["path",{d:"M14 8h-4",key:"z8ypaz"}],["path",{d:"M18 12h2a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-9a2 2 0 0 1 2-2h2",key:"b1k337"}],["path",{d:"M18 22V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v18",key:"16g51d"}]],lJ=Xe("hospital",oJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cJ=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],xh=Xe("house",cJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],wm=Xe("info",dJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uJ=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Am=Xe("layers",uJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fJ=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Nx=Xe("layout-dashboard",fJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pJ=[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]],mJ=Xe("layout-template",pJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hJ=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],FU=Xe("link-2",hJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gJ=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],vC=Xe("link",gJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xJ=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],ju=Xe("lock",xJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bJ=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],mR=Xe("log-out",bJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yJ=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],vJ=Xe("mail",yJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NJ=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Vy=Xe("map-pin",NJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SJ=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],hR=Xe("menu",SJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EJ=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],vo=Xe("message-square",EJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jJ=[["path",{d:"M5 12h14",key:"1ays0h"}]],wJ=Xe("minus",jJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AJ=[["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["path",{d:"M9.5 8h5",key:"11mslq"}],["path",{d:"M9.5 12H16",key:"ktog6x"}],["path",{d:"M9.5 16H14",key:"p1seyn"}]],_J=Xe("notebook-text",AJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CJ=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],gR=Xe("package",CJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TJ=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],OJ=Xe("palette",TJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RJ=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],kJ=Xe("pen-line",RJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IJ=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]],NC=Xe("phone-call",IJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DJ=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],ti=Xe("phone",DJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PJ=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],UU=Xe("plus",PJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MJ=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],TI=Xe("refresh-cw",MJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LJ=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],$J=Xe("rocket",LJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FJ=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],UJ=Xe("rotate-ccw",FJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BJ=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],xR=Xe("save",BJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GJ=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Sx=Xe("search",GJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HJ=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Og=Xe("send",HJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KJ=[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],BU=Xe("settings-2",KJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zJ=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ex=Xe("settings",zJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qJ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],GU=Xe("shield-alert",qJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VJ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],oc=Xe("shield-check",VJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WJ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],nl=Xe("shield",WJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YJ=[["path",{d:"M18 7V5a1 1 0 0 0-1-1H6.5a.5.5 0 0 0-.4.8l4.5 6a2 2 0 0 1 0 2.4l-4.5 6a.5.5 0 0 0 .4.8H17a1 1 0 0 0 1-1v-2",key:"wuwx1p"}]],QJ=Xe("sigma",YJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XJ=[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]],HU=Xe("sliders-vertical",XJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JJ=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],Wy=Xe("sparkles",JJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZJ=[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]],eZ=Xe("star-off",ZJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tZ=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],nZ=Xe("star",tZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rZ=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],aZ=Xe("stethoscope",rZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sZ=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],bR=Xe("timer",sZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iZ=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],oZ=Xe("trash-2",iZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lZ=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],KU=Xe("trending-up",lZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cZ=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],fs=Xe("triangle-alert",cZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dZ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],W0=Xe("user-check",dZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uZ=[["path",{d:"M2 21a8 8 0 0 1 13.292-6",key:"bjp14o"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"m16 19 2 2 4-4",key:"1b14m6"}]],fZ=Xe("user-round-check",uZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pZ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],ZS=Xe("user-x",pZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mZ=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],lc=Xe("user",mZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hZ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],ec=Xe("users",hZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gZ=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],yR=Xe("workflow",gZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xZ=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Mu=Xe("x",xZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bZ=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],mg=Xe("zap",bZ),zU="/neuro-shield/logo.png";function vR({size:e=40,className:t="",showText:n=!1,textColor:r,subtitle:s,subtitleColor:i,variant:o="dark"}){const l=r||(o==="dark"?"#ffffff":"#1e293b"),c=i||(o==="dark"?"#94a3b8":"#64748b");return a.jsxs("div",{className:`flex items-center gap-2.5 ${t}`,children:[a.jsx("img",{src:zU,alt:"Neuro-Shield",width:e,height:e,className:"shrink-0 object-contain",draggable:!1}),n&&a.jsxs("div",{className:"min-w-0",children:[a.jsx("h1",{className:"font-bold text-sm leading-tight truncate",style:{color:l},children:"Neuro-Shield"}),s&&a.jsx("p",{className:"text-[10px] leading-tight truncate",style:{color:c},children:s})]})]})}function yZ({size:e=80,className:t=""}){return a.jsxs("div",{className:`flex flex-col items-center ${t}`,children:[a.jsx("img",{src:zU,alt:"Neuro-Shield",width:e,height:e,className:"object-contain",draggable:!1}),a.jsx("h1",{className:"mt-4 text-4xl font-bold bg-gradient-to-r from-blue-700 via-teal-600 to-teal-500 bg-clip-text text-transparent",children:"Neuro-Shield"}),a.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"    "})]})}function qU(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=qU(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function fn(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=qU(e))&&(r&&(r+=" "),r+=t);return r}const vZ=(e,t)=>{const n=new Array(e.length+t.length);for(let r=0;r<e.length;r++)n[r]=e[r];for(let r=0;r<t.length;r++)n[e.length+r]=t[r];return n},NZ=(e,t)=>({classGroupId:e,validator:t}),VU=(e=new Map,t=null,n)=>({nextPart:e,validators:t,classGroupId:n}),Yy="-",OI=[],SZ="arbitrary..",EZ=e=>{const t=wZ(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{if(o.startsWith("[")&&o.endsWith("]"))return jZ(o);const l=o.split(Yy),c=l[0]===""&&l.length>1?1:0;return WU(l,c,t)},getConflictingClassGroupIds:(o,l)=>{if(l){const c=r[o],u=n[o];return c?u?vZ(u,c):c:u||OI}return n[o]||OI}}},WU=(e,t,n)=>{if(e.length-t===0)return n.classGroupId;const s=e[t],i=n.nextPart.get(s);if(i){const u=WU(e,t+1,i);if(u)return u}const o=n.validators;if(o===null)return;const l=t===0?e.join(Yy):e.slice(t).join(Yy),c=o.length;for(let u=0;u<c;u++){const m=o[u];if(m.validator(l))return m.classGroupId}},jZ=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),n=t.indexOf(":"),r=t.slice(0,n);return r?SZ+r:void 0})(),wZ=e=>{const{theme:t,classGroups:n}=e;return AZ(n,t)},AZ=(e,t)=>{const n=VU();for(const r in e){const s=e[r];NR(s,n,r,t)}return n},NR=(e,t,n,r)=>{const s=e.length;for(let i=0;i<s;i++){const o=e[i];_Z(o,t,n,r)}},_Z=(e,t,n,r)=>{if(typeof e=="string"){CZ(e,t,n);return}if(typeof e=="function"){TZ(e,t,n,r);return}OZ(e,t,n,r)},CZ=(e,t,n)=>{const r=e===""?t:YU(t,e);r.classGroupId=n},TZ=(e,t,n,r)=>{if(RZ(e)){NR(e(r),t,n,r);return}t.validators===null&&(t.validators=[]),t.validators.push(NZ(n,e))},OZ=(e,t,n,r)=>{const s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[l,c]=s[o];NR(c,YU(t,l),n,r)}},YU=(e,t)=>{let n=e;const r=t.split(Yy),s=r.length;for(let i=0;i<s;i++){const o=r[i];let l=n.nextPart.get(o);l||(l=VU(),n.nextPart.set(o,l)),n=l}return n},RZ=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,kZ=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=Object.create(null),r=Object.create(null);const s=(i,o)=>{n[i]=o,t++,t>e&&(t=0,r=n,n=Object.create(null))};return{get(i){let o=n[i];if(o!==void 0)return o;if((o=r[i])!==void 0)return s(i,o),o},set(i,o){i in n?n[i]=o:s(i,o)}}},SC="!",RI=":",IZ=[],kI=(e,t,n,r,s)=>({modifiers:e,hasImportantModifier:t,baseClassName:n,maybePostfixModifierPosition:r,isExternal:s}),DZ=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=s=>{const i=[];let o=0,l=0,c=0,u;const m=s.length;for(let v=0;v<m;v++){const N=s[v];if(o===0&&l===0){if(N===RI){i.push(s.slice(c,v)),c=v+1;continue}if(N==="/"){u=v;continue}}N==="["?o++:N==="]"?o--:N==="("?l++:N===")"&&l--}const p=i.length===0?s:s.slice(c);let g=p,x=!1;p.endsWith(SC)?(g=p.slice(0,-1),x=!0):p.startsWith(SC)&&(g=p.slice(1),x=!0);const y=u&&u>c?u-c:void 0;return kI(i,x,g,y)};if(t){const s=t+RI,i=r;r=o=>o.startsWith(s)?i(o.slice(s.length)):kI(IZ,!1,o,void 0,!0)}if(n){const s=r;r=i=>n({className:i,parseClassName:s})}return r},PZ=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((n,r)=>{t.set(n,1e6+r)}),n=>{const r=[];let s=[];for(let i=0;i<n.length;i++){const o=n[i],l=o[0]==="[",c=t.has(o);l||c?(s.length>0&&(s.sort(),r.push(...s),s=[]),r.push(o)):s.push(o)}return s.length>0&&(s.sort(),r.push(...s)),r}},MZ=e=>({cache:kZ(e.cacheSize),parseClassName:DZ(e),sortModifiers:PZ(e),...EZ(e)}),LZ=/\s+/,$Z=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:i}=t,o=[],l=e.trim().split(LZ);let c="";for(let u=l.length-1;u>=0;u-=1){const m=l[u],{isExternal:p,modifiers:g,hasImportantModifier:x,baseClassName:y,maybePostfixModifierPosition:v}=n(m);if(p){c=m+(c.length>0?" "+c:c);continue}let N=!!v,S=r(N?y.substring(0,v):y);if(!S){if(!N){c=m+(c.length>0?" "+c:c);continue}if(S=r(y),!S){c=m+(c.length>0?" "+c:c);continue}N=!1}const j=g.length===0?"":g.length===1?g[0]:i(g).join(":"),C=x?j+SC:j,_=C+S;if(o.indexOf(_)>-1)continue;o.push(_);const A=s(S,N);for(let T=0;T<A.length;++T){const R=A[T];o.push(C+R)}c=m+(c.length>0?" "+c:c)}return c},FZ=(...e)=>{let t=0,n,r,s="";for(;t<e.length;)(n=e[t++])&&(r=QU(n))&&(s&&(s+=" "),s+=r);return s},QU=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=QU(e[r]))&&(n&&(n+=" "),n+=t);return n},UZ=(e,...t)=>{let n,r,s,i;const o=c=>{const u=t.reduce((m,p)=>p(m),e());return n=MZ(u),r=n.cache.get,s=n.cache.set,i=l,l(c)},l=c=>{const u=r(c);if(u)return u;const m=$Z(c,n);return s(c,m),m};return i=o,(...c)=>i(FZ(...c))},BZ=[],Ta=e=>{const t=n=>n[e]||BZ;return t.isThemeGetter=!0,t},XU=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,JU=/^\((?:(\w[\w-]*):)?(.+)\)$/i,GZ=/^\d+\/\d+$/,HZ=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,KZ=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,zZ=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,qZ=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,VZ=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ap=e=>GZ.test(e),Sn=e=>!!e&&!Number.isNaN(Number(e)),au=e=>!!e&&Number.isInteger(Number(e)),e2=e=>e.endsWith("%")&&Sn(e.slice(0,-1)),Lc=e=>HZ.test(e),WZ=()=>!0,YZ=e=>KZ.test(e)&&!zZ.test(e),ZU=()=>!1,QZ=e=>qZ.test(e),XZ=e=>VZ.test(e),JZ=e=>!Ot(e)&&!Rt(e),ZZ=e=>bh(e,nB,ZU),Ot=e=>XU.test(e),gf=e=>bh(e,rB,YZ),t2=e=>bh(e,aee,Sn),II=e=>bh(e,eB,ZU),eee=e=>bh(e,tB,XZ),Ob=e=>bh(e,aB,QZ),Rt=e=>JU.test(e),S0=e=>yh(e,rB),tee=e=>yh(e,see),DI=e=>yh(e,eB),nee=e=>yh(e,nB),ree=e=>yh(e,tB),Rb=e=>yh(e,aB,!0),bh=(e,t,n)=>{const r=XU.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},yh=(e,t,n=!1)=>{const r=JU.exec(e);return r?r[1]?t(r[1]):n:!1},eB=e=>e==="position"||e==="percentage",tB=e=>e==="image"||e==="url",nB=e=>e==="length"||e==="size"||e==="bg-size",rB=e=>e==="length",aee=e=>e==="number",see=e=>e==="family-name",aB=e=>e==="shadow",iee=()=>{const e=Ta("color"),t=Ta("font"),n=Ta("text"),r=Ta("font-weight"),s=Ta("tracking"),i=Ta("leading"),o=Ta("breakpoint"),l=Ta("container"),c=Ta("spacing"),u=Ta("radius"),m=Ta("shadow"),p=Ta("inset-shadow"),g=Ta("text-shadow"),x=Ta("drop-shadow"),y=Ta("blur"),v=Ta("perspective"),N=Ta("aspect"),S=Ta("ease"),j=Ta("animate"),C=()=>["auto","avoid","all","avoid-page","page","left","right","column"],_=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],A=()=>[..._(),Rt,Ot],T=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto","contain","none"],M=()=>[Rt,Ot,c],P=()=>[Ap,"full","auto",...M()],$=()=>[au,"none","subgrid",Rt,Ot],w=()=>["auto",{span:["full",au,Rt,Ot]},au,Rt,Ot],U=()=>[au,"auto",Rt,Ot],X=()=>["auto","min","max","fr",Rt,Ot],I=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],G=()=>["start","end","center","stretch","center-safe","end-safe"],L=()=>["auto",...M()],H=()=>[Ap,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...M()],F=()=>[e,Rt,Ot],K=()=>[..._(),DI,II,{position:[Rt,Ot]}],ne=()=>["no-repeat",{repeat:["","x","y","space","round"]}],V=()=>["auto","cover","contain",nee,ZZ,{size:[Rt,Ot]}],ee=()=>[e2,S0,gf],ae=()=>["","none","full",u,Rt,Ot],ue=()=>["",Sn,S0,gf],ce=()=>["solid","dashed","dotted","double"],Z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ie=()=>[Sn,e2,DI,II],Se=()=>["","none",y,Rt,Ot],fe=()=>["none",Sn,Rt,Ot],Te=()=>["none",Sn,Rt,Ot],Pe=()=>[Sn,Rt,Ot],oe=()=>[Ap,"full",...M()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Lc],breakpoint:[Lc],color:[WZ],container:[Lc],"drop-shadow":[Lc],ease:["in","out","in-out"],font:[JZ],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Lc],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Lc],shadow:[Lc],spacing:["px",Sn],text:[Lc],"text-shadow":[Lc],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ap,Ot,Rt,N]}],container:["container"],columns:[{columns:[Sn,Ot,Rt,l]}],"break-after":[{"break-after":C()}],"break-before":[{"break-before":C()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:A()}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:P()}],"inset-x":[{"inset-x":P()}],"inset-y":[{"inset-y":P()}],start:[{start:P()}],end:[{end:P()}],top:[{top:P()}],right:[{right:P()}],bottom:[{bottom:P()}],left:[{left:P()}],visibility:["visible","invisible","collapse"],z:[{z:[au,"auto",Rt,Ot]}],basis:[{basis:[Ap,"full","auto",l,...M()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Sn,Ap,"auto","initial","none",Ot]}],grow:[{grow:["",Sn,Rt,Ot]}],shrink:[{shrink:["",Sn,Rt,Ot]}],order:[{order:[au,"first","last","none",Rt,Ot]}],"grid-cols":[{"grid-cols":$()}],"col-start-end":[{col:w()}],"col-start":[{"col-start":U()}],"col-end":[{"col-end":U()}],"grid-rows":[{"grid-rows":$()}],"row-start-end":[{row:w()}],"row-start":[{"row-start":U()}],"row-end":[{"row-end":U()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":X()}],"auto-rows":[{"auto-rows":X()}],gap:[{gap:M()}],"gap-x":[{"gap-x":M()}],"gap-y":[{"gap-y":M()}],"justify-content":[{justify:[...I(),"normal"]}],"justify-items":[{"justify-items":[...G(),"normal"]}],"justify-self":[{"justify-self":["auto",...G()]}],"align-content":[{content:["normal",...I()]}],"align-items":[{items:[...G(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...G(),{baseline:["","last"]}]}],"place-content":[{"place-content":I()}],"place-items":[{"place-items":[...G(),"baseline"]}],"place-self":[{"place-self":["auto",...G()]}],p:[{p:M()}],px:[{px:M()}],py:[{py:M()}],ps:[{ps:M()}],pe:[{pe:M()}],pt:[{pt:M()}],pr:[{pr:M()}],pb:[{pb:M()}],pl:[{pl:M()}],m:[{m:L()}],mx:[{mx:L()}],my:[{my:L()}],ms:[{ms:L()}],me:[{me:L()}],mt:[{mt:L()}],mr:[{mr:L()}],mb:[{mb:L()}],ml:[{ml:L()}],"space-x":[{"space-x":M()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":M()}],"space-y-reverse":["space-y-reverse"],size:[{size:H()}],w:[{w:[l,"screen",...H()]}],"min-w":[{"min-w":[l,"screen","none",...H()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[o]},...H()]}],h:[{h:["screen","lh",...H()]}],"min-h":[{"min-h":["screen","lh","none",...H()]}],"max-h":[{"max-h":["screen","lh",...H()]}],"font-size":[{text:["base",n,S0,gf]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Rt,t2]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",e2,Ot]}],"font-family":[{font:[tee,Ot,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,Rt,Ot]}],"line-clamp":[{"line-clamp":[Sn,"none",Rt,t2]}],leading:[{leading:[i,...M()]}],"list-image":[{"list-image":["none",Rt,Ot]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Rt,Ot]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:F()}],"text-color":[{text:F()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ce(),"wavy"]}],"text-decoration-thickness":[{decoration:[Sn,"from-font","auto",Rt,gf]}],"text-decoration-color":[{decoration:F()}],"underline-offset":[{"underline-offset":[Sn,"auto",Rt,Ot]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:M()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Rt,Ot]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Rt,Ot]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:K()}],"bg-repeat":[{bg:ne()}],"bg-size":[{bg:V()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},au,Rt,Ot],radial:["",Rt,Ot],conic:[au,Rt,Ot]},ree,eee]}],"bg-color":[{bg:F()}],"gradient-from-pos":[{from:ee()}],"gradient-via-pos":[{via:ee()}],"gradient-to-pos":[{to:ee()}],"gradient-from":[{from:F()}],"gradient-via":[{via:F()}],"gradient-to":[{to:F()}],rounded:[{rounded:ae()}],"rounded-s":[{"rounded-s":ae()}],"rounded-e":[{"rounded-e":ae()}],"rounded-t":[{"rounded-t":ae()}],"rounded-r":[{"rounded-r":ae()}],"rounded-b":[{"rounded-b":ae()}],"rounded-l":[{"rounded-l":ae()}],"rounded-ss":[{"rounded-ss":ae()}],"rounded-se":[{"rounded-se":ae()}],"rounded-ee":[{"rounded-ee":ae()}],"rounded-es":[{"rounded-es":ae()}],"rounded-tl":[{"rounded-tl":ae()}],"rounded-tr":[{"rounded-tr":ae()}],"rounded-br":[{"rounded-br":ae()}],"rounded-bl":[{"rounded-bl":ae()}],"border-w":[{border:ue()}],"border-w-x":[{"border-x":ue()}],"border-w-y":[{"border-y":ue()}],"border-w-s":[{"border-s":ue()}],"border-w-e":[{"border-e":ue()}],"border-w-t":[{"border-t":ue()}],"border-w-r":[{"border-r":ue()}],"border-w-b":[{"border-b":ue()}],"border-w-l":[{"border-l":ue()}],"divide-x":[{"divide-x":ue()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ue()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ce(),"hidden","none"]}],"divide-style":[{divide:[...ce(),"hidden","none"]}],"border-color":[{border:F()}],"border-color-x":[{"border-x":F()}],"border-color-y":[{"border-y":F()}],"border-color-s":[{"border-s":F()}],"border-color-e":[{"border-e":F()}],"border-color-t":[{"border-t":F()}],"border-color-r":[{"border-r":F()}],"border-color-b":[{"border-b":F()}],"border-color-l":[{"border-l":F()}],"divide-color":[{divide:F()}],"outline-style":[{outline:[...ce(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Sn,Rt,Ot]}],"outline-w":[{outline:["",Sn,S0,gf]}],"outline-color":[{outline:F()}],shadow:[{shadow:["","none",m,Rb,Ob]}],"shadow-color":[{shadow:F()}],"inset-shadow":[{"inset-shadow":["none",p,Rb,Ob]}],"inset-shadow-color":[{"inset-shadow":F()}],"ring-w":[{ring:ue()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:F()}],"ring-offset-w":[{"ring-offset":[Sn,gf]}],"ring-offset-color":[{"ring-offset":F()}],"inset-ring-w":[{"inset-ring":ue()}],"inset-ring-color":[{"inset-ring":F()}],"text-shadow":[{"text-shadow":["none",g,Rb,Ob]}],"text-shadow-color":[{"text-shadow":F()}],opacity:[{opacity:[Sn,Rt,Ot]}],"mix-blend":[{"mix-blend":[...Z(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Z()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Sn]}],"mask-image-linear-from-pos":[{"mask-linear-from":ie()}],"mask-image-linear-to-pos":[{"mask-linear-to":ie()}],"mask-image-linear-from-color":[{"mask-linear-from":F()}],"mask-image-linear-to-color":[{"mask-linear-to":F()}],"mask-image-t-from-pos":[{"mask-t-from":ie()}],"mask-image-t-to-pos":[{"mask-t-to":ie()}],"mask-image-t-from-color":[{"mask-t-from":F()}],"mask-image-t-to-color":[{"mask-t-to":F()}],"mask-image-r-from-pos":[{"mask-r-from":ie()}],"mask-image-r-to-pos":[{"mask-r-to":ie()}],"mask-image-r-from-color":[{"mask-r-from":F()}],"mask-image-r-to-color":[{"mask-r-to":F()}],"mask-image-b-from-pos":[{"mask-b-from":ie()}],"mask-image-b-to-pos":[{"mask-b-to":ie()}],"mask-image-b-from-color":[{"mask-b-from":F()}],"mask-image-b-to-color":[{"mask-b-to":F()}],"mask-image-l-from-pos":[{"mask-l-from":ie()}],"mask-image-l-to-pos":[{"mask-l-to":ie()}],"mask-image-l-from-color":[{"mask-l-from":F()}],"mask-image-l-to-color":[{"mask-l-to":F()}],"mask-image-x-from-pos":[{"mask-x-from":ie()}],"mask-image-x-to-pos":[{"mask-x-to":ie()}],"mask-image-x-from-color":[{"mask-x-from":F()}],"mask-image-x-to-color":[{"mask-x-to":F()}],"mask-image-y-from-pos":[{"mask-y-from":ie()}],"mask-image-y-to-pos":[{"mask-y-to":ie()}],"mask-image-y-from-color":[{"mask-y-from":F()}],"mask-image-y-to-color":[{"mask-y-to":F()}],"mask-image-radial":[{"mask-radial":[Rt,Ot]}],"mask-image-radial-from-pos":[{"mask-radial-from":ie()}],"mask-image-radial-to-pos":[{"mask-radial-to":ie()}],"mask-image-radial-from-color":[{"mask-radial-from":F()}],"mask-image-radial-to-color":[{"mask-radial-to":F()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":_()}],"mask-image-conic-pos":[{"mask-conic":[Sn]}],"mask-image-conic-from-pos":[{"mask-conic-from":ie()}],"mask-image-conic-to-pos":[{"mask-conic-to":ie()}],"mask-image-conic-from-color":[{"mask-conic-from":F()}],"mask-image-conic-to-color":[{"mask-conic-to":F()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:K()}],"mask-repeat":[{mask:ne()}],"mask-size":[{mask:V()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Rt,Ot]}],filter:[{filter:["","none",Rt,Ot]}],blur:[{blur:Se()}],brightness:[{brightness:[Sn,Rt,Ot]}],contrast:[{contrast:[Sn,Rt,Ot]}],"drop-shadow":[{"drop-shadow":["","none",x,Rb,Ob]}],"drop-shadow-color":[{"drop-shadow":F()}],grayscale:[{grayscale:["",Sn,Rt,Ot]}],"hue-rotate":[{"hue-rotate":[Sn,Rt,Ot]}],invert:[{invert:["",Sn,Rt,Ot]}],saturate:[{saturate:[Sn,Rt,Ot]}],sepia:[{sepia:["",Sn,Rt,Ot]}],"backdrop-filter":[{"backdrop-filter":["","none",Rt,Ot]}],"backdrop-blur":[{"backdrop-blur":Se()}],"backdrop-brightness":[{"backdrop-brightness":[Sn,Rt,Ot]}],"backdrop-contrast":[{"backdrop-contrast":[Sn,Rt,Ot]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Sn,Rt,Ot]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Sn,Rt,Ot]}],"backdrop-invert":[{"backdrop-invert":["",Sn,Rt,Ot]}],"backdrop-opacity":[{"backdrop-opacity":[Sn,Rt,Ot]}],"backdrop-saturate":[{"backdrop-saturate":[Sn,Rt,Ot]}],"backdrop-sepia":[{"backdrop-sepia":["",Sn,Rt,Ot]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":M()}],"border-spacing-x":[{"border-spacing-x":M()}],"border-spacing-y":[{"border-spacing-y":M()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Rt,Ot]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Sn,"initial",Rt,Ot]}],ease:[{ease:["linear","initial",S,Rt,Ot]}],delay:[{delay:[Sn,Rt,Ot]}],animate:[{animate:["none",j,Rt,Ot]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[v,Rt,Ot]}],"perspective-origin":[{"perspective-origin":A()}],rotate:[{rotate:fe()}],"rotate-x":[{"rotate-x":fe()}],"rotate-y":[{"rotate-y":fe()}],"rotate-z":[{"rotate-z":fe()}],scale:[{scale:Te()}],"scale-x":[{"scale-x":Te()}],"scale-y":[{"scale-y":Te()}],"scale-z":[{"scale-z":Te()}],"scale-3d":["scale-3d"],skew:[{skew:Pe()}],"skew-x":[{"skew-x":Pe()}],"skew-y":[{"skew-y":Pe()}],transform:[{transform:[Rt,Ot,"","none","gpu","cpu"]}],"transform-origin":[{origin:A()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:oe()}],"translate-x":[{"translate-x":oe()}],"translate-y":[{"translate-y":oe()}],"translate-z":[{"translate-z":oe()}],"translate-none":["translate-none"],accent:[{accent:F()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:F()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Rt,Ot]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":M()}],"scroll-mx":[{"scroll-mx":M()}],"scroll-my":[{"scroll-my":M()}],"scroll-ms":[{"scroll-ms":M()}],"scroll-me":[{"scroll-me":M()}],"scroll-mt":[{"scroll-mt":M()}],"scroll-mr":[{"scroll-mr":M()}],"scroll-mb":[{"scroll-mb":M()}],"scroll-ml":[{"scroll-ml":M()}],"scroll-p":[{"scroll-p":M()}],"scroll-px":[{"scroll-px":M()}],"scroll-py":[{"scroll-py":M()}],"scroll-ps":[{"scroll-ps":M()}],"scroll-pe":[{"scroll-pe":M()}],"scroll-pt":[{"scroll-pt":M()}],"scroll-pr":[{"scroll-pr":M()}],"scroll-pb":[{"scroll-pb":M()}],"scroll-pl":[{"scroll-pl":M()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Rt,Ot]}],fill:[{fill:["none",...F()]}],"stroke-w":[{stroke:[Sn,S0,gf,t2]}],stroke:[{stroke:["none",...F()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},oee=UZ(iee);function he(...e){return oee(fn(e))}function In({className:e,...t}){return a.jsx("div",{"data-slot":"card",className:he("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",e),...t})}function Cr({className:e,...t}){return a.jsx("div",{"data-slot":"card-header",className:he("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function Tr({className:e,...t}){return a.jsx("h4",{"data-slot":"card-title",className:he("leading-none",e),...t})}function zl({className:e,...t}){return a.jsx("p",{"data-slot":"card-description",className:he("text-muted-foreground",e),...t})}function Dn({className:e,...t}){return a.jsx("div",{"data-slot":"card-content",className:he("px-6 [&:last-child]:pb-6",e),...t})}function PI(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function tp(...e){return t=>{let n=!1;const r=e.map(s=>{const i=PI(s,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():PI(e[s],null)}}}}function Xn(...e){return h.useCallback(tp(...e),e)}var lee=Symbol.for("react.lazy"),Qy=dR[" use ".trim().toString()];function cee(e){return typeof e=="object"&&e!==null&&"then"in e}function sB(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===lee&&"_payload"in e&&cee(e._payload)}function $1(e){const t=dee(e),n=h.forwardRef((r,s)=>{let{children:i,...o}=r;sB(i)&&typeof Qy=="function"&&(i=Qy(i._payload));const l=h.Children.toArray(i),c=l.find(fee);if(c){const u=c.props.children,m=l.map(p=>p===c?h.Children.count(u)>1?h.Children.only(null):h.isValidElement(u)?u.props.children:null:p);return a.jsx(t,{...o,ref:s,children:h.isValidElement(u)?h.cloneElement(u,void 0,m):null})}return a.jsx(t,{...o,ref:s,children:i})});return n.displayName=`${e}.Slot`,n}var iB=$1("Slot");function dee(e){const t=h.forwardRef((n,r)=>{let{children:s,...i}=n;if(sB(s)&&typeof Qy=="function"&&(s=Qy(s._payload)),h.isValidElement(s)){const o=mee(s),l=pee(i,s.props);return s.type!==h.Fragment&&(l.ref=r?tp(r,o):o),h.cloneElement(s,l)}return h.Children.count(s)>1?h.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var uee=Symbol("radix.slottable");function fee(e){return h.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===uee}function pee(e,t){const n={...t};for(const r in t){const s=e[r],i=t[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...e,...n}}function mee(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}const MI=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,LI=fn,SR=(e,t)=>n=>{var r;if(t?.variants==null)return LI(e,n?.class,n?.className);const{variants:s,defaultVariants:i}=t,o=Object.keys(s).map(u=>{const m=n?.[u],p=i?.[u];if(m===null)return null;const g=MI(m)||MI(p);return s[u][g]}),l=n&&Object.entries(n).reduce((u,m)=>{let[p,g]=m;return g===void 0||(u[p]=g),u},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,m)=>{let{class:p,className:g,...x}=m;return Object.entries(x).every(y=>{let[v,N]=y;return Array.isArray(N)?N.includes({...i,...l}[v]):{...i,...l}[v]===N})?[...u,p,g]:u},[]);return LI(e,o,c,n?.class,n?.className)},hee=SR("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function Nt({className:e,variant:t,size:n,asChild:r=!1,...s}){const i=r?iB:"button";return a.jsx(i,{"data-slot":"button",className:he(hee({variant:t,size:n,className:e})),...s})}function $n({className:e,type:t,...n}){return a.jsx("input",{type:t,"data-slot":"input",className:he("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}var vh=IU();const oB=Jn(vh);var gee=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],xee=gee.reduce((e,t)=>{const n=$1(`Primitive.${t}`),r=h.forwardRef((s,i)=>{const{asChild:o,...l}=s,c=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),bee="Label",lB=h.forwardRef((e,t)=>a.jsx(xee.label,{...e,ref:t,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(e.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));lB.displayName=bee;var yee=lB;function Ft({className:e,...t}){return a.jsx(yee,{"data-slot":"label",className:he("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}function vee(e,t){const n=h.createContext(t),r=i=>{const{children:o,...l}=i,c=h.useMemo(()=>l,Object.values(l));return a.jsx(n.Provider,{value:c,children:o})};r.displayName=e+"Provider";function s(i){const o=h.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[r,s]}function cl(e,t=[]){let n=[];function r(i,o){const l=h.createContext(o),c=n.length;n=[...n,o];const u=p=>{const{scope:g,children:x,...y}=p,v=g?.[e]?.[c]||l,N=h.useMemo(()=>y,Object.values(y));return a.jsx(v.Provider,{value:N,children:x})};u.displayName=i+"Provider";function m(p,g){const x=g?.[e]?.[c]||l,y=h.useContext(x);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${p}\` must be used within \`${i}\``)}return[u,m]}const s=()=>{const i=n.map(o=>h.createContext(o));return function(l){const c=l?.[e]||i;return h.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[r,Nee(s,...t)]}function Nee(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const p=c(i)[`__scope${u}`];return{...l,...p}},{});return h.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function on(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e?.(s),n===!1||!s.defaultPrevented)return t?.(s)}}var Fa=globalThis?.document?h.useLayoutEffect:()=>{},See=dR[" useInsertionEffect ".trim().toString()]||Fa;function od({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[s,i,o]=Eee({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:s;{const m=h.useRef(e!==void 0);h.useEffect(()=>{const p=m.current;p!==l&&console.warn(`${r} is changing from ${p?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=l},[l,r])}const u=h.useCallback(m=>{if(l){const p=jee(m)?m(e):m;p!==e&&o.current?.(p)}else i(m)},[l,e,i,o]);return[c,u]}function Eee({defaultProp:e,onChange:t}){const[n,r]=h.useState(e),s=h.useRef(n),i=h.useRef(t);return See(()=>{i.current=t},[t]),h.useEffect(()=>{s.current!==n&&(i.current?.(n),s.current=n)},[n,s]),[n,r,i]}function jee(e){return typeof e=="function"}function ER(e){const t=h.useRef({value:e,previous:e});return h.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function jR(e){const[t,n]=h.useState(void 0);return Fa(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=e.offsetWidth,l=e.offsetHeight;n({width:o,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}function wee(e,t){return h.useReducer((n,r)=>t[n][r]??n,e)}var dl=e=>{const{present:t,children:n}=e,r=Aee(t),s=typeof n=="function"?n({present:r.isPresent}):h.Children.only(n),i=Xn(r.ref,_ee(s));return typeof n=="function"||r.isPresent?h.cloneElement(s,{ref:i}):null};dl.displayName="Presence";function Aee(e){const[t,n]=h.useState(),r=h.useRef(null),s=h.useRef(e),i=h.useRef("none"),o=e?"mounted":"unmounted",[l,c]=wee(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return h.useEffect(()=>{const u=kb(r.current);i.current=l==="mounted"?u:"none"},[l]),Fa(()=>{const u=r.current,m=s.current;if(m!==e){const g=i.current,x=kb(u);e?c("MOUNT"):x==="none"||u?.display==="none"?c("UNMOUNT"):c(m&&g!==x?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),Fa(()=>{if(t){let u;const m=t.ownerDocument.defaultView??window,p=x=>{const v=kb(r.current).includes(CSS.escape(x.animationName));if(x.target===t&&v&&(c("ANIMATION_END"),!s.current)){const N=t.style.animationFillMode;t.style.animationFillMode="forwards",u=m.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=N)})}},g=x=>{x.target===t&&(i.current=kb(r.current))};return t.addEventListener("animationstart",g),t.addEventListener("animationcancel",p),t.addEventListener("animationend",p),()=>{m.clearTimeout(u),t.removeEventListener("animationstart",g),t.removeEventListener("animationcancel",p),t.removeEventListener("animationend",p)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:h.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function kb(e){return e?.animationName||"none"}function _ee(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Cee(e){const t=Tee(e),n=h.forwardRef((r,s)=>{const{children:i,...o}=r,l=h.Children.toArray(i),c=l.find(Ree);if(c){const u=c.props.children,m=l.map(p=>p===c?h.Children.count(u)>1?h.Children.only(null):h.isValidElement(u)?u.props.children:null:p);return a.jsx(t,{...o,ref:s,children:h.isValidElement(u)?h.cloneElement(u,void 0,m):null})}return a.jsx(t,{...o,ref:s,children:i})});return n.displayName=`${e}.Slot`,n}function Tee(e){const t=h.forwardRef((n,r)=>{const{children:s,...i}=n;if(h.isValidElement(s)){const o=Iee(s),l=kee(i,s.props);return s.type!==h.Fragment&&(l.ref=r?tp(r,o):o),h.cloneElement(s,l)}return h.Children.count(s)>1?h.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Oee=Symbol("radix.slottable");function Ree(e){return h.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Oee}function kee(e,t){const n={...t};for(const r in t){const s=e[r],i=t[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...e,...n}}function Iee(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Dee=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],yn=Dee.reduce((e,t)=>{const n=Cee(`Primitive.${t}`),r=h.forwardRef((s,i)=>{const{asChild:o,...l}=s,c=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Pee(e,t){e&&vh.flushSync(()=>e.dispatchEvent(t))}var F1="Checkbox",[Mee]=cl(F1),[Lee,wR]=Mee(F1);function $ee(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:s,disabled:i,form:o,name:l,onCheckedChange:c,required:u,value:m="on",internal_do_not_use_render:p}=e,[g,x]=od({prop:n,defaultProp:s??!1,onChange:c,caller:F1}),[y,v]=h.useState(null),[N,S]=h.useState(null),j=h.useRef(!1),C=y?!!o||!!y.closest("form"):!0,_={checked:g,disabled:i,setChecked:x,control:y,setControl:v,name:l,form:o,value:m,hasConsumerStoppedPropagationRef:j,required:u,defaultChecked:wu(s)?!1:s,isFormControl:C,bubbleInput:N,setBubbleInput:S};return a.jsx(Lee,{scope:t,..._,children:Fee(p)?p(_):r})}var cB="CheckboxTrigger",dB=h.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},s)=>{const{control:i,value:o,disabled:l,checked:c,required:u,setControl:m,setChecked:p,hasConsumerStoppedPropagationRef:g,isFormControl:x,bubbleInput:y}=wR(cB,e),v=Xn(s,m),N=h.useRef(c);return h.useEffect(()=>{const S=i?.form;if(S){const j=()=>p(N.current);return S.addEventListener("reset",j),()=>S.removeEventListener("reset",j)}},[i,p]),a.jsx(yn.button,{type:"button",role:"checkbox","aria-checked":wu(c)?"mixed":c,"aria-required":u,"data-state":gB(c),"data-disabled":l?"":void 0,disabled:l,value:o,...r,ref:v,onKeyDown:on(t,S=>{S.key==="Enter"&&S.preventDefault()}),onClick:on(n,S=>{p(j=>wu(j)?!0:!j),y&&x&&(g.current=S.isPropagationStopped(),g.current||S.stopPropagation())})})});dB.displayName=cB;var uB=h.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:i,required:o,disabled:l,value:c,onCheckedChange:u,form:m,...p}=e;return a.jsx($ee,{__scopeCheckbox:n,checked:s,defaultChecked:i,disabled:l,required:o,onCheckedChange:u,name:r,form:m,value:c,internal_do_not_use_render:({isFormControl:g})=>a.jsxs(a.Fragment,{children:[a.jsx(dB,{...p,ref:t,__scopeCheckbox:n}),g&&a.jsx(hB,{__scopeCheckbox:n})]})})});uB.displayName=F1;var fB="CheckboxIndicator",pB=h.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...s}=e,i=wR(fB,n);return a.jsx(dl,{present:r||wu(i.checked)||i.checked===!0,children:a.jsx(yn.span,{"data-state":gB(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});pB.displayName=fB;var mB="CheckboxBubbleInput",hB=h.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:o,required:l,disabled:c,name:u,value:m,form:p,bubbleInput:g,setBubbleInput:x}=wR(mB,e),y=Xn(n,x),v=ER(i),N=jR(r);h.useEffect(()=>{const j=g;if(!j)return;const C=window.HTMLInputElement.prototype,A=Object.getOwnPropertyDescriptor(C,"checked").set,T=!s.current;if(v!==i&&A){const R=new Event("click",{bubbles:T});j.indeterminate=wu(i),A.call(j,wu(i)?!1:i),j.dispatchEvent(R)}},[g,v,i,s]);const S=h.useRef(wu(i)?!1:i);return a.jsx(yn.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??S.current,required:l,disabled:c,name:u,value:m,form:p,...t,tabIndex:-1,ref:y,style:{...t.style,...N,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});hB.displayName=mB;function Fee(e){return typeof e=="function"}function wu(e){return e==="indeterminate"}function gB(e){return wu(e)?"indeterminate":e?"checked":"unchecked"}function Cy({className:e,...t}){return a.jsx(uB,{"data-slot":"checkbox",className:he("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:a.jsx(pB,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:a.jsx(Uf,{className:"size-3.5"})})})}const Uee=SR("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function om({className:e,variant:t,...n}){return a.jsx("div",{"data-slot":"alert",role:"alert",className:he(Uee({variant:t}),e),...n})}function lm({className:e,...t}){return a.jsx("div",{"data-slot":"alert-description",className:he("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...t})}function Bee(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const Gee=e=>{switch(e){case"success":return zee;case"info":return Vee;case"warning":return qee;case"error":return Wee;default:return null}},Hee=Array(12).fill(0),Kee=({visible:e,className:t})=>W.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},W.createElement("div",{className:"sonner-spinner"},Hee.map((n,r)=>W.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),zee=W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},W.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),qee=W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},W.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Vee=W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},W.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Wee=W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},W.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Yee=W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},W.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),W.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Qee=()=>{const[e,t]=W.useState(document.hidden);return W.useEffect(()=>{const n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e};let EC=1;class Xee{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;const{message:r,...s}=t,i=typeof t?.id=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:EC++,o=this.toasts.find(c=>c.id===i),l=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(c=>c.id===i?(this.publish({...c,...t,id:i,title:r}),{...c,...t,id:i,dismissible:l,title:r}):c):this.addToast({title:r,...s,dismissible:l,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:t,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const s=Promise.resolve(t instanceof Function?t():t);let i=r!==void 0,o;const l=s.then(async u=>{if(o=["resolve",u],W.isValidElement(u))i=!1,this.create({id:r,type:"default",message:u});else if(Zee(u)&&!u.ok){i=!1;const p=typeof n.error=="function"?await n.error(`HTTP error! status: ${u.status}`):n.error,g=typeof n.description=="function"?await n.description(`HTTP error! status: ${u.status}`):n.description,y=typeof p=="object"&&!W.isValidElement(p)?p:{message:p};this.create({id:r,type:"error",description:g,...y})}else if(u instanceof Error){i=!1;const p=typeof n.error=="function"?await n.error(u):n.error,g=typeof n.description=="function"?await n.description(u):n.description,y=typeof p=="object"&&!W.isValidElement(p)?p:{message:p};this.create({id:r,type:"error",description:g,...y})}else if(n.success!==void 0){i=!1;const p=typeof n.success=="function"?await n.success(u):n.success,g=typeof n.description=="function"?await n.description(u):n.description,y=typeof p=="object"&&!W.isValidElement(p)?p:{message:p};this.create({id:r,type:"success",description:g,...y})}}).catch(async u=>{if(o=["reject",u],n.error!==void 0){i=!1;const m=typeof n.error=="function"?await n.error(u):n.error,p=typeof n.description=="function"?await n.description(u):n.description,x=typeof m=="object"&&!W.isValidElement(m)?m:{message:m};this.create({id:r,type:"error",description:p,...x})}}).finally(()=>{i&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),c=()=>new Promise((u,m)=>l.then(()=>o[0]==="reject"?m(o[1]):u(o[1])).catch(m));return typeof r!="string"&&typeof r!="number"?{unwrap:c}:Object.assign(r,{unwrap:c})},this.custom=(t,n)=>{const r=n?.id||EC++;return this.create({jsx:t(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const yi=new Xee,Jee=(e,t)=>{const n=t?.id||EC++;return yi.addToast({title:e,...t,id:n}),n},Zee=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",ete=Jee,tte=()=>yi.toasts,nte=()=>yi.getActiveToasts(),De=Object.assign(ete,{success:yi.success,info:yi.info,warning:yi.warning,error:yi.error,custom:yi.custom,message:yi.message,promise:yi.promise,dismiss:yi.dismiss,loading:yi.loading},{getHistory:tte,getToasts:nte});Bee("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Ib(e){return e.label!==void 0}const rte=3,ate="24px",ste="16px",$I=4e3,ite=356,ote=14,lte=45,cte=200;function Pl(...e){return e.filter(Boolean).join(" ")}function dte(e){const[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}const ute=e=>{var t,n,r,s,i,o,l,c,u;const{invert:m,toast:p,unstyled:g,interacting:x,setHeights:y,visibleToasts:v,heights:N,index:S,toasts:j,expanded:C,removeToast:_,defaultRichColors:A,closeButton:T,style:R,cancelButtonStyle:M,actionButtonStyle:P,className:$="",descriptionClassName:w="",duration:U,position:X,gap:I,expandByDefault:G,classNames:L,icons:H,closeButtonAriaLabel:F="Close toast"}=e,[K,ne]=W.useState(null),[V,ee]=W.useState(null),[ae,ue]=W.useState(!1),[ce,Z]=W.useState(!1),[ie,Se]=W.useState(!1),[fe,Te]=W.useState(!1),[Pe,oe]=W.useState(!1),[le,ye]=W.useState(0),[_e,te]=W.useState(0),z=W.useRef(p.duration||U||$I),Ne=W.useRef(null),me=W.useRef(null),xe=S===0,et=S+1<=v,Fe=p.type,pt=p.dismissible!==!1,St=p.className||"",qe=p.descriptionClassName||"",rn=W.useMemo(()=>N.findIndex(ze=>ze.toastId===p.id)||0,[N,p.id]),at=W.useMemo(()=>{var ze;return(ze=p.closeButton)!=null?ze:T},[p.closeButton,T]),jt=W.useMemo(()=>p.duration||U||$I,[p.duration,U]),It=W.useRef(0),an=W.useRef(0),Ut=W.useRef(0),Ht=W.useRef(null),[qt,Tn]=X.split("-"),hn=W.useMemo(()=>N.reduce((ze,ht,pn)=>pn>=rn?ze:ze+ht.height,0),[N,rn]),ar=Qee(),yt=p.invert||m,Ve=Fe==="loading";an.current=W.useMemo(()=>rn*I+hn,[rn,hn]),W.useEffect(()=>{z.current=jt},[jt]),W.useEffect(()=>{ue(!0)},[]),W.useEffect(()=>{const ze=me.current;if(ze){const ht=ze.getBoundingClientRect().height;return te(ht),y(pn=>[{toastId:p.id,height:ht,position:p.position},...pn]),()=>y(pn=>pn.filter(En=>En.toastId!==p.id))}},[y,p.id]),W.useLayoutEffect(()=>{if(!ae)return;const ze=me.current,ht=ze.style.height;ze.style.height="auto";const pn=ze.getBoundingClientRect().height;ze.style.height=ht,te(pn),y(En=>En.find(jn=>jn.toastId===p.id)?En.map(jn=>jn.toastId===p.id?{...jn,height:pn}:jn):[{toastId:p.id,height:pn,position:p.position},...En])},[ae,p.title,p.description,y,p.id,p.jsx,p.action,p.cancel]);const Xt=W.useCallback(()=>{Z(!0),ye(an.current),y(ze=>ze.filter(ht=>ht.toastId!==p.id)),setTimeout(()=>{_(p)},cte)},[p,_,y,an]);W.useEffect(()=>{if(p.promise&&Fe==="loading"||p.duration===1/0||p.type==="loading")return;let ze;return C||x||ar?(()=>{if(Ut.current<It.current){const En=new Date().getTime()-It.current;z.current=z.current-En}Ut.current=new Date().getTime()})():(()=>{z.current!==1/0&&(It.current=new Date().getTime(),ze=setTimeout(()=>{p.onAutoClose==null||p.onAutoClose.call(p,p),Xt()},z.current))})(),()=>clearTimeout(ze)},[C,x,p,Fe,ar,Xt]),W.useEffect(()=>{p.delete&&(Xt(),p.onDismiss==null||p.onDismiss.call(p,p))},[Xt,p.delete]);function On(){var ze;if(H?.loading){var ht;return W.createElement("div",{className:Pl(L?.loader,p==null||(ht=p.classNames)==null?void 0:ht.loader,"sonner-loader"),"data-visible":Fe==="loading"},H.loading)}return W.createElement(Kee,{className:Pl(L?.loader,p==null||(ze=p.classNames)==null?void 0:ze.loader),visible:Fe==="loading"})}const Rn=p.icon||H?.[Fe]||Gee(Fe);var Or,Ee;return W.createElement("li",{tabIndex:0,ref:me,className:Pl($,St,L?.toast,p==null||(t=p.classNames)==null?void 0:t.toast,L?.default,L?.[Fe],p==null||(n=p.classNames)==null?void 0:n[Fe]),"data-sonner-toast":"","data-rich-colors":(Or=p.richColors)!=null?Or:A,"data-styled":!(p.jsx||p.unstyled||g),"data-mounted":ae,"data-promise":!!p.promise,"data-swiped":Pe,"data-removed":ce,"data-visible":et,"data-y-position":qt,"data-x-position":Tn,"data-index":S,"data-front":xe,"data-swiping":ie,"data-dismissible":pt,"data-type":Fe,"data-invert":yt,"data-swipe-out":fe,"data-swipe-direction":V,"data-expanded":!!(C||G&&ae),"data-testid":p.testId,style:{"--index":S,"--toasts-before":S,"--z-index":j.length-S,"--offset":`${ce?le:an.current}px`,"--initial-height":G?"auto":`${_e}px`,...R,...p.style},onDragEnd:()=>{Se(!1),ne(null),Ht.current=null},onPointerDown:ze=>{ze.button!==2&&(Ve||!pt||(Ne.current=new Date,ye(an.current),ze.target.setPointerCapture(ze.pointerId),ze.target.tagName!=="BUTTON"&&(Se(!0),Ht.current={x:ze.clientX,y:ze.clientY})))},onPointerUp:()=>{var ze,ht,pn;if(fe||!pt)return;Ht.current=null;const En=Number(((ze=me.current)==null?void 0:ze.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),lr=Number(((ht=me.current)==null?void 0:ht.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),jn=new Date().getTime()-((pn=Ne.current)==null?void 0:pn.getTime()),Qe=K==="x"?En:lr,sr=Math.abs(Qe)/jn;if(Math.abs(Qe)>=lte||sr>.11){ye(an.current),p.onDismiss==null||p.onDismiss.call(p,p),ee(K==="x"?En>0?"right":"left":lr>0?"down":"up"),Xt(),Te(!0);return}else{var bn,Ke;(bn=me.current)==null||bn.style.setProperty("--swipe-amount-x","0px"),(Ke=me.current)==null||Ke.style.setProperty("--swipe-amount-y","0px")}oe(!1),Se(!1),ne(null)},onPointerMove:ze=>{var ht,pn,En;if(!Ht.current||!pt||((ht=window.getSelection())==null?void 0:ht.toString().length)>0)return;const jn=ze.clientY-Ht.current.y,Qe=ze.clientX-Ht.current.x;var sr;const bn=(sr=e.swipeDirections)!=null?sr:dte(X);!K&&(Math.abs(Qe)>1||Math.abs(jn)>1)&&ne(Math.abs(Qe)>Math.abs(jn)?"x":"y");let Ke={x:0,y:0};const Be=Me=>1/(1.5+Math.abs(Me)/20);if(K==="y"){if(bn.includes("top")||bn.includes("bottom"))if(bn.includes("top")&&jn<0||bn.includes("bottom")&&jn>0)Ke.y=jn;else{const Me=jn*Be(jn);Ke.y=Math.abs(Me)<Math.abs(jn)?Me:jn}}else if(K==="x"&&(bn.includes("left")||bn.includes("right")))if(bn.includes("left")&&Qe<0||bn.includes("right")&&Qe>0)Ke.x=Qe;else{const Me=Qe*Be(Qe);Ke.x=Math.abs(Me)<Math.abs(Qe)?Me:Qe}(Math.abs(Ke.x)>0||Math.abs(Ke.y)>0)&&oe(!0),(pn=me.current)==null||pn.style.setProperty("--swipe-amount-x",`${Ke.x}px`),(En=me.current)==null||En.style.setProperty("--swipe-amount-y",`${Ke.y}px`)}},at&&!p.jsx&&Fe!=="loading"?W.createElement("button",{"aria-label":F,"data-disabled":Ve,"data-close-button":!0,onClick:Ve||!pt?()=>{}:()=>{Xt(),p.onDismiss==null||p.onDismiss.call(p,p)},className:Pl(L?.closeButton,p==null||(r=p.classNames)==null?void 0:r.closeButton)},(Ee=H?.close)!=null?Ee:Yee):null,(Fe||p.icon||p.promise)&&p.icon!==null&&(H?.[Fe]!==null||p.icon)?W.createElement("div",{"data-icon":"",className:Pl(L?.icon,p==null||(s=p.classNames)==null?void 0:s.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||On():null,p.type!=="loading"?Rn:null):null,W.createElement("div",{"data-content":"",className:Pl(L?.content,p==null||(i=p.classNames)==null?void 0:i.content)},W.createElement("div",{"data-title":"",className:Pl(L?.title,p==null||(o=p.classNames)==null?void 0:o.title)},p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title),p.description?W.createElement("div",{"data-description":"",className:Pl(w,qe,L?.description,p==null||(l=p.classNames)==null?void 0:l.description)},typeof p.description=="function"?p.description():p.description):null),W.isValidElement(p.cancel)?p.cancel:p.cancel&&Ib(p.cancel)?W.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||M,onClick:ze=>{Ib(p.cancel)&&pt&&(p.cancel.onClick==null||p.cancel.onClick.call(p.cancel,ze),Xt())},className:Pl(L?.cancelButton,p==null||(c=p.classNames)==null?void 0:c.cancelButton)},p.cancel.label):null,W.isValidElement(p.action)?p.action:p.action&&Ib(p.action)?W.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||P,onClick:ze=>{Ib(p.action)&&(p.action.onClick==null||p.action.onClick.call(p.action,ze),!ze.defaultPrevented&&Xt())},className:Pl(L?.actionButton,p==null||(u=p.classNames)==null?void 0:u.actionButton)},p.action.label):null)};function FI(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function fte(e,t){const n={};return[e,t].forEach((r,s)=>{const i=s===1,o=i?"--mobile-offset":"--offset",l=i?ste:ate;function c(u){["top","right","bottom","left"].forEach(m=>{n[`${o}-${m}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${o}-${u}`]=l:n[`${o}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):c(l)}),n}const pte=W.forwardRef(function(t,n){const{id:r,invert:s,position:i="bottom-right",hotkey:o=["altKey","KeyT"],expand:l,closeButton:c,className:u,offset:m,mobileOffset:p,theme:g="light",richColors:x,duration:y,style:v,visibleToasts:N=rte,toastOptions:S,dir:j=FI(),gap:C=ote,icons:_,containerAriaLabel:A="Notifications"}=t,[T,R]=W.useState([]),M=W.useMemo(()=>r?T.filter(ae=>ae.toasterId===r):T.filter(ae=>!ae.toasterId),[T,r]),P=W.useMemo(()=>Array.from(new Set([i].concat(M.filter(ae=>ae.position).map(ae=>ae.position)))),[M,i]),[$,w]=W.useState([]),[U,X]=W.useState(!1),[I,G]=W.useState(!1),[L,H]=W.useState(g!=="system"?g:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),F=W.useRef(null),K=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),ne=W.useRef(null),V=W.useRef(!1),ee=W.useCallback(ae=>{R(ue=>{var ce;return(ce=ue.find(Z=>Z.id===ae.id))!=null&&ce.delete||yi.dismiss(ae.id),ue.filter(({id:Z})=>Z!==ae.id)})},[]);return W.useEffect(()=>yi.subscribe(ae=>{if(ae.dismiss){requestAnimationFrame(()=>{R(ue=>ue.map(ce=>ce.id===ae.id?{...ce,delete:!0}:ce))});return}setTimeout(()=>{oB.flushSync(()=>{R(ue=>{const ce=ue.findIndex(Z=>Z.id===ae.id);return ce!==-1?[...ue.slice(0,ce),{...ue[ce],...ae},...ue.slice(ce+1)]:[ae,...ue]})})})}),[T]),W.useEffect(()=>{if(g!=="system"){H(g);return}if(g==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?H("dark"):H("light")),typeof window>"u")return;const ae=window.matchMedia("(prefers-color-scheme: dark)");try{ae.addEventListener("change",({matches:ue})=>{H(ue?"dark":"light")})}catch{ae.addListener(({matches:ce})=>{try{H(ce?"dark":"light")}catch(Z){console.error(Z)}})}},[g]),W.useEffect(()=>{T.length<=1&&X(!1)},[T]),W.useEffect(()=>{const ae=ue=>{var ce;if(o.every(Se=>ue[Se]||ue.code===Se)){var ie;X(!0),(ie=F.current)==null||ie.focus()}ue.code==="Escape"&&(document.activeElement===F.current||(ce=F.current)!=null&&ce.contains(document.activeElement))&&X(!1)};return document.addEventListener("keydown",ae),()=>document.removeEventListener("keydown",ae)},[o]),W.useEffect(()=>{if(F.current)return()=>{ne.current&&(ne.current.focus({preventScroll:!0}),ne.current=null,V.current=!1)}},[F.current]),W.createElement("section",{ref:n,"aria-label":`${A} ${K}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},P.map((ae,ue)=>{var ce;const[Z,ie]=ae.split("-");return M.length?W.createElement("ol",{key:ae,dir:j==="auto"?FI():j,tabIndex:-1,ref:F,className:u,"data-sonner-toaster":!0,"data-sonner-theme":L,"data-y-position":Z,"data-x-position":ie,style:{"--front-toast-height":`${((ce=$[0])==null?void 0:ce.height)||0}px`,"--width":`${ite}px`,"--gap":`${C}px`,...v,...fte(m,p)},onBlur:Se=>{V.current&&!Se.currentTarget.contains(Se.relatedTarget)&&(V.current=!1,ne.current&&(ne.current.focus({preventScroll:!0}),ne.current=null))},onFocus:Se=>{Se.target instanceof HTMLElement&&Se.target.dataset.dismissible==="false"||V.current||(V.current=!0,ne.current=Se.relatedTarget)},onMouseEnter:()=>X(!0),onMouseMove:()=>X(!0),onMouseLeave:()=>{I||X(!1)},onDragEnd:()=>X(!1),onPointerDown:Se=>{Se.target instanceof HTMLElement&&Se.target.dataset.dismissible==="false"||G(!0)},onPointerUp:()=>G(!1)},M.filter(Se=>!Se.position&&ue===0||Se.position===ae).map((Se,fe)=>{var Te,Pe;return W.createElement(ute,{key:Se.id,icons:_,index:fe,toast:Se,defaultRichColors:x,duration:(Te=S?.duration)!=null?Te:y,className:S?.className,descriptionClassName:S?.descriptionClassName,invert:s,visibleToasts:N,closeButton:(Pe=S?.closeButton)!=null?Pe:c,interacting:I,position:ae,style:S?.style,unstyled:S?.unstyled,classNames:S?.classNames,cancelButtonStyle:S?.cancelButtonStyle,actionButtonStyle:S?.actionButtonStyle,closeButtonAriaLabel:S?.closeButtonAriaLabel,removeToast:ee,toasts:M.filter(oe=>oe.position==Se.position),heights:$.filter(oe=>oe.position==Se.position),setHeights:w,expandByDefault:l,gap:C,expanded:U,swipeDirections:t.swipeDirections})})):null}))}),xB={VITE_BASE_PATH:"/neuro-shield/"},mte="R-2ldKkoGbDF-marBFEbgVilAXB5Tw0r";function bB(e){if(!e.trim())return"/neuro-shield/";let t=e.trim();return t.startsWith("/")||(t=`/${t}`),t.endsWith("/")||(t=`${t}/`),t}function hte(){const e=xB,t=(e.VITE_CITIZEN_ENTRY_URL||e.VITE_STAGE1_DEMO_LINK||"").trim();if(t)return t;const n=(e.VITE_CITIZEN_DEMO_TOKEN||mte).trim(),r=bB(e.VITE_BASE_PATH);return`${window.location.origin}${r}p/sms?t=${encodeURIComponent(n)}`}function gte(){const e=xB,t=(e.VITE_THREE_STEP_MODEL_ENTRY_URL||"").trim();if(t)return t;const n=bB(e.VITE_BASE_PATH);return`${window.location.origin}${n}3-step-model/`}const n2=[{email:"admin@central.gov.kr",password:"demo1234",role:"central_admin",name:"",organization:""},{email:"regional@seoul.go.kr",password:"demo1234",role:"regional_center",name:"",organization:" "},{email:"local@gangnam.go.kr",password:"demo1234",role:"local_center",name:"",organization:"  "}];function xte({onLogin:e}){const[t,n]=h.useState("select"),[r,s]=h.useState(null),[i,o]=h.useState(""),[l,c]=h.useState(""),[u,m]=h.useState(""),[p,g]=h.useState(""),[x,y]=h.useState(!1),[v,N]=h.useState(!1),[S,j]=h.useState(1),C=[{id:"citizen",title:"",description:"    ( )",icon:lc,color:"bg-blue-600"},{id:"local_center",title:"",description:"// ",icon:sm,color:"bg-green-600"},{id:"regional_center",title:"",description:" ",icon:sm,color:"bg-purple-600"},{id:"central_admin",title:"",description:" ",icon:nl,color:"bg-red-600"}],_=$=>{if($==="citizen"){const w=hte();try{window.location.href=w}catch{window.location.hash="#citizen"}return}s($),n("login")},A=()=>{const $=gte();window.location.href=$},T=()=>{if(!i||!l){De.error("  ");return}const $=n2.find(w=>w.email===i&&w.password===l);$?(console.log("[AUDIT] Login Success:",{email:i,role:$.role,timestamp:new Date().toISOString(),ipAddress:"CLIENT_IP"}),v&&localStorage.setItem("rememberedEmail",i),De.success(` : ${$.name}`),e({email:$.email,role:$.role,name:$.name,organization:$.organization})):(console.log("[AUDIT] Login Failed:",{email:i,timestamp:new Date().toISOString(),reason:"Invalid credentials"}),De.error("    "))},R=()=>{if(S===1){if(!i||!l){De.error("  ");return}j(2)}else{if(!u||r!=="citizen"&&!p){De.error("   ");return}console.log("[AUDIT] Registration:",{email:i,role:r,name:u,organization:p,timestamp:new Date().toISOString()}),De.success(" "),n("login"),j(1)}},M=()=>{t==="register"&&S===2?j(1):(n("select"),s(null),j(1),o(""),c(""),m(""),g(""))},P=$=>{o($.email),c($.password),De.info(`   : ${$.name}`)};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-100 via-slate-50 to-blue-100/60 flex items-center justify-center p-4",children:a.jsxs("div",{className:"w-full max-w-6xl",children:[a.jsx("div",{className:"text-center mb-8",children:a.jsx(yZ,{size:88})}),t==="select"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs(In,{className:"border border-slate-300 bg-white shadow-[0_14px_34px_rgba(15,23,42,0.08)]",children:[a.jsxs(Cr,{children:[a.jsx(Tr,{className:"text-center text-slate-900",children:"/ "}),a.jsx(zl,{className:"text-center text-slate-600",children:"       "})]}),a.jsx(Dn,{children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[C.map($=>{const w=$.icon;return a.jsxs("button",{onClick:()=>_($.id),className:"p-6 border-2 border-gray-300 hover:border-primary rounded transition-all hover:shadow-lg group",children:[a.jsx("div",{className:`${$.color} w-16 h-16 rounded flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform`,children:a.jsx(w,{className:"h-8 w-8 text-white"})}),a.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:$.title}),a.jsx("p",{className:"text-sm text-gray-600",children:$.description})]},$.id)}),a.jsxs("button",{onClick:A,className:"p-6 border-2 border-gray-300 hover:border-primary rounded transition-all hover:shadow-lg group",children:[a.jsx("div",{className:"bg-indigo-600 w-16 h-16 rounded flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform",children:a.jsx(vx,{className:"h-8 w-8 text-white"})}),a.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"3-Step "}),a.jsx("p",{className:"text-sm text-gray-600",children:"3  "})]},"three_step_model")]})})]}),a.jsxs(In,{className:"border-blue-300 bg-blue-50",children:[a.jsx(Cr,{children:a.jsxs(Tr,{className:"text-blue-900 flex items-center gap-2",children:[a.jsx(ea,{className:"h-5 w-5"}),"  "]})}),a.jsxs(Dn,{children:[a.jsx("p",{className:"text-sm text-blue-800 mb-4",children:"      :"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:n2.map($=>a.jsxs("div",{className:"bg-white p-3 rounded border border-blue-200",children:[a.jsx("p",{className:"font-semibold text-gray-900 mb-1",children:$.name}),a.jsx("p",{className:"text-xs text-gray-600 mb-1",children:$.email}),a.jsxs("p",{className:"text-xs text-gray-500",children:[": ",$.password]})]},$.email))})]})]})]}),t==="login"&&r&&a.jsxs(In,{className:"max-w-md mx-auto border border-slate-300 bg-white shadow-[0_16px_38px_rgba(15,23,42,0.1)]",children:[a.jsxs(Cr,{children:[a.jsxs(Nt,{variant:"ghost",size:"sm",onClick:M,className:"mb-2 -ml-2 border border-slate-200 bg-white text-slate-700 hover:bg-slate-50",children:[a.jsx(Hl,{className:"h-4 w-4 mr-2"}),""]}),a.jsxs(Tr,{className:"text-slate-900",children:[C.find($=>$.id===r)?.title," "]}),a.jsx(zl,{className:"text-slate-600",children:"   "})]}),a.jsxs(Dn,{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(Ft,{htmlFor:"email",className:"text-slate-800",children:""}),a.jsx($n,{id:"email",type:"email",value:i,onChange:$=>o($.target.value),placeholder:"example@domain.com",className:"mt-2 border-slate-300 bg-white text-slate-900 placeholder:text-slate-400 focus-visible:border-blue-400 focus-visible:ring-blue-100"})]}),a.jsxs("div",{children:[a.jsx(Ft,{htmlFor:"password",className:"text-slate-800",children:""}),a.jsxs("div",{className:"relative mt-2",children:[a.jsx($n,{id:"password",type:x?"text":"password",value:l,onChange:$=>c($.target.value),placeholder:"",className:"border-slate-300 bg-white text-slate-900 placeholder:text-slate-400 focus-visible:border-blue-400 focus-visible:ring-blue-100"}),a.jsx("button",{type:"button",onClick:()=>y(!x),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500",children:x?a.jsx(yC,{className:"h-4 w-4"}):a.jsx(Em,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Cy,{id:"remember",checked:v,onCheckedChange:$=>N($)}),a.jsx("label",{htmlFor:"remember",className:"text-sm text-gray-700 cursor-pointer",children:" "})]}),a.jsx(Nt,{className:"w-full bg-[#163b6f] text-white hover:bg-[#0f2b4a] shadow-sm",onClick:T,children:""}),a.jsx("div",{className:"text-center",children:a.jsx("button",{onClick:()=>n("register"),className:"text-sm text-blue-700 hover:text-blue-800 hover:underline",children:" ? "})}),a.jsxs(om,{className:"border border-slate-300 bg-slate-50",children:[a.jsx(ea,{className:"h-4 w-4"}),a.jsxs(lm,{className:"text-slate-700",children:[a.jsx("p",{className:"text-sm font-medium mb-2",children:" :"}),a.jsx("div",{className:"space-y-1",children:n2.filter($=>$.role===r).map($=>a.jsxs("button",{onClick:()=>P($),className:"text-xs text-blue-600 hover:underline block",children:[$.name," (",$.email,")"]},$.email))})]})]})]})]}),t==="register"&&r&&a.jsxs(In,{className:"max-w-md mx-auto border border-slate-300 bg-white shadow-[0_16px_38px_rgba(15,23,42,0.1)]",children:[a.jsxs(Cr,{children:[a.jsxs(Nt,{variant:"ghost",size:"sm",onClick:M,className:"mb-2 -ml-2 border border-slate-200 bg-white text-slate-700 hover:bg-slate-50",children:[a.jsx(Hl,{className:"h-4 w-4 mr-2"}),""]}),a.jsxs(Tr,{className:"text-slate-900",children:[C.find($=>$.id===r)?.title," "]}),a.jsx(zl,{className:"text-slate-600",children:S===1?"  ":"  "})]}),a.jsxs(Dn,{className:"space-y-4",children:[S===1?a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx(Ft,{htmlFor:"reg-email",className:"text-slate-800",children:" *"}),a.jsx($n,{id:"reg-email",type:"email",value:i,onChange:$=>o($.target.value),placeholder:"example@domain.com",className:"mt-2 border-slate-300 bg-white text-slate-900 placeholder:text-slate-400 focus-visible:border-blue-400 focus-visible:ring-blue-100"})]}),a.jsxs("div",{children:[a.jsx(Ft,{htmlFor:"reg-password",className:"text-slate-800",children:" *"}),a.jsxs("div",{className:"relative mt-2",children:[a.jsx($n,{id:"reg-password",type:x?"text":"password",value:l,onChange:$=>c($.target.value),placeholder:"8 ",className:"border-slate-300 bg-white text-slate-900 placeholder:text-slate-400 focus-visible:border-blue-400 focus-visible:ring-blue-100"}),a.jsx("button",{type:"button",onClick:()=>y(!x),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500",children:x?a.jsx(yC,{className:"h-4 w-4"}):a.jsx(Em,{className:"h-4 w-4"})})]})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx(Ft,{htmlFor:"name",className:"text-slate-800",children:" *"}),a.jsx($n,{id:"name",value:u,onChange:$=>m($.target.value),placeholder:"",className:"mt-2 border-slate-300 bg-white text-slate-900 placeholder:text-slate-400 focus-visible:border-blue-400 focus-visible:ring-blue-100"})]}),r!=="citizen"&&a.jsxs("div",{children:[a.jsx(Ft,{htmlFor:"organization",className:"text-slate-800",children:"  *"}),a.jsx($n,{id:"organization",value:p,onChange:$=>g($.target.value),placeholder:":   ",className:"mt-2 border-slate-300 bg-white text-slate-900 placeholder:text-slate-400 focus-visible:border-blue-400 focus-visible:ring-blue-100"})]})]}),a.jsx(Nt,{className:"w-full bg-[#163b6f] text-white hover:bg-[#0f2b4a] shadow-sm",onClick:R,children:S===1?"":" "}),a.jsx("div",{className:"text-center",children:a.jsx("button",{onClick:()=>{n("login"),j(1)},className:"text-sm text-blue-700 hover:text-blue-800 hover:underline",children:"  ? "})})]})]}),a.jsxs("div",{className:"text-center mt-8 text-sm text-slate-600",children:[a.jsx("p",{children:" 2026 Neuro-Shield. All rights reserved."}),a.jsx("p",{className:"mt-1",children:""})]})]})})}function Xo({className:e,...t}){return a.jsx("textarea",{"data-slot":"textarea",className:he("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}var bte=dR[" useId ".trim().toString()]||(()=>{}),yte=0;function tc(e){const[t,n]=h.useState(bte());return Fa(()=>{n(r=>r??String(yte++))},[e]),e||(t?`radix-${t}`:"")}function ld(e){const t=h.useRef(e);return h.useEffect(()=>{t.current=e}),h.useMemo(()=>(...n)=>t.current?.(...n),[])}function vte(e,t=globalThis?.document){const n=ld(e);h.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var Nte="DismissableLayer",jC="dismissableLayer.update",Ste="dismissableLayer.pointerDownOutside",Ete="dismissableLayer.focusOutside",UI,yB=h.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),jx=h.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,u=h.useContext(yB),[m,p]=h.useState(null),g=m?.ownerDocument??globalThis?.document,[,x]=h.useState({}),y=Xn(t,R=>p(R)),v=Array.from(u.layers),[N]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),S=v.indexOf(N),j=m?v.indexOf(m):-1,C=u.layersWithOutsidePointerEventsDisabled.size>0,_=j>=S,A=Ate(R=>{const M=R.target,P=[...u.branches].some($=>$.contains(M));!_||P||(s?.(R),o?.(R),R.defaultPrevented||l?.())},g),T=_te(R=>{const M=R.target;[...u.branches].some($=>$.contains(M))||(i?.(R),o?.(R),R.defaultPrevented||l?.())},g);return vte(R=>{j===u.layers.size-1&&(r?.(R),!R.defaultPrevented&&l&&(R.preventDefault(),l()))},g),h.useEffect(()=>{if(m)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(UI=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(m)),u.layers.add(m),BI(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=UI)}},[m,g,n,u]),h.useEffect(()=>()=>{m&&(u.layers.delete(m),u.layersWithOutsidePointerEventsDisabled.delete(m),BI())},[m,u]),h.useEffect(()=>{const R=()=>x({});return document.addEventListener(jC,R),()=>document.removeEventListener(jC,R)},[]),a.jsx(yn.div,{...c,ref:y,style:{pointerEvents:C?_?"auto":"none":void 0,...e.style},onFocusCapture:on(e.onFocusCapture,T.onFocusCapture),onBlurCapture:on(e.onBlurCapture,T.onBlurCapture),onPointerDownCapture:on(e.onPointerDownCapture,A.onPointerDownCapture)})});jx.displayName=Nte;var jte="DismissableLayerBranch",wte=h.forwardRef((e,t)=>{const n=h.useContext(yB),r=h.useRef(null),s=Xn(t,r);return h.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),a.jsx(yn.div,{...e,ref:s})});wte.displayName=jte;function Ate(e,t=globalThis?.document){const n=ld(e),r=h.useRef(!1),s=h.useRef(()=>{});return h.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){vB(Ste,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function _te(e,t=globalThis?.document){const n=ld(e),r=h.useRef(!1);return h.useEffect(()=>{const s=i=>{i.target&&!r.current&&vB(Ete,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function BI(){const e=new CustomEvent(jC);document.dispatchEvent(e)}function vB(e,t,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?Pee(s,i):s.dispatchEvent(i)}var r2="focusScope.autoFocusOnMount",a2="focusScope.autoFocusOnUnmount",GI={bubbles:!1,cancelable:!0},Cte="FocusScope",U1=h.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=e,[l,c]=h.useState(null),u=ld(s),m=ld(i),p=h.useRef(null),g=Xn(t,v=>c(v)),x=h.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;h.useEffect(()=>{if(r){let v=function(C){if(x.paused||!l)return;const _=C.target;l.contains(_)?p.current=_:du(p.current,{select:!0})},N=function(C){if(x.paused||!l)return;const _=C.relatedTarget;_!==null&&(l.contains(_)||du(p.current,{select:!0}))},S=function(C){if(document.activeElement===document.body)for(const A of C)A.removedNodes.length>0&&du(l)};document.addEventListener("focusin",v),document.addEventListener("focusout",N);const j=new MutationObserver(S);return l&&j.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",N),j.disconnect()}}},[r,l,x.paused]),h.useEffect(()=>{if(l){KI.add(x);const v=document.activeElement;if(!l.contains(v)){const S=new CustomEvent(r2,GI);l.addEventListener(r2,u),l.dispatchEvent(S),S.defaultPrevented||(Tte(Dte(NB(l)),{select:!0}),document.activeElement===v&&du(l))}return()=>{l.removeEventListener(r2,u),setTimeout(()=>{const S=new CustomEvent(a2,GI);l.addEventListener(a2,m),l.dispatchEvent(S),S.defaultPrevented||du(v??document.body,{select:!0}),l.removeEventListener(a2,m),KI.remove(x)},0)}}},[l,u,m,x]);const y=h.useCallback(v=>{if(!n&&!r||x.paused)return;const N=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,S=document.activeElement;if(N&&S){const j=v.currentTarget,[C,_]=Ote(j);C&&_?!v.shiftKey&&S===_?(v.preventDefault(),n&&du(C,{select:!0})):v.shiftKey&&S===C&&(v.preventDefault(),n&&du(_,{select:!0})):S===j&&v.preventDefault()}},[n,r,x.paused]);return a.jsx(yn.div,{tabIndex:-1,...o,ref:g,onKeyDown:y})});U1.displayName=Cte;function Tte(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(du(r,{select:t}),document.activeElement!==n)return}function Ote(e){const t=NB(e),n=HI(t,e),r=HI(t.reverse(),e);return[n,r]}function NB(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function HI(e,t){for(const n of e)if(!Rte(n,{upTo:t}))return n}function Rte(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function kte(e){return e instanceof HTMLInputElement&&"select"in e}function du(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&kte(e)&&t&&e.select()}}var KI=Ite();function Ite(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=zI(e,t),e.unshift(t)},remove(t){e=zI(e,t),e[0]?.resume()}}}function zI(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function Dte(e){return e.filter(t=>t.tagName!=="A")}var Pte="Portal",wx=h.forwardRef((e,t)=>{const{container:n,...r}=e,[s,i]=h.useState(!1);Fa(()=>i(!0),[]);const o=n||s&&globalThis?.document?.body;return o?oB.createPortal(a.jsx(yn.div,{...r,ref:t}),o):null});wx.displayName=Pte;var s2=0;function AR(){h.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??qI()),document.body.insertAdjacentElement("beforeend",e[1]??qI()),s2++,()=>{s2===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),s2--}},[])}function qI(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var ql=function(){return ql=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ql.apply(this,arguments)};function SB(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function Mte(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,i;r<s;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var Ty="right-scroll-bar-position",Oy="width-before-scroll-bar",Lte="with-scroll-bars-hidden",$te="--removed-body-scroll-bar-size";function i2(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Fte(e,t){var n=h.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var Ute=typeof window<"u"?h.useLayoutEffect:h.useEffect,VI=new WeakMap;function Bte(e,t){var n=Fte(null,function(r){return e.forEach(function(s){return i2(s,r)})});return Ute(function(){var r=VI.get(n);if(r){var s=new Set(r),i=new Set(e),o=n.current;s.forEach(function(l){i.has(l)||i2(l,null)}),i.forEach(function(l){s.has(l)||i2(l,o)})}VI.set(n,e)},[e]),n}function Gte(e){return e}function Hte(e,t){t===void 0&&(t=Gte);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var o=t(i,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(i),o=n}var c=function(){var m=o;o=[],m.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(m){o.push(m),u()},filter:function(m){return o=o.filter(m),n}}}};return s}function Kte(e){e===void 0&&(e={});var t=Hte(null);return t.options=ql({async:!0,ssr:!1},e),t}var EB=function(e){var t=e.sideCar,n=SB(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return h.createElement(r,ql({},n))};EB.isSideCarExport=!0;function zte(e,t){return e.useMedium(t),EB}var jB=Kte(),o2=function(){},B1=h.forwardRef(function(e,t){var n=h.useRef(null),r=h.useState({onScrollCapture:o2,onWheelCapture:o2,onTouchMoveCapture:o2}),s=r[0],i=r[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,m=e.enabled,p=e.shards,g=e.sideCar,x=e.noRelative,y=e.noIsolation,v=e.inert,N=e.allowPinchZoom,S=e.as,j=S===void 0?"div":S,C=e.gapMode,_=SB(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),A=g,T=Bte([n,t]),R=ql(ql({},_),s);return h.createElement(h.Fragment,null,m&&h.createElement(A,{sideCar:jB,removeScrollBar:u,shards:p,noRelative:x,noIsolation:y,inert:v,setCallbacks:i,allowPinchZoom:!!N,lockRef:n,gapMode:C}),o?h.cloneElement(h.Children.only(l),ql(ql({},R),{ref:T})):h.createElement(j,ql({},R,{className:c,ref:T}),l))});B1.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};B1.classNames={fullWidth:Oy,zeroRight:Ty};var qte=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Vte(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=qte();return t&&e.setAttribute("nonce",t),e}function Wte(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Yte(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Qte=function(){var e=0,t=null;return{add:function(n){e==0&&(t=Vte())&&(Wte(t,n),Yte(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Xte=function(){var e=Qte();return function(t,n){h.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},wB=function(){var e=Xte(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},Jte={left:0,top:0,right:0,gap:0},l2=function(e){return parseInt(e||"",10)||0},Zte=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[l2(n),l2(r),l2(s)]},ene=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Jte;var t=Zte(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},tne=wB(),cm="data-scroll-locked",nne=function(e,t,n,r){var s=e.left,i=e.top,o=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Lte,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(cm,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ty,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Oy,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Ty," .").concat(Ty,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Oy," .").concat(Oy,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(cm,`] {
    `).concat($te,": ").concat(l,`px;
  }
`)},WI=function(){var e=parseInt(document.body.getAttribute(cm)||"0",10);return isFinite(e)?e:0},rne=function(){h.useEffect(function(){return document.body.setAttribute(cm,(WI()+1).toString()),function(){var e=WI()-1;e<=0?document.body.removeAttribute(cm):document.body.setAttribute(cm,e.toString())}},[])},ane=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;rne();var i=h.useMemo(function(){return ene(s)},[s]);return h.createElement(tne,{styles:nne(i,!t,s,n?"":"!important")})},wC=!1;if(typeof window<"u")try{var Db=Object.defineProperty({},"passive",{get:function(){return wC=!0,!0}});window.addEventListener("test",Db,Db),window.removeEventListener("test",Db,Db)}catch{wC=!1}var _p=wC?{passive:!1}:!1,sne=function(e){return e.tagName==="TEXTAREA"},AB=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!sne(e)&&n[t]==="visible")},ine=function(e){return AB(e,"overflowY")},one=function(e){return AB(e,"overflowX")},YI=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=_B(e,r);if(s){var i=CB(e,r),o=i[1],l=i[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},lne=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},cne=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},_B=function(e,t){return e==="v"?ine(t):one(t)},CB=function(e,t){return e==="v"?lne(t):cne(t)},dne=function(e,t){return e==="h"&&t==="rtl"?-1:1},une=function(e,t,n,r,s){var i=dne(e,window.getComputedStyle(t).direction),o=i*r,l=n.target,c=t.contains(l),u=!1,m=o>0,p=0,g=0;do{if(!l)break;var x=CB(e,l),y=x[0],v=x[1],N=x[2],S=v-N-i*y;(y||S)&&_B(e,l)&&(p+=S,g+=y);var j=l.parentNode;l=j&&j.nodeType===Node.DOCUMENT_FRAGMENT_NODE?j.host:j}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(m&&Math.abs(p)<1||!m&&Math.abs(g)<1)&&(u=!0),u},Pb=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},QI=function(e){return[e.deltaX,e.deltaY]},XI=function(e){return e&&"current"in e?e.current:e},fne=function(e,t){return e[0]===t[0]&&e[1]===t[1]},pne=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},mne=0,Cp=[];function hne(e){var t=h.useRef([]),n=h.useRef([0,0]),r=h.useRef(),s=h.useState(mne++)[0],i=h.useState(wB)[0],o=h.useRef(e);h.useEffect(function(){o.current=e},[e]),h.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var v=Mte([e.lockRef.current],(e.shards||[]).map(XI),!0).filter(Boolean);return v.forEach(function(N){return N.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),v.forEach(function(N){return N.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=h.useCallback(function(v,N){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var S=Pb(v),j=n.current,C="deltaX"in v?v.deltaX:j[0]-S[0],_="deltaY"in v?v.deltaY:j[1]-S[1],A,T=v.target,R=Math.abs(C)>Math.abs(_)?"h":"v";if("touches"in v&&R==="h"&&T.type==="range")return!1;var M=window.getSelection(),P=M&&M.anchorNode,$=P?P===T||P.contains(T):!1;if($)return!1;var w=YI(R,T);if(!w)return!0;if(w?A=R:(A=R==="v"?"h":"v",w=YI(R,T)),!w)return!1;if(!r.current&&"changedTouches"in v&&(C||_)&&(r.current=A),!A)return!0;var U=r.current||A;return une(U,N,v,U==="h"?C:_)},[]),c=h.useCallback(function(v){var N=v;if(!(!Cp.length||Cp[Cp.length-1]!==i)){var S="deltaY"in N?QI(N):Pb(N),j=t.current.filter(function(A){return A.name===N.type&&(A.target===N.target||N.target===A.shadowParent)&&fne(A.delta,S)})[0];if(j&&j.should){N.cancelable&&N.preventDefault();return}if(!j){var C=(o.current.shards||[]).map(XI).filter(Boolean).filter(function(A){return A.contains(N.target)}),_=C.length>0?l(N,C[0]):!o.current.noIsolation;_&&N.cancelable&&N.preventDefault()}}},[]),u=h.useCallback(function(v,N,S,j){var C={name:v,delta:N,target:S,should:j,shadowParent:gne(S)};t.current.push(C),setTimeout(function(){t.current=t.current.filter(function(_){return _!==C})},1)},[]),m=h.useCallback(function(v){n.current=Pb(v),r.current=void 0},[]),p=h.useCallback(function(v){u(v.type,QI(v),v.target,l(v,e.lockRef.current))},[]),g=h.useCallback(function(v){u(v.type,Pb(v),v.target,l(v,e.lockRef.current))},[]);h.useEffect(function(){return Cp.push(i),e.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:g}),document.addEventListener("wheel",c,_p),document.addEventListener("touchmove",c,_p),document.addEventListener("touchstart",m,_p),function(){Cp=Cp.filter(function(v){return v!==i}),document.removeEventListener("wheel",c,_p),document.removeEventListener("touchmove",c,_p),document.removeEventListener("touchstart",m,_p)}},[]);var x=e.removeScrollBar,y=e.inert;return h.createElement(h.Fragment,null,y?h.createElement(i,{styles:pne(s)}):null,x?h.createElement(ane,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function gne(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const xne=zte(jB,hne);var G1=h.forwardRef(function(e,t){return h.createElement(B1,ql({},e,{ref:t,sideCar:xne}))});G1.classNames=B1.classNames;var bne=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Tp=new WeakMap,Mb=new WeakMap,Lb={},c2=0,TB=function(e){return e&&(e.host||TB(e.parentNode))},yne=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=TB(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},vne=function(e,t,n,r){var s=yne(t,Array.isArray(e)?e:[e]);Lb[n]||(Lb[n]=new WeakMap);var i=Lb[n],o=[],l=new Set,c=new Set(s),u=function(p){!p||l.has(p)||(l.add(p),u(p.parentNode))};s.forEach(u);var m=function(p){!p||c.has(p)||Array.prototype.forEach.call(p.children,function(g){if(l.has(g))m(g);else try{var x=g.getAttribute(r),y=x!==null&&x!=="false",v=(Tp.get(g)||0)+1,N=(i.get(g)||0)+1;Tp.set(g,v),i.set(g,N),o.push(g),v===1&&y&&Mb.set(g,!0),N===1&&g.setAttribute(n,"true"),y||g.setAttribute(r,"true")}catch(S){console.error("aria-hidden: cannot operate on ",g,S)}})};return m(t),l.clear(),c2++,function(){o.forEach(function(p){var g=Tp.get(p)-1,x=i.get(p)-1;Tp.set(p,g),i.set(p,x),g||(Mb.has(p)||p.removeAttribute(r),Mb.delete(p)),x||p.removeAttribute(n)}),c2--,c2||(Tp=new WeakMap,Tp=new WeakMap,Mb=new WeakMap,Lb={})}},_R=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=bne(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),vne(r,s,n,"aria-hidden")):function(){return null}};function Nne(e){const t=Sne(e),n=h.forwardRef((r,s)=>{const{children:i,...o}=r,l=h.Children.toArray(i),c=l.find(jne);if(c){const u=c.props.children,m=l.map(p=>p===c?h.Children.count(u)>1?h.Children.only(null):h.isValidElement(u)?u.props.children:null:p);return a.jsx(t,{...o,ref:s,children:h.isValidElement(u)?h.cloneElement(u,void 0,m):null})}return a.jsx(t,{...o,ref:s,children:i})});return n.displayName=`${e}.Slot`,n}function Sne(e){const t=h.forwardRef((n,r)=>{const{children:s,...i}=n;if(h.isValidElement(s)){const o=Ane(s),l=wne(i,s.props);return s.type!==h.Fragment&&(l.ref=r?tp(r,o):o),h.cloneElement(s,l)}return h.Children.count(s)>1?h.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Ene=Symbol("radix.slottable");function jne(e){return h.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Ene}function wne(e,t){const n={...t};for(const r in t){const s=e[r],i=t[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...e,...n}}function Ane(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var H1="Dialog",[OB]=cl(H1),[_ne,ul]=OB(H1),RB=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=e,l=h.useRef(null),c=h.useRef(null),[u,m]=od({prop:r,defaultProp:s??!1,onChange:i,caller:H1});return a.jsx(_ne,{scope:t,triggerRef:l,contentRef:c,contentId:tc(),titleId:tc(),descriptionId:tc(),open:u,onOpenChange:m,onOpenToggle:h.useCallback(()=>m(p=>!p),[m]),modal:o,children:n})};RB.displayName=H1;var kB="DialogTrigger",Cne=h.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=ul(kB,n),i=Xn(t,s.triggerRef);return a.jsx(yn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":OR(s.open),...r,ref:i,onClick:on(e.onClick,s.onOpenToggle)})});Cne.displayName=kB;var CR="DialogPortal",[Tne,IB]=OB(CR,{forceMount:void 0}),DB=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:s}=e,i=ul(CR,t);return a.jsx(Tne,{scope:t,forceMount:n,children:h.Children.map(r,o=>a.jsx(dl,{present:n||i.open,children:a.jsx(wx,{asChild:!0,container:s,children:o})}))})};DB.displayName=CR;var Xy="DialogOverlay",PB=h.forwardRef((e,t)=>{const n=IB(Xy,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,i=ul(Xy,e.__scopeDialog);return i.modal?a.jsx(dl,{present:r||i.open,children:a.jsx(Rne,{...s,ref:t})}):null});PB.displayName=Xy;var One=Nne("DialogOverlay.RemoveScroll"),Rne=h.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=ul(Xy,n);return a.jsx(G1,{as:One,allowPinchZoom:!0,shards:[s.contentRef],children:a.jsx(yn.div,{"data-state":OR(s.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Gf="DialogContent",MB=h.forwardRef((e,t)=>{const n=IB(Gf,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,i=ul(Gf,e.__scopeDialog);return a.jsx(dl,{present:r||i.open,children:i.modal?a.jsx(kne,{...s,ref:t}):a.jsx(Ine,{...s,ref:t})})});MB.displayName=Gf;var kne=h.forwardRef((e,t)=>{const n=ul(Gf,e.__scopeDialog),r=h.useRef(null),s=Xn(t,n.contentRef,r);return h.useEffect(()=>{const i=r.current;if(i)return _R(i)},[]),a.jsx(LB,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:on(e.onCloseAutoFocus,i=>{i.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:on(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:on(e.onFocusOutside,i=>i.preventDefault())})}),Ine=h.forwardRef((e,t)=>{const n=ul(Gf,e.__scopeDialog),r=h.useRef(!1),s=h.useRef(!1);return a.jsx(LB,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{e.onCloseAutoFocus?.(i),i.defaultPrevented||(r.current||n.triggerRef.current?.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{e.onInteractOutside?.(i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;n.triggerRef.current?.contains(o)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),LB=h.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=e,l=ul(Gf,n),c=h.useRef(null),u=Xn(t,c);return AR(),a.jsxs(a.Fragment,{children:[a.jsx(U1,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:a.jsx(jx,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":OR(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(Dne,{titleId:l.titleId}),a.jsx(Mne,{contentRef:c,descriptionId:l.descriptionId})]})]})}),TR="DialogTitle",$B=h.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=ul(TR,n);return a.jsx(yn.h2,{id:s.titleId,...r,ref:t})});$B.displayName=TR;var FB="DialogDescription",UB=h.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=ul(FB,n);return a.jsx(yn.p,{id:s.descriptionId,...r,ref:t})});UB.displayName=FB;var BB="DialogClose",GB=h.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=ul(BB,n);return a.jsx(yn.button,{type:"button",...r,ref:t,onClick:on(e.onClick,()=>s.onOpenChange(!1))})});GB.displayName=BB;function OR(e){return e?"open":"closed"}var HB="DialogTitleWarning",[sPe,KB]=vee(HB,{contentName:Gf,titleName:TR,docsSlug:"dialog"}),Dne=({titleId:e})=>{const t=KB(HB),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return h.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},Pne="DialogDescriptionWarning",Mne=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${KB(Pne).contentName}}.`;return h.useEffect(()=>{const s=e.current?.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},zB=RB,qB=DB,VB=PB,WB=MB,YB=$B,QB=UB,XB=GB;function Au({...e}){return a.jsx(zB,{"data-slot":"dialog",...e})}function Lne({...e}){return a.jsx(qB,{"data-slot":"dialog-portal",...e})}function $ne({className:e,...t}){return a.jsx(VB,{"data-slot":"dialog-overlay",className:he("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function _u({className:e,children:t,...n}){return a.jsxs(Lne,{"data-slot":"dialog-portal",children:[a.jsx($ne,{}),a.jsxs(WB,{"data-slot":"dialog-content",className:he("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...n,children:[t,a.jsxs(XB,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[a.jsx(Mu,{}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Jy({className:e,...t}){return a.jsx("div",{"data-slot":"dialog-header",className:he("flex flex-col gap-2 text-center sm:text-left",e),...t})}function AC({className:e,...t}){return a.jsx("div",{"data-slot":"dialog-footer",className:he("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function Zy({className:e,...t}){return a.jsx(YB,{"data-slot":"dialog-title",className:he("text-lg leading-none font-semibold",e),...t})}function _C({className:e,...t}){return a.jsx(QB,{"data-slot":"dialog-description",className:he("text-muted-foreground text-sm",e),...t})}function Fne({open:e,onOpenChange:t}){const[n,r]=h.useState([{id:"1",type:"bot",content:"!  .  ?",timestamp:new Date}]),[s,i]=h.useState(""),[o,l]=h.useState(""),[c,u]=h.useState(!1),m=h.useRef(null),p={" ":"            .       .",:"       .     .",:" ,   1:1 ,   ,         .",:"     ,      .      .",:'   " "     .   ,    .',:"  30  ,    1   .",:"  .    .",:",    .       .",:"     .   .",:"      ,        .",:"    .        .     ."},g=["  ?"," ?","    ?","  ?"];h.useEffect(()=>{m.current&&(m.current.scrollTop=m.current.scrollHeight)},[n]);const x=j=>{const C=j.toLowerCase().replace(/\s+/g,"");for(const[_,A]of Object.entries(p))if(C.includes(_.replace(/\s+/g,"")))return A;return".      .    ,    . (: 02-1234-5678)"},y=async j=>{try{const C=await fetch("/api/outreach/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_message:j,conversation_id:o||void 0,context:{current_view:"citizen_portal"}})});if(!C.ok)return null;const _=await C.json();_.conversation_id&&l(_.conversation_id);const A=String(_.assistant_message||"").trim();if(!A)return null;const T=(_.citations||[]).map(R=>[R.title,R.snippet].filter(Boolean).join(": ")).filter(Boolean).slice(0,2);return T.length?`${A}

: ${T.join(" | ")}`:A}catch{return null}},v=async j=>{const C=j.trim();if(!C||c)return;const _={id:Date.now().toString(),type:"user",content:C,timestamp:new Date};r(M=>[...M,_]),i(""),u(!0);const T=await y(C)||x(C),R={id:(Date.now()+1).toString(),type:"bot",content:T,timestamp:new Date};r(M=>[...M,R]),u(!1)},N=()=>{v(s)},S=j=>{v(j)};return a.jsx(Au,{open:e,onOpenChange:t,children:a.jsxs(_u,{className:"max-w-2xl h-[600px] max-h-[90dvh] !grid grid-rows-[auto_minmax(0,1fr)_auto] gap-0 overflow-hidden p-0",children:[a.jsx(Jy,{className:"border-b p-6 pb-4",children:a.jsxs(Zy,{className:"flex items-center gap-2",children:[a.jsx("div",{className:"bg-blue-100 p-2 rounded-full",children:a.jsx(LU,{className:"h-5 w-5 text-blue-600"})}),"AI "]})}),a.jsxs("div",{ref:m,className:"min-h-0 overflow-y-auto overscroll-contain p-6",children:[a.jsx("div",{className:"space-y-4 pb-2",children:n.map(j=>a.jsx("div",{className:`flex ${j.type==="user"?"justify-end":"justify-start"}`,children:a.jsxs("div",{className:`max-w-[80%] rounded-lg p-3 ${j.type==="user"?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"}`,children:[a.jsx("p",{className:"text-sm whitespace-pre-wrap",children:j.content}),a.jsx("p",{className:`text-xs mt-1 ${j.type==="user"?"text-blue-100":"text-gray-500"}`,children:j.timestamp.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"})})]})},j.id))}),n.length===1&&a.jsxs("div",{className:"mt-6",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"  :"}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:g.map((j,C)=>a.jsx("button",{onClick:()=>S(j),className:"p-3 text-left text-sm border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors",children:j},C))})]})]}),a.jsxs("div",{className:"border-t p-4",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx($n,{value:s,onChange:j=>i(j.target.value),onKeyDown:j=>j.key==="Enter"&&N(),placeholder:" ...",className:"flex-1"}),a.jsx(Nt,{onClick:N,disabled:!s.trim()||c,children:a.jsx(Og,{className:"h-4 w-4"})})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"*      "})]})]})})}const RR="neuro-shield:sms-reservation-sync:v1",CC="neuro-shield:sms-token-case-map:v1",Une=200,Bne=400;function Gne(e){if(!e)return[];try{const t=JSON.parse(e);return Array.isArray(t)?t.filter(n=>!!n&&typeof n=="object"):[]}catch{return[]}}function JB(e){if(!e)return[];try{const t=JSON.parse(e);return Array.isArray(t)?t.filter(n=>!!n&&typeof n=="object"&&typeof n.token=="string"&&typeof n.caseId=="string"):[]}catch{return[]}}function ZB(){return typeof window>"u"?[]:Gne(window.localStorage.getItem(RR)).sort((e,t)=>t.updatedAt.localeCompare(e.updatedAt))}function Hne(e){if(typeof window>"u")return null;const t=e.updatedAt??new Date().toISOString(),n=e.eventId??`sms-sync-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,r={...e,source:"SMS",eventId:n,updatedAt:t},s=ZB(),i=`${r.reservationId??r.eventId}:${r.status}:${r.updatedAt}`,o=s.filter(c=>`${c.reservationId??c.eventId}:${c.status}:${c.updatedAt}`!==i),l=[r,...o].slice(0,Une);return window.localStorage.setItem(RR,JSON.stringify(l)),r}function TC(e){return e?e.replace(/\D/g,""):""}function Kne(e){const t=(e.token??"").trim(),n=(e.caseId??"").trim();if(!t||!n||typeof window>"u")return null;const r=new Date().toISOString(),i=JB(window.localStorage.getItem(CC)).filter(c=>c.token!==t),o={token:t,caseId:n,sentAt:e.sentAt??r,updatedAt:r},l=[o,...i].slice(0,Bne);return window.localStorage.setItem(CC,JSON.stringify(l)),o}function zne(e){const t=(e??"").trim();return!t||typeof window>"u"?void 0:JB(window.localStorage.getItem(CC)).find(r=>r.token===t)?.caseId}function qne(e,t){const n=(e.caseId??"").trim(),r=(t.caseId??"").trim();if(n&&r&&n===r)return!0;const s=TC(e.phone);return s?(t.phoneCandidates??[]).some(i=>{const o=TC(i);return o?!!(o===s||o.length>=4&&s.endsWith(o.slice(-4))):!1}):!1}const Vne={};function OC({inviteToken:e}){const[t,n]=h.useState("home"),[r,s]=h.useState(!1),[i,o]=h.useState(!1),[l,c]=h.useState(""),[u,m]=h.useState(""),[p,g]=h.useState(""),[x,y]=h.useState(""),[v,N]=h.useState(""),[S,j]=h.useState(""),[C,_]=h.useState(""),[A,T]=h.useState(""),[R,M]=h.useState(!1),[P,$]=h.useState(!1),[w,U]=h.useState(!1),[X,I]=h.useState(""),[G,L]=h.useState(!1),[H,F]=h.useState(!1),[K,ne]=h.useState(!1),[V,ee]=h.useState(!1),ae=h.useMemo(()=>String(Vne.VITE_DEMO_MODE||"").toLowerCase()==="true"?!0:globalThis?.__NEURO_SHIELD_DEMO_BYPASS__===!0,[]);h.useEffect(()=>{let at=!0;return(async()=>{try{const It=await fetch("/api/config");if(!It.ok)return;const an=await It.json();if(!at)return;ee(!!an.demo_mode)}catch{}})(),()=>{at=!1}},[]);const ue=h.useMemo(()=>e?`citizen-session:${e}`:"",[e]);h.useEffect(()=>{if(!e)return;ne(!1);let at=!1;(()=>{if(!ue)return!1;const Ut=window.localStorage.getItem(ue);if(!Ut)return!1;try{const Ht=JSON.parse(Ut);if(Ht.sessionId)return I(Ht.sessionId),L(!!Ht.otpVerified),at=!0,!0}catch{window.localStorage.removeItem(ue)}return!1})();let It=!0;return(async()=>{try{const Ut=await fetch(`/api/citizen/session?token=${encodeURIComponent(e)}`);if(!Ut.ok)throw new Error(`session resolve failed: ${Ut.status}`);const Ht=await Ut.json();if(!It)return;I(Ht.sessionId),L(!!Ht.otpVerified),ue&&window.localStorage.setItem(ue,JSON.stringify({sessionId:Ht.sessionId,otpVerified:!!Ht.otpVerified})),ne(!1)}catch(Ut){console.error(Ut),!at&&ue&&window.localStorage.removeItem(ue),ne(!0)}})(),()=>{It=!1}},[e,ue]);const ce=[{id:"health",name:" ",address:"   426"},{id:"dementia",name:" ",address:"   524"},{id:"hospital",name:" ",address:"   81"}],Z=["09:00","09:30","10:00","10:30","11:00","11:30","14:00","14:30","15:00","15:30","16:00","16:30"],ie=[{question:"  ?",answer:"            .       ."},{question:" ?",answer:".        .     ."},{question:"    ?",answer:" ,   1:1 ,   ,         ."},{question:"  ?",answer:"     ,      .      ."}],Se=()=>{n("consent")},fe=()=>{if(!r){De.error("   ");return}n("center-select")},Te=at=>{c(at),n("datetime")},Pe=()=>{if(!u||!p){De.error("  ");return}n("confirm")},oe=/^01[016789]-?\d{3,4}-?\d{4}$/,le=async()=>{const at=new Date(`${u}T${p}:00`).toISOString(),jt=ce.find(qt=>qt.id===l)?.name||" ",It=(e||"demo").replace(/[^A-Za-z0-9]/g,"").slice(-10)||"demo",an=ae||V?"CASE-DEMO-IJY-001":`CASE-DEMO-${It}`,Ut=await fetch("/api/local/schedules",{method:"POST",headers:{"Content-Type":"application/json","X-User-Id":"citizen-demo","X-User-Role":"SYSTEM"},body:JSON.stringify({caseId:an,eventType:"APPOINTMENT",title:`   (${jt})`,startAt:at,durationMin:30,priority:"NORMAL",payload:{source:"citizen-demo",name:x,phone:v,birthdate:S,guardianPhone:A||null,notes:C||null,consentOptional:i}})});if(!Ut.ok){const qt=await Ut.text();throw new Error(`demo booking failed (${Ut.status}): ${qt}`)}let Ht;try{Ht=(await Ut.json()).scheduleId}catch{Ht=void 0}return{appointmentAt:at,organization:jt,demoCaseId:an,reservationId:Ht}},ye=async()=>{const at=await fetch("/api/citizen/booking",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({booking_type:"screening",center_id:"center-001",date:u,time:p,notes:C||null,citizen_name:x,citizen_phone:v.replace(/-/g,"")})});if(!at.ok){const jt=await at.text();throw new Error(`legacy booking failed (${at.status}): ${jt}`)}},_e=({status:at="RESERVED",appointmentAt:jt,organization:It,caseId:an,reservationId:Ut,note:Ht})=>{const qt=new Date().toISOString(),Tn=an||zne(e);Hne({caseId:Tn,source:"SMS",phone:TC(v),reservationId:Ut,status:at,programType:"STAGE1_SCREENING",programName:`${It} `,scheduledAt:jt,locationName:It,options:[{key:"channel",label:" ",value:" "},{key:"actor",label:" ",value:"  "}],createdAt:qt,createdBy:"CITIZEN",lastSmsSentAt:qt,note:Ht})},te=async()=>{if(!x||!v||!S){De.error("   ");return}if(!oe.test(v.replace(/-/g,""))){De.error("   ");return}if(A&&!oe.test(A.replace(/-/g,""))){De.error("    ");return}if(!u||!p){De.error("   .");return}F(!0);try{if(K||!X){await le(),n("complete"),De.success("   .");return}const at=ae||V;if(!G&&!at){const qt=await fetch("/api/citizen/otp/request",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:X,phoneNumber:v.replace(/-/g,"")})});if(!qt.ok)throw new Error(`otp request failed (${qt.status})`);let hn=(await qt.json()).devOtp;if(hn||(hn=window.prompt("  OTP 6 .")?.trim()),!hn){De.error("OTP  .");return}const ar=await fetch("/api/citizen/otp/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:X,otpCode:hn,phoneNumber:v.replace(/-/g,"")})});if(!ar.ok)throw new Error(`otp verify failed (${ar.status})`);L(!0)}else at&&L(!0);const jt=new Date(`${u}T${p}:00`).toISOString(),It=ce.find(qt=>qt.id===l)?.name||" ",an=await fetch("/api/citizen/appointments/book",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:X,appointmentAt:jt,organization:It})});if(!an.ok){const qt=await an.text();throw new Error(`booking failed (${an.status}): ${qt}`)}let Ut=null;try{Ut=await an.json()}catch{Ut=null}_e({status:Ut?.status==="CANCELED"?"CANCELLED":Ut?.status==="RESCHEDULED"?"CHANGED":"RESERVED",appointmentAt:Ut?.appointmentAt??jt,organization:It,reservationId:Ut?.appointmentId});const Ht={sessionId:X,otpVerified:!0};ue&&window.localStorage.setItem(ue,JSON.stringify(Ht)),n("complete"),De.success(" .")}catch(at){console.error(at);let jt=!1;try{const It=await le();_e({status:"RESERVED",appointmentAt:It.appointmentAt,organization:It.organization,caseId:It.demoCaseId,reservationId:It.reservationId,note:"      "}),n("complete"),De.success("      ."),jt=!0}catch(It){console.error(It)}if(!jt)try{await ye();try{const It=await le();_e({status:"RESERVED",appointmentAt:It.appointmentAt,organization:It.organization,caseId:It.demoCaseId,reservationId:It.reservationId,note:"      "})}catch(It){console.error(It)}n("complete"),De.success("   ."),jt=!0}catch(It){console.error(It)}if(!jt)if(ae||V){const It=new Date(`${u}T${p}:00`).toISOString(),an=ce.find(Ht=>Ht.id===l)?.name||" ",Ut=`citizen-offline-booking:${Date.now()}`;window.localStorage.setItem(Ut,JSON.stringify({name:x,phone:v,birthdate:S,selectedCenter:l,selectedDate:u,selectedTime:p,guardianPhone:A||null,additionalNotes:C||null})),_e({status:"RESERVED",appointmentAt:It,organization:an,caseId:"CASE-DEMO-IJY-001",note:"   "}),n("complete"),De.success("    .")}else De.error("  .    .")}finally{F(!1)}},z=()=>{console.log("Remind Later Request:",{timestamp:new Date().toISOString(),remindDate:new Date(Date.now()+336*60*60*1e3).toISOString()}),De.success("2   ")},Ne=()=>{console.log("Stop Contact Request:",{timestamp:new Date().toISOString()}),De.success("   "),$(!1)},me=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsx(In,{className:"border-2 border-primary bg-gradient-to-br from-blue-50 to-white",children:a.jsx(Dn,{className:"p-6",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"bg-primary p-3 rounded",children:a.jsx(sm,{className:"h-8 w-8 text-white"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"    "}),a.jsx("p",{className:"text-gray-700 mb-4",children:"     .      ."}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(el,{className:"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5"}),a.jsx("span",{className:"text-sm text-gray-700",children:" "})]}),a.jsxs("div",{className:"flex gap-2 mt-1",children:[a.jsx(el,{className:"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5"}),a.jsx("span",{className:"text-sm text-gray-700",children:" 30 "})]}),a.jsxs("div",{className:"flex gap-2 mt-1",children:[a.jsx(el,{className:"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5"}),a.jsx("span",{className:"text-sm text-gray-700",children:"  "})]})]})]})})}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs(Nt,{className:"w-full h-14 text-lg",onClick:Se,children:[" ",a.jsx(ji,{className:"h-5 w-5 ml-2"})]}),a.jsxs(Nt,{variant:"outline",className:"w-full h-14 text-lg",onClick:z,children:["   ",a.jsx(Zl,{className:"h-5 w-5 ml-2"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("button",{onClick:()=>n("faq"),className:"p-4 border-2 border-gray-300 rounded hover:border-primary transition-colors",children:[a.jsx(vo,{className:"h-6 w-6 text-primary mx-auto mb-2"}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:"  "})]}),a.jsxs("button",{onClick:()=>n("contact"),className:"p-4 border-2 border-gray-300 rounded hover:border-primary transition-colors",children:[a.jsx(ti,{className:"h-6 w-6 text-primary mx-auto mb-2"}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:"  "})]})]})]}),xe=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs(Nt,{variant:"ghost",onClick:()=>n("home"),className:"-ml-2",children:[a.jsx(Hl,{className:"h-4 w-4 mr-2"}),""]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:" "}),a.jsx("p",{className:"text-gray-600",children:"     "})]}),a.jsx(In,{children:a.jsxs(Dn,{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-start gap-3 p-4 border-2 border-primary rounded",children:[a.jsx(Cy,{id:"required",checked:r,onCheckedChange:at=>s(at)}),a.jsxs("div",{className:"flex-1",children:[a.jsxs(Ft,{htmlFor:"required",className:"cursor-pointer",children:[a.jsx("span",{className:"font-bold text-primary",children:""}),"     "]}),a.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"   ,   ,   ."})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-4 border-2 border-gray-300 rounded",children:[a.jsx(Cy,{id:"optional",checked:i,onCheckedChange:at=>o(at)}),a.jsxs("div",{className:"flex-1",children:[a.jsxs(Ft,{htmlFor:"optional",className:"cursor-pointer",children:[a.jsx("span",{className:"text-gray-600",children:""}),"    "]}),a.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"2           ."})]})]})]})}),a.jsxs(om,{children:[a.jsx(ea,{className:"h-4 w-4"}),a.jsx(lm,{className:"text-sm",children:"   ,      ."})]}),a.jsx(Nt,{className:"w-full",onClick:fe,children:""})]}),et=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs(Nt,{variant:"ghost",onClick:()=>n("consent"),className:"-ml-2",children:[a.jsx(Hl,{className:"h-4 w-4 mr-2"}),""]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:" "}),a.jsx("p",{className:"text-gray-600",children:"  "})]}),a.jsx("div",{className:"space-y-3",children:ce.map(at=>a.jsx("button",{onClick:()=>Te(at.id),className:"w-full p-4 border-2 border-gray-300 hover:border-primary rounded transition-colors text-left",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(sm,{className:"h-6 w-6 text-primary flex-shrink-0 mt-1"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:at.name}),a.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-1",children:[a.jsx(Vy,{className:"h-3 w-3"}),at.address]})]}),a.jsx(ji,{className:"h-5 w-5 text-gray-400 ml-auto"})]})},at.id))})]}),Fe=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs(Nt,{variant:"ghost",onClick:()=>n("center-select"),className:"-ml-2",children:[a.jsx(Hl,{className:"h-4 w-4 mr-2"}),""]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"   "}),a.jsx("p",{className:"text-gray-600",children:"   "})]}),a.jsx(In,{children:a.jsxs(Dn,{className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx(Ft,{htmlFor:"date",children:"  *"}),a.jsx($n,{id:"date",type:"date",value:u,onChange:at=>m(at.target.value),min:new Date().toISOString().split("T")[0],className:"mt-2"})]}),a.jsxs("div",{children:[a.jsx(Ft,{children:"  *"}),a.jsx("div",{className:"grid grid-cols-3 gap-2 mt-2",children:Z.map(at=>a.jsx("button",{onClick:()=>g(at),className:`p-3 border-2 rounded transition-colors ${p===at?"border-primary bg-blue-50 text-primary font-semibold":"border-gray-300 hover:border-gray-400"}`,children:at},at))})]})]})}),a.jsx(Nt,{className:"w-full",onClick:Pe,disabled:!u||!p,children:""})]}),pt=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs(Nt,{variant:"ghost",onClick:()=>n("datetime"),className:"-ml-2",children:[a.jsx(Hl,{className:"h-4 w-4 mr-2"}),""]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:" "}),a.jsx("p",{className:"text-gray-600",children:"    "})]}),a.jsx(In,{children:a.jsxs(Dn,{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx(Ft,{htmlFor:"name",children:" *"}),a.jsx($n,{id:"name",value:x,onChange:at=>y(at.target.value),placeholder:"",className:"mt-2"})]}),a.jsxs("div",{children:[a.jsx(Ft,{htmlFor:"phone",children:" *"}),a.jsx($n,{id:"phone",type:"tel",value:v,onChange:at=>N(at.target.value),placeholder:"010-1234-5678",className:"mt-2"})]}),a.jsxs("div",{children:[a.jsx(Ft,{htmlFor:"birthdate",children:" *"}),a.jsx($n,{id:"birthdate",type:"date",value:S,onChange:at=>j(at.target.value),className:"mt-2"})]}),a.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Cy,{id:"guardianToggle",checked:R,onCheckedChange:at=>{M(at),at||T("")}}),a.jsx(Ft,{htmlFor:"guardianToggle",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"  "})]}),R&&a.jsxs("div",{className:"mt-2",children:[a.jsx(Ft,{htmlFor:"guardianPhone",children:"  ()"}),a.jsx($n,{id:"guardianPhone",type:"tel",value:A,onChange:at=>T(at.target.value),placeholder:"010-0000-0000",className:"mt-2"})]}),a.jsxs("p",{className:"text-xs text-gray-400 mt-2 leading-relaxed",children:["        .",a.jsx("br",{}),"    ."]})]}),a.jsxs("div",{children:[a.jsx(Ft,{htmlFor:"notes",children:" ()"}),a.jsx(Xo,{id:"notes",value:C,onChange:at=>_(at.target.value),placeholder:"       ",rows:3,className:"mt-2"})]})]})}),a.jsxs(In,{className:"border-blue-300 bg-blue-50",children:[a.jsx(Cr,{children:a.jsx(Tr,{className:"text-blue-900",children:"  "})}),a.jsxs(Dn,{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-blue-700",children:":"}),a.jsx("span",{className:"font-medium text-blue-900",children:ce.find(at=>at.id===l)?.name})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-blue-700",children:":"}),a.jsx("span",{className:"font-medium text-blue-900",children:u&&new Date(u).toLocaleDateString("ko-KR")})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-blue-700",children:":"}),a.jsx("span",{className:"font-medium text-blue-900",children:p})]})]})]}),a.jsx(Nt,{className:"w-full",onClick:te,disabled:!x||!v||!S||H,children:H?" ...":" "})]}),St=()=>a.jsxs("div",{className:"space-y-6 text-center py-8",children:[a.jsx("div",{className:"bg-green-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto",children:a.jsx(el,{className:"h-12 w-12 text-green-600"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:" "}),a.jsx("p",{className:"text-gray-600",children:"   "})]}),a.jsx(In,{children:a.jsxs(Dn,{className:"p-6 space-y-3",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:":"}),a.jsx("span",{className:"font-medium",children:ce.find(at=>at.id===l)?.name})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:":"}),a.jsx("span",{className:"font-medium",children:u&&new Date(u).toLocaleDateString("ko-KR")})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:":"}),a.jsx("span",{className:"font-medium",children:p})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:":"}),a.jsx("span",{className:"font-medium",children:x})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:":"}),a.jsx("span",{className:"font-medium",children:v})]}),A&&a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:" :"}),a.jsx("span",{className:"font-medium",children:A.replace(/(\d{3})\d{4}(\d{4})/,"$1-****-$2")})]})]})}),a.jsxs(om,{children:[a.jsx(ea,{className:"h-4 w-4"}),a.jsx(lm,{className:"text-sm",children:" 3    .    ."})]}),a.jsx(Nt,{variant:"outline",className:"w-full",onClick:()=>n("home"),children:""})]}),qe=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs(Nt,{variant:"ghost",onClick:()=>n("home"),className:"-ml-2",children:[a.jsx(Hl,{className:"h-4 w-4 mr-2"}),""]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"  "}),a.jsx("p",{className:"text-gray-600",children:"  "})]}),a.jsx("div",{className:"space-y-4",children:ie.map((at,jt)=>a.jsxs(In,{children:[a.jsx(Cr,{children:a.jsx(Tr,{className:"text-base",children:at.question})}),a.jsx(Dn,{children:a.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:at.answer})})]},jt))})]}),rn=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs(Nt,{variant:"ghost",onClick:()=>n("home"),className:"-ml-2",children:[a.jsx(Hl,{className:"h-4 w-4 mr-2"}),""]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"  "}),a.jsx("p",{className:"text-gray-600",children:"    "})]}),a.jsxs(In,{children:[a.jsx(Cr,{children:a.jsx(Tr,{children:" "})}),a.jsxs(Dn,{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ti,{className:"h-5 w-5 text-primary"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:""}),a.jsx("p",{className:"font-medium",children:"02-1234-5678"})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(vJ,{className:"h-5 w-5 text-primary"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:""}),a.jsx("p",{className:"font-medium",children:"support@gangnam.go.kr"})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Vy,{className:"h-5 w-5 text-primary"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:""}),a.jsx("p",{className:"font-medium",children:"   524"})]})]})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(Nt,{variant:"outline",className:"w-full",children:"  "}),a.jsx(Nt,{variant:"destructive",className:"w-full",onClick:()=>$(!0),children:"  "})]}),a.jsx(Au,{open:P,onOpenChange:$,children:a.jsxs(_u,{children:[a.jsxs(Jy,{children:[a.jsx(Zy,{className:"text-red-600",children:"  "}),a.jsx(_C,{children:"  ?"})]}),a.jsxs(om,{className:"border-red-300 bg-red-50",children:[a.jsx(ea,{className:"h-4 w-4 text-red-600"}),a.jsx(lm,{className:"text-red-900 text-sm",children:"       .   ."})]}),a.jsxs(AC,{children:[a.jsx(Nt,{variant:"outline",onClick:()=>$(!1),children:""}),a.jsx(Nt,{variant:"destructive",onClick:Ne,children:" "})]})]})})]});return a.jsx("div",{className:"min-h-screen bg-gray-100 py-4 px-4",children:a.jsxs("div",{className:"max-w-lg mx-auto",children:[a.jsxs("div",{className:"mb-6 text-center",children:[a.jsx("div",{className:"flex items-center justify-center mb-2",children:a.jsx(sm,{className:"h-8 w-8 text-primary"})}),a.jsx("h1",{className:"text-xl font-bold text-gray-900",children:""}),a.jsx("p",{className:"text-sm text-gray-600",children:" "})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[t==="home"&&me(),t==="consent"&&xe(),t==="center-select"&&et(),t==="datetime"&&Fe(),t==="confirm"&&pt(),t==="complete"&&St(),t==="faq"&&qe(),t==="contact"&&rn()]}),a.jsx("button",{onClick:()=>U(!0),className:"fixed bottom-6 right-6 bg-primary hover:bg-primary-hover text-white rounded-full p-4 shadow-lg transition-transform hover:scale-110",children:a.jsx(LU,{className:"h-6 w-6"})}),a.jsx(Fne,{open:w,onOpenChange:U})]})})}const Wne=SR("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function rr({className:e,variant:t,asChild:n=!1,...r}){const s=n?iB:"span";return a.jsx(s,{"data-slot":"badge",className:he(Wne({variant:t}),e),...r})}const RC="   ,     .";function Yne(){return typeof window>"u"?"":new URLSearchParams(window.location.search).get("t")||""}function Qne(e){return e?e.toUpperCase().includes("3")?"STAGE3":e.toUpperCase().includes("2")?"STAGE2":"STAGE1":"STAGE1"}function Xne(e){const t=e.toLowerCase(),n=t.includes("s3")?"STAGE3":t.includes("s2")?"STAGE2":"STAGE1";return n==="STAGE1"?{stage:n,actionType:"BOOKING",centerName:" ",callbackPhone:"02-555-0199",caseAlias:"",privacyNotice:RC}:{stage:n,actionType:n==="STAGE3"?"FOLLOW_UP_HUB":"NEXT_STEP_HUB",centerName:" ",callbackPhone:"02-555-0199",caseAlias:"",dueDate:n==="STAGE3"?"7   ":"3   ",cta:{primary:n==="STAGE3"?"  ":"/  ",secondary:" "},checklist:n==="STAGE3"?["  ","     ","    "]:["/  ","  "," / "],privacyNotice:RC}}function Jne({token:e,data:t}){const[n,r]=h.useState(!1),s=t.centerName||"",i=t.callbackPhone||"02-555-0199",o=t.checklist||[],l=async()=>{try{await fetch("/api/public/sms/landing/action",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e,actionType:t.actionType||"HUB_ACTION",status:"ACTION_COMPLETED"})})}catch{}finally{r(!0)}};return a.jsx("div",{className:"min-h-screen bg-slate-100 py-6 px-4",children:a.jsxs("div",{className:"mx-auto max-w-xl space-y-4",children:[a.jsxs(In,{className:"border-blue-200 bg-blue-50",children:[a.jsxs(Cr,{className:"pb-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(rr,{className:"bg-blue-600 text-white border-blue-500",children:t.stage==="STAGE2"?"Stage2 ":"Stage3 "}),n&&a.jsx(rr,{className:"bg-emerald-600 text-white border-emerald-500",children:"ACTION_COMPLETED"})]}),a.jsxs(Tr,{className:"text-slate-900",children:[s," "]}),a.jsxs(zl,{className:"text-slate-700",children:[t.caseAlias||"","    ."]})]}),a.jsxs(Dn,{className:"space-y-3",children:[t.dueDate&&a.jsxs("div",{className:"flex items-center gap-2 rounded-lg border border-blue-200 bg-white px-3 py-2 text-sm text-slate-700",children:[a.jsx(uR,{className:"h-4 w-4 text-blue-600"}),t.dueDate]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-3",children:[a.jsxs("p",{className:"text-sm font-semibold text-slate-800 flex items-center gap-2",children:[a.jsx(pR,{className:"h-4 w-4"}),"  "]}),a.jsx("ul",{className:"mt-2 space-y-1.5 text-sm text-slate-700",children:o.map(c=>a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"mt-1 h-1.5 w-1.5 rounded-full bg-slate-500"}),c]},c))})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs(Nt,{onClick:l,className:"w-full",children:[a.jsx(Si,{className:"h-4 w-4 mr-1.5"}),t.cta?.primary||"  "]}),a.jsxs(Nt,{variant:"outline",className:"w-full",onClick:()=>{typeof window<"u"&&(window.location.href=`tel:${i}`)},children:[a.jsx(ti,{className:"h-4 w-4 mr-1.5"}),t.cta?.secondary||" "]})]})]})]}),a.jsx(In,{className:"border-slate-200",children:a.jsx(Dn,{className:"pt-4",children:a.jsxs("div",{className:"flex items-start gap-2 text-xs text-slate-600",children:[a.jsx(ea,{className:"h-4 w-4 mt-0.5"}),a.jsx("p",{children:t.privacyNotice||RC})]})})})]})})}function Zne(){const e=h.useMemo(()=>Yne(),[]),[t,n]=h.useState(!0),[r,s]=h.useState(null),[i,o]=h.useState(null);return h.useEffect(()=>{let l=!0;return(async()=>{if(!e){if(!l)return;s("   ."),n(!1);return}try{const u=await fetch(`/api/public/sms/landing?t=${encodeURIComponent(e)}`);if(!u.ok)throw new Error(`landing api error: ${u.status}`);const m=await u.json();if(!l)return;o({...m,stage:Qne(m.stage)}),s(null)}catch{if(!l)return;o(Xne(e)),s(null)}finally{l&&n(!1)}})(),()=>{l=!1}},[e]),t?a.jsx("div",{className:"min-h-screen bg-slate-100 flex items-center justify-center px-4",children:a.jsx(In,{className:"w-full max-w-md",children:a.jsx(Dn,{className:"pt-6 text-sm text-slate-600",children:"   ..."})})}):r||!i?a.jsx("div",{className:"min-h-screen bg-slate-100 flex items-center justify-center px-4",children:a.jsxs(In,{className:"w-full max-w-md border-red-200",children:[a.jsxs(Cr,{children:[a.jsx(Tr,{className:"text-red-700",children:" "}),a.jsx(zl,{children:"    ."})]}),a.jsx(Dn,{className:"text-sm text-slate-600",children:r||"  ."})]})}):i.stage==="STAGE1"?a.jsx(OC,{inviteToken:e}):a.jsx(Jne,{token:e,data:i})}var d2,JI;function ri(){if(JI)return d2;JI=1;var e=Array.isArray;return d2=e,d2}var u2,ZI;function eG(){if(ZI)return u2;ZI=1;var e=typeof _b=="object"&&_b&&_b.Object===Object&&_b;return u2=e,u2}var f2,eD;function fl(){if(eD)return f2;eD=1;var e=eG(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return f2=n,f2}var p2,tD;function Nh(){if(tD)return p2;tD=1;var e=fl(),t=e.Symbol;return p2=t,p2}var m2,nD;function ere(){if(nD)return m2;nD=1;var e=Nh(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,s=e?e.toStringTag:void 0;function i(o){var l=n.call(o,s),c=o[s];try{o[s]=void 0;var u=!0}catch{}var m=r.call(o);return u&&(l?o[s]=c:delete o[s]),m}return m2=i,m2}var h2,rD;function tre(){if(rD)return h2;rD=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return h2=n,h2}var g2,aD;function xd(){if(aD)return g2;aD=1;var e=Nh(),t=ere(),n=tre(),r="[object Null]",s="[object Undefined]",i=e?e.toStringTag:void 0;function o(l){return l==null?l===void 0?s:r:i&&i in Object(l)?t(l):n(l)}return g2=o,g2}var x2,sD;function pl(){if(sD)return x2;sD=1;function e(t){return t!=null&&typeof t=="object"}return x2=e,x2}var b2,iD;function Sh(){if(iD)return b2;iD=1;var e=xd(),t=pl(),n="[object Symbol]";function r(s){return typeof s=="symbol"||t(s)&&e(s)==n}return b2=r,b2}var y2,oD;function kR(){if(oD)return y2;oD=1;var e=ri(),t=Sh(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function s(i,o){if(e(i))return!1;var l=typeof i;return l=="number"||l=="symbol"||l=="boolean"||i==null||t(i)?!0:r.test(i)||!n.test(i)||o!=null&&i in Object(o)}return y2=s,y2}var v2,lD;function ml(){if(lD)return v2;lD=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return v2=e,v2}var N2,cD;function IR(){if(cD)return N2;cD=1;var e=xd(),t=ml(),n="[object AsyncFunction]",r="[object Function]",s="[object GeneratorFunction]",i="[object Proxy]";function o(l){if(!t(l))return!1;var c=e(l);return c==r||c==s||c==n||c==i}return N2=o,N2}var S2,dD;function nre(){if(dD)return S2;dD=1;var e=fl(),t=e["__core-js_shared__"];return S2=t,S2}var E2,uD;function rre(){if(uD)return E2;uD=1;var e=nre(),t=(function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function n(r){return!!t&&t in r}return E2=n,E2}var j2,fD;function tG(){if(fD)return j2;fD=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return j2=n,j2}var w2,pD;function are(){if(pD)return w2;pD=1;var e=IR(),t=rre(),n=ml(),r=tG(),s=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,c=o.toString,u=l.hasOwnProperty,m=RegExp("^"+c.call(u).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(g){if(!n(g)||t(g))return!1;var x=e(g)?m:i;return x.test(r(g))}return w2=p,w2}var A2,mD;function sre(){if(mD)return A2;mD=1;function e(t,n){return t?.[n]}return A2=e,A2}var _2,hD;function np(){if(hD)return _2;hD=1;var e=are(),t=sre();function n(r,s){var i=t(r,s);return e(i)?i:void 0}return _2=n,_2}var C2,gD;function K1(){if(gD)return C2;gD=1;var e=np(),t=e(Object,"create");return C2=t,C2}var T2,xD;function ire(){if(xD)return T2;xD=1;var e=K1();function t(){this.__data__=e?e(null):{},this.size=0}return T2=t,T2}var O2,bD;function ore(){if(bD)return O2;bD=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return O2=e,O2}var R2,yD;function lre(){if(yD)return R2;yD=1;var e=K1(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function s(i){var o=this.__data__;if(e){var l=o[i];return l===t?void 0:l}return r.call(o,i)?o[i]:void 0}return R2=s,R2}var k2,vD;function cre(){if(vD)return k2;vD=1;var e=K1(),t=Object.prototype,n=t.hasOwnProperty;function r(s){var i=this.__data__;return e?i[s]!==void 0:n.call(i,s)}return k2=r,k2}var I2,ND;function dre(){if(ND)return I2;ND=1;var e=K1(),t="__lodash_hash_undefined__";function n(r,s){var i=this.__data__;return this.size+=this.has(r)?0:1,i[r]=e&&s===void 0?t:s,this}return I2=n,I2}var D2,SD;function ure(){if(SD)return D2;SD=1;var e=ire(),t=ore(),n=lre(),r=cre(),s=dre();function i(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=n,i.prototype.has=r,i.prototype.set=s,D2=i,D2}var P2,ED;function fre(){if(ED)return P2;ED=1;function e(){this.__data__=[],this.size=0}return P2=e,P2}var M2,jD;function z1(){if(jD)return M2;jD=1;function e(t,n){return t===n||t!==t&&n!==n}return M2=e,M2}var L2,wD;function q1(){if(wD)return L2;wD=1;var e=z1();function t(n,r){for(var s=n.length;s--;)if(e(n[s][0],r))return s;return-1}return L2=t,L2}var $2,AD;function pre(){if(AD)return $2;AD=1;var e=q1(),t=Array.prototype,n=t.splice;function r(s){var i=this.__data__,o=e(i,s);if(o<0)return!1;var l=i.length-1;return o==l?i.pop():n.call(i,o,1),--this.size,!0}return $2=r,$2}var F2,_D;function mre(){if(_D)return F2;_D=1;var e=q1();function t(n){var r=this.__data__,s=e(r,n);return s<0?void 0:r[s][1]}return F2=t,F2}var U2,CD;function hre(){if(CD)return U2;CD=1;var e=q1();function t(n){return e(this.__data__,n)>-1}return U2=t,U2}var B2,TD;function gre(){if(TD)return B2;TD=1;var e=q1();function t(n,r){var s=this.__data__,i=e(s,n);return i<0?(++this.size,s.push([n,r])):s[i][1]=r,this}return B2=t,B2}var G2,OD;function V1(){if(OD)return G2;OD=1;var e=fre(),t=pre(),n=mre(),r=hre(),s=gre();function i(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=n,i.prototype.has=r,i.prototype.set=s,G2=i,G2}var H2,RD;function DR(){if(RD)return H2;RD=1;var e=np(),t=fl(),n=e(t,"Map");return H2=n,H2}var K2,kD;function xre(){if(kD)return K2;kD=1;var e=ure(),t=V1(),n=DR();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return K2=r,K2}var z2,ID;function bre(){if(ID)return z2;ID=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return z2=e,z2}var q2,DD;function W1(){if(DD)return q2;DD=1;var e=bre();function t(n,r){var s=n.__data__;return e(r)?s[typeof r=="string"?"string":"hash"]:s.map}return q2=t,q2}var V2,PD;function yre(){if(PD)return V2;PD=1;var e=W1();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return V2=t,V2}var W2,MD;function vre(){if(MD)return W2;MD=1;var e=W1();function t(n){return e(this,n).get(n)}return W2=t,W2}var Y2,LD;function Nre(){if(LD)return Y2;LD=1;var e=W1();function t(n){return e(this,n).has(n)}return Y2=t,Y2}var Q2,$D;function Sre(){if($D)return Q2;$D=1;var e=W1();function t(n,r){var s=e(this,n),i=s.size;return s.set(n,r),this.size+=s.size==i?0:1,this}return Q2=t,Q2}var X2,FD;function PR(){if(FD)return X2;FD=1;var e=xre(),t=yre(),n=vre(),r=Nre(),s=Sre();function i(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=n,i.prototype.has=r,i.prototype.set=s,X2=i,X2}var J2,UD;function nG(){if(UD)return J2;UD=1;var e=PR(),t="Expected a function";function n(r,s){if(typeof r!="function"||s!=null&&typeof s!="function")throw new TypeError(t);var i=function(){var o=arguments,l=s?s.apply(this,o):o[0],c=i.cache;if(c.has(l))return c.get(l);var u=r.apply(this,o);return i.cache=c.set(l,u)||c,u};return i.cache=new(n.Cache||e),i}return n.Cache=e,J2=n,J2}var Z2,BD;function Ere(){if(BD)return Z2;BD=1;var e=nG(),t=500;function n(r){var s=e(r,function(o){return i.size===t&&i.clear(),o}),i=s.cache;return s}return Z2=n,Z2}var eE,GD;function jre(){if(GD)return eE;GD=1;var e=Ere(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(s){var i=[];return s.charCodeAt(0)===46&&i.push(""),s.replace(t,function(o,l,c,u){i.push(c?u.replace(n,"$1"):l||o)}),i});return eE=r,eE}var tE,HD;function Y1(){if(HD)return tE;HD=1;function e(t,n){for(var r=-1,s=t==null?0:t.length,i=Array(s);++r<s;)i[r]=n(t[r],r,t);return i}return tE=e,tE}var nE,KD;function wre(){if(KD)return nE;KD=1;var e=Nh(),t=Y1(),n=ri(),r=Sh(),s=e?e.prototype:void 0,i=s?s.toString:void 0;function o(l){if(typeof l=="string")return l;if(n(l))return t(l,o)+"";if(r(l))return i?i.call(l):"";var c=l+"";return c=="0"&&1/l==-1/0?"-0":c}return nE=o,nE}var rE,zD;function rG(){if(zD)return rE;zD=1;var e=wre();function t(n){return n==null?"":e(n)}return rE=t,rE}var aE,qD;function Q1(){if(qD)return aE;qD=1;var e=ri(),t=kR(),n=jre(),r=rG();function s(i,o){return e(i)?i:t(i,o)?[i]:n(r(i))}return aE=s,aE}var sE,VD;function Ax(){if(VD)return sE;VD=1;var e=Sh();function t(n){if(typeof n=="string"||e(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return sE=t,sE}var iE,WD;function X1(){if(WD)return iE;WD=1;var e=Q1(),t=Ax();function n(r,s){s=e(s,r);for(var i=0,o=s.length;r!=null&&i<o;)r=r[t(s[i++])];return i&&i==o?r:void 0}return iE=n,iE}var oE,YD;function aG(){if(YD)return oE;YD=1;var e=X1();function t(n,r,s){var i=n==null?void 0:e(n,r);return i===void 0?s:i}return oE=t,oE}var Are=aG();const Ei=Jn(Are);var lE,QD;function _re(){if(QD)return lE;QD=1;function e(t){return t==null}return lE=e,lE}var Cre=_re();const nn=Jn(Cre);var cE,XD;function Tre(){if(XD)return cE;XD=1;var e=xd(),t=ri(),n=pl(),r="[object String]";function s(i){return typeof i=="string"||!t(i)&&n(i)&&e(i)==r}return cE=s,cE}var Ore=Tre();const Hf=Jn(Ore);var Rre=IR();const Yt=Jn(Rre);var kre=ml();const Eh=Jn(kre);var dE={exports:{}},tr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JD;function Ire(){if(JD)return tr;JD=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),x=Symbol.for("react.offscreen"),y;y=Symbol.for("react.module.reference");function v(N){if(typeof N=="object"&&N!==null){var S=N.$$typeof;switch(S){case e:switch(N=N.type,N){case n:case s:case r:case u:case m:return N;default:switch(N=N&&N.$$typeof,N){case l:case o:case c:case g:case p:case i:return N;default:return S}}case t:return S}}}return tr.ContextConsumer=o,tr.ContextProvider=i,tr.Element=e,tr.ForwardRef=c,tr.Fragment=n,tr.Lazy=g,tr.Memo=p,tr.Portal=t,tr.Profiler=s,tr.StrictMode=r,tr.Suspense=u,tr.SuspenseList=m,tr.isAsyncMode=function(){return!1},tr.isConcurrentMode=function(){return!1},tr.isContextConsumer=function(N){return v(N)===o},tr.isContextProvider=function(N){return v(N)===i},tr.isElement=function(N){return typeof N=="object"&&N!==null&&N.$$typeof===e},tr.isForwardRef=function(N){return v(N)===c},tr.isFragment=function(N){return v(N)===n},tr.isLazy=function(N){return v(N)===g},tr.isMemo=function(N){return v(N)===p},tr.isPortal=function(N){return v(N)===t},tr.isProfiler=function(N){return v(N)===s},tr.isStrictMode=function(N){return v(N)===r},tr.isSuspense=function(N){return v(N)===u},tr.isSuspenseList=function(N){return v(N)===m},tr.isValidElementType=function(N){return typeof N=="string"||typeof N=="function"||N===n||N===s||N===r||N===u||N===m||N===x||typeof N=="object"&&N!==null&&(N.$$typeof===g||N.$$typeof===p||N.$$typeof===i||N.$$typeof===o||N.$$typeof===c||N.$$typeof===y||N.getModuleId!==void 0)},tr.typeOf=v,tr}var ZD;function Dre(){return ZD||(ZD=1,dE.exports=Ire()),dE.exports}var Pre=Dre(),uE,eP;function sG(){if(eP)return uE;eP=1;var e=xd(),t=pl(),n="[object Number]";function r(s){return typeof s=="number"||t(s)&&e(s)==n}return uE=r,uE}var fE,tP;function Mre(){if(tP)return fE;tP=1;var e=sG();function t(n){return e(n)&&n!=+n}return fE=t,fE}var Lre=Mre();const Lu=Jn(Lre);var $re=sG();const Fre=Jn($re);var Js=function(t){return t===0?0:t>0?1:-1},Tf=function(t){return Hf(t)&&t.indexOf("%")===t.length-1},lt=function(t){return Fre(t)&&!Lu(t)},Ure=function(t){return nn(t)},$a=function(t){return lt(t)||Hf(t)},Bre=0,bd=function(t){var n=++Bre;return"".concat(t||"").concat(n)},Zs=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!lt(t)&&!Hf(t))return r;var i;if(Tf(t)){var o=t.indexOf("%");i=n*parseFloat(t.slice(0,o))/100}else i=+t;return Lu(i)&&(i=r),s&&i>n&&(i=n),i},bu=function(t){if(!t)return null;var n=Object.keys(t);return n&&n.length?t[n[0]]:null},Gre=function(t){if(!Array.isArray(t))return!1;for(var n=t.length,r={},s=0;s<n;s++)if(!r[t[s]])r[t[s]]=!0;else return!0;return!1},Fr=function(t,n){return lt(t)&&lt(n)?function(r){return t+r*(n-t)}:function(){return n}};function ev(e,t,n){return!e||!e.length?null:e.find(function(r){return r&&(typeof t=="function"?t(r):Ei(r,t))===n})}var Hre=function(t){if(!t||!t.length)return null;for(var n=t.length,r=0,s=0,i=0,o=0,l=1/0,c=-1/0,u=0,m=0,p=0;p<n;p++)u=t[p].cx||0,m=t[p].cy||0,r+=u,s+=m,i+=u*m,o+=u*u,l=Math.min(l,u),c=Math.max(c,u);var g=n*o!==r*r?(n*i-r*s)/(n*o-r*r):0;return{xmin:l,xmax:c,a:g,b:(s-g*r)/n}},Kre=function(t,n){return lt(t)&&lt(n)?t-n:Hf(t)&&Hf(n)?t.localeCompare(n):t instanceof Date&&n instanceof Date?t.getTime()-n.getTime():String(t).localeCompare(String(n))};function dm(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function kC(e){"@babel/helpers - typeof";return kC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kC(e)}var zre=["viewBox","children"],qre=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],nP=["points","pathLength"],pE={svg:zre,polygon:nP,polyline:nP},MR=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],tv=function(t,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(h.isValidElement(t)&&(r=t.props),!Eh(r))return null;var s={};return Object.keys(r).forEach(function(i){MR.includes(i)&&(s[i]=n||function(o){return r[i](r,o)})}),s},Vre=function(t,n,r){return function(s){return t(n,r,s),null}},Ou=function(t,n,r){if(!Eh(t)||kC(t)!=="object")return null;var s=null;return Object.keys(t).forEach(function(i){var o=t[i];MR.includes(i)&&typeof o=="function"&&(s||(s={}),s[i]=Vre(o,n,r))}),s},Wre=["children"],Yre=["children"];function rP(e,t){if(e==null)return{};var n=Qre(e,t),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Qre(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function IC(e){"@babel/helpers - typeof";return IC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},IC(e)}var aP={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},nd=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},sP=null,mE=null,J1=function e(t){if(t===sP&&Array.isArray(mE))return mE;var n=[];return h.Children.forEach(t,function(r){nn(r)||(Pre.isFragment(r)?n=n.concat(e(r.props.children)):n.push(r))}),mE=n,sP=t,n};function ni(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(function(s){return nd(s)}):r=[nd(t)],J1(e).forEach(function(s){var i=Ei(s,"type.displayName")||Ei(s,"type.name");r.indexOf(i)!==-1&&n.push(s)}),n}function Ts(e,t){var n=ni(e,t);return n&&n[0]}var DC=function(t){if(!t||!t.props)return!1;var n=t.props,r=n.width,s=n.height;return!(!lt(r)||r<=0||!lt(s)||s<=0)},Xre=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],iG=function(t){return t&&t.type&&Hf(t.type)&&Xre.indexOf(t.type)>=0},oG=function(t){return t&&IC(t)==="object"&&"clipDot"in t},Jre=function(t,n,r,s){var i,o=(i=pE?.[s])!==null&&i!==void 0?i:[];return n.startsWith("data-")||!Yt(t)&&(s&&o.includes(n)||qre.includes(n))||r&&MR.includes(n)},Zre=function(t){var n=[];return J1(t).forEach(function(r){iG(r)&&n.push(r)}),n},Pt=function(t,n,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(h.isValidElement(t)&&(s=t.props),!Eh(s))return null;var i={};return Object.keys(s).forEach(function(o){var l;Jre((l=s)===null||l===void 0?void 0:l[o],o,n,r)&&(i[o]=s[o])}),i},PC=function e(t,n){if(t===n)return!0;var r=h.Children.count(t);if(r!==h.Children.count(n))return!1;if(r===0)return!0;if(r===1)return iP(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var s=0;s<r;s++){var i=t[s],o=n[s];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!iP(i,o))return!1}return!0},iP=function(t,n){if(nn(t)&&nn(n))return!0;if(!nn(t)&&!nn(n)){var r=t.props||{},s=r.children,i=rP(r,Wre),o=n.props||{},l=o.children,c=rP(o,Yre);return s&&l?dm(i,c)&&PC(s,l):!s&&!l?dm(i,c):!1}return!1},oP=function(t,n){var r=[],s={};return J1(t).forEach(function(i,o){if(iG(i))r.push(i);else if(i){var l=nd(i.type),c=n[l]||{},u=c.handler,m=c.once;if(u&&(!m||!s[l])){var p=u(i,l,o);r.push(p),s[l]=!0}}}),r},eae=function(t){var n=t&&t.type;return n&&aP[n]?aP[n]:null},tae=function(t,n){return J1(n).indexOf(t)},nae=["children","width","height","viewBox","className","style","title","desc"];function MC(){return MC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},MC.apply(this,arguments)}function rae(e,t){if(e==null)return{};var n=aae(e,t),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function aae(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function nv(e){var t=e.children,n=e.width,r=e.height,s=e.viewBox,i=e.className,o=e.style,l=e.title,c=e.desc,u=rae(e,nae),m=s||{width:n,height:r,x:0,y:0},p=fn("recharts-surface",i);return W.createElement("svg",MC({},Pt(u,!0,"svg"),{className:p,width:n,height:r,style:o,viewBox:"".concat(m.x," ").concat(m.y," ").concat(m.width," ").concat(m.height)}),W.createElement("title",null,l),W.createElement("desc",null,c),t)}var sae=["children","className"];function LC(){return LC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},LC.apply(this,arguments)}function iae(e,t){if(e==null)return{};var n=oae(e,t),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function oae(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var mn=W.forwardRef(function(e,t){var n=e.children,r=e.className,s=iae(e,sae),i=fn("recharts-layer",r);return W.createElement("g",LC({className:i},Pt(s,!0),{ref:t}),n)}),rl=function(t,n){for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i]},hE,lP;function lG(){if(lP)return hE;lP=1;function e(t,n,r){var s=-1,i=t.length;n<0&&(n=-n>i?0:i+n),r=r>i?i:r,r<0&&(r+=i),i=n>r?0:r-n>>>0,n>>>=0;for(var o=Array(i);++s<i;)o[s]=t[s+n];return o}return hE=e,hE}var gE,cP;function lae(){if(cP)return gE;cP=1;var e=lG();function t(n,r,s){var i=n.length;return s=s===void 0?i:s,!r&&s>=i?n:e(n,r,s)}return gE=t,gE}var xE,dP;function cG(){if(dP)return xE;dP=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",s=t+n+r,i="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+e+s+i+"]");function c(u){return l.test(u)}return xE=c,xE}var bE,uP;function cae(){if(uP)return bE;uP=1;function e(t){return t.split("")}return bE=e,bE}var yE,fP;function dae(){if(fP)return yE;fP=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",s=t+n+r,i="\\ufe0e\\ufe0f",o="["+e+"]",l="["+s+"]",c="\\ud83c[\\udffb-\\udfff]",u="(?:"+l+"|"+c+")",m="[^"+e+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",g="[\\ud800-\\udbff][\\udc00-\\udfff]",x="\\u200d",y=u+"?",v="["+i+"]?",N="(?:"+x+"(?:"+[m,p,g].join("|")+")"+v+y+")*",S=v+y+N,j="(?:"+[m+l+"?",l,p,g,o].join("|")+")",C=RegExp(c+"(?="+c+")|"+j+S,"g");function _(A){return A.match(C)||[]}return yE=_,yE}var vE,pP;function uae(){if(pP)return vE;pP=1;var e=cae(),t=cG(),n=dae();function r(s){return t(s)?n(s):e(s)}return vE=r,vE}var NE,mP;function fae(){if(mP)return NE;mP=1;var e=lae(),t=cG(),n=uae(),r=rG();function s(i){return function(o){o=r(o);var l=t(o)?n(o):void 0,c=l?l[0]:o.charAt(0),u=l?e(l,1).join(""):o.slice(1);return c[i]()+u}}return NE=s,NE}var SE,hP;function pae(){if(hP)return SE;hP=1;var e=fae(),t=e("toUpperCase");return SE=t,SE}var mae=pae();const Z1=Jn(mae);function Sr(e){return function(){return e}}const dG=Math.cos,rv=Math.sin,hl=Math.sqrt,av=Math.PI,eN=2*av,$C=Math.PI,FC=2*$C,Sf=1e-6,hae=FC-Sf;function uG(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function gae(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return uG;const n=10**t;return function(r){this._+=r[0];for(let s=1,i=r.length;s<i;++s)this._+=Math.round(arguments[s]*n)/n+r[s]}}class xae{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?uG:gae(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,s){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+s}`}bezierCurveTo(t,n,r,s,i,o){this._append`C${+t},${+n},${+r},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,n,r,s,i){if(t=+t,n=+n,r=+r,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=r-t,u=s-n,m=o-t,p=l-n,g=m*m+p*p;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(g>Sf)if(!(Math.abs(p*c-u*m)>Sf)||!i)this._append`L${this._x1=t},${this._y1=n}`;else{let x=r-o,y=s-l,v=c*c+u*u,N=x*x+y*y,S=Math.sqrt(v),j=Math.sqrt(g),C=i*Math.tan(($C-Math.acos((v+g-N)/(2*S*j)))/2),_=C/j,A=C/S;Math.abs(_-1)>Sf&&this._append`L${t+_*m},${n+_*p}`,this._append`A${i},${i},0,0,${+(p*x>m*y)},${this._x1=t+A*c},${this._y1=n+A*u}`}}arc(t,n,r,s,i,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(s),c=r*Math.sin(s),u=t+l,m=n+c,p=1^o,g=o?s-i:i-s;this._x1===null?this._append`M${u},${m}`:(Math.abs(this._x1-u)>Sf||Math.abs(this._y1-m)>Sf)&&this._append`L${u},${m}`,r&&(g<0&&(g=g%FC+FC),g>hae?this._append`A${r},${r},0,1,${p},${t-l},${n-c}A${r},${r},0,1,${p},${this._x1=u},${this._y1=m}`:g>Sf&&this._append`A${r},${r},0,${+(g>=$C)},${p},${this._x1=t+r*Math.cos(i)},${this._y1=n+r*Math.sin(i)}`)}rect(t,n,r,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+s}h${-r}Z`}toString(){return this._}}function LR(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new xae(t)}function $R(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function fG(e){this._context=e}fG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function tN(e){return new fG(e)}function pG(e){return e[0]}function mG(e){return e[1]}function hG(e,t){var n=Sr(!0),r=null,s=tN,i=null,o=LR(l);e=typeof e=="function"?e:e===void 0?pG:Sr(e),t=typeof t=="function"?t:t===void 0?mG:Sr(t);function l(c){var u,m=(c=$R(c)).length,p,g=!1,x;for(r==null&&(i=s(x=o())),u=0;u<=m;++u)!(u<m&&n(p=c[u],u,c))===g&&((g=!g)?i.lineStart():i.lineEnd()),g&&i.point(+e(p,u,c),+t(p,u,c));if(x)return i=null,x+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Sr(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Sr(+c),l):t},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Sr(!!c),l):n},l.curve=function(c){return arguments.length?(s=c,r!=null&&(i=s(r)),l):s},l.context=function(c){return arguments.length?(c==null?r=i=null:i=s(r=c),l):r},l}function $b(e,t,n){var r=null,s=Sr(!0),i=null,o=tN,l=null,c=LR(u);e=typeof e=="function"?e:e===void 0?pG:Sr(+e),t=typeof t=="function"?t:Sr(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?mG:Sr(+n);function u(p){var g,x,y,v=(p=$R(p)).length,N,S=!1,j,C=new Array(v),_=new Array(v);for(i==null&&(l=o(j=c())),g=0;g<=v;++g){if(!(g<v&&s(N=p[g],g,p))===S)if(S=!S)x=g,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),y=g-1;y>=x;--y)l.point(C[y],_[y]);l.lineEnd(),l.areaEnd()}S&&(C[g]=+e(N,g,p),_[g]=+t(N,g,p),l.point(r?+r(N,g,p):C[g],n?+n(N,g,p):_[g]))}if(j)return l=null,j+""||null}function m(){return hG().defined(s).curve(o).context(i)}return u.x=function(p){return arguments.length?(e=typeof p=="function"?p:Sr(+p),r=null,u):e},u.x0=function(p){return arguments.length?(e=typeof p=="function"?p:Sr(+p),u):e},u.x1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:Sr(+p),u):r},u.y=function(p){return arguments.length?(t=typeof p=="function"?p:Sr(+p),n=null,u):t},u.y0=function(p){return arguments.length?(t=typeof p=="function"?p:Sr(+p),u):t},u.y1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:Sr(+p),u):n},u.lineX0=u.lineY0=function(){return m().x(e).y(t)},u.lineY1=function(){return m().x(e).y(n)},u.lineX1=function(){return m().x(r).y(t)},u.defined=function(p){return arguments.length?(s=typeof p=="function"?p:Sr(!!p),u):s},u.curve=function(p){return arguments.length?(o=p,i!=null&&(l=o(i)),u):o},u.context=function(p){return arguments.length?(p==null?i=l=null:l=o(i=p),u):i},u}class gG{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function bae(e){return new gG(e,!0)}function yae(e){return new gG(e,!1)}const FR={draw(e,t){const n=hl(t/av);e.moveTo(n,0),e.arc(0,0,n,0,eN)}},vae={draw(e,t){const n=hl(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},xG=hl(1/3),Nae=xG*2,Sae={draw(e,t){const n=hl(t/Nae),r=n*xG;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},Eae={draw(e,t){const n=hl(t),r=-n/2;e.rect(r,r,n,n)}},jae=.8908130915292852,bG=rv(av/10)/rv(7*av/10),wae=rv(eN/10)*bG,Aae=-dG(eN/10)*bG,_ae={draw(e,t){const n=hl(t*jae),r=wae*n,s=Aae*n;e.moveTo(0,-n),e.lineTo(r,s);for(let i=1;i<5;++i){const o=eN*i/5,l=dG(o),c=rv(o);e.lineTo(c*n,-l*n),e.lineTo(l*r-c*s,c*r+l*s)}e.closePath()}},EE=hl(3),Cae={draw(e,t){const n=-hl(t/(EE*3));e.moveTo(0,n*2),e.lineTo(-EE*n,-n),e.lineTo(EE*n,-n),e.closePath()}},ro=-.5,ao=hl(3)/2,UC=1/hl(12),Tae=(UC/2+1)*3,Oae={draw(e,t){const n=hl(t/Tae),r=n/2,s=n*UC,i=r,o=n*UC+n,l=-i,c=o;e.moveTo(r,s),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(ro*r-ao*s,ao*r+ro*s),e.lineTo(ro*i-ao*o,ao*i+ro*o),e.lineTo(ro*l-ao*c,ao*l+ro*c),e.lineTo(ro*r+ao*s,ro*s-ao*r),e.lineTo(ro*i+ao*o,ro*o-ao*i),e.lineTo(ro*l+ao*c,ro*c-ao*l),e.closePath()}};function Rae(e,t){let n=null,r=LR(s);e=typeof e=="function"?e:Sr(e||FR),t=typeof t=="function"?t:Sr(t===void 0?64:+t);function s(){let i;if(n||(n=i=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),i)return n=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:Sr(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:Sr(+i),s):t},s.context=function(i){return arguments.length?(n=i??null,s):n},s}function sv(){}function iv(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function yG(e){this._context=e}yG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:iv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:iv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function kae(e){return new yG(e)}function vG(e){this._context=e}vG.prototype={areaStart:sv,areaEnd:sv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:iv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Iae(e){return new vG(e)}function NG(e){this._context=e}NG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:iv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Dae(e){return new NG(e)}function SG(e){this._context=e}SG.prototype={areaStart:sv,areaEnd:sv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Pae(e){return new SG(e)}function gP(e){return e<0?-1:1}function xP(e,t,n){var r=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(r||s<0&&-0),o=(n-e._y1)/(s||r<0&&-0),l=(i*s+o*r)/(r+s);return(gP(i)+gP(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function bP(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function jE(e,t,n){var r=e._x0,s=e._y0,i=e._x1,o=e._y1,l=(i-r)/3;e._context.bezierCurveTo(r+l,s+l*t,i-l,o-l*n,i,o)}function ov(e){this._context=e}ov.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:jE(this,this._t0,bP(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,jE(this,bP(this,n=xP(this,e,t)),n);break;default:jE(this,this._t0,n=xP(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function EG(e){this._context=new jG(e)}(EG.prototype=Object.create(ov.prototype)).point=function(e,t){ov.prototype.point.call(this,t,e)};function jG(e){this._context=e}jG.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,s,i){this._context.bezierCurveTo(t,e,r,n,i,s)}};function Mae(e){return new ov(e)}function Lae(e){return new EG(e)}function wG(e){this._context=e}wG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=yP(e),s=yP(t),i=0,o=1;o<n;++i,++o)this._context.bezierCurveTo(r[0][i],s[0][i],r[1][i],s[1][i],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function yP(e){var t,n=e.length-1,r,s=new Array(n),i=new Array(n),o=new Array(n);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[n-1]=2,i[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=s[t]/i[t-1],i[t]-=r,o[t]-=r*o[t-1];for(s[n-1]=o[n-1]/i[n-1],t=n-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[n-1]=(e[n]+s[n-1])/2,t=0;t<n-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function $ae(e){return new wG(e)}function nN(e,t){this._context=e,this._t=t}nN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Fae(e){return new nN(e,.5)}function Uae(e){return new nN(e,0)}function Bae(e){return new nN(e,1)}function _m(e,t){if((o=e.length)>1)for(var n=1,r,s,i=e[t[0]],o,l=i.length;n<o;++n)for(s=i,i=e[t[n]],r=0;r<l;++r)i[r][1]+=i[r][0]=isNaN(s[r][1])?s[r][0]:s[r][1]}function BC(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Gae(e,t){return e[t]}function Hae(e){const t=[];return t.key=e,t}function Kae(){var e=Sr([]),t=BC,n=_m,r=Gae;function s(i){var o=Array.from(e.apply(this,arguments),Hae),l,c=o.length,u=-1,m;for(const p of i)for(l=0,++u;l<c;++l)(o[l][u]=[0,+r(p,o[l].key,u,i)]).data=p;for(l=0,m=$R(t(o));l<c;++l)o[m[l]].index=l;return n(o,m),o}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Sr(Array.from(i)),s):e},s.value=function(i){return arguments.length?(r=typeof i=="function"?i:Sr(+i),s):r},s.order=function(i){return arguments.length?(t=i==null?BC:typeof i=="function"?i:Sr(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(n=i??_m,s):n},s}function zae(e,t){if((r=e.length)>0){for(var n,r,s=0,i=e[0].length,o;s<i;++s){for(o=n=0;n<r;++n)o+=e[n][s][1]||0;if(o)for(n=0;n<r;++n)e[n][s][1]/=o}_m(e,t)}}function qae(e,t){if((s=e.length)>0){for(var n=0,r=e[t[0]],s,i=r.length;n<i;++n){for(var o=0,l=0;o<s;++o)l+=e[o][n][1]||0;r[n][1]+=r[n][0]=-l/2}_m(e,t)}}function Vae(e,t){if(!(!((o=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var n=0,r=1,s,i,o;r<i;++r){for(var l=0,c=0,u=0;l<o;++l){for(var m=e[t[l]],p=m[r][1]||0,g=m[r-1][1]||0,x=(p-g)/2,y=0;y<l;++y){var v=e[t[y]],N=v[r][1]||0,S=v[r-1][1]||0;x+=N-S}c+=p,u+=x*p}s[r-1][1]+=s[r-1][0]=n,c&&(n-=u/c)}s[r-1][1]+=s[r-1][0]=n,_m(e,t)}}function Rg(e){"@babel/helpers - typeof";return Rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rg(e)}var Wae=["type","size","sizeType"];function GC(){return GC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},GC.apply(this,arguments)}function vP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function NP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vP(Object(n),!0).forEach(function(r){Yae(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Yae(e,t,n){return t=Qae(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qae(e){var t=Xae(e,"string");return Rg(t)=="symbol"?t:t+""}function Xae(e,t){if(Rg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Rg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jae(e,t){if(e==null)return{};var n=Zae(e,t),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Zae(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var AG={symbolCircle:FR,symbolCross:vae,symbolDiamond:Sae,symbolSquare:Eae,symbolStar:_ae,symbolTriangle:Cae,symbolWye:Oae},ese=Math.PI/180,tse=function(t){var n="symbol".concat(Z1(t));return AG[n]||FR},nse=function(t,n,r){if(n==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var s=18*ese;return 1.25*t*t*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},rse=function(t,n){AG["symbol".concat(Z1(t))]=n},rN=function(t){var n=t.type,r=n===void 0?"circle":n,s=t.size,i=s===void 0?64:s,o=t.sizeType,l=o===void 0?"area":o,c=Jae(t,Wae),u=NP(NP({},c),{},{type:r,size:i,sizeType:l}),m=function(){var N=tse(r),S=Rae().type(N).size(nse(i,l,r));return S()},p=u.className,g=u.cx,x=u.cy,y=Pt(u,!0);return g===+g&&x===+x&&i===+i?W.createElement("path",GC({},y,{className:fn("recharts-symbols",p),transform:"translate(".concat(g,", ").concat(x,")"),d:m()})):null};rN.registerSymbol=rse;function Cm(e){"@babel/helpers - typeof";return Cm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cm(e)}function HC(){return HC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},HC.apply(this,arguments)}function SP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function ase(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SP(Object(n),!0).forEach(function(r){kg(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function sse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ise(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,CG(r.key),r)}}function ose(e,t,n){return t&&ise(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function lse(e,t,n){return t=lv(t),cse(e,_G()?Reflect.construct(t,n||[],lv(e).constructor):t.apply(e,n))}function cse(e,t){if(t&&(Cm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dse(e)}function dse(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _G(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_G=function(){return!!e})()}function lv(e){return lv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},lv(e)}function use(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&KC(e,t)}function KC(e,t){return KC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},KC(e,t)}function kg(e,t,n){return t=CG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CG(e){var t=fse(e,"string");return Cm(t)=="symbol"?t:t+""}function fse(e,t){if(Cm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Cm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var so=32,UR=(function(e){function t(){return sse(this,t),lse(this,t,arguments)}return use(t,e),ose(t,[{key:"renderIcon",value:function(r){var s=this.props.inactiveColor,i=so/2,o=so/6,l=so/3,c=r.inactive?s:r.color;if(r.type==="plainline")return W.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:i,x2:so,y2:i,className:"recharts-legend-icon"});if(r.type==="line")return W.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(so,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(r.type==="rect")return W.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(so/8,"h").concat(so,"v").concat(so*3/4,"h").concat(-so,"z"),className:"recharts-legend-icon"});if(W.isValidElement(r.legendIcon)){var u=ase({},r);return delete u.legendIcon,W.cloneElement(r.legendIcon,u)}return W.createElement(rN,{fill:c,cx:i,cy:i,size:so,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,s=this.props,i=s.payload,o=s.iconSize,l=s.layout,c=s.formatter,u=s.inactiveColor,m={x:0,y:0,width:so,height:so},p={display:l==="horizontal"?"inline-block":"block",marginRight:10},g={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(x,y){var v=x.formatter||c,N=fn(kg(kg({"recharts-legend-item":!0},"legend-item-".concat(y),!0),"inactive",x.inactive));if(x.type==="none")return null;var S=Yt(x.value)?null:x.value;rl(!Yt(x.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var j=x.inactive?u:x.color;return W.createElement("li",HC({className:N,style:p,key:"legend-item-".concat(y)},Ou(r.props,x,y)),W.createElement(nv,{width:o,height:o,viewBox:m,style:g},r.renderIcon(x)),W.createElement("span",{className:"recharts-legend-item-text",style:{color:j}},v?v(S,x,y):S))})}},{key:"render",value:function(){var r=this.props,s=r.payload,i=r.layout,o=r.align;if(!s||!s.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return W.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])})(h.PureComponent);kg(UR,"displayName","Legend");kg(UR,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var wE,EP;function pse(){if(EP)return wE;EP=1;var e=V1();function t(){this.__data__=new e,this.size=0}return wE=t,wE}var AE,jP;function mse(){if(jP)return AE;jP=1;function e(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}return AE=e,AE}var _E,wP;function hse(){if(wP)return _E;wP=1;function e(t){return this.__data__.get(t)}return _E=e,_E}var CE,AP;function gse(){if(AP)return CE;AP=1;function e(t){return this.__data__.has(t)}return CE=e,CE}var TE,_P;function xse(){if(_P)return TE;_P=1;var e=V1(),t=DR(),n=PR(),r=200;function s(i,o){var l=this.__data__;if(l instanceof e){var c=l.__data__;if(!t||c.length<r-1)return c.push([i,o]),this.size=++l.size,this;l=this.__data__=new n(c)}return l.set(i,o),this.size=l.size,this}return TE=s,TE}var OE,CP;function BR(){if(CP)return OE;CP=1;var e=V1(),t=pse(),n=mse(),r=hse(),s=gse(),i=xse();function o(l){var c=this.__data__=new e(l);this.size=c.size}return o.prototype.clear=t,o.prototype.delete=n,o.prototype.get=r,o.prototype.has=s,o.prototype.set=i,OE=o,OE}var RE,TP;function bse(){if(TP)return RE;TP=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return RE=t,RE}var kE,OP;function yse(){if(OP)return kE;OP=1;function e(t){return this.__data__.has(t)}return kE=e,kE}var IE,RP;function TG(){if(RP)return IE;RP=1;var e=PR(),t=bse(),n=yse();function r(s){var i=-1,o=s==null?0:s.length;for(this.__data__=new e;++i<o;)this.add(s[i])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,IE=r,IE}var DE,kP;function OG(){if(kP)return DE;kP=1;function e(t,n){for(var r=-1,s=t==null?0:t.length;++r<s;)if(n(t[r],r,t))return!0;return!1}return DE=e,DE}var PE,IP;function RG(){if(IP)return PE;IP=1;function e(t,n){return t.has(n)}return PE=e,PE}var ME,DP;function kG(){if(DP)return ME;DP=1;var e=TG(),t=OG(),n=RG(),r=1,s=2;function i(o,l,c,u,m,p){var g=c&r,x=o.length,y=l.length;if(x!=y&&!(g&&y>x))return!1;var v=p.get(o),N=p.get(l);if(v&&N)return v==l&&N==o;var S=-1,j=!0,C=c&s?new e:void 0;for(p.set(o,l),p.set(l,o);++S<x;){var _=o[S],A=l[S];if(u)var T=g?u(A,_,S,l,o,p):u(_,A,S,o,l,p);if(T!==void 0){if(T)continue;j=!1;break}if(C){if(!t(l,function(R,M){if(!n(C,M)&&(_===R||m(_,R,c,u,p)))return C.push(M)})){j=!1;break}}else if(!(_===A||m(_,A,c,u,p))){j=!1;break}}return p.delete(o),p.delete(l),j}return ME=i,ME}var LE,PP;function IG(){if(PP)return LE;PP=1;var e=fl(),t=e.Uint8Array;return LE=t,LE}var $E,MP;function vse(){if(MP)return $E;MP=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(s,i){r[++n]=[i,s]}),r}return $E=e,$E}var FE,LP;function GR(){if(LP)return FE;LP=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(s){r[++n]=s}),r}return FE=e,FE}var UE,$P;function Nse(){if($P)return UE;$P=1;var e=Nh(),t=IG(),n=z1(),r=kG(),s=vse(),i=GR(),o=1,l=2,c="[object Boolean]",u="[object Date]",m="[object Error]",p="[object Map]",g="[object Number]",x="[object RegExp]",y="[object Set]",v="[object String]",N="[object Symbol]",S="[object ArrayBuffer]",j="[object DataView]",C=e?e.prototype:void 0,_=C?C.valueOf:void 0;function A(T,R,M,P,$,w,U){switch(M){case j:if(T.byteLength!=R.byteLength||T.byteOffset!=R.byteOffset)return!1;T=T.buffer,R=R.buffer;case S:return!(T.byteLength!=R.byteLength||!w(new t(T),new t(R)));case c:case u:case g:return n(+T,+R);case m:return T.name==R.name&&T.message==R.message;case x:case v:return T==R+"";case p:var X=s;case y:var I=P&o;if(X||(X=i),T.size!=R.size&&!I)return!1;var G=U.get(T);if(G)return G==R;P|=l,U.set(T,R);var L=r(X(T),X(R),P,$,w,U);return U.delete(T),L;case N:if(_)return _.call(T)==_.call(R)}return!1}return UE=A,UE}var BE,FP;function HR(){if(FP)return BE;FP=1;function e(t,n){for(var r=-1,s=n.length,i=t.length;++r<s;)t[i+r]=n[r];return t}return BE=e,BE}var GE,UP;function DG(){if(UP)return GE;UP=1;var e=HR(),t=ri();function n(r,s,i){var o=s(r);return t(r)?o:e(o,i(r))}return GE=n,GE}var HE,BP;function Sse(){if(BP)return HE;BP=1;function e(t,n){for(var r=-1,s=t==null?0:t.length,i=0,o=[];++r<s;){var l=t[r];n(l,r,t)&&(o[i++]=l)}return o}return HE=e,HE}var KE,GP;function PG(){if(GP)return KE;GP=1;function e(){return[]}return KE=e,KE}var zE,HP;function KR(){if(HP)return zE;HP=1;var e=Sse(),t=PG(),n=Object.prototype,r=n.propertyIsEnumerable,s=Object.getOwnPropertySymbols,i=s?function(o){return o==null?[]:(o=Object(o),e(s(o),function(l){return r.call(o,l)}))}:t;return zE=i,zE}var qE,KP;function Ese(){if(KP)return qE;KP=1;function e(t,n){for(var r=-1,s=Array(t);++r<t;)s[r]=n(r);return s}return qE=e,qE}var VE,zP;function jse(){if(zP)return VE;zP=1;var e=xd(),t=pl(),n="[object Arguments]";function r(s){return t(s)&&e(s)==n}return VE=r,VE}var WE,qP;function zR(){if(qP)return WE;qP=1;var e=jse(),t=pl(),n=Object.prototype,r=n.hasOwnProperty,s=n.propertyIsEnumerable,i=e((function(){return arguments})())?e:function(o){return t(o)&&r.call(o,"callee")&&!s.call(o,"callee")};return WE=i,WE}var Y0={exports:{}},YE,VP;function wse(){if(VP)return YE;VP=1;function e(){return!1}return YE=e,YE}Y0.exports;var WP;function qR(){return WP||(WP=1,(function(e,t){var n=fl(),r=wse(),s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===s,l=o?n.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||r;e.exports=u})(Y0,Y0.exports)),Y0.exports}var QE,YP;function VR(){if(YP)return QE;YP=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(r,s){var i=typeof r;return s=s??e,!!s&&(i=="number"||i!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<s}return QE=n,QE}var XE,QP;function WR(){if(QP)return XE;QP=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return XE=t,XE}var JE,XP;function Ase(){if(XP)return JE;XP=1;var e=xd(),t=WR(),n=pl(),r="[object Arguments]",s="[object Array]",i="[object Boolean]",o="[object Date]",l="[object Error]",c="[object Function]",u="[object Map]",m="[object Number]",p="[object Object]",g="[object RegExp]",x="[object Set]",y="[object String]",v="[object WeakMap]",N="[object ArrayBuffer]",S="[object DataView]",j="[object Float32Array]",C="[object Float64Array]",_="[object Int8Array]",A="[object Int16Array]",T="[object Int32Array]",R="[object Uint8Array]",M="[object Uint8ClampedArray]",P="[object Uint16Array]",$="[object Uint32Array]",w={};w[j]=w[C]=w[_]=w[A]=w[T]=w[R]=w[M]=w[P]=w[$]=!0,w[r]=w[s]=w[N]=w[i]=w[S]=w[o]=w[l]=w[c]=w[u]=w[m]=w[p]=w[g]=w[x]=w[y]=w[v]=!1;function U(X){return n(X)&&t(X.length)&&!!w[e(X)]}return JE=U,JE}var ZE,JP;function aN(){if(JP)return ZE;JP=1;function e(t){return function(n){return t(n)}}return ZE=e,ZE}var Q0={exports:{}};Q0.exports;var ZP;function YR(){return ZP||(ZP=1,(function(e,t){var n=eG(),r=t&&!t.nodeType&&t,s=r&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===r,o=i&&n.process,l=(function(){try{var c=s&&s.require&&s.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}})();e.exports=l})(Q0,Q0.exports)),Q0.exports}var ej,eM;function MG(){if(eM)return ej;eM=1;var e=Ase(),t=aN(),n=YR(),r=n&&n.isTypedArray,s=r?t(r):e;return ej=s,ej}var tj,tM;function LG(){if(tM)return tj;tM=1;var e=Ese(),t=zR(),n=ri(),r=qR(),s=VR(),i=MG(),o=Object.prototype,l=o.hasOwnProperty;function c(u,m){var p=n(u),g=!p&&t(u),x=!p&&!g&&r(u),y=!p&&!g&&!x&&i(u),v=p||g||x||y,N=v?e(u.length,String):[],S=N.length;for(var j in u)(m||l.call(u,j))&&!(v&&(j=="length"||x&&(j=="offset"||j=="parent")||y&&(j=="buffer"||j=="byteLength"||j=="byteOffset")||s(j,S)))&&N.push(j);return N}return tj=c,tj}var nj,nM;function QR(){if(nM)return nj;nM=1;var e=Object.prototype;function t(n){var r=n&&n.constructor,s=typeof r=="function"&&r.prototype||e;return n===s}return nj=t,nj}var rj,rM;function $G(){if(rM)return rj;rM=1;function e(t,n){return function(r){return t(n(r))}}return rj=e,rj}var aj,aM;function _se(){if(aM)return aj;aM=1;var e=$G(),t=e(Object.keys,Object);return aj=t,aj}var sj,sM;function Cse(){if(sM)return sj;sM=1;var e=QR(),t=_se(),n=Object.prototype,r=n.hasOwnProperty;function s(i){if(!e(i))return t(i);var o=[];for(var l in Object(i))r.call(i,l)&&l!="constructor"&&o.push(l);return o}return sj=s,sj}var ij,iM;function jh(){if(iM)return ij;iM=1;var e=IR(),t=WR();function n(r){return r!=null&&t(r.length)&&!e(r)}return ij=n,ij}var oj,oM;function wh(){if(oM)return oj;oM=1;var e=LG(),t=Cse(),n=jh();function r(s){return n(s)?e(s):t(s)}return oj=r,oj}var lj,lM;function FG(){if(lM)return lj;lM=1;var e=DG(),t=KR(),n=wh();function r(s){return e(s,n,t)}return lj=r,lj}var cj,cM;function Tse(){if(cM)return cj;cM=1;var e=FG(),t=1,n=Object.prototype,r=n.hasOwnProperty;function s(i,o,l,c,u,m){var p=l&t,g=e(i),x=g.length,y=e(o),v=y.length;if(x!=v&&!p)return!1;for(var N=x;N--;){var S=g[N];if(!(p?S in o:r.call(o,S)))return!1}var j=m.get(i),C=m.get(o);if(j&&C)return j==o&&C==i;var _=!0;m.set(i,o),m.set(o,i);for(var A=p;++N<x;){S=g[N];var T=i[S],R=o[S];if(c)var M=p?c(R,T,S,o,i,m):c(T,R,S,i,o,m);if(!(M===void 0?T===R||u(T,R,l,c,m):M)){_=!1;break}A||(A=S=="constructor")}if(_&&!A){var P=i.constructor,$=o.constructor;P!=$&&"constructor"in i&&"constructor"in o&&!(typeof P=="function"&&P instanceof P&&typeof $=="function"&&$ instanceof $)&&(_=!1)}return m.delete(i),m.delete(o),_}return cj=s,cj}var dj,dM;function Ose(){if(dM)return dj;dM=1;var e=np(),t=fl(),n=e(t,"DataView");return dj=n,dj}var uj,uM;function Rse(){if(uM)return uj;uM=1;var e=np(),t=fl(),n=e(t,"Promise");return uj=n,uj}var fj,fM;function UG(){if(fM)return fj;fM=1;var e=np(),t=fl(),n=e(t,"Set");return fj=n,fj}var pj,pM;function kse(){if(pM)return pj;pM=1;var e=np(),t=fl(),n=e(t,"WeakMap");return pj=n,pj}var mj,mM;function sN(){if(mM)return mj;mM=1;var e=Ose(),t=DR(),n=Rse(),r=UG(),s=kse(),i=xd(),o=tG(),l="[object Map]",c="[object Object]",u="[object Promise]",m="[object Set]",p="[object WeakMap]",g="[object DataView]",x=o(e),y=o(t),v=o(n),N=o(r),S=o(s),j=i;return(e&&j(new e(new ArrayBuffer(1)))!=g||t&&j(new t)!=l||n&&j(n.resolve())!=u||r&&j(new r)!=m||s&&j(new s)!=p)&&(j=function(C){var _=i(C),A=_==c?C.constructor:void 0,T=A?o(A):"";if(T)switch(T){case x:return g;case y:return l;case v:return u;case N:return m;case S:return p}return _}),mj=j,mj}var hj,hM;function Ise(){if(hM)return hj;hM=1;var e=BR(),t=kG(),n=Nse(),r=Tse(),s=sN(),i=ri(),o=qR(),l=MG(),c=1,u="[object Arguments]",m="[object Array]",p="[object Object]",g=Object.prototype,x=g.hasOwnProperty;function y(v,N,S,j,C,_){var A=i(v),T=i(N),R=A?m:s(v),M=T?m:s(N);R=R==u?p:R,M=M==u?p:M;var P=R==p,$=M==p,w=R==M;if(w&&o(v)){if(!o(N))return!1;A=!0,P=!1}if(w&&!P)return _||(_=new e),A||l(v)?t(v,N,S,j,C,_):n(v,N,R,S,j,C,_);if(!(S&c)){var U=P&&x.call(v,"__wrapped__"),X=$&&x.call(N,"__wrapped__");if(U||X){var I=U?v.value():v,G=X?N.value():N;return _||(_=new e),C(I,G,S,j,_)}}return w?(_||(_=new e),r(v,N,S,j,C,_)):!1}return hj=y,hj}var gj,gM;function XR(){if(gM)return gj;gM=1;var e=Ise(),t=pl();function n(r,s,i,o,l){return r===s?!0:r==null||s==null||!t(r)&&!t(s)?r!==r&&s!==s:e(r,s,i,o,n,l)}return gj=n,gj}var xj,xM;function Dse(){if(xM)return xj;xM=1;var e=BR(),t=XR(),n=1,r=2;function s(i,o,l,c){var u=l.length,m=u,p=!c;if(i==null)return!m;for(i=Object(i);u--;){var g=l[u];if(p&&g[2]?g[1]!==i[g[0]]:!(g[0]in i))return!1}for(;++u<m;){g=l[u];var x=g[0],y=i[x],v=g[1];if(p&&g[2]){if(y===void 0&&!(x in i))return!1}else{var N=new e;if(c)var S=c(y,v,x,i,o,N);if(!(S===void 0?t(v,y,n|r,c,N):S))return!1}}return!0}return xj=s,xj}var bj,bM;function BG(){if(bM)return bj;bM=1;var e=ml();function t(n){return n===n&&!e(n)}return bj=t,bj}var yj,yM;function Pse(){if(yM)return yj;yM=1;var e=BG(),t=wh();function n(r){for(var s=t(r),i=s.length;i--;){var o=s[i],l=r[o];s[i]=[o,l,e(l)]}return s}return yj=n,yj}var vj,vM;function GG(){if(vM)return vj;vM=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return vj=e,vj}var Nj,NM;function Mse(){if(NM)return Nj;NM=1;var e=Dse(),t=Pse(),n=GG();function r(s){var i=t(s);return i.length==1&&i[0][2]?n(i[0][0],i[0][1]):function(o){return o===s||e(o,s,i)}}return Nj=r,Nj}var Sj,SM;function Lse(){if(SM)return Sj;SM=1;function e(t,n){return t!=null&&n in Object(t)}return Sj=e,Sj}var Ej,EM;function $se(){if(EM)return Ej;EM=1;var e=Q1(),t=zR(),n=ri(),r=VR(),s=WR(),i=Ax();function o(l,c,u){c=e(c,l);for(var m=-1,p=c.length,g=!1;++m<p;){var x=i(c[m]);if(!(g=l!=null&&u(l,x)))break;l=l[x]}return g||++m!=p?g:(p=l==null?0:l.length,!!p&&s(p)&&r(x,p)&&(n(l)||t(l)))}return Ej=o,Ej}var jj,jM;function Fse(){if(jM)return jj;jM=1;var e=Lse(),t=$se();function n(r,s){return r!=null&&t(r,s,e)}return jj=n,jj}var wj,wM;function Use(){if(wM)return wj;wM=1;var e=XR(),t=aG(),n=Fse(),r=kR(),s=BG(),i=GG(),o=Ax(),l=1,c=2;function u(m,p){return r(m)&&s(p)?i(o(m),p):function(g){var x=t(g,m);return x===void 0&&x===p?n(g,m):e(p,x,l|c)}}return wj=u,wj}var Aj,AM;function Ah(){if(AM)return Aj;AM=1;function e(t){return t}return Aj=e,Aj}var _j,_M;function Bse(){if(_M)return _j;_M=1;function e(t){return function(n){return n?.[t]}}return _j=e,_j}var Cj,CM;function Gse(){if(CM)return Cj;CM=1;var e=X1();function t(n){return function(r){return e(r,n)}}return Cj=t,Cj}var Tj,TM;function Hse(){if(TM)return Tj;TM=1;var e=Bse(),t=Gse(),n=kR(),r=Ax();function s(i){return n(i)?e(r(i)):t(i)}return Tj=s,Tj}var Oj,OM;function fc(){if(OM)return Oj;OM=1;var e=Mse(),t=Use(),n=Ah(),r=ri(),s=Hse();function i(o){return typeof o=="function"?o:o==null?n:typeof o=="object"?r(o)?t(o[0],o[1]):e(o):s(o)}return Oj=i,Oj}var Rj,RM;function HG(){if(RM)return Rj;RM=1;function e(t,n,r,s){for(var i=t.length,o=r+(s?1:-1);s?o--:++o<i;)if(n(t[o],o,t))return o;return-1}return Rj=e,Rj}var kj,kM;function Kse(){if(kM)return kj;kM=1;function e(t){return t!==t}return kj=e,kj}var Ij,IM;function zse(){if(IM)return Ij;IM=1;function e(t,n,r){for(var s=r-1,i=t.length;++s<i;)if(t[s]===n)return s;return-1}return Ij=e,Ij}var Dj,DM;function qse(){if(DM)return Dj;DM=1;var e=HG(),t=Kse(),n=zse();function r(s,i,o){return i===i?n(s,i,o):e(s,t,o)}return Dj=r,Dj}var Pj,PM;function Vse(){if(PM)return Pj;PM=1;var e=qse();function t(n,r){var s=n==null?0:n.length;return!!s&&e(n,r,0)>-1}return Pj=t,Pj}var Mj,MM;function Wse(){if(MM)return Mj;MM=1;function e(t,n,r){for(var s=-1,i=t==null?0:t.length;++s<i;)if(r(n,t[s]))return!0;return!1}return Mj=e,Mj}var Lj,LM;function Yse(){if(LM)return Lj;LM=1;function e(){}return Lj=e,Lj}var $j,$M;function Qse(){if($M)return $j;$M=1;var e=UG(),t=Yse(),n=GR(),r=1/0,s=e&&1/n(new e([,-0]))[1]==r?function(i){return new e(i)}:t;return $j=s,$j}var Fj,FM;function Xse(){if(FM)return Fj;FM=1;var e=TG(),t=Vse(),n=Wse(),r=RG(),s=Qse(),i=GR(),o=200;function l(c,u,m){var p=-1,g=t,x=c.length,y=!0,v=[],N=v;if(m)y=!1,g=n;else if(x>=o){var S=u?null:s(c);if(S)return i(S);y=!1,g=r,N=new e}else N=u?[]:v;e:for(;++p<x;){var j=c[p],C=u?u(j):j;if(j=m||j!==0?j:0,y&&C===C){for(var _=N.length;_--;)if(N[_]===C)continue e;u&&N.push(C),v.push(j)}else g(N,C,m)||(N!==v&&N.push(C),v.push(j))}return v}return Fj=l,Fj}var Uj,UM;function Jse(){if(UM)return Uj;UM=1;var e=fc(),t=Xse();function n(r,s){return r&&r.length?t(r,e(s,2)):[]}return Uj=n,Uj}var Zse=Jse();const BM=Jn(Zse);function KG(e,t,n){return t===!0?BM(e,n):Yt(t)?BM(e,t):e}function Tm(e){"@babel/helpers - typeof";return Tm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tm(e)}var eie=["ref"];function GM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function $c(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?GM(Object(n),!0).forEach(function(r){iN(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function tie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qG(r.key),r)}}function nie(e,t,n){return t&&HM(e.prototype,t),n&&HM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function rie(e,t,n){return t=cv(t),aie(e,zG()?Reflect.construct(t,n||[],cv(e).constructor):t.apply(e,n))}function aie(e,t){if(t&&(Tm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sie(e)}function sie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zG=function(){return!!e})()}function cv(e){return cv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},cv(e)}function iie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zC(e,t)}function zC(e,t){return zC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},zC(e,t)}function iN(e,t,n){return t=qG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qG(e){var t=oie(e,"string");return Tm(t)=="symbol"?t:t+""}function oie(e,t){if(Tm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Tm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function lie(e,t){if(e==null)return{};var n=cie(e,t),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function cie(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function die(e){return e.value}function uie(e,t){if(W.isValidElement(e))return W.cloneElement(e,t);if(typeof e=="function")return W.createElement(e,t);t.ref;var n=lie(t,eie);return W.createElement(UR,n)}var KM=1,nc=(function(e){function t(){var n;tie(this,t);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return n=rie(this,t,[].concat(s)),iN(n,"lastBoundingBox",{width:-1,height:-1}),n}return iie(t,e),nie(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>KM||Math.abs(s.height-this.lastBoundingBox.height)>KM)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,r&&r(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?$c({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var s=this.props,i=s.layout,o=s.align,l=s.verticalAlign,c=s.margin,u=s.chartWidth,m=s.chartHeight,p,g;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(o==="center"&&i==="vertical"){var x=this.getBBoxSnapshot();p={left:((u||0)-x.width)/2}}else p=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(l==="middle"){var y=this.getBBoxSnapshot();g={top:((m||0)-y.height)/2}}else g=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return $c($c({},p),g)}},{key:"render",value:function(){var r=this,s=this.props,i=s.content,o=s.width,l=s.height,c=s.wrapperStyle,u=s.payloadUniqBy,m=s.payload,p=$c($c({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return W.createElement("div",{className:"recharts-legend-wrapper",style:p,ref:function(x){r.wrapperNode=x}},uie(i,$c($c({},this.props),{},{payload:KG(m,u,die)})))}}],[{key:"getWithHeight",value:function(r,s){var i=$c($c({},this.defaultProps),r.props),o=i.layout;return o==="vertical"&&lt(r.props.height)?{height:r.props.height}:o==="horizontal"?{width:r.props.width||s}:null}}])})(h.PureComponent);iN(nc,"displayName","Legend");iN(nc,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Bj,zM;function fie(){if(zM)return Bj;zM=1;var e=Nh(),t=zR(),n=ri(),r=e?e.isConcatSpreadable:void 0;function s(i){return n(i)||t(i)||!!(r&&i&&i[r])}return Bj=s,Bj}var Gj,qM;function JR(){if(qM)return Gj;qM=1;var e=HR(),t=fie();function n(r,s,i,o,l){var c=-1,u=r.length;for(i||(i=t),l||(l=[]);++c<u;){var m=r[c];s>0&&i(m)?s>1?n(m,s-1,i,o,l):e(l,m):o||(l[l.length]=m)}return l}return Gj=n,Gj}var Hj,VM;function pie(){if(VM)return Hj;VM=1;function e(t){return function(n,r,s){for(var i=-1,o=Object(n),l=s(n),c=l.length;c--;){var u=l[t?c:++i];if(r(o[u],u,o)===!1)break}return n}}return Hj=e,Hj}var Kj,WM;function mie(){if(WM)return Kj;WM=1;var e=pie(),t=e();return Kj=t,Kj}var zj,YM;function VG(){if(YM)return zj;YM=1;var e=mie(),t=wh();function n(r,s){return r&&e(r,s,t)}return zj=n,zj}var qj,QM;function hie(){if(QM)return qj;QM=1;var e=jh();function t(n,r){return function(s,i){if(s==null)return s;if(!e(s))return n(s,i);for(var o=s.length,l=r?o:-1,c=Object(s);(r?l--:++l<o)&&i(c[l],l,c)!==!1;);return s}}return qj=t,qj}var Vj,XM;function ZR(){if(XM)return Vj;XM=1;var e=VG(),t=hie(),n=t(e);return Vj=n,Vj}var Wj,JM;function WG(){if(JM)return Wj;JM=1;var e=ZR(),t=jh();function n(r,s){var i=-1,o=t(r)?Array(r.length):[];return e(r,function(l,c,u){o[++i]=s(l,c,u)}),o}return Wj=n,Wj}var Yj,ZM;function gie(){if(ZM)return Yj;ZM=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return Yj=e,Yj}var Qj,eL;function xie(){if(eL)return Qj;eL=1;var e=Sh();function t(n,r){if(n!==r){var s=n!==void 0,i=n===null,o=n===n,l=e(n),c=r!==void 0,u=r===null,m=r===r,p=e(r);if(!u&&!p&&!l&&n>r||l&&c&&m&&!u&&!p||i&&c&&m||!s&&m||!o)return 1;if(!i&&!l&&!p&&n<r||p&&s&&o&&!i&&!l||u&&s&&o||!c&&o||!m)return-1}return 0}return Qj=t,Qj}var Xj,tL;function bie(){if(tL)return Xj;tL=1;var e=xie();function t(n,r,s){for(var i=-1,o=n.criteria,l=r.criteria,c=o.length,u=s.length;++i<c;){var m=e(o[i],l[i]);if(m){if(i>=u)return m;var p=s[i];return m*(p=="desc"?-1:1)}}return n.index-r.index}return Xj=t,Xj}var Jj,nL;function yie(){if(nL)return Jj;nL=1;var e=Y1(),t=X1(),n=fc(),r=WG(),s=gie(),i=aN(),o=bie(),l=Ah(),c=ri();function u(m,p,g){p.length?p=e(p,function(v){return c(v)?function(N){return t(N,v.length===1?v[0]:v)}:v}):p=[l];var x=-1;p=e(p,i(n));var y=r(m,function(v,N,S){var j=e(p,function(C){return C(v)});return{criteria:j,index:++x,value:v}});return s(y,function(v,N){return o(v,N,g)})}return Jj=u,Jj}var Zj,rL;function vie(){if(rL)return Zj;rL=1;function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}return Zj=e,Zj}var ew,aL;function YG(){if(aL)return ew;aL=1;var e=vie(),t=Math.max;function n(r,s,i){return s=t(s===void 0?r.length-1:s,0),function(){for(var o=arguments,l=-1,c=t(o.length-s,0),u=Array(c);++l<c;)u[l]=o[s+l];l=-1;for(var m=Array(s+1);++l<s;)m[l]=o[l];return m[s]=i(u),e(r,this,m)}}return ew=n,ew}var tw,sL;function Nie(){if(sL)return tw;sL=1;function e(t){return function(){return t}}return tw=e,tw}var nw,iL;function QG(){if(iL)return nw;iL=1;var e=np(),t=(function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}})();return nw=t,nw}var rw,oL;function Sie(){if(oL)return rw;oL=1;var e=Nie(),t=QG(),n=Ah(),r=t?function(s,i){return t(s,"toString",{configurable:!0,enumerable:!1,value:e(i),writable:!0})}:n;return rw=r,rw}var aw,lL;function Eie(){if(lL)return aw;lL=1;var e=800,t=16,n=Date.now;function r(s){var i=0,o=0;return function(){var l=n(),c=t-(l-o);if(o=l,c>0){if(++i>=e)return arguments[0]}else i=0;return s.apply(void 0,arguments)}}return aw=r,aw}var sw,cL;function XG(){if(cL)return sw;cL=1;var e=Sie(),t=Eie(),n=t(e);return sw=n,sw}var iw,dL;function jie(){if(dL)return iw;dL=1;var e=Ah(),t=YG(),n=XG();function r(s,i){return n(t(s,i,e),s+"")}return iw=r,iw}var ow,uL;function oN(){if(uL)return ow;uL=1;var e=z1(),t=jh(),n=VR(),r=ml();function s(i,o,l){if(!r(l))return!1;var c=typeof o;return(c=="number"?t(l)&&n(o,l.length):c=="string"&&o in l)?e(l[o],i):!1}return ow=s,ow}var lw,fL;function wie(){if(fL)return lw;fL=1;var e=JR(),t=yie(),n=jie(),r=oN(),s=n(function(i,o){if(i==null)return[];var l=o.length;return l>1&&r(i,o[0],o[1])?o=[]:l>2&&r(o[0],o[1],o[2])&&(o=[o[0]]),t(i,e(o,1),[])});return lw=s,lw}var Aie=wie();const ek=Jn(Aie);function Ig(e){"@babel/helpers - typeof";return Ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ig(e)}function qC(){return qC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qC.apply(this,arguments)}function _ie(e,t){return Rie(e)||Oie(e,t)||Tie(e,t)||Cie()}function Cie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tie(e,t){if(e){if(typeof e=="string")return pL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pL(e,t)}}function pL(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Oie(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(m){u=!0,s=m}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Rie(e){if(Array.isArray(e))return e}function mL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function cw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mL(Object(n),!0).forEach(function(r){kie(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function kie(e,t,n){return t=Iie(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Iie(e){var t=Die(e,"string");return Ig(t)=="symbol"?t:t+""}function Die(e,t){if(Ig(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ig(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pie(e){return Array.isArray(e)&&$a(e[0])&&$a(e[1])?e.join(" ~ "):e}var Mie=function(t){var n=t.separator,r=n===void 0?" : ":n,s=t.contentStyle,i=s===void 0?{}:s,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,u=c===void 0?{}:c,m=t.payload,p=t.formatter,g=t.itemSorter,x=t.wrapperClassName,y=t.labelClassName,v=t.label,N=t.labelFormatter,S=t.accessibilityLayer,j=S===void 0?!1:S,C=function(){if(m&&m.length){var U={padding:0,margin:0},X=(g?ek(m,g):m).map(function(I,G){if(I.type==="none")return null;var L=cw({display:"block",paddingTop:4,paddingBottom:4,color:I.color||"#000"},l),H=I.formatter||p||Pie,F=I.value,K=I.name,ne=F,V=K;if(H&&ne!=null&&V!=null){var ee=H(F,K,I,G,m);if(Array.isArray(ee)){var ae=_ie(ee,2);ne=ae[0],V=ae[1]}else ne=ee}return W.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(G),style:L},$a(V)?W.createElement("span",{className:"recharts-tooltip-item-name"},V):null,$a(V)?W.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,W.createElement("span",{className:"recharts-tooltip-item-value"},ne),W.createElement("span",{className:"recharts-tooltip-item-unit"},I.unit||""))});return W.createElement("ul",{className:"recharts-tooltip-item-list",style:U},X)}return null},_=cw({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),A=cw({margin:0},u),T=!nn(v),R=T?v:"",M=fn("recharts-default-tooltip",x),P=fn("recharts-tooltip-label",y);T&&N&&m!==void 0&&m!==null&&(R=N(v,m));var $=j?{role:"status","aria-live":"assertive"}:{};return W.createElement("div",qC({className:M,style:_},$),W.createElement("p",{className:P,style:A},W.isValidElement(R)?R:"".concat(R)),C())};function Dg(e){"@babel/helpers - typeof";return Dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dg(e)}function Fb(e,t,n){return t=Lie(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lie(e){var t=$ie(e,"string");return Dg(t)=="symbol"?t:t+""}function $ie(e,t){if(Dg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Dg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var E0="recharts-tooltip-wrapper",Fie={visibility:"hidden"};function Uie(e){var t=e.coordinate,n=e.translateX,r=e.translateY;return fn(E0,Fb(Fb(Fb(Fb({},"".concat(E0,"-right"),lt(n)&&t&&lt(t.x)&&n>=t.x),"".concat(E0,"-left"),lt(n)&&t&&lt(t.x)&&n<t.x),"".concat(E0,"-bottom"),lt(r)&&t&&lt(t.y)&&r>=t.y),"".concat(E0,"-top"),lt(r)&&t&&lt(t.y)&&r<t.y))}function hL(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.key,s=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(i&&lt(i[r]))return i[r];var m=n[r]-l-s,p=n[r]+s;if(t[r])return o[r]?m:p;if(o[r]){var g=m,x=c[r];return g<x?Math.max(p,c[r]):Math.max(m,c[r])}var y=p+l,v=c[r]+u;return y>v?Math.max(m,c[r]):Math.max(p,c[r])}function Bie(e){var t=e.translateX,n=e.translateY,r=e.useTranslate3d;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function Gie(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.offsetTopLeft,s=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,m,p;return o.height>0&&o.width>0&&n?(m=hL({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),p=hL({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=Bie({translateX:m,translateY:p,useTranslate3d:l})):u=Fie,{cssProperties:u,cssClasses:Uie({translateX:m,translateY:p,coordinate:n})}}function Om(e){"@babel/helpers - typeof";return Om=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Om(e)}function gL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function xL(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gL(Object(n),!0).forEach(function(r){WC(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Hie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ZG(r.key),r)}}function zie(e,t,n){return t&&Kie(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function qie(e,t,n){return t=dv(t),Vie(e,JG()?Reflect.construct(t,n||[],dv(e).constructor):t.apply(e,n))}function Vie(e,t){if(t&&(Om(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wie(e)}function Wie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JG=function(){return!!e})()}function dv(e){return dv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},dv(e)}function Yie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&VC(e,t)}function VC(e,t){return VC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},VC(e,t)}function WC(e,t,n){return t=ZG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZG(e){var t=Qie(e,"string");return Om(t)=="symbol"?t:t+""}function Qie(e,t){if(Om(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Om(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var bL=1,Xie=(function(e){function t(){var n;Hie(this,t);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return n=qie(this,t,[].concat(s)),WC(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),WC(n,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,m;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(m=n.props.coordinate)===null||m===void 0?void 0:m.y)!==null&&u!==void 0?u:0}})}}),n}return Yie(t,e),zie(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>bL||Math.abs(r.height-this.state.lastBoundingBox.height)>bL)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,u=s.children,m=s.coordinate,p=s.hasPayload,g=s.isAnimationActive,x=s.offset,y=s.position,v=s.reverseDirection,N=s.useTranslate3d,S=s.viewBox,j=s.wrapperStyle,C=Gie({allowEscapeViewBox:o,coordinate:m,offsetTopLeft:x,position:y,reverseDirection:v,tooltipBox:this.state.lastBoundingBox,useTranslate3d:N,viewBox:S}),_=C.cssClasses,A=C.cssProperties,T=xL(xL({transition:g&&i?"transform ".concat(l,"ms ").concat(c):void 0},A),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&p?"visible":"hidden",position:"absolute",top:0,left:0},j);return W.createElement("div",{tabIndex:-1,className:_,style:T,ref:function(M){r.wrapperNode=M}},u)}}])})(h.PureComponent),Jie=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},sl={isSsr:Jie()};function Rm(e){"@babel/helpers - typeof";return Rm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rm(e)}function yL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function vL(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yL(Object(n),!0).forEach(function(r){tk(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Zie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eoe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,t9(r.key),r)}}function toe(e,t,n){return t&&eoe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function noe(e,t,n){return t=uv(t),roe(e,e9()?Reflect.construct(t,n||[],uv(e).constructor):t.apply(e,n))}function roe(e,t){if(t&&(Rm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aoe(e)}function aoe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function e9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(e9=function(){return!!e})()}function uv(e){return uv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},uv(e)}function soe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&YC(e,t)}function YC(e,t){return YC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},YC(e,t)}function tk(e,t,n){return t=t9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t9(e){var t=ioe(e,"string");return Rm(t)=="symbol"?t:t+""}function ioe(e,t){if(Rm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Rm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function ooe(e){return e.dataKey}function loe(e,t){return W.isValidElement(e)?W.cloneElement(e,t):typeof e=="function"?W.createElement(e,t):W.createElement(Mie,t)}var or=(function(e){function t(){return Zie(this,t),noe(this,t,arguments)}return soe(t,e),toe(t,[{key:"render",value:function(){var r=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,u=s.content,m=s.coordinate,p=s.filterNull,g=s.isAnimationActive,x=s.offset,y=s.payload,v=s.payloadUniqBy,N=s.position,S=s.reverseDirection,j=s.useTranslate3d,C=s.viewBox,_=s.wrapperStyle,A=y??[];p&&A.length&&(A=KG(y.filter(function(R){return R.value!=null&&(R.hide!==!0||r.props.includeHidden)}),v,ooe));var T=A.length>0;return W.createElement(Xie,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:g,active:i,coordinate:m,hasPayload:T,offset:x,position:N,reverseDirection:S,useTranslate3d:j,viewBox:C,wrapperStyle:_},loe(u,vL(vL({},this.props),{},{payload:A})))}}])})(h.PureComponent);tk(or,"displayName","Tooltip");tk(or,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!sl.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var dw,NL;function coe(){if(NL)return dw;NL=1;var e=fl(),t=function(){return e.Date.now()};return dw=t,dw}var uw,SL;function doe(){if(SL)return uw;SL=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return uw=t,uw}var fw,EL;function uoe(){if(EL)return fw;EL=1;var e=doe(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return fw=n,fw}var pw,jL;function n9(){if(jL)return pw;jL=1;var e=uoe(),t=ml(),n=Sh(),r=NaN,s=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function c(u){if(typeof u=="number")return u;if(n(u))return r;if(t(u)){var m=typeof u.valueOf=="function"?u.valueOf():u;u=t(m)?m+"":m}if(typeof u!="string")return u===0?u:+u;u=e(u);var p=i.test(u);return p||o.test(u)?l(u.slice(2),p?2:8):s.test(u)?r:+u}return pw=c,pw}var mw,wL;function foe(){if(wL)return mw;wL=1;var e=ml(),t=coe(),n=n9(),r="Expected a function",s=Math.max,i=Math.min;function o(l,c,u){var m,p,g,x,y,v,N=0,S=!1,j=!1,C=!0;if(typeof l!="function")throw new TypeError(r);c=n(c)||0,e(u)&&(S=!!u.leading,j="maxWait"in u,g=j?s(n(u.maxWait)||0,c):g,C="trailing"in u?!!u.trailing:C);function _(X){var I=m,G=p;return m=p=void 0,N=X,x=l.apply(G,I),x}function A(X){return N=X,y=setTimeout(M,c),S?_(X):x}function T(X){var I=X-v,G=X-N,L=c-I;return j?i(L,g-G):L}function R(X){var I=X-v,G=X-N;return v===void 0||I>=c||I<0||j&&G>=g}function M(){var X=t();if(R(X))return P(X);y=setTimeout(M,T(X))}function P(X){return y=void 0,C&&m?_(X):(m=p=void 0,x)}function $(){y!==void 0&&clearTimeout(y),N=0,m=v=p=y=void 0}function w(){return y===void 0?x:P(t())}function U(){var X=t(),I=R(X);if(m=arguments,p=this,v=X,I){if(y===void 0)return A(v);if(j)return clearTimeout(y),y=setTimeout(M,c),_(v)}return y===void 0&&(y=setTimeout(M,c)),x}return U.cancel=$,U.flush=w,U}return mw=o,mw}var hw,AL;function poe(){if(AL)return hw;AL=1;var e=foe(),t=ml(),n="Expected a function";function r(s,i,o){var l=!0,c=!0;if(typeof s!="function")throw new TypeError(n);return t(o)&&(l="leading"in o?!!o.leading:l,c="trailing"in o?!!o.trailing:c),e(s,i,{leading:l,maxWait:i,trailing:c})}return hw=r,hw}var moe=poe();const r9=Jn(moe);function Pg(e){"@babel/helpers - typeof";return Pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pg(e)}function _L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Ub(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_L(Object(n),!0).forEach(function(r){hoe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_L(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hoe(e,t,n){return t=goe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function goe(e){var t=xoe(e,"string");return Pg(t)=="symbol"?t:t+""}function xoe(e,t){if(Pg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Pg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function boe(e,t){return Soe(e)||Noe(e,t)||voe(e,t)||yoe()}function yoe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function voe(e,t){if(e){if(typeof e=="string")return CL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CL(e,t)}}function CL(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Noe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(m){u=!0,s=m}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Soe(e){if(Array.isArray(e))return e}var Da=h.forwardRef(function(e,t){var n=e.aspect,r=e.initialDimension,s=r===void 0?{width:-1,height:-1}:r,i=e.width,o=i===void 0?"100%":i,l=e.height,c=l===void 0?"100%":l,u=e.minWidth,m=u===void 0?0:u,p=e.minHeight,g=e.maxHeight,x=e.children,y=e.debounce,v=y===void 0?0:y,N=e.id,S=e.className,j=e.onResize,C=e.style,_=C===void 0?{}:C,A=h.useRef(null),T=h.useRef();T.current=j,h.useImperativeHandle(t,function(){return Object.defineProperty(A.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),A.current},configurable:!0})});var R=h.useState({containerWidth:s.width,containerHeight:s.height}),M=boe(R,2),P=M[0],$=M[1],w=h.useCallback(function(X,I){$(function(G){var L=Math.round(X),H=Math.round(I);return G.containerWidth===L&&G.containerHeight===H?G:{containerWidth:L,containerHeight:H}})},[]);h.useEffect(function(){var X=function(K){var ne,V=K[0].contentRect,ee=V.width,ae=V.height;w(ee,ae),(ne=T.current)===null||ne===void 0||ne.call(T,ee,ae)};v>0&&(X=r9(X,v,{trailing:!0,leading:!1}));var I=new ResizeObserver(X),G=A.current.getBoundingClientRect(),L=G.width,H=G.height;return w(L,H),I.observe(A.current),function(){I.disconnect()}},[w,v]);var U=h.useMemo(function(){var X=P.containerWidth,I=P.containerHeight;if(X<0||I<0)return null;rl(Tf(o)||Tf(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),rl(!n||n>0,"The aspect(%s) must be greater than zero.",n);var G=Tf(o)?X:o,L=Tf(c)?I:c;n&&n>0&&(G?L=G/n:L&&(G=L*n),g&&L>g&&(L=g)),rl(G>0||L>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,G,L,o,c,m,p,n);var H=!Array.isArray(x)&&nd(x.type).endsWith("Chart");return W.Children.map(x,function(F){return W.isValidElement(F)?h.cloneElement(F,Ub({width:G,height:L},H?{style:Ub({height:"100%",width:"100%",maxHeight:L,maxWidth:G},F.props.style)}:{})):F})},[n,x,c,g,p,m,P,o]);return W.createElement("div",{id:N?"".concat(N):void 0,className:fn("recharts-responsive-container",S),style:Ub(Ub({},_),{},{width:o,height:c,minWidth:m,minHeight:p,maxHeight:g}),ref:A},U)}),xo=function(t){return null};xo.displayName="Cell";function Mg(e){"@babel/helpers - typeof";return Mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mg(e)}function TL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function QC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?TL(Object(n),!0).forEach(function(r){Eoe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Eoe(e,t,n){return t=joe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function joe(e){var t=woe(e,"string");return Mg(t)=="symbol"?t:t+""}function woe(e,t){if(Mg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Mg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Op={widthCache:{},cacheCount:0},Aoe=2e3,_oe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},OL="recharts_measurement_span";function Coe(e){var t=QC({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var um=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||sl.isSsr)return{width:0,height:0};var r=Coe(n),s=JSON.stringify({text:t,copyStyle:r});if(Op.widthCache[s])return Op.widthCache[s];try{var i=document.getElementById(OL);i||(i=document.createElement("span"),i.setAttribute("id",OL),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=QC(QC({},_oe),r);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return Op.widthCache[s]=c,++Op.cacheCount>Aoe&&(Op.cacheCount=0,Op.widthCache={}),c}catch{return{width:0,height:0}}},Toe=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Lg(e){"@babel/helpers - typeof";return Lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lg(e)}function fv(e,t){return Ioe(e)||koe(e,t)||Roe(e,t)||Ooe()}function Ooe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Roe(e,t){if(e){if(typeof e=="string")return RL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RL(e,t)}}function RL(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function koe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(m){u=!0,s=m}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Ioe(e){if(Array.isArray(e))return e}function Doe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Moe(r.key),r)}}function Poe(e,t,n){return t&&kL(e.prototype,t),n&&kL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Moe(e){var t=Loe(e,"string");return Lg(t)=="symbol"?t:t+""}function Loe(e,t){if(Lg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Lg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var IL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,DL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,$oe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Foe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,a9={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Uoe=Object.keys(a9),Yp="NaN";function Boe(e,t){return e*a9[t]}var Bb=(function(){function e(t,n){Doe(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!$oe.test(n)&&(this.num=NaN,this.unit=""),Uoe.includes(n)&&(this.num=Boe(t,n),this.unit="px")}return Poe(e,[{key:"add",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,s=(r=Foe.exec(n))!==null&&r!==void 0?r:[],i=fv(s,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])})();function s9(e){if(e.includes(Yp))return Yp;for(var t=e;t.includes("*")||t.includes("/");){var n,r=(n=IL.exec(t))!==null&&n!==void 0?n:[],s=fv(r,4),i=s[1],o=s[2],l=s[3],c=Bb.parse(i??""),u=Bb.parse(l??""),m=o==="*"?c.multiply(u):c.divide(u);if(m.isNaN())return Yp;t=t.replace(IL,m.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var p,g=(p=DL.exec(t))!==null&&p!==void 0?p:[],x=fv(g,4),y=x[1],v=x[2],N=x[3],S=Bb.parse(y??""),j=Bb.parse(N??""),C=v==="+"?S.add(j):S.subtract(j);if(C.isNaN())return Yp;t=t.replace(DL,C.toString())}return t}var PL=/\(([^()]*)\)/;function Goe(e){for(var t=e;t.includes("(");){var n=PL.exec(t),r=fv(n,2),s=r[1];t=t.replace(PL,s9(s))}return t}function Hoe(e){var t=e.replace(/\s+/g,"");return t=Goe(t),t=s9(t),t}function Koe(e){try{return Hoe(e)}catch{return Yp}}function gw(e){var t=Koe(e.slice(5,-1));return t===Yp?"":t}var zoe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],qoe=["dx","dy","angle","className","breakAll"];function XC(){return XC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},XC.apply(this,arguments)}function ML(e,t){if(e==null)return{};var n=Voe(e,t),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Voe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function LL(e,t){return Xoe(e)||Qoe(e,t)||Yoe(e,t)||Woe()}function Woe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yoe(e,t){if(e){if(typeof e=="string")return $L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $L(e,t)}}function $L(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Qoe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(m){u=!0,s=m}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Xoe(e){if(Array.isArray(e))return e}var i9=/[ \f\n\r\t\v\u2028\u2029]+/,o9=function(t){var n=t.children,r=t.breakAll,s=t.style;try{var i=[];nn(n)||(r?i=n.toString().split(""):i=n.toString().split(i9));var o=i.map(function(c){return{word:c,width:um(c,s).width}}),l=r?0:um("",s).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},Joe=function(t,n,r,s,i){var o=t.maxLines,l=t.children,c=t.style,u=t.breakAll,m=lt(o),p=l,g=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return G.reduce(function(L,H){var F=H.word,K=H.width,ne=L[L.length-1];if(ne&&(s==null||i||ne.width+K+r<Number(s)))ne.words.push(F),ne.width+=K+r;else{var V={words:[F],width:K};L.push(V)}return L},[])},x=g(n),y=function(G){return G.reduce(function(L,H){return L.width>H.width?L:H})};if(!m)return x;for(var v="",N=function(G){var L=p.slice(0,G),H=o9({breakAll:u,style:c,children:L+v}).wordsWithComputedWidth,F=g(H),K=F.length>o||y(F).width>Number(s);return[K,F]},S=0,j=p.length-1,C=0,_;S<=j&&C<=p.length-1;){var A=Math.floor((S+j)/2),T=A-1,R=N(T),M=LL(R,2),P=M[0],$=M[1],w=N(A),U=LL(w,1),X=U[0];if(!P&&!X&&(S=A+1),P&&X&&(j=A-1),!P&&X){_=$;break}C++}return _||x},FL=function(t){var n=nn(t)?[]:t.toString().split(i9);return[{words:n}]},Zoe=function(t){var n=t.width,r=t.scaleToFit,s=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((n||r)&&!sl.isSsr){var c,u,m=o9({breakAll:o,children:s,style:i});if(m){var p=m.wordsWithComputedWidth,g=m.spaceWidth;c=p,u=g}else return FL(s);return Joe({breakAll:o,children:s,maxLines:l,style:i},c,u,n,r)}return FL(s)},UL="#808080",Kf=function(t){var n=t.x,r=n===void 0?0:n,s=t.y,i=s===void 0?0:s,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,u=c===void 0?"0.71em":c,m=t.scaleToFit,p=m===void 0?!1:m,g=t.textAnchor,x=g===void 0?"start":g,y=t.verticalAnchor,v=y===void 0?"end":y,N=t.fill,S=N===void 0?UL:N,j=ML(t,zoe),C=h.useMemo(function(){return Zoe({breakAll:j.breakAll,children:j.children,maxLines:j.maxLines,scaleToFit:p,style:j.style,width:j.width})},[j.breakAll,j.children,j.maxLines,p,j.style,j.width]),_=j.dx,A=j.dy,T=j.angle,R=j.className,M=j.breakAll,P=ML(j,qoe);if(!$a(r)||!$a(i))return null;var $=r+(lt(_)?_:0),w=i+(lt(A)?A:0),U;switch(v){case"start":U=gw("calc(".concat(u,")"));break;case"middle":U=gw("calc(".concat((C.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:U=gw("calc(".concat(C.length-1," * -").concat(l,")"));break}var X=[];if(p){var I=C[0].width,G=j.width;X.push("scale(".concat((lt(G)?G/I:1)/I,")"))}return T&&X.push("rotate(".concat(T,", ").concat($,", ").concat(w,")")),X.length&&(P.transform=X.join(" ")),W.createElement("text",XC({},Pt(P,!0),{x:$,y:w,className:fn("recharts-text",R),textAnchor:x,fill:S.includes("url")?UL:S}),C.map(function(L,H){var F=L.words.join(M?"":" ");return W.createElement("tspan",{x:$,dy:H===0?U:l,key:"".concat(F,"-").concat(H)},F)}))};function Cu(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ele(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function nk(e){let t,n,r;e.length!==2?(t=Cu,n=(l,c)=>Cu(e(l),c),r=(l,c)=>e(l)-c):(t=e===Cu||e===ele?e:tle,n=e,r=e);function s(l,c,u=0,m=l.length){if(u<m){if(t(c,c)!==0)return m;do{const p=u+m>>>1;n(l[p],c)<0?u=p+1:m=p}while(u<m)}return u}function i(l,c,u=0,m=l.length){if(u<m){if(t(c,c)!==0)return m;do{const p=u+m>>>1;n(l[p],c)<=0?u=p+1:m=p}while(u<m)}return u}function o(l,c,u=0,m=l.length){const p=s(l,c,u,m-1);return p>u&&r(l[p-1],c)>-r(l[p],c)?p-1:p}return{left:s,center:o,right:i}}function tle(){return 0}function l9(e){return e===null?NaN:+e}function*nle(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const rle=nk(Cu),_x=rle.right;nk(l9).center;class km{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let s=0;s<this._n&&s<32;s++){const i=n[s],o=t+i,l=Math.abs(t)<Math.abs(i)?t-(o-i):i-(o-t);l&&(n[r++]=l),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,s,i,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,s=t[--n],o=r+s,i=s-(o-r),!i););n>0&&(i<0&&t[n-1]<0||i>0&&t[n-1]>0)&&(s=i*2,r=o+s,s==r-o&&(o=r))}return o}}class BL extends Map{constructor(t,n=ile){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,s]of t)this.set(r,s)}get(t){return super.get(GL(this,t))}has(t){return super.has(GL(this,t))}set(t,n){return super.set(ale(this,t),n)}delete(t){return super.delete(sle(this,t))}}function GL({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function ale({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function sle({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function ile(e){return e!==null&&typeof e=="object"?e.valueOf():e}function ole(e=Cu){if(e===Cu)return c9;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function c9(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const lle=Math.sqrt(50),cle=Math.sqrt(10),dle=Math.sqrt(2);function pv(e,t,n){const r=(t-e)/Math.max(0,n),s=Math.floor(Math.log10(r)),i=r/Math.pow(10,s),o=i>=lle?10:i>=cle?5:i>=dle?2:1;let l,c,u;return s<0?(u=Math.pow(10,-s)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,s)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=n&&n<2?pv(e,t,n*2):[l,c,u]}function JC(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[s,i,o]=r?pv(t,e,n):pv(e,t,n);if(!(i>=s))return[];const l=i-s+1,c=new Array(l);if(r)if(o<0)for(let u=0;u<l;++u)c[u]=(i-u)/-o;else for(let u=0;u<l;++u)c[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(s+u)/-o;else for(let u=0;u<l;++u)c[u]=(s+u)*o;return c}function ZC(e,t,n){return t=+t,e=+e,n=+n,pv(e,t,n)[2]}function eT(e,t,n){t=+t,e=+e,n=+n;const r=t<e,s=r?ZC(t,e,n):ZC(e,t,n);return(r?-1:1)*(s<0?1/-s:s)}function HL(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function KL(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function d9(e,t,n=0,r=1/0,s){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(s=s===void 0?c9:ole(s);r>n;){if(r-n>600){const c=r-n+1,u=t-n+1,m=Math.log(c),p=.5*Math.exp(2*m/3),g=.5*Math.sqrt(m*p*(c-p)/c)*(u-c/2<0?-1:1),x=Math.max(n,Math.floor(t-u*p/c+g)),y=Math.min(r,Math.floor(t+(c-u)*p/c+g));d9(e,t,x,y,s)}const i=e[t];let o=n,l=r;for(j0(e,n,t),s(e[r],i)>0&&j0(e,n,r);o<l;){for(j0(e,o,l),++o,--l;s(e[o],i)<0;)++o;for(;s(e[l],i)>0;)--l}s(e[n],i)===0?j0(e,n,l):(++l,j0(e,l,r)),l<=t&&(n=l+1),t<=l&&(r=l-1)}return e}function j0(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function ule(e,t,n){if(e=Float64Array.from(nle(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return KL(e);if(t>=1)return HL(e);var r,s=(r-1)*t,i=Math.floor(s),o=HL(d9(e,i).subarray(0,i+1)),l=KL(e.subarray(i+1));return o+(l-o)*(s-i)}}function fle(e,t,n=l9){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,s=(r-1)*t,i=Math.floor(s),o=+n(e[i],i,e),l=+n(e[i+1],i+1,e);return o+(l-o)*(s-i)}}function*ple(e){for(const t of e)yield*t}function mle(e){return Array.from(ple(e))}function hle(e,t,n){e=+e,t=+t,n=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+n;for(var r=-1,s=Math.max(0,Math.ceil((t-e)/n))|0,i=new Array(s);++r<s;)i[r]=e+r*n;return i}function So(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function yd(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const tT=Symbol("implicit");function rk(){var e=new BL,t=[],n=[],r=tT;function s(i){let o=e.get(i);if(o===void 0){if(r!==tT)return r;e.set(i,o=t.push(i)-1)}return n[o%n.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new BL;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(n=Array.from(i),s):n.slice()},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return rk(t,n).unknown(r)},So.apply(s,arguments),s}function $g(){var e=rk().unknown(void 0),t=e.domain,n=e.range,r=0,s=1,i,o,l=!1,c=0,u=0,m=.5;delete e.unknown;function p(){var g=t().length,x=s<r,y=x?s:r,v=x?r:s;i=(v-y)/Math.max(1,g-c+u*2),l&&(i=Math.floor(i)),y+=(v-y-i*(g-c))*m,o=i*(1-c),l&&(y=Math.round(y),o=Math.round(o));var N=hle(g).map(function(S){return y+i*S});return n(x?N.reverse():N)}return e.domain=function(g){return arguments.length?(t(g),p()):t()},e.range=function(g){return arguments.length?([r,s]=g,r=+r,s=+s,p()):[r,s]},e.rangeRound=function(g){return[r,s]=g,r=+r,s=+s,l=!0,p()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(g){return arguments.length?(l=!!g,p()):l},e.padding=function(g){return arguments.length?(c=Math.min(1,u=+g),p()):c},e.paddingInner=function(g){return arguments.length?(c=Math.min(1,g),p()):c},e.paddingOuter=function(g){return arguments.length?(u=+g,p()):u},e.align=function(g){return arguments.length?(m=Math.max(0,Math.min(1,g)),p()):m},e.copy=function(){return $g(t(),[r,s]).round(l).paddingInner(c).paddingOuter(u).align(m)},So.apply(p(),arguments)}function u9(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return u9(t())},e}function hg(){return u9($g.apply(null,arguments).paddingInner(1))}function ak(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function f9(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Cx(){}var Fg=.7,mv=1/Fg,fm="\\s*([+-]?\\d+)\\s*",Ug="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",rc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",gle=/^#([0-9a-f]{3,8})$/,xle=new RegExp(`^rgb\\(${fm},${fm},${fm}\\)$`),ble=new RegExp(`^rgb\\(${rc},${rc},${rc}\\)$`),yle=new RegExp(`^rgba\\(${fm},${fm},${fm},${Ug}\\)$`),vle=new RegExp(`^rgba\\(${rc},${rc},${rc},${Ug}\\)$`),Nle=new RegExp(`^hsl\\(${Ug},${rc},${rc}\\)$`),Sle=new RegExp(`^hsla\\(${Ug},${rc},${rc},${Ug}\\)$`),zL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ak(Cx,zf,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:qL,formatHex:qL,formatHex8:Ele,formatHsl:jle,formatRgb:VL,toString:VL});function qL(){return this.rgb().formatHex()}function Ele(){return this.rgb().formatHex8()}function jle(){return p9(this).formatHsl()}function VL(){return this.rgb().formatRgb()}function zf(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=gle.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?WL(t):n===3?new Ni(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Gb(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Gb(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=xle.exec(e))?new Ni(t[1],t[2],t[3],1):(t=ble.exec(e))?new Ni(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=yle.exec(e))?Gb(t[1],t[2],t[3],t[4]):(t=vle.exec(e))?Gb(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Nle.exec(e))?XL(t[1],t[2]/100,t[3]/100,1):(t=Sle.exec(e))?XL(t[1],t[2]/100,t[3]/100,t[4]):zL.hasOwnProperty(e)?WL(zL[e]):e==="transparent"?new Ni(NaN,NaN,NaN,0):null}function WL(e){return new Ni(e>>16&255,e>>8&255,e&255,1)}function Gb(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ni(e,t,n,r)}function wle(e){return e instanceof Cx||(e=zf(e)),e?(e=e.rgb(),new Ni(e.r,e.g,e.b,e.opacity)):new Ni}function hv(e,t,n,r){return arguments.length===1?wle(e):new Ni(e,t,n,r??1)}function Ni(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}ak(Ni,hv,f9(Cx,{brighter(e){return e=e==null?mv:Math.pow(mv,e),new Ni(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Fg:Math.pow(Fg,e),new Ni(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ni(Mf(this.r),Mf(this.g),Mf(this.b),gv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:YL,formatHex:YL,formatHex8:Ale,formatRgb:QL,toString:QL}));function YL(){return`#${Of(this.r)}${Of(this.g)}${Of(this.b)}`}function Ale(){return`#${Of(this.r)}${Of(this.g)}${Of(this.b)}${Of((isNaN(this.opacity)?1:this.opacity)*255)}`}function QL(){const e=gv(this.opacity);return`${e===1?"rgb(":"rgba("}${Mf(this.r)}, ${Mf(this.g)}, ${Mf(this.b)}${e===1?")":`, ${e})`}`}function gv(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Mf(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Of(e){return e=Mf(e),(e<16?"0":"")+e.toString(16)}function XL(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Jo(e,t,n,r)}function p9(e){if(e instanceof Jo)return new Jo(e.h,e.s,e.l,e.opacity);if(e instanceof Cx||(e=zf(e)),!e)return new Jo;if(e instanceof Jo)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,s=Math.min(t,n,r),i=Math.max(t,n,r),o=NaN,l=i-s,c=(i+s)/2;return l?(t===i?o=(n-r)/l+(n<r)*6:n===i?o=(r-t)/l+2:o=(t-n)/l+4,l/=c<.5?i+s:2-i-s,o*=60):l=c>0&&c<1?0:o,new Jo(o,l,c,e.opacity)}function _le(e,t,n,r){return arguments.length===1?p9(e):new Jo(e,t,n,r??1)}function Jo(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}ak(Jo,_le,f9(Cx,{brighter(e){return e=e==null?mv:Math.pow(mv,e),new Jo(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Fg:Math.pow(Fg,e),new Jo(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,s=2*n-r;return new Ni(xw(e>=240?e-240:e+120,s,r),xw(e,s,r),xw(e<120?e+240:e-120,s,r),this.opacity)},clamp(){return new Jo(JL(this.h),Hb(this.s),Hb(this.l),gv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=gv(this.opacity);return`${e===1?"hsl(":"hsla("}${JL(this.h)}, ${Hb(this.s)*100}%, ${Hb(this.l)*100}%${e===1?")":`, ${e})`}`}}));function JL(e){return e=(e||0)%360,e<0?e+360:e}function Hb(e){return Math.max(0,Math.min(1,e||0))}function xw(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}function Cle(e,t,n,r,s){var i=e*e,o=i*e;return((1-3*e+3*i-o)*t+(4-6*i+3*o)*n+(1+3*e+3*i-3*o)*r+o*s)/6}function Tle(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),s=e[r],i=e[r+1],o=r>0?e[r-1]:2*s-i,l=r<t-1?e[r+2]:2*i-s;return Cle((n-r/t)*t,o,s,i,l)}}const sk=e=>()=>e;function Ole(e,t){return function(n){return e+n*t}}function Rle(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function kle(e){return(e=+e)==1?m9:function(t,n){return n-t?Rle(t,n,e):sk(isNaN(t)?n:t)}}function m9(e,t){var n=t-e;return n?Ole(e,n):sk(isNaN(e)?t:e)}const xv=(function e(t){var n=kle(t);function r(s,i){var o=n((s=hv(s)).r,(i=hv(i)).r),l=n(s.g,i.g),c=n(s.b,i.b),u=m9(s.opacity,i.opacity);return function(m){return s.r=o(m),s.g=l(m),s.b=c(m),s.opacity=u(m),s+""}}return r.gamma=e,r})(1);function Ile(e){return function(t){var n=t.length,r=new Array(n),s=new Array(n),i=new Array(n),o,l;for(o=0;o<n;++o)l=hv(t[o]),r[o]=l.r||0,s[o]=l.g||0,i[o]=l.b||0;return r=e(r),s=e(s),i=e(i),l.opacity=1,function(c){return l.r=r(c),l.g=s(c),l.b=i(c),l+""}}}var Dle=Ile(Tle);function Ple(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),s;return function(i){for(s=0;s<n;++s)r[s]=e[s]*(1-i)+t[s]*i;return r}}function Mle(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Lle(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,s=new Array(r),i=new Array(n),o;for(o=0;o<r;++o)s[o]=_h(e[o],t[o]);for(;o<n;++o)i[o]=t[o];return function(l){for(o=0;o<r;++o)i[o]=s[o](l);return i}}function $le(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Qo(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Fle(e,t){var n={},r={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?n[s]=_h(e[s],t[s]):r[s]=t[s];return function(i){for(s in n)r[s]=n[s](i);return r}}var nT=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,bw=new RegExp(nT.source,"g");function Ule(e){return function(){return e}}function Ble(e){return function(t){return e(t)+""}}function h9(e,t){var n=nT.lastIndex=bw.lastIndex=0,r,s,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(r=nT.exec(e))&&(s=bw.exec(t));)(i=s.index)>n&&(i=t.slice(n,i),l[o]?l[o]+=i:l[++o]=i),(r=r[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,c.push({i:o,x:Qo(r,s)})),n=bw.lastIndex;return n<t.length&&(i=t.slice(n),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?Ble(c[0].x):Ule(t):(t=c.length,function(u){for(var m=0,p;m<t;++m)l[(p=c[m]).i]=p.x(u);return l.join("")})}function _h(e,t){var n=typeof t,r;return t==null||n==="boolean"?sk(t):(n==="number"?Qo:n==="string"?(r=zf(t))?(t=r,xv):h9:t instanceof zf?xv:t instanceof Date?$le:Mle(t)?Ple:Array.isArray(t)?Lle:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Fle:Qo)(e,t)}function ik(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var ZL=180/Math.PI,rT={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function g9(e,t,n,r,s,i){var o,l,c;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,c/=l),e*r<t*n&&(e=-e,t=-t,c=-c,o=-o),{translateX:s,translateY:i,rotate:Math.atan2(t,e)*ZL,skewX:Math.atan(c)*ZL,scaleX:o,scaleY:l}}var Kb;function Gle(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?rT:g9(t.a,t.b,t.c,t.d,t.e,t.f)}function Hle(e){return e==null||(Kb||(Kb=document.createElementNS("http://www.w3.org/2000/svg","g")),Kb.setAttribute("transform",e),!(e=Kb.transform.baseVal.consolidate()))?rT:(e=e.matrix,g9(e.a,e.b,e.c,e.d,e.e,e.f))}function x9(e,t,n,r){function s(u){return u.length?u.pop()+" ":""}function i(u,m,p,g,x,y){if(u!==p||m!==g){var v=x.push("translate(",null,t,null,n);y.push({i:v-4,x:Qo(u,p)},{i:v-2,x:Qo(m,g)})}else(p||g)&&x.push("translate("+p+t+g+n)}function o(u,m,p,g){u!==m?(u-m>180?m+=360:m-u>180&&(u+=360),g.push({i:p.push(s(p)+"rotate(",null,r)-2,x:Qo(u,m)})):m&&p.push(s(p)+"rotate("+m+r)}function l(u,m,p,g){u!==m?g.push({i:p.push(s(p)+"skewX(",null,r)-2,x:Qo(u,m)}):m&&p.push(s(p)+"skewX("+m+r)}function c(u,m,p,g,x,y){if(u!==p||m!==g){var v=x.push(s(x)+"scale(",null,",",null,")");y.push({i:v-4,x:Qo(u,p)},{i:v-2,x:Qo(m,g)})}else(p!==1||g!==1)&&x.push(s(x)+"scale("+p+","+g+")")}return function(u,m){var p=[],g=[];return u=e(u),m=e(m),i(u.translateX,u.translateY,m.translateX,m.translateY,p,g),o(u.rotate,m.rotate,p,g),l(u.skewX,m.skewX,p,g),c(u.scaleX,u.scaleY,m.scaleX,m.scaleY,p,g),u=m=null,function(x){for(var y=-1,v=g.length,N;++y<v;)p[(N=g[y]).i]=N.x(x);return p.join("")}}}var Kle=x9(Gle,"px, ","px)","deg)"),zle=x9(Hle,", ",")",")"),qle=1e-12;function e$(e){return((e=Math.exp(e))+1/e)/2}function Vle(e){return((e=Math.exp(e))-1/e)/2}function Wle(e){return((e=Math.exp(2*e))-1)/(e+1)}const Yle=(function e(t,n,r){function s(i,o){var l=i[0],c=i[1],u=i[2],m=o[0],p=o[1],g=o[2],x=m-l,y=p-c,v=x*x+y*y,N,S;if(v<qle)S=Math.log(g/u)/t,N=function(R){return[l+R*x,c+R*y,u*Math.exp(t*R*S)]};else{var j=Math.sqrt(v),C=(g*g-u*u+r*v)/(2*u*n*j),_=(g*g-u*u-r*v)/(2*g*n*j),A=Math.log(Math.sqrt(C*C+1)-C),T=Math.log(Math.sqrt(_*_+1)-_);S=(T-A)/t,N=function(R){var M=R*S,P=e$(A),$=u/(n*j)*(P*Wle(t*M+A)-Vle(A));return[l+$*x,c+$*y,u*P/e$(t*M+A)]}}return N.duration=S*1e3*t/Math.SQRT2,N}return s.rho=function(i){var o=Math.max(.001,+i),l=o*o,c=l*l;return e(o,l,c)},s})(Math.SQRT2,2,4);function Qle(e,t){t===void 0&&(t=e,e=_h);for(var n=0,r=t.length-1,s=t[0],i=new Array(r<0?0:r);n<r;)i[n]=e(s,s=t[++n]);return function(o){var l=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return i[l](o-l)}}function Xle(e){return function(){return e}}function bv(e){return+e}var t$=[0,1];function ei(e){return e}function aT(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Xle(isNaN(t)?NaN:.5)}function Jle(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Zle(e,t,n){var r=e[0],s=e[1],i=t[0],o=t[1];return s<r?(r=aT(s,r),i=n(o,i)):(r=aT(r,s),i=n(i,o)),function(l){return i(r(l))}}function ece(e,t,n){var r=Math.min(e.length,t.length)-1,s=new Array(r),i=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)s[o]=aT(e[o],e[o+1]),i[o]=n(t[o],t[o+1]);return function(l){var c=_x(e,l,1,r)-1;return i[c](s[c](l))}}function Tx(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function lN(){var e=t$,t=t$,n=_h,r,s,i,o=ei,l,c,u;function m(){var g=Math.min(e.length,t.length);return o!==ei&&(o=Jle(e[0],e[g-1])),l=g>2?ece:Zle,c=u=null,p}function p(g){return g==null||isNaN(g=+g)?i:(c||(c=l(e.map(r),t,n)))(r(o(g)))}return p.invert=function(g){return o(s((u||(u=l(t,e.map(r),Qo)))(g)))},p.domain=function(g){return arguments.length?(e=Array.from(g,bv),m()):e.slice()},p.range=function(g){return arguments.length?(t=Array.from(g),m()):t.slice()},p.rangeRound=function(g){return t=Array.from(g),n=ik,m()},p.clamp=function(g){return arguments.length?(o=g?!0:ei,m()):o!==ei},p.interpolate=function(g){return arguments.length?(n=g,m()):n},p.unknown=function(g){return arguments.length?(i=g,p):i},function(g,x){return r=g,s=x,m()}}function ok(){return lN()(ei,ei)}function tce(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function yv(e,t){if(!isFinite(e)||e===0)return null;var n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Im(e){return e=yv(Math.abs(e)),e?e[1]:NaN}function nce(e,t){return function(n,r){for(var s=n.length,i=[],o=0,l=e[0],c=0;s>0&&l>0&&(c+l+1>r&&(l=Math.max(1,r-c)),i.push(n.substring(s-=l,s+l)),!((c+=l+1)>r));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function rce(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var ace=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Bg(e){if(!(t=ace.exec(e)))throw new Error("invalid format: "+e);var t;return new lk({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Bg.prototype=lk.prototype;function lk(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}lk.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function sce(e){e:for(var t=e.length,n=1,r=-1,s;n<t;++n)switch(e[n]){case".":r=s=n;break;case"0":r===0&&(r=n),s=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(s+1):e}var vv;function ice(e,t){var n=yv(e,t);if(!n)return vv=void 0,e.toPrecision(t);var r=n[0],s=n[1],i=s-(vv=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+yv(e,Math.max(0,t+i-1))[0]}function n$(e,t){var n=yv(e,t);if(!n)return e+"";var r=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+r:r.length>s+1?r.slice(0,s+1)+"."+r.slice(s+1):r+new Array(s-r.length+2).join("0")}const r$={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:tce,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>n$(e*100,t),r:n$,s:ice,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function a$(e){return e}var s$=Array.prototype.map,i$=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function oce(e){var t=e.grouping===void 0||e.thousands===void 0?a$:nce(s$.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?a$:rce(s$.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(p,g){p=Bg(p);var x=p.fill,y=p.align,v=p.sign,N=p.symbol,S=p.zero,j=p.width,C=p.comma,_=p.precision,A=p.trim,T=p.type;T==="n"?(C=!0,T="g"):r$[T]||(_===void 0&&(_=12),A=!0,T="g"),(S||x==="0"&&y==="=")&&(S=!0,x="0",y="=");var R=(g&&g.prefix!==void 0?g.prefix:"")+(N==="$"?n:N==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():""),M=(N==="$"?r:/[%p]/.test(T)?o:"")+(g&&g.suffix!==void 0?g.suffix:""),P=r$[T],$=/[defgprs%]/.test(T);_=_===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function w(U){var X=R,I=M,G,L,H;if(T==="c")I=P(U)+I,U="";else{U=+U;var F=U<0||1/U<0;if(U=isNaN(U)?c:P(Math.abs(U),_),A&&(U=sce(U)),F&&+U==0&&v!=="+"&&(F=!1),X=(F?v==="("?v:l:v==="-"||v==="("?"":v)+X,I=(T==="s"&&!isNaN(U)&&vv!==void 0?i$[8+vv/3]:"")+I+(F&&v==="("?")":""),$){for(G=-1,L=U.length;++G<L;)if(H=U.charCodeAt(G),48>H||H>57){I=(H===46?s+U.slice(G+1):U.slice(G))+I,U=U.slice(0,G);break}}}C&&!S&&(U=t(U,1/0));var K=X.length+U.length+I.length,ne=K<j?new Array(j-K+1).join(x):"";switch(C&&S&&(U=t(ne+U,ne.length?j-I.length:1/0),ne=""),y){case"<":U=X+U+I+ne;break;case"=":U=X+ne+U+I;break;case"^":U=ne.slice(0,K=ne.length>>1)+X+U+I+ne.slice(K);break;default:U=ne+X+U+I;break}return i(U)}return w.toString=function(){return p+""},w}function m(p,g){var x=Math.max(-8,Math.min(8,Math.floor(Im(g)/3)))*3,y=Math.pow(10,-x),v=u((p=Bg(p),p.type="f",p),{suffix:i$[8+x/3]});return function(N){return v(y*N)}}return{format:u,formatPrefix:m}}var zb,ck,b9;lce({thousands:",",grouping:[3],currency:["$",""]});function lce(e){return zb=oce(e),ck=zb.format,b9=zb.formatPrefix,zb}function cce(e){return Math.max(0,-Im(Math.abs(e)))}function dce(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Im(t)/3)))*3-Im(Math.abs(e)))}function uce(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Im(t)-Im(e))+1}function y9(e,t,n,r){var s=eT(e,t,n),i;switch(r=Bg(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(i=dce(s,o))&&(r.precision=i),b9(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=uce(s,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=cce(s))&&(r.precision=i-(r.type==="%")*2);break}}return ck(r)}function $u(e){var t=e.domain;return e.ticks=function(n){var r=t();return JC(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var s=t();return y9(s[0],s[s.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),s=0,i=r.length-1,o=r[s],l=r[i],c,u,m=10;for(l<o&&(u=o,o=l,l=u,u=s,s=i,i=u);m-- >0;){if(u=ZC(o,l,n),u===c)return r[s]=o,r[i]=l,t(r);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function Nv(){var e=ok();return e.copy=function(){return Tx(e,Nv())},So.apply(e,arguments),$u(e)}function v9(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,bv),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return v9(e).unknown(t)},e=arguments.length?Array.from(e,bv):[0,1],$u(n)}function N9(e,t){e=e.slice();var n=0,r=e.length-1,s=e[n],i=e[r],o;return i<s&&(o=n,n=r,r=o,o=s,s=i,i=o),e[n]=t.floor(s),e[r]=t.ceil(i),e}function o$(e){return Math.log(e)}function l$(e){return Math.exp(e)}function fce(e){return-Math.log(-e)}function pce(e){return-Math.exp(-e)}function mce(e){return isFinite(e)?+("1e"+e):e<0?0:e}function hce(e){return e===10?mce:e===Math.E?Math.exp:t=>Math.pow(e,t)}function gce(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function c$(e){return(t,n)=>-e(-t,n)}function dk(e){const t=e(o$,l$),n=t.domain;let r=10,s,i;function o(){return s=gce(r),i=hce(r),n()[0]<0?(s=c$(s),i=c$(i),e(fce,pce)):e(o$,l$),t}return t.base=function(l){return arguments.length?(r=+l,o()):r},t.domain=function(l){return arguments.length?(n(l),o()):n()},t.ticks=l=>{const c=n();let u=c[0],m=c[c.length-1];const p=m<u;p&&([u,m]=[m,u]);let g=s(u),x=s(m),y,v;const N=l==null?10:+l;let S=[];if(!(r%1)&&x-g<N){if(g=Math.floor(g),x=Math.ceil(x),u>0){for(;g<=x;++g)for(y=1;y<r;++y)if(v=g<0?y/i(-g):y*i(g),!(v<u)){if(v>m)break;S.push(v)}}else for(;g<=x;++g)for(y=r-1;y>=1;--y)if(v=g>0?y/i(-g):y*i(g),!(v<u)){if(v>m)break;S.push(v)}S.length*2<N&&(S=JC(u,m,N))}else S=JC(g,x,Math.min(x-g,N)).map(i);return p?S.reverse():S},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=Bg(c)).precision==null&&(c.trim=!0),c=ck(c)),l===1/0)return c;const u=Math.max(1,r*l/t.ticks().length);return m=>{let p=m/i(Math.round(s(m)));return p*r<r-.5&&(p*=r),p<=u?c(m):""}},t.nice=()=>n(N9(n(),{floor:l=>i(Math.floor(s(l))),ceil:l=>i(Math.ceil(s(l)))})),t}function S9(){const e=dk(lN()).domain([1,10]);return e.copy=()=>Tx(e,S9()).base(e.base()),So.apply(e,arguments),e}function d$(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function u$(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function uk(e){var t=1,n=e(d$(t),u$(t));return n.constant=function(r){return arguments.length?e(d$(t=+r),u$(t)):t},$u(n)}function E9(){var e=uk(lN());return e.copy=function(){return Tx(e,E9()).constant(e.constant())},So.apply(e,arguments)}function f$(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function xce(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function bce(e){return e<0?-e*e:e*e}function fk(e){var t=e(ei,ei),n=1;function r(){return n===1?e(ei,ei):n===.5?e(xce,bce):e(f$(n),f$(1/n))}return t.exponent=function(s){return arguments.length?(n=+s,r()):n},$u(t)}function pk(){var e=fk(lN());return e.copy=function(){return Tx(e,pk()).exponent(e.exponent())},So.apply(e,arguments),e}function yce(){return pk.apply(null,arguments).exponent(.5)}function p$(e){return Math.sign(e)*e*e}function vce(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function j9(){var e=ok(),t=[0,1],n=!1,r;function s(i){var o=vce(e(i));return isNaN(o)?r:n?Math.round(o):o}return s.invert=function(i){return e.invert(p$(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,bv)).map(p$)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(n=!!i,s):n},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return j9(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},So.apply(s,arguments),$u(s)}function w9(){var e=[],t=[],n=[],r;function s(){var o=0,l=Math.max(1,t.length);for(n=new Array(l-1);++o<l;)n[o-1]=fle(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?r:t[_x(n,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Cu),s()},i.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.quantiles=function(){return n.slice()},i.copy=function(){return w9().domain(e).range(t).unknown(r)},So.apply(i,arguments)}function mk(){var e=0,t=1,n=1,r=[.5],s=[0,1],i;function o(c){return c!=null&&c<=c?s[_x(r,c,0,n)]:i}function l(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*t-(c-n)*e)/(n+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(n=(s=Array.from(c)).length-1,l()):s.slice()},o.invertExtent=function(c){var u=s.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return r.slice()},o.copy=function(){return mk().domain([e,t]).range(s).unknown(i)},So.apply($u(o),arguments)}function A9(){var e=[.5],t=[0,1],n,r=1;function s(i){return i!=null&&i<=i?t[_x(e,i,0,r)]:n}return s.domain=function(i){return arguments.length?(e=Array.from(i),r=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),r=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return A9().domain(e).range(t).unknown(n)},So.apply(s,arguments)}const yw=new Date,vw=new Date;function Ua(e,t,n,r){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const o=s(i),l=s.ceil(i);return i-o<l-i?o:l},s.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,l)=>{const c=[];if(i=s.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let u;do c.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<o);return c},s.filter=i=>Ua(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),n&&(s.count=(i,o)=>(yw.setTime(+i),vw.setTime(+o),e(yw),e(vw),Math.floor(n(yw,vw))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(r?o=>r(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const Sv=Ua(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Sv.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ua(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Sv);Sv.range;const Jc=1e3,bo=Jc*60,Zc=bo*60,cd=Zc*24,hk=cd*7,m$=cd*30,Nw=cd*365,Rf=Ua(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Jc)},(e,t)=>(t-e)/Jc,e=>e.getUTCSeconds());Rf.range;const gk=Ua(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Jc)},(e,t)=>{e.setTime(+e+t*bo)},(e,t)=>(t-e)/bo,e=>e.getMinutes());gk.range;const xk=Ua(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*bo)},(e,t)=>(t-e)/bo,e=>e.getUTCMinutes());xk.range;const bk=Ua(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Jc-e.getMinutes()*bo)},(e,t)=>{e.setTime(+e+t*Zc)},(e,t)=>(t-e)/Zc,e=>e.getHours());bk.range;const yk=Ua(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Zc)},(e,t)=>(t-e)/Zc,e=>e.getUTCHours());yk.range;const Ox=Ua(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*bo)/cd,e=>e.getDate()-1);Ox.range;const cN=Ua(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/cd,e=>e.getUTCDate()-1);cN.range;const _9=Ua(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/cd,e=>Math.floor(e/cd));_9.range;function rp(e){return Ua(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*bo)/hk)}const dN=rp(0),Ev=rp(1),Nce=rp(2),Sce=rp(3),Dm=rp(4),Ece=rp(5),jce=rp(6);dN.range;Ev.range;Nce.range;Sce.range;Dm.range;Ece.range;jce.range;function ap(e){return Ua(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/hk)}const uN=ap(0),jv=ap(1),wce=ap(2),Ace=ap(3),Pm=ap(4),_ce=ap(5),Cce=ap(6);uN.range;jv.range;wce.range;Ace.range;Pm.range;_ce.range;Cce.range;const vk=Ua(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());vk.range;const Nk=Ua(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Nk.range;const dd=Ua(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());dd.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ua(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});dd.range;const ud=Ua(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ud.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ua(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});ud.range;function C9(e,t,n,r,s,i){const o=[[Rf,1,Jc],[Rf,5,5*Jc],[Rf,15,15*Jc],[Rf,30,30*Jc],[i,1,bo],[i,5,5*bo],[i,15,15*bo],[i,30,30*bo],[s,1,Zc],[s,3,3*Zc],[s,6,6*Zc],[s,12,12*Zc],[r,1,cd],[r,2,2*cd],[n,1,hk],[t,1,m$],[t,3,3*m$],[e,1,Nw]];function l(u,m,p){const g=m<u;g&&([u,m]=[m,u]);const x=p&&typeof p.range=="function"?p:c(u,m,p),y=x?x.range(u,+m+1):[];return g?y.reverse():y}function c(u,m,p){const g=Math.abs(m-u)/p,x=nk(([,,N])=>N).right(o,g);if(x===o.length)return e.every(eT(u/Nw,m/Nw,p));if(x===0)return Sv.every(Math.max(eT(u,m,p),1));const[y,v]=o[g/o[x-1][2]<o[x][2]/g?x-1:x];return y.every(v)}return[l,c]}const[Tce,Oce]=C9(ud,Nk,uN,_9,yk,xk),[Rce,kce]=C9(dd,vk,dN,Ox,bk,gk);function Sw(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Ew(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function w0(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Ice(e){var t=e.dateTime,n=e.date,r=e.time,s=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=A0(s),m=_0(s),p=A0(i),g=_0(i),x=A0(o),y=_0(o),v=A0(l),N=_0(l),S=A0(c),j=_0(c),C={a:H,A:F,b:K,B:ne,c:null,d:v$,e:v$,f:nde,g:fde,G:mde,H:Zce,I:ede,j:tde,L:T9,m:rde,M:ade,p:V,q:ee,Q:E$,s:j$,S:sde,u:ide,U:ode,V:lde,w:cde,W:dde,x:null,X:null,y:ude,Y:pde,Z:hde,"%":S$},_={a:ae,A:ue,b:ce,B:Z,c:null,d:N$,e:N$,f:yde,g:Tde,G:Rde,H:gde,I:xde,j:bde,L:R9,m:vde,M:Nde,p:ie,q:Se,Q:E$,s:j$,S:Sde,u:Ede,U:jde,V:wde,w:Ade,W:_de,x:null,X:null,y:Cde,Y:Ode,Z:kde,"%":S$},A={a:$,A:w,b:U,B:X,c:I,d:b$,e:b$,f:Yce,g:x$,G:g$,H:y$,I:y$,j:zce,L:Wce,m:Kce,M:qce,p:P,q:Hce,Q:Xce,s:Jce,S:Vce,u:$ce,U:Fce,V:Uce,w:Lce,W:Bce,x:G,X:L,y:x$,Y:g$,Z:Gce,"%":Qce};C.x=T(n,C),C.X=T(r,C),C.c=T(t,C),_.x=T(n,_),_.X=T(r,_),_.c=T(t,_);function T(fe,Te){return function(Pe){var oe=[],le=-1,ye=0,_e=fe.length,te,z,Ne;for(Pe instanceof Date||(Pe=new Date(+Pe));++le<_e;)fe.charCodeAt(le)===37&&(oe.push(fe.slice(ye,le)),(z=h$[te=fe.charAt(++le)])!=null?te=fe.charAt(++le):z=te==="e"?" ":"0",(Ne=Te[te])&&(te=Ne(Pe,z)),oe.push(te),ye=le+1);return oe.push(fe.slice(ye,le)),oe.join("")}}function R(fe,Te){return function(Pe){var oe=w0(1900,void 0,1),le=M(oe,fe,Pe+="",0),ye,_e;if(le!=Pe.length)return null;if("Q"in oe)return new Date(oe.Q);if("s"in oe)return new Date(oe.s*1e3+("L"in oe?oe.L:0));if(Te&&!("Z"in oe)&&(oe.Z=0),"p"in oe&&(oe.H=oe.H%12+oe.p*12),oe.m===void 0&&(oe.m="q"in oe?oe.q:0),"V"in oe){if(oe.V<1||oe.V>53)return null;"w"in oe||(oe.w=1),"Z"in oe?(ye=Ew(w0(oe.y,0,1)),_e=ye.getUTCDay(),ye=_e>4||_e===0?jv.ceil(ye):jv(ye),ye=cN.offset(ye,(oe.V-1)*7),oe.y=ye.getUTCFullYear(),oe.m=ye.getUTCMonth(),oe.d=ye.getUTCDate()+(oe.w+6)%7):(ye=Sw(w0(oe.y,0,1)),_e=ye.getDay(),ye=_e>4||_e===0?Ev.ceil(ye):Ev(ye),ye=Ox.offset(ye,(oe.V-1)*7),oe.y=ye.getFullYear(),oe.m=ye.getMonth(),oe.d=ye.getDate()+(oe.w+6)%7)}else("W"in oe||"U"in oe)&&("w"in oe||(oe.w="u"in oe?oe.u%7:"W"in oe?1:0),_e="Z"in oe?Ew(w0(oe.y,0,1)).getUTCDay():Sw(w0(oe.y,0,1)).getDay(),oe.m=0,oe.d="W"in oe?(oe.w+6)%7+oe.W*7-(_e+5)%7:oe.w+oe.U*7-(_e+6)%7);return"Z"in oe?(oe.H+=oe.Z/100|0,oe.M+=oe.Z%100,Ew(oe)):Sw(oe)}}function M(fe,Te,Pe,oe){for(var le=0,ye=Te.length,_e=Pe.length,te,z;le<ye;){if(oe>=_e)return-1;if(te=Te.charCodeAt(le++),te===37){if(te=Te.charAt(le++),z=A[te in h$?Te.charAt(le++):te],!z||(oe=z(fe,Pe,oe))<0)return-1}else if(te!=Pe.charCodeAt(oe++))return-1}return oe}function P(fe,Te,Pe){var oe=u.exec(Te.slice(Pe));return oe?(fe.p=m.get(oe[0].toLowerCase()),Pe+oe[0].length):-1}function $(fe,Te,Pe){var oe=x.exec(Te.slice(Pe));return oe?(fe.w=y.get(oe[0].toLowerCase()),Pe+oe[0].length):-1}function w(fe,Te,Pe){var oe=p.exec(Te.slice(Pe));return oe?(fe.w=g.get(oe[0].toLowerCase()),Pe+oe[0].length):-1}function U(fe,Te,Pe){var oe=S.exec(Te.slice(Pe));return oe?(fe.m=j.get(oe[0].toLowerCase()),Pe+oe[0].length):-1}function X(fe,Te,Pe){var oe=v.exec(Te.slice(Pe));return oe?(fe.m=N.get(oe[0].toLowerCase()),Pe+oe[0].length):-1}function I(fe,Te,Pe){return M(fe,t,Te,Pe)}function G(fe,Te,Pe){return M(fe,n,Te,Pe)}function L(fe,Te,Pe){return M(fe,r,Te,Pe)}function H(fe){return o[fe.getDay()]}function F(fe){return i[fe.getDay()]}function K(fe){return c[fe.getMonth()]}function ne(fe){return l[fe.getMonth()]}function V(fe){return s[+(fe.getHours()>=12)]}function ee(fe){return 1+~~(fe.getMonth()/3)}function ae(fe){return o[fe.getUTCDay()]}function ue(fe){return i[fe.getUTCDay()]}function ce(fe){return c[fe.getUTCMonth()]}function Z(fe){return l[fe.getUTCMonth()]}function ie(fe){return s[+(fe.getUTCHours()>=12)]}function Se(fe){return 1+~~(fe.getUTCMonth()/3)}return{format:function(fe){var Te=T(fe+="",C);return Te.toString=function(){return fe},Te},parse:function(fe){var Te=R(fe+="",!1);return Te.toString=function(){return fe},Te},utcFormat:function(fe){var Te=T(fe+="",_);return Te.toString=function(){return fe},Te},utcParse:function(fe){var Te=R(fe+="",!0);return Te.toString=function(){return fe},Te}}}var h$={"-":"",_:" ",0:"0"},ts=/^\s*\d+/,Dce=/^%/,Pce=/[\\^$*+?|[\]().{}]/g;function qn(e,t,n){var r=e<0?"-":"",s=(r?-e:e)+"",i=s.length;return r+(i<n?new Array(n-i+1).join(t)+s:s)}function Mce(e){return e.replace(Pce,"\\$&")}function A0(e){return new RegExp("^(?:"+e.map(Mce).join("|")+")","i")}function _0(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Lce(e,t,n){var r=ts.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function $ce(e,t,n){var r=ts.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Fce(e,t,n){var r=ts.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Uce(e,t,n){var r=ts.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Bce(e,t,n){var r=ts.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function g$(e,t,n){var r=ts.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function x$(e,t,n){var r=ts.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Gce(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Hce(e,t,n){var r=ts.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Kce(e,t,n){var r=ts.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function b$(e,t,n){var r=ts.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function zce(e,t,n){var r=ts.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function y$(e,t,n){var r=ts.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function qce(e,t,n){var r=ts.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Vce(e,t,n){var r=ts.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Wce(e,t,n){var r=ts.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Yce(e,t,n){var r=ts.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Qce(e,t,n){var r=Dce.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Xce(e,t,n){var r=ts.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Jce(e,t,n){var r=ts.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function v$(e,t){return qn(e.getDate(),t,2)}function Zce(e,t){return qn(e.getHours(),t,2)}function ede(e,t){return qn(e.getHours()%12||12,t,2)}function tde(e,t){return qn(1+Ox.count(dd(e),e),t,3)}function T9(e,t){return qn(e.getMilliseconds(),t,3)}function nde(e,t){return T9(e,t)+"000"}function rde(e,t){return qn(e.getMonth()+1,t,2)}function ade(e,t){return qn(e.getMinutes(),t,2)}function sde(e,t){return qn(e.getSeconds(),t,2)}function ide(e){var t=e.getDay();return t===0?7:t}function ode(e,t){return qn(dN.count(dd(e)-1,e),t,2)}function O9(e){var t=e.getDay();return t>=4||t===0?Dm(e):Dm.ceil(e)}function lde(e,t){return e=O9(e),qn(Dm.count(dd(e),e)+(dd(e).getDay()===4),t,2)}function cde(e){return e.getDay()}function dde(e,t){return qn(Ev.count(dd(e)-1,e),t,2)}function ude(e,t){return qn(e.getFullYear()%100,t,2)}function fde(e,t){return e=O9(e),qn(e.getFullYear()%100,t,2)}function pde(e,t){return qn(e.getFullYear()%1e4,t,4)}function mde(e,t){var n=e.getDay();return e=n>=4||n===0?Dm(e):Dm.ceil(e),qn(e.getFullYear()%1e4,t,4)}function hde(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+qn(t/60|0,"0",2)+qn(t%60,"0",2)}function N$(e,t){return qn(e.getUTCDate(),t,2)}function gde(e,t){return qn(e.getUTCHours(),t,2)}function xde(e,t){return qn(e.getUTCHours()%12||12,t,2)}function bde(e,t){return qn(1+cN.count(ud(e),e),t,3)}function R9(e,t){return qn(e.getUTCMilliseconds(),t,3)}function yde(e,t){return R9(e,t)+"000"}function vde(e,t){return qn(e.getUTCMonth()+1,t,2)}function Nde(e,t){return qn(e.getUTCMinutes(),t,2)}function Sde(e,t){return qn(e.getUTCSeconds(),t,2)}function Ede(e){var t=e.getUTCDay();return t===0?7:t}function jde(e,t){return qn(uN.count(ud(e)-1,e),t,2)}function k9(e){var t=e.getUTCDay();return t>=4||t===0?Pm(e):Pm.ceil(e)}function wde(e,t){return e=k9(e),qn(Pm.count(ud(e),e)+(ud(e).getUTCDay()===4),t,2)}function Ade(e){return e.getUTCDay()}function _de(e,t){return qn(jv.count(ud(e)-1,e),t,2)}function Cde(e,t){return qn(e.getUTCFullYear()%100,t,2)}function Tde(e,t){return e=k9(e),qn(e.getUTCFullYear()%100,t,2)}function Ode(e,t){return qn(e.getUTCFullYear()%1e4,t,4)}function Rde(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Pm(e):Pm.ceil(e),qn(e.getUTCFullYear()%1e4,t,4)}function kde(){return"+0000"}function S$(){return"%"}function E$(e){return+e}function j$(e){return Math.floor(+e/1e3)}var Rp,I9,D9;Ide({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Ide(e){return Rp=Ice(e),I9=Rp.format,Rp.parse,D9=Rp.utcFormat,Rp.utcParse,Rp}function Dde(e){return new Date(e)}function Pde(e){return e instanceof Date?+e:+new Date(+e)}function Sk(e,t,n,r,s,i,o,l,c,u){var m=ok(),p=m.invert,g=m.domain,x=u(".%L"),y=u(":%S"),v=u("%I:%M"),N=u("%I %p"),S=u("%a %d"),j=u("%b %d"),C=u("%B"),_=u("%Y");function A(T){return(c(T)<T?x:l(T)<T?y:o(T)<T?v:i(T)<T?N:r(T)<T?s(T)<T?S:j:n(T)<T?C:_)(T)}return m.invert=function(T){return new Date(p(T))},m.domain=function(T){return arguments.length?g(Array.from(T,Pde)):g().map(Dde)},m.ticks=function(T){var R=g();return e(R[0],R[R.length-1],T??10)},m.tickFormat=function(T,R){return R==null?A:u(R)},m.nice=function(T){var R=g();return(!T||typeof T.range!="function")&&(T=t(R[0],R[R.length-1],T??10)),T?g(N9(R,T)):m},m.copy=function(){return Tx(m,Sk(e,t,n,r,s,i,o,l,c,u))},m}function Mde(){return So.apply(Sk(Rce,kce,dd,vk,dN,Ox,bk,gk,Rf,I9).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Lde(){return So.apply(Sk(Tce,Oce,ud,Nk,uN,cN,yk,xk,Rf,D9).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function fN(){var e=0,t=1,n,r,s,i,o=ei,l=!1,c;function u(p){return p==null||isNaN(p=+p)?c:o(s===0?.5:(p=(i(p)-n)*s,l?Math.max(0,Math.min(1,p)):p))}u.domain=function(p){return arguments.length?([e,t]=p,n=i(e=+e),r=i(t=+t),s=n===r?0:1/(r-n),u):[e,t]},u.clamp=function(p){return arguments.length?(l=!!p,u):l},u.interpolator=function(p){return arguments.length?(o=p,u):o};function m(p){return function(g){var x,y;return arguments.length?([x,y]=g,o=p(x,y),u):[o(0),o(1)]}}return u.range=m(_h),u.rangeRound=m(ik),u.unknown=function(p){return arguments.length?(c=p,u):c},function(p){return i=p,n=p(e),r=p(t),s=n===r?0:1/(r-n),u}}function Fu(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Ek(){var e=$u(fN()(ei));return e.copy=function(){return Fu(e,Ek())},yd.apply(e,arguments)}function P9(){var e=dk(fN()).domain([1,10]);return e.copy=function(){return Fu(e,P9()).base(e.base())},yd.apply(e,arguments)}function M9(){var e=uk(fN());return e.copy=function(){return Fu(e,M9()).constant(e.constant())},yd.apply(e,arguments)}function jk(){var e=fk(fN());return e.copy=function(){return Fu(e,jk()).exponent(e.exponent())},yd.apply(e,arguments)}function $de(){return jk.apply(null,arguments).exponent(.5)}function L9(){var e=[],t=ei;function n(r){if(r!=null&&!isNaN(r=+r))return t((_x(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let s of r)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Cu),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,s)=>t(s/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(s,i)=>ule(e,i/r))},n.copy=function(){return L9(t).domain(e)},yd.apply(n,arguments)}function pN(){var e=0,t=.5,n=1,r=1,s,i,o,l,c,u=ei,m,p=!1,g;function x(v){return isNaN(v=+v)?g:(v=.5+((v=+m(v))-i)*(r*v<r*i?l:c),u(p?Math.max(0,Math.min(1,v)):v))}x.domain=function(v){return arguments.length?([e,t,n]=v,s=m(e=+e),i=m(t=+t),o=m(n=+n),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),r=i<s?-1:1,x):[e,t,n]},x.clamp=function(v){return arguments.length?(p=!!v,x):p},x.interpolator=function(v){return arguments.length?(u=v,x):u};function y(v){return function(N){var S,j,C;return arguments.length?([S,j,C]=N,u=Qle(v,[S,j,C]),x):[u(0),u(.5),u(1)]}}return x.range=y(_h),x.rangeRound=y(ik),x.unknown=function(v){return arguments.length?(g=v,x):g},function(v){return m=v,s=v(e),i=v(t),o=v(n),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),r=i<s?-1:1,x}}function $9(){var e=$u(pN()(ei));return e.copy=function(){return Fu(e,$9())},yd.apply(e,arguments)}function F9(){var e=dk(pN()).domain([.1,1,10]);return e.copy=function(){return Fu(e,F9()).base(e.base())},yd.apply(e,arguments)}function U9(){var e=uk(pN());return e.copy=function(){return Fu(e,U9()).constant(e.constant())},yd.apply(e,arguments)}function wk(){var e=fk(pN());return e.copy=function(){return Fu(e,wk()).exponent(e.exponent())},yd.apply(e,arguments)}function Fde(){return wk.apply(null,arguments).exponent(.5)}const w$=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:$g,scaleDiverging:$9,scaleDivergingLog:F9,scaleDivergingPow:wk,scaleDivergingSqrt:Fde,scaleDivergingSymlog:U9,scaleIdentity:v9,scaleImplicit:tT,scaleLinear:Nv,scaleLog:S9,scaleOrdinal:rk,scalePoint:hg,scalePow:pk,scaleQuantile:w9,scaleQuantize:mk,scaleRadial:j9,scaleSequential:Ek,scaleSequentialLog:P9,scaleSequentialPow:jk,scaleSequentialQuantile:L9,scaleSequentialSqrt:$de,scaleSequentialSymlog:M9,scaleSqrt:yce,scaleSymlog:E9,scaleThreshold:A9,scaleTime:Mde,scaleUtc:Lde,tickFormat:y9},Symbol.toStringTag,{value:"Module"}));var jw,A$;function mN(){if(A$)return jw;A$=1;var e=Sh();function t(n,r,s){for(var i=-1,o=n.length;++i<o;){var l=n[i],c=r(l);if(c!=null&&(u===void 0?c===c&&!e(c):s(c,u)))var u=c,m=l}return m}return jw=t,jw}var ww,_$;function B9(){if(_$)return ww;_$=1;function e(t,n){return t>n}return ww=e,ww}var Aw,C$;function Ude(){if(C$)return Aw;C$=1;var e=mN(),t=B9(),n=Ah();function r(s){return s&&s.length?e(s,n,t):void 0}return Aw=r,Aw}var Bde=Ude();const yu=Jn(Bde);var _w,T$;function G9(){if(T$)return _w;T$=1;function e(t,n){return t<n}return _w=e,_w}var Cw,O$;function Gde(){if(O$)return Cw;O$=1;var e=mN(),t=G9(),n=Ah();function r(s){return s&&s.length?e(s,n,t):void 0}return Cw=r,Cw}var Hde=Gde();const hN=Jn(Hde);var Tw,R$;function Kde(){if(R$)return Tw;R$=1;var e=Y1(),t=fc(),n=WG(),r=ri();function s(i,o){var l=r(i)?e:n;return l(i,t(o,3))}return Tw=s,Tw}var Ow,k$;function zde(){if(k$)return Ow;k$=1;var e=JR(),t=Kde();function n(r,s){return e(t(r,s),1)}return Ow=n,Ow}var qde=zde();const Vde=Jn(qde);var Rw,I$;function Wde(){if(I$)return Rw;I$=1;var e=XR();function t(n,r){return e(n,r)}return Rw=t,Rw}var Yde=Wde();const Ru=Jn(Yde);var Ch=1e9,Qde={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},_k,Ir=!0,No="[DecimalError] ",Lf=No+"Invalid argument: ",Ak=No+"Exponent out of range: ",Th=Math.floor,Ef=Math.pow,Xde=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,$i,Ya=1e7,_r=7,H9=9007199254740991,wv=Th(H9/_r),_t={};_t.absoluteValue=_t.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};_t.comparedTo=_t.cmp=function(e){var t,n,r,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(r=i.d.length,s=e.d.length,t=0,n=r<s?r:s;t<n;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return r===s?0:r>s^i.s<0?1:-1};_t.decimalPlaces=_t.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*_r;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};_t.dividedBy=_t.div=function(e){return rd(this,new this.constructor(e))};_t.dividedToIntegerBy=_t.idiv=function(e){var t=this,n=t.constructor;return mr(rd(t,new n(e),0,1),n.precision)};_t.equals=_t.eq=function(e){return!this.cmp(e)};_t.exponent=function(){return ba(this)};_t.greaterThan=_t.gt=function(e){return this.cmp(e)>0};_t.greaterThanOrEqualTo=_t.gte=function(e){return this.cmp(e)>=0};_t.isInteger=_t.isint=function(){return this.e>this.d.length-2};_t.isNegative=_t.isneg=function(){return this.s<0};_t.isPositive=_t.ispos=function(){return this.s>0};_t.isZero=function(){return this.s===0};_t.lessThan=_t.lt=function(e){return this.cmp(e)<0};_t.lessThanOrEqualTo=_t.lte=function(e){return this.cmp(e)<1};_t.logarithm=_t.log=function(e){var t,n=this,r=n.constructor,s=r.precision,i=s+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq($i))throw Error(No+"NaN");if(n.s<1)throw Error(No+(n.s?"NaN":"-Infinity"));return n.eq($i)?new r(0):(Ir=!1,t=rd(Gg(n,i),Gg(e,i),i),Ir=!0,mr(t,s))};_t.minus=_t.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?q9(t,e):K9(t,(e.s=-e.s,e))};_t.modulo=_t.mod=function(e){var t,n=this,r=n.constructor,s=r.precision;if(e=new r(e),!e.s)throw Error(No+"NaN");return n.s?(Ir=!1,t=rd(n,e,0,1).times(e),Ir=!0,n.minus(t)):mr(new r(n),s)};_t.naturalExponential=_t.exp=function(){return z9(this)};_t.naturalLogarithm=_t.ln=function(){return Gg(this)};_t.negated=_t.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};_t.plus=_t.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?K9(t,e):q9(t,(e.s=-e.s,e))};_t.precision=_t.sd=function(e){var t,n,r,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Lf+e);if(t=ba(s)+1,r=s.d.length-1,n=r*_r+1,r=s.d[r],r){for(;r%10==0;r/=10)n--;for(r=s.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};_t.squareRoot=_t.sqrt=function(){var e,t,n,r,s,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(No+"NaN")}for(e=ba(l),Ir=!1,s=Math.sqrt(+l),s==0||s==1/0?(t=Ql(l.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=Th((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new c(t)):r=new c(s.toString()),n=c.precision,s=o=n+3;;)if(i=r,r=i.plus(rd(l,i,o+2)).times(.5),Ql(i.d).slice(0,o)===(t=Ql(r.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&t=="4999"){if(mr(i,n+1,0),i.times(i).eq(l)){r=i;break}}else if(t!="9999")break;o+=4}return Ir=!0,mr(r,n)};_t.times=_t.mul=function(e){var t,n,r,s,i,o,l,c,u,m=this,p=m.constructor,g=m.d,x=(e=new p(e)).d;if(!m.s||!e.s)return new p(0);for(e.s*=m.s,n=m.e+e.e,c=g.length,u=x.length,c<u&&(i=g,g=x,x=i,o=c,c=u,u=o),i=[],o=c+u,r=o;r--;)i.push(0);for(r=u;--r>=0;){for(t=0,s=c+r;s>r;)l=i[s]+x[r]*g[s-r-1]+t,i[s--]=l%Ya|0,t=l/Ya|0;i[s]=(i[s]+t)%Ya|0}for(;!i[--o];)i.pop();return t?++n:i.shift(),e.d=i,e.e=n,Ir?mr(e,p.precision):e};_t.toDecimalPlaces=_t.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(cc(e,0,Ch),t===void 0?t=r.rounding:cc(t,0,8),mr(n,e+ba(n)+1,t))};_t.toExponential=function(e,t){var n,r=this,s=r.constructor;return e===void 0?n=qf(r,!0):(cc(e,0,Ch),t===void 0?t=s.rounding:cc(t,0,8),r=mr(new s(r),e+1,t),n=qf(r,!0,e+1)),n};_t.toFixed=function(e,t){var n,r,s=this,i=s.constructor;return e===void 0?qf(s):(cc(e,0,Ch),t===void 0?t=i.rounding:cc(t,0,8),r=mr(new i(s),e+ba(s)+1,t),n=qf(r.abs(),!1,e+ba(r)+1),s.isneg()&&!s.isZero()?"-"+n:n)};_t.toInteger=_t.toint=function(){var e=this,t=e.constructor;return mr(new t(e),ba(e)+1,t.rounding)};_t.toNumber=function(){return+this};_t.toPower=_t.pow=function(e){var t,n,r,s,i,o,l=this,c=l.constructor,u=12,m=+(e=new c(e));if(!e.s)return new c($i);if(l=new c(l),!l.s){if(e.s<1)throw Error(No+"Infinity");return l}if(l.eq($i))return l;if(r=c.precision,e.eq($i))return mr(l,r);if(t=e.e,n=e.d.length-1,o=t>=n,i=l.s,o){if((n=m<0?-m:m)<=H9){for(s=new c($i),t=Math.ceil(r/_r+4),Ir=!1;n%2&&(s=s.times(l),P$(s.d,t)),n=Th(n/2),n!==0;)l=l.times(l),P$(l.d,t);return Ir=!0,e.s<0?new c($i).div(s):mr(s,r)}}else if(i<0)throw Error(No+"NaN");return i=i<0&&e.d[Math.max(t,n)]&1?-1:1,l.s=1,Ir=!1,s=e.times(Gg(l,r+u)),Ir=!0,s=z9(s),s.s=i,s};_t.toPrecision=function(e,t){var n,r,s=this,i=s.constructor;return e===void 0?(n=ba(s),r=qf(s,n<=i.toExpNeg||n>=i.toExpPos)):(cc(e,1,Ch),t===void 0?t=i.rounding:cc(t,0,8),s=mr(new i(s),e,t),n=ba(s),r=qf(s,e<=n||n<=i.toExpNeg,e)),r};_t.toSignificantDigits=_t.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(cc(e,1,Ch),t===void 0?t=r.rounding:cc(t,0,8)),mr(new r(n),e,t)};_t.toString=_t.valueOf=_t.val=_t.toJSON=_t[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=ba(e),n=e.constructor;return qf(e,t<=n.toExpNeg||t>=n.toExpPos)};function K9(e,t){var n,r,s,i,o,l,c,u,m=e.constructor,p=m.precision;if(!e.s||!t.s)return t.s||(t=new m(e)),Ir?mr(t,p):t;if(c=e.d,u=t.d,o=e.e,s=t.e,c=c.slice(),i=o-s,i){for(i<0?(r=c,i=-i,l=u.length):(r=u,s=o,l=c.length),o=Math.ceil(p/_r),l=o>l?o+1:l+1,i>l&&(i=l,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,r=u,u=c,c=r),n=0;i;)n=(c[--i]=c[i]+u[i]+n)/Ya|0,c[i]%=Ya;for(n&&(c.unshift(n),++s),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=s,Ir?mr(t,p):t}function cc(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Lf+e)}function Ql(e){var t,n,r,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)r=e[t]+"",n=_r-r.length,n&&(i+=mu(n)),i+=r;o=e[t],r=o+"",n=_r-r.length,n&&(i+=mu(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var rd=(function(){function e(r,s){var i,o=0,l=r.length;for(r=r.slice();l--;)i=r[l]*s+o,r[l]=i%Ya|0,o=i/Ya|0;return o&&r.unshift(o),r}function t(r,s,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(r[l]!=s[l]){c=r[l]>s[l]?1:-1;break}return c}function n(r,s,i){for(var o=0;i--;)r[i]-=o,o=r[i]<s[i]?1:0,r[i]=o*Ya+r[i]-s[i];for(;!r[0]&&r.length>1;)r.shift()}return function(r,s,i,o){var l,c,u,m,p,g,x,y,v,N,S,j,C,_,A,T,R,M,P=r.constructor,$=r.s==s.s?1:-1,w=r.d,U=s.d;if(!r.s)return new P(r);if(!s.s)throw Error(No+"Division by zero");for(c=r.e-s.e,R=U.length,A=w.length,x=new P($),y=x.d=[],u=0;U[u]==(w[u]||0);)++u;if(U[u]>(w[u]||0)&&--c,i==null?j=i=P.precision:o?j=i+(ba(r)-ba(s))+1:j=i,j<0)return new P(0);if(j=j/_r+2|0,u=0,R==1)for(m=0,U=U[0],j++;(u<A||m)&&j--;u++)C=m*Ya+(w[u]||0),y[u]=C/U|0,m=C%U|0;else{for(m=Ya/(U[0]+1)|0,m>1&&(U=e(U,m),w=e(w,m),R=U.length,A=w.length),_=R,v=w.slice(0,R),N=v.length;N<R;)v[N++]=0;M=U.slice(),M.unshift(0),T=U[0],U[1]>=Ya/2&&++T;do m=0,l=t(U,v,R,N),l<0?(S=v[0],R!=N&&(S=S*Ya+(v[1]||0)),m=S/T|0,m>1?(m>=Ya&&(m=Ya-1),p=e(U,m),g=p.length,N=v.length,l=t(p,v,g,N),l==1&&(m--,n(p,R<g?M:U,g))):(m==0&&(l=m=1),p=U.slice()),g=p.length,g<N&&p.unshift(0),n(v,p,N),l==-1&&(N=v.length,l=t(U,v,R,N),l<1&&(m++,n(v,R<N?M:U,N))),N=v.length):l===0&&(m++,v=[0]),y[u++]=m,l&&v[0]?v[N++]=w[_]||0:(v=[w[_]],N=1);while((_++<A||v[0]!==void 0)&&j--)}return y[0]||y.shift(),x.e=c,mr(x,o?i+ba(x)+1:i)}})();function z9(e,t){var n,r,s,i,o,l,c=0,u=0,m=e.constructor,p=m.precision;if(ba(e)>16)throw Error(Ak+ba(e));if(!e.s)return new m($i);for(Ir=!1,l=p,o=new m(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(r=Math.log(Ef(2,u))/Math.LN10*2+5|0,l+=r,n=s=i=new m($i),m.precision=l;;){if(s=mr(s.times(e),l),n=n.times(++c),o=i.plus(rd(s,n,l)),Ql(o.d).slice(0,l)===Ql(i.d).slice(0,l)){for(;u--;)i=mr(i.times(i),l);return m.precision=p,t==null?(Ir=!0,mr(i,p)):i}i=o}}function ba(e){for(var t=e.e*_r,n=e.d[0];n>=10;n/=10)t++;return t}function kw(e,t,n){if(t>e.LN10.sd())throw Ir=!0,n&&(e.precision=n),Error(No+"LN10 precision limit exceeded");return mr(new e(e.LN10),t)}function mu(e){for(var t="";e--;)t+="0";return t}function Gg(e,t){var n,r,s,i,o,l,c,u,m,p=1,g=10,x=e,y=x.d,v=x.constructor,N=v.precision;if(x.s<1)throw Error(No+(x.s?"NaN":"-Infinity"));if(x.eq($i))return new v(0);if(t==null?(Ir=!1,u=N):u=t,x.eq(10))return t==null&&(Ir=!0),kw(v,u);if(u+=g,v.precision=u,n=Ql(y),r=n.charAt(0),i=ba(x),Math.abs(i)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)x=x.times(e),n=Ql(x.d),r=n.charAt(0),p++;i=ba(x),r>1?(x=new v("0."+n),i++):x=new v(r+"."+n.slice(1))}else return c=kw(v,u+2,N).times(i+""),x=Gg(new v(r+"."+n.slice(1)),u-g).plus(c),v.precision=N,t==null?(Ir=!0,mr(x,N)):x;for(l=o=x=rd(x.minus($i),x.plus($i),u),m=mr(x.times(x),u),s=3;;){if(o=mr(o.times(m),u),c=l.plus(rd(o,new v(s),u)),Ql(c.d).slice(0,u)===Ql(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(kw(v,u+2,N).times(i+""))),l=rd(l,new v(p),u),v.precision=N,t==null?(Ir=!0,mr(l,N)):l;l=c,s+=2}}function D$(e,t){var n,r,s;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(r,s),t){if(s-=r,n=n-r-1,e.e=Th(n/_r),e.d=[],r=(n+1)%_r,n<0&&(r+=_r),r<s){for(r&&e.d.push(+t.slice(0,r)),s-=_r;r<s;)e.d.push(+t.slice(r,r+=_r));t=t.slice(r),r=_r-t.length}else r-=s;for(;r--;)t+="0";if(e.d.push(+t),Ir&&(e.e>wv||e.e<-wv))throw Error(Ak+n)}else e.s=0,e.e=0,e.d=[0];return e}function mr(e,t,n){var r,s,i,o,l,c,u,m,p=e.d;for(o=1,i=p[0];i>=10;i/=10)o++;if(r=t-o,r<0)r+=_r,s=t,u=p[m=0];else{if(m=Math.ceil((r+1)/_r),i=p.length,m>=i)return e;for(u=i=p[m],o=1;i>=10;i/=10)o++;r%=_r,s=r-_r+o}if(n!==void 0&&(i=Ef(10,o-s-1),l=u/i%10|0,c=t<0||p[m+1]!==void 0||u%i,c=n<4?(l||c)&&(n==0||n==(e.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(r>0?s>0?u/Ef(10,o-s):0:p[m-1])%10&1||n==(e.s<0?8:7))),t<1||!p[0])return c?(i=ba(e),p.length=1,t=t-i-1,p[0]=Ef(10,(_r-t%_r)%_r),e.e=Th(-t/_r)||0):(p.length=1,p[0]=e.e=e.s=0),e;if(r==0?(p.length=m,i=1,m--):(p.length=m+1,i=Ef(10,_r-r),p[m]=s>0?(u/Ef(10,o-s)%Ef(10,s)|0)*i:0),c)for(;;)if(m==0){(p[0]+=i)==Ya&&(p[0]=1,++e.e);break}else{if(p[m]+=i,p[m]!=Ya)break;p[m--]=0,i=1}for(r=p.length;p[--r]===0;)p.pop();if(Ir&&(e.e>wv||e.e<-wv))throw Error(Ak+ba(e));return e}function q9(e,t){var n,r,s,i,o,l,c,u,m,p,g=e.constructor,x=g.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new g(e),Ir?mr(t,x):t;if(c=e.d,p=t.d,r=t.e,u=e.e,c=c.slice(),o=u-r,o){for(m=o<0,m?(n=c,o=-o,l=p.length):(n=p,r=u,l=c.length),s=Math.max(Math.ceil(x/_r),l)+2,o>s&&(o=s,n.length=1),n.reverse(),s=o;s--;)n.push(0);n.reverse()}else{for(s=c.length,l=p.length,m=s<l,m&&(l=s),s=0;s<l;s++)if(c[s]!=p[s]){m=c[s]<p[s];break}o=0}for(m&&(n=c,c=p,p=n,t.s=-t.s),l=c.length,s=p.length-l;s>0;--s)c[l++]=0;for(s=p.length;s>o;){if(c[--s]<p[s]){for(i=s;i&&c[--i]===0;)c[i]=Ya-1;--c[i],c[s]+=Ya}c[s]-=p[s]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(t.d=c,t.e=r,Ir?mr(t,x):t):new g(0)}function qf(e,t,n){var r,s=ba(e),i=Ql(e.d),o=i.length;return t?(n&&(r=n-o)>0?i=i.charAt(0)+"."+i.slice(1)+mu(r):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+mu(-s-1)+i,n&&(r=n-o)>0&&(i+=mu(r))):s>=o?(i+=mu(s+1-o),n&&(r=n-s-1)>0&&(i=i+"."+mu(r))):((r=s+1)<o&&(i=i.slice(0,r)+"."+i.slice(r)),n&&(r=n-o)>0&&(s+1===o&&(i+="."),i+=mu(r))),e.s<0?"-"+i:i}function P$(e,t){if(e.length>t)return e.length=t,!0}function V9(e){var t,n,r;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Lf+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return D$(o,i.toString())}else if(typeof i!="string")throw Error(Lf+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,Xde.test(i))D$(o,i);else throw Error(Lf+i)}if(s.prototype=_t,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=V9,s.config=s.set=Jde,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return s.config(e),s}function Jde(e){if(!e||typeof e!="object")throw Error(No+"Object expected");var t,n,r,s=["precision",1,Ch,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((r=e[n=s[t]])!==void 0)if(Th(r)===r&&r>=s[t+1]&&r<=s[t+2])this[n]=r;else throw Error(Lf+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Lf+n+": "+r);return this}var _k=V9(Qde);$i=new _k(1);const ur=_k;function Zde(e){return rue(e)||nue(e)||tue(e)||eue()}function eue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tue(e,t){if(e){if(typeof e=="string")return sT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sT(e,t)}}function nue(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function rue(e){if(Array.isArray(e))return sT(e)}function sT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var aue=function(t){return t},W9={},Y9=function(t){return t===W9},M$=function(t){return function n(){return arguments.length===0||arguments.length===1&&Y9(arguments.length<=0?void 0:arguments[0])?n:t.apply(void 0,arguments)}},sue=function e(t,n){return t===1?n:M$(function(){for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];var o=s.filter(function(l){return l!==W9}).length;return o>=t?n.apply(void 0,s):e(t-o,M$(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var m=s.map(function(p){return Y9(p)?c.shift():p});return n.apply(void 0,Zde(m).concat(c))}))})},gN=function(t){return sue(t.length,t)},iT=function(t,n){for(var r=[],s=t;s<n;++s)r[s-t]=s;return r},iue=gN(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),oue=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return aue;var s=n.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},oT=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},Q9=function(t){var n=null,r=null;return function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return n&&i.every(function(l,c){return l===n[c]})||(n=i,r=t.apply(void 0,i)),r}};function lue(e){var t;return e===0?t=1:t=Math.floor(new ur(e).abs().log(10).toNumber())+1,t}function cue(e,t,n){for(var r=new ur(e),s=0,i=[];r.lt(t)&&s<1e5;)i.push(r.toNumber()),r=r.add(n),s++;return i}var due=gN(function(e,t,n){var r=+e,s=+t;return r+n*(s-r)}),uue=gN(function(e,t,n){var r=t-+e;return r=r||1/0,(n-e)/r}),fue=gN(function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});const xN={rangeStep:cue,getDigitCount:lue,interpolateNumber:due,uninterpolateNumber:uue,uninterpolateTruncation:fue};function lT(e){return hue(e)||mue(e)||X9(e)||pue()}function pue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mue(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function hue(e){if(Array.isArray(e))return cT(e)}function Hg(e,t){return bue(e)||xue(e,t)||X9(e,t)||gue()}function gue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X9(e,t){if(e){if(typeof e=="string")return cT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cT(e,t)}}function cT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xue(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,s=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(r=(l=o.next()).done)&&(n.push(l.value),!(t&&n.length===t));r=!0);}catch(c){s=!0,i=c}finally{try{!r&&o.return!=null&&o.return()}finally{if(s)throw i}}return n}}function bue(e){if(Array.isArray(e))return e}function J9(e){var t=Hg(e,2),n=t[0],r=t[1],s=n,i=r;return n>r&&(s=r,i=n),[s,i]}function Z9(e,t,n){if(e.lte(0))return new ur(0);var r=xN.getDigitCount(e.toNumber()),s=new ur(10).pow(r),i=e.div(s),o=r!==1?.05:.1,l=new ur(Math.ceil(i.div(o).toNumber())).add(n).mul(o),c=l.mul(s);return t?c:new ur(Math.ceil(c))}function yue(e,t,n){var r=1,s=new ur(e);if(!s.isint()&&n){var i=Math.abs(e);i<1?(r=new ur(10).pow(xN.getDigitCount(e)-1),s=new ur(Math.floor(s.div(r).toNumber())).mul(r)):i>1&&(s=new ur(Math.floor(e)))}else e===0?s=new ur(Math.floor((t-1)/2)):n||(s=new ur(Math.floor(e)));var o=Math.floor((t-1)/2),l=oue(iue(function(c){return s.add(new ur(c-o).mul(r)).toNumber()}),iT);return l(0,t)}function eH(e,t,n,r){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new ur(0),tickMin:new ur(0),tickMax:new ur(0)};var i=Z9(new ur(t).sub(e).div(n-1),r,s),o;e<=0&&t>=0?o=new ur(0):(o=new ur(e).add(t).div(2),o=o.sub(new ur(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),c=Math.ceil(new ur(t).sub(o).div(i).toNumber()),u=l+c+1;return u>n?eH(e,t,n,r,s+1):(u<n&&(c=t>0?c+(n-u):c,l=t>0?l:l+(n-u)),{step:i,tickMin:o.sub(new ur(l).mul(i)),tickMax:o.add(new ur(c).mul(i))})}function vue(e){var t=Hg(e,2),n=t[0],r=t[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(s,2),l=J9([n,r]),c=Hg(l,2),u=c[0],m=c[1];if(u===-1/0||m===1/0){var p=m===1/0?[u].concat(lT(iT(0,s-1).map(function(){return 1/0}))):[].concat(lT(iT(0,s-1).map(function(){return-1/0})),[m]);return n>r?oT(p):p}if(u===m)return yue(u,s,i);var g=eH(u,m,o,i),x=g.step,y=g.tickMin,v=g.tickMax,N=xN.rangeStep(y,v.add(new ur(.1).mul(x)),x);return n>r?oT(N):N}function Nue(e,t){var n=Hg(e,2),r=n[0],s=n[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=J9([r,s]),l=Hg(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[r,s];if(c===u)return[c];var m=Math.max(t,2),p=Z9(new ur(u).sub(c).div(m-1),i,0),g=[].concat(lT(xN.rangeStep(new ur(c),new ur(u).sub(new ur(.99).mul(p)),p)),[u]);return r>s?oT(g):g}var Sue=Q9(vue),Eue=Q9(Nue),jue="Invariant failed";function Vf(e,t){throw new Error(jue)}var wue=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Mm(e){"@babel/helpers - typeof";return Mm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mm(e)}function Av(){return Av=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Av.apply(this,arguments)}function Aue(e,t){return Oue(e)||Tue(e,t)||Cue(e,t)||_ue()}function _ue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cue(e,t){if(e){if(typeof e=="string")return L$(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L$(e,t)}}function L$(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Tue(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(m){u=!0,s=m}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Oue(e){if(Array.isArray(e))return e}function Rue(e,t){if(e==null)return{};var n=kue(e,t),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function kue(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Iue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Due(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,rH(r.key),r)}}function Pue(e,t,n){return t&&Due(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Mue(e,t,n){return t=_v(t),Lue(e,tH()?Reflect.construct(t,n||[],_v(e).constructor):t.apply(e,n))}function Lue(e,t){if(t&&(Mm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $ue(e)}function $ue(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tH=function(){return!!e})()}function _v(e){return _v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_v(e)}function Fue(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dT(e,t)}function dT(e,t){return dT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},dT(e,t)}function nH(e,t,n){return t=rH(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rH(e){var t=Uue(e,"string");return Mm(t)=="symbol"?t:t+""}function Uue(e,t){if(Mm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Mm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Oh=(function(e){function t(){return Iue(this,t),Mue(this,t,arguments)}return Fue(t,e),Pue(t,[{key:"render",value:function(){var r=this.props,s=r.offset,i=r.layout,o=r.width,l=r.dataKey,c=r.data,u=r.dataPointFormatter,m=r.xAxis,p=r.yAxis,g=Rue(r,wue),x=Pt(g,!1);this.props.direction==="x"&&m.type!=="number"&&Vf();var y=c.map(function(v){var N=u(v,l),S=N.x,j=N.y,C=N.value,_=N.errorVal;if(!_)return null;var A=[],T,R;if(Array.isArray(_)){var M=Aue(_,2);T=M[0],R=M[1]}else T=R=_;if(i==="vertical"){var P=m.scale,$=j+s,w=$+o,U=$-o,X=P(C-T),I=P(C+R);A.push({x1:I,y1:w,x2:I,y2:U}),A.push({x1:X,y1:$,x2:I,y2:$}),A.push({x1:X,y1:w,x2:X,y2:U})}else if(i==="horizontal"){var G=p.scale,L=S+s,H=L-o,F=L+o,K=G(C-T),ne=G(C+R);A.push({x1:H,y1:ne,x2:F,y2:ne}),A.push({x1:L,y1:K,x2:L,y2:ne}),A.push({x1:H,y1:K,x2:F,y2:K})}return W.createElement(mn,Av({className:"recharts-errorBar",key:"bar-".concat(A.map(function(V){return"".concat(V.x1,"-").concat(V.x2,"-").concat(V.y1,"-").concat(V.y2)}))},x),A.map(function(V){return W.createElement("line",Av({},V,{key:"line-".concat(V.x1,"-").concat(V.x2,"-").concat(V.y1,"-").concat(V.y2)}))}))});return W.createElement(mn,{className:"recharts-errorBars"},y)}}])})(W.Component);nH(Oh,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});nH(Oh,"displayName","ErrorBar");function Kg(e){"@babel/helpers - typeof";return Kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kg(e)}function $$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function xf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$$(Object(n),!0).forEach(function(r){Bue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$$(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Bue(e,t,n){return t=Gue(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gue(e){var t=Hue(e,"string");return Kg(t)=="symbol"?t:t+""}function Hue(e,t){if(Kg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Kg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aH=function(t){var n=t.children,r=t.formattedGraphicalItems,s=t.legendWidth,i=t.legendContent,o=Ts(n,nc);if(!o)return null;var l=nc.defaultProps,c=l!==void 0?xf(xf({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:i==="children"?u=(r||[]).reduce(function(m,p){var g=p.item,x=p.props,y=x.sectors||x.data||[];return m.concat(y.map(function(v){return{type:o.props.iconType||g.props.legendType,value:v.name,color:v.fill,payload:v}}))},[]):u=(r||[]).map(function(m){var p=m.item,g=p.type.defaultProps,x=g!==void 0?xf(xf({},g),p.props):{},y=x.dataKey,v=x.name,N=x.legendType,S=x.hide;return{inactive:S,dataKey:y,type:c.iconType||N||"square",color:Ck(p),value:v||y,payload:x}}),xf(xf(xf({},c),nc.getWithHeight(o,s)),{},{payload:u,item:o})};function zg(e){"@babel/helpers - typeof";return zg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zg(e)}function F$(e){return Vue(e)||que(e)||zue(e)||Kue()}function Kue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zue(e,t){if(e){if(typeof e=="string")return uT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uT(e,t)}}function que(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Vue(e){if(Array.isArray(e))return uT(e)}function uT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function U$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Xr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?U$(Object(n),!0).forEach(function(r){pm(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U$(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function pm(e,t,n){return t=Wue(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wue(e){var t=Yue(e,"string");return zg(t)=="symbol"?t:t+""}function Yue(e,t){if(zg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(zg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pr(e,t,n){return nn(e)||nn(t)?n:$a(t)?Ei(e,t,n):Yt(t)?t(e):n}function gg(e,t,n,r){var s=Vde(e,function(l){return pr(l,t)});if(n==="number"){var i=s.filter(function(l){return lt(l)||parseFloat(l)});return i.length?[hN(i),yu(i)]:[1/0,-1/0]}var o=r?s.filter(function(l){return!nn(l)}):s;return o.map(function(l){return $a(l)||l instanceof Date?l:""})}var Que=function(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(n=r?.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,u=0;u<l;u++){var m=u>0?s[u-1].coordinate:s[l-1].coordinate,p=s[u].coordinate,g=u>=l-1?s[0].coordinate:s[u+1].coordinate,x=void 0;if(Js(p-m)!==Js(g-p)){var y=[];if(Js(g-p)===Js(c[1]-c[0])){x=g;var v=p+c[1]-c[0];y[0]=Math.min(v,(v+m)/2),y[1]=Math.max(v,(v+m)/2)}else{x=m;var N=g+c[1]-c[0];y[0]=Math.min(p,(N+p)/2),y[1]=Math.max(p,(N+p)/2)}var S=[Math.min(p,(x+p)/2),Math.max(p,(x+p)/2)];if(t>S[0]&&t<=S[1]||t>=y[0]&&t<=y[1]){o=s[u].index;break}}else{var j=Math.min(m,g),C=Math.max(m,g);if(t>(j+p)/2&&t<=(C+p)/2){o=s[u].index;break}}}else for(var _=0;_<l;_++)if(_===0&&t<=(r[_].coordinate+r[_+1].coordinate)/2||_>0&&_<l-1&&t>(r[_].coordinate+r[_-1].coordinate)/2&&t<=(r[_].coordinate+r[_+1].coordinate)/2||_===l-1&&t>(r[_].coordinate+r[_-1].coordinate)/2){o=r[_].index;break}return o},Ck=function(t){var n,r=t,s=r.type.displayName,i=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Xr(Xr({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,c;switch(s){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},Xue=function(t){var n=t.barSize,r=t.totalSize,s=t.stackGroups,i=s===void 0?{}:s;if(!i)return{};for(var o={},l=Object.keys(i),c=0,u=l.length;c<u;c++)for(var m=i[l[c]].stackGroups,p=Object.keys(m),g=0,x=p.length;g<x;g++){var y=m[p[g]],v=y.items,N=y.cateAxisId,S=v.filter(function(R){return nd(R.type).indexOf("Bar")>=0});if(S&&S.length){var j=S[0].type.defaultProps,C=j!==void 0?Xr(Xr({},j),S[0].props):S[0].props,_=C.barSize,A=C[N];o[A]||(o[A]=[]);var T=nn(_)?n:_;o[A].push({item:S[0],stackList:S.slice(1),barSize:nn(T)?void 0:Zs(T,r,0)})}}return o},Jue=function(t){var n=t.barGap,r=t.barCategoryGap,s=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,c=o.length;if(c<1)return null;var u=Zs(n,s,0,!0),m,p=[];if(o[0].barSize===+o[0].barSize){var g=!1,x=s/c,y=o.reduce(function(_,A){return _+A.barSize||0},0);y+=(c-1)*u,y>=s&&(y-=(c-1)*u,u=0),y>=s&&x>0&&(g=!0,x*=.9,y=c*x);var v=(s-y)/2>>0,N={offset:v-u,size:0};m=o.reduce(function(_,A){var T={item:A.item,position:{offset:N.offset+N.size+u,size:g?x:A.barSize}},R=[].concat(F$(_),[T]);return N=R[R.length-1].position,A.stackList&&A.stackList.length&&A.stackList.forEach(function(M){R.push({item:M,position:N})}),R},p)}else{var S=Zs(r,s,0,!0);s-2*S-(c-1)*u<=0&&(u=0);var j=(s-2*S-(c-1)*u)/c;j>1&&(j>>=0);var C=l===+l?Math.min(j,l):j;m=o.reduce(function(_,A,T){var R=[].concat(F$(_),[{item:A.item,position:{offset:S+(j+u)*T+(j-C)/2,size:C}}]);return A.stackList&&A.stackList.length&&A.stackList.forEach(function(M){R.push({item:M,position:R[R.length-1].position})}),R},p)}return m},Zue=function(t,n,r,s){var i=r.children,o=r.width,l=r.margin,c=o-(l.left||0)-(l.right||0),u=aH({children:i,legendWidth:c});if(u){var m=s||{},p=m.width,g=m.height,x=u.align,y=u.verticalAlign,v=u.layout;if((v==="vertical"||v==="horizontal"&&y==="middle")&&x!=="center"&&lt(t[x]))return Xr(Xr({},t),{},pm({},x,t[x]+(p||0)));if((v==="horizontal"||v==="vertical"&&x==="center")&&y!=="middle"&&lt(t[y]))return Xr(Xr({},t),{},pm({},y,t[y]+(g||0)))}return t},efe=function(t,n,r){return nn(n)?!0:t==="horizontal"?n==="yAxis":t==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},sH=function(t,n,r,s,i){var o=n.props.children,l=ni(o,Oh).filter(function(u){return efe(s,i,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,m){var p=pr(m,r);if(nn(p))return u;var g=Array.isArray(p)?[hN(p),yu(p)]:[p,p],x=c.reduce(function(y,v){var N=pr(m,v,0),S=g[0]-Math.abs(Array.isArray(N)?N[0]:N),j=g[1]+Math.abs(Array.isArray(N)?N[1]:N);return[Math.min(S,y[0]),Math.max(j,y[1])]},[1/0,-1/0]);return[Math.min(x[0],u[0]),Math.max(x[1],u[1])]},[1/0,-1/0])}return null},tfe=function(t,n,r,s,i){var o=n.map(function(l){return sH(t,l,r,i,s)}).filter(function(l){return!nn(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},iH=function(t,n,r,s,i){var o=n.map(function(c){var u=c.props.dataKey;return r==="number"&&u&&sH(t,c,u,s)||gg(t,u,r,i)});if(r==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var m=0,p=u.length;m<p;m++)l[u[m]]||(l[u[m]]=!0,c.push(u[m]));return c},[])},oH=function(t,n){return t==="horizontal"&&n==="xAxis"||t==="vertical"&&n==="yAxis"||t==="centric"&&n==="angleAxis"||t==="radial"&&n==="radiusAxis"},lH=function(t,n,r,s){if(s)return t.map(function(c){return c.coordinate});var i,o,l=t.map(function(c){return c.coordinate===n&&(i=!0),c.coordinate===r&&(o=!0),c.coordinate});return i||l.push(n),o||l.push(r),l},ed=function(t,n,r){if(!t)return null;var s=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?s.bandwidth()/2:2,u=(n||r)&&o==="category"&&s.bandwidth?s.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&l?.length>=2?Js(l[0]-l[1])*2*u:u,n&&(t.ticks||t.niceTicks)){var m=(t.ticks||t.niceTicks).map(function(p){var g=i?i.indexOf(p):p;return{coordinate:s(g)+u,value:p,offset:u}});return m.filter(function(p){return!Lu(p.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(p,g){return{coordinate:s(p)+u,value:p,index:g,offset:u}}):s.ticks&&!r?s.ticks(t.tickCount).map(function(p){return{coordinate:s(p)+u,value:p,offset:u}}):s.domain().map(function(p,g){return{coordinate:s(p)+u,value:i?i[p]:p,index:g,offset:u}})},Iw=new WeakMap,qb=function(t,n){if(typeof n!="function")return t;Iw.has(t)||Iw.set(t,new WeakMap);var r=Iw.get(t);if(r.has(n))return r.get(n);var s=function(){t.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,s),s},cH=function(t,n,r){var s=t.scale,i=t.type,o=t.layout,l=t.axisType;if(s==="auto")return o==="radial"&&l==="radiusAxis"?{scale:$g(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:Nv(),realScaleType:"linear"}:i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:hg(),realScaleType:"point"}:i==="category"?{scale:$g(),realScaleType:"band"}:{scale:Nv(),realScaleType:"linear"};if(Hf(s)){var c="scale".concat(Z1(s));return{scale:(w$[c]||hg)(),realScaleType:w$[c]?c:"point"}}return Yt(s)?{scale:s}:{scale:hg(),realScaleType:"point"}},B$=1e-4,dH=function(t){var n=t.domain();if(!(!n||n.length<=2)){var r=n.length,s=t.range(),i=Math.min(s[0],s[1])-B$,o=Math.max(s[0],s[1])+B$,l=t(n[0]),c=t(n[r-1]);(l<i||l>o||c<i||c>o)&&t.domain([n[0],n[r-1]])}},nfe=function(t,n){if(!t)return null;for(var r=0,s=t.length;r<s;r++)if(t[r].item===n)return t[r].position;return null},rfe=function(t,n){if(!n||n.length!==2||!lt(n[0])||!lt(n[1]))return t;var r=Math.min(n[0],n[1]),s=Math.max(n[0],n[1]),i=[t[0],t[1]];return(!lt(t[0])||t[0]<r)&&(i[0]=r),(!lt(t[1])||t[1]>s)&&(i[1]=s),i[0]>s&&(i[0]=s),i[1]<r&&(i[1]=r),i},afe=function(t){var n=t.length;if(!(n<=0))for(var r=0,s=t[0].length;r<s;++r)for(var i=0,o=0,l=0;l<n;++l){var c=Lu(t[l][r][1])?t[l][r][0]:t[l][r][1];c>=0?(t[l][r][0]=i,t[l][r][1]=i+c,i=t[l][r][1]):(t[l][r][0]=o,t[l][r][1]=o+c,o=t[l][r][1])}},sfe=function(t){var n=t.length;if(!(n<=0))for(var r=0,s=t[0].length;r<s;++r)for(var i=0,o=0;o<n;++o){var l=Lu(t[o][r][1])?t[o][r][0]:t[o][r][1];l>=0?(t[o][r][0]=i,t[o][r][1]=i+l,i=t[o][r][1]):(t[o][r][0]=0,t[o][r][1]=0)}},ife={sign:afe,expand:zae,none:_m,silhouette:qae,wiggle:Vae,positive:sfe},ofe=function(t,n,r){var s=n.map(function(l){return l.props.dataKey}),i=ife[r],o=Kae().keys(s).value(function(l,c){return+pr(l,c,0)}).order(BC).offset(i);return o(t)},lfe=function(t,n,r,s,i,o){if(!t)return null;var l=o?n.reverse():n,c={},u=l.reduce(function(p,g){var x,y=(x=g.type)!==null&&x!==void 0&&x.defaultProps?Xr(Xr({},g.type.defaultProps),g.props):g.props,v=y.stackId,N=y.hide;if(N)return p;var S=y[r],j=p[S]||{hasStack:!1,stackGroups:{}};if($a(v)){var C=j.stackGroups[v]||{numericAxisId:r,cateAxisId:s,items:[]};C.items.push(g),j.hasStack=!0,j.stackGroups[v]=C}else j.stackGroups[bd("_stackId_")]={numericAxisId:r,cateAxisId:s,items:[g]};return Xr(Xr({},p),{},pm({},S,j))},c),m={};return Object.keys(u).reduce(function(p,g){var x=u[g];if(x.hasStack){var y={};x.stackGroups=Object.keys(x.stackGroups).reduce(function(v,N){var S=x.stackGroups[N];return Xr(Xr({},v),{},pm({},N,{numericAxisId:r,cateAxisId:s,items:S.items,stackedData:ofe(t,S.items,i)}))},y)}return Xr(Xr({},p),{},pm({},g,x))},m)},uH=function(t,n){var r=n.realScaleType,s=n.type,i=n.tickCount,o=n.originalDomain,l=n.allowDecimals,c=r||n.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&s==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var m=Sue(u,i,l);return t.domain([hN(m),yu(m)]),{niceTicks:m}}if(i&&s==="number"){var p=t.domain(),g=Eue(p,i,l);return{niceTicks:g}}return null};function Lm(e){var t=e.axis,n=e.ticks,r=e.bandSize,s=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!nn(s[t.dataKey])){var l=ev(n,"value",s[t.dataKey]);if(l)return l.coordinate+r/2}return n[i]?n[i].coordinate+r/2:null}var c=pr(s,nn(o)?t.dataKey:o);return nn(c)?null:t.scale(c)}var G$=function(t){var n=t.axis,r=t.ticks,s=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(n.type==="category")return r[l]?r[l].coordinate+s:null;var c=pr(o,n.dataKey,n.domain[l]);return nn(c)?null:n.scale(c)-i/2+s},cfe=function(t){var n=t.numericAxis,r=n.scale.domain();if(n.type==="number"){var s=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return s<=0&&i>=0?0:i<0?i:s}return r[0]},dfe=function(t,n){var r,s=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Xr(Xr({},t.type.defaultProps),t.props):t.props,i=s.stackId;if($a(i)){var o=n[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},ufe=function(t){return t.reduce(function(n,r){return[hN(r.concat([n[0]]).filter(lt)),yu(r.concat([n[1]]).filter(lt))]},[1/0,-1/0])},fH=function(t,n,r){return Object.keys(t).reduce(function(s,i){var o=t[i],l=o.stackedData,c=l.reduce(function(u,m){var p=ufe(m.slice(n,r+1));return[Math.min(u[0],p[0]),Math.max(u[1],p[1])]},[1/0,-1/0]);return[Math.min(c[0],s[0]),Math.max(c[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},H$=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,K$=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,fT=function(t,n,r){if(Yt(t))return t(n,r);if(!Array.isArray(t))return n;var s=[];if(lt(t[0]))s[0]=r?t[0]:Math.min(t[0],n[0]);else if(H$.test(t[0])){var i=+H$.exec(t[0])[1];s[0]=n[0]-i}else Yt(t[0])?s[0]=t[0](n[0]):s[0]=n[0];if(lt(t[1]))s[1]=r?t[1]:Math.max(t[1],n[1]);else if(K$.test(t[1])){var o=+K$.exec(t[1])[1];s[1]=n[1]+o}else Yt(t[1])?s[1]=t[1](n[1]):s[1]=n[1];return s},Cv=function(t,n,r){if(t&&t.scale&&t.scale.bandwidth){var s=t.scale.bandwidth();if(!r||s>0)return s}if(t&&n&&n.length>=2){for(var i=ek(n,function(p){return p.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var u=i[l],m=i[l-1];o=Math.min((u.coordinate||0)-(m.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0},z$=function(t,n,r){return!t||!t.length||Ru(t,Ei(r,"type.defaultProps.domain"))?n:t},pH=function(t,n){var r=t.type.defaultProps?Xr(Xr({},t.type.defaultProps),t.props):t.props,s=r.dataKey,i=r.name,o=r.unit,l=r.formatter,c=r.tooltipType,u=r.chartType,m=r.hide;return Xr(Xr({},Pt(t,!1)),{},{dataKey:s,unit:o,formatter:l,name:i||s,color:Ck(t),value:pr(n,s),type:c,payload:n,chartType:u,hide:m})};function qg(e){"@babel/helpers - typeof";return qg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qg(e)}function q$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function qc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?q$(Object(n),!0).forEach(function(r){mH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q$(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mH(e,t,n){return t=ffe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ffe(e){var t=pfe(e,"string");return qg(t)=="symbol"?t:t+""}function pfe(e,t){if(qg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(qg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mfe(e,t){return bfe(e)||xfe(e,t)||gfe(e,t)||hfe()}function hfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gfe(e,t){if(e){if(typeof e=="string")return V$(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V$(e,t)}}function V$(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xfe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(m){u=!0,s=m}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function bfe(e){if(Array.isArray(e))return e}var Tv=Math.PI/180,yfe=function(t){return t*180/Math.PI},Er=function(t,n,r,s){return{x:t+Math.cos(-Tv*s)*r,y:n+Math.sin(-Tv*s)*r}},hH=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},vfe=function(t,n,r,s,i){var o=t.width,l=t.height,c=t.startAngle,u=t.endAngle,m=Zs(t.cx,o,o/2),p=Zs(t.cy,l,l/2),g=hH(o,l,r),x=Zs(t.innerRadius,g,0),y=Zs(t.outerRadius,g,g*.8),v=Object.keys(n);return v.reduce(function(N,S){var j=n[S],C=j.domain,_=j.reversed,A;if(nn(j.range))s==="angleAxis"?A=[c,u]:s==="radiusAxis"&&(A=[x,y]),_&&(A=[A[1],A[0]]);else{A=j.range;var T=A,R=mfe(T,2);c=R[0],u=R[1]}var M=cH(j,i),P=M.realScaleType,$=M.scale;$.domain(C).range(A),dH($);var w=uH($,qc(qc({},j),{},{realScaleType:P})),U=qc(qc(qc({},j),w),{},{range:A,radius:y,realScaleType:P,scale:$,cx:m,cy:p,innerRadius:x,outerRadius:y,startAngle:c,endAngle:u});return qc(qc({},N),{},mH({},S,U))},{})},Nfe=function(t,n){var r=t.x,s=t.y,i=n.x,o=n.y;return Math.sqrt(Math.pow(r-i,2)+Math.pow(s-o,2))},Sfe=function(t,n){var r=t.x,s=t.y,i=n.cx,o=n.cy,l=Nfe({x:r,y:s},{x:i,y:o});if(l<=0)return{radius:l};var c=(r-i)/l,u=Math.acos(c);return s>o&&(u=2*Math.PI-u),{radius:l,angle:yfe(u),angleInRadian:u}},Efe=function(t){var n=t.startAngle,r=t.endAngle,s=Math.floor(n/360),i=Math.floor(r/360),o=Math.min(s,i);return{startAngle:n-o*360,endAngle:r-o*360}},jfe=function(t,n){var r=n.startAngle,s=n.endAngle,i=Math.floor(r/360),o=Math.floor(s/360),l=Math.min(i,o);return t+l*360},W$=function(t,n){var r=t.x,s=t.y,i=Sfe({x:r,y:s},n),o=i.radius,l=i.angle,c=n.innerRadius,u=n.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var m=Efe(n),p=m.startAngle,g=m.endAngle,x=l,y;if(p<=g){for(;x>g;)x-=360;for(;x<p;)x+=360;y=x>=p&&x<=g}else{for(;x>p;)x-=360;for(;x<g;)x+=360;y=x>=g&&x<=p}return y?qc(qc({},n),{},{radius:o,angle:jfe(x,n)}):null},gH=function(t){return!h.isValidElement(t)&&!Yt(t)&&typeof t!="boolean"?t.className:""};function Vg(e){"@babel/helpers - typeof";return Vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vg(e)}var wfe=["offset"];function Afe(e){return Ofe(e)||Tfe(e)||Cfe(e)||_fe()}function _fe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cfe(e,t){if(e){if(typeof e=="string")return pT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pT(e,t)}}function Tfe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ofe(e){if(Array.isArray(e))return pT(e)}function pT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Rfe(e,t){if(e==null)return{};var n=kfe(e,t),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function kfe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Y$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Ra(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Y$(Object(n),!0).forEach(function(r){Ife(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y$(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ife(e,t,n){return t=Dfe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dfe(e){var t=Pfe(e,"string");return Vg(t)=="symbol"?t:t+""}function Pfe(e,t){if(Vg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Vg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wg(){return Wg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wg.apply(this,arguments)}var Mfe=function(t){var n=t.value,r=t.formatter,s=nn(t.children)?n:t.children;return Yt(r)?r(s):s},Lfe=function(t,n){var r=Js(n-t),s=Math.min(Math.abs(n-t),360);return r*s},$fe=function(t,n,r){var s=t.position,i=t.viewBox,o=t.offset,l=t.className,c=i,u=c.cx,m=c.cy,p=c.innerRadius,g=c.outerRadius,x=c.startAngle,y=c.endAngle,v=c.clockWise,N=(p+g)/2,S=Lfe(x,y),j=S>=0?1:-1,C,_;s==="insideStart"?(C=x+j*o,_=v):s==="insideEnd"?(C=y-j*o,_=!v):s==="end"&&(C=y+j*o,_=v),_=S<=0?_:!_;var A=Er(u,m,N,C),T=Er(u,m,N,C+(_?1:-1)*359),R="M".concat(A.x,",").concat(A.y,`
    A`).concat(N,",").concat(N,",0,1,").concat(_?0:1,`,
    `).concat(T.x,",").concat(T.y),M=nn(t.id)?bd("recharts-radial-line-"):t.id;return W.createElement("text",Wg({},r,{dominantBaseline:"central",className:fn("recharts-radial-bar-label",l)}),W.createElement("defs",null,W.createElement("path",{id:M,d:R})),W.createElement("textPath",{xlinkHref:"#".concat(M)},n))},Ffe=function(t){var n=t.viewBox,r=t.offset,s=t.position,i=n,o=i.cx,l=i.cy,c=i.innerRadius,u=i.outerRadius,m=i.startAngle,p=i.endAngle,g=(m+p)/2;if(s==="outside"){var x=Er(o,l,u+r,g),y=x.x,v=x.y;return{x:y,y:v,textAnchor:y>=o?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var N=(c+u)/2,S=Er(o,l,N,g),j=S.x,C=S.y;return{x:j,y:C,textAnchor:"middle",verticalAnchor:"middle"}},Ufe=function(t){var n=t.viewBox,r=t.parentViewBox,s=t.offset,i=t.position,o=n,l=o.x,c=o.y,u=o.width,m=o.height,p=m>=0?1:-1,g=p*s,x=p>0?"end":"start",y=p>0?"start":"end",v=u>=0?1:-1,N=v*s,S=v>0?"end":"start",j=v>0?"start":"end";if(i==="top"){var C={x:l+u/2,y:c-p*s,textAnchor:"middle",verticalAnchor:x};return Ra(Ra({},C),r?{height:Math.max(c-r.y,0),width:u}:{})}if(i==="bottom"){var _={x:l+u/2,y:c+m+g,textAnchor:"middle",verticalAnchor:y};return Ra(Ra({},_),r?{height:Math.max(r.y+r.height-(c+m),0),width:u}:{})}if(i==="left"){var A={x:l-N,y:c+m/2,textAnchor:S,verticalAnchor:"middle"};return Ra(Ra({},A),r?{width:Math.max(A.x-r.x,0),height:m}:{})}if(i==="right"){var T={x:l+u+N,y:c+m/2,textAnchor:j,verticalAnchor:"middle"};return Ra(Ra({},T),r?{width:Math.max(r.x+r.width-T.x,0),height:m}:{})}var R=r?{width:u,height:m}:{};return i==="insideLeft"?Ra({x:l+N,y:c+m/2,textAnchor:j,verticalAnchor:"middle"},R):i==="insideRight"?Ra({x:l+u-N,y:c+m/2,textAnchor:S,verticalAnchor:"middle"},R):i==="insideTop"?Ra({x:l+u/2,y:c+g,textAnchor:"middle",verticalAnchor:y},R):i==="insideBottom"?Ra({x:l+u/2,y:c+m-g,textAnchor:"middle",verticalAnchor:x},R):i==="insideTopLeft"?Ra({x:l+N,y:c+g,textAnchor:j,verticalAnchor:y},R):i==="insideTopRight"?Ra({x:l+u-N,y:c+g,textAnchor:S,verticalAnchor:y},R):i==="insideBottomLeft"?Ra({x:l+N,y:c+m-g,textAnchor:j,verticalAnchor:x},R):i==="insideBottomRight"?Ra({x:l+u-N,y:c+m-g,textAnchor:S,verticalAnchor:x},R):Eh(i)&&(lt(i.x)||Tf(i.x))&&(lt(i.y)||Tf(i.y))?Ra({x:l+Zs(i.x,u),y:c+Zs(i.y,m),textAnchor:"end",verticalAnchor:"end"},R):Ra({x:l+u/2,y:c+m/2,textAnchor:"middle",verticalAnchor:"middle"},R)},Bfe=function(t){return"cx"in t&&lt(t.cx)};function Qa(e){var t=e.offset,n=t===void 0?5:t,r=Rfe(e,wfe),s=Ra({offset:n},r),i=s.viewBox,o=s.position,l=s.value,c=s.children,u=s.content,m=s.className,p=m===void 0?"":m,g=s.textBreakAll;if(!i||nn(l)&&nn(c)&&!h.isValidElement(u)&&!Yt(u))return null;if(h.isValidElement(u))return h.cloneElement(u,s);var x;if(Yt(u)){if(x=h.createElement(u,s),h.isValidElement(x))return x}else x=Mfe(s);var y=Bfe(i),v=Pt(s,!0);if(y&&(o==="insideStart"||o==="insideEnd"||o==="end"))return $fe(s,x,v);var N=y?Ffe(s):Ufe(s);return W.createElement(Kf,Wg({className:fn("recharts-label",p)},v,N,{breakAll:g}),x)}Qa.displayName="Label";var xH=function(t){var n=t.cx,r=t.cy,s=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,m=t.outerRadius,p=t.x,g=t.y,x=t.top,y=t.left,v=t.width,N=t.height,S=t.clockWise,j=t.labelViewBox;if(j)return j;if(lt(v)&&lt(N)){if(lt(p)&&lt(g))return{x:p,y:g,width:v,height:N};if(lt(x)&&lt(y))return{x,y,width:v,height:N}}return lt(p)&&lt(g)?{x:p,y:g,width:0,height:0}:lt(n)&&lt(r)?{cx:n,cy:r,startAngle:i||s||0,endAngle:o||s||0,innerRadius:u||0,outerRadius:m||c||l||0,clockWise:S}:t.viewBox?t.viewBox:{}},Gfe=function(t,n){return t?t===!0?W.createElement(Qa,{key:"label-implicit",viewBox:n}):$a(t)?W.createElement(Qa,{key:"label-implicit",viewBox:n,value:t}):h.isValidElement(t)?t.type===Qa?h.cloneElement(t,{key:"label-implicit",viewBox:n}):W.createElement(Qa,{key:"label-implicit",content:t,viewBox:n}):Yt(t)?W.createElement(Qa,{key:"label-implicit",content:t,viewBox:n}):Eh(t)?W.createElement(Qa,Wg({viewBox:n},t,{key:"label-implicit"})):null:null},Hfe=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var s=t.children,i=xH(t),o=ni(s,Qa).map(function(c,u){return h.cloneElement(c,{viewBox:n||i,key:"label-".concat(u)})});if(!r)return o;var l=Gfe(t.label,n||i);return[l].concat(Afe(o))};Qa.parseViewBox=xH;Qa.renderCallByParent=Hfe;var Dw,Q$;function bH(){if(Q$)return Dw;Q$=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return Dw=e,Dw}var Kfe=bH();const zfe=Jn(Kfe);function Yg(e){"@babel/helpers - typeof";return Yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yg(e)}var qfe=["valueAccessor"],Vfe=["data","dataKey","clockWise","id","textBreakAll"];function Wfe(e){return Jfe(e)||Xfe(e)||Qfe(e)||Yfe()}function Yfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qfe(e,t){if(e){if(typeof e=="string")return mT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mT(e,t)}}function Xfe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Jfe(e){if(Array.isArray(e))return mT(e)}function mT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ov(){return Ov=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ov.apply(this,arguments)}function X$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function J$(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?X$(Object(n),!0).forEach(function(r){Zfe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X$(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Zfe(e,t,n){return t=epe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function epe(e){var t=tpe(e,"string");return Yg(t)=="symbol"?t:t+""}function tpe(e,t){if(Yg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Yg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Z$(e,t){if(e==null)return{};var n=npe(e,t),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function npe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var rpe=function(t){return Array.isArray(t.value)?zfe(t.value):t.value};function ks(e){var t=e.valueAccessor,n=t===void 0?rpe:t,r=Z$(e,qfe),s=r.data,i=r.dataKey,o=r.clockWise,l=r.id,c=r.textBreakAll,u=Z$(r,Vfe);return!s||!s.length?null:W.createElement(mn,{className:"recharts-label-list"},s.map(function(m,p){var g=nn(i)?n(m,p):pr(m&&m.payload,i),x=nn(l)?{}:{id:"".concat(l,"-").concat(p)};return W.createElement(Qa,Ov({},Pt(m,!0),u,x,{parentViewBox:m.parentViewBox,value:g,textBreakAll:c,viewBox:Qa.parseViewBox(nn(o)?m:J$(J$({},m),{},{clockWise:o})),key:"label-".concat(p),index:p}))}))}ks.displayName="LabelList";function ape(e,t){return e?e===!0?W.createElement(ks,{key:"labelList-implicit",data:t}):W.isValidElement(e)||Yt(e)?W.createElement(ks,{key:"labelList-implicit",data:t,content:e}):Eh(e)?W.createElement(ks,Ov({data:t},e,{key:"labelList-implicit"})):null:null}function spe(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var r=e.children,s=ni(r,ks).map(function(o,l){return h.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!n)return s;var i=ape(e.label,t);return[i].concat(Wfe(s))}ks.renderCallByParent=spe;function Qg(e){"@babel/helpers - typeof";return Qg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qg(e)}function hT(){return hT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hT.apply(this,arguments)}function e4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function t4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?e4(Object(n),!0).forEach(function(r){ipe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ipe(e,t,n){return t=ope(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ope(e){var t=lpe(e,"string");return Qg(t)=="symbol"?t:t+""}function lpe(e,t){if(Qg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Qg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cpe=function(t,n){var r=Js(n-t),s=Math.min(Math.abs(n-t),359.999);return r*s},Vb=function(t){var n=t.cx,r=t.cy,s=t.radius,i=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,m=c*(l?1:-1)+s,p=Math.asin(c/m)/Tv,g=u?i:i+o*p,x=Er(n,r,m,g),y=Er(n,r,s,g),v=u?i-o*p:i,N=Er(n,r,m*Math.cos(p*Tv),v);return{center:x,circleTangency:y,lineTangency:N,theta:p}},yH=function(t){var n=t.cx,r=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,c=cpe(o,l),u=o+c,m=Er(n,r,i,o),p=Er(n,r,i,u),g="M ".concat(m.x,",").concat(m.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(p.x,",").concat(p.y,`
  `);if(s>0){var x=Er(n,r,s,o),y=Er(n,r,s,u);g+="L ".concat(y.x,",").concat(y.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(x.x,",").concat(x.y," Z")}else g+="L ".concat(n,",").concat(r," Z");return g},dpe=function(t){var n=t.cx,r=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,m=t.endAngle,p=Js(m-u),g=Vb({cx:n,cy:r,radius:i,angle:u,sign:p,cornerRadius:o,cornerIsExternal:c}),x=g.circleTangency,y=g.lineTangency,v=g.theta,N=Vb({cx:n,cy:r,radius:i,angle:m,sign:-p,cornerRadius:o,cornerIsExternal:c}),S=N.circleTangency,j=N.lineTangency,C=N.theta,_=c?Math.abs(u-m):Math.abs(u-m)-v-C;if(_<0)return l?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):yH({cx:n,cy:r,innerRadius:s,outerRadius:i,startAngle:u,endAngle:m});var A="M ".concat(y.x,",").concat(y.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(_>180),",").concat(+(p<0),",").concat(S.x,",").concat(S.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(j.x,",").concat(j.y,`
  `);if(s>0){var T=Vb({cx:n,cy:r,radius:s,angle:u,sign:p,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),R=T.circleTangency,M=T.lineTangency,P=T.theta,$=Vb({cx:n,cy:r,radius:s,angle:m,sign:-p,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),w=$.circleTangency,U=$.lineTangency,X=$.theta,I=c?Math.abs(u-m):Math.abs(u-m)-P-X;if(I<0&&o===0)return"".concat(A,"L").concat(n,",").concat(r,"Z");A+="L".concat(U.x,",").concat(U.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(w.x,",").concat(w.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(I>180),",").concat(+(p>0),",").concat(R.x,",").concat(R.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(M.x,",").concat(M.y,"Z")}else A+="L".concat(n,",").concat(r,"Z");return A},upe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},vH=function(t){var n=t4(t4({},upe),t),r=n.cx,s=n.cy,i=n.innerRadius,o=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,u=n.cornerIsExternal,m=n.startAngle,p=n.endAngle,g=n.className;if(o<i||m===p)return null;var x=fn("recharts-sector",g),y=o-i,v=Zs(l,y,0,!0),N;return v>0&&Math.abs(m-p)<360?N=dpe({cx:r,cy:s,innerRadius:i,outerRadius:o,cornerRadius:Math.min(v,y/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:m,endAngle:p}):N=yH({cx:r,cy:s,innerRadius:i,outerRadius:o,startAngle:m,endAngle:p}),W.createElement("path",hT({},Pt(n,!0),{className:x,d:N,role:"img"}))};function Xg(e){"@babel/helpers - typeof";return Xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xg(e)}function gT(){return gT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gT.apply(this,arguments)}function n4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function r4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?n4(Object(n),!0).forEach(function(r){fpe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):n4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function fpe(e,t,n){return t=ppe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ppe(e){var t=mpe(e,"string");return Xg(t)=="symbol"?t:t+""}function mpe(e,t){if(Xg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Xg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var a4={curveBasisClosed:Iae,curveBasisOpen:Dae,curveBasis:kae,curveBumpX:bae,curveBumpY:yae,curveLinearClosed:Pae,curveLinear:tN,curveMonotoneX:Mae,curveMonotoneY:Lae,curveNatural:$ae,curveStep:Fae,curveStepAfter:Bae,curveStepBefore:Uae},Wb=function(t){return t.x===+t.x&&t.y===+t.y},C0=function(t){return t.x},T0=function(t){return t.y},hpe=function(t,n){if(Yt(t))return t;var r="curve".concat(Z1(t));return(r==="curveMonotone"||r==="curveBump")&&n?a4["".concat(r).concat(n==="vertical"?"Y":"X")]:a4[r]||tN},gpe=function(t){var n=t.type,r=n===void 0?"linear":n,s=t.points,i=s===void 0?[]:s,o=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,m=hpe(r,l),p=u?i.filter(function(v){return Wb(v)}):i,g;if(Array.isArray(o)){var x=u?o.filter(function(v){return Wb(v)}):o,y=p.map(function(v,N){return r4(r4({},v),{},{base:x[N]})});return l==="vertical"?g=$b().y(T0).x1(C0).x0(function(v){return v.base.x}):g=$b().x(C0).y1(T0).y0(function(v){return v.base.y}),g.defined(Wb).curve(m),g(y)}return l==="vertical"&&lt(o)?g=$b().y(T0).x1(C0).x0(o):lt(o)?g=$b().x(C0).y1(T0).y0(o):g=hG().x(C0).y(T0),g.defined(Wb).curve(m),g(p)},Tu=function(t){var n=t.className,r=t.points,s=t.path,i=t.pathRef;if((!r||!r.length)&&!s)return null;var o=r&&r.length?gpe(t):s;return h.createElement("path",gT({},Pt(t,!1),tv(t),{className:fn("recharts-curve",n),d:o,ref:i}))},Pw={exports:{}},Mw,s4;function xpe(){if(s4)return Mw;s4=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Mw=e,Mw}var Lw,i4;function bpe(){if(i4)return Lw;i4=1;var e=xpe();function t(){}function n(){}return n.resetWarningCache=t,Lw=function(){function r(o,l,c,u,m,p){if(p!==e){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}r.isRequired=r;function s(){return r}var i={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:t};return i.PropTypes=i,i},Lw}var o4;function ype(){return o4||(o4=1,Pw.exports=bpe()()),Pw.exports}var vpe=ype();const nr=Jn(vpe),{getOwnPropertyNames:Npe,getOwnPropertySymbols:Spe}=Object,{hasOwnProperty:Epe}=Object.prototype;function $w(e,t){return function(r,s,i){return e(r,s,i)&&t(r,s,i)}}function Yb(e){return function(n,r,s){if(!n||!r||typeof n!="object"||typeof r!="object")return e(n,r,s);const{cache:i}=s,o=i.get(n),l=i.get(r);if(o&&l)return o===r&&l===n;i.set(n,r),i.set(r,n);const c=e(n,r,s);return i.delete(n),i.delete(r),c}}function jpe(e){return e?.[Symbol.toStringTag]}function l4(e){return Npe(e).concat(Spe(e))}const wpe=Object.hasOwn||((e,t)=>Epe.call(e,t));function sp(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const Ape="__v",_pe="__o",Cpe="_owner",{getOwnPropertyDescriptor:c4,keys:d4}=Object;function Tpe(e,t){return e.byteLength===t.byteLength&&Rv(new Uint8Array(e),new Uint8Array(t))}function Ope(e,t,n){let r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function Rpe(e,t){return e.byteLength===t.byteLength&&Rv(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function kpe(e,t){return sp(e.getTime(),t.getTime())}function Ipe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function Dpe(e,t){return e===t}function u4(e,t,n){const r=e.size;if(r!==t.size)return!1;if(!r)return!0;const s=new Array(r),i=e.entries();let o,l,c=0;for(;(o=i.next())&&!o.done;){const u=t.entries();let m=!1,p=0;for(;(l=u.next())&&!l.done;){if(s[p]){p++;continue}const g=o.value,x=l.value;if(n.equals(g[0],x[0],c,p,e,t,n)&&n.equals(g[1],x[1],g[0],x[0],e,t,n)){m=s[p]=!0;break}p++}if(!m)return!1;c++}return!0}const Ppe=sp;function Mpe(e,t,n){const r=d4(e);let s=r.length;if(d4(t).length!==s)return!1;for(;s-- >0;)if(!NH(e,t,n,r[s]))return!1;return!0}function O0(e,t,n){const r=l4(e);let s=r.length;if(l4(t).length!==s)return!1;let i,o,l;for(;s-- >0;)if(i=r[s],!NH(e,t,n,i)||(o=c4(e,i),l=c4(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function Lpe(e,t){return sp(e.valueOf(),t.valueOf())}function $pe(e,t){return e.source===t.source&&e.flags===t.flags}function f4(e,t,n){const r=e.size;if(r!==t.size)return!1;if(!r)return!0;const s=new Array(r),i=e.values();let o,l;for(;(o=i.next())&&!o.done;){const c=t.values();let u=!1,m=0;for(;(l=c.next())&&!l.done;){if(!s[m]&&n.equals(o.value,l.value,o.value,l.value,e,t,n)){u=s[m]=!0;break}m++}if(!u)return!1}return!0}function Rv(e,t){let n=e.byteLength;if(t.byteLength!==n||e.byteOffset!==t.byteOffset)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function Fpe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function NH(e,t,n,r){return(r===Cpe||r===_pe||r===Ape)&&(e.$$typeof||t.$$typeof)?!0:wpe(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}const Upe="[object ArrayBuffer]",Bpe="[object Arguments]",Gpe="[object Boolean]",Hpe="[object DataView]",Kpe="[object Date]",zpe="[object Error]",qpe="[object Map]",Vpe="[object Number]",Wpe="[object Object]",Ype="[object RegExp]",Qpe="[object Set]",Xpe="[object String]",Jpe={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},Zpe="[object URL]",eme=Object.prototype.toString;function tme({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:s,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:l,areObjectsEqual:c,arePrimitiveWrappersEqual:u,areRegExpsEqual:m,areSetsEqual:p,areTypedArraysEqual:g,areUrlsEqual:x,unknownTagComparators:y}){return function(N,S,j){if(N===S)return!0;if(N==null||S==null)return!1;const C=typeof N;if(C!==typeof S)return!1;if(C!=="object")return C==="number"?l(N,S,j):C==="function"?i(N,S,j):!1;const _=N.constructor;if(_!==S.constructor)return!1;if(_===Object)return c(N,S,j);if(Array.isArray(N))return t(N,S,j);if(_===Date)return r(N,S,j);if(_===RegExp)return m(N,S,j);if(_===Map)return o(N,S,j);if(_===Set)return p(N,S,j);const A=eme.call(N);if(A===Kpe)return r(N,S,j);if(A===Ype)return m(N,S,j);if(A===qpe)return o(N,S,j);if(A===Qpe)return p(N,S,j);if(A===Wpe)return typeof N.then!="function"&&typeof S.then!="function"&&c(N,S,j);if(A===Zpe)return x(N,S,j);if(A===zpe)return s(N,S,j);if(A===Bpe)return c(N,S,j);if(Jpe[A])return g(N,S,j);if(A===Upe)return e(N,S,j);if(A===Hpe)return n(N,S,j);if(A===Gpe||A===Vpe||A===Xpe)return u(N,S,j);if(y){let T=y[A];if(!T){const R=jpe(N);R&&(T=y[R])}if(T)return T(N,S,j)}return!1}}function nme({circular:e,createCustomConfig:t,strict:n}){let r={areArrayBuffersEqual:Tpe,areArraysEqual:n?O0:Ope,areDataViewsEqual:Rpe,areDatesEqual:kpe,areErrorsEqual:Ipe,areFunctionsEqual:Dpe,areMapsEqual:n?$w(u4,O0):u4,areNumbersEqual:Ppe,areObjectsEqual:n?O0:Mpe,arePrimitiveWrappersEqual:Lpe,areRegExpsEqual:$pe,areSetsEqual:n?$w(f4,O0):f4,areTypedArraysEqual:n?$w(Rv,O0):Rv,areUrlsEqual:Fpe,unknownTagComparators:void 0};if(t&&(r=Object.assign({},r,t(r))),e){const s=Yb(r.areArraysEqual),i=Yb(r.areMapsEqual),o=Yb(r.areObjectsEqual),l=Yb(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:s,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:l})}return r}function rme(e){return function(t,n,r,s,i,o,l){return e(t,n,l)}}function ame({circular:e,comparator:t,createState:n,equals:r,strict:s}){if(n)return function(l,c){const{cache:u=e?new WeakMap:void 0,meta:m}=n();return t(l,c,{cache:u,equals:r,meta:m,strict:s})};if(e)return function(l,c){return t(l,c,{cache:new WeakMap,equals:r,meta:void 0,strict:s})};const i={cache:void 0,equals:r,meta:void 0,strict:s};return function(l,c){return t(l,c,i)}}const sme=Uu();Uu({strict:!0});Uu({circular:!0});Uu({circular:!0,strict:!0});Uu({createInternalComparator:()=>sp});Uu({strict:!0,createInternalComparator:()=>sp});Uu({circular:!0,createInternalComparator:()=>sp});Uu({circular:!0,createInternalComparator:()=>sp,strict:!0});function Uu(e={}){const{circular:t=!1,createInternalComparator:n,createState:r,strict:s=!1}=e,i=nme(e),o=tme(i),l=n?n(o):rme(o);return ame({circular:t,comparator:o,createState:r,equals:l,strict:s})}function ime(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function p4(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function s(i){n<0&&(n=i),i-n>t?(e(i),n=-1):ime(s)};requestAnimationFrame(r)}function xT(e){"@babel/helpers - typeof";return xT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xT(e)}function ome(e){return ume(e)||dme(e)||cme(e)||lme()}function lme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cme(e,t){if(e){if(typeof e=="string")return m4(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m4(e,t)}}function m4(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function dme(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ume(e){if(Array.isArray(e))return e}function fme(){var e={},t=function(){return null},n=!1,r=function s(i){if(!n){if(Array.isArray(i)){if(!i.length)return;var o=i,l=ome(o),c=l[0],u=l.slice(1);if(typeof c=="number"){p4(s.bind(null,u),c);return}s(c),p4(s.bind(null,u));return}xT(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){n=!0},start:function(i){n=!1,r(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function Jg(e){"@babel/helpers - typeof";return Jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jg(e)}function h4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function g4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?h4(Object(n),!0).forEach(function(r){SH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function SH(e,t,n){return t=pme(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pme(e){var t=mme(e,"string");return Jg(t)==="symbol"?t:String(t)}function mme(e,t){if(Jg(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Jg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hme=function(t,n){return[Object.keys(t),Object.keys(n)].reduce(function(r,s){return r.filter(function(i){return s.includes(i)})})},gme=function(t){return t},xme=function(t){return t.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},xg=function(t,n){return Object.keys(n).reduce(function(r,s){return g4(g4({},r),{},SH({},s,t(s,n[s])))},{})},x4=function(t,n,r){return t.map(function(s){return"".concat(xme(s)," ").concat(n,"ms ").concat(r)}).join(",")};function bme(e,t){return Nme(e)||vme(e,t)||EH(e,t)||yme()}function yme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vme(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(m){u=!0,s=m}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Nme(e){if(Array.isArray(e))return e}function Sme(e){return wme(e)||jme(e)||EH(e)||Eme()}function Eme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EH(e,t){if(e){if(typeof e=="string")return bT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bT(e,t)}}function jme(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function wme(e){if(Array.isArray(e))return bT(e)}function bT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var kv=1e-4,jH=function(t,n){return[0,3*t,3*n-6*t,3*t-3*n+1]},wH=function(t,n){return t.map(function(r,s){return r*Math.pow(n,s)}).reduce(function(r,s){return r+s})},b4=function(t,n){return function(r){var s=jH(t,n);return wH(s,r)}},Ame=function(t,n){return function(r){var s=jH(t,n),i=[].concat(Sme(s.map(function(o,l){return o*l}).slice(1)),[0]);return wH(i,r)}},y4=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var s=n[0],i=n[1],o=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":s=0,i=0,o=1,l=1;break;case"ease":s=.25,i=.1,o=.25,l=1;break;case"ease-in":s=.42,i=0,o=1,l=1;break;case"ease-out":s=.42,i=0,o=.58,l=1;break;case"ease-in-out":s=0,i=0,o=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(N){return parseFloat(N)}),m=bme(u,4);s=m[0],i=m[1],o=m[2],l=m[3]}}}var p=b4(s,o),g=b4(i,l),x=Ame(s,o),y=function(S){return S>1?1:S<0?0:S},v=function(S){for(var j=S>1?1:S,C=j,_=0;_<8;++_){var A=p(C)-j,T=x(C);if(Math.abs(A-j)<kv||T<kv)return g(C);C=y(C-A/T)}return g(C)};return v.isStepper=!1,v},_me=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.stiff,r=n===void 0?100:n,s=t.damping,i=s===void 0?8:s,o=t.dt,l=o===void 0?17:o,c=function(m,p,g){var x=-(m-p)*r,y=g*i,v=g+(x-y)*l/1e3,N=g*l/1e3+m;return Math.abs(N-p)<kv&&Math.abs(v)<kv?[p,0]:[N,v]};return c.isStepper=!0,c.dt=l,c},Cme=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var s=n[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return y4(s);case"spring":return _me();default:if(s.split("(")[0]==="cubic-bezier")return y4(s)}return typeof s=="function"?s:null};function Zg(e){"@babel/helpers - typeof";return Zg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zg(e)}function v4(e){return Rme(e)||Ome(e)||AH(e)||Tme()}function Tme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ome(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Rme(e){if(Array.isArray(e))return vT(e)}function N4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function ds(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?N4(Object(n),!0).forEach(function(r){yT(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function yT(e,t,n){return t=kme(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kme(e){var t=Ime(e,"string");return Zg(t)==="symbol"?t:String(t)}function Ime(e,t){if(Zg(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Zg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Dme(e,t){return Lme(e)||Mme(e,t)||AH(e,t)||Pme()}function Pme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AH(e,t){if(e){if(typeof e=="string")return vT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vT(e,t)}}function vT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Mme(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(m){u=!0,s=m}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Lme(e){if(Array.isArray(e))return e}var Iv=function(t,n,r){return t+(n-t)*r},NT=function(t){var n=t.from,r=t.to;return n!==r},$me=function e(t,n,r){var s=xg(function(i,o){if(NT(o)){var l=t(o.from,o.to,o.velocity),c=Dme(l,2),u=c[0],m=c[1];return ds(ds({},o),{},{from:u,velocity:m})}return o},n);return r<1?xg(function(i,o){return NT(o)?ds(ds({},o),{},{velocity:Iv(o.velocity,s[i].velocity,r),from:Iv(o.from,s[i].from,r)}):o},n):e(t,s,r-1)};const Fme=(function(e,t,n,r,s){var i=hme(e,t),o=i.reduce(function(N,S){return ds(ds({},N),{},yT({},S,[e[S],t[S]]))},{}),l=i.reduce(function(N,S){return ds(ds({},N),{},yT({},S,{from:e[S],velocity:0,to:t[S]}))},{}),c=-1,u,m,p=function(){return null},g=function(){return xg(function(S,j){return j.from},l)},x=function(){return!Object.values(l).filter(NT).length},y=function(S){u||(u=S);var j=S-u,C=j/n.dt;l=$me(n,l,C),s(ds(ds(ds({},e),t),g())),u=S,x()||(c=requestAnimationFrame(p))},v=function(S){m||(m=S);var j=(S-m)/r,C=xg(function(A,T){return Iv.apply(void 0,v4(T).concat([n(j)]))},o);if(s(ds(ds(ds({},e),t),C)),j<1)c=requestAnimationFrame(p);else{var _=xg(function(A,T){return Iv.apply(void 0,v4(T).concat([n(1)]))},o);s(ds(ds(ds({},e),t),_))}};return p=n.isStepper?y:v,function(){return requestAnimationFrame(p),function(){cancelAnimationFrame(c)}}});function $m(e){"@babel/helpers - typeof";return $m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$m(e)}var Ume=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Bme(e,t){if(e==null)return{};var n=Gme(e,t),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Gme(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,i;for(i=0;i<r.length;i++)s=r[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Fw(e){return qme(e)||zme(e)||Kme(e)||Hme()}function Hme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kme(e,t){if(e){if(typeof e=="string")return ST(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ST(e,t)}}function zme(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function qme(e){if(Array.isArray(e))return ST(e)}function ST(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Bo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?S4(Object(n),!0).forEach(function(r){X0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function X0(e,t,n){return t=_H(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wme(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_H(r.key),r)}}function Yme(e,t,n){return t&&Wme(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _H(e){var t=Qme(e,"string");return $m(t)==="symbol"?t:String(t)}function Qme(e,t){if($m(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if($m(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xme(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ET(e,t)}function ET(e,t){return ET=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},ET(e,t)}function Jme(e){var t=Zme();return function(){var r=Dv(e),s;if(t){var i=Dv(this).constructor;s=Reflect.construct(r,arguments,i)}else s=r.apply(this,arguments);return jT(this,s)}}function jT(e,t){if(t&&($m(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wT(e)}function wT(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zme(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Dv(e){return Dv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Dv(e)}var wi=(function(e){Xme(n,e);var t=Jme(n);function n(r,s){var i;Vme(this,n),i=t.call(this,r,s);var o=i.props,l=o.isActive,c=o.attributeName,u=o.from,m=o.to,p=o.steps,g=o.children,x=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(wT(i)),i.changeStyle=i.changeStyle.bind(wT(i)),!l||x<=0)return i.state={style:{}},typeof g=="function"&&(i.state={style:m}),jT(i);if(p&&p.length)i.state={style:p[0].style};else if(u){if(typeof g=="function")return i.state={style:u},jT(i);i.state={style:c?X0({},c,u):u}}else i.state={style:{}};return i}return Yme(n,[{key:"componentDidMount",value:function(){var s=this.props,i=s.isActive,o=s.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,u=i.shouldReAnimate,m=i.to,p=i.from,g=this.state.style;if(l){if(!o){var x={style:c?X0({},c,m):m};this.state&&g&&(c&&g[c]!==m||!c&&g!==m)&&this.setState(x);return}if(!(sme(s.to,m)&&s.canBegin&&s.isActive)){var y=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var v=y||u?p:s.to;if(this.state&&g){var N={style:c?X0({},c,v):v};(c&&g[c]!==v||!c&&g!==v)&&this.setState(N)}this.runAnimation(Bo(Bo({},this.props),{},{from:v,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var i=this,o=s.from,l=s.to,c=s.duration,u=s.easing,m=s.begin,p=s.onAnimationEnd,g=s.onAnimationStart,x=Fme(o,l,Cme(u),c,this.changeStyle),y=function(){i.stopJSAnimation=x()};this.manager.start([g,m,y,c,p])}},{key:"runStepAnimation",value:function(s){var i=this,o=s.steps,l=s.begin,c=s.onAnimationStart,u=o[0],m=u.style,p=u.duration,g=p===void 0?0:p,x=function(v,N,S){if(S===0)return v;var j=N.duration,C=N.easing,_=C===void 0?"ease":C,A=N.style,T=N.properties,R=N.onAnimationEnd,M=S>0?o[S-1]:N,P=T||Object.keys(A);if(typeof _=="function"||_==="spring")return[].concat(Fw(v),[i.runJSAnimation.bind(i,{from:M.style,to:A,duration:j,easing:_}),j]);var $=x4(P,j,_),w=Bo(Bo(Bo({},M.style),A),{},{transition:$});return[].concat(Fw(v),[w,j,R]).filter(gme)};return this.manager.start([c].concat(Fw(o.reduce(x,[m,Math.max(g,l)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=fme());var i=s.begin,o=s.duration,l=s.attributeName,c=s.to,u=s.easing,m=s.onAnimationStart,p=s.onAnimationEnd,g=s.steps,x=s.children,y=this.manager;if(this.unSubscribe=y.subscribe(this.handleStyleChange),typeof u=="function"||typeof x=="function"||u==="spring"){this.runJSAnimation(s);return}if(g.length>1){this.runStepAnimation(s);return}var v=l?X0({},l,c):c,N=x4(Object.keys(v),o,u);y.start([m,i,Bo(Bo({},v),{},{transition:N}),o,p])}},{key:"render",value:function(){var s=this.props,i=s.children;s.begin;var o=s.duration;s.attributeName,s.easing;var l=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var c=Bme(s,Ume),u=h.Children.count(i),m=this.state.style;if(typeof i=="function")return i(m);if(!l||u===0||o<=0)return i;var p=function(x){var y=x.props,v=y.style,N=v===void 0?{}:v,S=y.className,j=h.cloneElement(x,Bo(Bo({},c),{},{style:Bo(Bo({},N),m),className:S}));return j};return u===1?p(h.Children.only(i)):W.createElement("div",null,h.Children.map(i,function(g){return p(g)}))}}]),n})(h.PureComponent);wi.displayName="Animate";wi.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};wi.propTypes={from:nr.oneOfType([nr.object,nr.string]),to:nr.oneOfType([nr.object,nr.string]),attributeName:nr.string,duration:nr.number,begin:nr.number,easing:nr.oneOfType([nr.string,nr.func]),steps:nr.arrayOf(nr.shape({duration:nr.number.isRequired,style:nr.object.isRequired,easing:nr.oneOfType([nr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),nr.func]),properties:nr.arrayOf("string"),onAnimationEnd:nr.func})),children:nr.oneOfType([nr.node,nr.func]),isActive:nr.bool,canBegin:nr.bool,onAnimationEnd:nr.func,shouldReAnimate:nr.bool,onAnimationStart:nr.func,onAnimationReStart:nr.func};function ex(e){"@babel/helpers - typeof";return ex=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ex(e)}function Pv(){return Pv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pv.apply(this,arguments)}function ehe(e,t){return ahe(e)||rhe(e,t)||nhe(e,t)||the()}function the(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nhe(e,t){if(e){if(typeof e=="string")return E4(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E4(e,t)}}function E4(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rhe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(m){u=!0,s=m}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function ahe(e){if(Array.isArray(e))return e}function j4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function w4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?j4(Object(n),!0).forEach(function(r){she(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function she(e,t,n){return t=ihe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ihe(e){var t=ohe(e,"string");return ex(t)=="symbol"?t:t+""}function ohe(e,t){if(ex(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(ex(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var A4=function(t,n,r,s,i){var o=Math.min(Math.abs(r)/2,Math.abs(s)/2),l=s>=0?1:-1,c=r>=0?1:-1,u=s>=0&&r>=0||s<0&&r<0?1:0,m;if(o>0&&i instanceof Array){for(var p=[0,0,0,0],g=0,x=4;g<x;g++)p[g]=i[g]>o?o:i[g];m="M".concat(t,",").concat(n+l*p[0]),p[0]>0&&(m+="A ".concat(p[0],",").concat(p[0],",0,0,").concat(u,",").concat(t+c*p[0],",").concat(n)),m+="L ".concat(t+r-c*p[1],",").concat(n),p[1]>0&&(m+="A ".concat(p[1],",").concat(p[1],",0,0,").concat(u,`,
        `).concat(t+r,",").concat(n+l*p[1])),m+="L ".concat(t+r,",").concat(n+s-l*p[2]),p[2]>0&&(m+="A ".concat(p[2],",").concat(p[2],",0,0,").concat(u,`,
        `).concat(t+r-c*p[2],",").concat(n+s)),m+="L ".concat(t+c*p[3],",").concat(n+s),p[3]>0&&(m+="A ".concat(p[3],",").concat(p[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(n+s-l*p[3])),m+="Z"}else if(o>0&&i===+i&&i>0){var y=Math.min(o,i);m="M ".concat(t,",").concat(n+l*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+c*y,",").concat(n,`
            L `).concat(t+r-c*y,",").concat(n,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+r,",").concat(n+l*y,`
            L `).concat(t+r,",").concat(n+s-l*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+r-c*y,",").concat(n+s,`
            L `).concat(t+c*y,",").concat(n+s,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t,",").concat(n+s-l*y," Z")}else m="M ".concat(t,",").concat(n," h ").concat(r," v ").concat(s," h ").concat(-r," Z");return m},lhe=function(t,n){if(!t||!n)return!1;var r=t.x,s=t.y,i=n.x,o=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(i,i+l),m=Math.max(i,i+l),p=Math.min(o,o+c),g=Math.max(o,o+c);return r>=u&&r<=m&&s>=p&&s<=g}return!1},che={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},bN=function(t){var n=w4(w4({},che),t),r=h.useRef(),s=h.useState(-1),i=ehe(s,2),o=i[0],l=i[1];h.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var _=r.current.getTotalLength();_&&l(_)}catch{}},[]);var c=n.x,u=n.y,m=n.width,p=n.height,g=n.radius,x=n.className,y=n.animationEasing,v=n.animationDuration,N=n.animationBegin,S=n.isAnimationActive,j=n.isUpdateAnimationActive;if(c!==+c||u!==+u||m!==+m||p!==+p||m===0||p===0)return null;var C=fn("recharts-rectangle",x);return j?W.createElement(wi,{canBegin:o>0,from:{width:m,height:p,x:c,y:u},to:{width:m,height:p,x:c,y:u},duration:v,animationEasing:y,isActive:j},function(_){var A=_.width,T=_.height,R=_.x,M=_.y;return W.createElement(wi,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:N,duration:v,isActive:S,easing:y},W.createElement("path",Pv({},Pt(n,!0),{className:C,d:A4(R,M,A,T,g),ref:r})))}):W.createElement("path",Pv({},Pt(n,!0),{className:C,d:A4(c,u,m,p,g)}))},dhe=["points","className","baseLinePoints","connectNulls"];function Qp(){return Qp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qp.apply(this,arguments)}function uhe(e,t){if(e==null)return{};var n=fhe(e,t),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function fhe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function _4(e){return ghe(e)||hhe(e)||mhe(e)||phe()}function phe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mhe(e,t){if(e){if(typeof e=="string")return AT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AT(e,t)}}function hhe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ghe(e){if(Array.isArray(e))return AT(e)}function AT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var C4=function(t){return t&&t.x===+t.x&&t.y===+t.y},xhe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return t.forEach(function(r){C4(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),C4(t[0])&&n[n.length-1].push(t[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},bg=function(t,n){var r=xhe(t);n&&(r=[r.reduce(function(i,o){return[].concat(_4(i),_4(o))},[])]);var s=r.map(function(i){return i.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return r.length===1?"".concat(s,"Z"):s},bhe=function(t,n,r){var s=bg(t,r);return"".concat(s.slice(-1)==="Z"?s.slice(0,-1):s,"L").concat(bg(n.reverse(),r).slice(1))},CH=function(t){var n=t.points,r=t.className,s=t.baseLinePoints,i=t.connectNulls,o=uhe(t,dhe);if(!n||!n.length)return null;var l=fn("recharts-polygon",r);if(s&&s.length){var c=o.stroke&&o.stroke!=="none",u=bhe(n,s,i);return W.createElement("g",{className:l},W.createElement("path",Qp({},Pt(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),c?W.createElement("path",Qp({},Pt(o,!0),{fill:"none",d:bg(n,i)})):null,c?W.createElement("path",Qp({},Pt(o,!0),{fill:"none",d:bg(s,i)})):null)}var m=bg(n,i);return W.createElement("path",Qp({},Pt(o,!0),{fill:m.slice(-1)==="Z"?o.fill:"none",className:l,d:m}))};function _T(){return _T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_T.apply(this,arguments)}var Rx=function(t){var n=t.cx,r=t.cy,s=t.r,i=t.className,o=fn("recharts-dot",i);return n===+n&&r===+r&&s===+s?h.createElement("circle",_T({},Pt(t,!1),tv(t),{className:o,cx:n,cy:r,r:s})):null};function tx(e){"@babel/helpers - typeof";return tx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tx(e)}var yhe=["x","y","top","left","width","height","className"];function CT(){return CT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},CT.apply(this,arguments)}function T4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function vhe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?T4(Object(n),!0).forEach(function(r){Nhe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Nhe(e,t,n){return t=She(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function She(e){var t=Ehe(e,"string");return tx(t)=="symbol"?t:t+""}function Ehe(e,t){if(tx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(tx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jhe(e,t){if(e==null)return{};var n=whe(e,t),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function whe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Ahe=function(t,n,r,s,i,o){return"M".concat(t,",").concat(i,"v").concat(s,"M").concat(o,",").concat(n,"h").concat(r)},_he=function(t){var n=t.x,r=n===void 0?0:n,s=t.y,i=s===void 0?0:s,o=t.top,l=o===void 0?0:o,c=t.left,u=c===void 0?0:c,m=t.width,p=m===void 0?0:m,g=t.height,x=g===void 0?0:g,y=t.className,v=jhe(t,yhe),N=vhe({x:r,y:i,top:l,left:u,width:p,height:x},v);return!lt(r)||!lt(i)||!lt(p)||!lt(x)||!lt(l)||!lt(u)?null:W.createElement("path",CT({},Pt(N,!0),{className:fn("recharts-cross",y),d:Ahe(r,i,p,x,l,u)}))},Uw,O4;function Che(){if(O4)return Uw;O4=1;var e=mN(),t=B9(),n=fc();function r(s,i){return s&&s.length?e(s,n(i,2),t):void 0}return Uw=r,Uw}var The=Che();const Ohe=Jn(The);var Bw,R4;function Rhe(){if(R4)return Bw;R4=1;var e=mN(),t=fc(),n=G9();function r(s,i){return s&&s.length?e(s,t(i,2),n):void 0}return Bw=r,Bw}var khe=Rhe();const Ihe=Jn(khe);var Dhe=["cx","cy","angle","ticks","axisLine"],Phe=["ticks","tick","angle","tickFormatter","stroke"];function Fm(e){"@babel/helpers - typeof";return Fm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fm(e)}function yg(){return yg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yg.apply(this,arguments)}function k4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function bf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?k4(Object(n),!0).forEach(function(r){yN(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function I4(e,t){if(e==null)return{};var n=Mhe(e,t),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Mhe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Lhe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D4(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,OH(r.key),r)}}function $he(e,t,n){return t&&D4(e.prototype,t),n&&D4(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Fhe(e,t,n){return t=Mv(t),Uhe(e,TH()?Reflect.construct(t,n||[],Mv(e).constructor):t.apply(e,n))}function Uhe(e,t){if(t&&(Fm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bhe(e)}function Bhe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TH=function(){return!!e})()}function Mv(e){return Mv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Mv(e)}function Ghe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&TT(e,t)}function TT(e,t){return TT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},TT(e,t)}function yN(e,t,n){return t=OH(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OH(e){var t=Hhe(e,"string");return Fm(t)=="symbol"?t:t+""}function Hhe(e,t){if(Fm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Fm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vN=(function(e){function t(){return Lhe(this,t),Fhe(this,t,arguments)}return Ghe(t,e),$he(t,[{key:"getTickValueCoord",value:function(r){var s=r.coordinate,i=this.props,o=i.angle,l=i.cx,c=i.cy;return Er(l,c,s,o)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,s;switch(r){case"left":s="end";break;case"right":s="start";break;default:s="middle";break}return s}},{key:"getViewBox",value:function(){var r=this.props,s=r.cx,i=r.cy,o=r.angle,l=r.ticks,c=Ohe(l,function(m){return m.coordinate||0}),u=Ihe(l,function(m){return m.coordinate||0});return{cx:s,cy:i,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,s=r.cx,i=r.cy,o=r.angle,l=r.ticks,c=r.axisLine,u=I4(r,Dhe),m=l.reduce(function(y,v){return[Math.min(y[0],v.coordinate),Math.max(y[1],v.coordinate)]},[1/0,-1/0]),p=Er(s,i,m[0],o),g=Er(s,i,m[1],o),x=bf(bf(bf({},Pt(u,!1)),{},{fill:"none"},Pt(c,!1)),{},{x1:p.x,y1:p.y,x2:g.x,y2:g.y});return W.createElement("line",yg({className:"recharts-polar-radius-axis-line"},x))}},{key:"renderTicks",value:function(){var r=this,s=this.props,i=s.ticks,o=s.tick,l=s.angle,c=s.tickFormatter,u=s.stroke,m=I4(s,Phe),p=this.getTickTextAnchor(),g=Pt(m,!1),x=Pt(o,!1),y=i.map(function(v,N){var S=r.getTickValueCoord(v),j=bf(bf(bf(bf({textAnchor:p,transform:"rotate(".concat(90-l,", ").concat(S.x,", ").concat(S.y,")")},g),{},{stroke:"none",fill:u},x),{},{index:N},S),{},{payload:v});return W.createElement(mn,yg({className:fn("recharts-polar-radius-axis-tick",gH(o)),key:"tick-".concat(v.coordinate)},Ou(r.props,v,N)),t.renderTickItem(o,j,c?c(v.value,N):v.value))});return W.createElement(mn,{className:"recharts-polar-radius-axis-ticks"},y)}},{key:"render",value:function(){var r=this.props,s=r.ticks,i=r.axisLine,o=r.tick;return!s||!s.length?null:W.createElement(mn,{className:fn("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),Qa.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,s,i){var o;return W.isValidElement(r)?o=W.cloneElement(r,s):Yt(r)?o=r(s):o=W.createElement(Kf,yg({},s,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])})(h.PureComponent);yN(vN,"displayName","PolarRadiusAxis");yN(vN,"axisType","radiusAxis");yN(vN,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Um(e){"@babel/helpers - typeof";return Um=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Um(e)}function wf(){return wf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wf.apply(this,arguments)}function P4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function yf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?P4(Object(n),!0).forEach(function(r){NN(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Khe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M4(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,kH(r.key),r)}}function zhe(e,t,n){return t&&M4(e.prototype,t),n&&M4(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function qhe(e,t,n){return t=Lv(t),Vhe(e,RH()?Reflect.construct(t,n||[],Lv(e).constructor):t.apply(e,n))}function Vhe(e,t){if(t&&(Um(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Whe(e)}function Whe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function RH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RH=function(){return!!e})()}function Lv(e){return Lv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Lv(e)}function Yhe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&OT(e,t)}function OT(e,t){return OT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},OT(e,t)}function NN(e,t,n){return t=kH(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kH(e){var t=Qhe(e,"string");return Um(t)=="symbol"?t:t+""}function Qhe(e,t){if(Um(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Um(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Xhe=Math.PI/180,L4=1e-5,SN=(function(e){function t(){return Khe(this,t),qhe(this,t,arguments)}return Yhe(t,e),zhe(t,[{key:"getTickLineCoord",value:function(r){var s=this.props,i=s.cx,o=s.cy,l=s.radius,c=s.orientation,u=s.tickSize,m=u||8,p=Er(i,o,l,r.coordinate),g=Er(i,o,l+(c==="inner"?-1:1)*m,r.coordinate);return{x1:p.x,y1:p.y,x2:g.x,y2:g.y}}},{key:"getTickTextAnchor",value:function(r){var s=this.props.orientation,i=Math.cos(-r.coordinate*Xhe),o;return i>L4?o=s==="outer"?"start":"end":i<-L4?o=s==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var r=this.props,s=r.cx,i=r.cy,o=r.radius,l=r.axisLine,c=r.axisLineType,u=yf(yf({},Pt(this.props,!1)),{},{fill:"none"},Pt(l,!1));if(c==="circle")return W.createElement(Rx,wf({className:"recharts-polar-angle-axis-line"},u,{cx:s,cy:i,r:o}));var m=this.props.ticks,p=m.map(function(g){return Er(s,i,o,g.coordinate)});return W.createElement(CH,wf({className:"recharts-polar-angle-axis-line"},u,{points:p}))}},{key:"renderTicks",value:function(){var r=this,s=this.props,i=s.ticks,o=s.tick,l=s.tickLine,c=s.tickFormatter,u=s.stroke,m=Pt(this.props,!1),p=Pt(o,!1),g=yf(yf({},m),{},{fill:"none"},Pt(l,!1)),x=i.map(function(y,v){var N=r.getTickLineCoord(y),S=r.getTickTextAnchor(y),j=yf(yf(yf({textAnchor:S},m),{},{stroke:"none",fill:u},p),{},{index:v,payload:y,x:N.x2,y:N.y2});return W.createElement(mn,wf({className:fn("recharts-polar-angle-axis-tick",gH(o)),key:"tick-".concat(y.coordinate)},Ou(r.props,y,v)),l&&W.createElement("line",wf({className:"recharts-polar-angle-axis-tick-line"},g,N)),o&&t.renderTickItem(o,j,c?c(y.value,v):y.value))});return W.createElement(mn,{className:"recharts-polar-angle-axis-ticks"},x)}},{key:"render",value:function(){var r=this.props,s=r.ticks,i=r.radius,o=r.axisLine;return i<=0||!s||!s.length?null:W.createElement(mn,{className:fn("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,s,i){var o;return W.isValidElement(r)?o=W.cloneElement(r,s):Yt(r)?o=r(s):o=W.createElement(Kf,wf({},s,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])})(h.PureComponent);NN(SN,"displayName","PolarAngleAxis");NN(SN,"axisType","angleAxis");NN(SN,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Gw,$4;function Tk(){if($4)return Gw;$4=1;var e=$G(),t=e(Object.getPrototypeOf,Object);return Gw=t,Gw}var Hw,F4;function IH(){if(F4)return Hw;F4=1;var e=xd(),t=Tk(),n=pl(),r="[object Object]",s=Function.prototype,i=Object.prototype,o=s.toString,l=i.hasOwnProperty,c=o.call(Object);function u(m){if(!n(m)||e(m)!=r)return!1;var p=t(m);if(p===null)return!0;var g=l.call(p,"constructor")&&p.constructor;return typeof g=="function"&&g instanceof g&&o.call(g)==c}return Hw=u,Hw}var Jhe=IH();const Zhe=Jn(Jhe);var Kw,U4;function e0e(){if(U4)return Kw;U4=1;var e=xd(),t=pl(),n="[object Boolean]";function r(s){return s===!0||s===!1||t(s)&&e(s)==n}return Kw=r,Kw}var t0e=e0e();const n0e=Jn(t0e);function nx(e){"@babel/helpers - typeof";return nx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nx(e)}function $v(){return $v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$v.apply(this,arguments)}function r0e(e,t){return o0e(e)||i0e(e,t)||s0e(e,t)||a0e()}function a0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s0e(e,t){if(e){if(typeof e=="string")return B4(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B4(e,t)}}function B4(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i0e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(m){u=!0,s=m}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function o0e(e){if(Array.isArray(e))return e}function G4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function H4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?G4(Object(n),!0).forEach(function(r){l0e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function l0e(e,t,n){return t=c0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c0e(e){var t=d0e(e,"string");return nx(t)=="symbol"?t:t+""}function d0e(e,t){if(nx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(nx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var K4=function(t,n,r,s,i){var o=r-s,l;return l="M ".concat(t,",").concat(n),l+="L ".concat(t+r,",").concat(n),l+="L ".concat(t+r-o/2,",").concat(n+i),l+="L ".concat(t+r-o/2-s,",").concat(n+i),l+="L ".concat(t,",").concat(n," Z"),l},u0e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},f0e=function(t){var n=H4(H4({},u0e),t),r=h.useRef(),s=h.useState(-1),i=r0e(s,2),o=i[0],l=i[1];h.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var C=r.current.getTotalLength();C&&l(C)}catch{}},[]);var c=n.x,u=n.y,m=n.upperWidth,p=n.lowerWidth,g=n.height,x=n.className,y=n.animationEasing,v=n.animationDuration,N=n.animationBegin,S=n.isUpdateAnimationActive;if(c!==+c||u!==+u||m!==+m||p!==+p||g!==+g||m===0&&p===0||g===0)return null;var j=fn("recharts-trapezoid",x);return S?W.createElement(wi,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:g,x:c,y:u},to:{upperWidth:m,lowerWidth:p,height:g,x:c,y:u},duration:v,animationEasing:y,isActive:S},function(C){var _=C.upperWidth,A=C.lowerWidth,T=C.height,R=C.x,M=C.y;return W.createElement(wi,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:N,duration:v,easing:y},W.createElement("path",$v({},Pt(n,!0),{className:j,d:K4(R,M,_,A,T),ref:r})))}):W.createElement("g",null,W.createElement("path",$v({},Pt(n,!0),{className:j,d:K4(c,u,m,p,g)})))},p0e=["option","shapeType","propTransformer","activeClassName","isActive"];function rx(e){"@babel/helpers - typeof";return rx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rx(e)}function m0e(e,t){if(e==null)return{};var n=h0e(e,t),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function h0e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function z4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Fv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?z4(Object(n),!0).forEach(function(r){g0e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function g0e(e,t,n){return t=x0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x0e(e){var t=b0e(e,"string");return rx(t)=="symbol"?t:t+""}function b0e(e,t){if(rx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(rx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function y0e(e,t){return Fv(Fv({},t),e)}function v0e(e,t){return e==="symbols"}function q4(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return W.createElement(bN,n);case"trapezoid":return W.createElement(f0e,n);case"sector":return W.createElement(vH,n);case"symbols":if(v0e(t))return W.createElement(rN,n);break;default:return null}}function N0e(e){return h.isValidElement(e)?e.props:e}function Uv(e){var t=e.option,n=e.shapeType,r=e.propTransformer,s=r===void 0?y0e:r,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,c=m0e(e,p0e),u;if(h.isValidElement(t))u=h.cloneElement(t,Fv(Fv({},c),N0e(t)));else if(Yt(t))u=t(c);else if(Zhe(t)&&!n0e(t)){var m=s(t,c);u=W.createElement(q4,{shapeType:n,elementProps:m})}else{var p=c;u=W.createElement(q4,{shapeType:n,elementProps:p})}return l?W.createElement(mn,{className:o},u):u}function EN(e,t){return t!=null&&"trapezoids"in e.props}function jN(e,t){return t!=null&&"sectors"in e.props}function ax(e,t){return t!=null&&"points"in e.props}function S0e(e,t){var n,r,s=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,i=e.y===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.y)||e.y===t.y;return s&&i}function E0e(e,t){var n=e.endAngle===t.endAngle,r=e.startAngle===t.startAngle;return n&&r}function j0e(e,t){var n=e.x===t.x,r=e.y===t.y,s=e.z===t.z;return n&&r&&s}function w0e(e,t){var n;return EN(e,t)?n=S0e:jN(e,t)?n=E0e:ax(e,t)&&(n=j0e),n}function A0e(e,t){var n;return EN(e,t)?n="trapezoids":jN(e,t)?n="sectors":ax(e,t)&&(n="points"),n}function _0e(e,t){if(EN(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(jN(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return ax(e,t)?t.payload:{}}function C0e(e){var t=e.activeTooltipItem,n=e.graphicalItem,r=e.itemData,s=A0e(n,t),i=_0e(n,t),o=r.filter(function(c,u){var m=Ru(i,c),p=n.props[s].filter(function(y){var v=w0e(n,t);return v(y,t)}),g=n.props[s].indexOf(p[p.length-1]),x=u===g;return m&&x}),l=r.indexOf(o[o.length-1]);return l}var Ry;function Bm(e){"@babel/helpers - typeof";return Bm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bm(e)}function Xp(){return Xp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xp.apply(this,arguments)}function V4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Nr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?V4(Object(n),!0).forEach(function(r){po(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function T0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W4(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,PH(r.key),r)}}function O0e(e,t,n){return t&&W4(e.prototype,t),n&&W4(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function R0e(e,t,n){return t=Bv(t),k0e(e,DH()?Reflect.construct(t,n||[],Bv(e).constructor):t.apply(e,n))}function k0e(e,t){if(t&&(Bm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return I0e(e)}function I0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DH=function(){return!!e})()}function Bv(e){return Bv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Bv(e)}function D0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&RT(e,t)}function RT(e,t){return RT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},RT(e,t)}function po(e,t,n){return t=PH(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PH(e){var t=P0e(e,"string");return Bm(t)=="symbol"?t:t+""}function P0e(e,t){if(Bm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Bm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var pc=(function(e){function t(n){var r;return T0e(this,t),r=R0e(this,t,[n]),po(r,"pieRef",null),po(r,"sectorRefs",[]),po(r,"id",bd("recharts-pie-")),po(r,"handleAnimationEnd",function(){var s=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Yt(s)&&s()}),po(r,"handleAnimationStart",function(){var s=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Yt(s)&&s()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return D0e(t,e),O0e(t,[{key:"isActiveIndex",value:function(r){var s=this.props.activeIndex;return Array.isArray(s)?s.indexOf(r)!==-1:r===s}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.label,l=i.labelLine,c=i.dataKey,u=i.valueKey,m=Pt(this.props,!1),p=Pt(o,!1),g=Pt(l,!1),x=o&&o.offsetRadius||20,y=r.map(function(v,N){var S=(v.startAngle+v.endAngle)/2,j=Er(v.cx,v.cy,v.outerRadius+x,S),C=Nr(Nr(Nr(Nr({},m),v),{},{stroke:"none"},p),{},{index:N,textAnchor:t.getTextAnchor(j.x,v.cx)},j),_=Nr(Nr(Nr(Nr({},m),v),{},{fill:"none",stroke:v.fill},g),{},{index:N,points:[Er(v.cx,v.cy,v.outerRadius,S),j]}),A=c;return nn(c)&&nn(u)?A="value":nn(c)&&(A=u),W.createElement(mn,{key:"label-".concat(v.startAngle,"-").concat(v.endAngle,"-").concat(v.midAngle,"-").concat(N)},l&&t.renderLabelLineItem(l,_,"line"),t.renderLabelItem(o,C,pr(v,A)))});return W.createElement(mn,{className:"recharts-pie-labels"},y)}},{key:"renderSectorsStatically",value:function(r){var s=this,i=this.props,o=i.activeShape,l=i.blendStroke,c=i.inactiveShape;return r.map(function(u,m){if(u?.startAngle===0&&u?.endAngle===0&&r.length!==1)return null;var p=s.isActiveIndex(m),g=c&&s.hasActiveIndex()?c:null,x=p?o:g,y=Nr(Nr({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return W.createElement(mn,Xp({ref:function(N){N&&!s.sectorRefs.includes(N)&&s.sectorRefs.push(N)},tabIndex:-1,className:"recharts-pie-sector"},Ou(s.props,u,m),{key:"sector-".concat(u?.startAngle,"-").concat(u?.endAngle,"-").concat(u.midAngle,"-").concat(m)}),W.createElement(Uv,Xp({option:x,isActive:p,shapeType:"sector"},y)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,s=this.props,i=s.sectors,o=s.isAnimationActive,l=s.animationBegin,c=s.animationDuration,u=s.animationEasing,m=s.animationId,p=this.state,g=p.prevSectors,x=p.prevIsAnimationActive;return W.createElement(wi,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(m,"-").concat(x),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(y){var v=y.t,N=[],S=i&&i[0],j=S.startAngle;return i.forEach(function(C,_){var A=g&&g[_],T=_>0?Ei(C,"paddingAngle",0):0;if(A){var R=Fr(A.endAngle-A.startAngle,C.endAngle-C.startAngle),M=Nr(Nr({},C),{},{startAngle:j+T,endAngle:j+R(v)+T});N.push(M),j=M.endAngle}else{var P=C.endAngle,$=C.startAngle,w=Fr(0,P-$),U=w(v),X=Nr(Nr({},C),{},{startAngle:j+T,endAngle:j+U+T});N.push(X),j=X.endAngle}}),W.createElement(mn,null,r.renderSectorsStatically(N))})}},{key:"attachKeyboardHandlers",value:function(r){var s=this;r.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var o=++s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[o].focus(),s.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--s.state.sectorToFocus<0?s.sectorRefs.length-1:s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[l].focus(),s.setState({sectorToFocus:l});break}case"Escape":{s.sectorRefs[s.state.sectorToFocus].blur(),s.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,s=r.sectors,i=r.isAnimationActive,o=this.state.prevSectors;return i&&s&&s.length&&(!o||!Ru(o,s))?this.renderSectorsWithAnimation():this.renderSectorsStatically(s)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,s=this.props,i=s.hide,o=s.sectors,l=s.className,c=s.label,u=s.cx,m=s.cy,p=s.innerRadius,g=s.outerRadius,x=s.isAnimationActive,y=this.state.isAnimationFinished;if(i||!o||!o.length||!lt(u)||!lt(m)||!lt(p)||!lt(g))return null;var v=fn("recharts-pie",l);return W.createElement(mn,{tabIndex:this.props.rootTabIndex,className:v,ref:function(S){r.pieRef=S}},this.renderSectors(),c&&this.renderLabels(o),Qa.renderCallByParent(this.props,null,!1),(!x||y)&&ks.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return s.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:s.curSectors,isAnimationFinished:!0}:r.sectors!==s.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,s){return r>s?"start":r<s?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,s,i){if(W.isValidElement(r))return W.cloneElement(r,s);if(Yt(r))return r(s);var o=fn("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return W.createElement(Tu,Xp({},s,{key:i,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(r,s,i){if(W.isValidElement(r))return W.cloneElement(r,s);var o=i;if(Yt(r)&&(o=r(s),W.isValidElement(o)))return o;var l=fn("recharts-pie-label-text",typeof r!="boolean"&&!Yt(r)?r.className:"");return W.createElement(Kf,Xp({},s,{alignmentBaseline:"middle",className:l}),o)}}])})(h.PureComponent);Ry=pc;po(pc,"displayName","Pie");po(pc,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!sl.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});po(pc,"parseDeltaAngle",function(e,t){var n=Js(t-e),r=Math.min(Math.abs(t-e),360);return n*r});po(pc,"getRealPieData",function(e){var t=e.data,n=e.children,r=Pt(e,!1),s=ni(n,xo);return t&&t.length?t.map(function(i,o){return Nr(Nr(Nr({payload:i},r),i),s&&s[o]&&s[o].props)}):s&&s.length?s.map(function(i){return Nr(Nr({},r),i.props)}):[]});po(pc,"parseCoordinateOfPie",function(e,t){var n=t.top,r=t.left,s=t.width,i=t.height,o=hH(s,i),l=r+Zs(e.cx,s,s/2),c=n+Zs(e.cy,i,i/2),u=Zs(e.innerRadius,o,0),m=Zs(e.outerRadius,o,o*.8),p=e.maxRadius||Math.sqrt(s*s+i*i)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:m,maxRadius:p}});po(pc,"getComposedData",function(e){var t=e.item,n=e.offset,r=t.type.defaultProps!==void 0?Nr(Nr({},t.type.defaultProps),t.props):t.props,s=Ry.getRealPieData(r);if(!s||!s.length)return null;var i=r.cornerRadius,o=r.startAngle,l=r.endAngle,c=r.paddingAngle,u=r.dataKey,m=r.nameKey,p=r.valueKey,g=r.tooltipType,x=Math.abs(r.minAngle),y=Ry.parseCoordinateOfPie(r,n),v=Ry.parseDeltaAngle(o,l),N=Math.abs(v),S=u;nn(u)&&nn(p)?(rl(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),S="value"):nn(u)&&(rl(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),S=p);var j=s.filter(function(M){return pr(M,S,0)!==0}).length,C=(N>=360?j:j-1)*c,_=N-j*x-C,A=s.reduce(function(M,P){var $=pr(P,S,0);return M+(lt($)?$:0)},0),T;if(A>0){var R;T=s.map(function(M,P){var $=pr(M,S,0),w=pr(M,m,P),U=(lt($)?$:0)/A,X;P?X=R.endAngle+Js(v)*c*($!==0?1:0):X=o;var I=X+Js(v)*(($!==0?x:0)+U*_),G=(X+I)/2,L=(y.innerRadius+y.outerRadius)/2,H=[{name:w,value:$,payload:M,dataKey:S,type:g}],F=Er(y.cx,y.cy,L,G);return R=Nr(Nr(Nr({percent:U,cornerRadius:i,name:w,tooltipPayload:H,midAngle:G,middleRadius:L,tooltipPosition:F},M),y),{},{value:pr(M,S),startAngle:X,endAngle:I,payload:M,paddingAngle:Js(v)*c}),R})}return Nr(Nr({},y),{},{sectors:T,data:s})});var zw,Y4;function M0e(){if(Y4)return zw;Y4=1;var e=Math.ceil,t=Math.max;function n(r,s,i,o){for(var l=-1,c=t(e((s-r)/(i||1)),0),u=Array(c);c--;)u[o?c:++l]=r,r+=i;return u}return zw=n,zw}var qw,Q4;function MH(){if(Q4)return qw;Q4=1;var e=n9(),t=1/0,n=17976931348623157e292;function r(s){if(!s)return s===0?s:0;if(s=e(s),s===t||s===-t){var i=s<0?-1:1;return i*n}return s===s?s:0}return qw=r,qw}var Vw,X4;function L0e(){if(X4)return Vw;X4=1;var e=M0e(),t=oN(),n=MH();function r(s){return function(i,o,l){return l&&typeof l!="number"&&t(i,o,l)&&(o=l=void 0),i=n(i),o===void 0?(o=i,i=0):o=n(o),l=l===void 0?i<o?1:-1:n(l),e(i,o,l,s)}}return Vw=r,Vw}var Ww,J4;function $0e(){if(J4)return Ww;J4=1;var e=L0e(),t=e();return Ww=t,Ww}var F0e=$0e();const Gv=Jn(F0e);function sx(e){"@babel/helpers - typeof";return sx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sx(e)}function Z4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function e6(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Z4(Object(n),!0).forEach(function(r){LH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function LH(e,t,n){return t=U0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U0e(e){var t=B0e(e,"string");return sx(t)=="symbol"?t:t+""}function B0e(e,t){if(sx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(sx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var G0e=["Webkit","Moz","O","ms"],H0e=function(t,n){var r=t.replace(/(\w)/,function(i){return i.toUpperCase()}),s=G0e.reduce(function(i,o){return e6(e6({},i),{},LH({},o+r,n))},{});return s[t]=n,s};function Gm(e){"@babel/helpers - typeof";return Gm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gm(e)}function Hv(){return Hv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hv.apply(this,arguments)}function t6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Yw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?t6(Object(n),!0).forEach(function(r){Mi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function K0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,FH(r.key),r)}}function z0e(e,t,n){return t&&n6(e.prototype,t),n&&n6(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function q0e(e,t,n){return t=Kv(t),V0e(e,$H()?Reflect.construct(t,n||[],Kv(e).constructor):t.apply(e,n))}function V0e(e,t){if(t&&(Gm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return W0e(e)}function W0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $H(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($H=function(){return!!e})()}function Kv(e){return Kv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Kv(e)}function Y0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kT(e,t)}function kT(e,t){return kT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},kT(e,t)}function Mi(e,t,n){return t=FH(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FH(e){var t=Q0e(e,"string");return Gm(t)=="symbol"?t:t+""}function Q0e(e,t){if(Gm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Gm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var X0e=function(t){var n=t.data,r=t.startIndex,s=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!n||!n.length)return{};var c=n.length,u=hg().domain(Gv(0,c)).range([i,i+o-l]),m=u.domain().map(function(p){return u(p)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(s),scale:u,scaleValues:m}},r6=function(t){return t.changedTouches&&!!t.changedTouches.length},Hm=(function(e){function t(n){var r;return K0e(this,t),r=q0e(this,t,[n]),Mi(r,"handleDrag",function(s){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(s):r.state.isSlideMoving&&r.handleSlideDrag(s)}),Mi(r,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&r.handleDrag(s.changedTouches[0])}),Mi(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=r.props,i=s.endIndex,o=s.onDragEnd,l=s.startIndex;o?.({endIndex:i,startIndex:l})}),r.detachDragEndListener()}),Mi(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Mi(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Mi(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Mi(r,"handleSlideDragStart",function(s){var i=r6(s)?s.changedTouches[0]:s;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return Y0e(t,e),z0e(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var s=r.startX,i=r.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,m=u.length-1,p=Math.min(s,i),g=Math.max(s,i),x=t.getIndexInRange(o,p),y=t.getIndexInRange(o,g);return{startIndex:x-x%c,endIndex:y===m?m:y-y%c}}},{key:"getTextOfTick",value:function(r){var s=this.props,i=s.data,o=s.tickFormatter,l=s.dataKey,c=pr(i[r],l,r);return Yt(o)?o(c,r):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var s=this.state,i=s.slideMoveStartX,o=s.startX,l=s.endX,c=this.props,u=c.x,m=c.width,p=c.travellerWidth,g=c.startIndex,x=c.endIndex,y=c.onChange,v=r.pageX-i;v>0?v=Math.min(v,u+m-p-l,u+m-p-o):v<0&&(v=Math.max(v,u-o,u-l));var N=this.getIndex({startX:o+v,endX:l+v});(N.startIndex!==g||N.endIndex!==x)&&y&&y(N),this.setState({startX:o+v,endX:l+v,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,s){var i=r6(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var s=this.state,i=s.brushMoveStartX,o=s.movingTravellerId,l=s.endX,c=s.startX,u=this.state[o],m=this.props,p=m.x,g=m.width,x=m.travellerWidth,y=m.onChange,v=m.gap,N=m.data,S={startX:this.state.startX,endX:this.state.endX},j=r.pageX-i;j>0?j=Math.min(j,p+g-x-u):j<0&&(j=Math.max(j,p-u)),S[o]=u+j;var C=this.getIndex(S),_=C.startIndex,A=C.endIndex,T=function(){var M=N.length-1;return o==="startX"&&(l>c?_%v===0:A%v===0)||l<c&&A===M||o==="endX"&&(l>c?A%v===0:_%v===0)||l>c&&A===M};this.setState(Mi(Mi({},o,u+j),"brushMoveStartX",r.pageX),function(){y&&T()&&y(C)})}},{key:"handleTravellerMoveKeyboard",value:function(r,s){var i=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,m=this.state[s],p=l.indexOf(m);if(p!==-1){var g=p+r;if(!(g===-1||g>=l.length)){var x=l[g];s==="startX"&&x>=u||s==="endX"&&x<=c||this.setState(Mi({},s,x),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,s=r.x,i=r.y,o=r.width,l=r.height,c=r.fill,u=r.stroke;return W.createElement("rect",{stroke:u,fill:c,x:s,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var r=this.props,s=r.x,i=r.y,o=r.width,l=r.height,c=r.data,u=r.children,m=r.padding,p=h.Children.only(u);return p?W.cloneElement(p,{x:s,y:i,width:o,height:l,margin:m,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(r,s){var i,o,l=this,c=this.props,u=c.y,m=c.travellerWidth,p=c.height,g=c.traveller,x=c.ariaLabel,y=c.data,v=c.startIndex,N=c.endIndex,S=Math.max(r,this.props.x),j=Yw(Yw({},Pt(this.props,!1)),{},{x:S,y:u,width:m,height:p}),C=x||"Min value: ".concat((i=y[v])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=y[N])===null||o===void 0?void 0:o.name);return W.createElement(mn,{tabIndex:0,role:"slider","aria-label":C,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(A){["ArrowLeft","ArrowRight"].includes(A.key)&&(A.preventDefault(),A.stopPropagation(),l.handleTravellerMoveKeyboard(A.key==="ArrowRight"?1:-1,s))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(g,j))}},{key:"renderSlide",value:function(r,s){var i=this.props,o=i.y,l=i.height,c=i.stroke,u=i.travellerWidth,m=Math.min(r,s)+u,p=Math.max(Math.abs(s-r)-u,0);return W.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:m,y:o,width:p,height:l})}},{key:"renderText",value:function(){var r=this.props,s=r.startIndex,i=r.endIndex,o=r.y,l=r.height,c=r.travellerWidth,u=r.stroke,m=this.state,p=m.startX,g=m.endX,x=5,y={pointerEvents:"none",fill:u};return W.createElement(mn,{className:"recharts-brush-texts"},W.createElement(Kf,Hv({textAnchor:"end",verticalAnchor:"middle",x:Math.min(p,g)-x,y:o+l/2},y),this.getTextOfTick(s)),W.createElement(Kf,Hv({textAnchor:"start",verticalAnchor:"middle",x:Math.max(p,g)+c+x,y:o+l/2},y),this.getTextOfTick(i)))}},{key:"render",value:function(){var r=this.props,s=r.data,i=r.className,o=r.children,l=r.x,c=r.y,u=r.width,m=r.height,p=r.alwaysShowText,g=this.state,x=g.startX,y=g.endX,v=g.isTextActive,N=g.isSlideMoving,S=g.isTravellerMoving,j=g.isTravellerFocused;if(!s||!s.length||!lt(l)||!lt(c)||!lt(u)||!lt(m)||u<=0||m<=0)return null;var C=fn("recharts-brush",i),_=W.Children.count(o)===1,A=H0e("userSelect","none");return W.createElement(mn,{className:C,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:A},this.renderBackground(),_&&this.renderPanorama(),this.renderSlide(x,y),this.renderTravellerLayer(x,"startX"),this.renderTravellerLayer(y,"endX"),(v||N||S||j||p)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var s=r.x,i=r.y,o=r.width,l=r.height,c=r.stroke,u=Math.floor(i+l/2)-1;return W.createElement(W.Fragment,null,W.createElement("rect",{x:s,y:i,width:o,height:l,fill:c,stroke:"none"}),W.createElement("line",{x1:s+1,y1:u,x2:s+o-1,y2:u,fill:"none",stroke:"#fff"}),W.createElement("line",{x1:s+1,y1:u+2,x2:s+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,s){var i;return W.isValidElement(r)?i=W.cloneElement(r,s):Yt(r)?i=r(s):i=t.renderDefaultTraveller(s),i}},{key:"getDerivedStateFromProps",value:function(r,s){var i=r.data,o=r.width,l=r.x,c=r.travellerWidth,u=r.updateId,m=r.startIndex,p=r.endIndex;if(i!==s.prevData||u!==s.prevUpdateId)return Yw({prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},i&&i.length?X0e({data:i,width:o,x:l,travellerWidth:c,startIndex:m,endIndex:p}):{scale:null,scaleValues:null});if(s.scale&&(o!==s.prevWidth||l!==s.prevX||c!==s.prevTravellerWidth)){s.scale.range([l,l+o-c]);var g=s.scale.domain().map(function(x){return s.scale(x)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:s.scale(r.startIndex),endX:s.scale(r.endIndex),scaleValues:g}}return null}},{key:"getIndexInRange",value:function(r,s){for(var i=r.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);r[c]>s?l=c:o=c}return s>=r[l]?l:o}}])})(h.PureComponent);Mi(Hm,"displayName","Brush");Mi(Hm,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Qw,a6;function J0e(){if(a6)return Qw;a6=1;var e=ZR();function t(n,r){var s;return e(n,function(i,o,l){return s=r(i,o,l),!s}),!!s}return Qw=t,Qw}var Xw,s6;function Z0e(){if(s6)return Xw;s6=1;var e=OG(),t=fc(),n=J0e(),r=ri(),s=oN();function i(o,l,c){var u=r(o)?e:n;return c&&s(o,l,c)&&(l=void 0),u(o,t(l,3))}return Xw=i,Xw}var ege=Z0e();const tge=Jn(ege);var ac=function(t,n){var r=t.alwaysShow,s=t.ifOverflow;return r&&(s="extendDomain"),s===n},Jw,i6;function Ok(){if(i6)return Jw;i6=1;var e=QG();function t(n,r,s){r=="__proto__"&&e?e(n,r,{configurable:!0,enumerable:!0,value:s,writable:!0}):n[r]=s}return Jw=t,Jw}var Zw,o6;function nge(){if(o6)return Zw;o6=1;var e=Ok(),t=VG(),n=fc();function r(s,i){var o={};return i=n(i,3),t(s,function(l,c,u){e(o,c,i(l,c,u))}),o}return Zw=r,Zw}var rge=nge();const age=Jn(rge);var eA,l6;function sge(){if(l6)return eA;l6=1;function e(t,n){for(var r=-1,s=t==null?0:t.length;++r<s;)if(!n(t[r],r,t))return!1;return!0}return eA=e,eA}var tA,c6;function ige(){if(c6)return tA;c6=1;var e=ZR();function t(n,r){var s=!0;return e(n,function(i,o,l){return s=!!r(i,o,l),s}),s}return tA=t,tA}var nA,d6;function oge(){if(d6)return nA;d6=1;var e=sge(),t=ige(),n=fc(),r=ri(),s=oN();function i(o,l,c){var u=r(o)?e:t;return c&&s(o,l,c)&&(l=void 0),u(o,n(l,3))}return nA=i,nA}var lge=oge();const UH=Jn(lge);var cge=["x","y"];function ix(e){"@babel/helpers - typeof";return ix=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ix(e)}function IT(){return IT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},IT.apply(this,arguments)}function u6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function R0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?u6(Object(n),!0).forEach(function(r){dge(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function dge(e,t,n){return t=uge(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uge(e){var t=fge(e,"string");return ix(t)=="symbol"?t:t+""}function fge(e,t){if(ix(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(ix(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pge(e,t){if(e==null)return{};var n=mge(e,t),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function mge(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function hge(e,t){var n=e.x,r=e.y,s=pge(e,cge),i="".concat(n),o=parseInt(i,10),l="".concat(r),c=parseInt(l,10),u="".concat(t.height||s.height),m=parseInt(u,10),p="".concat(t.width||s.width),g=parseInt(p,10);return R0(R0(R0(R0(R0({},t),s),o?{x:o}:{}),c?{y:c}:{}),{},{height:m,width:g,name:t.name,radius:t.radius})}function f6(e){return W.createElement(Uv,IT({shapeType:"rectangle",propTransformer:hge,activeClassName:"recharts-active-bar"},e))}var gge=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,s){if(typeof t=="number")return t;var i=lt(r)||Ure(r);return i?t(r,s):(i||Vf(),n)}},xge=["value","background"],BH;function Km(e){"@babel/helpers - typeof";return Km=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Km(e)}function bge(e,t){if(e==null)return{};var n=yge(e,t),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function yge(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function zv(){return zv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zv.apply(this,arguments)}function p6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function ga(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?p6(Object(n),!0).forEach(function(r){vu(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function vge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,HH(r.key),r)}}function Nge(e,t,n){return t&&m6(e.prototype,t),n&&m6(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Sge(e,t,n){return t=qv(t),Ege(e,GH()?Reflect.construct(t,n||[],qv(e).constructor):t.apply(e,n))}function Ege(e,t){if(t&&(Km(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jge(e)}function jge(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GH=function(){return!!e})()}function qv(e){return qv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},qv(e)}function wge(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&DT(e,t)}function DT(e,t){return DT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},DT(e,t)}function vu(e,t,n){return t=HH(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HH(e){var t=Age(e,"string");return Km(t)=="symbol"?t:t+""}function Age(e,t){if(Km(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Km(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var us=(function(e){function t(){var n;vge(this,t);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return n=Sge(this,t,[].concat(s)),vu(n,"state",{isAnimationFinished:!1}),vu(n,"id",bd("recharts-bar-")),vu(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),vu(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return wge(t,e),Nge(t,[{key:"renderRectanglesStatically",value:function(r){var s=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,u=i.activeBar,m=Pt(this.props,!1);return r&&r.map(function(p,g){var x=g===c,y=x?u:o,v=ga(ga(ga({},m),p),{},{isActive:x,option:y,index:g,dataKey:l,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return W.createElement(mn,zv({className:"recharts-bar-rectangle"},Ou(s.props,p,g),{key:"rectangle-".concat(p?.x,"-").concat(p?.y,"-").concat(p?.value,"-").concat(g)}),W.createElement(f6,v))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,s=this.props,i=s.data,o=s.layout,l=s.isAnimationActive,c=s.animationBegin,u=s.animationDuration,m=s.animationEasing,p=s.animationId,g=this.state.prevData;return W.createElement(wi,{begin:c,duration:u,isActive:l,easing:m,from:{t:0},to:{t:1},key:"bar-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var y=x.t,v=i.map(function(N,S){var j=g&&g[S];if(j){var C=Fr(j.x,N.x),_=Fr(j.y,N.y),A=Fr(j.width,N.width),T=Fr(j.height,N.height);return ga(ga({},N),{},{x:C(y),y:_(y),width:A(y),height:T(y)})}if(o==="horizontal"){var R=Fr(0,N.height),M=R(y);return ga(ga({},N),{},{y:N.y+N.height-M,height:M})}var P=Fr(0,N.width),$=P(y);return ga(ga({},N),{},{width:$})});return W.createElement(mn,null,r.renderRectanglesStatically(v))})}},{key:"renderRectangles",value:function(){var r=this.props,s=r.data,i=r.isAnimationActive,o=this.state.prevData;return i&&s&&s.length&&(!o||!Ru(o,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var r=this,s=this.props,i=s.data,o=s.dataKey,l=s.activeIndex,c=Pt(this.props.background,!1);return i.map(function(u,m){u.value;var p=u.background,g=bge(u,xge);if(!p)return null;var x=ga(ga(ga(ga(ga({},g),{},{fill:"#eee"},p),c),Ou(r.props,u,m)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:o,index:m,className:"recharts-bar-background-rectangle"});return W.createElement(f6,zv({key:"background-bar-".concat(m),option:r.props.background,isActive:m===l},x))})}},{key:"renderErrorBar",value:function(r,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,u=i.layout,m=i.children,p=ni(m,Oh);if(!p)return null;var g=u==="vertical"?o[0].height/2:o[0].width/2,x=function(N,S){var j=Array.isArray(N.value)?N.value[1]:N.value;return{x:N.x,y:N.y,value:j,errorVal:pr(N,S)}},y={clipPath:r?"url(#clipPath-".concat(s,")"):null};return W.createElement(mn,y,p.map(function(v){return W.cloneElement(v,{key:"error-bar-".concat(s,"-").concat(v.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:g,dataPointFormatter:x})}))}},{key:"render",value:function(){var r=this.props,s=r.hide,i=r.data,o=r.className,l=r.xAxis,c=r.yAxis,u=r.left,m=r.top,p=r.width,g=r.height,x=r.isAnimationActive,y=r.background,v=r.id;if(s||!i||!i.length)return null;var N=this.state.isAnimationFinished,S=fn("recharts-bar",o),j=l&&l.allowDataOverflow,C=c&&c.allowDataOverflow,_=j||C,A=nn(v)?this.id:v;return W.createElement(mn,{className:S},j||C?W.createElement("defs",null,W.createElement("clipPath",{id:"clipPath-".concat(A)},W.createElement("rect",{x:j?u:u-p/2,y:C?m:m-g/2,width:j?p:p*2,height:C?g:g*2}))):null,W.createElement(mn,{className:"recharts-bar-rectangles",clipPath:_?"url(#clipPath-".concat(A,")"):null},y?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(_,A),(!x||N)&&ks.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:s.curData}:r.data!==s.curData?{curData:r.data}:null}}])})(h.PureComponent);BH=us;vu(us,"displayName","Bar");vu(us,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!sl.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});vu(us,"getComposedData",function(e){var t=e.props,n=e.item,r=e.barPosition,s=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,m=e.dataStartIndex,p=e.displayedData,g=e.offset,x=nfe(r,n);if(!x)return null;var y=t.layout,v=n.type.defaultProps,N=v!==void 0?ga(ga({},v),n.props):n.props,S=N.dataKey,j=N.children,C=N.minPointSize,_=y==="horizontal"?o:i,A=u?_.scale.domain():null,T=cfe({numericAxis:_}),R=ni(j,xo),M=p.map(function(P,$){var w,U,X,I,G,L;u?w=rfe(u[m+$],A):(w=pr(P,S),Array.isArray(w)||(w=[T,w]));var H=gge(C,BH.defaultProps.minPointSize)(w[1],$);if(y==="horizontal"){var F,K=[o.scale(w[0]),o.scale(w[1])],ne=K[0],V=K[1];U=G$({axis:i,ticks:l,bandSize:s,offset:x.offset,entry:P,index:$}),X=(F=V??ne)!==null&&F!==void 0?F:void 0,I=x.size;var ee=ne-V;if(G=Number.isNaN(ee)?0:ee,L={x:U,y:o.y,width:I,height:o.height},Math.abs(H)>0&&Math.abs(G)<Math.abs(H)){var ae=Js(G||H)*(Math.abs(H)-Math.abs(G));X-=ae,G+=ae}}else{var ue=[i.scale(w[0]),i.scale(w[1])],ce=ue[0],Z=ue[1];if(U=ce,X=G$({axis:o,ticks:c,bandSize:s,offset:x.offset,entry:P,index:$}),I=Z-ce,G=x.size,L={x:i.x,y:X,width:i.width,height:G},Math.abs(H)>0&&Math.abs(I)<Math.abs(H)){var ie=Js(I||H)*(Math.abs(H)-Math.abs(I));I+=ie}}return ga(ga(ga({},P),{},{x:U,y:X,width:I,height:G,value:u?w:w[1],payload:P,background:L},R&&R[$]&&R[$].props),{},{tooltipPayload:[pH(n,P)],tooltipPosition:{x:U+I/2,y:X+G/2}})});return ga({data:M,layout:y},g)});function ox(e){"@babel/helpers - typeof";return ox=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ox(e)}function _ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,KH(r.key),r)}}function Cge(e,t,n){return t&&h6(e.prototype,t),n&&h6(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function g6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Vo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?g6(Object(n),!0).forEach(function(r){wN(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function wN(e,t,n){return t=KH(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KH(e){var t=Tge(e,"string");return ox(t)=="symbol"?t:t+""}function Tge(e,t){if(ox(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(ox(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var AN=function(t,n,r,s,i){var o=t.width,l=t.height,c=t.layout,u=t.children,m=Object.keys(n),p={left:r.left,leftMirror:r.left,right:o-r.right,rightMirror:o-r.right,top:r.top,topMirror:r.top,bottom:l-r.bottom,bottomMirror:l-r.bottom},g=!!Ts(u,us);return m.reduce(function(x,y){var v=n[y],N=v.orientation,S=v.domain,j=v.padding,C=j===void 0?{}:j,_=v.mirror,A=v.reversed,T="".concat(N).concat(_?"Mirror":""),R,M,P,$,w;if(v.type==="number"&&(v.padding==="gap"||v.padding==="no-gap")){var U=S[1]-S[0],X=1/0,I=v.categoricalDomain.sort(Kre);if(I.forEach(function(ue,ce){ce>0&&(X=Math.min((ue||0)-(I[ce-1]||0),X))}),Number.isFinite(X)){var G=X/U,L=v.layout==="vertical"?r.height:r.width;if(v.padding==="gap"&&(R=G*L/2),v.padding==="no-gap"){var H=Zs(t.barCategoryGap,G*L),F=G*L/2;R=F-H-(F-H)/L*H}}}s==="xAxis"?M=[r.left+(C.left||0)+(R||0),r.left+r.width-(C.right||0)-(R||0)]:s==="yAxis"?M=c==="horizontal"?[r.top+r.height-(C.bottom||0),r.top+(C.top||0)]:[r.top+(C.top||0)+(R||0),r.top+r.height-(C.bottom||0)-(R||0)]:M=v.range,A&&(M=[M[1],M[0]]);var K=cH(v,i,g),ne=K.scale,V=K.realScaleType;ne.domain(S).range(M),dH(ne);var ee=uH(ne,Vo(Vo({},v),{},{realScaleType:V}));s==="xAxis"?(w=N==="top"&&!_||N==="bottom"&&_,P=r.left,$=p[T]-w*v.height):s==="yAxis"&&(w=N==="left"&&!_||N==="right"&&_,P=p[T]-w*v.width,$=r.top);var ae=Vo(Vo(Vo({},v),ee),{},{realScaleType:V,x:P,y:$,scale:ne,width:s==="xAxis"?r.width:v.width,height:s==="yAxis"?r.height:v.height});return ae.bandSize=Cv(ae,ee),!v.hide&&s==="xAxis"?p[T]+=(w?-1:1)*ae.height:v.hide||(p[T]+=(w?-1:1)*ae.width),Vo(Vo({},x),{},wN({},y,ae))},{})},zH=function(t,n){var r=t.x,s=t.y,i=n.x,o=n.y;return{x:Math.min(r,i),y:Math.min(s,o),width:Math.abs(i-r),height:Math.abs(o-s)}},Oge=function(t){var n=t.x1,r=t.y1,s=t.x2,i=t.y2;return zH({x:n,y:r},{x:s,y:i})},qH=(function(){function e(t){_ge(this,e),this.scale=t}return Cge(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.bandAware,i=r.position;if(n!==void 0){if(i)switch(i){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(s){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),s=r[0],i=r[r.length-1];return s<=i?n>=s&&n<=i:n>=i&&n<=s}}],[{key:"create",value:function(n){return new e(n)}}])})();wN(qH,"EPS",1e-4);var Rk=function(t){var n=Object.keys(t).reduce(function(r,s){return Vo(Vo({},r),{},wN({},s,qH.create(t[s])))},{});return Vo(Vo({},n),{},{apply:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return age(s,function(c,u){return n[u].apply(c,{bandAware:o,position:l})})},isInRange:function(s){return UH(s,function(i,o){return n[o].isInRange(i)})}})};function Rge(e){return(e%180+180)%180}var kge=function(t){var n=t.width,r=t.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=Rge(s),o=i*Math.PI/180,l=Math.atan(r/n),c=o>l&&o<Math.PI-l?r/Math.sin(o):n/Math.cos(o);return Math.abs(c)},rA,x6;function Ige(){if(x6)return rA;x6=1;var e=fc(),t=jh(),n=wh();function r(s){return function(i,o,l){var c=Object(i);if(!t(i)){var u=e(o,3);i=n(i),o=function(p){return u(c[p],p,c)}}var m=s(i,o,l);return m>-1?c[u?i[m]:m]:void 0}}return rA=r,rA}var aA,b6;function Dge(){if(b6)return aA;b6=1;var e=MH();function t(n){var r=e(n),s=r%1;return r===r?s?r-s:r:0}return aA=t,aA}var sA,y6;function Pge(){if(y6)return sA;y6=1;var e=HG(),t=fc(),n=Dge(),r=Math.max;function s(i,o,l){var c=i==null?0:i.length;if(!c)return-1;var u=l==null?0:n(l);return u<0&&(u=r(c+u,0)),e(i,t(o,3),u)}return sA=s,sA}var iA,v6;function Mge(){if(v6)return iA;v6=1;var e=Ige(),t=Pge(),n=e(t);return iA=n,iA}var Lge=Mge();const $ge=Jn(Lge);var Fge=nG();const Uge=Jn(Fge);var Bge=Uge(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),kk=h.createContext(void 0),Ik=h.createContext(void 0),VH=h.createContext(void 0),WH=h.createContext({}),YH=h.createContext(void 0),QH=h.createContext(0),XH=h.createContext(0),N6=function(t){var n=t.state,r=n.xAxisMap,s=n.yAxisMap,i=n.offset,o=t.clipPathId,l=t.children,c=t.width,u=t.height,m=Bge(i);return W.createElement(kk.Provider,{value:r},W.createElement(Ik.Provider,{value:s},W.createElement(WH.Provider,{value:i},W.createElement(VH.Provider,{value:m},W.createElement(YH.Provider,{value:o},W.createElement(QH.Provider,{value:u},W.createElement(XH.Provider,{value:c},l)))))))},Gge=function(){return h.useContext(YH)},JH=function(t){var n=h.useContext(kk);n==null&&Vf();var r=n[t];return r==null&&Vf(),r},Hge=function(){var t=h.useContext(kk);return bu(t)},Kge=function(){var t=h.useContext(Ik),n=$ge(t,function(r){return UH(r.domain,Number.isFinite)});return n||bu(t)},ZH=function(t){var n=h.useContext(Ik);n==null&&Vf();var r=n[t];return r==null&&Vf(),r},zge=function(){var t=h.useContext(VH);return t},qge=function(){return h.useContext(WH)},Dk=function(){return h.useContext(XH)},Pk=function(){return h.useContext(QH)};function zm(e){"@babel/helpers - typeof";return zm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zm(e)}function Vge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tK(r.key),r)}}function Yge(e,t,n){return t&&Wge(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Qge(e,t,n){return t=Vv(t),Xge(e,eK()?Reflect.construct(t,n||[],Vv(e).constructor):t.apply(e,n))}function Xge(e,t){if(t&&(zm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jge(e)}function Jge(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eK=function(){return!!e})()}function Vv(e){return Vv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Vv(e)}function Zge(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&PT(e,t)}function PT(e,t){return PT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},PT(e,t)}function S6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function E6(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?S6(Object(n),!0).forEach(function(r){Mk(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Mk(e,t,n){return t=tK(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tK(e){var t=exe(e,"string");return zm(t)=="symbol"?t:t+""}function exe(e,t){if(zm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(zm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function txe(e,t){return sxe(e)||axe(e,t)||rxe(e,t)||nxe()}function nxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rxe(e,t){if(e){if(typeof e=="string")return j6(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j6(e,t)}}function j6(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function axe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(m){u=!0,s=m}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function sxe(e){if(Array.isArray(e))return e}function MT(){return MT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},MT.apply(this,arguments)}var ixe=function(t,n){var r;return W.isValidElement(t)?r=W.cloneElement(t,n):Yt(t)?r=t(n):r=W.createElement("line",MT({},n,{className:"recharts-reference-line-line"})),r},oxe=function(t,n,r,s,i,o,l,c,u){var m=i.x,p=i.y,g=i.width,x=i.height;if(r){var y=u.y,v=t.y.apply(y,{position:o});if(ac(u,"discard")&&!t.y.isInRange(v))return null;var N=[{x:m+g,y:v},{x:m,y:v}];return c==="left"?N.reverse():N}if(n){var S=u.x,j=t.x.apply(S,{position:o});if(ac(u,"discard")&&!t.x.isInRange(j))return null;var C=[{x:j,y:p+x},{x:j,y:p}];return l==="top"?C.reverse():C}if(s){var _=u.segment,A=_.map(function(T){return t.apply(T,{position:o})});return ac(u,"discard")&&tge(A,function(T){return!t.isInRange(T)})?null:A}return null};function lxe(e){var t=e.x,n=e.y,r=e.segment,s=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,u=Gge(),m=JH(s),p=ZH(i),g=zge();if(!u||!g)return null;rl(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var x=Rk({x:m.scale,y:p.scale}),y=$a(t),v=$a(n),N=r&&r.length===2,S=oxe(x,y,v,N,g,e.position,m.orientation,p.orientation,e);if(!S)return null;var j=txe(S,2),C=j[0],_=C.x,A=C.y,T=j[1],R=T.x,M=T.y,P=ac(e,"hidden")?"url(#".concat(u,")"):void 0,$=E6(E6({clipPath:P},Pt(e,!0)),{},{x1:_,y1:A,x2:R,y2:M});return W.createElement(mn,{className:fn("recharts-reference-line",l)},ixe(o,$),Qa.renderCallByParent(e,Oge({x1:_,y1:A,x2:R,y2:M})))}var sc=(function(e){function t(){return Vge(this,t),Qge(this,t,arguments)}return Zge(t,e),Yge(t,[{key:"render",value:function(){return W.createElement(lxe,this.props)}}])})(W.Component);Mk(sc,"displayName","ReferenceLine");Mk(sc,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function LT(){return LT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},LT.apply(this,arguments)}function qm(e){"@babel/helpers - typeof";return qm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qm(e)}function w6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function A6(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?w6(Object(n),!0).forEach(function(r){_N(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function cxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dxe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,rK(r.key),r)}}function uxe(e,t,n){return t&&dxe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function fxe(e,t,n){return t=Wv(t),pxe(e,nK()?Reflect.construct(t,n||[],Wv(e).constructor):t.apply(e,n))}function pxe(e,t){if(t&&(qm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mxe(e)}function mxe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nK=function(){return!!e})()}function Wv(e){return Wv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Wv(e)}function hxe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$T(e,t)}function $T(e,t){return $T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},$T(e,t)}function _N(e,t,n){return t=rK(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rK(e){var t=gxe(e,"string");return qm(t)=="symbol"?t:t+""}function gxe(e,t){if(qm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(qm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var xxe=function(t){var n=t.x,r=t.y,s=t.xAxis,i=t.yAxis,o=Rk({x:s.scale,y:i.scale}),l=o.apply({x:n,y:r},{bandAware:!0});return ac(t,"discard")&&!o.isInRange(l)?null:l},kx=(function(e){function t(){return cxe(this,t),fxe(this,t,arguments)}return hxe(t,e),uxe(t,[{key:"render",value:function(){var r=this.props,s=r.x,i=r.y,o=r.r,l=r.alwaysShow,c=r.clipPathId,u=$a(s),m=$a(i);if(rl(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!m)return null;var p=xxe(this.props);if(!p)return null;var g=p.x,x=p.y,y=this.props,v=y.shape,N=y.className,S=ac(this.props,"hidden")?"url(#".concat(c,")"):void 0,j=A6(A6({clipPath:S},Pt(this.props,!0)),{},{cx:g,cy:x});return W.createElement(mn,{className:fn("recharts-reference-dot",N)},t.renderDot(v,j),Qa.renderCallByParent(this.props,{x:g-o,y:x-o,width:2*o,height:2*o}))}}])})(W.Component);_N(kx,"displayName","ReferenceDot");_N(kx,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});_N(kx,"renderDot",function(e,t){var n;return W.isValidElement(e)?n=W.cloneElement(e,t):Yt(e)?n=e(t):n=W.createElement(Rx,LT({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function FT(){return FT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},FT.apply(this,arguments)}function Vm(e){"@babel/helpers - typeof";return Vm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vm(e)}function _6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function C6(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_6(Object(n),!0).forEach(function(r){CN(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yxe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,sK(r.key),r)}}function vxe(e,t,n){return t&&yxe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Nxe(e,t,n){return t=Yv(t),Sxe(e,aK()?Reflect.construct(t,n||[],Yv(e).constructor):t.apply(e,n))}function Sxe(e,t){if(t&&(Vm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Exe(e)}function Exe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aK=function(){return!!e})()}function Yv(e){return Yv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Yv(e)}function jxe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&UT(e,t)}function UT(e,t){return UT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},UT(e,t)}function CN(e,t,n){return t=sK(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sK(e){var t=wxe(e,"string");return Vm(t)=="symbol"?t:t+""}function wxe(e,t){if(Vm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Vm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Axe=function(t,n,r,s,i){var o=i.x1,l=i.x2,c=i.y1,u=i.y2,m=i.xAxis,p=i.yAxis;if(!m||!p)return null;var g=Rk({x:m.scale,y:p.scale}),x={x:t?g.x.apply(o,{position:"start"}):g.x.rangeMin,y:r?g.y.apply(c,{position:"start"}):g.y.rangeMin},y={x:n?g.x.apply(l,{position:"end"}):g.x.rangeMax,y:s?g.y.apply(u,{position:"end"}):g.y.rangeMax};return ac(i,"discard")&&(!g.isInRange(x)||!g.isInRange(y))?null:zH(x,y)},TN=(function(e){function t(){return bxe(this,t),Nxe(this,t,arguments)}return jxe(t,e),vxe(t,[{key:"render",value:function(){var r=this.props,s=r.x1,i=r.x2,o=r.y1,l=r.y2,c=r.className,u=r.alwaysShow,m=r.clipPathId;rl(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=$a(s),g=$a(i),x=$a(o),y=$a(l),v=this.props.shape;if(!p&&!g&&!x&&!y&&!v)return null;var N=Axe(p,g,x,y,this.props);if(!N&&!v)return null;var S=ac(this.props,"hidden")?"url(#".concat(m,")"):void 0;return W.createElement(mn,{className:fn("recharts-reference-area",c)},t.renderRect(v,C6(C6({clipPath:S},Pt(this.props,!0)),N)),Qa.renderCallByParent(this.props,N))}}])})(W.Component);CN(TN,"displayName","ReferenceArea");CN(TN,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});CN(TN,"renderRect",function(e,t){var n;return W.isValidElement(e)?n=W.cloneElement(e,t):Yt(e)?n=e(t):n=W.createElement(bN,FT({},t,{className:"recharts-reference-area-rect"})),n});function iK(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],s=0;s<e.length;s+=t)r.push(e[s]);return r}function _xe(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return kge(r,n)}function Cxe(e,t,n){var r=n==="width",s=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:r?s:i,end:r?s+o:i+l}:{start:r?s+o:i+l,end:r?s:i}}function Qv(e,t,n,r,s){if(e*t<e*r||e*t>e*s)return!1;var i=n();return e*(t-e*i/2-r)>=0&&e*(t+e*i/2-s)<=0}function Txe(e,t){return iK(e,t+1)}function Oxe(e,t,n,r,s){for(var i=(r||[]).slice(),o=t.start,l=t.end,c=0,u=1,m=o,p=function(){var y=r?.[c];if(y===void 0)return{v:iK(r,u)};var v=c,N,S=function(){return N===void 0&&(N=n(y,v)),N},j=y.coordinate,C=c===0||Qv(e,j,S,m,l);C||(c=0,m=o,u+=1),C&&(m=j+e*(S()/2+s),c+=u)},g;u<=i.length;)if(g=p(),g)return g.v;return[]}function lx(e){"@babel/helpers - typeof";return lx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lx(e)}function T6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function _s(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?T6(Object(n),!0).forEach(function(r){Rxe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Rxe(e,t,n){return t=kxe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kxe(e){var t=Ixe(e,"string");return lx(t)=="symbol"?t:t+""}function Ixe(e,t){if(lx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(lx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Dxe(e,t,n,r,s){for(var i=(r||[]).slice(),o=i.length,l=t.start,c=t.end,u=function(g){var x=i[g],y,v=function(){return y===void 0&&(y=n(x,g)),y};if(g===o-1){var N=e*(x.coordinate+e*v()/2-c);i[g]=x=_s(_s({},x),{},{tickCoord:N>0?x.coordinate-N*e:x.coordinate})}else i[g]=x=_s(_s({},x),{},{tickCoord:x.coordinate});var S=Qv(e,x.tickCoord,v,l,c);S&&(c=x.tickCoord-e*(v()/2+s),i[g]=_s(_s({},x),{},{isShow:!0}))},m=o-1;m>=0;m--)u(m);return i}function Pxe(e,t,n,r,s,i){var o=(r||[]).slice(),l=o.length,c=t.start,u=t.end;if(i){var m=r[l-1],p=n(m,l-1),g=e*(m.coordinate+e*p/2-u);o[l-1]=m=_s(_s({},m),{},{tickCoord:g>0?m.coordinate-g*e:m.coordinate});var x=Qv(e,m.tickCoord,function(){return p},c,u);x&&(u=m.tickCoord-e*(p/2+s),o[l-1]=_s(_s({},m),{},{isShow:!0}))}for(var y=i?l-1:l,v=function(j){var C=o[j],_,A=function(){return _===void 0&&(_=n(C,j)),_};if(j===0){var T=e*(C.coordinate-e*A()/2-c);o[j]=C=_s(_s({},C),{},{tickCoord:T<0?C.coordinate-T*e:C.coordinate})}else o[j]=C=_s(_s({},C),{},{tickCoord:C.coordinate});var R=Qv(e,C.tickCoord,A,c,u);R&&(c=C.tickCoord+e*(A()/2+s),o[j]=_s(_s({},C),{},{isShow:!0}))},N=0;N<y;N++)v(N);return o}function Lk(e,t,n){var r=e.tick,s=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,u=e.tickFormatter,m=e.unit,p=e.angle;if(!s||!s.length||!r)return[];if(lt(c)||sl.isSsr)return Txe(s,typeof c=="number"&&lt(c)?c:0);var g=[],x=l==="top"||l==="bottom"?"width":"height",y=m&&x==="width"?um(m,{fontSize:t,letterSpacing:n}):{width:0,height:0},v=function(C,_){var A=Yt(u)?u(C.value,_):C.value;return x==="width"?_xe(um(A,{fontSize:t,letterSpacing:n}),y,p):um(A,{fontSize:t,letterSpacing:n})[x]},N=s.length>=2?Js(s[1].coordinate-s[0].coordinate):1,S=Cxe(i,N,x);return c==="equidistantPreserveStart"?Oxe(N,S,v,s,o):(c==="preserveStart"||c==="preserveStartEnd"?g=Pxe(N,S,v,s,o,c==="preserveStartEnd"):g=Dxe(N,S,v,s,o),g.filter(function(j){return j.isShow}))}var Mxe=["viewBox"],Lxe=["viewBox"],$xe=["ticks"];function Wm(e){"@babel/helpers - typeof";return Wm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wm(e)}function Jp(){return Jp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jp.apply(this,arguments)}function O6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Oa(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?O6(Object(n),!0).forEach(function(r){$k(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function oA(e,t){if(e==null)return{};var n=Fxe(e,t),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Fxe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Uxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,lK(r.key),r)}}function Bxe(e,t,n){return t&&R6(e.prototype,t),n&&R6(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Gxe(e,t,n){return t=Xv(t),Hxe(e,oK()?Reflect.construct(t,n||[],Xv(e).constructor):t.apply(e,n))}function Hxe(e,t){if(t&&(Wm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kxe(e)}function Kxe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oK=function(){return!!e})()}function Xv(e){return Xv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Xv(e)}function zxe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&BT(e,t)}function BT(e,t){return BT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},BT(e,t)}function $k(e,t,n){return t=lK(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lK(e){var t=qxe(e,"string");return Wm(t)=="symbol"?t:t+""}function qxe(e,t){if(Wm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Wm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Rh=(function(e){function t(n){var r;return Uxe(this,t),r=Gxe(this,t,[n]),r.state={fontSize:"",letterSpacing:""},r}return zxe(t,e),Bxe(t,[{key:"shouldComponentUpdate",value:function(r,s){var i=r.viewBox,o=oA(r,Mxe),l=this.props,c=l.viewBox,u=oA(l,Lxe);return!dm(i,c)||!dm(o,u)||!dm(s,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var s=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var s=this.props,i=s.x,o=s.y,l=s.width,c=s.height,u=s.orientation,m=s.tickSize,p=s.mirror,g=s.tickMargin,x,y,v,N,S,j,C=p?-1:1,_=r.tickSize||m,A=lt(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":x=y=r.coordinate,N=o+ +!p*c,v=N-C*_,j=v-C*g,S=A;break;case"left":v=N=r.coordinate,y=i+ +!p*l,x=y-C*_,S=x-C*g,j=A;break;case"right":v=N=r.coordinate,y=i+ +p*l,x=y+C*_,S=x+C*g,j=A;break;default:x=y=r.coordinate,N=o+ +p*c,v=N+C*_,j=v+C*g,S=A;break}return{line:{x1:x,y1:v,x2:y,y2:N},tick:{x:S,y:j}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,s=r.orientation,i=r.mirror,o;switch(s){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,s=r.orientation,i=r.mirror,o="end";switch(s){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var r=this.props,s=r.x,i=r.y,o=r.width,l=r.height,c=r.orientation,u=r.mirror,m=r.axisLine,p=Oa(Oa(Oa({},Pt(this.props,!1)),Pt(m,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var g=+(c==="top"&&!u||c==="bottom"&&u);p=Oa(Oa({},p),{},{x1:s,y1:i+g*l,x2:s+o,y2:i+g*l})}else{var x=+(c==="left"&&!u||c==="right"&&u);p=Oa(Oa({},p),{},{x1:s+x*o,y1:i,x2:s+x*o,y2:i+l})}return W.createElement("line",Jp({},p,{className:fn("recharts-cartesian-axis-line",Ei(m,"className"))}))}},{key:"renderTicks",value:function(r,s,i){var o=this,l=this.props,c=l.tickLine,u=l.stroke,m=l.tick,p=l.tickFormatter,g=l.unit,x=Lk(Oa(Oa({},this.props),{},{ticks:r}),s,i),y=this.getTickTextAnchor(),v=this.getTickVerticalAnchor(),N=Pt(this.props,!1),S=Pt(m,!1),j=Oa(Oa({},N),{},{fill:"none"},Pt(c,!1)),C=x.map(function(_,A){var T=o.getTickLineCoord(_),R=T.line,M=T.tick,P=Oa(Oa(Oa(Oa({textAnchor:y,verticalAnchor:v},N),{},{stroke:"none",fill:u},S),M),{},{index:A,payload:_,visibleTicksCount:x.length,tickFormatter:p});return W.createElement(mn,Jp({className:"recharts-cartesian-axis-tick",key:"tick-".concat(_.value,"-").concat(_.coordinate,"-").concat(_.tickCoord)},Ou(o.props,_,A)),c&&W.createElement("line",Jp({},j,R,{className:fn("recharts-cartesian-axis-tick-line",Ei(c,"className"))})),m&&t.renderTickItem(m,P,"".concat(Yt(p)?p(_.value,A):_.value).concat(g||"")))});return W.createElement("g",{className:"recharts-cartesian-axis-ticks"},C)}},{key:"render",value:function(){var r=this,s=this.props,i=s.axisLine,o=s.width,l=s.height,c=s.ticksGenerator,u=s.className,m=s.hide;if(m)return null;var p=this.props,g=p.ticks,x=oA(p,$xe),y=g;return Yt(c)&&(y=g&&g.length>0?c(this.props):c(x)),o<=0||l<=0||!y||!y.length?null:W.createElement(mn,{className:fn("recharts-cartesian-axis",u),ref:function(N){r.layerReference=N}},i&&this.renderAxisLine(),this.renderTicks(y,this.state.fontSize,this.state.letterSpacing),Qa.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,s,i){var o,l=fn(s.className,"recharts-cartesian-axis-tick-value");return W.isValidElement(r)?o=W.cloneElement(r,Oa(Oa({},s),{},{className:l})):Yt(r)?o=r(Oa(Oa({},s),{},{className:l})):o=W.createElement(Kf,Jp({},s,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])})(h.Component);$k(Rh,"displayName","CartesianAxis");$k(Rh,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Vxe=["x1","y1","x2","y2","key"],Wxe=["offset"];function Wf(e){"@babel/helpers - typeof";return Wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wf(e)}function k6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Os(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?k6(Object(n),!0).forEach(function(r){Yxe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Yxe(e,t,n){return t=Qxe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qxe(e){var t=Xxe(e,"string");return Wf(t)=="symbol"?t:t+""}function Xxe(e,t){if(Wf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Wf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kf(){return kf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kf.apply(this,arguments)}function I6(e,t){if(e==null)return{};var n=Jxe(e,t),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Jxe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Zxe=function(t){var n=t.fill;if(!n||n==="none")return null;var r=t.fillOpacity,s=t.x,i=t.y,o=t.width,l=t.height,c=t.ry;return W.createElement("rect",{x:s,y:i,ry:c,width:o,height:l,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function cK(e,t){var n;if(W.isValidElement(e))n=W.cloneElement(e,t);else if(Yt(e))n=e(t);else{var r=t.x1,s=t.y1,i=t.x2,o=t.y2,l=t.key,c=I6(t,Vxe),u=Pt(c,!1);u.offset;var m=I6(u,Wxe);n=W.createElement("line",kf({},m,{x1:r,y1:s,x2:i,y2:o,fill:"none",key:l}))}return n}function ebe(e){var t=e.x,n=e.width,r=e.horizontal,s=r===void 0?!0:r,i=e.horizontalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,c){var u=Os(Os({},e),{},{x1:t,y1:l,x2:t+n,y2:l,key:"line-".concat(c),index:c});return cK(s,u)});return W.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function tbe(e){var t=e.y,n=e.height,r=e.vertical,s=r===void 0?!0:r,i=e.verticalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,c){var u=Os(Os({},e),{},{x1:l,y1:t,x2:l,y2:t+n,key:"line-".concat(c),index:c});return cK(s,u)});return W.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function nbe(e){var t=e.horizontalFill,n=e.fillOpacity,r=e.x,s=e.y,i=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var m=l.map(function(g){return Math.round(g+s-s)}).sort(function(g,x){return g-x});s!==m[0]&&m.unshift(0);var p=m.map(function(g,x){var y=!m[x+1],v=y?s+o-g:m[x+1]-g;if(v<=0)return null;var N=x%t.length;return W.createElement("rect",{key:"react-".concat(x),y:g,x:r,height:v,width:i,stroke:"none",fill:t[N],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return W.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function rbe(e){var t=e.vertical,n=t===void 0?!0:t,r=e.verticalFill,s=e.fillOpacity,i=e.x,o=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!n||!r||!r.length)return null;var m=u.map(function(g){return Math.round(g+i-i)}).sort(function(g,x){return g-x});i!==m[0]&&m.unshift(0);var p=m.map(function(g,x){var y=!m[x+1],v=y?i+l-g:m[x+1]-g;if(v<=0)return null;var N=x%r.length;return W.createElement("rect",{key:"react-".concat(x),x:g,y:o,width:v,height:c,stroke:"none",fill:r[N],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return W.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var abe=function(t,n){var r=t.xAxis,s=t.width,i=t.height,o=t.offset;return lH(Lk(Os(Os(Os({},Rh.defaultProps),r),{},{ticks:ed(r,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.left,o.left+o.width,n)},sbe=function(t,n){var r=t.yAxis,s=t.width,i=t.height,o=t.offset;return lH(Lk(Os(Os(Os({},Rh.defaultProps),r),{},{ticks:ed(r,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.top,o.top+o.height,n)},kp={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Rs(e){var t,n,r,s,i,o,l=Dk(),c=Pk(),u=qge(),m=Os(Os({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:kp.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:kp.fill,horizontal:(r=e.horizontal)!==null&&r!==void 0?r:kp.horizontal,horizontalFill:(s=e.horizontalFill)!==null&&s!==void 0?s:kp.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:kp.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:kp.verticalFill,x:lt(e.x)?e.x:u.left,y:lt(e.y)?e.y:u.top,width:lt(e.width)?e.width:u.width,height:lt(e.height)?e.height:u.height}),p=m.x,g=m.y,x=m.width,y=m.height,v=m.syncWithTicks,N=m.horizontalValues,S=m.verticalValues,j=Hge(),C=Kge();if(!lt(x)||x<=0||!lt(y)||y<=0||!lt(p)||p!==+p||!lt(g)||g!==+g)return null;var _=m.verticalCoordinatesGenerator||abe,A=m.horizontalCoordinatesGenerator||sbe,T=m.horizontalPoints,R=m.verticalPoints;if((!T||!T.length)&&Yt(A)){var M=N&&N.length,P=A({yAxis:C?Os(Os({},C),{},{ticks:M?N:C.ticks}):void 0,width:l,height:c,offset:u},M?!0:v);rl(Array.isArray(P),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Wf(P),"]")),Array.isArray(P)&&(T=P)}if((!R||!R.length)&&Yt(_)){var $=S&&S.length,w=_({xAxis:j?Os(Os({},j),{},{ticks:$?S:j.ticks}):void 0,width:l,height:c,offset:u},$?!0:v);rl(Array.isArray(w),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Wf(w),"]")),Array.isArray(w)&&(R=w)}return W.createElement("g",{className:"recharts-cartesian-grid"},W.createElement(Zxe,{fill:m.fill,fillOpacity:m.fillOpacity,x:m.x,y:m.y,width:m.width,height:m.height,ry:m.ry}),W.createElement(ebe,kf({},m,{offset:u,horizontalPoints:T,xAxis:j,yAxis:C})),W.createElement(tbe,kf({},m,{offset:u,verticalPoints:R,xAxis:j,yAxis:C})),W.createElement(nbe,kf({},m,{horizontalPoints:T})),W.createElement(rbe,kf({},m,{verticalPoints:R})))}Rs.displayName="CartesianGrid";var ibe=["type","layout","connectNulls","ref"],obe=["key"];function Ym(e){"@babel/helpers - typeof";return Ym=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ym(e)}function D6(e,t){if(e==null)return{};var n=lbe(e,t),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function lbe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function vg(){return vg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vg.apply(this,arguments)}function P6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Di(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?P6(Object(n),!0).forEach(function(r){Wo(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ip(e){return fbe(e)||ube(e)||dbe(e)||cbe()}function cbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dbe(e,t){if(e){if(typeof e=="string")return GT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GT(e,t)}}function ube(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function fbe(e){if(Array.isArray(e))return GT(e)}function GT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,uK(r.key),r)}}function mbe(e,t,n){return t&&M6(e.prototype,t),n&&M6(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function hbe(e,t,n){return t=Jv(t),gbe(e,dK()?Reflect.construct(t,n||[],Jv(e).constructor):t.apply(e,n))}function gbe(e,t){if(t&&(Ym(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xbe(e)}function xbe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dK=function(){return!!e})()}function Jv(e){return Jv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Jv(e)}function bbe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&HT(e,t)}function HT(e,t){return HT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},HT(e,t)}function Wo(e,t,n){return t=uK(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uK(e){var t=ybe(e,"string");return Ym(t)=="symbol"?t:t+""}function ybe(e,t){if(Ym(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ym(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ja=(function(e){function t(){var n;pbe(this,t);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return n=hbe(this,t,[].concat(s)),Wo(n,"state",{isAnimationFinished:!0,totalLength:0}),Wo(n,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),Wo(n,"getStrokeDasharray",function(o,l,c){var u=c.reduce(function(S,j){return S+j});if(!u)return n.generateSimpleStrokeDasharray(l,o);for(var m=Math.floor(o/u),p=o%u,g=l-o,x=[],y=0,v=0;y<c.length;v+=c[y],++y)if(v+c[y]>p){x=[].concat(Ip(c.slice(0,y)),[p-v]);break}var N=x.length%2===0?[0,g]:[g];return[].concat(Ip(t.repeat(c,m)),Ip(x),N).map(function(S){return"".concat(S,"px")}).join(", ")}),Wo(n,"id",bd("recharts-line-")),Wo(n,"pathRef",function(o){n.mainCurve=o}),Wo(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),Wo(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return bbe(t,e),mbe(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,l=i.xAxis,c=i.yAxis,u=i.layout,m=i.children,p=ni(m,Oh);if(!p)return null;var g=function(v,N){return{x:v.x,y:v.y,value:v.value,errorVal:pr(v.payload,N)}},x={clipPath:r?"url(#clipPath-".concat(s,")"):null};return W.createElement(mn,x,p.map(function(y){return W.cloneElement(y,{key:"bar-".concat(y.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,dataPointFormatter:g})}))}},{key:"renderDots",value:function(r,s,i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,u=l.points,m=l.dataKey,p=Pt(this.props,!1),g=Pt(c,!0),x=u.map(function(v,N){var S=Di(Di(Di({key:"dot-".concat(N),r:3},p),g),{},{index:N,cx:v.x,cy:v.y,value:v.value,dataKey:m,payload:v.payload,points:u});return t.renderDotItem(c,S)}),y={clipPath:r?"url(#clipPath-".concat(s?"":"dots-").concat(i,")"):null};return W.createElement(mn,vg({className:"recharts-line-dots",key:"dots"},y),x)}},{key:"renderCurveStatically",value:function(r,s,i,o){var l=this.props,c=l.type,u=l.layout,m=l.connectNulls;l.ref;var p=D6(l,ibe),g=Di(Di(Di({},Pt(p,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:s?"url(#clipPath-".concat(i,")"):null,points:r},o),{},{type:c,layout:u,connectNulls:m});return W.createElement(Tu,vg({},g,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,s){var i=this,o=this.props,l=o.points,c=o.strokeDasharray,u=o.isAnimationActive,m=o.animationBegin,p=o.animationDuration,g=o.animationEasing,x=o.animationId,y=o.animateNewValues,v=o.width,N=o.height,S=this.state,j=S.prevPoints,C=S.totalLength;return W.createElement(wi,{begin:m,duration:p,isActive:u,easing:g,from:{t:0},to:{t:1},key:"line-".concat(x),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(_){var A=_.t;if(j){var T=j.length/l.length,R=l.map(function(U,X){var I=Math.floor(X*T);if(j[I]){var G=j[I],L=Fr(G.x,U.x),H=Fr(G.y,U.y);return Di(Di({},U),{},{x:L(A),y:H(A)})}if(y){var F=Fr(v*2,U.x),K=Fr(N/2,U.y);return Di(Di({},U),{},{x:F(A),y:K(A)})}return Di(Di({},U),{},{x:U.x,y:U.y})});return i.renderCurveStatically(R,r,s)}var M=Fr(0,C),P=M(A),$;if(c){var w="".concat(c).split(/[,\s]+/gim).map(function(U){return parseFloat(U)});$=i.getStrokeDasharray(P,C,w)}else $=i.generateSimpleStrokeDasharray(C,P);return i.renderCurveStatically(l,r,s,{strokeDasharray:$})})}},{key:"renderCurve",value:function(r,s){var i=this.props,o=i.points,l=i.isAnimationActive,c=this.state,u=c.prevPoints,m=c.totalLength;return l&&o&&o.length&&(!u&&m>0||!Ru(u,o))?this.renderCurveWithAnimation(r,s):this.renderCurveStatically(o,r,s)}},{key:"render",value:function(){var r,s=this.props,i=s.hide,o=s.dot,l=s.points,c=s.className,u=s.xAxis,m=s.yAxis,p=s.top,g=s.left,x=s.width,y=s.height,v=s.isAnimationActive,N=s.id;if(i||!l||!l.length)return null;var S=this.state.isAnimationFinished,j=l.length===1,C=fn("recharts-line",c),_=u&&u.allowDataOverflow,A=m&&m.allowDataOverflow,T=_||A,R=nn(N)?this.id:N,M=(r=Pt(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},P=M.r,$=P===void 0?3:P,w=M.strokeWidth,U=w===void 0?2:w,X=oG(o)?o:{},I=X.clipDot,G=I===void 0?!0:I,L=$*2+U;return W.createElement(mn,{className:C},_||A?W.createElement("defs",null,W.createElement("clipPath",{id:"clipPath-".concat(R)},W.createElement("rect",{x:_?g:g-x/2,y:A?p:p-y/2,width:_?x:x*2,height:A?y:y*2})),!G&&W.createElement("clipPath",{id:"clipPath-dots-".concat(R)},W.createElement("rect",{x:g-L/2,y:p-L/2,width:x+L,height:y+L}))):null,!j&&this.renderCurve(T,R),this.renderErrorBar(T,R),(j||o)&&this.renderDots(T,G,R),(!v||S)&&ks.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:s.curPoints}:r.points!==s.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,s){for(var i=r.length%2!==0?[].concat(Ip(r),[0]):r,o=[],l=0;l<s;++l)o=[].concat(Ip(o),Ip(i));return o}},{key:"renderDotItem",value:function(r,s){var i;if(W.isValidElement(r))i=W.cloneElement(r,s);else if(Yt(r))i=r(s);else{var o=s.key,l=D6(s,obe),c=fn("recharts-line-dot",typeof r!="boolean"?r.className:"");i=W.createElement(Rx,vg({key:o},l,{className:c}))}return i}}])})(h.PureComponent);Wo(Ja,"displayName","Line");Wo(Ja,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!sl.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Wo(Ja,"getComposedData",function(e){var t=e.props,n=e.xAxis,r=e.yAxis,s=e.xAxisTicks,i=e.yAxisTicks,o=e.dataKey,l=e.bandSize,c=e.displayedData,u=e.offset,m=t.layout,p=c.map(function(g,x){var y=pr(g,o);return m==="horizontal"?{x:Lm({axis:n,ticks:s,bandSize:l,entry:g,index:x}),y:nn(y)?null:r.scale(y),value:y,payload:g}:{x:nn(y)?null:n.scale(y),y:Lm({axis:r,ticks:i,bandSize:l,entry:g,index:x}),value:y,payload:g}});return Di({points:p,layout:m},u)});var vbe=["layout","type","stroke","connectNulls","isRange","ref"],Nbe=["key"],fK;function Qm(e){"@babel/helpers - typeof";return Qm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qm(e)}function pK(e,t){if(e==null)return{};var n=Sbe(e,t),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Sbe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function If(){return If=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},If.apply(this,arguments)}function L6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function uu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?L6(Object(n),!0).forEach(function(r){Xl(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ebe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hK(r.key),r)}}function jbe(e,t,n){return t&&$6(e.prototype,t),n&&$6(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function wbe(e,t,n){return t=Zv(t),Abe(e,mK()?Reflect.construct(t,n||[],Zv(e).constructor):t.apply(e,n))}function Abe(e,t){if(t&&(Qm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _be(e)}function _be(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mK=function(){return!!e})()}function Zv(e){return Zv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Zv(e)}function Cbe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&KT(e,t)}function KT(e,t){return KT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},KT(e,t)}function Xl(e,t,n){return t=hK(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hK(e){var t=Tbe(e,"string");return Qm(t)=="symbol"?t:t+""}function Tbe(e,t){if(Qm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Qm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var mc=(function(e){function t(){var n;Ebe(this,t);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return n=wbe(this,t,[].concat(s)),Xl(n,"state",{isAnimationFinished:!0}),Xl(n,"id",bd("recharts-area-")),Xl(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Yt(o)&&o()}),Xl(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Yt(o)&&o()}),n}return Cbe(t,e),jbe(t,[{key:"renderDots",value:function(r,s,i){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,u=c.dot,m=c.points,p=c.dataKey,g=Pt(this.props,!1),x=Pt(u,!0),y=m.map(function(N,S){var j=uu(uu(uu({key:"dot-".concat(S),r:3},g),x),{},{index:S,cx:N.x,cy:N.y,dataKey:p,value:N.value,payload:N.payload,points:m});return t.renderDotItem(u,j)}),v={clipPath:r?"url(#clipPath-".concat(s?"":"dots-").concat(i,")"):null};return W.createElement(mn,If({className:"recharts-area-dots"},v),y)}},{key:"renderHorizontalRect",value:function(r){var s=this.props,i=s.baseLine,o=s.points,l=s.strokeWidth,c=o[0].x,u=o[o.length-1].x,m=r*Math.abs(c-u),p=yu(o.map(function(g){return g.y||0}));return lt(i)&&typeof i=="number"?p=Math.max(i,p):i&&Array.isArray(i)&&i.length&&(p=Math.max(yu(i.map(function(g){return g.y||0})),p)),lt(p)?W.createElement("rect",{x:c<u?c:c-m,y:0,width:m,height:Math.floor(p+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var s=this.props,i=s.baseLine,o=s.points,l=s.strokeWidth,c=o[0].y,u=o[o.length-1].y,m=r*Math.abs(c-u),p=yu(o.map(function(g){return g.x||0}));return lt(i)&&typeof i=="number"?p=Math.max(i,p):i&&Array.isArray(i)&&i.length&&(p=Math.max(yu(i.map(function(g){return g.x||0})),p)),lt(p)?W.createElement("rect",{x:0,y:c<u?c:c-m,width:p+(l?parseInt("".concat(l),10):1),height:Math.floor(m)}):null}},{key:"renderClipRect",value:function(r){var s=this.props.layout;return s==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,s,i,o){var l=this.props,c=l.layout,u=l.type,m=l.stroke,p=l.connectNulls,g=l.isRange;l.ref;var x=pK(l,vbe);return W.createElement(mn,{clipPath:i?"url(#clipPath-".concat(o,")"):null},W.createElement(Tu,If({},Pt(x,!0),{points:r,connectNulls:p,type:u,baseLine:s,layout:c,stroke:"none",className:"recharts-area-area"})),m!=="none"&&W.createElement(Tu,If({},Pt(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:p,fill:"none",points:r})),m!=="none"&&g&&W.createElement(Tu,If({},Pt(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:p,fill:"none",points:s})))}},{key:"renderAreaWithAnimation",value:function(r,s){var i=this,o=this.props,l=o.points,c=o.baseLine,u=o.isAnimationActive,m=o.animationBegin,p=o.animationDuration,g=o.animationEasing,x=o.animationId,y=this.state,v=y.prevPoints,N=y.prevBaseLine;return W.createElement(wi,{begin:m,duration:p,isActive:u,easing:g,from:{t:0},to:{t:1},key:"area-".concat(x),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(S){var j=S.t;if(v){var C=v.length/l.length,_=l.map(function(M,P){var $=Math.floor(P*C);if(v[$]){var w=v[$],U=Fr(w.x,M.x),X=Fr(w.y,M.y);return uu(uu({},M),{},{x:U(j),y:X(j)})}return M}),A;if(lt(c)&&typeof c=="number"){var T=Fr(N,c);A=T(j)}else if(nn(c)||Lu(c)){var R=Fr(N,0);A=R(j)}else A=c.map(function(M,P){var $=Math.floor(P*C);if(N[$]){var w=N[$],U=Fr(w.x,M.x),X=Fr(w.y,M.y);return uu(uu({},M),{},{x:U(j),y:X(j)})}return M});return i.renderAreaStatically(_,A,r,s)}return W.createElement(mn,null,W.createElement("defs",null,W.createElement("clipPath",{id:"animationClipPath-".concat(s)},i.renderClipRect(j))),W.createElement(mn,{clipPath:"url(#animationClipPath-".concat(s,")")},i.renderAreaStatically(l,c,r,s)))})}},{key:"renderArea",value:function(r,s){var i=this.props,o=i.points,l=i.baseLine,c=i.isAnimationActive,u=this.state,m=u.prevPoints,p=u.prevBaseLine,g=u.totalLength;return c&&o&&o.length&&(!m&&g>0||!Ru(m,o)||!Ru(p,l))?this.renderAreaWithAnimation(r,s):this.renderAreaStatically(o,l,r,s)}},{key:"render",value:function(){var r,s=this.props,i=s.hide,o=s.dot,l=s.points,c=s.className,u=s.top,m=s.left,p=s.xAxis,g=s.yAxis,x=s.width,y=s.height,v=s.isAnimationActive,N=s.id;if(i||!l||!l.length)return null;var S=this.state.isAnimationFinished,j=l.length===1,C=fn("recharts-area",c),_=p&&p.allowDataOverflow,A=g&&g.allowDataOverflow,T=_||A,R=nn(N)?this.id:N,M=(r=Pt(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},P=M.r,$=P===void 0?3:P,w=M.strokeWidth,U=w===void 0?2:w,X=oG(o)?o:{},I=X.clipDot,G=I===void 0?!0:I,L=$*2+U;return W.createElement(mn,{className:C},_||A?W.createElement("defs",null,W.createElement("clipPath",{id:"clipPath-".concat(R)},W.createElement("rect",{x:_?m:m-x/2,y:A?u:u-y/2,width:_?x:x*2,height:A?y:y*2})),!G&&W.createElement("clipPath",{id:"clipPath-dots-".concat(R)},W.createElement("rect",{x:m-L/2,y:u-L/2,width:x+L,height:y+L}))):null,j?null:this.renderArea(T,R),(o||j)&&this.renderDots(T,G,R),(!v||S)&&ks.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:s.curPoints,prevBaseLine:s.curBaseLine}:r.points!==s.curPoints||r.baseLine!==s.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])})(h.PureComponent);fK=mc;Xl(mc,"displayName","Area");Xl(mc,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!sl.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Xl(mc,"getBaseValue",function(e,t,n,r){var s=e.layout,i=e.baseValue,o=t.props.baseValue,l=o??i;if(lt(l)&&typeof l=="number")return l;var c=s==="horizontal"?r:n,u=c.scale.domain();if(c.type==="number"){var m=Math.max(u[0],u[1]),p=Math.min(u[0],u[1]);return l==="dataMin"?p:l==="dataMax"||m<0?m:Math.max(Math.min(u[0],u[1]),0)}return l==="dataMin"?u[0]:l==="dataMax"?u[1]:u[0]});Xl(mc,"getComposedData",function(e){var t=e.props,n=e.item,r=e.xAxis,s=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,l=e.bandSize,c=e.dataKey,u=e.stackedData,m=e.dataStartIndex,p=e.displayedData,g=e.offset,x=t.layout,y=u&&u.length,v=fK.getBaseValue(t,n,r,s),N=x==="horizontal",S=!1,j=p.map(function(_,A){var T;y?T=u[m+A]:(T=pr(_,c),Array.isArray(T)?S=!0:T=[v,T]);var R=T[1]==null||y&&pr(_,c)==null;return N?{x:Lm({axis:r,ticks:i,bandSize:l,entry:_,index:A}),y:R?null:s.scale(T[1]),value:T,payload:_}:{x:R?null:r.scale(T[1]),y:Lm({axis:s,ticks:o,bandSize:l,entry:_,index:A}),value:T,payload:_}}),C;return y||S?C=j.map(function(_){var A=Array.isArray(_.value)?_.value[0]:null;return N?{x:_.x,y:A!=null&&_.y!=null?s.scale(A):null}:{x:A!=null?r.scale(A):null,y:_.y}}):C=N?s.scale(v):r.scale(v),uu({points:j,baseLine:C,layout:x,isRange:S},g)});Xl(mc,"renderDotItem",function(e,t){var n;if(W.isValidElement(e))n=W.cloneElement(e,t);else if(Yt(e))n=e(t);else{var r=fn("recharts-area-dot",typeof e!="boolean"?e.className:""),s=t.key,i=pK(t,Nbe);n=W.createElement(Rx,If({},i,{key:s,className:r}))}return n});function Xm(e){"@babel/helpers - typeof";return Xm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xm(e)}function Obe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rbe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,bK(r.key),r)}}function kbe(e,t,n){return t&&Rbe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ibe(e,t,n){return t=e1(t),Dbe(e,gK()?Reflect.construct(t,n||[],e1(e).constructor):t.apply(e,n))}function Dbe(e,t){if(t&&(Xm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pbe(e)}function Pbe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gK=function(){return!!e})()}function e1(e){return e1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},e1(e)}function Mbe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zT(e,t)}function zT(e,t){return zT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},zT(e,t)}function xK(e,t,n){return t=bK(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bK(e){var t=Lbe(e,"string");return Xm(t)=="symbol"?t:t+""}function Lbe(e,t){if(Xm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Xm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var kh=(function(e){function t(){return Obe(this,t),Ibe(this,t,arguments)}return Mbe(t,e),kbe(t,[{key:"render",value:function(){return null}}])})(h.Component);xK(kh,"displayName","ZAxis");xK(kh,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var $be=["option","isActive"];function Ng(){return Ng=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ng.apply(this,arguments)}function Fbe(e,t){if(e==null)return{};var n=Ube(e,t),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Ube(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Bbe(e){var t=e.option,n=e.isActive,r=Fbe(e,$be);return typeof t=="string"?h.createElement(Uv,Ng({option:h.createElement(rN,Ng({type:t},r)),isActive:n,shapeType:"symbols"},r)):h.createElement(Uv,Ng({option:t,isActive:n,shapeType:"symbols"},r))}function Jm(e){"@babel/helpers - typeof";return Jm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jm(e)}function Sg(){return Sg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sg.apply(this,arguments)}function F6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function co(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?F6(Object(n),!0).forEach(function(r){Nu(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Gbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vK(r.key),r)}}function Hbe(e,t,n){return t&&U6(e.prototype,t),n&&U6(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Kbe(e,t,n){return t=t1(t),zbe(e,yK()?Reflect.construct(t,n||[],t1(e).constructor):t.apply(e,n))}function zbe(e,t){if(t&&(Jm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qbe(e)}function qbe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yK=function(){return!!e})()}function t1(e){return t1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},t1(e)}function Vbe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qT(e,t)}function qT(e,t){return qT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},qT(e,t)}function Nu(e,t,n){return t=vK(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vK(e){var t=Wbe(e,"string");return Jm(t)=="symbol"?t:t+""}function Wbe(e,t){if(Jm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Jm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ih=(function(e){function t(){var n;Gbe(this,t);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return n=Kbe(this,t,[].concat(s)),Nu(n,"state",{isAnimationFinished:!1}),Nu(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0})}),Nu(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1})}),Nu(n,"id",bd("recharts-scatter-")),n}return Vbe(t,e),Hbe(t,[{key:"renderSymbolsStatically",value:function(r){var s=this,i=this.props,o=i.shape,l=i.activeShape,c=i.activeIndex,u=Pt(this.props,!1);return r.map(function(m,p){var g=c===p,x=g?l:o,y=co(co({},u),m);return W.createElement(mn,Sg({className:"recharts-scatter-symbol",key:"symbol-".concat(m?.cx,"-").concat(m?.cy,"-").concat(m?.size,"-").concat(p)},Ou(s.props,m,p),{role:"img"}),W.createElement(Bbe,Sg({option:x,isActive:g,key:"symbol-".concat(p)},y)))})}},{key:"renderSymbolsWithAnimation",value:function(){var r=this,s=this.props,i=s.points,o=s.isAnimationActive,l=s.animationBegin,c=s.animationDuration,u=s.animationEasing,m=s.animationId,p=this.state.prevPoints;return W.createElement(wi,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(g){var x=g.t,y=i.map(function(v,N){var S=p&&p[N];if(S){var j=Fr(S.cx,v.cx),C=Fr(S.cy,v.cy),_=Fr(S.size,v.size);return co(co({},v),{},{cx:j(x),cy:C(x),size:_(x)})}var A=Fr(0,v.size);return co(co({},v),{},{size:A(x)})});return W.createElement(mn,null,r.renderSymbolsStatically(y))})}},{key:"renderSymbols",value:function(){var r=this.props,s=r.points,i=r.isAnimationActive,o=this.state.prevPoints;return i&&s&&s.length&&(!o||!Ru(o,s))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(s)}},{key:"renderErrorBar",value:function(){var r=this.props.isAnimationActive;if(r&&!this.state.isAnimationFinished)return null;var s=this.props,i=s.points,o=s.xAxis,l=s.yAxis,c=s.children,u=ni(c,Oh);return u?u.map(function(m,p){var g=m.props,x=g.direction,y=g.dataKey;return W.cloneElement(m,{key:"".concat(x,"-").concat(y,"-").concat(i[p]),data:i,xAxis:o,yAxis:l,layout:x==="x"?"vertical":"horizontal",dataPointFormatter:function(N,S){return{x:N.cx,y:N.cy,value:x==="x"?+N.node.x:+N.node.y,errorVal:pr(N,S)}}})}):null}},{key:"renderLine",value:function(){var r=this.props,s=r.points,i=r.line,o=r.lineType,l=r.lineJointType,c=Pt(this.props,!1),u=Pt(i,!1),m,p;if(o==="joint")m=s.map(function(C){return{x:C.cx,y:C.cy}});else if(o==="fitting"){var g=Hre(s),x=g.xmin,y=g.xmax,v=g.a,N=g.b,S=function(_){return v*_+N};m=[{x,y:S(x)},{x:y,y:S(y)}]}var j=co(co(co({},c),{},{fill:"none",stroke:c&&c.fill},u),{},{points:m});return W.isValidElement(i)?p=W.cloneElement(i,j):Yt(i)?p=i(j):p=W.createElement(Tu,Sg({},j,{type:l})),W.createElement(mn,{className:"recharts-scatter-line",key:"recharts-scatter-line"},p)}},{key:"render",value:function(){var r=this.props,s=r.hide,i=r.points,o=r.line,l=r.className,c=r.xAxis,u=r.yAxis,m=r.left,p=r.top,g=r.width,x=r.height,y=r.id,v=r.isAnimationActive;if(s||!i||!i.length)return null;var N=this.state.isAnimationFinished,S=fn("recharts-scatter",l),j=c&&c.allowDataOverflow,C=u&&u.allowDataOverflow,_=j||C,A=nn(y)?this.id:y;return W.createElement(mn,{className:S,clipPath:_?"url(#clipPath-".concat(A,")"):null},j||C?W.createElement("defs",null,W.createElement("clipPath",{id:"clipPath-".concat(A)},W.createElement("rect",{x:j?m:m-g/2,y:C?p:p-x/2,width:j?g:g*2,height:C?x:x*2}))):null,o&&this.renderLine(),this.renderErrorBar(),W.createElement(mn,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!v||N)&&ks.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:s.curPoints}:r.points!==s.curPoints?{curPoints:r.points}:null}}])})(h.PureComponent);Nu(Ih,"displayName","Scatter");Nu(Ih,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!sl.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});Nu(Ih,"getComposedData",function(e){var t=e.xAxis,n=e.yAxis,r=e.zAxis,s=e.item,i=e.displayedData,o=e.xAxisTicks,l=e.yAxisTicks,c=e.offset,u=s.props.tooltipType,m=ni(s.props.children,xo),p=nn(t.dataKey)?s.props.dataKey:t.dataKey,g=nn(n.dataKey)?s.props.dataKey:n.dataKey,x=r&&r.dataKey,y=r?r.range:kh.defaultProps.range,v=y&&y[0],N=t.scale.bandwidth?t.scale.bandwidth():0,S=n.scale.bandwidth?n.scale.bandwidth():0,j=i.map(function(C,_){var A=pr(C,p),T=pr(C,g),R=!nn(x)&&pr(C,x)||"-",M=[{name:nn(t.dataKey)?s.props.name:t.name||t.dataKey,unit:t.unit||"",value:A,payload:C,dataKey:p,type:u},{name:nn(n.dataKey)?s.props.name:n.name||n.dataKey,unit:n.unit||"",value:T,payload:C,dataKey:g,type:u}];R!=="-"&&M.push({name:r.name||r.dataKey,unit:r.unit||"",value:R,payload:C,dataKey:x,type:u});var P=Lm({axis:t,ticks:o,bandSize:N,entry:C,index:_,dataKey:p}),$=Lm({axis:n,ticks:l,bandSize:S,entry:C,index:_,dataKey:g}),w=R!=="-"?r.scale(R):v,U=Math.sqrt(Math.max(w,0)/Math.PI);return co(co({},C),{},{cx:P,cy:$,x:P-U,y:$-U,xAxis:t,yAxis:n,zAxis:r,width:2*U,height:2*U,size:w,node:{x:A,y:T,z:R},tooltipPayload:M,tooltipPosition:{x:P,y:$},payload:C},m&&m[_]&&m[_].props)});return co({points:j},c)});function Zm(e){"@babel/helpers - typeof";return Zm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zm(e)}function Ybe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qbe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,EK(r.key),r)}}function Xbe(e,t,n){return t&&Qbe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Jbe(e,t,n){return t=n1(t),Zbe(e,NK()?Reflect.construct(t,n||[],n1(e).constructor):t.apply(e,n))}function Zbe(e,t){if(t&&(Zm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eye(e)}function eye(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(NK=function(){return!!e})()}function n1(e){return n1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},n1(e)}function tye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&VT(e,t)}function VT(e,t){return VT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},VT(e,t)}function SK(e,t,n){return t=EK(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function EK(e){var t=nye(e,"string");return Zm(t)=="symbol"?t:t+""}function nye(e,t){if(Zm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Zm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function WT(){return WT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},WT.apply(this,arguments)}function rye(e){var t=e.xAxisId,n=Dk(),r=Pk(),s=JH(t);return s==null?null:h.createElement(Rh,WT({},s,{className:fn("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(o){return ed(o,!0)}}))}var oa=(function(e){function t(){return Ybe(this,t),Jbe(this,t,arguments)}return tye(t,e),Xbe(t,[{key:"render",value:function(){return h.createElement(rye,this.props)}}])})(h.Component);SK(oa,"displayName","XAxis");SK(oa,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function eh(e){"@babel/helpers - typeof";return eh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eh(e)}function aye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,AK(r.key),r)}}function iye(e,t,n){return t&&sye(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function oye(e,t,n){return t=r1(t),lye(e,jK()?Reflect.construct(t,n||[],r1(e).constructor):t.apply(e,n))}function lye(e,t){if(t&&(eh(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cye(e)}function cye(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jK=function(){return!!e})()}function r1(e){return r1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},r1(e)}function dye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&YT(e,t)}function YT(e,t){return YT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},YT(e,t)}function wK(e,t,n){return t=AK(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function AK(e){var t=uye(e,"string");return eh(t)=="symbol"?t:t+""}function uye(e,t){if(eh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(eh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function QT(){return QT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},QT.apply(this,arguments)}var fye=function(t){var n=t.yAxisId,r=Dk(),s=Pk(),i=ZH(n);return i==null?null:h.createElement(Rh,QT({},i,{className:fn("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:s},ticksGenerator:function(l){return ed(l,!0)}}))},Zr=(function(e){function t(){return aye(this,t),oye(this,t,arguments)}return dye(t,e),iye(t,[{key:"render",value:function(){return h.createElement(fye,this.props)}}])})(h.Component);wK(Zr,"displayName","YAxis");wK(Zr,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function B6(e){return gye(e)||hye(e)||mye(e)||pye()}function pye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mye(e,t){if(e){if(typeof e=="string")return XT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return XT(e,t)}}function hye(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function gye(e){if(Array.isArray(e))return XT(e)}function XT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var JT=function(t,n,r,s,i){var o=ni(t,sc),l=ni(t,kx),c=[].concat(B6(o),B6(l)),u=ni(t,TN),m="".concat(s,"Id"),p=s[0],g=n;if(c.length&&(g=c.reduce(function(v,N){if(N.props[m]===r&&ac(N.props,"extendDomain")&&lt(N.props[p])){var S=N.props[p];return[Math.min(v[0],S),Math.max(v[1],S)]}return v},g)),u.length){var x="".concat(p,"1"),y="".concat(p,"2");g=u.reduce(function(v,N){if(N.props[m]===r&&ac(N.props,"extendDomain")&&lt(N.props[x])&&lt(N.props[y])){var S=N.props[x],j=N.props[y];return[Math.min(v[0],S,j),Math.max(v[1],S,j)]}return v},g)}return i&&i.length&&(g=i.reduce(function(v,N){return lt(N)?[Math.min(v[0],N),Math.max(v[1],N)]:v},g)),g},lA={exports:{}},G6;function xye(){return G6||(G6=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,u,m){this.fn=c,this.context=u,this.once=m||!1}function i(c,u,m,p,g){if(typeof m!="function")throw new TypeError("The listener must be a function");var x=new s(m,p||c,g),y=n?n+u:u;return c._events[y]?c._events[y].fn?c._events[y]=[c._events[y],x]:c._events[y].push(x):(c._events[y]=x,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],m,p;if(this._eventsCount===0)return u;for(p in m=this._events)t.call(m,p)&&u.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(m)):u},l.prototype.listeners=function(u){var m=n?n+u:u,p=this._events[m];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,x=p.length,y=new Array(x);g<x;g++)y[g]=p[g].fn;return y},l.prototype.listenerCount=function(u){var m=n?n+u:u,p=this._events[m];return p?p.fn?1:p.length:0},l.prototype.emit=function(u,m,p,g,x,y){var v=n?n+u:u;if(!this._events[v])return!1;var N=this._events[v],S=arguments.length,j,C;if(N.fn){switch(N.once&&this.removeListener(u,N.fn,void 0,!0),S){case 1:return N.fn.call(N.context),!0;case 2:return N.fn.call(N.context,m),!0;case 3:return N.fn.call(N.context,m,p),!0;case 4:return N.fn.call(N.context,m,p,g),!0;case 5:return N.fn.call(N.context,m,p,g,x),!0;case 6:return N.fn.call(N.context,m,p,g,x,y),!0}for(C=1,j=new Array(S-1);C<S;C++)j[C-1]=arguments[C];N.fn.apply(N.context,j)}else{var _=N.length,A;for(C=0;C<_;C++)switch(N[C].once&&this.removeListener(u,N[C].fn,void 0,!0),S){case 1:N[C].fn.call(N[C].context);break;case 2:N[C].fn.call(N[C].context,m);break;case 3:N[C].fn.call(N[C].context,m,p);break;case 4:N[C].fn.call(N[C].context,m,p,g);break;default:if(!j)for(A=1,j=new Array(S-1);A<S;A++)j[A-1]=arguments[A];N[C].fn.apply(N[C].context,j)}}return!0},l.prototype.on=function(u,m,p){return i(this,u,m,p,!1)},l.prototype.once=function(u,m,p){return i(this,u,m,p,!0)},l.prototype.removeListener=function(u,m,p,g){var x=n?n+u:u;if(!this._events[x])return this;if(!m)return o(this,x),this;var y=this._events[x];if(y.fn)y.fn===m&&(!g||y.once)&&(!p||y.context===p)&&o(this,x);else{for(var v=0,N=[],S=y.length;v<S;v++)(y[v].fn!==m||g&&!y[v].once||p&&y[v].context!==p)&&N.push(y[v]);N.length?this._events[x]=N.length===1?N[0]:N:o(this,x)}return this},l.prototype.removeAllListeners=function(u){var m;return u?(m=n?n+u:u,this._events[m]&&o(this,m)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l})(lA)),lA.exports}var bye=xye();const yye=Jn(bye);var cA=new yye,dA="recharts.syncMouseEvents";function cx(e){"@babel/helpers - typeof";return cx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cx(e)}function vye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_K(r.key),r)}}function Sye(e,t,n){return t&&Nye(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function uA(e,t,n){return t=_K(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _K(e){var t=Eye(e,"string");return cx(t)=="symbol"?t:t+""}function Eye(e,t){if(cx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(cx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var jye=(function(){function e(){vye(this,e),uA(this,"activeIndex",0),uA(this,"coordinateList",[]),uA(this,"layout","horizontal")}return Sye(e,[{key:"setDetails",value:function(n){var r,s=n.coordinateList,i=s===void 0?null:s,o=n.container,l=o===void 0?null:o,c=n.layout,u=c===void 0?null:c,m=n.offset,p=m===void 0?null:m,g=n.mouseHandlerCallback,x=g===void 0?null:g;this.coordinateList=(r=i??this.coordinateList)!==null&&r!==void 0?r:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=p??this.offset,this.mouseHandlerCallback=x??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),i=s.x,o=s.y,l=s.height,c=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,m=((r=window)===null||r===void 0?void 0:r.scrollY)||0,p=i+c+u,g=o+this.offset.top+l/2+m;this.mouseHandlerCallback({pageX:p,pageY:g})}}}])})();function wye(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var r=e?.[0],s=e?.[1];if(r&&s&&lt(r)&&lt(s))return!0}return!1}function Aye(e,t,n,r){var s=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-s,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function CK(e){var t=e.cx,n=e.cy,r=e.radius,s=e.startAngle,i=e.endAngle,o=Er(t,n,r,s),l=Er(t,n,r,i);return{points:[o,l],cx:t,cy:n,radius:r,startAngle:s,endAngle:i}}function _ye(e,t,n){var r,s,i,o;if(e==="horizontal")r=t.x,i=r,s=n.top,o=n.top+n.height;else if(e==="vertical")s=t.y,o=s,r=n.left,i=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,m=t.outerRadius,p=t.angle,g=Er(l,c,u,p),x=Er(l,c,m,p);r=g.x,s=g.y,i=x.x,o=x.y}else return CK(t);return[{x:r,y:s},{x:i,y:o}]}function dx(e){"@babel/helpers - typeof";return dx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dx(e)}function H6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Qb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?H6(Object(n),!0).forEach(function(r){Cye(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Cye(e,t,n){return t=Tye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tye(e){var t=Oye(e,"string");return dx(t)=="symbol"?t:t+""}function Oye(e,t){if(dx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(dx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Rye(e){var t,n,r=e.element,s=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,m=e.tooltipAxisBandSize,p=e.layout,g=e.chartName,x=(t=r.props.cursor)!==null&&t!==void 0?t:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!x||!i||!o||g!=="ScatterChart"&&s!=="axis")return null;var y,v=Tu;if(g==="ScatterChart")y=o,v=_he;else if(g==="BarChart")y=Aye(p,o,c,m),v=bN;else if(p==="radial"){var N=CK(o),S=N.cx,j=N.cy,C=N.radius,_=N.startAngle,A=N.endAngle;y={cx:S,cy:j,startAngle:_,endAngle:A,innerRadius:C,outerRadius:C},v=vH}else y={points:_ye(p,o,c)},v=Tu;var T=Qb(Qb(Qb(Qb({stroke:"#ccc",pointerEvents:"none"},c),y),Pt(x,!1)),{},{payload:l,payloadIndex:u,className:fn("recharts-tooltip-cursor",x.className)});return h.isValidElement(x)?h.cloneElement(x,T):h.createElement(v,T)}var kye=["item"],Iye=["children","className","width","height","style","compact","title","desc"];function th(e){"@babel/helpers - typeof";return th=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},th(e)}function Zp(){return Zp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zp.apply(this,arguments)}function K6(e,t){return Mye(e)||Pye(e,t)||OK(e,t)||Dye()}function Dye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pye(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(m){u=!0,s=m}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Mye(e){if(Array.isArray(e))return e}function z6(e,t){if(e==null)return{};var n=Lye(e,t),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Lye(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function $ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,RK(r.key),r)}}function Uye(e,t,n){return t&&Fye(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Bye(e,t,n){return t=a1(t),Gye(e,TK()?Reflect.construct(t,n||[],a1(e).constructor):t.apply(e,n))}function Gye(e,t){if(t&&(th(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hye(e)}function Hye(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TK=function(){return!!e})()}function a1(e){return a1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},a1(e)}function Kye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ZT(e,t)}function ZT(e,t){return ZT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},ZT(e,t)}function nh(e){return Vye(e)||qye(e)||OK(e)||zye()}function zye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OK(e,t){if(e){if(typeof e=="string")return eO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eO(e,t)}}function qye(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Vye(e){if(Array.isArray(e))return eO(e)}function eO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function q6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function He(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?q6(Object(n),!0).forEach(function(r){sn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function sn(e,t,n){return t=RK(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RK(e){var t=Wye(e,"string");return th(t)=="symbol"?t:t+""}function Wye(e,t){if(th(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(th(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Yye={xAxis:["bottom","top"],yAxis:["left","right"]},Qye={width:"100%",height:"100%"},kK={x:0,y:0};function Xb(e){return e}var Xye=function(t,n){return n==="horizontal"?t.x:n==="vertical"?t.y:n==="centric"?t.angle:t.radius},Jye=function(t,n,r,s){var i=n.find(function(m){return m&&m.index===r});if(i){if(t==="horizontal")return{x:i.coordinate,y:s.y};if(t==="vertical")return{x:s.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=s.radius;return He(He(He({},s),Er(s.cx,s.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,u=s.angle;return He(He(He({},s),Er(s.cx,s.cy,c,u)),{},{angle:u,radius:c})}return kK},ON=function(t,n){var r=n.graphicalItems,s=n.dataStartIndex,i=n.dataEndIndex,o=(r??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(nh(l),nh(u)):l},[]);return o.length>0?o:t&&t.length&&lt(s)&&lt(i)?t.slice(s,i+1):[]};function IK(e){return e==="number"?[0,"auto"]:void 0}var tO=function(t,n,r,s){var i=t.graphicalItems,o=t.tooltipAxis,l=ON(n,t);return r<0||!i||!i.length||r>=l.length?null:i.reduce(function(c,u){var m,p=(m=u.props.data)!==null&&m!==void 0?m:n;p&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=r&&(p=p.slice(t.dataStartIndex,t.dataEndIndex+1));var g;if(o.dataKey&&!o.allowDuplicatedCategory){var x=p===void 0?l:p;g=ev(x,o.dataKey,s)}else g=p&&p[r]||l[r];return g?[].concat(nh(c),[pH(u,g)]):c},[])},V6=function(t,n,r,s){var i=s||{x:t.chartX,y:t.chartY},o=Xye(i,r),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,m=Que(o,l,u,c);if(m>=0&&u){var p=u[m]&&u[m].value,g=tO(t,n,m,p),x=Jye(r,l,m,i);return{activeTooltipIndex:m,activeLabel:p,activePayload:g,activeCoordinate:x}}return null},Zye=function(t,n){var r=n.axes,s=n.graphicalItems,i=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,m=t.layout,p=t.children,g=t.stackOffset,x=oH(m,i);return r.reduce(function(y,v){var N,S=v.type.defaultProps!==void 0?He(He({},v.type.defaultProps),v.props):v.props,j=S.type,C=S.dataKey,_=S.allowDataOverflow,A=S.allowDuplicatedCategory,T=S.scale,R=S.ticks,M=S.includeHidden,P=S[o];if(y[P])return y;var $=ON(t.data,{graphicalItems:s.filter(function(ee){var ae,ue=o in ee.props?ee.props[o]:(ae=ee.type.defaultProps)===null||ae===void 0?void 0:ae[o];return ue===P}),dataStartIndex:c,dataEndIndex:u}),w=$.length,U,X,I;wye(S.domain,_,j)&&(U=fT(S.domain,null,_),x&&(j==="number"||T!=="auto")&&(I=gg($,C,"category")));var G=IK(j);if(!U||U.length===0){var L,H=(L=S.domain)!==null&&L!==void 0?L:G;if(C){if(U=gg($,C,j),j==="category"&&x){var F=Gre(U);A&&F?(X=U,U=Gv(0,w)):A||(U=z$(H,U,v).reduce(function(ee,ae){return ee.indexOf(ae)>=0?ee:[].concat(nh(ee),[ae])},[]))}else if(j==="category")A?U=U.filter(function(ee){return ee!==""&&!nn(ee)}):U=z$(H,U,v).reduce(function(ee,ae){return ee.indexOf(ae)>=0||ae===""||nn(ae)?ee:[].concat(nh(ee),[ae])},[]);else if(j==="number"){var K=tfe($,s.filter(function(ee){var ae,ue,ce=o in ee.props?ee.props[o]:(ae=ee.type.defaultProps)===null||ae===void 0?void 0:ae[o],Z="hide"in ee.props?ee.props.hide:(ue=ee.type.defaultProps)===null||ue===void 0?void 0:ue.hide;return ce===P&&(M||!Z)}),C,i,m);K&&(U=K)}x&&(j==="number"||T!=="auto")&&(I=gg($,C,"category"))}else x?U=Gv(0,w):l&&l[P]&&l[P].hasStack&&j==="number"?U=g==="expand"?[0,1]:fH(l[P].stackGroups,c,u):U=iH($,s.filter(function(ee){var ae=o in ee.props?ee.props[o]:ee.type.defaultProps[o],ue="hide"in ee.props?ee.props.hide:ee.type.defaultProps.hide;return ae===P&&(M||!ue)}),j,m,!0);if(j==="number")U=JT(p,U,P,i,R),H&&(U=fT(H,U,_));else if(j==="category"&&H){var ne=H,V=U.every(function(ee){return ne.indexOf(ee)>=0});V&&(U=ne)}}return He(He({},y),{},sn({},P,He(He({},S),{},{axisType:i,domain:U,categoricalDomain:I,duplicateDomain:X,originalDomain:(N=S.domain)!==null&&N!==void 0?N:G,isCategorical:x,layout:m})))},{})},eve=function(t,n){var r=n.graphicalItems,s=n.Axis,i=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,m=t.layout,p=t.children,g=ON(t.data,{graphicalItems:r,dataStartIndex:c,dataEndIndex:u}),x=g.length,y=oH(m,i),v=-1;return r.reduce(function(N,S){var j=S.type.defaultProps!==void 0?He(He({},S.type.defaultProps),S.props):S.props,C=j[o],_=IK("number");if(!N[C]){v++;var A;return y?A=Gv(0,x):l&&l[C]&&l[C].hasStack?(A=fH(l[C].stackGroups,c,u),A=JT(p,A,C,i)):(A=fT(_,iH(g,r.filter(function(T){var R,M,P=o in T.props?T.props[o]:(R=T.type.defaultProps)===null||R===void 0?void 0:R[o],$="hide"in T.props?T.props.hide:(M=T.type.defaultProps)===null||M===void 0?void 0:M.hide;return P===C&&!$}),"number",m),s.defaultProps.allowDataOverflow),A=JT(p,A,C,i)),He(He({},N),{},sn({},C,He(He({axisType:i},s.defaultProps),{},{hide:!0,orientation:Ei(Yye,"".concat(i,".").concat(v%2),null),domain:A,originalDomain:_,isCategorical:y,layout:m})))}return N},{})},tve=function(t,n){var r=n.axisType,s=r===void 0?"xAxis":r,i=n.AxisComp,o=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,m=t.children,p="".concat(s,"Id"),g=ni(m,i),x={};return g&&g.length?x=Zye(t,{axes:g,graphicalItems:o,axisType:s,axisIdKey:p,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(x=eve(t,{Axis:i,graphicalItems:o,axisType:s,axisIdKey:p,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),x},nve=function(t){var n=bu(t),r=ed(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:ek(r,function(s){return s.coordinate}),tooltipAxis:n,tooltipAxisBandSize:Cv(n,r)}},W6=function(t){var n=t.children,r=t.defaultShowTooltip,s=Ts(n,Hm),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(i=s.props.startIndex),s.props.endIndex>=0&&(o=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!r}},rve=function(t){return!t||!t.length?!1:t.some(function(n){var r=nd(n&&n.type);return r&&r.indexOf("Bar")>=0})},Y6=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},ave=function(t,n){var r=t.props,s=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,c=l===void 0?{}:l,u=r.width,m=r.height,p=r.children,g=r.margin||{},x=Ts(p,Hm),y=Ts(p,nc),v=Object.keys(c).reduce(function(A,T){var R=c[T],M=R.orientation;return!R.mirror&&!R.hide?He(He({},A),{},sn({},M,A[M]+R.width)):A},{left:g.left||0,right:g.right||0}),N=Object.keys(o).reduce(function(A,T){var R=o[T],M=R.orientation;return!R.mirror&&!R.hide?He(He({},A),{},sn({},M,Ei(A,"".concat(M))+R.height)):A},{top:g.top||0,bottom:g.bottom||0}),S=He(He({},N),v),j=S.bottom;x&&(S.bottom+=x.props.height||Hm.defaultProps.height),y&&n&&(S=Zue(S,s,r,n));var C=u-S.left-S.right,_=m-S.top-S.bottom;return He(He({brushBottom:j},S),{},{width:Math.max(C,0),height:Math.max(_,0)})},sve=function(t,n){if(n==="xAxis")return t[n].width;if(n==="yAxis")return t[n].height},Ix=function(t){var n=t.chartName,r=t.GraphicalChild,s=t.defaultTooltipEventType,i=s===void 0?"axis":s,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,u=t.legendContent,m=t.formatAxisMap,p=t.defaultProps,g=function(S,j){var C=j.graphicalItems,_=j.stackGroups,A=j.offset,T=j.updateId,R=j.dataStartIndex,M=j.dataEndIndex,P=S.barSize,$=S.layout,w=S.barGap,U=S.barCategoryGap,X=S.maxBarSize,I=Y6($),G=I.numericAxisName,L=I.cateAxisName,H=rve(C),F=[];return C.forEach(function(K,ne){var V=ON(S.data,{graphicalItems:[K],dataStartIndex:R,dataEndIndex:M}),ee=K.type.defaultProps!==void 0?He(He({},K.type.defaultProps),K.props):K.props,ae=ee.dataKey,ue=ee.maxBarSize,ce=ee["".concat(G,"Id")],Z=ee["".concat(L,"Id")],ie={},Se=c.reduce(function(et,Fe){var pt=j["".concat(Fe.axisType,"Map")],St=ee["".concat(Fe.axisType,"Id")];pt&&pt[St]||Fe.axisType==="zAxis"||Vf();var qe=pt[St];return He(He({},et),{},sn(sn({},Fe.axisType,qe),"".concat(Fe.axisType,"Ticks"),ed(qe)))},ie),fe=Se[L],Te=Se["".concat(L,"Ticks")],Pe=_&&_[ce]&&_[ce].hasStack&&dfe(K,_[ce].stackGroups),oe=nd(K.type).indexOf("Bar")>=0,le=Cv(fe,Te),ye=[],_e=H&&Xue({barSize:P,stackGroups:_,totalSize:sve(Se,L)});if(oe){var te,z,Ne=nn(ue)?X:ue,me=(te=(z=Cv(fe,Te,!0))!==null&&z!==void 0?z:Ne)!==null&&te!==void 0?te:0;ye=Jue({barGap:w,barCategoryGap:U,bandSize:me!==le?me:le,sizeList:_e[Z],maxBarSize:Ne}),me!==le&&(ye=ye.map(function(et){return He(He({},et),{},{position:He(He({},et.position),{},{offset:et.position.offset-me/2})})}))}var xe=K&&K.type&&K.type.getComposedData;xe&&F.push({props:He(He({},xe(He(He({},Se),{},{displayedData:V,props:S,dataKey:ae,item:K,bandSize:le,barPosition:ye,offset:A,stackedData:Pe,layout:$,dataStartIndex:R,dataEndIndex:M}))),{},sn(sn(sn({key:K.key||"item-".concat(ne)},G,Se[G]),L,Se[L]),"animationId",T)),childIndex:tae(K,S.children),item:K})}),F},x=function(S,j){var C=S.props,_=S.dataStartIndex,A=S.dataEndIndex,T=S.updateId;if(!DC({props:C}))return null;var R=C.children,M=C.layout,P=C.stackOffset,$=C.data,w=C.reverseStackOrder,U=Y6(M),X=U.numericAxisName,I=U.cateAxisName,G=ni(R,r),L=lfe($,G,"".concat(X,"Id"),"".concat(I,"Id"),P,w),H=c.reduce(function(ee,ae){var ue="".concat(ae.axisType,"Map");return He(He({},ee),{},sn({},ue,tve(C,He(He({},ae),{},{graphicalItems:G,stackGroups:ae.axisType===X&&L,dataStartIndex:_,dataEndIndex:A}))))},{}),F=ave(He(He({},H),{},{props:C,graphicalItems:G}),j?.legendBBox);Object.keys(H).forEach(function(ee){H[ee]=m(C,H[ee],F,ee.replace("Map",""),n)});var K=H["".concat(I,"Map")],ne=nve(K),V=g(C,He(He({},H),{},{dataStartIndex:_,dataEndIndex:A,updateId:T,graphicalItems:G,stackGroups:L,offset:F}));return He(He({formattedGraphicalItems:V,graphicalItems:G,offset:F,stackGroups:L},ne),H)},y=(function(N){function S(j){var C,_,A;return $ye(this,S),A=Bye(this,S,[j]),sn(A,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),sn(A,"accessibilityManager",new jye),sn(A,"handleLegendBBoxUpdate",function(T){if(T){var R=A.state,M=R.dataStartIndex,P=R.dataEndIndex,$=R.updateId;A.setState(He({legendBBox:T},x({props:A.props,dataStartIndex:M,dataEndIndex:P,updateId:$},He(He({},A.state),{},{legendBBox:T}))))}}),sn(A,"handleReceiveSyncEvent",function(T,R,M){if(A.props.syncId===T){if(M===A.eventEmitterSymbol&&typeof A.props.syncMethod!="function")return;A.applySyncEvent(R)}}),sn(A,"handleBrushChange",function(T){var R=T.startIndex,M=T.endIndex;if(R!==A.state.dataStartIndex||M!==A.state.dataEndIndex){var P=A.state.updateId;A.setState(function(){return He({dataStartIndex:R,dataEndIndex:M},x({props:A.props,dataStartIndex:R,dataEndIndex:M,updateId:P},A.state))}),A.triggerSyncEvent({dataStartIndex:R,dataEndIndex:M})}}),sn(A,"handleMouseEnter",function(T){var R=A.getMouseInfo(T);if(R){var M=He(He({},R),{},{isTooltipActive:!0});A.setState(M),A.triggerSyncEvent(M);var P=A.props.onMouseEnter;Yt(P)&&P(M,T)}}),sn(A,"triggeredAfterMouseMove",function(T){var R=A.getMouseInfo(T),M=R?He(He({},R),{},{isTooltipActive:!0}):{isTooltipActive:!1};A.setState(M),A.triggerSyncEvent(M);var P=A.props.onMouseMove;Yt(P)&&P(M,T)}),sn(A,"handleItemMouseEnter",function(T){A.setState(function(){return{isTooltipActive:!0,activeItem:T,activePayload:T.tooltipPayload,activeCoordinate:T.tooltipPosition||{x:T.cx,y:T.cy}}})}),sn(A,"handleItemMouseLeave",function(){A.setState(function(){return{isTooltipActive:!1}})}),sn(A,"handleMouseMove",function(T){T.persist(),A.throttleTriggeredAfterMouseMove(T)}),sn(A,"handleMouseLeave",function(T){A.throttleTriggeredAfterMouseMove.cancel();var R={isTooltipActive:!1};A.setState(R),A.triggerSyncEvent(R);var M=A.props.onMouseLeave;Yt(M)&&M(R,T)}),sn(A,"handleOuterEvent",function(T){var R=eae(T),M=Ei(A.props,"".concat(R));if(R&&Yt(M)){var P,$;/.*touch.*/i.test(R)?$=A.getMouseInfo(T.changedTouches[0]):$=A.getMouseInfo(T),M((P=$)!==null&&P!==void 0?P:{},T)}}),sn(A,"handleClick",function(T){var R=A.getMouseInfo(T);if(R){var M=He(He({},R),{},{isTooltipActive:!0});A.setState(M),A.triggerSyncEvent(M);var P=A.props.onClick;Yt(P)&&P(M,T)}}),sn(A,"handleMouseDown",function(T){var R=A.props.onMouseDown;if(Yt(R)){var M=A.getMouseInfo(T);R(M,T)}}),sn(A,"handleMouseUp",function(T){var R=A.props.onMouseUp;if(Yt(R)){var M=A.getMouseInfo(T);R(M,T)}}),sn(A,"handleTouchMove",function(T){T.changedTouches!=null&&T.changedTouches.length>0&&A.throttleTriggeredAfterMouseMove(T.changedTouches[0])}),sn(A,"handleTouchStart",function(T){T.changedTouches!=null&&T.changedTouches.length>0&&A.handleMouseDown(T.changedTouches[0])}),sn(A,"handleTouchEnd",function(T){T.changedTouches!=null&&T.changedTouches.length>0&&A.handleMouseUp(T.changedTouches[0])}),sn(A,"handleDoubleClick",function(T){var R=A.props.onDoubleClick;if(Yt(R)){var M=A.getMouseInfo(T);R(M,T)}}),sn(A,"handleContextMenu",function(T){var R=A.props.onContextMenu;if(Yt(R)){var M=A.getMouseInfo(T);R(M,T)}}),sn(A,"triggerSyncEvent",function(T){A.props.syncId!==void 0&&cA.emit(dA,A.props.syncId,T,A.eventEmitterSymbol)}),sn(A,"applySyncEvent",function(T){var R=A.props,M=R.layout,P=R.syncMethod,$=A.state.updateId,w=T.dataStartIndex,U=T.dataEndIndex;if(T.dataStartIndex!==void 0||T.dataEndIndex!==void 0)A.setState(He({dataStartIndex:w,dataEndIndex:U},x({props:A.props,dataStartIndex:w,dataEndIndex:U,updateId:$},A.state)));else if(T.activeTooltipIndex!==void 0){var X=T.chartX,I=T.chartY,G=T.activeTooltipIndex,L=A.state,H=L.offset,F=L.tooltipTicks;if(!H)return;if(typeof P=="function")G=P(F,T);else if(P==="value"){G=-1;for(var K=0;K<F.length;K++)if(F[K].value===T.activeLabel){G=K;break}}var ne=He(He({},H),{},{x:H.left,y:H.top}),V=Math.min(X,ne.x+ne.width),ee=Math.min(I,ne.y+ne.height),ae=F[G]&&F[G].value,ue=tO(A.state,A.props.data,G),ce=F[G]?{x:M==="horizontal"?F[G].coordinate:V,y:M==="horizontal"?ee:F[G].coordinate}:kK;A.setState(He(He({},T),{},{activeLabel:ae,activeCoordinate:ce,activePayload:ue,activeTooltipIndex:G}))}else A.setState(T)}),sn(A,"renderCursor",function(T){var R,M=A.state,P=M.isTooltipActive,$=M.activeCoordinate,w=M.activePayload,U=M.offset,X=M.activeTooltipIndex,I=M.tooltipAxisBandSize,G=A.getTooltipEventType(),L=(R=T.props.active)!==null&&R!==void 0?R:P,H=A.props.layout,F=T.key||"_recharts-cursor";return W.createElement(Rye,{key:F,activeCoordinate:$,activePayload:w,activeTooltipIndex:X,chartName:n,element:T,isActive:L,layout:H,offset:U,tooltipAxisBandSize:I,tooltipEventType:G})}),sn(A,"renderPolarAxis",function(T,R,M){var P=Ei(T,"type.axisType"),$=Ei(A.state,"".concat(P,"Map")),w=T.type.defaultProps,U=w!==void 0?He(He({},w),T.props):T.props,X=$&&$[U["".concat(P,"Id")]];return h.cloneElement(T,He(He({},X),{},{className:fn(P,X.className),key:T.key||"".concat(R,"-").concat(M),ticks:ed(X,!0)}))}),sn(A,"renderPolarGrid",function(T){var R=T.props,M=R.radialLines,P=R.polarAngles,$=R.polarRadius,w=A.state,U=w.radiusAxisMap,X=w.angleAxisMap,I=bu(U),G=bu(X),L=G.cx,H=G.cy,F=G.innerRadius,K=G.outerRadius;return h.cloneElement(T,{polarAngles:Array.isArray(P)?P:ed(G,!0).map(function(ne){return ne.coordinate}),polarRadius:Array.isArray($)?$:ed(I,!0).map(function(ne){return ne.coordinate}),cx:L,cy:H,innerRadius:F,outerRadius:K,key:T.key||"polar-grid",radialLines:M})}),sn(A,"renderLegend",function(){var T=A.state.formattedGraphicalItems,R=A.props,M=R.children,P=R.width,$=R.height,w=A.props.margin||{},U=P-(w.left||0)-(w.right||0),X=aH({children:M,formattedGraphicalItems:T,legendWidth:U,legendContent:u});if(!X)return null;var I=X.item,G=z6(X,kye);return h.cloneElement(I,He(He({},G),{},{chartWidth:P,chartHeight:$,margin:w,onBBoxUpdate:A.handleLegendBBoxUpdate}))}),sn(A,"renderTooltip",function(){var T,R=A.props,M=R.children,P=R.accessibilityLayer,$=Ts(M,or);if(!$)return null;var w=A.state,U=w.isTooltipActive,X=w.activeCoordinate,I=w.activePayload,G=w.activeLabel,L=w.offset,H=(T=$.props.active)!==null&&T!==void 0?T:U;return h.cloneElement($,{viewBox:He(He({},L),{},{x:L.left,y:L.top}),active:H,label:G,payload:H?I:[],coordinate:X,accessibilityLayer:P})}),sn(A,"renderBrush",function(T){var R=A.props,M=R.margin,P=R.data,$=A.state,w=$.offset,U=$.dataStartIndex,X=$.dataEndIndex,I=$.updateId;return h.cloneElement(T,{key:T.key||"_recharts-brush",onChange:qb(A.handleBrushChange,T.props.onChange),data:P,x:lt(T.props.x)?T.props.x:w.left,y:lt(T.props.y)?T.props.y:w.top+w.height+w.brushBottom-(M.bottom||0),width:lt(T.props.width)?T.props.width:w.width,startIndex:U,endIndex:X,updateId:"brush-".concat(I)})}),sn(A,"renderReferenceElement",function(T,R,M){if(!T)return null;var P=A,$=P.clipPathId,w=A.state,U=w.xAxisMap,X=w.yAxisMap,I=w.offset,G=T.type.defaultProps||{},L=T.props,H=L.xAxisId,F=H===void 0?G.xAxisId:H,K=L.yAxisId,ne=K===void 0?G.yAxisId:K;return h.cloneElement(T,{key:T.key||"".concat(R,"-").concat(M),xAxis:U[F],yAxis:X[ne],viewBox:{x:I.left,y:I.top,width:I.width,height:I.height},clipPathId:$})}),sn(A,"renderActivePoints",function(T){var R=T.item,M=T.activePoint,P=T.basePoint,$=T.childIndex,w=T.isRange,U=[],X=R.props.key,I=R.item.type.defaultProps!==void 0?He(He({},R.item.type.defaultProps),R.item.props):R.item.props,G=I.activeDot,L=I.dataKey,H=He(He({index:$,dataKey:L,cx:M.x,cy:M.y,r:4,fill:Ck(R.item),strokeWidth:2,stroke:"#fff",payload:M.payload,value:M.value},Pt(G,!1)),tv(G));return U.push(S.renderActiveDot(G,H,"".concat(X,"-activePoint-").concat($))),P?U.push(S.renderActiveDot(G,He(He({},H),{},{cx:P.x,cy:P.y}),"".concat(X,"-basePoint-").concat($))):w&&U.push(null),U}),sn(A,"renderGraphicChild",function(T,R,M){var P=A.filterFormatItem(T,R,M);if(!P)return null;var $=A.getTooltipEventType(),w=A.state,U=w.isTooltipActive,X=w.tooltipAxis,I=w.activeTooltipIndex,G=w.activeLabel,L=A.props.children,H=Ts(L,or),F=P.props,K=F.points,ne=F.isRange,V=F.baseLine,ee=P.item.type.defaultProps!==void 0?He(He({},P.item.type.defaultProps),P.item.props):P.item.props,ae=ee.activeDot,ue=ee.hide,ce=ee.activeBar,Z=ee.activeShape,ie=!!(!ue&&U&&H&&(ae||ce||Z)),Se={};$!=="axis"&&H&&H.props.trigger==="click"?Se={onClick:qb(A.handleItemMouseEnter,T.props.onClick)}:$!=="axis"&&(Se={onMouseLeave:qb(A.handleItemMouseLeave,T.props.onMouseLeave),onMouseEnter:qb(A.handleItemMouseEnter,T.props.onMouseEnter)});var fe=h.cloneElement(T,He(He({},P.props),Se));function Te(Fe){return typeof X.dataKey=="function"?X.dataKey(Fe.payload):null}if(ie)if(I>=0){var Pe,oe;if(X.dataKey&&!X.allowDuplicatedCategory){var le=typeof X.dataKey=="function"?Te:"payload.".concat(X.dataKey.toString());Pe=ev(K,le,G),oe=ne&&V&&ev(V,le,G)}else Pe=K?.[I],oe=ne&&V&&V[I];if(Z||ce){var ye=T.props.activeIndex!==void 0?T.props.activeIndex:I;return[h.cloneElement(T,He(He(He({},P.props),Se),{},{activeIndex:ye})),null,null]}if(!nn(Pe))return[fe].concat(nh(A.renderActivePoints({item:P,activePoint:Pe,basePoint:oe,childIndex:I,isRange:ne})))}else{var _e,te=(_e=A.getItemByXY(A.state.activeCoordinate))!==null&&_e!==void 0?_e:{graphicalItem:fe},z=te.graphicalItem,Ne=z.item,me=Ne===void 0?T:Ne,xe=z.childIndex,et=He(He(He({},P.props),Se),{},{activeIndex:xe});return[h.cloneElement(me,et),null,null]}return ne?[fe,null,null]:[fe,null]}),sn(A,"renderCustomized",function(T,R,M){return h.cloneElement(T,He(He({key:"recharts-customized-".concat(M)},A.props),A.state))}),sn(A,"renderMap",{CartesianGrid:{handler:Xb,once:!0},ReferenceArea:{handler:A.renderReferenceElement},ReferenceLine:{handler:Xb},ReferenceDot:{handler:A.renderReferenceElement},XAxis:{handler:Xb},YAxis:{handler:Xb},Brush:{handler:A.renderBrush,once:!0},Bar:{handler:A.renderGraphicChild},Line:{handler:A.renderGraphicChild},Area:{handler:A.renderGraphicChild},Radar:{handler:A.renderGraphicChild},RadialBar:{handler:A.renderGraphicChild},Scatter:{handler:A.renderGraphicChild},Pie:{handler:A.renderGraphicChild},Funnel:{handler:A.renderGraphicChild},Tooltip:{handler:A.renderCursor,once:!0},PolarGrid:{handler:A.renderPolarGrid,once:!0},PolarAngleAxis:{handler:A.renderPolarAxis},PolarRadiusAxis:{handler:A.renderPolarAxis},Customized:{handler:A.renderCustomized}}),A.clipPathId="".concat((C=j.id)!==null&&C!==void 0?C:bd("recharts"),"-clip"),A.throttleTriggeredAfterMouseMove=r9(A.triggeredAfterMouseMove,(_=j.throttleDelay)!==null&&_!==void 0?_:1e3/60),A.state={},A}return Kye(S,N),Uye(S,[{key:"componentDidMount",value:function(){var C,_;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(C=this.props.margin.left)!==null&&C!==void 0?C:0,top:(_=this.props.margin.top)!==null&&_!==void 0?_:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var C=this.props,_=C.children,A=C.data,T=C.height,R=C.layout,M=Ts(_,or);if(M){var P=M.props.defaultIndex;if(!(typeof P!="number"||P<0||P>this.state.tooltipTicks.length-1)){var $=this.state.tooltipTicks[P]&&this.state.tooltipTicks[P].value,w=tO(this.state,A,P,$),U=this.state.tooltipTicks[P].coordinate,X=(this.state.offset.top+T)/2,I=R==="horizontal",G=I?{x:U,y:X}:{y:U,x:X},L=this.state.formattedGraphicalItems.find(function(F){var K=F.item;return K.type.name==="Scatter"});L&&(G=He(He({},G),L.props.points[P].tooltipPosition),w=L.props.points[P].tooltipPayload);var H={activeTooltipIndex:P,isTooltipActive:!0,activeLabel:$,activePayload:w,activeCoordinate:G};this.setState(H),this.renderCursor(M),this.accessibilityManager.setIndex(P)}}}},{key:"getSnapshotBeforeUpdate",value:function(C,_){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==_.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==C.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==C.margin){var A,T;this.accessibilityManager.setDetails({offset:{left:(A=this.props.margin.left)!==null&&A!==void 0?A:0,top:(T=this.props.margin.top)!==null&&T!==void 0?T:0}})}return null}},{key:"componentDidUpdate",value:function(C){PC([Ts(C.children,or)],[Ts(this.props.children,or)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var C=Ts(this.props.children,or);if(C&&typeof C.props.shared=="boolean"){var _=C.props.shared?"axis":"item";return l.indexOf(_)>=0?_:i}return i}},{key:"getMouseInfo",value:function(C){if(!this.container)return null;var _=this.container,A=_.getBoundingClientRect(),T=Toe(A),R={chartX:Math.round(C.pageX-T.left),chartY:Math.round(C.pageY-T.top)},M=A.width/_.offsetWidth||1,P=this.inRange(R.chartX,R.chartY,M);if(!P)return null;var $=this.state,w=$.xAxisMap,U=$.yAxisMap,X=this.getTooltipEventType(),I=V6(this.state,this.props.data,this.props.layout,P);if(X!=="axis"&&w&&U){var G=bu(w).scale,L=bu(U).scale,H=G&&G.invert?G.invert(R.chartX):null,F=L&&L.invert?L.invert(R.chartY):null;return He(He({},R),{},{xValue:H,yValue:F},I)}return I?He(He({},R),I):null}},{key:"inRange",value:function(C,_){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,T=this.props.layout,R=C/A,M=_/A;if(T==="horizontal"||T==="vertical"){var P=this.state.offset,$=R>=P.left&&R<=P.left+P.width&&M>=P.top&&M<=P.top+P.height;return $?{x:R,y:M}:null}var w=this.state,U=w.angleAxisMap,X=w.radiusAxisMap;if(U&&X){var I=bu(U);return W$({x:R,y:M},I)}return null}},{key:"parseEventsOfWrapper",value:function(){var C=this.props.children,_=this.getTooltipEventType(),A=Ts(C,or),T={};A&&_==="axis"&&(A.props.trigger==="click"?T={onClick:this.handleClick}:T={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var R=tv(this.props,this.handleOuterEvent);return He(He({},R),T)}},{key:"addListener",value:function(){cA.on(dA,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){cA.removeListener(dA,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(C,_,A){for(var T=this.state.formattedGraphicalItems,R=0,M=T.length;R<M;R++){var P=T[R];if(P.item===C||P.props.key===C.key||_===nd(P.item.type)&&A===P.childIndex)return P}return null}},{key:"renderClipPath",value:function(){var C=this.clipPathId,_=this.state.offset,A=_.left,T=_.top,R=_.height,M=_.width;return W.createElement("defs",null,W.createElement("clipPath",{id:C},W.createElement("rect",{x:A,y:T,height:R,width:M})))}},{key:"getXScales",value:function(){var C=this.state.xAxisMap;return C?Object.entries(C).reduce(function(_,A){var T=K6(A,2),R=T[0],M=T[1];return He(He({},_),{},sn({},R,M.scale))},{}):null}},{key:"getYScales",value:function(){var C=this.state.yAxisMap;return C?Object.entries(C).reduce(function(_,A){var T=K6(A,2),R=T[0],M=T[1];return He(He({},_),{},sn({},R,M.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(C){var _;return(_=this.state.xAxisMap)===null||_===void 0||(_=_[C])===null||_===void 0?void 0:_.scale}},{key:"getYScaleByAxisId",value:function(C){var _;return(_=this.state.yAxisMap)===null||_===void 0||(_=_[C])===null||_===void 0?void 0:_.scale}},{key:"getItemByXY",value:function(C){var _=this.state,A=_.formattedGraphicalItems,T=_.activeItem;if(A&&A.length)for(var R=0,M=A.length;R<M;R++){var P=A[R],$=P.props,w=P.item,U=w.type.defaultProps!==void 0?He(He({},w.type.defaultProps),w.props):w.props,X=nd(w.type);if(X==="Bar"){var I=($.data||[]).find(function(F){return lhe(C,F)});if(I)return{graphicalItem:P,payload:I}}else if(X==="RadialBar"){var G=($.data||[]).find(function(F){return W$(C,F)});if(G)return{graphicalItem:P,payload:G}}else if(EN(P,T)||jN(P,T)||ax(P,T)){var L=C0e({graphicalItem:P,activeTooltipItem:T,itemData:U.data}),H=U.activeIndex===void 0?L:U.activeIndex;return{graphicalItem:He(He({},P),{},{childIndex:H}),payload:ax(P,T)?U.data[L]:P.props.data[L]}}}return null}},{key:"render",value:function(){var C=this;if(!DC(this))return null;var _=this.props,A=_.children,T=_.className,R=_.width,M=_.height,P=_.style,$=_.compact,w=_.title,U=_.desc,X=z6(_,Iye),I=Pt(X,!1);if($)return W.createElement(N6,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},W.createElement(nv,Zp({},I,{width:R,height:M,title:w,desc:U}),this.renderClipPath(),oP(A,this.renderMap)));if(this.props.accessibilityLayer){var G,L;I.tabIndex=(G=this.props.tabIndex)!==null&&G!==void 0?G:0,I.role=(L=this.props.role)!==null&&L!==void 0?L:"application",I.onKeyDown=function(F){C.accessibilityManager.keyboardEvent(F)},I.onFocus=function(){C.accessibilityManager.focus()}}var H=this.parseEventsOfWrapper();return W.createElement(N6,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},W.createElement("div",Zp({className:fn("recharts-wrapper",T),style:He({position:"relative",cursor:"default",width:R,height:M},P)},H,{ref:function(K){C.container=K}}),W.createElement(nv,Zp({},I,{width:R,height:M,title:w,desc:U,style:Qye}),this.renderClipPath(),oP(A,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(h.Component);sn(y,"displayName",n),sn(y,"defaultProps",He({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},p)),sn(y,"getDerivedStateFromProps",function(N,S){var j=N.dataKey,C=N.data,_=N.children,A=N.width,T=N.height,R=N.layout,M=N.stackOffset,P=N.margin,$=S.dataStartIndex,w=S.dataEndIndex;if(S.updateId===void 0){var U=W6(N);return He(He(He({},U),{},{updateId:0},x(He(He({props:N},U),{},{updateId:0}),S)),{},{prevDataKey:j,prevData:C,prevWidth:A,prevHeight:T,prevLayout:R,prevStackOffset:M,prevMargin:P,prevChildren:_})}if(j!==S.prevDataKey||C!==S.prevData||A!==S.prevWidth||T!==S.prevHeight||R!==S.prevLayout||M!==S.prevStackOffset||!dm(P,S.prevMargin)){var X=W6(N),I={chartX:S.chartX,chartY:S.chartY,isTooltipActive:S.isTooltipActive},G=He(He({},V6(S,C,R)),{},{updateId:S.updateId+1}),L=He(He(He({},X),I),G);return He(He(He({},L),x(He({props:N},L),S)),{},{prevDataKey:j,prevData:C,prevWidth:A,prevHeight:T,prevLayout:R,prevStackOffset:M,prevMargin:P,prevChildren:_})}if(!PC(_,S.prevChildren)){var H,F,K,ne,V=Ts(_,Hm),ee=V&&(H=(F=V.props)===null||F===void 0?void 0:F.startIndex)!==null&&H!==void 0?H:$,ae=V&&(K=(ne=V.props)===null||ne===void 0?void 0:ne.endIndex)!==null&&K!==void 0?K:w,ue=ee!==$||ae!==w,ce=!nn(C),Z=ce&&!ue?S.updateId:S.updateId+1;return He(He({updateId:Z},x(He(He({props:N},S),{},{updateId:Z,dataStartIndex:ee,dataEndIndex:ae}),S)),{},{prevChildren:_,dataStartIndex:ee,dataEndIndex:ae})}return null}),sn(y,"renderActiveDot",function(N,S,j){var C;return h.isValidElement(N)?C=h.cloneElement(N,S):Yt(N)?C=N(S):C=W.createElement(Rx,S),W.createElement(mn,{className:"recharts-active-dot",key:j},C)});var v=h.forwardRef(function(S,j){return W.createElement(y,Zp({},S,{ref:j}))});return v.displayName=y.displayName,v},RN=Ix({chartName:"LineChart",GraphicalChild:Ja,axisComponents:[{axisType:"xAxis",AxisComp:oa},{axisType:"yAxis",AxisComp:Zr}],formatAxisMap:AN}),Df=Ix({chartName:"BarChart",GraphicalChild:us,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:oa},{axisType:"yAxis",AxisComp:Zr}],formatAxisMap:AN}),DK=Ix({chartName:"PieChart",GraphicalChild:pc,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:SN},{axisType:"radiusAxis",AxisComp:vN}],formatAxisMap:vfe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),fA,Q6;function ive(){if(Q6)return fA;Q6=1;function e(t,n){for(var r=-1,s=t==null?0:t.length;++r<s&&n(t[r],r,t)!==!1;);return t}return fA=e,fA}var pA,X6;function PK(){if(X6)return pA;X6=1;var e=Ok(),t=z1(),n=Object.prototype,r=n.hasOwnProperty;function s(i,o,l){var c=i[o];(!(r.call(i,o)&&t(c,l))||l===void 0&&!(o in i))&&e(i,o,l)}return pA=s,pA}var mA,J6;function Dx(){if(J6)return mA;J6=1;var e=PK(),t=Ok();function n(r,s,i,o){var l=!i;i||(i={});for(var c=-1,u=s.length;++c<u;){var m=s[c],p=o?o(i[m],r[m],m,i,r):void 0;p===void 0&&(p=r[m]),l?t(i,m,p):e(i,m,p)}return i}return mA=n,mA}var hA,Z6;function ove(){if(Z6)return hA;Z6=1;var e=Dx(),t=wh();function n(r,s){return r&&e(s,t(s),r)}return hA=n,hA}var gA,eF;function lve(){if(eF)return gA;eF=1;function e(t){var n=[];if(t!=null)for(var r in Object(t))n.push(r);return n}return gA=e,gA}var xA,tF;function cve(){if(tF)return xA;tF=1;var e=ml(),t=QR(),n=lve(),r=Object.prototype,s=r.hasOwnProperty;function i(o){if(!e(o))return n(o);var l=t(o),c=[];for(var u in o)u=="constructor"&&(l||!s.call(o,u))||c.push(u);return c}return xA=i,xA}var bA,nF;function Fk(){if(nF)return bA;nF=1;var e=LG(),t=cve(),n=jh();function r(s){return n(s)?e(s,!0):t(s)}return bA=r,bA}var yA,rF;function dve(){if(rF)return yA;rF=1;var e=Dx(),t=Fk();function n(r,s){return r&&e(s,t(s),r)}return yA=n,yA}var J0={exports:{}};J0.exports;var aF;function uve(){return aF||(aF=1,(function(e,t){var n=fl(),r=t&&!t.nodeType&&t,s=r&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===r,o=i?n.Buffer:void 0,l=o?o.allocUnsafe:void 0;function c(u,m){if(m)return u.slice();var p=u.length,g=l?l(p):new u.constructor(p);return u.copy(g),g}e.exports=c})(J0,J0.exports)),J0.exports}var vA,sF;function fve(){if(sF)return vA;sF=1;function e(t,n){var r=-1,s=t.length;for(n||(n=Array(s));++r<s;)n[r]=t[r];return n}return vA=e,vA}var NA,iF;function pve(){if(iF)return NA;iF=1;var e=Dx(),t=KR();function n(r,s){return e(r,t(r),s)}return NA=n,NA}var SA,oF;function MK(){if(oF)return SA;oF=1;var e=HR(),t=Tk(),n=KR(),r=PG(),s=Object.getOwnPropertySymbols,i=s?function(o){for(var l=[];o;)e(l,n(o)),o=t(o);return l}:r;return SA=i,SA}var EA,lF;function mve(){if(lF)return EA;lF=1;var e=Dx(),t=MK();function n(r,s){return e(r,t(r),s)}return EA=n,EA}var jA,cF;function LK(){if(cF)return jA;cF=1;var e=DG(),t=MK(),n=Fk();function r(s){return e(s,n,t)}return jA=r,jA}var wA,dF;function hve(){if(dF)return wA;dF=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r){var s=r.length,i=new r.constructor(s);return s&&typeof r[0]=="string"&&t.call(r,"index")&&(i.index=r.index,i.input=r.input),i}return wA=n,wA}var AA,uF;function Uk(){if(uF)return AA;uF=1;var e=IG();function t(n){var r=new n.constructor(n.byteLength);return new e(r).set(new e(n)),r}return AA=t,AA}var _A,fF;function gve(){if(fF)return _A;fF=1;var e=Uk();function t(n,r){var s=r?e(n.buffer):n.buffer;return new n.constructor(s,n.byteOffset,n.byteLength)}return _A=t,_A}var CA,pF;function xve(){if(pF)return CA;pF=1;var e=/\w*$/;function t(n){var r=new n.constructor(n.source,e.exec(n));return r.lastIndex=n.lastIndex,r}return CA=t,CA}var TA,mF;function bve(){if(mF)return TA;mF=1;var e=Nh(),t=e?e.prototype:void 0,n=t?t.valueOf:void 0;function r(s){return n?Object(n.call(s)):{}}return TA=r,TA}var OA,hF;function yve(){if(hF)return OA;hF=1;var e=Uk();function t(n,r){var s=r?e(n.buffer):n.buffer;return new n.constructor(s,n.byteOffset,n.length)}return OA=t,OA}var RA,gF;function vve(){if(gF)return RA;gF=1;var e=Uk(),t=gve(),n=xve(),r=bve(),s=yve(),i="[object Boolean]",o="[object Date]",l="[object Map]",c="[object Number]",u="[object RegExp]",m="[object Set]",p="[object String]",g="[object Symbol]",x="[object ArrayBuffer]",y="[object DataView]",v="[object Float32Array]",N="[object Float64Array]",S="[object Int8Array]",j="[object Int16Array]",C="[object Int32Array]",_="[object Uint8Array]",A="[object Uint8ClampedArray]",T="[object Uint16Array]",R="[object Uint32Array]";function M(P,$,w){var U=P.constructor;switch($){case x:return e(P);case i:case o:return new U(+P);case y:return t(P,w);case v:case N:case S:case j:case C:case _:case A:case T:case R:return s(P,w);case l:return new U;case c:case p:return new U(P);case u:return n(P);case m:return new U;case g:return r(P)}}return RA=M,RA}var kA,xF;function Nve(){if(xF)return kA;xF=1;var e=ml(),t=Object.create,n=(function(){function r(){}return function(s){if(!e(s))return{};if(t)return t(s);r.prototype=s;var i=new r;return r.prototype=void 0,i}})();return kA=n,kA}var IA,bF;function Sve(){if(bF)return IA;bF=1;var e=Nve(),t=Tk(),n=QR();function r(s){return typeof s.constructor=="function"&&!n(s)?e(t(s)):{}}return IA=r,IA}var DA,yF;function Eve(){if(yF)return DA;yF=1;var e=sN(),t=pl(),n="[object Map]";function r(s){return t(s)&&e(s)==n}return DA=r,DA}var PA,vF;function jve(){if(vF)return PA;vF=1;var e=Eve(),t=aN(),n=YR(),r=n&&n.isMap,s=r?t(r):e;return PA=s,PA}var MA,NF;function wve(){if(NF)return MA;NF=1;var e=sN(),t=pl(),n="[object Set]";function r(s){return t(s)&&e(s)==n}return MA=r,MA}var LA,SF;function Ave(){if(SF)return LA;SF=1;var e=wve(),t=aN(),n=YR(),r=n&&n.isSet,s=r?t(r):e;return LA=s,LA}var $A,EF;function _ve(){if(EF)return $A;EF=1;var e=BR(),t=ive(),n=PK(),r=ove(),s=dve(),i=uve(),o=fve(),l=pve(),c=mve(),u=FG(),m=LK(),p=sN(),g=hve(),x=vve(),y=Sve(),v=ri(),N=qR(),S=jve(),j=ml(),C=Ave(),_=wh(),A=Fk(),T=1,R=2,M=4,P="[object Arguments]",$="[object Array]",w="[object Boolean]",U="[object Date]",X="[object Error]",I="[object Function]",G="[object GeneratorFunction]",L="[object Map]",H="[object Number]",F="[object Object]",K="[object RegExp]",ne="[object Set]",V="[object String]",ee="[object Symbol]",ae="[object WeakMap]",ue="[object ArrayBuffer]",ce="[object DataView]",Z="[object Float32Array]",ie="[object Float64Array]",Se="[object Int8Array]",fe="[object Int16Array]",Te="[object Int32Array]",Pe="[object Uint8Array]",oe="[object Uint8ClampedArray]",le="[object Uint16Array]",ye="[object Uint32Array]",_e={};_e[P]=_e[$]=_e[ue]=_e[ce]=_e[w]=_e[U]=_e[Z]=_e[ie]=_e[Se]=_e[fe]=_e[Te]=_e[L]=_e[H]=_e[F]=_e[K]=_e[ne]=_e[V]=_e[ee]=_e[Pe]=_e[oe]=_e[le]=_e[ye]=!0,_e[X]=_e[I]=_e[ae]=!1;function te(z,Ne,me,xe,et,Fe){var pt,St=Ne&T,qe=Ne&R,rn=Ne&M;if(me&&(pt=et?me(z,xe,et,Fe):me(z)),pt!==void 0)return pt;if(!j(z))return z;var at=v(z);if(at){if(pt=g(z),!St)return o(z,pt)}else{var jt=p(z),It=jt==I||jt==G;if(N(z))return i(z,St);if(jt==F||jt==P||It&&!et){if(pt=qe||It?{}:y(z),!St)return qe?c(z,s(pt,z)):l(z,r(pt,z))}else{if(!_e[jt])return et?z:{};pt=x(z,jt,St)}}Fe||(Fe=new e);var an=Fe.get(z);if(an)return an;Fe.set(z,pt),C(z)?z.forEach(function(qt){pt.add(te(qt,Ne,me,qt,z,Fe))}):S(z)&&z.forEach(function(qt,Tn){pt.set(Tn,te(qt,Ne,me,Tn,z,Fe))});var Ut=rn?qe?m:u:qe?A:_,Ht=at?void 0:Ut(z);return t(Ht||z,function(qt,Tn){Ht&&(Tn=qt,qt=z[Tn]),n(pt,Tn,te(qt,Ne,me,Tn,z,Fe))}),pt}return $A=te,$A}var FA,jF;function Cve(){if(jF)return FA;jF=1;var e=X1(),t=lG();function n(r,s){return s.length<2?r:e(r,t(s,0,-1))}return FA=n,FA}var UA,wF;function Tve(){if(wF)return UA;wF=1;var e=Q1(),t=bH(),n=Cve(),r=Ax(),s=Object.prototype,i=s.hasOwnProperty;function o(l,c){c=e(c,l);var u=-1,m=c.length;if(!m)return!0;for(var p=l==null||typeof l!="object"&&typeof l!="function";++u<m;){var g=c[u];if(typeof g=="string"){if(g==="__proto__"&&!i.call(l,"__proto__"))return!1;if(g==="constructor"&&u+1<m&&typeof c[u+1]=="string"&&c[u+1]==="prototype"){if(p&&u===0)continue;return!1}}}var x=n(l,c);return x==null||delete x[r(t(c))]}return UA=o,UA}var BA,AF;function Ove(){if(AF)return BA;AF=1;var e=IH();function t(n){return e(n)?void 0:n}return BA=t,BA}var GA,_F;function Rve(){if(_F)return GA;_F=1;var e=JR();function t(n){var r=n==null?0:n.length;return r?e(n,1):[]}return GA=t,GA}var HA,CF;function kve(){if(CF)return HA;CF=1;var e=Rve(),t=YG(),n=XG();function r(s){return n(t(s,void 0,e),s+"")}return HA=r,HA}var KA,TF;function Ive(){if(TF)return KA;TF=1;var e=Y1(),t=_ve(),n=Tve(),r=Q1(),s=Dx(),i=Ove(),o=kve(),l=LK(),c=1,u=2,m=4,p=o(function(g,x){var y={};if(g==null)return y;var v=!1;x=e(x,function(S){return S=r(S,g),v||(v=S.length>1),S}),s(g,l(g),y),v&&(y=t(y,c|u|m,i));for(var N=x.length;N--;)n(y,x[N]);return y});return KA=p,KA}var Dve=Ive();const Pve=Jn(Dve);var Mve=["#1890FF","#66B5FF","#41D9C7","#2FC25B","#6EDB8F","#9AE65C","#FACC14","#E6965C","#57AD71","#223273","#738AE6","#7564CC","#8543E0","#A877ED","#5C8EE6","#13C2C2","#70E0E0","#5CA3E6","#3436C7","#8082FF","#DD81E6","#F04864","#FA7D92","#D598D9"],Lve=["width","height","className","style","children","type"];function rh(e){"@babel/helpers - typeof";return rh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rh(e)}function s1(){return s1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s1.apply(this,arguments)}function $ve(e,t){if(e==null)return{};var n=Fve(e,t),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Fve(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Uve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function OF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,FK(r.key),r)}}function Bve(e,t,n){return t&&OF(e.prototype,t),n&&OF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Gve(e,t,n){return t=i1(t),Hve(e,$K()?Reflect.construct(t,n||[],i1(e).constructor):t.apply(e,n))}function Hve(e,t){if(t&&(rh(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kve(e)}function Kve(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $K(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($K=function(){return!!e})()}function i1(e){return i1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},i1(e)}function zve(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nO(e,t)}function nO(e,t){return nO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},nO(e,t)}function RF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function vr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?RF(Object(n),!0).forEach(function(r){ad(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ad(e,t,n){return t=FK(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FK(e){var t=qve(e,"string");return rh(t)=="symbol"?t:t+""}function qve(e,t){if(rh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(rh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ux="value",zA=function e(t){var n=t.depth,r=t.node,s=t.index,i=t.valueKey,o=r.children,l=n+1,c=o&&o.length?o.map(function(m,p){return e({depth:l,node:m,index:p,valueKey:i})}):null,u;return o&&o.length?u=c.reduce(function(m,p){return m+p[ux]},0):u=Lu(r[i])||r[i]<=0?0:r[i],vr(vr({},r),{},ad(ad(ad({children:c},ux,u),"depth",n),"index",s))},Vve=function(t){return{x:t.x,y:t.y,width:t.width,height:t.height}},Wve=function(t,n){var r=n<0?0:n;return t.map(function(s){var i=s[ux]*r;return vr(vr({},s),{},{area:Lu(i)||i<=0?0:i})})},Yve=function(t,n,r){var s=n*n,i=t.area*t.area,o=t.reduce(function(u,m){return{min:Math.min(u.min,m.area),max:Math.max(u.max,m.area)}},{min:1/0,max:0}),l=o.min,c=o.max;return i?Math.max(s*c*r/i,i/(s*l*r)):1/0},Qve=function(t,n,r,s){var i=n?Math.round(t.area/n):0;(s||i>r.height)&&(i=r.height);for(var o=r.x,l,c=0,u=t.length;c<u;c++)l=t[c],l.x=o,l.y=r.y,l.height=i,l.width=Math.min(i?Math.round(l.area/i):0,r.x+r.width-o),o+=l.width;return l.width+=r.x+r.width-o,vr(vr({},r),{},{y:r.y+i,height:r.height-i})},Xve=function(t,n,r,s){var i=n?Math.round(t.area/n):0;(s||i>r.width)&&(i=r.width);for(var o=r.y,l,c=0,u=t.length;c<u;c++)l=t[c],l.x=r.x,l.y=o,l.width=i,l.height=Math.min(i?Math.round(l.area/i):0,r.y+r.height-o),o+=l.height;return l&&(l.height+=r.y+r.height-o),vr(vr({},r),{},{x:r.x+i,width:r.width-i})},kF=function(t,n,r,s){return n===r.width?Qve(t,n,r,s):Xve(t,n,r,s)},qA=function e(t,n){var r=t.children;if(r&&r.length){var s=Vve(t),i=[],o=1/0,l,c,u=Math.min(s.width,s.height),m=Wve(r,s.width*s.height/t[ux]),p=m.slice();for(i.area=0;p.length>0;)i.push(l=p[0]),i.area+=l.area,c=Yve(i,u,n),c<=o?(p.shift(),o=c):(i.area-=i.pop().area,s=kF(i,u,s,!1),u=Math.min(s.width,s.height),i.length=i.area=0,o=1/0);return i.length&&(s=kF(i,u,s,!0),i.length=i.area=0),vr(vr({},t),{},{children:m.map(function(g){return e(g,n)})})}return t},Jve={isTooltipActive:!1,isAnimationFinished:!1,activeNode:null,formatRoot:null,currentRoot:null,nestIndex:[]},o1=(function(e){function t(){var n;Uve(this,t);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return n=Gve(this,t,[].concat(s)),ad(n,"state",vr({},Jve)),ad(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Yt(o)&&o()}),ad(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Yt(o)&&o()}),n}return zve(t,e),Bve(t,[{key:"handleMouseEnter",value:function(r,s){s.persist();var i=this.props,o=i.onMouseEnter,l=i.children,c=Ts(l,or);c?this.setState({isTooltipActive:!0,activeNode:r},function(){o&&o(r,s)}):o&&o(r,s)}},{key:"handleMouseLeave",value:function(r,s){s.persist();var i=this.props,o=i.onMouseLeave,l=i.children,c=Ts(l,or);c?this.setState({isTooltipActive:!1,activeNode:null},function(){o&&o(r,s)}):o&&o(r,s)}},{key:"handleClick",value:function(r){var s=this.props,i=s.onClick,o=s.type;if(o==="nest"&&r.children){var l=this.props,c=l.width,u=l.height,m=l.dataKey,p=l.aspectRatio,g=zA({depth:0,node:vr(vr({},r),{},{x:0,y:0,width:c,height:u}),index:0,valueKey:m}),x=qA(g,p),y=this.state.nestIndex;y.push(r),this.setState({formatRoot:x,currentRoot:g,nestIndex:y})}i&&i(r)}},{key:"handleNestIndex",value:function(r,s){var i=this.state.nestIndex,o=this.props,l=o.width,c=o.height,u=o.dataKey,m=o.aspectRatio,p=zA({depth:0,node:vr(vr({},r),{},{x:0,y:0,width:l,height:c}),index:0,valueKey:u}),g=qA(p,m);i=i.slice(0,s+1),this.setState({formatRoot:g,currentRoot:r,nestIndex:i})}},{key:"renderItem",value:function(r,s,i){var o=this,l=this.props,c=l.isAnimationActive,u=l.animationBegin,m=l.animationDuration,p=l.animationEasing,g=l.isUpdateAnimationActive,x=l.type,y=l.animationId,v=l.colorPanel,N=this.state.isAnimationFinished,S=s.width,j=s.height,C=s.x,_=s.y,A=s.depth,T=parseInt("".concat((Math.random()*2-1)*S),10),R={};return(i||x==="nest")&&(R={onMouseEnter:this.handleMouseEnter.bind(this,s),onMouseLeave:this.handleMouseLeave.bind(this,s),onClick:this.handleClick.bind(this,s)}),c?W.createElement(wi,{begin:u,duration:m,isActive:c,easing:p,key:"treemap-".concat(y),from:{x:C,y:_,width:S,height:j},to:{x:C,y:_,width:S,height:j},onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(M){var P=M.x,$=M.y,w=M.width,U=M.height;return W.createElement(wi,{from:"translate(".concat(T,"px, ").concat(T,"px)"),to:"translate(0, 0)",attributeName:"transform",begin:u,easing:p,isActive:c,duration:m},W.createElement(mn,R,(function(){return A>2&&!N?null:o.constructor.renderContentItem(r,vr(vr({},s),{},{isAnimationActive:c,isUpdateAnimationActive:!g,width:w,height:U,x:P,y:$}),x,v)})()))}):W.createElement(mn,R,this.constructor.renderContentItem(r,vr(vr({},s),{},{isAnimationActive:!1,isUpdateAnimationActive:!1,width:S,height:j,x:C,y:_}),x,v))}},{key:"renderNode",value:function(r,s){var i=this,o=this.props,l=o.content,c=o.type,u=vr(vr(vr({},Pt(this.props,!1)),s),{},{root:r}),m=!s.children||!s.children.length,p=this.state.currentRoot,g=(p.children||[]).filter(function(x){return x.depth===s.depth&&x.name===s.name});return!g.length&&r.depth&&c==="nest"?null:W.createElement(mn,{key:"recharts-treemap-node-".concat(u.x,"-").concat(u.y,"-").concat(u.name),className:"recharts-treemap-depth-".concat(s.depth)},this.renderItem(l,u,m),s.children&&s.children.length?s.children.map(function(x){return i.renderNode(s,x)}):null)}},{key:"renderAllNodes",value:function(){var r=this.state.formatRoot;return r?this.renderNode(r,r):null}},{key:"renderTooltip",value:function(){var r=this.props,s=r.children,i=r.nameKey,o=Ts(s,or);if(!o)return null;var l=this.props,c=l.width,u=l.height,m=this.state,p=m.isTooltipActive,g=m.activeNode,x={x:0,y:0,width:c,height:u},y=g?{x:g.x+g.width/2,y:g.y+g.height/2}:null,v=p&&g?[{payload:g,name:pr(g,i,""),value:pr(g,ux)}]:[];return W.cloneElement(o,{viewBox:x,active:p,coordinate:y,label:"",payload:v})}},{key:"renderNestIndex",value:function(){var r=this,s=this.props,i=s.nameKey,o=s.nestIndexContent,l=this.state.nestIndex;return W.createElement("div",{className:"recharts-treemap-nest-index-wrapper",style:{marginTop:"8px",textAlign:"center"}},l.map(function(c,u){var m=Ei(c,i,"root"),p=null;return W.isValidElement(o)&&(p=W.cloneElement(o,c,u)),Yt(o)?p=o(c,u):p=m,W.createElement("div",{onClick:r.handleNestIndex.bind(r,c,u),key:"nest-index-".concat(bd()),className:"recharts-treemap-nest-index-box",style:{cursor:"pointer",display:"inline-block",padding:"0 7px",background:"#000",color:"#fff",marginRight:"3px"}},p)}))}},{key:"render",value:function(){if(!DC(this))return null;var r=this.props,s=r.width,i=r.height,o=r.className,l=r.style,c=r.children,u=r.type,m=$ve(r,Lve),p=Pt(m,!1);return W.createElement("div",{className:fn("recharts-wrapper",o),style:vr(vr({},l),{},{position:"relative",cursor:"default",width:s,height:i}),role:"region"},W.createElement(nv,s1({},p,{width:s,height:u==="nest"?i-30:i}),this.renderAllNodes(),Zre(c)),this.renderTooltip(),u==="nest"&&this.renderNestIndex())}}],[{key:"getDerivedStateFromProps",value:function(r,s){if(r.data!==s.prevData||r.type!==s.prevType||r.width!==s.prevWidth||r.height!==s.prevHeight||r.dataKey!==s.prevDataKey||r.aspectRatio!==s.prevAspectRatio){var i=zA({depth:0,node:{children:r.data,x:0,y:0,width:r.width,height:r.height},index:0,valueKey:r.dataKey}),o=qA(i,r.aspectRatio);return vr(vr({},s),{},{formatRoot:o,currentRoot:i,nestIndex:[i],prevAspectRatio:r.aspectRatio,prevData:r.data,prevWidth:r.width,prevHeight:r.height,prevDataKey:r.dataKey,prevType:r.type})}return null}},{key:"renderContentItem",value:function(r,s,i,o){if(W.isValidElement(r))return W.cloneElement(r,s);if(Yt(r))return r(s);var l=s.x,c=s.y,u=s.width,m=s.height,p=s.index,g=null;u>10&&m>10&&s.children&&i==="nest"&&(g=W.createElement(CH,{points:[{x:l+2,y:c+m/2},{x:l+6,y:c+m/2+3},{x:l+2,y:c+m/2+6}]}));var x=null,y=um(s.name);u>20&&m>20&&y.width<u&&y.height<m&&(x=W.createElement("text",{x:l+8,y:c+m/2+7,fontSize:14},s.name));var v=o||Mve;return W.createElement("g",null,W.createElement(bN,s1({fill:s.depth<2?v[p%v.length]:"rgba(255,255,255,0)",stroke:"#fff"},Pve(s,"children"),{role:"img"})),g,x)}}])})(h.PureComponent);ad(o1,"displayName","Treemap");ad(o1,"defaultProps",{aspectRatio:.5*(1+Math.sqrt(5)),dataKey:"value",type:"flat",isAnimationActive:!sl.isSsr,isUpdateAnimationActive:!sl.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"linear"});var Zve=Ix({chartName:"ScatterChart",GraphicalChild:Ih,defaultTooltipEventType:"item",validateTooltipEventTypes:["item"],axisComponents:[{axisType:"xAxis",AxisComp:oa},{axisType:"yAxis",AxisComp:Zr},{axisType:"zAxis",AxisComp:kh}],formatAxisMap:AN}),Bk=Ix({chartName:"ComposedChart",GraphicalChild:[Ja,mc,us,Ih],axisComponents:[{axisType:"xAxis",AxisComp:oa},{axisType:"yAxis",AxisComp:Zr},{axisType:"zAxis",AxisComp:kh}],formatAxisMap:AN}),e1e={value:()=>{}};function Gk(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new ky(n)}function ky(e){this._=e}function t1e(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}ky.prototype=Gk.prototype={constructor:ky,on:function(e,t){var n=this._,r=t1e(e+"",n),s,i=-1,o=r.length;if(arguments.length<2){for(;++i<o;)if((s=(e=r[i]).type)&&(s=n1e(n[s],e.name)))return s;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<o;)if(s=(e=r[i]).type)n[s]=IF(n[s],e.name,t);else if(t==null)for(s in n)n[s]=IF(n[s],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ky(e)},call:function(e,t){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,i;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],r=0,s=i.length;r<s;++r)i[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],s=0,i=r.length;s<i;++s)r[s].value.apply(t,n)}};function n1e(e,t){for(var n=0,r=e.length,s;n<r;++n)if((s=e[n]).name===t)return s.value}function IF(e,t,n){for(var r=0,s=e.length;r<s;++r)if(e[r].name===t){e[r]=e1e,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var rO="http://www.w3.org/1999/xhtml";const DF={svg:"http://www.w3.org/2000/svg",xhtml:rO,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function kN(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),DF.hasOwnProperty(t)?{space:DF[t],local:e}:e}function r1e(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===rO&&t.documentElement.namespaceURI===rO?t.createElement(e):t.createElementNS(n,e)}}function a1e(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function UK(e){var t=kN(e);return(t.local?a1e:r1e)(t)}function s1e(){}function Hk(e){return e==null?s1e:function(){return this.querySelector(e)}}function i1e(e){typeof e!="function"&&(e=Hk(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var i=t[s],o=i.length,l=r[s]=new Array(o),c,u,m=0;m<o;++m)(c=i[m])&&(u=e.call(c,c.__data__,m,i))&&("__data__"in c&&(u.__data__=c.__data__),l[m]=u);return new Ui(r,this._parents)}function o1e(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function l1e(){return[]}function BK(e){return e==null?l1e:function(){return this.querySelectorAll(e)}}function c1e(e){return function(){return o1e(e.apply(this,arguments))}}function d1e(e){typeof e=="function"?e=c1e(e):e=BK(e);for(var t=this._groups,n=t.length,r=[],s=[],i=0;i<n;++i)for(var o=t[i],l=o.length,c,u=0;u<l;++u)(c=o[u])&&(r.push(e.call(c,c.__data__,u,o)),s.push(c));return new Ui(r,s)}function GK(e){return function(){return this.matches(e)}}function HK(e){return function(t){return t.matches(e)}}var u1e=Array.prototype.find;function f1e(e){return function(){return u1e.call(this.children,e)}}function p1e(){return this.firstElementChild}function m1e(e){return this.select(e==null?p1e:f1e(typeof e=="function"?e:HK(e)))}var h1e=Array.prototype.filter;function g1e(){return Array.from(this.children)}function x1e(e){return function(){return h1e.call(this.children,e)}}function b1e(e){return this.selectAll(e==null?g1e:x1e(typeof e=="function"?e:HK(e)))}function y1e(e){typeof e!="function"&&(e=GK(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var i=t[s],o=i.length,l=r[s]=[],c,u=0;u<o;++u)(c=i[u])&&e.call(c,c.__data__,u,i)&&l.push(c);return new Ui(r,this._parents)}function KK(e){return new Array(e.length)}function v1e(){return new Ui(this._enter||this._groups.map(KK),this._parents)}function l1(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}l1.prototype={constructor:l1,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function N1e(e){return function(){return e}}function S1e(e,t,n,r,s,i){for(var o=0,l,c=t.length,u=i.length;o<u;++o)(l=t[o])?(l.__data__=i[o],r[o]=l):n[o]=new l1(e,i[o]);for(;o<c;++o)(l=t[o])&&(s[o]=l)}function E1e(e,t,n,r,s,i,o){var l,c,u=new Map,m=t.length,p=i.length,g=new Array(m),x;for(l=0;l<m;++l)(c=t[l])&&(g[l]=x=o.call(c,c.__data__,l,t)+"",u.has(x)?s[l]=c:u.set(x,c));for(l=0;l<p;++l)x=o.call(e,i[l],l,i)+"",(c=u.get(x))?(r[l]=c,c.__data__=i[l],u.delete(x)):n[l]=new l1(e,i[l]);for(l=0;l<m;++l)(c=t[l])&&u.get(g[l])===c&&(s[l]=c)}function j1e(e){return e.__data__}function w1e(e,t){if(!arguments.length)return Array.from(this,j1e);var n=t?E1e:S1e,r=this._parents,s=this._groups;typeof e!="function"&&(e=N1e(e));for(var i=s.length,o=new Array(i),l=new Array(i),c=new Array(i),u=0;u<i;++u){var m=r[u],p=s[u],g=p.length,x=A1e(e.call(m,m&&m.__data__,u,r)),y=x.length,v=l[u]=new Array(y),N=o[u]=new Array(y),S=c[u]=new Array(g);n(m,p,v,N,S,x,t);for(var j=0,C=0,_,A;j<y;++j)if(_=v[j]){for(j>=C&&(C=j+1);!(A=N[C])&&++C<y;);_._next=A||null}}return o=new Ui(o,r),o._enter=l,o._exit=c,o}function A1e(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function _1e(){return new Ui(this._exit||this._groups.map(KK),this._parents)}function C1e(e,t,n){var r=this.enter(),s=this,i=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(s=t(s),s&&(s=s.selection())),n==null?i.remove():n(i),r&&s?r.merge(s).order():s}function T1e(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,s=n.length,i=r.length,o=Math.min(s,i),l=new Array(s),c=0;c<o;++c)for(var u=n[c],m=r[c],p=u.length,g=l[c]=new Array(p),x,y=0;y<p;++y)(x=u[y]||m[y])&&(g[y]=x);for(;c<s;++c)l[c]=n[c];return new Ui(l,this._parents)}function O1e(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],s=r.length-1,i=r[s],o;--s>=0;)(o=r[s])&&(i&&o.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(o,i),i=o);return this}function R1e(e){e||(e=k1e);function t(p,g){return p&&g?e(p.__data__,g.__data__):!p-!g}for(var n=this._groups,r=n.length,s=new Array(r),i=0;i<r;++i){for(var o=n[i],l=o.length,c=s[i]=new Array(l),u,m=0;m<l;++m)(u=o[m])&&(c[m]=u);c.sort(t)}return new Ui(s,this._parents).order()}function k1e(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function I1e(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function D1e(){return Array.from(this)}function P1e(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,i=r.length;s<i;++s){var o=r[s];if(o)return o}return null}function M1e(){let e=0;for(const t of this)++e;return e}function L1e(){return!this.node()}function $1e(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var s=t[n],i=0,o=s.length,l;i<o;++i)(l=s[i])&&e.call(l,l.__data__,i,s);return this}function F1e(e){return function(){this.removeAttribute(e)}}function U1e(e){return function(){this.removeAttributeNS(e.space,e.local)}}function B1e(e,t){return function(){this.setAttribute(e,t)}}function G1e(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function H1e(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function K1e(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function z1e(e,t){var n=kN(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?U1e:F1e:typeof t=="function"?n.local?K1e:H1e:n.local?G1e:B1e)(n,t))}function zK(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function q1e(e){return function(){this.style.removeProperty(e)}}function V1e(e,t,n){return function(){this.style.setProperty(e,t,n)}}function W1e(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Y1e(e,t,n){return arguments.length>1?this.each((t==null?q1e:typeof t=="function"?W1e:V1e)(e,t,n??"")):ah(this.node(),e)}function ah(e,t){return e.style.getPropertyValue(t)||zK(e).getComputedStyle(e,null).getPropertyValue(t)}function Q1e(e){return function(){delete this[e]}}function X1e(e,t){return function(){this[e]=t}}function J1e(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Z1e(e,t){return arguments.length>1?this.each((t==null?Q1e:typeof t=="function"?J1e:X1e)(e,t)):this.node()[e]}function qK(e){return e.trim().split(/^|\s+/)}function Kk(e){return e.classList||new VK(e)}function VK(e){this._node=e,this._names=qK(e.getAttribute("class")||"")}VK.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function WK(e,t){for(var n=Kk(e),r=-1,s=t.length;++r<s;)n.add(t[r])}function YK(e,t){for(var n=Kk(e),r=-1,s=t.length;++r<s;)n.remove(t[r])}function eNe(e){return function(){WK(this,e)}}function tNe(e){return function(){YK(this,e)}}function nNe(e,t){return function(){(t.apply(this,arguments)?WK:YK)(this,e)}}function rNe(e,t){var n=qK(e+"");if(arguments.length<2){for(var r=Kk(this.node()),s=-1,i=n.length;++s<i;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof t=="function"?nNe:t?eNe:tNe)(n,t))}function aNe(){this.textContent=""}function sNe(e){return function(){this.textContent=e}}function iNe(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function oNe(e){return arguments.length?this.each(e==null?aNe:(typeof e=="function"?iNe:sNe)(e)):this.node().textContent}function lNe(){this.innerHTML=""}function cNe(e){return function(){this.innerHTML=e}}function dNe(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function uNe(e){return arguments.length?this.each(e==null?lNe:(typeof e=="function"?dNe:cNe)(e)):this.node().innerHTML}function fNe(){this.nextSibling&&this.parentNode.appendChild(this)}function pNe(){return this.each(fNe)}function mNe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function hNe(){return this.each(mNe)}function gNe(e){var t=typeof e=="function"?e:UK(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function xNe(){return null}function bNe(e,t){var n=typeof e=="function"?e:UK(e),r=t==null?xNe:typeof t=="function"?t:Hk(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function yNe(){var e=this.parentNode;e&&e.removeChild(this)}function vNe(){return this.each(yNe)}function NNe(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function SNe(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ENe(e){return this.select(e?SNe:NNe)}function jNe(e){return arguments.length?this.property("__data__",e):this.node().__data__}function wNe(e){return function(t){e.call(this,t,this.__data__)}}function ANe(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function _Ne(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,s=t.length,i;n<s;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++r]=i;++r?t.length=r:delete this.__on}}}function CNe(e,t,n){return function(){var r=this.__on,s,i=wNe(t);if(r){for(var o=0,l=r.length;o<l;++o)if((s=r[o]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=i,s.options=n),s.value=t;return}}this.addEventListener(e.type,i,n),s={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(s):this.__on=[s]}}function TNe(e,t,n){var r=ANe(e+""),s,i=r.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,u=l.length,m;c<u;++c)for(s=0,m=l[c];s<i;++s)if((o=r[s]).type===m.type&&o.name===m.name)return m.value}return}for(l=t?CNe:_Ne,s=0;s<i;++s)this.each(l(r[s],t,n));return this}function QK(e,t,n){var r=zK(e),s=r.CustomEvent;typeof s=="function"?s=new s(t,n):(s=r.document.createEvent("Event"),n?(s.initEvent(t,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(t,!1,!1)),e.dispatchEvent(s)}function ONe(e,t){return function(){return QK(this,e,t)}}function RNe(e,t){return function(){return QK(this,e,t.apply(this,arguments))}}function kNe(e,t){return this.each((typeof t=="function"?RNe:ONe)(e,t))}function*INe(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,i=r.length,o;s<i;++s)(o=r[s])&&(yield o)}var XK=[null];function Ui(e,t){this._groups=e,this._parents=t}function Px(){return new Ui([[document.documentElement]],XK)}function DNe(){return this}Ui.prototype=Px.prototype={constructor:Ui,select:i1e,selectAll:d1e,selectChild:m1e,selectChildren:b1e,filter:y1e,data:w1e,enter:v1e,exit:_1e,join:C1e,merge:T1e,selection:DNe,order:O1e,sort:R1e,call:I1e,nodes:D1e,node:P1e,size:M1e,empty:L1e,each:$1e,attr:z1e,style:Y1e,property:Z1e,classed:rNe,text:oNe,html:uNe,raise:pNe,lower:hNe,append:gNe,insert:bNe,remove:vNe,clone:ENe,datum:jNe,on:TNe,dispatch:kNe,[Symbol.iterator]:INe};function Qc(e){return typeof e=="string"?new Ui([[document.querySelector(e)]],[document.documentElement]):new Ui([[e]],XK)}function PNe(e){let t;for(;t=e.sourceEvent;)e=t;return e}function fu(e,t){if(e=PNe(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}}return[e.pageX,e.pageY]}const aO={capture:!0,passive:!1};function sO(e){e.preventDefault(),e.stopImmediatePropagation()}function MNe(e){var t=e.document.documentElement,n=Qc(e).on("dragstart.drag",sO,aO);"onselectstart"in t?n.on("selectstart.drag",sO,aO):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function LNe(e,t){var n=e.document.documentElement,r=Qc(e).on("dragstart.drag",null);t&&(r.on("click.drag",sO,aO),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var sh=0,Z0=0,k0=0,JK=1e3,c1,eg,d1=0,Yf=0,IN=0,fx=typeof performance=="object"&&performance.now?performance:Date,ZK=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function zk(){return Yf||(ZK($Ne),Yf=fx.now()+IN)}function $Ne(){Yf=0}function u1(){this._call=this._time=this._next=null}u1.prototype=ez.prototype={constructor:u1,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?zk():+n)+(t==null?0:+t),!this._next&&eg!==this&&(eg?eg._next=this:c1=this,eg=this),this._call=e,this._time=n,iO()},stop:function(){this._call&&(this._call=null,this._time=1/0,iO())}};function ez(e,t,n){var r=new u1;return r.restart(e,t,n),r}function FNe(){zk(),++sh;for(var e=c1,t;e;)(t=Yf-e._time)>=0&&e._call.call(void 0,t),e=e._next;--sh}function PF(){Yf=(d1=fx.now())+IN,sh=Z0=0;try{FNe()}finally{sh=0,BNe(),Yf=0}}function UNe(){var e=fx.now(),t=e-d1;t>JK&&(IN-=t,d1=e)}function BNe(){for(var e,t=c1,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:c1=n);eg=e,iO(r)}function iO(e){if(!sh){Z0&&(Z0=clearTimeout(Z0));var t=e-Yf;t>24?(e<1/0&&(Z0=setTimeout(PF,e-fx.now()-IN)),k0&&(k0=clearInterval(k0))):(k0||(d1=fx.now(),k0=setInterval(UNe,JK)),sh=1,ZK(PF))}}function MF(e,t,n){var r=new u1;return t=t==null?0:+t,r.restart(s=>{r.stop(),e(s+t)},t,n),r}var GNe=Gk("start","end","cancel","interrupt"),HNe=[],tz=0,LF=1,oO=2,Iy=3,$F=4,lO=5,Dy=6;function DN(e,t,n,r,s,i){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;KNe(e,n,{name:t,index:r,group:s,on:GNe,tween:HNe,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:tz})}function qk(e,t){var n=gl(e,t);if(n.state>tz)throw new Error("too late; already scheduled");return n}function hc(e,t){var n=gl(e,t);if(n.state>Iy)throw new Error("too late; already running");return n}function gl(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function KNe(e,t,n){var r=e.__transition,s;r[t]=n,n.timer=ez(i,0,n.time);function i(u){n.state=LF,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var m,p,g,x;if(n.state!==LF)return c();for(m in r)if(x=r[m],x.name===n.name){if(x.state===Iy)return MF(o);x.state===$F?(x.state=Dy,x.timer.stop(),x.on.call("interrupt",e,e.__data__,x.index,x.group),delete r[m]):+m<t&&(x.state=Dy,x.timer.stop(),x.on.call("cancel",e,e.__data__,x.index,x.group),delete r[m])}if(MF(function(){n.state===Iy&&(n.state=$F,n.timer.restart(l,n.delay,n.time),l(u))}),n.state=oO,n.on.call("start",e,e.__data__,n.index,n.group),n.state===oO){for(n.state=Iy,s=new Array(g=n.tween.length),m=0,p=-1;m<g;++m)(x=n.tween[m].value.call(e,e.__data__,n.index,n.group))&&(s[++p]=x);s.length=p+1}}function l(u){for(var m=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=lO,1),p=-1,g=s.length;++p<g;)s[p].call(e,m);n.state===lO&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=Dy,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function Py(e,t){var n=e.__transition,r,s,i=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){i=!1;continue}s=r.state>oO&&r.state<lO,r.state=Dy,r.timer.stop(),r.on.call(s?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}i&&delete e.__transition}}function zNe(e){return this.each(function(){Py(this,e)})}function qNe(e,t){var n,r;return function(){var s=hc(this,e),i=s.tween;if(i!==n){r=n=i;for(var o=0,l=r.length;o<l;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}s.tween=r}}function VNe(e,t,n){var r,s;if(typeof n!="function")throw new Error;return function(){var i=hc(this,e),o=i.tween;if(o!==r){s=(r=o).slice();for(var l={name:t,value:n},c=0,u=s.length;c<u;++c)if(s[c].name===t){s[c]=l;break}c===u&&s.push(l)}i.tween=s}}function WNe(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=gl(this.node(),n).tween,s=0,i=r.length,o;s<i;++s)if((o=r[s]).name===e)return o.value;return null}return this.each((t==null?qNe:VNe)(n,e,t))}function Vk(e,t,n){var r=e._id;return e.each(function(){var s=hc(this,r);(s.value||(s.value={}))[t]=n.apply(this,arguments)}),function(s){return gl(s,r).value[t]}}function nz(e,t){var n;return(typeof t=="number"?Qo:t instanceof zf?xv:(n=zf(t))?(t=n,xv):h9)(e,t)}function YNe(e){return function(){this.removeAttribute(e)}}function QNe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function XNe(e,t,n){var r,s=n+"",i;return function(){var o=this.getAttribute(e);return o===s?null:o===r?i:i=t(r=o,n)}}function JNe(e,t,n){var r,s=n+"",i;return function(){var o=this.getAttributeNS(e.space,e.local);return o===s?null:o===r?i:i=t(r=o,n)}}function ZNe(e,t,n){var r,s,i;return function(){var o,l=n(this),c;return l==null?void this.removeAttribute(e):(o=this.getAttribute(e),c=l+"",o===c?null:o===r&&c===s?i:(s=c,i=t(r=o,l)))}}function eSe(e,t,n){var r,s,i;return function(){var o,l=n(this),c;return l==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),c=l+"",o===c?null:o===r&&c===s?i:(s=c,i=t(r=o,l)))}}function tSe(e,t){var n=kN(e),r=n==="transform"?zle:nz;return this.attrTween(e,typeof t=="function"?(n.local?eSe:ZNe)(n,r,Vk(this,"attr."+e,t)):t==null?(n.local?QNe:YNe)(n):(n.local?JNe:XNe)(n,r,t))}function nSe(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function rSe(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function aSe(e,t){var n,r;function s(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&rSe(e,i)),n}return s._value=t,s}function sSe(e,t){var n,r;function s(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&nSe(e,i)),n}return s._value=t,s}function iSe(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=kN(e);return this.tween(n,(r.local?aSe:sSe)(r,t))}function oSe(e,t){return function(){qk(this,e).delay=+t.apply(this,arguments)}}function lSe(e,t){return t=+t,function(){qk(this,e).delay=t}}function cSe(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?oSe:lSe)(t,e)):gl(this.node(),t).delay}function dSe(e,t){return function(){hc(this,e).duration=+t.apply(this,arguments)}}function uSe(e,t){return t=+t,function(){hc(this,e).duration=t}}function fSe(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?dSe:uSe)(t,e)):gl(this.node(),t).duration}function pSe(e,t){if(typeof t!="function")throw new Error;return function(){hc(this,e).ease=t}}function mSe(e){var t=this._id;return arguments.length?this.each(pSe(t,e)):gl(this.node(),t).ease}function hSe(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;hc(this,e).ease=n}}function gSe(e){if(typeof e!="function")throw new Error;return this.each(hSe(this._id,e))}function xSe(e){typeof e!="function"&&(e=GK(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var i=t[s],o=i.length,l=r[s]=[],c,u=0;u<o;++u)(c=i[u])&&e.call(c,c.__data__,u,i)&&l.push(c);return new fd(r,this._parents,this._name,this._id)}function bSe(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,s=n.length,i=Math.min(r,s),o=new Array(r),l=0;l<i;++l)for(var c=t[l],u=n[l],m=c.length,p=o[l]=new Array(m),g,x=0;x<m;++x)(g=c[x]||u[x])&&(p[x]=g);for(;l<r;++l)o[l]=t[l];return new fd(o,this._parents,this._name,this._id)}function ySe(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function vSe(e,t,n){var r,s,i=ySe(t)?qk:hc;return function(){var o=i(this,e),l=o.on;l!==r&&(s=(r=l).copy()).on(t,n),o.on=s}}function NSe(e,t){var n=this._id;return arguments.length<2?gl(this.node(),n).on.on(e):this.each(vSe(n,e,t))}function SSe(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function ESe(){return this.on("end.remove",SSe(this._id))}function jSe(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Hk(e));for(var r=this._groups,s=r.length,i=new Array(s),o=0;o<s;++o)for(var l=r[o],c=l.length,u=i[o]=new Array(c),m,p,g=0;g<c;++g)(m=l[g])&&(p=e.call(m,m.__data__,g,l))&&("__data__"in m&&(p.__data__=m.__data__),u[g]=p,DN(u[g],t,n,g,u,gl(m,n)));return new fd(i,this._parents,t,n)}function wSe(e){var t=this._name,n=this._id;typeof e!="function"&&(e=BK(e));for(var r=this._groups,s=r.length,i=[],o=[],l=0;l<s;++l)for(var c=r[l],u=c.length,m,p=0;p<u;++p)if(m=c[p]){for(var g=e.call(m,m.__data__,p,c),x,y=gl(m,n),v=0,N=g.length;v<N;++v)(x=g[v])&&DN(x,t,n,v,g,y);i.push(g),o.push(m)}return new fd(i,o,t,n)}var ASe=Px.prototype.constructor;function _Se(){return new ASe(this._groups,this._parents)}function CSe(e,t){var n,r,s;return function(){var i=ah(this,e),o=(this.style.removeProperty(e),ah(this,e));return i===o?null:i===n&&o===r?s:s=t(n=i,r=o)}}function rz(e){return function(){this.style.removeProperty(e)}}function TSe(e,t,n){var r,s=n+"",i;return function(){var o=ah(this,e);return o===s?null:o===r?i:i=t(r=o,n)}}function OSe(e,t,n){var r,s,i;return function(){var o=ah(this,e),l=n(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(e),ah(this,e))),o===c?null:o===r&&c===s?i:(s=c,i=t(r=o,l))}}function RSe(e,t){var n,r,s,i="style."+t,o="end."+i,l;return function(){var c=hc(this,e),u=c.on,m=c.value[i]==null?l||(l=rz(t)):void 0;(u!==n||s!==m)&&(r=(n=u).copy()).on(o,s=m),c.on=r}}function kSe(e,t,n){var r=(e+="")=="transform"?Kle:nz;return t==null?this.styleTween(e,CSe(e,r)).on("end.style."+e,rz(e)):typeof t=="function"?this.styleTween(e,OSe(e,r,Vk(this,"style."+e,t))).each(RSe(this._id,e)):this.styleTween(e,TSe(e,r,t),n).on("end.style."+e,null)}function ISe(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function DSe(e,t,n){var r,s;function i(){var o=t.apply(this,arguments);return o!==s&&(r=(s=o)&&ISe(e,o,n)),r}return i._value=t,i}function PSe(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,DSe(e,t,n??""))}function MSe(e){return function(){this.textContent=e}}function LSe(e){return function(){var t=e(this);this.textContent=t??""}}function $Se(e){return this.tween("text",typeof e=="function"?LSe(Vk(this,"text",e)):MSe(e==null?"":e+""))}function FSe(e){return function(t){this.textContent=e.call(this,t)}}function USe(e){var t,n;function r(){var s=e.apply(this,arguments);return s!==n&&(t=(n=s)&&FSe(s)),t}return r._value=e,r}function BSe(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,USe(e))}function GSe(){for(var e=this._name,t=this._id,n=az(),r=this._groups,s=r.length,i=0;i<s;++i)for(var o=r[i],l=o.length,c,u=0;u<l;++u)if(c=o[u]){var m=gl(c,t);DN(c,e,n,u,o,{time:m.time+m.delay+m.duration,delay:0,duration:m.duration,ease:m.ease})}return new fd(r,this._parents,e,n)}function HSe(){var e,t,n=this,r=n._id,s=n.size();return new Promise(function(i,o){var l={value:o},c={value:function(){--s===0&&i()}};n.each(function(){var u=hc(this,r),m=u.on;m!==e&&(t=(e=m).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(c)),u.on=t}),s===0&&i()})}var KSe=0;function fd(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function az(){return++KSe}var Fc=Px.prototype;fd.prototype={constructor:fd,select:jSe,selectAll:wSe,selectChild:Fc.selectChild,selectChildren:Fc.selectChildren,filter:xSe,merge:bSe,selection:_Se,transition:GSe,call:Fc.call,nodes:Fc.nodes,node:Fc.node,size:Fc.size,empty:Fc.empty,each:Fc.each,on:NSe,attr:tSe,attrTween:iSe,style:kSe,styleTween:PSe,text:$Se,textTween:BSe,remove:ESe,tween:WNe,delay:cSe,duration:fSe,ease:mSe,easeVarying:gSe,end:HSe,[Symbol.iterator]:Fc[Symbol.iterator]};function zSe(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var qSe={time:null,delay:0,duration:250,ease:zSe};function VSe(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function WSe(e){var t,n;e instanceof fd?(t=e._id,e=e._name):(t=az(),(n=qSe).time=zk(),e=e==null?null:e+"");for(var r=this._groups,s=r.length,i=0;i<s;++i)for(var o=r[i],l=o.length,c,u=0;u<l;++u)(c=o[u])&&DN(c,e,t,u,o,n||VSe(c,t));return new fd(r,this._parents,e,t)}Px.prototype.interrupt=zNe;Px.prototype.transition=WSe;var mm=1e-6,Wk=Math.PI,YSe=Wk*2,QSe=180/Wk,XSe=Wk/180,hm=Math.abs,JSe=Math.cos,ZSe=Math.sin,Yk=Math.sqrt;function yo(){}function f1(e,t){e&&UF.hasOwnProperty(e.type)&&UF[e.type](e,t)}var FF={Feature:function(e,t){f1(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,s=n.length;++r<s;)f1(n[r].geometry,t)}},UF={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,s=n.length;++r<s;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){cO(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,s=n.length;++r<s;)cO(n[r],t,0)},Polygon:function(e,t){BF(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,s=n.length;++r<s;)BF(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,s=n.length;++r<s;)f1(n[r],t)}};function cO(e,t,n){var r=-1,s=e.length-n,i;for(t.lineStart();++r<s;)i=e[r],t.point(i[0],i[1],i[2]);t.lineEnd()}function BF(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)cO(e[n],t,1);t.polygonEnd()}function Kp(e,t){e&&FF.hasOwnProperty(e.type)?FF[e.type](e,t):f1(e,t)}function e2e(){var e=[],t;return{point:function(n,r,s){t.push([n,r,s])},lineStart:function(){e.push(t=[])},lineEnd:yo,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function t2e(e,t){return hm(e[0]-t[0])<mm&&hm(e[1]-t[1])<mm}function Jb(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function n2e(e,t,n,r,s){var i=[],o=[],l,c;if(e.forEach(function(y){if(!((v=y.length-1)<=0)){var v,N=y[0],S=y[v],j;if(t2e(N,S)){if(!N[2]&&!S[2]){for(s.lineStart(),l=0;l<v;++l)s.point((N=y[l])[0],N[1]);s.lineEnd();return}S[0]+=2*mm}i.push(j=new Jb(N,y,null,!0)),o.push(j.o=new Jb(N,null,j,!1)),i.push(j=new Jb(S,y,null,!1)),o.push(j.o=new Jb(S,null,j,!0))}}),!!i.length){for(o.sort(t),GF(i),GF(o),l=0,c=o.length;l<c;++l)o[l].e=n=!n;for(var u=i[0],m,p;;){for(var g=u,x=!0;g.v;)if((g=g.n)===u)return;m=g.z,s.lineStart();do{if(g.v=g.o.v=!0,g.e){if(x)for(l=0,c=m.length;l<c;++l)s.point((p=m[l])[0],p[1]);else r(g.x,g.n.x,1,s);g=g.n}else{if(x)for(m=g.p.z,l=m.length-1;l>=0;--l)s.point((p=m[l])[0],p[1]);else r(g.x,g.p.x,-1,s);g=g.p}g=g.o,m=g.z,x=!x}while(!g.v);s.lineEnd()}}}function GF(e){if(t=e.length){for(var t,n=0,r=e[0],s;++n<t;)r.n=s=e[n],s.p=r,r=s;r.n=s=e[0],s.p=r}}function r2e(e,t,n,r,s,i){var o=e[0],l=e[1],c=t[0],u=t[1],m=0,p=1,g=c-o,x=u-l,y;if(y=n-o,!(!g&&y>0)){if(y/=g,g<0){if(y<m)return;y<p&&(p=y)}else if(g>0){if(y>p)return;y>m&&(m=y)}if(y=s-o,!(!g&&y<0)){if(y/=g,g<0){if(y>p)return;y>m&&(m=y)}else if(g>0){if(y<m)return;y<p&&(p=y)}if(y=r-l,!(!x&&y>0)){if(y/=x,x<0){if(y<m)return;y<p&&(p=y)}else if(x>0){if(y>p)return;y>m&&(m=y)}if(y=i-l,!(!x&&y<0)){if(y/=x,x<0){if(y>p)return;y>m&&(m=y)}else if(x>0){if(y<m)return;y<p&&(p=y)}return m>0&&(e[0]=o+m*g,e[1]=l+m*x),p<1&&(t[0]=o+p*g,t[1]=l+p*x),!0}}}}}var tg=1e9,Zb=-tg;function a2e(e,t,n,r){function s(u,m){return e<=u&&u<=n&&t<=m&&m<=r}function i(u,m,p,g){var x=0,y=0;if(u==null||(x=o(u,p))!==(y=o(m,p))||c(u,m)<0^p>0)do g.point(x===0||x===3?e:n,x>1?r:t);while((x=(x+p+4)%4)!==y);else g.point(m[0],m[1])}function o(u,m){return hm(u[0]-e)<mm?m>0?0:3:hm(u[0]-n)<mm?m>0?2:1:hm(u[1]-t)<mm?m>0?1:0:m>0?3:2}function l(u,m){return c(u.x,m.x)}function c(u,m){var p=o(u,1),g=o(m,1);return p!==g?p-g:p===0?m[1]-u[1]:p===1?u[0]-m[0]:p===2?u[1]-m[1]:m[0]-u[0]}return function(u){var m=u,p=e2e(),g,x,y,v,N,S,j,C,_,A,T,R={point:M,lineStart:U,lineEnd:X,polygonStart:$,polygonEnd:w};function M(G,L){s(G,L)&&m.point(G,L)}function P(){for(var G=0,L=0,H=x.length;L<H;++L)for(var F=x[L],K=1,ne=F.length,V=F[0],ee,ae,ue=V[0],ce=V[1];K<ne;++K)ee=ue,ae=ce,V=F[K],ue=V[0],ce=V[1],ae<=r?ce>r&&(ue-ee)*(r-ae)>(ce-ae)*(e-ee)&&++G:ce<=r&&(ue-ee)*(r-ae)<(ce-ae)*(e-ee)&&--G;return G}function $(){m=p,g=[],x=[],T=!0}function w(){var G=P(),L=T&&G,H=(g=mle(g)).length;(L||H)&&(u.polygonStart(),L&&(u.lineStart(),i(null,null,1,u),u.lineEnd()),H&&n2e(g,l,G,i,u),u.polygonEnd()),m=u,g=x=y=null}function U(){R.point=I,x&&x.push(y=[]),A=!0,_=!1,j=C=NaN}function X(){g&&(I(v,N),S&&_&&p.rejoin(),g.push(p.result())),R.point=M,_&&m.lineEnd()}function I(G,L){var H=s(G,L);if(x&&y.push([G,L]),A)v=G,N=L,S=H,A=!1,H&&(m.lineStart(),m.point(G,L));else if(H&&_)m.point(G,L);else{var F=[j=Math.max(Zb,Math.min(tg,j)),C=Math.max(Zb,Math.min(tg,C))],K=[G=Math.max(Zb,Math.min(tg,G)),L=Math.max(Zb,Math.min(tg,L))];r2e(F,K,e,t,n,r)?(_||(m.lineStart(),m.point(F[0],F[1])),m.point(K[0],K[1]),H||m.lineEnd(),T=!1):H&&(m.lineStart(),m.point(G,L),T=!1)}j=G,C=L,_=H}return R}}const dO=e=>e;var VA=new km,uO=new km,sz,iz,fO,pO,Xc={point:yo,lineStart:yo,lineEnd:yo,polygonStart:function(){Xc.lineStart=s2e,Xc.lineEnd=o2e},polygonEnd:function(){Xc.lineStart=Xc.lineEnd=Xc.point=yo,VA.add(hm(uO)),uO=new km},result:function(){var e=VA/2;return VA=new km,e}};function s2e(){Xc.point=i2e}function i2e(e,t){Xc.point=oz,sz=fO=e,iz=pO=t}function oz(e,t){uO.add(pO*e-fO*t),fO=e,pO=t}function o2e(){oz(sz,iz)}var ih=1/0,p1=ih,px=-ih,m1=px,h1={point:l2e,lineStart:yo,lineEnd:yo,polygonStart:yo,polygonEnd:yo,result:function(){var e=[[ih,p1],[px,m1]];return px=m1=-(p1=ih=1/0),e}};function l2e(e,t){e<ih&&(ih=e),e>px&&(px=e),t<p1&&(p1=t),t>m1&&(m1=t)}var mO=0,hO=0,ng=0,g1=0,x1=0,em=0,gO=0,xO=0,rg=0,lz,cz,Vl,Wl,mo={point:Qf,lineStart:HF,lineEnd:KF,polygonStart:function(){mo.lineStart=u2e,mo.lineEnd=f2e},polygonEnd:function(){mo.point=Qf,mo.lineStart=HF,mo.lineEnd=KF},result:function(){var e=rg?[gO/rg,xO/rg]:em?[g1/em,x1/em]:ng?[mO/ng,hO/ng]:[NaN,NaN];return mO=hO=ng=g1=x1=em=gO=xO=rg=0,e}};function Qf(e,t){mO+=e,hO+=t,++ng}function HF(){mo.point=c2e}function c2e(e,t){mo.point=d2e,Qf(Vl=e,Wl=t)}function d2e(e,t){var n=e-Vl,r=t-Wl,s=Yk(n*n+r*r);g1+=s*(Vl+e)/2,x1+=s*(Wl+t)/2,em+=s,Qf(Vl=e,Wl=t)}function KF(){mo.point=Qf}function u2e(){mo.point=p2e}function f2e(){dz(lz,cz)}function p2e(e,t){mo.point=dz,Qf(lz=Vl=e,cz=Wl=t)}function dz(e,t){var n=e-Vl,r=t-Wl,s=Yk(n*n+r*r);g1+=s*(Vl+e)/2,x1+=s*(Wl+t)/2,em+=s,s=Wl*e-Vl*t,gO+=s*(Vl+e),xO+=s*(Wl+t),rg+=s*3,Qf(Vl=e,Wl=t)}function uz(e){this._context=e}uz.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,YSe);break}}},result:yo};var bO=new km,WA,fz,pz,ag,sg,mx={point:yo,lineStart:function(){mx.point=m2e},lineEnd:function(){WA&&mz(fz,pz),mx.point=yo},polygonStart:function(){WA=!0},polygonEnd:function(){WA=null},result:function(){var e=+bO;return bO=new km,e}};function m2e(e,t){mx.point=mz,fz=ag=e,pz=sg=t}function mz(e,t){ag-=e,sg-=t,bO.add(Yk(ag*ag+sg*sg)),ag=e,sg=t}let zF,b1,qF,VF;class WF{constructor(t){this._append=t==null?hz:h2e(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==qF||this._append!==b1){const r=this._radius,s=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,qF=r,b1=this._append,VF=this._,this._=s}this._+=VF;break}}}result(){const t=this._;return this._="",t.length?t:null}}function hz(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function h2e(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return hz;if(t!==zF){const n=10**t;zF=t,b1=function(s){let i=1;this._+=s[0];for(const o=s.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+s[i]}}return b1}function g2e(e,t){let n=3,r=4.5,s,i;function o(l){return l&&(typeof r=="function"&&i.pointRadius(+r.apply(this,arguments)),Kp(l,s(i))),i.result()}return o.area=function(l){return Kp(l,s(Xc)),Xc.result()},o.measure=function(l){return Kp(l,s(mx)),mx.result()},o.bounds=function(l){return Kp(l,s(h1)),h1.result()},o.centroid=function(l){return Kp(l,s(mo)),mo.result()},o.projection=function(l){return arguments.length?(s=l==null?(e=null,dO):(e=l).stream,o):e},o.context=function(l){return arguments.length?(i=l==null?(t=null,new WF(n)):new uz(t=l),typeof r!="function"&&i.pointRadius(r),o):t},o.pointRadius=function(l){return arguments.length?(r=typeof l=="function"?l:(i.pointRadius(+l),+l),o):r},o.digits=function(l){if(!arguments.length)return n;if(l==null)n=null;else{const c=Math.floor(l);if(!(c>=0))throw new RangeError(`invalid digits: ${l}`);n=c}return t===null&&(i=new WF(n)),o},o.projection(e).digits(n).context(t)}function x2e(e){return function(t){var n=new yO;for(var r in e)n[r]=e[r];return n.stream=t,n}}function yO(){}yO.prototype={constructor:yO,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Qk(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Kp(n,e.stream(h1)),t(h1.result()),r!=null&&e.clipExtent(r),e}function gz(e,t,n){return Qk(e,function(r){var s=t[1][0]-t[0][0],i=t[1][1]-t[0][1],o=Math.min(s/(r[1][0]-r[0][0]),i/(r[1][1]-r[0][1])),l=+t[0][0]+(s-o*(r[1][0]+r[0][0]))/2,c=+t[0][1]+(i-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([l,c])},n)}function b2e(e,t,n){return gz(e,[[0,0],t],n)}function y2e(e,t,n){return Qk(e,function(r){var s=+t,i=s/(r[1][0]-r[0][0]),o=(s-i*(r[1][0]+r[0][0]))/2,l=-i*r[0][1];e.scale(150*i).translate([o,l])},n)}function v2e(e,t,n){return Qk(e,function(r){var s=+t,i=s/(r[1][1]-r[0][1]),o=-i*r[0][0],l=(s-i*(r[1][1]+r[0][1]))/2;e.scale(150*i).translate([o,l])},n)}function N2e(){var e=1,t=0,n=0,r=1,s=1,i=0,o,l,c=null,u,m,p,g=1,x=1,y=x2e({point:function(_,A){var T=C([_,A]);this.stream.point(T[0],T[1])}}),v=dO,N,S;function j(){return g=e*r,x=e*s,N=S=null,C}function C(_){var A=_[0]*g,T=_[1]*x;if(i){var R=T*o-A*l;A=A*o+T*l,T=R}return[A+t,T+n]}return C.invert=function(_){var A=_[0]-t,T=_[1]-n;if(i){var R=T*o+A*l;A=A*o-T*l,T=R}return[A/g,T/x]},C.stream=function(_){return N&&S===_?N:N=y(v(S=_))},C.postclip=function(_){return arguments.length?(v=_,c=u=m=p=null,j()):v},C.clipExtent=function(_){return arguments.length?(v=_==null?(c=u=m=p=null,dO):a2e(c=+_[0][0],u=+_[0][1],m=+_[1][0],p=+_[1][1]),j()):c==null?null:[[c,u],[m,p]]},C.scale=function(_){return arguments.length?(e=+_,j()):e},C.translate=function(_){return arguments.length?(t=+_[0],n=+_[1],j()):[t,n]},C.angle=function(_){return arguments.length?(i=_%360*XSe,l=ZSe(i),o=JSe(i),j()):i*QSe},C.reflectX=function(_){return arguments.length?(r=_?-1:1,j()):r<0},C.reflectY=function(_){return arguments.length?(s=_?-1:1,j()):s<0},C.fitExtent=function(_,A){return gz(C,_,A)},C.fitSize=function(_,A){return b2e(C,_,A)},C.fitWidth=function(_,A){return y2e(C,_,A)},C.fitHeight=function(_,A){return v2e(C,_,A)},C}function S2e(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const E2e=e=>Dle(e[e.length-1]);var j2e=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(S2e);const w2e=E2e(j2e),ey=e=>()=>e;function A2e(e,{sourceEvent:t,target:n,transform:r,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function td(e,t,n){this.k=e,this.x=t,this.y=n}td.prototype={constructor:td,scale:function(e){return e===1?this:new td(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new td(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var y1=new td(1,0,0);td.prototype;function YA(e){e.stopImmediatePropagation()}function I0(e){e.preventDefault(),e.stopImmediatePropagation()}function _2e(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function C2e(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function YF(){return this.__zoom||y1}function T2e(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function O2e(){return navigator.maxTouchPoints||"ontouchstart"in this}function R2e(e,t,n){var r=e.invertX(t[0][0])-n[0][0],s=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s),o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o))}function k2e(){var e=_2e,t=C2e,n=R2e,r=T2e,s=O2e,i=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,c=Yle,u=Gk("start","zoom","end"),m,p,g,x=500,y=150,v=0,N=10;function S(I){I.property("__zoom",YF).on("wheel.zoom",M,{passive:!1}).on("mousedown.zoom",P).on("dblclick.zoom",$).filter(s).on("touchstart.zoom",w).on("touchmove.zoom",U).on("touchend.zoom touchcancel.zoom",X).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}S.transform=function(I,G,L,H){var F=I.selection?I.selection():I;F.property("__zoom",YF),I!==F?A(I,G,L,H):F.interrupt().each(function(){T(this,arguments).event(H).start().zoom(null,typeof G=="function"?G.apply(this,arguments):G).end()})},S.scaleBy=function(I,G,L,H){S.scaleTo(I,function(){var F=this.__zoom.k,K=typeof G=="function"?G.apply(this,arguments):G;return F*K},L,H)},S.scaleTo=function(I,G,L,H){S.transform(I,function(){var F=t.apply(this,arguments),K=this.__zoom,ne=L==null?_(F):typeof L=="function"?L.apply(this,arguments):L,V=K.invert(ne),ee=typeof G=="function"?G.apply(this,arguments):G;return n(C(j(K,ee),ne,V),F,o)},L,H)},S.translateBy=function(I,G,L,H){S.transform(I,function(){return n(this.__zoom.translate(typeof G=="function"?G.apply(this,arguments):G,typeof L=="function"?L.apply(this,arguments):L),t.apply(this,arguments),o)},null,H)},S.translateTo=function(I,G,L,H,F){S.transform(I,function(){var K=t.apply(this,arguments),ne=this.__zoom,V=H==null?_(K):typeof H=="function"?H.apply(this,arguments):H;return n(y1.translate(V[0],V[1]).scale(ne.k).translate(typeof G=="function"?-G.apply(this,arguments):-G,typeof L=="function"?-L.apply(this,arguments):-L),K,o)},H,F)};function j(I,G){return G=Math.max(i[0],Math.min(i[1],G)),G===I.k?I:new td(G,I.x,I.y)}function C(I,G,L){var H=G[0]-L[0]*I.k,F=G[1]-L[1]*I.k;return H===I.x&&F===I.y?I:new td(I.k,H,F)}function _(I){return[(+I[0][0]+ +I[1][0])/2,(+I[0][1]+ +I[1][1])/2]}function A(I,G,L,H){I.on("start.zoom",function(){T(this,arguments).event(H).start()}).on("interrupt.zoom end.zoom",function(){T(this,arguments).event(H).end()}).tween("zoom",function(){var F=this,K=arguments,ne=T(F,K).event(H),V=t.apply(F,K),ee=L==null?_(V):typeof L=="function"?L.apply(F,K):L,ae=Math.max(V[1][0]-V[0][0],V[1][1]-V[0][1]),ue=F.__zoom,ce=typeof G=="function"?G.apply(F,K):G,Z=c(ue.invert(ee).concat(ae/ue.k),ce.invert(ee).concat(ae/ce.k));return function(ie){if(ie===1)ie=ce;else{var Se=Z(ie),fe=ae/Se[2];ie=new td(fe,ee[0]-Se[0]*fe,ee[1]-Se[1]*fe)}ne.zoom(null,ie)}})}function T(I,G,L){return!L&&I.__zooming||new R(I,G)}function R(I,G){this.that=I,this.args=G,this.active=0,this.sourceEvent=null,this.extent=t.apply(I,G),this.taps=0}R.prototype={event:function(I){return I&&(this.sourceEvent=I),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(I,G){return this.mouse&&I!=="mouse"&&(this.mouse[1]=G.invert(this.mouse[0])),this.touch0&&I!=="touch"&&(this.touch0[1]=G.invert(this.touch0[0])),this.touch1&&I!=="touch"&&(this.touch1[1]=G.invert(this.touch1[0])),this.that.__zoom=G,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(I){var G=Qc(this.that).datum();u.call(I,this.that,new A2e(I,{sourceEvent:this.sourceEvent,target:S,transform:this.that.__zoom,dispatch:u}),G)}};function M(I,...G){if(!e.apply(this,arguments))return;var L=T(this,G).event(I),H=this.__zoom,F=Math.max(i[0],Math.min(i[1],H.k*Math.pow(2,r.apply(this,arguments)))),K=fu(I);if(L.wheel)(L.mouse[0][0]!==K[0]||L.mouse[0][1]!==K[1])&&(L.mouse[1]=H.invert(L.mouse[0]=K)),clearTimeout(L.wheel);else{if(H.k===F)return;L.mouse=[K,H.invert(K)],Py(this),L.start()}I0(I),L.wheel=setTimeout(ne,y),L.zoom("mouse",n(C(j(H,F),L.mouse[0],L.mouse[1]),L.extent,o));function ne(){L.wheel=null,L.end()}}function P(I,...G){if(g||!e.apply(this,arguments))return;var L=I.currentTarget,H=T(this,G,!0).event(I),F=Qc(I.view).on("mousemove.zoom",ee,!0).on("mouseup.zoom",ae,!0),K=fu(I,L),ne=I.clientX,V=I.clientY;MNe(I.view),YA(I),H.mouse=[K,this.__zoom.invert(K)],Py(this),H.start();function ee(ue){if(I0(ue),!H.moved){var ce=ue.clientX-ne,Z=ue.clientY-V;H.moved=ce*ce+Z*Z>v}H.event(ue).zoom("mouse",n(C(H.that.__zoom,H.mouse[0]=fu(ue,L),H.mouse[1]),H.extent,o))}function ae(ue){F.on("mousemove.zoom mouseup.zoom",null),LNe(ue.view,H.moved),I0(ue),H.event(ue).end()}}function $(I,...G){if(e.apply(this,arguments)){var L=this.__zoom,H=fu(I.changedTouches?I.changedTouches[0]:I,this),F=L.invert(H),K=L.k*(I.shiftKey?.5:2),ne=n(C(j(L,K),H,F),t.apply(this,G),o);I0(I),l>0?Qc(this).transition().duration(l).call(A,ne,H,I):Qc(this).call(S.transform,ne,H,I)}}function w(I,...G){if(e.apply(this,arguments)){var L=I.touches,H=L.length,F=T(this,G,I.changedTouches.length===H).event(I),K,ne,V,ee;for(YA(I),ne=0;ne<H;++ne)V=L[ne],ee=fu(V,this),ee=[ee,this.__zoom.invert(ee),V.identifier],F.touch0?!F.touch1&&F.touch0[2]!==ee[2]&&(F.touch1=ee,F.taps=0):(F.touch0=ee,K=!0,F.taps=1+!!m);m&&(m=clearTimeout(m)),K&&(F.taps<2&&(p=ee[0],m=setTimeout(function(){m=null},x)),Py(this),F.start())}}function U(I,...G){if(this.__zooming){var L=T(this,G).event(I),H=I.changedTouches,F=H.length,K,ne,V,ee;for(I0(I),K=0;K<F;++K)ne=H[K],V=fu(ne,this),L.touch0&&L.touch0[2]===ne.identifier?L.touch0[0]=V:L.touch1&&L.touch1[2]===ne.identifier&&(L.touch1[0]=V);if(ne=L.that.__zoom,L.touch1){var ae=L.touch0[0],ue=L.touch0[1],ce=L.touch1[0],Z=L.touch1[1],ie=(ie=ce[0]-ae[0])*ie+(ie=ce[1]-ae[1])*ie,Se=(Se=Z[0]-ue[0])*Se+(Se=Z[1]-ue[1])*Se;ne=j(ne,Math.sqrt(ie/Se)),V=[(ae[0]+ce[0])/2,(ae[1]+ce[1])/2],ee=[(ue[0]+Z[0])/2,(ue[1]+Z[1])/2]}else if(L.touch0)V=L.touch0[0],ee=L.touch0[1];else return;L.zoom("touch",n(C(ne,V,ee),L.extent,o))}}function X(I,...G){if(this.__zooming){var L=T(this,G).event(I),H=I.changedTouches,F=H.length,K,ne;for(YA(I),g&&clearTimeout(g),g=setTimeout(function(){g=null},x),K=0;K<F;++K)ne=H[K],L.touch0&&L.touch0[2]===ne.identifier?delete L.touch0:L.touch1&&L.touch1[2]===ne.identifier&&delete L.touch1;if(L.touch1&&!L.touch0&&(L.touch0=L.touch1,delete L.touch1),L.touch0)L.touch0[1]=this.__zoom.invert(L.touch0[0]);else if(L.end(),L.taps===2&&(ne=fu(ne,this),Math.hypot(p[0]-ne[0],p[1]-ne[1])<N)){var V=Qc(this).on("dblclick.zoom");V&&V.apply(this,arguments)}}}return S.wheelDelta=function(I){return arguments.length?(r=typeof I=="function"?I:ey(+I),S):r},S.filter=function(I){return arguments.length?(e=typeof I=="function"?I:ey(!!I),S):e},S.touchable=function(I){return arguments.length?(s=typeof I=="function"?I:ey(!!I),S):s},S.extent=function(I){return arguments.length?(t=typeof I=="function"?I:ey([[+I[0][0],+I[0][1]],[+I[1][0],+I[1][1]]]),S):t},S.scaleExtent=function(I){return arguments.length?(i[0]=+I[0],i[1]=+I[1],S):[i[0],i[1]]},S.translateExtent=function(I){return arguments.length?(o[0][0]=+I[0][0],o[1][0]=+I[1][0],o[0][1]=+I[0][1],o[1][1]=+I[1][1],S):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},S.constrain=function(I){return arguments.length?(n=I,S):n},S.duration=function(I){return arguments.length?(l=+I,S):l},S.interpolate=function(I){return arguments.length?(c=I,S):c},S.on=function(){var I=u.on.apply(u,arguments);return I===u?S:I},S.clickDistance=function(I){return arguments.length?(v=(I=+I)*I,S):Math.sqrt(v)},S.tapDistance=function(I){return arguments.length?(N=+I,S):N},S}function I2e(){const e=h.useRef(null),[t,n]=h.useState({width:0,height:0});return h.useEffect(()=>{if(!e.current)return;const r=e.current,s=r.getBoundingClientRect();s.width>0&&s.height>0&&n({width:s.width,height:s.height});const i=new ResizeObserver(o=>{const l=o[0];if(!l)return;const{width:c,height:u}=l.contentRect;n({width:c,height:u})});return i.observe(r),()=>i.disconnect()},[]),{ref:e,width:t.width,height:t.height}}const Qs=e=>`${e.level}:${e.code}`,Qr=e=>String(e??"").trim(),QF=e=>e==="ctprvn"?"REGION":e==="sig"?"SIGUNGU":"EUPMYEONDONG",Uc=e=>{if(!e)return null;const t=e.split(":");return t.length>=2?t.slice(1).join(":").trim()||null:Qr(e)||null},ty=50;function QA(e){return Qr(e?.properties?.code??e?.properties?.adm_cd??e?.properties?.ADM_CD??e?.properties?.sggnm_cd??e?.properties?.SGGNM_CD??e?.properties?.sigungu_cd??e?.properties?.SIGUNGU_CD??e?.properties?.emd_cd??e?.properties?.EMD_CD??e?.properties?.CTPRVN_CD??e?.properties?.SIG_CD??e?.properties?.EMD_CD??"")}function XF(e){return String(e?.properties?.name??e?.properties?.CTP_KOR_NM??e?.properties?.SIG_KOR_NM??e?.properties?.EMD_KOR_NM??"-")}function D2e({level:e,features:t,stats:n,onSelect:r,indicatorLabel:s="",unit:i="",year:o,valueFormatter:l,colorPalette:c,getTooltipExtraLines:u}){const{ref:m,width:p,height:g}=I2e(),[x,y]=h.useState(null),[v,N]=h.useState(null),S=h.useRef(null),j=h.useRef(null),C=h.useRef(null),_=h.useRef(null),[A,T]=h.useState(y1),R=12,M=8,P=h.useMemo(()=>new Map(n.map(H=>[H.code,H.value])),[n]),$=h.useMemo(()=>({type:"FeatureCollection",features:t}),[t]),w=h.useMemo(()=>{const H=n.map(V=>V.value),F=H.length?Math.min(...H):0,K=H.length?Math.max(...H):100,ne=F===K?[F-1,K+1]:[F,K];return c&&c.length>0?mk().domain(ne).range(c):Ek(V=>w2e(.15+.85*V)).domain(ne)},[n,c]),U=h.useMemo(()=>p<ty||g<ty||!t.length?null:N2e().reflectY(!0).fitSize([p,g],$),[p,g,$,t.length]),X=h.useMemo(()=>U?g2e(U):null,[U]),I=h.useMemo(()=>X?t.map(H=>{const F=QA(H),K=XF(H),[ne,V]=X.centroid(H);return{code:F,name:K,x:ne,y:V}}):[],[t,X]),G=H=>{C.current&&Qc(C.current).attr("transform",H.toString()),T(H)};h.useEffect(()=>{if(!j.current)return;const H=k2e().scaleExtent([1,5]).on("zoom",K=>{G(K.transform)});Qc(j.current).call(H),_.current=H},[p,g]);const L=H=>{const F=QA(H);F&&(e==="ctprvn"?r("sig",F):e==="sig"&&r("emd",F))};return a.jsxs("div",{ref:m,className:"relative w-full h-full",children:[p<ty||g<ty||!X?a.jsx("div",{className:"p-3 text-sm text-gray-500",children:t.length===0?"  .":"    ."}):a.jsxs("svg",{ref:j,width:p,height:g,className:"block",style:{touchAction:"none",cursor:"grab"},onWheel:H=>{H.preventDefault();const F=H.deltaY>0?.9:1.1,K=Math.max(1,Math.min(5,A.k*F)),ne=fu(H,j.current),V=ne[0]-(ne[0]-A.x)/A.k*K,ee=ne[1]-(ne[1]-A.y)/A.k*K;G(y1.translate(V,ee).scale(K))},children:[a.jsx("rect",{width:p,height:g,fill:"transparent",style:{pointerEvents:"all"}}),a.jsxs("g",{ref:C,transform:`translate(${A.x}, ${A.y}) scale(${A.k})`,children:[t.map(H=>{const F=QA(H),K=P.get(F)??0,ne=w(K),V=X(H)||void 0,ee=v===F;return a.jsx("path",{d:V,fill:ne,stroke:ee?"#0b1020":"#111827",strokeWidth:ee?2.2:.9,fillOpacity:v&&!ee?.65:.95,style:{cursor:e==="emd"?"default":"pointer",...ee?{filter:"drop-shadow(0 3px 6px rgba(15, 23, 42, 0.35))"}:{}},onMouseMove:ae=>{const ue=m.current?.getBoundingClientRect();if(!ue)return;const ce=ae.clientX-ue.left,Z=ae.clientY-ue.top,ie=S.current?.offsetWidth??240,Se=S.current?.offsetHeight??120;let fe=ce+R,Te=Z+R;fe+ie+M>p&&(fe=ce-ie-R),Te+Se+M>g&&(Te=Z-Se-R),fe<M&&(fe=M),Te<M&&(Te=M),y({x:fe,y:Te,name:XF(H),value:K,code:F}),N(F)},onMouseLeave:()=>{y(null),N(null)},onClick:()=>L(H)},F)}),I.map(H=>a.jsx("text",{x:H.x,y:H.y,fontSize:e==="ctprvn"?12:10,fill:"#1e3a8a",textAnchor:"middle",pointerEvents:"none",style:{paintOrder:"stroke",stroke:"#fff",strokeWidth:3},children:H.name},`label-${H.code}`))]})]}),x&&a.jsxs("div",{ref:S,className:"pointer-events-none absolute z-[80] max-w-[260px] rounded-lg border border-slate-200 bg-white px-3 py-2 text-xs text-slate-900 shadow-2xl",style:{left:x.x,top:x.y},children:[a.jsx("div",{className:"text-sm font-semibold mb-1",children:x.name}),a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsx("span",{className:"text-[11px] text-slate-500",children:s}),a.jsxs("span",{className:"text-base font-bold",children:[l?l(x.value):x.value,!l&&i?a.jsxs("span",{className:"text-xs ml-1",children:["(",i,")"]}):null]})]}),typeof o=="number"&&a.jsxs("div",{className:"mt-1 text-[11px] text-slate-500",children:[": ",o,""]}),u?.({level:e,code:x.code,name:x.name,value:x.value}).slice(0,3).map((H,F)=>a.jsx("div",{className:"mt-1 text-[11px] text-slate-500",children:H},F))]})]})}const JF=[{id:"total_cases",label:"  ",unit:"",scale:[120,2200]},{id:"completion",label:" ",unit:"%",scale:[60,98]},{id:"referral",label:"SLA ",unit:"%",scale:[85,99]},{id:"consultation_time",label:"SLA ",unit:"%",scale:[1,15]},{id:"wait_time",label:" ",unit:"",scale:[6,40]},{id:"recontact",label:" ",unit:"%",scale:[80,99]},{id:"followup_dropout",label:" ",unit:"%",scale:[1,20]},{id:"high_risk_rate",label:" ",unit:"%",scale:[5,35]},{id:"screening_coverage",label:"1  ",unit:"%",scale:[50,95]},{id:"dropout",label:"  ",unit:"%",scale:[3,25]},{id:"waitlist_pressure",label:"/ ",unit:"",scale:[30,95]},{id:"accessibility_score",label:" ",unit:"",scale:[40,98]},{id:"regional_sla_violation",label:" SLA ",unit:"%",scale:[2,34]},{id:"regional_queue_risk",label:"  ",unit:"",scale:[15,95]},{id:"regional_recontact_rate",label:"  ",unit:"%",scale:[4,38]},{id:"regional_data_readiness",label:"  ",unit:"%",scale:[62,99]},{id:"regional_governance_missing",label:"  ",unit:"%",scale:[1,28]},{id:"regional_ad_transition_hotspot",label:" AD   ",unit:"",scale:[18,92]},{id:"regional_dx_delay_hotspot",label:"   ",unit:"",scale:[9,68]},{id:"regional_screen_to_dx_rate",label:"  ",unit:"%",scale:[34,91]}];function P2e(e){return JF.find(t=>t.id===e)??JF[0]}function io(e,t){return t.unit==="%"?`${e.toFixed(1)}%`:t.unit===""?`${Math.round(e)}`:t.unit===""?`${Math.round(e)}`:t.unit===""?`${Math.round(e)}`:`${Math.round(e)}${t.unit}`}const xz=e=>{let t=0;for(let n=0;n<e.length;n+=1)t=t*31+e.charCodeAt(n)>>>0;return t},M2e=(e,t,n)=>Math.min(n,Math.max(t,e)),L2e=e=>xz(e)%1e4/1e4,Bc=(e,t,n)=>t+L2e(e)*(n-t),bz=(e,t,n)=>{if(!n.length)return[];const[r,s]=t.scale,i=s-r,o=n.length,l=Math.max(1,o-1),c=`${e}-${t.id}`,u=Bc(`${c}-base`,r+i*.2,s-i*.2),m=Bc(`${c}-slope`,-i*.045,i*.045),p=Bc(`${c}-amp`,i*.04,i*.14),g=Bc(`${c}-phase`,0,Math.PI*2),x=i*.03,y=Math.round(Bc(`${c}-shock-index`,1,Math.max(1,o-2))),v=Bc(`${c}-shock-sign`,-1,1)>=0?1:-1,N=Bc(`${c}-shock-amp`,i*.06,i*.18)*v,S=Bc(`${c}-shock-rec`,.38,.72);return n.map((j,C)=>{const _=(C-l/2)*m,A=Math.sin(C/l*Math.PI*2+g)*p,T=Math.sin(C/l*Math.PI+g*.35)*p*.35,R=Bc(`${c}-noise-${j}`,-x,x);let M=0;C===y&&(M+=N),C===y-1&&(M+=N*.22),C===y+1&&(M-=N*S),C===y+2&&(M-=N*S*.35);const P=M2e(u+_+A+T+R+M,r,s);return{year:j,value:Number(P.toFixed(1))}})},$2e=e=>Qr(e?.properties?.code??e?.properties?.adm_cd??e?.properties?.ADM_CD??e?.properties?.sggnm_cd??e?.properties?.SGGNM_CD??e?.properties?.sigungu_cd??e?.properties?.SIGUNGU_CD??e?.properties?.emd_cd??e?.properties?.EMD_CD??e?.properties?.CTPRVN_CD??e?.properties?.SIG_CD??e?.properties?.EMD_CD??""),F2e=e=>String(e?.properties?.name??e?.properties?.CTP_KOR_NM??e?.properties?.SIG_KOR_NM??e?.properties?.EMD_KOR_NM??"-"),U2e=(e,t,n)=>{const r=e.map(i=>{const o=$2e(i),l=F2e(i),c=bz(o,t,[n-1,n]),u=c[0]?.value??t.scale[0],m=c[1]?.value??u,p=m-u;return{code:o,name:l,value:m,yoy:p,rank:0}});return[...r].sort((i,o)=>o.value-i.value).forEach((i,o)=>{i.rank=o+1}),r},B2e=(e,t,n)=>bz(e,t,n),G2e=e=>{const n=40+xz(e)%40,r=100-n;return[{name:"",value:n},{name:"",value:r}]},hu={blue:["#eff6ff","#bfdbfe","#93c5fd","#60a5fa","#3b82f6","#2563eb","#1d4ed8"],red:["#fef2f2","#fecaca","#fca5a5","#f87171","#ef4444","#dc2626","#b91c1c"],green:["#f0fdf4","#bbf7d0","#86efac","#4ade80","#22c55e","#16a34a","#15803d"],teal:["#f0fdfa","#ccfbf1","#99f6e4","#5eead4","#2dd4bf","#14b8a6","#0f766e"],orange:["#fff7ed","#fed7aa","#fdba74","#fb923c","#f97316","#ea580c","#c2410c"],purple:["#faf5ff","#e9d5ff","#d8b4fe","#c084fc","#a855f7","#9333ea","#7e22ce"],heat:["#fef3c7","#fde68a","#fcd34d","#fbbf24","#f59e0b","#d97706","#b45309"],risk:["#ecfdf3","#bbf7d0","#86efac","#fde68a","#fbbf24","#f97316","#dc2626"]};class H2e{values;mode;steps;colors;bins;constructor(t,n="quantile",r=6,s="blue"){this.values=t.filter(i=>i!=null&&!isNaN(i)).sort((i,o)=>i-o),this.mode=n,this.steps=Math.min(r,this.values.length),this.colors=hu[s].slice(0,this.steps),this.bins=this.buildBins()}buildBins(){if(this.values.length===0)return[];const t=[],n=Math.min(...this.values),r=Math.max(...this.values);if(this.mode==="quantile")for(let s=0;s<this.steps;s++){const i=Math.floor(s/this.steps*this.values.length),o=Math.floor((s+1)/this.steps*this.values.length)-1,l=this.values[i],c=this.values[Math.min(o,this.values.length-1)];this.values.filter(u=>u>=l&&(s===this.steps-1?u<=c:u<(t[s-1]?.max??l))).length,t.push({min:l,max:c,color:this.colors[s],count:Math.max(1,Math.floor(this.values.length/this.steps))})}else{const s=(r-n)/this.steps;for(let i=0;i<this.steps;i++){const o=n+s*i,l=i===this.steps-1?r:n+s*(i+1),c=this.values.filter(u=>u>=o&&u<=l).length;t.push({min:Math.round(o),max:Math.round(l),color:this.colors[i],count:c})}}return t}getColor(t){if(t==null||isNaN(t))return"#e5e7eb";for(let n=0;n<this.bins.length;n++){const r=this.bins[n];if(t>=r.min&&(n===this.bins.length-1?t<=r.max:t<this.bins[n+1]?.min))return r.color}return t<this.bins[0]?.min?this.colors[0]:this.colors[this.colors.length-1]}getLegendBins(){return this.bins}getStats(){if(this.values.length===0)return{min:0,max:0,avg:0,median:0,total:0};const t=this.values.reduce((r,s)=>r+s,0),n=Math.floor(this.values.length/2);return{min:Math.min(...this.values),max:Math.max(...this.values),avg:Math.round(t/this.values.length),median:this.values.length%2?this.values[n]:Math.round((this.values[n-1]+this.values[n])/2),total:t}}}function ny(e,t){if(e==null||isNaN(e))return"-";const n=e>=1e4?`${(e/1e4).toFixed(1)}`:e>=1e3?`${(e/1e3).toFixed(1)}`:e.toLocaleString();return t?`${n}${t}`:n}const K2e={blue:" (Blue)",green:" (Green)",teal:" (Teal)",purple:" (Purple)",orange:" (Orange)",red:" (Red)",heat:" (Heat)",risk:" ()"},ZF=e=>hu[e],XA={ctprvn:"https://raw.githubusercontent.com/southkorea/southkorea-maps/master/kostat/2018/json/skorea-provinces-2018-geo.json",sig:"https://raw.githubusercontent.com/southkorea/southkorea-maps/master/kostat/2018/json/skorea-municipalities-2018-geo.json",emd:"https://raw.githubusercontent.com/southkorea/southkorea-maps/master/kostat/2018/json/skorea-submunicipalities-2018-geo.json"},e7={ctprvn:"",sig:"//",emd:"//"};function Pi(e){return Qr(e?.properties?.code??e?.properties?.adm_cd??e?.properties?.ADM_CD??e?.properties?.sggnm_cd??e?.properties?.SGGNM_CD??e?.properties?.sigungu_cd??e?.properties?.SIGUNGU_CD??e?.properties?.emd_cd??e?.properties?.EMD_CD??e?.properties?.CTPRVN_CD??e?.properties?.SIG_CD??e?.properties?.EMD_CD??"")}function Ho(e){return String(e?.properties?.name??e?.properties?.CTP_KOR_NM??e?.properties?.SIG_KOR_NM??e?.properties?.EMD_KOR_NM??"-")}function JA(e,t){return e.map(n=>{const r=Pi(n),s=Ho(n),i={level:t,code:r};return{...n,id:Qs(i),properties:{...n.properties,code:r,name:s,level:t,regionId:Qs(i)}}})}function ZA(e,t=[]){return t.length?e.filter(n=>{const r=Pi(n);return t.some(s=>r.startsWith(s))}):e}function Xk({title:e,indicatorId:t,year:n=2026,scope:r={mode:"national"},fixedLevel:s,lockedSigCode:i,lockedSigName:o,hideBreadcrumb:l=!1,hintText:c,variant:u="default",mapHeight:m=420,className:p,externalLevel:g,externalSelectedCode:x,onRegionSelect:y,onGoBack:v,externalColorScheme:N,hideLegendPanel:S=!1,onSubRegionsChange:j,getTooltipExtraLines:C}){const _=P2e(t),A=JSON.stringify(r),T=r.mode==="regional",R=u==="portal",[M,P]=h.useState(null),[$,w]=h.useState(null),[U,X]=h.useState(null),[I,G]=h.useState(!0),[L,H]=h.useState(null),F=h.useMemo(()=>{const Ke=r.ctprvnCodes?.[0];if(!M||Ke&&M.some(Me=>Pi(Me)===Ke)||!r.label)return Ke;const Be=M.find(Me=>{const xt=Ho(Me);return xt===r.label||xt.includes(r.label)||r.label.includes(xt)});return Be?Pi(Be):Ke},[M,r.ctprvnCodes,r.label]),K=F?[F]:r.ctprvnCodes,ne=K?.[0],V=T&&K?.length===1?"sig":"ctprvn",[ee,ae]=h.useState(V),[ue,ce]=h.useState({ctprvn:ne}),[Z,ie]=h.useState({}),[Se,fe]=h.useState("blue"),[Te,Pe]=h.useState(!0),[oe,le]=h.useState(!0),[ye,_e]=h.useState(!1),te=h.useRef(""),z=N??Se;h.useEffect(()=>{let Ke=!0;return(async()=>{G(!0),H(null);try{const[Me,xt,Le]=await Promise.all([fetch(XA.ctprvn),fetch(XA.sig),fetch(XA.emd)]),[$t,Bt,Zn]=await Promise.all([Me.json(),xt.json(),Le.json()]);if(!Ke)return;P(JA($t?.features??[],"REGION")),w(JA(Bt?.features??[],"SIGUNGU")),X(JA(Zn?.features??[],"EUPMYEONDONG"))}catch{if(!Ke)return;H("    .")}finally{Ke&&G(!1)}})(),()=>{Ke=!1}},[]),h.useEffect(()=>{ae(s??V),ce({ctprvn:K?.[0]}),ie(r.label?{ctprvn:r.label}:{})},[A,r.label,V,K?.[0],s]),h.useEffect(()=>{s&&ee!==s&&ae(s)},[s,ee]),h.useEffect(()=>{i&&(ce(Ke=>({...Ke,sig:i})),o&&ie(Ke=>({...Ke,sig:o})))},[i,o]),h.useEffect(()=>{if(T&&K?.length){const Ke=K[0];ue.ctprvn!==Ke&&ce({ctprvn:Ke})}},[T,ue.ctprvn,K]),h.useEffect(()=>{T&&r.label&&!Z.ctprvn&&ie(Ke=>({...Ke,ctprvn:r.label}))},[T,r.label,Z.ctprvn]),h.useEffect(()=>{T&&K?.length&&ee==="ctprvn"&&ae("sig")},[T,K,ee]),h.useEffect(()=>{if(g){if(g==="ctprvn"){ae("ctprvn"),ce({}),ie({});return}if(g==="sig"&&x){const Ke=x.slice(0,2),Be=x.length>2?x.slice(0,5):void 0;ae("sig"),ce({ctprvn:Ke,...Be?{sig:Be}:{}});const Me=M?.find(Le=>Pi(Le).startsWith(Ke)),xt=Be?$?.find(Le=>Pi(Le)===Be):void 0;Me&&ie({ctprvn:Ho(Me),...xt?{sig:Ho(xt)}:{}});return}if(g==="emd"&&x){const Ke=x.slice(0,2),Be=x.slice(0,5),Me=x.length>5?x:void 0;ae("emd"),ce({ctprvn:Ke,sig:Be,...Me?{emd:Me}:{}});const xt=M?.find(Bt=>Pi(Bt).startsWith(Ke)),Le=$?.find(Bt=>Pi(Bt)===Be),$t=Me?U?.find(Bt=>Pi(Bt)===Me):void 0;ie({ctprvn:xt?Ho(xt):void 0,sig:Le?Ho(Le):void 0,...$t?{emd:Ho($t)}:{}});return}}},[g,x,M,$,U]);const Ne=h.useMemo(()=>M?ZA(M,K):[],[M,K]),me=h.useMemo(()=>{if(!$)return[];const Ke=T?K?.[0]:ue.ctprvn;return Ke?ZA($,[Ke]):[]},[$,ue.ctprvn,K,T]),xe=h.useMemo(()=>{const Ke=i??ue.sig;return!U||!Ke?[]:ZA(U,[Ke])},[U,ue.sig,i]);h.useEffect(()=>{if(ee!=="sig"||ue.sig||!me.length)return;const Ke=me[0],Be=Pi(Ke);Be&&(ce(Me=>({ctprvn:Me.ctprvn,sig:Be})),ie(Me=>({ctprvn:Me.ctprvn,sig:Ho(Ke)})))},[ee,me,ue.sig]),h.useEffect(()=>{if(ee!=="emd"||ue.emd||!xe.length)return;const Ke=xe[0],Be=Pi(Ke);Be&&(ce(Me=>({...Me,emd:Be})),ie(Me=>({...Me,emd:Ho(Ke)})))},[ee,xe,ue.emd]);const et=h.useMemo(()=>ee==="ctprvn"?Ne:ee==="sig"?me:xe,[ee,Ne,me,xe]);h.useEffect(()=>{if(!j||!et.length)return;const Ke=QF(ee),Be=new Set,Me=et.map(Le=>{const $t=Pi(Le),Bt=Ho(Le);return{code:$t,name:Bt,regionKey:{level:Ke,code:$t,name:Bt},regionId:Qs({level:Ke,code:$t})}}).filter(Le=>!Le.code||Be.has(Le.code)?!1:(Be.add(Le.code),!0));if(!Me.length)return;const xt=`${Ke}|${Me.slice().sort((Le,$t)=>Le.code.localeCompare($t.code,"ko-KR")).map(Le=>`${Le.code}:${Le.name}`).join("|")}`;te.current!==xt&&(te.current=xt,j(Me))},[et,ee,j]);const Fe=h.useMemo(()=>et.length?U2e(et,_,n):[],[et,_,n]),pt=h.useMemo(()=>Fe.map(Ke=>({code:Ke.code,value:Ke.value})),[Fe]),St=(Ke,Be)=>{const Me=et.find(Bt=>Pi(Bt)===Be),xt=Me?Ho(Me):Be,Le={level:QF(ee),code:Be,name:xt},$t=Qs(Le);if(s){s==="ctprvn"?(ce({ctprvn:Be}),ie({ctprvn:xt}),y?.({level:"sig",code:Be,name:xt,regionKey:Le,regionId:$t})):s==="sig"?(ce(Bt=>({ctprvn:Bt.ctprvn,sig:Be})),ie(Bt=>({ctprvn:Bt.ctprvn,sig:xt})),y?.({level:"emd",code:Be,name:xt,regionKey:Le,regionId:$t})):(ce(Bt=>({...Bt,emd:Be})),ie(Bt=>({...Bt,emd:xt})),y?.({level:"emd",code:Be,name:xt,regionKey:Le,regionId:$t}));return}if(g){ee==="ctprvn"?(ce({ctprvn:Be}),ie({ctprvn:xt})):ee==="sig"?(ce(Bt=>({ctprvn:Bt.ctprvn,sig:Be})),ie(Bt=>({ctprvn:Bt.ctprvn,sig:xt}))):(ce(Bt=>({...Bt,emd:Be})),ie(Bt=>({...Bt,emd:xt}))),y?.({level:Ke,code:Be,name:xt,regionKey:Le,regionId:$t});return}if(ee==="ctprvn"){ce({ctprvn:Be}),ie({ctprvn:xt}),ae(Ke),y?.({level:Ke,code:Be,name:xt,regionKey:Le,regionId:$t});return}if(ee==="sig"){ce(Bt=>({ctprvn:Bt.ctprvn,sig:Be})),ie(Bt=>({ctprvn:Bt.ctprvn,sig:xt})),ae(Ke),y?.({level:Ke,code:Be,name:xt,regionKey:Le,regionId:$t});return}ee==="emd"&&(ce(Bt=>({...Bt,emd:Be})),ie(Bt=>({...Bt,emd:xt})),y?.({level:"emd",code:Be,name:xt,regionKey:Le,regionId:$t}))},qe=()=>{s||T||(ae("ctprvn"),ce({}),ie({}),v?.())},rn=()=>{if(!s&&!(T&&ee==="sig")){if(ee==="emd"){ae("sig"),ce(Ke=>({ctprvn:Ke.ctprvn,sig:Ke.sig})),ie(Ke=>({ctprvn:Ke.ctprvn,sig:Ke.sig})),v?.();return}ee==="sig"&&(ae("ctprvn"),ce({ctprvn:ue.ctprvn}),ie({ctprvn:Z.ctprvn}),v?.())}},at=[{label:"",disabled:T,onClick:qe},...Z.ctprvn?[{label:Z.ctprvn,disabled:ee==="ctprvn",onClick:()=>ae("sig")}]:[],...Z.sig?[{label:Z.sig,disabled:ee==="sig",onClick:()=>ae("sig")}]:[],...Z.emd?[{label:Z.emd,disabled:!0}]:[]],jt=h.useMemo(()=>[...Fe].sort((Ke,Be)=>Be.value-Ke.value),[Fe]),It=Fe.length?Fe.reduce((Ke,Be)=>Ke+Be.value,0)/Fe.length:null,an=jt[0]??null,Ut=jt.length?jt[jt.length-1]:null,Ht=jt.slice(0,5),qt=[...jt].reverse().slice(0,5),Tn=jt.length?jt[Math.floor(jt.length/2)]?.value:null,hn=ee==="ctprvn"?ue.ctprvn:ee==="sig"?ue.sig:ue.emd,yt=(hn?Fe.find(Ke=>Ke.code===hn):null)??jt[0]??null,Ve=yt?.name??" ",Xt=yt?.rank??0,On=Fe.length,Rn=On>1&&Xt?Math.round((1-(Xt-1)/(On-1))*100):On===1?100:0,Or=h.useMemo(()=>Array.from({length:7}).map((Ke,Be)=>n-6+Be),[n]),Ee=h.useMemo(()=>yt?B2e(yt.code,_,Or):[],[yt,_,Or]),ze=h.useMemo(()=>{if(Ee.length<2)return"";const Ke=Ee.map($t=>$t.value),Be=Math.min(...Ke),Me=Math.max(...Ke),xt=220,Le=70;return Ee.map(($t,Bt)=>{const Zn=Bt/(Ee.length-1)*xt,Mn=Me===Be?.5:($t.value-Be)/(Me-Be),Ur=Le-Mn*(Le-10)-5;return`${Zn},${Ur}`}).join(" ")},[Ee]),ht=h.useMemo(()=>yt?G2e(yt.code):[],[yt]),pn=h.useMemo(()=>{if(!Fe.length)return[];const Ke=new Array(12).fill(0),Be=Fe.map($t=>$t.value),Me=Math.min(...Be),xt=Math.max(...Be);Fe.forEach($t=>{const Bt=xt===Me?.5:($t.value-Me)/(xt-Me),Zn=Math.min(Ke.length-1,Math.floor(Bt*Ke.length));Ke[Zn]+=1});const Le=Math.max(...Ke,1);return Ke.map($t=>$t/Le)},[Fe]),En=h.useMemo(()=>{const Ke=Fe.map(Be=>Be.value);return Ke.length===0?null:new H2e(Ke,"quantile",7,z)},[Fe,z]),lr=h.useMemo(()=>ZF(z),[z]),jn=h.useMemo(()=>En?.getLegendBins()??[],[En]),Qe=h.useMemo(()=>En?.getStats()??{min:0,max:0,avg:0,total:0},[En]),sr=Ke=>{const Be=Ke>=0?"+":"";return _.unit==="%"?`${Be}${Ke.toFixed(1)}%p`:`${Be}${io(Math.abs(Ke),_)}`},bn=h.useMemo(()=>!yt||!C?[]:C({level:ee,code:yt.code,name:yt.name,value:yt.value}),[yt,C,ee]);return a.jsxs("div",{className:`${R?"border border-gray-200":"border-2 border-gray-300"} bg-white ${p||""}`,children:[a.jsx("div",{className:`${R?"border-b border-gray-200":"border-b-2 border-gray-300"} px-4 py-3`,children:a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-sm font-semibold text-gray-900",children:e}),a.jsxs("p",{className:"text-xs text-gray-500",children:[_.label,"  ",e7[ee]]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[T&&r.label&&a.jsxs("span",{className:"rounded-full bg-blue-50 px-2 py-1 text-blue-700",children:[r.label," "]}),a.jsxs("span",{className:"rounded-full bg-gray-100 px-2 py-1",children:[" ",n]})]})]})}),!l&&a.jsx("div",{className:"px-4 py-3",children:a.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs text-gray-500",children:[at.map((Ke,Be)=>a.jsxs(W.Fragment,{children:[a.jsx("button",{type:"button",disabled:Ke.disabled,onClick:Ke.onClick,className:`font-medium ${Ke.disabled?"text-gray-400":"text-blue-600 hover:underline"}`,children:Ke.label}),Be<at.length-1&&a.jsx("span",{children:"/"})]},`${Ke.label}-${Be}`)),ee!=="ctprvn"&&!(T&&ee==="sig")&&a.jsx("button",{type:"button",onClick:rn,className:"ml-2 rounded-full border border-gray-200 px-2 py-0.5 text-gray-600",children:""})]})}),a.jsxs("div",{className:"px-4 pb-8",children:[!R&&Fe.length>0&&a.jsxs("div",{className:"mb-4 grid grid-cols-2 lg:grid-cols-4 gap-3 text-xs",children:[a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-3",children:[a.jsx("div",{className:"text-gray-500",children:" "}),a.jsx("div",{className:"text-base font-semibold text-gray-900",children:It!==null?io(It,_):"-"})]}),a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-3",children:[a.jsx("div",{className:"text-gray-500",children:" "}),a.jsx("div",{className:"text-sm font-semibold text-gray-900",children:an?.name??"-"}),a.jsx("div",{className:"text-xs text-gray-500",children:an?io(an.value,_):"-"})]}),a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-3",children:[a.jsx("div",{className:"text-gray-500",children:" "}),a.jsx("div",{className:"text-sm font-semibold text-gray-900",children:Ut?.name??"-"}),a.jsx("div",{className:"text-xs text-gray-500",children:Ut?io(Ut.value,_):"-"})]}),a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-3",children:[a.jsx("div",{className:"text-gray-500",children:" "}),a.jsx("div",{className:"text-sm font-semibold text-gray-900",children:Ve}),a.jsx("div",{className:"text-xs text-gray-500",children:yt?io(yt.value,_):"-"}),bn.length>0&&a.jsx("div",{className:"mt-2 space-y-1",children:bn.slice(0,3).map((Ke,Be)=>a.jsx("div",{className:"text-[11px] text-gray-500",children:Ke},Be))})]})]}),(()=>{const Ke=a.jsxs("div",{children:[a.jsxs("div",{className:`${R?"rounded-sm":"rounded-lg"} border border-gray-200 bg-gray-50`,style:{height:m,minHeight:m},children:[I&&a.jsx("div",{className:"flex h-full items-center justify-center text-sm text-gray-500",children:"  ..."}),L&&a.jsx("div",{className:"flex h-full items-center justify-center text-sm text-red-600",children:L}),!I&&!L&&a.jsx(D2e,{level:ee,features:et,stats:pt,onSelect:St,indicatorLabel:_.label,unit:_.unit,year:n,valueFormatter:Be=>io(Be,_),colorPalette:lr,getTooltipExtraLines:C})]}),!S&&a.jsx(a.Fragment,{children:a.jsx("div",{className:"mt-3 relative rounded-xl border border-gray-200 bg-white/95 px-4 py-3",children:a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[Te&&a.jsxs("div",{className:"flex-1",children:[a.jsxs("button",{onClick:()=>le(!oe),className:"flex items-center gap-1.5 text-xs text-gray-700 hover:text-gray-900 mb-1.5 font-semibold",children:[oe?a.jsx(Ds,{className:"h-4 w-4"}):a.jsx(id,{className:"h-4 w-4"}),a.jsxs("span",{children:[_.label,"  ()"]})]}),!oe&&a.jsxs("div",{className:"space-y-1.5 pl-4 border-l-2 border-gray-200",children:[jn.length>0?jn.map((Be,Me)=>a.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[a.jsx("div",{className:"w-5 h-3.5 rounded-sm border border-gray-300",style:{backgroundColor:Be.color}}),a.jsxs("span",{className:"text-gray-700",children:[ny(Be.min)," ~ ",ny(Be.max)]}),Be.count!==void 0&&a.jsxs("span",{className:"text-gray-400",children:["(",Be.count,")"]})]},Me)):lr.slice(0,7).map((Be,Me)=>{const xt=Fe.map(bt=>bt.value),Le=Math.min(...xt,_.scale[0]),$t=Math.max(...xt,_.scale[1]),Zn=($t-Le)/7,Mn=Le+Me*Zn,Ur=Me===6?$t:Le+(Me+1)*Zn;return a.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[a.jsx("div",{className:"w-5 h-3.5 rounded-sm border border-gray-300",style:{backgroundColor:Be}}),a.jsxs("span",{className:"text-gray-700",children:[io(Mn,_)," ~ ",io(Ur,_)]})]},Me)}),Qe.total>0&&a.jsxs("div",{className:"mt-1.5 pt-1.5 border-t border-gray-200 text-[11px] text-gray-500",children:[a.jsxs("span",{children:[" : ",a.jsx("strong",{children:Qe.total.toLocaleString()})]}),a.jsxs("span",{className:"ml-3",children:[": ",a.jsx("strong",{children:Qe.avg.toLocaleString()})]})]})]}),oe&&a.jsxs("div",{className:"flex items-center gap-1 pl-4",children:[lr.slice(0,7).map((Be,Me)=>a.jsx("div",{className:"w-5 h-3 rounded-sm",style:{backgroundColor:Be}},Me)),a.jsxs("span",{className:"ml-3 text-xs text-gray-600",children:[ny(Qe.min)," ~ ",ny(Qe.max)]})]})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>_e(!ye),className:"flex items-center gap-1.5 h-9 px-3 text-xs text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors font-medium shadow-sm",children:[a.jsx(BU,{className:"h-4 w-4"}),a.jsx("span",{children:" "}),a.jsx(Ds,{className:`h-4 w-4 transition-transform ${ye?"rotate-180":""}`})]}),ye&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>_e(!1)}),a.jsxs("div",{className:"absolute right-0 top-full mt-1 w-56 bg-white border border-gray-200 rounded-xl shadow-lg z-50 p-3",children:[a.jsxs("div",{className:"mb-3",children:[a.jsxs("label",{className:"text-xs font-semibold text-gray-700 mb-1.5 block",children:[a.jsx(OJ,{className:"h-3.5 w-3.5 inline mr-1"})," "]}),a.jsx("select",{value:Se,onChange:Be=>fe(Be.target.value),className:"w-full px-2.5 py-1.5 text-xs border border-gray-300 rounded-lg bg-white focus:outline-none focus:ring-1 focus:ring-blue-500",children:Object.entries(K2e).map(([Be,Me])=>a.jsx("option",{value:Be,children:Me},Be))}),a.jsx("div",{className:"flex gap-1 mt-1.5",children:ZF(Se).slice(0,7).map((Be,Me)=>a.jsx("div",{className:"flex-1 h-3 rounded-sm",style:{backgroundColor:Be}},Me))})]}),a.jsx("div",{className:"border-t border-gray-200 pt-2",children:a.jsxs("button",{onClick:()=>Pe(!Te),className:"flex items-center gap-2 w-full px-2.5 py-1.5 text-xs text-gray-700 hover:bg-gray-100 rounded-lg transition-colors font-medium",children:[Te?a.jsx(Em,{className:"h-4 w-4"}):a.jsx(yC,{className:"h-4 w-4"}),a.jsx("span",{children:Te?" ":" "})]})}),a.jsx("div",{className:"border-t border-gray-200 pt-2 mt-2 text-[11px] text-gray-400",children:c??"     "})]})]})]})]})})})]});return R?Ke:a.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-[minmax(0,1.6fr)_minmax(0,1fr)] gap-4",children:[Ke,Fe.length>0&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-4",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-500",children:" "}),a.jsx("div",{className:"text-base font-semibold text-gray-900",children:Ve})]}),a.jsx("span",{className:"rounded-full bg-slate-100 px-2 py-1 text-xs text-gray-600",children:e7[ee]})]}),a.jsxs("div",{className:"mt-3 grid grid-cols-3 gap-3 text-sm",children:[a.jsxs("div",{className:"rounded-md bg-slate-50 p-2",children:[a.jsx("div",{className:"text-xs text-gray-500",children:""}),a.jsx("div",{className:"font-semibold text-gray-900",children:yt?io(yt.value,_):"-"})]}),a.jsxs("div",{className:"rounded-md bg-slate-50 p-2",children:[a.jsx("div",{className:"text-xs text-gray-500",children:" "}),a.jsx("div",{className:`font-semibold ${yt&&yt.yoy>=0?"text-emerald-600":"text-red-600"}`,children:yt?sr(yt.yoy):"-"})]}),a.jsxs("div",{className:"rounded-md bg-slate-50 p-2",children:[a.jsx("div",{className:"text-xs text-gray-500",children:""}),a.jsx("div",{className:"font-semibold text-gray-900",children:Xt?`${Xt} / ${On}`:"-"})]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("div",{className:"text-xs text-gray-500 mb-2",children:" 7 "}),a.jsx("svg",{width:"220",height:"70",className:"block",children:a.jsx("polyline",{points:ze,fill:"none",stroke:"#2563eb",strokeWidth:"2"})}),a.jsxs("div",{className:"mt-1 text-[11px] text-gray-500",children:[" ",Rn,"% "]})]}),a.jsxs("div",{className:"mt-4 space-y-2",children:[a.jsx("div",{className:"text-xs text-gray-500",children:" "}),ht.map(Be=>a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[a.jsx("span",{children:Be.name}),a.jsxs("span",{children:[Be.value,"%"]})]}),a.jsx("div",{className:"h-2 rounded-full bg-gray-100",children:a.jsx("div",{className:"h-2 rounded-full bg-blue-500",style:{width:`${Be.value}%`}})})]},Be.name))]})]}),a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-4",children:[a.jsx("div",{className:"text-sm font-semibold text-gray-900 mb-3",children:" "}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-500 mb-2",children:" 5"}),a.jsx("div",{className:"space-y-2",children:Ht.map((Be,Me)=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"text-gray-700",children:[Me+1,". ",Be.name]}),a.jsx("span",{className:"font-semibold text-gray-900",children:io(Be.value,_)})]},Be.code))})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-500 mb-2",children:" 5"}),a.jsx("div",{className:"space-y-2",children:qt.map((Be,Me)=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"text-gray-700",children:[On-qt.length+Me+1,". ",Be.name]}),a.jsx("span",{className:"font-semibold text-gray-900",children:io(Be.value,_)})]},Be.code))})]})]})]}),a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-4",children:[a.jsx("div",{className:"text-sm font-semibold text-gray-900 mb-3",children:" "}),a.jsx("div",{className:"flex items-end gap-1 h-20",children:pn.map((Be,Me)=>a.jsx("div",{className:"w-2 rounded-sm bg-blue-200",style:{height:`${Math.round(Be*100)}%`}},`bucket-${Me}`))}),a.jsxs("div",{className:"mt-3 text-xs text-gray-500",children:[" ",On,"    ",Tn?io(Tn,_):"-"]}),a.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["   ",Rn,"% "]})]})]})]})})()]})]})}const sd=[{id:"seoul",name:"",label:"",ctprvnCode:"11"},{id:"busan",name:"",label:"",ctprvnCode:"21"},{id:"daegu",name:"",label:"",ctprvnCode:"22"},{id:"incheon",name:"",label:"",ctprvnCode:"23"},{id:"gwangju",name:"",label:"",ctprvnCode:"24"},{id:"daejeon",name:"",label:"",ctprvnCode:"25"},{id:"ulsan",name:"",label:"",ctprvnCode:"26"},{id:"sejong",name:"",label:"",ctprvnCode:"29"},{id:"gyeonggi",name:"",label:"",ctprvnCode:"31"},{id:"gangwon",name:"",label:"",ctprvnCode:"32"},{id:"chungbuk",name:"",label:"",ctprvnCode:"33"},{id:"chungnam",name:"",label:"",ctprvnCode:"34"},{id:"jeonbuk",name:"",label:"",ctprvnCode:"35"},{id:"jeonnam",name:"",label:"",ctprvnCode:"36"},{id:"gyeongbuk",name:"",label:"",ctprvnCode:"37"},{id:"gyeongnam",name:"",label:"",ctprvnCode:"38"},{id:"jeju",name:"",label:"",ctprvnCode:"39"}];function z2e(e){return e?sd.find(n=>e.includes(n.name)||e.includes(n.label))??sd[0]:sd[0]}const My=["","SLA "," ","MCI "," "," ","High MCI"],vO=[{level:"L0",label:"( )",tone:"text-gray-700 bg-gray-100 border-gray-200",purpose:"    ",whenToUse:"      ",actions:["    ","  ","/   "]},{level:"L1",label:"(/)",tone:"text-blue-700 bg-blue-50 border-blue-200",purpose:"    ",whenToUse:"     ",actions:["    ","  / "," (:  7) "]},{level:"L2",label:"(  )",tone:"text-orange-700 bg-orange-50 border-orange-200",purpose:"       ",whenToUse:"SLA ,  ,    ",actions:["      ","     ","2    "]},{level:"L3",label:" (2  )",tone:"text-purple-700 bg-purple-50 border-purple-200",purpose:"Stage 1     ",whenToUse:"   SLA/   ",actions:["2   ","/ ","       "]}],Jk=[{id:"CASE-2026-001",stage:"Stage 1",risk:"",path:"  ",status:"",manager:"",action:"1  ",updated:"2026-02-11 09:30",quality:"",profile:{name:"",age:78,phone:"010-2481-9320",guardianPhone:"010-8821-1209"},alertTags:["SLA "," "]},{id:"CASE-2026-002",stage:"Stage 2",risk:"",path:" ",status:"",manager:"",action:" ",updated:"2026-02-11 10:15",quality:"",profile:{name:"",age:73,phone:"010-3841-5520"},alertTags:[" "]},{id:"CASE-2026-003",stage:"Stage 3",risk:"",path:" ",status:"",manager:"",action:"  ",updated:"2026-02-10 16:45",quality:"",profile:{name:"",age:81,phone:"010-5510-2840"},alertTags:[" "," "]},{id:"CASE-2026-004",stage:"Stage 1",risk:"",path:"  ",status:"",manager:"",action:"",updated:"2026-02-11 11:00",quality:"",profile:{name:"",age:66,phone:"010-7652-9213",guardianPhone:"010-4312-5591"},alertTags:[]},{id:"CASE-2026-005",stage:"Stage 2",risk:"",path:"High MCI ",status:"",manager:"",action:" ",updated:"2026-02-11 11:20",quality:"",profile:{name:"",age:75,phone:"010-4288-7712"},alertTags:["SLA ","High MCI","MCI "]},{id:"CASE-2026-006",stage:"Stage 1",risk:"",path:"  ",status:"",manager:"",action:"  ",updated:"2026-02-11 11:45",quality:"",profile:{name:"",age:69,phone:"010-6721-2098"},alertTags:[]},{id:"CASE-2026-007",stage:"Stage 3",risk:"",path:" ",status:"",manager:"",action:" ",updated:"2026-02-09 14:00",quality:"",profile:{name:"",age:84,phone:"010-9191-2504"},alertTags:["SLA "," "]},{id:"CASE-2026-008",stage:"Stage 2",risk:"",path:"MCI ",status:"",manager:"",action:"MCI  ",updated:"2026-02-10 09:50",quality:"",profile:{name:"",age:72,phone:"010-2351-9801"},alertTags:["MCI "," "]},{id:"CASE-2026-009",stage:"Stage 3",risk:"",path:"3  ",status:"",manager:"",action:"3  ",updated:"2026-02-11 08:35",quality:"",profile:{name:"",age:79,phone:"010-4089-1302"},alertTags:["SLA "," "]},{id:"CASE-2026-010",stage:"Stage 1",risk:"",path:" ",status:"",manager:"",action:" ",updated:"2026-02-10 13:20",quality:"",profile:{name:"",age:64,phone:"010-7413-8267",guardianPhone:"010-3755-6401"},alertTags:[" "]},{id:"CASE-2026-011",stage:"Stage 1",risk:"",path:"  ",status:"",manager:"",action:"  ",updated:"2026-02-11 12:05",quality:"",profile:{name:"",age:83,phone:"010-6671-2104",guardianPhone:"010-7201-5543"},alertTags:["SLA "]},{id:"CASE-2026-012",stage:"Stage 2",risk:"",path:"  ",status:"",manager:"",action:" ",updated:"2026-02-08 10:10",quality:"",profile:{name:"",age:71,phone:"010-5870-3370"},alertTags:[]},{id:"CASE-2026-013",stage:"Stage 3",risk:"",path:" ",status:"",manager:"",action:" ",updated:"2026-02-07 17:40",quality:"",profile:{name:"",age:68,phone:"010-8901-0061"},alertTags:[]},{id:"CASE-2026-014",stage:"Stage 2",risk:"",path:"  ",status:"",manager:"",action:" ",updated:"2026-02-11 07:55",quality:"",profile:{name:"",age:70,phone:"010-3520-9912"},alertTags:[" "]},{id:"CASE-2026-015",stage:"Stage 1",risk:"",path:" ",status:"",manager:"",action:" ",updated:"2026-02-09 11:25",quality:"",profile:{name:"",age:76,phone:"010-1002-4451",guardianPhone:"010-9001-1112"},alertTags:[" ","SLA "]},{id:"CASE-2026-175",stage:"Stage 1",risk:"",path:"  ",status:"",manager:"",action:"Stage1  ",updated:"2026-02-19 09:00",quality:"",profile:{name:"",age:67,phone:"010-****-1234"},alertTags:["SLA "]},{id:"CASE-2026-275",stage:"Stage 2",risk:"",path:"High MCI ",status:"",manager:"",action:"Stage2   ",updated:"2026-02-19 10:20",quality:"",profile:{name:"",age:67,phone:"010-****-1234"},alertTags:["High MCI"," "]},{id:"CASE-2026-375",stage:"Stage 3",risk:"",path:" ",status:"",manager:"",action:"Stage3  ",updated:"2026-02-19 11:10",quality:"",profile:{name:"",age:67,phone:"010-****-1234"},alertTags:[" "]},{id:"CASE-2026-016",stage:"Stage 2",risk:"",path:"  ",status:"",manager:"",action:" ",updated:"2026-02-09 08:10",quality:"",profile:{name:"",age:82,phone:"010-4721-2004"},alertTags:["High MCI","SLA "," "]},{id:"CASE-2026-017",stage:"Stage 3",risk:"",path:" ",status:"",manager:"",action:" ",updated:"2026-02-06 15:25",quality:"",profile:{name:"",age:74,phone:"010-7790-6631"},alertTags:[]},{id:"CASE-2026-018",stage:"Stage 1",risk:"",path:" ",status:"",manager:"",action:" ",updated:"2026-02-10 15:50",quality:"",profile:{name:"",age:63,phone:"010-8101-3321",guardianPhone:"010-7750-4012"},alertTags:[]},{id:"CASE-2026-019",stage:"Stage 2",risk:"",path:"  ",status:"",manager:"",action:"  ",updated:"2026-02-11 06:50",quality:"",profile:{name:"",age:77,phone:"010-3124-8823"},alertTags:["SLA "," "]},{id:"CASE-2026-020",stage:"Stage 3",risk:"",path:" ",status:"",manager:"",action:"  ",updated:"2026-02-08 17:05",quality:"",profile:{name:"",age:80,phone:"010-8823-2240"},alertTags:[" "," "]},{id:"CASE-2026-021",stage:"Stage 1",risk:"",path:"MCI  ",status:"",manager:"",action:" ",updated:"2026-02-10 08:45",quality:"",profile:{name:"",age:85,phone:"010-6012-5566",guardianPhone:"010-2201-8890"},alertTags:["MCI "," "]},{id:"CASE-2026-022",stage:"Stage 2",risk:"",path:" ",status:"",manager:"",action:" ",updated:"2026-02-07 13:15",quality:"",profile:{name:"",age:67,phone:"010-4781-0190"},alertTags:[]},{id:"CASE-2026-023",stage:"Stage 3",risk:"",path:"  ",status:"",manager:"",action:" ",updated:"2026-02-09 19:20",quality:"",profile:{name:"",age:72,phone:"010-2441-5567"},alertTags:[" "]},{id:"CASE-2026-024",stage:"Stage 1",risk:"",path:"  ",status:"",manager:"",action:" ",updated:"2026-02-05 16:20",quality:"",profile:{name:"",age:62,phone:"010-7140-0013"},alertTags:[]}],q2e={"1 ":"Stage 1","1":"Stage 1","Stage 1":"Stage 1","2 ":"Stage 2","2 ":"Stage 2","2":"Stage 2","Stage 2":"Stage 2",MCI:"Stage 2","High MCI":"Stage 2","3 ":"Stage 3","3":"Stage 3","3 ":"Stage 3","Stage 3":"Stage 3"};function V2e(e){if(!e)return{alertFilter:"",stageFilter:"all"};const t=e.trim();if(My.includes(t))return{alertFilter:t,stageFilter:"all"};const n=q2e[t];return n?{alertFilter:"",stageFilter:n}:{alertFilter:"",stageFilter:"all"}}function t7(e,t){return t===""?!0:e.alertTags.includes(t)}function PN(e){return Jk.find(t=>t.id===e)}function yz(e){return!e||e.stage!=="Stage 1"?{label:"",tone:"text-blue-700 bg-blue-50 border-blue-200"}:e.status===""||e.status===""||e.alertTags.includes("SLA ")?{label:"",tone:"text-red-700 bg-red-50 border-red-200"}:e.status===""||e.alertTags.includes(" ")||e.alertTags.includes(" ")||e.alertTags.includes("MCI ")?{label:"",tone:"text-orange-700 bg-orange-50 border-orange-200"}:e.status===""?{label:"",tone:"text-blue-700 bg-blue-50 border-blue-200"}:{label:"",tone:"text-emerald-700 bg-emerald-50 border-emerald-200"}}function W2e(){return vO}function Y2e(e){const t=vO[1];if(!e||e.stage!=="Stage 1")return{level:t.level,guide:t,exceptionState:null};const n=e.status===""||e.status===""||e.alertTags.includes("SLA ")||e.alertTags.includes(" "),r=e.risk===""||e.alertTags.includes(" ")||e.alertTags.includes("MCI "),s=e.status===""||e.alertTags.includes(" ");let i="L0",o=null,l;e.quality===""?(i="L0",o="",l="      "):r&&(n||s)?i="L3":n||r?i="L2":(s||e.quality==="")&&(i="L1"),!o&&e.status===""&&!n&&!r&&(o="",l="7   ");const c=vO.find(u=>u.level===i)??t;return{level:i,guide:c,exceptionState:o,exceptionReason:l}}function oh(e){return e<70?"60":e<80?"70":"80"}function Q2e(e){return e?e.length===1?`${e}*`:e.length===2?`${e[0]}*`:`${e[0]}${"*".repeat(e.length-2)}${e[e.length-1]}`:"-"}function tl(e){const t=e.match(/^(\d{3})-(\d{3,4})-(\d{4})$/);if(!t)return e;const[,n,r,s]=t;return`${n}-${"*".repeat(r.length)}-${s}`}function un(e){let t=0;for(let n=0;n<e.length;n++)t=Math.imul(31,t)+e.charCodeAt(n)|0;return(t>>>0)%1e4/1e4}function Dp(e,t){return e[Math.floor(un(t)*e.length)]}function Cs(e,t,n){return new Date(e,t-1,1+n).toISOString().split("T")[0]}const X2e=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],J2e=["","","",""],Z2e=["MRI","PET","BLOOD","ETC"],eEe=["CENTER_SCREEN","PUBLIC_HEALTH","HOSPITAL_REFERRAL"],tEe=["  ,  ","    ","1   ,  ","MMSE   ","   ","  ,  ","  ,  ","    "],nEe=[" "," "," ",""," "," ","",""];function rEe(e,t){const n=[],r=Cs(2026,1,Math.floor(un(`${t}-reg`)*20)+5);if(n.push(` : ${r}`),e.smsHistory.length>0&&e.smsHistory.forEach((s,i)=>{n.push(` (${s.templateId}): ${s.sentAt}  ${s.result==="SUCCESS"?"":""}`)}),e.contactStatus==="REACHED"){const s=Cs(2026,1,Math.floor(un(`${t}-cont`)*25)+10);n.push(` : ${s} ${String(9+Math.floor(un(`${t}-ch`)*8)).padStart(2,"0")}:${String(Math.floor(un(`${t}-cm`)*60)).padStart(2,"0")}`)}if(e.consultStatus==="IN_PROGRESS"?n.push(` : ${Cs(2026,1,Math.floor(un(`${t}-cip`)*25)+15)} (1)`):e.consultStatus==="DONE"&&n.push(` : ${Cs(2026,1,Math.floor(un(`${t}-cd`)*20)+18)} (1)`),e.reservation){const s=e.reservation.type==="CENTER_SCREEN"?" ":e.reservation.type==="PUBLIC_HEALTH"?" ":" ";n.push(` : ${e.reservation.date} ${e.reservation.time} ${s} / : ${e.reservation.reasonText.slice(0,20)}`)}return e.secondExamStatus==="SCHEDULED"?n.push(`2  : ${Cs(2026,2,Math.floor(un(`${t}-se`)*20)+5)} (${e.secondExamType||"MRI"})`):e.secondExamStatus==="DONE"?n.push(`2  : ${Cs(2026,2,Math.floor(un(`${t}-sed`)*15)+1)}`):e.secondExamStatus==="RESULT_CONFIRMED"&&(n.push(`2  : ${Cs(2026,1,Math.floor(un(`${t}-sedc`)*15)+20)}`),n.push(`2    : ${Cs(2026,2,Math.floor(un(`${t}-serc`)*10)+1)}`)),un(`${t}-churn`)<.12&&(n.push("  (3):    "),n.push(`   1: ${Cs(2026,1,Math.floor(un(`${t}-ns`)*20)+10)}`)),n}function vz(){return X2e.map((e,t)=>{const n=`CASE-2026-${String(t+1).padStart(3,"0")}`,r=`${n}-seed`,s=un(r),i=s<.25?"high":s<.7?"medium":"low",o=un(`${r}-cs`)<.28?"UNREACHED":"REACHED";let l="NOT_STARTED";if(o==="REACHED"){const _=un(`${r}-cons`);l=_<.15?"NOT_STARTED":_<.45?"IN_PROGRESS":"DONE"}let c="not_contacted";o==="REACHED"&&(l==="DONE"?c=un(`${r}-apt`)<.55?"appointment_scheduled":"consultation_complete":c="contacted");let u="NONE";const m=un(`${r}-se`);l==="DONE"?u=m<.35?"NONE":m<.6?"SCHEDULED":m<.82?"DONE":"RESULT_CONFIRMED":l==="IN_PROGRESS"&&m>.85&&(u="SCHEDULED");const p=u!=="NONE"?Dp(Z2e,`${r}-set`):void 0;let g=null;un(`${r}-res`)<.35&&o==="REACHED"&&(g={type:Dp(eEe,`${r}-rt`),date:Cs(2026,2,Math.floor(un(`${r}-rd`)*25)+3),time:`${String(9+Math.floor(un(`${r}-rh`)*8)).padStart(2,"0")}:${un(`${r}-rm`)<.5?"00":"30"}`,reasonText:Dp(tEe,`${r}-rr`),locationText:Dp(nEe,`${r}-rl`)});const x=[],y=Math.floor(un(`${r}-sms`)*4);for(let _=0;_<y;_++){const T=Dp([" "," ","  ","  "],`${r}-sms-${_}`);x.push({sentAt:`${Cs(2026,1,Math.floor(un(`${r}-smsd-${_}`)*30)+1)} ${String(9+Math.floor(un(`${r}-smsh-${_}`)*9)).padStart(2,"0")}:${String(Math.floor(un(`${r}-smsm-${_}`)*60)).padStart(2,"0")}`,templateId:T,previewText:`[] ${T}  .`,to:`010-****-${String(1e3+t*100+_).slice(-4)}`,result:un(`${r}-smsr-${_}`)<.85?"SUCCESS":"FAIL"})}const v=60+Math.floor(un(`${r}-age`)*25),N=un(`${r}-gen`)<.55?"":"",S=o==="REACHED"?Cs(2026,1,Math.floor(un(`${r}-lc`)*30)+1):null,C=rEe({contactStatus:o,consultStatus:l,secondExamStatus:u,secondExamType:p,reservation:g,smsHistory:x},r);return{id:n,patientName:e,age:v,gender:N,riskLevel:i,riskScore:i==="high"?65+Math.floor(un(`${r}-rs`)*30):i==="medium"?35+Math.floor(un(`${r}-rs`)*30):5+Math.floor(un(`${r}-rs`)*30),lastContact:S,status:c,counselor:Dp(J2e,`${r}-coun`),isFavorite:un(`${r}-fav`)<.15,phone:`010-${String(1e3+Math.floor(un(`${r}-p1`)*9e3)).padStart(4,"0")}-${String(1e3+Math.floor(un(`${r}-p2`)*9e3)).padStart(4,"0")}`,registeredDate:Cs(2026,1,Math.floor(un(`${r}-reg`)*20)+1),secondExamStatus:u,secondExamType:p,contactStatus:o,consultStatus:l,reservation:g,autoMemo:{lastUpdatedAt:C.length>0?Cs(2026,2,Math.floor(un(`${r}-mu`)*5)+1):Cs(2026,1,15),lines:C},smsHistory:x,guardianPhone:un(`${r}-gp`)<.3?`010-${String(2e3+Math.floor(un(`${r}-gp1`)*8e3)).padStart(4,"0")}-${String(1e3+Math.floor(un(`${r}-gp2`)*9e3)).padStart(4,"0")}`:void 0}})}function aEe(e){const t=[];let n=0;return e.forEach(r=>{if(!r.reservation)return;n++;const s=r.reservation.type==="CENTER_SCREEN"?" ":r.reservation.type==="PUBLIC_HEALTH"?" ":" ";t.push({id:`APT-${String(n).padStart(3,"0")}`,caseId:r.id,patientName:r.patientName,patientAge:r.age,date:r.reservation.date,time:r.reservation.time,type:s,reservationType:r.reservation.type,reasonText:r.reservation.reasonText,status:un(`${r.id}-aptst`)<.3?"confirmed":un(`${r.id}-aptst`)<.55?"reminder_sent":un(`${r.id}-aptst`)<.75?"pending":"completed",riskLevel:r.riskLevel,counselor:r.counselor,phone:r.phone,reminderSent:un(`${r.id}-rem`)<.6,notes:r.reservation.reasonText,caseContactStatus:r.contactStatus,caseConsultStatus:r.consultStatus,caseSecondExamStatus:r.secondExamStatus,autoMemoRecent:r.autoMemo.lines.slice(-3)})}),e.forEach(r=>{r.secondExamStatus==="SCHEDULED"&&(n++,t.push({id:`APT-${String(n).padStart(3,"0")}`,caseId:r.id,patientName:r.patientName,patientAge:r.age,date:Cs(2026,2,Math.floor(un(`${r.id}-se-apt`)*20)+5),time:`${String(9+Math.floor(un(`${r.id}-se-h`)*8)).padStart(2,"0")}:00`,type:`2  (${r.secondExamType||"MRI"})`,status:"confirmed",riskLevel:r.riskLevel,counselor:r.counselor,phone:r.phone,reminderSent:!1,notes:`2  (${r.secondExamType}) `,caseContactStatus:r.contactStatus,caseConsultStatus:r.consultStatus,caseSecondExamStatus:r.secondExamStatus,autoMemoRecent:r.autoMemo.lines.slice(-3)}))}),t}const e_={NONE:"",SCHEDULED:"",DONE:"",RESULT_CONFIRMED:""},t_={UNREACHED:"",REACHED:""},n_={NOT_STARTED:"",IN_PROGRESS:"",DONE:""},r_={CENTER_SCREEN:" ",PUBLIC_HEALTH:" ",HOSPITAL_REFERRAL:" "};function n7(e){return e.replace(/(\d{3})-(\d{4})-(\d{4})/,"$1-****-$3")}function D0(){return new Date().toISOString()}function sEe(e){return JSON.parse(JSON.stringify(e))}function Ml(e,t,n){e.push(n),t.push(n.message)}function iEe(e){const t=!!e.step1At,n=t&&!!e.step2At,r=n&&!!e.step3At;return r&&!!e.step4At||r?4:n?3:t?2:1}function Nz(e,t){const n=sEe(e),r=[],s=[];let i;if(n.model.status!=="READY"&&n.model.result&&(Ml(r,s,{code:"P3",path:"model.result",message:"  READY    .",from:n.model.result,to:null}),n.model.result=null),n.loop.completed.step2At&&!n.loop.completed.step1At&&(Ml(r,s,{code:"P2",path:"loop.completed.step2At",message:"STEP2   STEP1   STEP2   .",from:n.loop.completed.step2At,to:void 0}),delete n.loop.completed.step2At),n.loop.completed.step3At&&!n.loop.completed.step2At&&(Ml(r,s,{code:"P2",path:"loop.completed.step3At",message:"STEP3   STEP2   STEP3   .",from:n.loop.completed.step3At,to:void 0}),delete n.loop.completed.step3At),n.loop.completed.step4At&&!n.loop.completed.step3At&&(Ml(r,s,{code:"P2",path:"loop.completed.step4At",message:"STEP4   STEP3   STEP4   .",from:n.loop.completed.step4At,to:void 0}),delete n.loop.completed.step4At),n.model.status==="READY"&&n.model.result&&!n.loop.completed.step1At)if(t.autoCompleteStep1){const c=n.model.result.computedAt||D0();Ml(r,s,{code:"P1",path:"loop.completed.step1At",message:"  READY  STEP1    .",from:void 0,to:c}),n.loop.completed.step1At=c,i={at:D0(),actor:"system",message:"    (  )",kind:"AUTO_STEP1_COMPLETED"}}else s.push("   STEP1   .");if(!!n.profile?.originStage2Result&&n.loop.status!=="ON_HOLD"&&n.loop.status!=="EXCLUDED"){const c=n.model.result?.computedAt??n.updatedAt??D0();n.loop.completed.step1At||(Ml(r,s,{code:"P1",path:"loop.completed.step1At",message:"(Stage2  )  STEP1  .",from:void 0,to:c}),n.loop.completed.step1At=c),n.loop.completed.step2At||(Ml(r,s,{code:"P1",path:"loop.completed.step2At",message:"(Stage2  )  STEP2  .",from:void 0,to:c}),n.loop.completed.step2At=c),n.model.status==="READY"&&n.model.result&&!n.loop.completed.step3At&&(Ml(r,s,{code:"P1",path:"loop.completed.step3At",message:" READY    STEP3  .",from:void 0,to:c}),n.loop.completed.step3At=c)}if(n.loop.status==="ON_HOLD"||n.loop.status==="EXCLUDED")n.loop.blockers=[n.loop.status==="ON_HOLD"?"     .":"     ."];else{const c=[];n.loop.completed.step1At||c.push("STEP1  "),n.loop.completed.step1At&&!n.loop.completed.step2At&&c.push("STEP2  "),n.loop.completed.step2At&&!n.loop.completed.step3At&&c.push("STEP3  "),n.loop.blockers=c}const l=iEe(n.loop.completed);return n.loop.step!==l&&(Ml(r,s,{code:"P4",path:"loop.step",message:`     ${l} .`,from:n.loop.step,to:l}),n.loop.step=l),n.loop.status==="DONE"&&(n.loop.completed.step4At||(Ml(r,s,{code:"P5",path:"loop.completed.step4At",message:"  DONE STEP4     .",from:void 0,to:D0()}),n.loop.completed.step4At=D0(),n.loop.step=4)),{nextCase:n,patches:r,inconsistencyFlags:s,auditLog:i}}const Sz="stage2-gate-v2",Ez="stage3-gate-v2",Zk={autoCompleteStep1:!0},oEe=Zk,a_=new Set(["CASE-2026-175"]),lEe=new Set(["CASE-2026-275"]),jz=new Set(["CASE-2026-175"]),cEe=new Set(["CASE-2026-005","CASE-2026-014","CASE-2026-019"]),ps=new Map,ku=new Map,NO=new Set;let wz=0,v1={stage:"ALL",status:"ALL",keyword:""};function Mx(){wz+=1,NO.forEach(e=>e())}function MN(e){return NO.add(e),()=>NO.delete(e)}function al(){return wz}function gc(){return new Date().toISOString()}function Is(e){let t=0;for(let n=0;n<e.length;n+=1)t=Math.imul(31,t)+e.charCodeAt(n)|0;return(t>>>0)%1e4/1e4}function Pa(e){return Number.isNaN(e)?0:Math.max(0,Math.min(1,e))}function Pf(e){const t=Math.max(0,e.NORMAL),n=Math.max(0,e.MCI),r=Math.max(0,e.AD),s=t+n+r;return s<=0?{NORMAL:.33,MCI:.34,AD:.33}:{NORMAL:Number((t/s).toFixed(4)),MCI:Number((n/s).toFixed(4)),AD:Number((r/s).toFixed(4))}}function dEe(e){const n=[{key:"NORMAL",value:e.NORMAL},{key:"MCI",value:e.MCI},{key:"AD",value:e.AD}].sort((r,s)=>s.value-r.value)[0]?.key;return n==="NORMAL"?"":n==="AD"?"":"MCI"}function Az(e){return e>=70?"":e>=40?"":""}function LN(e){if(e)return e===""?"NORMAL":e===""?"AD":"MCI"}function uEe(e){return e==="AD"?"":e==="NORMAL"?"":"MCI"}function fEe(e){if(e==="MCI_LOW")return"";if(e==="MCI_MID")return"";if(e==="MCI_HIGH")return""}function pEe(e){return!e.available||!e.predictedLabel?"NORMAL":e.predictedLabel===""?"AD":e.predictedLabel===""?"NORMAL":e.mciBand===""?"MCI_HIGH":e.mciBand===""?"MCI_MID":"MCI_LOW"}function mEe(e){return e==="MCI_MID"?"MCI-MID":e==="MCI_HIGH"?"MCI-HIGH":e==="AD"?"AD":null}function _z(e){return e==="AD"?"AD_MANAGEMENT":"PREVENTIVE_TRACKING"}function hEe(e){return e!=null}function pd(e,t){return Pa(t==="AD_MANAGEMENT"?e.currentRiskIndex??e.risk2yNow??e.conversionRisk2y??0:e.conversionRisk2y??e.risk2yNow??e.currentRiskIndex??0)}function SO(e){return e==="ON_HOLD"?"ON_HOLD":e==="EXCLUDED"?"EXCLUDED":e==="CLOSED"?"DONE":"IN_PROGRESS"}function gEe(e){return e==="RUNNING"||e==="QUEUED"?"PROCESSING":e==="READY"?"DONE":"PENDING"}function Cz(e,t){return t?"READY":e==="PROCESSING"?"RUNNING":"NOT_READY"}function Tz(e){const t=!!e.step1At,n=t&&!!e.step2At,r=n&&!!e.step3At;return r&&!!e.step4At||r?4:n?3:t?2:1}function Oz(e){if(e.stage!==3)return;e.computed.stage3Loop||(e.computed.stage3Loop={step:1,completed:{},status:SO(e.status),blockers:[]}),e.computed.stage3Loop.status=SO(e.status);const t=e.computed.stage3Loop.completed;e.computed.evidence.stage3.completed&&!t.step2At&&(t.step2At=e.computed.evidence.stage3.required.performedAt??e.updatedAt),e.computed.model3.available&&!t.step3At&&(t.step3At=e.computed.model3.updatedAt??e.updatedAt),e.status==="CLOSED"&&!t.step4At&&(t.step4At=e.updatedAt),e.computed.stage3Loop.step=Tz(t)}function xEe(e){if(e.stage!==3)return null;Oz(e);const t=e.computed.stage3Loop;if(!t)return null;const n=e.computed.stage3Profile,r=pd(e.computed.model3,n?.stage3Type??"PREVENTIVE_TRACKING");return{caseId:e.caseId,updatedAt:e.updatedAt,model:{status:Cz(e.modelStatus,e.computed.model3.available),result:e.computed.model3.available?{risk_1y_ad:e.computed.model3.conversionRisk1y,risk_2y_ad:r,risk_3y_ad:e.computed.model3.conversionRisk3y,computedAt:e.computed.model3.updatedAt??e.updatedAt,modelVersion:e.computed.model3.modelVersion??Ez}:null},loop:{step:t.step,completed:{...t.completed},status:t.status,blockers:[...t.blockers]},profile:n?{originStage2Result:n.originStage2Result,originRiskScore:n.originRiskScore,stage3Type:n.stage3Type}:void 0}}function Rz(e){if(e.stage!==3)return null;const t=e.computed.stage3Loop,n=t?.completed??{},r=e.computed.stage3Profile,s=pd(e.computed.model3,r?.stage3Type??"PREVENTIVE_TRACKING");return{caseId:e.caseId,updatedAt:e.updatedAt,model:{status:Cz(e.modelStatus,e.computed.model3.available),result:e.computed.model3.available?{risk_1y_ad:e.computed.model3.conversionRisk1y,risk_2y_ad:s,risk_3y_ad:e.computed.model3.conversionRisk3y,computedAt:e.computed.model3.updatedAt??e.updatedAt,modelVersion:e.computed.model3.modelVersion??Ez}:null},loop:{step:t?.step??Tz(n),completed:{...n},status:t?.status??SO(e.status),blockers:t?.blockers?[...t.blockers]:[]},profile:r?{originStage2Result:r.originStage2Result,originRiskScore:r.originRiskScore,stage3Type:r.stage3Type}:void 0}}function bEe(e,t){if(t.profile&&(e.computed.stage3Profile={originStage2Result:t.profile.originStage2Result,originRiskScore:t.profile.originRiskScore,stage3Type:t.profile.stage3Type}),e.computed.stage3Loop={step:t.loop.step,completed:{...t.loop.completed},status:t.loop.status,blockers:[...t.loop.blockers]},e.modelStatus=gEe(t.model.status),t.model.status!=="READY"||!t.model.result)e.computed.model3={available:!1},e.riskScore=void 0;else{const n=e.computed.model3,r=e.computed.stage3Profile?.stage3Type??"PREVENTIVE_TRACKING",s=Pa(t.model.result.risk_2y_ad),i=t.model.result.risk_1y_ad==null?r==="AD_MANAGEMENT"?void 0:Pa(s-.06):Pa(t.model.result.risk_1y_ad),o=t.model.result.risk_3y_ad==null?r==="AD_MANAGEMENT"?void 0:Pa(s+.09):Pa(t.model.result.risk_3y_ad);e.computed.model3={available:!0,risk2yNow:s,risk2yAt2y:r==="AD_MANAGEMENT"?void 0:o??n.risk2yAt2y,conversionRisk1y:r==="AD_MANAGEMENT"?void 0:i,conversionRisk2y:r==="AD_MANAGEMENT"?void 0:s,conversionRisk3y:r==="AD_MANAGEMENT"?void 0:o,currentRiskIndex:r==="AD_MANAGEMENT"?s:void 0,label:s>=.7?"HIGH":s>=.45?"MID":"LOW",confidence:n.confidence??"MID",modelVersion:t.model.result.modelVersion,updatedAt:t.model.result.computedAt},e.riskScore=Math.round(pd(e.computed.model3,r)*100)}t.loop.status==="ON_HOLD"?e.status="ON_HOLD":t.loop.status==="EXCLUDED"?e.status="EXCLUDED":t.loop.status==="DONE"?e.status="CLOSED":(e.status==="ON_HOLD"||e.status==="EXCLUDED")&&(e.status="IN_PROGRESS"),e.status==="CLOSED"?e.operationStep="COMPLETED":e.modelStatus==="DONE"?e.operationStep="FOLLOW_UP":t.loop.step>=2?e.operationStep="IN_PROGRESS":e.operationStep="WAITING"}function kz(e,t=Zk){if(e.stage!==3)return{nextCase:e,patches:[],inconsistencyFlags:[],auditLog:void 0};const n=xEe(e);if(!n)return{nextCase:e,patches:[],inconsistencyFlags:[],auditLog:void 0};const r=Nz(n,t);if(r.patches.length===0)return{...r,nextCase:e};const s=$N(e);return bEe(s,r.nextCase),{...r,nextCase:s}}function Iz(e){return e===1?"CLASSIFIED":e===2?"RESULT_READY":"FOLLOW_UP"}function yEe(e){const t=new Date(e);return Number.isNaN(t.getTime())?e:`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")} ${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`}function ig(e){const t=new Date(e.includes("T")?e:e.replace(" ","T"));return Number.isNaN(t.getTime())?gc():t.toISOString()}function vEe(e){return e==="Stage 1"?1:e==="Stage 2"?2:3}function Dz(e){return e===1?"Stage 1":e===2?"Stage 2":"Stage 3"}function NEe(e){return e===""?"CLOSED":e===""?"ON_HOLD":e===""||e===""?"WAITING_RESULTS":"IN_PROGRESS"}function SEe(e){return e==="CLOSED"?"":e==="ON_HOLD"?"":e==="WAITING_RESULTS"?"":e==="READY_TO_CLASSIFY"?"":e==="CLASS_CONFIRMED"||e==="NEXT_STEP_SET"?"":e==="EXCLUDED"?"":""}function EEe(e){return e>=90?"":e>=75?"":""}function jEe(e){return e.path.includes("")||e.path.includes("")?"HOSPITAL":"CENTER"}function wEe(e,t){const n=[];return e.specialist||n.push(" "),e.cdrOrGds==null&&n.push("CDR  GDS"),e.neuroType||n.push(" "),t==="HOSPITAL"&&e.mmse==null&&n.push("MMSE"),{completed:n.length===0,missing:n}}function AEe(e){const t=[];return e.biomarker?e.biomarkerResult||t.push("  "):t.push("  "),e.imaging?e.imagingResult||t.push("  "):t.push("  "),e.performedAt||t.push("  "),{completed:t.length===0,missing:t}}function og(e,t,n){const r=Is(`${e.caseId}-model2`),s=e.computed.evidence.stage2.required,i=e.legacyRisk===""?.72:e.legacyRisk===""?.5:.28,o=s.cdrOrGds==null?.35:Pa(s.cdrOrGds/3),l=s.mmse==null?.35:Pa((30-s.mmse)/30),c=s.neuroScore==null?.45:Pa((100-s.neuroScore)/100),u=Pa(i*.42+o*.31+l*.17+c*.1),m=Pa(u+(r-.5)*.12),p=Pa((.72-m)*1.6),g=Pa(1-Math.abs(m-.5)*2.2),x=Pa((m-.33)*1.7);let y=Pf({NORMAL:.12+p,MCI:.16+g,AD:.1+x});t&&(t===""?y=Pf({NORMAL:.78,MCI:.17,AD:.05}):t==="MCI"?y=Pf({NORMAL:.14,MCI:.7,AD:.16}):y=Pf({NORMAL:.08,MCI:.2,AD:.72}));const v=t??dEe(y),N=Math.round(y.MCI*100+y.AD*30+r*12),S=Math.max(0,Math.min(100,N)),j=n??Az(S);return{available:!0,probs:y,predictedLabel:v,mciScore:S,mciBand:j,modelVersion:Sz,updatedAt:gc()}}function lh(e,t){const n=Is(`${e.caseId}-model3`),r=e.computed.model2.predictedLabel,s=e.computed.evidence.stage3.required,i=e.computed.stage3Profile?.stage3Type??(r===""?"AD_MANAGEMENT":"PREVENTIVE_TRACKING");let o=r===""?.7:r==="MCI"?.52:.28;s.biomarkerResult==="POS"&&(o+=.14),s.biomarkerResult==="NEG"&&(o-=.08),s.biomarkerResult==="UNK"&&(o+=.03),s.imagingResult==="POS"&&(o+=.14),s.imagingResult==="NEG"&&(o-=.07),s.imagingResult==="UNK"&&(o+=.03),e.status==="ON_HOLD"&&(o+=.06),e.status==="CLOSED"&&(o-=.05);const l=t==null?Pa(o+(n-.5)*.08):Pa(t),c=Pa(l-.06+(n-.5)*.03),u=l,m=Pa(l+.09+(n-.5)*.05),p=i==="AD_MANAGEMENT"?l:u,g=p>=.7?"HIGH":p>=.45?"MID":"LOW";let x="HIGH";return(s.biomarkerResult==="UNK"||s.imagingResult==="UNK")&&(x="MID"),s.performedAt||(x="LOW"),{available:!0,risk2yNow:i==="AD_MANAGEMENT"?l:u,risk2yAt2y:i==="AD_MANAGEMENT"?void 0:m,conversionRisk1y:i==="AD_MANAGEMENT"?void 0:c,conversionRisk2y:i==="AD_MANAGEMENT"?void 0:u,conversionRisk3y:i==="AD_MANAGEMENT"?void 0:m,currentRiskIndex:i==="AD_MANAGEMENT"?l:void 0,label:g,confidence:x,modelVersion:i==="AD_MANAGEMENT"?"stage3-ad-management-v1.0":"stage3-risk-v1.3",updatedAt:gc()}}function Xf(e){const t=pEe(e.computed.model2),n=mEe(t);if(!hEe(n))return e.computed.stage3Profile=void 0,null;const r=Math.round((e.computed.model2.probs?.AD??0)*100),s=_z(n);return e.computed.stage3Profile={originStage2Result:n,originRiskScore:r,stage3Type:s},e.computed.stage3Profile}function _Ee(e){return e<.3?"NORMAL":e<.48?"MCI_LOW":e<.68?"MCI_MID":e<.82?"MCI_HIGH":"AD"}function $N(e){return JSON.parse(JSON.stringify(e))}function hx(e){const t=$N(e),n=wEe(t.computed.evidence.stage2.required,t.stage2Route),r=AEe(t.computed.evidence.stage3.required),s=Xf(t);t.computed.evidence.stage2.completed=n.completed,t.computed.evidence.stage2.missing=n.missing,t.computed.evidence.stage3.completed=r.completed,t.computed.evidence.stage3.missing=r.missing,Oz(t),t.computed.model2.available||(t.computed.model2={available:!1}),t.computed.model3.available||(t.computed.model3={available:!1});const i=n.missing.length+r.missing.length,o=t.legacyQuality===""?95:t.legacyQuality===""?82:64,l=t.status==="WAITING_RESULTS"||t.status==="READY_TO_CLASSIFY"?1:0,c=t.status==="IN_PROGRESS"&&t.stage>=2?1:0;return t.computed.ops={...t.computed.ops,dataQualityScore:Math.max(40,Math.min(100,o-i*4)),missingFieldCount:i,bookingPendingCount:t.computed.ops.bookingPendingCount??l,approvalsPendingCount:t.computed.ops.approvalsPendingCount??c},t.stage>=3&&t.computed.model3.available?(t.modelStatus="DONE",t.operationStep=t.operationStep==="COMPLETED"?"COMPLETED":"FOLLOW_UP",t.riskScore=Math.round(pd(t.computed.model3,s?.stage3Type??"PREVENTIVE_TRACKING")*100)):t.stage>=2&&t.computed.model2.available?(t.modelStatus="DONE",t.operationStep!=="CLASSIFIED"&&t.operationStep!=="COMPLETED"&&(t.operationStep="RESULT_READY"),t.classification=LN(t.computed.model2.predictedLabel),t.riskScore=Math.round((t.computed.model2.probs?.AD??0)*100)):t.modelStatus!=="PROCESSING"&&(t.modelStatus="PENDING"),kz(t).nextCase}function CEe(e,t){const n=Is(`${e.id}-stage2-required`),r=e.stage!=="Stage 1",s=r&&e.status!=="",i=r&&n>.18?Number((.5+Is(`${e.id}-cdr`)*1.8).toFixed(1)):null,o=r&&n>.22?["CERAD-K","SNSB-II","SNSB-C","LICA"][Math.floor(Is(`${e.id}-neuro`)*4)]:null,l=t==="HOSPITAL"&&r&&n>.32?Math.round(18+Is(`${e.id}-mmse`)*10):null,c=r&&n>.27?Math.round(45+Is(`${e.id}-neuro-score`)*40):null;return{specialist:s,mmse:l,cdrOrGds:i,neuroType:o,neuroScore:c}}function TEe(e){const t=Is(`${e.id}-stage3-required`);if(!(e.stage==="Stage 3"))return{biomarker:!1,imaging:!1,biomarkerResult:null,imagingResult:null,performedAt:null};const r=t>.18,s=t>.2,i=t>.45&&r&&s,o=Is(`${e.id}-stage3-result`),l=c=>c>=.66?"POS":c>=.33?"UNK":"NEG";return{biomarker:r,imaging:s,biomarkerResult:i?l(o):null,imagingResult:i?l(1-o):null,performedAt:i?ig(e.updated):null}}function OEe(e){const t=e.trim();if(!(t.length===0||t.includes("")))return t}function Pz(e){const t=vEe(e.stage),n=jEe(e),r=ig(e.updated),s={caseId:e.id,stage:t,assigneeId:OEe(e.manager),region:{sido:"",sigungu:"",center:" "},patient:{name:e.profile.name,age:e.profile.age,phone:e.profile.phone,caregiverPhone:e.profile.guardianPhone},status:NEe(e.status),operationStep:t===1||t===2?"IN_PROGRESS":"FOLLOW_UP",modelStatus:"PENDING",classification:void 0,riskScore:void 0,createdAt:r,updatedAt:ig(e.updated),stage2Route:n,legacyRisk:e.risk,legacyQuality:e.quality,legacyTags:[...e.alertTags],computed:{evidence:{stage2:{required:CEe(e,n),completed:!1,missing:[]},stage3:{required:TEe(e),completed:!1,missing:[]}},model2:{available:!1},model3:{available:!1},ops:{contactMode:e.path.includes("")||e.action.includes("")?"AGENT":"HUMAN",lastContactAt:ig(e.updated),bookingPendingCount:e.alertTags.includes(" ")?1:0,approvalsPendingCount:e.status===""?1:0}}},i=hx(s),o=Math.floor(Is(`${e.id}-stage-scenario`)*4);if(i.stage===2){const l=_Ee(Is(`${e.id}-stage2-bucket`)),c=uEe(l),u=fEe(l),m=Is(`${e.id}-stage2-severity-bias`),p=cEe.has(e.id);let g=c,x=u;p?(g="MCI",x=""):c==="MCI"&&m>.72?(g="",x=void 0):c==="MCI"&&m<.22&&(g="",x=void 0);const y=Is(`${e.id}-stage2-progress`),v=!p&&y<.14,N=v&&(o===0||l==="MCI_LOW");v?(i.computed.model2={available:!1},i.computed.stage3Profile=void 0,i.modelStatus="PENDING",i.status=N?"WAITING_RESULTS":"IN_PROGRESS",i.operationStep=N?"WAITING":"IN_PROGRESS"):(i.computed.evidence.stage2.required={...i.computed.evidence.stage2.required,specialist:!0,mmse:i.computed.evidence.stage2.required.mmse??(g===""?20:g==="MCI"?24:27),cdrOrGds:i.computed.evidence.stage2.required.cdrOrGds??(o===1?null:g===""?1.6:g==="MCI"?.7:.2)},i.computed.model2=og(i,g,x),i.modelStatus="DONE",Xf(i),y<.46?(i.status="READY_TO_CLASSIFY",i.operationStep="RESULT_READY"):y<.8?(i.status="CLASS_CONFIRMED",i.operationStep="CLASSIFIED"):(i.status="NEXT_STEP_SET",i.operationStep="COMPLETED"))}if(i.stage===3){const l=Is(`${e.id}-stage3-origin`),c=l<.4?"MCI-MID":l<.75?"MCI-HIGH":"AD";i.computed.stage3Profile={originStage2Result:c,originRiskScore:c==="AD"?82:c==="MCI-HIGH"?64:47,stage3Type:_z(c)},i.computed.model2=og(i,c==="AD"?"":"MCI",c==="MCI-HIGH"?"":c==="MCI-MID"?"":void 0);const u=[.15,.35,.67,.88][o]??.35;i.computed.model3=lh(i,u),i.modelStatus="DONE",i.operationStep="FOLLOW_UP",i.riskScore=Math.round(pd(i.computed.model3,i.computed.stage3Profile.stage3Type)*100)}if(i.stage===1&&(i.status==="CLOSED"||e.status===""?i.operationStep="COMPLETED":e.status===""?i.operationStep="WAITING":i.operationStep="IN_PROGRESS"),e.id==="CASE-2026-175"&&(i.stage=1,i.status="WAITING_RESULTS",i.operationStep="WAITING",i.modelStatus="PENDING",i.classification=void 0,i.riskScore=void 0,i.computed.model2={available:!1},i.computed.model3={available:!1},i.computed.stage3Profile=void 0,i.computed.evidence.stage2.required={specialist:!1,mmse:null,cdrOrGds:null,neuroType:null,neuroScore:null},i.computed.evidence.stage3.required={biomarker:!1,imaging:!1,biomarkerResult:null,imagingResult:null,performedAt:null},i.computed.ops.contactMode="HUMAN",i.computed.ops.bookingPendingCount=1,i.computed.ops.approvalsPendingCount=0),e.id==="CASE-2026-275"&&(i.stage=2,i.stage2Route="HOSPITAL",i.status="READY_TO_CLASSIFY",i.operationStep="RESULT_READY",i.modelStatus="DONE",i.classification="MCI",i.riskScore=16,i.computed.evidence.stage2.required={specialist:!0,mmse:22,cdrOrGds:1,neuroType:"SNSB-II",neuroScore:58},i.computed.model2=og(i,"MCI",""),i.computed.model3={available:!1},Xf(i),i.computed.ops.bookingPendingCount=0,i.computed.ops.approvalsPendingCount=0),e.id==="CASE-2026-375"){const l=ig(e.updated);i.stage=3,i.stage2Route="HOSPITAL",i.status="IN_PROGRESS",i.operationStep="FOLLOW_UP",i.modelStatus="DONE",i.classification="MCI",i.computed.evidence.stage2.required={specialist:!0,mmse:23,cdrOrGds:1,neuroType:"SNSB-II",neuroScore:58},i.computed.model2=og(i,"MCI",""),i.computed.stage3Profile={originStage2Result:"MCI-HIGH",originRiskScore:64,stage3Type:"PREVENTIVE_TRACKING"},i.computed.evidence.stage3.required={biomarker:!0,imaging:!0,biomarkerResult:"POS",imagingResult:"POS",performedAt:l},i.computed.model3=lh(i,.72),i.riskScore=Math.round(pd(i.computed.model3,i.computed.stage3Profile.stage3Type)*100),i.computed.ops.bookingPendingCount=0,i.computed.ops.approvalsPendingCount=0,i.computed.stage3Loop={step:4,completed:{step1At:l,step2At:l,step3At:l},status:"IN_PROGRESS",blockers:[]}}return hx(i)}function REe(e){return e==="high"?"":e==="medium"?"":""}function kEe(e){return e.secondExamStatus==="DONE"||e.secondExamStatus==="RESULT_CONFIRMED"?"Stage 3":e.consultStatus==="DONE"||e.reservation||e.secondExamStatus==="SCHEDULED"?"Stage 2":"Stage 1"}function IEe(e,t){return e.contactStatus==="UNREACHED"?"":t==="Stage 3"?e.secondExamStatus==="RESULT_CONFIRMED"?"":e.riskLevel==="high"?"":"":t==="Stage 2"?e.consultStatus==="DONE"&&e.secondExamStatus!=="NONE"?"":"":e.consultStatus==="DONE"?"":""}function DEe(e){return e.riskScore>=70?"":e.riskScore>=45?"":""}function PEe(e,t){if(t==="Stage 1"){const n=Is(`${e.patientName}-${e.age}-stage1-path`);return e.contactStatus==="UNREACHED"?n<.45?"  ":e.guardianPhone&&n<.75?"  ":" ":n<.25?"  ":e.guardianPhone&&n<.45?"  ":e.riskLevel==="high"?"  ":"  "}return t==="Stage 2"?e.secondExamStatus==="NONE"?"  ":e.riskLevel==="high"?"AD  ":e.riskLevel==="low"?"(CN)  ":"MCI ":e.secondExamStatus==="RESULT_CONFIRMED"?" ":" "}function MEe(e,t,n,r){return t==="Stage 1"?r.includes("")?n===""?"  ":n===""?"   ":"  ":r.includes("")?n===""?"  ":"  ":e.riskLevel==="high"?n===""?"1  ":"  ":n===""?" ":" ":t==="Stage 2"?e.secondExamStatus==="NONE"?"  ":" ":e.secondExamStatus==="RESULT_CONFIRMED"?"  ":"  "}function LEe(e){return Is(`${e.patientName}-${e.registeredDate}-owner`)<.08?" ":e.counselor}function $Ee(e,t,n){const r=new Set;return(n===""||n===""||n==="")&&r.add("SLA "),t!=="Stage 1"&&!e.reservation&&r.add(" "),t==="Stage 2"&&e.secondExamStatus==="NONE"&&r.add("MCI "),t==="Stage 3"&&e.secondExamStatus!=="RESULT_CONFIRMED"&&r.add(" "),t==="Stage 3"&&e.riskLevel==="high"&&r.add(" "),t==="Stage 2"&&e.riskLevel==="high"&&e.secondExamStatus!=="NONE"&&r.add("High MCI"),[...r]}function FEe(e,t){const n=kEe(e),r=IEe(e,n),s=PEe(e,n),i=LEe(e),o=`CASE-2026-${String(101+t).padStart(3,"0")}`,l=String(9+t%9).padStart(2,"0"),c=t%2===0?"00":"30";return{id:o,stage:n,risk:REe(e.riskLevel),path:s,status:r,manager:i,action:MEe(e,n,r,s),updated:`${e.registeredDate} ${l}:${c}`,quality:DEe(e),profile:{name:e.patientName,age:e.age,phone:e.phone,guardianPhone:e.guardianPhone},alertTags:$Ee(e,n,r)}}function r7(e){return(e??"").replace(/\D/g,"")}function a7(e){const t=e.profile.name.trim().toLowerCase(),n=String(e.profile.age),r=r7(e.profile.phone),s=r7(e.profile.guardianPhone);return r.length>0?`${t}|${r}`:s.length>0?`${t}|g:${s}`:`${t}|age:${n}`}function UEe(e){const t=e.trim();return t.length>0&&!t.includes("")}function BEe(e){const t=new Map;for(const n of e){if(!UEe(n.manager))continue;const r=a7(n);t.has(r)||t.set(r,n.manager)}return e.map(n=>{const r=t.get(a7(n));return!r||r===n.manager?n:{...n,manager:r}})}function GEe(){return[{id:"CASE-2026-901",stage:"Stage 1",risk:"",path:"  ",status:"",manager:"",action:"  ",updated:"2026-02-19 09:05",quality:"",profile:{name:"",age:68,phone:"010-8801-1101",guardianPhone:"010-9922-3301"},alertTags:["SLA "]},{id:"CASE-2026-902",stage:"Stage 1",risk:"",path:"  ",status:"",manager:"",action:"  ",updated:"2026-02-19 08:40",quality:"",profile:{name:"",age:74,phone:"010-8801-1102"},alertTags:["SLA "," "]},{id:"CASE-2026-903",stage:"Stage 1",risk:"",path:"  ",status:"",manager:" ",action:"  ",updated:"2026-02-19 08:20",quality:"",profile:{name:"",age:81,phone:"",guardianPhone:"010-9922-3303"},alertTags:["SLA "," "]},{id:"CASE-2026-904",stage:"Stage 1",risk:"",path:"  ",status:"",manager:" ",action:"  ",updated:"2026-02-19 07:55",quality:"",profile:{name:"",age:72,phone:"010-8801-1104"},alertTags:["SLA "]},{id:"CASE-2026-905",stage:"Stage 1",risk:"",path:"  ",status:"",manager:"",action:"1  ",updated:"2026-02-19 07:25",quality:"",profile:{name:"",age:84,phone:"010-8801-1105",guardianPhone:"010-9922-3305"},alertTags:["SLA "," "]},{id:"CASE-2026-906",stage:"Stage 1",risk:"",path:"  ",status:"",manager:"",action:"    ",updated:"2026-02-19 06:50",quality:"",profile:{name:"",age:76,phone:"010-8801-1106",guardianPhone:"010-9922-3306"},alertTags:[" "]},{id:"CASE-2026-907",stage:"Stage 1",risk:"",path:"  ",status:"",manager:"",action:"   ",updated:"2026-02-19 06:10",quality:"",profile:{name:"",age:65,phone:"010-8801-1107"},alertTags:[]}]}function HEe(){const e=[...Jk],t=vz().slice(0,50).map((s,i)=>FEe(s,i)),n=GEe(),r=new Set(e.map(s=>s.id));for(const s of[...t,...n])r.has(s.id)||e.push(s);return BEe(e)}function Eo(){if(!(ps.size>0))for(const e of HEe()){const t=Pz(e);ps.set(t.caseId,t),ku.set(t.caseId,[{eventId:`evt-${t.caseId}-init`,caseId:t.caseId,at:t.updatedAt,actorId:t.assigneeId??"system",type:"DATA_SYNCED",payload:{reason:"INITIALIZE_FROM_CASE_RECORDS"}}])}}function Ll(e,...t){return e.some(n=>t.includes(n.type))}function e3(e,t){const n=$N(e),r=Ll(t,"INFERENCE_REQUESTED"),s=Ll(t,"INFERENCE_STARTED","INFERENCE_PROGRESS"),i=Ll(t,"INFERENCE_COMPLETED","MODEL_RESULT_APPLIED"),o=Ll(t,"INFERENCE_FAILED"),l=Ll(t,"STAGE2_RESULTS_RECORDED"),c=Ll(t,"STAGE3_RESULTS_RECORDED"),u=Ll(t,"STAGE2_CLASS_CONFIRMED"),m=Ll(t,"STAGE2_NEXT_STEP_SET"),p=Ll(t,"CASE_CLOSED");return n.computed.model3.available||n.stage>=3&&i?(n.modelStatus="DONE",n.operationStep!=="COMPLETED"&&(n.operationStep="FOLLOW_UP")):n.computed.model2.available||n.stage>=2&&i?(n.modelStatus="DONE",n.operationStep!=="CLASSIFIED"&&n.operationStep!=="COMPLETED"&&(n.operationStep="RESULT_READY")):(r||s)&&!o?n.modelStatus="PROCESSING":n.modelStatus="PENDING",n.stage===1?p||n.status==="CLOSED"?n.operationStep="COMPLETED":Ll(t,"CONTACT_RESULT","CONTACT_SENT")&&(n.operationStep="IN_PROGRESS",(n.status==="OPEN"||n.status==="WAITING_RESULTS")&&(n.status="IN_PROGRESS")):n.stage===2?m||n.status==="NEXT_STEP_SET"?n.operationStep="COMPLETED":u||n.status==="CLASS_CONFIRMED"?n.operationStep="CLASSIFIED":n.computed.model2.available||i?n.operationStep="RESULT_READY":l||n.computed.evidence.stage2.completed?n.operationStep="IN_PROGRESS":n.operationStep="WAITING":p||n.status==="CLOSED"?n.operationStep="COMPLETED":n.computed.model3.available||i?n.operationStep="FOLLOW_UP":c||n.computed.evidence.stage3.completed?n.operationStep="IN_PROGRESS":n.operationStep="WAITING",n.computed.model2.available&&(n.classification=LN(n.computed.model2.predictedLabel),n.riskScore=Math.round((n.computed.model2.probs?.AD??0)*100),(n.status==="WAITING_RESULTS"||n.status==="IN_PROGRESS")&&(n.status="READY_TO_CLASSIFY")),n.computed.model3.available&&(n.riskScore=Math.round(pd(n.computed.model3,n.computed.stage3Profile?.stage3Type??"PREVENTIVE_TRACKING")*100),n.status==="WAITING_RESULTS"&&(n.status="IN_PROGRESS")),u&&(n.status="CLASS_CONFIRMED"),m&&(n.status=n.stage===3?"IN_PROGRESS":"NEXT_STEP_SET"),p&&(n.status="CLOSED",n.operationStep="COMPLETED"),n}function vd(e,t){Eo();const n=ps.get(e);if(!n)return;const r=$N(n);t(r),r.updatedAt=gc();const s=hx(r),i=e3(s,ku.get(e)??[]);ps.set(e,i),Mx()}function Mz(e,t,n,r){return{eventId:`evt-${e}-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,caseId:e,at:gc(),actorId:r,type:t,payload:n}}function Za(e,t,n={},r="system"){Eo();const s=Mz(e,t,n,r),i=ku.get(e)??[],o=[s,...i];ku.set(e,o);const l=ps.get(e);if(l){const c=hx({...l,updatedAt:s.at});ps.set(e,e3(c,o))}return Mx(),s}function KEe(e,t,n){vd(e,r=>{r.stage=2,n?.route&&(r.stage2Route=n.route),r.status="WAITING_RESULTS",r.operationStep="IN_PROGRESS",r.modelStatus="PENDING",r.computed.evidence.stage2.required={...r.computed.evidence.stage2.required,...t}}),Za(e,"STAGE2_RESULTS_RECORDED",{route:n?.route,required:t},n?.actorId??"system")}function zEe(e){return Pf(e===""?{NORMAL:.78,MCI:.17,AD:.05}:e==="MCI"?{NORMAL:.13,MCI:.71,AD:.16}:{NORMAL:.08,MCI:.2,AD:.72})}function s7(e,t="system",n){Eo();const r=ps.get(e);if(!r||!r.computed.evidence.stage2.completed)return!1;const s=gc();return vd(e,i=>{const o=og(i,n?.labelOverride,n?.mciBandOverride);i.stage=2,i.computed.model2=o,i.modelStatus="DONE",i.operationStep=Iz(2),i.status="READY_TO_CLASSIFY",i.classification=LN(o.predictedLabel),i.riskScore=Math.round((o.probs?.AD??0)*100);const l=Xf(i);i.stage===3&&l&&i.computed.model3.available&&(i.computed.model3=lh(i))}),Za(e,"INFERENCE_COMPLETED",{stage:2,at:s},t),Za(e,"MODEL_RESULT_APPLIED",{stage:2,at:s},t),Za(e,"APPROVAL_PENDING",{stage:2,target:"CLASSIFICATION_CONFIRMED"},t),!0}function qEe(e,t,n){Eo();const r=ps.get(e);return!r||!r.computed.model2.available&&!r.computed.evidence.stage2.completed?!1:(vd(e,s=>{const i=zEe(t),o=Math.round((i.MCI+i.AD*.3)*100);s.status="CLASS_CONFIRMED",s.operationStep="CLASSIFIED",s.modelStatus="DONE",s.classification=LN(t),s.riskScore=Math.round((i.AD??0)*100),s.computed.model2={available:!0,probs:i,predictedLabel:t,mciScore:o,mciBand:n?.mciBand??Az(o),modelVersion:Sz,updatedAt:gc()};const l=Xf(s);s.stage===3&&(l?s.computed.model3.available&&(s.computed.model3=lh(s)):(s.stage=2,s.status="CLASS_CONFIRMED",s.operationStep="CLASSIFIED",s.computed.model3={available:!1}))}),Za(e,"STAGE2_CLASS_CONFIRMED",{label:t,rationale:n?.rationale},n?.actorId??"system"),Za(e,"APPROVAL_RESOLVED",{stage:2,target:"CLASSIFICATION_CONFIRMED"},n?.actorId??"system"),!0)}function VEe(e,t,n){let r=!1,s=null;return vd(e,i=>{if(i.status="NEXT_STEP_SET",i.operationStep="COMPLETED",t==="STAGE3"){if(!Xf(i)){s="Stage3  MCI-MID/MCI-HIGH/AD  .",i.status="CLASS_CONFIRMED",i.operationStep="CLASSIFIED";return}r=!0,i.stage=3,i.status="IN_PROGRESS",i.operationStep="IN_PROGRESS",i.computed.evidence.stage3.completed&&(i.computed.model3=lh(i)),i.modelStatus=i.computed.model3.available?"DONE":"PENDING"}t==="FOLLOWUP_2Y"&&(i.status="CLOSED",i.operationStep="COMPLETED")}),t==="STAGE3"&&r&&Za(e,"STAGE_CHANGE",{from:2,to:3,reason:"STAGE2_CLASS_ELIGIBLE"},n?.actorId??"system"),Za(e,"STAGE2_NEXT_STEP_SET",{nextStep:t,applied:t==="STAGE3"?r:!0,blockedReason:s,summary:n?.summary},n?.actorId??"system"),Za(e,"APPROVAL_RESOLVED",{stage:2,target:"NEXT_STEP_DECIDED"},n?.actorId??"system"),t==="STAGE3"?r:!0}function WEe(e,t,n){const r=gc();vd(e,s=>{if(t==="MOVE_STAGE2"){s.stage=2,s.stage2Route=n?.route??s.stage2Route,s.status="WAITING_RESULTS",s.operationStep="WAITING",s.modelStatus="PENDING",s.computed.ops.lastContactAt=r;return}s.stage=1,s.status==="CLOSED"?s.operationStep="COMPLETED":(s.status="IN_PROGRESS",s.operationStep="FOLLOW_UP"),s.computed.ops.lastContactAt=r})}function i7(e,t,n="system"){vd(e,r=>{r.computed.ops.bookingPendingCount=Math.max(0,t),r.status==="WAITING_RESULTS"&&(r.status="IN_PROGRESS")}),Za(e,"BOOKING_CONFIRMED",{pendingCount:t},n)}function YEe(e,t,n="system"){vd(e,r=>{r.computed.ops.contactMode=t}),Za(e,"DATA_SYNCED",{reason:"CONTACT_MODE_CHANGED",contactMode:t},n)}function QEe(e,t,n="system"){vd(e,r=>{r.stage=3,r.status="WAITING_RESULTS",r.operationStep="IN_PROGRESS",r.modelStatus="PENDING",r.computed.evidence.stage3.required={...r.computed.evidence.stage3.required,...t}}),Za(e,"STAGE3_RESULTS_RECORDED",{required:t},n)}function o7(e,t="system"){Eo();const n=ps.get(e);if(!n||!n.computed.evidence.stage3.completed)return!1;const r=gc();return vd(e,s=>{Xf(s),s.computed.model3=lh(s),s.modelStatus="DONE",s.operationStep=Iz(3),s.riskScore=Math.round(pd(s.computed.model3,s.computed.stage3Profile?.stage3Type??"PREVENTIVE_TRACKING")*100),s.status="IN_PROGRESS"}),Za(e,"INFERENCE_COMPLETED",{stage:3,at:r},t),Za(e,"MODEL_RESULT_APPLIED",{stage:3,at:r},t),Za(e,"APPROVAL_PENDING",{stage:3,target:"NEXT_STEP_DECIDED"},t),Za(e,"STAGE3_RISK_UPDATED",{},t),!0}function XEe(e,t=Zk,n="system"){Eo();const r=ps.get(e);if(!r)return null;const s=kz(r,t);if(s.patches.length===0)return s;const i=[...ku.get(e)??[]];s.auditLog&&(i.unshift(Mz(e,"DATA_SYNCED",{reason:"STAGE3_RECONCILED",message:s.auditLog.message,patches:s.patches.map(l=>({code:l.code,path:l.path}))},n)),ku.set(e,i));const o=hx({...s.nextCase,updatedAt:gc()});return ps.set(e,e3(o,i)),Mx(),s}function JEe(e){return Eo(),[...ku.get(e)??[]]}function ZEe(e){Eo();let t=!1;for(const n of e){if(ps.has(n.id))continue;const r=Pz(n);ps.set(r.caseId,r),ku.set(r.caseId,[{eventId:`evt-${r.caseId}-seed`,caseId:r.caseId,at:r.updatedAt,actorId:r.assigneeId??"system",type:"DATA_SYNCED",payload:{reason:"REMOTE_CASE_SEEDED"}}]),t=!0}t&&Mx()}function ch(e){Eo();const t=ps.get(e);if(!t)return null;const{legacyQuality:n,legacyRisk:r,legacyTags:s,...i}=t;return i}function Lz(e,t){if(t.stage&&t.stage!=="ALL"&&e.stage!==t.stage)return!1;if(t.status&&t.status!=="ALL"){const r=t.status==="WAITING_RESULTS"&&jz.has(e.caseId);if(e.status!==t.status&&!r)return!1}if(t.sido&&e.region.sido!==t.sido||t.sigungu&&e.region.sigungu!==t.sigungu||t.center&&e.region.center!==t.center||t.assigneeId&&e.assigneeId!==t.assigneeId)return!1;const n=(t.keyword??"").trim().toLowerCase();return!(n.length>0&&![e.caseId,e.patient.name,e.patient.phone,e.assigneeId,e.status,e.stage].filter(Boolean).join(" ").toLowerCase().includes(n))}function $z(e){return{...v1,...e??{}}}function eje(e){Eo();const t=$z(e);return[...ps.values()].filter(n=>Lz(n,t)).sort((n,r)=>r.updatedAt.localeCompare(n.updatedAt)).map(n=>{const{legacyQuality:r,legacyRisk:s,legacyTags:i,...o}=n;return o})}function tje(e){return e.computed.model3.available?e.computed.model3.label==="HIGH"?"":e.computed.model3.label==="MID"?"":"":e.computed.model2.available?e.computed.model2.predictedLabel===""||e.computed.model2.mciBand===""?"":e.computed.model2.predictedLabel==="MCI"?"":"":e.legacyRisk}function nje(e){return e.stage===1?e.computed.ops.contactMode==="AGENT"?"  ":"  ":e.stage===2?e.computed.model2.available?e.computed.model2.predictedLabel===""?"  ":e.computed.model2.predictedLabel==="MCI"?e.computed.model2.mciBand===""?"High MCI ":"MCI ":"  ":"  ":e.computed.model3.available?e.computed.model3.label==="HIGH"?" ":e.computed.model3.label==="MID"?" ":" ":" "}function rje(e){return e.status==="WAITING_RESULTS"?"  ":e.status==="READY_TO_CLASSIFY"?"  ":e.status==="CLASS_CONFIRMED"?"  ":e.status==="NEXT_STEP_SET"?e.stage===3?"  ":"  ":e.status==="CLOSED"?"":e.status==="ON_HOLD"?" ":e.stage===3?"  ":" "}function aje(e){const t=new Set;e.computed.ops.bookingPendingCount&&e.computed.ops.bookingPendingCount>0&&t.add(" "),e.stage===2&&!e.computed.model2.available&&t.add("MCI "),e.stage===2&&e.computed.model2.available&&e.computed.model2.predictedLabel==="MCI"&&e.computed.model2.mciBand===""&&t.add("High MCI"),e.stage===3&&!e.computed.evidence.stage3.completed&&t.add(" "),e.stage===3&&(e.computed.model3.label==="HIGH"||!e.computed.model3.available)&&t.add(" "),(e.status==="WAITING_RESULTS"||e.status==="ON_HOLD")&&t.add("SLA "),jz.has(e.caseId)&&t.add("SLA ");for(const n of e.legacyTags)t.add(n);return[...t]}function N1(e){Eo();const t=ps.get(e.caseId);if(!t)return Jk[0];const n=t.computed.ops.dataQualityScore??80;return{id:t.caseId,stage:Dz(t.stage),risk:tje(t),path:nje(t),status:SEe(t.status),manager:t.assigneeId??" ",action:rje(t),updated:yEe(t.updatedAt),quality:EEe(n),profile:{name:t.patient.name,age:t.patient.age,phone:t.patient.phone??"010-0000-0000",guardianPhone:t.patient.caregiverPhone},alertTags:aje(t),computed:{stage2:{modelAvailable:t.computed.model2.available,classificationConfirmed:t.status==="CLASS_CONFIRMED"||t.status==="NEXT_STEP_SET"||t.status==="CLOSED"||t.operationStep==="CLASSIFIED"||t.operationStep==="FOLLOW_UP"||t.operationStep==="COMPLETED"||t.stage>=3,predictedLabel:t.computed.model2.predictedLabel,mciBand:t.computed.model2.mciBand,completed:t.computed.evidence.stage2.completed,missing:t.computed.evidence.stage2.missing},stage3:{modelAvailable:t.computed.model3.available,label:t.computed.model3.label,riskNow:pd(t.computed.model3,t.computed.stage3Profile?.stage3Type??"PREVENTIVE_TRACKING"),stage3Type:t.computed.stage3Profile?.stage3Type,originStage2Result:t.computed.stage3Profile?.originStage2Result,completed:t.computed.evidence.stage3.completed,missing:t.computed.evidence.stage3.missing},ops:{contactMode:t.computed.ops.contactMode,bookingPendingCount:t.computed.ops.bookingPendingCount,approvalsPendingCount:t.computed.ops.approvalsPendingCount,dataQualityScore:t.computed.ops.dataQualityScore}}}}function gx(e){return eje(e).map(t=>N1(t))}function sje(e){const t={1:0,2:0,3:0},n=e.filter(w=>w.stage===2),r=e.filter(w=>w.stage===3);for(const w of e)t[w.stage]+=1;const s=e.filter(w=>w.stage===1&&(w.status==="OPEN"||w.status==="IN_PROGRESS"||w.status==="WAITING_RESULTS")).length,i=n.filter(w=>w.operationStep==="WAITING"||w.operationStep==="IN_PROGRESS").length,o=n.filter(w=>w.computed.model2.available&&w.computed.model2.predictedLabel==="MCI"&&w.computed.model2.mciBand===""),l=r.filter(w=>w.operationStep==="WAITING"||w.operationStep==="IN_PROGRESS").length,c=r.filter(w=>w.computed.model3.available&&w.computed.model3.label==="HIGH"||(w.riskScore??0)>=67).length,u=n.filter(w=>w.computed.model2.available&&w.computed.model2.predictedLabel==="MCI").length,m=n.filter(w=>w.computed.model2.available&&w.computed.model2.predictedLabel==="MCI"&&w.computed.model2.mciBand==="").length,p=n.filter(w=>w.computed.model2.available&&w.computed.model2.predictedLabel==="MCI"&&w.computed.model2.mciBand==="").length,g=o.length,x=m+p+g,y=w=>x===0?0:Math.round(w/x*100),v=o.slice(0,3).map(w=>({id:w.caseId,age:w.patient.age,probability:`${Math.round((w.computed.model2.probs?.AD??0)*100)}%`,period:w.computed.ops.bookingPendingCount?"3":"6",nextAction:"Stage3  "})),N=(w,U=!1)=>({id:w.caseId,name:w.patient.name,age:w.patient.age,stage:Dz(w.stage),reason:U?"/   ":w.stage===2&&!w.computed.evidence.stage2.completed?"   ":w.stage===3&&!w.computed.evidence.stage3.completed?"   ":"/   ",action:w.stage>=2?"":"",sla:U?"":w.status==="ON_HOLD"||w.status==="WAITING_RESULTS"?"":"1h "}),S=[...e].filter(w=>!lEe.has(w.caseId)).sort((w,U)=>{const X=(w.computed.ops.missingFieldCount??0)+(w.computed.ops.bookingPendingCount??0)*2,I=(U.computed.ops.missingFieldCount??0)+(U.computed.ops.bookingPendingCount??0)*2;return I!==X?I-X:U.updatedAt.localeCompare(w.updatedAt)}),j=S.filter(w=>a_.has(w.caseId)),C=S.filter(w=>!a_.has(w.caseId)),_=[...j,...C].slice(0,4).map(w=>N(w,a_.has(w.caseId))),A=Math.max(t[1],1),T=Math.round(t[2]/A*100),R=Math.round(u/A*100),M=Math.round(o.length/A*100),P=Math.round(t[3]/A*100),$=[{name:"1 ",count:t[1],rate:100,drop:0,wait:1.2},{name:"2 ",count:t[2],rate:T,drop:Math.max(0,100-T),wait:4.2},{name:"MCI",count:u,rate:R,drop:Math.max(0,T-R),wait:6.4},{name:"High MCI",count:o.length,rate:M,drop:Math.max(0,R-M),wait:9.1},{name:"3 ",count:t[3],rate:P,drop:Math.max(0,M-P),wait:12.5}];return{contactNeeded:s,stage2Waiting:i,highRiskMci:o.length,stage3Waiting:l,churnRisk:c,stageCounts:t,pipelineData:$,mciDistribution:[{name:"Low",value:y(m),color:"#059669"},{name:"Moderate",value:y(p),color:"#d97706"},{name:"High",value:y(g),color:"#dc2626"}],highRiskMciList:v,priorityTasks:_}}function EO(e){Eo();const t=$z(e),n=[...ps.values()].filter(r=>Lz(r,t));return sje(n)}function ije(){return{...v1}}function zp(e){v1={...v1,...e},Mx()}function Fz(e){const t=e.trim();if(t==="Stage 1"||t==="1 "){zp({stage:1});return}if(t==="Stage 2"||t==="2 "||t==="MCI"||t==="High MCI"){zp({stage:2});return}if(t==="Stage 3"||t==="3 "){zp({stage:3});return}if(t==="SLA "){zp({status:"WAITING_RESULTS"});return}zp({stage:"ALL",status:"ALL"})}function t3(){return h.useSyncExternalStore(MN,al,al)}function FN(e){return h.useSyncExternalStore(MN,al,al),h.useMemo(()=>e?ch(e):null,[e,al()])}function oje(e){return h.useSyncExternalStore(MN,al,al),h.useMemo(()=>e?JEe(e):[],[e,al()])}function Uz(){return h.useSyncExternalStore(MN,al,al),h.useMemo(()=>ije(),[al()])}const Lx="true".toLowerCase()!=="false",n3="/api/local-center",s_="CASE-2026-175";function Bz(e,t){const n=new URLSearchParams;for(const[s,i]of Object.entries(t))i==null||i===""||n.set(s,String(i));const r=n.toString();return r?`${e}?${r}`:e}function Gz(e){return{periodFrom:e?.periodFrom,periodTo:e?.periodTo,sido:e?.sido,sigungu:e?.sigungu,center:e?.center,stage:e?.stage,status:e?.status,assigneeId:e?.assigneeId,keyword:e?.keyword}}function il(){return new Date().toISOString()}function Hz(e){let t=0;for(let n=0;n<e.length;n+=1)t=Math.imul(31,t)+e.charCodeAt(n)|0;return t>>>0}function su(e,t,n,r){if(n>=r)return n;const s=r-n+1;return n+Hz(`${e}:${t}`)%s}function Pp(e,t,n){return n[Hz(`${e}:${t}`)%n.length]}function lje(e){if(!e)return"MID";if(e.classification==="AD")return"AD";if(e.classification==="MCI")return"MID";if(e.classification==="NORMAL")return"LOW";const t=e.riskScore??55;return t>=82?"AD":t>=70?"HIGH":t>=40?"MID":"LOW"}function cje(e,t){const n=lje(t),r={caseId:e,source:"SEEDED",syncedAt:il(),receivedMeta:{linkageStatus:"WAITING",providerName:" "},missingRequiredCount:0};n==="LOW"?(r.mmse=su(e,"mmse-low",24,29),r.gds=su(e,"gds-low",1,3),r.cogTestType=Pp(e,"cog-low",["CERAD-K","LICA"])):n==="MID"?(r.mmse=su(e,"mmse-mid",20,25),r.gds=su(e,"gds-mid",3,5),r.cogTestType=Pp(e,"cog-mid",["SNSB-II","CERAD-K"])):n==="HIGH"?(r.mmse=su(e,"mmse-high",16,22),r.gds=su(e,"gds-high",4,6),r.cdr=Number(Pp(e,"cdr-high",[.5,1])),r.cogTestType=Pp(e,"cog-high",["SNSB-II","SNSB-C"])):(r.mmse=su(e,"mmse-ad",10,18),r.gds=su(e,"gds-ad",5,7),r.cdr=Number(Pp(e,"cdr-ad",[1,2])),r.cogTestType=Pp(e,"cog-ad",["SNSB-II","SNSB-C"]),r.specialistOpinionStatus="DONE");const s=n==="LOW"||n==="MID"?["mmse","gds","cogTestType"]:n==="HIGH"?["mmse","gds","cdr","cogTestType"]:["mmse","gds","cdr","cogTestType","specialistOpinionStatus"];return r.missingRequiredCount=s.filter(i=>i==="specialistOpinionStatus"?r.specialistOpinionStatus!=="DONE":r[i]==null).length,r.filledFields=["mmse","gds","cdr","cogTestType","specialistOpinionStatus"].filter(i=>r[i]!=null),r}function dje(e=180){return new Promise(t=>setTimeout(t,e))}async function $x(e,t){const n=await fetch(e,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},...t});if(!n.ok)throw new Error(`HTTP ${n.status}`);return await n.json()}async function dc(e,t="demo"){return await dje(120+Math.floor(Math.random()*140)),{payload:e(),source:t}}function uje(e,t){ZEe(e);const n=gx(t),r=new Map(n.map(o=>[o.id,o])),s=e.map(o=>r.get(o.id)??o),i=new Set(s.map(o=>o.id));for(const o of n)i.has(o.id)||(s.push(o),i.add(o.id));return s}function fje(e,t){const n=ch(e);return n||t}function l7(e){return e.mciDistribution.some(t=>t.value>0)}function pje(e,t){const n=e.length>0?e:t,r=t.find(c=>c.id===s_&&c.stage==="Stage 1"),s=n.find(c=>c.id===s_),i=r??s,o=[],l=new Set;for(const c of n)c.id!==s_&&(l.has(c.id)||(l.add(c.id),o.push(c)));return(i?[i,...o]:o).slice(0,4)}function mje(e,t){const n=EO(t),r=pje(e.priorityTasks,n.priorityTasks);return!l7(e)&&l7(n)||e.highRiskMci<=0&&n.highRiskMci>0||e.highRiskMciList.length===0&&n.highRiskMciList.length>0?{...e,highRiskMci:n.highRiskMci,mciDistribution:n.mciDistribution,highRiskMciList:n.highRiskMciList,pipelineData:n.pipelineData,priorityTasks:r}:{...e,priorityTasks:r}}async function hje(e){const t=Gz(e);if(Lx)try{const r=await $x(Bz(`${n3}/dashboard/stats`,t));return{...r,stats:mje(r.stats,e)}}catch{const r=await dc(()=>({stats:EO(e),totalCases:gx(e).length,fetchedAt:il()}),"fallback");return{...r.payload,source:r.source}}const n=await dc(()=>({stats:EO(e),totalCases:gx(e).length,fetchedAt:il()}));return{...n.payload,source:n.source}}async function gje(e){const t=Gz(e);if(Lx)try{const r=await $x(Bz(`${n3}/dashboard/cases`,t)),s=uje(r.items,e);return{...r,items:s,total:s.length}}catch{const r=await dc(()=>{const s=gx(e);return{items:s,total:s.length,fetchedAt:il()}},"fallback");return{...r.payload,source:r.source}}const n=await dc(()=>{const r=gx(e);return{items:r,total:r.length,fetchedAt:il()}});return{...n.payload,source:n.source}}async function xje(e){if(Lx)try{const n=await $x(`${n3}/cases/${encodeURIComponent(e)}`);return{...n,item:fje(e,n.item)}}catch{const n=await dc(()=>({item:ch(e),fetchedAt:il()}),"fallback");return{...n.payload,source:n.source}}const t=await dc(()=>({item:ch(e),fetchedAt:il()}));return{...t.payload,source:t.source}}async function bje(e){const t=()=>{const r=ch(e);return{item:cje(e,r),fetchedAt:il()}};if(Lx)try{const r=await $x(`/api/stage2/cases/${encodeURIComponent(e)}/step2/autofill`);return"item"in r?{...r,source:r.source??"remote"}:{item:r,fetchedAt:il(),source:"remote"}}catch{const r=await dc(t,"fallback");return{...r.payload,source:r.source}}const n=await dc(t);return{...n.payload,source:n.source}}async function yje(e,t){if(Lx)try{return{...await $x(`/api/stage2/cases/${encodeURIComponent(e)}/step2/manual-edit`,{method:"POST",body:JSON.stringify(t)}),source:"remote"}}catch{const r=await dc(()=>({ok:!0,caseId:e,changedFields:t.changedFields,reason:t.reason,editor:t.editor,editedAt:il()}),"fallback");return{...r.payload,source:r.source}}const n=await dc(()=>({ok:!0,caseId:e,changedFields:t.changedFields,reason:t.reason,editor:t.editor,editedAt:il()}));return{...n.payload,source:n.source}}const r3=15e3,a3=30*6e4,s3=1e4;function Kz(e,t){return{...e,...t??{}}}function vje(e){const t=Uz(),n=t3(),r=h.useMemo(()=>Kz(t,e),[t,e]);return go({queryKey:["local-center","dashboard-stats",r,n],queryFn:()=>hje(r),placeholderData:am,staleTime:r3,gcTime:a3,refetchInterval:s3,refetchIntervalInBackground:!0,refetchOnWindowFocus:!1})}function Nje(e){const t=Uz(),n=t3(),r=h.useMemo(()=>Kz(t,e),[t,e]);return go({queryKey:["local-center","cases",r,n],queryFn:()=>gje(r),placeholderData:am,staleTime:r3,gcTime:a3,refetchInterval:s3,refetchIntervalInBackground:!0,refetchOnWindowFocus:!1})}function Sje(e){const t=t3();return go({queryKey:["local-center","case",e,t],queryFn:()=>xje(e??""),enabled:!!e,placeholderData:am,staleTime:r3,gcTime:a3,refetchInterval:s3,refetchIntervalInBackground:!0,refetchOnWindowFocus:!1})}const P0=({label:e,value:t,change:n,isUp:r,color:s,onClick:i})=>a.jsxs("div",{onClick:i,className:"bg-white p-5 rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-all cursor-pointer flex flex-col gap-2 group",children:[a.jsx("span",{className:"text-gray-500 text-xs font-semibold group-hover:text-blue-600 transition-colors",children:e}),a.jsxs("div",{className:"flex items-baseline justify-between",children:[a.jsx("span",{className:"text-2xl font-bold text-gray-900",children:t}),a.jsxs("div",{className:he("flex items-center text-[10px] font-bold px-1.5 py-0.5 rounded",r?"text-emerald-600 bg-emerald-50":"text-red-600 bg-red-50"),children:[r?a.jsx(MU,{size:12}):a.jsx(PU,{size:12}),n]})]}),a.jsx("div",{className:"mt-2 h-1 w-full bg-gray-100 rounded-full overflow-hidden",children:a.jsx("div",{className:he("h-full",s),style:{width:"65%"}})})]}),Eje={:"11010",:"11020",:"11030",:"11040",:"11050",:"11060",:"11070",:"11080",:"11090",:"11100",:"11110",:"11120",:"11130",:"11140",:"11150",:"11160",:"11170",:"11180",:"11190",:"11200",:"11210",:"11220",:"11230",:"11240",:"11250"};function jje(e){const t=sd.find(l=>e?.includes(l.name)||e?.includes(l.label))??sd[0],n=Object.entries(Eje).find(([l])=>e?.includes(l)),r=n?.[1]??"11230",s=n?.[0]??"",i=r.slice(0,2)||t.ctprvnCode,o=sd.find(l=>l.ctprvnCode===i)?.label??t.label;return{ctprvnCode:i,ctprvnLabel:o,sigCode:r,sigLabel:s}}const wje={contactNeeded:0,stage2Waiting:0,highRiskMci:0,stage3Waiting:0,churnRisk:0,pipelineData:[{name:"1 ",count:0,rate:0,drop:0,wait:0},{name:"2 ",count:0,rate:0,drop:0,wait:0},{name:"MCI",count:0,rate:0,drop:0,wait:0},{name:"High MCI",count:0,rate:0,drop:0,wait:0},{name:"3 ",count:0,rate:0,drop:0,wait:0}],mciDistribution:[{name:"Low",value:0,color:"#059669"},{name:"Moderate",value:0,color:"#d97706"},{name:"High",value:0,color:"#dc2626"}],highRiskMciList:[],priorityTasks:[]};function c7({onNavigateToCases:e,onSelectCase:t,centerName:n}){const{data:r}=vje({stage:"ALL",status:"ALL",keyword:""}),s=r?.stats??wje,i=jje(n),[o,l]=h.useState(null),c=h.useMemo(()=>s.mciDistribution.length>0?s.mciDistribution:[{name:"Low",value:0,color:"#059669"},{name:"Moderate",value:0,color:"#d97706"},{name:"High",value:0,color:"#dc2626"}],[s.mciDistribution]),u=s.highRiskMciList,m=s.pipelineData,p=s.priorityTasks,g=x=>{Fz(x),e(x)};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[a.jsx(P0,{label:"  ",value:s.contactNeeded.toLocaleString(),change:"",isUp:!0,color:"bg-blue-600",onClick:()=>g("SLA ")}),a.jsx(P0,{label:"2 ",value:s.stage2Waiting.toLocaleString(),change:"",isUp:!1,color:"bg-orange-500",onClick:()=>g(" ")}),a.jsx(P0,{label:" MCI",value:s.highRiskMci.toLocaleString(),change:"",isUp:!0,color:"bg-red-600",onClick:()=>g("High MCI")}),a.jsx(P0,{label:"3 ",value:s.stage3Waiting.toLocaleString(),change:"",isUp:!0,color:"bg-purple-600",onClick:()=>g("3 ")}),a.jsx(P0,{label:"",value:s.churnRisk.toLocaleString(),change:"",isUp:!1,color:"bg-gray-500",onClick:()=>g(" ")})]}),a.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-gray-200 bg-gradient-to-b from-white to-slate-50/80 p-6 shadow-sm",children:[a.jsx("div",{className:"pointer-events-none absolute -right-14 -top-14 h-40 w-40 rounded-full bg-blue-100/60 blur-3xl"}),a.jsx("div",{className:"pointer-events-none absolute -left-20 bottom-0 h-28 w-52 rounded-full bg-indigo-100/40 blur-3xl"}),a.jsxs("div",{className:"relative z-10 mb-5 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-gray-900",children:"  "}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:"       ."})]}),a.jsxs("div",{className:"hidden md:flex items-center gap-2 text-[10px]",children:[a.jsx("span",{className:"rounded-full border border-blue-200 bg-blue-50 px-2 py-1 font-semibold text-blue-700",children:" "}),a.jsx("span",{className:"rounded-full border border-rose-200 bg-rose-50 px-2 py-1 font-semibold text-rose-700",children:" "})]})]}),a.jsx("div",{className:"relative z-10 overflow-x-auto pb-1",children:a.jsx("div",{className:"grid min-w-[980px] grid-cols-5 gap-5",children:m.map((x,y)=>{const v=y===0?"from-blue-600 to-cyan-500":y===1?"from-indigo-600 to-blue-500":y===2?"from-sky-600 to-blue-500":y===3?"from-violet-600 to-indigo-500":"from-blue-700 to-indigo-700",N=Math.max(8,Math.min(x.rate,100)),S=o===x.name;return a.jsxs("button",{onClick:()=>g(x.name),onPointerEnter:j=>{j.pointerType!=="touch"&&l(x.name)},onPointerMove:j=>{j.pointerType!=="touch"&&l(x.name)},onPointerLeave:()=>l(j=>j===x.name?null:j),onMouseEnter:()=>l(x.name),onMouseLeave:()=>l(j=>j===x.name?null:j),onFocus:()=>l(x.name),onBlur:()=>l(j=>j===x.name?null:j),className:he("relative text-left rounded-2xl border border-slate-200 bg-white transition-all duration-200",S?"-translate-y-1 shadow-[0_18px_34px_rgba(37,99,235,0.22)]":"shadow-[0_14px_28px_rgba(15,23,42,0.08)]"),children:[a.jsx("div",{className:he("pointer-events-none absolute inset-x-4 -bottom-2 h-3 rounded-xl blur-sm transition-colors",S?"bg-blue-300/60":"bg-slate-300/60")}),a.jsxs("div",{className:"relative rounded-2xl",children:[a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-[11px] font-semibold tracking-wide text-slate-700",children:x.name}),a.jsxs("span",{className:"rounded-full bg-slate-100 px-2 py-0.5 text-[10px] font-semibold text-slate-500",children:["Stage ",y+1]})]}),a.jsxs("div",{className:"mt-2 flex items-end justify-between",children:[a.jsx("p",{className:"text-2xl font-bold text-slate-900 leading-none",children:x.count.toLocaleString()}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-[10px] text-slate-400",children:""}),a.jsxs("p",{className:"text-sm font-bold text-blue-700",children:[x.rate,"%"]})]})]}),a.jsx("div",{className:"mt-3",children:a.jsx("div",{className:"h-2 overflow-hidden rounded-full bg-slate-100",children:a.jsx("div",{className:he("h-full rounded-full bg-gradient-to-r",v),style:{width:`${N}%`}})})}),a.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[a.jsxs("div",{className:"rounded-lg border border-rose-100 bg-rose-50 px-2 py-1.5",children:[a.jsx("p",{className:"text-[10px] font-semibold text-rose-500",children:""}),a.jsxs("p",{className:"text-xs font-bold text-rose-700",children:[x.drop,"%"]})]}),a.jsxs("div",{className:"rounded-lg border border-amber-100 bg-amber-50 px-2 py-1.5",children:[a.jsx("p",{className:"text-[10px] font-semibold text-amber-600",children:" "}),a.jsxs("p",{className:"text-xs font-bold text-amber-700",children:[x.wait,""]})]})]})]}),y<4&&a.jsxs("div",{className:"pointer-events-none absolute top-1/2 -right-2 hidden -translate-y-1/2 md:flex items-center",children:[a.jsx("span",{className:"h-px w-3 bg-slate-200"}),a.jsx(ji,{size:12,className:"text-slate-300"})]})]})]},x.name)})})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[a.jsxs("div",{className:"lg:col-span-8 lg:self-start h-fit bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-5 border-b border-gray-100 flex items-center justify-between",children:[a.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(fs,{className:"text-amber-500",size:18}),"  "]}),a.jsxs("button",{onClick:()=>g("SLA "),className:"text-xs font-semibold text-blue-600 hover:underline flex items-center gap-1",children:["  ",a.jsx(ji,{size:14})]})]}),a.jsx("div",{className:"overflow-auto max-h-[420px]",children:a.jsxs("table",{className:"w-full text-left border-collapse",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-50 text-[11px] font-bold text-gray-500 uppercase tracking-wider",children:[a.jsx("th",{className:"px-5 py-3 border-b border-gray-100",children:"ID"}),a.jsx("th",{className:"px-5 py-3 border-b border-gray-100",children:""}),a.jsx("th",{className:"px-5 py-3 border-b border-gray-100",children:" Stage"}),a.jsx("th",{className:"px-5 py-3 border-b border-gray-100",children:" "}),a.jsx("th",{className:"px-5 py-3 border-b border-gray-100",children:"SLA"}),a.jsx("th",{className:"px-5 py-3 border-b border-gray-100 text-right",children:" "})]})}),a.jsx("tbody",{className:"text-sm",children:p.map(x=>a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors group",children:[a.jsx("td",{className:"px-5 py-4 text-gray-900 group-hover:text-blue-600 cursor-pointer",onClick:()=>t(x.id,x.stage),children:x.stage==="Stage 2"||x.stage==="Stage 3"?a.jsxs("div",{className:"leading-tight",children:[a.jsx("div",{className:"font-semibold",children:x.name}),a.jsx("div",{className:"font-mono text-[11px] text-gray-500",children:x.id})]}):a.jsx("span",{className:"font-mono font-medium",children:x.id})}),a.jsxs("td",{className:"px-5 py-4 text-gray-600",children:[x.age,""]}),a.jsx("td",{className:"px-5 py-4",children:a.jsx("span",{className:he("px-2 py-0.5 rounded text-[10px] font-bold border",x.stage==="Stage 1"?"bg-emerald-50 text-emerald-700 border-emerald-100":x.stage==="Stage 2"?"bg-blue-50 text-blue-700 border-blue-100":"bg-purple-50 text-purple-700 border-purple-100"),children:x.stage})}),a.jsx("td",{className:"px-5 py-4 text-gray-600 max-w-[200px] truncate",children:x.reason}),a.jsx("td",{className:"px-5 py-4",children:a.jsx("span",{className:he("px-2 py-0.5 rounded text-[10px] font-bold",x.sla===""?"bg-red-50 text-red-700":"bg-orange-50 text-orange-700"),children:x.sla})}),a.jsx("td",{className:"px-5 py-4 text-right",children:a.jsxs("div",{className:"flex items-center justify-end gap-2",children:[a.jsx("button",{className:"p-1.5 hover:bg-gray-200 rounded text-gray-600",title:"",children:a.jsx(ti,{size:14})}),a.jsx("button",{className:"p-1.5 hover:bg-gray-200 rounded text-gray-600",title:"",children:a.jsx(Zo,{size:14})}),a.jsx("button",{className:"p-1.5 hover:bg-gray-200 rounded text-gray-600",title:"",children:a.jsx(vC,{size:14})})]})})]},x.id))})]})}),a.jsx("div",{className:"p-3 bg-gray-50 text-[10px] text-gray-500 italic text-center",children:"*  : SLA            ."})]}),a.jsxs("div",{className:"lg:col-span-4 bg-white rounded-xl border border-gray-200 shadow-sm p-5 flex flex-col",children:[a.jsx("h3",{className:"font-bold text-gray-800 mb-4",children:"MCI  "}),a.jsxs("div",{className:"flex gap-4 items-center mb-6",children:[a.jsx("div",{className:"h-32 w-32 shrink-0",children:a.jsx(Da,{width:"100%",height:"100%",children:a.jsxs(DK,{children:[a.jsx(pc,{data:c,cx:"50%",cy:"50%",innerRadius:30,outerRadius:45,paddingAngle:5,dataKey:"value",children:c.map((x,y)=>a.jsx(xo,{fill:x.color},`cell-${y}`))}),a.jsx(or,{})]})})}),a.jsx("div",{className:"space-y-1.5 flex-1",children:c.map(x=>a.jsxs("div",{className:"flex items-center justify-between text-[10px] font-bold",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full",style:{backgroundColor:x.color}}),a.jsxs("span",{className:"text-gray-500",children:[x.name," MCI"]})]}),a.jsxs("span",{children:[x.value,"%"]})]},x.name))})]}),a.jsxs("div",{className:"flex-1 space-y-3",children:[a.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" MCI  (High)"}),u.length===0?a.jsx("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-3 text-[11px] text-gray-600",children:"  MCI  ."}):u.map(x=>a.jsxs("div",{className:"p-2.5 bg-gray-50 rounded-lg border border-gray-100 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"text-[11px] font-bold text-blue-600",children:[x.id," ",a.jsxs("span",{className:"text-gray-400 text-[10px]",children:["(",x.age,")"]})]}),a.jsxs("p",{className:"text-[9px] text-red-600 font-bold",children:["  ",x.probability," | ",x.period]})]}),a.jsx("button",{onClick:()=>t(x.id,"Stage 2"),className:"px-2 py-1 bg-white border border-gray-200 rounded text-[9px] font-bold text-gray-600 hover:bg-gray-100",children:x.nextAction})]},x.id))]}),a.jsx("button",{className:"mt-4 w-full py-2 bg-red-50 text-red-700 text-xs font-bold rounded-lg hover:bg-red-100 transition-colors",children:"3    "})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"relative bg-white rounded-xl border border-gray-200 shadow-sm p-5",children:[a.jsxs("h3",{className:"font-bold text-gray-800 mb-4 flex items-center justify-between",children:["   (//)",a.jsxs("div",{className:"flex gap-2",children:[a.jsx("span",{className:"text-[10px] px-2 py-0.5 bg-blue-50 rounded text-blue-700",children:i.sigLabel}),a.jsx("span",{className:"text-[10px] px-2 py-0.5 bg-gray-100 rounded text-gray-500",children:"emd "})]})]}),a.jsx(Xk,{title:`${i.sigLabel} // `,indicatorId:"total_cases",year:2026,scope:{mode:"regional",ctprvnCodes:[i.ctprvnCode],label:i.ctprvnLabel},fixedLevel:"emd",lockedSigCode:i.sigCode,lockedSigName:i.sigLabel,hideBreadcrumb:!0,variant:"portal",mapHeight:320,externalColorScheme:"risk",hideLegendPanel:!0,hintText:"//     .",className:"rounded-lg overflow-hidden"}),a.jsxs("div",{className:"pointer-events-none absolute left-8 top-[92px] z-10 rounded-md border border-slate-200 bg-white/95 px-4 py-3 shadow-md backdrop-blur-sm",children:[a.jsx("p",{className:"text-[11px] font-bold text-slate-700",children:"  "}),a.jsxs("div",{className:"mt-2 space-y-1.5 text-[10px] font-semibold text-slate-600",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-[#ef4444]"}),a.jsx("span",{children:" ( )"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-[#f59e0b]"}),a.jsx("span",{children:" ( )"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-[#10b981]"}),a.jsx("span",{children:"/"})]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-5",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"font-bold text-gray-800",children:"   "}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("div",{className:"flex items-center gap-1.5 text-[9px] font-bold text-gray-600",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600"})," "]}),a.jsxs("div",{className:"flex items-center gap-1.5 text-[9px] font-bold text-gray-600",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-[#d97706]"})," "]}),a.jsxs("div",{className:"flex items-center gap-1.5 text-[9px] font-bold text-gray-600",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-[#059669]"})," "]})]})]}),a.jsx("div",{className:"h-64",children:a.jsx(Da,{width:"100%",height:"100%",children:a.jsxs(RN,{data:[{date:"02/05",screen:72,evaluation:65,completed:58},{date:"02/06",screen:75,evaluation:68,completed:55},{date:"02/07",screen:82,evaluation:62,completed:62},{date:"02/08",screen:80,evaluation:70,completed:65},{date:"02/09",screen:88,evaluation:74,completed:68},{date:"02/10",screen:92,evaluation:81,completed:72},{date:"02/11",screen:89,evaluation:85,completed:75}],children:[a.jsx(Rs,{strokeDasharray:"3 3",vertical:!1,stroke:"#f1f5f9"}),a.jsx(oa,{dataKey:"date",fontSize:9,axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8"}}),a.jsx(Zr,{fontSize:9,axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8"},unit:"%"}),a.jsx(or,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"},labelStyle:{fontWeight:"bold",marginBottom:"4px"}}),a.jsx(Ja,{type:"monotone",dataKey:"screen",stroke:"#2563eb",strokeWidth:2.5,dot:{r:3}}),a.jsx(Ja,{type:"monotone",dataKey:"evaluation",stroke:"#d97706",strokeWidth:2.5,dot:{r:3}}),a.jsx(Ja,{type:"monotone",dataKey:"completed",stroke:"#059669",strokeWidth:2.5,dot:{r:3}})]})})}),a.jsxs("div",{className:"mt-4 flex items-center justify-around border-t border-gray-50 pt-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase",children:"  "}),a.jsx("p",{className:"text-sm font-bold text-emerald-600",children:"+4.2%"})]}),a.jsx("div",{className:"w-px h-6 bg-gray-100"}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase",children:"  "}),a.jsx("p",{className:"text-sm font-bold text-red-600",children:"115%"})]})]})]})]}),a.jsx("div",{className:"p-3 bg-gray-50 text-[10px] text-gray-500 italic text-center rounded-lg",children:"*  :         100%  .      ."})]})}const Aje=["AGE_OVER_THRESHOLD","HAS_MCI_HISTORY","HAS_DEMENTIA_HISTORY","HAS_COMPLAINT_HISTORY","HAS_REFUSAL_HISTORY","GUARDIAN_PRIMARY","COMPREHENSION_DIFFICULTY"],zz=new Set(Aje);function qz(e){const t=[];e.age>=80&&t.push("AGE_OVER_THRESHOLD"),e.dxHistory.hasMCI&&t.push("HAS_MCI_HISTORY"),e.dxHistory.hasDementia&&t.push("HAS_DEMENTIA_HISTORY"),e.contactHistory.hasComplaint&&t.push("HAS_COMPLAINT_HISTORY"),e.contactHistory.hasRefusal&&t.push("HAS_REFUSAL_HISTORY"),e.guardian.isPrimaryContact&&t.push("GUARDIAN_PRIMARY"),e.contactHistory.needsGuardian&&t.push("NEEDS_GUARDIAN_SUPPORT"),e.contactHistory.comprehensionDifficultyFlag&&t.push("COMPREHENSION_DIFFICULTY"),t.length===0&&t.push("STANDARD_CONTACT_PATH");const n=t.some(s=>zz.has(s))?"HUMAN_FIRST":"AI_FIRST";return{strategy:n,triggers:t,policyNote:n==="HUMAN_FIRST"?"       .      .":" ()  /   .        .",confidence:"RULE"}}function i3(e){return e.some(t=>zz.has(t))}function _je({outcomeCode:e,execution:t,linkageStatus:n,contactPlan:r}){const s=e==="REQUEST_HUMAN"||e==="REQUEST_GUARDIAN"||e==="CONFUSED"||e==="EMOTIONAL";let i=t.status;e==="CONTINUE_SELF"&&(i="DONE"),e==="SCHEDULE_LATER"&&(i="WAITING_RESPONSE"),e==="NO_RESPONSE"&&(i="RETRY_NEEDED"),e==="REFUSE"&&(i="STOPPED"),s&&(i="HANDOFF_TO_HUMAN");const o=e==="NO_RESPONSE"?t.retryCount+1:t.retryCount;let l=n,c=" ";e==="CONTINUE_SELF"?(l=n==="BOOKING_IN_PROGRESS"?"BOOKING_DONE":"BOOKING_IN_PROGRESS",c=l==="BOOKING_DONE"?"     ":"  "):e==="SCHEDULE_LATER"?(l="BOOKING_IN_PROGRESS",c="  "):s?(l="REFERRAL_CREATED",c="   /  "):e==="REFUSE"?(l="NOT_CREATED",c="   "):e==="NO_RESPONSE"&&(c="  ");let u=r;u&&e==="SCHEDULE_LATER"&&(u={...u});let m=!1;return u&&e==="NO_RESPONSE"&&o>=2&&u.channel!=="HYBRID"&&(u={...u,channel:"HYBRID"},m=!0),{executionStatus:i,retryCount:o,linkageStatus:l,contactPlan:u,requiresHandoffMemo:s,recommendedNextAction:c,recontactAfterHours:e==="SCHEDULE_LATER"?72:e==="NO_RESPONSE"?24:e==="REFUSE"?168:48,switchedToHybrid:m}}function d7(e){return e>=70?"HIGH":e>=45?"MID":"LOW"}function Cje(e){return e==="READY"?{label:" READY",status:e,tone:"success"}:e==="RUNNING"?{label:"  ",status:e,tone:"warning"}:e==="QUEUED"?{label:" ",status:e,tone:"warning"}:e==="FAILED"?{label:" ",status:e,tone:"danger"}:{label:"  ",status:e,tone:"neutral"}}function Go(e,t){return{step:e,...t}}function Vz(e,t){const n=Nz(e,t),r=n.nextCase,s=!!r.loop.completed.step1At,i=!!r.loop.completed.step2At,o=!!r.loop.completed.step3At,l=!!r.loop.completed.step4At,c=r.loop.status==="ON_HOLD"||r.loop.status==="EXCLUDED",u=[];s?u.push(Go(1,{title:"STEP 1",subtitle:" ",state:"DONE",reason:"STEP1  .",canOpen:!0})):u.push(Go(1,{title:"STEP 1",subtitle:" ",state:c?"LOCKED":"TODO",reason:c?r.loop.status==="ON_HOLD"?"  STEP1  .":"  STEP1  .":r.model.status==="READY"&&!t.autoCompleteStep1?"   STEP1  .":"STEP1   .",canOpen:!c})),i?u.push(Go(2,{title:"STEP 2",subtitle:" /",state:"DONE",reason:"STEP2  / .",canOpen:!0})):!s||c?u.push(Go(2,{title:"STEP 2",subtitle:" /",state:"LOCKED",reason:c?"    .":"STEP1  .",canOpen:!1})):u.push(Go(2,{title:"STEP 2",subtitle:" /",state:r.model.status==="RUNNING"||r.model.status==="QUEUED"?"IN_PROGRESS":"TODO",reason:r.model.status==="RUNNING"||r.model.status==="QUEUED"?" /  .":"STEP2  / .",canOpen:!0})),o?u.push(Go(3,{title:"STEP 3",subtitle:"  ",state:"DONE",reason:"STEP3    .",canOpen:!0})):!i||c?u.push(Go(3,{title:"STEP 3",subtitle:"  ",state:"LOCKED",reason:c?"    .":"STEP2  .",canOpen:!1})):u.push(Go(3,{title:"STEP 3",subtitle:"  ",state:r.model.status==="READY"?"IN_PROGRESS":"TODO",reason:r.model.status==="READY"?"     .":"   .",canOpen:!0})),l?u.push(Go(4,{title:"STEP 4",subtitle:"  ",state:"DONE",reason:"STEP4   .",canOpen:!0})):!o||c?u.push(Go(4,{title:"STEP 4",subtitle:"  ",state:"LOCKED",reason:c?"    .":"STEP3  .",canOpen:!1})):u.push(Go(4,{title:"STEP 4",subtitle:"  ",state:"TODO",reason:"   .",canOpen:!0}));const m=u.filter(j=>j.state==="DONE").length,p=u.find(j=>j.state==="TODO"||j.state==="IN_PROGRESS"),g=c?{label:r.loop.status==="ON_HOLD"?"  ":"  ",step:null,reason:"   ."}:p?{label:`STEP${p.step}  `,step:p.step,reason:p.reason}:{label:"  ",step:4,reason:"  ."},x=r.profile?.stage3Type??(r.profile?.originStage2Result==="AD"?"AD_MANAGEMENT":"PREVENTIVE_TRACKING"),y=r.model.status==="READY"&&r.model.result?{kind:"ready",label:x==="AD_MANAGEMENT"?`  ${Math.round(r.model.result.risk_2y_ad*100)}% (${d7(Math.round(r.model.result.risk_2y_ad*100))})`:`AD  (2) ${Math.round(r.model.result.risk_2y_ad*100)}% (${d7(Math.round(r.model.result.risk_2y_ad*100))})`,riskPct:Math.round(r.model.result.risk_2y_ad*100),modelVersion:r.model.result.modelVersion,computedAt:r.model.result.computedAt,tone:Math.round(r.model.result.risk_2y_ad*100)>=70?"danger":Math.round(r.model.result.risk_2y_ad*100)>=45?"warning":"success"}:{kind:"pending",label:" ",reason:"     ",tone:"warning"},v=r.loop.status==="ON_HOLD"||r.loop.status==="EXCLUDED"?" ":y.kind==="ready"?y.riskPct>=70?" ":y.riskPct>=45?"":"":"",N=v===" "?"":v===""?"":"",S=[...r.loop.blockers,...n.inconsistencyFlags.length>0?["  ."]:[]];return{caseId:r.caseId,source:r,display:{modelBadge:Cje(r.model.status),riskBadge:y,loopProgress:{done:m,total:4,text:`${m}/4`},trackingStatus:v,intensity:N,stepCards:u,inconsistencyFlags:n.inconsistencyFlags,warnings:S,primaryCta:g},meta:{lastUpdatedAt:r.updatedAt}}}function Wz(e){return e??oEe}function Tje(e,t){if(!e)return null;const n=ch(e);if(!n||n.stage!==3)return null;const r=Rz(n);return r?Vz(r,Wz(t)):null}function Yz(e,t){const n=FN(e),r=h.useMemo(()=>Wz(t),[t?.autoCompleteStep1]),s=r.autoCompleteStep1;return h.useEffect(()=>{e&&XEe(e,r)},[s,e,r]),h.useMemo(()=>{if(!n||n.stage!==3)return null;const i=Rz(n);return i?Vz(i,r):null},[s,n,r])}typeof window<"u"&&new URLSearchParams(window.location.search).get("demo");typeof window<"u"&&new URLSearchParams(window.location.search).get("panel");const Oje=[{label:"Stage 1",value:"Stage 1"},{label:"Stage 2",value:"Stage 2"},{label:"Stage 3",value:"Stage 3"}],Rje=[{label:"",value:"ALL"},{label:"Agent",value:"AGENT"},{label:"",value:"HUMAN"},{label:"",value:"UNASSIGNED"}],kje=[{label:"",value:"ALL"},{label:"L3",value:"L3_ONLY"},{label:"L2~L3",value:"L2_L3"},{label:"L0~L1",value:"L0_L1"}],Ije=[{label:"",value:"ALL"},{label:"",value:"NOT_TRIED"},{label:" ",value:"RETRY_NEEDED"},{label:"",value:"IN_PROGRESS"},{label:"",value:"SUCCESS"}];function Qz(e){const t=new Date(e.replace(" ","T"));return Number.isNaN(t.getTime())?0:t.getTime()}function Dje(e){return e.length>16?e.slice(0,16):e}function iu(e){return Math.max(0,Math.min(1,e))}function Pje(e){return Math.max(0,Math.min(100,e))}function Mje(e){return e>=85?"L3":e>=70?"L2":e>=50?"L1":"L0"}function Lje(e){return e==="L3"?"bg-red-50 text-red-700 border-red-200":e==="L2"?"bg-orange-50 text-orange-700 border-orange-200":e==="L1"?"bg-blue-50 text-blue-700 border-blue-200":"bg-gray-100 text-gray-700 border-gray-200"}function u7(e){return e==="L3"?" ":e==="L2"?"":e==="L1"?"":""}function $je(e,t){return t==="AGENT"?e==="L3"?"    / ":e==="L2"?" /  ":e==="L1"?" /  ":"  ":e==="L3"?"2   ":e==="L2"?"   ":e==="L1"?"/  ":"/ "}function Fje(e){return e==="AGENT"?"bg-indigo-50 text-indigo-700 border-indigo-200":e==="HUMAN"?"bg-emerald-50 text-emerald-700 border-emerald-200":"bg-gray-100 text-gray-700 border-gray-200"}function jO(e){return e==="AGENT"?"Agent":e==="HUMAN"?"":""}function Uje(e){return[...e.priorityFactors].sort((t,n)=>n.contribution-t.contribution).slice(0,3)}function Bje(e,t){return t==="ALL"?!0:t==="NOT_TRIED"?e==="":t==="RETRY_NEEDED"?e===" "||e==="":t==="IN_PROGRESS"?e==="":e===""}function Gje(e,t){return t==="ALL"?!0:t==="L3_ONLY"?e==="L3":t==="L2_L3"?e==="L3"||e==="L2":e==="L1"||e==="L0"}function Xz(e){return e.profile.phone.trim().length===0}function Hje(e){const t=e.computed?.ops?.contactMode;if(t==="AGENT")return"AI_FIRST";if(t==="HUMAN")return"HUMAN_FIRST";const n=e.profile.age,r=!!e.profile.guardianPhone,s=e.quality===""||e.alertTags.includes(" "),i=e.status===""||e.alertTags.includes(" "),o=!r&&n>=75,l=n>=80||e.risk==="",c=e.alertTags.includes("High MCI")||e.alertTags.includes(" "),u=e.risk===""&&n>=80;return qz({age:n,dxHistory:{hasMCI:c,hasDementia:u},contactHistory:{hasComplaint:s,hasRefusal:i,needsGuardian:o,comprehensionDifficultyFlag:l},guardian:{exists:r,isPrimaryContact:r&&(o||l)},responseHistory:{smsResponseGood:e.risk!=="",callResponseGood:e.status!=="",lastOutcome:e.status===""?"NO_RESPONSE":void 0}}).strategy}function Kje(e,t,n){const r=e.manager.trim().length>0&&!e.manager.includes(""),s=Hje(e),i=Xz(e);return r?i?{ownerType:"HUMAN",ownerName:e.manager,ownerReason:"      ."}:s==="AI_FIRST"?{ownerType:"AGENT",ownerName:e.manager,ownerReason:"    /     ."}:e.risk===""||e.alertTags.includes(" ")||n===""&&(t===" "||t==="")?{ownerType:"HUMAN",ownerName:e.manager,ownerReason:"         ."}:{ownerType:"HUMAN",ownerName:e.manager,ownerReason:"       ."}:s==="AI_FIRST"&&!i?{ownerType:"AGENT",ownerName:"  Agent",ownerReason:"    /   ."}:{ownerType:"UNASSIGNED",ownerName:void 0,ownerReason:i?"           .":"       ."}}function zje(e,t,n){const r=e.alertTags.includes("SLA "),s=e.status===""||e.status===""||r?1:e.status===""?.5:e.status===""?.35:e.status===""?.2:0,i=t===""?.6:t===" "?.95:t===""?.9:t===""?.3:.1,o=e.risk===""?1:e.risk===""?.6:.25,l=e.alertTags.includes("High MCI")||e.alertTags.includes(" ")?.2:0,c=iu(o+l),u=t===" "||t===""?1:t===""?.6:t===""?.2:0,m=e.quality===""?.65:e.quality===""?.35:.1,p=iu(m+(n===""?.2:0)+(!e.profile.guardianPhone&&(t===""||t===" ")?.2:0)),g=[{key:"SLA_URGENCY",label:"SLA ",weight:40,value:iu(s),contribution:0},{key:"CONTACT_STALENESS",label:" ",weight:25,value:iu(i),contribution:0},{key:"RISK_LEVEL",label:" ",weight:20,value:iu(c),contribution:0},{key:"RETRY_NEEDED",label:" ",weight:10,value:iu(u),contribution:0},{key:"CHANNEL_FRICTION",label:" ",weight:5,value:iu(p),contribution:0}].map(y=>({...y,contribution:Number((y.weight*y.value).toFixed(1))})),x=Math.round(Pje(g.reduce((y,v)=>y+v.contribution,0)));return{priorityScore:x,priorityTier:Mje(x),priorityFactors:g,slaUrgencyScore:iu(s)}}function qje(e){return e===" "?"bg-red-50 text-red-700 border-red-200":e===""?"bg-orange-50 text-orange-700 border-orange-200":e===""?"bg-blue-50 text-blue-700 border-blue-200":e===""?"bg-emerald-50 text-emerald-700 border-emerald-200":"bg-gray-100 text-gray-700 border-gray-200"}function Vje(e){return e===""?"bg-violet-50 text-violet-700 border-violet-200":e===""?"bg-blue-50 text-blue-700 border-blue-200":"bg-emerald-50 text-emerald-700 border-emerald-200"}function Wje(e){return e===" "?"bg-gray-100 text-gray-700 border-gray-200":e===" "||e==="Stage2 "?"bg-indigo-50 text-indigo-700 border-indigo-200":e===" "?"bg-violet-50 text-violet-700 border-violet-200":e===" "?"bg-blue-50 text-blue-700 border-blue-200":"bg-orange-50 text-orange-700 border-orange-200"}function Yje(e){return e==="AD"?"bg-red-50 text-red-700 border-red-200":e==="MCI"?"bg-orange-50 text-orange-700 border-orange-200":e===""?"bg-emerald-50 text-emerald-700 border-emerald-200":"bg-gray-100 text-gray-700 border-gray-200"}function Qje(e){return e===""?"bg-blue-50 text-blue-700 border-blue-200":"bg-amber-50 text-amber-700 border-amber-200"}function Xje(e){return e==="Stage3"?"bg-violet-50 text-violet-700 border-violet-200":e===""?"bg-emerald-50 text-emerald-700 border-emerald-200":"bg-orange-50 text-orange-700 border-orange-200"}function Jje(e){return e===" "?"bg-red-50 text-red-700 border-red-200":e===""?"bg-orange-50 text-orange-700 border-orange-200":"bg-emerald-50 text-emerald-700 border-emerald-200"}function Zje(e){const t=e.status===""?"":e.status===""?"":e.status===""?"":e.status===""?" ":"",n=e.action.includes("")?"":e.action.includes("")||(t===""||t===" ")&&e.profile.guardianPhone?"":"",r=t===""&&(e.risk===""||e.alertTags.includes(" "))?"Stage2 ":t===""||t===""?" ":n!==""&&e.profile.guardianPhone?" ":"",s={" ":5,:4,:3,:2,:1},i=Qz(e.updated),o=Xz(e),l=Kje(e,t,n),c=zje(e,t,n),u=l.ownerType==="UNASSIGNED"||o?" ":l.ownerType==="AGENT"&&(c.priorityTier==="L3"||c.priorityTier==="L2")?" ":r;return{kind:"Stage 1",stage:"Stage 1",caseId:e.id,manager:e.manager,updated:e.updated,source:e,contactStatus:t,lastContactAttemptAt:Dje(e.updated),channel:n,nextAction:u,ownerType:l.ownerType,ownerName:l.ownerName,ownerReason:l.ownerReason,priorityScore:c.priorityScore,priorityTier:c.priorityTier,priorityFactors:c.priorityFactors,statusRank:s[t],lastContactMs:i,slaUrgencyScore:c.slaUrgencyScore,slaHint:e.status===""||e.status===""?e.status:void 0}}function ewe(e){const t=e.computed?.stage2,n=t?.predictedLabel,r=t?.modelAvailable&&n?n===""?"AD":n===""?"":"MCI":"",s=t?.classificationConfirmed?"":"",i=t?.modelAvailable?r===""?"":"Stage3":" ",o=[e.path];t?.missing&&t.missing.length>0&&o.push(` ${t.missing.slice(0,2).join(", ")}`),e.alertTags.length>0&&o.push(` ${e.alertTags.slice(0,2).join(", ")}`),e.quality!==""&&o.push(` ${e.quality}`);const l={AD:4,MCI:3,:2,:1};return{kind:"Stage 2",stage:"Stage 2",caseId:e.id,manager:e.manager,updated:e.updated,source:e,classification:r,rationale:o.join("  "),confirmation:s,nextPath:i,confirmationRank:s===""?2:1,classificationRank:l[r],updatedMs:Qz(e.updated)}}function twe(e){const t=Tje(e.id),n=e.computed?.stage3?.originStage2Result??"-",r=e.computed?.stage3?.stage3Type==="AD_MANAGEMENT"?"AD":"",s=Math.round((e.computed?.stage3?.riskNow??0)*100),i=t?.display.trackingStatus??(e.alertTags.includes(" ")||e.status===""?" ":""),o=t?.display.intensity??(i===" "?"":i===""?"":"");return{kind:"Stage 3",stage:"Stage 3",caseId:e.id,manager:e.manager,updated:e.updated,source:e,stage2Result:n,stage3Type:r,currentRiskLabel:r==="AD"?`${s} `:`${s}%`,trackingStatus:i,intensity:o,intensityRank:o===""?3:o===""?2:1,riskRank:s}}const f7={"Stage 1":{operationQuestion:"   ?  ?   ?",operationHint:"Stage 1 /   .",sortLabel:"  ",defaultSortDescending:!0,mapRow:e=>Zje(e),compare:(e,t)=>{const n=e,r=t;return r.priorityScore!==n.priorityScore?r.priorityScore-n.priorityScore:r.slaUrgencyScore!==n.slaUrgencyScore?r.slaUrgencyScore-n.slaUrgencyScore:n.lastContactMs!==r.lastContactMs?n.lastContactMs-r.lastContactMs:r.statusRank-n.statusRank},searchBlob:e=>{const t=e;return[t.caseId,t.contactStatus,t.channel,t.nextAction,t.manager,jO(t.ownerType),t.ownerName??"",t.priorityTier,String(t.priorityScore)].join(" ")},summary:e=>{const t=e;return[{label:" ",value:t.length.toLocaleString(),color:"text-slate-900",icon:ec},{label:" ",value:t.filter(n=>n.contactStatus!=="").length.toLocaleString(),color:"text-blue-600",icon:ti},{label:" ",value:t.filter(n=>n.contactStatus===" "||n.contactStatus==="").length.toLocaleString(),color:"text-red-600",icon:ea},{label:"  ",value:t.filter(n=>n.nextAction===" ").length.toLocaleString(),color:"text-indigo-600",icon:Zo},{label:"Stage2  ",value:t.filter(n=>n.nextAction==="Stage2 ").length.toLocaleString(),color:"text-violet-600",icon:es}]},quickActions:e=>{const t=e;return t.ownerType==="UNASSIGNED"||t.nextAction===" "?[{key:"precheck",label:" ",icon:jm,tone:"text-gray-700 bg-gray-100 border-gray-200 hover:bg-gray-200"},{key:"verify-channel",label:" ",icon:vo,tone:"text-blue-700 bg-blue-50 border-blue-100 hover:bg-blue-100"}]:t.ownerType==="AGENT"?[{key:"agent-run",label:t.priorityTier==="L3"||t.priorityTier==="L2"?" Agent ":"Agent  ",icon:vo,tone:"text-indigo-700 bg-indigo-50 border-indigo-100 hover:bg-indigo-100"},{key:"agent-status",label:" ",icon:xa,tone:"text-blue-700 bg-blue-50 border-blue-100 hover:bg-blue-100"}]:[{key:"call",label:"",icon:ti,tone:"text-emerald-700 bg-emerald-50 border-emerald-100 hover:bg-emerald-100"},{key:"guardian",label:" ",icon:W0,tone:t.source.profile.guardianPhone?"text-violet-700 bg-violet-50 border-violet-100 hover:bg-violet-100":"text-gray-400 bg-gray-100 border-gray-200",disabled:!t.source.profile.guardianPhone},{key:"reserve",label:" ",icon:Zo,tone:"text-blue-700 bg-blue-50 border-blue-100 hover:bg-blue-100"}]}},"Stage 2":{operationQuestion:"    ,  ?",operationHint:"Stage 2    .",sortLabel:"  ",defaultSortDescending:!0,mapRow:e=>ewe(e),compare:(e,t)=>{const n=e,r=t;return r.confirmationRank!==n.confirmationRank?r.confirmationRank-n.confirmationRank:r.classificationRank!==n.classificationRank?r.classificationRank-n.classificationRank:r.updatedMs-n.updatedMs},searchBlob:e=>{const t=e;return[t.source.profile.name,t.caseId,t.classification,t.confirmation,t.nextPath,t.rationale,t.manager].join(" ")},summary:e=>{const t=e;return[{label:" ",value:t.length.toLocaleString(),color:"text-slate-900",icon:ec},{label:" ",value:t.filter(n=>n.confirmation==="").length.toLocaleString(),color:"text-amber-600",icon:ea},{label:" ",value:t.filter(n=>n.confirmation==="").length.toLocaleString(),color:"text-blue-600",icon:W0},{label:"Stage3 ",value:t.filter(n=>n.nextPath==="Stage3").length.toLocaleString(),color:"text-violet-600",icon:es},{label:"  ",value:t.filter(n=>n.nextPath===" ").length.toLocaleString(),color:"text-orange-600",icon:xa}]},quickActions:()=>[{key:"edit-classification",label:" ",icon:jm,tone:"text-indigo-700 bg-indigo-50 border-indigo-100 hover:bg-indigo-100"},{key:"review-rationale",label:" ",icon:xa,tone:"text-blue-700 bg-blue-50 border-blue-100 hover:bg-blue-100"},{key:"move-stage3",label:"Stage3 ",icon:es,tone:"text-violet-700 bg-violet-50 border-violet-100 hover:bg-violet-100"}]},"Stage 3":{operationQuestion:" , ,   ?",operationHint:"Stage 3 /  .",sortLabel:"  ",defaultSortDescending:!0,mapRow:e=>twe(e),compare:(e,t)=>{const n=e,r=t;return r.riskRank!==n.riskRank?r.riskRank-n.riskRank:r.intensityRank!==n.intensityRank?r.intensityRank-n.intensityRank:r.updated.localeCompare(n.updated)},searchBlob:e=>{const t=e;return[t.source.profile.name,t.caseId,t.stage2Result,t.stage3Type,t.currentRiskLabel,t.trackingStatus,t.intensity,t.manager].join(" ")},summary:e=>{const t=e;return[{label:" ",value:t.length.toLocaleString(),color:"text-slate-900",icon:ec},{label:" ",value:t.filter(n=>n.trackingStatus===" ").length.toLocaleString(),color:"text-red-600",icon:ea},{label:"",value:t.filter(n=>n.trackingStatus==="").length.toLocaleString(),color:"text-orange-600",icon:xa},{label:" ",value:t.filter(n=>n.intensity==="").length.toLocaleString(),color:"text-red-600",icon:W0},{label:"7  ",value:t.filter(n=>n.nextEvalMs-Date.now()<=10080*60*1e3).length.toLocaleString(),color:"text-blue-600",icon:Zo}]},quickActions:()=>[{key:"add-tracking",label:"  ",icon:xa,tone:"text-blue-700 bg-blue-50 border-blue-100 hover:bg-blue-100"},{key:"book-recheck",label:" ",icon:Zo,tone:"text-orange-700 bg-orange-50 border-orange-100 hover:bg-orange-100"},{key:"adjust-intensity",label:"  ",icon:W0,tone:"text-violet-700 bg-violet-50 border-violet-100 hover:bg-violet-100"}]}};function nwe({onSelectCase:e,initialFilter:t,externalSearchKeyword:n,onExternalSearchKeywordChange:r,initialViewState:s,onViewStateChange:i}){const{data:o}=Nje(),l=o?.items??[],c=h.useMemo(()=>V2e(t),[t]),u=c.stageFilter==="all"?"Stage 1":c.stageFilter,m=h.useMemo(()=>({activeFilterTab:c.alertFilter,stageFilter:u,ownerFilter:"ALL",priorityFilter:"ALL",statusFilter:"ALL",sortDescending:f7[u].defaultSortDescending}),[u,c.alertFilter]),p=s??m,[g,x]=h.useState(p.activeFilterTab),[y,v]=h.useState(p.stageFilter),[N,S]=h.useState(n),[j,C]=h.useState("ALL"),[_,A]=h.useState("ALL"),[T,R]=h.useState("ALL"),[M,P]=h.useState(!1),[$,w]=h.useState(p.sortDescending),[U,X]=h.useState(null),I=h.useRef(null),G=h.useRef(null),L=h.useRef(!1),H=h.useMemo(()=>f7[y],[y]);h.useEffect(()=>{if(!L.current){L.current=!0;return}w(H.defaultSortDescending)},[H.defaultSortDescending,y]),h.useEffect(()=>{y!=="Stage 1"&&P(!1)},[y]),h.useEffect(()=>{S(n)},[n]),h.useEffect(()=>{i?.({activeFilterTab:g,stageFilter:y,ownerFilter:j,priorityFilter:_,statusFilter:T,sortDescending:$})},[g,i,j,_,$,y,T]);const F=le=>{S(le),r(le)};h.useEffect(()=>{if(!M)return;const le=ye=>{G.current&&(G.current.contains(ye.target)||P(!1))};return window.addEventListener("pointerdown",le),()=>window.removeEventListener("pointerdown",le)},[M]);const K=h.useMemo(()=>{const le=N.trim().toLowerCase();return l.filter(ye=>ye.stage===y).map(ye=>{const _e=H.mapRow(ye);return{item:ye,row:_e,searchBlob:H.searchBlob(_e).toLowerCase()}}).filter(ye=>le?ye.searchBlob.includes(le):!0)},[H,l,N,y]),ne=h.useMemo(()=>{const le=Object.fromEntries(My.map(ye=>[ye,0]));le.=K.length;for(const ye of My)ye!==""&&(le[ye]=K.reduce((_e,te)=>_e+(t7(te.item,ye)?1:0),0));return le},[K]),V=h.useMemo(()=>{const le={"Stage 1":0,"Stage 2":0,"Stage 3":0};for(const ye of l)(ye.stage==="Stage 1"||ye.stage==="Stage 2"||ye.stage==="Stage 3")&&(le[ye.stage]+=1);return le},[l]),ee=h.useMemo(()=>{const le=K.filter(te=>t7(te.item,g)).map(te=>te.row),_e=[...y==="Stage 1"?le.filter(te=>{const z=j==="ALL"?!0:te.ownerType===j,Ne=Gje(te.priorityTier,_),me=Bje(te.contactStatus,T);return z&&Ne&&me}):le].sort(H.compare);return $||_e.reverse(),_e},[g,H,j,_,K,$,y,T]),ae=h.useMemo(()=>H.summary(ee),[H,ee]),ue=h.useMemo(()=>ee.find(le=>le.caseId===U)??null,[U,ee]),ce=j!=="ALL"||_!=="ALL"||T!=="ALL",Z=+(j!=="ALL")+ +(_!=="ALL")+ +(T!=="ALL"),ie=g!==""||N.trim().length>0||y==="Stage 1"&&ce,Se=()=>{C("ALL"),A("ALL"),R("ALL")},fe=()=>{x(""),F(""),Se()},Te=()=>{I.current&&(clearTimeout(I.current),I.current=null)},Pe=(le,ye=0)=>{if(Te(),ye<=0){X(le);return}I.current=setTimeout(()=>{X(le),I.current=null},ye)},oe=(le=140)=>{Te(),U&&(I.current=setTimeout(()=>{X(null),I.current=null},le))};return h.useEffect(()=>()=>Te(),[]),a.jsxs("div",{className:"h-full flex flex-col gap-6",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:ae.map((le,ye)=>a.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:le.label}),a.jsx("p",{className:he("text-xl font-bold mt-1",le.color),children:le.value})]}),a.jsx("div",{className:he("p-2 rounded-lg bg-gray-50",le.color),children:a.jsx(le.icon,{size:20,className:"opacity-20"})})]},ye))}),a.jsx("div",{className:"flex-1 flex flex-col min-h-0",children:a.jsxs("div",{className:"flex-1 bg-white rounded-xl border border-gray-200 shadow-sm flex flex-col overflow-hidden",children:[a.jsxs("div",{className:"p-4 border-b border-gray-100 bg-gray-50/30 space-y-3",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[a.jsx("div",{className:"flex gap-2 overflow-x-auto pb-1 md:pb-0 scrollbar-hide",children:My.map(le=>a.jsxs("button",{onClick:()=>x(le),className:he("group whitespace-nowrap rounded-xl border px-4 py-2 text-[12px] font-bold transition-all duration-200 ease-out active:scale-[0.98]",g===le?"border-blue-600 bg-gradient-to-b from-blue-500 to-blue-700 text-white shadow-[0_10px_20px_-12px_rgba(37,99,235,0.9)]":"border-gray-200 bg-white text-gray-600 shadow-[0_2px_8px_rgba(15,23,42,0.08)] hover:-translate-y-0.5 hover:scale-[1.03] hover:border-blue-200 hover:text-blue-700 hover:shadow-[0_12px_24px_-16px_rgba(37,99,235,0.75)]"),children:[le,a.jsxs("span",{className:he("ml-1 text-[10px] font-semibold",g===le?"text-blue-100":"text-gray-400 transition-colors group-hover:text-blue-500"),children:["(",ne[le].toLocaleString(),")"]})]},le))}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:()=>w(le=>!le),className:"flex items-center gap-1 text-[10px] font-bold text-gray-600 bg-white px-2 py-1 border border-gray-200 rounded",children:[H.sortLabel,a.jsx(qQ,{size:10})]}),a.jsx("button",{className:"p-2 text-gray-500 hover:bg-gray-100 rounded-lg border border-gray-200",title:"",children:a.jsx(im,{size:16})})]})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsxs("span",{className:"inline-flex items-center gap-1 text-[10px] font-bold text-gray-500 bg-white border border-gray-200 rounded px-2 py-1",children:[a.jsx(jm,{size:10}),"Stage "]}),Oje.map(le=>a.jsxs("button",{onClick:()=>v(le.value),className:he("group rounded-lg border px-3.5 py-1.5 text-[12px] font-semibold transition-all duration-200 ease-out active:scale-[0.98]",y===le.value?"border-[#163b6f] bg-gradient-to-b from-[#244f87] to-[#163b6f] text-white shadow-[0_8px_18px_-12px_rgba(22,59,111,0.9)]":"border-gray-200 bg-white text-gray-600 shadow-[0_1px_6px_rgba(15,23,42,0.06)] hover:-translate-y-0.5 hover:scale-[1.03] hover:border-[#9eb5d8] hover:text-[#163b6f] hover:shadow-[0_10px_20px_-14px_rgba(30,64,175,0.6)]"),children:[le.label,a.jsxs("span",{className:he("ml-1 text-[10px] font-semibold",y===le.value?"text-blue-100":"text-gray-400 transition-colors group-hover:text-[#295a9d]"),children:["(",V[le.value].toLocaleString(),")"]})]},le.value)),y==="Stage 1"&&a.jsxs("div",{ref:G,className:"relative",children:[a.jsxs("button",{type:"button",onClick:()=>P(le=>!le),"aria-expanded":M,className:he("inline-flex items-center gap-2 rounded-lg border px-3 py-1.5 text-[11px] font-semibold transition-colors",ce?"border-blue-200 bg-blue-50 text-blue-700":"border-gray-200 bg-white text-gray-600 hover:bg-gray-50"),children:[a.jsx(jm,{size:12})," ",Z>0&&a.jsx("span",{className:"rounded bg-blue-600 px-1.5 py-0.5 text-[10px] font-bold text-white",children:Z})]}),M&&a.jsx("div",{className:"absolute left-0 top-[calc(100%+8px)] z-40 w-[360px] rounded-xl border border-gray-200 bg-white p-3 shadow-xl",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"mb-1 text-[11px] font-bold text-gray-600",children:""}),a.jsx("div",{className:"flex flex-wrap gap-1",children:Rje.map(le=>a.jsx("button",{onClick:()=>C(le.value),className:he("rounded-md border px-2 py-1 text-[11px] font-semibold transition-colors",j===le.value?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-gray-200 text-gray-600 hover:bg-gray-50"),children:le.label},le.value))})]}),a.jsxs("div",{children:[a.jsx("p",{className:"mb-1 text-[11px] font-bold text-gray-600",children:" "}),a.jsx("div",{className:"flex flex-wrap gap-1",children:kje.map(le=>a.jsx("button",{onClick:()=>A(le.value),className:he("rounded-md border px-2 py-1 text-[11px] font-semibold transition-colors",_===le.value?"border-orange-200 bg-orange-50 text-orange-700":"border-gray-200 text-gray-600 hover:bg-gray-50"),children:le.label},le.value))})]}),a.jsxs("div",{children:[a.jsx("p",{className:"mb-1 text-[11px] font-bold text-gray-600",children:""}),a.jsx("div",{className:"flex flex-wrap gap-1",children:Ije.map(le=>a.jsx("button",{onClick:()=>R(le.value),className:he("rounded-md border px-2 py-1 text-[11px] font-semibold transition-colors",T===le.value?"border-blue-200 bg-blue-50 text-blue-700":"border-gray-200 text-gray-600 hover:bg-gray-50"),children:le.label},le.value))})]}),a.jsxs("div",{className:"flex items-center justify-between border-t border-gray-100 pt-2",children:[a.jsx("span",{className:"text-[10px] text-gray-500",children:"   ."}),a.jsx("button",{type:"button",onClick:Se,className:"text-[11px] font-semibold text-blue-600 hover:text-blue-700",children:"  "})]})]})})]}),y==="Stage 1"&&a.jsx("span",{className:"text-[10px] text-gray-500",children:" //   "}),y==="Stage 1"&&ce&&a.jsx("button",{type:"button",onClick:Se,className:"inline-flex items-center rounded-md border border-amber-200 bg-amber-50 px-2 py-1 text-[10px] font-semibold text-amber-700 hover:bg-amber-100",children:"  "}),a.jsxs("div",{className:"group relative",children:[a.jsx("span",{className:"inline-flex h-7 w-7 cursor-help items-center justify-center rounded-lg border border-blue-100 bg-blue-50 text-blue-700 shadow-sm transition-colors hover:bg-blue-100",children:a.jsx(wm,{size:13})}),a.jsxs("div",{className:"pointer-events-none invisible absolute left-0 top-full z-30 mt-2 w-[320px] rounded-lg border border-blue-100 bg-white p-3 opacity-0 shadow-xl transition-all duration-150 group-hover:visible group-hover:opacity-100",children:[a.jsx("p",{className:"text-[11px] font-bold text-blue-800",children:" "}),a.jsx("p",{className:"mt-1 text-xs text-gray-800",children:H.operationQuestion}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:H.operationHint})]})]}),a.jsxs("div",{className:"ml-auto flex w-full md:w-[280px] items-center gap-2 rounded-lg border border-gray-200 bg-white px-3 py-1.5",children:[a.jsx(Sx,{size:14,className:"text-gray-400"}),a.jsx("input",{value:N,onChange:le=>F(le.target.value),placeholder:"/ID///  ",className:"w-full bg-transparent text-xs text-gray-700 outline-none placeholder:text-gray-400"})]}),ie&&a.jsx("button",{onClick:fe,className:"text-[11px] font-semibold text-blue-600 hover:text-blue-700",children:" "})]})]}),a.jsxs("div",{className:"flex-1 overflow-auto",children:[a.jsxs("table",{className:"w-full text-left border-collapse",children:[y==="Stage 1"&&a.jsxs(a.Fragment,{children:[a.jsx("thead",{className:"sticky top-0 bg-white z-20 shadow-sm",children:a.jsxs("tr",{className:"bg-gray-50/80 text-[11px] font-bold text-gray-500 uppercase tracking-wider",children:[a.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:" "}),a.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:""}),a.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:" "}),a.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:" "}),a.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:"  "}),a.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:" "}),a.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:" "})]})}),a.jsxs("tbody",{className:"text-sm",children:[ee.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"px-4 py-16 text-center text-xs text-gray-400",children:"   ."})}),ee.map(le=>a.jsxs("tr",{"data-case-id":le.caseId,className:he("cursor-pointer transition-colors border-b border-gray-50 last:border-0",U===le.caseId?"bg-blue-50/60":"hover:bg-gray-50/70"),onClick:()=>e(le.caseId,le.stage),onMouseEnter:()=>Pe(le.caseId,30),onMouseLeave:()=>oe(150),children:[a.jsxs("td",{className:"px-4 py-3.5",children:[a.jsx("p",{className:"font-mono font-medium text-gray-900",children:le.caseId}),a.jsxs("p",{className:"text-[10px] text-gray-400",children:[" ",le.manager]})]}),a.jsx("td",{className:"px-4 py-3.5",children:a.jsxs("div",{className:"group relative inline-flex flex-col",children:[a.jsx("span",{className:he("inline-flex w-fit rounded border px-2 py-0.5 text-[10px] font-semibold",Fje(le.ownerType)),children:jO(le.ownerType)}),a.jsx("p",{className:"mt-1 text-[10px] text-gray-500",children:le.ownerName??" "}),a.jsx("div",{className:"pointer-events-none invisible absolute left-0 top-[calc(100%+6px)] z-20 w-56 rounded-lg border border-gray-200 bg-white p-2 text-[11px] text-gray-700 opacity-0 shadow-xl transition-all duration-150 group-hover:visible group-hover:opacity-100",children:le.ownerReason})]})}),a.jsx("td",{className:"px-4 py-3.5",children:a.jsxs("div",{className:"group relative inline-flex flex-col",children:[a.jsxs("span",{className:he("inline-flex w-fit rounded border px-2 py-0.5 text-[10px] font-semibold",Lje(le.priorityTier)),children:[le.priorityTier,"  ",u7(le.priorityTier)]}),a.jsxs("p",{className:"mt-1 text-[10px] text-gray-500",children:[$je(le.priorityTier,le.ownerType),"   ",le.priorityScore]}),a.jsxs("div",{className:"pointer-events-none invisible absolute left-0 top-[calc(100%+6px)] z-20 w-60 rounded-lg border border-gray-200 bg-white p-2 text-[11px] text-gray-700 opacity-0 shadow-xl transition-all duration-150 group-hover:visible group-hover:opacity-100",children:[a.jsx("p",{className:"font-semibold text-gray-800",children:"  "}),Uje(le).map(ye=>a.jsxs("p",{className:"mt-1",children:[" ",ye.label," ",ye.contribution.toFixed(1),""]},`${le.caseId}-${ye.key}`))]})]})}),a.jsxs("td",{className:"px-4 py-3.5",children:[a.jsx("span",{className:he("rounded border px-2 py-0.5 text-[10px] font-semibold",qje(le.contactStatus)),children:le.contactStatus}),le.slaHint?a.jsxs("p",{className:"mt-1 text-[10px] text-gray-500",children:["SLA  : ",le.slaHint]}):null]}),a.jsx("td",{className:"px-4 py-3.5 text-xs text-gray-700",children:le.lastContactAttemptAt}),a.jsx("td",{className:"px-4 py-3.5",children:a.jsx("span",{className:he("rounded border px-2 py-0.5 text-[10px] font-semibold",Vje(le.channel)),children:le.channel})}),a.jsx("td",{className:"px-4 py-3.5",children:a.jsx("span",{className:he("rounded border px-2 py-0.5 text-[10px] font-semibold",Wje(le.nextAction)),children:le.nextAction})})]},le.caseId))]})]}),y==="Stage 2"&&a.jsxs(a.Fragment,{children:[a.jsx("thead",{className:"sticky top-0 bg-white z-20 shadow-sm",children:a.jsxs("tr",{className:"bg-gray-50/80 text-[11px] font-bold text-gray-500 uppercase tracking-wider",children:[a.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:" "}),a.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:""}),a.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:" "}),a.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:"  "}),a.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:"  "}),a.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:" "})]})}),a.jsxs("tbody",{className:"text-sm",children:[ee.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"px-4 py-16 text-center text-xs text-gray-400",children:"   ."})}),ee.map(le=>a.jsxs("tr",{"data-case-id":le.caseId,className:he("cursor-pointer transition-colors border-b border-gray-50 last:border-0",U===le.caseId?"bg-blue-50/60":"hover:bg-gray-50/70"),onClick:()=>e(le.caseId,le.stage),onMouseEnter:()=>Pe(le.caseId,30),onMouseLeave:()=>oe(150),children:[a.jsx("td",{className:"px-4 py-3.5",children:a.jsx("p",{className:"font-medium text-gray-900",children:le.source.profile.name})}),a.jsx("td",{className:"px-4 py-3.5",children:a.jsx("p",{className:"text-xs font-semibold text-gray-700",children:le.manager})}),a.jsx("td",{className:"px-4 py-3.5",children:a.jsx("span",{className:he("rounded border px-2 py-0.5 text-[10px] font-semibold",Yje(le.classification)),children:le.classification})}),a.jsx("td",{className:"px-4 py-3.5 text-xs text-gray-700",children:le.rationale}),a.jsx("td",{className:"px-4 py-3.5",children:a.jsx("span",{className:he("rounded border px-2 py-0.5 text-[10px] font-semibold",Qje(le.confirmation)),children:le.confirmation})}),a.jsx("td",{className:"px-4 py-3.5",children:a.jsx("span",{className:he("rounded border px-2 py-0.5 text-[10px] font-semibold",Xje(le.nextPath)),children:le.nextPath})})]},le.caseId))]})]}),y==="Stage 3"&&a.jsxs(a.Fragment,{children:[a.jsx("thead",{className:"sticky top-0 bg-white z-20 shadow-sm",children:a.jsxs("tr",{className:"bg-gray-50/80 text-[11px] font-bold text-gray-500 uppercase tracking-wider",children:[a.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:""}),a.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:"Stage2 "}),a.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:"Stage3 "}),a.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:" "}),a.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:" "}),a.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:""})]})}),a.jsxs("tbody",{className:"text-sm",children:[ee.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"px-4 py-16 text-center text-xs text-gray-400",children:"   ."})}),ee.map(le=>a.jsxs("tr",{"data-case-id":le.caseId,className:he("cursor-pointer transition-colors border-b border-gray-50 last:border-0",U===le.caseId?"bg-blue-50/60":"hover:bg-gray-50/70"),onClick:()=>e(le.caseId,le.stage),onMouseEnter:()=>Pe(le.caseId,30),onMouseLeave:()=>oe(150),children:[a.jsx("td",{className:"px-4 py-3.5",children:a.jsx("p",{className:"font-medium text-gray-900",children:le.source.profile.name})}),a.jsx("td",{className:"px-4 py-3.5",children:a.jsx("span",{className:he("rounded border px-2 py-0.5 text-[10px] font-semibold",le.stage2Result==="AD"?"bg-violet-50 text-violet-700 border-violet-200":le.stage2Result==="MCI-HIGH"?"bg-red-50 text-red-700 border-red-200":le.stage2Result==="MCI-MID"?"bg-orange-50 text-orange-700 border-orange-200":"bg-gray-100 text-gray-700 border-gray-200"),children:le.stage2Result})}),a.jsx("td",{className:"px-4 py-3.5",children:a.jsx("span",{className:he("rounded border px-2 py-0.5 text-[10px] font-semibold",le.stage3Type==="AD"?"bg-violet-50 text-violet-700 border-violet-200":"bg-blue-50 text-blue-700 border-blue-200"),children:le.stage3Type})}),a.jsx("td",{className:"px-4 py-3.5 text-xs text-gray-700",children:le.currentRiskLabel}),a.jsx("td",{className:"px-4 py-3.5",children:a.jsx("span",{className:he("rounded border px-2 py-0.5 text-[10px] font-semibold",Jje(le.trackingStatus)),children:le.trackingStatus})}),a.jsxs("td",{className:"px-4 py-3.5",children:[a.jsx("p",{className:"text-xs font-semibold text-gray-700",children:le.manager}),a.jsxs("p",{className:"text-[10px] text-gray-400",children:[" ",le.intensity]})]})]},le.caseId))]})]})]}),ue&&a.jsxs("div",{className:"fixed z-50 w-64 rounded-xl border border-gray-200 bg-white p-4 shadow-2xl",style:{top:(()=>{const le=document.querySelector(`tr[data-case-id="${ue.caseId}"]`);if(!le)return 180;const ye=le.getBoundingClientRect(),_e=250,te=ye.top+ye.height/2-_e/2;return Math.max(80,Math.min(te,window.innerHeight-_e-20))})(),right:24},onMouseEnter:()=>Te(),onMouseLeave:()=>oe(120),children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wide text-gray-400",children:" "}),a.jsx("p",{className:he("mt-0.5 text-sm font-bold text-blue-700",ue.kind==="Stage 1"?"font-mono":"font-sans"),children:ue.kind==="Stage 1"?ue.caseId:ue.source.profile.name}),a.jsxs("p",{className:"mt-0.5 text-[11px] text-gray-500",children:[" ",ue.manager]})]}),a.jsxs("div",{className:"mb-3 rounded-lg border border-gray-100 bg-gray-50 p-2 text-[11px] text-gray-700",children:[ue.kind==="Stage 1"&&a.jsxs("p",{children:[jO(ue.ownerType),"  ",ue.priorityTier," ",u7(ue.priorityTier),"(",ue.priorityScore,")   ",ue.contactStatus,"   ",ue.nextAction]}),ue.kind==="Stage 2"&&a.jsxs("p",{children:[" ",ue.classification,"  ",ue.confirmation,"   ",ue.nextPath]}),ue.kind==="Stage 3"&&a.jsxs("p",{children:[ue.stage2Result,"  ",ue.stage3Type,"   ",ue.currentRiskLabel,"   ",ue.trackingStatus]})]}),a.jsx("div",{className:"mb-3 grid grid-cols-2 gap-1.5",children:H.quickActions(ue).map(le=>a.jsxs("button",{onClick:ye=>ye.stopPropagation(),disabled:le.disabled,className:he("inline-flex items-center gap-1 rounded-lg border px-2 py-2 text-[11px] font-semibold",le.tone,le.disabled?"cursor-not-allowed opacity-70":"cursor-pointer"),children:[a.jsx(le.icon,{size:12}),le.label]},`${ue.caseId}-${le.key}`))}),a.jsx("button",{className:"w-full rounded-lg bg-blue-600 py-2 text-[11px] font-bold text-white hover:bg-blue-700",onClick:()=>e(ue.caseId,ue.stage),children:" "})]})]}),a.jsxs("div",{className:"p-3 bg-gray-50 text-[10px] text-gray-500 border-t border-gray-100 flex items-center justify-between",children:[a.jsxs("span",{children:[y,"  : 1 - ",ee.length," of ",l.filter(le=>le.stage===y).length]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"italic",children:"Stage  ///  ."}),a.jsxs("span",{className:"inline-flex items-center gap-1",children:[a.jsx(xa,{size:10}),"   "]})]})]})]})})]})}function fo(e){return String(e).padStart(2,"0")}function rwe(e){const t=new Date(e);return`${fo(t.getHours())}:${fo(t.getMinutes())}`}function Yc(e){return`${e.getFullYear()}-${fo(e.getMonth()+1)}-${fo(e.getDate())}`}function ry(e){const[t,n,r]=e.split("-").map(Number);return new Date(t,(n||1)-1,r||1)}function Ly(e,t){const n=new Date(e);return n.setDate(e.getDate()+t),n}function awe(e,t){const n=new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime(),r=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime();return Math.round((r-n)/(1440*60*1e3))}function swe(e){return e==="pending"?"":e==="completed"?"":e==="cancelled"?"":""}function iwe(e){return e.includes("2 ")?"":e.includes("")?"":e.includes("")?"":e.includes("")?"":""}function i_(e,t){return t===""||e==="high"?"":e==="medium"?"":""}function owe(e){const t=(e||"").toUpperCase();return t.includes("APPOINT")?"":t.includes("RECONTACT")||t.includes("CALL")?"":t.includes("FOLLOWUP")?"":t.includes("REFERRAL")?"":t.includes("EXAM")?"":""}function lwe(e){const t=(e||"").toUpperCase();return t.includes("DONE")||t.includes("COMPLETED")?"":t.includes("CANCEL")?"":t.includes("QUEUED")||t.includes("WAIT")?"":t.includes("DELAY")||t.includes("OVERDUE")?"":""}function p7(e){return e===""?{icon:ti,chip:"bg-blue-500 text-white"}:e===""?{icon:Zo,chip:"bg-emerald-500 text-white"}:e===""?{icon:xh,chip:"bg-violet-500 text-white"}:e===""?{icon:aZ,chip:"bg-indigo-600 text-white"}:{icon:es,chip:"bg-cyan-600 text-white"}}function m7(e){return e===""?"text-red-700 bg-red-50 border-red-100":e===""?"text-amber-700 bg-amber-50 border-amber-100":e===""?"text-gray-600 bg-gray-50 border-gray-200":e===""?"text-slate-600 bg-slate-100 border-slate-200":"text-emerald-700 bg-emerald-50 border-emerald-100"}function h7(e){return e===""?"text-red-700 bg-red-50 border-red-100":e===""?"text-orange-700 bg-orange-50 border-orange-100":"text-blue-700 bg-blue-50 border-blue-100"}function o_(e){return e==="high"?{label:"",tone:"text-red-700 bg-red-50 border-red-100"}:e==="medium"?{label:"",tone:"text-amber-700 bg-amber-50 border-amber-100"}:{label:"",tone:"text-emerald-700 bg-emerald-50 border-emerald-100"}}function g7(e){return{title:"",caseId:"",patientName:"",patientAge:"70",date:e,time:"09:00",durationMinutes:"30",type:"",status:"",priority:"",riskLevel:"medium",assignee:"",location:"",reservationType:"",contactStatus:"",consultStatus:"",secondExamStatus:"",phone:"",guardianPhone:"",reminderSent:!1,reminderChannel:"SMS",followUpRequired:!1,reasonText:"",notes:""}}function cwe(e){return{title:e.title,caseId:e.caseId,patientName:e.patientName,patientAge:String(e.patientAge||70),date:e.date,time:e.time,durationMinutes:String(e.durationMinutes||30),type:e.type,status:e.status,priority:e.priority,riskLevel:e.riskLevel,assignee:e.assignee,location:e.location??"",reservationType:e.reservationType??"",contactStatus:e.contactStatus??"",consultStatus:e.consultStatus??"",secondExamStatus:e.secondExamStatus??"",phone:e.phone??"",guardianPhone:e.guardianPhone??"",reminderSent:e.reminderSent,reminderChannel:e.reminderChannel,followUpRequired:e.followUpRequired,reasonText:e.reasonText??"",notes:e.notes??""}}function dwe(e){const t=vz(),n=aEe(t).slice(0,24),r=new Map(t.map(l=>[l.id,l])),s=n.map((l,c)=>{const u=swe(l.status),m=iwe(l.type),p=Yc(Ly(e,c%17-6)),g=c%2===0?"00":"30",x=r.get(l.caseId);return{id:`SCH-APT-${fo(c+1)}`,caseId:l.caseId,patientName:l.patientName,patientAge:l.patientAge||0,date:p,time:l.time||`${fo(9+c%8)}:${g}`,durationMinutes:m===""?60:30,type:m,status:u,priority:i_(l.riskLevel,u),riskLevel:l.riskLevel,title:l.type,assignee:l.counselor,location:x?.reservation?.locationText,reservationType:l.reservationType,contactStatus:l.caseContactStatus,consultStatus:l.caseConsultStatus,secondExamStatus:l.caseSecondExamStatus,phone:l.phone,guardianPhone:x?.guardianPhone,reminderSent:l.status==="reminder_sent"||!!l.reminderSent,reminderChannel:"SMS",followUpRequired:u===""||l.riskLevel==="high",reasonText:l.reasonText,notes:l.notes,autoMemoRecent:l.autoMemoRecent}}),i=t.filter(l=>l.contactStatus==="UNREACHED").slice(0,8).map((l,c)=>{const u=c%4===0?"":c%3===0?"":"";return{id:`SCH-CALL-${fo(c+1)}`,caseId:l.id,patientName:l.patientName,patientAge:l.age,date:Yc(Ly(e,c%9-2)),time:`${fo(10+c%6)}:${c%2===0?"00":"30"}`,durationMinutes:20,type:"",status:u,priority:i_(l.riskLevel,u),riskLevel:l.riskLevel,title:"  ",assignee:l.counselor,contactStatus:l.contactStatus,consultStatus:l.consultStatus,secondExamStatus:l.secondExamStatus,phone:l.phone,guardianPhone:l.guardianPhone,reminderSent:!1,reminderChannel:"",followUpRequired:!0,reasonText:"    ",notes:"3      ",autoMemoRecent:l.autoMemo.lines.slice(-3)}}),o=t.filter(l=>l.consultStatus!=="NOT_STARTED").slice(0,8).map((l,c)=>{const u=c%2===0,m=c%5===0?"":"";return{id:`SCH-SVC-${fo(c+1)}`,caseId:l.id,patientName:l.patientName,patientAge:l.age,date:Yc(Ly(e,c+1)),time:`${fo(9+c%7)}:${c%3===0?"00":"30"}`,durationMinutes:u?50:40,type:u?"":"",status:m,priority:i_(l.riskLevel,m),riskLevel:l.riskLevel,title:u?"  ":"   ",assignee:l.counselor,location:u?l.reservation?.locationText??"    ":" /",reservationType:l.reservation?.type,contactStatus:l.contactStatus,consultStatus:l.consultStatus,secondExamStatus:l.secondExamStatus,phone:l.phone,guardianPhone:l.guardianPhone,reminderSent:c%3===0,reminderChannel:u?"":"SMS",followUpRequired:l.secondExamStatus==="SCHEDULED"||m==="",reasonText:l.reservation?.reasonText??"   ",notes:l.autoMemo.lines.slice(-2).join(" / "),autoMemoRecent:l.autoMemo.lines.slice(-3)}});return[...s,...i,...o].sort((l,c)=>`${l.date} ${l.time}`.localeCompare(`${c.date} ${c.time}`))}function uwe(){const[e,t]=h.useState("month"),[n,r]=h.useState(()=>{const te=new Date;return new Date(te.getFullYear(),te.getMonth(),1)}),[s,i]=h.useState(()=>Yc(new Date)),[o,l]=h.useState(!1),[c,u]=h.useState(null),[m,p]=h.useState(!1),[g,x]=h.useState("create"),[y,v]=h.useState(null),[N,S]=h.useState(()=>g7(Yc(new Date))),[j,C]=h.useState(""),[_,A]=h.useState(""),[T,R]=h.useState(""),[M,P]=h.useState(""),$=new Date,w=Yc($),[U,X]=h.useState(()=>dwe($)),[I,G]=h.useState(null);h.useEffect(()=>{let te=!0,z=null,Ne=0;const me=async()=>{try{const xe=await fetch(`/api/local-center/calendar/events?_=${Date.now()}`,{cache:"no-store"});if(!xe.ok)throw new Error(`remote calendar fetch failed (${xe.status})`);const et=await xe.json(),Fe=(et.items??[]).map(pt=>{const St=new Date(pt.startAt);return{id:`REMOTE-${pt.eventId}`,caseId:pt.caseId,patientName:`-${pt.caseId.slice(-4)}`,patientAge:0,date:Yc(St),time:rwe(pt.startAt),durationMinutes:pt.durationMin??30,type:owe(pt.type),status:lwe(pt.status??"SCHEDULED"),priority:pt.priority?.toUpperCase()==="HIGH"?"":"",riskLevel:"medium",title:pt.title||" ",assignee:" ",location:void 0,reminderSent:!1,reminderChannel:"SMS",followUpRequired:!1,notes:"API  "}});if(!te)return;X(pt=>[...pt.filter(qe=>!qe.id.startsWith("REMOTE-")),...Fe].sort((qe,rn)=>`${qe.date} ${qe.time}`.localeCompare(`${rn.date} ${rn.time}`))),Ne=0,G(et.degraded?"     .":null)}catch(xe){if(!te)return;Ne+=1,console.error("calendar sync failed",xe),Ne>=3&&G("    .    .")}finally{te&&(z=window.setTimeout(me,2e4))}};return me(),()=>{te=!1,z!==null&&window.clearTimeout(z)}},[]);const L=h.useMemo(()=>U.find(te=>te.id===c)??null,[U,c]),H=h.useMemo(()=>Array.from(new Set(U.map(te=>te.assignee))).sort((te,z)=>te.localeCompare(z,"ko")),[U]),F=h.useMemo(()=>{const te=j.trim().toLowerCase();return U.filter(z=>_!==""&&z.status!==_||T!==""&&z.type!==T||M!==""&&z.assignee!==M?!1:te?[z.caseId,z.patientName,z.title,z.assignee,z.location,z.reasonText].filter(Boolean).join(" ").toLowerCase().includes(te):!0)},[U,j,_,T,M]),K=h.useMemo(()=>{const te=n.getFullYear(),z=n.getMonth(),Ne=new Date(te,z,1).getDay(),me=new Date(te,z+1,0).getDate(),xe=[];for(let et=0;et<Ne;et+=1)xe.push(null);for(let et=1;et<=me;et+=1)xe.push(et);for(;xe.length%7!==0;)xe.push(null);return xe},[n]),ne=h.useMemo(()=>{const te=new Map;for(const z of F){const Ne=te.get(z.date)??[];Ne.push(z),te.set(z.date,Ne)}for(const z of te.values())z.sort((Ne,me)=>Ne.time.localeCompare(me.time));return te},[F]),V=h.useMemo(()=>F.filter(te=>{if(te.status!==""&&te.status!==""||te.reminderSent)return!1;const z=awe($,ry(te.date));return z>=0&&z<=3}),[F,$]),ee=F.filter(te=>te.status===""),ae=F.filter(te=>te.riskLevel==="high"),ue=ne.get(w)??[],ce=ne.get(s)??[],Z=h.useMemo(()=>{if(e==="month")return[];if(e==="day")return[s];const te=ry(s),z=new Date(te);return z.setDate(te.getDate()-te.getDay()),Array.from({length:7}).map((Ne,me)=>Yc(Ly(z,me)))},[e,s]),ie=`${n.getFullYear()} ${n.getMonth()+1}`,Se=te=>{r(z=>new Date(z.getFullYear(),z.getMonth()+te,1))},fe=()=>{C(""),A(""),R(""),P("")},Te=()=>{x("create"),v(null),S(g7(s)),p(!0)},Pe=te=>{u(te),l(!0)},oe=()=>{L&&(x("edit"),v(L.id),S(cwe(L)),l(!1),p(!0))},le=(te,z)=>{S(Ne=>({...Ne,[te]:z}))},ye=()=>{if(!N.title.trim()||!N.caseId.trim()||!N.patientName.trim()||!N.date||!N.time||!N.assignee.trim()){window.alert(" (,  ID, , , , ) .");return}const te=Number(N.patientAge),z=Number(N.durationMinutes),Ne=N.notes.trim(),me=g==="create"?`SCH-${Date.now()}`:y??`SCH-${Date.now()}`,xe={id:me,caseId:N.caseId.trim(),patientName:N.patientName.trim(),patientAge:Number.isFinite(te)&&te>0?Math.round(te):0,date:N.date,time:N.time,durationMinutes:Number.isFinite(z)&&z>0?Math.round(z):30,type:N.type,status:N.status,priority:N.priority,riskLevel:N.riskLevel,title:N.title.trim(),assignee:N.assignee.trim(),location:N.location.trim()||void 0,reservationType:N.reservationType||void 0,contactStatus:N.contactStatus||void 0,consultStatus:N.consultStatus||void 0,secondExamStatus:N.secondExamStatus||void 0,phone:N.phone.trim()||void 0,guardianPhone:N.guardianPhone.trim()||void 0,reminderSent:N.reminderSent,reminderChannel:N.reminderChannel,followUpRequired:N.followUpRequired,reasonText:N.reasonText.trim()||void 0,notes:Ne||void 0,autoMemoRecent:Ne?Ne.split(`
`).map(Fe=>Fe.trim()).filter(Boolean).slice(0,3).map(Fe=>`: ${Fe}`):void 0};g==="create"?X(Fe=>[xe,...Fe]):(X(Fe=>Fe.map(pt=>pt.id===me?xe:pt)),u(me),l(!0));const et=ry(xe.date);i(xe.date),r(new Date(et.getFullYear(),et.getMonth(),1)),p(!1),v(null)},_e=()=>{!L||!window.confirm("  ?")||(X(z=>z.filter(Ne=>Ne.id!==L.id)),u(null),l(!1))};return a.jsxs("div",{className:"space-y-5",children:[I?a.jsx("section",{className:"rounded-xl border border-red-200 bg-red-50 px-4 py-3",children:a.jsxs("p",{className:"text-xs font-semibold text-red-700",children:["   : ",I]})}):null,V.length>0&&a.jsx("section",{className:"rounded-xl border border-amber-200 bg-amber-50 px-4 py-3",children:a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(JQ,{size:16,className:"text-amber-700"}),a.jsxs("p",{className:"text-sm font-semibold text-amber-900",children:["   ",V.length,""]})]}),a.jsx("span",{className:"rounded-md border border-amber-300 bg-white px-2.5 py-1 text-[11px] font-semibold text-amber-800",children:"3  / "})]})}),a.jsxs("section",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2 xl:grid-cols-4",children:[a.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsx("p",{className:"text-[11px] font-semibold text-gray-500",children:"  "}),a.jsx("p",{className:"mt-1 text-2xl font-bold text-gray-900",children:F.length}),a.jsxs("p",{className:"mt-1 text-[11px] text-gray-500",children:[" ",U.length," "]})]}),a.jsxs("div",{className:"rounded-xl border border-blue-200 bg-blue-50 p-4",children:[a.jsx("p",{className:"text-[11px] font-semibold text-blue-700",children:" "}),a.jsx("p",{className:"mt-1 text-2xl font-bold text-blue-900",children:ue.length}),a.jsx("p",{className:"mt-1 text-[11px] text-blue-700",children:"   "})]}),a.jsxs("div",{className:"rounded-xl border border-red-200 bg-red-50 p-4",children:[a.jsx("p",{className:"text-[11px] font-semibold text-red-700",children:" "}),a.jsx("p",{className:"mt-1 text-2xl font-bold text-red-900",children:ee.length}),a.jsx("p",{className:"mt-1 text-[11px] text-red-700",children:"SLA  "})]}),a.jsxs("div",{className:"rounded-xl border border-orange-200 bg-orange-50 p-4",children:[a.jsx("p",{className:"text-[11px] font-semibold text-orange-700",children:" "}),a.jsx("p",{className:"mt-1 text-2xl font-bold text-orange-900",children:ae.length}),a.jsx("p",{className:"mt-1 text-[11px] text-orange-700",children:"  "})]})]}),a.jsx("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:a.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[a.jsxs("div",{className:"min-w-[220px] flex-1",children:[a.jsx(Ft,{className:"text-xs text-gray-600",children:""}),a.jsxs("div",{className:"relative mt-1.5",children:[a.jsx(Sx,{size:14,className:"pointer-events-none absolute left-2.5 top-1/2 -translate-y-1/2 text-gray-400"}),a.jsx($n,{value:j,onChange:te=>C(te.target.value),className:"pl-8",placeholder:" ID, , , "})]})]}),a.jsxs("div",{className:"w-[150px]",children:[a.jsx(Ft,{className:"text-xs text-gray-600",children:""}),a.jsx("select",{value:_,onChange:te=>A(te.target.value),className:"mt-1.5 h-9 w-full rounded-md border border-gray-200 bg-white px-3 text-sm outline-none focus:ring-2 focus:ring-blue-200",children:["","","","","",""].map(te=>a.jsx("option",{value:te,children:te},te))})]}),a.jsxs("div",{className:"w-[150px]",children:[a.jsx(Ft,{className:"text-xs text-gray-600",children:""}),a.jsx("select",{value:T,onChange:te=>R(te.target.value),className:"mt-1.5 h-9 w-full rounded-md border border-gray-200 bg-white px-3 text-sm outline-none focus:ring-2 focus:ring-blue-200",children:["","","","","",""].map(te=>a.jsx("option",{value:te,children:te},te))})]}),a.jsxs("div",{className:"w-[150px]",children:[a.jsx(Ft,{className:"text-xs text-gray-600",children:""}),a.jsxs("select",{value:M,onChange:te=>P(te.target.value),className:"mt-1.5 h-9 w-full rounded-md border border-gray-200 bg-white px-3 text-sm outline-none focus:ring-2 focus:ring-blue-200",children:[a.jsx("option",{value:"",children:""}),H.map(te=>a.jsx("option",{value:te,children:te},te))]})]}),a.jsxs(Nt,{variant:"outline",onClick:fe,className:"h-9",children:[a.jsx(jm,{size:14,className:"mr-1"})," "]})]})}),a.jsxs("div",{className:"grid grid-cols-1 gap-5 xl:grid-cols-12",children:[a.jsxs("section",{className:"xl:col-span-8 rounded-xl border border-gray-200 bg-white shadow-sm",children:[a.jsx("header",{className:"border-b border-gray-100 px-4 py-3",children:a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900",children:ie}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>Se(-1),className:"rounded border border-gray-200 p-1 text-gray-600 hover:bg-gray-50",children:a.jsx(vm,{size:15})}),a.jsx("button",{onClick:()=>Se(1),className:"rounded border border-gray-200 p-1 text-gray-600 hover:bg-gray-50",children:a.jsx(ji,{size:15})})]}),a.jsx("button",{onClick:()=>{const te=new Date;r(new Date(te.getFullYear(),te.getMonth(),1)),i(Yc(te))},className:"text-xs font-semibold text-gray-500 hover:text-gray-800",children:""})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-1 text-[11px] font-semibold",children:["month","week","day"].map(te=>a.jsx("button",{onClick:()=>t(te),className:he("rounded-md px-2.5 py-1",e===te?"bg-white text-gray-900 shadow-sm":"text-gray-500"),children:te==="month"?"":te==="week"?"":""},te))}),a.jsxs("button",{onClick:Te,className:"inline-flex items-center gap-1 rounded-md bg-[#163b6f] px-3 py-1.5 text-xs font-semibold text-white",children:[a.jsx(UU,{size:13})," "]})]})]})}),a.jsx("div",{className:"px-3 pb-3 pt-2",children:e==="month"?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"grid grid-cols-7 border-b border-gray-100 pb-2 text-center text-[10px] font-bold uppercase tracking-wider text-gray-400",children:["","","","","","",""].map(te=>a.jsx("div",{children:te},te))}),a.jsx("div",{className:"grid grid-cols-7 gap-1 pt-2",children:K.map((te,z)=>{if(!te)return a.jsx("div",{className:"min-h-[92px] rounded-lg border border-transparent bg-gray-50/40"},`empty-${z}`);const Ne=`${n.getFullYear()}-${fo(n.getMonth()+1)}-${fo(te)}`,me=ne.get(Ne)??[],xe=Ne===w,et=Ne===s;return a.jsxs("button",{onClick:()=>i(Ne),className:he("min-h-[92px] rounded-lg border p-2 text-left transition-colors",et?"border-blue-300 bg-blue-50":"border-gray-100 bg-white hover:border-gray-200 hover:bg-gray-50",xe&&!et?"border-emerald-300":""),children:[a.jsxs("div",{className:"mb-1 flex items-center justify-between",children:[a.jsx("span",{className:he("inline-flex h-5 w-5 items-center justify-center rounded-full text-[10px] font-bold",xe?"bg-emerald-500 text-white":"text-gray-600"),children:te}),a.jsx("span",{className:"text-[10px] text-gray-400",children:me.length?`${me.length}`:""})]}),a.jsxs("div",{className:"space-y-1",children:[me.slice(0,3).map(Fe=>{const pt=p7(Fe.type),St=pt.icon;return a.jsxs("button",{onClick:qe=>{qe.stopPropagation(),Pe(Fe.id)},className:he("flex w-full items-center gap-1 rounded px-1 py-0.5 text-[10px] font-semibold transition-opacity hover:opacity-90",pt.chip,Fe.riskLevel==="high"?"ring-1 ring-red-300":""),children:[a.jsx(St,{size:9}),a.jsxs("span",{className:"truncate",children:[Fe.time," ",Fe.patientName]})]},Fe.id)}),me.length>3?a.jsxs("p",{className:"text-[10px] text-gray-500",children:["+",me.length-3,""]}):null]})]},Ne)})}),a.jsx("div",{className:"mt-3 grid grid-cols-2 gap-2 border-t border-gray-100 pt-3 text-[11px] md:grid-cols-5",children:["","","","",""].map(te=>{const Ne=p7(te).icon;return a.jsxs("div",{className:"inline-flex items-center gap-1 rounded border border-gray-100 bg-gray-50 px-2 py-1 text-gray-600",children:[a.jsx(Ne,{size:11}),te]},te)})})]}):a.jsx("div",{className:"space-y-3 pt-2",children:Z.map(te=>{const z=ne.get(te)??[],Ne=ry(te).toLocaleDateString("ko-KR",{month:"long",day:"numeric",weekday:"short"});return a.jsxs("section",{className:"rounded-lg border border-gray-200",children:[a.jsxs("header",{className:"flex items-center justify-between border-b border-gray-100 px-3 py-2",children:[a.jsx("button",{onClick:()=>i(te),className:he("text-sm font-semibold",te===s?"text-blue-700":"text-gray-800"),children:Ne}),a.jsxs("span",{className:"text-[11px] text-gray-500",children:[z.length,""]})]}),a.jsx("div",{className:"space-y-2 p-2",children:z.length===0?a.jsx("p",{className:"rounded-md border border-gray-100 bg-gray-50 px-3 py-2 text-xs text-gray-500",children:"  ."}):z.map(me=>a.jsxs("button",{onClick:()=>Pe(me.id),className:"w-full rounded-md border border-gray-100 bg-white px-3 py-2 text-left text-xs transition-colors hover:border-blue-200 hover:bg-blue-50/30",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("p",{className:"font-semibold text-gray-900",children:[me.time,"  ",me.title]}),a.jsx("span",{className:he("rounded border px-1.5 py-0.5 text-[10px] font-semibold",m7(me.status)),children:me.status})]}),a.jsxs("p",{className:"mt-1 text-[11px] text-gray-600",children:[me.caseId,"  ",me.patientName,"   ",me.assignee]})]},me.id))})]},te)})})})]}),a.jsxs("aside",{className:"space-y-4 xl:col-span-4 xl:sticky xl:top-4 xl:self-start xl:max-h-[calc(100vh-132px)] xl:overflow-y-auto xl:pr-1",children:[a.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsxs("h3",{className:"flex items-center gap-2 text-sm font-bold text-gray-900",children:[a.jsx(L1,{size:14,className:"text-blue-600"})," "]}),a.jsx("div",{className:"mt-3 space-y-2",children:ue.length===0?a.jsx("p",{className:"rounded-md border border-gray-100 bg-gray-50 px-3 py-2 text-xs text-gray-500",children:"  ."}):ue.map(te=>a.jsxs("button",{onClick:()=>Pe(te.id),className:"w-full rounded-md border border-gray-100 bg-gray-50 px-3 py-2 text-left text-xs transition-colors hover:border-blue-200 hover:bg-blue-50/40",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("p",{className:"font-semibold text-gray-800",children:[te.time,"  ",te.title]}),a.jsx("span",{className:he("rounded border px-1.5 py-0.5 text-[10px] font-semibold",h7(te.priority)),children:te.priority})]}),a.jsxs("p",{className:"mt-1 text-[11px] text-gray-500",children:[te.caseId,"  ",te.patientName]})]},te.id))})]}),a.jsxs("section",{className:"rounded-xl border border-red-200 bg-red-50 p-4",children:[a.jsxs("h3",{className:"flex items-center gap-2 text-sm font-bold text-red-800",children:[a.jsx(ea,{size:14})," "]}),a.jsx("div",{className:"mt-3 space-y-2",children:ee.length===0?a.jsx("p",{className:"rounded-md border border-red-100 bg-white px-3 py-2 text-xs text-red-700",children:"  ."}):ee.slice(0,8).map(te=>a.jsxs("button",{onClick:()=>Pe(te.id),className:"w-full rounded-md border border-red-100 bg-white px-3 py-2 text-left text-xs transition-colors hover:border-red-200 hover:bg-red-50",children:[a.jsxs("p",{className:"font-semibold text-gray-900",children:[te.caseId,"  ",te.patientName]}),a.jsx("p",{className:"mt-0.5 text-red-700",children:te.title}),a.jsxs("p",{className:"mt-1 text-[11px] text-gray-500",children:[te.date," ",te.time]})]},te.id))})]}),a.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsx("h3",{className:"text-sm font-bold text-gray-900",children:"  "}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:s}),a.jsx("div",{className:"mt-3 space-y-2",children:ce.length===0?a.jsx("p",{className:"rounded-md border border-gray-100 bg-gray-50 px-3 py-2 text-xs text-gray-500",children:"   ."}):ce.map(te=>{const z=o_(te.riskLevel);return a.jsxs("button",{onClick:()=>Pe(te.id),className:"w-full rounded-md border border-gray-100 bg-gray-50 px-3 py-2 text-left text-xs transition-colors hover:border-gray-200 hover:bg-white",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("p",{className:"font-semibold text-gray-900",children:[te.time,"  ",te.type]}),a.jsx("span",{className:he("rounded border px-1.5 py-0.5 text-[10px] font-semibold",z.tone),children:z.label})]}),a.jsx("p",{className:"mt-1 text-gray-700",children:te.title}),a.jsxs("p",{className:"mt-1 text-[11px] text-gray-500",children:[te.caseId,"   ",te.assignee]})]},te.id)})})]})]})]}),a.jsx(Au,{open:m,onOpenChange:p,children:a.jsxs(_u,{className:"max-h-[85vh] max-w-3xl overflow-y-auto",children:[a.jsxs(Jy,{children:[a.jsx(Zy,{children:g==="create"?" ":" "}),a.jsx(_C,{children:"v1         ."})]}),a.jsxs("div",{className:"space-y-4 py-2",children:[a.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx(Ft,{children:" *"}),a.jsx($n,{value:N.title,onChange:te=>le("title",te.target.value),className:"mt-1.5"})]}),a.jsxs("div",{children:[a.jsx(Ft,{children:" ID *"}),a.jsx($n,{value:N.caseId,onChange:te=>le("caseId",te.target.value),className:"mt-1.5"})]}),a.jsxs("div",{children:[a.jsx(Ft,{children:" *"}),a.jsx($n,{value:N.patientName,onChange:te=>le("patientName",te.target.value),className:"mt-1.5"})]}),a.jsxs("div",{children:[a.jsx(Ft,{children:""}),a.jsx($n,{type:"number",min:0,value:N.patientAge,onChange:te=>le("patientAge",te.target.value),className:"mt-1.5"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-4",children:[a.jsxs("div",{children:[a.jsx(Ft,{children:" *"}),a.jsx($n,{type:"date",value:N.date,onChange:te=>le("date",te.target.value),className:"mt-1.5"})]}),a.jsxs("div",{children:[a.jsx(Ft,{children:" *"}),a.jsx($n,{type:"time",value:N.time,onChange:te=>le("time",te.target.value),className:"mt-1.5"})]}),a.jsxs("div",{children:[a.jsx(Ft,{children:"()"}),a.jsx($n,{type:"number",min:10,step:10,value:N.durationMinutes,onChange:te=>le("durationMinutes",te.target.value),className:"mt-1.5"})]}),a.jsxs("div",{children:[a.jsx(Ft,{children:" *"}),a.jsx($n,{value:N.assignee,onChange:te=>le("assignee",te.target.value),className:"mt-1.5"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-4",children:[a.jsxs("div",{children:[a.jsx(Ft,{children:" "}),a.jsx("select",{value:N.type,onChange:te=>le("type",te.target.value),className:"mt-1.5 h-9 w-full rounded-md border border-gray-200 bg-white px-3 text-sm outline-none focus:ring-2 focus:ring-blue-200",children:["","","","",""].map(te=>a.jsx("option",{value:te,children:te},te))})]}),a.jsxs("div",{children:[a.jsx(Ft,{children:""}),a.jsx("select",{value:N.status,onChange:te=>le("status",te.target.value),className:"mt-1.5 h-9 w-full rounded-md border border-gray-200 bg-white px-3 text-sm outline-none focus:ring-2 focus:ring-blue-200",children:["","","","",""].map(te=>a.jsx("option",{value:te,children:te},te))})]}),a.jsxs("div",{children:[a.jsx(Ft,{children:""}),a.jsx("select",{value:N.priority,onChange:te=>le("priority",te.target.value),className:"mt-1.5 h-9 w-full rounded-md border border-gray-200 bg-white px-3 text-sm outline-none focus:ring-2 focus:ring-blue-200",children:["","",""].map(te=>a.jsx("option",{value:te,children:te},te))})]}),a.jsxs("div",{children:[a.jsx(Ft,{children:""}),a.jsxs("select",{value:N.riskLevel,onChange:te=>le("riskLevel",te.target.value),className:"mt-1.5 h-9 w-full rounded-md border border-gray-200 bg-white px-3 text-sm outline-none focus:ring-2 focus:ring-blue-200",children:[a.jsx("option",{value:"high",children:""}),a.jsx("option",{value:"medium",children:""}),a.jsx("option",{value:"low",children:""})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx(Ft,{children:" (v1 )"}),a.jsxs("select",{value:N.reservationType,onChange:te=>le("reservationType",te.target.value),className:"mt-1.5 h-9 w-full rounded-md border border-gray-200 bg-white px-3 text-sm outline-none focus:ring-2 focus:ring-blue-200",children:[a.jsx("option",{value:"",children:" "}),Object.keys(r_).map(te=>a.jsx("option",{value:te,children:r_[te]},te))]})]}),a.jsxs("div",{children:[a.jsx(Ft,{children:""}),a.jsx($n,{value:N.location,onChange:te=>le("location",te.target.value),className:"mt-1.5"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx(Ft,{children:""}),a.jsx($n,{value:N.phone,onChange:te=>le("phone",te.target.value),className:"mt-1.5",placeholder:"010-1234-5678"})]}),a.jsxs("div",{children:[a.jsx(Ft,{children:" "}),a.jsx($n,{value:N.guardianPhone,onChange:te=>le("guardianPhone",te.target.value),className:"mt-1.5",placeholder:"010-8765-4321"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-3",children:[a.jsxs("div",{children:[a.jsx(Ft,{children:" (v1)"}),a.jsxs("select",{value:N.contactStatus,onChange:te=>le("contactStatus",te.target.value),className:"mt-1.5 h-9 w-full rounded-md border border-gray-200 bg-white px-3 text-sm outline-none focus:ring-2 focus:ring-blue-200",children:[a.jsx("option",{value:"",children:" "}),Object.keys(t_).map(te=>a.jsx("option",{value:te,children:t_[te]},te))]})]}),a.jsxs("div",{children:[a.jsx(Ft,{children:" (v1)"}),a.jsxs("select",{value:N.consultStatus,onChange:te=>le("consultStatus",te.target.value),className:"mt-1.5 h-9 w-full rounded-md border border-gray-200 bg-white px-3 text-sm outline-none focus:ring-2 focus:ring-blue-200",children:[a.jsx("option",{value:"",children:" "}),Object.keys(n_).map(te=>a.jsx("option",{value:te,children:n_[te]},te))]})]}),a.jsxs("div",{children:[a.jsx(Ft,{children:"2 (v1)"}),a.jsxs("select",{value:N.secondExamStatus,onChange:te=>le("secondExamStatus",te.target.value),className:"mt-1.5 h-9 w-full rounded-md border border-gray-200 bg-white px-3 text-sm outline-none focus:ring-2 focus:ring-blue-200",children:[a.jsx("option",{value:"",children:" "}),Object.keys(e_).map(te=>a.jsx("option",{value:te,children:e_[te]},te))]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx(Ft,{children:" "}),a.jsx("select",{value:N.reminderChannel,onChange:te=>le("reminderChannel",te.target.value),className:"mt-1.5 h-9 w-full rounded-md border border-gray-200 bg-white px-3 text-sm outline-none focus:ring-2 focus:ring-blue-200",children:["SMS","",""].map(te=>a.jsx("option",{value:te,children:te},te))})]}),a.jsxs("div",{className:"flex items-center gap-6 pt-7",children:[a.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-gray-700",children:[a.jsx("input",{type:"checkbox",checked:N.reminderSent,onChange:te=>le("reminderSent",te.target.checked),className:"h-4 w-4 rounded border-gray-300"}),"  "]}),a.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-gray-700",children:[a.jsx("input",{type:"checkbox",checked:N.followUpRequired,onChange:te=>le("followUpRequired",te.target.checked),className:"h-4 w-4 rounded border-gray-300"})," "]})]})]}),a.jsxs("div",{children:[a.jsx(Ft,{children:"/ "}),a.jsx(Xo,{value:N.reasonText,onChange:te=>le("reasonText",te.target.value),className:"mt-1.5",rows:2})]}),a.jsxs("div",{children:[a.jsx(Ft,{children:" "}),a.jsx(Xo,{value:N.notes,onChange:te=>le("notes",te.target.value),className:"mt-1.5",rows:3})]})]}),a.jsxs(AC,{className:"gap-2 sm:gap-0",children:[a.jsx(Nt,{variant:"outline",onClick:()=>p(!1),children:""}),a.jsx(Nt,{onClick:ye,children:g==="create"?"":" "})]})]})}),a.jsx(Au,{open:o,onOpenChange:l,children:a.jsxs(_u,{className:"max-w-2xl",children:[a.jsxs(Jy,{children:[a.jsx(Zy,{children:" "}),a.jsx(_C,{children:"    /"})]}),L?a.jsxs("div",{className:"space-y-4 py-2",children:[a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-3",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[a.jsx("p",{className:"text-base font-bold text-gray-900",children:L.title}),a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("span",{className:he("rounded border px-2 py-0.5 text-[10px] font-semibold",m7(L.status)),children:L.status}),a.jsx("span",{className:he("rounded border px-2 py-0.5 text-[10px] font-semibold",h7(L.priority)),children:L.priority}),a.jsx("span",{className:he("rounded border px-2 py-0.5 text-[10px] font-semibold",o_(L.riskLevel).tone),children:o_(L.riskLevel).label})]})]}),a.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[L.caseId,"  ",L.patientName]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[a.jsxs("div",{className:"rounded-lg border border-gray-200 p-3",children:[a.jsx("p",{className:"text-xs text-gray-500",children:" "}),a.jsxs("p",{className:"mt-1 font-semibold text-gray-900",children:[L.date," ",L.time," (",L.durationMinutes,")"]})]}),a.jsxs("div",{className:"rounded-lg border border-gray-200 p-3",children:[a.jsx("p",{className:"text-xs text-gray-500",children:" "}),a.jsx("p",{className:"mt-1 font-semibold text-gray-900",children:L.type})]}),a.jsxs("div",{className:"rounded-lg border border-gray-200 p-3",children:[a.jsx("p",{className:"text-xs text-gray-500",children:""}),a.jsxs("p",{className:"mt-1 flex items-center gap-1 font-semibold text-gray-900",children:[a.jsx(lc,{size:13,className:"text-gray-400"}),L.assignee]})]}),a.jsxs("div",{className:"rounded-lg border border-gray-200 p-3",children:[a.jsx("p",{className:"text-xs text-gray-500",children:""}),a.jsxs("p",{className:"mt-1 font-semibold text-gray-900",children:[L.reminderChannel,"  ",L.reminderSent?" ":""]})]}),a.jsxs("div",{className:"rounded-lg border border-gray-200 p-3",children:[a.jsx("p",{className:"text-xs text-gray-500",children:""}),a.jsx("p",{className:"mt-1 font-semibold text-gray-900",children:L.phone?n7(L.phone):"-"})]}),a.jsxs("div",{className:"rounded-lg border border-gray-200 p-3",children:[a.jsx("p",{className:"text-xs text-gray-500",children:" "}),a.jsx("p",{className:"mt-1 font-semibold text-gray-900",children:L.guardianPhone?n7(L.guardianPhone):"-"})]})]}),L.location?a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-3",children:[a.jsx("p",{className:"text-xs text-gray-500",children:""}),a.jsx("p",{className:"mt-1 text-sm font-medium text-gray-900",children:L.location})]}):null,(L.contactStatus||L.consultStatus||L.secondExamStatus)&&a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[a.jsxs("p",{className:"mb-2 flex items-center gap-1 text-xs font-semibold text-slate-700",children:[a.jsx(GU,{size:13}),"  (v1 )"]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-gray-700",children:[L.contactStatus?a.jsxs("span",{children:[": ",a.jsx("strong",{children:t_[L.contactStatus]})]}):null,L.consultStatus?a.jsxs("span",{children:[": ",a.jsx("strong",{children:n_[L.consultStatus]})]}):null,L.secondExamStatus?a.jsxs("span",{children:["2: ",a.jsx("strong",{children:e_[L.secondExamStatus]})]}):null,L.reservationType?a.jsxs("span",{children:[": ",a.jsx("strong",{children:r_[L.reservationType]})]}):null]})]}),L.reasonText?a.jsxs("div",{className:"rounded-lg border border-purple-100 bg-purple-50 p-3",children:[a.jsx("p",{className:"text-xs font-semibold text-purple-700",children:"/ "}),a.jsx("p",{className:"mt-1 text-sm text-purple-900",children:L.reasonText})]}):null,L.autoMemoRecent&&L.autoMemoRecent.length>0?a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-3",children:[a.jsxs("p",{className:"mb-2 flex items-center gap-1 text-xs font-semibold text-gray-700",children:[a.jsx(vo,{size:13}),"  "]}),a.jsx("ul",{className:"space-y-1",children:L.autoMemoRecent.map((te,z)=>a.jsxs("li",{className:"text-xs text-gray-700",children:[" ",te]},`${te}-${z}`))})]}):null,L.notes?a.jsxs("div",{className:"rounded-lg border border-blue-100 bg-blue-50 p-3",children:[a.jsx("p",{className:"text-xs font-semibold text-blue-700",children:""}),a.jsx("p",{className:"mt-1 text-sm text-blue-900",children:L.notes})]}):null,a.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-gray-200 bg-white px-3 py-2",children:[a.jsx("span",{className:"text-xs text-gray-600",children:L.followUpRequired?"  .":"   ."}),a.jsxs("span",{className:"inline-flex items-center gap-1 text-xs font-semibold text-emerald-700",children:[a.jsx(Si,{size:13}),"  "]})]}),a.jsxs(AC,{className:"gap-2 sm:gap-0",children:[a.jsx(Nt,{variant:"outline",onClick:()=>l(!1),children:""}),a.jsxs(Nt,{variant:"outline",onClick:oe,children:[a.jsx(kJ,{size:14,className:"mr-1"}),""]}),a.jsxs(Nt,{variant:"destructive",onClick:_e,children:[a.jsx(oZ,{size:14,className:"mr-1"}),""]})]})]}):null]})})]})}function fwe(){const e=[{name:"   ",type:"PDF",lastRun:"2026-02-01",status:""},{name:"Stage   ",type:"XLSX",lastRun:"2026-02-10",status:""},{name:"   ( )",type:"CSV",lastRun:"2026-02-11",status:""},{name:"  ",type:"PDF",lastRun:"2026-01-31",status:""}];return a.jsxs("div",{className:"space-y-6 pb-12",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg px-3 py-2 flex items-center gap-2 text-xs font-semibold shadow-sm",children:[a.jsx(jm,{size:14,className:"text-gray-400"}),": 2026-01-01 ~ 2026-01-31"]}),a.jsx("div",{className:"bg-white border border-gray-200 rounded-lg px-3 py-2 flex items-center gap-2 text-xs font-semibold shadow-sm text-gray-400",children:": "})]}),a.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white text-xs font-bold rounded-lg shadow-sm",children:[a.jsx(im,{size:16}),"    "]})]}),a.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[a.jsxs("div",{className:"col-span-8 space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:[a.jsx("div",{className:"p-5 border-b border-gray-100 flex items-center justify-between",children:a.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(Bf,{size:18,className:"text-blue-600"})," "]})}),a.jsx("div",{className:"divide-y divide-gray-50",children:e.map((t,n)=>a.jsxs("div",{className:"p-4 hover:bg-gray-50 flex items-center justify-between group cursor-pointer transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:he("w-10 h-10 rounded-lg flex items-center justify-center",t.type==="PDF"?"bg-red-50 text-red-600":t.type==="XLSX"?"bg-emerald-50 text-emerald-600":"bg-blue-50 text-blue-600"),children:t.type==="PDF"?a.jsx(Bf,{size:20}):a.jsx(XX,{size:20})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-gray-900",children:t.name}),a.jsxs("p",{className:"text-[10px] text-gray-500",children:[" : ",t.lastRun," | ",a.jsx("span",{className:"text-blue-600 font-bold",children:t.status})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{className:"px-3 py-1.5 border border-gray-200 rounded text-[10px] font-bold text-gray-600 hover:bg-white",children:""}),a.jsx("button",{className:"px-3 py-1.5 bg-gray-900 text-white rounded text-[10px] font-bold hover:bg-black",children:""})]})]},n))}),a.jsx("div",{className:"p-4 bg-gray-50 flex items-center justify-center border-t border-gray-100",children:a.jsxs("button",{className:"text-xs font-bold text-gray-500 hover:text-blue-600 flex items-center gap-1",children:["    ",a.jsx(ji,{size:14})]})})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[a.jsxs("h3",{className:"font-bold text-gray-800 mb-6 flex items-center justify-between",children:["   ",a.jsx("span",{className:"text-[10px] text-emerald-600 font-bold",children:"   12% "})]}),a.jsx("div",{className:"h-64",children:a.jsx(Da,{width:"100%",height:"100%",children:a.jsxs(Df,{data:[{name:"",target:2,actual:1.2},{name:"",target:5,actual:4.5},{name:"",target:14,actual:15.4},{name:"",target:7,actual:5.2},{name:"",target:180,actual:192}],children:[a.jsx(Rs,{strokeDasharray:"3 3",vertical:!1}),a.jsx(oa,{dataKey:"name",fontSize:10,axisLine:!1,tickLine:!1}),a.jsx(Zr,{fontSize:10,axisLine:!1,tickLine:!1}),a.jsx(or,{}),a.jsx(us,{dataKey:"target",fill:"#e2e8f0",radius:[4,4,0,0],barSize:20}),a.jsx(us,{dataKey:"actual",fill:"#2563eb",radius:[4,4,0,0],barSize:20})]})})})]})]}),a.jsxs("div",{className:"col-span-4 space-y-6",children:[a.jsxs("div",{className:"bg-blue-600 text-white rounded-xl p-6 shadow-md",children:[a.jsxs("h3",{className:"font-bold mb-4 flex items-center gap-2",children:[a.jsx(KU,{size:18}),"  (AI )"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"p-3 bg-white/10 rounded-lg border border-white/10",children:[a.jsx("p",{className:"text-[10px] font-bold text-white/60 uppercase",children:" "}),a.jsx("p",{className:"text-sm font-medium mt-1",children:"2      15% , 3      ."})]}),a.jsxs("div",{className:"p-3 bg-white/10 rounded-lg border border-white/10",children:[a.jsx("p",{className:"text-[10px] font-bold text-white/60 uppercase",children:" "}),a.jsx("p",{className:"text-sm font-medium mt-1",children:"        8% .     ."})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-5",children:[a.jsx("h3",{className:"font-bold text-gray-800 mb-4 text-sm",children:"  "}),a.jsx("div",{className:"space-y-4",children:[{label:"   ",value:"+4.2%",color:"text-emerald-600"},{label:" ",value:"92%",color:"text-blue-600"},{label:"  ",value:"115%",color:"text-red-600"}].map((t,n)=>a.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-50 last:border-0",children:[a.jsx("span",{className:"text-xs text-gray-500 font-medium",children:t.label}),a.jsx("span",{className:he("text-sm font-bold",t.color),children:t.value})]},n))})]})]})]}),a.jsx("div",{className:"p-3 bg-gray-50 text-[10px] text-gray-500 italic text-center rounded-lg border border-gray-200",children:"*  :      ,           ."})]})}function pwe(){const[e,t]=h.useState(""),n=[{title:"  ( )",id:"",icon:Zl,items:[{label:"   (Stage 1)",value:"3",type:"number",desc:"  2        "},{label:"SLA   (/)",value:"24",type:"number",desc:"   SLA   "},{label:"  ( )",value:"10%",type:"number",desc:"        "},{label:"   ()",value:"3",type:"number",desc:"    "}]},{title:"   ",id:"",icon:gh,items:[{label:"   ",value:"On",type:"toggle"},{label:"    ",value:"On",type:"toggle"},{label:"   ",value:"Off",type:"toggle"},{label:"    ",value:"On",type:"toggle"}]}];return a.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 pb-12",children:[a.jsx("div",{className:"flex gap-1 border-b border-gray-200",children:["","","/",""].map(r=>a.jsx("button",{onClick:()=>t(r),className:he("px-6 py-3 text-sm font-bold border-b-2 transition-all",e===r?"border-blue-600 text-blue-600":"border-transparent text-gray-400 hover:text-gray-600"),children:r},r))}),a.jsxs("div",{className:"grid grid-cols-12 gap-8",children:[a.jsx("div",{className:"col-span-8 space-y-8",children:n.map((r,s)=>a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:[a.jsxs("div",{className:"p-5 border-b border-gray-100 flex items-center gap-3 bg-gray-50/50",children:[a.jsx(r.icon,{className:"text-blue-600",size:20}),a.jsx("h3",{className:"font-bold text-gray-800",children:r.title})]}),a.jsx("div",{className:"p-0",children:r.items.map((i,o)=>a.jsxs("div",{className:"p-5 flex items-start justify-between border-b border-gray-50 last:border-0 hover:bg-gray-50/50 transition-colors",children:[a.jsxs("div",{className:"max-w-[70%]",children:[a.jsx("p",{className:"text-sm font-bold text-gray-700",children:i.label}),a.jsx("p",{className:"text-[11px] text-gray-400 mt-0.5",children:i.desc})]}),a.jsx("div",{className:"flex flex-col items-end gap-2",children:i.type==="number"?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"text",value:i.value,readOnly:!0,className:"w-16 text-right px-2 py-1.5 bg-gray-100 border border-gray-200 rounded-lg text-xs font-bold text-blue-600"}),a.jsx("button",{className:"text-[10px] font-bold text-blue-600 hover:underline",children:""})]}):a.jsx("div",{className:he("w-10 h-5 rounded-full relative cursor-pointer transition-colors shadow-inner",i.value==="On"?"bg-emerald-500":"bg-gray-200"),children:a.jsx("div",{className:he("absolute top-0.5 w-4 h-4 bg-white rounded-full shadow-md transition-transform",i.value==="On"?"translate-x-5.5":"translate-x-0.5")})})})]},o))})]},s))}),a.jsxs("div",{className:"col-span-4 space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[a.jsxs("h3",{className:"font-bold text-gray-800 mb-6 flex items-center gap-2",children:[a.jsx(GU,{className:"text-orange-500",size:20}),"  "]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"p-4 border border-gray-100 rounded-xl bg-gray-50/50",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(ju,{size:14,className:"text-gray-400"}),a.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "})]}),a.jsx("p",{className:"text-sm font-bold text-gray-900 leading-tight",children:",  (L2 )"}),a.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[a.jsx("span",{className:"text-[9px] text-emerald-600 font-bold bg-emerald-50 px-1.5 py-0.5 rounded",children:"2FA "}),a.jsx("button",{className:"text-[10px] font-bold text-blue-600 hover:underline",children:" "})]})]}),a.jsxs("div",{className:"p-4 border border-gray-100 rounded-xl bg-gray-50/50",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(gd,{size:14,className:"text-gray-400"}),a.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"   "})]}),a.jsx("p",{className:"text-sm font-bold text-gray-900",children:"  5 ( )"}),a.jsx("p",{className:"text-[9px] text-gray-400 mt-2",children:"  : 2026-12-31"})]})]})]}),a.jsxs("div",{className:"bg-blue-600 text-white rounded-2xl p-6 shadow-xl relative overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:a.jsx(xa,{size:120})}),a.jsxs("div",{className:"relative z-10",children:[a.jsxs("h3",{className:"font-bold mb-4 flex items-center gap-2",children:[a.jsx(xa,{className:"text-blue-400",size:20}),"  "]}),a.jsxs("div",{className:"space-y-4 text-xs leading-relaxed text-white/70",children:[a.jsx("p",{children:"  , ,    ID, IP ,      ."}),a.jsxs("div",{className:"p-3 bg-white/10 rounded-xl border border-white/10",children:[a.jsxs("p",{className:"text-[10px] font-bold text-blue-400 uppercase mb-1 flex items-center gap-1",children:[a.jsx(Em,{size:10}),"   "]}),a.jsx("p",{className:"text-white/80",children:" (Stage 2)       ."})]}),a.jsx("p",{children:"        ."})]}),a.jsx("button",{className:"mt-6 w-full py-3 bg-white/10 hover:bg-white/20 border border-white/20 rounded-xl text-xs font-bold transition-all",children:"    "})]})]})]})]}),a.jsxs("div",{className:"p-4 bg-white border border-gray-200 rounded-xl flex items-center gap-4 shadow-sm",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-50 flex items-center justify-center text-orange-600 shrink-0",children:a.jsx(ea,{size:24})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-bold text-gray-900",children:"   "}),a.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"     ,        . (  )"})]})]})]})}function mwe({activeTab:e,setActiveTab:t,userName:n,centerName:r,userRole:s,onLogout:i}){const[o,l]=h.useState(!0),c=[{id:"main",label:"  ",icon:Nx},{id:"cases",label:" ",icon:ec},{id:"calendar",label:"",icon:Zo},{id:"reports",label:"",icon:ym},{id:"settings",label:"",icon:Ex}];return a.jsxs("aside",{className:`${o?"w-64":"w-20"} bg-slate-800 border-r border-slate-700 text-white flex flex-col shrink-0 transition-all duration-300`,children:[a.jsx("div",{className:"h-16 flex items-center justify-between px-4 border-b border-slate-700",children:o?a.jsxs(a.Fragment,{children:[a.jsx(vR,{size:36,showText:!0,subtitle:" ",variant:"dark"}),a.jsx("button",{type:"button",onClick:()=>l(!1),className:"h-8 w-8 p-0 rounded-md inline-flex items-center justify-center text-slate-400 hover:text-white hover:bg-slate-700 shrink-0","aria-label":" ",children:a.jsx(Mu,{className:"h-4 w-4"})})]}):a.jsx("button",{type:"button",onClick:()=>l(!0),className:"h-8 w-8 p-0 mx-auto rounded-md inline-flex items-center justify-center text-slate-400 hover:text-white hover:bg-slate-700","aria-label":" ",children:a.jsx(hR,{className:"h-4 w-4"})})}),a.jsx("nav",{className:"flex-1 py-4 px-3 space-y-1",children:c.map(u=>a.jsxs("button",{onClick:()=>t(u.id),className:he("w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium transition-colors",e===u.id?"bg-blue-600 text-white shadow-sm":"text-slate-300 hover:bg-slate-700 hover:text-white"),title:o?void 0:u.label,children:[a.jsx(u.icon,{size:20,className:o?void 0:"mx-auto"}),o&&u.label]},u.id))}),a.jsxs("div",{className:"p-4 border-t border-slate-700",children:[o?a.jsxs("div",{className:"flex items-center gap-3 p-2 bg-slate-700 rounded-lg",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-100 text-slate-700 flex items-center justify-center text-xs font-bold",children:n.slice(0,1)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-semibold truncate",children:n}),a.jsxs("p",{className:"text-[10px] text-slate-300 truncate",children:[r," / ",s==="center_manager"?"":""]})]})]}):null,a.jsxs("button",{onClick:i,className:"mt-3 w-full flex items-center justify-center gap-2 rounded-lg border border-red-400/40 px-3 py-2 text-xs font-semibold text-red-200 hover:bg-red-500/10 hover:text-red-100 transition-colors",title:o?void 0:"",children:[a.jsx(mR,{size:14}),o?"":null]})]})]})}const o3={"national-dashboard":{title:"  ",subtitle:"Neuro-Shield  "},"model-apply":{title:"  ",subtitle:"Neuro-Shield  "},"model-governance":{title:"/  ",subtitle:"Neuro-Shield  "},"quality-monitoring":{title:"& ",subtitle:"Neuro-Shield  "},"compliance-audit":{title:"   ",subtitle:"Neuro-Shield  "},"kpi-dictionary":{title:"KPI ",subtitle:"Neuro-Shield  "},settings:{title:"",subtitle:"Neuro-Shield  "},overview:{title:"  ",subtitle:"Neuro-Shield   "},cause:{title:" ",subtitle:"Neuro-Shield   "},interventions:{title:" ",subtitle:"Neuro-Shield   "},reports:{title:"",subtitle:"Neuro-Shield   "},"regional-settings":{title:"",subtitle:"Neuro-Shield   "},dashboard:{title:" ",subtitle:"Neuro-Shield   "},calendar:{title:" ",subtitle:"Neuro-Shield   "},"audit-log":{title:" ",subtitle:"Neuro-Shield   "},main:{title:"  ",subtitle:"Neuro-Shield   "},cases:{title:" ",subtitle:"Neuro-Shield   "}};function l3({title:e,subtitle:t,icon:n,iconBg:r="from-blue-600 to-blue-700"}){return a.jsxs("div",{className:"flex items-center gap-2.5 min-w-0",children:[a.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-lg bg-gradient-to-br ${r} shadow-sm shrink-0`,"aria-hidden":"true",children:n??a.jsx(xh,{className:"h-4 w-4 text-white"})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("h2",{className:"text-[15px] font-bold text-slate-800 leading-[1.1] whitespace-nowrap overflow-hidden text-ellipsis",children:e}),a.jsx("p",{className:"text-[10px] font-medium text-slate-400 leading-[1.1] mt-[2px] whitespace-nowrap overflow-hidden text-ellipsis",children:t})]})]})}const hwe={main:Nx,cases:ec,calendar:Zo,reports:ym,settings:Ex};function gwe({activeTab:e,caseSearchKeyword:t,onCaseSearchKeywordChange:n}){const r=hwe[e]||Nx,s=o3[e],i=e==="cases";return a.jsxs("header",{className:"h-14 bg-white border-b border-gray-200 flex items-center justify-between px-6 shrink-0 z-10",children:[a.jsx("div",{className:"flex items-center gap-6",children:a.jsx(l3,{title:s?.title??e,subtitle:s?.subtitle??"Neuro-Shield   ",icon:a.jsx(r,{className:"h-4 w-4 text-white"})})}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"relative group",children:[a.jsx("div",{className:"absolute inset-y-0 left-3 flex items-center pointer-events-none",children:a.jsx(Sx,{size:16,className:"text-gray-400"})}),a.jsx("input",{type:"text",value:i?t:"",onChange:o=>{i&&n(o.target.value)},placeholder:i?" ID,  ...":"   ",disabled:!i,className:"bg-gray-100 border-none rounded-full pl-10 pr-4 py-2 text-sm focus:ring-2 focus:ring-blue-500 w-64 transition-all focus:w-80 outline-none disabled:cursor-not-allowed disabled:opacity-60"})]}),a.jsxs("button",{className:"relative p-2 text-gray-500 hover:bg-gray-100 rounded-full transition-colors",children:[a.jsx(gh,{size:20}),a.jsx("span",{className:"absolute top-1.5 right-1.5 w-2 h-2 bg-red-500 rounded-full border-2 border-white"})]}),a.jsx("div",{className:"w-px h-8 bg-gray-200 mx-1"}),a.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[a.jsx("span",{className:"w-8 h-8 rounded-full bg-emerald-100 text-emerald-700 flex items-center justify-center border border-emerald-200",children:a.jsx(Si,{size:16})}),a.jsx("span",{children:" "})]})]})]})}const x7=new Map;let b7=1,y7=1;function xwe(){return new Date().toISOString()}function v7(e){return new Date(Date.now()+e*60*60*1e3).toISOString()}function Jz(){return globalThis?.__NEURO_SHIELD_USE_REAL_API__===!0}function bwe(){return globalThis?.__NEURO_SHIELD_FORCE_CALENDAR_ERROR__===!0}async function Zz(e=160){await new Promise(t=>setTimeout(t,e))}async function eq(e,t){const n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",...t.headers??{}},...t});if(!n.ok)throw new Error(`HTTP ${n.status}`);return await n.json()}function ywe(e){return e?{R1_SELF_REJECT:" ",R2_GUARDIAN_REJECT:" ",R3_OTHER_INSTITUTION:"  ",R4_ALREADY_DIAGNOSED:" / ",R5_CONTACT_INVALID:" ",R6_EMOTIONAL_BACKLASH:"  ",R7_OTHER:""}[e]:"  "}function vwe(e){return{CALL_RETRY:" ",SMS_RETRY:" ",TIME_CHANGE:"   ",PROTECTOR_CONTACT:"  ",AGENT_SMS:"  "}[e]}function tq(e){const t=[];if(e.outcomeType==="NO_RESPONSE"&&e.noResponse?.nextContactAt&&t.push({caseId:e.caseId,type:"RECONTACT",title:`${vwe(e.noResponse.strategy)} `,startAt:e.noResponse.nextContactAt,durationMin:20,priority:e.noResponse.escalateLevel==="L3"?"HIGH":"NORMAL",payload:{strategy:e.noResponse.strategy,escalateLevel:e.noResponse.escalateLevel}}),e.outcomeType==="LATER"){const n=e.noResponse?.nextContactAt??v7(72);t.push({caseId:e.caseId,type:"RECONTACT",title:"  ",startAt:n,durationMin:20,priority:"NORMAL",payload:{memo:e.memo}})}return e.outcomeType==="REJECT"&&(e.reject?.followup?.createFollowupEvent||e.reject?.followup?.followupAt)&&t.push({caseId:e.caseId,type:"FOLLOWUP",title:`   (${ywe(e.reject?.code)})`,startAt:e.reject?.followup?.followupAt??v7(168),durationMin:20,priority:e.reject?.level==="FINAL"?"HIGH":"NORMAL",payload:{rejectCode:e.reject?.code,rejectLevel:e.reject?.level}}),t}async function Nwe(e,t){if(await Zz(),Jz())return eq(`/api/cases/${e}/outcomes`,{body:JSON.stringify(t)});const n=`OUT-${e}-${String(b7).padStart(5,"0")}`;b7+=1;const r=tq({caseId:e,outcomeType:t.outcomeType,memo:t.memo,reject:t.reject,noResponse:t.noResponse});return{ok:!0,outcomeId:n,timelinePatch:{at:xwe(),outcomeType:t.outcomeType},nextAction:r.length?{type:"CREATE_CALENDAR_EVENT",events:r}:void 0}}async function wO(e){if(await Zz(),Jz())return eq("/api/calendar/events",{body:JSON.stringify(e)});if(bwe())throw new Error("CALENDAR_FORCED_FAILURE");const t=x7.get(e.idempotencyKey);if(t)return t;const n={ok:!0,eventId:`CAL-${String(y7).padStart(6,"0")}`};return y7+=1,x7.set(e.idempotencyKey,n),n}function Swe(){return new Date().toISOString()}function l_(e){return e instanceof Error?e.message:typeof e=="string"?e:"    ."}function N7(e){return{idempotencyKey:e.idempotencyKey,caseId:e.caseId,outcomeId:e.outcomeId,event:e.event,eventType:e.event.type,title:e.event.title,scheduledAt:e.event.startAt,errorMessage:e.errorMessage,retryCount:e.retryCount,recordedAt:Swe()}}function Ewe(){const[e,t]=h.useState(!1),[n,r]=h.useState(null),[s,i]=h.useState([]),[o,l]=h.useState({}),c=h.useCallback(async({caseId:g,payload:x})=>{if(e)return null;t(!0),r(null);try{const y=await Nwe(g,x),v=y.nextAction?.events??tq({caseId:g,outcomeType:x.outcomeType,memo:x.memo,reject:x.reject,noResponse:x.noResponse}),N=[],S=[];for(let j=0;j<v.length;j+=1){const C=v[j],_=`${g}:${y.outcomeId}:${C.type}:${j}`;try{const A=await wO({idempotencyKey:_,event:C});N.push({idempotencyKey:_,eventId:A.eventId,event:C})}catch(A){S.push(N7({idempotencyKey:_,caseId:g,outcomeId:y.outcomeId,event:C,errorMessage:l_(A),retryCount:0}))}}return i(j=>{const C=j.filter(_=>!S.some(A=>A.idempotencyKey===_.idempotencyKey));return[...S,...C]}),{outcome:y,calendar:{created:N,failed:S}}}catch(y){return r(l_(y)),null}finally{t(!1)}},[e]),u=h.useCallback(async g=>{const x=s.find(y=>y.idempotencyKey===g);if(!x)return{ok:!1};l(y=>({...y,[g]:!0}));try{const y=await wO({idempotencyKey:x.idempotencyKey,event:x.event});return i(v=>v.filter(N=>N.idempotencyKey!==g)),{ok:!0,eventId:y.eventId}}catch(y){const v=N7({idempotencyKey:x.idempotencyKey,caseId:x.caseId,outcomeId:x.outcomeId,event:x.event,errorMessage:l_(y),retryCount:x.retryCount+1});return i(N=>N.map(S=>S.idempotencyKey===g?v:S)),{ok:!1,failure:v}}finally{l(y=>{const v={...y};return delete v[g],v})}},[s]),m=h.useMemo(()=>Object.values(o).some(Boolean),[o]),p=h.useCallback(()=>r(null),[]);return{isSaving:e,submitError:n,calendarFailures:s,retryingKeys:o,isRetrying:m,submit:c,retryCalendarFailure:u,clearSubmitError:p}}const nq="080-000-0000",jwe=` ${nq}`,rq="",aq="  ",wwe=[{id:"S1_SENT_BASE",stage:"STAGE1",situation:"DELIVERED",channel:"SMS",tone:"government",type:"CONTACT",label:"1  ",template:"[{{CENTER_NAME}}]   . ({{CASE_ALIAS}})        . {{LINK}}  {{CALLBACK_PHONE}} {{OPT_OUT}}"},{id:"S1_NO_RESPONSE",stage:"STAGE1",situation:"NO_RESPONSE",channel:"SMS",tone:"government",type:"REMINDER",label:"1  ",template:"[{{CENTER_NAME}}]    ,   /  . {{LINK}}  {{CALLBACK_PHONE}} {{OPT_OUT}}"},{id:"S1_FAILED",stage:"STAGE1",situation:"FAILED",channel:"SMS",tone:"government",type:"CONTACT",label:"1   ",template:"[{{CENTER_NAME}}]     .    {{CALLBACK_PHONE}}  . {{OPT_OUT}}"},{id:"S2_SENT_BASE",stage:"STAGE2",situation:"DELIVERED",channel:"SMS",tone:"government",type:"BOOKING",label:"2    ",template:"[{{CENTER_NAME}}] /     .          . {{LINK}}  {{CALLBACK_PHONE}} {{OPT_OUT}}"},{id:"S2_CLICKED_INCOMPLETE",stage:"STAGE2",situation:"CLICKED",channel:"SMS",tone:"government",type:"REMINDER",label:"2   ",template:"[{{CENTER_NAME}}]    .    ,     . {{LINK}}  {{CALLBACK_PHONE}} {{OPT_OUT}}"},{id:"S2_NO_RESPONSE",stage:"STAGE2",situation:"NO_RESPONSE",channel:"SMS",tone:"government",type:"REMINDER",label:"2  ",template:"[{{CENTER_NAME}}] /  .      . {{LINK}}  {{CALLBACK_PHONE}} {{OPT_OUT}}"},{id:"S3_SENT_BASE",stage:"STAGE3",situation:"DELIVERED",channel:"SMS",tone:"government",type:"CONTACT",label:"3   ",template:"[{{CENTER_NAME}}]     .  /     . {{LINK}}  {{CALLBACK_PHONE}} {{OPT_OUT}}"},{id:"S3_ACTION_COMPLETED",stage:"STAGE3",situation:"ACTION_COMPLETED",channel:"SMS",tone:"government",type:"REMINDER",label:"3   ",template:"[{{CENTER_NAME}}]    .    {{CALLBACK_PHONE}}  . {{OPT_OUT}}"},{id:"S3_NO_RESPONSE",stage:"STAGE3",situation:"NO_RESPONSE",channel:"SMS",tone:"government",type:"REMINDER",label:"3   ",template:"[{{CENTER_NAME}}]        . {{CALLBACK_PHONE}}  ,    . {{LINK}} {{OPT_OUT}}"}],S7={DRAFT:{label:"",tone:"border-slate-300 bg-slate-50 text-slate-700"},SCHEDULED:{label:"",tone:"border-blue-300 bg-blue-50 text-blue-700"},SENT:{label:"",tone:"border-indigo-300 bg-indigo-50 text-indigo-700"},DELIVERED:{label:"",tone:"border-emerald-300 bg-emerald-50 text-emerald-700"},FAILED:{label:"",tone:"border-red-300 bg-red-50 text-red-700"},CLICKED:{label:" ",tone:"border-cyan-300 bg-cyan-50 text-cyan-700"},ACTION_COMPLETED:{label:" ",tone:"border-green-300 bg-green-50 text-green-700"},NO_RESPONSE:{label:"",tone:"border-amber-300 bg-amber-50 text-amber-700"},OPTOUT:{label:"",tone:"border-zinc-300 bg-zinc-100 text-zinc-700"}},Awe={DRAFT:[{id:"MARK_COMPLETED",label:" ",nextStatus:"ACTION_COMPLETED"},{id:"MARK_OPTOUT",label:" ",nextStatus:"OPTOUT"}],SCHEDULED:[{id:"MARK_NO_RESPONSE",label:" ",nextStatus:"NO_RESPONSE"},{id:"SWITCH_TO_CALL",label:" "}],SENT:[{id:"SEND_REMINDER",label:" ",nextStatus:"CLICKED"},{id:"MARK_NO_RESPONSE",label:" ",nextStatus:"NO_RESPONSE"}],DELIVERED:[{id:"SEND_REMINDER",label:" ",nextStatus:"CLICKED"},{id:"MARK_COMPLETED",label:" ",nextStatus:"ACTION_COMPLETED"}],FAILED:[{id:"VERIFY_PHONE",label:" "},{id:"SWITCH_TO_CALL",label:" "}],CLICKED:[{id:"SEND_REMINDER",label:" "},{id:"MARK_COMPLETED",label:" ",nextStatus:"ACTION_COMPLETED"}],ACTION_COMPLETED:[{id:"CREATE_RECONTACT_TASK",label:"  "},{id:"MARK_OPTOUT",label:" ",nextStatus:"OPTOUT"}],NO_RESPONSE:[{id:"RETRY_WITH_ALT_TEMPLATE",label:"( )"},{id:"SWITCH_TO_CALL",label:" "}],OPTOUT:[{id:"SWITCH_TO_CALL",label:"  "},{id:"CREATE_RECONTACT_TASK",label:"   "}]};function _we(e={}){const t=e.OPTOUT_NUMBER?.trim()||nq;return{CENTER_NAME:e.CENTER_NAME||" ",CALLBACK_PHONE:e.CALLBACK_PHONE||"02-555-0199",LINK:e.LINK||"",OPT_OUT:e.OPT_OUT||` ${t}`,CASE_ALIAS:e.CASE_ALIAS||rq,DUE_DATE:e.DUE_DATE||aq,OPTOUT_NUMBER:t}}function Cwe(e,t={}){const n=_we(t),r=/\{\{\s*([A-Z0-9_]+)\s*\}\}/g,s=i=>i.replace(r,(o,l)=>n[l]??"");return s(s(e)).replace(/\s{2,}/g," ").trim()}function Twe(e){return wwe.filter(t=>t.stage===e)}function Owe(e){return Twe(e).map(t=>({id:t.id,type:t.type,label:t.label,body:n=>Cwe(t.template,{CENTER_NAME:n.centerName,CALLBACK_PHONE:n.centerPhone,LINK:n.guideLink,CASE_ALIAS:n.caseAlias||rq,DUE_DATE:n.dueDate||aq,OPT_OUT:n.optOut||jwe})}))}function Rwe(e){return e.includes("3")?"STAGE3":e.includes("2")?"STAGE2":"STAGE1"}const c3={VITE_BASE_PATH:"/neuro-shield/"},AO="/api/sms/messages",E7="/api/outreach/send-sms",kwe="R-2ldKkoGbDF-marBFEbgVilAXB5Tw0r",j7="http://146.56.162.226/neuro-shield";function sq(e){if(!e.trim())return"/neuro-shield/";let t=e.trim();return t.startsWith("/")||(t=`/${t}`),t.endsWith("/")||(t=`${t}/`),t}function Iwe(e){const t=(e||"").trim();return t?t.startsWith("/")?t:`/${t}`:"/"}function Dwe(e){const t=new Set,n=[];for(const r of e){const s=r.trim();!s||t.has(s)||(t.add(s),n.push(s))}return n}function iq(e){const t=c3,n=Iwe(e),r=sq(t.VITE_BASE_PATH),s=r==="/"?"":r.replace(/\/$/,""),i=(t.VITE_SMS_API_BASE_URL||t.VITE_API_BASE_URL||"").trim().replace(/\/$/,""),o=[n];return s&&!n.startsWith(`${s}/`)&&o.push(`${s}${n}`),typeof window<"u"&&(o.push(`${window.location.origin}${n}`),s&&!n.startsWith(`${s}/`)&&o.push(`${window.location.origin}${s}${n}`)),i&&o.push(`${i}${n}`),Dwe(o)}function Pwe(){const e=c3,t=(e.VITE_CITIZEN_ENTRY_URL||e.VITE_STAGE1_DEMO_LINK||"").trim();if(t)try{const r=new URL(t),s=r.pathname.replace(/\/+$/,""),i=s.indexOf("/p/sms");if(i>=0){const o=s.slice(0,i);return`${r.origin}${o}`.replace(/\/$/,"")}return`${r.origin}${s}`.replace(/\/$/,"")}catch{}const n=e.VITE_PUBLIC_BASE_URL||e.DEPLOY_BASE_URL;if(n&&n.trim())return n.replace(/\/$/,"");if(typeof window<"u"){const r=window.location.hostname.toLowerCase();if(r==="localhost"||r==="127.0.0.1"||r==="::1")return j7;const s=sq(e.VITE_BASE_PATH);return`${window.location.origin}${s.replace(/\/$/,"")}`}return j7}function UN(e){return`${Pwe()}/p/sms?t=${encodeURIComponent(e)}`}function Mwe(e){try{return(new URL(e,typeof window<"u"?window.location.origin:"http://localhost").searchParams.get("t")||"").trim()||void 0}catch{return}}function Lwe(e){if(e!=="STAGE1")return null;const t=c3,n=(t.VITE_CITIZEN_ENTRY_URL||t.VITE_STAGE1_DEMO_LINK||"").trim(),r=(t.VITE_CITIZEN_DEMO_TOKEN||kwe).trim(),s=n?n.includes("/p/sms")?n:`${n.replace(/\/$/,"")}/p/sms?t=${encodeURIComponent(r)}`:UN(r);return{linkUrl:s,token:Mwe(s)}}function d3(e){return`tmp-${(e||"case").replace(/[^a-zA-Z0-9_-]/g,"").slice(-18)||"case"}-${Date.now().toString(36)}`}function oq(e,t="SENT"){if(!e)return t;const n=e.toUpperCase();return n.includes("FAIL")?"FAILED":n.includes("DELIVER")?"DELIVERED":n.includes("SCHEDULE")?"SCHEDULED":n.includes("CLICK")?"CLICKED":n.includes("OPT")?"OPTOUT":t}function $we(e,t){return{case_id:e.caseId,center_id:e.centerId,citizen_phone:e.citizenPhone,template_id:e.templateId,variables:{template:e.renderedMessage,link_url:t,guideLink:t,...e.variables||{}},dedupe_key:e.dedupeKey||`${e.caseId}-${Date.now()}`,guardian_phone:e.guardianPhone}}function Fwe(e,t,n){return{caseId:e.caseId,centerId:e.centerId,citizenPhone:e.citizenPhone,stage:e.stage||"STAGE1",templateId:e.templateId,variables:{LINK:t,...e.variables||{}},sendPolicy:e.sendPolicy==="SCHEDULE"?"SCHEDULED":"IMMEDIATE",scheduledAt:e.scheduledAt,channel:e.channel||"SMS",renderedText:e.renderedMessage,dedupeKey:e.dedupeKey||`${e.caseId}-${Date.now()}`,guardianPhone:e.guardianPhone,token:n,statusHint:e.statusHint}}function w7(e,t){return e.includes(t)?e:`${e} ${t}`.trim()}async function Uwe(e,t,n){const r=iq(AO);let s="";for(const i of r)try{const o=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Fwe(e,t,n))});if(!o.ok){const u=await o.text();s=`  (${o.status}): ${u}`;continue}const l=await o.json(),c=oq(l.status,e.sendPolicy==="SCHEDULE"?"SCHEDULED":"SENT");return{success:!0,endpoint:i,providerMessageId:l.providerMessageId||l.messageId,status:l.status||c,lifecycleStatus:c,renderedText:l.renderedText||l.renderedMessage||e.renderedMessage,renderedMessage:l.renderedMessage||l.renderedText||e.renderedMessage,token:l.token||n,linkUrl:l.linkUrl||t,actualTo:l.actualTo,intendedTo:l.intendedTo}}catch(o){s=` : ${o instanceof Error?o.message:String(o)}`}return{success:!1,endpoint:r[0]??AO,error:s||"  "}}async function Bwe(e,t){const n=iq(E7);let r="";for(const s of n)try{const i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify($we(e,t))});if(!i.ok){const c=await i.text();r=`  (${i.status}): ${c}`;continue}const o=await i.json(),l=oq(o.status,e.sendPolicy==="SCHEDULE"?"SCHEDULED":"SENT");return{success:!0,endpoint:s,providerMessageId:o.provider_message_id,status:o.status||l,lifecycleStatus:l,actualTo:o.actual_to,intendedTo:o.intended_to,renderedMessage:o.rendered_message||w7(e.renderedMessage,t),renderedText:o.rendered_message||w7(e.renderedMessage,t),token:e.linkToken,linkUrl:t}}catch(i){r=` : ${i instanceof Error?i.message:String(i)}`}return{success:!1,endpoint:n[0]??E7,error:r||"  "}}function Gwe(e,t){return e?t==="SCHEDULE"?"SCHEDULED":"SENT":"FAILED"}function Hwe(e){return e==="SCHEDULED"?"SCHEDULED":e==="FAILED"?"FAILED":e==="DELIVERED"?"DELIVERED":e==="CLICKED"?"CLICKED":e==="ACTION_COMPLETED"?"ACTION_COMPLETED":e==="NO_RESPONSE"?"NO_RESPONSE":e==="OPTOUT"?"OPTOUT":"SENT"}function Kwe(){return UN(d3("preview"))}async function lq(e){const t=e.linkUrl?null:Lwe(e.stage),n=e.linkToken||t?.token||d3(e.caseId),r=e.linkUrl||t?.linkUrl||UN(n);Kne({token:n,caseId:e.caseId,sentAt:new Date().toISOString()});const s=await Uwe(e,r,n);if(s.success)return s;console.warn(`[SMS] ${AO} , legacy fallback :`,s.error);const i=await Bwe(e,r);if(i.success)return i;const o=i.error||s.error;return{success:!1,endpoint:i.endpoint||s.endpoint,error:o||"SMS    .  .",token:n,linkUrl:r}}function _O(){const e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")} ${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`}const c_={CONTACT:"",BOOKING:"",REMINDER:""},zwe={CONTACT:"bg-blue-100 text-blue-800",BOOKING:"bg-emerald-100 text-emerald-800",REMINDER:"bg-amber-100 text-amber-800"},qwe={SENT:"",SCHEDULED:"",FAILED:"",DELIVERED:"",CLICKED:" ",ACTION_COMPLETED:" ",NO_RESPONSE:"",OPTOUT:""},Vwe={SENT:"text-indigo-700 border-indigo-300",SCHEDULED:"text-blue-700 border-blue-300",FAILED:"text-red-700 border-red-300",DELIVERED:"text-emerald-700 border-emerald-300",CLICKED:"text-cyan-700 border-cyan-300",ACTION_COMPLETED:"text-green-700 border-green-300",NO_RESPONSE:"text-amber-700 border-amber-300",OPTOUT:"text-zinc-700 border-zinc-400"},Wwe=[{step:"greeting",title:"1:    ",content:".   .   ?       .",tips:["  ","    ","   "],checkpoints:["  ","/ ","   "]},{step:"purpose",title:"2:   ",content:"       .     , /    .",tips:["  ","   ","   "],checkpoints:["   ","   ","  "]},{step:"assessment",title:"3:   ",content:"   ,   , /    .",tips:["  ","  ","   "],checkpoints:["  ","   ","    "]},{step:"scheduling",title:"4:   ",content:"     , / ,   .",tips:["  1 ","   ","  "],checkpoints:["  ","   ","  "]}],Ywe={centerName:" ",centerPhone:"02-555-0199".trim()||"02-555-0199",guideLink:Kwe(),bookingLink:"(  )",caseAlias:"",dueDate:"  ",optOut:" 080-000-0000"};function d_(e,t,n){e(r=>[{id:`TL-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,at:_O(),status:t,note:n},...r])}function u_(e,t){return e.find(n=>n.type===t)}function A7({stageLabel:e,stageCode:t,templates:n,defaultVars:r,caseId:s,centerId:i="center-001",citizenPhone:o="010-****-1234",guardianPhone:l,onSmsSent:c,onConsultation:u,callScripts:m,onNavigateLink:p,showLinkageTab:g=!1,compact:x=!1}){const y=t??Rwe(e),v=h.useMemo(()=>Owe(y),[y]),N=h.useMemo(()=>n.length>0?n:v,[v,n]),S={...Ywe,...r},j=m??Wwe,[C,_]=h.useState("CALL"),[A,T]=h.useState("citizen"),[R,M]=h.useState(0),[P,$]=h.useState({}),[w,U]=h.useState(!1),[X,I]=h.useState(0),[G,L]=h.useState("SUCCESS"),[H,F]=h.useState("");h.useEffect(()=>{if(!w)return;const Ee=setInterval(()=>I(ze=>ze+1),1e3);return()=>clearInterval(Ee)},[w]);const K=`${String(Math.floor(X/60)).padStart(2,"0")}:${String(X%60).padStart(2,"0")}`,ne=j[R]??j[0],V=()=>{u?.(`[] : ${A==="citizen"?"":""} / : ${G} / : ${K}
${H}`,"CONTACT",` (${e})`),F(""),U(!1),I(0),$({}),M(0)},ee=N[0]?.type??"CONTACT",[ae,ue]=h.useState(ee),[ce,Z]=h.useState(N[0]?.id??""),[ie,Se]=h.useState(""),[fe,Te]=h.useState("NOW"),[Pe,oe]=h.useState(""),[le,ye]=h.useState(""),[_e,te]=h.useState(S),[z,Ne]=h.useState(!1),[me,xe]=h.useState(!0),[et,Fe]=h.useState(!1),[pt,St]=h.useState(null),[qe,rn]=h.useState([]),[at,jt]=h.useState(!1),[It,an]=h.useState("DRAFT"),[Ut,Ht]=h.useState([{id:"TL-INIT",at:_O(),status:"DRAFT",note:"  "}]),qt=h.useMemo(()=>{const Ee=new Set,ze=[];for(const ht of N)Ee.has(ht.type)||(Ee.add(ht.type),ze.push(ht.type));return ze},[N]);h.useEffect(()=>{qt.includes(ae)||ue(qt[0]??"CONTACT")},[qt,ae]);const Tn=h.useMemo(()=>N.filter(Ee=>Ee.type===ae),[N,ae]),hn=h.useMemo(()=>N.find(Ee=>Ee.id===ce)??Tn[0]??N[0],[N,ce,Tn]);h.useEffect(()=>{Tn.some(Ee=>Ee.id===ce)||Z(Tn[0]?.id??N[0]?.id??"")},[Tn,ce,N]);const ar=h.useMemo(()=>{if(!hn||typeof hn.body!="function")return"";const Ee=hn.body(_e);if(!me)return Ee;const ze=_e.guideLink?.trim();return!ze||Ee.includes(ze)?Ee:`${Ee} ${ze}`.trim()},[hn,_e,me]),yt=S7[It],Ve=(Awe[It]??[]).slice(0,2),Xt=Ee=>{ue(Ee);const ze=u_(N,Ee);ze&&Z(ze.id)},On=Ee=>{const ze=(ht,pn)=>{an(ht),d_(Ht,ht,pn)};if(Ee.id==="RETRY_WITH_ALT_TEMPLATE"){ze("DRAFT","   ");const ht=u_(N,"REMINDER")??N[0];ht&&(ue(ht.type),Z(ht.id)),De.info("    .");return}if(Ee.id==="SWITCH_TO_CALL"){ze("NO_RESPONSE","   "),_("CALL"),p?.("call");return}if(Ee.id==="VERIFY_PHONE"){ye(ht=>ht?`${ht}
  `:"  "),ze("FAILED","    ");return}if(Ee.id==="CREATE_RECONTACT_TASK"){De.success(" ()  "),d_(Ht,It,"  ");return}if(Ee.id==="SEND_REMINDER"){const ht=u_(N,"REMINDER");ht&&(ue("REMINDER"),Z(ht.id)),ze("CLICKED","     ");return}if(Ee.id==="MARK_NO_RESPONSE"){ze("NO_RESPONSE","   ");return}if(Ee.id==="MARK_COMPLETED"){ze("ACTION_COMPLETED","  ");return}Ee.id==="MARK_OPTOUT"&&ze("OPTOUT"," ")},Rn=async()=>{if(!hn){St({success:!1,error:"   ."});return}if(It==="OPTOUT"){St({success:!1,error:"  SMS   ."});return}if(fe==="SCHEDULE"&&!Pe.trim()){St({success:!1,error:"   ."});return}const Ee=d3(s),ze=UN(Ee),ht={..._e,guideLink:me?ze:_e.guideLink},pn=hn.body(ht),En=me&&ht.guideLink&&!pn.includes(ht.guideLink)?`${pn} ${ht.guideLink}`.trim():pn;Fe(!0),St(null);const lr=await lq({caseId:s,centerId:i,citizenPhone:ie===""&&l?l:o,templateId:hn.id,renderedMessage:En,guardianPhone:ie===""?l:void 0,stage:y,sendPolicy:fe,scheduledAt:fe==="SCHEDULE"?Pe:void 0,channel:"SMS",linkToken:Ee,linkUrl:ze,statusHint:It,variables:{CENTER_NAME:ht.centerName,CALLBACK_PHONE:ht.centerPhone,CASE_ALIAS:ht.caseAlias||"",DUE_DATE:ht.dueDate||"  ",OPT_OUT:ht.optOut||" 080-000-0000"}});Fe(!1),St(lr);const jn=lr.lifecycleStatus||Gwe(lr.success,fe),Qe=Hwe(jn);an(jn),d_(Ht,jn,`${fe==="NOW"?"":""}   ${hn.label}`);const sr={id:`SMS-${Date.now()}`,at:fe==="SCHEDULE"?Pe.replace("T"," "):_O(),templateLabel:hn.label,type:hn.type,mode:fe,recipient:ie,status:Qe,preview:En,note:le.trim(),providerMessageId:lr.providerMessageId,lifecycleStatus:jn,token:lr.token||Ee,linkUrl:lr.linkUrl||ze};rn(bn=>[sr,...bn]),c?.(sr),lr.success&&(ye(""),te(bn=>({...bn,guideLink:lr.linkUrl||ze})))},Or=()=>{hn&&(u?.(le.trim(),ae,hn.label),ye(""))};return a.jsxs("div",{className:"bg-white rounded-xl overflow-hidden",children:[a.jsx("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 px-6 py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-base font-bold text-white flex items-center gap-2",children:[a.jsx(NC,{className:"h-4 w-4 text-blue-300"})," ",a.jsx(rr,{className:"ml-1 bg-blue-500/20 text-blue-200 border-blue-400/30 text-[10px]",children:e})]}),a.jsxs("p",{className:"text-[11px] text-slate-300 mt-1",children:["  ",g?"  ":"","   "]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(rr,{className:he("text-xs px-2.5 py-1 border",yt.tone),children:yt.label}),qe.length>0&&a.jsxs(rr,{className:"bg-white/10 text-white border-white/20 text-xs px-2.5 py-1",children:[qe.length," "]})]})]})}),a.jsx("div",{className:"border-b border-slate-200 bg-slate-50",children:a.jsx("div",{className:"flex",children:[{key:"CALL",icon:NC,label:""},{key:"SMS",icon:vo,label:""},...g?[{key:"LINK",icon:Am,label:""}]:[]].map(({key:Ee,icon:ze,label:ht})=>a.jsxs("button",{onClick:()=>_(Ee),className:he("flex-1 flex items-center justify-center gap-2 px-4 py-3 text-sm font-semibold transition-all border-b-2",C===Ee?"border-blue-600 text-blue-700 bg-white":"border-transparent text-slate-500 hover:text-slate-700 hover:bg-white/50"),children:[a.jsx(ze,{className:"h-4 w-4"}),ht]},Ee))})}),C==="CALL"&&a.jsxs("div",{className:he("space-y-4",x?"px-4 py-4":"px-6 py-5"),children:[a.jsxs("div",{className:"rounded-lg border border-amber-200 bg-amber-50/80 px-4 py-2.5 text-xs text-amber-800 flex items-start gap-2",children:[a.jsx(ea,{className:"h-3.5 w-3.5 mt-0.5 shrink-0"}),a.jsxs("span",{children:[a.jsx("strong",{children:" :"})," /AI   .   .   ."]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-semibold text-slate-600 mb-2 block",children:" "}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{key:"citizen",label:" ",sub:"  ",icon:lc},{key:"guardian",label:"",sub:l?"  ":"  ",icon:ec}].map(({key:Ee,label:ze,sub:ht,icon:pn})=>a.jsxs("button",{onClick:()=>{T(Ee),M(0),$({})},disabled:Ee==="guardian"&&!l,className:he("flex items-center gap-3 rounded-xl border-2 px-4 py-3 text-left transition-all",A===Ee?"border-blue-500 bg-blue-50 ring-1 ring-blue-200":"border-slate-200 bg-white hover:border-slate-300",Ee==="guardian"&&!l&&"opacity-40 cursor-not-allowed"),children:[a.jsx("div",{className:he("h-8 w-8 rounded-full flex items-center justify-center",A===Ee?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-500"),children:a.jsx(pn,{className:"h-4 w-4"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold text-slate-900",children:ze}),a.jsx("p",{className:"text-[11px] text-slate-500",children:ht})]}),A===Ee&&a.jsx(Uf,{className:"h-4 w-4 text-blue-600 ml-auto"})]},Ee))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-semibold text-slate-600 mb-2 block",children:" "}),a.jsx("div",{className:"grid grid-cols-4 gap-1 rounded-xl border border-slate-200 bg-slate-50 p-1",children:j.map((Ee,ze)=>a.jsxs("button",{onClick:()=>M(ze),className:he("rounded-lg px-2 py-2 text-xs font-semibold transition-all",R===ze?"bg-white text-slate-900 shadow-sm ring-1 ring-slate-200":"text-slate-500 hover:text-slate-700 hover:bg-white/50"),children:[ze+1,""]},Ee.step))}),a.jsxs("div",{className:"mt-3 rounded-xl border border-blue-200 bg-gradient-to-br from-blue-50 to-indigo-50/50 p-4",children:[a.jsx("p",{className:"text-sm font-bold text-blue-900 mb-2",children:ne.title}),a.jsx("p",{className:"text-xs leading-relaxed text-blue-800/90",children:ne.content})]}),a.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"rounded-lg border border-slate-100 bg-slate-50/80 p-3",children:[a.jsx("p",{className:"text-[11px] font-bold text-slate-700 mb-2",children:" "}),a.jsx("ul",{className:"space-y-1",children:ne.tips.map(Ee=>a.jsxs("li",{className:"text-[11px] text-slate-600 flex items-start gap-1.5",children:[a.jsx("span",{className:"text-blue-400 mt-0.5",children:""})," ",Ee]},Ee))})]}),a.jsxs("div",{className:"rounded-lg border border-slate-100 bg-slate-50/80 p-3",children:[a.jsx("p",{className:"text-[11px] font-bold text-slate-700 mb-2",children:""}),a.jsx("div",{className:"space-y-1.5",children:ne.checkpoints.map(Ee=>a.jsxs("label",{className:"flex items-center gap-2 text-[11px] text-slate-600 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:!!P[Ee],onChange:ze=>$(ht=>({...ht,[Ee]:ze.target.checked})),className:"h-3.5 w-3.5 rounded border-slate-300 text-blue-600"}),a.jsx("span",{className:P[Ee]?"line-through text-slate-400":"",children:Ee})]},Ee))})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-semibold text-slate-600 mb-2 block",children:" "}),a.jsx("div",{className:"grid grid-cols-4 gap-2",children:[{value:"SUCCESS",label:"",icon:Si,ac:"border-emerald-500 bg-emerald-50 text-emerald-700"},{value:"NO_ANSWER",label:"",icon:L1,ac:"border-amber-500 bg-amber-50 text-amber-700"},{value:"REJECTED",label:"",icon:Sm,ac:"border-red-500 bg-red-50 text-red-700"},{value:"WRONG_NUMBER",label:"",icon:Mu,ac:"border-slate-500 bg-slate-50 text-slate-700"}].map(({value:Ee,label:ze,icon:ht,ac:pn})=>a.jsxs("button",{onClick:()=>L(Ee),className:he("flex flex-col items-center gap-1.5 rounded-xl border-2 px-3 py-3 text-xs font-semibold transition-all",G===Ee?pn:"border-slate-200 bg-white text-slate-500 hover:border-slate-300"),children:[a.jsx(ht,{className:"h-4 w-4"}),ze]},Ee))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-semibold text-slate-600 mb-1.5 block",children:" "}),a.jsx(Xo,{value:H,onChange:Ee=>F(Ee.target.value),className:"min-h-[80px] text-xs rounded-lg border-slate-200",placeholder:"    "})]}),a.jsxs("div",{className:"flex items-center justify-between pt-1",children:[a.jsxs("div",{className:he("inline-flex items-center gap-2 rounded-lg px-3 py-2 text-sm font-bold",w?"bg-red-50 text-red-700 border border-red-200":"bg-slate-100 text-slate-600"),children:[a.jsx(bR,{className:"h-4 w-4"}),w?`  ${K}`:""]}),a.jsxs("div",{className:"flex gap-2",children:[w?a.jsxs(Nt,{onClick:()=>U(!1),variant:"outline",className:"h-10 border-red-300 text-red-700 hover:bg-red-50 text-sm font-semibold gap-2 rounded-xl",children:[a.jsx(Si,{className:"h-4 w-4"})," "]}):a.jsxs(Nt,{onClick:()=>{U(!0),I(0)},className:"h-10 bg-blue-600 text-sm font-semibold text-white hover:bg-blue-700 gap-2 px-5 rounded-xl",children:[a.jsx(ti,{className:"h-4 w-4"}),""]}),a.jsxs(Nt,{onClick:V,className:"h-10 bg-slate-800 text-sm font-semibold text-white hover:bg-slate-900 gap-2 px-5 rounded-xl",children:[a.jsx(Uf,{className:"h-4 w-4"}),"  "]})]})]})]}),C==="SMS"&&a.jsxs("div",{className:he("space-y-4",x?"px-4 py-4":"px-6 py-5"),children:[a.jsxs("div",{className:"rounded-lg border border-amber-200 bg-amber-50/80 px-4 py-2.5 text-xs text-amber-800 flex items-start gap-2",children:[a.jsx(ea,{className:"h-3.5 w-3.5 mt-0.5 shrink-0"}),a.jsxs("span",{children:[a.jsx("strong",{children:" :"}),"  /AI   .  .    ."]})]}),a.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-3",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(rr,{className:"bg-slate-800 text-white border-slate-700 text-[10px]",children:y}),a.jsx(rr,{className:he("text-[10px] border",yt.tone),children:yt.label})]}),a.jsx("span",{className:"text-[11px] text-slate-500",children:"   1~2"})]}),a.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:Ve.map(Ee=>a.jsx(Nt,{type:"button",variant:"outline",size:"sm",onClick:()=>On(Ee),className:"h-8 rounded-lg text-xs",children:Ee.label},Ee.id))})]}),a.jsx("div",{className:"grid grid-cols-3 gap-1.5 rounded-xl border border-slate-200 bg-slate-50 p-1.5",children:["CONTACT","BOOKING","REMINDER"].map(Ee=>{const ze=!qt.includes(Ee);return a.jsx("button",{onClick:()=>Xt(Ee),disabled:ze,className:he("rounded-lg px-3 py-2.5 text-xs font-semibold transition-all",ae===Ee?"bg-white text-slate-900 shadow-sm ring-1 ring-slate-200":"text-slate-500 hover:text-slate-700 hover:bg-white/50",ze&&"opacity-40 cursor-not-allowed"),children:c_[Ee]},Ee)})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("select",{value:ce,onChange:Ee=>Z(Ee.target.value),className:"w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm outline-none focus:border-blue-400 focus:ring-2 focus:ring-blue-100",children:Tn.map(Ee=>a.jsx("option",{value:Ee.id,children:Ee.label},Ee.id))}),a.jsxs("label",{className:"inline-flex items-center gap-2 text-xs text-slate-700 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:me,onChange:Ee=>xe(Ee.target.checked),className:"h-3.5 w-3.5 rounded border-slate-300"}),"   "]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-semibold text-slate-600 mb-2 block",children:""}),a.jsx("div",{className:"flex gap-2",children:["",""].map(Ee=>a.jsxs("button",{onClick:()=>Se(Ee),disabled:Ee===""&&!l,className:he("flex-1 flex items-center justify-center gap-2 rounded-xl border-2 px-3 py-2.5 text-xs font-semibold transition-all",ie===Ee?"border-blue-500 bg-blue-50 text-blue-800 ring-1 ring-blue-200":"border-slate-200 bg-white text-slate-500 hover:border-slate-300",Ee===""&&!l&&"opacity-40 cursor-not-allowed"),children:[Ee===""?a.jsx(lc,{className:"h-3.5 w-3.5"}):a.jsx(ec,{className:"h-3.5 w-3.5"}),Ee]},Ee))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-semibold text-slate-600 mb-2 block",children:" "}),a.jsx("div",{className:"grid grid-cols-2 gap-1.5 rounded-xl border border-slate-200 bg-slate-50 p-1.5",children:[{key:"NOW",icon:Og,label:""},{key:"SCHEDULE",icon:uR,label:""}].map(({key:Ee,icon:ze,label:ht})=>a.jsxs("button",{onClick:()=>Te(Ee),className:he("flex items-center justify-center gap-1.5 rounded-lg px-3 py-2.5 text-xs font-semibold transition-all",fe===Ee?"bg-white text-slate-900 shadow-sm ring-1 ring-slate-200":"text-slate-500"),children:[a.jsx(ze,{className:"h-3.5 w-3.5"})," ",ht]},Ee))})]})]}),a.jsxs("div",{className:"flex items-center gap-3 rounded-xl border border-slate-100 bg-slate-50/50 px-4 py-2.5",children:[a.jsx("span",{className:"text-xs text-slate-500",children:":"}),a.jsx("span",{className:"text-xs font-medium text-slate-700",children:ie===""&&l?` ${l}`:` ${o}`}),a.jsx("span",{className:"text-[10px] text-slate-400 ml-auto",children:"(: TEST_SMS_TO  )"})]}),fe==="SCHEDULE"&&a.jsx("input",{type:"datetime-local",value:Pe,onChange:Ee=>oe(Ee.target.value),className:"w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm outline-none focus:border-blue-400 focus:ring-2 focus:ring-blue-100"}),a.jsxs("button",{onClick:()=>Ne(!z),className:"flex items-center gap-1.5 text-xs text-blue-600 hover:text-blue-800 font-medium",children:[z?a.jsx(id,{className:"h-3.5 w-3.5"}):a.jsx(Ds,{className:"h-3.5 w-3.5"}),"  ",z?"":""]}),z&&a.jsx("div",{className:"grid grid-cols-2 gap-3 rounded-xl border border-slate-200 bg-slate-50/50 p-4",children:[["centerName",""],["centerPhone"," "],["guideLink"," "],["bookingLink"," "],["caseAlias"," "],["optOut"," "]].map(([Ee,ze])=>a.jsxs("div",{children:[a.jsx("label",{className:"text-[11px] font-semibold text-slate-500",children:ze}),a.jsx("input",{type:"text",value:_e[Ee]??"",onChange:ht=>te(pn=>({...pn,[Ee]:ht.target.value})),className:"mt-1 w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-xs outline-none focus:border-blue-400"})]},Ee))}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 px-4 py-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-[11px] font-bold text-slate-600",children:""}),a.jsx(rr,{variant:"outline",className:he("text-[10px]",zwe[ae]),children:c_[ae]})]}),a.jsx("p",{className:"whitespace-pre-wrap text-xs leading-relaxed text-slate-700 min-h-[80px]",children:ar}),a.jsxs("div",{className:"mt-2 flex items-center justify-between text-[10px] text-slate-400 border-t border-slate-200 pt-2",children:[a.jsxs("span",{children:[ar.length,"  ",ar.length>90?"LMS":"SMS"]}),a.jsxs("span",{children:[": ",ie]})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-[11px] font-bold text-slate-600 mb-1.5",children:"/ "}),a.jsx(Xo,{value:le,onChange:Ee=>ye(Ee.target.value),className:"flex-1 min-h-[120px] text-xs rounded-lg border-slate-200",placeholder:"    ()"})]})]}),pt&&a.jsx("div",{className:he("rounded-xl border px-4 py-3 text-xs flex items-center gap-2",pt.success?"border-emerald-200 bg-emerald-50 text-emerald-800":"border-red-200 bg-red-50 text-red-800"),children:pt.success?a.jsxs(a.Fragment,{children:[a.jsx(Si,{className:"h-4 w-4 shrink-0"}),a.jsxs("span",{children:["  ",pt.actualTo&&`(: ${pt.actualTo})`,pt.endpoint&&`  ${pt.endpoint}`]})]}):a.jsxs(a.Fragment,{children:[a.jsx(Sm,{className:"h-4 w-4 shrink-0"}),a.jsx("span",{children:pt.error??" "})]})}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-1",children:[a.jsxs(Nt,{variant:"outline",className:"h-11 text-sm font-semibold gap-2 rounded-xl border-slate-300",onClick:Or,children:[a.jsx(ti,{className:"h-4 w-4"})," "]}),a.jsxs(Nt,{className:"h-11 bg-blue-600 text-sm font-semibold text-white hover:bg-blue-700 gap-2 rounded-xl",onClick:Rn,disabled:et||It==="OPTOUT"||!hn,children:[a.jsx(vo,{className:"h-4 w-4"}),et?" ...":fe==="NOW"?" ":" "]})]}),It==="OPTOUT"&&a.jsx("div",{className:"rounded-lg border border-zinc-300 bg-zinc-100 px-3 py-2 text-xs text-zinc-700",children:" .   ,      ."}),a.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-xs font-semibold text-slate-700",children:" "}),(It==="FAILED"||It==="NO_RESPONSE"||It==="CLICKED")&&a.jsx(Nt,{size:"sm",variant:"outline",className:"h-7 text-[11px]",onClick:()=>On({id:"CREATE_RECONTACT_TASK"}),children:"  "})]}),a.jsx("div",{className:"mt-2 space-y-1.5 max-h-[180px] overflow-y-auto",children:Ut.map(Ee=>{const ze=S7[Ee.status];return a.jsxs("div",{className:"rounded-lg border border-slate-100 bg-slate-50 px-3 py-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:he("inline-flex rounded-full border px-2 py-0.5 text-[10px] font-semibold",ze.tone),children:ze.label}),a.jsx("span",{className:"text-[10px] text-slate-500",children:Ee.at})]}),Ee.note&&a.jsx("p",{className:"mt-1 text-[11px] text-slate-600",children:Ee.note})]},Ee.id)})})]}),qe.length>0&&a.jsxs("div",{className:"border-t border-slate-100 pt-4",children:[a.jsxs("button",{onClick:()=>jt(!at),className:"flex items-center gap-1.5 text-xs font-semibold text-slate-600",children:[at?a.jsx(id,{className:"h-3.5 w-3.5"}):a.jsx(Ds,{className:"h-3.5 w-3.5"}),"  (",qe.length,")"]}),at&&a.jsx("div",{className:"mt-3 space-y-2 max-h-[240px] overflow-y-auto",children:qe.map(Ee=>a.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 text-xs bg-white",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"font-semibold text-slate-800",children:Ee.templateLabel}),a.jsx(rr,{variant:"outline",className:he("text-[10px]",Vwe[Ee.status]),children:qwe[Ee.status]})]}),a.jsxs("p",{className:"mt-1 text-[11px] text-slate-500",children:[Ee.at,"  ",Ee.recipient,"  ",c_[Ee.type]]}),Ee.note&&a.jsxs("p",{className:"mt-1 text-[11px] text-slate-600 italic",children:[": ",Ee.note]}),Ee.linkUrl&&a.jsxs("p",{className:"mt-1 text-[10px] text-slate-500",children:[": ",Ee.linkUrl]})]},Ee.id))})]})]}),C==="LINK"&&g&&a.jsxs("div",{className:he("space-y-4",x?"px-4 py-4":"px-6 py-5"),children:[a.jsx("p",{className:"text-xs text-slate-500",children:" ,  ,      ."}),a.jsx("div",{className:"space-y-2",children:[{entry:"program",icon:Am,bg:"bg-blue-100 text-blue-700",label:" ",sub:"    "},{entry:"call",icon:ti,bg:"bg-emerald-100 text-emerald-700",label:"  ",sub:"v1    "},{entry:"sms",icon:vo,bg:"bg-amber-100 text-amber-700",label:"/ ",sub:"v1  /  "}].map(({entry:Ee,icon:ze,bg:ht,label:pn,sub:En})=>a.jsxs("button",{onClick:()=>p?.(Ee),className:"w-full flex items-center justify-between rounded-xl border-2 border-slate-200 bg-white px-4 py-3.5 text-left hover:border-blue-300 hover:bg-blue-50/30 transition-all",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:he("h-9 w-9 rounded-lg flex items-center justify-center",ht),children:a.jsx(ze,{className:"h-4 w-4"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold text-slate-900",children:pn}),a.jsx("p",{className:"text-[11px] text-slate-500",children:En})]})]}),a.jsx(Nm,{className:"h-5 w-5 text-slate-400"})]},Ee))})]})]})}const cq=["","","",""],Iu=[{top:"",mid:"",sub:" ",code:"H-PH-001",label:"  ",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["","",""],dementiaFit:!0},{top:"",mid:"",sub:" ",code:"H-PH-002",label:"  ( 3 )",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["",""],dementiaFit:!1},{top:"",mid:"",sub:" ",code:"H-PH-003",label:"   ",keywords:["","","",""],stageFit:[2],mciSeverityFit:[""],dementiaFit:!1},{top:"",mid:"",sub:" ",code:"H-PH-004",label:"    ",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["","",""],dementiaFit:!0},{top:"",mid:"",sub:" ",code:"H-PH-005",label:" ( )",keywords:["","",""],stageFit:[3],mciSeverityFit:[""],dementiaFit:!0},{top:"",mid:"",sub:"",code:"H-CG-001",label:"  (8)",keywords:["","","","8"],stageFit:[2,3],mciSeverityFit:["",""],dementiaFit:!1},{top:"",mid:"",sub:"",code:"H-CG-002",label:"   ",keywords:["","","",""],stageFit:[2],mciSeverityFit:[""],dementiaFit:!1},{top:"",mid:"",sub:"",code:"H-CG-003",label:"  (1:1)",keywords:["","","","1:1"],stageFit:[2,3],mciSeverityFit:["",""],dementiaFit:!0},{top:"",mid:"",sub:" ",code:"H-CG-004",label:"    ",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["","",""],dementiaFit:!0},{top:"",mid:"",sub:" ",code:"H-CG-005",label:"/  ",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["",""],dementiaFit:!0},{top:"",mid:"",sub:"",code:"H-PR-001",label:"   ",keywords:["","",""],stageFit:[3],dementiaFit:!0},{top:"",mid:"",sub:"",code:"H-PR-002",label:" MRI/PET  ",keywords:["MRI","PET",""],stageFit:[3],dementiaFit:!0},{top:"",mid:"",sub:" ",code:"H-PR-003",label:"    ",keywords:["","","",""],stageFit:[2,3],dementiaFit:!0},{top:"",mid:" ",sub:" ",code:"L-DA-001",label:"   ",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["",""],dementiaFit:!0},{top:"",mid:" ",sub:" ",code:"L-DA-002",label:"  ()",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["",""],dementiaFit:!0},{top:"",mid:" ",sub:" ",code:"L-DA-003",label:" /   ",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["","",""],dementiaFit:!0},{top:"",mid:"",sub:"",code:"L-AD-001",label:"  (/)",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["",""],dementiaFit:!1},{top:"",mid:"",sub:"",code:"L-AD-002",label:"  /",keywords:["","",""],stageFit:[3],mciSeverityFit:[""],dementiaFit:!0},{top:"",mid:"",sub:" ",code:"L-EN-001",label:"   ",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["",""],dementiaFit:!0},{top:"",mid:"",sub:" ",code:"L-EN-002",label:"   ",keywords:["","",""],stageFit:[3],mciSeverityFit:[""],dementiaFit:!0},{top:"",mid:"",sub:"",code:"L-SP-001",label:"  ",keywords:["","",""],stageFit:[2,3],mciSeverityFit:["",""],dementiaFit:!0},{top:"",mid:"",sub:"",code:"L-SP-002",label:"   ",keywords:["","",""],stageFit:[2],mciSeverityFit:["",""],dementiaFit:!1},{top:"",mid:"",sub:"",code:"S-FA-001",label:"   ",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["","",""],dementiaFit:!0},{top:"",mid:"",sub:"",code:"S-FA-002",label:"    ",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["",""],dementiaFit:!0},{top:"",mid:"",sub:"",code:"S-WA-001",label:" /",keywords:["","","GPS",""],stageFit:[3],mciSeverityFit:[""],dementiaFit:!0},{top:"",mid:"",sub:"",code:"S-WA-002",label:"   ",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:[""],dementiaFit:!0},{top:"",mid:"",sub:"119",code:"S-EM-001",label:"119  ",keywords:["119","","",""],stageFit:[2,3],mciSeverityFit:["","",""],dementiaFit:!0},{top:"",mid:"",sub:"",code:"S-EM-002",label:"    ",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["",""],dementiaFit:!0},{top:"",mid:"",sub:"",code:"S-ME-001",label:"  (/)",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["","",""],dementiaFit:!0},{top:"",mid:"",sub:"",code:"S-ME-002",label:"    ",keywords:["","",""],stageFit:[2,3],mciSeverityFit:["",""],dementiaFit:!0},{top:"",mid:" ",sub:" ",code:"F-ED-001",label:"   (1)",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["","",""],dementiaFit:!0},{top:"",mid:" ",sub:" ",code:"F-ED-002",label:"   (2)",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["",""],dementiaFit:!0},{top:"",mid:" ",sub:" ",code:"F-ED-003",label:"    ",keywords:["","",""],stageFit:[2,3],mciSeverityFit:["",""],dementiaFit:!1},{top:"",mid:" ",sub:" ",code:"F-RC-001",label:"  ()",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["",""],dementiaFit:!0},{top:"",mid:" ",sub:" ",code:"F-RC-002",label:"  ",keywords:["","",""],stageFit:[2,3],mciSeverityFit:["","",""],dementiaFit:!0},{top:"",mid:"",sub:"",code:"F-CO-001",label:"  ",keywords:["","",""],stageFit:[2,3],mciSeverityFit:["","",""],dementiaFit:!0},{top:"",mid:"",sub:"",code:"F-CO-002",label:"/  ",keywords:["","","",""],stageFit:[3],mciSeverityFit:[""],dementiaFit:!0},{top:"",mid:"",sub:"",code:"F-DS-001",label:"  /",keywords:["","",""],stageFit:[3],dementiaFit:!0},{top:"",mid:"",sub:"",code:"F-DS-002",label:"  ",keywords:["","",""],stageFit:[2,3],dementiaFit:!0},{top:"",mid:"",sub:"",code:"F-DS-003",label:"   ",keywords:["","",""],stageFit:[3],dementiaFit:!0}];function Qwe(e){const t=new Set;for(const n of Iu)n.top===e&&t.add(n.mid);return Array.from(t)}function Xwe(e,t){return Iu.filter(n=>n.top===e&&n.mid===t)}function Jwe(e){if(!e.trim())return Iu;const t=e.toLowerCase().trim();return Iu.filter(n=>n.label.toLowerCase().includes(t)||n.code.toLowerCase().includes(t)||n.keywords.some(r=>r.toLowerCase().includes(t))||n.mid.toLowerCase().includes(t)||n.sub.toLowerCase().includes(t))}function Zwe(e){const t=[];e.stage===2&&(e.resultLabel==="MCI"?(e.mciSeverity===""?(yr(t,"H-PH-002","rule","","MCI        "),yr(t,"H-CG-001","rule","","   MCI    "),yr(t,"S-ME-001","rule","","   MCI     ")):e.mciSeverity===""?(yr(t,"H-CG-003","rule","","MCI  :      (  )"),yr(t,"H-PH-004","rule","","        "),yr(t,"F-ED-001","rule","","  MCI    (  )"),yr(t,"L-DA-001","rule","","      ")):e.mciSeverity===""&&(yr(t,"H-CG-003","rule","","MCI :   +     "),yr(t,"H-CG-005","rule","","/     (  )"),yr(t,"F-ED-002","rule","","        "),yr(t,"S-FA-001","rule","","     MCI   "),yr(t,"F-RC-001","rule","","         ")),e.riskTags.includes("")&&yr(t,"S-FA-002","rule","","         "),e.riskTags.includes("")&&yr(t,"S-WA-001","rule","","       "),e.riskTags.includes("")&&yr(t,"F-RC-001","rule","","        ")):e.resultLabel===""&&(yr(t,"H-PR-003","rule","","        "),yr(t,"F-DS-001","rule","","    (  )"),yr(t,"F-ED-002","rule","","     "))),e.stage===3&&(yr(t,"H-PR-001","rule","","Stage3       (  )"),yr(t,"H-PR-002","rule",""," MRI/PET    "),yr(t,"H-CG-003","rule","","       "),e.resultLabel===""&&(yr(t,"F-DS-001","rule","","      "),yr(t,"F-DS-002","rule","","    (  )")),e.riskTags.includes("")&&(yr(t,"S-EM-001","rule","","   119     "),yr(t,"L-DA-003","rule","","      (  )")),e.riskTags.includes("")&&yr(t,"S-ME-002","rule","","         "));const n=new Set;return t.filter(r=>n.has(r.code)?!1:(n.add(r.code),!0)).slice(0,5)}function yr(e,t,n,r,s){const i=Iu.find(o=>o.code===t);i&&e.push({code:i.code,label:i.label,top:i.top,mid:i.mid,reasonSummary:s,evidenceSnippets:[],source:n,confidenceLabel:r})}function eAe(e){const t=[];if(e.stage===2&&e.resultLabel==="MCI"&&e.mciSeverity===""){const n=Iu.find(r=>r.code==="H-CG-004");n&&t.push({code:n.code,label:n.label,top:n.top,mid:n.mid,reasonSummary:"MCI          (  )",evidenceSnippets:["   3.2: MCI      ,     ."," :     ,      ."],source:"rag",confidenceLabel:""})}if(e.stage===3){const n=Iu.find(r=>r.code==="F-CO-002");n&&t.push({code:n.code,label:n.label,top:n.top,mid:n.mid,reasonSummary:"Stage3         (  )",evidenceSnippets:["   :          ."],source:"rag",confidenceLabel:""})}return t.slice(0,3)}function tAe(e){const t=Zwe(e),n=eAe(e),r=new Set(t.map(i=>i.code)),s=[...t];for(const i of n)r.has(i.code)||(r.add(i.code),s.push(i));return s.slice(0,5)}let _7=0;function nAe(e,t,n,r,s,i){return _7+=1,{eventId:`AE-${Date.now()}-${_7}`,caseId:e,actorId:t,actorName:n,at:new Date().toISOString(),type:r,payload:s,sourceMeta:i}}const rAe={ADD_SELECTED:"  ",REMOVE_SELECTED:"  ",UPDATE_EXECUTION:"  ",PIN:" ",UNPIN:" ",ADD_FROM_RECO:"  ",HOLD_RECO:"  ",STATUS_CHANGE:" "},aAe=["","","","",""],sAe=["","","",""],dq={:"bg-blue-100 text-blue-700",:"bg-amber-100 text-amber-700",:"bg-green-100 text-green-700",:"bg-gray-100 text-gray-500"};function iAe(e){const t=new Date;return t.setDate(t.getDate()+e),`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`}const uq={:a.jsx(sJ,{className:"h-4 w-4"}),:a.jsx(xh,{className:"h-4 w-4"}),:a.jsx(nl,{className:"h-4 w-4"}),:a.jsx(ec,{className:"h-4 w-4"})};function oAe({caseId:e,stage:t,resultLabel:n,mciSeverity:r,riskTags:s=[],actorId:i="OP-001",actorName:o="",readOnly:l=!1}){const[c,u]=h.useState([]),[m,p]=h.useState(new Set),[g,x]=h.useState(new Set),[y,v]=h.useState(!1),[N,S]=h.useState(""),[j,C]=h.useState(""),[_,A]=h.useState(new Set),[T,R]=h.useState([]),[M,P]=h.useState(null),[$,w]=h.useState(!1),[U,X]=h.useState(new Set),[I,G]=h.useState("picker"),L=h.useMemo(()=>({stage:t,resultLabel:n,mciSeverity:r,riskTags:s}),[t,n,r,s]),H=h.useMemo(()=>tAe(L),[L]),F=h.useCallback((ye,_e,te)=>{const z=nAe(e,i,o,ye,_e,te);R(Ne=>[z,...Ne])},[e,i,o]),K=h.useCallback(ye=>{p(_e=>{const te=new Set(_e);if(te.has(ye))te.delete(ye),u(z=>z.filter(Ne=>Ne.code!==ye)),F("REMOVE_SELECTED",{code:ye});else{te.add(ye);const z=Iu.find(Ne=>Ne.code===ye);if(z){const Ne={code:z.code,label:z.label,top:z.top,mid:z.mid,mode:"",dueDate:"",assigneeId:i,assigneeName:o,notes:"",status:"",addedAt:new Date().toISOString(),addedSource:"manual"};u(me=>[...me,Ne]),F("ADD_SELECTED",{code:ye,label:z.label})}}return te})},[i,o,F]),ne=h.useCallback(ye=>{if(m.has(ye.code))return;p(te=>new Set(te).add(ye.code));const _e={code:ye.code,label:ye.label,top:ye.top,mid:ye.mid,mode:"",dueDate:"",assigneeId:i,assigneeName:o,notes:"",status:"",addedAt:new Date().toISOString(),addedSource:ye.source};u(te=>[...te,_e]),F("ADD_FROM_RECO",{code:ye.code,label:ye.label,source:ye.source},{source:ye.source,code:ye.code})},[m,i,o,F]),V=h.useCallback(ye=>{x(_e=>{const te=new Set(_e);return te.has(ye)?(te.delete(ye),F("UNPIN",{code:ye})):(te.add(ye),F("PIN",{code:ye})),te})},[F]),ee=h.useCallback(()=>{if(l)return;const ye=H.filter(_e=>!m.has(_e.code)).slice(0,3);if(ye.length!==0)for(const _e of ye)ne(_e)},[ne,m,H,l]),ae=h.useCallback(()=>{l||(u(ye=>ye.map((_e,te)=>{const z=t===2?n===""?"":n==="MCI"?te%2===0?"":"":"":te%3===0?"":te%3===1?"":"",Ne=_e.status===""?"":"",me=_e.dueDate||iAe(t===2?3+te:2+te);return{..._e,mode:z,status:Ne,dueDate:me}})),F("STATUS_CHANGE",{reason:"  ",stage:t,resultLabel:n}))},[F,l,n,t]),ue=h.useMemo(()=>c.filter(ye=>ye.addedSource&&ye.addedSource!=="manual").length,[c]),ce=h.useMemo(()=>c.filter(ye=>ye.status==="").length,[c]),Z=h.useMemo(()=>c.filter(ye=>ye.status==="").length,[c]),ie=h.useMemo(()=>c.filter(ye=>ye.status!==""&&!ye.dueDate).length,[c]),Se=h.useMemo(()=>{if(H.length===0)return 0;const ye=H.filter(_e=>m.has(_e.code)).length;return Math.round(ye/H.length*100)},[m,H]),fe=h.useMemo(()=>t===2?["1)      ","2)  // ","3)   "]:["1) /   ","2)   /  ","3)     "],[t]),Te=h.useCallback(ye=>{P({...ye}),w(!0)},[]),Pe=h.useCallback(ye=>{u(_e=>_e.map(te=>te.code===ye.code?ye:te)),F("UPDATE_EXECUTION",{code:ye.code,mode:ye.mode,status:ye.status,dueDate:ye.dueDate,assigneeName:ye.assigneeName}),w(!1),P(null)},[F]),oe=h.useMemo(()=>{if(!N.trim())return null;let ye=Jwe(N);return y&&(ye=ye.filter(_e=>g.has(_e.code))),ye},[N,y,g]),le=h.useCallback(ye=>{A(_e=>{const te=new Set(_e);return te.has(ye)?te.delete(ye):te.add(ye),te})},[]);return a.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-12 gap-3",children:[a.jsxs("div",{className:"xl:col-span-8 space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsxs(rr,{variant:"outline",className:"text-xs",children:["Stage ",t]}),a.jsx(rr,{variant:"outline",className:"text-xs",children:n}),r&&a.jsxs(rr,{variant:"outline",className:"text-xs",children:["MCI ",r]}),s.map(ye=>a.jsx(rr,{variant:"destructive",className:"text-xs",children:ye},ye))]}),a.jsxs("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-4",children:[a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[a.jsx("p",{className:"text-[11px] text-slate-500",children:" "}),a.jsxs("p",{className:"mt-1 text-sm font-bold text-slate-900",children:[Se,"%"]}),a.jsx("div",{className:"mt-1.5 h-1.5 w-full rounded-full bg-gray-200 overflow-hidden",children:a.jsx("div",{className:"h-full rounded-full bg-blue-500 transition-all",style:{width:`${Se}%`}})}),a.jsxs("p",{className:"mt-1 text-[10px] text-slate-500",children:[" ",H.length,"  ",ue," "]})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[a.jsx("p",{className:"text-[11px] text-slate-500",children:" "}),a.jsxs("p",{className:"mt-1 text-sm font-bold text-slate-900",children:[c.length===0?0:Math.round(ce/c.length*100),"%"]}),a.jsx("div",{className:"mt-1.5 h-1.5 w-full rounded-full bg-gray-200 overflow-hidden",children:a.jsx("div",{className:"h-full rounded-full bg-emerald-500 transition-all",style:{width:`${c.length===0?0:Math.round(ce/c.length*100)}%`}})}),a.jsxs("p",{className:"mt-1 text-[10px] text-slate-500",children:[" ",ce," /  ",Z]})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[a.jsx("p",{className:"text-[11px] text-slate-500",children:" "}),a.jsxs("p",{className:"mt-1 text-sm font-bold text-slate-900",children:[ie,""]}),a.jsx("p",{className:"text-[10px] text-slate-500",children:"/  "})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[a.jsx("p",{className:"text-[11px] text-slate-500",children:" "}),fe.map(ye=>a.jsx("p",{className:"mt-1 text-[10px] text-slate-600",children:ye},ye))]})]}),!l&&a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsxs(Nt,{size:"sm",variant:"outline",onClick:ee,children:[a.jsx(Wy,{className:"mr-1 h-3.5 w-3.5"}),"  3  "]}),a.jsxs(Nt,{size:"sm",variant:"outline",onClick:ae,children:[a.jsx(Zl,{className:"mr-1 h-3.5 w-3.5"}),"   "]})]}),a.jsx("div",{className:"flex gap-1 border-b border-gray-200 pb-0",children:["picker","selected","audit"].map(ye=>a.jsxs("button",{onClick:()=>G(ye),className:he("px-3 py-2 text-sm font-medium border-b-2 transition-colors",I===ye?"border-blue-600 text-blue-700":"border-transparent text-gray-500 hover:text-gray-700"),children:[ye==="picker"&&a.jsxs(a.Fragment,{children:[a.jsx(gR,{className:"inline h-3.5 w-3.5 mr-1"})," "]}),ye==="selected"&&a.jsxs(a.Fragment,{children:[a.jsx(Uf,{className:"inline h-3.5 w-3.5 mr-1"})," (",c.length,")"]}),ye==="audit"&&a.jsxs(a.Fragment,{children:[a.jsx(xa,{className:"inline h-3.5 w-3.5 mr-1"}),"  (",T.length,")"]})]},ye))}),I==="picker"&&a.jsx(lAe,{activeTop:j,setActiveTop:C,expandedMids:_,toggleMid:le,checkedCodes:m,toggleCheck:K,pinnedCodes:g,togglePin:V,showPinnedOnly:y,setShowPinnedOnly:v,searchQuery:N,setSearchQuery:S,searchResults:oe,readOnly:l}),I==="selected"&&a.jsx(cAe,{items:c,onOpenDrawer:Te,readOnly:l}),I==="audit"&&a.jsx(fAe,{events:T})]}),a.jsx("div",{className:"xl:col-span-4",children:a.jsx("div",{className:"sticky top-4",children:a.jsx(uAe,{recommendations:H,checkedCodes:m,heldCodes:U,onAdd:ne,onHold:ye=>{X(_e=>new Set(_e).add(ye)),F("HOLD_RECO",{code:ye})},readOnly:l})})}),$&&M&&a.jsx(dAe,{item:M,onSave:Pe,onClose:()=>{w(!1),P(null)},readOnly:l})]})}function lAe({activeTop:e,setActiveTop:t,expandedMids:n,toggleMid:r,checkedCodes:s,toggleCheck:i,pinnedCodes:o,togglePin:l,showPinnedOnly:c,setShowPinnedOnly:u,searchQuery:m,setSearchQuery:p,searchResults:g,readOnly:x}){const y=h.useRef(null);return a.jsxs(In,{children:[a.jsxs(Cr,{className:"pb-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(Tr,{className:"text-sm flex items-center gap-1.5",children:[a.jsx(gR,{className:"h-4 w-4 text-blue-600"})," "]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("button",{onClick:()=>u(!c),className:he("flex items-center gap-1 text-xs px-2 py-1 rounded-md transition-colors",c?"bg-amber-100 text-amber-700":"text-gray-500 hover:bg-gray-100"),children:[c?a.jsx(nX,{className:"h-3 w-3"}):a.jsx(aX,{className:"h-3 w-3"})," "]})})]}),a.jsxs("div",{className:"relative mt-2",children:[a.jsx(Sx,{className:"absolute left-2.5 top-2.5 h-3.5 w-3.5 text-gray-400"}),a.jsx($n,{value:m,onChange:v=>p(v.target.value),placeholder:", ,  ...",className:"pl-8 h-8 text-xs"}),m&&a.jsx("button",{onClick:()=>p(""),className:"absolute right-2 top-2 text-gray-400 hover:text-gray-600",children:a.jsx(Mu,{className:"h-3.5 w-3.5"})})]})]}),a.jsx(Dn,{className:"pt-0",children:g!==null?a.jsxs("div",{className:"mt-2",children:[a.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:[g.length,"  "]}),a.jsx("div",{ref:y,className:"max-h-[400px] overflow-y-auto space-y-0.5 pr-1",children:g.length===0?a.jsx("div",{className:"text-center text-xs text-gray-400 py-8",children:"  "}):g.map(v=>a.jsx(C7,{item:v,checked:s.has(v.code),pinned:o.has(v.code),onToggle:()=>i(v.code),onPin:()=>l(v.code),readOnly:x,showBreadcrumb:!0},v.code))})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"grid grid-cols-4 gap-1.5 mt-2 mb-3",children:cq.map(v=>{const N=e===v;return a.jsxs("button",{onClick:()=>t(v),className:he("flex flex-col items-center gap-1 py-2.5 rounded-lg text-xs font-medium transition-all border",N?"border-blue-300 bg-blue-50 text-blue-700 shadow-sm":"border-gray-200 bg-white text-gray-600 hover:bg-gray-50"),children:[a.jsx("span",{className:he("p-1.5 rounded-md",N?"bg-blue-100":"bg-gray-100"),children:uq[v]}),v]},v)})}),a.jsx("div",{ref:y,className:"max-h-[400px] overflow-y-auto space-y-1 pr-1",children:Qwe(e).map(v=>{const N=n.has(v);let S=Xwe(e,v);return c&&(S=S.filter(j=>o.has(j.code))),a.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[a.jsxs("button",{onClick:()=>r(v),className:"w-full flex items-center justify-between px-3 py-2 text-xs font-semibold text-gray-700 bg-gray-50 hover:bg-gray-100 transition-colors","aria-expanded":N,children:[a.jsxs("span",{className:"flex items-center gap-1.5",children:[N?a.jsx(Ds,{className:"h-3.5 w-3.5"}):a.jsx(ji,{className:"h-3.5 w-3.5"}),v,a.jsx(rr,{variant:"secondary",className:"text-[10px] ml-1",children:S.length})]}),S.some(j=>s.has(j.code))&&a.jsxs(rr,{className:"text-[10px] bg-blue-600",children:[S.filter(j=>s.has(j.code)).length," "]})]}),N&&a.jsx("div",{className:"border-t border-gray-100 divide-y divide-gray-50",children:S.length===0?a.jsx("div",{className:"text-xs text-gray-400 text-center py-3",children:c?"   ":" "}):S.map(j=>a.jsx(C7,{item:j,checked:s.has(j.code),pinned:o.has(j.code),onToggle:()=>i(j.code),onPin:()=>l(j.code),readOnly:x},j.code))})]},v)})})]})})]})}function C7({item:e,checked:t,pinned:n,onToggle:r,onPin:s,readOnly:i,showBreadcrumb:o=!1}){return a.jsxs("div",{className:he("flex items-center gap-2 px-3 py-2 text-xs transition-colors group",t?"bg-blue-50/60":"hover:bg-gray-50"),children:[!i&&a.jsx("button",{onClick:r,className:he("w-4 h-4 rounded border flex items-center justify-center shrink-0 transition-colors",t?"bg-blue-600 border-blue-600 text-white":"border-gray-300 hover:border-blue-400"),"aria-label":`${e.label} ${t?" ":""}`,children:t&&a.jsx(Uf,{className:"h-3 w-3"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-medium text-gray-800 truncate",children:e.label}),o&&a.jsxs("div",{className:"text-[10px] text-gray-400 truncate mt-0.5",children:[e.top,"  ",e.mid,"  ",e.sub]})]}),a.jsx("span",{className:"text-[10px] text-gray-400 font-mono shrink-0",children:e.code}),a.jsx("button",{onClick:s,className:he("p-0.5 rounded transition-colors shrink-0",n?"text-amber-500":"text-gray-300 opacity-0 group-hover:opacity-100"),"aria-label":`${e.label} ${n?" ":" "}`,children:n?a.jsx(nZ,{className:"h-3 w-3 fill-current"}):a.jsx(eZ,{className:"h-3 w-3"})})]})}function cAe({items:e,onOpenDrawer:t,readOnly:n}){if(e.length===0)return a.jsx(In,{children:a.jsxs(Dn,{className:"py-8 text-center",children:[a.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-blue-50 flex items-center justify-center mb-3",children:a.jsx(gR,{className:"h-6 w-6 text-blue-400"})}),a.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"   "}),a.jsxs("p",{className:"text-xs text-gray-400 mt-1.5 max-w-[280px] mx-auto",children:['" "    ,',a.jsx("br",{}),"        ."]}),a.jsx("div",{className:"flex items-center justify-center gap-2 mt-4",children:a.jsxs("div",{className:"inline-flex items-center gap-1.5 rounded-md border border-blue-200 bg-blue-50 px-3 py-1.5 text-[11px] text-blue-700",children:[a.jsx(Wy,{className:"h-3.5 w-3.5"}),"       "]})})]})});const r=e.reduce((s,i)=>((s[i.top]??=[]).push(i),s),{});return a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:[a.jsxs("span",{children:[" ",e.length," "]}),a.jsx("span",{children:""}),a.jsxs("span",{className:"text-green-600",children:[e.filter(s=>s.status==="").length," "]}),a.jsxs("span",{className:"text-amber-600",children:[e.filter(s=>s.status==="").length," "]}),a.jsxs("span",{className:"text-blue-600",children:[e.filter(s=>s.status==="").length," "]}),a.jsxs("span",{className:"text-gray-400",children:[e.filter(s=>s.status==="").length," "]})]}),cq.filter(s=>r[s]?.length).map(s=>a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[a.jsx("span",{className:"p-1 rounded bg-gray-100",children:uq[s]}),a.jsx("span",{className:"text-xs font-semibold text-gray-700",children:s}),a.jsx(rr,{variant:"secondary",className:"text-[10px]",children:r[s].length})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:r[s].map(i=>a.jsxs("button",{onClick:()=>!n&&t(i),className:he("text-left border rounded-lg p-3 transition-all",n?"cursor-default":"hover:shadow-md hover:border-blue-300 cursor-pointer","bg-white border-gray-200"),children:[a.jsxs("div",{className:"flex items-start justify-between mb-1.5",children:[a.jsx("span",{className:"text-xs font-semibold text-gray-800 flex-1 min-w-0 truncate",children:i.label}),a.jsx(rr,{className:he("text-[10px] shrink-0 ml-2",dq[i.status]),children:i.status})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-[11px] text-gray-500",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Bf,{className:"h-3 w-3"}),i.mode]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(lc,{className:"h-3 w-3"}),i.assigneeName]}),i.dueDate&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(fX,{className:"h-3 w-3"}),i.dueDate]}),i.orgLink?.name&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Vy,{className:"h-3 w-3"}),i.orgLink.name]})]}),i.notes&&a.jsxs("div",{className:"text-[10px] text-gray-400 mt-1.5 truncate",children:[" ",i.notes]}),i.addedSource&&i.addedSource!=="manual"&&a.jsxs("div",{className:"text-[10px] text-purple-500 mt-1",children:[a.jsx(Wy,{className:"inline h-3 w-3 mr-0.5"}),i.addedSource==="rule"?"   ":"   "," "]}),!n&&a.jsxs("div",{className:"text-[10px] mt-2 text-blue-600 font-medium flex items-center gap-1",children:[a.jsx(es,{className:"h-3 w-3"}),"  "]})]},i.code))})]},s))]})}function dAe({item:e,onSave:t,onClose:n,readOnly:r}){const[s,i]=h.useState({...e}),o=(c,u)=>{i(m=>({...m,[c]:u}))},l=(c,u)=>{i(m=>({...m,orgLink:{...m.orgLink,name:m.orgLink?.name??"",[c]:u}}))};return a.jsxs("div",{className:"fixed inset-0 z-50 flex justify-end",children:[a.jsx("div",{className:"absolute inset-0 bg-black/30",onClick:n}),a.jsxs("div",{className:"relative w-full max-w-md bg-white shadow-xl flex flex-col animate-in slide-in-from-right duration-200",children:[a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b bg-gray-50",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:"  "}),a.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:s.label})]}),a.jsx("button",{onClick:n,className:"p-1 rounded hover:bg-gray-200 text-gray-500",children:a.jsx(Mu,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-3 space-y-4",children:[a.jsxs("div",{children:[a.jsx(ou,{children:" "}),a.jsx("div",{className:"text-xs text-gray-600 bg-gray-50 px-2 py-1.5 rounded font-mono",children:s.code})]}),a.jsxs("div",{children:[a.jsx(ou,{children:""}),a.jsxs("div",{className:"text-xs text-gray-600",children:[s.top,"  ",s.mid]})]}),a.jsxs("div",{children:[a.jsx(ou,{children:" "}),a.jsx("div",{className:"grid grid-cols-5 gap-1 mt-1",children:aAe.map(c=>a.jsx("button",{onClick:()=>!r&&o("mode",c),disabled:r,className:he("text-xs py-1.5 rounded-md border transition-colors text-center",s.mode===c?"bg-blue-600 text-white border-blue-600":"border-gray-200 text-gray-600 hover:bg-gray-50"),children:c},c))})]}),a.jsxs("div",{children:[a.jsx(ou,{children:""}),a.jsx("div",{className:"grid grid-cols-4 gap-1 mt-1",children:sAe.map(c=>a.jsx("button",{onClick:()=>!r&&o("status",c),disabled:r,className:he("text-xs py-1.5 rounded-md border transition-colors text-center",s.status===c?dq[c]+" border-transparent font-medium":"border-gray-200 text-gray-600 hover:bg-gray-50"),children:c},c))})]}),a.jsxs("div",{children:[a.jsx(ou,{children:""}),a.jsx($n,{value:s.assigneeName,onChange:c=>o("assigneeName",c.target.value),className:"h-8 text-xs mt-1",disabled:r})]}),a.jsxs("div",{children:[a.jsx(ou,{children:""}),a.jsx($n,{type:"date",value:s.dueDate,onChange:c=>o("dueDate",c.target.value),className:"h-8 text-xs mt-1",disabled:r})]}),a.jsxs("div",{children:[a.jsx(ou,{children:" "}),a.jsxs("div",{className:"space-y-1.5 mt-1",children:[a.jsx($n,{placeholder:"",value:s.orgLink?.name??"",onChange:c=>l("name",c.target.value),className:"h-8 text-xs",disabled:r}),a.jsx($n,{placeholder:"",value:s.orgLink?.phone??"",onChange:c=>l("phone",c.target.value),className:"h-8 text-xs",disabled:r}),a.jsx($n,{placeholder:"",value:s.orgLink?.note??"",onChange:c=>l("note",c.target.value),className:"h-8 text-xs",disabled:r})]})]}),a.jsxs("div",{children:[a.jsx(ou,{children:" (/)"}),a.jsx(Xo,{value:s.notes,onChange:c=>o("notes",c.target.value),className:"text-xs mt-1 min-h-[60px]",placeholder:" ...",disabled:r})]})]}),!r&&a.jsxs("div",{className:"flex items-center justify-end gap-2 px-4 py-3 border-t bg-gray-50",children:[a.jsx(Nt,{variant:"outline",size:"sm",onClick:n,children:""}),a.jsx(Nt,{size:"sm",onClick:()=>t(s),children:""})]})]})]})}function ou({children:e}){return a.jsx("label",{className:"text-xs font-medium text-gray-700",children:e})}function uAe({recommendations:e,checkedCodes:t,heldCodes:n,onAdd:r,onHold:s,readOnly:i}){const[o,l]=h.useState(new Set),c=u=>{l(m=>{const p=new Set(m);return p.has(u)?p.delete(u):p.add(u),p})};return a.jsxs(In,{className:"border-purple-200",children:[a.jsxs(Cr,{className:"pb-2",children:[a.jsxs(Tr,{className:"text-sm flex items-center gap-1.5",children:[a.jsx(Wy,{className:"h-4 w-4 text-purple-600"}),"   "]}),a.jsxs("div",{className:"flex items-start gap-1.5 bg-amber-50 border border-amber-200 rounded-md px-2.5 py-2 mt-2",children:[a.jsx(wm,{className:"h-3.5 w-3.5 text-amber-600 mt-0.5 shrink-0"}),a.jsx("p",{className:"text-[11px] text-amber-800 leading-relaxed",children:" ,      ."})]})]}),a.jsx(Dn,{className:"pt-0 space-y-2",children:e.length===0?a.jsx("div",{className:"text-center text-xs text-gray-400 py-6",children:"      "}):e.map(u=>{const m=t.has(u.code),p=n.has(u.code),g=o.has(u.code);return a.jsxs("div",{className:he("border rounded-lg p-2.5 transition-colors",m?"border-green-300 bg-green-50/50":p?"border-gray-200 bg-gray-50 opacity-60":"border-gray-200 bg-white"),children:[a.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[a.jsx("span",{className:"text-xs font-semibold text-gray-800 flex-1",children:u.label}),a.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[a.jsx(rr,{variant:"outline",className:he("text-[10px]",u.source==="rule"?"border-blue-300 text-blue-600":"border-purple-300 text-purple-600"),children:u.source==="rule"?"":" "}),a.jsx(rr,{variant:"outline",className:he("text-[10px]",u.confidenceLabel===""?"border-green-300 text-green-600":u.confidenceLabel===""?"border-amber-300 text-amber-600":"border-gray-300 text-gray-500"),children:u.confidenceLabel})]})]}),a.jsx("p",{className:"text-[11px] text-gray-600 leading-relaxed mb-2",children:u.reasonSummary}),u.evidenceSnippets.length>0&&a.jsxs("div",{className:"mb-2",children:[a.jsxs("button",{onClick:()=>c(u.code),className:"text-[10px] text-purple-600 hover:underline flex items-center gap-0.5",children:[g?a.jsx(id,{className:"h-3 w-3"}):a.jsx(Ds,{className:"h-3 w-3"}),"  "]}),g&&a.jsx("div",{className:"mt-1.5 space-y-1.5",children:u.evidenceSnippets.map((x,y)=>a.jsx("div",{className:"bg-gray-50 border border-gray-100 rounded px-2 py-1.5 text-[10px] text-gray-600 leading-relaxed",children:x},y))})]}),!i&&!m&&!p&&a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsxs(Nt,{size:"sm",variant:"outline",className:"text-[11px] h-7",onClick:()=>r(u),children:[a.jsx(UU,{className:"h-3 w-3 mr-0.5"}),"  "]}),a.jsx(Nt,{size:"sm",variant:"ghost",className:"text-[11px] h-7 text-gray-400",onClick:()=>s(u.code),children:""})]}),m&&a.jsxs("div",{className:"text-[10px] text-green-600 flex items-center gap-1",children:[a.jsx(Uf,{className:"h-3 w-3"}),"  "]}),p&&!m&&a.jsx("div",{className:"text-[10px] text-gray-400 flex items-center gap-1",children:"  (  )"})]},u.code)})})]})}function fAe({events:e}){return e.length===0?a.jsx(In,{children:a.jsxs(Dn,{className:"py-8 text-center",children:[a.jsx(xa,{className:"h-8 w-8 text-gray-300 mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-gray-500",children:"  "}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:" /   "})]})}):a.jsxs(In,{children:[a.jsx(Cr,{className:"pb-2",children:a.jsxs(Tr,{className:"text-sm flex items-center gap-1.5",children:[a.jsx(xa,{className:"h-4 w-4 text-gray-600"}),"  ",a.jsxs(rr,{variant:"secondary",className:"text-[10px] ml-1",children:[e.length,""]})]})}),a.jsx(Dn,{className:"pt-0",children:a.jsx("div",{className:"relative space-y-0 max-h-[400px] overflow-y-auto",children:e.map((t,n)=>a.jsxs("div",{className:"flex gap-3 pb-3",children:[a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:he("w-2 h-2 rounded-full mt-1.5 shrink-0",t.type==="ADD_SELECTED"||t.type==="ADD_FROM_RECO"?"bg-blue-500":t.type==="UPDATE_EXECUTION"?"bg-amber-500":t.type==="REMOVE_SELECTED"?"bg-red-500":"bg-gray-400")}),n<e.length-1&&a.jsx("div",{className:"flex-1 w-px bg-gray-200 mt-1"})]}),a.jsxs("div",{className:"flex-1 min-w-0 pb-1",children:[a.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[a.jsx("span",{className:"font-medium text-gray-800",children:rAe[t.type]}),a.jsx("span",{className:"text-gray-400",children:""}),a.jsx("span",{className:"text-gray-400",children:t.actorName})]}),a.jsx("div",{className:"text-[10px] text-gray-400 mt-0.5",children:new Date(t.at).toLocaleString("ko-KR")}),t.payload&&a.jsx("div",{className:"text-[10px] text-gray-500 mt-1 bg-gray-50 rounded px-2 py-1",children:Object.entries(t.payload).map(([r,s])=>a.jsxs("span",{className:"mr-2",children:[r,": ",a.jsx("strong",{children:String(s)})]},r))}),t.sourceMeta&&a.jsxs("div",{className:"text-[10px] text-purple-500 mt-0.5",children:[": ",t.sourceMeta.source==="rule"?" ":" "]})]})]},t.eventId))})})]})}function f_(e){if(e==null||Number.isNaN(e))return 0;const t=e<=1?e*100:e;return Math.max(0,Math.min(100,Math.round(t)))}function pAe(e){const t={NORMAL:f_(e?.NORMAL),MCI:f_(e?.MCI),AD:f_(e?.AD)},n=t.NORMAL+t.MCI+t.AD;return n<=0?{NORMAL:0,MCI:0,AD:0,hasData:!1}:{NORMAL:Math.round(t.NORMAL/n*100),MCI:Math.round(t.MCI/n*100),AD:Math.round(t.AD/n*100),hasData:!0}}function mAe(e){return e<40?"":e<70?"":""}function hAe(e){return e===""?82:e===""?34:58}function gAe(e){return e===""?"":e===""?"":""}function fq({probs:e,predictedLabel:t,mciSeverity:n,mciScore:r}){const s=h.useMemo(()=>pAe(e),[e]),i=[{key:"NORMAL",label:"NORMAL",value:s.NORMAL,fill:"var(--risk-low)",textColor:"var(--risk-low)"},{key:"MCI",label:"MCI",value:s.MCI,fill:"var(--chart-2)",textColor:"var(--chart-2)"},{key:"AD",label:"AD",value:s.AD,fill:"var(--risk-high)",textColor:"var(--risk-high)"}],o=i.reduce((g,x)=>x.value>g.value?x:g,i[0]),l=t===""?"NORMAL":t===""?"AD":t==="MCI"?"MCI":void 0,c=Math.max(0,Math.min(100,Math.round(r??hAe(n)))),u=mAe(c),m=gAe(n),p=t==="MCI";return a.jsxs("section",{className:"rounded-xl border border-border bg-card p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("h4",{className:"text-sm font-bold text-foreground",children:"Stage2   "}),a.jsx("span",{className:"rounded-full border border-border bg-card px-2 py-0.5 text-[11px] font-semibold text-muted-foreground",title:"   .  .",children:"  ( )"})]}),s.hasData?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"mt-3 overflow-hidden rounded-lg border border-border bg-card",children:a.jsx("div",{className:"flex h-10 w-full",children:i.map(g=>{const x=`${g.value}%`,y=g.key===o.key,v=l===g.key;return a.jsxs("div",{title:`${g.label}: ${g.value}%`,className:he("relative flex min-w-0 items-center justify-center px-1 text-[11px] font-bold text-white",y&&"ring-2 ring-card/80",v&&"outline outline-2 outline-foreground/60 outline-offset-[-2px]"),style:{width:x,backgroundColor:g.fill},children:[g.value>=9?`${g.label} ${g.value}%`:`${g.value}%`,y?a.jsx("span",{className:"absolute right-1 top-1 rounded bg-card/85 px-1 py-[1px] text-[9px] font-bold text-foreground",children:" "}):null]},g.key)})})}),a.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:i.map(g=>a.jsxs("span",{className:"rounded border border-border bg-card px-2 py-1 text-[11px] font-semibold",style:{color:g.textColor},children:[g.label," ",g.value,"%"]},`legend-${g.key}`))})]}):a.jsx("p",{className:"mt-3 rounded-md border border-border bg-card px-3 py-2 text-[11px] text-muted-foreground",children:"   ."}),p?a.jsxs("div",{className:"mt-4 rounded-lg border border-border bg-muted p-3",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("p",{className:"text-xs font-semibold text-foreground",children:"MCI   (ANN)"}),a.jsxs("span",{className:"rounded-full border border-border bg-card px-2 py-0.5 text-[10px] font-semibold text-primary",title:":  , : /  , :   +  ",children:[" : ",u]})]}),a.jsxs("div",{className:"mt-2",children:[a.jsx("div",{className:"relative h-3 rounded-full",style:{background:"linear-gradient(to right, var(--risk-low), var(--risk-medium), var(--risk-high))"},children:a.jsx("span",{className:"absolute top-1/2 h-4 w-4 -translate-y-1/2 rounded-full border-2 border-card bg-foreground shadow",style:{left:`calc(${c}% - 8px)`},"aria-label":`MCI  ${c}`})}),a.jsxs("div",{className:"mt-1 flex items-center justify-between text-[10px] text-muted-foreground",children:[a.jsx("span",{children:"0 ()"}),a.jsx("span",{children:"40 ()"}),a.jsx("span",{children:"70 ()"}),a.jsx("span",{children:"100"})]}),a.jsxs("p",{className:"mt-1 text-[11px] font-semibold text-foreground",children:[" ",c,"   ",m]})]})]}):null]})}function Af({stage:e,missing:t,onOpenStep:n,className:r}){const s=t.slice(0,3);return a.jsx("section",{className:he("rounded-xl border border-amber-200 bg-amber-50 p-4",r),children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(ea,{size:16,className:"mt-0.5 text-amber-700"}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsxs("p",{className:"text-sm font-bold text-amber-900",children:["Stage ",e,"  "]}),a.jsx("p",{className:"mt-1 text-xs text-amber-800",children:"       .      ."}),s.length>0?a.jsx("ul",{className:"mt-2 space-y-1 text-[11px] text-amber-800",children:s.map(i=>a.jsxs("li",{children:["- ",i]},i))}):null,a.jsx("div",{className:"mt-3",children:a.jsxs("button",{type:"button",onClick:n,className:"inline-flex items-center gap-1 rounded-md border border-amber-300 bg-white px-2.5 py-1 text-[11px] font-semibold text-amber-800 hover:bg-amber-100",children:["   ",a.jsx(ji,{size:12})]})})]})]})})}function pq(e,t){return{specialist:t.specialist,mmse:t.mmse&&e==="HOSPITAL_REFERRAL",cdrOrGds:t.cdrOrGds,neuroCognitive:t.neuroCognitive}}function mq(e,t,n){const r=pq(t,n),s=[],i=typeof e.mmse=="number"&&Number.isFinite(e.mmse),o=typeof e.cdr=="number"&&Number.isFinite(e.cdr);return r.mmse&&!i&&s.push("mmse"),r.cdrOrGds&&!o&&s.push("cdr"),r.neuroCognitive&&!e.neuroCognitiveType&&s.push("neuro"),r.specialist&&!e.specialist&&s.push("specialist"),s}function Mp(e,t,n,r){const s={};if(!r?.skipTestChecks){const i=mq(e,t,n);for(const o of i)o==="mmse"&&(s.mmse="MMSE  ."),o==="cdr"&&(s.cdr="CDR  GDS  ."),o==="neuro"&&(s.neuro="  ."),o==="specialist"&&(s.specialist="    .");typeof e.mmse=="number"&&Number.isFinite(e.mmse)&&(e.mmse<0||e.mmse>30)&&(s.mmse="MMSE  0~30  ."),typeof e.cdr=="number"&&Number.isFinite(e.cdr)&&(e.cdr<0||e.cdr>7)&&(s.cdr="CDR/GDS  0~7  .")}return r?.strategyMemo!=null&&r.strategyMemo.trim().length<20&&(s.step1StrategyMemo="  20  ."),r?.consentConfirmed===!1&&(s.step1Consent="Stage1 /   ."),r?.rationale!=null&&r.rationale.trim().length===0&&(s.rationale="  ."),r?.recommendedLabel&&r?.selectedLabel&&r.recommendedLabel!==r.selectedLabel&&(!r.overrideReason||r.overrideReason.trim().length===0)&&(s.overrideReason="     ."),r?.requireNextStep&&!r?.hasNextStep&&(s.nextStep="  1 ."),s}function xAe(e,t,n){return mq(e,t,n).length}function p_(e){const t=typeof e.mmse=="number"?e.mmse:null,n=typeof e.cdr=="number"?e.cdr:null;return t!=null&&t<=20||n!=null&&n>=2?"":t!=null&&t<=25||n!=null&&n>=.5?"MCI":""}function bAe(e,t,n){return t?n?e>0?"PARTIAL":"VERIFY_NEEDED":"REQUESTED":"WAITING"}function ay(e,t,n){return Number.isNaN(e)?t:Math.max(t,Math.min(n,e))}function yAe(e){let t=0;for(let n=0;n<e.length;n+=1)t=Math.imul(31,t)+e.charCodeAt(n)|0;return t>>>0}function vAe(e){const t=e.minDurationSec??30,n=e.maxDurationSec??180,r=Math.max(5,Math.min(t,n)),s=Math.max(r,n),i=yAe(`${e.caseId??"CASE"}:${e.stage??"stage"}:${e.startedAt??"start"}`);return r+i%(s-r+1)}function sy(e,t,n,r,s){return e?{status:"DONE",reason:n}:t?{status:"READY",reason:r}:{status:"TODO",reason:s}}function NAe(e){const t=[],n=(r,s,i)=>{t.push({type:r,at:s.at,sourceType:s.type,summary:i??("summary"in s?s.summary:void 0)})};for(const r of e){if(r.type==="STAGE2_PLAN_CONFIRMED"){n("PLAN_CONFIRMED",r);continue}if(r.type==="RISK_REVIEWED"){n("PLAN_CONFIRMED",r);continue}if(r.type==="STAGE2_RESULTS_RECORDED"){n("RESULT_RECEIVED",r),(r.summary.includes("")||r.summary.includes("")||r.summary.includes(""))&&n("RESULT_VALIDATED",r),r.summary.includes("  ")&&n("INFERENCE_COMPLETED",r);continue}if(r.type==="STAGE2_STEP2_AUTOFILL_APPLIED"){n("RESULT_RECEIVED",r);continue}if(r.type==="STAGE2_MANUAL_EDIT_APPLIED"){n("RESULT_RECEIVED",r),n("RESULT_VALIDATED",r);continue}if(r.type==="DIFF_RESULT_APPLIED"||r.type==="REEVAL_COMPLETED"){n("RESULT_RECEIVED",r),n("RESULT_VALIDATED",r);continue}if(r.type==="CALL_ATTEMPT"){n("RESULT_RECEIVED",r,r.note);continue}if(r.type==="OUTCOME_RECORDED"){n("RESULT_VALIDATED",r,r.note);continue}if(r.type==="STAGE2_CLASS_CONFIRMED"){n("CLASSIFICATION_CONFIRMED",r);continue}if(r.type==="STAGE2_NEXT_STEP_SET"){n("NEXT_STEP_DECIDED",r);continue}if(r.type==="LINKAGE_APPROVED"||r.type==="LINKAGE_COMPLETED"){n("REFERRAL_CONFIRMED",r);continue}if(r.type==="PLAN_UPDATED"||r.type==="NEXT_TRACKING_SET"){n("NEXT_STEP_DECIDED",r);continue}if(r.type==="INFERENCE_REQUESTED"||r.type==="INFERENCE_STARTED"||r.type==="INFERENCE_PROGRESS"||r.type==="INFERENCE_COMPLETED"||r.type==="INFERENCE_FAILED"){r.type==="INFERENCE_REQUESTED"&&n("INFERENCE_REQUESTED",r),r.type==="INFERENCE_STARTED"&&n("INFERENCE_STARTED",r),r.type==="INFERENCE_PROGRESS"&&n("INFERENCE_PROGRESS",r),r.type==="INFERENCE_COMPLETED"&&n("INFERENCE_COMPLETED",r);continue}}return t}function iy(e,t){const n=G=>e.some(L=>L.type===G),r=t.stage,s=!!(t.hasPlanConfirmed||n("PLAN_CONFIRMED")),i=!!(t.hasResultReceived||n("RESULT_RECEIVED")),o=!!(t.hasResultValidated||n("RESULT_VALIDATED")),l=n("INFERENCE_REQUESTED"),c=n("INFERENCE_STARTED"),u=n("INFERENCE_PROGRESS"),m=!!(t.hasModelResult||n("INFERENCE_COMPLETED")),p=!!(t.classificationConfirmed||n("CLASSIFICATION_CONFIRMED")),g=!!(t.nextStepDecided||n("NEXT_STEP_DECIDED")),x=!!(t.referralConfirmed||n("REFERRAL_CONFIRMED")),v=s||(i||o||l||c||u||m||p||g||x),N=!s&&v,S=i||o||l||c||u||m||p||g||x,j=o||m||p||g||x,C=!o&&j,_=t.inferenceStatus==="RUNNING"||c||u||l&&!m,T={stage1:["  "," /","/","  "],stage2:["  ","  /"," ","  "],stage3:[" / ","  /"," ","/  "]}[r],R=sy(v,!1,N?`${T[0]}     .`:`${T[0]}  .`,`${T[0]}  `,`${T[0]}   .`),M=sy(j,S,C?`${T[1]}      .`:`${T[1]}  .`,`${T[1]}   .`,`${T[1]}   .`),P=sy(p,m||_||l,`${T[2]}   .`,m?"    (READY) .":_?"  .    .":"     .",`${T[2]}     .`),$=sy(g,x,`${T[3]} .`,"/    .",`${T[3]}   .`),w=[{id:"STEP1",label:T[0],...R},{id:"STEP2",label:T[1],...M},{id:"STEP3",label:T[2],...P,requiresHumanApproval:!0},{id:"STEP4",label:T[3],...$,requiresHumanApproval:!0}],U=w.filter(G=>G.status==="DONE").length,X=w.filter(G=>G.status==="READY").length,I=[];return S&&w[1].status==="TODO"&&I.push("    Step2 TODO."),m&&w[2].status==="TODO"&&I.push("   Step3 TODO."),p&&w[2].status!=="DONE"&&I.push("    Step3 DONE ."),g&&w[3].status!=="DONE"&&I.push("     Step4 DONE ."),t.storedDoneCount!=null&&t.storedDoneCount!==U&&I.push(`  (${t.storedDoneCount}) (${U}) .`),t.storedOpsStatus&&U===0&&X===0&&(v||S||m||p)&&I.push(`  (${t.storedOpsStatus})     .`),{stage:r,steps:w,doneCount:U,readyCount:X,totalCount:w.length,mismatch:I.length>0,mismatchReasons:I}}function T7(e){const t=e.jobStatus??"PENDING",n=!!e.hasResult,r=e.startedAt??void 0,s=e.updatedAt??void 0,i=e.completedAt??void 0;if(n||t==="DONE")return{jobStatus:"DONE",progress:100,etaSeconds:0,startedAt:r,updatedAt:s,completedAt:i,buffered:!1};if(t==="FAILED")return{jobStatus:"FAILED",progress:ay(e.progress??0,0,99),etaSeconds:null,startedAt:r,updatedAt:s,completedAt:i,buffered:!1};const o=vAe(e);if(!r)return{jobStatus:t,progress:t==="RUNNING"?6:2,etaSeconds:e.etaSeconds??o,startedAt:r,updatedAt:s,completedAt:i,buffered:!0};const l=new Date(r).getTime(),c=e.nowMs??Date.now(),u=Number.isNaN(l)?0:Math.max(0,Math.round((c-l)/1e3)),m=ay(u/o,0,1),p=1-Math.exp(-3.2*m),g=m>=1?95:ay(5+p*88,5,95),x=ay(Math.max(e.progress??0,g),0,99),y=e.etaSeconds??Math.max(5,o-u);return{jobStatus:t,progress:x,etaSeconds:y,startedAt:r,updatedAt:s,completedAt:i,buffered:e.progress==null||e.etaSeconds==null}}function CO(e){if(e==null||Number.isNaN(e))return"ETA  ";if(e<=0)return" ";const t=Math.floor(e/60),n=e%60;return t<=0?`${n}`:`${t} ${n.toString().padStart(2,"0")}`}const SAe=new Set(["CASE-2026-175"]),EAe="",jAe=new Set(["CASE-2026-175"]),hq=new Set(["CASE-2026-175","CASE-2026-275","CASE-2026-375"]),wAe=80,AAe="L2";function _Ae(e,t,n){const r=typeof t=="string"?t.toUpperCase():"";return r==="AD"?"AD":r==="MCI"?typeof n=="number"&&n>=70?"HIGH":"MID":r==="NORMAL"?"LOW":typeof n=="number"?n>=82?"AD":n>=70?"HIGH":n>=40?"MID":"LOW":e?.risk===""?"HIGH":e?.risk===""?"MID":"LOW"}function gq(e,t){return t==="LOW"?{caseId:e,source:"SEEDED",syncedAt:ut(),mmse:26,gds:2,cogTestType:"CERAD-K",specialistOpinionStatus:"MISSING",receivedMeta:{linkageStatus:"WAITING",providerName:" "},missingRequiredCount:0,filledFields:["mmse","gds","cogTestType","specialistOpinionStatus"]}:t==="MID"?{caseId:e,source:"SEEDED",syncedAt:ut(),mmse:23,gds:4,cogTestType:"SNSB-II",specialistOpinionStatus:"MISSING",receivedMeta:{linkageStatus:"WAITING",providerName:" "},missingRequiredCount:0,filledFields:["mmse","gds","cogTestType","specialistOpinionStatus"]}:t==="HIGH"?{caseId:e,source:"SEEDED",syncedAt:ut(),mmse:19,gds:5,cdr:1,cogTestType:"SNSB-II",specialistOpinionStatus:"MISSING",receivedMeta:{linkageStatus:"WAITING",providerName:" "},missingRequiredCount:0,filledFields:["mmse","gds","cdr","cogTestType","specialistOpinionStatus"]}:{caseId:e,source:"SEEDED",syncedAt:ut(),mmse:14,gds:6,cdr:2,cogTestType:"SNSB-C",specialistOpinionStatus:"DONE",receivedMeta:{linkageStatus:"WAITING",providerName:" "},missingRequiredCount:0,filledFields:["mmse","gds","cdr","cogTestType","specialistOpinionStatus"]}}function CAe(e,t){const n=gq(e.caseId,t),r=e.specialistOpinionStatus??(t==="AD"?"DONE":n.specialistOpinionStatus??"MISSING"),s={caseId:e.caseId,source:e.source,syncedAt:e.syncedAt||ut(),mmse:e.mmse??n.mmse,gds:e.gds??n.gds,cdr:e.cdr??n.cdr,cogTestType:e.cogTestType??n.cogTestType,specialistOpinionStatus:r,receivedMeta:{linkageStatus:e.receivedMeta?.linkageStatus??n.receivedMeta.linkageStatus,receivedAt:e.receivedMeta?.receivedAt,providerName:e.receivedMeta?.providerName??n.receivedMeta.providerName},missingRequiredCount:e.missingRequiredCount,filledFields:e.filledFields},o=(t==="LOW"||t==="MID"?["mmse","gds","cogTestType"]:t==="HIGH"?["mmse","gds","cdr","cogTestType"]:["mmse","gds","cdr","cogTestType","specialistOpinionStatus"]).filter(l=>l==="specialistOpinionStatus"?s.specialistOpinionStatus!=="DONE":s[l]==null).length;return s.missingRequiredCount=o,s.filledFields=["mmse","gds","cdr","cogTestType","specialistOpinionStatus"].filter(l=>l==="specialistOpinionStatus"?s.specialistOpinionStatus!=null:s[l]!=null),s}function TAe(e){const t=e.display.stepCards.map(s=>({id:`STEP${s.step}`,label:s.subtitle,status:s.state==="DONE"?"DONE":s.state==="IN_PROGRESS"?"READY":"TODO",reason:s.reason,requiresHumanApproval:s.step>=3})),n=t.filter(s=>s.status==="DONE").length,r=t.filter(s=>s.status==="READY").length;return{stage:"stage3",steps:t,doneCount:n,readyCount:r,totalCount:4,mismatch:e.display.inconsistencyFlags.length>0,mismatchReasons:[...e.display.inconsistencyFlags]}}const Kl="",m_=" ",Ko="02-555-0199".trim()||"02-555-0199",OAe="R-2ldKkoGbDF-marBFEbgVilAXB5Tw0r",O7="http://146.56.162.226/neuro-shield";function RAe(){const e="".trim();if(e&&e.length>0)return e;const t=OAe.trim();if(typeof window<"u"){const n=window.location.hostname.toLowerCase();return n==="localhost"||n==="127.0.0.1"||n==="::1"?`${O7}/p/sms?t=${encodeURIComponent(t)}`:`${`${window.location.origin}${"/neuro-shield/".replace(/\/$/,"")}`}/p/sms?t=${encodeURIComponent(t)}`}return`${O7}/p/sms?t=${encodeURIComponent(t)}`}const kAe=RAe(),xq=" 080-000-0000",u3=[{id:"S1_CONTACT_BASE",messageType:"CONTACT",label:"1 ()",body:({centerName:e,guideLink:t,centerPhone:n})=>`[:${e}]     .  (/)   .      : ${t} / : ${n}`},{id:"S1_CONTACT_GUARDIAN",messageType:"CONTACT",label:"1 ( )",body:({centerName:e,guideLink:t,centerPhone:n})=>`[:${e}]        ()   .  / : ${t} / : ${n}`},{id:"S1_BOOKING_BASE",messageType:"BOOKING",label:"1 (/)",body:({centerName:e,centerPhone:t,reservationLink:n})=>`[:${e}]  . ${n}     ${t}  .`},{id:"S1_BOOKING_CHANNEL",messageType:"BOOKING",label:"1 (/ )",body:({centerName:e,centerPhone:t,reservationLink:n})=>`[:${e}]   . ${n}  /   . : ${t}`},{id:"S1_REMINDER_FIRST",messageType:"REMINDER",label:"1 (1 )",body:({centerName:e,centerPhone:t,unsubscribe:n})=>`[:${e}]       .    . : ${t} / ${n}`},{id:"S1_REMINDER_FINAL",messageType:"REMINDER",label:"1 ()",body:({centerName:e,centerPhone:t})=>`[:${e}]    .      . : ${t}`}],f3=[{id:"S2_CONTACT_BASE",messageType:"CONTACT",label:"2   ",body:({centerName:e,guideLink:t,centerPhone:n})=>`[:${e}] 2 (/)  .        . ${t} / : ${n}`},{id:"S2_CONTACT_RELIEF",messageType:"CONTACT",label:"2   ",body:({centerName:e,guideLink:t,centerPhone:n})=>`[:${e}] 2   .       .  : ${t} / : ${n}`},{id:"S2_BOOKING_NEURO",messageType:"BOOKING",label:"2   ",body:({centerName:e,reservationLink:t})=>`[:${e}] 2       . / : ${t}`},{id:"S2_BOOKING_CLINICAL",messageType:"BOOKING",label:"2   ",body:({centerName:e,reservationLink:t,centerPhone:n})=>`[:${e}] 2 (  )  . /: ${t} / : ${n}`},{id:"S2_REMINDER_BOOKING",messageType:"REMINDER",label:"2  / ",body:({centerName:e,guideLink:t,centerPhone:n})=>`[:${e}]      .         . ${t} / : ${n}`},{id:"S2_REMINDER_NOSHOW",messageType:"REMINDER",label:"2   ",body:({centerName:e,reservationLink:t})=>`[:${e}]      .    . ${t}`}],p3=[{id:"S3_CONTACT_BASE",messageType:"CONTACT",label:"3   ",body:({centerName:e,centerPhone:t})=>`[:${e}]     . /    . : ${t}`},{id:"S3_BOOKING_REEVAL",messageType:"BOOKING",label:"3 /  ",body:({centerName:e,reservationLink:t,centerPhone:n})=>`[:${e}] /  .   : ${t} / : ${n}`},{id:"S3_BOOKING_CONFIRM",messageType:"BOOKING",label:"3  / ",body:({centerName:e,reservationLink:t,centerPhone:n})=>`[:${e}]      .  /: ${t} / : ${n}`},{id:"S3_PROGRAM_GUIDE",messageType:"CONTACT",label:"3 (/) ",body:({centerName:e,guideLink:t,centerPhone:n})=>`[:${e}]  / .        . ${t} / : ${n}`},{id:"S3_REMINDER_TRACK",messageType:"REMINDER",label:"3 ( )",body:({centerName:e,centerPhone:t})=>`[:${e}]     .      . : ${t}`}],IAe=[{step:"greeting",title:"1:    ",content:".   .   ?       .",tips:["  ","    ","   "],checkpoints:["  ","/ ","   "]},{step:"purpose",title:"2:  ",content:"       . /     .",tips:["   ","   ","   "],checkpoints:["  ","   ","  "]},{step:"assessment",title:"3:   ",content:"   ,  (//), /    .       .",tips:["  ","  ","  "],checkpoints:["  ","  ","    "]},{step:"scheduling",title:"4:   ",content:"     , / ,   .     .",tips:["  1 ","   ","  "],checkpoints:["  ","   ","  "]}],DAe=[{step:"greeting",title:"1:   / ",content:".   .   ?       .",tips:["    ","/   ","   "],checkpoints:["  ","/ ","  "]},{step:"purpose",title:"2: 2  ",content:"  2 (/)   .        .",tips:["     ","   ","   "],checkpoints:["2   ","   ","   "]},{step:"assessment",title:"3: /  ",content:"   ,   ,     .       .",tips:["    ","   ","/    "],checkpoints:["/  ","/  ","  "]},{step:"scheduling",title:"4:    ",content:"     , / ,    .     .",tips:["  1 ","   ","  "],checkpoints:["  ","/  ","  "]}];function ut(){return new Date().toISOString()}function dt(e){if(!e)return"-";const t=new Date(e);return Number.isNaN(t.getTime())?e:`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")} ${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`}function mt(e){return new Date(Date.now()+e*60*60*1e3).toISOString()}function Vc(e){if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const n=t.getTimezoneOffset();return new Date(t.getTime()-n*60*1e3).toISOString().slice(0,16)}function Wc(e){if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toISOString()}function PAe(e){if(!e)return;const t=new Date(e.includes("T")?e:e.replace(" ","T"));if(!Number.isNaN(t.getTime()))return t.toISOString()}function MAe(e,t){const n=e==="stage1"?IAe:DAe;return t?n.map((r,s)=>({...r,content:s===1?`${r.content}

 : ${t.scriptBody}`:r.content,tips:s===0?[...r.tips,` : ${t.useCase}`]:s===2?[...r.tips,...t.evidence.slice(0,2)]:r.tips})):n}function $y(e){if(!e||!e.scheduledAt)return"(  )";const t=e.place?.trim()||"  ",n=e.contactGuide?.trim()||Ko;return`${e.reservationType} / ${dt(e.scheduledAt)} / ${t} /  ${n}`}function LAe(e){return e===""?10:e===""?7:e===""?6:e===""?3:1}function $Ae(e){return e===""?{level:"OVERDUE",dueAt:mt(-4)}:e===""||e===""?{level:"DUE_SOON",dueAt:mt(18)}:{level:"OK",dueAt:mt(72)}}function BN(e){return e===""?{level:"EXCLUDE",score:58,notes:["  ","/  "]}:e===""?{level:"WARN",score:79,notes:["   "]}:{level:"GOOD",score:96,notes:["  "]}}function TO(e){if(e&&hq.has(e.id))return wAe;const t={:62,:76,:24,:88,:94},n={:0,:8,:16},r={:0,:6,:18};if(!e)return 60;const s=Math.min(e.alertTags.length*3,12),i=t[e.status]+n[e.risk]+s-r[e.quality];return Math.max(5,Math.min(99,i))}function FAe(e){return e>=85?{label:"",tone:"border-red-200 bg-red-50 text-red-700",bar:"bg-red-500",guide:"24   "}:e>=65?{label:"",tone:"border-orange-200 bg-orange-50 text-orange-700",bar:"bg-orange-500",guide:" /  "}:e>=45?{label:"",tone:"border-blue-200 bg-blue-50 text-blue-700",bar:"bg-blue-500",guide:"  "}:{label:"",tone:"border-emerald-200 bg-emerald-50 text-emerald-700",bar:"bg-emerald-500",guide:"/ "}}function UAe(e){return e==="TRACKING"?"":e==="REEVAL_DUE"?" ":e==="REEVAL_PENDING"?" ":e==="LINKAGE_PENDING"?" ":e==="PLAN_NEEDS_UPDATE"?"  ":e==="CHURN_RISK"?" ":""}function S1(e){return e==="ACTIVE"?"ACTIVE":e==="PAUSED"?"PAUSED":"NEEDS_UPDATE"}function BAe(e){return e?e.status===""?"CLOSED":e.alertTags.includes(" ")?"CHURN_RISK":e.alertTags.includes(" ")?"LINKAGE_PENDING":e.alertTags.includes(" ")?e.status===""||e.status===""?"REEVAL_DUE":"REEVAL_PENDING":e.status===""?"PLAN_NEEDS_UPDATE":"TRACKING":"TRACKING"}function GAe(e){return e?e.status===""?"PAUSED":e.status===""||e.alertTags.includes(" ")?"NEEDS_UPDATE":"ACTIVE":"ACTIVE"}function HAe(e){return e?e.alertTags.includes(" ")||e.status===""?"HIGH":e.risk===""||e.status===""?"MID":"LOW":"MID"}function KAe(e){const t=BAe(e),n=GAe(e),r=HAe(e),s=e?.risk===""?14:e?.risk===""?21:30,i=mt(e?.status===""?12:e?.status===""?-6:72),o=mt(e?.status===""?8:36),l=mt(e?.risk===""?120:168);return{opsStatus:t,nextReevalAt:i,nextTrackingContactAt:o,nextProgramAt:l,planStatus:n,trackingCycleDays:s,churnRisk:r}}function zAe(e,t,n=!1){const r=[],s=e?.alertTags.includes(" ")??!0,i=e?.alertTags.includes(" ")??!1,o=e?.alertTags.includes(" ")??!1,l=BN(e?.quality).level;return(s||t.opsStatus==="REEVAL_DUE"||t.opsStatus==="REEVAL_PENDING")&&r.push({id:"s3-action-reeval",type:"SCHEDULE_REEVAL",title:n?"/  ":"  ",reason:n?"    .":"      .",severity:t.opsStatus==="REEVAL_DUE"?"HIGH":"MID",requiresApproval:!0,decision:"PENDING"}),(i||t.churnRisk==="HIGH")&&r.push({id:"s3-action-reminder",type:"SEND_REMINDER",title:n?" /  ":" / ",reason:n?"/         .":"/      .",severity:"HIGH",requiresApproval:!1,decision:"PENDING"}),t.planStatus==="NEEDS_UPDATE"&&r.push({id:"s3-action-plan",type:"UPDATE_PLAN",title:n?"  ":"  ",reason:n?" /      .":"       .",severity:"MID",requiresApproval:!0,decision:"PENDING"}),(o||t.opsStatus==="LINKAGE_PENDING")&&r.push({id:"s3-action-escalate",type:"ESCALATE_LEVEL",title:n?"  / ":" /  ",reason:n?"      .":"       .",severity:o?"MID":"LOW",requiresApproval:!0,decision:"PENDING"}),l==="EXCLUDE"&&r.unshift({id:"s3-action-quality",type:"SEND_REMINDER",title:"  ",reason:n?"       .":"      .",severity:"HIGH",requiresApproval:!1,decision:"PENDING"}),r.slice(0,3)}function Jr(e){return Math.max(0,Math.min(1,e))}function Yo(e){return Math.round(Jr(e)*100)}function dh(e){const t=Jr(e);return t>=.7?"HIGH":t>=.45?"MID":"LOW"}function qAe(e){return e>=85?"":e>=65?"":e>=45?"":""}function Gc(e){if(e==null||Number.isNaN(e))return;const t=e<=1?e*100:e;return Math.max(0,Math.min(100,Math.round(t)))}function VAe(e){const t=e.header.dataQuality.score;return t>=90?"HIGH":t>=70?"MID":"LOW"}function WAe(e){if(!e)return;const t=Jr(e.risk2y_now),n=e.trend==="UP"?.14:e.trend==="DOWN"?-.1:e.trend==="VOLATILE"?.08:.02;return Jr(t+n)}function YAe(e,t){if(e)return e==="MCI"?t===""?{MCI:.68,AD:.25,NORMAL:.07}:{MCI:.72,AD:.18,NORMAL:.1}:e===""?{AD:.74,MCI:.22,NORMAL:.04}:{NORMAL:.78,MCI:.16,AD:.06}}function E1(e){return e?.risk===""?"":e?.risk===""?"":""}function QAe(e){return e?e===""?"":e:"-"}function bq(e){return e?e==="NOT_STARTED"?"":e==="IN_PROGRESS"?"":"":"-"}function j1(e){return e?.risk===""?"":e?.risk===""?"MCI":""}function h_(e){return e==="MCI"||e===""}function XAe(e){return e===""?"FOLLOWUP_2Y":e==="MCI"?"STAGE3":"DIFF_PATH"}function Eg(e,t){return e===""?{NORMAL:.08,MCI:.2,AD:.72}:e==="MCI"?t===""?{NORMAL:.08,MCI:.66,AD:.26}:t===""?{NORMAL:.32,MCI:.56,AD:.12}:{NORMAL:.1,MCI:.72,AD:.18}:{NORMAL:.78,MCI:.17,AD:.05}}function Fy(e){if(e)return e===""?"":e===""?"":"MCI"}function yq(e){if(e)return e===""?"":e}function JAe(e){return e===" "?"POS":e===" "?"NEG":"UNK"}function lg(e,t="HOSPITAL"){return+!!e.specialist+ +(t==="CENTER"?!0:typeof e.mmse=="number")+ +(typeof e.cdr=="number")+ +!!e.neuroCognitiveType}function jg(e,t,n="HOSPITAL"){const r=n==="CENTER"?3:4,s=lg(e,n);return t||s>=r?"COMPLETED":s>0?"IN_PROGRESS":"NOT_STARTED"}function R7(e,t){if(!!(t&&t.stage===2&&t.operationStep==="WAITING"&&!t.computed.model2.available))return{status:"NOT_STARTED",tests:{specialist:!1,mmse:void 0,cdr:void 0,neuroCognitiveType:void 0},classification:void 0,nextStep:void 0};const r=t?.computed.evidence.stage2.required,s=t?.computed.model2;if(t?.stage===2&&r){const m=t.stage2Route==="HOSPITAL"?"HOSPITAL":"CENTER",p=Fy(s?.predictedLabel)??j1(e),g=yq(s?.mciBand)??(p==="MCI"?E1(e):void 0),x={specialist:!!r.specialist,mmse:typeof r.mmse=="number"?r.mmse:void 0,cdr:typeof r.cdrOrGds=="number"?r.cdrOrGds:void 0,neuroCognitiveType:r.neuroType??void 0},y=t.status==="CLASS_CONFIRMED"||t.status==="NEXT_STEP_SET"||t.operationStep==="CLASSIFIED"||t.operationStep==="FOLLOW_UP"||t.operationStep==="COMPLETED"||t.stage>=3;return{status:jg(x,y,m),tests:x,classification:s?.available?{label:p,probs:s.probs??Eg(p,g),mciStage:g}:void 0,nextStep:void 0}}const i=j1(e),o=i==="MCI"?E1(e):void 0,l=e?.status===""||e?.status===""||e?.status==="",c=e?.path?.includes("")||e?.path?.includes("")?"HOSPITAL":"CENTER",u={specialist:l?e?.risk!=="":!1,mmse:void 0,cdr:void 0,neuroCognitiveType:void 0};return{status:jg(u,!1,c),tests:u,classification:l?{label:i,probs:Eg(i,o),mciStage:o}:void 0,nextStep:void 0}}function ZAe({detail:e,modelPriorityValue:t,stage2ResultLabel:n,stage2MciSeverity:r,stage2TestAt:s,stage2Org:i}){const o=Math.max(0,Math.min(100,t)),l=Math.max(1,100-o),c=e.stage3?.transitionRisk,u=c?.risk2y_now,m=WAe(c),p=YAe(n,r),g=Date.now(),x=720*60*60*1e3,y=T=>{const R=new Date(T).getTime();return Number.isNaN(R)?!1:g-R<=x},v=e.timeline.filter(T=>y(T.at)),N=v.filter(T=>T.type==="CALL_ATTEMPT").length,S=v.filter(T=>T.type==="CALL_ATTEMPT"&&T.result==="SUCCESS").length,j=v.filter(T=>T.type==="CALL_ATTEMPT"&&T.result!=="SUCCESS"||T.type==="SMS_SENT"&&T.status==="FAILED").length,C=v.filter(T=>T.type==="REEVAL_SCHEDULED"||T.type==="REEVAL_RESCHEDULED"||T.type==="DIFF_SCHEDULED").length,_=e.stage3?.programs.filter(T=>T.selected&&(T.execution?.status==="PLANNED"||T.execution?.status==="IN_PROGRESS")).length??0,A=e.stage3?.programs.filter(T=>T.selected&&T.execution?.status==="DONE").length??0;return{stage1:{priorityScore:o,priorityBand:qAe(o),interventionLevel:e.interventionLevel,percentileTop:l,updatedAt:e.scoreSummary[0]?.updatedAt??e.timeline[0]?.at},stage2:{resultLabel:n,mciSeverity:r,probs:p,tests:{neuropsych:e.stage3?"DONE":"MISSING",clinical:e.stage3?"DONE":"MISSING",specialist:e.stage3?"DONE":"MISSING"},testAt:s,org:i},stage3:{risk2yNow:u,risk2yLabel:u==null?void 0:dh(u),confidence:VAe(e),status:e.stage3?.diffPathStatus==="COMPLETED"||e.stage3?.riskReviewedAt?"RESULT_APPLIED":"RESULT_PENDING",nextReevalAt:e.stage3?.headerMeta.nextReevalAt,nextContactAt:e.stage3?.headerMeta.nextTrackingContactAt,riskAt2y:m},opsCounts:{contactAttempts30d:N,contactSuccess30d:S,contactFail30d:j,bookings:C,programsPlanned:_,programsDone:A},dataQuality:{score:e.header.dataQuality.score,missingCount:e.header.dataQuality.notes?.length??0}}}function e_e(e){const t=TO(e),n=Jr(t/100),r=e?.risk===""?.12:e?.risk===""?.05:0,s=e?.status===""?.1:e?.status===""?.06:e?.status===""?-.08:0,i=Jr(n+r+s),l=(e?.status===""?[.18,.14,.1,.06,.03,0]:e?.status===""?[-.1,-.07,-.05,-.03,-.01,0]:[.04,.02,.03,.01,.005,0]).map((g,x)=>{const y=Jr(i-g),v=e?.quality===""?.08:e?.quality===""?.06:.04;return{t:mt(-(720*(5-x))),risk2y:y,ciLow:Jr(y-v),ciHigh:Jr(y+v),source:"model"}}),c=l[0]?.risk2y??i,u=i-c,p=Math.max(...l.map((g,x)=>x===0?0:Math.abs(g.risk2y-(l[x-1]?.risk2y??g.risk2y))))>=.08?"VOLATILE":u>=.04?"UP":u<=-.04?"DOWN":"FLAT";return{risk2y_now:i,risk2y_label:i>=.7?"HIGH":i>=.45?"MID":"LOW",trend:p,variabilityNote:p==="VOLATILE"?"  /     .":void 0,updatedAt:ut(),modelVersion:"stage3-risk-v1.2",series:l}}function t_e(e){const t=e?.risk===""||e?.status==="";return[{id:"program-precision-diff-neuro",major:" ",middle:" ",leaf:"  ",pinned:t},{id:"program-precision-mri-route",major:" ",middle:" ",leaf:" / ",pinned:t},{id:"program-case-followup-weekly",major:" ",middle:" ",leaf:"     ",pinned:!0},{id:"program-case-caregiver",major:" ",middle:" ",leaf:"  "},{id:"program-support-homevisit",major:"",middle:" ",leaf:" / "},{id:"program-support-education",major:"",middle:"",leaf:"   ",pinned:e?.quality!==""},{id:"program-family-rest",major:"/ ",middle:"",leaf:"    "},{id:"program-family-counseling",major:"/ ",middle:"",leaf:"  "}]}function n_e(e){const t=new Set(["program-precision-diff-neuro","program-case-followup-weekly","program-support-education"]);return e.filter(n=>t.has(n.id)).map(n=>({...n,selected:!0,execution:{owner:Kl,status:"PLANNED",dueDate:mt(72),method:""}}))}function k7(e){return e?e==="CONTINUE_SELF"?"":e==="NO_RESPONSE"||e==="REFUSE"?"":" ":" "}function r_e(e){const t=BN(e?.quality).level,n=!!e?.profile.guardianPhone;return[{key:"CONSENT_OK",label:" ",status:t==="EXCLUDE"?"FAIL":"PASS",failReason:t==="EXCLUDE"?"   ":void 0,fixAction:t==="EXCLUDE"?{label:" ",action:"REQUEST_CONSENT"}:void 0},{key:"CONTACTABLE_TIME_OK",label:"   ",status:e?.status===""?"UNKNOWN":"PASS",failReason:e?.status===""?"   ":void 0,fixAction:e?.status===""?{label:" ",action:"CONFIRM_CONTACT_TIME"}:void 0},{key:"PHONE_VERIFIED",label:" ",status:t==="GOOD"?"PASS":"FAIL",failReason:t==="GOOD"?void 0:"  ",fixAction:t==="GOOD"?void 0:{label:" ",action:"VERIFY_PHONE"}},{key:"GUARDIAN_OPTIONAL",label:" ",status:n?"PASS":"UNKNOWN",failReason:n?void 0:"   ",fixAction:n?void 0:{label:" ",action:"ADD_GUARDIAN"}}]}function a_e(e,t="stage1",n=!1){if(t==="stage3"&&!n)return{topFactors:[{title:"  ",description:"       .",recency:mt(-14)},{title:"  ",description:"    /  .",recency:mt(-20),isMissing:e?.quality!==""},{title:"  ",description:"    /  .",recency:mt(-32)}],computedAt:ut(),version:"stage3-risk-v1.2"};if(t==="stage3"&&n)return{topFactors:[{title:"  ",description:"SLA        .",recency:mt(-14)},{title:" ",description:"   /  .",recency:mt(-20),isMissing:e?.quality!==""},{title:"  ",description:"      .",recency:mt(-32)}],computedAt:ut(),version:"stage2-ops-v3.1"};const r=e?.risk??"";return{topFactors:r===""?[{title:"   ",description:" 2       .",recency:mt(-16)},{title:"  ",description:"       .",recency:mt(-30)},{title:"   ",description:"        .",recency:mt(-40),isMissing:e?.quality===""}]:r===""?[{title:"  ",description:"     .",recency:mt(-18)},{title:"   ",description:"     L0/L1   .",recency:mt(-34)},{title:"  ",description:"       .",recency:mt(-45),isMissing:e?.quality!==""}]:[{title:"  ",description:"     .",recency:mt(-20)},{title:"  ",description:"       .",recency:mt(-32)},{title:"  ",description:"      .",recency:mt(-46),isMissing:e?.quality!==""}],computedAt:ut(),version:t==="stage2"?"stage2-risk-v2.4":"stage1-risk-v2.4"}}function s_e(e,t="stage1",n,r=!1){if(t==="stage3"&&n){const l=e?.profile.stage3Type==="AD_MANAGEMENT",c=BN(e?.quality),u=n.recommendedActions.length,m=n.recommendedActions.some(y=>y.severity==="HIGH")?"HIGH":n.recommendedActions.some(y=>y.severity==="MID")?"MID":"LOW",p=e?.status===""?94:e?.status===""?58:e?.status===""?67:76,g=Yo(n.transitionRisk.risk2y_now),x=n.reevalStatus==="COMPLETED"?"COMPLETED":n.reevalStatus==="SCHEDULED"?"SCHEDULED":n.reevalStatus==="NOSHOW"?"NOSHOW":"PENDING";if(r){const y=(n.diffPathStatus==="SCHEDULED"||n.diffPathStatus==="COMPLETED"?2:1)+(n.reevalStatus==="SCHEDULED"||n.reevalStatus==="COMPLETED"?1:0)+(n.planProgressPct>=80?1:0),v=Math.max(0,Math.min(100,Math.round(y/4*100))),N=e?.status===""?7:e?.status===""?3:0,S=n.diffPathStatus==="SCHEDULED"||n.diffPathStatus==="COMPLETED"?0:1,j=n.planProgressPct>=80;return[{label:" ",value:v,unit:"%",updatedAt:n.transitionRisk.updatedAt,flags:[v>=100?"DONE":v>=40?"IN_PROGRESS":"BLOCKED"]},{label:"/ ",value:S,unit:"",updatedAt:n.headerMeta.nextReevalAt??ut(),flags:[S===0?"CONFIRMED":"WAITING"]},{label:"  ",value:N,unit:"",updatedAt:n.headerMeta.nextTrackingContactAt??ut(),flags:N>0?["DELAYED"]:["NORMAL"]},{label:"  ",value:j?1:0,unit:"",updatedAt:ut(),flags:[j?"CONFIRMED":"UNCONFIRMED"]},{label:" ",value:c.score,unit:"%",updatedAt:ut(),flags:c.level==="GOOD"?["OK"]:["MISSING_IMPACT"]}]}return[{label:l?" ( )":"2  ( )",value:g,unit:"%",updatedAt:n.transitionRisk.updatedAt,flags:[dh(n.transitionRisk.risk2y_now),n.transitionRisk.trend]},{label:" ",value:u,unit:"",updatedAt:n.headerMeta.nextReevalAt??ut(),flags:[` ${m}`,x]},{label:" ",value:p,unit:"%",updatedAt:n.headerMeta.nextTrackingContactAt??ut(),flags:p<70?[" "]:void 0},{label:" ",value:n.planProgressPct,unit:"%",updatedAt:ut(),flags:[S1(n.headerMeta.planStatus)]},{label:" ",value:c.score,unit:"%",updatedAt:ut(),flags:c.level==="GOOD"?["  "]:["  "]}]}const s=e?.risk??"",i=Number(e?.id.slice(-2)??0)%5,o=s===""?[41,53,47,44]:s===""?[79,83,86,82]:[61,68,65,66];return[{label:"CIST ",value:Math.max(0,Math.min(100,o[0]-i)),unit:"",updatedAt:mt(-12),flags:s===""?[" "]:void 0},{label:"  ",value:Math.max(0,Math.min(100,o[1]-i)),unit:"",updatedAt:mt(-14),flags:s!==""?[""]:void 0},{label:"  ",value:Math.max(0,Math.min(100,o[2]+i)),unit:"",updatedAt:mt(-26),flags:e?.quality!==""?[" "]:void 0},{label:"  ",value:Math.max(0,Math.min(100,o[3])),unit:"",updatedAt:mt(-8),flags:e?.status===""||e?.status===""?[" "]:void 0}]}function OO(e,t){const n={L0:[{id:"todo-L0-1",title:"    ",priority:1,status:"OPEN",suggestedAction:"VERIFY"},{id:"todo-L0-2",title:"   ",priority:2,status:"OPEN",suggestedAction:"SCHEDULE"},{id:"todo-L0-3",title:"  ",priority:2,status:"OPEN",suggestedAction:"VERIFY"}],L1:[{id:"todo-L1-1",title:"  ",priority:1,status:"OPEN",suggestedAction:"SMS"},{id:"todo-L1-2",title:"  ",priority:2,status:"OPEN",suggestedAction:"VERIFY"},{id:"todo-L1-3",title:"   ",priority:3,status:"OPEN",suggestedAction:"HOLD"}],L2:[{id:"todo-L2-1",title:"1  1 ",priority:1,status:"OPEN",suggestedAction:"CALL"},{id:"todo-L2-2",title:"    ",priority:1,status:"OPEN",suggestedAction:"SCHEDULE"},{id:"todo-L2-3",title:"2   ",priority:2,status:"OPEN",suggestedAction:"SMS"}],L3:[{id:"todo-L3-1",title:"2     ",priority:1,status:"OPEN",suggestedAction:"VERIFY"},{id:"todo-L3-2",title:"   ",priority:1,status:"OPEN",suggestedAction:"SMS"},{id:"todo-L3-3",title:"    ",priority:2,status:"OPEN",suggestedAction:"SCHEDULE"}]};return t==="EXCLUDE"?[{id:"todo-q-1",title:"   ",priority:1,status:"OPEN",suggestedAction:"VERIFY"},{id:"todo-q-2",title:"   ",priority:2,status:"OPEN",suggestedAction:"EXCLUDE"},{id:"todo-q-3",title:"   ",priority:3,status:"CANCELED",suggestedAction:"HOLD"}]:t==="WARN"?n[e].map((r,s)=>s===0?{...r,priority:2}:r):n[e]}function i_e(e,t,n="stage1"){const r=e?.status??"",s=e?.manager??Kl,i=n==="stage2"?"Stage2":n==="stage3"?"Stage3":"Stage1",o=n==="stage2"?"S2_CONTACT_BASE":n==="stage3"?"S3_CONTACT_BASE":"S1_CONTACT_BASE",l=[{type:"STATUS_CHANGE",at:mt(-72),from:"",to:r,reason:`${i}  `,by:s},{type:"LEVEL_CHANGE",at:mt(-48),from:"L0",to:t,reason:"   SLA  ",by:s}];return(r===""||r===""||r==="")&&l.unshift({type:"CALL_ATTEMPT",at:mt(-18),result:"NO_ANSWER",note:"  ",by:s}),e?.alertTags.includes(" ")&&l.unshift({type:"SMS_SENT",at:mt(-14),templateId:o,status:"PENDING",by:s}),n==="stage3"&&(l.unshift({type:"RISK_SERIES_UPDATED",at:mt(-12),by:s,summary:"2    "}),l.unshift({type:"RISK_REVIEWED",at:mt(-11),by:s,summary:"    "}),l.unshift({type:"DIFF_RECO_CREATED",at:mt(-9),by:s,summary:"  "}),l.unshift({type:"PLAN_UPDATED",at:mt(-10),by:s,summary:"     "}),l.unshift({type:"REEVAL_SCHEDULED",at:mt(-8),scheduledAt:mt(72),by:s,reason:"   "})),l}function g_(e,t="stage1",n=!1){const r=Y2e(e),s=e&&hq.has(e.id)?AAe:r.level,i=BN(e?.quality),o=D_e(e),l=Cq(_q(o),e?.computed?.ops?.contactMode),c=Tq(l.strategy,e,t),u=P_e(e),m="NOT_CREATED",p=t==="stage3"?KAe(e):void 0,g=t==="stage3"?e_e(e):void 0,x=t==="stage3"&&p?zAe(e,p,n):[],y=t==="stage3"?t_e(e):[],v=t==="stage3"?n_e(y):[],N=x.length>0?"RECOMMENDED":"NONE",S=p?.opsStatus==="REEVAL_DUE"||p?.opsStatus==="REEVAL_PENDING"?"PENDING":"SCHEDULED",j=t==="stage3"?p?.planStatus==="ACTIVE"?72:p?.planStatus==="NEEDS_UPDATE"?48:91:void 0,C=[];return i3(l.triggers)&&C.push("  :   "),l.triggers.includes("GUARDIAN_PRIMARY")&&C.push("  "),l.triggers.includes("HAS_COMPLAINT_HISTORY")&&C.push("   "),l.triggers.includes("HAS_REFUSAL_HISTORY")&&C.push("   "),t==="stage3"&&C.push(n?" :  /     // ":e?.profile.stage3Type==="AD_MANAGEMENT"?" :      ":" :       "),{header:{caseId:e?.id??"CASE-UNKNOWN",stage:t==="stage2"?"STAGE2":t==="stage3"?"STAGE3":"STAGE1",assigneeName:e?.manager??Kl,statusLabel:t==="stage3"&&p?n?"":UAe(p.opsStatus):e?.status===""?"":e?.status===""?"":e?.status??"",waitDays:LAe(e?.status),sla:$Ae(e?.status),dataQuality:i,contactStrategy:l.strategy,effectiveStrategy:l.strategy,riskGuardrails:C.length>0?C:void 0},policyGates:r_e(e),interventionLevel:s,riskEvidence:a_e(e,t,n),scoreSummary:s_e(e,t,t==="stage3"&&p&&g&&j!=null?{headerMeta:p,transitionRisk:g,recommendedActions:x,planProgressPct:j,reevalStatus:S,diffPathStatus:N}:void 0,n),todos:OO(s,i.level),timeline:i_e(e,s,t),preTriageInput:o,preTriageResult:l,contactPlan:c,contactExecution:u,contactFlowSteps:Ys(u,l,m,t),linkageStatus:m,contactExecutor:l.strategy==="AI_FIRST"?"AGENT_SEND_ONLY":"HUMAN",lastSmsSentAt:u.lastSentAt??null,reservation:{source:"MANUAL",status:"NONE"},agentExecutionLogs:[],stage3:t==="stage3"&&p&&g&&j!=null?{headerMeta:p,transitionRisk:g,reevalStatus:S,riskReviewedAt:void 0,diffPathStatus:N,triggersReviewedAt:void 0,planProgressPct:j,planUpdatedAt:p.planStatus==="NEEDS_UPDATE"?void 0:mt(-10),recommendedActions:x,programs:v}:void 0}}function I7(e,t,n="stage1",r=!1){const s=e?.manager??Kl,i=n==="stage2"?"Stage2":n==="stage3"?"Stage3":"Stage1";return[{id:`audit-${t.header.caseId}-1`,at:dt(mt(-72)),actor:s,message:"  :   "},{id:`audit-${t.header.caseId}-2`,at:dt(mt(-48)),actor:s,message:n==="stage3"?r?`  :  ${t.stage3?.headerMeta.trackingCycleDays??21} /  ${S1(t.stage3?.headerMeta.planStatus??"ACTIVE")}`:`  : ${t.stage3?.headerMeta.trackingCycleDays??21}  /  ${S1(t.stage3?.headerMeta.planStatus??"ACTIVE")}`:`${n==="stage2"?" ":" "} : ${t.preTriageResult?.strategy==="HUMAN_FIRST"?" ":" "}`},{id:`audit-${t.header.caseId}-3`,at:dt(mt(-32)),actor:s,message:`  : ${t.interventionLevel}`},{id:`audit-${t.header.caseId}-4`,at:dt(mt(-18)),actor:s,message:`${i}   : `}]}function o_e(e,t="stage1"){const n=e.riskEvidence.topFactors.map(u=>u.title).slice(0,2),r=i3(e.preTriageResult?.triggers??[]),s=e.preTriageInput?.contactHistory.hasComplaint??!1,i=e.preTriageInput?.contactHistory.hasRefusal??!1,o=e.header.sla.level!=="OK",l=e.contactExecutor==="AGENT_SEND_ONLY";return t==="stage3"?[{id:"RAG-S3-01",title:"  ",useCase:"    Stage3 ",evidence:[` : ${n.join(", ")||" "}`,"      .","        ."],scriptBody:"      ,     ."},{id:"RAG-S3-02",title:" /",useCase:"      ",evidence:["        .",o?"     .":"    .","    /   ."],scriptBody:"          ."},{id:"RAG-S3-03",title:" /",useCase:"      ",evidence:[" /       .",l?"Agent      .":"     .","/     ."],scriptBody:"/     .     ."}]:t==="stage2"?[{id:"RAG-S2-01",title:"2  ",useCase:"2 1/2    ",evidence:[` : ${n.join(", ")||"  "}`,"          .","      ."],scriptBody:"  2     .    ,      ."},{id:"RAG-S2-02",title:s||i?"  ":"  ",useCase:s||i?"/      ":"  /   ",evidence:[s?"       .":"       .",i?"        .":"       .","   /   ."],scriptBody:"         ,   ."},{id:"RAG-S2-03",title:o?"  ":" ",useCase:o?"SLA /    ":"      ",evidence:[o?"SLA    /   .":"   //   .",l?"Agent       .":"/     .","        ."],scriptBody:o?"       ,    .":"        ."}]:[{id:"RAG-GUIDE-01",title:r?"  ":" ",useCase:r?"   /  ":" ,   ",evidence:[` : ${n.join(", ")||"  "}`,r?"       .":"       .","     /  ."],scriptBody:r?"      .       .":"        .      ."},{id:"RAG-GUIDE-02",title:s||i?"  ":" ",useCase:s||i?"/   ":"     ",evidence:[s?"         .":"        .",i?"         .":"   /   .","        ."],scriptBody:"     .        ."},{id:"RAG-GUIDE-03",title:l?"Agent  ":"SLA  ",useCase:l?"      ":"SLA /  ",evidence:[o?"SLA /     .":" SLA       .",l?"Agent     Step3/4    .":"/        .","     ."],scriptBody:l?"   .     .":"          ."}].slice(0,3)}function l_e(e){return e.type==="CALL_ATTEMPT"?"CALL":e.type==="SMS_RESERVATION_RESERVED"||e.type==="SMS_RESERVATION_CANCELLED"||e.type==="SMS_RESERVATION_CHANGED"||e.type==="SMS_RESERVATION_NO_SHOW"?"SMS":e.type==="INCONSISTENT_SMS_STATUS"?"STATUS":e.type==="MESSAGE_SENT"?e.summary.includes("STAGE1_RESPONSE_RECORDED")||e.summary.includes("STAGE2_RESPONSE_RECORDED")?"STATUS":"SMS":e.type==="SMS_SENT"||e.type==="AGENT_SMS_SENT"?"SMS":"STATUS"}function Uy(e){return e.type==="CALL_ATTEMPT"?e.result==="SUCCESS"?" ":e.result==="NO_ANSWER"?"":e.result==="REJECTED"?" ":" ":e.type==="SMS_SENT"?`  (${g_e(e.templateId)})`:e.type==="MESSAGE_SENT"?e.summary.includes("STAGE1_RESPONSE_RECORDED")||e.summary.includes("STAGE2_RESPONSE_RECORDED")?"  ":"   ":e.type==="SMS_RESERVATION_RESERVED"?"[SMS]   ":e.type==="SMS_RESERVATION_CANCELLED"?"[SMS]   ":e.type==="SMS_RESERVATION_CHANGED"?"[SMS]   ":e.type==="SMS_RESERVATION_NO_SHOW"?"[SMS]   ":e.type==="INCONSISTENT_SMS_STATUS"?"    ":e.type==="LEVEL_CHANGE"?`   ${e.from}  ${e.to}`:e.type==="POLICY_GATE_UPDATE"?`   (${e.key})`:e.type==="OUTCOME_RECORDED"?`   (${vi[e.outcomeCode].label})`:e.type==="CALENDAR_SYNC"?e.status==="SUCCESS"?"  ":"   ":e.type==="CAL_EVENT_CREATED"?"  ":e.type==="STRATEGY_CHANGE"?`   ${gu[e.from]}  ${gu[e.to]}`:e.type==="AGENT_JOB_QUEUED"?"Agent   ":e.type==="AGENT_JOB_STARTED"?"Agent   ":e.type==="AGENT_SMS_SENT"?"Agent  ":e.type==="AGENT_JOB_SUCCEEDED"?"Agent   ":e.type==="AGENT_JOB_FAILED"?"Agent   ":e.type==="AGENT_JOB_CANCELED"?"Agent   ":e.type==="CONTACT_STRATEGY_CHANGED"?"  ":e.type==="OPERATOR_OVERRIDE_TO_HUMAN"?"  ":e.type==="REEVAL_SCHEDULED"?"/  ":e.type==="REEVAL_RESCHEDULED"?"/  ":e.type==="REEVAL_COMPLETED"?"/ ":e.type==="REEVAL_NOSHOW"?"/ ":e.type==="PLAN_CREATED"?" ":e.type==="PLAN_UPDATED"?" ":e.type==="PROGRAM_STARTED"?" ":e.type==="PROGRAM_COMPLETED"?" ":e.type==="PROGRAM_STOPPED"?" ":e.type==="LINKAGE_CREATED"?" ":e.type==="LINKAGE_APPROVED"?" ":e.type==="LINKAGE_COMPLETED"?" ":e.type==="STAGE3_ACTION_DECISION"?"  ":e.type==="RISK_SERIES_UPDATED"?"   ":e.type==="RISK_REVIEWED"?"  ":e.type==="DIFF_RECO_CREATED"?"   ":e.type==="DIFF_REFER_CREATED"?"  ":e.type==="DIFF_SCHEDULED"?"  ":e.type==="DIFF_COMPLETED"?"  ":e.type==="DIFF_RESULT_APPLIED"?"  ":e.type==="PROGRAM_SELECTED"?" ":e.type==="PROGRAM_EXEC_UPDATED"?"  ":e.type==="PROGRAM_EXEC_COMPLETED"?"  ":e.type==="NEXT_TRACKING_SET"?"   ":e.type==="STAGE2_PLAN_CONFIRMED"?"Stage2   ":e.type==="STAGE2_RESULTS_RECORDED"?"Stage2    ":e.type==="STAGE2_STEP2_AUTOFILL_APPLIED"?"Stage2 STEP2   ":e.type==="STAGE2_MANUAL_EDIT_APPLIED"?"Stage2 STEP2   ":e.type==="STAGE2_CLASS_CONFIRMED"?"Stage2  ":e.type==="STAGE2_NEXT_STEP_SET"?"Stage2   ":e.type==="INFERENCE_REQUESTED"?`Stage${e.stage}   `:e.type==="INFERENCE_STARTED"?`Stage${e.stage}   `:e.type==="INFERENCE_PROGRESS"?`Stage${e.stage}   `:e.type==="INFERENCE_COMPLETED"?`Stage${e.stage}   `:e.type==="INFERENCE_FAILED"?`Stage${e.stage}   `:`  ${e.from}  ${e.to}`}function vq(e){if(e.type==="CALL_ATTEMPT")return e.note??"  ";if(e.type==="SMS_SENT")return` : ${e.status}`;if(e.type==="MESSAGE_SENT")return e.summary;if(e.type==="SMS_RESERVATION_RESERVED"||e.type==="SMS_RESERVATION_CANCELLED"||e.type==="SMS_RESERVATION_CHANGED"||e.type==="SMS_RESERVATION_NO_SHOW"){const t=[e.programName,e.scheduledAt?dt(e.scheduledAt):void 0].filter(Boolean);return t.length>0?t.join("  "):e.summary}if(e.type==="INCONSISTENT_SMS_STATUS")return[e.summary,e.detail].filter(Boolean).join("  ");if(e.type==="LEVEL_CHANGE")return e.reason;if(e.type==="POLICY_GATE_UPDATE")return`: ${e.status}`;if(e.type==="OUTCOME_RECORDED"){const t=[];return e.reasonTags&&e.reasonTags.length>0&&t.push(` ${e.reasonTags.map(n=>w1[n].label).join(", ")}`),e.rejectCode&&t.push(` ${e.rejectCode}`),e.rejectLevel&&t.push(` ${e.rejectLevel}`),e.recontactStrategy&&t.push(`  ${e.recontactStrategy}`),e.nextContactAt&&t.push(`  ${dt(e.nextContactAt)}`),e.note&&t.push(e.note),t.length>0?t.join("  "):"  "}if(e.type==="CALENDAR_SYNC"){const t=`${e.title}  ${dt(e.scheduledAt)}`;return e.status==="FAILED"?`${t}  ${e.error??" "}`:t}return e.type==="CAL_EVENT_CREATED"?`${dt(e.scheduledAt)}  ${e.summary}`:e.type==="AGENT_SMS_SENT"?`${e.summary}   ${kO[e.channelResult]}${e.detail?`  ${e.detail}`:""}`:e.type==="AGENT_JOB_QUEUED"||e.type==="AGENT_JOB_STARTED"||e.type==="AGENT_JOB_SUCCEEDED"||e.type==="AGENT_JOB_FAILED"||e.type==="AGENT_JOB_CANCELED"||e.type==="CONTACT_STRATEGY_CHANGED"||e.type==="OPERATOR_OVERRIDE_TO_HUMAN"?[e.summary,e.detail].filter(Boolean).join("  "):e.type==="REEVAL_SCHEDULED"?`${dt(e.scheduledAt)}  ${e.reason??"  "}`:e.type==="REEVAL_RESCHEDULED"?`${dt(e.from)}  ${dt(e.to)}${e.reason?`  ${e.reason}`:""}`:e.type==="REEVAL_COMPLETED"||e.type==="REEVAL_NOSHOW"?e.note??"   ":e.type==="PLAN_CREATED"||e.type==="PLAN_UPDATED"||e.type==="PROGRAM_STARTED"||e.type==="PROGRAM_COMPLETED"||e.type==="PROGRAM_STOPPED"?e.summary:e.type==="LINKAGE_CREATED"||e.type==="LINKAGE_APPROVED"||e.type==="LINKAGE_COMPLETED"?`${e.linkageType}  ${e.summary??"  "}`:e.type==="STAGE3_ACTION_DECISION"?`${e.actionId}  ${e.decision}${e.note?`  ${e.note}`:""}`:e.type==="RISK_SERIES_UPDATED"||e.type==="RISK_REVIEWED"||e.type==="DIFF_RECO_CREATED"||e.type==="DIFF_REFER_CREATED"||e.type==="DIFF_SCHEDULED"||e.type==="DIFF_COMPLETED"||e.type==="DIFF_RESULT_APPLIED"||e.type==="PROGRAM_SELECTED"||e.type==="PROGRAM_EXEC_UPDATED"||e.type==="PROGRAM_EXEC_COMPLETED"||e.type==="STAGE2_PLAN_CONFIRMED"||e.type==="STAGE2_RESULTS_RECORDED"||e.type==="STAGE2_STEP2_AUTOFILL_APPLIED"||e.type==="STAGE2_MANUAL_EDIT_APPLIED"||e.type==="STAGE2_CLASS_CONFIRMED"||e.type==="STAGE2_NEXT_STEP_SET"?e.summary:e.type==="INFERENCE_REQUESTED"||e.type==="INFERENCE_STARTED"||e.type==="INFERENCE_COMPLETED"||e.type==="INFERENCE_FAILED"?`${e.summary}${e.reason?`  ${e.reason}`:""}`:e.type==="INFERENCE_PROGRESS"?`${e.summary}  ${Math.round(e.progress)}%${e.etaSeconds!=null?`  ETA ${CO(e.etaSeconds)}`:""}`:e.type==="NEXT_TRACKING_SET"?`${dt(e.nextAt)}${e.summary?`  ${e.summary}`:""}`:e.reason}function c_e(e){return e==="PASS"?"border-emerald-200 bg-emerald-50 text-emerald-700":e==="FAIL"?"border-red-200 bg-red-50 text-red-700":"border-gray-200 bg-gray-50 text-gray-600"}function D7(e){return e==="OK"?"border-emerald-200 bg-emerald-50 text-emerald-700":e==="RESTRICTED"?"border-red-200 bg-red-50 text-red-700":"border-gray-200 bg-gray-50 text-gray-600"}function P7(e){return e==="OK"?"":e==="RESTRICTED"?"":" "}function vf(e){return e==="OK"?" ":e==="RESTRICTED"?"/ ":"  "}function M7(e){return e?/|||/.test(e):!1}function d_e(e){const t=["CONSENT_OK","CONTACTABLE_TIME_OK","PHONE_VERIFIED"],n=e.filter(r=>t.includes(r.key));return n.some(r=>r.status==="FAIL")?"BLOCKED":n.some(r=>r.status!=="PASS")?"NEEDS_CHECK":"PASS"}function u_e(e,t,n,r){return`${e}:${t}:${n}:${r}`}function f_e(e){return e==="AUTO_ON_ENTER"?"   ":e==="AUTO_ON_STRATEGY"?"    ":e==="AUTO_ON_RETRY_DUE"?"   ":e==="MANUAL_RETRY_NOW"?"  ":"  "}function p_e({caseRecord:e,gates:t,attemptNo:n}){const r=t.find(i=>i.key==="PHONE_VERIFIED"),s=e?.profile.phone;return r?.status!=="PASS"||!s?{success:!1,channelResult:"FAILED",errorCode:"PHONE_INVALID",errorMessage:"      ."}:(e?.alertTags??[]).includes(" ")&&n===1?{success:!1,channelResult:"FAILED",errorCode:"CHANNEL_TEMP_ERROR",errorMessage:"     ."}:{success:!0,channelResult:"SENT"}}const L7={queueSms({caseId:e,idempotencyKey:t}){return{ok:!0,jobId:`agent-job:${e}:${t}`,queuedAt:ut()}},cancelJob(e){return e?{ok:!0}:{ok:!1}}};function $7(e,t){const n=e.find(r=>t.includes(r.key)&&r.status!=="PASS");return n?.failReason??(n?`${n.label}  `:void 0)}function m_e(e){return e==="SUCCESS"?" ":e==="NO_ANSWER"?"":e==="REJECTED"?"":" "}function h_e(e){return e==="CONTACT"?"":e==="BOOKING"?"":""}function g_e(e){const t=e.split("(")[0],n=[...u3,...f3,...p3].find(r=>r.id===t);return n?`${h_e(n.messageType)}  ${n.label}`:e}const gu={HUMAN_FIRST:" ",AI_FIRST:" ",MANUAL_OVERRIDE:" "},F7={HUMAN_FIRST:"border-red-200 bg-red-50 text-red-700",AI_FIRST:"border-blue-200 bg-blue-50 text-blue-700",MANUAL_OVERRIDE:"border-amber-200 bg-amber-50 text-amber-700"},x_e="   ()  ,  /  .",b_e={AGE_OVER_THRESHOLD:"      .",HAS_MCI_HISTORY:"      .",HAS_DEMENTIA_HISTORY:"       .",HAS_COMPLAINT_HISTORY:"       .",HAS_REFUSAL_HISTORY:"       .",GUARDIAN_PRIMARY:"       .",NEEDS_GUARDIAN_SUPPORT:"        .",COMPREHENSION_DIFFICULTY:"       .",STANDARD_CONTACT_PATH:"      .",CALL_RESPONSE_POOR:"       .",SMS_RESPONSE_POOR:"       ."};function U7(e){return e.startsWith(" :")?`   : ${e.replace(" :","").trim()}`:b_e[e]??e}const vi={CONTINUE_SELF:{label:" ",tone:"border-emerald-200 bg-emerald-50 text-emerald-700"},SCHEDULE_LATER:{label:"",tone:"border-blue-200 bg-blue-50 text-blue-700"},REQUEST_GUARDIAN:{label:" ",tone:"border-violet-200 bg-violet-50 text-violet-700"},REQUEST_HUMAN:{label:" ",tone:"border-orange-200 bg-orange-50 text-orange-700"},REFUSE:{label:"/",tone:"border-red-200 bg-red-50 text-red-700"},NO_RESPONSE:{label:" ",tone:"border-gray-200 bg-gray-50 text-gray-600"},CONFUSED:{label:" ",tone:"border-amber-200 bg-amber-50 text-amber-700"},EMOTIONAL:{label:" ",tone:"border-yellow-200 bg-yellow-50 text-yellow-700"}},y_e=["CONTINUE_SELF","SCHEDULE_LATER","REQUEST_GUARDIAN","REQUEST_HUMAN","NO_RESPONSE","REFUSE"],w1={CONFUSION:{label:" ",hint:"     ",tone:"border-amber-200 bg-amber-50 text-amber-700"},EMOTIONAL:{label:" ",hint:"/    ",tone:"border-yellow-200 bg-yellow-50 text-yellow-700"}},Nq={CALL:"CALL_RETRY",SMS:"SMS_RETRY"},B7={CALL:"",SMS:""},v_e={CONTINUE_SELF:"PROCEED",SCHEDULE_LATER:"LATER",REQUEST_GUARDIAN:"PROTECTOR_LINK",REQUEST_HUMAN:"COUNSELOR_LINK",REFUSE:"REJECT",NO_RESPONSE:"NO_RESPONSE",CONFUSED:"HARD_TO_UNDERSTAND",EMOTIONAL:"EMOTIONAL"},ho={HUMAN:"  ",AGENT_SEND_ONLY:"Agent ( )"},RO={HUMAN:"border-blue-200 bg-blue-50 text-blue-700",AGENT_SEND_ONLY:"border-violet-200 bg-violet-50 text-violet-700"},m3={SENT_SUCCESS:" ",SENT_FAILED:" ",NO_RESPONSE:" ",WAITING:" "},Sq={IDLE:"",QUEUED:"",RUNNING:"",SUCCEEDED:"",FAILED:"",CANCELED:""},kO={SENT:"",DELIVERED:" ",FAILED:"",UNKNOWN:" "},oy={RECOMMEND_DIFF:"  ",HOLD:"  ",UPDATE_PLAN:"  "},gm={CENTER_VISIT_BOOKING:{label:"  ",description:"    / ",linkageStatus:"BOOKING_IN_PROGRESS",reservationType:" ",defaultPlace:" "},HOSPITAL_REFERRAL_BOOKING:{label:" /",description:"     ",linkageStatus:"REFERRAL_CREATED",reservationType:" /",defaultPlace:" "},COUNSELING_CENTER_BOOKING:{label:" ",description:"   ",linkageStatus:"BOOKING_DONE",reservationType:" ",defaultPlace:" "},HOLD_TRACKING:{label:"/",description:"   ",linkageStatus:"NOT_CREATED",reservationType:" ",defaultPlace:"/ "}},N_e=[{code:"R1_SELF_REJECT",label:" "},{code:"R2_GUARDIAN_REJECT",label:" "},{code:"R3_OTHER_INSTITUTION",label:"  "},{code:"R4_ALREADY_DIAGNOSED",label:" / "},{code:"R5_CONTACT_INVALID",label:" "},{code:"R6_EMOTIONAL_BACKLASH",label:"  "},{code:"R7_OTHER",label:""}],S_e=[{value:"TEMP",label:" "},{value:"FINAL",label:" "}],Eq=[{step:"PRE_TRIAGE",label:"A.  ",description:"   "},{step:"STRATEGY",label:"B.  ",description:" /  "},{step:"COMPOSE",label:"C.  ",description:"/  "},{step:"SEND",label:"D.  ",description:"   "},{step:"RESPONSE",label:"E.  ",description:"/// "},{step:"OUTCOME",label:"F.  ",description:"// "}],jq=[{step:"PRE_TRIAGE",label:"A.  ",description:"2     "},{step:"STRATEGY",label:"B.  ",description:"     "},{step:"COMPOSE",label:"C.  ",description:"/MCI/AD     "},{step:"SEND",label:"D.  ",description:" // "},{step:"RESPONSE",label:"E.  ",description:"/    "},{step:"OUTCOME",label:"F. /",description:"    "}],wq=[{step:"PRE_TRIAGE",label:"A.   ",description:" /  "},{step:"STRATEGY",label:"A-2.  ",description:"/// "},{step:"COMPOSE",label:"B.  ",description:"/  "},{step:"SEND",label:"B-2. /",description:"/   "},{step:"RESPONSE",label:"C.  ",description:"    "},{step:"OUTCOME",label:"D.  ()",description:"  /  "}],E_e=[{step:"PRE_TRIAGE",label:"A.   ",description:"//   "},{step:"STRATEGY",label:"A-2.  ",description:"  / "},{step:"COMPOSE",label:"B.   ",description:"//  "},{step:"SEND",label:"B-2.  ",description:"// "},{step:"RESPONSE",label:"C.  ",description:"/MCI/    "},{step:"OUTCOME",label:"D.   ",description:" /MCI Stage3/  "}],j_e=[{id:"PRECHECK",title:"  ",description:"/   ",relatedSteps:["PRE_TRIAGE","STRATEGY"],action:"OPEN_PRECHECK"},{id:"CONTACT_EXECUTION",title:" ",description:"   ",relatedSteps:["COMPOSE","SEND"],action:"OPEN_CONTACT_EXECUTION"},{id:"RESPONSE_HANDLING",title:" ",description:" //  ",relatedSteps:["RESPONSE"],action:"OPEN_RESPONSE_HANDLING"},{id:"FOLLOW_UP",title:" ",description:"   ",relatedSteps:["OUTCOME"],action:"OPEN_FOLLOW_UP"}],w_e=[{id:"PRECHECK",title:"  ",description:" /     ",relatedSteps:["PRE_TRIAGE","STRATEGY"],action:"OPEN_PRECHECK"},{id:"CONTACT_EXECUTION",title:"  ",description:"MMSE/CDR//  ",relatedSteps:["COMPOSE","SEND"],action:"OPEN_CONTACT_EXECUTION"},{id:"RESPONSE_HANDLING",title:" ",description:"/MCI/  ",relatedSteps:["RESPONSE"],action:"OPEN_RESPONSE_HANDLING"},{id:"FOLLOW_UP",title:"  ",description:"2 /Stage3/ ",relatedSteps:["OUTCOME"],action:"OPEN_FOLLOW_UP"}],A_e=[{id:"PRECHECK",title:"  ()",description:" /  ",relatedSteps:["PRE_TRIAGE","STRATEGY"],action:"OPEN_PRECHECK"},{id:"CONTACT_EXECUTION",title:"  ",description:"// ",relatedSteps:["COMPOSE","SEND"],action:"OPEN_CONTACT_EXECUTION"},{id:"RESPONSE_HANDLING",title:" ",description:" /  ",relatedSteps:["RESPONSE"],action:"OPEN_RESPONSE_HANDLING"},{id:"FOLLOW_UP",title:" ()",description:"  /  ",relatedSteps:["OUTCOME"],action:"OPEN_FOLLOW_UP"}],__e=[{id:"PRECHECK",title:"  ",description:"//    ",relatedSteps:["PRE_TRIAGE","STRATEGY"],action:"OPEN_PRECHECK"},{id:"CONTACT_EXECUTION",title:"  ",description:" /  /  ",relatedSteps:["COMPOSE","SEND"],action:"OPEN_CONTACT_EXECUTION"},{id:"RESPONSE_HANDLING",title:" ",description:"/MCI/  ",relatedSteps:["RESPONSE"],action:"OPEN_RESPONSE_HANDLING"},{id:"FOLLOW_UP",title:"  ",description:" /MCI Stage3/  ",relatedSteps:["OUTCOME"],action:"OPEN_FOLLOW_UP"}],C_e={OPEN_PRECHECK:"PRECHECK",OPEN_CONTACT_EXECUTION:"CONTACT_EXECUTION",OPEN_RESPONSE_HANDLING:"RESPONSE_HANDLING",OPEN_FOLLOW_UP:"FOLLOW_UP"};function qp(e,t){const n=e.findIndex(o=>o.id===t);if(n<=0)return null;const r=o=>o==="COMPLETED"||o==="READY",s=e.slice(0,n).find(o=>!r(o.status));if(!s)return null;const i=e[n]?.title??"";return`${s.title}    ${i}    .`}const T_e={COMPLETED:{label:"",icon:Si,cardTone:"border-emerald-200 bg-emerald-50/70 text-emerald-900 shadow-sm hover:shadow-emerald-200/70",chipTone:"border border-emerald-200 bg-emerald-100 text-emerald-700",reasonTone:"border-emerald-200 bg-white/70 text-emerald-800"},READY:{label:"",icon:bR,cardTone:"border-cyan-200 bg-cyan-50/80 text-cyan-900 shadow-sm hover:shadow-cyan-200/60",chipTone:"border border-cyan-200 bg-cyan-100 text-cyan-700",reasonTone:"border-cyan-200 bg-white/80 text-cyan-900"},PENDING:{label:"",icon:L1,cardTone:"border-sky-200 bg-sky-50/70 text-slate-900 shadow-sm hover:shadow-sky-200/60",chipTone:"border border-sky-200 bg-sky-100 text-sky-700",reasonTone:"border-sky-200 bg-white/70 text-slate-700"},BLOCKED:{label:"",icon:ea,cardTone:"border-rose-200 bg-rose-50/80 text-rose-900 shadow-inner hover:shadow-rose-200/50",chipTone:"border border-rose-200 bg-rose-100 text-rose-700",reasonTone:"border-rose-200 bg-white/70 text-rose-800"}},Aq={NOT_STARTED:"",SENT:" ",WAITING_RESPONSE:" ",RETRY_NEEDED:" ",HANDOFF_TO_HUMAN:" ",PAUSED:"",STOPPED:"",DONE:""},wg={NOT_CREATED:"",BOOKING_IN_PROGRESS:"",BOOKING_DONE:"",REFERRAL_CREATED:""},xx={NONE:"",RESERVED:" ",CANCELLED:" ",CHANGED:" ",NO_SHOW:""},O_e={RESERVED:"SMS_RESERVATION_RESERVED",CANCELLED:"SMS_RESERVATION_CANCELLED",CHANGED:"SMS_RESERVATION_CHANGED",NO_SHOW:"SMS_RESERVATION_NO_SHOW"};function R_e(e){return e==="CANCELLED"?"SCHEDULE_LATER":e==="NO_SHOW"?"NO_RESPONSE":"CONTINUE_SELF"}function k_e(e){return e==="CANCELLED"?"CANCELLED":e==="CHANGED"?"CHANGED":e==="NO_SHOW"?"NO_SHOW":"RESERVED"}function I_e(e,t,n=!1,r){return h.useMemo(()=>{const s=t==="stage2",i=t==="stage3",o=i?n?__e:A_e:s?w_e:j_e,l=i?n?E_e:wq:s?jq:Eq,c=e.policyGates.filter(_=>_.status==="FAIL").length,u=!!e.preTriageInput&&e.header.dataQuality.level!=="EXCLUDE",m=!!e.preTriageResult?.strategy,p=e.contactExecution.status!=="NOT_STARTED",g=!!(e.contactExecution.lastOutcomeCode||e.contactExecution.lastResponseAt),x=e.linkageStatus!=="NOT_CREATED"||e.contactExecution.status==="DONE"||e.contactExecution.status==="STOPPED",y=new Map(e.contactFlowSteps.map(_=>[_.step,_.status])),v=new Map(l.map(_=>[_.step,_.label])),N=_=>_.map(A=>`${v.get(A)??A}:${y.get(A)??"WAITING"}`).join(" / ");if(r&&r.steps.length===o.length){const A=o.map((M,P)=>{const $=r.steps[P],w=N(M.relatedSteps),U=$.status==="DONE"?"COMPLETED":$.status==="READY"?"READY":"PENDING",X=$.status==="DONE"?"     .":$.status==="READY"?$.requiresHumanApproval?"   .  /  .":"  .   .":"   /    .";return{...M,status:U,reason:$.reason,nextActionHint:X,metricLabel:`${$.label}  ${w}`,isCurrent:!1}}).reduce((M,P,$)=>{if($===0)return M.push(P),M;const w=M[$-1];if(w.status==="COMPLETED"||w.status==="READY")return M.push(P),M;const U=$;return M.push({...P,status:"BLOCKED",reason:`STEP ${U}   ${P.title}    .`,nextActionHint:`STEP ${U}   .`,metricLabel:`    ${N(P.relatedSteps)}`,isCurrent:!1}),M},[]),T=A.findIndex(M=>M.status!=="COMPLETED"&&M.status!=="READY"),R=T===-1?A.length-1:T;return A.map((M,P)=>({...M,isCurrent:P===R}))}if(i){const _=e.stage3,A=u&&m,T=_?.recommendedActions.filter(F=>F.requiresApproval&&F.decision==="PENDING").length??0,R=!!_?.riskReviewedAt,M=_?.diffPathStatus??"NONE",P=M==="SCHEDULED"||M==="COMPLETED",$=M==="COMPLETED",w=_?.programs.some(F=>{const K=F.execution?.status;return K==="PLANNED"||K==="IN_PROGRESS"||K==="DONE"})??!1,U=!!_?.planUpdatedAt||e.linkageStatus!=="NOT_CREATED",X=!!_?.headerMeta.nextTrackingContactAt,G=o.map(F=>{const K=N(F.relatedSteps);return F.id==="PRECHECK"?n?A?R?{...F,status:"COMPLETED",reason:"    .",nextActionHint:"STEP2    .",metricLabel:`     ${K}`,isCurrent:!1}:{...F,status:"PENDING",reason:"STEP1      .",nextActionHint:"    STEP2(  )  .",metricLabel:`      ${K}`,isCurrent:!1}:{...F,status:"PENDING",reason:"        .",nextActionHint:"STEP1        .",metricLabel:`     ${K}`,isCurrent:!1}:A?R?{...F,status:"COMPLETED",reason:"       .",nextActionHint:"      .",metricLabel:`    ${K}`,isCurrent:!1}:{...F,status:"PENDING",reason:"2       .",nextActionHint:"   '   '  .",metricLabel:`    ${K}`,isCurrent:!1}:{...F,status:"PENDING",reason:" (//)    .",nextActionHint:"        .",metricLabel:`   ${K}`,isCurrent:!1}:F.id==="CONTACT_EXECUTION"?n?!A||!R?{...F,status:"BLOCKED",reason:"STEP1        .",nextActionHint:"STEP1(  )  .",metricLabel:`     ${K}`,isCurrent:!1}:P?{...F,status:"COMPLETED",reason:"   .",nextActionHint:"STEP3 /MCI/  .",metricLabel:`     ${K}`,isCurrent:!1}:{...F,status:"PENDING",reason:"  (/ )   .",nextActionHint:"STEP2 MMSE/CDR/  .",metricLabel:`     ${K}`,isCurrent:!1}:!A||!R?{...F,status:"BLOCKED",reason:"STEP1(   )       .",nextActionHint:"STEP1      .",metricLabel:`   ${K}`,isCurrent:!1}:T>0?{...F,status:"PENDING",reason:`   ${T}  .`,nextActionHint:"    / .",metricLabel:`   ${T}  ${K}`,isCurrent:!1}:P?$?{...F,status:"COMPLETED",reason:"    .",nextActionHint:"     .",metricLabel:` ${M}  ${K}`,isCurrent:!1}:{...F,status:"PENDING",reason:"   /   .",nextActionHint:"STEP2  /   .",metricLabel:` ${M}      ${K}`,isCurrent:!1}:{...F,status:"PENDING",reason:"       .",nextActionHint:"   /  .",metricLabel:` ${M}  ${K}`,isCurrent:!1}:F.id==="RESPONSE_HANDLING"?n?P?_?.reevalStatus==="SCHEDULED"||_?.reevalStatus==="COMPLETED"?{...F,status:"COMPLETED",reason:"  .",nextActionHint:"STEP4   .",metricLabel:`    ${K}`,isCurrent:!1}:{...F,status:"PENDING",reason:"/MCI/     .",nextActionHint:"STEP3    .",metricLabel:`    ${K}`,isCurrent:!1}:{...F,status:"BLOCKED",reason:"STEP2       .",nextActionHint:"    .",metricLabel:`    ${K}`,isCurrent:!1}:!$||T>0?{...F,status:"BLOCKED",reason:"           .",nextActionHint:"STEP2     / .",metricLabel:`   ${K}`,isCurrent:!1}:w?{...F,status:"COMPLETED",reason:"    .",nextActionHint:" ()    .",metricLabel:`     ${K}`,isCurrent:!1}:{...F,status:"PENDING",reason:"   (////)   .",nextActionHint:"       .",metricLabel:`    ${K}`,isCurrent:!1}:n?_?.planUpdatedAt?{...F,status:"COMPLETED",reason:"   .",nextActionHint:"/    .",metricLabel:`     ${K}`,isCurrent:!1}:{...F,status:"PENDING",reason:"  ( /MCI Stage3/ )  .",nextActionHint:"STEP4   .",metricLabel:`     ${K}`,isCurrent:!1}:w?U&&X?{...F,status:"COMPLETED",reason:"/        .",nextActionHint:"/    .",metricLabel:` +     ${K}`,isCurrent:!1}:{...F,status:"PENDING",reason:" / /      .",nextActionHint:"      .",metricLabel:`    ${K}`,isCurrent:!1}:{...F,status:"BLOCKED",reason:"    1   ()    .",nextActionHint:"STEP3     .",metricLabel:`    ${K}`,isCurrent:!1}}).reduce((F,K,ne)=>{if(ne===0)return F.push(K),F;const V=F[ne-1];if(V.status==="COMPLETED"||V.status==="READY")return F.push(K),F;const ee=ne;return F.push({...K,status:"BLOCKED",reason:`STEP ${ee}   ${K.title}    .`,nextActionHint:`STEP ${ee}   .`,metricLabel:`    ${N(K.relatedSteps)}`,isCurrent:!1}),F},[]),L=G.findIndex(F=>F.status!=="COMPLETED"&&F.status!=="READY"),H=L===-1?G.length-1:L;return G.map((F,K)=>({...F,isCurrent:K===H}))}const S=o.map(_=>{const A=N(_.relatedSteps);if(_.id==="PRECHECK")return c>0||!u?{..._,status:"BLOCKED",reason:c>0?s?`  ${c}   .`:`  ${c}   .`:s?"      .":"       .",nextActionHint:s?"/      .":" /     .",metricLabel:c>0?`${s?" ":""} FAIL ${c}  ${A}`:`${s?"  ":"  "}  ${A}`,isCurrent:!1}:m?{..._,status:"COMPLETED",reason:s?"2     .":"    .",nextActionHint:s?"/      .":"    / .",metricLabel:`${s?" ":""} ${e.preTriageResult?.strategy??""}  ${A}`,isCurrent:!1}:{..._,status:"PENDING",reason:s?"     .":"      .",nextActionHint:s?" /     .":"       .",metricLabel:`${s?" ":" "}   ${A}`,isCurrent:!1};if(_.id==="CONTACT_EXECUTION"){const R=(e.header.effectiveStrategy??e.preTriageResult?.strategy)==="AI_FIRST"&&e.contactExecutor==="AGENT_SEND_ONLY"?s?"Agent      ":"Agent      ":_.description;return!u||!m?{..._,description:R,status:"BLOCKED",reason:s?"    /  .":"      .",nextActionHint:s?"      .":"       .",metricLabel:`${s?" ":""}   ${A}`,isCurrent:!1}:p?{..._,description:R,status:"COMPLETED",reason:e.contactExecutor==="AGENT_SEND_ONLY"?s?"Agent    /   .":"Agent   .":s?"/   .":"   .",nextActionHint:s?"/      .":"      .",metricLabel:`${Aq[e.contactExecution.status]}  ${ho[e.contactExecutor]}  ${A}`,isCurrent:!1}:{..._,description:R,status:"PENDING",reason:e.contactExecutor==="AGENT_SEND_ONLY"?s?"Agent     .":"Agent      .":s?" /   .":" /   .",nextActionHint:e.contactExecutor==="AGENT_SEND_ONLY"?s?"/   Agent     .":"   Agent     .":s?"/      .":"/    1  .",metricLabel:`${s?" ":""}  ${ho[e.contactExecutor]}  ${A}`,isCurrent:!1}}return _.id==="RESPONSE_HANDLING"?p?g?{..._,status:"COMPLETED",reason:s?"/   .":"     .",nextActionHint:s?"/      .":"   // .",metricLabel:e.contactExecution.lastOutcomeCode?`${vi[e.contactExecution.lastOutcomeCode].label}  ${A}`:`${s?"  ":"  "}  ${A}`,isCurrent:!1}:{..._,status:"PENDING",reason:s?"     .":"     .",nextActionHint:s?"       .":"       .",metricLabel:`${s?"   ":"  "}  ${A}`,isCurrent:!1}:{..._,status:"BLOCKED",reason:s?"/   /   .":"       .",nextActionHint:s?"/     .":"    / .",metricLabel:`${s?"  ":" "}  ${A}`,isCurrent:!1}:g?x?{..._,status:"COMPLETED",reason:s?"     .":"    .",nextActionHint:s?"       .":"      .",metricLabel:`${wg[e.linkageStatus]}  ${A}`,isCurrent:!1}:{..._,status:"PENDING",reason:s?"      .":"      .",nextActionHint:s?"       .":"   // .",metricLabel:`${wg[e.linkageStatus]}  ${A}`,isCurrent:!1}:{..._,status:"BLOCKED",reason:s?"/    /   .":"       .",nextActionHint:s?"/     .":"   Outcome  .",metricLabel:`${wg[e.linkageStatus]}  ${A}`,isCurrent:!1}}),j=S.findIndex(_=>_.status!=="COMPLETED"&&_.status!=="READY"),C=j===-1?S.length-1:j;return S.map((_,A)=>({..._,isCurrent:A===C}))},[e,t,r,n])}function D_e(e){const t=e?.profile.age??70,n=!!e?.profile.guardianPhone,r=e?.quality===""||!!e?.alertTags.includes(" "),s=e?.status===""||!!e?.alertTags.includes(" "),i=!n&&t>=75,o=t>=80||e?.risk==="",l=!!(e?.alertTags.includes("High MCI")||e?.alertTags.includes(" ")),c=e?.risk===""&&t>=80;return{age:t,dxHistory:{hasMCI:l,hasDementia:c},contactHistory:{hasComplaint:r,hasRefusal:s,needsGuardian:i,comprehensionDifficultyFlag:o},guardian:{exists:n,isPrimaryContact:n&&(i||o)},responseHistory:{smsResponseGood:e?.risk!=="",callResponseGood:e?.status!=="",lastOutcome:e?.status===""?"NO_RESPONSE":void 0}}}function _q(e){return qz(e)}function Cq(e,t){if(!t)return e;const n=t==="AGENT"?"AI_FIRST":"HUMAN_FIRST";if(e.strategy===n)return e;const r=t==="AGENT"?"CONTACT_MODE_HINT_AGENT":"CONTACT_MODE_HINT_HUMAN",s=t==="AGENT"?"    /    .      .":"       .      .";return{strategy:n,triggers:[...e.triggers,r],policyNote:s,confidence:"RULE"}}function Tq(e,t,n="stage1"){const r=n==="stage2",s=n==="stage3",i=r?t?.profile.guardianPhone?"S2_CONTACT_RELIEF":"S2_CONTACT_BASE":s?"S3_CONTACT_BASE":t?.profile.guardianPhone?"S1_CONTACT_GUARDIAN":"S1_CONTACT_BASE",o=r?"S2_CONTACT_BASE":s?"S3_CONTACT_BASE":"S1_CONTACT_BASE";return e==="HUMAN_FIRST"?{channel:"HYBRID",templateId:i,maxRetryPolicy:{maxRetries:3,intervalHours:24}}:{channel:"SMS",templateId:o,maxRetryPolicy:{maxRetries:2,intervalHours:24}}}function P_e(e){if(!e)return{status:"NOT_STARTED",retryCount:0};const t=PAe(e.updated);return e.status===""?{status:"DONE",retryCount:1,lastSentAt:t,lastResponseAt:t,lastOutcomeCode:"CONTINUE_SELF"}:e.status===""?{status:"RETRY_NEEDED",retryCount:2,lastSentAt:t,lastOutcomeCode:"NO_RESPONSE"}:e.status===""?{status:"RETRY_NEEDED",retryCount:1,lastSentAt:t,lastOutcomeCode:"NO_RESPONSE"}:e.status===""?{status:"WAITING_RESPONSE",retryCount:1,lastSentAt:t}:{status:"NOT_STARTED",retryCount:0}}function Ys(e,t,n="NOT_CREATED",r="stage1"){const s=!!t,i=!!t?.strategy,o=e.status!=="NOT_STARTED",l=!!(e.lastOutcomeCode||e.lastResponseAt),c=e.status==="HANDOFF_TO_HUMAN"||e.status==="STOPPED"||e.status==="RETRY_NEEDED";return(r==="stage2"?jq:r==="stage3"?wq:Eq).map(({step:m,label:p,description:g})=>{let x="WAITING";return m==="PRE_TRIAGE"?x=s?"DONE":"MISSING":m==="STRATEGY"?x=i?"DONE":"MISSING":m==="COMPOSE"?x=i?o||r==="stage3"?"DONE":"WAITING":"MISSING":m==="SEND"?x=o||r==="stage3"?l?"DONE":"WAITING":"MISSING":m==="RESPONSE"?x=l?c?"WARNING":"DONE":o||r==="stage3"?"WAITING":"MISSING":m==="OUTCOME"&&(l?n==="NOT_CREATED"?x="WAITING":x="DONE":x="MISSING"),{step:m,label:p,status:x,description:g}})}function h3(e){return e.map(t=>({id:t.id,type:t.messageType,label:t.label,body:n=>t.body({caseId:n.caseAlias??"CASE",centerName:n.centerName,centerPhone:n.centerPhone,guideLink:n.guideLink,reservationLink:n.bookingLink,unsubscribe:n.optOut??xq})}))}const M_e=h3(u3),L_e=h3(f3),$_e=h3(p3);function Oq({caseId:e,caseRecord:t,onHeaderSummaryChange:n,onPrimaryActionChange:r,mode:s="stage1",surfaceStage:i}){const o=t?.id??e,l=s==="stage2",c=s==="stage3",u=c&&i==="Stage 2",m=l||u?"2":c?"3":"1",p=FN(o),g=oje(o),x=Yz(c?o:null),y=x?.source.profile?.stage3Type??t?.profile.stage3Type??(x?.source.profile?.originStage2Result==="AD"?"AD_MANAGEMENT":void 0),v=p?.computed.evidence.stage2,N=p?.computed.evidence.stage3,S=p?.computed.model2,j=p?.computed.model3,C=!!S?.available,_=!!j?.available,A=v?.missing??[],T=N?.missing??[],R=l?f3:c?p3:u3,M=l?L_e:c?$_e:M_e,P=R[0]?.id??"",$=M1(),[w,U]=h.useState(()=>g_(t,s,u)),[X,I]=h.useState(()=>I7(t,g_(t,s,u),s,u)),[G,L]=h.useState("ALL"),[H,F]=h.useState(null),[K,ne]=h.useState("citizen"),[V,ee]=h.useState(!1),[ae,ue]=h.useState(0),[ce,Z]=h.useState(""),[ie,Se]=h.useState("SUCCESS"),[fe,Te]=h.useState({citizen:!0,guardian:!1}),[Pe,oe]=h.useState(P),[le,ye]=h.useState("NOW"),[_e,te]=h.useState(""),[z,Ne]=h.useState(!0),[me,xe]=h.useState(null),[et,Fe]=h.useState(null),[pt,St]=h.useState(!1),[qe,rn]=h.useState(Date.now()),[at,jt]=h.useState(mt(24)),[It,an]=h.useState(!1),[Ut,Ht]=h.useState(""),[qt,Tn]=h.useState("HUMAN_FIRST"),[hn,ar]=h.useState(null),[yt,Ve]=h.useState(""),[Xt,On]=h.useState(!0),[Rn,Or]=h.useState(!1),[Ee,ze]=h.useState(null),[ht,pn]=h.useState(""),[En,lr]=h.useState("ALL"),[jn,Qe]=h.useState(!1),[sr,bn]=h.useState(null),[Ke,Be]=h.useState({owner:t?.manager??Kl,status:"PLANNED",method:""}),[Me,xt]=h.useState({diffNeeded:!0,diffDecisionSet:!0,diffDecisionReason:"",priority:"HIGH",caregiverNeeded:!1,sensitiveHistory:!1,resultLinkedChecked:!1,consentConfirmed:!1,strategyMemo:""}),[Le,$t]=h.useState({orgName:" ",orgPhone:"02-555-0199",preferredHospital:" ",preferredTimeWindow:"  14:00~16:00",caregiverCompanion:!1,mobilityIssue:!1,testBiomarker:!0,testBrainImaging:!0,testOther:!1,bookingAt:mt(72),bookingAltAt:mt(96),bookingConfirmed:!1,prepGuide:"/ /   ",note:"",resultSummary:"",resultLabel:"",riskReady:!1,resultPerformedAt:"",biomarkerResultText:"",imagingResultText:"",abeta:"",tau:""}),[Bt,Zn]=h.useState({consultStarted:!1,infoCollected:!1,ragGenerated:!1,bookingConfirmed:!1,messageSent:!1,calendarSynced:!1}),[Mn,Ur]=h.useState("REVIEW"),[bt,ms]=h.useState(null),[Dr,jo]=h.useState({memo:"",nextAction:"RECOMMEND_DIFF"}),[jr,Fn]=h.useState({nextTrackingAt:mt(504),reminderDaysBefore:2,reminderTime:"09:00",retryCount:2}),[Br,Jt]=h.useState(null),[Kt,Ai]=h.useState(!1),[hr,gr]=h.useState(!1),[Ps,Ba]=h.useState({}),Gr=h.useRef({}),[la,ca]=h.useState({code:null,level:"TEMP",detail:"",createFollowupEvent:!1,followupAt:mt(168)}),[Ga,ta]=h.useState({strategy:null,channel:"CALL",assigneeId:t?.manager??Kl,nextContactAt:mt(24),applyL3:!1}),[na,ns]=h.useState([]),[Ha,wr]=h.useState(null),[da,hs]=h.useState(!1),[ai,Pr]=h.useState(null),[ua,Hr]=h.useState(null),[xl,Ms]=h.useState(!1),cr=h.useRef(!1),Bi=h.useRef(new Set),[Ls,wn]=h.useState([]),[ra,Gi]=h.useState(!1),[rs,Q]=h.useState(null),[pe,Ge]=h.useState(""),[st,it]=h.useState({route:"CENTER_VISIT_BOOKING",scheduledAt:mt(72),place:gm.CENTER_VISIT_BOOKING.defaultPlace,contactGuide:Ko,note:"",stage2Decision:"KEEP_STAGE1"}),[Ce,Dt]=h.useState(()=>R7(t,p)),[zt,cn]=h.useState(()=>j1(t)),[gn,Vn]=h.useState(""),[zu,as]=h.useState(!1),[fa,$s]=h.useState(""),[aa,bl]=h.useState(" "),[Mr,Ed]=h.useState(mt(72)),[kn,yl]=h.useState("HOSPITAL_REFERRAL"),[xr,jd]=h.useState({specialist:!0,mmse:!0,cdrOrGds:!0,neuroCognitive:!0}),[$h,Fh]=h.useState({gdsk:!1,adl:!1,bpsd:!1}),[Fs,si]=h.useState(!1),[ss,vl]=h.useState(""),[An,ya]=h.useState({}),J=h.useRef({}),be=h.useRef({}),[Ie,Je]=h.useState({sourceOrg:" "}),[ot,ct]=h.useState(null),[wt,Vt]=h.useState(!1),[xn,Kr]=h.useState(null),pa=h.useRef(null),[ln,Lr]=h.useState({status:"PENDING",minDurationSec:45,maxDurationSec:160}),[Wn,Us]=h.useState({status:"PENDING",minDurationSec:60,maxDurationSec:180}),[wd,Zt]=h.useState(!1),[va]=h.useState(()=>t?.created??mt(-96)),[Na]=h.useState(()=>mt(240)),[Uh,qu]=h.useState(void 0),Hi=["step1Consent","step1Plan","step1StrategyMemo","manualEditReason","mmse","cdr","neuro","specialist","classification","rationale","overrideReason","nextStep"],Sa=h.useCallback(k=>B=>{J.current[k]=B},[]),Bs=h.useCallback(k=>{ya(k);const B=Hi.find(de=>!!k[de]);if(!B)return!1;const Y=J.current[B];return Y&&(Y.scrollIntoView({behavior:"smooth",block:"center"}),"focus"in Y&&typeof Y.focus=="function"&&Y.focus()),!0},[Hi]),$r=h.useCallback(k=>{ya(B=>{if(!B[k])return B;const Y={...B};return delete Y[k],Y})},[]),Vu=h.useCallback(k=>{const B=J.current[k];if(!B){(k==="mmse"||k==="cdr"||k==="neuro"||k==="specialist"||k==="manualEditReason")&&ze("CONTACT_EXECUTION");return}B.scrollIntoView({behavior:"smooth",block:"center"}),"focus"in B&&typeof B.focus=="function"&&B.focus()},[]),Wu=h.useMemo(()=>Hi.filter(k=>!!An[k]).map(k=>({key:k,message:An[k]})),[Hi,An]),wo=h.useCallback((k,B)=>he(B,An[k]?"border-rose-400 bg-rose-50 text-rose-900 placeholder:text-rose-400 focus:border-rose-500":""),[An]),sS=h.useCallback(k=>B=>{be.current[k]=B},[]),Sc={PRECHECK:["step1DiffDecision","step1Consent","step1DiffReason","step1StrategyMemo"],CONTACT_EXECUTION:["step2CallRecord","step2Hospital","step2TestSelection","step2BookingAt","step2PerformedAt","step2BiomarkerResult","step2ImagingResult","step2ResultSummary"],RESPONSE_HANDLING:[],FOLLOW_UP:[]},ii=h.useCallback(k=>B=>{Gr.current[k]=B},[]),Ea=h.useCallback((k,B)=>{Ba(Y=>{const de=Y[k];if(!de?.[B])return Y;const re={...de};return delete re[B],{...Y,[k]:re}})},[]),Ao=h.useCallback((k,B,Y)=>he(Y,Ps[k]?.[B]?"border-rose-400 bg-rose-50 text-rose-900 placeholder:text-rose-400 focus:border-rose-500":""),[Ps]),Nl=h.useCallback((k,B)=>{Ba(re=>({...re,[k]:B}));const Y=Sc[k].find(re=>!!B[re]);if(!Y)return!1;const de=Gr.current[Y];return de&&(de.scrollIntoView({behavior:"smooth",block:"center"}),"focus"in de&&typeof de.focus=="function"&&de.focus()),!0},[Sc]),ip=h.useCallback(k=>{const B=Gr.current[k];B&&(B.scrollIntoView({behavior:"smooth",block:"center"}),"focus"in B&&typeof B.focus=="function"&&B.focus())},[]),[zx,_i]=h.useState(!1),[op,Bh]=h.useState(""),[Hn,Ad]=h.useState({status:"IDLE",attemptNo:0}),_o=h.useRef(0),Sl=h.useRef(new Set),Gh=h.useRef(new Set),lp=h.useRef(!1),{isSaving:Co,submitError:cp,calendarFailures:_d,retryingKeys:Hh,submit:Cd,retryCalendarFailure:qx,clearSubmitError:To}=Ewe();h.useEffect(()=>{const k=g_(t,s,u);U(k),I(I7(t,k,s,u)),L("ALL"),F(null),ne("citizen"),ee(!1),ue(0),Z(""),Se("SUCCESS"),Te({citizen:!0,guardian:!1}),oe(P),ye("NOW"),te(""),Ne(!0),xe(null),Fe(null),St(!1),jt(mt(24)),On(!0),Or(!1),ze(null),pn(""),lr("ALL"),Qe(!1),bn(null),Be({owner:t?.manager??Kl,status:"PLANNED",method:""}),xt({diffNeeded:!0,diffDecisionSet:!0,diffDecisionReason:"",priority:t?.risk===""?"HIGH":t?.risk===""?"MID":"LOW",caregiverNeeded:!!t?.profile.guardianPhone,sensitiveHistory:!!t?.alertTags.includes(" "),resultLinkedChecked:!1,consentConfirmed:!1,strategyMemo:""}),$t({orgName:" ",orgPhone:Ko,preferredHospital:" ",preferredTimeWindow:"  14:00~16:00",caregiverCompanion:!1,mobilityIssue:!1,testBiomarker:!0,testBrainImaging:!0,testOther:!1,bookingAt:mt(72),bookingAltAt:mt(96),bookingConfirmed:!1,prepGuide:"/ /   ",note:"",resultSummary:"",resultLabel:"",riskReady:!1,resultPerformedAt:"",biomarkerResultText:"",imagingResultText:"",abeta:"",tau:""}),Zn({consultStarted:!1,infoCollected:!1,ragGenerated:!1,bookingConfirmed:!1,messageSent:!1,calendarSynced:!1}),Ur("REVIEW"),ms(null),jo({memo:"",nextAction:"RECOMMEND_DIFF"}),Fn({nextTrackingAt:mt((k.stage3?.headerMeta.trackingCycleDays??21)*24),reminderDaysBefore:2,reminderTime:"09:00",retryCount:2}),Jt(null),Ai(!1),gr(!1),Ba({}),ar(null),Ve(""),ca({code:null,level:"TEMP",detail:"",createFollowupEvent:!1,followupAt:mt(168)}),ta({strategy:null,channel:"CALL",assigneeId:t?.manager??Kl,nextContactAt:mt(24),applyL3:!1}),ns([]),wr(null),hs(!1),Pr(null),Hr(null),Ms(!1),cr.current=!1,Bi.current=new Set,wn([]),Gi(!1),Q(null),Ge(""),it({route:"CENTER_VISIT_BOOKING",scheduledAt:mt(72),place:gm.CENTER_VISIT_BOOKING.defaultPlace,contactGuide:Ko,note:"",stage2Decision:"KEEP_STAGE1"});const B=R7(t,p);Dt(B),cn(B.classification?.label??j1(t)),Vn(""),as(!1),$s(""),bl(" "),Ed(mt(72)),yl("HOSPITAL_REFERRAL"),jd({specialist:!0,mmse:!0,cdrOrGds:!0,neuroCognitive:!0}),Fh({gdsk:!1,adl:!1,bpsd:!1}),si(!1),vl(""),ya({}),Je({sourceOrg:" "}),ct(null),Vt(!1),Kr(null),pa.current=null,Lr({status:"PENDING",minDurationSec:45,maxDurationSec:160}),Us({status:"PENDING",minDurationSec:60,maxDurationSec:180}),Zt(!1),qu(void 0),Ad({status:"IDLE",attemptNo:0}),_o.current=0,Sl.current=new Set,Gh.current=new Set,lp.current=!1,To()},[t?.id,To,P,u,s]);const Ar=!!((l||u)&&p?.stage===2&&p.operationStep==="WAITING"&&!p.computed.model2.available),Vx=h.useMemo(()=>w.timeline.some(k=>typeof k.summary=="string"&&k.summary.includes("STAGE1_GATE_DONE")),[w.timeline]),Oo=!!(s==="stage1"&&p?.stage===1&&p.operationStep==="WAITING"&&p.modelStatus==="PENDING"&&!Vx&&jAe.has(p.caseId));h.useEffect(()=>{Ar&&(Dt({status:"NOT_STARTED",tests:{specialist:!1,mmse:void 0,cdr:void 0,neuroCognitiveType:void 0},classification:void 0,nextStep:void 0}),as(!1),Vn(""),U(k=>({...k,timeline:k.timeline.filter(B=>B.type==="STATUS_CHANGE"||B.type==="LEVEL_CHANGE"),stage3:k.stage3?{...k.stage3,riskReviewedAt:void 0,triggersReviewedAt:void 0,planUpdatedAt:void 0,headerMeta:{...k.stage3.headerMeta,opsStatus:"REEVAL_PENDING"}}:k.stage3})))},[Ar]),h.useEffect(()=>{Oo&&U(k=>({...k,timeline:k.timeline.filter(B=>B.type==="STATUS_CHANGE"||B.type==="LEVEL_CHANGE"),contactExecution:{...k.contactExecution,status:"NOT_STARTED",lastSentAt:void 0,lastResponseAt:void 0,lastOutcomeCode:void 0,retryCount:0}}))},[Oo]);const El=h.useMemo(()=>w.timeline.find(k=>k.type==="SMS_SENT"||k.type==="AGENT_SMS_SENT")?.at??w.contactExecution.lastSentAt??null,[w.contactExecution.lastSentAt,w.timeline]);h.useEffect(()=>{El&&U(k=>k.lastSmsSentAt===El?k:{...k,lastSmsSentAt:El})},[El]),h.useEffect(()=>{Lr(k=>k.status==="RUNNING"||!C?k:{...k,status:"DONE",updatedAt:S?.updatedAt??k.updatedAt??ut(),completedAt:S?.updatedAt??k.completedAt??ut(),progress:100,etaSeconds:0,recommendedLabel:Fy(S?.predictedLabel)})},[S?.predictedLabel,S?.updatedAt,C]),h.useEffect(()=>{Us(k=>k.status==="RUNNING"||!_?k:{...k,status:"DONE",updatedAt:j?.updatedAt??k.updatedAt??ut(),completedAt:j?.updatedAt??k.completedAt??ut(),progress:100,etaSeconds:0})},[j?.updatedAt,_]),h.useEffect(()=>{const k=window.setInterval(()=>rn(Date.now()),1e3);return()=>window.clearInterval(k)},[]),h.useEffect(()=>{if(!V)return;const k=window.setInterval(()=>{ue(B=>B+1)},1e3);return()=>window.clearInterval(k)},[V]),h.useEffect(()=>{if(!(H==="CONTACT_EXECUTION"||c&&Ee==="CONTACT_EXECUTION"))return;Gi(!0);const B=window.setTimeout(()=>{const Y=o_e(w,s);wn(Y);const de=Y[0];Q(de?.id??null),Ge(de?.scriptBody??""),Gi(!1)},180);return()=>window.clearTimeout(B)},[H,w,c,s,Ee]);const Ec=h.useMemo(()=>W2e(),[]),iS=h.useMemo(()=>w.todos.find(k=>k.status==="OPEN"),[w.todos]),Td=h.useMemo(()=>G==="ALL"?w.timeline:w.timeline.filter(k=>l_e(k)===G),[w.timeline,G]),Kh=h.useMemo(()=>w.reservation?.source==="SMS"||w.timeline.some(k=>k.type==="SMS_RESERVATION_RESERVED"||k.type==="SMS_RESERVATION_CANCELLED"||k.type==="SMS_RESERVATION_CHANGED"||k.type==="SMS_RESERVATION_NO_SHOW")||g.some(k=>k.type==="BOOKING_CONFIRMED"&&String(k.payload?.source??"").toLowerCase()==="citizen"),[w.reservation?.source,w.timeline,g]),dp=h.useMemo(()=>R.find(k=>k.id===Pe)??R[0],[R,Pe]),zh=h.useMemo(()=>dp.body({caseId:w.header.caseId,centerName:m_,centerPhone:Ko,guideLink:kAe,reservationLink:$y(w.reservationInfo),unsubscribe:xq}),[w.header.caseId,w.reservationInfo,dp]),Gs=h.useMemo(()=>Ls.find(k=>k.id===rs)??null,[Ls,rs]),qh=h.useMemo(()=>MAe(s,Gs??void 0),[s,Gs]),Vh=h.useMemo(()=>w.contactExecutor==="AGENT_SEND_ONLY"?M.filter(k=>k.type!=="BOOKING"):w.reservationInfo?M:M.filter(k=>k.type!=="BOOKING"),[w.contactExecutor,w.reservationInfo,M]),Wh=!!t?.profile.guardianPhone,oS=$7(w.policyGates,["CONSENT_OK","CONTACTABLE_TIME_OK","PHONE_VERIFIED"]),lS=$7(w.policyGates,["CONSENT_OK","CONTACTABLE_TIME_OK","PHONE_VERIFIED"]),cS=oS??(K==="guardian"&&!Wh?"  ":void 0);lS??((fe.guardian&&!Wh||!fe.citizen&&!fe.guardian)&&!fe.citizen&&fe.guardian);const Wx=[w.preTriageInput?.contactHistory.hasComplaint?" ":null,w.preTriageInput?.contactHistory.hasRefusal?" ":null].filter(Boolean);new Date(qe).getHours();const We=h.useCallback(k=>{const B={id:`audit-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,at:dt(ut()),actor:w.header.assigneeName||Kl,message:k};I(Y=>[B,...Y])},[w.header.assigneeName]),Ci=k=>k.type==="CALL_ATTEMPT"?"CONTACT_RESULT":k.type==="SMS_SENT"||k.type==="MESSAGE_SENT"||k.type==="AGENT_SMS_SENT"?"CONTACT_SENT":k.type==="SMS_RESERVATION_RESERVED"||k.type==="SMS_RESERVATION_CHANGED"?"BOOKING_CONFIRMED":k.type==="SMS_RESERVATION_CANCELLED"||k.type==="SMS_RESERVATION_NO_SHOW"?"CONTACT_RESULT":k.type==="LINKAGE_CREATED"?"BOOKING_CREATED":k.type==="LINKAGE_APPROVED"||k.type==="LINKAGE_COMPLETED"?"BOOKING_CONFIRMED":k.type==="DIFF_SCHEDULED"?"STAGE3_DIFF_SCHEDULED":k.type==="DIFF_RESULT_APPLIED"?"STAGE3_RESULTS_RECORDED":k.type==="RISK_SERIES_UPDATED"||k.type==="RISK_REVIEWED"?"STAGE3_RISK_UPDATED":k.type==="STAGE2_PLAN_CONFIRMED"?"STAGE2_PLAN_CONFIRMED":k.type==="STAGE2_RESULTS_RECORDED"||k.type==="STAGE2_STEP2_AUTOFILL_APPLIED"||k.type==="STAGE2_MANUAL_EDIT_APPLIED"?"STAGE2_RESULTS_RECORDED":k.type==="STAGE2_CLASS_CONFIRMED"?"STAGE2_CLASS_CONFIRMED":k.type==="STAGE2_NEXT_STEP_SET"?"STAGE2_NEXT_STEP_SET":k.type==="INFERENCE_REQUESTED"?"INFERENCE_REQUESTED":k.type==="INFERENCE_STARTED"?"INFERENCE_STARTED":k.type==="INFERENCE_PROGRESS"?"INFERENCE_PROGRESS":k.type==="INFERENCE_COMPLETED"?"INFERENCE_COMPLETED":k.type==="INFERENCE_FAILED"?"INFERENCE_FAILED":k.type==="STATUS_CHANGE"&&(k.from.includes("Stage")||k.to.includes("Stage"))?"STAGE_CHANGE":"DATA_SYNCED",Ye=k=>{U(B=>({...B,timeline:[k,...B.timeline]})),t?.id&&Za(t.id,Ci(k),{timelineType:k.type,at:k.at},w.header.assigneeName)},Yh=h.useCallback(k=>{const B=k_e(k.status),Y=O_e[B],de=R_e(B),re=k.updatedAt||k.createdAt||ut(),Oe=k.programName||k.programType||" ",je=`${Oe}  ${xx[B]}`,nt=B==="CANCELLED"?"    .     .":B==="NO_SHOW"?"   .    .":`    ${k.scheduledAt?` (${dt(k.scheduledAt)})`:""}.`,Mt=w.timeline.find(ke=>ke.type==="SMS_SENT"),$e=Mt?.status==="PENDING"||Mt?.status==="FAILED"||!Mt&&!w.lastSmsSentAt;U(ke=>{const Et=k.lastSmsSentAt??ke.lastSmsSentAt??ke.contactExecution.lastSentAt??re,Pn=ke.contactExecution.status==="NOT_STARTED"?"WAITING_RESPONSE":ke.contactExecution.status,Ct=B==="RESERVED"||B==="CHANGED"?"BOOKING_DONE":ke.linkageStatus,Kn={...ke.contactExecution,status:Pn,lastSentAt:ke.contactExecution.lastSentAt??Et,lastResponseAt:re,lastOutcomeCode:de},br={source:"SMS",status:B,programType:k.programType??ke.reservation?.programType,programName:Oe,scheduledAt:k.scheduledAt??ke.reservation?.scheduledAt,locationName:k.locationName??ke.reservation?.locationName,options:k.options??ke.reservation?.options,createdAt:ke.reservation?.createdAt??k.createdAt??re,updatedAt:re,createdBy:k.createdBy==="AGENT"?"AGENT":k.createdBy==="STAFF"?"STAFF":"CITIZEN",reservationId:k.reservationId??ke.reservation?.reservationId},Ln=B==="RESERVED"||B==="CHANGED"?{route:ke.reservationInfo?.route??"CENTER_VISIT_BOOKING",reservationType:k.programType??ke.reservationInfo?.reservationType??" ",scheduledAt:k.scheduledAt??ke.reservationInfo?.scheduledAt,place:k.locationName??ke.reservationInfo?.place,contactGuide:ke.reservationInfo?.contactGuide??Ko,note:k.note??ke.reservationInfo?.note}:ke.reservationInfo;return{...ke,lastSmsSentAt:Et,reservation:br,reservationInfo:Ln,linkageStatus:Ct,contactExecution:Kn,contactFlowSteps:Ys(Kn,ke.preTriageResult,Ct,s)}}),Ye({type:Y,at:re,actor:"CITIZEN",source:"SMS",summary:`[SMS]   ${xx[B]}`,reservationId:k.reservationId,programName:Oe,scheduledAt:k.scheduledAt,by:w.header.assigneeName}),We(`[SMS]  : ${je}`),$e&&(Ye({type:"INCONSISTENT_SMS_STATUS",at:re,summary:"       .",detail:Mt?`   ${Mt.status}`:"   .",reservationId:k.reservationId,by:w.header.assigneeName}),We("INCONSISTENT_SMS_STATUS:     ")),cr.current?Hr(ke=>ke??{source:"SMS",outcome:de,summary:"       .",autoFilledAt:re,manualOverriddenAt:ut()}):(ar(de),Ve(nt),ns(ke=>ke),wr(null),hs(!1),Pr(re),Hr({source:"SMS",outcome:de,summary:nt,autoFilledAt:re}))},[We,w.header.assigneeName,w.lastSmsSentAt,w.timeline,s]);h.useEffect(()=>{if(typeof window>"u")return;const k=()=>{const de=ZB();de.length&&de.filter(re=>qne(re,{caseId:w.header.caseId,phoneCandidates:[t?.profile.phone,t?.profile.guardianPhone,p?.patient.phone,p?.patient.caregiverPhone]})).sort((re,Oe)=>re.updatedAt.localeCompare(Oe.updatedAt)).forEach(re=>{const Oe=`${re.reservationId??re.eventId}:${re.status}:${re.updatedAt}`;Bi.current.has(Oe)||(Bi.current.add(Oe),Yh(re))})};k();const B=window.setInterval(k,5e3),Y=de=>{de.key===RR&&k()};return window.addEventListener("storage",Y),()=>{window.clearInterval(B),window.removeEventListener("storage",Y)}},[Yh,t?.profile.guardianPhone,t?.profile.phone,w.header.caseId,p?.patient.caregiverPhone,p?.patient.phone]);const Yu=h.useCallback(k=>ot?k==="cdr"?ot.cdr!=null||ot.gds!=null:ot[k]!=null:!1,[ot]);h.useEffect(()=>{if(!u||Ee!=="CONTACT_EXECUTION"||!t?.id)return;let k=!0;Vt(!0),Kr(null);const B=_Ae(t,p?.classification,p?.riskScore),Y=de=>{const re=CAe(de,B),Oe=re.cdr??re.gds;ct(re),Je(je=>({...je,lastSyncedAt:re.syncedAt,receivedAt:re.receivedMeta.receivedAt??je.receivedAt,sourceOrg:re.receivedMeta.providerName??je.sourceOrg})),Dt(je=>{const nt=kn==="HOSPITAL_REFERRAL"?"HOSPITAL":"CENTER",Mt={...je.tests,mmse:re.mmse??je.tests.mmse,cdr:Oe??je.tests.cdr,neuroCognitiveType:re.cogTestType??je.tests.neuroCognitiveType,specialist:re.specialistOpinionStatus!=null?re.specialistOpinionStatus==="DONE":je.tests.specialist};return{...je,tests:Mt,status:jg(Mt,!!je.classification?.label,nt)}}),pa.current={mmse:re.mmse??null,cdr:Oe??null,neuro:re.cogTestType??null,specialist:re.specialistOpinionStatus!=null?re.specialistOpinionStatus==="DONE":null},Ye({type:"STAGE2_STEP2_AUTOFILL_APPLIED",at:re.syncedAt,by:w.header.assigneeName,summary:`source=${re.source}  fields=${(re.filledFields??[]).join(", ")||"-"}`}),We(`STEP2_AUTOFILL_APPLIED: ${re.source}   ${re.missingRequiredCount}   ${dt(re.syncedAt)}`)};return bje(t.id).then(de=>{k&&Y(de.item)}).catch(de=>{if(!k)return;const re=de instanceof Error?de.message:"  ",Oe=gq(t.id,B);Kr(`${re}    `),Y(Oe),De("STEP2       .")}).finally(()=>{k&&Vt(!1)}),()=>{k=!1}},[We,t?.id,w.header.assigneeName,u,p?.classification,p?.riskScore,kn,Ee]);const Qh=h.useCallback(()=>{const k=pa.current;if(!k)return{};const B={},Y=typeof Ce.tests.mmse=="number"?Ce.tests.mmse:null,de=typeof Ce.tests.cdr=="number"?Ce.tests.cdr:null,re=Ce.tests.neuroCognitiveType??null,Oe=Ce.tests.specialist??!1;return k.mmse!==Y&&(B.mmse=Y),k.cdr!==de&&(B.cdr=de),k.neuro!==re&&(B.cogTestType=re),k.specialist!=null&&k.specialist!==Oe&&(B.specialistOpinionStatus=Oe?"DONE":"MISSING"),B},[Ce.tests.cdr,Ce.tests.mmse,Ce.tests.neuroCognitiveType,Ce.tests.specialist]),Qu=()=>{const k=Qh(),B=Mp(_n,kn,xr),Y=Object.keys(k).length>0;if((Fs||Y)&&ss.trim().length<5&&(B.manualEditReason="   5  ."),Bs(B))return De.error(" /    ."),!1;ya({});const de=!!Ce.classification?.label,re=jg(_n,de,Aa),Oe=computeStage2MissingFields(_n,kn,xr);if(Dt(je=>({...je,status:re})),Je(je=>({...je,receivedAt:Oe.length===0?ut():je.receivedAt,lastSyncedAt:ut(),sourceOrg:aa||je.sourceOrg})),t?.id&&KEe(t.id,{specialist:!!_n.specialist,mmse:typeof _n.mmse=="number"?_n.mmse:null,cdrOrGds:typeof _n.cdr=="number"?_n.cdr:null,neuroType:_n.neuroCognitiveType??null},{route:kn==="HOSPITAL_REFERRAL"?"HOSPITAL":"CENTER",actorId:w.header.assigneeName}),Oe.length===0){const je=ut(),nt=p_(_n);C?(Lr(Mt=>({...Mt,status:"DONE",startedAt:Mt.startedAt??je,updatedAt:je,completedAt:je,progress:100,etaSeconds:0,recommendedLabel:Fy(S?.predictedLabel)??nt})),We("Stage2    .")):(Lr(Mt=>({...Mt,status:"RUNNING",startedAt:je,updatedAt:je,completedAt:void 0,progress:3,etaSeconds:null,recommendedLabel:nt,failureReason:void 0})),Ye({type:"INFERENCE_REQUESTED",stage:2,at:je,by:w.header.assigneeName,summary:"Stage2   "}),Ye({type:"INFERENCE_STARTED",stage:2,at:je,by:w.header.assigneeName,summary:"Stage2   "}),We("Stage2   "))}else Lr(je=>({...je,status:"PENDING",updatedAt:ut(),startedAt:void 0,completedAt:void 0,progress:0,etaSeconds:null}));if(Ye({type:"STATUS_CHANGE",at:ut(),from:"",to:"",reason:`Stage2    (${lg(_n,Aa)}/${sa})`,by:w.header.assigneeName}),Y){const je=ss.trim();Ye({type:"STAGE2_MANUAL_EDIT_APPLIED",at:ut(),by:w.header.assigneeName,summary:`fields=${Object.keys(k).join(", ")||"-"}  reason=${je||"-"}`}),t?.id&&yje(t.id,{changedFields:k,reason:je,editor:w.header.assigneeName}).catch(()=>{De.error("    .")})}return pa.current={mmse:typeof Ce.tests.mmse=="number"?Ce.tests.mmse:null,cdr:typeof Ce.tests.cdr=="number"?Ce.tests.cdr:null,neuro:Ce.tests.neuroCognitiveType??null,specialist:Ce.tests.specialist??null},Fs&&si(!1),vl(""),(Fs||Y)&&ss.trim()&&We(`Stage2  : ${ss.trim()}`),We(`Stage2    : ${lg(_n,Aa)}/${sa}`),t?.id&&$.invalidateQueries({queryKey:["caseDetail",t.id]}),$.invalidateQueries({queryKey:["stage2Cases"]}),$.invalidateQueries({queryKey:["dashboardStats"]}),t?.id&&$.invalidateQueries({queryKey:["local-center","case",t.id]}),$.invalidateQueries({queryKey:["local-center","cases"]}),$.invalidateQueries({queryKey:["local-center","dashboard-stats"]}),De.success("   ."),!0},Od=()=>{const k=Mp(_n,kn,xr,{rationale:fa,recommendedLabel:Ss,selectedLabel:zt,overrideReason:gn});if(Bs(k)){De.error("      .");return}if(!Ka){De.error("   .");return}const B=zt,Y=B==="MCI"?E1(t):void 0,de=Eg(B,Y),re=XAe(B),Oe=ut(),je=jg(_n,!0,Aa);Dt(nt=>({...nt,status:je,classification:{label:B,probs:de,mciStage:Y},nextStep:re})),qu(Oe),as(!1),ya({}),t?.id&&qEe(t.id,B,{mciBand:Y===""?"":Y,rationale:`${fa.trim()}${vp&&gn.trim()?` (override: ${gn.trim()})`:""}`,actorId:w.header.assigneeName}),Ye({type:"STATUS_CHANGE",at:Oe,from:"",to:`(${B}${Y?`-${Y}`:""})`,reason:fa.trim()||"   ",by:w.header.assigneeName}),We(`Stage2  : ${B}${Y?`(${Y})`:""}`),De.success(" .")},Rd=(k,B)=>{Dt(Y=>({...Y,nextStep:k})),t?.id&&k&&VEe(t.id,k,{actorId:w.header.assigneeName,summary:B}),Ye({type:"PLAN_UPDATED",at:ut(),by:w.header.assigneeName,summary:B}),We(`Stage2   : ${B}`),De.success("  .")},dS=()=>{U(k=>({...k,linkageStatus:"BOOKING_DONE",reservationInfo:{route:"HOSPITAL_REFERRAL_BOOKING",reservationType:"2  ",scheduledAt:Mr,place:aa,contactGuide:Ko,note:"Stage2   "}})),t?.id&&i7(t.id,0,w.header.assigneeName),Ye({type:"LINKAGE_CREATED",at:ut(),by:w.header.assigneeName,linkageType:"HOSPITAL",summary:`   (${aa})`}),We(`   : ${aa} / ${dt(Mr)}`),De.success("  .")},jc=k=>{const B={...k,id:`agent-log-${Date.now()}-${Math.random().toString(36).slice(2,7)}`};U(Y=>({...Y,agentExecutionLogs:[B,...Y.agentExecutionLogs]}))},kd=(k,B,Y)=>{U(de=>({...de,policyGates:de.policyGates.map(re=>re.key===k?{...re,status:B,failReason:void 0}:re)})),Ye({type:"POLICY_GATE_UPDATE",at:ut(),key:k,status:B,by:w.header.assigneeName}),We(`   (${Y})`)},Id=(k,B)=>{U(Y=>{const de=new Set(Y.todos.filter(Oe=>Oe.status==="DONE").map(Oe=>Oe.title)),re=OO(k,B).map(Oe=>de.has(Oe.title)?{...Oe,status:"DONE"}:Oe);return{...Y,todos:re}})},Xh=(k,B)=>{U(de=>({...de,todos:de.todos.map(re=>re.id===k?{...re,status:B}:re)}));const Y=w.todos.find(de=>de.id===k);Y&&(Ye({type:"STATUS_CHANGE",at:ut(),from:Y.status,to:B,reason:`To-Do : ${Y.title}`,by:w.header.assigneeName}),We(`To-Do : ${Y.title}`),De.success(" ( )"))},jl=k=>{const B=w.todos.find(Y=>Y.status==="OPEN"&&Y.suggestedAction===k);B&&Xh(B.id,"DONE")},up=h.useCallback(async k=>{if(s!=="stage1"||l||c||!t)return!1;const B=(t.profile.name??"").replace(/\s+/g,""),Y=EAe.replace(/\s+/g,""),de=(k.preview??"").replace(/\s+/g,"");if(!(SAe.has(t.id)||B===Y||de.includes(Y)))return!1;const Oe=ut(),je=mt(24),nt=`${t.profile.name}    `,Mt=`${t.id}:stage1-sms-complete:${k.id}`;let $e="BOOKING_DONE";try{await wO({idempotencyKey:Mt,event:{caseId:t.id,type:"FOLLOWUP",title:nt,startAt:je,durationMin:20,priority:"NORMAL",payload:{scenario:"STAGE1_SMS_CONTACT_COMPLETE",trigger:"SMS_SENT"}}}),Ye({type:"CALENDAR_SYNC",at:ut(),status:"SUCCESS",eventType:"FOLLOWUP",title:nt,scheduledAt:je,idempotencyKey:Mt,by:w.header.assigneeName}),Ye({type:"CAL_EVENT_CREATED",at:ut(),scheduledAt:je,summary:`${t.profile.name}      `,by:w.header.assigneeName}),We(`  ( ): ${nt}  ${dt(je)}`)}catch(Et){$e="BOOKING_IN_PROGRESS";const Pn=Et instanceof Error?Et.message:"  ";Ye({type:"CALENDAR_SYNC",at:ut(),status:"FAILED",eventType:"FOLLOWUP",title:nt,scheduledAt:je,idempotencyKey:Mt,error:Pn,by:w.header.assigneeName}),We(`  ( ): ${Pn}`)}const ke="CONTINUE_SELF";return jl("SMS"),jt(je),U(Et=>{const Pn={...Et.contactExecution,status:"DONE",lastSentAt:Oe,lastResponseAt:Oe,lastOutcomeCode:ke,retryCount:Et.contactExecution.retryCount+1};return{...Et,linkageStatus:$e,contactExecution:Pn,contactFlowSteps:Ys(Pn,Et.preTriageResult,$e,s)}}),Ye({type:"OUTCOME_RECORDED",at:Oe,outcomeCode:ke,note:"Stage1    ( )",by:w.header.assigneeName}),Ye({type:"MESSAGE_SENT",at:Oe,summary:"STAGE1_SMS_AUTO_COMPLETE    ",by:w.header.assigneeName}),We(`${t.profile.name}    :      `),$e==="BOOKING_DONE"?De.success("         ."):De.error("    .   ."),!0},[We,Ye,t,jl,w.header.assigneeName,l,c,s]),Dd=k=>{const B=k.fixAction?.action;if(B){if(B==="CONFIRM_CONTACT_TIME"){kd("CONTACTABLE_TIME_OK","PASS","   "),De.success(" ( )"),We("   ");return}if(B==="REQUEST_CONSENT"){kd("CONSENT_OK","PASS","  "),De.success(" ( )");return}if(B==="VERIFY_PHONE"){kd("PHONE_VERIFIED","PASS"," "),De.success(" ( )");return}B==="ADD_GUARDIAN"&&(kd("GUARDIAN_OPTIONAL","PASS","  "),De.success(" ( )"))}},Xu=k=>{k!==w.interventionLevel&&xe({mode:"LEVEL",title:`   (${w.interventionLevel}  ${k})`,confirmLabel:" ",nextLevel:k,reason:""})},wc=k=>{xe({mode:"STATUS",title:`${k}   `,confirmLabel:`${k} `,nextStatus:k,reason:""})},Ac=(k,B)=>{if(!c)return;const Y=w.stage3?.recommendedActions.find(re=>re.id===k);if(!Y)return;const de=ut();U(re=>{if(!re.stage3)return re;const Oe=re.stage3.recommendedActions.map(Pn=>Pn.id===k?{...Pn,decision:B}:Pn),je=Oe.filter(Pn=>Pn.requiresApproval&&Pn.decision==="PENDING").length;let nt=re.stage3.reevalStatus,Mt=re.stage3.headerMeta.planStatus,$e=re.stage3.planUpdatedAt,ke=re.linkageStatus;B==="APPROVED"&&(Y.type==="SCHEDULE_REEVAL"&&(nt="SCHEDULED"),Y.type==="UPDATE_PLAN"&&(Mt="ACTIVE",$e=de),Y.type==="ESCALATE_LEVEL"&&(ke="BOOKING_IN_PROGRESS"));const Et={...re.stage3,reevalStatus:nt,planUpdatedAt:$e,triggersReviewedAt:je===0?de:re.stage3.triggersReviewedAt,recommendedActions:Oe,headerMeta:{...re.stage3.headerMeta,planStatus:Mt,opsStatus:Mt==="NEEDS_UPDATE"?"PLAN_NEEDS_UPDATE":nt==="PENDING"?"REEVAL_PENDING":ke!=="NOT_CREATED"?"LINKAGE_PENDING":"TRACKING"}};return{...re,linkageStatus:ke,stage3:Et,contactFlowSteps:Ys(re.contactExecution,re.preTriageResult,ke,s)}}),Ye({type:"STAGE3_ACTION_DECISION",at:de,by:w.header.assigneeName,actionId:k,decision:B,note:Y.title}),B==="APPROVED"&&(Y.type==="SCHEDULE_REEVAL"?Ye({type:"REEVAL_SCHEDULED",at:de,scheduledAt:w.stage3?.headerMeta.nextReevalAt??mt(72),by:w.header.assigneeName,reason:"  "}):Y.type==="UPDATE_PLAN"?Ye({type:"PLAN_UPDATED",at:de,by:w.header.assigneeName,summary:"    "}):Y.type==="ESCALATE_LEVEL"?Ye({type:"LINKAGE_CREATED",at:de,by:w.header.assigneeName,linkageType:"CENTER",summary:"   "}):Y.type==="SEND_REMINDER"&&Ye({type:"SMS_SENT",at:de,templateId:"S3_REMINDER_TRACK",status:"PENDING",by:w.header.assigneeName})),We(`Stage3  ${B==="APPROVED"?"":""}: ${Y.title}`),De.success(` (  ): ${Y.title}`)},Jh=k=>{if(!c)return;const B=ut(),Y=w.stage3?.headerMeta.nextReevalAt??mt(72),de=k==="RESCHEDULE"?mt(120):k==="COMPLETE"?mt(336):Y;U(re=>{if(!re.stage3)return re;const Oe=k==="COMPLETE"?"COMPLETED":k==="NOSHOW"?"NOSHOW":"SCHEDULED",je=k==="COMPLETE"?re.stage3.headerMeta.planStatus==="NEEDS_UPDATE"?"PLAN_NEEDS_UPDATE":"TRACKING":k==="NOSHOW"?"CHURN_RISK":"REEVAL_PENDING";return{...re,stage3:{...re.stage3,reevalStatus:Oe,headerMeta:{...re.stage3.headerMeta,nextReevalAt:de,opsStatus:je}},contactFlowSteps:Ys(re.contactExecution,re.preTriageResult,re.linkageStatus,s)}}),k==="SCHEDULE"?(Ye({type:"REEVAL_SCHEDULED",at:B,scheduledAt:Y,by:w.header.assigneeName,reason:"  "}),We(`  : ${dt(Y)}`)):k==="RESCHEDULE"?(Ye({type:"REEVAL_RESCHEDULED",at:B,from:Y,to:de,by:w.header.assigneeName,reason:" "}),We(`  : ${dt(Y)}  ${dt(de)}`)):k==="COMPLETE"?(Ye({type:"REEVAL_COMPLETED",at:B,by:w.header.assigneeName,note:"  "}),We("  ")):(Ye({type:"REEVAL_NOSHOW",at:B,by:w.header.assigneeName,note:" "}),We("  ")),De.success(" ( )")},wl=k=>{if(!c)return;const B=ut(),Y=k?.summary??(u?"   ":"    ");U(de=>{if(!de.stage3)return de;const re=[...de.stage3.transitionRisk.series],Oe=re[re.length-1],je=Oe?{t:B,risk2y:Oe.risk2y,ciLow:Oe.ciLow,ciHigh:Oe.ciHigh,source:"manual",event:"REEVAL"}:{t:B,risk2y:de.stage3.transitionRisk.risk2y_now,source:"manual",event:"REEVAL"},nt=[...re.slice(-11),je];return{...de,stage3:{...de.stage3,riskReviewedAt:B,transitionRisk:{...de.stage3.transitionRisk,updatedAt:B,series:nt}}}}),Ye({type:"RISK_REVIEWED",at:B,by:w.header.assigneeName,summary:Y}),Ye({type:"RISK_SERIES_UPDATED",at:B,by:w.header.assigneeName,summary:u?"     ":"     "}),We(`${u?"Stage2   ":"Stage3   "} : ${Y}`),k?.nextAction&&Jt({at:B,memo:Y,nextAction:k.nextAction}),k?.silentToast||De.success(u?"   .":"   .")},Ki=k=>{if(!c)return;const B=ut();if(k==="APPLY_RESULT"&&$t(Y=>({...Y,riskReady:!0,resultPerformedAt:Y.resultPerformedAt||B})),U(Y=>{if(!Y.stage3)return Y;let de=Y.stage3.diffPathStatus,re=Y.stage3.reevalStatus,Oe=Y.stage3.headerMeta.planStatus,je=Y.stage3.planUpdatedAt,nt=Y.stage3.headerMeta.nextReevalAt,Mt=Y.stage3.transitionRisk;if(k==="CREATE_RECO")de="RECOMMENDED";else if(k==="CREATE_REFER")de="REFERRED";else if(k==="SCHEDULE"){de="SCHEDULED",re="SCHEDULED",nt=mt(72);const ke=Y.stage3.transitionRisk.series[Y.stage3.transitionRisk.series.length-1];Mt={...Y.stage3.transitionRisk,updatedAt:B,series:[...Y.stage3.transitionRisk.series.slice(-11),{t:B,risk2y:ke?.risk2y??Y.stage3.transitionRisk.risk2y_now,ciLow:ke?.ciLow,ciHigh:ke?.ciHigh,source:"manual",event:"REEVAL"}]}}else if(k==="COMPLETE"){de="COMPLETED",re="COMPLETED";const ke=Y.stage3.transitionRisk.series[Y.stage3.transitionRisk.series.length-1],Et=Jr((ke?.risk2y??Y.stage3.transitionRisk.risk2y_now)-.03);Mt={...Y.stage3.transitionRisk,risk2y_now:Et,risk2y_label:Et>=.7?"HIGH":Et>=.45?"MID":"LOW",updatedAt:B,series:[...Y.stage3.transitionRisk.series.slice(-11),{t:B,risk2y:Et,ciLow:Jr(Et-.04),ciHigh:Jr(Et+.04),source:"manual",event:"REEVAL"}]}}else if(k==="APPLY_RESULT"){de="COMPLETED",Oe="NEEDS_UPDATE",je=B;const ke=Y.stage3.transitionRisk.series[Y.stage3.transitionRisk.series.length-1],Et=Jr((ke?.risk2y??Y.stage3.transitionRisk.risk2y_now)+.04);Mt={...Y.stage3.transitionRisk,risk2y_now:Et,risk2y_label:Et>=.7?"HIGH":Et>=.45?"MID":"LOW",updatedAt:B,series:[...Y.stage3.transitionRisk.series.slice(-11),{t:B,risk2y:Et,ciLow:Jr(Et-.05),ciHigh:Jr(Et+.05),source:"manual",event:"DIFF_RESULT_APPLIED"}]}}const $e=Oe==="NEEDS_UPDATE"?"PLAN_NEEDS_UPDATE":de==="REFERRED"||de==="SCHEDULED"?"LINKAGE_PENDING":re==="PENDING"?"REEVAL_PENDING":"TRACKING";return{...Y,stage3:{...Y.stage3,diffPathStatus:de,reevalStatus:re,planUpdatedAt:je,transitionRisk:Mt,headerMeta:{...Y.stage3.headerMeta,planStatus:Oe,nextReevalAt:nt,opsStatus:$e}},linkageStatus:k==="CREATE_REFER"||k==="SCHEDULE"?"REFERRAL_CREATED":Y.linkageStatus}}),k==="CREATE_RECO")Ye({type:"DIFF_RECO_CREATED",at:B,by:w.header.assigneeName,summary:u?"   ":"/  "}),We(u?"   ":"  ");else if(k==="CREATE_REFER")Ye({type:"DIFF_REFER_CREATED",at:B,by:w.header.assigneeName,summary:u?"/  ":"  "}),Ye({type:"LINKAGE_CREATED",at:B,by:w.header.assigneeName,linkageType:"HOSPITAL",summary:u?"    ":"   "}),We(u?"  ":"  ");else if(k==="SCHEDULE"){const Y=mt(72);Ye({type:"DIFF_SCHEDULED",at:B,by:w.header.assigneeName,summary:u?"  ":"  "}),Ye({type:"REEVAL_SCHEDULED",at:B,by:w.header.assigneeName,scheduledAt:Y,reason:u?"  ":"  "}),We(u?"  ":"  ")}else k==="COMPLETE"?(Ye({type:"DIFF_COMPLETED",at:B,by:w.header.assigneeName,summary:u?"   ":"  "}),Ye({type:"REEVAL_COMPLETED",at:B,by:w.header.assigneeName,note:u?" ":" "}),We(u?"  ":"  ")):(Ye({type:"DIFF_RESULT_APPLIED",at:B,by:w.header.assigneeName,summary:u?"      ":"       "}),We(u?"  ":"  "));if(t?.id&&k==="APPLY_RESULT"){const Y=JAe(Le.resultLabel),de=ut();QEe(t.id,{biomarker:Le.testBiomarker,imaging:Le.testBrainImaging,biomarkerResult:Le.testBiomarker?Y:null,imagingResult:Le.testBrainImaging?Y:null,performedAt:de},w.header.assigneeName),_?(Us(re=>({...re,status:"DONE",startedAt:re.startedAt??de,updatedAt:de,completedAt:de,progress:100,etaSeconds:0})),We("Stage3    .")):(Us(re=>({...re,status:"RUNNING",startedAt:de,updatedAt:de,completedAt:void 0,progress:4,etaSeconds:null,failureReason:void 0})),Ye({type:"INFERENCE_REQUESTED",stage:3,at:de,by:w.header.assigneeName,summary:"Stage3   "}),Ye({type:"INFERENCE_STARTED",stage:3,at:de,by:w.header.assigneeName,summary:"Stage3   "}),We("Stage3   "))}t?.id&&k==="SCHEDULE"&&Za(t.id,"STAGE3_DIFF_SCHEDULED",{scheduledAt:mt(72)},w.header.assigneeName),De.success(" (  )")},Yx=h.useCallback((k,B,Y)=>{if(!c)return;const de=ut(),re=k.trim();Zn(Oe=>({...Oe,consultStarted:!0,infoCollected:!0})),re.length>0&&$t(Oe=>({...Oe,note:re})),Ye({type:"CALL_ATTEMPT",at:de,result:"SUCCESS",note:re||`${B}  `,by:w.header.assigneeName}),We(`Stage3  : ${Y}${re?` (${re.slice(0,80)})`:""}`)},[We,w.header.assigneeName,c]),Qx=h.useCallback(k=>{if(!c)return;const B=ut();Ye({type:"SMS_SENT",at:B,templateId:k.templateLabel,status:k.status==="SENT"?"DELIVERED":k.status==="SCHEDULED"?"PENDING":"FAILED",by:w.header.assigneeName}),Ye({type:"MESSAGE_SENT",at:B,by:w.header.assigneeName,summary:`   ${k.mode==="NOW"?"":""}: ${k.templateLabel}`}),Zn(Y=>({...Y,messageSent:k.status!=="FAILED"})),We(`Stage3  ${k.mode==="NOW"?"":""}: ${k.templateLabel} (${k.status})`)},[We,w.header.assigneeName,c]),Xx=h.useCallback(()=>{if(!c)return;const k=ut(),B=[Le.note,ce,pe,Gs?.scriptBody].filter(Boolean).join(" "),Y=B.length>=180?"":B.length>=80?"":"",de={preferredHospital:Le.preferredHospital||Le.orgName||" ",preferredTimeWindow:B.includes("")||B.includes("")?"  10:00~12:00":B.includes("")?"  09:00~11:00":"  14:00~16:00",caregiverCompanion:B.includes("")||Me.caregiverNeeded,mobilityIssue:B.includes("")||B.includes(""),testBiomarker:!0,testBrainImaging:!0,prepGuide:" : / /  ,      ",orgName:Le.orgName||" ",orgPhone:Le.orgPhone||Ko},re=Object.keys(de).filter(je=>{const nt=de[je],Mt=Le[je];return nt!==Mt}),Oe=[Gs?.title?` : ${Gs.title}`:"    ",B.length>0?`   : ${B.slice(0,60)}${B.length>60?"...":""}`:"      ",`     ${Y}`];ms({generatedAt:k,confidenceLabel:Y,reasonSnippets:Oe,patch:de,changedFields:re,applied:!1,ignored:!1}),Zn(je=>({...je,ragGenerated:!0})),We(`Stage3 RAG    (${Y})`),De.success("RAG   .    .")},[We,ce,c,pe,Gs?.scriptBody,Gs?.title,Le,Me.caregiverNeeded]),Al=h.useCallback(()=>{if(!bt)return;const k=ut();$t(B=>({...B,...bt.patch})),ms(B=>B&&{...B,applied:!0,ignored:!1}),Zn(B=>({...B,infoCollected:!0,ragGenerated:!0})),Ye({type:"STAGE3_ACTION_DECISION",at:k,by:w.header.assigneeName,actionId:"RAG_AUTOFILL",decision:"APPROVED",note:`  (${bt.changedFields.length} )`}),We(`Stage3 RAG  : ${bt.changedFields.join(", ")||" "}`)},[We,w.header.assigneeName,bt]),Zh=h.useCallback(()=>{if(!bt)return;const k=ut();ms(B=>B&&{...B,ignored:!0,applied:!1}),Ye({type:"STAGE3_ACTION_DECISION",at:k,by:w.header.assigneeName,actionId:"RAG_AUTOFILL",decision:"HOLD",note:"  "}),We("Stage3 RAG  ")},[We,w.header.assigneeName,bt]),e0=h.useCallback(()=>{if(!c)return;const k={};if(!ce.trim()&&!Bt.consultStarted&&(k.step2CallRecord="  (   ) ."),Le.preferredHospital.trim()||(k.step2Hospital=" / ."),!Le.testBiomarker&&!Le.testBrainImaging&&!Le.testOther&&(k.step2TestSelection="   1 ."),Le.bookingAt||(k.step2BookingAt="    ."),Object.keys(k).length>0){Nl("CONTACT_EXECUTION",k),De.error("      .");return}Ba(de=>({...de,CONTACT_EXECUTION:{}}));const B=ut();Ki("SCHEDULE"),$t(de=>({...de,bookingConfirmed:!0})),Zn(de=>({...de,bookingConfirmed:!0,messageSent:!0,calendarSynced:!0})),t?.id&&i7(t.id,0,w.header.assigneeName),Ye({type:"SMS_SENT",at:B,templateId:"S3_BOOKING_CONFIRM",status:"DELIVERED",by:w.header.assigneeName}),Ye({type:"MESSAGE_SENT",at:B,by:w.header.assigneeName,summary:`     ${dt(Le.bookingAt)}`});const Y=`S3-CAL-${Date.now()}`;Ye({type:"CALENDAR_SYNC",at:B,status:"SUCCESS",eventType:"FOLLOWUP",title:`Stage3   (${w.header.caseId})`,scheduledAt:Le.bookingAt,idempotencyKey:Y,by:w.header.assigneeName}),Ye({type:"CAL_EVENT_CREATED",at:B,by:w.header.assigneeName,scheduledAt:Le.bookingAt,summary:`${Le.preferredHospital||Le.orgName}  ${dt(Le.bookingAt)}`}),We(`Stage3    : ${Le.preferredHospital||Le.orgName}  ${dt(Le.bookingAt)}  /  `),De.success("//  .")},[Nl,We,t?.id,ce,w.header.assigneeName,w.header.caseId,Ki,c,Le.bookingAt,Le.orgName,Le.preferredHospital,Le.testBiomarker,Le.testBrainImaging,Le.testOther,Bt.consultStarted]),Jx=(k,B)=>{if(!c)return;const Y=ut();U(de=>{if(!de.stage3)return de;const re=de.stage3.programs.map(Oe=>{if(Oe.id!==k)return Oe;const je=B??!Oe.selected;return{...Oe,selected:je,execution:je?Oe.execution??{owner:de.header.assigneeName,dueDate:mt(72),status:"PLANNED",method:""}:void 0}});return{...de,stage3:{...de.stage3,programs:re}}}),Ye({type:"PROGRAM_SELECTED",at:Y,by:w.header.assigneeName,summary:`  : ${k}`}),We(`  : ${k}`)},t0=(k,B)=>{if(!c)return;const Y=ut();U(de=>{if(!de.stage3)return de;const re=de.stage3.programs.map(Oe=>Oe.id!==k?Oe:{...Oe,selected:!0,execution:{owner:de.header.assigneeName,...Oe.execution,...B}});return{...de,stage3:{...de.stage3,programs:re}}}),Ye({type:B.status==="DONE"?"PROGRAM_EXEC_COMPLETED":"PROGRAM_EXEC_UPDATED",at:Y,by:w.header.assigneeName,summary:`  : ${k}`}),We(`  : ${k}`),De.success("   .")},Pd=()=>{if(!c)return;const k=ut();U(B=>{if(!B.stage3)return B;const Y=B.stage3.transitionRisk.series[B.stage3.transitionRisk.series.length-1],de=Y?.risk2y??B.stage3.transitionRisk.risk2y_now;return{...B,stage3:{...B.stage3,planUpdatedAt:k,transitionRisk:{...B.stage3.transitionRisk,updatedAt:k,series:[...B.stage3.transitionRisk.series.slice(-11),{t:k,risk2y:de,ciLow:Y?.ciLow,ciHigh:Y?.ciHigh,source:"manual",event:"PLAN_UPDATED"}]},headerMeta:{...B.stage3.headerMeta,planStatus:"ACTIVE",opsStatus:"TRACKING"}}}}),Ye({type:"PLAN_UPDATED",at:k,by:w.header.assigneeName,summary:"   "}),We("  "),De.success("  .")},Zx=()=>{if(!c)return;const k=ut(),B=mt((w.stage3?.headerMeta.trackingCycleDays??21)*24);U(Y=>Y.stage3?{...Y,stage3:{...Y.stage3,headerMeta:{...Y.stage3.headerMeta,nextTrackingContactAt:B}}}:Y),Ye({type:"NEXT_TRACKING_SET",at:k,by:w.header.assigneeName,nextAt:B,summary:"   "}),We(`   : ${dt(B)}`),De.success("   .")},n0=h.useCallback(()=>{if(!c)return;if(u){if(!w.stage3?.riskReviewedAt){wl({summary:"STEP1  "});return}if(w.stage3.diffPathStatus==="NONE"||w.stage3.diffPathStatus==="RECOMMENDED"){Ki("SCHEDULE");return}if(w.stage3.reevalStatus!=="SCHEDULED"&&w.stage3.reevalStatus!=="COMPLETED"){Jh("SCHEDULE");return}ze("FOLLOW_UP");return}const k=w.stage3?.recommendedActions.find(Y=>Y.decision==="PENDING");if(k){Ac(k.id,"APPROVED");return}if(!w.stage3?.riskReviewedAt){wl();return}if(w.stage3.diffPathStatus==="NONE"){Ki("CREATE_RECO");return}if(!w.stage3.programs.some(Y=>Y.selected&&(Y.execution?.status==="PLANNED"||Y.execution?.status==="IN_PROGRESS"||Y.execution?.status==="DONE"))){const Y=w.stage3.programs[0];if(Y){Jx(Y.id,!0),t0(Y.id,{status:"PLANNED",method:"",dueDate:mt(72)});return}}if(w.stage3.headerMeta.planStatus==="NEEDS_UPDATE"){Pd();return}Zx()},[Ac,Pd,w.stage3,Ki,wl,Jh,c,u,Zx,ze,Jx,t0]),fp=k=>{if(k===w.contactExecutor)return;const B=w.contactExecutor,Y=ut(),de=Hs==="AI_FIRST"&&k==="HUMAN";de&&Ic({actor:"operator",summary:"     .",detailMessage:"    ",moveToHuman:!0}),U(re=>({...re,contactExecutor:k})),Ye({type:"STATUS_CHANGE",at:Y,from:ho[B],to:ho[k],reason:"  ",by:w.header.assigneeName}),de&&(Ye({type:"OPERATOR_OVERRIDE_TO_HUMAN",at:Y,actor:"operator",caseId:w.header.caseId,summary:"  ",detail:"      ",by:w.header.assigneeName}),We("  :     ")),We(`  : ${ho[B]}  ${ho[k]}`),De.success("  .")},dr=k=>{Q(k.id),Ge(k.scriptBody)},Ju=()=>{const k=gm[st.route],B=s==="stage1"?st.stage2Decision==="MOVE_STAGE2"?"MOVE_STAGE2":"KEEP_STAGE1":null;if(st.route!=="HOLD_TRACKING"&&!st.scheduledAt)return De.error("/  ."),!1;const Y=st.route==="HOLD_TRACKING"?void 0:{route:st.route,reservationType:k.reservationType,scheduledAt:st.scheduledAt,place:st.place||k.defaultPlace,contactGuide:st.contactGuide||Ko,note:st.note||void 0},de=w.linkageStatus,re=k.linkageStatus;if(U(Oe=>({...Oe,linkageStatus:re,reservationInfo:Y,reservation:Y==null?{source:Oe.reservation?.source??"MANUAL",status:"NONE"}:{source:"MANUAL",status:"RESERVED",programType:k.reservationType,programName:k.label,scheduledAt:Y.scheduledAt,locationName:Y.place,createdAt:Oe.reservation?.createdAt??ut(),updatedAt:ut(),createdBy:"STAFF",reservationId:Oe.reservation?.reservationId,options:Oe.reservation?.options},contactFlowSteps:Ys(Oe.contactExecution,Oe.preTriageResult,re,s)})),Y?.scheduledAt&&jt(Y.scheduledAt),Ye({type:"STATUS_CHANGE",at:ut(),from:wg[de],to:wg[re],reason:`${k.label} `,by:w.header.assigneeName}),o&&s==="stage1"){const Oe=st.route==="HOSPITAL_REFERRAL_BOOKING"?"HOSPITAL":"CENTER";WEe(o,B??"KEEP_STAGE1",{route:Oe});const je=B==="MOVE_STAGE2"?"Stage2 ":"Stage1 ";return Ye({type:"STATUS_CHANGE",at:ut(),from:"Stage 1",to:B==="MOVE_STAGE2"?"Stage 2":"Stage 1",reason:`   (${je})`,by:w.header.assigneeName}),We(`  : ${k.label}  ${je}`),De.success(B==="MOVE_STAGE2"?"   Stage2  .":"  ."),!0}return We(`  : ${k.label}`),De.success("  ."),!0},pp=()=>{if(!me||!me.reason.trim())return;if(me.mode==="LEVEL"){const Y=me.nextLevel,de=w.interventionLevel,re=w.header.dataQuality.level;U(Oe=>({...Oe,interventionLevel:Y})),Id(Y,re),Ye({type:"LEVEL_CHANGE",at:ut(),from:de,to:Y,reason:me.reason,by:w.header.assigneeName}),We(`  : ${de}  ${Y} (${me.reason})`),De.success(" ( )"),xe(null);return}const k=w.header.statusLabel,B=me.nextStatus;U(Y=>{const de=B===" "?{level:"EXCLUDE",score:Math.min(Y.header.dataQuality.score,60),notes:["  ","    "]}:Y.header.dataQuality;return{...Y,header:{...Y.header,statusLabel:B,dataQuality:de},todos:B===" "?OO(Y.interventionLevel,"EXCLUDE"):Y.todos}}),Ye({type:"STATUS_CHANGE",at:ut(),from:k,to:B,reason:me.reason,by:w.header.assigneeName}),We(` : ${k}  ${B} (${me.reason})`),De.success(" ( )"),xe(null)},Zu=()=>{cS||(ee(!0),ue(0),We(`   (${K==="citizen"?"":""})`))},eb=async()=>{if(!et)return;if(St(!0),et.mode==="CALL"){const je=ut(),nt=et.result,Mt=et.note.trim();Ye({type:"CALL_ATTEMPT",at:je,result:nt,note:Mt||void 0,by:w.header.assigneeName}),We(`  : ${m_e(nt)}${Mt?` (${Mt})`:""}`),U($e=>({...$e,header:{...$e.header,waitDays:nt==="SUCCESS"?0:$e.header.waitDays+1,statusLabel:nt==="SUCCESS"?"":$e.header.statusLabel}})),nt==="SUCCESS"?(jl("CALL"),jt(mt(72))):jt(mt(nt==="NO_ANSWER"?6:24)),Z(""),ue(0),St(!1),Fe(null),De.success(" ( )");return}const k=et.result,B=zh,Y=[{key:"citizen",label:"",phone:t?.profile.phone},{key:"guardian",label:"",phone:t?.profile.guardianPhone}].filter(je=>fe[je.key]),de=et.scheduled&&_e?new Date(_e).toISOString():ut();let re=0,Oe=0;for(const je of Y){let nt=k;if(!et.scheduled&&je.phone&&k!=="FAILED"){const Mt=l?"STAGE2":c?"STAGE3":"STAGE1";(await lq({caseId:w.header.caseId,citizenPhone:je.phone,templateId:Pe,renderedMessage:B,dedupeKey:`${w.header.caseId}-${Pe}-${je.label}-${Date.now()}`,stage:Mt})).success||(nt="FAILED")}(nt==="DELIVERED"||nt==="PENDING")&&(re+=1),nt==="FAILED"&&(Oe+=1),Ye({type:"SMS_SENT",at:de,templateId:`${Pe}(${je.label})`,status:nt,by:w.header.assigneeName})}We(` ${et.scheduled?"":""}: ${dp.label} (${Y.length}, / ${re},  ${Oe})`),re>0&&(jl("SMS"),jt(mt(48))),St(!1),Fe(null),De.success(" ( )")};`${String(Math.floor(ae/60)).padStart(2,"0")}${String(ae%60).padStart(2,"0")}`;const r0=()=>{if(!Ut.trim())return;const k=w.header.effectiveStrategy??w.preTriageResult?.strategy??"AI_FIRST",B=qt,Y=i3(w.preTriageResult?.triggers??[]);if(B==="AI_FIRST"&&Y&&Ut.trim().length<12){De.error("        12   .");return}U(de=>{const re={strategy:B,triggers:[...de.preTriageResult?.triggers??[],` : ${Ut}`],policyNote:`    (${gu[B]}). : ${Ut}`,confidence:"RULE"};return{...de,header:{...de.header,contactStrategy:"MANUAL_OVERRIDE",effectiveStrategy:B},contactExecutor:B==="AI_FIRST"?"AGENT_SEND_ONLY":"HUMAN",preTriageResult:re,contactPlan:Tq(B,t,s),contactFlowSteps:Ys(de.contactExecution,re,de.linkageStatus,s)}}),t?.id&&YEe(t.id,B==="AI_FIRST"?"AGENT":"HUMAN",w.header.assigneeName),Ye({type:"STRATEGY_CHANGE",at:ut(),from:k,to:B,reason:Ut,by:w.header.assigneeName}),Ye({type:"CONTACT_STRATEGY_CHANGED",at:ut(),actor:"operator",caseId:w.header.caseId,summary:`  : ${gu[k]}  ${gu[B]}`,detail:Ut,by:w.header.assigneeName}),B==="HUMAN_FIRST"&&Ic({actor:"operator",summary:"     .",detailMessage:Ut,moveToHuman:!0}),We(`   : ${gu[k]}  ${gu[B]} (${Ut})`),De.success("  ."),an(!1),Ht("")},gs=h.useCallback(()=>{hs(!0),cr.current=!0,Ha&&wr(null),To()},[To,Ha]),Md=h.useCallback(k=>{if(k&&ua&&k!==ua.outcome&&!ua.manualOverriddenAt){const B=ut();We(`   : ${vi[ua.outcome].label}  ${vi[k].label}`),Ye({type:"MESSAGE_SENT",at:B,summary:`STAGE1_MANUAL_EDIT_APPLIED  ${vi[ua.outcome].label}  ${vi[k].label}`,by:w.header.assigneeName}),Hr(Y=>Y&&{...Y,manualOverriddenAt:B})}gs(),ar(k)},[We,Ye,ua,w.header.assigneeName,gs]),_l=h.useCallback(k=>{gs(),Ve(k)},[gs]),mp=h.useCallback(k=>{gs(),ca(k)},[gs]),a0=h.useCallback(k=>{gs(),ta(k)},[gs]),s0=h.useCallback(k=>{gs(),ns(B=>B.includes(k)?B.filter(Y=>Y!==k):[...B,k])},[gs]),ef=h.useCallback(()=>{const k=w.header.sla.level!=="OK"||w.contactExecution.retryCount>=2||TO(t)>=85;ar(null),Ve(""),ca({code:null,level:"TEMP",detail:"",createFollowupEvent:!1,followupAt:mt(168)}),ta({strategy:null,channel:"CALL",assigneeId:w.header.assigneeName||Kl,nextContactAt:mt(24),applyL3:k}),ns([]),wr(null),To(),hs(!1),Hr(null),cr.current=!1},[t,To,w.contactExecution.retryCount,w.header.assigneeName,w.header.sla.level]),Ld=async({code:k,note:B,reject:Y,noResponse:de,reasonTags:re=[]})=>{const Oe=B.trim(),je=de?.nextContactAt,nt={outcomeType:v_e[k],memo:Oe||void 0,reasonTags:re.length>0?re:void 0};k==="REFUSE"&&Y?.code&&(nt.reject={code:Y.code,level:Y.level,detail:Y.detail.trim()||void 0,followup:{createFollowupEvent:Y.createFollowupEvent,followupAt:Y.createFollowupEvent?Y.followupAt:void 0}}),k==="NO_RESPONSE"&&de?.strategy&&je&&(nt.noResponse={strategy:de.strategy,nextContactAt:je,escalateLevel:de.applyL3?"L3":void 0,channel:de.channel,assigneeId:de.assigneeId||void 0});const Mt=await Cd({caseId:w.header.caseId,payload:nt});if(!Mt)return De.error("   .   ."),!1;const $e=ut();let ke=null,Et="",Pn=!1;U(Ln=>{const qr=_je({outcomeCode:k,execution:Ln.contactExecution,linkageStatus:Ln.linkageStatus,contactPlan:Ln.contactPlan});Et=qr.recommendedNextAction,Pn=qr.switchedToHybrid;let qs=qr.contactPlan;qs&&k==="SCHEDULE_LATER"&&(qs={...qs,scheduledAt:mt(qr.recontactAfterHours)}),qs&&k==="NO_RESPONSE"&&je&&(qs={...qs,scheduledAt:je}),qr.requiresHandoffMemo&&(ke={triggers:Ln.preTriageResult?.triggers??[],lastContactSummary:` : ${dt(Ln.contactExecution.lastSentAt??$e)}`,currentOutcome:k,recommendedNextAction:Et,generatedAt:$e});const df={...Ln.contactExecution,status:qr.executionStatus,lastOutcomeCode:k,lastResponseAt:$e,retryCount:qr.retryCount,handoffMemo:ke??Ln.contactExecution.handoffMemo};return{...Ln,linkageStatus:qr.linkageStatus,contactPlan:qs,contactExecution:df,contactFlowSteps:Ys(df,Ln.preTriageResult,qr.linkageStatus,s)}}),Ye({type:"OUTCOME_RECORDED",at:$e,outcomeCode:k,reasonTags:re.length>0?re:void 0,note:Oe||void 0,rejectCode:nt.reject?.code,rejectLevel:nt.reject?.level,recontactStrategy:nt.noResponse?.strategy,nextContactAt:nt.noResponse?.nextContactAt??nt.reject?.followup?.followupAt,outcomeId:Mt.outcome.outcomeId,by:w.header.assigneeName});const Ct=re.length>0?`  : ${re.map(Ln=>w1[Ln].label).join(", ")}`:"";We(`  : ${vi[k].label}${Ct}${Oe?` (${Oe.slice(0,60)})`:""}`),Ye({type:"MESSAGE_SENT",at:$e,summary:`${l?"STAGE2_RESPONSE_RECORDED":"STAGE1_RESPONSE_RECORDED"}  ${vi[k].label}`,by:w.header.assigneeName});const Kn=Mt.outcome.nextAction?.events?.[0]?.startAt??nt.noResponse?.nextContactAt??nt.reject?.followup?.followupAt;if(jt(Kn??mt(k==="SCHEDULE_LATER"?72:k==="NO_RESPONSE"?24:k==="REFUSE"?168:48)),Pn&&We("     : HYBRID"),nt.noResponse?.escalateLevel==="L3"&&w.interventionLevel!=="L3"){const Ln=w.interventionLevel;U(qr=>({...qr,interventionLevel:"L3"})),Id("L3",w.header.dataQuality.level),Ye({type:"LEVEL_CHANGE",at:$e,from:Ln,to:"L3",reason:"       ",by:w.header.assigneeName}),We(`  : ${Ln}  L3 (   )`)}return Mt.calendar.created.forEach(Ln=>{Ye({type:"CALENDAR_SYNC",at:ut(),status:"SUCCESS",eventType:Ln.event.type,title:Ln.event.title,scheduledAt:Ln.event.startAt,idempotencyKey:Ln.idempotencyKey,by:w.header.assigneeName})}),Mt.calendar.failed.forEach(Ln=>{Ye({type:"CALENDAR_SYNC",at:ut(),status:"FAILED",eventType:Ln.eventType,title:Ln.title,scheduledAt:Ln.scheduledAt,idempotencyKey:Ln.idempotencyKey,error:Ln.errorMessage,by:w.header.assigneeName})}),Mt.calendar.failed.length>0?(We(`  : ${Mt.calendar.failed.length} ( )`),De.error("      .  .")):Mt.calendar.created.length>0?(We(`  : ${Mt.calendar.created.length}`),De.success("   .")):De.success("  ."),ke&&(Bh(`[ ]
 ( ): ${w.header.effectiveStrategy??w.preTriageResult?.strategy??"AI_FIRST"}
: ${ke.triggers.join(", ")}
${ke.lastContactSummary}
 : ${vi[k].label}
  : ${ke.recommendedNextAction}`),_i(!0)),!c&&H==="RESPONSE_HANDLING"?(F("FOLLOW_UP"),_i(!0)):F(null),ef(),Pr($e),cr.current=!1,!0},$d=async()=>{if(!Co){if(!hn){const k="  .";wr(k),De.error(k);return}if(hn==="REFUSE"){if(!la.code){const k="     .";wr(k),De.error(k);return}if(la.code==="R7_OTHER"&&!la.detail.trim()){const k="     .";wr(k),De.error(k);return}if(la.createFollowupEvent&&!la.followupAt){const k="   .";wr(k),De.error(k);return}wr(null),await Ld({code:"REFUSE",note:yt,reject:la,reasonTags:na});return}if(hn==="NO_RESPONSE"){const k=Ga.strategy??Nq[Ga.channel];if(!k){const B="       .";wr(B),De.error(B);return}if(!Ga.nextContactAt){const B="       .";wr(B),De.error(B);return}if(!Ga.assigneeId.trim()){const B="      .";wr(B),De.error(B);return}wr(null),await Ld({code:"NO_RESPONSE",note:yt,noResponse:{...Ga,strategy:k},reasonTags:na});return}wr(null),await Ld({code:hn,note:yt,reasonTags:na})}},Cl=h.useMemo(()=>TO(t),[t]),tf=h.useMemo(()=>FAe(Cl),[Cl]),i0=h.useMemo(()=>yz(t),[t]),Hs=w.header.effectiveStrategy??w.preTriageResult?.strategy??"AI_FIRST",o0=w.header.contactStrategy??Hs,l0=w.contactFlowSteps.filter(k=>k.status==="MISSING").length,tb=w.contactFlowSteps.filter(k=>k.status==="WARNING").length,hp=!!w.preTriageInput&&w.header.dataQuality.level!=="EXCLUDE",Un=h.useMemo(()=>T7({caseId:w.header.caseId,stage:2,jobStatus:ln.status,progress:ln.progress,etaSeconds:ln.etaSeconds,startedAt:ln.startedAt,updatedAt:ln.updatedAt,completedAt:ln.completedAt,hasResult:ln.status==="DONE"||C&&ln.status!=="RUNNING",minDurationSec:ln.minDurationSec,maxDurationSec:ln.maxDurationSec,nowMs:qe}),[w.header.caseId,qe,ln.completedAt,ln.etaSeconds,ln.maxDurationSec,ln.minDurationSec,ln.progress,ln.startedAt,ln.status,ln.updatedAt,C]),er=h.useMemo(()=>T7({caseId:w.header.caseId,stage:3,jobStatus:Wn.status,progress:Wn.progress,etaSeconds:Wn.etaSeconds,startedAt:Wn.startedAt,updatedAt:Wn.updatedAt,completedAt:Wn.completedAt,hasResult:Wn.status==="DONE"||_&&Wn.status!=="RUNNING",minDurationSec:Wn.minDurationSec,maxDurationSec:Wn.maxDurationSec,nowMs:qe}),[w.header.caseId,qe,Wn.completedAt,Wn.etaSeconds,Wn.maxDurationSec,Wn.minDurationSec,Wn.progress,Wn.startedAt,Wn.status,Wn.updatedAt,_]),ir=Un.jobStatus==="DONE",zr=er.jobStatus==="DONE",oi=!!(N?.completed||Le.resultPerformedAt&&Le.resultSummary.trim()&&Le.biomarkerResultText?.trim()&&Le.imagingResultText?.trim()),zi=!!(Uh||p?.status==="CLASS_CONFIRMED"||p?.status==="NEXT_STEP_SET"||p?.operationStep==="CLASSIFIED"||p?.operationStep==="FOLLOW_UP"||p?.operationStep==="COMPLETED"||p?.stage===3),_n=h.useMemo(()=>{const k=v?.required,B=typeof k?.mmse=="number"&&Number.isFinite(k.mmse)?k.mmse:void 0,Y=typeof k?.cdrOrGds=="number"&&Number.isFinite(k.cdrOrGds)?k.cdrOrGds:void 0;return{specialist:!!(Ce.tests.specialist||k?.specialist||zi),mmse:typeof Ce.tests.mmse=="number"&&Number.isFinite(Ce.tests.mmse)?Ce.tests.mmse:B,cdr:typeof Ce.tests.cdr=="number"&&Number.isFinite(Ce.tests.cdr)?Ce.tests.cdr:Y,neuroCognitiveType:Ce.tests.neuroCognitiveType??k?.neuroType??void 0}},[zi,Ce.tests,v?.required]),_c=h.useMemo(()=>NAe(w.timeline),[w.timeline]),nb=h.useMemo(()=>{if(u)return iy(_c,{stage:"stage2",storedOpsStatus:w.stage3?.headerMeta.opsStatus,hasPlanConfirmed:Ar?!1:!!w.stage3?.riskReviewedAt,hasResultReceived:Ar?!1:!!(ir||Ie.receivedAt||v?.updatedAt||Ce.status!=="NOT_STARTED"),hasResultValidated:Ar?!1:!!(ir||v?.completed||Ce.status==="COMPLETED"),hasModelResult:Ar?!1:ir,inferenceStatus:Un.jobStatus,classificationConfirmed:Ar?!1:zi,nextStepDecided:Ar?!1:!!Ce.nextStep});if(s==="stage2")return iy(_c,{stage:"stage2",hasPlanConfirmed:Ar?!1:hp&&!!w.preTriageResult?.strategy,hasResultReceived:Ar?!1:!!(ir||Ie.receivedAt||v?.updatedAt||Ce.status!=="NOT_STARTED"),hasResultValidated:Ar?!1:!!(ir||v?.completed||Ce.status==="COMPLETED"),hasModelResult:Ar?!1:ir,inferenceStatus:Un.jobStatus,classificationConfirmed:Ar?!1:zi,nextStepDecided:Ar?!1:!!Ce.nextStep});if(s==="stage3")return x&&!u?TAe(x):iy(_c,{stage:"stage3",storedOpsStatus:w.stage3?.headerMeta.opsStatus,hasPlanConfirmed:!!w.stage3?.riskReviewedAt,hasResultReceived:oi||zr,hasResultValidated:oi||zr,hasModelResult:zr,inferenceStatus:er.jobStatus,classificationConfirmed:!!(Br?.at||w.stage3?.riskReviewedAt),nextStepDecided:!!(w.stage3?.planUpdatedAt||w.stage3?.headerMeta.nextTrackingContactAt),referralConfirmed:w.linkageStatus==="BOOKING_DONE"||w.linkageStatus==="REFERRAL_CREATED"});const k=w.contactExecution.status!=="NOT_STARTED",B=!!(w.contactExecution.lastOutcomeCode||w.contactExecution.lastResponseAt);return iy(_c,{stage:"stage1",hasPlanConfirmed:Oo?!1:hp&&!!w.preTriageResult?.strategy,hasResultReceived:Oo?!1:k,hasResultValidated:Oo?!1:k,hasModelResult:!1,classificationConfirmed:Oo?!1:B,nextStepDecided:Oo?!1:w.linkageStatus!=="NOT_CREATED"||w.contactExecution.status==="DONE"||w.contactExecution.status==="STOPPED"})},[w.contactExecution.lastOutcomeCode,w.contactExecution.lastResponseAt,w.contactExecution.status,w.linkageStatus,w.preTriageResult,w.stage3?.headerMeta.nextTrackingContactAt,w.stage3?.headerMeta.opsStatus,w.stage3?.planUpdatedAt,w.stage3?.riskReviewedAt,u,_c,s,hp,Oo,x,zi,Ce.nextStep,Ce.status,v?.completed,v?.updatedAt,Un.jobStatus,Ie.receivedAt,Ar,ir,er.jobStatus,Br?.at,zr,oi]),ma=I_e(w,s,u,nb),Cc=w.stage3?.transitionRisk,li=w.stage3?.programs??[],Tc=h.useMemo(()=>li.filter(k=>{if(En!=="ALL"&&k.major!==En||jn&&!k.pinned)return!1;if(!ht.trim())return!0;const B=ht.trim().toLowerCase();return`${k.major} ${k.middle} ${k.leaf}`.toLowerCase().includes(B)}),[En,jn,ht,li]);h.useMemo(()=>Tc.slice(0,24),[Tc]),h.useMemo(()=>li.filter(k=>k.selected),[li]);const nf=h.useMemo(()=>li.some(k=>k.selected&&(k.execution?.status==="PLANNED"||k.execution?.status==="IN_PROGRESS"||k.execution?.status==="DONE")),[li]),Fd=h.useMemo(()=>w.stage3?.recommendedActions.filter(k=>k.requiresApproval&&k.decision==="PENDING").length??0,[w.stage3?.recommendedActions]),Ud=w.stage3?.diffPathStatus==="SCHEDULED"||w.stage3?.diffPathStatus==="COMPLETED",qi=!!N?.completed||!!(Le.resultPerformedAt&&Le.resultSummary.trim()&&Le.biomarkerResultText?.trim()&&Le.imagingResultText?.trim()),Bn=Ud&&qi,Nn=h.useMemo(()=>li.find(k=>k.id===sr)??null,[sr,li]),is=["PRECHECK","CONTACT_EXECUTION","RESPONSE_HANDLING","FOLLOW_UP"],Rr=is,ja=H?Rr.indexOf(H):-1,Oc=H?ma.find(k=>k.id===H)??null:null,Ro=Ee?is.indexOf(Ee):-1,xs=Ee?ma.find(k=>k.id===Ee)??null:null;ma.find(k=>k.id==="FOLLOW_UP")?.status;const wa=h.useMemo(()=>d_e(w.policyGates),[w.policyGates]),Vi=Hs==="AI_FIRST"&&w.contactExecutor==="AGENT_SEND_ONLY",ko=w.contactPlan?.maxRetryPolicy.intervalHours??24,Bd=w.contactPlan?.maxRetryPolicy.maxRetries??2,rf=w.contactPlan?.templateId??(l?"S2_CONTACT_BASE":c?"S3_CONTACT_BASE":"S1_CONTACT_BASE"),Aa=p?.stage2Route??(kn==="HOSPITAL_REFERRAL"?"HOSPITAL":"CENTER"),gp=h.useCallback(k=>{Ur(k),k==="RESULT"&&gr(!0),typeof window<"u"&&window.requestAnimationFrame(()=>{document.getElementById(`stage3-step2-panel-${k.toLowerCase()}`)?.scrollIntoView({behavior:"smooth",block:"start"})})},[]),Ks=tCe({routeType:kn,hospitalName:aa,dueAt:Mr,tests:Ce.tests,optionalTests:$h,integrationReceivedAt:Ie.receivedAt,integrationUpdatedAt:Ie.lastSyncedAt,manualEditEnabled:Fs}),Gd=!!w.stage3?.riskReviewedAt,Hd=h.useMemo(()=>Ks.filter(k=>k.requiredLevel==="REQUIRED"&&(k.status==="MISSING"||k.status==="NEEDS_REVIEW"||k.status==="PENDING")),[Ks]),Io=h.useMemo(()=>{const k=Ks.filter(B=>B.status==="DONE"||B.status==="RECEIVED").length;return Ks.length?Math.round(k/Ks.length*100):0},[Ks]),Rc=h.useMemo(()=>{const k=Ks.filter(Y=>Y.requiredLevel==="REQUIRED"),B=k.filter(Y=>V_e.has(Y.status)).length;return k.length?Math.round(B/k.length*100):0},[Ks]),Wi=h.useMemo(()=>w.timeline.some(k=>k.type==="DIFF_REFER_CREATED"||k.type==="DIFF_SCHEDULED"||k.type==="LINKAGE_CREATED"),[w.timeline]),xp=h.useMemo(()=>({routeType:kn,orgName:aa,dueAt:Mr,lastSyncAt:Ie.lastSyncedAt??Ie.receivedAt??w.stage3?.riskReviewedAt,needsReasonOnChange:Wi}),[w.stage3?.riskReviewedAt,aa,Ie.lastSyncedAt,Ie.receivedAt,Wi,kn,Mr]),Do=h.useMemo(()=>{const k=Ks.some(Y=>Y.requiredLevel==="REQUIRED"&&(Y.status==="REFERRED"||Y.status==="SCHEDULED"||Y.status==="DONE"||Y.status==="RECEIVED"));return{status:Hd.length>0?"BLOCKED":Gd?"READY":k?"IN_PROGRESS":"PAUSED",completionRate:Io,requiredSatisfaction:Rc,missingCount:Hd.length,qualityScore:w.header.dataQuality.score,step1Reviewed:Gd,locks:{step2:ma.find(Y=>Y.id==="CONTACT_EXECUTION")?.status==="BLOCKED",step3:ma.find(Y=>Y.id==="RESPONSE_HANDLING")?.status==="BLOCKED",step4:ma.find(Y=>Y.id==="FOLLOW_UP")?.status==="BLOCKED"}}},[w.header.dataQuality.score,ma,Io,Ks,Hd.length,Rc,Gd]),ci=h.useCallback(k=>{if(k===kn)return;let B="";if(Wi&&typeof window<"u"&&(B=window.prompt(" /  .    .")?.trim()??"",!B)){De.error("    .");return}const Y=kn==="HOSPITAL_REFERRAL"?" ":"  ",de=k==="HOSPITAL_REFERRAL"?" ":"  ";yl(k),$r("step1Plan"),Ye({type:"STATUS_CHANGE",at:ut(),from:Y,to:de,reason:B||"Stage2   ",by:w.header.assigneeName}),We(`Stage2   : ${Y}  ${de}${B?` (${B})`:""}`)},[We,$r,w.header.assigneeName,Wi,kn]),di=h.useCallback(()=>{const k=ut();if(kn==="HOSPITAL_REFERRAL"){Ye({type:"DIFF_REFER_CREATED",at:k,by:w.header.assigneeName,summary:` /: ${aa||""}   ${dt(Mr)}`}),We(`Stage2  /: ${aa||""}`),U(B=>B.stage3?{...B,stage3:{...B.stage3,diffPathStatus:B.stage3.diffPathStatus==="NONE"?"REFERRED":B.stage3.diffPathStatus}}:B),De.success(" / .");return}Ye({type:"DIFF_SCHEDULED",at:k,by:w.header.assigneeName,summary:`  : ${dt(Mr)}`}),We(`Stage2   : ${dt(Mr)}`),U(B=>B.stage3?{...B,stage3:{...B.stage3,diffPathStatus:B.stage3.diffPathStatus==="NONE"?"SCHEDULED":B.stage3.diffPathStatus}}:B),De.success("   .")},[We,w.header.assigneeName,aa,kn,Mr]),kc=h.useCallback((k,B)=>{const Y=ut();if(B.key==="OPEN_PIPELINE"){ze("CONTACT_EXECUTION");return}if(B.key==="VIEW_RESULT"){ze("CONTACT_EXECUTION"),typeof window<"u"&&window.setTimeout(()=>{(document.getElementById("stage2-modal-step2-input")??document.getElementById("stage2-step2-input"))?.scrollIntoView({behavior:"smooth",block:"start"})},20);return}if(B.key==="REQUEST_RESULT"){Ye({type:"MESSAGE_SENT",at:Y,by:w.header.assigneeName,summary:`${k.label}  `}),We(`Stage2  : ${k.label}`),De.success(`${k.label}   .`);return}if(B.key==="MANUAL_EXCEPTION"){si(!0),ze("CONTACT_EXECUTION"),We(`Stage2  () : ${k.label}`),De("STEP2      .");return}Ye({type:"STAGE2_RESULTS_RECORDED",at:Y,by:w.header.assigneeName,summary:`${k.label}  `}),We(`Stage2  : ${k.label}`),De.success(`${k.label}   .`)},[We,w.header.assigneeName]),ui=h.useMemo(()=>pq(kn,xr),[xr,kn]),sa=Aa==="HOSPITAL"?4:3,bs=v?sa-v.missing.length:lg(_n),af=Math.round(Math.max(0,bs)/sa*100),Tl=Fy(S?.predictedLabel)??ln.recommendedLabel,Kd=yq(S?.mciBand),ys=Tl??"MCI",vs=t?.risk===""?"":t?.risk===""?"":"",vn=Tl??zt,Ns=Kd,c0=ir?h_(vn):!1,d0=Math.max(0,Math.floor((Date.now()-new Date(Na).getTime())/(1e3*60*60*24))),u0=xAe(_n,kn,xr),Ol=[...ui.mmse&&!(typeof _n.mmse=="number"&&Number.isFinite(_n.mmse))?["MMSE  "]:[],...ui.cdrOrGds&&!(typeof _n.cdr=="number"&&Number.isFinite(_n.cdr))?["CDR/GDS  "]:[],...ui.neuroCognitive&&!_n.neuroCognitiveType?["  "]:[],...ui.specialist&&!_n.specialist?["  "]:[],...A,fa.trim().length>0?null:"  1 "].filter(Boolean),fi=Math.max(u0,A.length),bp=+(w.linkageStatus!=="BOOKING_DONE")+ +(Ce.status!=="COMPLETED"),Po=!!zi,Yi=Un.jobStatus==="DONE",yp=Math.max(0,Math.round((sa+1-Ol.length)/(sa+1)*100)),uS=h.useMemo(()=>{const k=w.linkageStatus!=="NOT_CREATED",B=!!(Ie.receivedAt||v?.updatedAt||Ce.status!=="NOT_STARTED");return bAe(fi,k,B)},[w.linkageStatus,Ce.status,v?.updatedAt,Ie.receivedAt,fi]),sf=Un.jobStatus==="DONE"&&fi===0?"READY":uS,Ss=Yi?Tl??ln.recommendedLabel:void 0,vp=!!Ss&&zt!==Ss,f0=vp&&gn.trim().length===0,Ka=Yi&&Ol.length===0&&!f0,zd=Po||Ka,qd=Ce.status==="NOT_STARTED"?"  ":Ce.status==="IN_PROGRESS"?"  ":Ka?" ":"  ",pi=zt==="MCI"?E1(t):void 0,Ti=Yi?Eg(zt,pi):void 0,Vd=Tl??zt,Rl=Kd??(Vd==="MCI"?pi:void 0),Wd=Yi?S?.probs??Eg(Vd,Rl):void 0,Yn=Ee?Ps[Ee]??{}:{},Mo=h.useMemo(()=>Ee?Sc[Ee].filter(k=>!!Yn[k]).map(k=>({key:k,message:Yn[k]})):[],[Yn,Sc,Ee]);h.useEffect(()=>{if(ln.status!=="RUNNING"||Un.jobStatus!=="RUNNING"&&Un.jobStatus!=="PENDING"||!(Un.progress>=95))return;const B=ut(),Y=ln.recommendedLabel??p_(Ce.tests);let de=!1;if(Lr(Oe=>Oe.status!=="RUNNING"?Oe:(de=!0,{...Oe,status:"DONE",updatedAt:B,completedAt:B,progress:100,etaSeconds:0,recommendedLabel:Y})),!de)return;let re=!0;if(t?.id&&(re=s7(t.id,w.header.assigneeName,{labelOverride:Y})),!re){Lr(Oe=>({...Oe,status:"FAILED",updatedAt:B,completedAt:B,failureReason:"STAGE2_GATE_FAILED"})),Ye({type:"INFERENCE_FAILED",stage:2,at:B,by:w.header.assigneeName,summary:"Stage2   ",reason:" /  "}),We("Stage2   :   ");return}Ye({type:"INFERENCE_COMPLETED",stage:2,at:B,by:w.header.assigneeName,summary:`Stage2      ${Y}`,progress:100,etaSeconds:0}),Ye({type:"STAGE2_RESULTS_RECORDED",at:B,by:w.header.assigneeName,summary:`  :  ${Y} ( )`}),We(`Stage2   :  ${Y}`)},[We,t?.id,w.header.assigneeName,s7,Ce.tests,Un.jobStatus,Un.progress,ln.recommendedLabel,ln.status]),h.useEffect(()=>{if(Wn.status!=="RUNNING"||er.jobStatus!=="RUNNING"&&er.jobStatus!=="PENDING"||!(er.progress>=95))return;const B=ut();let Y=!1;if(Us(re=>re.status!=="RUNNING"?re:(Y=!0,{...re,status:"DONE",updatedAt:B,completedAt:B,progress:100,etaSeconds:0})),!Y)return;let de=!0;if(t?.id&&(de=o7(t.id,w.header.assigneeName)),!de){Us(re=>({...re,status:"FAILED",updatedAt:B,completedAt:B,failureReason:"STAGE3_GATE_FAILED"})),Ye({type:"INFERENCE_FAILED",stage:3,at:B,by:w.header.assigneeName,summary:"Stage3   ",reason:"Stage2  /   "}),We("Stage3   :   ");return}Ye({type:"INFERENCE_COMPLETED",stage:3,at:B,by:w.header.assigneeName,summary:"Stage3   ",progress:100,etaSeconds:0}),We("Stage3   ")},[We,t?.id,w.header.assigneeName,o7,er.jobStatus,er.progress,Wn.status]);const _a=h.useCallback(()=>{if(typeof window>"u")return;(document.getElementById("stage2-modal-step2-input")??document.getElementById("stage2-step2-input"))?.scrollIntoView({behavior:"smooth",block:"start"})},[]),kl=h.useCallback(()=>{ze("CONTACT_EXECUTION"),gr(!0),!(typeof window>"u")&&window.setTimeout(()=>{document.getElementById("stage3-step2-input")?.scrollIntoView({behavior:"smooth",block:"start"}),ip("step2PerformedAt")},30)},[ip]),Yd=h.useCallback(()=>Co?!1:H!=="RESPONSE_HANDLING"||!da?!0:window.confirm("     . ?"),[H,Co,da]),Qi=h.useCallback(k=>Co||H==="RESPONSE_HANDLING"&&k!=="RESPONSE_HANDLING"&&!Yd()?!1:(F(k),k==="FOLLOW_UP"&&_i(!0),!0),[H,Yd,Co]),zs=h.useCallback(()=>{Yd()&&F(null)},[Yd]),mi=h.useCallback(()=>{ze(null)},[]),Ic=h.useCallback(({actor:k,summary:B,detailMessage:Y,moveToHuman:de=!1})=>{if(Hn.status!=="QUEUED"&&Hn.status!=="RUNNING")return;const re=ut(),Oe=_o.current+1;_o.current=Oe,Hn.idempotencyKey&&Sl.current.delete(Hn.idempotencyKey),L7.cancelJob(Hn.jobId),Ad(je=>({...je,status:"CANCELED",finishedAt:re,summary:B,lastError:Y})),de&&U(je=>{const nt={...je.contactExecution,status:"HANDOFF_TO_HUMAN"};return{...je,contactExecution:nt,contactFlowSteps:Ys(nt,je.preTriageResult,je.linkageStatus,s)}}),Ye({type:"AGENT_JOB_CANCELED",at:re,actor:k,caseId:w.header.caseId,attemptNo:Hn.attemptNo,idempotencyKey:Hn.idempotencyKey??`${w.header.caseId}:0:SMS:${rf}`,summary:B,detail:Y,by:k}),We(`Agent   : ${B}${Y?` (${Y})`:""}`)},[Hn.attemptNo,Hn.idempotencyKey,Hn.status,rf,We,w.header.caseId]),Oi=h.useCallback(({trigger:k,runAfterMs:B=250,force:Y=!1})=>{if(Hs!=="AI_FIRST"||w.contactExecutor!=="AGENT_SEND_ONLY"||wa!=="PASS"||!Y&&!["NOT_STARTED","RETRY_NEEDED"].includes(w.contactExecution.status)||!Y&&["QUEUED","RUNNING"].includes(Hn.status))return!1;const de=w.contactExecution.retryCount+1;if(de>Bd)return We(`Agent   :   ${Bd} .`),!1;if(!Y&&w.contactExecution.status==="RETRY_NEEDED"&&w.contactExecution.lastSentAt&&Date.now()-new Date(w.contactExecution.lastSentAt).getTime()<ko*60*60*1e3)return!1;const re=u_e(w.header.caseId,de,"SMS",rf);if(Sl.current.has(re))return!1;const Oe=L7.queueSms({caseId:w.header.caseId,idempotencyKey:re}),je=Oe.queuedAt,nt=`${f_e(k)}    `;Ad({status:"QUEUED",attemptNo:de,jobId:Oe.jobId,idempotencyKey:re,queuedAt:je,startedAt:void 0,finishedAt:void 0,nextRetryAt:B>5e3?new Date(Date.now()+B).toISOString():void 0,channelResult:void 0,lastError:void 0,summary:nt}),Sl.current.add(re),Ye({type:"AGENT_JOB_QUEUED",at:je,actor:"system",caseId:w.header.caseId,attemptNo:de,idempotencyKey:re,summary:nt,detail:`trigger=${k}`,by:"system"}),We(`Agent   : attempt ${de} (${re})`);const Mt=_o.current+1;return _o.current=Mt,window.setTimeout(()=>{if(_o.current!==Mt)return;const $e=ut();Ad(ke=>ke.idempotencyKey!==re||ke.status!=="QUEUED"?ke:{...ke,status:"RUNNING",startedAt:$e,summary:"Agent    "}),Ye({type:"AGENT_JOB_STARTED",at:$e,actor:"agent",caseId:w.header.caseId,attemptNo:de,idempotencyKey:re,summary:"Agent    ",detail:`attempt ${de}`,by:"agent"}),We(`Agent   : attempt ${de}`),window.setTimeout(()=>{if(_o.current!==Mt)return;const ke=ut(),Et=p_e({caseRecord:t,gates:w.policyGates,attemptNo:de});if(Et.success){Ad(Ct=>({...Ct,status:"SUCCEEDED",attemptNo:de,idempotencyKey:re,finishedAt:ke,channelResult:Et.channelResult,lastError:void 0,nextRetryAt:void 0,summary:"Agent    "})),U(Ct=>{const Kn={...Ct.contactExecution,status:"SENT",lastSentAt:ke,retryCount:Math.max(Ct.contactExecution.retryCount,de)};return{...Ct,contactExecution:Kn,contactFlowSteps:Ys(Kn,Ct.preTriageResult,Ct.linkageStatus,s)}}),jt(mt(48)),Ye({type:"AGENT_SMS_SENT",at:ke,actor:"agent",caseId:w.header.caseId,attemptNo:de,idempotencyKey:re,channelResult:Et.channelResult,summary:"Agent    ",detail:kO[Et.channelResult],by:"agent"}),Ye({type:"AGENT_JOB_SUCCEEDED",at:ke,actor:"agent",caseId:w.header.caseId,attemptNo:de,idempotencyKey:re,summary:"Agent   ",detail:kO[Et.channelResult],by:"agent"}),jc({at:ke,result:"SENT_SUCCESS",summary:"Agent    ",recommendationId:rs??void 0,recommendationTitle:Ls.find(Ct=>Ct.id===rs)?.title,actor:"agent"}),We(`Agent   : attempt ${de} (${re})`);return}const Pn=new Date(Date.now()+ko*60*60*1e3).toISOString();Ad(Ct=>({...Ct,status:"FAILED",attemptNo:de,idempotencyKey:re,finishedAt:ke,channelResult:Et.channelResult,lastError:Et.errorMessage,nextRetryAt:Pn,summary:"Agent    "})),U(Ct=>{const Kn={...Ct.contactExecution,status:"RETRY_NEEDED",lastSentAt:ke,retryCount:Math.max(Ct.contactExecution.retryCount,de)};return{...Ct,contactExecution:Kn,contactFlowSteps:Ys(Kn,Ct.preTriageResult,Ct.linkageStatus,s)}}),jt(Pn),Ye({type:"AGENT_JOB_FAILED",at:ke,actor:"agent",caseId:w.header.caseId,attemptNo:de,idempotencyKey:re,summary:"Agent   ",detail:Et.errorMessage,errorCode:Et.errorCode,by:"agent"}),jc({at:ke,result:"SENT_FAILED",summary:Et.errorMessage??"Agent    ",recommendationId:rs??void 0,recommendationTitle:Ls.find(Ct=>Ct.id===rs)?.title,actor:"agent"}),We(`Agent   : ${Et.errorMessage??Et.errorCode??"unknown"}`)},1e3)},B),!0},[wa,Hn.status,Bd,ko,rf,We,t,w.contactExecution.lastSentAt,w.contactExecution.retryCount,w.contactExecution.status,w.contactExecutor,w.header.caseId,w.policyGates,Hs,Ls,rs]),Ri=h.useCallback(()=>{if(!Oi({trigger:"MANUAL_RETRY_NOW",runAfterMs:200,force:!0})){De.error("    .");return}De.success("Agent   .")},[Oi]),Xi=h.useCallback(()=>{if(!Oi({trigger:"MANUAL_RETRY_SCHEDULE",runAfterMs:ko*60*60*1e3,force:!0})){De.error("    .");return}De.success(` ${ko}  .`)},[ko,Oi]);h.useEffect(()=>{if(!Vi||wa!=="PASS"||w.contactExecution.status!=="NOT_STARTED"&&w.contactExecution.status!=="RETRY_NEEDED")return;const k=w.header.caseId;Gh.current.has(k)||(Gh.current.add(k),Oi({trigger:"AUTO_ON_ENTER",runAfterMs:250}))},[wa,w.contactExecution.status,w.header.caseId,Vi,Oi]),h.useEffect(()=>{!lp.current&&Vi&&wa==="PASS"&&Oi({trigger:"AUTO_ON_STRATEGY",runAfterMs:250}),lp.current=Vi},[wa,Vi,Oi]),h.useEffect(()=>{!Vi||wa!=="PASS"||w.contactExecution.status!=="RETRY_NEEDED"||!w.contactExecution.lastSentAt||Date.now()-new Date(w.contactExecution.lastSentAt).getTime()<ko*60*60*1e3||Oi({trigger:"AUTO_ON_RETRY_DUE",runAfterMs:200})},[wa,ko,w.contactExecution.lastSentAt,w.contactExecution.status,Vi,qe,Oi]),h.useEffect(()=>{Vi||Hn.status!=="QUEUED"&&Hn.status!=="RUNNING"||Ic({actor:"system",summary:"     .",moveToHuman:!0})},[Hn.status,Ic,Vi]);const Ji=h.useCallback(k=>{const B=qp(ma,k);if(B){De.error(B);return}if(c){ze(k);return}Qi(k)},[c,Qi,ma]),Il=h.useCallback(k=>{if(!Ee)return;const B=is.indexOf(Ee),Y=is[B+k];if(!Y)return;const de=qp(ma,Y);if(de){De.error(de);return}ze(Y)},[ma,Ee,is]),of=h.useCallback(k=>{if(!H)return;const B=Rr.indexOf(H),Y=Rr[B+k];if(!Y)return;const de=qp(ma,Y);if(de){De.error(de);return}Qi(Y)},[H,Qi,ma,Rr]),Qd=h.useCallback(()=>{if(!Ee||!w.stage3)return;const k=ut();if(Ee==="PRECHECK"){if(u){const re=Hd,Oe=Mp(_n,kn,xr,{skipTestChecks:!0,strategyMemo:Me.strategyMemo,consentConfirmed:Me.consentConfirmed});if(re.length>0&&(Oe.step1Plan=`   : ${re.map(nt=>nt.label).join(", ")}`),Bs(Oe)){re.length>0&&b_(re.map(nt=>nt.id),be),De.error("STEP1  /    .");return}U(nt=>{if(!nt.stage3)return nt;const Mt=nt.header.effectiveStrategy??nt.preTriageResult?.strategy??"HUMAN_FIRST";return{...nt,preTriageResult:nt.preTriageResult??{strategy:Mt,triggers:["STAGE2_PLAN_BASELINE_CONFIRMED"],policyNote:"Stage2      .",confidence:"RULE"},policyGates:nt.policyGates.map($e=>$e.key==="CONSENT_OK"||$e.key==="PHONE_VERIFIED"||$e.key==="CONTACTABLE_TIME_OK"?{...$e,status:"PASS",failReason:void 0}:$e),stage3:{...nt.stage3,riskReviewedAt:k}}});const je=` ${kn==="HOSPITAL_REFERRAL"?" ":"  "}   ${aa}   ${dt(Mr)}`;Ye({type:"STAGE2_PLAN_CONFIRMED",at:k,by:w.header.assigneeName,summary:je}),We(`STAGE2_PLAN_CONFIRMED: ${je}`),ya({}),De.success("STEP1   ."),ze("CONTACT_EXECUTION");return}const B={};if(Me.consentConfirmed||(B.step1Consent="   ."),Me.strategyMemo.trim().length<10&&(B.step1StrategyMemo="  10   ."),Nl("PRECHECK",B)){De.error("STEP1     .");return}Ba(re=>({...re,PRECHECK:{}})),U(re=>{if(!re.stage3)return re;const Oe=[...re.stage3.transitionRisk.series],je=Oe[Oe.length-1],nt={t:k,risk2y:je?.risk2y??re.stage3.transitionRisk.risk2y_now,ciLow:je?.ciLow,ciHigh:je?.ciHigh,source:"manual",event:"REEVAL"},Mt=[...Oe.slice(-11),nt],$e=re.header.effectiveStrategy??re.preTriageResult?.strategy??"HUMAN_FIRST";return{...re,preTriageResult:re.preTriageResult??{strategy:$e,triggers:["STAGE3_REVIEW_BASELINE_CONFIRMED"],policyNote:"Stage3      .",confidence:"RULE"},policyGates:re.policyGates.map(ke=>ke.key==="CONSENT_OK"||ke.key==="PHONE_VERIFIED"||ke.key==="CONTACTABLE_TIME_OK"?{...ke,status:"PASS",failReason:void 0}:ke),stage3:{...re.stage3,riskReviewedAt:k,transitionRisk:{...re.stage3.transitionRisk,updatedAt:k,series:Mt}}}});const Y=[Me.diffNeeded?u?"Stage2  ":" ":u?"Stage2  ":" ",Me.caregiverNeeded?"  ":null,Me.consentConfirmed?"  ":null,Me.diffDecisionReason.trim()?`:${Me.diffDecisionReason.trim()}`:null].filter(Boolean).join(", "),de=`      ${Me.priority}${Y?`   ${Y}`:""}  : ${Me.strategyMemo.slice(0,80)}`;Ye({type:"RISK_REVIEWED",at:k,by:w.header.assigneeName,summary:de}),We(`${u?"Stage2   ":"Stage3  "} : ${Y||" "}  ${Me.strategyMemo}`),Jt({at:k,memo:Me.strategyMemo,nextAction:u?"UPDATE_PLAN":"RECOMMEND_DIFF"}),De.success(u?"STEP1   .":"STEP1  ."),ze("CONTACT_EXECUTION");return}if(Ee==="CONTACT_EXECUTION"){if(u){const Y=Mp(_n,kn,xr);if(Fs&&ss.trim().length<5&&(Y.manualEditReason="   5  ."),Bs(Y)){De.error("STEP2 /    .");return}if(!Qu())return;const re=!Gd;if(U(je=>je.stage3?{...je,stage3:{...je.stage3,riskReviewedAt:je.stage3.riskReviewedAt??k,diffPathStatus:"SCHEDULED"}}:je),re){const je=`STEP2        ${kn==="HOSPITAL_REFERRAL"?" ":"  "}`;Ye({type:"STAGE2_PLAN_CONFIRMED",at:k,by:w.header.assigneeName,summary:je}),We(`STAGE2_PLAN_CONFIRMED(AUTO): ${je}`)}const Oe=`    (${lg(_n,Aa)}/${sa})`;Ye({type:"STAGE2_RESULTS_RECORDED",at:k,by:w.header.assigneeName,summary:Oe}),We(`STAGE2_RESULTS_RECORDED: ${Oe}`),ya({}),De.success("STEP2    ."),ze("RESPONSE_HANDLING");return}if(Fd>0){De.error("     .");return}const B={};if(!ce.trim()&&!Bt.consultStarted&&(B.step2CallRecord="  (   ) ."),Le.preferredHospital.trim()||(B.step2Hospital="/   ."),Me.diffNeeded&&!Le.testBiomarker&&!Le.testBrainImaging&&!Le.testOther&&(B.step2TestSelection="   1  ."),Le.bookingAt||(B.step2BookingAt="   ."),Bt.bookingConfirmed||(B.step2BookingAt="     ."),Me.diffNeeded&&(Le.resultPerformedAt||(B.step2PerformedAt="    ."),Le.biomarkerResultText?.trim()||(B.step2BiomarkerResult="   ."),Le.imagingResultText?.trim()||(B.step2ImagingResult="   ."),Le.resultSummary.trim()||(B.step2ResultSummary="   .")),Object.keys(B).length>0){Me.diffNeeded&&(B.step2PerformedAt||B.step2BiomarkerResult||B.step2ImagingResult||B.step2ResultSummary)&&gr(!0),Nl("CONTACT_EXECUTION",B),De.error("STEP2     .");return}if(Ba(Y=>({...Y,CONTACT_EXECUTION:{}})),!Bn){De.error(u?"       STEP3   .":"    STEP3( /)   .");return}We(`${u?"":""}   : ${w.stage3.diffPathStatus}`),De.success(u?"STEP2    .":"STEP2  ."),Il(1);return}if(Ee==="RESPONSE_HANDLING"){if(u){const Y=Mp(_n,kn,xr,{rationale:fa,recommendedLabel:Ss,selectedLabel:zt,overrideReason:gn});if(Bs(Y)){De.error("STEP3     .");return}if(!Ka){De.error("   .");return}U(re=>re.stage3?{...re,stage3:{...re.stage3,reevalStatus:"SCHEDULED"}}:re),Od();const de=`  ${zt}${zt==="MCI"?`(${pi??"-"})`:""}`;Ye({type:"STAGE2_CLASS_CONFIRMED",at:k,by:w.header.assigneeName,summary:de}),We(`STAGE2_CLASS_CONFIRMED: ${de}`),ya({}),De.success("STEP3   ."),ze("FOLLOW_UP");return}if(!Bn){De.error(u?"STEP2      .":" /      .");return}if(!Dr.memo.trim()){De.error(u?"(MMSE/CDR)      .":"      .");return}const B=u?`  : ${Dr.memo.slice(0,120)}`:`  : ${Dr.memo.slice(0,120)}   : ${oy[Dr.nextAction]}`;wl({summary:B,nextAction:u?"UPDATE_PLAN":Dr.nextAction,silentToast:!0}),De.success(u?"STEP3   .":"STEP3    ."),Il(1);return}if(u){if(!zd){De.error("STEP3     .");return}const B=Mp(_n,kn,xr,{skipTestChecks:!0,requireNextStep:!0,hasNextStep:!!Ce.nextStep});if(Bs(B)){De.error("STEP4    .");return}U(de=>de.stage3?{...de,stage3:{...de.stage3,planUpdatedAt:k,headerMeta:{...de.stage3.headerMeta,planStatus:"ACTIVE",opsStatus:Ce.nextStep==="FOLLOWUP_2Y"?"TRACKING":"LINKAGE_PENDING",nextTrackingContactAt:jr.nextTrackingAt??de.stage3.headerMeta.nextTrackingContactAt}}}:de);const Y=Ce.nextStep==="FOLLOWUP_2Y"?" (2  )":Ce.nextStep==="STAGE3"?"MCI  Stage3 ":"  ";Ye({type:"STAGE2_NEXT_STEP_SET",at:k,by:w.header.assigneeName,summary:Y}),We(`STAGE2_NEXT_STEP_SET: ${Y}`),ya({}),De.success("STEP4    ."),mi();return}if(!nf){De.error("   1     .");return}if(!jr.nextTrackingAt){De.error("      .");return}U(B=>B.stage3?{...B,stage3:{...B.stage3,planUpdatedAt:k,headerMeta:{...B.stage3.headerMeta,planStatus:"ACTIVE",opsStatus:"TRACKING",nextTrackingContactAt:jr.nextTrackingAt}}}:B),Ye({type:"PLAN_UPDATED",at:k,by:w.header.assigneeName,summary:"    ."}),Ye({type:"NEXT_TRACKING_SET",at:k,by:w.header.assigneeName,nextAt:jr.nextTrackingAt,summary:` D-${jr.reminderDaysBefore} / ${jr.reminderTime}   ${jr.retryCount}`}),We(`Stage3  () :   ${dt(jr.nextTrackingAt)}   D-${jr.reminderDaysBefore}`),De.success("STEP4  () ."),mi()},[mi,w.header.assigneeName,w.stage3,wl,Il,Bn,nf,Fd,Me.caregiverNeeded,Me.consentConfirmed,Me.diffDecisionSet,Me.diffNeeded,Me.priority,Me.resultLinkedChecked,Me.sensitiveHistory,Me.strategyMemo,Me.diffDecisionReason,Dr.memo,Dr.nextAction,Ee,jr.nextTrackingAt,jr.reminderDaysBefore,jr.reminderTime,jr.retryCount,Le.bookingAt,Le.preferredHospital,Le.testBiomarker,Le.testBrainImaging,Le.testOther,Le.resultPerformedAt,Le.resultSummary,Le.biomarkerResultText,Le.imagingResultText,Bt.bookingConfirmed,Bt.consultStarted,Ka,zt,gn,Ce,pi,_n,aa,Fs,ss,Ss,xr,kn,Aa,fi,Mr,Gd,zd,sa,Bs,Nl,Od,u,Qu,ce]),lf=h.useCallback(async()=>{if(!H)return;const k=ut();if(H==="PRECHECK"){const Y=w.policyGates.filter(Oe=>Oe.key!=="GUARDIAN_OPTIONAL"),de=Y.filter(Oe=>Oe.status==="FAIL"),re=Y.filter(Oe=>Oe.status==="UNKNOWN");if(de.length>0){De.error("        .");return}re.length>0&&De("           ."),U(Oe=>{const je=Oe.preTriageResult??Cq(_q(Oe.preTriageInput),Oe.contactExecutor==="AGENT_SEND_ONLY"?"AGENT":"HUMAN"),nt=Oe.header.effectiveStrategy??je.strategy,Mt=Oe.header.contactStrategy==="MANUAL_OVERRIDE"?"MANUAL_OVERRIDE":je.strategy;return{...Oe,header:{...Oe.header,contactStrategy:Mt,effectiveStrategy:nt},preTriageResult:je,contactFlowSteps:Ys(Oe.contactExecution,je,Oe.linkageStatus,s)}}),Ye({type:"MESSAGE_SENT",at:k,summary:"STAGE1_GATE_DONE     ",by:w.header.assigneeName}),We("STAGE1_GATE_DONE:    "),De.success("STEP1  ."),Qi("CONTACT_EXECUTION");return}if(H==="CONTACT_EXECUTION"){if(w.contactExecution.status==="NOT_STARTED"){De.error("       .");return}Ye({type:"MESSAGE_SENT",at:k,summary:"STAGE1_CONTACT_ATTEMPT    ",by:w.header.assigneeName}),We("STAGE1_CONTACT_ATTEMPT:   "),De.success("STEP2  ."),Qi("RESPONSE_HANDLING");return}if(H==="RESPONSE_HANDLING"){if(!!!(w.contactExecution.lastOutcomeCode||w.contactExecution.lastResponseAt)){De.error("       .");return}Ye({type:"MESSAGE_SENT",at:k,summary:`STAGE1_RESPONSE_RECORDED  ${w.contactExecution.lastOutcomeCode?vi[w.contactExecution.lastOutcomeCode].label:" "} `,by:w.header.assigneeName}),We("STAGE1_RESPONSE_RECORDED:    "),De.success("STEP3  ."),Qi("FOLLOW_UP");return}Ju()&&(Ye({type:"MESSAGE_SENT",at:k,summary:"STAGE1_DECISION_DONE    ",by:w.header.assigneeName}),We("STAGE1_DECISION_DONE:   "),De.success("STEP4  ."),zs())},[H,We,zs,w.contactExecution.lastOutcomeCode,w.contactExecution.lastResponseAt,w.contactExecution.status,w.header.assigneeName,w.policyGates,s,Ju,Qi]),Zi=h.useCallback(k=>{const B=C_e[k];Ji(B)},[Ji]),cf=h.useCallback(async k=>{if(!(await qx(k)).ok){De.error("   .");return}const Y=_d.find(de=>de.idempotencyKey===k);Y&&(Ye({type:"CALENDAR_SYNC",at:ut(),status:"SUCCESS",eventType:Y.eventType,title:Y.title,scheduledAt:Y.scheduledAt,idempotencyKey:Y.idempotencyKey,by:w.header.assigneeName}),We(`   : ${Y.title}`)),De.success("  .")},[We,_d,w.header.assigneeName,qx]);if(h.useEffect(()=>{const k=s==="stage2"?Ol.length:l0,B=s==="stage2"?Math.max(0,4-bs):tb,Y=s==="stage3"&&u?Math.max(0,Math.min(100,Math.round(w.header.sla.level==="OVERDUE"?76:w.header.sla.level==="DUE_SOON"?58:32+Math.max(0,k*4+B*3)))):void 0,de=Y==null?"MID":Y>=70?"HIGH":Y>=45?"MID":"LOW",re=Y==null?"FLAT":Y>=70?"UP":Y>=45?"VOLATILE":"DOWN";n?.({contactMode:o0,effectiveMode:Hs,slaLevel:w.header.sla.level,qualityScore:w.header.dataQuality.score,missingCount:k,warningCount:B,lastUpdatedAt:w.timeline[0]?.at,nextActionLabel:s==="stage2"?qd:void 0,stage2Meta:s==="stage2"||u?{diagnosisStatus:Ce.status,completionPct:af,requiredDataPct:yp,completedCount:bs,classificationLabel:ir?vn:"",modelAvailable:ir,missingEvidence:A,mciStage:ir&&vn==="MCI"?Rl:void 0,stage3EntryNeeded:c0,enteredAt:va,targetAt:Na,delayDays:d0,nextActionLabel:qd}:void 0,stage3Meta:s==="stage3"&&w.stage3?{opsStatus:w.stage3.headerMeta.opsStatus,stage3Type:x?.source.profile?.stage3Type,originStage2Result:x?.source.profile?.originStage2Result,risk2yNowPct:u?Y??0:zr?x?.display.riskBadge.kind==="ready"?x.display.riskBadge.riskPct:Yo(w.stage3.transitionRisk.risk2y_now):void 0,risk2yLabel:u?de:zr?dh(w.stage3.transitionRisk.risk2y_now):void 0,modelAvailable:u?ir:zr,missingEvidence:u?A:T,trend:u?re:w.stage3.transitionRisk.trend,modelVersion:u?"stage2-ops-v1.0":w.stage3.transitionRisk.modelVersion,riskUpdatedAt:w.stage3.transitionRisk.updatedAt,nextReevalAt:w.stage3.headerMeta.nextReevalAt,nextTrackingContactAt:w.stage3.headerMeta.nextTrackingContactAt,nextProgramAt:w.stage3.headerMeta.nextProgramAt,diffPathStatus:w.stage3.diffPathStatus,planStatus:w.stage3.headerMeta.planStatus,trackingCycleDays:w.stage3.headerMeta.trackingCycleDays,churnRisk:u?w.header.sla.level==="OVERDUE"?"HIGH":w.header.sla.level==="DUE_SOON"?"MID":"LOW":w.stage3.headerMeta.churnRisk}:void 0})},[w.header.sla.level,w.header.dataQuality.score,w.stage3,w.timeline,Hs,l0,s,n,bs,af,vn,Rl,Ce.status,va,Ol.length,qd,c0,Na,d0,ir,x,zr,A,T,o0,tb,u]),h.useEffect(()=>{if(r){if(s!=="stage3"){r(null);return}r(()=>n0())}},[s,r,n0]),h.useEffect(()=>{Nn&&Be({owner:Nn.execution?.owner??w.header.assigneeName,dueDate:Nn.execution?.dueDate,institution:Nn.execution?.institution,method:Nn.execution?.method??"",status:Nn.execution?.status??"PLANNED",note:Nn.execution?.note??""})},[Nn,w.header.assigneeName]),l){const k=[{key:"STEP 1",title:"  ",status:Ar?"PENDING":w.reservationInfo?.scheduledAt?"DONE":w.linkageStatus!=="NOT_CREATED"?"IN_PROGRESS":"PENDING",reason:Ar?"Step1  ":w.reservationInfo?.scheduledAt?` ${dt(w.reservationInfo.scheduledAt)}`:"/   "},{key:"STEP 2",title:"  ",status:Ar?"PENDING":bs>=sa?"DONE":bs>0?"IN_PROGRESS":"PENDING",reason:Ar?"Step1    ":` ${sa}  ${bs} `},{key:"STEP 3",title:" ",status:Ar?"BLOCKED":Po?"DONE":Ka?"IN_PROGRESS":"BLOCKED",reason:Ar?"Step2    ":Po?"  ":Ka?" ":" "},{key:"STEP 4",title:"  ",status:Ar?"PENDING":Ce.nextStep?"DONE":Po?"IN_PROGRESS":"PENDING",reason:Ar?"Step3   ":Ce.nextStep?` ${Ce.nextStep}`:"   "}],B=[{label:" ",done:!!Ce.tests.specialist,sub:Ce.tests.specialist?"  ":"  "},{label:"MMSE",done:Aa==="CENTER"?!0:typeof Ce.tests.mmse=="number",sub:Aa==="CENTER"&&typeof Ce.tests.mmse!="number"?"   :  ":typeof Ce.tests.mmse=="number"?` ${Ce.tests.mmse}`:""},{label:"CDR or GDS",done:typeof Ce.tests.cdr=="number",sub:typeof Ce.tests.cdr=="number"?` ${Ce.tests.cdr}`:""},{label:"",done:!!Ce.tests.neuroCognitiveType,sub:Ce.tests.neuroCognitiveType??" "}];return a.jsxs("div",{className:"space-y-5",children:[a.jsxs("div",{className:"grid grid-cols-1 gap-4 xl:grid-cols-12",children:[a.jsxs("aside",{className:"space-y-4 xl:col-span-3",children:[a.jsxs("section",{className:"rounded-xl border border-slate-200 bg-white p-4 shadow-sm",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"Stage1  "}),a.jsxs("div",{className:"mt-3 space-y-2 text-xs",children:[a.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 px-3 py-2",children:[a.jsx("p",{className:"text-[11px] text-slate-500",children:" "}),a.jsx("p",{className:"mt-1 font-semibold text-slate-900",children:w.riskEvidence.topFactors[0]?.title??"   "})]}),a.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 px-3 py-2",children:[a.jsx("p",{className:"text-[11px] text-slate-500",children:" "}),a.jsxs("p",{className:"mt-1 font-semibold text-slate-900",children:[Cl,""]})]}),a.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 px-3 py-2",children:[a.jsx("p",{className:"text-[11px] text-slate-500",children:" "}),a.jsx("p",{className:"mt-1 font-semibold text-slate-900",children:vn===""?"":""})]})]})]}),a.jsxs("section",{className:"rounded-xl border border-slate-200 bg-white p-4 shadow-sm",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"Stage2   Scorecard"}),a.jsxs("div",{className:"mt-3 space-y-2 text-xs",children:[B.map(Y=>a.jsxs("article",{className:"rounded-md border border-slate-200 bg-slate-50 px-3 py-2",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("p",{className:"font-semibold text-slate-900",children:Y.label}),a.jsx("span",{className:he("rounded-md border px-2 py-0.5 text-[10px] font-semibold",Y.done?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-amber-200 bg-amber-50 text-amber-700"),children:Y.done?"DONE":"MISSING"})]}),a.jsx("p",{className:"mt-1 text-[11px] text-slate-600",children:Y.sub})]},Y.label)),a.jsxs("p",{className:"rounded-md border border-slate-200 bg-white px-2 py-1 text-[11px] text-slate-700",children:[" ",bs,"/",sa," (",af,"%)"]})]})]}),a.jsxs("section",{className:"rounded-xl border border-slate-200 bg-white p-4 shadow-sm",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"Stage2   "}),ir?a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"mt-3 text-xs text-slate-500",children:" "}),a.jsxs("p",{className:"mt-1 text-lg font-bold text-slate-900",children:[Tl??"",Tl==="MCI"&&Kd?` (${Kd})`:""]}),a.jsx("div",{className:"mt-3 space-y-2 text-xs",children:[{key:"NORMAL",label:"NORMAL",pct:Gc(Wd?.NORMAL)??0,tone:"bg-emerald-500"},{key:"MCI",label:"MCI",pct:Gc(Wd?.MCI)??0,tone:"bg-blue-500"},{key:"AD",label:"AD",pct:Gc(Wd?.AD)??0,tone:"bg-rose-500"}].map(Y=>a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-[11px] font-semibold text-slate-700",children:Y.label}),a.jsxs("span",{className:"text-[11px] text-slate-600",children:[Y.pct,"%"]})]}),a.jsx("div",{className:"mt-1 h-2 rounded-full bg-slate-100",children:a.jsx("div",{className:he("h-2 rounded-full",Y.tone),style:{width:`${Y.pct}%`}})})]},Y.key))}),a.jsxs("div",{className:"mt-3 rounded-md border border-slate-200 bg-slate-50 px-2 py-2 text-[11px] text-slate-700",children:[a.jsx("p",{children:"    "}),a.jsx("p",{children:"  ANN   "})]})]}):a.jsx("div",{className:"mt-3",children:a.jsx(Af,{stage:2,missing:A,onOpenStep:_a})})]})]}),a.jsxs("section",{className:"space-y-4 xl:col-span-6",children:[a.jsxs("section",{className:"rounded-xl border border-slate-200 bg-white p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"Stage2 Step Workflow"}),a.jsxs("span",{className:"text-[11px] text-slate-500",children:[" ",k.filter(Y=>Y.status==="DONE").length,"/4"]})]}),a.jsx("div",{className:"mt-3 grid grid-cols-1 gap-2 md:grid-cols-2",children:k.map(Y=>a.jsxs("article",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("p",{className:"text-[11px] font-semibold text-slate-500",children:Y.key}),a.jsx("span",{className:he("rounded-md border px-2 py-0.5 text-[10px] font-semibold",Y.status==="DONE"?"border-emerald-200 bg-emerald-50 text-emerald-700":Y.status==="IN_PROGRESS"?"border-blue-200 bg-blue-50 text-blue-700":Y.status==="BLOCKED"?"border-rose-200 bg-rose-50 text-rose-700":"border-slate-200 bg-white text-slate-600"),children:Y.status})]}),a.jsx("p",{className:"mt-1 text-sm font-bold text-slate-900",children:Y.title}),a.jsx("p",{className:"mt-1 text-[11px] text-slate-600",children:Y.reason})]},Y.key))})]}),a.jsxs("section",{id:"stage2-step2-input",className:"rounded-xl border border-slate-200 bg-white p-4 shadow-sm",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"STEP 2.   "}),a.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-2 md:grid-cols-2",children:[a.jsxs("label",{className:"text-[11px] text-slate-600",children:["MMSE ",a.jsx("input",{value:Ce.tests.mmse??"",onChange:Y=>Dt(de=>({...de,tests:{...de.tests,mmse:Y.target.value===""?void 0:Number(Y.target.value)}})),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-xs outline-none focus:border-blue-300"})]}),a.jsxs("label",{className:"text-[11px] text-slate-600",children:["CDR ",a.jsx("input",{value:Ce.tests.cdr??"",onChange:Y=>Dt(de=>({...de,tests:{...de.tests,cdr:Y.target.value===""?void 0:Number(Y.target.value)}})),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-xs outline-none focus:border-blue-300"})]}),a.jsxs("label",{className:"text-[11px] text-slate-600",children:["",a.jsxs("select",{value:Ce.tests.neuroCognitiveType??"",onChange:Y=>Dt(de=>({...de,tests:{...de.tests,neuroCognitiveType:Y.target.value||void 0}})),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-xs outline-none focus:border-blue-300",children:[a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"CERAD-K",children:"CERAD-K"}),a.jsx("option",{value:"SNSB-II",children:"SNSB-II"}),a.jsx("option",{value:"SNSB-C",children:"SNSB-C"}),a.jsx("option",{value:"LICA",children:"LICA"})]})]}),a.jsxs("label",{className:"text-[11px] text-slate-600",children:[" ",a.jsxs("select",{value:Ce.tests.specialist?"DONE":"MISSING",onChange:Y=>Dt(de=>({...de,tests:{...de.tests,specialist:Y.target.value==="DONE"}})),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-xs outline-none focus:border-blue-300",children:[a.jsx("option",{value:"MISSING",children:"MISSING"}),a.jsx("option",{value:"DONE",children:"DONE"})]})]})]}),a.jsxs("button",{onClick:Qu,className:"mt-3 inline-flex items-center gap-1 rounded-md bg-[#163b6f] px-3 py-1.5 text-xs font-semibold text-white hover:bg-[#112f5a]",children:[a.jsx(Si,{size:13}),"   "]})]}),a.jsxs("section",{className:"rounded-xl border border-slate-200 bg-white p-4 shadow-sm",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"STEP 3.  "}),a.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-2 md:grid-cols-2",children:[a.jsxs("label",{className:"text-[11px] text-slate-600",children:["  ",a.jsxs("select",{value:zt,onChange:Y=>cn(Y.target.value),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-xs outline-none focus:border-blue-300",children:[a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"MCI",children:"MCI"}),a.jsx("option",{value:"",children:""})]})]}),a.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 px-3 py-2 text-[11px] text-slate-700",children:[a.jsx("p",{className:"font-semibold",children:"MCI (ANN)"}),a.jsx("p",{className:"mt-1",children:zt==="MCI"?pi??" ":"-"})]})]}),ir&&Ti?a.jsx("div",{className:"mt-2 space-y-2 text-xs",children:[{key:"NORMAL",label:"NORMAL",pct:Gc(Ti.NORMAL)??0,tone:"bg-emerald-500"},{key:"MCI",label:"MCI",pct:Gc(Ti.MCI)??0,tone:"bg-blue-500"},{key:"AD",label:"AD",pct:Gc(Ti.AD)??0,tone:"bg-rose-500"}].map(Y=>a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-[11px] font-semibold text-slate-700",children:Y.label}),a.jsxs("span",{className:"text-[11px] text-slate-600",children:[Y.pct,"%"]})]}),a.jsx("div",{className:"mt-1 h-2 rounded-full bg-slate-100",children:a.jsx("div",{className:he("h-2 rounded-full",Y.tone),style:{width:`${Y.pct}%`}})})]},Y.key))}):a.jsx("div",{className:"mt-3",children:a.jsx(Af,{stage:2,missing:A,onOpenStep:_a})}),a.jsxs("label",{className:"mt-3 block text-[11px] text-slate-600",children:["  1()",a.jsx("textarea",{value:fa,onChange:Y=>$s(Y.target.value),className:"mt-1 h-20 w-full rounded-md border border-gray-200 px-2 py-1 text-xs outline-none focus:border-blue-300"})]}),a.jsxs("button",{onClick:Od,disabled:!Ka,className:"mt-3 inline-flex items-center gap-1 rounded-md bg-[#163b6f] px-3 py-1.5 text-xs font-semibold text-white hover:bg-[#112f5a] disabled:opacity-50",children:[a.jsx(oc,{size:13}),"  "]}),Ka?null:a.jsx("div",{className:"mt-2 rounded-md border border-amber-200 bg-amber-50 px-3 py-2 text-[11px] text-amber-800",children:Ol.map(Y=>a.jsxs("p",{children:["- ",Y]},Y))})]}),a.jsxs("section",{className:"rounded-xl border border-slate-200 bg-white p-4 shadow-sm",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"STEP 4.   "}),a.jsxs("p",{className:"mt-2 text-[11px] text-slate-600",children:["    .  : ",ir?vn:"",ir&&vn==="MCI"&&Ns?` (${Ns})`:""]}),a.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-2 md:grid-cols-3",children:[a.jsx("button",{onClick:()=>Rd("FOLLOWUP_2Y","  2    "),disabled:!Po||vn!=="",className:"rounded-md border border-slate-200 bg-slate-50 px-2 py-1.5 text-[11px] font-semibold text-slate-700 hover:bg-white disabled:opacity-50",children:"  2  "}),a.jsx("button",{onClick:()=>Rd("STAGE3","MCI/  Stage3  "),disabled:!Po||!h_(vn),className:"rounded-md border border-blue-200 bg-blue-50 px-2 py-1.5 text-[11px] font-semibold text-blue-700 hover:bg-blue-100 disabled:opacity-50",children:"Stage3 "}),a.jsx("button",{onClick:()=>Rd("DIFF_PATH","    "),disabled:!Po||vn!=="",className:"rounded-md border border-rose-200 bg-rose-50 px-2 py-1.5 text-[11px] font-semibold text-rose-700 hover:bg-rose-100 disabled:opacity-50",children:" "})]})]})]}),a.jsxs("aside",{className:"space-y-4 xl:col-span-3",children:[a.jsxs("section",{className:"rounded-xl border border-slate-200 bg-white p-4 shadow-sm",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"  "}),a.jsxs("div",{className:"mt-3 space-y-2",children:[a.jsxs("label",{className:"text-[11px] text-slate-600",children:[" ",a.jsxs("select",{value:aa,onChange:Y=>bl(Y.target.value),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-xs outline-none focus:border-blue-300",children:[a.jsx("option",{value:" ",children:" "}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:" ",children:" "}),a.jsx("option",{value:" ",children:" "})]})]}),a.jsxs("label",{className:"text-[11px] text-slate-600",children:[" ",a.jsx("input",{type:"datetime-local",value:Vc(Mr),onChange:Y=>Ed(Wc(Y.target.value)||Mr),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-xs outline-none focus:border-blue-300"})]}),a.jsxs("button",{onClick:dS,className:"inline-flex w-full items-center justify-center gap-1 rounded-md bg-[#163b6f] px-3 py-1.5 text-xs font-semibold text-white hover:bg-[#112f5a]",children:[a.jsx(NC,{size:13}),"  "]}),a.jsxs("button",{onClick:()=>{Ye({type:"CAL_EVENT_CREATED",at:ut(),scheduledAt:Mr,summary:"Stage2    ",by:w.header.assigneeName}),We(` : ${dt(Mr)}`),De.success("   .")},className:"inline-flex w-full items-center justify-center gap-1 rounded-md border border-slate-200 bg-slate-50 px-3 py-1.5 text-xs font-semibold text-slate-700 hover:bg-white",children:[a.jsx(bR,{size:13}),"  "]})]})]}),a.jsxs("section",{className:"rounded-xl border border-slate-200 bg-white p-4 shadow-sm",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"  "}),a.jsxs("div",{className:"mt-2 space-y-1 text-[11px] text-slate-600",children:[a.jsx("p",{children:"MMSE:  24     ."}),a.jsx("p",{children:"CDR: 0(), 0.5(MCI ), 1 ( )  ."})]})]}),a.jsxs("section",{className:"rounded-xl border border-slate-200 bg-white p-4 shadow-sm",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"ANN   "}),a.jsxs("div",{className:"mt-2 space-y-1 text-[11px] text-slate-600",children:[a.jsx("p",{children:"      ."}),a.jsx("p",{children:" 10%       ."}),a.jsx("p",{children:" /       ."})]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-[minmax(0,1.4fr)_minmax(0,1fr)]",children:[a.jsx(y_,{timeline:Td,filter:G,onFilterChange:L,listClassName:"max-h-[360px] overflow-y-auto pr-1",mode:s,stage2OpsView:u,stage3Type:y}),a.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:" "}),a.jsx("div",{className:"mt-3 max-h-[360px] space-y-2 overflow-y-auto pr-1",children:X.length===0?a.jsx("p",{className:"rounded-md border border-slate-200 bg-slate-50 px-3 py-2 text-[11px] text-slate-500",children:"  ."}):X.map(Y=>a.jsxs("article",{className:"rounded-md border border-slate-200 bg-slate-50 px-3 py-2",children:[a.jsx("p",{className:"text-[11px] text-slate-500",children:Y.at}),a.jsx("p",{className:"text-xs font-semibold text-slate-800",children:Y.actor}),a.jsx("p",{className:"text-[11px] text-slate-700",children:Y.message})]},Y.id))})]})]})]})}return a.jsxs("div",{className:"space-y-5",children:[a.jsxs("div",{className:"grid grid-cols-1 gap-4 xl:grid-cols-12",children:[a.jsxs("section",{className:"space-y-4 xl:col-span-8",children:[a.jsx(oCe,{scoreSummary:w.scoreSummary,modelPriorityValue:Cl,modelPriorityMeta:tf,contactPriority:i0,interventionLevel:w.interventionLevel,stage3Risk:Cc,stage3DiffPathStatus:w.stage3?.diffPathStatus,stage3RiskReviewedAt:w.stage3?.riskReviewedAt,onStage3MarkRiskReviewed:wl,mode:s,stage2OpsView:u,stage2ResultLabel:Vd,stage2MciStage:Rl,stage2Probs:Wd,stage2DiagnosisStatus:Ce.status,stage2CompletionPct:af,stage2RequiredDataPct:yp,stage2NextDiagnosisAt:w.stage3?.headerMeta.nextReevalAt,stage2QualityScore:w.header.dataQuality.score,stage2WaitingCount:bp,stage2ResultMissingCount:fi,stage2ClassificationConfirmed:Po,stage2ModelAvailable:ir,stage3ModelAvailable:zr,stage3Type:y,stage2MissingEvidence:A,stage3MissingEvidence:T,onOpenStage2Input:_a,onOpenStage3Input:kl}),a.jsx(H_e,{flowCards:ma,onAction:Zi,mode:s,stage2OpsView:u,opsLoopState:nb,storedOpsStatus:c?w.stage3?.headerMeta.opsStatus??p?.status:p?.status}),c?null:a.jsx(F_e,{strategy:Hs,strategyBadge:o0,contactExecutor:w.contactExecutor,executionStatus:w.contactExecution.status,lastSentAt:w.contactExecution.lastSentAt,lastOutcome:w.contactExecution.lastOutcomeCode,retryCount:w.contactExecution.retryCount,linkageStatus:w.linkageStatus,memoCount:X.length,lastContactAt:w.contactExecution.lastResponseAt??w.contactExecution.lastSentAt,timelineCount:w.timeline.length,preTriage:w.preTriageResult,riskGuardrails:w.header.riskGuardrails,onOpenStrategyOverride:()=>an(!0),mode:s}),c?a.jsxs(a.Fragment,{children:[a.jsxs("section",{className:"rounded-xl border border-indigo-200 bg-indigo-50 p-4 shadow-sm",children:[a.jsx("h3",{className:"text-sm font-bold text-indigo-900",children:" "}),a.jsx("p",{className:"mt-1 text-[11px] text-indigo-800",children:u?"Step    ///   .":"Step    //   .      ."}),a.jsxs("div",{className:"mt-3 flex flex-wrap gap-2 text-[11px]",children:[a.jsxs("span",{className:"rounded-md border border-indigo-300 bg-white px-2 py-1",children:[u?"  ":" "," ",dt(w.stage3?.headerMeta.nextReevalAt)]}),a.jsxs("span",{className:"rounded-md border border-indigo-300 bg-white px-2 py-1",children:[u?" ":""," ",S1(w.stage3?.headerMeta.planStatus??"ACTIVE")]}),a.jsxs("span",{className:"rounded-md border border-indigo-300 bg-white px-2 py-1",children:[u?"  ":" "," ",w.stage3?.headerMeta.trackingCycleDays??21,""]})]})]}),a.jsx(v_,{level:w.interventionLevel,statusLabel:w.header.statusLabel,guides:Ec,onChangeLevel:Xu,onHold:()=>wc(""),onExclude:()=>wc(" "),mode:s})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"grid grid-cols-1 gap-3",children:a.jsx(G7,{mode:s,stage2OpsView:u,contactExecutor:w.contactExecutor,executionStatus:w.contactExecution.status,strategy:Hs,lastSentAt:w.contactExecution.lastSentAt,sensitivityFlags:Wx,latestAgentLog:w.agentExecutionLogs[0],selectedRecommendation:Gs,agentJob:Hn,gateStatus:wa,onSwitchExecutor:fp,onOpen:()=>Ji("CONTACT_EXECUTION"),onRetryNow:Ri,onScheduleRetry:Xi})}),a.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[a.jsx(x_,{expanded:Xt,onToggle:()=>On(k=>!k),executionStatus:w.contactExecution.status,lastSentAt:w.contactExecution.lastSentAt,lastSmsSentAt:w.lastSmsSentAt,assigneeName:w.header.assigneeName,reservation:w.reservation,showReservationSync:Kh,autoFilledState:ua,onOpenReservationDetail:()=>Ms(!0),selectedOutcomeCode:hn,onSelectOutcomeCode:Md,reasonTags:na,onToggleReasonTag:s0,rejectReasonDraft:la,onRejectReasonDraftChange:mp,noResponsePlanDraft:Ga,onNoResponsePlanDraftChange:a0,outcomeNote:yt,onOutcomeNoteChange:_l,isSaving:Co,submitError:cp,validationError:Ha,onClearError:To,onReset:ef,onConfirm:$d,hasUnsavedChanges:da,lastSavedAt:ai,onOpenHandoffMemo:()=>_i(!0),mode:s}),a.jsx(H7,{expanded:zx||!!w.contactExecution.handoffMemo,onToggle:()=>_i(k=>!k),memoText:op,onMemoChange:Bh,onSave:()=>{We(`  : ${op.slice(0,80)}...`),De.success("  ."),_i(!1)},mode:s})]}),a.jsx(v_,{level:w.interventionLevel,statusLabel:w.header.statusLabel,guides:Ec,onChangeLevel:Xu,onHold:()=>wc(""),onExclude:()=>wc(" "),mode:s})]})]}),a.jsxs("aside",{className:"space-y-4 xl:col-span-4 xl:sticky xl:top-0 self-start",children:[c?a.jsxs(a.Fragment,{children:[a.jsxs("section",{className:"rounded-xl border border-indigo-200 bg-white p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:u?"   ":"   "}),a.jsx("button",{onClick:()=>Ji("CONTACT_EXECUTION"),className:"rounded-md border border-indigo-200 bg-indigo-50 px-2 py-1 text-[11px] font-semibold text-indigo-700 hover:bg-indigo-100",children:"STEP2  "})]}),a.jsxs("p",{className:"mt-1 text-[11px] text-gray-500",children:[u?"STEP2/3 ":""," ",w.stage3?.diffPathStatus??"NONE","    ",Fd," "," ",u?"":" "," ",dt(w.stage3?.headerMeta.nextReevalAt)]}),a.jsx("p",{className:"mt-2 text-[10px] text-indigo-700",children:u?" :    /        .":" :   /        ."})]}),a.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsxs("button",{onClick:()=>Or(k=>!k),className:"flex w-full items-center justify-between text-left",children:[a.jsxs("span",{className:"text-sm font-bold text-slate-900",children:["/  (",u?"/":"/",")"]}),a.jsx("span",{className:"text-[11px] font-semibold text-slate-500",children:Rn?"":""})]}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:u?" / /   .":"      ."}),Rn?a.jsxs("div",{className:"mt-3",children:[a.jsx(G7,{mode:s,stage2OpsView:u,contactExecutor:w.contactExecutor,executionStatus:w.contactExecution.status,strategy:Hs,lastSentAt:w.contactExecution.lastSentAt,sensitivityFlags:Wx,latestAgentLog:w.agentExecutionLogs[0],selectedRecommendation:Gs,agentJob:Hn,gateStatus:wa,onSwitchExecutor:fp,onOpen:()=>Ji("CONTACT_EXECUTION"),onRetryNow:Ri,onScheduleRetry:Xi}),a.jsx("div",{className:"mt-3",children:a.jsx(x_,{expanded:Xt,onToggle:()=>On(k=>!k),executionStatus:w.contactExecution.status,lastSentAt:w.contactExecution.lastSentAt,lastSmsSentAt:w.lastSmsSentAt,assigneeName:w.header.assigneeName,reservation:w.reservation,showReservationSync:Kh,autoFilledState:ua,onOpenReservationDetail:()=>Ms(!0),selectedOutcomeCode:hn,onSelectOutcomeCode:Md,reasonTags:na,onToggleReasonTag:s0,rejectReasonDraft:la,onRejectReasonDraftChange:mp,noResponsePlanDraft:Ga,onNoResponsePlanDraftChange:a0,outcomeNote:yt,onOutcomeNoteChange:_l,isSaving:Co,submitError:cp,validationError:Ha,onClearError:To,onReset:ef,onConfirm:$d,hasUnsavedChanges:da,lastSavedAt:ai,onOpenHandoffMemo:()=>_i(!0),mode:s})})]}):null]}),Br?a.jsxs("section",{className:"rounded-xl border border-indigo-200 bg-indigo-50 p-4 shadow-sm",children:[a.jsx("h3",{className:"text-sm font-bold text-indigo-900",children:u?"   ":"   "}),a.jsx("p",{className:"mt-1 text-[11px] text-indigo-800",children:Br.memo}),a.jsxs("p",{className:"mt-1 text-[10px] text-indigo-700",children:[dt(Br.at),"  ",u?" ":" "," ",oy[Br.nextAction]]})]}):null,a.jsx(K7,{evidence:w.riskEvidence,quality:w.header.dataQuality,mode:s,stage2OpsView:u,stage3Type:y}),a.jsx(y_,{timeline:Td,filter:G,onFilterChange:L,listClassName:"max-h-[300px] overflow-y-auto pr-1",mode:s,stage2OpsView:u,stage3Type:y})]}):a.jsxs(a.Fragment,{children:[a.jsx(K7,{evidence:w.riskEvidence,quality:w.header.dataQuality,mode:s,stage2OpsView:u,stage3Type:y}),a.jsx(y_,{timeline:Td,filter:G,onFilterChange:L,listClassName:"max-h-[340px] overflow-y-auto pr-1",mode:s,stage2OpsView:u,stage3Type:y}),a.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"  ( )"}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:"    : Step   ."}),a.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3 text-xs",children:[a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[a.jsx("p",{className:"text-slate-500",children:"  "}),a.jsxs("p",{className:"mt-1 text-lg font-bold text-slate-900",children:[w.todos.filter(k=>k.status==="OPEN").length,""]})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[a.jsx("p",{className:"text-slate-500",children:"  "}),a.jsx("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:dt(at)}),_d.length>0?a.jsxs("div",{className:"mt-2 space-y-1",children:[a.jsxs("p",{className:"text-[11px] font-semibold text-red-600",children:["   ",_d.length,""]}),_d.slice(0,2).map(k=>a.jsxs("div",{className:"rounded-md border border-red-200 bg-red-50 px-2 py-1.5",children:[a.jsx("p",{className:"text-[10px] font-semibold text-red-700",children:k.title}),a.jsx("p",{className:"text-[10px] text-red-600",children:dt(k.scheduledAt)}),a.jsx("button",{onClick:()=>cf(k.idempotencyKey),disabled:!!Hh[k.idempotencyKey],className:"mt-1 inline-flex items-center rounded-md border border-red-300 px-2 py-0.5 text-[10px] font-semibold text-red-700 hover:bg-red-100 disabled:opacity-50",children:Hh[k.idempotencyKey]?" ...":""})]},k.idempotencyKey))]}):null]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[a.jsx("p",{className:"text-slate-500",children:"  "}),a.jsx("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:iS?.title??"   ."})]})]})]})]}),a.jsx(G_e,{logs:w.agentExecutionLogs})]})]}),a.jsx(Au,{open:!!sr,onOpenChange:k=>{k||bn(null)},children:a.jsxs(_u,{className:"max-w-2xl p-4",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"ProgramExecutionDrawer"}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:"     Stage3 Step3  ."}),Nn?a.jsxs("div",{className:"mt-3 space-y-3",children:[a.jsx("div",{className:"rounded-md border border-slate-200 bg-slate-50 px-3 py-2",children:a.jsxs("p",{className:"text-xs font-semibold text-slate-900",children:[Nn.major," / ",Nn.middle," / ",Nn.leaf]})}),a.jsxs("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-2",children:[a.jsxs("label",{className:"text-[11px] text-slate-600",children:["",a.jsx("input",{value:Ke.owner,onChange:k=>Be(B=>({...B,owner:k.target.value})),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-blue-300"})]}),a.jsxs("label",{className:"text-[11px] text-slate-600",children:["Due Date",a.jsx("input",{type:"datetime-local",value:Vc(Ke.dueDate),onChange:k=>Be(B=>({...B,dueDate:Wc(k.target.value)||void 0})),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-blue-300"})]}),a.jsxs("label",{className:"text-[11px] text-slate-600",children:[" ",a.jsxs("select",{value:Ke.method??"",onChange:k=>Be(B=>({...B,method:k.target.value})),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-blue-300",children:[a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""})]})]}),a.jsxs("label",{className:"text-[11px] text-slate-600",children:["",a.jsxs("select",{value:Ke.status??"PLANNED",onChange:k=>Be(B=>({...B,status:k.target.value})),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-blue-300",children:[a.jsx("option",{value:"PLANNED",children:""}),a.jsx("option",{value:"IN_PROGRESS",children:""}),a.jsx("option",{value:"DONE",children:""}),a.jsx("option",{value:"HOLD",children:""})]})]}),a.jsxs("label",{className:"text-[11px] text-slate-600 md:col-span-2",children:["",a.jsx("input",{value:Ke.institution??"",onChange:k=>Be(B=>({...B,institution:k.target.value})),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-blue-300"})]}),a.jsxs("label",{className:"text-[11px] text-slate-600 md:col-span-2",children:["",a.jsx("textarea",{value:Ke.note??"",onChange:k=>Be(B=>({...B,note:k.target.value})),className:"mt-1 h-20 w-full rounded-md border border-gray-200 px-2 py-1 text-[11px] outline-none focus:border-blue-300"})]})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{onClick:()=>bn(null),className:"rounded-md border border-gray-200 px-3 py-1.5 text-xs font-semibold text-gray-700",children:""}),a.jsx("button",{onClick:()=>{sr&&(t0(sr,Ke),bn(null))},className:"rounded-md bg-[#163b6f] px-3 py-1.5 text-xs font-semibold text-white",children:""})]})]}):null]})}),a.jsx(Au,{open:c&&!!Ee,onOpenChange:k=>{k||mi()},children:a.jsx(_u,{className:"w-[96vw] max-w-[96vw] sm:max-w-[1460px] max-h-[92vh] overflow-y-auto p-4",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"rounded-lg border border-indigo-200 bg-indigo-50 p-3",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm font-bold text-indigo-900",children:[u?"Stage2 ":"Stage3 ","  ",xs?.title??" "]}),a.jsx("p",{className:"text-[11px] text-indigo-700",children:u?"/   .      .":"   .      ."})]}),a.jsxs("span",{className:"rounded-md border border-indigo-300 bg-white px-2 py-1 text-[11px] font-semibold text-indigo-700",children:[" ",Ro+1,"/",is.length]})]}),a.jsx("div",{className:"mt-2 grid grid-cols-2 gap-1.5 md:grid-cols-4",children:is.map((k,B)=>{const Y=ma.find(Oe=>Oe.id===k),de=Ee===k,re=Object.keys(Ps[k]??{}).length;return a.jsxs("button",{type:"button",onClick:()=>{const Oe=qp(ma,k);if(Oe){De.error(Oe);return}ze(k)},className:he("rounded-md border px-2 py-1.5 text-left text-[11px]",de?"border-indigo-300 bg-white text-indigo-800":"border-indigo-100 bg-indigo-50/60 text-indigo-700"),children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("p",{className:"font-semibold",children:["STEP ",B+1]}),re>0?a.jsxs("span",{className:"rounded-full border border-rose-200 bg-rose-50 px-1.5 py-0.5 text-[10px] font-semibold text-rose-700",children:[" ",re]}):null]}),a.jsx("p",{className:"mt-0.5 truncate",children:Y?.title??k})]},k)})})]}),Ee==="PRECHECK"?(()=>{const k=ZAe({detail:w,modelPriorityValue:Cl,stage2ResultLabel:ir?ys:void 0,stage2MciSeverity:ir?vs:void 0,stage2TestAt:t?.updated,stage2Org:"  "}),B=[{key:"AD",label:"AD"},{key:"MCI",label:"MCI"},{key:"NORMAL",label:""}],Y=ir&&B.some(je=>k.stage2.probs?.[je.key]!=null),de=zr?Gc(k.stage3.risk2yNow):void 0,re=zr?Gc(k.stage3.riskAt2y):void 0,Oe=zr?k.stage3.status==="RESULT_APPLIED"?u?" ":" ":u?" ":" ":" ";if(u){const je=w.timeline.filter(ke=>ke.type==="DIFF_REFER_CREATED"||ke.type==="DIFF_SCHEDULED"||ke.type==="LINKAGE_CREATED").length,nt=w.timeline.filter(ke=>ke.type==="CALL_ATTEMPT"||ke.type==="SMS_SENT"||ke.type==="MESSAGE_SENT").length,Mt=w.timeline.filter(ke=>ke.type==="STAGE2_RESULTS_RECORDED"||ke.type==="DIFF_RESULT_APPLIED").length,$e=Wu.filter(ke=>ke.key==="step1Plan"||ke.key==="step1StrategyMemo"||ke.key==="step1Consent");return a.jsxs("section",{className:"rounded-lg border border-gray-200 bg-white p-4",children:[a.jsx("h4",{className:"text-sm font-bold text-slate-900",children:"Stage2   &   "}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-600",children:"STEP1    ,   / /    ."}),a.jsx("div",{className:"mt-3",children:a.jsx(cy,{items:ly.PRECHECK})}),$e.length>0?a.jsxs("div",{className:"mt-3 rounded-md border border-rose-200 bg-rose-50 p-2",children:[a.jsx("p",{className:"text-[11px] font-semibold text-rose-700",children:"/ "}),a.jsx("ul",{className:"mt-1 space-y-1",children:$e.map(ke=>a.jsx("li",{children:a.jsxs("button",{type:"button",onClick:()=>{if(ke.key==="step1Plan"){b_(Hd.map(Et=>Et.id),be);return}Vu(ke.key)},className:"text-[11px] text-rose-700 underline decoration-dotted underline-offset-2",children:["- ",ke.message]})},ke.key))})]}):null,a.jsx("div",{className:"mt-3",children:a.jsx(nCe,{summary:Do,route:xp,onOpenMissing:()=>b_(Hd.map(ke=>ke.id),be),onPrimaryAction:di,onReviewComplete:Qd})}),a.jsx("div",{className:"mt-2 flex justify-end",children:a.jsx("button",{type:"button",onClick:()=>ze("CONTACT_EXECUTION"),className:"rounded-md border border-slate-200 bg-slate-50 px-3 py-1.5 text-[11px] font-semibold text-slate-700",children:"/  "})}),a.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3 xl:grid-cols-[1fr_1.2fr]",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 p-3",children:[a.jsx("p",{className:"text-xs font-semibold text-slate-800",children:"Stage1Stage2  Scorecard"}),a.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-[11px]",children:[a.jsxs("div",{className:"rounded border border-slate-200 bg-white px-2 py-1.5",children:[a.jsx("p",{className:"text-slate-500",children:"Stage1 "}),a.jsxs("p",{className:"font-semibold text-slate-900",children:[k.stage1.priorityScore??"-"," / ",k.stage1.priorityBand??" "]})]}),a.jsxs("div",{className:"rounded border border-slate-200 bg-white px-2 py-1.5",children:[a.jsx("p",{className:"text-slate-500",children:" "}),a.jsx("p",{className:"font-semibold text-slate-900",children:k.stage1.interventionLevel??"-"})]}),a.jsxs("div",{className:"rounded border border-slate-200 bg-white px-2 py-1.5",children:[a.jsx("p",{className:"text-slate-500",children:"Stage2 "}),a.jsx("p",{className:"font-semibold text-slate-900",children:dt(va)})]}),a.jsxs("div",{className:"rounded border border-slate-200 bg-white px-2 py-1.5",children:[a.jsx("p",{className:"text-slate-500",children:"Stage2 "}),a.jsx("p",{className:"font-semibold text-slate-900",children:bq(Ce.status)})]}),a.jsxs("div",{className:"col-span-2 rounded border border-slate-200 bg-white px-2 py-1.5",children:[a.jsx("p",{className:"text-slate-500",children:"Stage2   "}),a.jsx("p",{className:"font-semibold text-slate-900",children:"Stage1   /   Stage2    ."})]})]})]}),a.jsxs("details",{className:"rounded-md border border-slate-200 bg-slate-50 p-3",children:[a.jsx("summary",{className:"cursor-pointer text-xs font-semibold text-slate-800",children:"  ()"}),a.jsxs("div",{className:"mt-2 grid grid-cols-3 gap-2 text-[11px]",children:[a.jsxs("div",{className:"rounded border border-slate-200 bg-white px-2 py-1.5",children:[a.jsx("p",{className:"text-slate-500",children:"/ "}),a.jsx("p",{className:"font-semibold text-slate-900",children:je})]}),a.jsxs("div",{className:"rounded border border-slate-200 bg-white px-2 py-1.5",children:[a.jsx("p",{className:"text-slate-500",children:"/ "}),a.jsx("p",{className:"font-semibold text-slate-900",children:nt})]}),a.jsxs("div",{className:"rounded border border-slate-200 bg-white px-2 py-1.5",children:[a.jsx("p",{className:"text-slate-500",children:"  "}),a.jsx("p",{className:"font-semibold text-slate-900",children:Mt})]})]})]}),a.jsxs("label",{className:"text-[11px] text-slate-600",children:[" (, 20 )",a.jsx("textarea",{ref:Sa("step1StrategyMemo"),value:Me.strategyMemo,onChange:ke=>{$r("step1StrategyMemo"),xt(Et=>({...Et,strategyMemo:ke.target.value}))},className:wo("step1StrategyMemo","mt-1 h-24 w-full rounded-md border border-gray-200 px-2 py-1 text-[11px] outline-none focus:border-indigo-300"),placeholder:"Stage1  , Stage2  ,    ."})]}),An.step1StrategyMemo?a.jsx("p",{className:"-mt-2 text-[10px] font-semibold text-rose-600",children:An.step1StrategyMemo}):null,a.jsxs("label",{className:"flex items-center gap-1 text-[11px] text-slate-700",children:[a.jsx("input",{ref:Sa("step1Consent"),type:"checkbox",checked:Me.consentConfirmed,onChange:ke=>{$r("step1Consent"),xt(Et=>({...Et,consentConfirmed:ke.target.checked}))}}),"Stage1 /   "]}),An.step1Consent?a.jsx("p",{className:"-mt-2 text-[10px] font-semibold text-rose-600",children:An.step1Consent}):null]}),a.jsxs("div",{className:"space-y-3 rounded-md border border-slate-200 bg-slate-50 p-3",children:[a.jsxs("div",{ref:Sa("step1Plan"),children:[a.jsx("p",{className:"text-xs font-semibold text-slate-800",children:"  "}),a.jsx("div",{className:"mt-2",children:a.jsx(rCe,{routeType:kn,orgName:aa,dueAt:Mr,needsReasonOnChange:Wi,onSelectRoute:ci})})]}),An.step1Plan?a.jsx("p",{className:"text-[10px] font-semibold text-rose-600",children:An.step1Plan}):null,a.jsxs("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-2",children:[a.jsxs("label",{className:"text-[11px] text-slate-600",children:["",a.jsx("input",{value:aa,onChange:ke=>bl(ke.target.value),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-indigo-300"})]}),a.jsxs("label",{className:"text-[11px] text-slate-600",children:["",a.jsx("input",{type:"datetime-local",value:Vc(Mr),onChange:ke=>Ed(Wc(ke.target.value)||Mr),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-indigo-300"})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-semibold text-slate-800",children:"   "}),a.jsx("p",{className:"mt-1 text-[10px] text-slate-500",children:"  /   STEP2 .    /  ."}),a.jsx("div",{className:"mt-2",children:a.jsx(sCe,{items:Ks,onAction:kc,registerRef:sS})})]}),a.jsxs("div",{className:"rounded-md border border-slate-200 bg-white p-2 text-[10px] text-slate-600",children:[a.jsxs("p",{children:["STEP  : STEP2 ",Do.locks.step2?"":"","  STEP3 ",Do.locks.step3?"":"","  STEP4 ",Do.locks.step4?"":""]}),a.jsxs("p",{className:"mt-1",children:["  : ",Do.step1Reviewed?"":"","   ",Do.completionRate,"%"]})]})]})]})]})}return a.jsxs("section",{className:"rounded-lg border border-gray-200 bg-white p-4",children:[a.jsx("h4",{className:"text-sm font-bold text-slate-900",children:u?"Stage1 / ":"   &  "}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-600",children:u?"Step1 Stage1  Stage2       .":"Step1       .       ."}),a.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 rounded-lg border border-indigo-200 bg-indigo-50 p-2 md:grid-cols-3 xl:grid-cols-6",children:[a.jsxs("div",{title:"       .",className:"rounded-md border border-indigo-100 bg-white p-2 shadow-sm transition-all duration-150 hover:-translate-y-0.5 hover:shadow-md",children:[a.jsx("p",{className:"text-[10px] font-semibold text-indigo-600",children:" "}),a.jsxs("p",{className:"mt-1 text-xs font-bold text-slate-900",children:[k.stage1.priorityBand??" ","  ",k.stage1.priorityScore??"-",""]}),a.jsxs("p",{className:"mt-1 text-[10px] text-slate-500",children:[" ",k.stage1.interventionLevel??"-"]})]}),a.jsxs("div",{title:"Stage2  ( ).",className:"rounded-md border border-indigo-100 bg-white p-2 shadow-sm transition-all duration-150 hover:-translate-y-0.5 hover:shadow-md",children:[a.jsx("p",{className:"text-[10px] font-semibold text-indigo-600",children:"Stage2 "}),a.jsxs("p",{className:"mt-1 text-xs font-bold text-slate-900",children:[ir?k.stage2.resultLabel??"":"",ir&&k.stage2.mciSeverity?`(${k.stage2.mciSeverity})`:""]}),a.jsx("p",{className:"mt-1 text-[10px] text-slate-500",children:dt(k.stage2.testAt)})]}),a.jsxs("div",{title:"/AD/MCI  .      .",className:"rounded-md border border-indigo-100 bg-white p-2 shadow-sm transition-all duration-150 hover:-translate-y-0.5 hover:shadow-md",children:[a.jsx("p",{className:"text-[10px] font-semibold text-indigo-600",children:"Stage2  "}),a.jsx("p",{className:"mt-1 text-xs font-bold text-slate-900",children:Y?" ( )":" ()"}),Y?a.jsx("div",{className:"mt-1 space-y-1",children:B.map(je=>{const nt=Gc(k.stage2.probs?.[je.key])??0;return a.jsxs("div",{className:"space-y-0.5",children:[a.jsxs("div",{className:"flex items-center justify-between text-[10px] text-slate-500",children:[a.jsx("span",{children:je.label}),a.jsxs("span",{children:[nt,"%"]})]}),a.jsx("div",{className:"h-1.5 rounded bg-slate-100",children:a.jsx("div",{className:"h-full rounded bg-indigo-400",style:{width:`${nt}%`}})})]},je.key)})}):a.jsx("p",{className:"mt-1 text-[10px] text-slate-500",children:"   "})]}),a.jsxs("div",{title:u?"  ( ).":x?.source.profile?.stage3Type==="AD_MANAGEMENT"?" ( ).     .":"2  .     .",className:"rounded-md border border-indigo-100 bg-white p-2 shadow-sm transition-all duration-150 hover:-translate-y-0.5 hover:shadow-md",children:[a.jsx("p",{className:"text-[10px] font-semibold text-indigo-600",children:u?"  ()":x?.source.profile?.stage3Type==="AD_MANAGEMENT"?"Stage3  ()":"Stage3 ()"}),a.jsx("p",{className:"mt-1 text-xs font-bold text-slate-900",children:de==null?" ( )":`${de}%`}),a.jsxs("p",{className:"mt-1 text-[10px] text-slate-500",children:[u?" ":x?.source.profile?.stage3Type==="AD_MANAGEMENT"?" ":""," ",zr?k.stage3.risk2yLabel??"-":""]})]}),a.jsxs("div",{title:u?"   .":"   2  .",className:"rounded-md border border-indigo-100 bg-white p-2 shadow-sm transition-all duration-150 hover:-translate-y-0.5 hover:shadow-md",children:[a.jsx("p",{className:"text-[10px] font-semibold text-indigo-600",children:u?"  ":"Stage3 2  "}),a.jsx("p",{className:"mt-1 text-xs font-bold text-slate-900",children:re==null?" ( )":`${re}%`}),a.jsxs("p",{className:"mt-1 text-[10px] text-slate-500",children:[" ",k.stage3.confidence??"-"]})]}),a.jsxs("div",{title:"   .",className:"rounded-md border border-indigo-100 bg-white p-2 shadow-sm transition-all duration-150 hover:-translate-y-0.5 hover:shadow-md",children:[a.jsx("p",{className:"text-[10px] font-semibold text-indigo-600",children:" "}),a.jsxs("p",{className:"mt-1 text-xs font-bold text-slate-900",children:[k.dataQuality?.score??"-","%"]}),a.jsxs("p",{className:"mt-1 text-[10px] text-slate-500",children:[" ",k.dataQuality?.missingCount??0,""]})]})]}),a.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3 xl:grid-cols-[1.6fr_1fr]",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"grid grid-cols-1 gap-2 lg:grid-cols-3",children:[a.jsxs("article",{className:"rounded-md border border-slate-200 bg-slate-50 p-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-[10px] font-semibold text-slate-700",children:"Stage1  "}),a.jsx("button",{type:"button",onClick:()=>De(tf.guide),className:"rounded border border-slate-300 bg-white px-1.5 py-0.5 text-[10px] font-semibold text-slate-700",children:" "})]}),a.jsxs("p",{className:"mt-1 text-[11px] text-slate-700",children:[" : ",a.jsx("strong",{children:k.stage1.priorityBand??" "})," (",k.stage1.priorityScore??"-"," /"," ",k.stage1.interventionLevel??"-",")"]}),a.jsxs("p",{className:"mt-1 text-[10px] text-slate-500",children:[" ",k.stage1.percentileTop??"-","%   ",dt(k.stage1.updatedAt)]})]}),a.jsxs("article",{className:"rounded-md border border-slate-200 bg-slate-50 p-3",children:[a.jsx("p",{className:"text-[10px] font-semibold text-slate-700",children:"Stage2  ( )"}),a.jsxs("p",{className:"mt-1 text-[11px] text-slate-700",children:[" :"," ",a.jsxs("strong",{children:[ir?k.stage2.resultLabel??"":"",ir&&k.stage2.mciSeverity?`(${k.stage2.mciSeverity})`:""]})]}),a.jsxs("p",{className:"mt-1 text-[10px] text-slate-500",children:[" : ",Y?" ( )":" ()"]}),a.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:[["",k.stage2.tests?.neuropsych],["",k.stage2.tests?.clinical],["",k.stage2.tests?.specialist]].map(([je,nt])=>a.jsxs("span",{className:he("rounded px-1.5 py-0.5 text-[10px] font-semibold",nt==="DONE"?"bg-emerald-100 text-emerald-700":"bg-slate-200 text-slate-600"),children:[je," ",nt==="DONE"?"":""]},je))}),a.jsxs("p",{className:"mt-1 text-[10px] text-slate-500",children:[" ",dt(k.stage2.testAt),"  ",k.stage2.org]})]}),a.jsxs("article",{className:"rounded-md border border-slate-200 bg-slate-50 p-3",children:[a.jsx("p",{className:"text-[10px] font-semibold text-slate-700",children:x?.source.profile?.stage3Type==="AD_MANAGEMENT"?"Stage3  /":"Stage3 /"}),a.jsxs("p",{className:"mt-1 text-[11px] text-slate-700",children:[x?.source.profile?.stage3Type==="AD_MANAGEMENT"?" :":":"," ",a.jsxs("strong",{children:[zr?k.stage3.risk2yLabel??"":""," (",de==null?"-":`${de}%`,")"]})]}),a.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-1",children:[a.jsxs("span",{className:he("rounded px-1.5 py-0.5 text-[10px] font-semibold",k.stage3.status==="RESULT_APPLIED"?"bg-emerald-100 text-emerald-700":"bg-amber-100 text-amber-700"),children:[": ",Oe]}),k.stage3.status==="RESULT_PENDING"?a.jsx("span",{className:"rounded bg-amber-100 px-1.5 py-0.5 text-[10px] font-semibold text-amber-700",children:" "}):null]}),a.jsxs("p",{className:"mt-1 text-[10px] text-slate-500",children:[" ",zr?k.stage3.confidence??"-":"","   ",dt(k.stage3.nextReevalAt)]}),a.jsxs("p",{className:"mt-1 text-[10px] text-slate-500",children:["  ",dt(k.stage3.nextContactAt),"  2   ",re??"-","%"]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 md:grid-cols-5",children:[a.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 p-2",children:[a.jsx("p",{className:"text-[10px] font-semibold text-slate-700",children:" (30)"}),a.jsx("p",{className:"mt-1 text-sm font-bold text-slate-900",children:k.opsCounts?.contactAttempts30d??0})]}),a.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 p-2",children:[a.jsx("p",{className:"text-[10px] font-semibold text-slate-700",children:"(30)"}),a.jsx("p",{className:"mt-1 text-sm font-bold text-emerald-700",children:k.opsCounts?.contactSuccess30d??0})]}),a.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 p-2",children:[a.jsx("p",{className:"text-[10px] font-semibold text-slate-700",children:" (30)"}),a.jsx("p",{className:"mt-1 text-sm font-bold text-rose-700",children:k.opsCounts?.contactFail30d??0})]}),a.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 p-2",children:[a.jsx("p",{className:"text-[10px] font-semibold text-slate-700",children:" "}),a.jsx("p",{className:"mt-1 text-sm font-bold text-slate-900",children:k.opsCounts?.bookings??0})]}),a.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 p-2",children:[a.jsx("p",{className:"text-[10px] font-semibold text-slate-700",children:"(/)"}),a.jsxs("p",{className:"mt-1 text-sm font-bold text-slate-900",children:[(k.opsCounts?.programsPlanned??0)+(k.opsCounts?.programsDone??0)," / ",k.opsCounts?.programsDone??0]})]})]}),a.jsxs("details",{className:"rounded-md border border-slate-200 bg-slate-50 p-3",children:[a.jsx("summary",{className:"cursor-pointer text-xs font-semibold text-slate-800",children:"()"}),a.jsxs("div",{className:"mt-2 space-y-1.5",children:[w.timeline.slice(0,8).map((je,nt)=>a.jsxs("div",{className:"rounded border border-slate-200 bg-white px-2 py-1.5",children:[a.jsx("p",{className:"text-[11px] font-semibold text-slate-700",children:Uy(je)}),a.jsxs("p",{className:"text-[10px] text-slate-500",children:[dt(je.at),"  ",je.by]}),a.jsx("p",{className:"text-[10px] text-slate-600",children:vq(je)})]},`${je.at}-${nt}`)),w.timeline.length===0?a.jsx("p",{className:"rounded border border-slate-200 bg-white px-2 py-1.5 text-[10px] text-slate-500",children:" ."}):null]})]}),a.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 p-3",children:[a.jsx("p",{className:"text-xs font-semibold text-slate-800",children:u?"Stage1Stage2  ( )":"Stage2Stage3  ( )"}),a.jsxs("ul",{className:"mt-1 space-y-1 text-[11px] text-slate-600",children:[a.jsx("li",{children:u?" Stage1    Stage2   .":"        ."}),a.jsx("li",{children:u?" /    .":"  /     ."}),a.jsx("li",{children:u?"     //    .":"         ."}),a.jsx("li",{children:"          ."})]})]})]}),a.jsxs("div",{className:"space-y-3",children:[Mo.length>0?a.jsxs("div",{className:"rounded-md border border-rose-200 bg-rose-50 p-2",children:[a.jsxs("p",{className:"text-[11px] font-semibold text-rose-700",children:["   ",Mo.length,""]}),a.jsx("ul",{className:"mt-1 space-y-1",children:Mo.map(je=>a.jsx("li",{children:a.jsxs("button",{type:"button",onClick:()=>ip(je.key),className:"text-[11px] text-rose-700 underline decoration-dotted underline-offset-2",children:["- ",je.message]})},je.key))})]}):null,a.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 p-3.5",children:[a.jsx("p",{className:"text-sm font-semibold text-slate-800",children:" ()"}),a.jsxs("div",{className:"mt-2 rounded-md border border-slate-200 bg-white p-2.5",children:[a.jsx("p",{className:"text-sm font-semibold text-slate-700",children:"  /"}),a.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:[Me.sensitiveHistory?"  ":null,Me.resultLinkedChecked?"   ":null,w.timeline.some(je=>je.type==="CALL_ATTEMPT"&&je.result==="NO_ANSWER")?"  ":null,t?.profile.guardianPhone?"   ":"  "].filter(Boolean).map(je=>a.jsx("span",{className:"rounded-full border border-slate-200 bg-slate-50 px-2.5 py-1 text-xs font-semibold text-slate-700",children:je},je))})]}),a.jsxs("div",{ref:ii("step1DiffDecision"),className:he("mt-2 grid grid-cols-1 gap-2",Yn.step1DiffDecision?"rounded-md border border-rose-200 bg-rose-50 p-1":""),children:[a.jsx("p",{className:"text-sm font-semibold text-slate-700",children:"  ()"}),a.jsxs("button",{type:"button",onClick:()=>{Ea("PRECHECK","step1DiffDecision"),xt(je=>({...je,diffNeeded:!0,diffDecisionSet:!0}))},className:he("flex w-full items-center justify-between rounded-md border px-3.5 py-2.5 text-left",Me.diffDecisionSet&&Me.diffNeeded?"border-indigo-300 bg-indigo-50 text-indigo-800":"border-slate-200 bg-white text-slate-700"),children:[a.jsx("span",{className:"text-sm font-semibold",children:" ()"}),a.jsx("span",{className:"text-xs",children:"    /  "})]}),a.jsxs("button",{type:"button",onClick:()=>{Ea("PRECHECK","step1DiffDecision"),xt(je=>({...je,diffNeeded:!1,diffDecisionSet:!0}))},className:he("flex w-full items-center justify-between rounded-md border px-3.5 py-2.5 text-left",Me.diffDecisionSet&&!Me.diffNeeded?"border-slate-400 bg-slate-100 text-slate-800":"border-slate-200 bg-white text-slate-700"),children:[a.jsx("span",{className:"text-sm font-semibold",children:"(/  )"}),a.jsx("span",{className:"text-xs",children:"   /  "})]}),Yn.step1DiffDecision?a.jsx("p",{className:"text-xs font-semibold text-rose-600",children:Yn.step1DiffDecision}):null]}),Me.diffDecisionSet?a.jsxs("label",{className:"mt-2 block text-sm text-slate-600",children:[" ( )",a.jsx("input",{ref:ii("step1DiffReason"),value:Me.diffDecisionReason,onChange:je=>{Ea("PRECHECK","step1DiffReason"),xt(nt=>({...nt,diffDecisionReason:je.target.value}))},className:Ao("PRECHECK","step1DiffReason","mt-1 h-10 w-full rounded-md border border-gray-200 px-3 text-sm outline-none focus:border-indigo-300"),placeholder:"   ."})]}):null,a.jsxs("label",{className:"mt-2 flex items-center gap-1.5 text-sm text-slate-700",children:[a.jsx("input",{ref:ii("step1Consent"),type:"checkbox",checked:Me.consentConfirmed,onChange:je=>{Ea("PRECHECK","step1Consent"),xt(nt=>({...nt,consentConfirmed:je.target.checked}))}}),"  ()"]}),Yn.step1Consent?a.jsx("p",{className:"text-xs font-semibold text-rose-600",children:Yn.step1Consent}):null,a.jsxs("label",{className:"mt-1 flex items-center gap-1.5 text-sm text-slate-700",children:[a.jsx("input",{type:"checkbox",checked:Me.caregiverNeeded,onChange:je=>xt(nt=>({...nt,caregiverNeeded:je.target.checked}))}),"  ()"]}),a.jsxs("div",{className:"mt-2",children:[a.jsx("label",{className:"text-sm font-semibold text-slate-600",children:" ()"}),a.jsxs("select",{value:Me.priority,onChange:je=>xt(nt=>({...nt,priority:je.target.value})),className:"mt-1 h-10 w-full rounded-md border border-gray-200 px-3 text-sm outline-none focus:border-indigo-300",children:[a.jsx("option",{value:"HIGH",children:"HIGH"}),a.jsx("option",{value:"MID",children:"MID"}),a.jsx("option",{value:"LOW",children:"LOW"})]})]}),a.jsxs("div",{className:"mt-2",children:[a.jsx("label",{className:"text-sm font-semibold text-slate-600",children:" ()"}),a.jsx("textarea",{ref:ii("step1StrategyMemo"),value:Me.strategyMemo,onChange:je=>{Ea("PRECHECK","step1StrategyMemo"),xt(nt=>({...nt,strategyMemo:je.target.value}))},className:Ao("PRECHECK","step1StrategyMemo","mt-1 h-32 w-full rounded-md border border-gray-200 px-3 py-2 text-sm outline-none focus:border-indigo-300"),placeholder:`1) Stage3  
2) / 
3) / `}),Yn.step1StrategyMemo?a.jsx("p",{className:"mt-1 text-xs font-semibold text-rose-600",children:Yn.step1StrategyMemo}):null]})]}),a.jsxs("div",{className:"rounded-md border border-indigo-200 bg-indigo-50 p-3",children:[a.jsxs("p",{className:"text-sm text-indigo-800",children:["  ",a.jsx("strong",{children:u?"STEP1  ":"STAGE3_REVIEW_DONE"}),"    / ."]}),a.jsx("button",{type:"button",onClick:Qd,className:"mt-2 w-full rounded-md border border-indigo-300 bg-white px-3 py-2 text-sm font-semibold text-indigo-700 hover:bg-indigo-100",children:u?"Step2() ":"Step2( ) "})]})]})]})]})})():null,Ee==="CONTACT_EXECUTION"?(()=>{const k=w.stage3?.diffPathStatus??"NONE";if(u){const $e=Wu.filter(Qt=>Qt.key==="manualEditReason"||Qt.key==="mmse"||Qt.key==="cdr"||Qt.key==="neuro"||Qt.key==="specialist"),Et={WAITING:{label:"",chip:"bg-slate-100 text-slate-700 border-slate-200"},REQUESTED:{label:"",chip:"bg-blue-50 text-blue-700 border-blue-200"},PARTIAL:{label:" ",chip:"bg-amber-50 text-amber-700 border-amber-200"},VERIFY_NEEDED:{label:" ",chip:"bg-rose-50 text-rose-700 border-rose-200"},READY:{label:" ",chip:"bg-emerald-50 text-emerald-700 border-emerald-200"}}[sf],Pn=w.timeline.filter(Qt=>Qt.type==="STAGE2_RESULTS_RECORDED"||Qt.type==="STAGE2_STEP2_AUTOFILL_APPLIED"||Qt.type==="STAGE2_MANUAL_EDIT_APPLIED"||Qt.type==="DIFF_RESULT_APPLIED"||Qt.type==="DIFF_REFER_CREATED"||Qt.type==="DIFF_SCHEDULED"||Qt.type==="MESSAGE_SENT").slice(0,6),Ct=ot?{RECEIVED:{label:"",chip:"border-emerald-200 bg-emerald-50 text-emerald-700"},MAPPED:{label:"",chip:"border-blue-200 bg-blue-50 text-blue-700"},SEEDED:{label:" ",chip:"border-violet-200 bg-violet-50 text-violet-700"}}[ot.source]:null,Kn=Qh(),br=Object.keys(Kn),Ln=Fs||br.length>0,qr=!Fs,qs=Ie.lastSyncedAt??v?.updatedAt,df=Ie.receivedAt??v?.updatedAt,za=[{label:"   ",done:!!df},{label:"/ ",done:fi===0},{label:"  ",done:!!Ce.tests.specialist},{label:"  STEP3   ",done:Un.jobStatus==="DONE"}];return a.jsxs("section",{id:"stage2-modal-step2-input",className:"rounded-xl border border-slate-200 bg-gradient-to-b from-white to-slate-50 p-4 shadow-sm",children:[a.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-bold text-slate-900",children:"STEP2    //"}),a.jsx("p",{className:"mt-1 text-[11px] text-slate-600",children:"    ,   ."})]}),a.jsxs("span",{className:he("rounded-full border px-2.5 py-1 text-[10px] font-semibold",Et.chip),children:["  ",Et.label]})]}),wt?a.jsx("div",{className:"mt-2 rounded-md border border-slate-200 bg-slate-50 px-3 py-2 text-[11px] text-slate-600",children:"   ..."}):null,xn?a.jsx("div",{className:"mt-2 rounded-md border border-amber-200 bg-amber-50 px-3 py-2 text-[11px] text-amber-800",children:xn}):null,ot&&Ct?a.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2 rounded-md border border-slate-200 bg-slate-50 px-3 py-2 text-[11px] text-slate-700",children:[a.jsx("span",{className:"font-semibold text-slate-800",children:"  "}),a.jsx("span",{className:he("rounded border px-2 py-0.5 text-[10px] font-semibold",Ct.chip),children:Ct.label}),a.jsxs("span",{className:"text-slate-500",children:[" ",dt(ot.syncedAt)]})]}):null,a.jsx("div",{className:"mt-3",children:a.jsx(cy,{items:ly.CONTACT_EXECUTION})}),a.jsx("div",{className:"mt-3 grid grid-cols-1 gap-2 md:grid-cols-2 xl:grid-cols-4",children:za.map(Qt=>a.jsxs("article",{className:he("rounded-lg border px-2.5 py-2 text-[11px]",Qt.done?"border-emerald-200 bg-emerald-50 text-emerald-800":"border-slate-200 bg-white text-slate-700"),children:[a.jsx("p",{className:"font-semibold",children:Qt.done?"":""}),a.jsx("p",{className:"mt-1",children:Qt.label})]},Qt.label))}),a.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3 xl:grid-cols-[320px,1fr]",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"rounded-md border border-indigo-200 bg-indigo-50 p-3",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[a.jsx("p",{className:"text-xs font-semibold text-indigo-900",children:" "}),a.jsx("span",{className:he("rounded border px-2 py-0.5 text-[10px] font-semibold",Et.chip),children:Et.label})]}),a.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-[11px] md:grid-cols-4",children:[a.jsxs("div",{className:"rounded border border-indigo-100 bg-white px-2 py-1.5",children:[a.jsx("p",{className:"text-slate-500",children:" "}),a.jsx("p",{className:"font-semibold text-slate-900",children:dt(qs)})]}),a.jsxs("div",{className:"rounded border border-indigo-100 bg-white px-2 py-1.5",children:[a.jsx("p",{className:"text-slate-500",children:"  "}),a.jsx("p",{className:"font-semibold text-slate-900",children:dt(df)})]}),a.jsxs("div",{className:"rounded border border-indigo-100 bg-white px-2 py-1.5",children:[a.jsx("p",{className:"text-slate-500",children:" "}),a.jsx("p",{className:"font-semibold text-slate-900",children:Ie.sourceOrg??aa})]}),a.jsxs("div",{className:"rounded border border-indigo-100 bg-white px-2 py-1.5",children:[a.jsx("p",{className:"text-slate-500",children:" "}),a.jsxs("p",{className:he("font-semibold",fi>0?"text-rose-700":"text-emerald-700"),children:[fi,""]})]})]}),a.jsxs("div",{className:"mt-2 grid grid-cols-1 gap-1",children:[a.jsx("button",{type:"button",onClick:()=>{const Qt=ut();Je(fr=>({...fr,lastSyncedAt:Qt})),Lr(fr=>({...fr,status:"PENDING",updatedAt:Qt,startedAt:void 0,completedAt:void 0,progress:0,etaSeconds:null})),Ye({type:"MESSAGE_SENT",at:Qt,by:w.header.assigneeName,summary:"  "}),We("Stage2   "),De.success("   .")},className:"rounded border border-blue-200 bg-white px-2 py-1 text-[10px] font-semibold text-blue-700 hover:bg-blue-50",children:" "}),a.jsx("button",{type:"button",onClick:()=>{const Qt=ut();Je(fr=>({...fr,lastSyncedAt:Qt})),fi>0&&Lr(fr=>({...fr,status:"PENDING",updatedAt:Qt,startedAt:void 0,completedAt:void 0,progress:0,etaSeconds:null})),We("Stage2  "),De.success("  .")},className:"rounded border border-indigo-200 bg-white px-2 py-1 text-[10px] font-semibold text-indigo-700 hover:bg-indigo-50",children:""})]}),a.jsxs("details",{open:wd,onToggle:Qt=>Zt(Qt.target.open),className:"mt-2 rounded border border-indigo-100 bg-white p-2",children:[a.jsx("summary",{className:"cursor-pointer text-[10px] font-semibold text-slate-700",children:"  "}),a.jsx("div",{className:"mt-2 space-y-1",children:Pn.length>0?Pn.map((Qt,fr)=>a.jsxs("div",{className:"rounded border border-slate-200 px-2 py-1 text-[10px] text-slate-600",children:[a.jsx("p",{className:"font-semibold text-slate-700",children:Uy(Qt)}),a.jsxs("p",{children:[dt(Qt.at),"  ",Qt.summary]})]},`${Qt.at}-${fr}`)):a.jsx("p",{className:"text-[10px] text-slate-500",children:"  ."})})]})]}),$e.length>0?a.jsxs("div",{className:"rounded-md border border-rose-200 bg-rose-50 p-2",children:[a.jsx("p",{className:"text-[11px] font-semibold text-rose-700",children:"/ "}),a.jsx("ul",{className:"mt-1 space-y-1",children:$e.map(Qt=>a.jsx("li",{children:a.jsxs("button",{type:"button",onClick:()=>Vu(Qt.key),className:"text-[11px] text-rose-700 underline decoration-dotted underline-offset-2",children:["- ",Qt.message]})},Qt.key))})]}):null,fi>0?a.jsxs("div",{className:"rounded-md border border-amber-200 bg-amber-50 px-3 py-2 text-[11px] text-amber-800",children:[" :    ",fi,"  ."]}):a.jsx("div",{className:"rounded-md border border-emerald-200 bg-emerald-50 px-3 py-2 text-[11px] text-emerald-800",children:"    ."})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 p-3",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[a.jsx("p",{className:"text-xs font-semibold text-slate-800",children:"   "}),a.jsxs("label",{className:"flex items-center gap-1 text-[10px] font-semibold text-slate-700",children:[a.jsx("input",{type:"checkbox",checked:Fs,onChange:Qt=>{if(!Qt.target.checked&&br.length>0){De.error("         .");return}si(Qt.target.checked),Qt.target.checked||(vl(""),$r("manualEditReason"))}})," "]})]}),a.jsx("p",{className:"mt-1 text-[10px] text-slate-600",children:" ( )  .      ."}),a.jsxs("div",{className:"mt-2 grid grid-cols-1 gap-2 md:grid-cols-2",children:[a.jsxs("label",{className:"text-[11px] text-slate-600",children:[a.jsxs("span",{className:"inline-flex items-center gap-1",children:[a.jsx(cg,{term:"MMSE"}),"  (0~30)",Ct&&Yu("mmse")?a.jsx("span",{className:he("rounded border px-1.5 py-0.5 text-[10px] font-semibold",Ct.chip),children:Ct.label}):null]}),a.jsx("input",{ref:Sa("mmse"),type:"number",inputMode:"decimal",min:0,max:30,step:1,value:Ce.tests.mmse??"",disabled:qr,onChange:Qt=>{$r("mmse"),$r("manualEditReason");const fr=Qt.target.value,Dc=fr===""?void 0:Number(fr);Dt(Es=>({...Es,tests:{...Es.tests,mmse:fr===""||Number.isNaN(Dc)?void 0:Dc}}))},className:wo("mmse","mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-xs outline-none focus:border-blue-300 disabled:cursor-not-allowed disabled:bg-slate-100")}),An.mmse?a.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:An.mmse}):null]}),a.jsxs("label",{className:"text-[11px] text-slate-600",children:[a.jsxs("span",{className:"inline-flex items-center gap-1",children:[a.jsx(cg,{term:"CDR"}),"/",a.jsx(cg,{term:"GDS"}),"  (0~7)",Ct&&Yu("cdr")?a.jsx("span",{className:he("rounded border px-1.5 py-0.5 text-[10px] font-semibold",Ct.chip),children:Ct.label}):null]}),a.jsx("input",{ref:Sa("cdr"),type:"number",inputMode:"decimal",min:0,max:7,step:.5,value:Ce.tests.cdr??"",disabled:qr,onChange:Qt=>{$r("cdr"),$r("manualEditReason");const fr=Qt.target.value,Dc=fr===""?void 0:Number(fr);Dt(Es=>({...Es,tests:{...Es.tests,cdr:fr===""||Number.isNaN(Dc)?void 0:Dc}}))},className:wo("cdr","mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-xs outline-none focus:border-blue-300 disabled:cursor-not-allowed disabled:bg-slate-100")}),An.cdr?a.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:An.cdr}):null]}),a.jsxs("label",{className:"text-[11px] text-slate-600",children:[a.jsxs("span",{className:"inline-flex items-center gap-1",children:[" ",Ct&&Yu("cogTestType")?a.jsx("span",{className:he("rounded border px-1.5 py-0.5 text-[10px] font-semibold",Ct.chip),children:Ct.label}):null]}),a.jsxs("select",{ref:Sa("neuro"),value:Ce.tests.neuroCognitiveType??"",disabled:qr,onChange:Qt=>{$r("neuro"),$r("manualEditReason"),Dt(fr=>({...fr,tests:{...fr.tests,neuroCognitiveType:Qt.target.value||void 0}}))},className:wo("neuro","mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-xs outline-none focus:border-blue-300 disabled:cursor-not-allowed disabled:bg-slate-100"),children:[a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"CERAD-K",children:"CERAD-K"}),a.jsx("option",{value:"SNSB-II",children:"SNSB-II"}),a.jsx("option",{value:"SNSB-C",children:"SNSB-C"}),a.jsx("option",{value:"LICA",children:"LICA"})]}),An.neuro?a.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:An.neuro}):null]}),a.jsxs("label",{className:"text-[11px] text-slate-600",children:[a.jsxs("span",{className:"inline-flex items-center gap-1",children:["  ",Ct&&Yu("specialistOpinionStatus")?a.jsx("span",{className:he("rounded border px-1.5 py-0.5 text-[10px] font-semibold",Ct.chip),children:Ct.label}):null]}),a.jsxs("select",{ref:Sa("specialist"),value:Ce.tests.specialist?"DONE":"MISSING",disabled:qr,onChange:Qt=>{$r("specialist"),$r("manualEditReason"),Dt(fr=>({...fr,tests:{...fr.tests,specialist:Qt.target.value==="DONE"}}))},className:wo("specialist","mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-xs outline-none focus:border-blue-300 disabled:cursor-not-allowed disabled:bg-slate-100"),children:[a.jsx("option",{value:"MISSING",children:"MISSING"}),a.jsx("option",{value:"DONE",children:"DONE"})]}),An.specialist?a.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:An.specialist}):null]})]}),br.length>0?a.jsxs("div",{className:"mt-2 rounded-md border border-amber-200 bg-amber-50 px-2 py-1.5 text-[10px] text-amber-800",children:[" : ",br.join(", "),"       ."]}):null,Ln?a.jsxs("label",{className:"mt-2 block text-[11px] text-slate-600",children:["  ()",a.jsx("textarea",{ref:Sa("manualEditReason"),value:ss,onChange:Qt=>{$r("manualEditReason"),vl(Qt.target.value)},className:wo("manualEditReason","mt-1 h-16 w-full rounded-md border border-gray-200 px-2 py-1 text-[11px] outline-none focus:border-blue-300"),placeholder:"    ."}),An.manualEditReason?a.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:An.manualEditReason}):null]}):null]}),a.jsxs("div",{className:"rounded-md border border-slate-200 bg-white px-3 py-2 text-[10px] text-slate-600",children:["    ",a.jsx("strong",{children:"  "}),"  ."]})]})]}),a.jsxs("div",{className:"mt-3 flex flex-wrap justify-end gap-2 border-t border-slate-200 pt-3",children:[a.jsx("button",{type:"button",onClick:()=>Il(1),className:"inline-flex items-center rounded-md border border-slate-300 bg-white px-3 py-1.5 text-xs font-semibold text-slate-700 hover:bg-slate-50",children:"Step3( )  "}),a.jsxs("button",{onClick:Qu,className:"inline-flex items-center gap-1 rounded-md bg-[#163b6f] px-3 py-1.5 text-xs font-semibold text-white hover:bg-[#112f5a]",children:[a.jsx(Si,{size:13}),"   "]})]})]})}const B=Fd===0,Y=Ls.slice(0,3),de=Mo.filter($e=>Sc.CONTACT_EXECUTION.includes($e.key)),re=Me.diffNeeded,Oe=[`Stage1  ${tf.bandLabel} (${Math.round(Cl)})`,`Stage2  ${Vd}${Rl?`(${Rl})`:""}`,`    ${k}`],je=[{key:"REVIEW",title:"1)  / ",description:"    .",done:Bt.consultStarted||ce.trim().length>0},{key:"BOOKING",title:"2)   ",description:"//  .",done:!!Le.preferredHospital.trim()&&(Le.testBiomarker||Le.testBrainImaging||Le.testOther)&&!!Le.bookingAt},{key:"RESULT",title:"3)   ",description:"//  .",done:qi},{key:"MODEL",title:"4) Stage2  ",description:"     .",done:er.jobStatus==="DONE"},{key:"TRANSITION",title:"5) Stage3   ",description:" ( ) .",done:Bn}],nt=je.map($e=>$e.key),Mt=Math.max(0,nt.indexOf(Mn));return a.jsxs("section",{id:"stage3-step2-input",className:"rounded-lg border border-gray-200 bg-white p-4",children:[a.jsx("h4",{className:"text-sm font-bold text-slate-900",children:re?"      //   ":"       / "}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-600",children:re?"      / ,     .":"          ."}),a.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3 xl:grid-cols-[minmax(360px,0.9fr)_minmax(0,1.1fr)]",children:[a.jsxs("div",{className:"space-y-2",children:[je.map(($e,ke)=>{const Et=Mn===$e.key,Pn=ke>Mt+1;return a.jsxs("button",{type:"button",onClick:()=>{Pn||gp($e.key)},className:he("flex w-full items-center justify-between rounded-md border px-3 py-2 text-left",Et?"border-indigo-300 bg-indigo-50":$e.done?"border-emerald-200 bg-emerald-50":"border-slate-200 bg-slate-50",Pn?"cursor-not-allowed opacity-60":"hover:border-indigo-200 hover:bg-white"),children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-[11px] font-semibold text-slate-900",children:$e.title}),a.jsx("p",{className:"text-[10px] text-slate-600",children:$e.description})]}),a.jsx("span",{className:he("rounded border px-2 py-0.5 text-[10px] font-semibold",$e.done?"border-emerald-300 bg-white text-emerald-700":Et?"border-indigo-300 bg-white text-indigo-700":"border-slate-200 bg-white text-slate-600"),children:$e.done?"":Pn?"":Et?"":""})]},$e.key)}),de.length>0?a.jsxs("div",{className:"rounded-md border border-rose-200 bg-rose-50 p-2",children:[a.jsxs("p",{className:"text-[11px] font-semibold text-rose-700",children:["   ",de.length,""]}),a.jsx("ul",{className:"mt-1 space-y-1",children:de.map($e=>a.jsx("li",{children:a.jsxs("button",{type:"button",onClick:()=>ip($e.key),className:"text-[11px] text-rose-700 underline decoration-dotted underline-offset-2",children:["- ",$e.message]})},$e.key))})]}):null]}),a.jsxs("div",{className:"space-y-3 rounded-md border border-slate-200 bg-slate-50 p-3",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[a.jsx("p",{className:"text-xs font-semibold text-slate-800",children:"/  "}),a.jsx("span",{className:"text-[10px] text-slate-500",children:"Stage1 /  "})]}),a.jsxs("div",{className:"rounded-md border border-slate-200 bg-white p-2",children:[a.jsx("p",{className:"text-xs font-semibold text-slate-800",children:"  "}),a.jsx("ul",{className:"mt-1 space-y-1 text-[11px] text-slate-600",children:Oe.map($e=>a.jsxs("li",{children:[" ",$e]},$e))})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[a.jsx("button",{type:"button",onClick:()=>{Ea("CONTACT_EXECUTION","step2CallRecord"),Zn($e=>({...$e,consultStarted:!0})),Zu()},className:"rounded border border-blue-200 bg-blue-50 px-2 py-1 text-[10px] font-semibold text-blue-700",children:" "}),a.jsx("button",{type:"button",onClick:()=>{const $e=Y[0];$e?(dr($e),Zn(ke=>({...ke,consultStarted:!0})),De.success("  .")):De("   .")},className:"rounded border border-indigo-200 bg-indigo-50 px-2 py-1 text-[10px] font-semibold text-indigo-700",children:" "}),a.jsx("button",{type:"button",onClick:()=>{if(!ce.trim()){Nl("CONTACT_EXECUTION",{...Ps.CONTACT_EXECUTION,step2CallRecord:"   ."}),De.error("    .");return}Ea("CONTACT_EXECUTION","step2CallRecord"),Zn($e=>({...$e,infoCollected:!0})),$t($e=>({...$e,note:ce.trim()})),We(`Stage3   : ${ce.slice(0,60)}`)},className:"rounded border border-slate-200 bg-white px-2 py-1 text-[10px] font-semibold text-slate-700",children:"  "})]}),a.jsxs("label",{className:"text-[11px] text-slate-600",children:["  ()",a.jsx("textarea",{ref:ii("step2CallRecord"),value:ce,onChange:$e=>{Ea("CONTACT_EXECUTION","step2CallRecord"),Z($e.target.value)},className:Ao("CONTACT_EXECUTION","step2CallRecord","mt-1 h-14 w-full rounded-md border border-gray-200 px-2 py-1 text-[11px] outline-none focus:border-indigo-300"),placeholder:"    ."}),Yn.step2CallRecord?a.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:Yn.step2CallRecord}):null]}),a.jsx(A7,{stageLabel:"3",templates:Vh,defaultVars:{centerName:m_,centerPhone:Ko,bookingLink:$y(w.reservationInfo)},caseId:w.header.caseId,citizenPhone:t?.profile.phone??"010-0000-0000",guardianPhone:t?.profile.guardianPhone,callScripts:qh,compact:!0,onConsultation:Yx,onSmsSent:Qx})]})]}),a.jsxs("div",{className:"mx-auto mt-3 max-w-[1100px] space-y-3 px-2 md:px-8",children:[Mn==="REVIEW"?a.jsxs("div",{id:"stage3-step2-panel-review",className:"space-y-3 rounded-md border border-slate-200 bg-slate-50 p-3",children:[a.jsxs("div",{className:"rounded-md border border-slate-200 bg-white p-2",children:[a.jsx("p",{className:"text-xs font-semibold text-slate-800",children:"  "}),a.jsx("ul",{className:"mt-1 space-y-1 text-[11px] text-slate-600",children:Oe.map($e=>a.jsxs("li",{children:[" ",$e]},$e))})]}),a.jsx("p",{className:"text-[11px] text-slate-600",children:"/       ."})]}):null,Mn==="BOOKING"||Mn==="RESULT"?a.jsxs("div",{id:"stage3-step2-panel-booking",className:"space-y-3 rounded-md border border-slate-200 bg-slate-50 p-3",children:[a.jsx("p",{className:"text-xs font-semibold text-slate-800",children:"/ "}),a.jsxs("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-2",children:[a.jsxs("label",{className:"text-[11px] text-slate-600",children:["/()",a.jsx("input",{ref:ii("step2Hospital"),value:Le.preferredHospital,onChange:$e=>{Ea("CONTACT_EXECUTION","step2Hospital"),$t(ke=>({...ke,preferredHospital:$e.target.value}))},className:Ao("CONTACT_EXECUTION","step2Hospital","mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-indigo-300")}),Yn.step2Hospital?a.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:Yn.step2Hospital}):null]}),a.jsxs("label",{className:"text-[11px] text-slate-600",children:[" ()",a.jsx("input",{ref:ii("step2BookingAt"),type:"datetime-local",value:Vc(Le.bookingAt),onChange:$e=>{Ea("CONTACT_EXECUTION","step2BookingAt"),$t(ke=>({...ke,bookingAt:Wc($e.target.value)||ke.bookingAt}))},className:Ao("CONTACT_EXECUTION","step2BookingAt","mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-indigo-300")}),Yn.step2BookingAt?a.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:Yn.step2BookingAt}):null]})]}),a.jsxs("div",{ref:ii("step2TestSelection"),className:he("grid grid-cols-3 gap-2 rounded-md border border-slate-200 bg-white p-2 text-[11px] text-slate-700",Yn.step2TestSelection?"border-rose-300 bg-rose-50":""),children:[a.jsxs("label",{className:"flex items-center gap-1",children:[a.jsx("input",{type:"checkbox",checked:Le.testBiomarker,onChange:$e=>{Ea("CONTACT_EXECUTION","step2TestSelection"),$t(ke=>({...ke,testBiomarker:$e.target.checked}))}}),""]}),a.jsxs("label",{className:"flex items-center gap-1",children:[a.jsx("input",{type:"checkbox",checked:Le.testBrainImaging,onChange:$e=>{Ea("CONTACT_EXECUTION","step2TestSelection"),$t(ke=>({...ke,testBrainImaging:$e.target.checked}))}}),""]}),a.jsxs("label",{className:"flex items-center gap-1",children:[a.jsx("input",{type:"checkbox",checked:Le.testOther,onChange:$e=>{Ea("CONTACT_EXECUTION","step2TestSelection"),$t(ke=>({...ke,testOther:$e.target.checked}))}})," "]})]}),Yn.step2TestSelection?a.jsx("p",{className:"text-[10px] font-semibold text-rose-600",children:Yn.step2TestSelection}):null,a.jsxs("details",{open:Kt,onToggle:$e=>Ai($e.target.open),className:"rounded-md border border-slate-200 bg-white p-2",children:[a.jsx("summary",{className:"cursor-pointer text-[11px] font-semibold text-slate-700",children:" ()"}),a.jsxs("div",{className:"mt-2 grid grid-cols-1 gap-2 md:grid-cols-2",children:[a.jsxs("label",{className:"text-[11px] text-slate-600",children:["",a.jsx("input",{value:Le.orgPhone,onChange:$e=>$t(ke=>({...ke,orgPhone:$e.target.value})),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-indigo-300"})]}),a.jsxs("label",{className:"text-[11px] text-slate-600",children:[" ",a.jsx("input",{type:"datetime-local",value:Vc(Le.bookingAltAt),onChange:$e=>$t(ke=>({...ke,bookingAltAt:Wc($e.target.value)||ke.bookingAltAt})),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-indigo-300"})]})]}),a.jsxs("label",{className:"mt-2 block text-[11px] text-slate-600",children:["/",a.jsx("textarea",{value:Le.prepGuide,onChange:$e=>$t(ke=>({...ke,prepGuide:$e.target.value})),className:"mt-1 h-14 w-full rounded-md border border-gray-200 px-2 py-1 text-[11px] outline-none focus:border-indigo-300"})]}),a.jsxs("label",{className:"mt-2 block text-[11px] text-slate-600",children:[" ",a.jsx("textarea",{value:Le.note,onChange:$e=>$t(ke=>({...ke,note:$e.target.value})),className:"mt-1 h-16 w-full rounded-md border border-gray-200 px-2 py-1 text-[11px] outline-none focus:border-indigo-300"})]})]}),a.jsxs("div",{className:"rounded-md border border-indigo-200 bg-white p-2",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-1",children:[a.jsx("button",{type:"button",onClick:Xx,className:"rounded border border-indigo-200 bg-indigo-50 px-2 py-1 text-[10px] font-semibold text-indigo-700",children:"RAG  "}),bt?a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",onClick:Al,className:"rounded border border-emerald-200 bg-emerald-50 px-2 py-1 text-[10px] font-semibold text-emerald-700",children:""}),a.jsx("button",{type:"button",onClick:Zh,className:"rounded border border-slate-200 bg-white px-2 py-1 text-[10px] font-semibold text-slate-700",children:""})]}):null]}),bt?a.jsxs("div",{className:"mt-2 rounded border border-slate-200 bg-slate-50 p-2 text-[10px] text-slate-600",children:[a.jsxs("p",{className:"font-semibold text-slate-800",children:[" ( )   ",bt.confidenceLabel]}),a.jsxs("p",{className:"mt-1",children:[" : ",bt.changedFields.join(", ")||""]}),bt.reasonSnippets.map($e=>a.jsxs("p",{className:"mt-0.5",children:["- ",$e]},$e))]}):null]}),a.jsxs("div",{className:"rounded-md border border-emerald-200 bg-emerald-50 p-2",children:[a.jsx("p",{className:"text-[10px] text-emerald-800",children:re?"  :   +   +   +   ":"  :     +   +   +   "}),a.jsx("button",{type:"button",onClick:e0,disabled:!B,className:"mt-2 w-full rounded-md border border-emerald-300 bg-white px-2 py-1.5 text-[11px] font-semibold text-emerald-700 disabled:cursor-not-allowed disabled:opacity-60",children:re?"   ":"   "}),B?null:a.jsx("p",{className:"mt-1 text-[10px] text-amber-700",children:"    ."})]}),a.jsxs("label",{id:"stage3-step2-panel-result",className:"flex items-center gap-1 text-[11px] font-semibold text-slate-700",children:[a.jsx("input",{type:"checkbox",checked:hr,onChange:$e=>gr($e.target.checked)})," /    (Step3  )"]}),hr?a.jsxs("div",{className:"rounded-md border border-slate-200 bg-white p-2",children:[a.jsxs("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-2",children:[a.jsxs("label",{className:"text-[11px] text-slate-600",children:[" ()",a.jsx("input",{ref:ii("step2PerformedAt"),type:"datetime-local",value:Vc(Le.resultPerformedAt),onChange:$e=>{Ea("CONTACT_EXECUTION","step2PerformedAt"),$t(ke=>({...ke,resultPerformedAt:Wc($e.target.value)||""}))},className:Ao("CONTACT_EXECUTION","step2PerformedAt","mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-indigo-300")}),Yn.step2PerformedAt?a.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:Yn.step2PerformedAt}):null]}),a.jsxs("label",{className:"text-[11px] text-slate-600",children:[" ",a.jsxs("select",{value:Le.resultLabel,onChange:$e=>$t(ke=>({...ke,resultLabel:$e.target.value})),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-indigo-300",children:[a.jsx("option",{value:" ",children:" "}),a.jsx("option",{value:" ",children:" "}),a.jsx("option",{value:"",children:""})]})]}),a.jsxs("label",{className:"text-[11px] text-slate-600",children:[" (",re?"":"",")",a.jsx("input",{ref:ii("step2BiomarkerResult"),value:Le.biomarkerResultText??"",onChange:$e=>{Ea("CONTACT_EXECUTION","step2BiomarkerResult"),$t(ke=>({...ke,biomarkerResultText:$e.target.value}))},className:Ao("CONTACT_EXECUTION","step2BiomarkerResult","mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-indigo-300")}),Yn.step2BiomarkerResult?a.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:Yn.step2BiomarkerResult}):null]}),a.jsxs("label",{className:"text-[11px] text-slate-600",children:[" (",re?"":"",")",a.jsx("input",{ref:ii("step2ImagingResult"),value:Le.imagingResultText??"",onChange:$e=>{Ea("CONTACT_EXECUTION","step2ImagingResult"),$t(ke=>({...ke,imagingResultText:$e.target.value}))},className:Ao("CONTACT_EXECUTION","step2ImagingResult","mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-indigo-300")}),Yn.step2ImagingResult?a.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:Yn.step2ImagingResult}):null]})]}),a.jsxs("label",{className:"mt-2 block text-[11px] text-slate-600",children:[" ()",a.jsx("textarea",{ref:ii("step2ResultSummary"),value:Le.resultSummary,onChange:$e=>{Ea("CONTACT_EXECUTION","step2ResultSummary"),$t(ke=>({...ke,resultSummary:$e.target.value}))},className:Ao("CONTACT_EXECUTION","step2ResultSummary","mt-1 h-16 w-full rounded-md border border-gray-200 px-2 py-1 text-[11px] outline-none focus:border-indigo-300"),placeholder:"  ."}),Yn.step2ResultSummary?a.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:Yn.step2ResultSummary}):null]}),a.jsx("button",{type:"button",onClick:()=>{const $e={};if(Le.resultPerformedAt||($e.step2PerformedAt="   ."),re&&!Le.biomarkerResultText?.trim()&&($e.step2BiomarkerResult="  ."),re&&!Le.imagingResultText?.trim()&&($e.step2ImagingResult="  ."),Le.resultSummary.trim()||($e.step2ResultSummary="  ."),Object.keys($e).length>0){Nl("CONTACT_EXECUTION",{...Ps.CONTACT_EXECUTION,...$e}),De.error("    .");return}Ba(ke=>{const Et={...ke.CONTACT_EXECUTION??{}};return delete Et.step2PerformedAt,delete Et.step2BiomarkerResult,delete Et.step2ImagingResult,delete Et.step2ResultSummary,{...ke,CONTACT_EXECUTION:Et}}),Ki("APPLY_RESULT"),De.success("  .")},className:"mt-2 rounded border border-indigo-200 bg-indigo-50 px-3 py-1 text-[11px] font-semibold text-indigo-700",children:" / "})]}):null]}):null,Mn==="MODEL"?a.jsxs("div",{id:"stage3-step2-panel-model",className:"rounded-md border border-indigo-200 bg-indigo-50 p-3",children:[a.jsx("p",{className:"text-xs font-semibold text-indigo-900",children:"  "}),a.jsxs("p",{className:"mt-1 text-[11px] text-indigo-800",children:[" ",er.jobStatus,"   ",Math.round(er.progress),"%",er.updatedAt?`   ${dt(er.updatedAt)}`:""]}),a.jsx("div",{className:"mt-2 h-1.5 overflow-hidden rounded-full bg-indigo-100",children:a.jsx("div",{className:"h-full rounded-full bg-indigo-500 transition-all duration-700",style:{width:`${Math.round(er.progress)}%`}})}),a.jsx("button",{type:"button",onClick:()=>Ki("APPLY_RESULT"),className:"mt-2 rounded border border-indigo-300 bg-white px-2 py-1 text-[10px] font-semibold text-indigo-700",children:"   "})]}):null,Mn==="TRANSITION"?a.jsxs("div",{id:"stage3-step2-panel-transition",className:"rounded-md border border-emerald-200 bg-emerald-50 p-3",children:[a.jsx("p",{className:"text-xs font-semibold text-emerald-900",children:"Stage3   "}),a.jsx("p",{className:"mt-1 text-[11px] text-emerald-800",children:Bn?"  .    /  .":"        ."}),a.jsx("button",{type:"button",onClick:()=>Il(1),disabled:!Bn,className:"mt-2 rounded border border-emerald-300 bg-white px-2 py-1 text-[10px] font-semibold text-emerald-700 disabled:cursor-not-allowed disabled:opacity-60",children:"Step3( /) "})]}):null]}),a.jsxs("div",{className:"mt-3 rounded-md border border-gray-200 bg-gray-50 p-2",children:[a.jsx("p",{className:"text-[11px] font-semibold text-slate-700",children:"  "}),a.jsxs("div",{className:"mt-1 space-y-1",children:[(w.stage3?.recommendedActions??[]).filter($e=>$e.requiresApproval).map($e=>a.jsxs("div",{className:"flex items-center justify-between rounded border border-slate-200 bg-white px-2 py-1",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-[11px] font-semibold text-slate-800",children:$e.title}),a.jsx("p",{className:"text-[10px] text-slate-500",children:$e.reason})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>Ac($e.id,"APPROVED"),className:"rounded border border-emerald-200 bg-emerald-50 px-1.5 py-0.5 text-[10px] font-semibold text-emerald-700",children:""}),a.jsx("button",{onClick:()=>Ac($e.id,"HOLD"),className:"rounded border border-slate-200 bg-white px-1.5 py-0.5 text-[10px] font-semibold text-slate-700",children:""})]})]},$e.id)),(w.stage3?.recommendedActions??[]).filter($e=>$e.requiresApproval).length===0?a.jsx("p",{className:"rounded border border-slate-200 bg-white px-2 py-1 text-[10px] text-slate-500",children:"   ."}):null]})]})]})})():null,Ee==="RESPONSE_HANDLING"?u?a.jsxs("section",{className:"rounded-lg border border-gray-200 bg-white p-4",children:[a.jsx("h4",{className:"text-sm font-bold text-slate-900",children:" "}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-600",children:"/MCI/    .     ."}),a.jsx("div",{className:"mt-3",children:a.jsx(cy,{items:ly.RESPONSE_HANDLING})}),(()=>{const k=Wu.filter(re=>re.key==="classification"||re.key==="rationale"||re.key==="overrideReason"||re.key==="mmse"||re.key==="cdr"||re.key==="neuro"||re.key==="specialist"),B=[...w.timeline.filter(re=>re.type==="STAGE2_PLAN_CONFIRMED"||re.type==="STAGE2_RESULTS_RECORDED"||re.type==="DIFF_RESULT_APPLIED"||re.type==="STAGE2_CLASS_CONFIRMED"||re.type==="INFERENCE_STARTED"||re.type==="INFERENCE_COMPLETED"||re.type==="INFERENCE_FAILED").slice(0,6).map(re=>({at:re.at,label:Uy(re),summary:re.summary})),...Un.updatedAt?[{at:Un.updatedAt,label:Un.jobStatus==="RUNNING"?"  ":Un.jobStatus==="DONE"?"  ":Un.jobStatus==="FAILED"?"  ":"  ",summary:Un.jobStatus==="DONE"?`  ${Ss??"-"}`:"      ."}]:[]].sort((re,Oe)=>new Date(re.at).getTime()-new Date(Oe.at).getTime()).slice(-6),Y=Un.jobStatus==="DONE"?"bg-emerald-50 border-emerald-200 text-emerald-700":Un.jobStatus==="RUNNING"?"bg-blue-50 border-blue-200 text-blue-700":Un.jobStatus==="FAILED"?"bg-rose-50 border-rose-200 text-rose-700":"bg-slate-100 border-slate-200 text-slate-700",de=Yi&&Ti;return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mt-3 rounded-md border border-slate-200 bg-slate-50 p-3",children:[a.jsx("p",{className:"text-xs font-semibold text-slate-800",children:"Stage2  "}),a.jsx("div",{className:"mt-2 space-y-1.5",children:B.length>0?B.map(re=>a.jsxs("div",{className:"rounded border border-slate-200 bg-white px-2 py-1.5 text-[10px]",children:[a.jsx("p",{className:"font-semibold text-slate-700",children:re.label}),a.jsx("p",{className:"text-slate-500",children:dt(re.at)}),a.jsx("p",{className:"text-slate-600",children:re.summary})]},`${re.at}-${re.label}`)):a.jsx("p",{className:"rounded border border-slate-200 bg-white px-2 py-1 text-[10px] text-slate-500",children:"   ."})})]}),a.jsxs("div",{className:"mt-3 rounded-md border border-indigo-200 bg-indigo-50 p-3",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[a.jsx("p",{className:"text-xs font-semibold text-indigo-900",children:"  "}),a.jsx("span",{className:he("rounded border px-2 py-0.5 text-[10px] font-semibold",Y),children:Un.jobStatus})]}),a.jsxs("p",{className:"mt-1 text-[11px] text-indigo-800",children:[" : ",Ss??"","   ",dt(Un.updatedAt)]}),Un.jobStatus==="RUNNING"?a.jsxs("div",{className:"mt-2 rounded-md border border-blue-200 bg-white px-2 py-2",children:[a.jsxs("div",{className:"flex items-center justify-between text-[10px] text-blue-700",children:[a.jsx("span",{children:"   "}),a.jsxs("span",{children:[Math.round(Un.progress),"%"]})]}),a.jsx("div",{className:"mt-1 h-1.5 overflow-hidden rounded-full bg-blue-100",children:a.jsx("div",{className:"h-full rounded-full bg-blue-500 transition-all duration-700",style:{width:`${Math.round(Un.progress)}%`}})}),a.jsxs("p",{className:"mt-1 text-[10px] text-blue-700",children:["ETA ",CO(Un.etaSeconds),Un.buffered?"   ()":""]})]}):null,Un.jobStatus==="FAILED"?a.jsxs("div",{className:"mt-2 rounded-md border border-rose-200 bg-white px-2 py-2 text-[10px] text-rose-700",children:[a.jsx("p",{children:"  .     ."}),a.jsx("button",{type:"button",onClick:()=>{const re=ut();Lr(Oe=>({...Oe,status:"RUNNING",startedAt:re,updatedAt:re,completedAt:void 0,progress:4,etaSeconds:null,failureReason:void 0,recommendedLabel:Oe.recommendedLabel??p_(Ce.tests)})),Ye({type:"INFERENCE_REQUESTED",stage:2,at:re,by:w.header.assigneeName,summary:"Stage2   "}),Ye({type:"INFERENCE_STARTED",stage:2,at:re,by:w.header.assigneeName,summary:"Stage2   "}),We("Stage2   ")},className:"mt-2 rounded border border-rose-300 bg-white px-2 py-1 text-[10px] font-semibold text-rose-700",children:""})]}):null,a.jsx("p",{className:"text-[10px] text-indigo-700",children:"   ,      ."})]}),k.length>0?a.jsxs("div",{className:"mt-3 rounded-md border border-rose-200 bg-rose-50 p-2",children:[a.jsx("p",{className:"text-[11px] font-semibold text-rose-700",children:"/ "}),a.jsx("ul",{className:"mt-1 space-y-1",children:k.map(re=>a.jsx("li",{children:a.jsxs("button",{type:"button",onClick:()=>Vu(re.key),className:"text-[11px] text-rose-700 underline decoration-dotted underline-offset-2",children:["- ",re.message]})},re.key))})]}):null,a.jsx("div",{className:"mt-3 rounded-md border border-slate-200 bg-slate-50 p-3",children:de?a.jsx(fq,{probs:Ti,predictedLabel:Ss??zt,mciSeverity:pi,mciScore:(Ss??zt)==="MCI"?pi===""?82:pi===""?34:58:void 0}):a.jsx(Af,{stage:2,missing:A,onOpenStep:_a})}),a.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-2 md:grid-cols-2",children:[a.jsxs("label",{className:"text-[11px] text-slate-600",children:[" ",a.jsxs("select",{ref:Sa("classification"),value:zt,onChange:re=>{const Oe=re.target.value;$r("classification"),$r("overrideReason"),as(!0),cn(Oe),Ss&&Oe===Ss&&Vn("")},className:wo("classification","mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-xs outline-none focus:border-blue-300"),children:[a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"MCI",children:"MCI"}),a.jsx("option",{value:"",children:""})]}),An.classification?a.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:An.classification}):null,zu?a.jsx("p",{className:"mt-1 text-[10px] font-semibold text-indigo-700",children:"   ."}):null]}),a.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 px-3 py-2 text-[11px] text-slate-700",children:[a.jsxs("p",{className:"font-semibold",children:[a.jsx(cg,{term:"ANN"})," "]}),a.jsx("p",{className:"mt-1",children:zt==="MCI"?pi??" ":"-"})]})]}),vp?a.jsxs("label",{className:"mt-2 block text-[11px] text-slate-600",children:["    ()",a.jsx("textarea",{ref:Sa("overrideReason"),value:gn,onChange:re=>{$r("overrideReason"),Vn(re.target.value)},className:wo("overrideReason","mt-1 h-16 w-full rounded-md border border-gray-200 px-2 py-1 text-xs outline-none focus:border-blue-300"),placeholder:"      ."}),An.overrideReason?a.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:An.overrideReason}):null]}):null,a.jsxs("label",{className:"mt-3 block text-[11px] text-slate-600",children:["  1()",a.jsx("textarea",{ref:Sa("rationale"),value:fa,onChange:re=>{$r("rationale"),$s(re.target.value)},className:wo("rationale","mt-1 h-20 w-full rounded-md border border-gray-200 px-2 py-1 text-xs outline-none focus:border-blue-300"),placeholder:": MMSE __, CDR/GDS __,  __   __ ."}),An.rationale?a.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:An.rationale}):null]}),Ka?null:a.jsxs("div",{className:"mt-2 rounded-md border border-amber-200 bg-amber-50 px-3 py-2 text-[11px] text-amber-800",children:[Ol.map(re=>a.jsxs("p",{children:["- ",re]},re)),f0?a.jsx("p",{children:"-      ."}):null,a.jsx("button",{type:"button",onClick:_a,className:"mt-2 rounded border border-amber-300 bg-white px-2 py-1 text-[10px] font-semibold text-amber-700",children:"   "})]}),a.jsxs("button",{onClick:Od,disabled:!Ka,className:"mt-3 inline-flex items-center gap-1 rounded-md bg-[#163b6f] px-3 py-1.5 text-xs font-semibold text-white hover:bg-[#112f5a] disabled:opacity-50",children:[a.jsx(oc,{size:13}),"  "]})]})})()]}):a.jsxs("section",{className:"rounded-lg border border-gray-200 bg-white p-4",children:[a.jsx("h4",{className:"text-sm font-bold text-slate-900",children:x?.source.profile?.stage3Type==="AD_MANAGEMENT"?"   ":"    /"}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-600",children:" /        ."}),qi?er.jobStatus==="FAILED"?a.jsxs("div",{className:"mt-3 rounded-md border border-rose-200 bg-rose-50 p-3 text-[11px] text-rose-800",children:["  : ",Wn.failureReason??" ",a.jsx("button",{type:"button",onClick:()=>Ki("APPLY_RESULT"),className:"mt-2 block rounded border border-rose-300 bg-white px-2 py-1 text-[10px] font-semibold text-rose-700",children:""})]}):er.jobStatus!=="DONE"?a.jsxs("div",{className:"mt-3 rounded-md border border-blue-200 bg-blue-50 p-3 text-[11px] text-blue-800",children:[a.jsx("p",{className:"font-semibold",children:"   "}),a.jsxs("p",{className:"mt-1",children:[" ",Math.round(er.progress),"%  ETA ",CO(er.etaSeconds),er.buffered?"   ()":""]}),a.jsx("div",{className:"mt-2 h-1.5 overflow-hidden rounded-full bg-blue-100",children:a.jsx("div",{className:"h-full rounded-full bg-blue-500 transition-all duration-700",style:{width:`${Math.round(er.progress)}%`}})}),a.jsx("button",{type:"button",onClick:()=>Ki("APPLY_RESULT"),className:"mt-2 block rounded border border-blue-300 bg-white px-2 py-1 text-[10px] font-semibold text-blue-700",children:er.jobStatus==="RUNNING"?"  ":"  "})]}):Bn?a.jsxs("div",{className:"mt-3 space-y-3",children:[a.jsxs("div",{className:"rounded-md border border-indigo-200 bg-indigo-50 p-3",children:[a.jsxs("p",{className:"text-xs font-semibold text-indigo-900",children:[x?.source.profile?.stage3Type==="AD_MANAGEMENT"?" ":"2  "," ",Yo(w.stage3?.transitionRisk.risk2y_now??0),"%"]}),a.jsxs("p",{className:"mt-1 text-[11px] text-indigo-800",children:[" ",dh(w.stage3?.transitionRisk.risk2y_now??0),"   ",w.stage3?.transitionRisk.trend,"  "," ",w.stage3?.transitionRisk.modelVersion]}),w.stage3?a.jsx(Rq,{risk:w.stage3.transitionRisk,stage2OpsView:!1,stage3Type:y}):null]}),a.jsxs("div",{className:"grid grid-cols-1 gap-3 xl:grid-cols-2",children:[a.jsxs("label",{className:"text-[11px] text-slate-600",children:["  ()",a.jsx("textarea",{value:Dr.memo,onChange:k=>jo(B=>({...B,memo:k.target.value})),className:"mt-1 h-24 w-full rounded-md border border-gray-200 px-2 py-1 text-[11px] outline-none focus:border-indigo-300",placeholder:"  /,     ."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[11px] text-slate-600",children:" "}),a.jsx("select",{value:Dr.nextAction,onChange:k=>jo(B=>({...B,nextAction:k.target.value})),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-indigo-300",children:Object.entries(oy).map(([k,B])=>a.jsx("option",{value:k,children:B},k))}),a.jsx("button",{onClick:()=>wl({summary:` : ${Dr.memo||" "}   : ${oy[Dr.nextAction]}`,nextAction:Dr.nextAction}),className:"mt-3 rounded-md border border-indigo-200 bg-indigo-50 px-3 py-1.5 text-[11px] font-semibold text-indigo-700 hover:bg-indigo-100",children:"  "})]})]})]}):a.jsxs("div",{className:"mt-3 rounded-md border border-amber-200 bg-amber-50 p-3 text-[11px] text-amber-800",children:["  ",w.stage3?.diffPathStatus??"NONE"," . STEP2  /    ."]}):a.jsx("div",{className:"mt-3",children:a.jsx(Af,{stage:3,missing:T.length>0?T:["  "," "," "," "],onOpenStep:kl})})]}):null,Ee==="FOLLOW_UP"?u?a.jsxs("section",{className:"space-y-3 rounded-lg border border-gray-200 bg-white p-4",children:[a.jsx("h4",{className:"text-sm font-bold text-slate-900",children:"  "}),a.jsx("p",{className:"text-[11px] text-gray-600",children:"     /Stage3 /   1  ."}),a.jsx(cy,{items:ly.FOLLOW_UP}),a.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 p-3",children:[a.jsx("p",{className:"text-xs font-semibold text-slate-800",children:"  "}),a.jsxs("p",{className:"mt-1 text-[11px] text-slate-600",children:[" : ",vn,vn==="MCI"&&Ns?` (${Ns})`:""]}),a.jsxs("div",{className:"mt-2 grid grid-cols-1 gap-2 md:grid-cols-3",children:[a.jsx("button",{onClick:()=>Rd("FOLLOWUP_2Y","  2    "),disabled:!zd||vn!=="",className:"rounded-md border border-slate-200 bg-white px-2 py-1.5 text-[11px] font-semibold text-slate-700 disabled:opacity-50",children:"  2  "}),a.jsx("button",{onClick:()=>Rd("STAGE3","MCI/  Stage3  "),disabled:!zd||!h_(vn),className:"rounded-md border border-blue-200 bg-blue-50 px-2 py-1.5 text-[11px] font-semibold text-blue-700 disabled:opacity-50",children:"MCI  Stage3 "}),a.jsx("button",{onClick:()=>Rd("DIFF_PATH","    "),disabled:!zd||vn!=="",className:"rounded-md border border-rose-200 bg-rose-50 px-2 py-1.5 text-[11px] font-semibold text-rose-700 disabled:opacity-50",children:"   "})]})]}),a.jsxs("div",{className:"rounded-md border border-indigo-200 bg-indigo-50 p-3",children:[a.jsx("p",{className:"text-xs font-semibold text-indigo-900",children:" ()"}),a.jsx("p",{className:"mt-1 text-[11px] text-indigo-800",children:" /     .   /  ."})]})]}):a.jsxs("section",{className:"space-y-3 rounded-lg border border-gray-200 bg-white p-4",children:[a.jsx("h4",{className:"text-sm font-bold text-slate-900",children:" ()"}),a.jsx("p",{className:"text-[11px] text-gray-600",children:"   UI  /    ."}),a.jsxs("div",{className:"rounded-md border border-slate-200 bg-white p-3",children:[a.jsxs("p",{className:"mb-2 text-[11px] text-slate-600",children:["  ,    UI / .",a.jsx("span",{className:"ml-1 font-semibold text-slate-800",children:"  3  "}),"  ."]}),ir?a.jsx(oAe,{caseId:w.header.caseId,stage:3,resultLabel:ys,mciSeverity:vs,riskTags:w.header.riskGuardrails??[],actorName:w.header.assigneeName}):a.jsx(Af,{stage:2,missing:A,onOpenStep:_a})]}),a.jsxs("div",{className:"rounded-md border border-indigo-200 bg-indigo-50 p-3",children:[a.jsx("p",{className:"text-xs font-semibold text-indigo-900",children:"  "}),a.jsxs("div",{className:"mt-2 grid grid-cols-1 gap-2 md:grid-cols-2",children:[a.jsxs("label",{className:"text-[11px] text-indigo-800",children:["  ",a.jsx("input",{type:"datetime-local",value:Vc(jr.nextTrackingAt),onChange:k=>Fn(B=>({...B,nextTrackingAt:Wc(k.target.value)||B.nextTrackingAt})),className:"mt-1 h-8 w-full rounded-md border border-indigo-200 px-2 text-[11px] outline-none focus:border-indigo-400"})]}),a.jsxs("label",{className:"text-[11px] text-indigo-800",children:[" ",a.jsx("input",{type:"time",value:jr.reminderTime,onChange:k=>Fn(B=>({...B,reminderTime:k.target.value})),className:"mt-1 h-8 w-full rounded-md border border-indigo-200 px-2 text-[11px] outline-none focus:border-indigo-400"})]})]})]})]}):null,a.jsxs("div",{className:"sticky bottom-0 z-10 flex flex-wrap items-center justify-end gap-2 rounded-lg border border-slate-200 bg-white/95 p-3 backdrop-blur",children:[a.jsx("button",{onClick:mi,className:"rounded-md border border-gray-200 px-3 py-1.5 text-xs font-semibold text-gray-700",children:""}),a.jsx("button",{onClick:()=>Il(-1),disabled:Ro<=0,className:"rounded-md border border-gray-200 px-3 py-1.5 text-xs font-semibold text-gray-700 disabled:opacity-40",children:""}),a.jsx("button",{onClick:()=>{if(!u&&Ee==="PRECHECK"){Qd();return}if(u&&Ee==="CONTACT_EXECUTION"){Qd();return}Il(1)},disabled:Ro<0||Ro>=is.length-1,className:"rounded-md border border-gray-200 px-3 py-1.5 text-xs font-semibold text-gray-700 disabled:opacity-40",children:""}),a.jsx("button",{onClick:Qd,className:"rounded-md bg-[#15386a] px-3 py-1.5 text-xs font-semibold text-white",children:" "})]})]})})}),a.jsx(Au,{open:!c&&!!H,onOpenChange:k=>{k||zs()},children:a.jsx(_u,{className:"w-[96vw] max-w-[96vw] sm:max-w-[1700px] max-h-[92vh] overflow-y-auto p-4",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"rounded-lg border border-indigo-200 bg-indigo-50 p-3",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm font-bold text-indigo-900",children:[l?"Stage2 ":"Stage1 ","  ",Oc?.title??" "]}),a.jsx("p",{className:"text-[11px] text-indigo-700",children:l?"        .":"        ."})]}),a.jsxs("span",{className:"rounded-md border border-indigo-300 bg-white px-2 py-1 text-[11px] font-semibold text-indigo-700",children:[" ",ja+1,"/",Rr.length]})]}),a.jsx("div",{className:"mt-2 grid grid-cols-2 gap-1.5 md:grid-cols-4",children:Rr.map((k,B)=>{const Y=ma.find(re=>re.id===k),de=H===k;return a.jsxs("button",{type:"button",onClick:()=>{const re=qp(ma,k);if(re){De.error(re);return}Qi(k)},className:he("rounded-md border px-2 py-1.5 text-left text-[11px]",de?"border-indigo-300 bg-white text-indigo-800":"border-indigo-100 bg-indigo-50/60 text-indigo-700"),children:[a.jsxs("p",{className:"font-semibold",children:["STEP ",B+1]}),a.jsx("p",{className:"mt-0.5 truncate",children:Y?.title??k})]},k)})})]}),H==="PRECHECK"?a.jsxs("section",{className:"rounded-lg border border-gray-200 bg-white p-4",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:l?"2   ":"  "}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:l?"/  ,      .":"  ,       ."}),a.jsx("div",{className:"mt-3",children:a.jsx(q_e,{gates:w.policyGates,onFix:Dd,mode:s})})]}):null,H==="CONTACT_EXECUTION"?a.jsxs("section",{className:"space-y-3 rounded-lg border border-gray-200 bg-white p-4",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:l?"/ ":" "}),a.jsx("p",{className:"text-[11px] text-slate-600",children:l?"       .":"     ."})]}),a.jsx("span",{className:he("rounded-full border px-2.5 py-1 text-[11px] font-semibold",RO[w.contactExecutor]),children:ho[w.contactExecutor]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-3 xl:grid-cols-[minmax(340px,0.8fr)_minmax(600px,1.2fr)]",children:[a.jsx(U_e,{loading:ra,recommendations:Ls,selectedId:rs,editedScript:pe,onSelect:dr,onEditScript:Ge}),w.contactExecutor==="HUMAN"?a.jsx(A7,{stageLabel:m,templates:Vh,defaultVars:{centerName:m_,centerPhone:Ko,bookingLink:$y(w.reservationInfo)},caseId:w.header.caseId,citizenPhone:t?.profile.phone?l||c?t.profile.phone:tl(t.profile.phone):"010-****-1234",guardianPhone:t?.profile.guardianPhone?l||c?t.profile.guardianPhone:tl(t.profile.guardianPhone):void 0,callScripts:qh,onSmsSent:k=>{if(k.type==="BOOKING"&&!w.reservationInfo){De.error("       ."),We("  :   ");return}if(Ye({type:"SMS_SENT",at:ut(),templateId:k.templateLabel,status:k.status==="SENT"?"DELIVERED":k.status==="SCHEDULED"?"PENDING":"FAILED",by:w.header.assigneeName}),We(`${m}  ${k.mode==="NOW"?"":""}: ${k.templateLabel} (${k.status})`),k.status==="SENT"){if(!l&&!c){up(k).then(B=>{B||(jl("SMS"),jt(mt(48)),U(Y=>{const de={...Y.contactExecution,status:"SENT",lastSentAt:ut(),retryCount:Y.contactExecution.retryCount+1};return{...Y,contactExecution:de,contactFlowSteps:Ys(de,Y.preTriageResult,Y.linkageStatus,s)}}))});return}jl("SMS"),jt(mt(48)),U(B=>{const Y={...B.contactExecution,status:"SENT",lastSentAt:ut(),retryCount:B.contactExecution.retryCount+1};return{...B,contactExecution:Y,contactFlowSteps:Ys(Y,B.preTriageResult,B.linkageStatus,s)}})}},onConsultation:(k,B,Y)=>{Ye({type:"CALL_ATTEMPT",at:ut(),result:"SUCCESS",note:k||void 0,by:w.header.assigneeName});const de=Gs?` /  : ${Gs.title}`:"";We(`${m}  : ${Y}${k?` (${k.slice(0,60)})`:""}${de}`),B==="CONTACT"&&jl("CALL"),U(re=>{const Oe={...re.contactExecution,status:"WAITING_RESPONSE",lastSentAt:ut(),retryCount:re.contactExecution.retryCount+1};return{...re,contactExecution:Oe,contactFlowSteps:Ys(Oe,re.preTriageResult,re.linkageStatus,s)}}),De.success("  .")}}):a.jsxs("section",{className:"rounded-xl border border-violet-200 bg-violet-50/70 p-4",children:[a.jsx("h4",{className:"text-sm font-bold text-violet-900",children:"Agent   "}),a.jsx("p",{className:"mt-1 text-[11px] text-violet-700",children:"       .      ."}),a.jsxs("div",{className:"mt-3 rounded-lg border border-violet-200 bg-white p-3 text-xs text-slate-700",children:[a.jsxs("p",{children:[" : ",a.jsx("strong",{children:Sq[Hn.status]})]}),a.jsxs("p",{className:"mt-1",children:[" : ",a.jsx("strong",{children:wa==="PASS"?"":wa==="NEEDS_CHECK"?" ":""})]}),a.jsxs("p",{className:"mt-1",children:[" : ",a.jsx("strong",{children:Hn.attemptNo||w.contactExecution.retryCount+1})]}),a.jsxs("p",{children:[" :"," ",a.jsx("strong",{children:w.agentExecutionLogs[0]?`${dt(w.agentExecutionLogs[0].at)}  ${m3[w.agentExecutionLogs[0].result]}`:" "})]}),Hn.idempotencyKey?a.jsxs("p",{className:"mt-1",children:["  : ",a.jsx("strong",{children:Hn.idempotencyKey})]}):null,Hn.lastError?a.jsxs("p",{className:"mt-1 text-red-700",children:[" : ",a.jsx("strong",{children:Hn.lastError})]}):null,Hn.nextRetryAt?a.jsxs("p",{className:"mt-1",children:[" : ",a.jsx("strong",{children:dt(Hn.nextRetryAt)})]}):null,a.jsx("p",{className:"mt-1",children:"STEP3/STEP4     ."})]}),a.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-2 md:grid-cols-2",children:[a.jsx("button",{onClick:()=>De(" Agent   ."),className:"rounded-md border border-violet-200 bg-violet-50 px-3 py-2 text-xs font-semibold text-violet-700",children:"Agent   "}),(Hn.status==="FAILED"||Hn.status==="CANCELED")&&wa==="PASS"?a.jsx("button",{onClick:Ri,className:"rounded-md border border-emerald-200 bg-emerald-50 px-3 py-2 text-xs font-semibold text-emerald-700",children:" "}):null,Hn.status==="FAILED"&&wa==="PASS"?a.jsx("button",{onClick:Xi,className:"rounded-md border border-amber-200 bg-amber-50 px-3 py-2 text-xs font-semibold text-amber-700",children:" "}):null,Hn.status==="QUEUED"||Hn.status==="RUNNING"?a.jsx("button",{onClick:()=>Ic({actor:"operator",summary:"  Agent  .",moveToHuman:!1}),className:"rounded-md border border-rose-200 bg-rose-50 px-3 py-2 text-xs font-semibold text-rose-700",children:" "}):null,a.jsx("button",{onClick:()=>fp("HUMAN"),className:"rounded-md border border-slate-300 bg-white px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-50",children:"   "})]})]})]})]}):null,H==="RESPONSE_HANDLING"?a.jsxs("section",{className:"rounded-lg border border-gray-200 bg-white p-4",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:" "}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:"     //   ."}),a.jsx("div",{className:"mt-3",children:a.jsx(x_,{expanded:!0,onToggle:zs,executionStatus:w.contactExecution.status,lastSentAt:w.contactExecution.lastSentAt,lastSmsSentAt:w.lastSmsSentAt,assigneeName:w.header.assigneeName,reservation:w.reservation,showReservationSync:Kh,autoFilledState:ua,onOpenReservationDetail:()=>Ms(!0),selectedOutcomeCode:hn,onSelectOutcomeCode:Md,reasonTags:na,onToggleReasonTag:s0,rejectReasonDraft:la,onRejectReasonDraftChange:mp,noResponsePlanDraft:Ga,onNoResponsePlanDraftChange:a0,outcomeNote:yt,onOutcomeNoteChange:_l,isSaving:Co,submitError:cp,validationError:Ha,onClearError:To,onReset:ef,onConfirm:$d,hasUnsavedChanges:da,lastSavedAt:ai,onOpenHandoffMemo:()=>_i(!0),mode:s})})]}):null,H==="FOLLOW_UP"?a.jsxs("section",{className:"space-y-3 rounded-lg border border-gray-200 bg-white p-4",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:l?"/":" "}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:l?"   ,   ,    .":"  ///     ."}),a.jsx(B_e,{draft:st,reservationInfo:w.reservationInfo,reservation:w.reservation,showStage2Decision:s==="stage1",onChange:it,onSave:Ju}),a.jsx(K_e,{mode:s,execution:w.contactExecution,strategy:Hs,preTriageReady:hp,strategyDecided:!!w.preTriageResult?.strategy,hasVulnerableGuardrail:!!w.header.riskGuardrails?.length,linkageStatus:w.linkageStatus,onOpenSmsModal:()=>Ji("CONTACT_EXECUTION"),onOpenOutcomeTriage:()=>Ji("RESPONSE_HANDLING"),onOpenHandoffMemo:()=>_i(!0),onOpenStrategyOverride:()=>an(!0)}),a.jsx(H7,{expanded:zx||!!w.contactExecution.handoffMemo,onToggle:()=>_i(k=>!k),memoText:op,onMemoChange:Bh,onSave:()=>{We(`  : ${op.slice(0,80)}...`),De.success("  ."),_i(!1)},mode:s}),a.jsx(v_,{level:w.interventionLevel,statusLabel:w.header.statusLabel,guides:Ec,onChangeLevel:Xu,onHold:()=>wc(""),onExclude:()=>wc(" "),mode:s})]}):null,a.jsxs("div",{className:"sticky bottom-0 z-10 flex flex-wrap items-center justify-end gap-2 rounded-lg border border-slate-200 bg-white/95 p-3 backdrop-blur",children:[a.jsx("button",{onClick:zs,className:"rounded-md border border-gray-200 px-3 py-1.5 text-xs font-semibold text-gray-700",children:""}),a.jsx("button",{onClick:()=>of(-1),disabled:ja<=0,className:"rounded-md border border-gray-200 px-3 py-1.5 text-xs font-semibold text-gray-700 disabled:opacity-40",children:""}),a.jsx("button",{onClick:()=>of(1),disabled:ja<0||ja>=Rr.length-1,className:"rounded-md border border-gray-200 px-3 py-1.5 text-xs font-semibold text-gray-700 disabled:opacity-40",children:""}),a.jsx("button",{onClick:lf,className:"rounded-md bg-[#15386a] px-3 py-1.5 text-xs font-semibold text-white",children:" "})]})]})})}),a.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between border-b border-gray-100 pb-2",children:[a.jsxs("h3",{className:"text-sm font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(xa,{size:15,className:"text-slate-500"}),"    "]}),a.jsx("span",{className:"rounded-full border border-emerald-200 bg-emerald-50 px-2 py-0.5 text-[11px] font-semibold text-emerald-700",children:"  "})]}),a.jsx("div",{className:"mt-3 overflow-x-auto",children:a.jsxs("table",{className:"min-w-full border-collapse text-xs",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-50 text-gray-600",children:[a.jsx("th",{className:"border border-gray-200 px-3 py-2 text-left font-semibold",children:""}),a.jsx("th",{className:"border border-gray-200 px-3 py-2 text-left font-semibold",children:""}),a.jsx("th",{className:"border border-gray-200 px-3 py-2 text-left font-semibold",children:""}),a.jsx("th",{className:"border border-gray-200 px-3 py-2 text-left font-semibold",children:""})]})}),a.jsx("tbody",{children:X.map(k=>{const[B,...Y]=k.message.split(":"),de=Y.join(":").trim();return a.jsxs("tr",{className:"odd:bg-white even:bg-gray-50/60",children:[a.jsx("td",{className:"border border-gray-200 px-3 py-2 text-gray-600",children:k.at}),a.jsx("td",{className:"border border-gray-200 px-3 py-2 text-gray-700",children:k.actor}),a.jsx("td",{className:"border border-gray-200 px-3 py-2 font-semibold text-slate-800",children:B.trim()}),a.jsx("td",{className:"border border-gray-200 px-3 py-2 text-gray-600",children:de||"-"})]},k.id)})})]})})]}),a.jsx(lCe,{draft:me,onClose:()=>xe(null),onChangeReason:k=>xe(B=>B&&{...B,reason:k}),onConfirm:pp}),a.jsx(cCe,{draft:et,loading:pt,onClose:()=>{pt||Fe(null)},onChangeResult:k=>Fe(B=>B&&(B.mode==="CALL"?{...B,result:k}:{...B,result:k})),onChangeNote:k=>Fe(B=>B&&{...B,note:k}),onConfirm:eb}),a.jsx(z_e,{open:xl,reservation:w.reservation,onClose:()=>Ms(!1)}),It&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/35 p-4",children:a.jsxs("div",{className:"w-full max-w-md rounded-xl border border-gray-200 bg-white p-5 shadow-2xl",children:[a.jsxs("h3",{className:"text-sm font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(nl,{size:15,className:"text-amber-600"}),"   "]}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:x_e}),w.header.riskGuardrails&&w.header.riskGuardrails.length>0&&a.jsxs("div",{className:"mt-3 rounded-lg border border-amber-200 bg-amber-50 p-3",children:[a.jsxs("p",{className:"text-[11px] font-semibold text-amber-800 flex items-center gap-1",children:[a.jsx(fs,{size:12}),"   "]}),a.jsx("ul",{className:"mt-1 space-y-0.5",children:w.header.riskGuardrails.map(k=>a.jsxs("li",{className:"text-[11px] text-amber-700",children:[" ",k]},k))}),qt==="AI_FIRST"?a.jsx("p",{className:"mt-2 text-[10px] font-semibold text-amber-900",children:"          ."}):null]}),a.jsxs("div",{className:"mt-3",children:[a.jsx("label",{className:"text-[11px] font-semibold text-gray-600",children:"  "}),a.jsx("div",{className:"mt-1 grid grid-cols-2 gap-2",children:["HUMAN_FIRST","AI_FIRST"].map(k=>a.jsx("button",{onClick:()=>Tn(k),className:he("rounded-lg border-2 px-3 py-2 text-xs font-semibold transition-colors",qt===k?F7[k].replace("bg-","border-").split(" ")[0]+" "+F7[k]:"border-gray-200 bg-gray-50 text-gray-500"),children:gu[k]},k))})]}),a.jsxs("div",{className:"mt-3",children:[a.jsx("label",{className:"text-[11px] font-semibold text-gray-600",children:"  ()"}),a.jsx("textarea",{value:Ut,onChange:k=>Ht(k.target.value),className:"mt-1 h-20 w-full rounded-lg border border-gray-200 px-2 py-1.5 text-xs outline-none focus:border-blue-400",placeholder:"    (  )"})]}),a.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[a.jsx("button",{onClick:()=>an(!1),className:"rounded-md border border-gray-200 px-3 py-1.5 text-xs font-semibold text-gray-700",children:""}),a.jsx("button",{onClick:r0,disabled:!Ut.trim(),className:"rounded-md bg-[#163b6f] px-3 py-1.5 text-xs font-semibold text-white disabled:bg-gray-300",children:"  "})]})]})})]})}function F_e({strategy:e,strategyBadge:t,contactExecutor:n,executionStatus:r,lastSentAt:s,lastOutcome:i,retryCount:o,linkageStatus:l,memoCount:c,lastContactAt:u,timelineCount:m,preTriage:p,riskGuardrails:g,onOpenStrategyOverride:x,mode:y="stage1",stage2OpsView:v=!1}){const[N,S]=h.useState(null),j=y==="stage3",C=j&&v,_={NOT_STARTED:{label:"",tone:"text-gray-600"},SENT:{label:"",tone:"text-blue-700"},WAITING_RESPONSE:{label:"",tone:"text-amber-700"},RETRY_NEEDED:{label:"",tone:"text-orange-700"},HANDOFF_TO_HUMAN:{label:"",tone:"text-red-700"},PAUSED:{label:"",tone:"text-gray-600"},STOPPED:{label:"",tone:"text-red-700"},DONE:{label:"",tone:"text-emerald-700"}},A={NOT_CREATED:"",BOOKING_IN_PROGRESS:"",BOOKING_DONE:"",REFERRAL_CREATED:""},T=e==="HUMAN_FIRST"?" ":" ",R=t==="MANUAL_OVERRIDE"?"   ":"   ",M=[...(p?.triggers??[]).slice(0,4).map(U7),...(g??[]).slice(0,2)];e==="HUMAN_FIRST"&&M.length===0&&M.push("      .");const P=C?[{title:" ",value:l==="BOOKING_DONE"||l==="REFERRAL_CREATED"?"75%":"50%",sub:`  ${A[l]}   ${m}`,helperTitle:" ",helper:[` : ${dt(u)}`,`/ : ${A[l]}`,"  //    ."],tone:"border-blue-200 bg-blue-50 text-blue-700",icon:nl},{title:"/ ",value:l==="BOOKING_DONE"||l==="REFERRAL_CREATED"?"0":"1",sub:" /  ",helperTitle:" ",helper:[` : ${A[l]}`,"  Step2    .",` : ${o}`],tone:l==="BOOKING_DONE"||l==="REFERRAL_CREATED"?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-amber-200 bg-amber-50 text-amber-700",icon:ea},{title:"  ",value:o>=3?"":o>=1?"":"",sub:` ${o}  ${k7(i)}`,helperTitle:" ",helper:[` : ${dt(s)}`,`  : ${_[r].label}`,"   /   ."],tone:o>=3?"border-red-200 bg-red-50 text-red-700":"border-slate-200 bg-slate-50 text-slate-700",icon:mg},{title:"  ",value:l==="BOOKING_DONE"?" ":"",sub:`${dt(u)}   ${c}`,helperTitle:" ",helper:["  : // ",` : ${m}`,"   /   ."],tone:l==="BOOKING_DONE"?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-gray-200 bg-gray-50 text-gray-700",icon:xa}]:j?[{title:" ",value:o>=3?"HIGH":o>=1?"MID":"LOW",sub:` ${k7(i)}   ${m}`,helperTitle:" ",helper:[` : ${dt(u)}`,` : ${o}`,"        ."],tone:o>=3?"border-red-200 bg-red-50 text-red-700":"border-amber-200 bg-amber-50 text-amber-700",icon:nl},{title:" ",value:`${(g?.length??0)+(p?.triggers.length??0)}`,sub:"/ ",helperTitle:" ",helper:[...g?.slice(0,2)??[],...(p?.triggers??[]).slice(0,2).map(U7)].slice(0,3),tone:"border-slate-200 bg-slate-50 text-slate-700",icon:ea},{title:" ",value:_[r].label,sub:l==="NOT_CREATED"?"  ":` ${A[l]}`,helperTitle:" ",helper:[`/ : ${A[l]}`,`  : ${_[r].label}`,l==="NOT_CREATED"?"    Workboard  .":"  ."],tone:l==="NOT_CREATED"?"border-red-200 bg-red-50 text-red-700":"border-emerald-200 bg-emerald-50 text-emerald-700",icon:mg},{title:"/",value:` ${c}`,sub:`${dt(u)}   ${m}`,helperTitle:" ",helper:[` : ${dt(u)}`,` : ${m}`,"     ."],tone:"border-gray-200 bg-gray-50 text-gray-700",icon:xa}]:[{title:" ",value:T,sub:`${R}  ${ho[n]}`,helperTitle:" ",helper:M.length>0?[...M.slice(0,2),`  : ${ho[n]}`]:["       .",`  : ${ho[n]}`,"       ."],tone:e==="HUMAN_FIRST"?"border-red-200 bg-red-50 text-red-700":"border-blue-200 bg-blue-50 text-blue-700",icon:nl},{title:" ",value:_[r].label,sub:i?` : ${vi[i].label}`:` ${o}`,helperTitle:" ",helper:[` /: ${dt(s)}`,`  : ${o}`,s?"    ":"     "],tone:`border-slate-200 bg-slate-50 ${_[r].tone}`,icon:mg},{title:"/",value:A[l],sub:s?` : ${dt(s)}`:" ",helperTitle:" ",helper:[l==="NOT_CREATED"?"  .":` : ${A[l]}`,"       .",l==="NOT_CREATED"?"     ":"    "],tone:"border-emerald-200 bg-emerald-50 text-emerald-700",icon:Si},{title:" ",value:` ${c}`,sub:`${dt(u)}   ${m}`,helperTitle:" ",helper:[` : ${dt(u)}`,` : ${m}`,m===0?"    ":"    "],tone:"border-gray-200 bg-gray-50 text-gray-700",icon:xa}];return a.jsx("section",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-3",children:P.map(($,w)=>a.jsxs("article",{onMouseEnter:()=>S(w),onMouseLeave:()=>S(U=>U===w?null:U),onFocus:()=>S(w),onBlur:()=>S(U=>U===w?null:U),className:he("relative rounded-xl border p-3 shadow-sm transition-all duration-200 hover:-translate-y-0.5 hover:shadow-md",$.tone),children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx($.icon,{size:14}),a.jsx("p",{className:"text-[11px] font-semibold opacity-80",children:$.title})]}),w===0&&!j?a.jsx("button",{type:"button",onClick:x,className:"rounded-md border border-current/40 bg-white/70 px-2 py-0.5 text-[10px] font-semibold",children:" "}):null]}),a.jsx("p",{className:"mt-1 text-lg font-bold",children:$.value}),a.jsx("p",{className:"mt-0.5 text-[10px] opacity-70",children:$.sub}),a.jsxs("div",{className:he("pointer-events-none absolute inset-x-2 top-[calc(100%+8px)] z-20 rounded-lg border border-slate-200 bg-white p-3 text-slate-700 shadow-lg transition-all duration-150",N===w?"translate-y-0 opacity-100":"-translate-y-1 opacity-0"),children:[a.jsx("p",{className:"text-[11px] font-semibold text-slate-900",children:$.helperTitle}),a.jsx("div",{className:"mt-1 space-y-0.5 text-[11px] text-slate-600",children:$.helper.map(U=>a.jsxs("p",{children:["- ",U]},`${$.title}-${U}`))})]})]},$.title))})}function G7({mode:e="stage1",stage2OpsView:t=!1,contactExecutor:n,executionStatus:r,strategy:s,lastSentAt:i,sensitivityFlags:o,latestAgentLog:l,selectedRecommendation:c,agentJob:u,gateStatus:m,onSwitchExecutor:p,onOpen:g,onRetryNow:x,onScheduleRetry:y}){const v=e==="stage2",N=e==="stage3",S=N&&t;N&&stage3Type;const j={NOT_STARTED:"",SENT:"",WAITING_RESPONSE:"",RETRY_NEEDED:"",HANDOFF_TO_HUMAN:"",PAUSED:"",STOPPED:"",DONE:""};return a.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-sm font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(vo,{size:15,className:"text-[#15386a]"}),"/  (",S?"/":N?"/":v?"2":"1",")"]}),a.jsx("span",{className:he("rounded-full border px-2 py-0.5 text-[10px] font-semibold",RO[n]),children:ho[n]})]}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:n==="HUMAN"?N?S?" /     .":"        .":v?" /     .":"/    .":N?S?"Agent   /  .     .":"Agent   /  .   /  .":v?"Agent   /  .    .":"Agent   /  .    ."}),s==="AI_FIRST"?a.jsx("p",{className:"mt-1 text-[11px] text-violet-700",children:"    : Agent        "}):null,a.jsx("div",{className:"mt-3 grid grid-cols-2 gap-2",children:["HUMAN","AGENT_SEND_ONLY"].map(C=>a.jsx("button",{onClick:()=>p(C),className:he("rounded-md border px-2.5 py-1.5 text-[11px] font-semibold transition-colors",n===C?RO[C]:"border-gray-200 bg-gray-50 text-gray-600 hover:bg-gray-100"),children:ho[C]},C))}),a.jsx("button",{type:"button",onClick:g,className:he("mt-3 h-11 w-full rounded-lg text-sm font-semibold text-white transition-all duration-200 hover:-translate-y-0.5 hover:shadow-md",n==="HUMAN"?"bg-[#15386a] hover:bg-[#102b4e]":"bg-violet-700 hover:bg-violet-800"),children:n==="HUMAN"?N?S?"/   ":"   ":v?" /  ":"/  ":"Agent   "}),a.jsxs("div",{className:"mt-3 rounded-lg border border-slate-200 bg-slate-50 p-3 text-[11px] text-slate-700",children:[a.jsxs("p",{children:[" : ",a.jsx("strong",{children:j[r]})]}),a.jsxs("p",{className:"mt-0.5",children:[N||v?" ":" ",": ",a.jsx("strong",{children:s==="HUMAN_FIRST"?" ":" "})]}),a.jsxs("p",{className:"mt-0.5",children:[" : ",a.jsx("strong",{children:dt(i)})]}),a.jsxs("p",{className:"mt-0.5",children:[" : ",a.jsx("strong",{children:o.length>0?o.join(", "):"  "})]}),n==="AGENT_SEND_ONLY"?a.jsxs(a.Fragment,{children:[a.jsxs("p",{className:"mt-0.5",children:["Agent  : ",a.jsx("strong",{children:Sq[u.status]})]}),a.jsxs("p",{className:"mt-0.5",children:[" : ",a.jsx("strong",{children:m==="PASS"?"":m==="NEEDS_CHECK"?" ":""})]}),a.jsxs("p",{className:"mt-0.5",children:[" Agent :"," ",a.jsx("strong",{children:l?`${dt(l.at)}  ${m3[l.result]}`:" "})]}),u.status==="FAILED"?a.jsxs("p",{className:"mt-0.5 text-red-700",children:[" : ",a.jsx("strong",{children:u.lastError??" "})]}):null,u.nextRetryAt?a.jsxs("p",{className:"mt-0.5",children:[" : ",a.jsx("strong",{children:dt(u.nextRetryAt)})]}):null,(u.status==="FAILED"||u.status==="CANCELED")&&m==="PASS"?a.jsxs("div",{className:"mt-2 flex flex-wrap gap-1.5",children:[a.jsx("button",{type:"button",onClick:x,className:"rounded-md border border-violet-200 bg-violet-50 px-2 py-1 text-[10px] font-semibold text-violet-700 hover:bg-violet-100",children:" "}),a.jsx("button",{type:"button",onClick:y,className:"rounded-md border border-slate-200 bg-white px-2 py-1 text-[10px] font-semibold text-slate-700 hover:bg-slate-100",children:" "})]}):null]}):c?a.jsxs("p",{className:"mt-0.5",children:[" : ",a.jsx("strong",{children:c.title})]}):null]})]})}function U_e({loading:e,recommendations:t,selectedId:n,editedScript:r,onSelect:s,onEditScript:i}){return a.jsxs("section",{className:"rounded-xl border border-slate-200 bg-slate-50/70 p-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h4",{className:"text-xs font-bold text-slate-900",children:"RAG / "}),a.jsx("span",{className:"text-[10px] text-slate-500",children:" ,    ."})]}),e?a.jsx("div",{className:"mt-2 rounded-md border border-slate-200 bg-white px-3 py-2 text-[11px] text-slate-500",children:"   ..."}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"mt-2 grid grid-cols-1 gap-2",children:t.map(o=>a.jsxs("button",{onClick:()=>s(o),className:he("rounded-lg border px-3 py-2 text-left transition-colors",n===o.id?"border-blue-300 bg-blue-50":"border-slate-200 bg-white hover:bg-slate-50"),children:[a.jsx("p",{className:"text-xs font-semibold text-slate-900",children:o.title}),a.jsx("p",{className:"mt-0.5 text-[11px] text-slate-600",children:o.useCase}),a.jsx("div",{className:"mt-1 space-y-0.5 text-[10px] text-slate-500",children:o.evidence.slice(0,3).map(l=>a.jsxs("p",{children:["- ",l]},`${o.id}-${l}`))})]},o.id))}),a.jsxs("div",{className:"mt-2",children:[a.jsx("label",{className:"text-[11px] font-semibold text-slate-600",children:"  "}),a.jsx("textarea",{value:r,onChange:o=>i(o.target.value),className:"mt-1 h-20 w-full rounded-md border border-slate-200 bg-white px-2 py-1.5 text-xs outline-none focus:border-blue-400",placeholder:"    "})]})]})]})}function B_e({draft:e,reservationInfo:t,reservation:n,showStage2Decision:r=!1,onChange:s,onSave:i}){const o=gm[e.route],l=e.route!=="HOLD_TRACKING";return a.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsxs("h3",{className:"text-sm font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(es,{size:15,className:"text-blue-600"}),"STEP4  "]}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:"/    ."}),a.jsx("div",{className:"mt-3 grid grid-cols-1 gap-2 md:grid-cols-2",children:Object.keys(gm).map(c=>{const u=gm[c];return a.jsxs("button",{onClick:()=>s({...e,route:c,place:u.defaultPlace}),className:he("rounded-lg border px-3 py-2 text-left transition-colors",e.route===c?"border-blue-300 bg-blue-50":"border-gray-200 bg-gray-50 hover:bg-gray-100"),children:[a.jsx("p",{className:"text-xs font-semibold text-slate-900",children:u.label}),a.jsx("p",{className:"mt-0.5 text-[11px] text-slate-600",children:u.description})]},c)})}),r?a.jsxs("div",{className:"mt-3 rounded-md border border-slate-200 bg-slate-50 p-3",children:[a.jsx("p",{className:"text-[11px] font-semibold text-slate-700",children:"   (Stage1)"}),a.jsx("p",{className:"mt-0.5 text-[10px] text-slate-500",children:"    Stage2    ."}),a.jsxs("div",{className:"mt-2 grid grid-cols-1 gap-2 md:grid-cols-2",children:[a.jsxs("button",{type:"button",onClick:()=>s({...e,stage2Decision:"KEEP_STAGE1"}),className:he("rounded-md border px-3 py-2 text-left text-xs transition-colors",e.stage2Decision==="KEEP_STAGE1"?"border-slate-400 bg-white text-slate-900":"border-slate-200 bg-slate-100 text-slate-700 hover:bg-slate-200"),children:[a.jsx("p",{className:"font-semibold",children:"Stage1 "}),a.jsx("p",{className:"mt-0.5 text-[10px] text-slate-500",children:" / Stage1  "})]}),a.jsxs("button",{type:"button",onClick:()=>s({...e,stage2Decision:"MOVE_STAGE2"}),className:he("rounded-md border px-3 py-2 text-left text-xs transition-colors",e.stage2Decision==="MOVE_STAGE2"?"border-blue-300 bg-blue-50 text-blue-900":"border-blue-200 bg-white text-blue-700 hover:bg-blue-50"),children:[a.jsx("p",{className:"font-semibold",children:"Stage2 "}),a.jsx("p",{className:"mt-0.5 text-[10px] text-blue-600",children:"2   "})]})]})]}):null,a.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-2 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[11px] font-semibold text-gray-600",children:""}),a.jsx("input",{type:"datetime-local",value:Vc(e.scheduledAt),onChange:c=>s({...e,scheduledAt:Wc(c.target.value)||e.scheduledAt}),disabled:!l,className:"mt-1 w-full rounded-md border border-gray-200 px-2 py-1.5 text-xs outline-none focus:border-blue-400 disabled:bg-gray-100"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[11px] font-semibold text-gray-600",children:""}),a.jsx("input",{value:e.place,onChange:c=>s({...e,place:c.target.value}),disabled:!l,className:"mt-1 w-full rounded-md border border-gray-200 px-2 py-1.5 text-xs outline-none focus:border-blue-400 disabled:bg-gray-100"})]})]}),a.jsxs("div",{className:"mt-2 grid grid-cols-1 gap-2 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[11px] font-semibold text-gray-600",children:"/ "}),a.jsx("input",{value:e.contactGuide,onChange:c=>s({...e,contactGuide:c.target.value}),disabled:!l,className:"mt-1 w-full rounded-md border border-gray-200 px-2 py-1.5 text-xs outline-none focus:border-blue-400 disabled:bg-gray-100"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[11px] font-semibold text-gray-600",children:""}),a.jsx("input",{value:e.note,onChange:c=>s({...e,note:c.target.value}),className:"mt-1 w-full rounded-md border border-gray-200 px-2 py-1.5 text-xs outline-none focus:border-blue-400"})]})]}),a.jsxs("div",{className:"mt-3 rounded-md border border-slate-200 bg-slate-50 px-3 py-2 text-[11px] text-slate-700",children:[a.jsxs("p",{children:[" : ",a.jsx("strong",{children:o.label})]}),a.jsx("p",{className:"mt-0.5",children:"       ."}),r?a.jsxs("p",{className:"mt-0.5",children:[" : ",a.jsx("strong",{children:e.stage2Decision==="MOVE_STAGE2"?"Stage2 ":"Stage1 "})]}):null,a.jsxs("p",{className:"mt-0.5",children:[" /: ",a.jsxs("strong",{children:[n?.source==="SMS"?"SMS":n?.source??""," / ",n?xx[n.status]:""]})]}),a.jsxs("p",{className:"mt-0.5",children:["  : ",a.jsx("strong",{children:t?$y(t):""})]})]}),a.jsx("div",{className:"mt-3 flex justify-end",children:a.jsx("button",{onClick:i,className:"rounded-md bg-[#163b6f] px-3 py-1.5 text-xs font-semibold text-white",children:"  "})})]})}function G_e({logs:e}){return a.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"Agent  "}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:"   ( )"}),a.jsx("div",{className:"mt-3 space-y-2",children:e.length===0?a.jsx("p",{className:"rounded-md border border-gray-200 bg-gray-50 px-3 py-2 text-[11px] text-gray-500",children:"           ."}):e.slice(0,4).map(t=>a.jsxs("div",{className:"rounded-md border border-violet-200 bg-violet-50 px-3 py-2",children:[a.jsx("p",{className:"text-[11px] font-semibold text-violet-800",children:m3[t.result]}),a.jsx("p",{className:"mt-0.5 text-[11px] text-violet-700",children:t.summary}),a.jsxs("p",{className:"mt-0.5 text-[10px] text-violet-600",children:[dt(t.at),t.recommendationTitle?`   ${t.recommendationTitle}`:""]})]},t.id))})]})}function H_e({flowCards:e,onAction:t,mode:n="stage1",stage2OpsView:r=!1,opsLoopState:s,storedOpsStatus:i}){const o=n==="stage2"?"Stage2  ":n==="stage3"?r?"Stage2   ":"Stage3  ":"Stage1  ",l=e.filter(u=>u.status==="COMPLETED").length,c=e.filter(u=>u.status==="READY").length;return a.jsxs("section",{className:"relative z-10 rounded-2xl border border-gray-200 bg-gradient-to-b from-white to-slate-50 p-5 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-sm font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(mg,{size:15,className:"text-blue-600"}),o]}),i?a.jsxs("p",{className:"mt-1 text-[10px] text-slate-500",children:[" : ",i,"   :  ",s?.doneCount??l," /  ",s?.readyCount??c]}):null,s?.mismatch?a.jsxs("p",{className:"mt-1 inline-flex rounded border border-amber-300 bg-amber-50 px-2 py-0.5 text-[10px] font-semibold text-amber-800",children:[" : ",s.mismatchReasons[0]??"    ."]}):null]}),a.jsxs("span",{className:"text-[11px] text-gray-500",children:[l,"/",e.length,"     ",c,""]})]}),a.jsx("div",{className:"mt-4 overflow-x-auto overflow-y-visible pt-1 pb-3",children:a.jsx("ol",{className:"relative z-10 mx-auto flex w-max items-stretch justify-center gap-3 px-2",children:e.map((u,m)=>{const p=T_e[u.status],g=p.icon,x=qp(e,u.id),y=!!x;return a.jsxs(W.Fragment,{children:[a.jsx("li",{className:"shrink-0 py-1",children:a.jsxs("button",{type:"button",onClick:()=>{y||t(u.action)},"aria-disabled":y,title:y?x??void 0:void 0,className:he("group relative z-0 w-[230px] transform-gpu rounded-2xl border p-4 text-left transition-all duration-200 ease-out focus-visible:z-20 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-300",p.cardTone,!y&&"hover:z-20 hover:-translate-y-0.5 hover:scale-[1.02]",y&&"cursor-not-allowed opacity-75 saturate-75",!y&&u.isCurrent&&"ring-2 ring-offset-1 ring-blue-300 motion-safe:animate-pulse"),children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"text-[10px] font-semibold tracking-wide text-slate-500",children:["STEP ",m+1]}),a.jsx("span",{className:he("rounded-full px-2 py-0.5 text-[10px] font-semibold",p.chipTone),children:p.label})]}),a.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[a.jsx(g,{size:14,className:"shrink-0"}),a.jsx("p",{className:"text-sm font-bold tracking-tight",children:u.title})]}),a.jsx("p",{className:"mt-1 text-[11px] text-slate-600",children:u.description}),a.jsxs("div",{className:he("mt-2 rounded-lg border px-2.5 py-2 text-[11px] leading-relaxed",p.reasonTone),children:[a.jsx("p",{className:"font-semibold",children:" "}),a.jsx("p",{className:"mt-0.5 text-[10px]",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:u.reason})]}),y?a.jsxs("div",{className:"mt-2 max-h-0 overflow-hidden rounded-lg border border-amber-300 bg-amber-50 px-2.5 py-0 text-[11px] leading-relaxed text-amber-900 opacity-0 transition-all duration-200 group-hover:max-h-24 group-hover:py-2 group-hover:opacity-100 group-focus-visible:max-h-24 group-focus-visible:py-2 group-focus-visible:opacity-100",children:[a.jsx("p",{className:"font-semibold",children:"  "}),a.jsx("p",{className:"mt-0.5 text-[10px]",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:x})]}):a.jsxs("div",{className:"mt-2 max-h-0 overflow-hidden rounded-lg border border-dashed border-slate-300 bg-white/70 px-2.5 py-0 text-[11px] text-slate-700 opacity-0 transition-all duration-200 group-hover:max-h-24 group-hover:py-2 group-hover:opacity-100 group-focus-visible:max-h-24 group-focus-visible:py-2 group-focus-visible:opacity-100",children:[a.jsx("p",{className:"font-semibold text-slate-800",children:" "}),a.jsx("p",{className:"mt-0.5",children:u.nextActionHint})]}),a.jsx("span",{className:"mt-2 inline-flex rounded-md border border-current/40 px-2.5 py-1 text-[11px] font-semibold",children:y?"  ":" "})]})}),m<e.length-1?a.jsx("li",{className:"flex shrink-0 items-center text-slate-300","aria-hidden":"true",children:a.jsx(ji,{size:18})}):null]},u.id)})})}),a.jsx("p",{className:"mt-3 text-[11px] text-gray-500",children:n==="stage3"?r?"      /   .":"         .    .":"       Step1~4    ."})]})}function K_e({mode:e="stage1",execution:t,strategy:n,preTriageReady:r,strategyDecided:s,hasVulnerableGuardrail:i,linkageStatus:o,onOpenSmsModal:l,onOpenOutcomeTriage:c,onOpenHandoffMemo:u,onOpenStrategyOverride:m}){const p=e==="stage2",g=e==="stage3",x=[],y=[];return r||x.push({label:g?"    ":p?"2    ":"    ",action:m,tone:"bg-red-600 text-white hover:bg-red-700"}),(!s||i)&&x.push({label:g?" / ":p?"/ ":"  / ",action:m,tone:"bg-amber-600 text-white hover:bg-amber-700"}),(t.status==="NOT_STARTED"||t.status==="RETRY_NEEDED")&&x.push({label:g?"  /":p?`   (${n==="HUMAN_FIRST"?" ":" "})`:`1   (${n==="HUMAN_FIRST"?" ":" "})`,action:l,tone:"bg-[#15386a] text-white hover:bg-[#102b4e]"}),(t.status==="SENT"||t.status==="WAITING_RESPONSE")&&x.push({label:g?" / ":p?"/  ":"  ",action:c,tone:"bg-blue-600 text-white hover:bg-blue-700"}),(t.status==="HANDOFF_TO_HUMAN"||t.status==="PAUSED")&&x.push({label:g?"  / ":p?" / ":"   /",action:u,tone:"bg-red-600 text-white hover:bg-red-700"}),t.status==="STOPPED"&&y.push({label:g?" (/) ":p?"/  ":"   ",action:u,tone:"border-red-200 bg-red-50 text-red-700 hover:bg-red-100"}),t.status==="RETRY_NEEDED"&&y.push({label:g?" /  ":p?"   ":"    ",action:l,tone:"border-orange-200 bg-orange-50 text-orange-700 hover:bg-orange-100"}),(o==="BOOKING_IN_PROGRESS"||o==="REFERRAL_CREATED")&&y.push({label:g?"/   ":p?"/   ":"/   ",action:u,tone:"border-slate-200 bg-white text-slate-700 hover:bg-slate-50"}),a.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsxs("h3",{className:"text-sm font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(mg,{size:15,className:"text-orange-600"}),"  "]}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:"     "}),x.length>0&&a.jsxs("div",{className:"mt-3 space-y-2",children:[a.jsx("p",{className:"text-[11px] font-semibold text-red-700",children:"P1   "}),x.map(v=>a.jsx("button",{onClick:v.action,className:he("w-full rounded-lg border px-3 py-2.5 text-xs font-semibold transition-colors",v.tone),children:v.label},v.label))]}),y.length>0&&a.jsxs("div",{className:"mt-3 space-y-2",children:[a.jsx("p",{className:"text-[11px] font-semibold text-blue-700",children:"P2   "}),y.map(v=>a.jsx("button",{onClick:v.action,className:he("w-full rounded-lg border px-3 py-2 text-xs font-semibold transition-colors",v.tone),children:v.label},v.label))]}),t.lastOutcomeCode&&a.jsx("div",{className:"mt-3 rounded-md border border-gray-100 bg-gray-50 px-3 py-2",children:a.jsxs("p",{className:"text-[11px] text-gray-600",children:[" : ",a.jsx("strong",{children:vi[t.lastOutcomeCode].label})]})})]})}function x_({expanded:e,onToggle:t,executionStatus:n,lastSentAt:r,lastSmsSentAt:s,assigneeName:i,reservation:o,showReservationSync:l,autoFilledState:c,onOpenReservationDetail:u,selectedOutcomeCode:m,onSelectOutcomeCode:p,reasonTags:g,onToggleReasonTag:x,rejectReasonDraft:y,onRejectReasonDraftChange:v,noResponsePlanDraft:N,onNoResponsePlanDraftChange:S,outcomeNote:j,onOutcomeNoteChange:C,isSaving:_,submitError:A,validationError:T,onClearError:R,onReset:M,onConfirm:P,hasUnsavedChanges:$,lastSavedAt:w,onOpenHandoffMemo:U,mode:X="stage1"}){const I=X==="stage3",G=m?vi[m].label:Aq[n];return a.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-sm font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(Nm,{size:15,className:"text-blue-600"}),I?"   ()":"  "]}),a.jsx("button",{onClick:t,className:"rounded-md border border-gray-200 px-2 py-1 text-[11px] font-semibold text-gray-600 hover:bg-gray-50",children:e?"":""})]}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:I?"/     .":"     "}),e?a.jsxs("div",{className:"mt-3 space-y-3",children:[a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[a.jsxs("div",{className:"grid grid-cols-1 gap-2 text-[11px] md:grid-cols-3",children:[a.jsxs("p",{className:"text-slate-600",children:[" : ",a.jsx("strong",{className:"text-slate-900",children:G})]}),a.jsxs("p",{className:"text-slate-600",children:[" : ",a.jsx("strong",{className:"text-slate-900",children:dt(r)})]}),a.jsxs("p",{className:"text-slate-600",children:[": ",a.jsx("strong",{className:"text-slate-900",children:i})]})]}),a.jsx("p",{className:"mt-2 text-[11px] text-slate-600",children:"   ,     ."})]}),l&&o?.source==="SMS"&&o.status!=="NONE"?a.jsx("div",{className:"rounded-lg border border-sky-200 bg-sky-50 p-3",children:a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[a.jsxs("div",{className:"space-y-1 text-[11px]",children:[a.jsx("p",{className:"inline-flex items-center rounded-full border border-sky-300 bg-white px-2 py-0.5 font-semibold text-sky-700",children:"  "}),a.jsxs("p",{className:"text-slate-700",children:["  : ",a.jsx("strong",{children:dt(s)})]}),a.jsxs("p",{className:"text-slate-700",children:[" : ",a.jsx("strong",{children:xx[o.status]})]}),a.jsxs("p",{className:"text-slate-700",children:["  : ",a.jsx("strong",{children:dt(o.updatedAt??o.createdAt)})]})]}),u?a.jsx("button",{type:"button",onClick:u,className:"rounded-md border border-sky-300 bg-white px-2.5 py-1 text-[11px] font-semibold text-sky-700 hover:bg-sky-100",children:"  "}):null]})}):null,!(l&&o?.source==="SMS"&&o.status!=="NONE")&&s?a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3 text-[11px] text-slate-700",children:[a.jsx("p",{className:"font-semibold text-slate-800",children:"   "}),a.jsxs("p",{className:"mt-1",children:["   ",dt(s),"       ."]}),a.jsx("p",{className:"mt-1 text-slate-500",children:"        //  ."})]}):null,c?a.jsxs("div",{className:he("rounded-md border px-3 py-2 text-[11px]",c.manualOverriddenAt?"border-amber-200 bg-amber-50 text-amber-800":"border-emerald-200 bg-emerald-50 text-emerald-800"),children:[a.jsx("p",{className:"font-semibold",children:c.manualOverriddenAt?"    ":" "}),a.jsx("p",{className:"mt-0.5",children:c.summary}),a.jsxs("p",{className:"mt-0.5 text-[10px] opacity-80",children:["  ",dt(c.autoFilledAt),c.manualOverriddenAt?`    ${dt(c.manualOverriddenAt)}`:""]})]}):null,a.jsx("div",{className:"rounded-md border border-indigo-200 bg-indigo-50 px-3 py-2 text-[11px] font-semibold text-indigo-800",children:"     "}),T?a.jsx("div",{className:"rounded-md border border-red-200 bg-red-50 px-3 py-2",children:a.jsx("p",{className:"text-[11px] font-semibold text-red-700",children:T})}):null,A?a.jsx("div",{className:"rounded-md border border-red-200 bg-red-50 px-3 py-2",children:a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("p",{className:"text-[11px] font-semibold text-red-700",children:[" : ",A]}),a.jsx("button",{onClick:R,className:"rounded border border-red-200 px-1.5 py-0.5 text-[10px] font-semibold text-red-700 hover:bg-red-100",children:""})]})}):null,a.jsxs("div",{children:[a.jsx("p",{className:"text-[11px] font-semibold text-gray-600",children:"  ( )"}),a.jsx("div",{className:"mt-2 grid grid-cols-1 gap-2 md:grid-cols-2",children:y_e.map(L=>{const H=vi[L],F=m===L;return a.jsxs("button",{type:"button",onClick:()=>{R(),p(L)},className:he("rounded-lg border-2 px-3 py-2 text-left transition-colors",F?`${H.tone} border-current`:"border-gray-200 bg-gray-50 hover:bg-gray-100"),children:[a.jsx("p",{className:"text-xs font-semibold text-slate-900",children:H.label}),a.jsx("p",{className:"mt-1 text-[10px] text-slate-500",children:L==="CONTINUE_SELF"?"     ":L==="SCHEDULE_LATER"?"    ":L==="REQUEST_GUARDIAN"?"  ":L==="REQUEST_HUMAN"?"  ":L==="NO_RESPONSE"?"   ":"/  "})]},L)})})]}),m==="NO_RESPONSE"?a.jsxs("div",{className:"rounded-lg border border-blue-200 bg-blue-50 p-3",children:[a.jsx("p",{className:"text-[11px] font-semibold text-blue-800",children:"   ()"}),a.jsxs("p",{className:"mt-1 text-[10px] text-blue-700",children:["     +1 .  ",N.channel==="CALL"?"":"","   ."]}),a.jsxs("div",{className:"mt-2 grid grid-cols-1 gap-2 md:grid-cols-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-semibold text-gray-600",children:""}),a.jsx("div",{className:"mt-1 grid grid-cols-2 gap-1",children:Object.keys(B7).map(L=>a.jsx("button",{type:"button",onClick:()=>S({...N,channel:L,strategy:Nq[L]}),className:he("rounded-md border px-2 py-1 text-[10px] font-semibold",N.channel===L?"border-blue-300 bg-blue-100 text-blue-800":"border-gray-200 bg-white text-gray-600"),children:B7[L]},L))})]}),a.jsxs("label",{className:"text-[10px] font-semibold text-gray-600",children:["  ",a.jsx("input",{type:"datetime-local",value:Vc(N.nextContactAt),onChange:L=>{const H=Wc(L.target.value);S({...N,nextContactAt:H||N.nextContactAt})},className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-blue-400"})]}),a.jsxs("label",{className:"text-[10px] font-semibold text-gray-600",children:["",a.jsx("input",{type:"text",value:N.assigneeId,onChange:L=>{S({...N,assigneeId:L.target.value})},className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-blue-400",placeholder:"   ID"})]})]}),a.jsxs("label",{className:"mt-2 inline-flex items-center gap-2 text-[10px] text-blue-800",children:[a.jsx("input",{type:"checkbox",checked:N.applyL3,onChange:L=>S({...N,applyL3:L.target.checked})}),"    L3 ."]})]}):null,m==="REFUSE"?a.jsxs("div",{className:"rounded-lg border border-red-200 bg-red-50 p-3",children:[a.jsx("p",{className:"text-[11px] font-semibold text-red-800",children:"   ()"}),a.jsx("p",{className:"mt-1 text-[10px] text-red-700",children:"       ."}),a.jsxs("div",{className:"mt-2 grid grid-cols-1 gap-2 md:grid-cols-2",children:[a.jsxs("label",{className:"text-[10px] font-semibold text-gray-600",children:[" ",a.jsxs("select",{value:y.code??"",onChange:L=>{const H=L.target.value||null;v({...y,code:H})},className:"mt-1 h-8 w-full rounded-md border border-gray-200 bg-white px-2 text-[11px] outline-none focus:border-red-300",children:[a.jsx("option",{value:"",children:" "}),N_e.map(L=>a.jsx("option",{value:L.code,children:L.label},L.code))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-semibold text-gray-600",children:" "}),a.jsx("div",{className:"mt-1 grid grid-cols-2 gap-1",children:S_e.map(L=>a.jsx("button",{type:"button",onClick:()=>v({...y,level:L.value}),className:he("h-8 rounded-md border px-2 text-[10px] font-semibold",y.level===L.value?"border-red-300 bg-red-100 text-red-700":"border-gray-200 bg-white text-gray-600"),children:L.label},L.value))})]})]}),y.code==="R7_OTHER"?a.jsxs("label",{className:"mt-2 block text-[10px] font-semibold text-gray-600",children:["  ()",a.jsx("textarea",{value:y.detail,onChange:L=>v({...y,detail:L.target.value}),className:"mt-1 h-14 w-full rounded-md border border-gray-200 px-2 py-1 text-[11px] outline-none focus:border-red-300",placeholder:"   "})]}):null]}):null,m==="REQUEST_GUARDIAN"||m==="REQUEST_HUMAN"?a.jsxs("div",{className:"rounded-lg border border-violet-200 bg-violet-50 p-3",children:[a.jsx("p",{className:"text-[11px] font-semibold text-violet-800",children:"   ()"}),a.jsx("p",{className:"mt-1 text-[10px] text-violet-700",children:"      ."}),a.jsx("button",{type:"button",onClick:U,className:"mt-2 rounded-md border border-violet-300 bg-white px-2.5 py-1 text-[11px] font-semibold text-violet-700 hover:bg-violet-100",children:"  "})]}):null,a.jsxs("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-3",children:[a.jsx("p",{className:"text-[11px] font-semibold text-amber-800",children:"   ( )"}),a.jsx("div",{className:"mt-2 flex flex-wrap gap-1.5",children:Object.keys(w1).map(L=>{const H=w1[L],F=g.includes(L);return a.jsx("button",{type:"button",onClick:()=>x(L),className:he("rounded-full border px-2.5 py-1 text-[10px] font-semibold transition-colors",F?H.tone:"border-gray-200 bg-white text-gray-600"),title:H.hint,children:H.label},L)})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[11px] font-semibold text-gray-600",children:" ()"}),a.jsx("textarea",{value:j,onChange:L=>C(L.target.value),className:"mt-1 h-16 w-full rounded-md border border-gray-200 px-2 py-1 text-xs outline-none focus:border-blue-400",placeholder:"   "})]}),a.jsxs("div",{className:"sticky bottom-0 z-10 flex flex-wrap items-center justify-between gap-2 rounded-lg border border-slate-200 bg-white/95 px-3 py-2 backdrop-blur",children:[a.jsxs("div",{className:"flex items-center gap-2 text-[11px]",children:[a.jsx("span",{className:he("rounded-full border px-2 py-0.5 font-semibold",$?"border-amber-200 bg-amber-50 text-amber-700":"border-emerald-200 bg-emerald-50 text-emerald-700"),children:$?" ":" "}),w?a.jsxs("span",{className:"text-gray-500",children:["  ",dt(w)]}):null]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:t,className:"rounded-md border border-gray-200 px-3 py-1.5 text-xs font-semibold text-gray-700",children:""}),a.jsx("button",{onClick:M,className:"rounded-md border border-gray-200 px-3 py-1.5 text-xs font-semibold text-gray-700",children:""}),a.jsx("button",{onClick:P,disabled:_,className:"rounded-md bg-[#163b6f] px-3 py-1.5 text-xs font-semibold text-white disabled:bg-gray-300",children:_?" ...":""})]})]})]}):null]})}function z_e({open:e,reservation:t,onClose:n}){return a.jsx(Au,{open:e,onOpenChange:r=>!r&&n(),children:a.jsxs(_u,{className:"w-[min(720px,94vw)] rounded-xl border border-gray-200 bg-white p-0",children:[a.jsxs("div",{className:"border-b border-gray-100 px-5 py-4",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"  "}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:"    ."})]}),a.jsxs("div",{className:"space-y-3 px-5 py-4 text-xs text-slate-700",children:[a.jsxs("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-2",children:[a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[a.jsx("p",{className:"text-[11px] text-slate-500",children:" "}),a.jsx("p",{className:"mt-0.5 font-semibold text-slate-900",children:"(SMS) "})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[a.jsx("p",{className:"text-[11px] text-slate-500",children:" "}),a.jsx("p",{className:"mt-0.5 font-semibold text-slate-900",children:t?.createdBy==="STAFF"?" ":t?.createdBy==="AGENT"?" / ":"  "})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[a.jsx("p",{className:"text-[11px] text-slate-500",children:" "}),a.jsx("p",{className:"mt-0.5 font-semibold text-slate-900",children:t?.programName??t?.programType??"  "})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[a.jsx("p",{className:"text-[11px] text-slate-500",children:" "}),a.jsx("p",{className:"mt-0.5 font-semibold text-slate-900",children:t?xx[t.status]:"  "})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[a.jsx("p",{className:"text-[11px] text-slate-500",children:" "}),a.jsx("p",{className:"mt-0.5 font-semibold text-slate-900",children:dt(t?.scheduledAt)})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[a.jsx("p",{className:"text-[11px] text-slate-500",children:"/"}),a.jsx("p",{className:"mt-0.5 font-semibold text-slate-900",children:t?.locationName??"  "})]})]}),t?.options&&t.options.length>0?a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white px-3 py-2",children:[a.jsx("p",{className:"text-[11px] font-semibold text-slate-700",children:" "}),a.jsx("div",{className:"mt-1 space-y-1 text-[11px] text-slate-600",children:t.options.map(r=>a.jsxs("p",{children:[r.label,": ",a.jsx("strong",{className:"text-slate-900",children:r.value})]},`${r.key}-${r.value}`))})]}):null,a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-[11px] text-slate-600",children:["  ",t?.reservationId?`#${t.reservationId}`:"","    /  ."]})]}),a.jsx("div",{className:"flex justify-end border-t border-gray-100 px-5 py-3",children:a.jsx("button",{type:"button",onClick:n,className:"rounded-md border border-gray-200 px-3 py-1.5 text-xs font-semibold text-slate-700 hover:bg-gray-50",children:""})})]})})}function H7({expanded:e,onToggle:t,memoText:n,onMemoChange:r,onSave:s,mode:i="stage1"}){const o=i==="stage3";return a.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-sm font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(VX,{size:15,className:"text-blue-600"}),o?" / ":"  "]}),a.jsx("button",{onClick:t,className:"rounded-md border border-gray-200 px-2 py-1 text-[11px] font-semibold text-gray-600 hover:bg-gray-50",children:e?"":""})]}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:o?" /   .":"     "}),e?a.jsxs("div",{className:"mt-3 space-y-2",children:[a.jsx("textarea",{value:n,onChange:l=>r(l.target.value),className:"h-40 w-full rounded-md border border-gray-200 px-3 py-2 text-xs font-mono outline-none focus:border-blue-400",placeholder:`[ ]
 ( ): ...
: ...
 : ...
 : ...
  : ...`}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{onClick:s,disabled:!n.trim(),className:"rounded-md bg-[#163b6f] px-3 py-1.5 text-xs font-semibold text-white disabled:bg-gray-300",children:""})})]}):null]})}function q_e({gates:e,onFix:t,mode:n="stage1"}){const r=n==="stage3",s=new Map(e.map(j=>[j.key,j])),o=["CONSENT_OK","PHONE_VERIFIED","GUARDIAN_OPTIONAL"].map(j=>s.get(j)).filter(j=>!!j),l=s.get("CONSENT_OK"),c=s.get("PHONE_VERIFIED"),u=s.get("GUARDIAN_OPTIONAL"),m=c?.status==="PASS"?"OK":c?.status==="FAIL"&&M7(c.failReason)?"RESTRICTED":"NEEDS_CHECK",p=l?.status==="FAIL"?"RESTRICTED":c?.status==="PASS"?"OK":c?.status==="FAIL"&&M7(c.failReason)?"RESTRICTED":"NEEDS_CHECK",g=u?.status==="PASS"?"OK":u?.status==="FAIL"?"RESTRICTED":"NEEDS_CHECK",x=m==="OK"?vf(m):c?.failReason??vf(m),y=p==="OK"?vf(p):l?.status==="FAIL"?l.failReason??vf(p):c?.failReason??vf(p),v=g==="OK"?vf(g):u?.failReason??vf(g),N=[{key:"CALL",label:"",state:m,detail:x,actionLabel:m==="NEEDS_CHECK"?" ":m==="RESTRICTED"?"  ":void 0,onAction:m==="NEEDS_CHECK"&&c?.fixAction?.action==="VERIFY_PHONE"?()=>t(c):m==="RESTRICTED"?()=>De.error(x):void 0},{key:"SMS",label:"",state:p,detail:y,actionLabel:p==="NEEDS_CHECK"?"  ":p==="RESTRICTED"?"  ":void 0,onAction:p==="NEEDS_CHECK"?()=>De("    ."):p==="RESTRICTED"?()=>De.error(y):void 0},{key:"GUARDIAN",label:"",state:g,detail:v,actionLabel:g==="RESTRICTED"?"  ":g==="NEEDS_CHECK"&&u?.fixAction?u.fixAction.label:void 0,onAction:g==="RESTRICTED"?()=>De.error(v):g==="NEEDS_CHECK"&&u?.fixAction?()=>t(u):void 0}],S=N.some(j=>j.state==="RESTRICTED")?"RESTRICTED":N.some(j=>j.state==="NEEDS_CHECK")?"NEEDS_CHECK":"OK";return a.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-sm font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(W0,{size:15,className:"text-slate-500"}),r?"  ":"  "]}),a.jsx("span",{className:"text-[11px] text-gray-500",children:r?"   Step2 .":"     "})]}),a.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2",children:[o.map(j=>a.jsxs("div",{className:"rounded-lg border border-gray-100 bg-gray-50 p-3",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("p",{className:"text-xs font-semibold text-slate-800",children:j.label}),a.jsx("span",{className:he("rounded px-2 py-0.5 text-[10px] font-semibold",c_e(j.status)),children:j.status==="PASS"?"":j.status==="FAIL"?"":" "})]}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:j.failReason??"  "}),j.fixAction&&j.status!=="PASS"&&a.jsxs("button",{onClick:()=>t(j),className:"mt-2 inline-flex items-center gap-1 rounded-md border border-blue-200 bg-blue-50 px-2 py-1 text-[11px] font-semibold text-blue-700 hover:bg-blue-100",children:[a.jsx(Nm,{size:11})," ",j.fixAction.label]})]},j.key)),a.jsxs("div",{className:"rounded-lg border border-gray-100 bg-gray-50 p-3",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("p",{className:"text-xs font-semibold text-slate-800",children:"  "}),a.jsx("span",{className:he("rounded px-2 py-0.5 text-[10px] font-semibold",D7(S)),children:P7(S)})]}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:"//   "}),a.jsx("div",{className:"mt-2 space-y-2",children:N.map(j=>a.jsxs("div",{className:"rounded-md border border-gray-100 bg-white px-2.5 py-2",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("p",{className:"text-[11px] font-semibold text-slate-700",children:j.label}),a.jsx("span",{className:he("rounded px-2 py-0.5 text-[10px] font-semibold",D7(j.state)),children:P7(j.state)})]}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:j.detail}),j.onAction&&j.actionLabel?a.jsxs("button",{onClick:j.onAction,className:"mt-1.5 inline-flex items-center gap-1 rounded-md border border-blue-200 bg-blue-50 px-2 py-1 text-[11px] font-semibold text-blue-700 hover:bg-blue-100",children:[a.jsx(Nm,{size:11})," ",j.actionLabel]}):null]},j.key))})]})]}),a.jsxs("p",{className:"mt-3 text-[11px] text-gray-500",children:["    : ",r?"/     ":"/     "]})]})}function K7({evidence:e,quality:t,mode:n="stage1",stage2OpsView:r=!1,stage3Type:s}){const i=n==="stage3",o=i&&r,l=i&&s==="AD_MANAGEMENT"&&!o;return a.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-sm font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(Am,{size:15,className:"text-slate-500"}),o?"  ( )":i?l?"  ( )":"  ( )":"  "]}),a.jsxs("span",{className:"text-[11px] text-gray-500",children:["  ",dt(e.computedAt),"  ",e.version]})]}),a.jsx("div",{className:"mt-3 space-y-2",children:e.topFactors.slice(0,3).map(c=>a.jsxs("div",{className:"rounded-md border border-gray-100 bg-gray-50 px-3 py-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"text-xs font-semibold text-slate-900",children:c.title}),c.isMissing&&a.jsx("span",{className:"rounded bg-red-100 px-1.5 py-0.5 text-[10px] font-semibold text-red-700",children:" "})]}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-600",children:c.description}),a.jsxs("p",{className:"mt-1 text-[10px] text-gray-400",children:[": ",dt(c.recency)]})]},c.title))}),a.jsxs("div",{className:"mt-3 rounded-md border border-gray-100 bg-white px-3 py-2 text-[11px] text-gray-600",children:[a.jsx("p",{children:" :  48   "}),a.jsxs("p",{title:"   ,  ,    .",children:[" : ",t.score,"% (  )"]}),a.jsxs("p",{children:[" : ",t.notes?.join(", ")??""]}),o?a.jsx("p",{children:" :  //    ."}):null,!o&&i?a.jsx("p",{children:" :       ."}):null]})]})}function Rq({risk:e,stageBadge:t,threshold:n=65,stage2OpsView:r=!1,stage3Type:s="PREVENTIVE_TRACKING"}){const i=h.useId().replace(/:/g,""),o=(I,G=!1)=>{const L=new Date(I);if(Number.isNaN(L.getTime()))return I.slice(5,10);const H=String(L.getFullYear()).slice(2),F=String(L.getFullYear()),K=String(L.getMonth()+1).padStart(2,"0"),ne=String(L.getDate()).padStart(2,"0");return G?`${F}.${K}.${ne}`:`${H}.${K}.${ne}`},l=I=>I==="DIFF_RESULT_APPLIED"?r?" ":" ":I==="PLAN_UPDATED"?r?"/ ":" ":I==="REEVAL"?r?"  ":"":void 0,c=h.useMemo(()=>{const I=e.series.map(G=>{const L=new Date(G.t),H=Number.isNaN(L.getTime())?new Date(e.updatedAt):L,F=Number.isNaN(H.getTime())?new Date:H;return{t:F.toISOString(),date:F,risk01:Jr(G.risk2y),ciLow01:G.ciLow==null?void 0:Jr(G.ciLow),ciHigh01:G.ciHigh==null?void 0:Jr(G.ciHigh),eventLabel:l(G.event??(G.source==="manual"?"REEVAL":void 0))}}).sort((G,L)=>G.date.getTime()-L.date.getTime());if(I.length===0){const G=(()=>{const L=new Date(e.updatedAt);return Number.isNaN(L.getTime())?new Date:L})();return[{t:G.toISOString(),date:G,risk01:Jr(e.risk2y_now),ciLow01:void 0,ciHigh01:void 0,eventLabel:void 0}]}return I},[e.risk2y_now,e.series,e.updatedAt]),u=c[c.length-1],m=Jr(u?.risk01??e.risk2y_now),p=Yo(m),g=dh(m),x=s==="AD_MANAGEMENT"&&!r,y=e.trend==="UP"?.14:e.trend==="DOWN"?-.1:e.trend==="VOLATILE"?.08:.02,v=Jr(m+y),N=Yo(v),S=x?[]:[12,24,36],j=S.map((I,G)=>{const L=new Date(u.date);L.setMonth(L.getMonth()+I);const H=(G+1)/S.length,F=Jr(m+(v-m)*H);return{t:L.toISOString(),date:L,riskPct:Yo(F),axisLabel:o(L.toISOString())}}),C=[...c.map((I,G)=>{const L=Yo(I.risk01);return{t:I.t,axisLabel:o(I.t),pointKind:"HIST",histRiskPct:L,forecastRiskPct:j.length>0&&G===c.length-1?L:null,areaRiskPct:L,riskPct:L,ciLowPct:I.ciLow01==null?void 0:Yo(I.ciLow01),ciHighPct:I.ciHigh01==null?void 0:Yo(I.ciHigh01),eventLabel:I.eventLabel}}),...j.map(I=>({t:I.t,axisLabel:I.axisLabel,pointKind:"FORECAST",histRiskPct:null,forecastRiskPct:I.riskPct,areaRiskPct:I.riskPct,riskPct:I.riskPct,ciLowPct:void 0,ciHighPct:void 0,eventLabel:void 0}))],_=h.useMemo(()=>{const I=new Map;return C.forEach((G,L)=>{const H=new Date(G.t);if(Number.isNaN(H.getTime())){I.set(G.t,G.axisLabel);return}const F=L===0||L===C.length-1,K=L>0?new Date(C[L-1].t):null,ne=K?K.getFullYear()!==H.getFullYear():!1;I.set(G.t,o(G.t,F||ne))}),I},[C]),A=C.some(I=>I.ciLowPct!=null&&I.ciHighPct!=null),T=C.filter(I=>I.pointKind==="HIST"&&!!I.eventLabel).slice(-3),R=C.filter(I=>I.riskPct>=n),M=R[R.length-1],P=j.length>0?C[C.length-1]:void 0,$=p>=n?{top:"#ef4444",bottom:"#ef4444"}:{top:"#2563eb",bottom:"#2563eb"},w=(()=>{if(c.length<4)return"      .";const I=c.slice(-4).map(K=>Yo(K.risk01)),G=I.slice(1).map((K,ne)=>K-I[ne]),L=G.filter(K=>K>0).length,H=G.filter(K=>K<0).length;return Math.max(...G.map(K=>Math.abs(K)))>=10?r?" 3  .  /   .":" 3  . /     .":L>=2?" 3    .":H>=2?" 3    .":"     ."})(),U=t==="COMPLETED"?r?" :   ":x?" : AD    ":" :   ":t==="SCHEDULED"?r?" :  ":x?" :   ":" :  ":t==="REFERRED"?" :  ":t==="RECOMMENDED"?r?" : / ":" :  ":r?" :   ":x?" :   ":" :  ",X=({active:I,payload:G})=>{if(!I||!G||G.length===0)return null;const L=G[0]?.payload;return L?a.jsxs("div",{className:"rounded-md border border-slate-200 bg-white px-2 py-1.5 text-[10px] shadow-sm",children:[a.jsxs("p",{className:"font-semibold text-slate-800",children:[dt(L.t),"  ",L.pointKind==="FORECAST"?" (+3y)":"/"]}),a.jsxs("p",{className:"mt-0.5 text-slate-700",children:[r?" / ":x?"  ( )":"( )"," ",L.riskPct,"%"]}),L.ciLowPct!=null&&L.ciHighPct!=null?a.jsxs("p",{className:"text-slate-500",children:[" ",L.ciLowPct,"% ~ ",L.ciHighPct,"%"]}):null,L.eventLabel?a.jsxs("p",{className:"text-slate-500",children:[" ",L.eventLabel]}):null,L.riskPct>=n?a.jsx("p",{className:"text-red-600",children:r?`${n}%   `:`${n}%  `}):null]}):null};return a.jsxs("div",{className:"rounded-lg border border-slate-100 bg-slate-50 px-2.5 py-2.5",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-1.5",children:[a.jsxs("span",{className:"rounded-full border border-indigo-200 bg-indigo-50 px-2 py-0.5 text-[10px] font-semibold text-indigo-700",children:[r?" /":x?" ":" "," ",p,"% (",g,")"]}),a.jsxs("span",{className:"rounded-full border border-sky-200 bg-sky-50 px-2 py-0.5 text-[10px] font-semibold text-sky-700",children:[x?" ":r?" ":"3  "," ",x?e.trend:`${N}%`]}),a.jsxs("span",{className:"rounded-full border border-slate-200 bg-white px-2 py-0.5 text-[10px] font-semibold text-slate-700",children:[" ",e.trend]})]}),a.jsxs("div",{className:"mt-2 grid grid-cols-1 gap-2.5 xl:grid-cols-[1fr_220px]",children:[a.jsx("div",{className:"h-56 w-full",children:a.jsx(Da,{width:"100%",height:"100%",children:a.jsxs(RN,{data:C,margin:{top:8,right:24,left:0,bottom:6},children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:`risk-grad-${i}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:$.top,stopOpacity:.3}),a.jsx("stop",{offset:"100%",stopColor:$.bottom,stopOpacity:.04})]})}),a.jsx(Rs,{stroke:"#e5e7eb",strokeDasharray:"4 4"}),a.jsx(oa,{dataKey:"t",tick:{fontSize:10,fill:"#64748b"},axisLine:!1,tickLine:!1,interval:"preserveStartEnd",minTickGap:16,tickMargin:8,tickFormatter:I=>_.get(I)??o(I,!0)}),a.jsx(Zr,{domain:[0,100],ticks:[0,25,50,75,100],tickFormatter:I=>`${I}%`,tick:{fontSize:10,fill:"#64748b"},axisLine:!1,tickLine:!1,width:34}),a.jsx(or,{content:a.jsx(X,{})}),a.jsx(sc,{y:n,stroke:"#dc2626",strokeDasharray:"4 3"}),T.map((I,G)=>a.jsx(sc,{x:I.t,stroke:"#94a3b8",strokeDasharray:"3 3"},`event-${I.t}-${G}`)),A?a.jsx(Ja,{type:"monotone",dataKey:"ciLowPct",stroke:"#94a3b8",strokeDasharray:"4 4",strokeWidth:1,dot:!1,isAnimationActive:!1}):null,A?a.jsx(Ja,{type:"monotone",dataKey:"ciHighPct",stroke:"#94a3b8",strokeDasharray:"4 4",strokeWidth:1,dot:!1,isAnimationActive:!1}):null,a.jsx(mc,{type:"monotone",dataKey:"areaRiskPct",stroke:"none",fill:`url(#risk-grad-${i})`,isAnimationActive:!1}),a.jsx(Ja,{type:"monotone",dataKey:"histRiskPct",stroke:"#334155",strokeWidth:2.2,isAnimationActive:!1,dot:I=>{if(I.cx==null||I.cy==null||!I.payload||I.payload.histRiskPct==null)return null;const G=I.payload.riskPct>=n;return a.jsx("circle",{cx:I.cx,cy:I.cy,r:G?4:3,fill:G?"#dc2626":"#334155",stroke:"#ffffff",strokeWidth:1.2})},activeDot:{r:5}}),j.length>0?a.jsx(Ja,{type:"monotone",dataKey:"forecastRiskPct",stroke:"#2563eb",strokeDasharray:"6 4",strokeWidth:2,connectNulls:!1,isAnimationActive:!1,dot:I=>{if(I.cx==null||I.cy==null||!I.payload||I.payload.forecastRiskPct==null)return null;const G=I.payload.riskPct>=n;return a.jsx("circle",{cx:I.cx,cy:I.cy,r:G?4:3,fill:G?"#dc2626":"#2563eb",stroke:"#ffffff",strokeWidth:1.1})}}):null,j.length>0&&P?a.jsx(kx,{x:P.t,y:P.riskPct,r:5,fill:P.riskPct>=n?"#dc2626":"#2563eb",stroke:"#fff",strokeWidth:1.4,label:{value:`+3y ${P.riskPct}%`,position:"top",fill:"#1e293b",fontSize:10}}):null]})})}),a.jsxs("div",{className:"space-y-2 rounded-md border border-slate-200 bg-white p-2",children:[a.jsx("p",{className:"text-[10px] font-semibold text-slate-700",children:U}),a.jsxs("p",{className:"text-[10px] text-slate-500",children:[" ",dt(e.updatedAt),"   ",e.modelVersion]}),M?a.jsxs("div",{className:"rounded border border-red-200 bg-red-50 px-2 py-1 text-[10px] text-red-700",children:[a.jsxs("p",{className:"font-semibold",children:[n,"%  "]}),a.jsxs("p",{children:[M.axisLabel,"  ",M.riskPct,"% ( )"]})]}):a.jsxs("div",{className:"rounded border border-emerald-200 bg-emerald-50 px-2 py-1 text-[10px] text-emerald-700",children:[a.jsxs("p",{className:"font-semibold",children:[n,"%   "]}),a.jsx("p",{children:"   ."})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-[10px] font-semibold text-slate-700",children:" "}),T.length?T.map(I=>a.jsxs("p",{className:"text-[10px] text-slate-600",children:[I.axisLabel,"  ",I.eventLabel]},`${I.t}-${I.eventLabel}`)):a.jsx("p",{className:"text-[10px] text-slate-500",children:"  "})]})]})]}),a.jsx("p",{className:"mt-1 text-[10px] text-slate-500",children:w}),a.jsx("p",{className:"mt-0.5 text-[10px] text-slate-500",children:r?" :   //   .":" :         ."})]})}const V_e=new Set(["REFERRED","SCHEDULED","DONE","RECEIVED","EXCEPTION"]);function W_e(e){return e==="PENDING"?"":e==="REFERRED"?"":e==="SCHEDULED"?"":e==="DONE"?"":e==="RECEIVED"?"":e==="NEEDS_REVIEW"?"":e==="MISSING"?"":"()"}function Y_e(e){return e==="REQUIRED"?"":e==="RECOMMENDED"?"":""}function Q_e(e){return e==="AUTO"?"AUTO()":e==="MANUAL"?"MANUAL()":e==="OVERRIDE"?"OVERRIDE":" "}function X_e(e){return e==="MISSING"||e==="NEEDS_REVIEW"?"border-rose-200 bg-rose-50 text-rose-700":e==="DONE"||e==="RECEIVED"?"border-emerald-200 bg-emerald-50 text-emerald-700":e==="REFERRED"||e==="SCHEDULED"?"border-amber-200 bg-amber-50 text-amber-700":e==="EXCEPTION"?"border-violet-200 bg-violet-50 text-violet-700":"border-slate-200 bg-slate-100 text-slate-700"}function J_e(e){return e==="PAUSED"?"PAUSED":e==="IN_PROGRESS"?"IN_PROGRESS":e==="READY"?"READY":"BLOCKED"}function Z_e(e){return e==="READY"?"border-emerald-200 bg-emerald-50 text-emerald-700":e==="IN_PROGRESS"?"border-blue-200 bg-blue-50 text-blue-700":e==="BLOCKED"?"border-rose-200 bg-rose-50 text-rose-700":"border-slate-200 bg-slate-100 text-slate-700"}function eCe(e){return e.id==="MMSE"?a.jsx(xu,{term:"MMSE",className:"text-[11px] font-semibold text-slate-900"}):e.id==="CDR_GDS"?a.jsxs("span",{className:"text-[11px] font-semibold text-slate-900",children:[a.jsx(xu,{term:"CDR"}),"  ",a.jsx(xu,{term:"GDS"})]}):e.id==="NEURO"?a.jsx("span",{className:"text-[11px] font-semibold text-slate-900",children:""}):e.id==="SPECIALIST"?a.jsx("span",{className:"text-[11px] font-semibold text-slate-900",children:" "}):e.id==="GDS_K"?a.jsx(xu,{term:"GDS-K",className:"text-[11px] font-semibold text-slate-900"}):e.id==="ADL"?a.jsx(xu,{term:"ADL",className:"text-[11px] font-semibold text-slate-900"}):a.jsx(xu,{term:"BPSD",className:"text-[11px] font-semibold text-slate-900"})}function b_(e,t){const n=e[0];if(!n)return;const r=t.current[n];r&&(r.scrollIntoView({behavior:"smooth",block:"center"}),"focus"in r&&typeof r.focus=="function"&&r.focus())}function tCe({routeType:e,hospitalName:t,dueAt:n,tests:r,optionalTests:s,integrationReceivedAt:i,integrationUpdatedAt:o,manualEditEnabled:l}){return h.useMemo(()=>{const c=n||"2026-02-20T09:00:00",u=o||i,m=l?"OVERRIDE":e==="HOSPITAL_REFERRAL"?"AUTO":"MANUAL",p=typeof r.mmse=="number"&&Number.isFinite(r.mmse),g=typeof r.cdr=="number"&&Number.isFinite(r.cdr),x=!!r.neuroCognitiveType,y=!!r.specialist,v=S=>S==="MISSING"?[{key:"OPEN_PIPELINE",label:"  ",enabled:!0,intent:"danger"},{key:"REQUEST_RESULT",label:" ",enabled:!0,intent:"warning"},{key:"MANUAL_EXCEPTION",label:" ()",enabled:!0,intent:"default"}]:S==="NEEDS_REVIEW"?[{key:"VIEW_RESULT",label:" ",enabled:!0,intent:"default"},{key:"MARK_REVIEWED",label:" ",enabled:!0,intent:"success"}]:S==="REFERRED"||S==="SCHEDULED"?[{key:"OPEN_PIPELINE",label:"/ ",enabled:!0,intent:"default"},{key:"REQUEST_RESULT",label:" ",enabled:!0,intent:"warning"}]:S==="DONE"||S==="RECEIVED"||S==="EXCEPTION"?[{key:"VIEW_RESULT",label:" ",enabled:!0,intent:"default"},{key:"MARK_REVIEWED",label:" ",enabled:!0,intent:"success"}]:[{key:"OPEN_PIPELINE",label:" ",enabled:!0,intent:"default"}];return[{id:"MMSE",label:"MMSE",fullName:" ",description:"     .",requiredLevel:e==="HOSPITAL_REFERRAL"?"REQUIRED":"RECOMMENDED",status:p?"RECEIVED":e==="HOSPITAL_REFERRAL"?"REFERRED":"PENDING",source:m,orgName:t,dueAt:c,updatedAt:u,actions:[]},{id:"CDR_GDS",label:"CDR  GDS",fullName:" ",description:"CDR  GDS    1  .",requiredLevel:"REQUIRED",status:g?"RECEIVED":"MISSING",source:m,orgName:t,dueAt:c,updatedAt:u,missingReason:g?void 0:"  ",actions:[]},{id:"NEURO",label:"",fullName:"CERAD-K / SNSB-II / SNSB-C / LICA",description:"   /.",requiredLevel:"REQUIRED",status:x?"RECEIVED":"PENDING",source:m,orgName:t,dueAt:c,updatedAt:u,actions:[]},{id:"SPECIALIST",label:" ",fullName:" / ",description:"      .",requiredLevel:"REQUIRED",status:y?"DONE":e==="HOSPITAL_REFERRAL"?"REFERRED":"PENDING",source:m,orgName:t,dueAt:c,updatedAt:u,actions:[]},{id:"GDS_K",label:"GDS-K",fullName:"()",description:"         .",requiredLevel:"OPTIONAL",status:s.gdsk?"SCHEDULED":"PENDING",source:s.gdsk?"MANUAL":null,orgName:t,dueAt:c,updatedAt:u,actions:[]},{id:"ADL",label:"ADL",fullName:" ",description:"     .",requiredLevel:"OPTIONAL",status:s.adl?"SCHEDULED":"PENDING",source:s.adl?"MANUAL":null,orgName:t,dueAt:c,updatedAt:u,actions:[]},{id:"BPSD",label:"BPSD",fullName:" ",description:"     .",requiredLevel:"OPTIONAL",status:s.bpsd?"SCHEDULED":"PENDING",source:s.bpsd?"MANUAL":null,orgName:t,dueAt:c,updatedAt:u,actions:[]}].map(S=>({...S,actions:v(S.status)}))},[n,t,i,o,l,s.adl,s.bpsd,s.gdsk,e,r.cdr,r.mmse,r.neuroCognitiveType,r.specialist])}function nCe({summary:e,route:t,onOpenMissing:n,onPrimaryAction:r,onReviewComplete:s}){const i=t.routeType==="HOSPITAL_REFERRAL"?" ":"  ";return a.jsxs("div",{className:"rounded-lg border border-indigo-200 bg-indigo-50 p-3",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-2 md:grid-cols-6",children:[a.jsxs("div",{className:"rounded-md border border-indigo-100 bg-white px-2 py-1.5",children:[a.jsx("p",{className:"text-[10px] text-slate-500",children:" "}),a.jsx("p",{className:he("mt-1 inline-flex rounded border px-1.5 py-0.5 text-[10px] font-semibold",Z_e(e.status)),children:J_e(e.status)})]}),a.jsxs("div",{className:"rounded-md border border-indigo-100 bg-white px-2 py-1.5",children:[a.jsx("p",{className:"text-[10px] text-slate-500",children:" "}),a.jsx("p",{className:"mt-1 text-[11px] font-semibold text-slate-900",children:i})]}),a.jsxs("div",{className:"rounded-md border border-indigo-100 bg-white px-2 py-1.5",children:[a.jsx("p",{className:"text-[10px] text-slate-500",children:""}),a.jsx("p",{className:"mt-1 text-[11px] font-semibold text-slate-900",children:dt(t.dueAt)})]}),a.jsxs("div",{className:"rounded-md border border-indigo-100 bg-white px-2 py-1.5",children:[a.jsx("p",{className:"text-[10px] text-slate-500",children:" "}),a.jsx("p",{className:"mt-1 text-[11px] font-semibold text-slate-900",children:dt(t.lastSyncAt)})]}),a.jsxs("div",{className:"rounded-md border border-indigo-100 bg-white px-2 py-1.5",children:[a.jsx("p",{className:"text-[10px] text-slate-500",children:" "}),a.jsxs("p",{className:"mt-1 text-[11px] font-semibold text-slate-900",children:[e.requiredSatisfaction,"%"]})]}),a.jsxs("div",{className:"rounded-md border border-indigo-100 bg-white px-2 py-1.5",children:[a.jsxs("button",{type:"button",onClick:n,className:he("inline-flex items-center gap-1 rounded border px-1.5 py-0.5 text-[10px] font-semibold",e.missingCount>0?"border-rose-200 bg-rose-50 text-rose-700":"border-emerald-200 bg-emerald-50 text-emerald-700"),children:[a.jsx(fs,{size:12})," ",e.missingCount,""]}),a.jsxs("p",{className:"mt-1 text-[10px] text-slate-500",children:[" ",e.qualityScore,"%"]})]})]}),a.jsxs("div",{className:"mt-3 flex flex-wrap items-center justify-end gap-2",children:[a.jsx("button",{type:"button",onClick:r,className:"rounded-md border border-indigo-200 bg-white px-3 py-1.5 text-[11px] font-semibold text-indigo-700",children:t.routeType==="HOSPITAL_REFERRAL"?" /":"  "}),a.jsx("button",{type:"button",onClick:s,className:"rounded-md bg-[#163b6f] px-3 py-1.5 text-[11px] font-semibold text-white",children:" "})]})]})}function rCe({routeType:e,orgName:t,dueAt:n,needsReasonOnChange:r,onSelectRoute:s}){return a.jsxs("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-2",children:[a.jsxs("button",{type:"button",onClick:()=>s("HOSPITAL_REFERRAL"),className:he("rounded-md border px-3 py-2 text-left",e==="HOSPITAL_REFERRAL"?"border-indigo-300 bg-indigo-50 text-indigo-800":"border-slate-200 bg-white text-slate-700"),children:[a.jsx("p",{className:"text-xs font-semibold",children:a.jsx(xu,{term:" "})}),a.jsxs("p",{className:"mt-1 text-[10px]",children:[": ",t||"-"]}),a.jsxs("p",{className:"text-[10px]",children:[": ",dt(n)]})]}),a.jsxs("button",{type:"button",onClick:()=>s("CENTER_DIRECT"),className:he("rounded-md border px-3 py-2 text-left",e==="CENTER_DIRECT"?"border-indigo-300 bg-indigo-50 text-indigo-800":"border-slate-200 bg-white text-slate-700"),children:[a.jsx("p",{className:"text-xs font-semibold",children:a.jsx(xu,{term:"  "})}),a.jsx("p",{className:"mt-1 text-[10px]",children:"  /  "}),r?a.jsx("p",{className:"text-[10px] text-amber-700",children:"        ."}):null]})]})}function aCe({item:e,onAction:t,registerRef:n}){const r=e.status==="MISSING"||e.status==="NEEDS_REVIEW";return a.jsxs("div",{ref:n?.(e.id),tabIndex:-1,className:he("rounded-md border bg-white p-3 outline-none",r?"border-rose-300 bg-rose-50/40":"border-slate-200"),children:[a.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2",children:[a.jsxs("div",{children:[eCe(e),a.jsx("p",{className:"mt-0.5 text-[10px] text-slate-500",children:e.fullName})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-1",children:[a.jsx("span",{className:"rounded border border-slate-200 bg-slate-50 px-1.5 py-0.5 text-[10px] font-semibold text-slate-700",children:Y_e(e.requiredLevel)}),a.jsx("span",{className:he("rounded border px-1.5 py-0.5 text-[10px] font-semibold",X_e(e.status)),children:W_e(e.status)})]})]}),a.jsx("p",{className:"mt-1 text-[10px] text-slate-600",children:e.description}),a.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-[10px] text-slate-600",children:[a.jsxs("p",{children:[": ",Q_e(e.source)]}),a.jsxs("p",{children:[": ",e.orgName||"-"]}),a.jsxs("p",{children:[": ",dt(e.dueAt)]}),a.jsxs("p",{children:[": ",dt(e.updatedAt)]})]}),e.missingReason?a.jsx("p",{className:"mt-1 rounded border border-rose-200 bg-rose-50 px-2 py-1 text-[10px] font-semibold text-rose-700",children:e.missingReason}):null,a.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:e.actions.map(s=>a.jsx("button",{type:"button",disabled:!s.enabled,onClick:()=>t(e,s),className:he("rounded border px-1.5 py-1 text-[10px] font-semibold",s.intent==="danger"?"border-rose-200 bg-rose-50 text-rose-700":s.intent==="warning"?"border-amber-200 bg-amber-50 text-amber-700":s.intent==="success"?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-slate-200 bg-slate-50 text-slate-700",s.enabled?"":"cursor-not-allowed opacity-50"),children:s.label},s.key))})]})}function sCe({items:e,onAction:t,registerRef:n}){return a.jsx("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-2",children:e.map(r=>a.jsx(aCe,{item:r,onAction:t,registerRef:n},r.id))})}const ly={PRECHECK:["Stage1   Stage2   ","  (/MMSE/CDRGDS/)   "," ( /  ) ","// "],CONTACT_EXECUTION:["MMSE  ","CDR  GDS  "," / "," /   "],RESPONSE_HANDLING:[" (/MCI/) ","   ( )","MCI  (//) ","    "],FOLLOW_UP:["/MCI/    1 "," (/)     ","    "]},iCe={MMSE:" (/ ) .",CDR:"   .",GDS:"   :   CDR      .","GDS-K":"         .",ADL:" (// ) .",BPSD:"   (// ) .",MCI:" .",AD:"    .",ANN:"()   ( )."," ":"        .","  ":"   /    ."};function xu({term:e,className:t}){return a.jsx(cg,{term:e,className:t})}function cg({term:e,className:t}){const[n,r]=h.useState(!1),s=h.useId(),i=h.useRef(null),o=iCe[e];return h.useEffect(()=>{if(!n)return;const l=c=>{const u=c.target;i.current?.contains(u)||r(!1)};return window.addEventListener("pointerdown",l),()=>window.removeEventListener("pointerdown",l)},[n]),o?a.jsxs("span",{ref:i,className:he("relative inline-flex items-center",t),children:[a.jsxs("button",{type:"button",className:"inline-flex items-center gap-1 rounded px-0.5 text-inherit underline decoration-dotted underline-offset-2 focus-visible:outline focus-visible:outline-2 focus-visible:outline-indigo-300","aria-describedby":n?s:void 0,"aria-expanded":n,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),onFocus:()=>r(!0),onBlur:l=>{const c=l.relatedTarget;i.current?.contains(c)||r(!1)},onClick:()=>r(l=>!l),children:[e,a.jsx(ea,{size:12,className:"text-slate-400"})]}),n?a.jsx("span",{id:s,role:"tooltip",className:"absolute left-0 top-[calc(100%+6px)] z-40 w-64 rounded-md border border-slate-200 bg-white px-2 py-1.5 text-[10px] font-medium text-slate-600 shadow-lg",children:o}):null]}):a.jsx("span",{className:t,children:e})}function cy({items:e}){return a.jsxs("div",{className:"rounded-md border border-indigo-200 bg-indigo-50 p-3",children:[a.jsx("p",{className:"text-xs font-semibold text-indigo-900",children:"  "}),a.jsx("ul",{className:"mt-1 space-y-1 text-[11px] text-indigo-800",children:e.map(t=>a.jsxs("li",{children:[" ",t]},t))})]})}function oCe({scoreSummary:e,modelPriorityValue:t,modelPriorityMeta:n,contactPriority:r,interventionLevel:s,stage3Risk:i,stage3DiffPathStatus:o,stage3RiskReviewedAt:l,onStage3MarkRiskReviewed:c,mode:u="stage1",stage2OpsView:m=!1,stage2ResultLabel:p,stage2MciStage:g,stage2Probs:x,stage2DiagnosisStatus:y,stage2CompletionPct:v,stage2RequiredDataPct:N,stage2NextDiagnosisAt:S,stage2QualityScore:j,stage2WaitingCount:C,stage2ResultMissingCount:_,stage2ClassificationConfirmed:A,stage2ModelAvailable:T=!1,stage3ModelAvailable:R=!1,stage3Type:M,stage2MissingEvidence:P=[],stage3MissingEvidence:$=[],onOpenStage2Input:w,onOpenStage3Input:U}){const X=u==="stage2",I=u==="stage3",G=I&&m,L=I&&M==="AD_MANAGEMENT"&&!G,H=g===""?82:g===""?34:58,F=Math.max(0,Math.min(100,t)),K=Math.max(1,100-F),ne=F>=85?"":F>=65?"":F>=45?"":"",V=ne===""?"text-red-600":ne===""?"text-orange-600":ne===""?"text-blue-600":"text-emerald-600",ee=[{key:"",range:"0-44",tone:"border-emerald-300 bg-emerald-50 text-emerald-700",dot:"bg-emerald-500",guide:"/"},{key:"",range:"45-64",tone:"border-blue-300 bg-blue-50 text-blue-700",dot:"bg-blue-500",guide:"  "},{key:"",range:"65-84",tone:"border-orange-300 bg-orange-50 text-orange-700",dot:"bg-orange-500",guide:"  "},{key:"",range:"85-100",tone:"border-red-300 bg-red-50 text-red-700",dot:"bg-red-500",guide:"24  "}];if(I&&i){if(G){const ce=[{label:" ",value:T?p==="MCI"?`${p}(${QAe(g)})`:p??"":"",hint:"  ( )"},{label:"2  ",value:bq(y),hint:"IN_PROGRESS / COMPLETED"},{label:" ",value:`${v??0}%`,hint:"   "},{label:" ",value:`${N??0}%`,hint:"  "},{label:"  ",value:dt(S),hint:"/ "},{label:" ",value:`${j??0}%`,hint:"/"}];return a.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"Stage2   "}),a.jsx("span",{className:"rounded-full border border-slate-200 bg-slate-50 px-2 py-0.5 text-[11px] font-semibold text-slate-700",children:"  ( )"})]}),a.jsx("div",{className:"mt-3 grid grid-cols-2 gap-2 md:grid-cols-3 xl:grid-cols-6",children:ce.map(Z=>a.jsxs("article",{title:Z.hint,className:"rounded-lg border border-slate-200 bg-gradient-to-b from-white to-slate-50 px-2.5 py-2 shadow-sm transition-all duration-150 hover:-translate-y-0.5 hover:shadow-md",children:[a.jsx("p",{className:"text-[10px] font-semibold text-slate-500",children:Z.label}),a.jsx("p",{className:"mt-1 text-xs font-bold text-slate-900",children:Z.value})]},Z.label))}),a.jsx("div",{className:"mt-4",children:T?a.jsx(fq,{probs:x,predictedLabel:p,mciSeverity:g,mciScore:H}):a.jsx(Af,{stage:2,missing:P,onOpenStep:w})}),a.jsx("div",{className:"mt-4 grid grid-cols-1 gap-2 md:grid-cols-2 xl:grid-cols-5",children:e.map(Z=>a.jsxs("article",{className:"rounded-xl border border-gray-200 bg-gradient-to-b from-white to-slate-50 p-3 shadow-sm transition-all duration-150 hover:-translate-y-0.5 hover:shadow-md",title:"Stage2  KPI",children:[a.jsx("p",{className:"text-[11px] font-semibold text-gray-500",children:Z.label}),a.jsxs("p",{className:"mt-1 text-lg font-bold text-slate-900",children:[Z.value,Z.unit?a.jsx("span",{className:"ml-0.5 text-xs text-gray-400",children:Z.unit}):null]}),a.jsxs("p",{className:"text-[10px] text-gray-400",children:[" ",dt(Z.updatedAt)]}),Z.flags?.length?a.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:Z.flags.map(ie=>a.jsx("span",{className:"rounded bg-amber-100 px-1.5 py-0.5 text-[10px] font-semibold text-amber-700",children:ie},`${Z.label}-${ie}`))}):null]},Z.label))}),a.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-2 md:grid-cols-3",children:[a.jsxs("article",{className:"rounded-xl border border-slate-200 bg-slate-50 p-3",children:[a.jsx("p",{className:"text-[11px] font-semibold text-slate-700",children:"/  "}),a.jsxs("p",{className:"mt-1 text-lg font-bold text-slate-900",children:[C??0,""]}),a.jsx("p",{className:"text-[10px] text-slate-500",children:" /   "})]}),a.jsxs("article",{className:"rounded-xl border border-amber-200 bg-amber-50 p-3",children:[a.jsx("p",{className:"text-[11px] font-semibold text-amber-800",children:"   "}),a.jsxs("p",{className:"mt-1 text-lg font-bold text-amber-900",children:[_??0,""]}),a.jsx("p",{className:"text-[10px] text-amber-700",children:"  (MMSE/CDR//) "})]}),a.jsxs("article",{className:"rounded-xl border border-indigo-200 bg-indigo-50 p-3",children:[a.jsx("p",{className:"text-[11px] font-semibold text-indigo-900",children:"  "}),a.jsx("p",{className:"mt-1 text-lg font-bold text-indigo-900",children:A?"CONFIRMED":"UNCONFIRMED"}),a.jsx("p",{className:"text-[10px] text-indigo-700",children:"     "})]})]})]})}if(!R)return a.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:L?"AD  ":"AD  (2)"}),a.jsx("span",{className:"rounded-full border border-slate-200 bg-slate-50 px-2 py-0.5 text-[11px] font-semibold text-slate-700",children:" "})]}),a.jsx("div",{className:"mt-3",children:a.jsx(Af,{stage:3,missing:$,onOpenStep:U})})]});const ae=ce=>{if(G){if(ce.includes(" "))return"Stage2   . //  .";if(ce.includes("/ "))return"/    .";if(ce.includes("  "))return" /  .";if(ce.includes("  "))return"/MCI/   .";if(ce.includes(" "))return" //   ."}return ce.includes(" ")?"2  AD     .    .":ce.includes(" ")?"    .    .":ce.includes(" ")?"/    .   .":ce.includes(" ")?"    . /    .":ce.includes(" ")?"   . /   .":ce.includes(" ")?"//    .":"  ."},ue=ce=>L?ce.replace("2  "," ").replace("2 "," ").replace(" "," ").replace(""," ").replace(" ",""):ce;return a.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[a.jsx("div",{children:a.jsxs("h3",{className:"group relative inline-flex items-center gap-1 text-sm font-bold text-slate-900",children:[G?"Stage2   ":L?"AD  ":"AD  (2)",a.jsx(ea,{size:13,className:"text-slate-400"}),a.jsx("span",{className:"pointer-events-none absolute left-0 top-[calc(100%+8px)] z-20 w-80 rounded-md border border-slate-200 bg-white px-2 py-1.5 text-[10px] font-medium text-slate-600 opacity-0 shadow-md transition-opacity duration-150 group-hover:opacity-100 group-focus-within:opacity-100",children:G?"Stage2  /    . //    .":L?"/       .      .":"/     2  AD     .      ."})]})}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsxs("span",{className:"group relative rounded-full border border-blue-200 bg-blue-50 px-2.5 py-1 text-[11px] font-semibold text-blue-700",children:[G?"  ":L?" ":"2 "," ",Yo(i.risk2y_now),"%",a.jsx("span",{className:"pointer-events-none absolute left-0 top-[calc(100%+6px)] z-20 w-56 rounded-md border border-slate-200 bg-white px-2 py-1 text-[10px] font-medium text-slate-600 opacity-0 shadow-md transition-opacity duration-150 group-hover:opacity-100",children:G?"  :    ":L?" :    ":":    "})]}),a.jsxs("span",{className:"group relative rounded-full border border-indigo-200 bg-indigo-50 px-2.5 py-1 text-[11px] font-semibold text-indigo-700",children:[G?" ":""," ",dh(i.risk2y_now),a.jsx("span",{className:"pointer-events-none absolute left-0 top-[calc(100%+6px)] z-20 w-52 rounded-md border border-slate-200 bg-white px-2 py-1 text-[10px] font-medium text-slate-600 opacity-0 shadow-md transition-opacity duration-150 group-hover:opacity-100",children:G?"     ":" /    "})]}),a.jsxs("span",{className:he("group relative rounded-full border px-2.5 py-1 text-[11px] font-semibold",r.tone),children:[G?"  ":" "," ",r.label,a.jsx("span",{className:"pointer-events-none absolute left-0 top-[calc(100%+6px)] z-20 w-52 rounded-md border border-slate-200 bg-white px-2 py-1 text-[10px] font-medium text-slate-600 opacity-0 shadow-md transition-opacity duration-150 group-hover:opacity-100",children:G?"  : // ":" :      "})]})]})]}),a.jsx("div",{className:"mt-3 grid grid-cols-1 gap-2 md:grid-cols-2 xl:grid-cols-5",children:e.map(ce=>{const Z=ue(ce.label);return a.jsxs("article",{className:"group relative rounded-xl border border-gray-200 bg-gradient-to-b from-white to-slate-50 p-3 shadow-sm transition-all duration-150 hover:-translate-y-0.5 hover:shadow-md",children:[a.jsx("p",{className:"text-[11px] font-semibold text-gray-500",children:Z}),a.jsxs("p",{className:"mt-1 text-lg font-bold text-slate-900",children:[ce.value,ce.unit?a.jsx("span",{className:"ml-0.5 text-xs text-gray-400",children:ce.unit}):null]}),a.jsxs("p",{className:"text-[10px] text-gray-400",children:[" ",dt(ce.updatedAt)]}),ce.flags?.length?a.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:ce.flags.map(ie=>a.jsx("span",{className:"rounded bg-amber-100 px-1.5 py-0.5 text-[10px] font-semibold text-amber-700",children:ie},`${ce.label}-${ie}`))}):a.jsx("span",{className:"mt-1 inline-flex rounded bg-emerald-100 px-1.5 py-0.5 text-[10px] font-semibold text-emerald-700",children:""}),a.jsx("span",{className:"pointer-events-none absolute left-3 top-[calc(100%+6px)] z-20 w-56 rounded-md border border-slate-200 bg-white px-2 py-1 text-[10px] font-medium text-slate-600 opacity-0 shadow-md transition-opacity duration-150 group-hover:opacity-100",children:ae(Z)})]},ce.label)})}),a.jsxs("div",{className:"mt-4 rounded-xl border border-indigo-200 bg-indigo-50 p-3",children:[a.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-semibold text-indigo-900",children:G?" / ":M==="AD_MANAGEMENT"?"  ":"  ( + 123 )"}),a.jsxs("p",{className:"text-[11px] text-indigo-700",children:[G?" ":""," ",i.trend,"   ",dt(i.updatedAt),"   ",i.modelVersion]})]}),a.jsx("button",{type:"button",onClick:c,className:"rounded-md border border-indigo-300 bg-white px-2.5 py-1 text-[11px] font-semibold text-indigo-700 hover:bg-indigo-100",children:l?G?"   ":"   ":G?"   ":"   "})]}),a.jsx("div",{className:"mt-2",children:a.jsx(Rq,{risk:i,stageBadge:o,stage2OpsView:G,stage3Type:M})}),a.jsx("p",{className:"mt-2 text-[11px] text-indigo-700",children:G?i.variabilityNote??" : //    .":i.variabilityNote??" :     //  ."})]}),a.jsxs("details",{className:"mt-4 rounded-xl border border-slate-200 bg-slate-50 p-3",children:[a.jsx("summary",{className:"cursor-pointer text-[11px] font-semibold text-slate-800",children:" () "}),a.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-4 xl:grid-cols-[210px,1fr]",children:[a.jsxs("div",{className:"rounded-lg border border-white bg-white px-3 py-2",children:[a.jsx("p",{className:"text-[10px] font-semibold text-gray-500",children:"   /  "}),a.jsxs("p",{className:he("mt-1 text-3xl font-black",V),children:[F," ",a.jsxs("span",{className:"text-lg font-bold text-slate-600",children:["/ ",s]})]}),a.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[a.jsx("span",{className:he("rounded-full border px-2 py-0.5 text-[10px] font-semibold",n.tone),children:ne}),a.jsxs("span",{className:"text-[10px] font-semibold text-gray-500",children:[" ",K,"% "]})]})]}),a.jsx("div",{className:"rounded-lg border border-white bg-white px-3 py-3",children:a.jsx("div",{className:"grid grid-cols-2 gap-2 lg:grid-cols-4",children:ee.map(ce=>{const Z=ce.key===ne;return a.jsxs("div",{className:he("rounded-lg border px-2 py-2 transition-colors",Z?ce.tone:"border-gray-200 bg-gray-50 text-gray-500"),children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-[11px] font-bold",children:ce.key}),a.jsx("span",{className:he("h-2 w-2 rounded-full",Z?ce.dot:"bg-gray-300")})]}),a.jsx("p",{className:"mt-0.5 text-[10px] font-semibold",children:ce.range}),a.jsx("p",{className:"mt-1 text-[10px]",children:ce.guide})]},ce.key)})})})]})]})]})}return a.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:X?"2   ":"1  "}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:he("rounded-full border px-2.5 py-1 text-[11px] font-semibold",r.tone),children:[X?" ":" "," ",r.label]}),a.jsxs("span",{className:he("rounded-full border px-2.5 py-1 text-[11px] font-semibold",n.tone),children:[X?"  ":"  "," ",n.label," ",t]})]})]}),a.jsx("div",{className:"mt-3 grid grid-cols-1 gap-2 md:grid-cols-2 xl:grid-cols-4",children:e.map(ae=>a.jsxs("article",{className:"rounded-lg border border-gray-100 bg-gray-50 p-3",children:[a.jsx("p",{className:"text-[11px] font-semibold text-gray-500",children:ae.label}),a.jsxs("p",{className:"mt-1 text-lg font-bold text-slate-900",children:[ae.value,ae.unit?a.jsx("span",{className:"ml-0.5 text-xs text-gray-400",children:ae.unit}):null]}),a.jsxs("p",{className:"text-[10px] text-gray-400",children:[" ",dt(ae.updatedAt)]})]},ae.label))}),a.jsxs("div",{className:"mt-4 rounded-xl border border-slate-200 bg-slate-50 p-3",children:[a.jsxs("div",{className:"flex items-center justify-between text-[11px] text-slate-700",children:[a.jsxs("span",{className:"relative inline-flex items-center gap-1 font-semibold group",children:[X?"   Bullet Chart":"  Bullet Chart",a.jsx(ea,{size:13,className:"text-slate-400"}),a.jsxs("span",{className:"pointer-events-none absolute left-0 top-[calc(100%+8px)] z-30 w-64 rounded-lg border border-slate-200 bg-white p-2 text-[11px] text-slate-600 opacity-0 shadow-md transition-opacity duration-150 group-hover:opacity-100 group-focus-within:opacity-100",children:[a.jsx("span",{className:"block font-semibold text-slate-900",children:"  "}),a.jsx("span",{className:"mt-1 block",children:"- //   ."}),a.jsx("span",{className:"block",children:"-     ."}),a.jsx("span",{className:"block",children:"-  (///)   ."})]})]}),a.jsx("span",{children:n.guide})]}),a.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-4 xl:grid-cols-[210px,1fr]",children:[a.jsxs("div",{className:"rounded-lg border border-white bg-white px-3 py-2",children:[a.jsx("p",{className:"text-[10px] font-semibold text-gray-500",children:"   /  "}),a.jsxs("p",{className:he("mt-1 text-3xl font-black",V),children:[F," ",a.jsxs("span",{className:"text-lg font-bold text-slate-600",children:["/ ",s]})]}),a.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[a.jsx("span",{className:he("rounded-full border px-2 py-0.5 text-[10px] font-semibold",n.tone),children:ne}),a.jsxs("span",{className:"text-[10px] font-semibold text-gray-500",children:[" ",K,"% "]})]})]}),a.jsxs("div",{className:"rounded-lg border border-white bg-white px-3 py-3",children:[a.jsx("div",{className:"grid grid-cols-2 gap-2 lg:grid-cols-4",children:ee.map(ae=>{const ue=ae.key===ne;return a.jsxs("div",{className:he("rounded-lg border px-2 py-2 transition-colors",ue?ae.tone:"border-gray-200 bg-gray-50 text-gray-500"),children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-[11px] font-bold",children:ae.key}),a.jsx("span",{className:he("h-2 w-2 rounded-full",ue?ae.dot:"bg-gray-300")})]}),a.jsx("p",{className:"mt-0.5 text-[10px] font-semibold",children:ae.range}),a.jsx("p",{className:"mt-1 text-[10px]",children:ae.guide})]},ae.key)})}),a.jsxs("div",{className:"mt-2 rounded-md border border-gray-100 bg-gray-50 px-2 py-1.5 text-[11px] text-gray-600",children:[" : ",a.jsx("span",{className:he("font-bold",V),children:ne}),"   ",F," / ",s]})]})]})]})]})}function y_({timeline:e,filter:t,onFilterChange:n,listClassName:r,mode:s="stage1",stage2OpsView:i=!1,stage3Type:o}){const l=s==="stage3",c=l&&i,u=l&&o==="AD_MANAGEMENT"&&!c;return a.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-sm font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(xa,{size:15,className:"text-slate-500"}),c?"// ":l?u?"/// ":"/// ":"// "]}),a.jsx("div",{className:"flex items-center gap-1 rounded-lg border border-gray-200 bg-gray-50 p-1 text-[11px] font-semibold",children:[{key:"ALL",label:""},{key:"CALL",label:""},{key:"SMS",label:""},{key:"STATUS",label:""}].map(m=>a.jsx("button",{onClick:()=>n(m.key),className:he("rounded-md px-2 py-1 transition-colors",t===m.key?"bg-white text-slate-900 shadow-sm":"text-gray-500 hover:bg-white"),children:m.label},m.key))})]}),a.jsx("div",{className:he("mt-3 space-y-2",r),children:e.length===0?a.jsx("p",{className:"rounded-md border border-gray-100 bg-gray-50 px-3 py-2 text-xs text-gray-500",children:c?"    //    .":l?"           .":"   ."}):e.map((m,p)=>a.jsxs("div",{className:"rounded-md border border-gray-100 bg-gray-50 px-3 py-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-xs font-semibold text-slate-800",children:Uy(m)}),a.jsx("span",{className:"text-[11px] text-gray-500",children:dt(m.at)})]}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-600",children:vq(m)}),a.jsxs("p",{className:"mt-1 text-[10px] text-gray-400",children:[": ",m.by]})]},`${m.type}-${m.at}-${p}`))}),a.jsx("p",{className:"mt-3 text-[11px] text-gray-500",children:c?"    : //     .":l?u?"    : ///       ":"    : ///       ":"    :  3    "})]})}function v_({level:e,statusLabel:t,guides:n,onChangeLevel:r,onHold:s,onExclude:i,mode:o="stage1"}){const l=o==="stage3";return a.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsxs("h3",{className:"text-sm font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(Am,{size:15,className:"text-slate-500"}),l?"  ( )":"  ( )"]}),a.jsx("div",{className:"mt-3 space-y-2",children:n.map(c=>a.jsxs("button",{onClick:()=>r(c.level),title:`${c.purpose} /  : ${c.whenToUse}`,className:he("w-full rounded-lg border px-3 py-2 text-left transition-colors",c.level===e?c.tone:"border-gray-200 bg-gray-50 hover:bg-gray-100"),children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("p",{className:"text-xs font-semibold",children:[c.level,"  ",c.label]}),c.level===e?a.jsx(Si,{size:13}):null]}),a.jsx("p",{className:"mt-1 text-[11px] text-gray-600",children:c.purpose})]},c.level))}),a.jsx("div",{className:"mt-3 rounded-md border border-gray-100 bg-gray-50 p-2",children:a.jsxs("p",{className:"text-[11px] text-gray-600",children:[" : ",a.jsx("strong",{children:t})]})}),a.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[a.jsxs("button",{onClick:s,className:"inline-flex items-center justify-center gap-1 rounded-md border border-orange-200 bg-orange-50 px-2 py-1.5 text-[11px] font-semibold text-orange-700",children:[a.jsx(CX,{size:12})," "]}),a.jsxs("button",{onClick:i,className:"inline-flex items-center justify-center gap-1 rounded-md border border-red-200 bg-red-50 px-2 py-1.5 text-[11px] font-semibold text-red-700",children:[a.jsx(YQ,{size:12}),"  "]})]})]})}function lCe({draft:e,onClose:t,onChangeReason:n,onConfirm:r}){return e?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/35 p-4",children:a.jsxs("div",{className:"w-full max-w-md rounded-xl border border-gray-200 bg-white p-4 shadow-2xl",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:e.title}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"     ."}),a.jsx("textarea",{value:e.reason,onChange:s=>n(s.target.value),className:"mt-3 h-24 w-full rounded-lg border border-gray-200 px-2 py-1.5 text-xs outline-none focus:border-blue-400",placeholder:"  "}),a.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[a.jsx("button",{onClick:t,className:"rounded-md border border-gray-200 px-3 py-1.5 text-xs font-semibold text-gray-700",children:""}),a.jsx("button",{onClick:r,disabled:!e.reason.trim(),className:"rounded-md bg-[#163b6f] px-3 py-1.5 text-xs font-semibold text-white disabled:bg-gray-300",children:e.confirmLabel})]})]})}):null}function cCe({draft:e,loading:t,onClose:n,onChangeResult:r,onChangeNote:s,onConfirm:i}){if(!e)return null;const o=[{value:"SUCCESS",label:" "},{value:"NO_ANSWER",label:""},{value:"REJECTED",label:""},{value:"WRONG_NUMBER",label:" "}],l=[{value:"DELIVERED",label:" "},{value:"FAILED",label:" "},{value:"PENDING",label:" "}];return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/35 p-4",children:a.jsxs("div",{className:"w-full max-w-md rounded-xl border border-gray-200 bg-white p-4 shadow-2xl",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:e.title}),e.mode==="CALL"?a.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[" : ",String(Math.floor(e.durationSec/60)).padStart(2,"0"),":",String(e.durationSec%60).padStart(2,"0")]}):a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:e.scheduled?"   ":"   "}),a.jsxs("div",{className:"mt-3",children:[a.jsx("label",{className:"text-[11px] font-semibold text-gray-600",children:""}),a.jsx("select",{value:e.result,onChange:c=>r(c.target.value),className:"mt-1 w-full rounded-md border border-gray-200 bg-white px-2 py-2 text-xs outline-none focus:border-blue-400",children:(e.mode==="CALL"?o:l).map(c=>a.jsx("option",{value:c.value,children:c.label},c.value))})]}),a.jsxs("div",{className:"mt-3",children:[a.jsx("label",{className:"text-[11px] font-semibold text-gray-600",children:""}),a.jsx("textarea",{value:e.note,onChange:c=>s(c.target.value),className:"mt-1 h-20 w-full rounded-md border border-gray-200 px-2 py-1.5 text-xs outline-none focus:border-blue-400",placeholder:"  "})]}),a.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[a.jsx("button",{onClick:n,disabled:t,className:"rounded-md border border-gray-200 px-3 py-1.5 text-xs font-semibold text-gray-700 disabled:opacity-50",children:""}),a.jsx("button",{onClick:i,disabled:t,className:"rounded-md bg-[#163b6f] px-3 py-1.5 text-xs font-semibold text-white disabled:bg-gray-300",children:t?" ...":""})]})]})})}function Ii(e){if(!e)return"-";const t=new Date(e);return Number.isNaN(t.getTime())?e:`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")} ${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`}function dCe(e){return e?e.contactMode==="MANUAL_OVERRIDE"?`  (${e.effectiveMode==="HUMAN_FIRST"?" ":" "})`:e.effectiveMode==="HUMAN_FIRST"?" ":" ":"-"}function uCe(e){return e?e.slaLevel==="OVERDUE"?"":e.slaLevel==="DUE_SOON"?"":"":"-"}function z7(e){return e?.status??""}function fCe(e){return e?e==="TRACKING"?"":e==="REEVAL_DUE"?" ":e==="REEVAL_PENDING"?" ":e==="LINKAGE_PENDING"?" ":e==="PLAN_NEEDS_UPDATE"?"  ":e==="CHURN_RISK"?" ":"":"-"}function pCe(e){return e?e==="IN_PROGRESS"?"":e==="ON_HOLD"?"":e==="EXCLUDED"?"":"":"-"}function mCe(e){return e?e==="NONE"?"":e==="RECOMMENDED"?"":e==="REFERRED"?"":e==="SCHEDULED"?"":e==="COMPLETED"?"":e:"-"}function hCe(e){return e?e==="TRACKING"?"":e==="REEVAL_DUE"?"":e==="REEVAL_PENDING"?"":e==="LINKAGE_PENDING"?"":e==="PLAN_NEEDS_UPDATE"?"":e==="CHURN_RISK"?"()":"":"-"}function N_(e){return e?e==="NOT_STARTED"?"":e==="IN_PROGRESS"?"":e==="COMPLETED"?"":e:"-"}function S_(e){if(!e||e.length===0)return"  ";const t=e.slice(0,3).join(", ");return e.length<=3?t:`${t}  ${e.length-3}`}function kq({caseId:e,stage:t,onBack:n,forceMode:r}){const s=FN(e),i=h.useMemo(()=>{const A=PN(e);return A||(s?N1(s):void 0)},[e,s]),[o,l]=h.useState(null),c=t==="Stage 2",u=r??(c?"stage2":"stage3"),m=u==="stage3",p=c&&m,g=Yz(m?e:null),x=g?.source.profile?.originStage2Result??o?.stage3Meta?.originStage2Result,y=g?.source.profile?.stage3Type??o?.stage3Meta?.stage3Type??(x==="AD"?"AD_MANAGEMENT":"PREVENTIVE_TRACKING"),v=i?.profile.phone??s?.patient.phone??"-",N=i?.profile.name??s?.patient.name??" ",S=i?.profile.age??s?.patient.age,j=m?N:e,C=i?.manager??s?.assigneeId??" ",_=i?m?` ${N}   ${S??"-"}   ${v}`:` ${oh(i.profile.age)}   ${c?v:tl(i.profile.phone)}   ${i.id}`:s?m?` ${N}   ${S??"-"}   ${v}`:` ${oh(s.patient.age)}   ${c?v:tl(v)}   ${s.caseId}`:m?"/  ":` ${e}`;return a.jsxs("div",{className:"flex h-full flex-col bg-[#f4f7fb]",children:[a.jsxs("div",{className:"sticky top-0 z-20 border-b border-slate-200 bg-white/95 px-6 py-4 shadow-sm backdrop-blur",children:[a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:n,className:"rounded-full border border-slate-200 bg-white p-2 transition-colors hover:bg-slate-50",children:a.jsx(vm,{size:20})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:j}),a.jsx("span",{className:"rounded border border-blue-200 bg-blue-50 px-3.5 py-1.5 text-sm font-bold text-blue-700",children:t})]}),a.jsxs("p",{className:"mt-0.5 flex items-center gap-2 text-xs text-gray-500",children:[a.jsxs("span",{className:"font-bold text-gray-700",children:[": ",C]}),a.jsx("span",{className:"h-2 w-px bg-gray-200"}),a.jsxs("span",{children:[" :"," ",a.jsx("span",{className:"font-bold text-blue-700",children:p?hCe(o?.stage3Meta?.opsStatus):m?g?pCe(g.source.loop.status):o?.stage3Meta?fCe(o.stage3Meta.opsStatus):z7(i):c?N_(o?.stage2Meta?.diagnosisStatus):z7(i)})]}),a.jsx("span",{className:"h-2 w-px bg-gray-200"}),a.jsx("span",{className:"text-gray-600",children:_})]})]})]}),a.jsx("div",{className:"flex items-center gap-3",children:a.jsxs("button",{className:"flex items-center gap-2 rounded-lg border border-slate-200 px-4 py-2 text-xs font-bold text-slate-700 hover:bg-slate-50",children:[a.jsx(vx,{size:14}),"   "]})})]}),o?a.jsx("div",{className:"mt-3 rounded-xl border border-slate-700 bg-gradient-to-r from-slate-900 to-slate-800 px-3 py-2 text-white",children:p&&o.stage2Meta?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-[11px] font-semibold",children:[a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",title:"/MCI/   .",children:["  ",o.stage2Meta.classificationLabel,o.stage2Meta.classificationLabel==="MCI"&&o.stage2Meta.mciStage?`(${o.stage2Meta.mciStage===""?"":o.stage2Meta.mciStage})`:""]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",title:"Stage2   .",children:["2   ",N_(o.stage2Meta.diagnosisStatus)]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",title:"      .",children:["  ",o.stage2Meta.completionPct,"%"]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",title:"     .",children:["  ",o.stage2Meta.requiredDataPct,"%"]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",title:"      .",children:["   ",Ii(o.stage2Meta.targetAt)]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",title:"     .",children:["  ",o.qualityScore,"%   ",o.missingCount,""]}),o.stage2Meta.modelAvailable===!1?a.jsxs("span",{className:"rounded-md bg-amber-100/90 px-2 py-1 text-amber-950",title:"        .",children:["   ",S_(o.stage2Meta.missingEvidence)]}):null]}),a.jsx("p",{className:"mt-1 text-[11px] text-slate-200",children:" :  /    //     ."}),a.jsxs("details",{className:"mt-1 text-[10px] text-slate-300",children:[a.jsx("summary",{className:"cursor-pointer",children:""}),a.jsxs("p",{className:"mt-1",children:["Stage2  ",Ii(o.stage2Meta.enteredAt),"    ",Ii(o.stage2Meta.targetAt),"   ",o.stage2Meta.delayDays,"    ",o.stage2Meta.nextActionLabel,"    ",Ii(o.lastUpdatedAt)]})]})]}):m&&o.stage3Meta?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-[11px] font-semibold",children:[a.jsx("span",{className:"rounded-md bg-white/15 px-2 py-1",title:y==="AD_MANAGEMENT"?"    .":"2  AD     .",children:g?.display.riskBadge.kind==="ready"?g.display.riskBadge.label:y==="AD_MANAGEMENT"?`  ${o.stage3Meta.modelAvailable&&o.stage3Meta.risk2yNowPct!=null?`${o.stage3Meta.risk2yNowPct}% (${o.stage3Meta.risk2yLabel??"-"})`:""}`:`2  ${o.stage3Meta.modelAvailable&&o.stage3Meta.risk2yNowPct!=null?`${o.stage3Meta.risk2yNowPct}% (${o.stage3Meta.risk2yLabel??"-"})`:""}`}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",title:"Stage2   Stage3  .",children:[" ",y==="AD_MANAGEMENT"?"AD":""]}),o.stage3Meta.originStage2Result?a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",title:"Stage3   Stage2  .",children:["Stage2  ",o.stage3Meta.originStage2Result]}):null,a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",title:"  .",children:["  ",Ii(o.stage3Meta.nextReevalAt)]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",title:"/  .",children:[" ",mCe(o.stage3Meta.diffPathStatus)]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",title:"  .",children:[" ",o.stage3Meta.planStatus]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",title:"   .",children:["  ",o.stage3Meta.churnRisk]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",title:" / .",children:[" ",o.qualityScore,"%   ",o.missingCount,""]}),o.stage3Meta.modelAvailable===!1?a.jsxs("span",{className:"rounded-md bg-amber-100/90 px-2 py-1 text-amber-950",title:"        .",children:["   ",S_(o.stage3Meta.missingEvidence)]}):null]}),a.jsxs("p",{className:"mt-1 text-[11px] text-slate-200",children:[" : ",y==="AD_MANAGEMENT"?"         .":"    //     ."]}),a.jsxs("details",{className:"mt-1 text-[10px] text-slate-300",children:[a.jsx("summary",{className:"cursor-pointer",children:""}),o.stage3Meta.modelAvailable?a.jsxs("p",{className:"mt-1",children:["  ",Ii(o.lastUpdatedAt),"    ",Ii(o.stage3Meta.riskUpdatedAt),"   ",o.stage3Meta.trend,"   ",o.stage3Meta.modelVersion,"   ",o.stage3Meta.trackingCycleDays,"    ",Ii(o.stage3Meta.nextTrackingContactAt)]}):a.jsxs("p",{className:"mt-1",children:["  ",Ii(o.lastUpdatedAt),"        ."]})]})]}):c&&o.stage2Meta?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-[11px] font-semibold",children:[a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:["Stage2   ",N_(o.stage2Meta.diagnosisStatus)]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:["  ",o.stage2Meta.completionPct,"% ( ",o.stage2Meta.completedCount,")"]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:["  ",o.stage2Meta.classificationLabel,o.stage2Meta.classificationLabel==="MCI"&&o.stage2Meta.mciStage?`(${o.stage2Meta.mciStage})`:""]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:["MCI  ",o.stage2Meta.mciStage??"-"]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:["Stage3   ",o.stage2Meta.stage3EntryNeeded?"TRUE":"FALSE"]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:["  ",o.qualityScore,"%"]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:[" ",o.missingCount,""]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:["  ",Ii(o.lastUpdatedAt)]}),o.stage2Meta.modelAvailable===!1?a.jsxs("span",{className:"rounded-md bg-amber-100/90 px-2 py-1 text-amber-950",title:"        .",children:["   ",S_(o.stage2Meta.missingEvidence)]}):null]}),a.jsxs("p",{className:"mt-1 text-[11px] text-slate-200",children:["Stage2  ",Ii(o.stage2Meta.enteredAt),"    ",Ii(o.stage2Meta.targetAt),"   ",o.stage2Meta.delayDays,"    ",o.stage2Meta.nextActionLabel]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-[11px] font-semibold",children:[a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:[c?"/ ":" "," ",dCe(o)]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:["SLA ",uCe(o)]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:[c?" ":" "," ",o.qualityScore,"%"]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:[" ",o.missingCount,""]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:[c?" ":""," ",o.warningCount,""]})]}),a.jsxs("p",{className:"mt-1 text-[11px] text-slate-200",children:["  ",Ii(o.lastUpdatedAt),"   : ",c?"//     .":"        ."]})]})}):null]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:a.jsx(Oq,{caseId:e,caseRecord:i,onHeaderSummaryChange:l,mode:u,surfaceStage:t})})]})}function Iq({caseId:e,onBack:t}){return a.jsx(kq,{caseId:e,stage:"Stage 2",forceMode:"stage3",onBack:t})}function Dq({caseId:e,onBack:t}){return a.jsx(kq,{caseId:e,stage:"Stage 3",onBack:t})}function gCe(e){if(!e)return"-";const t=new Date(e);return Number.isNaN(t.getTime())?e:`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")} ${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`}function xCe(e){return e?e.contactMode==="MANUAL_OVERRIDE"?`  (${e.effectiveMode==="HUMAN_FIRST"?" ":" "})`:e.effectiveMode==="HUMAN_FIRST"?" ":" ":"-"}function bCe(e){return e?e.slaLevel==="OVERDUE"?"":e.slaLevel==="DUE_SOON"?"":"":"-"}function yCe({caseId:e,stage:t,onBack:n}){const{data:r}=Sje(e),s=FN(e),i=r?.item??null,o=h.useMemo(()=>s?N1(s):i?N1(i):PN(e),[i,e,s]),[l,c]=h.useState(null),u=t==="Stage 1",m=u&&o?` ${oh(o.profile.age)}   ${tl(o.profile.phone)}   ${o.id}`:null;return t==="Stage 2"?a.jsx(Iq,{caseId:e,onBack:n}):t==="Stage 3"?a.jsx(Dq,{caseId:e,onBack:n}):a.jsxs("div",{className:"flex h-full flex-col bg-[#f4f7fb]",children:[a.jsxs("div",{className:"sticky top-0 z-20 border-b border-slate-200 bg-white/95 px-6 py-4 shadow-sm backdrop-blur",children:[a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:n,className:"rounded-full border border-slate-200 bg-white p-2 transition-colors hover:bg-slate-50",children:a.jsx(vm,{size:20})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:e}),a.jsx("span",{className:"rounded border border-blue-200 bg-blue-50 px-3.5 py-1.5 text-sm font-bold text-blue-700",children:t})]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-0.5 flex items-center gap-2",children:[a.jsxs("span",{className:"font-bold text-gray-700",children:[": ",o?.manager??" "]}),a.jsx("span",{className:"w-px h-2 bg-gray-200"}),a.jsxs("span",{children:[" : ",a.jsx("span",{className:"font-bold text-blue-700",children:o?.status??i?.status??s?.status??""})]}),m?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"w-px h-2 bg-gray-200"}),a.jsx("span",{className:"text-gray-600",children:m})]}):null]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{className:"flex items-center gap-2 rounded-lg border border-slate-200 px-4 py-2 text-xs font-bold text-slate-700 hover:bg-slate-50",children:[a.jsx(vx,{size:14}),"   "]}),a.jsxs("button",{className:"flex items-center gap-2 rounded-lg bg-[#15386a] px-4 py-2 text-xs font-bold text-white shadow-sm transition-all hover:shadow-md",children:["  1  ",a.jsx(Nm,{size:14})]})]})]}),u&&l?a.jsxs("div",{className:"mt-3 rounded-xl border border-slate-700 bg-gradient-to-r from-slate-900 to-slate-800 px-3 py-2 text-white",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-[11px] font-semibold",children:[a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:["  ",xCe(l)]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:["SLA ",bCe(l)]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:["  ",l.qualityScore,"%"]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:[" ",l.missingCount,""]}),a.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:[" ",l.warningCount,""]})]}),a.jsxs("p",{className:"mt-1 text-[11px] text-slate-200",children:["  ",gCe(l.lastUpdatedAt),"   :         ."]})]}):null]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:u?a.jsx(a.Fragment,{children:a.jsx(Oq,{caseId:e,caseRecord:o,onHeaderSummaryChange:c})}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-5",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(OX,{size:16,className:"text-gray-500"})," "]}),a.jsx("span",{className:"text-[10px] font-semibold text-gray-500 bg-gray-100 px-2 py-1 rounded",children:t==="Stage 1"?"Stage 1: ID  ":"Stage 2+:   "})]}),o?a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-xs",children:[a.jsxs("div",{className:"rounded-lg border border-gray-100 bg-gray-50 px-3 py-2",children:[a.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase",children:" "}),a.jsx("p",{className:"mt-1 font-bold text-gray-800",children:t==="Stage 1"?o.id:`${Q2e(o.profile.name)} (${o.id})`})]}),a.jsxs("div",{className:"rounded-lg border border-gray-100 bg-gray-50 px-3 py-2",children:[a.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase",children:""}),a.jsx("p",{className:"mt-1 font-bold text-gray-800",children:t==="Stage 1"?oh(o.profile.age):`${o.profile.age}`})]}),a.jsxs("div",{className:"rounded-lg border border-gray-100 bg-gray-50 px-3 py-2",children:[a.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase",children:""}),a.jsx("p",{className:"mt-1 font-bold text-gray-800",children:tl(o.profile.phone)}),t==="Stage 1"&&o.profile.guardianPhone&&a.jsxs("p",{className:"mt-1 text-[11px] text-gray-500",children:[": ",tl(o.profile.guardianPhone)]})]})]}):a.jsx("p",{className:"text-xs text-gray-500",children:"       ."})]}),t==="Stage 2"&&a.jsx(vCe,{}),t==="Stage 3"&&a.jsx(NCe,{}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-5",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4 pb-2 border-b border-gray-100",children:[a.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(xa,{size:16,className:"text-gray-400"}),"    "]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:"text-[10px] font-bold text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded flex items-center gap-1",children:[a.jsx(oc,{size:10}),"   "]}),a.jsx("button",{className:"text-[10px] font-bold text-gray-400 hover:text-gray-600",children:" "})]})]}),a.jsx("div",{className:"space-y-3",children:[{time:"2026-02-11 11:20",user:"",action:"  ",reason:"   (  15% )",logId:"LOG-9921"},{time:"2026-02-10 14:45",user:"",action:"  ",reason:"    ",logId:"LOG-8842"},{time:"2026-02-09 10:00",user:"System",action:"Stage ",reason:"2       ",logId:"LOG-7710"}].map((p,g)=>a.jsxs("div",{className:"flex gap-4 text-xs group",children:[a.jsx("div",{className:"w-32 shrink-0 font-mono text-gray-400",children:p.time}),a.jsx("div",{className:"shrink-0 font-bold text-gray-700 w-20",children:p.user}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("span",{className:"font-bold text-[#163b6f]",children:[p.action,": "]}),a.jsx("span",{className:"text-gray-600",children:p.reason})]}),a.jsxs("div",{className:"shrink-0 font-mono text-[10px] text-gray-300 opacity-0 group-hover:opacity-100 transition-opacity",children:["#",p.logId]})]},g))})]})]})})]})}function vCe(){const[e,t]=h.useState(!1),n=()=>{t(!0),De.info("      .",{description:": ,  : 2026-02-11 11:50"})};return a.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[a.jsx("div",{className:"col-span-12",children:a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm px-6 py-4 flex items-center justify-between border-l-8 border-[#163b6f]",children:[a.jsxs("div",{className:"flex items-center gap-12",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),a.jsx("span",{className:"text-xl font-bold text-[#163b6f]",children:"  "})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),a.jsx("span",{className:"text-sm font-bold text-orange-600",children:"2   ()"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),a.jsx("span",{className:"text-sm font-bold text-gray-900",children:"   "})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{className:"p-2 border border-gray-200 rounded-lg hover:bg-gray-50",children:a.jsx(ti,{size:16})}),a.jsx("button",{className:"p-2 border border-gray-200 rounded-lg hover:bg-gray-50",children:a.jsx(Zo,{size:16})})]})]})}),a.jsxs("div",{className:"col-span-8 space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[a.jsx("h3",{className:"font-bold text-gray-800 mb-6",children:"  "}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl border border-gray-100",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-white border border-gray-200 flex items-center justify-center font-bold text-[#163b6f] shadow-sm text-lg",children:"1"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-gray-900",children:"1   (CIST)"}),a.jsx("p",{className:"text-[11px] text-gray-500",children:"2026-01-15  |  "})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("span",{className:"text-xl font-bold text-orange-600",children:"18 / 30"}),a.jsx("p",{className:"text-[10px] text-gray-400",children:": "})]})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-[#163b6f]/5 rounded-xl border border-[#163b6f]/20 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-[#163b6f] flex items-center justify-center font-bold text-white shadow-lg text-lg",children:"2"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-[#163b6f]",children:"2   (SNSB)"}),a.jsx("p",{className:"text-[11px] text-gray-500",children:"2026-02-10  |   "})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("span",{className:"text-xl font-bold text-[#163b6f]",children:"-2.1 SD"}),a.jsx("p",{className:"text-[10px] text-red-600 font-bold",children:" 1 ( )"})]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:[a.jsxs("div",{className:"bg-gray-100/80 px-6 py-3 border-b border-gray-200 flex items-center justify-between",children:[a.jsxs("h3",{className:"text-xs font-bold text-gray-600 uppercase flex items-center gap-2",children:[a.jsx(ju,{size:14,className:"text-orange-500"}),"   (  )"]}),!e&&a.jsxs("button",{onClick:n,className:"flex items-center gap-1.5 px-3 py-1 bg-white border border-[#163b6f] rounded text-[10px] font-bold text-[#163b6f] hover:bg-blue-50 transition-colors shadow-sm",children:[a.jsx(Em,{size:12}),"   "]})]}),a.jsx("div",{className:"p-8 min-h-[140px] flex items-center justify-center bg-gray-50/30",children:e?a.jsxs("div",{className:"w-full grid grid-cols-2 gap-6 animate-in fade-in zoom-in duration-300",children:[a.jsxs("div",{className:"p-5 border border-red-200 bg-red-50/50 rounded-2xl text-center shadow-sm",children:[a.jsx("p",{className:"text-[10px] font-bold text-gray-400 mb-1 uppercase",children:"  "}),a.jsx("p",{className:"text-2xl font-bold text-red-700",children:"MCI (High)"})]}),a.jsxs("div",{className:"p-5 border border-blue-200 bg-blue-50/50 rounded-2xl text-center shadow-sm",children:[a.jsx("p",{className:"text-[10px] font-bold text-gray-400 mb-1 uppercase",children:"    "}),a.jsx("p",{className:"text-2xl font-bold text-blue-700",children:"82%"})]})]}):a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(ju,{size:24,className:"text-gray-300"}),a.jsx("p",{className:"text-sm text-gray-400 italic",children:"     ."})]})})]})]}),a.jsx("div",{className:"col-span-4 space-y-6",children:a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[a.jsxs("h3",{className:"font-bold text-gray-800 mb-6 flex items-center gap-2",children:[a.jsx(Nm,{size:18,className:"text-[#163b6f]"}),"   "]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-[10px] font-bold text-[#163b6f] uppercase border-l-2 border-[#163b6f] pl-2",children:"  "}),a.jsxs("button",{className:"w-full py-3 bg-[#163b6f] text-white text-xs font-bold rounded-xl hover:bg-[#0f2a50] flex items-center justify-center gap-2 shadow-md",children:[a.jsx(Bf,{size:16}),"    "]}),a.jsx("button",{className:"w-full py-2 border border-gray-200 text-gray-700 text-xs font-bold rounded-lg hover:bg-gray-50",children:"   "})]}),a.jsxs("div",{className:"space-y-2 pt-4 border-t border-gray-50",children:[a.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase border-l-2 border-gray-200 pl-2",children:"MCI  "}),a.jsx("button",{className:"w-full py-2 border border-gray-200 text-gray-700 text-xs font-bold rounded-lg hover:bg-gray-50",children:"   (CRF)"}),a.jsx("button",{className:"w-full py-2 border border-gray-200 text-gray-700 text-xs font-bold rounded-lg hover:bg-gray-50",children:"/  "})]}),a.jsxs("div",{className:"space-y-2 pt-4 border-t border-gray-50",children:[a.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase border-l-2 border-gray-200 pl-2",children:"  "}),a.jsx("button",{className:"w-full py-2 border border-gray-200 text-gray-400 text-xs font-bold rounded-lg cursor-not-allowed",disabled:!0,children:"  ( )"})]})]})]})}),a.jsx("div",{className:"col-span-12",children:a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 overflow-x-auto",children:[a.jsxs("h3",{className:"font-bold text-gray-800 mb-8 flex items-center gap-2",children:[a.jsx(xa,{size:16})," --- "]}),a.jsx("div",{className:"flex items-center min-w-[800px]",children:[{step:"",date:"01-15",status:"",color:"bg-emerald-500"},{step:"2",date:"02-10",status:"",color:"bg-emerald-500"},{step:"",date:"",status:"",color:"bg-orange-500"},{step:"",date:"",status:"",color:"bg-gray-200"},{step:"/",date:"",status:"",color:"bg-gray-200"}].map((r,s,i)=>a.jsxs(W.Fragment,{children:[a.jsxs("div",{className:"flex flex-col items-center relative z-10",children:[a.jsx("div",{className:he("w-10 h-10 rounded-full flex items-center justify-center text-white shadow-lg",r.color),children:r.status===""?a.jsx(Si,{size:20}):a.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),a.jsx("p",{className:"text-[11px] font-bold text-gray-900 mt-2",children:r.step}),a.jsx("p",{className:"text-[10px] text-gray-400",children:r.date})]}),s<i.length-1&&a.jsx("div",{className:he("flex-1 h-1 mx-2",r.status===""&&i[s+1].status===""?"bg-emerald-500":"bg-gray-100")})]},s))})]})})]})}function NCe(){const e=[{name:"24-Q3",score:85,trigger:!1},{name:"24-Q4",score:82,trigger:!1},{name:"25-Q1",score:75,trigger:!0},{name:"25-Q2",score:72,trigger:!0},{name:"26-Q1",score:68,trigger:!0}];return a.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[a.jsx("div",{className:"col-span-12",children:a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm px-6 py-4 flex items-center justify-between border-l-8 border-red-600",children:[a.jsxs("div",{className:"flex items-center gap-12",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"  "}),a.jsx("span",{className:"text-xl font-bold text-red-600",children:"  (Danger Zone)"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),a.jsx("span",{className:"text-sm font-bold text-[#163b6f]",children:"3  ()"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("div",{className:"w-2 h-2 bg-red-600 rounded-full animate-pulse"}),a.jsx("span",{className:"text-sm font-bold text-red-600",children:"  "})]})]})]}),a.jsx("div",{className:"flex items-center gap-3",children:a.jsx("span",{className:"text-[10px] font-bold text-gray-400 bg-gray-100 px-2 py-1 rounded",children:" : 95%"})})]})}),a.jsxs("div",{className:"col-span-8 space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-200 shadow-sm",children:[a.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase mb-2",children:"2  ()"}),a.jsx("p",{className:"text-2xl font-bold text-red-600",children:"-2.4 SD"}),a.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:"  15% "})]}),a.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-200 shadow-sm",children:[a.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase mb-2",children:"MRI "}),a.jsx("p",{className:"text-sm font-bold text-orange-600",children:"  "}),a.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:"MTA Scale 3"})]}),a.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-200 shadow-sm",children:[a.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase mb-2",children:" "}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"33%"}),a.jsx("p",{className:"text-[10px] text-red-600 font-bold mt-1",children:"3  "})]})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"font-bold text-gray-800",children:"  "}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("div",{className:"flex items-center gap-1.5 text-[9px] font-bold text-gray-500",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-red-600"}),"  "]}),a.jsxs("div",{className:"flex items-center gap-1.5 text-[9px] font-bold text-gray-500",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-200"}),"  "]})]})]}),a.jsx("div",{className:"h-64",children:a.jsx(Da,{width:"100%",height:"100%",children:a.jsxs(RN,{data:e,children:[a.jsx(Rs,{strokeDasharray:"3 3",vertical:!1,stroke:"#f1f5f9"}),a.jsx(oa,{dataKey:"name",fontSize:10,axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8"}}),a.jsx(Zr,{fontSize:10,axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8"}}),a.jsx(or,{}),a.jsx(Ja,{type:"monotone",dataKey:"score",stroke:"#dc2626",strokeWidth:3,dot:{r:4,fill:"#dc2626"}}),a.jsx(Ja,{type:"monotone",dataKey:"threshold",stroke:"#e2e8f0",strokeDasharray:"5 5",dot:!1,strokeWidth:2})]})})})]})]}),a.jsxs("div",{className:"col-span-4 space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[a.jsxs("h3",{className:"font-bold text-gray-800 mb-6 flex items-center gap-2 text-sm",children:[a.jsx(fs,{size:16,className:"text-red-600"}),"   "]}),a.jsx("div",{className:"space-y-4",children:[{label:"  (10% )",value:"15% ",status:"",color:"text-red-600 bg-red-50"},{label:"  (2 )",value:"1 ",status:"",color:"text-gray-400 bg-gray-50"},{label:"  (3 )",value:"4 ",status:"",color:"text-red-600 bg-red-50"}].map((t,n)=>a.jsxs("div",{className:"flex flex-col gap-1.5 border-b border-gray-50 pb-3 last:border-0 last:pb-0",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs font-bold text-gray-700",children:t.label}),a.jsx("span",{className:he("text-[9px] font-bold px-1.5 py-0.5 rounded",t.color),children:t.status})]}),a.jsxs("p",{className:"text-[10px] text-gray-500",children:[" : ",t.value]})]},n))})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-5",children:[a.jsx("h3",{className:"font-bold text-gray-800 mb-4",children:" "}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("button",{className:"w-full py-3 bg-red-600 text-white text-xs font-bold rounded-xl flex flex-col items-center gap-1 shadow-lg hover:bg-red-700 transition-all",children:[a.jsx(Zo,{size:18}),a.jsx("span",{children:"  "})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsx("button",{className:"py-2.5 border border-gray-200 rounded-lg text-[10px] font-bold text-gray-700 hover:bg-gray-50",children:"  "}),a.jsx("button",{className:"py-2.5 border border-gray-200 rounded-lg text-[10px] font-bold text-gray-700 hover:bg-gray-50",children:"/ "})]}),a.jsx("button",{className:"w-full py-2.5 border-2 border-orange-500 text-orange-600 text-[10px] font-bold rounded-lg hover:bg-orange-50",children:"  "})]})]})]}),a.jsx("div",{className:"col-span-12",children:a.jsx("div",{className:"bg-red-50 border border-red-100 rounded-xl p-3 text-[10px] text-red-700 font-bold italic text-center",children:"*       : 26-Q1            (  )"})})]})}function q7(e,[t,n]){return Math.min(n,Math.max(t,e))}function V7(e){const t=SCe(e),n=h.forwardRef((r,s)=>{const{children:i,...o}=r,l=h.Children.toArray(i),c=l.find(jCe);if(c){const u=c.props.children,m=l.map(p=>p===c?h.Children.count(u)>1?h.Children.only(null):h.isValidElement(u)?u.props.children:null:p);return a.jsx(t,{...o,ref:s,children:h.isValidElement(u)?h.cloneElement(u,void 0,m):null})}return a.jsx(t,{...o,ref:s,children:i})});return n.displayName=`${e}.Slot`,n}function SCe(e){const t=h.forwardRef((n,r)=>{const{children:s,...i}=n;if(h.isValidElement(s)){const o=ACe(s),l=wCe(i,s.props);return s.type!==h.Fragment&&(l.ref=r?tp(r,o):o),h.cloneElement(s,l)}return h.Children.count(s)>1?h.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var ECe=Symbol("radix.slottable");function jCe(e){return h.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===ECe}function wCe(e,t){const n={...t};for(const r in t){const s=e[r],i=t[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...e,...n}}function ACe(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Pq(e){const t=e+"CollectionProvider",[n,r]=cl(t),[s,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:N,children:S}=v,j=W.useRef(null),C=W.useRef(new Map).current;return a.jsx(s,{scope:N,itemMap:C,collectionRef:j,children:S})};o.displayName=t;const l=e+"CollectionSlot",c=V7(l),u=W.forwardRef((v,N)=>{const{scope:S,children:j}=v,C=i(l,S),_=Xn(N,C.collectionRef);return a.jsx(c,{ref:_,children:j})});u.displayName=l;const m=e+"CollectionItemSlot",p="data-radix-collection-item",g=V7(m),x=W.forwardRef((v,N)=>{const{scope:S,children:j,...C}=v,_=W.useRef(null),A=Xn(N,_),T=i(m,S);return W.useEffect(()=>(T.itemMap.set(_,{ref:_,...C}),()=>void T.itemMap.delete(_))),a.jsx(g,{[p]:"",ref:A,children:j})});x.displayName=m;function y(v){const N=i(e+"CollectionConsumer",v);return W.useCallback(()=>{const j=N.collectionRef.current;if(!j)return[];const C=Array.from(j.querySelectorAll(`[${p}]`));return Array.from(N.itemMap.values()).sort((T,R)=>C.indexOf(T.ref.current)-C.indexOf(R.ref.current))},[N.collectionRef,N.itemMap])}return[{Provider:o,Slot:u,ItemSlot:x},y,r]}var _Ce=h.createContext(void 0);function GN(e){const t=h.useContext(_Ce);return e||t||"ltr"}const CCe=["top","right","bottom","left"],Du=Math.min,Li=Math.max,A1=Math.round,dy=Math.floor,ic=e=>({x:e,y:e}),TCe={left:"right",right:"left",bottom:"top",top:"bottom"},OCe={start:"end",end:"start"};function IO(e,t,n){return Li(e,Du(t,n))}function md(e,t){return typeof e=="function"?e(t):e}function hd(e){return e.split("-")[0]}function Dh(e){return e.split("-")[1]}function g3(e){return e==="x"?"y":"x"}function x3(e){return e==="y"?"height":"width"}const RCe=new Set(["top","bottom"]);function Jl(e){return RCe.has(hd(e))?"y":"x"}function b3(e){return g3(Jl(e))}function kCe(e,t,n){n===void 0&&(n=!1);const r=Dh(e),s=b3(e),i=x3(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=_1(o)),[o,_1(o)]}function ICe(e){const t=_1(e);return[DO(e),t,DO(t)]}function DO(e){return e.replace(/start|end/g,t=>OCe[t])}const W7=["left","right"],Y7=["right","left"],DCe=["top","bottom"],PCe=["bottom","top"];function MCe(e,t,n){switch(e){case"top":case"bottom":return n?t?Y7:W7:t?W7:Y7;case"left":case"right":return t?DCe:PCe;default:return[]}}function LCe(e,t,n,r){const s=Dh(e);let i=MCe(hd(e),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),t&&(i=i.concat(i.map(DO)))),i}function _1(e){return e.replace(/left|right|bottom|top/g,t=>TCe[t])}function $Ce(e){return{top:0,right:0,bottom:0,left:0,...e}}function Mq(e){return typeof e!="number"?$Ce(e):{top:e,right:e,bottom:e,left:e}}function C1(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function Q7(e,t,n){let{reference:r,floating:s}=e;const i=Jl(t),o=b3(t),l=x3(o),c=hd(t),u=i==="y",m=r.x+r.width/2-s.width/2,p=r.y+r.height/2-s.height/2,g=r[l]/2-s[l]/2;let x;switch(c){case"top":x={x:m,y:r.y-s.height};break;case"bottom":x={x:m,y:r.y+r.height};break;case"right":x={x:r.x+r.width,y:p};break;case"left":x={x:r.x-s.width,y:p};break;default:x={x:r.x,y:r.y}}switch(Dh(t)){case"start":x[o]-=g*(n&&u?-1:1);break;case"end":x[o]+=g*(n&&u?-1:1);break}return x}async function FCe(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:m="viewport",elementContext:p="floating",altBoundary:g=!1,padding:x=0}=md(t,e),y=Mq(x),N=l[g?p==="floating"?"reference":"floating":p],S=C1(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(N)))==null||n?N:N.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:m,strategy:c})),j=p==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,C=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),_=await(i.isElement==null?void 0:i.isElement(C))?await(i.getScale==null?void 0:i.getScale(C))||{x:1,y:1}:{x:1,y:1},A=C1(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:j,offsetParent:C,strategy:c}):j);return{top:(S.top-A.top+y.top)/_.y,bottom:(A.bottom-S.bottom+y.bottom)/_.y,left:(S.left-A.left+y.left)/_.x,right:(A.right-S.right+y.right)/_.x}}const UCe=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:m,y:p}=Q7(u,r,c),g=r,x={},y=0;for(let N=0;N<l.length;N++){var v;const{name:S,fn:j}=l[N],{x:C,y:_,data:A,reset:T}=await j({x:m,y:p,initialPlacement:r,placement:g,strategy:s,middlewareData:x,rects:u,platform:{...o,detectOverflow:(v=o.detectOverflow)!=null?v:FCe},elements:{reference:e,floating:t}});m=C??m,p=_??p,x={...x,[S]:{...x[S],...A}},T&&y<=50&&(y++,typeof T=="object"&&(T.placement&&(g=T.placement),T.rects&&(u=T.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):T.rects),{x:m,y:p}=Q7(u,g,c)),N=-1)}return{x:m,y:p,placement:g,strategy:s,middlewareData:x}},BCe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:u,padding:m=0}=md(e,t)||{};if(u==null)return{};const p=Mq(m),g={x:n,y:r},x=b3(s),y=x3(x),v=await o.getDimensions(u),N=x==="y",S=N?"top":"left",j=N?"bottom":"right",C=N?"clientHeight":"clientWidth",_=i.reference[y]+i.reference[x]-g[x]-i.floating[y],A=g[x]-i.reference[x],T=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let R=T?T[C]:0;(!R||!await(o.isElement==null?void 0:o.isElement(T)))&&(R=l.floating[C]||i.floating[y]);const M=_/2-A/2,P=R/2-v[y]/2-1,$=Du(p[S],P),w=Du(p[j],P),U=$,X=R-v[y]-w,I=R/2-v[y]/2+M,G=IO(U,I,X),L=!c.arrow&&Dh(s)!=null&&I!==G&&i.reference[y]/2-(I<U?$:w)-v[y]/2<0,H=L?I<U?I-U:I-X:0;return{[x]:g[x]+H,data:{[x]:G,centerOffset:I-G-H,...L&&{alignmentOffset:H}},reset:L}}}),GCe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:m=!0,crossAxis:p=!0,fallbackPlacements:g,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:v=!0,...N}=md(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const S=hd(s),j=Jl(l),C=hd(l)===l,_=await(c.isRTL==null?void 0:c.isRTL(u.floating)),A=g||(C||!v?[_1(l)]:ICe(l)),T=y!=="none";!g&&T&&A.push(...LCe(l,v,y,_));const R=[l,...A],M=await c.detectOverflow(t,N),P=[];let $=((r=i.flip)==null?void 0:r.overflows)||[];if(m&&P.push(M[S]),p){const I=kCe(s,o,_);P.push(M[I[0]],M[I[1]])}if($=[...$,{placement:s,overflows:P}],!P.every(I=>I<=0)){var w,U;const I=(((w=i.flip)==null?void 0:w.index)||0)+1,G=R[I];if(G&&(!(p==="alignment"?j!==Jl(G):!1)||$.every(F=>Jl(F.placement)===j?F.overflows[0]>0:!0)))return{data:{index:I,overflows:$},reset:{placement:G}};let L=(U=$.filter(H=>H.overflows[0]<=0).sort((H,F)=>H.overflows[1]-F.overflows[1])[0])==null?void 0:U.placement;if(!L)switch(x){case"bestFit":{var X;const H=(X=$.filter(F=>{if(T){const K=Jl(F.placement);return K===j||K==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(K=>K>0).reduce((K,ne)=>K+ne,0)]).sort((F,K)=>F[1]-K[1])[0])==null?void 0:X[0];H&&(L=H);break}case"initialPlacement":L=l;break}if(s!==L)return{reset:{placement:L}}}return{}}}};function X7(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function J7(e){return CCe.some(t=>e[t]>=0)}const HCe=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n,platform:r}=t,{strategy:s="referenceHidden",...i}=md(e,t);switch(s){case"referenceHidden":{const o=await r.detectOverflow(t,{...i,elementContext:"reference"}),l=X7(o,n.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:J7(l)}}}case"escaped":{const o=await r.detectOverflow(t,{...i,altBoundary:!0}),l=X7(o,n.floating);return{data:{escapedOffsets:l,escaped:J7(l)}}}default:return{}}}}},Lq=new Set(["left","top"]);async function KCe(e,t){const{placement:n,platform:r,elements:s}=e,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=hd(n),l=Dh(n),c=Jl(n)==="y",u=Lq.has(o)?-1:1,m=i&&c?-1:1,p=md(t,e);let{mainAxis:g,crossAxis:x,alignmentAxis:y}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return l&&typeof y=="number"&&(x=l==="end"?y*-1:y),c?{x:x*m,y:g*u}:{x:g*u,y:x*m}}const zCe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:i,placement:o,middlewareData:l}=t,c=await KCe(t,e);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}},qCe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s,platform:i}=t,{mainAxis:o=!0,crossAxis:l=!1,limiter:c={fn:S=>{let{x:j,y:C}=S;return{x:j,y:C}}},...u}=md(e,t),m={x:n,y:r},p=await i.detectOverflow(t,u),g=Jl(hd(s)),x=g3(g);let y=m[x],v=m[g];if(o){const S=x==="y"?"top":"left",j=x==="y"?"bottom":"right",C=y+p[S],_=y-p[j];y=IO(C,y,_)}if(l){const S=g==="y"?"top":"left",j=g==="y"?"bottom":"right",C=v+p[S],_=v-p[j];v=IO(C,v,_)}const N=c.fn({...t,[x]:y,[g]:v});return{...N,data:{x:N.x-n,y:N.y-r,enabled:{[x]:o,[g]:l}}}}}},VCe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=md(e,t),m={x:n,y:r},p=Jl(s),g=g3(p);let x=m[g],y=m[p];const v=md(l,t),N=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const C=g==="y"?"height":"width",_=i.reference[g]-i.floating[C]+N.mainAxis,A=i.reference[g]+i.reference[C]-N.mainAxis;x<_?x=_:x>A&&(x=A)}if(u){var S,j;const C=g==="y"?"width":"height",_=Lq.has(hd(s)),A=i.reference[p]-i.floating[C]+(_&&((S=o.offset)==null?void 0:S[p])||0)+(_?0:N.crossAxis),T=i.reference[p]+i.reference[C]+(_?0:((j=o.offset)==null?void 0:j[p])||0)-(_?N.crossAxis:0);y<A?y=A:y>T&&(y=T)}return{[g]:x,[p]:y}}}},WCe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:i,platform:o,elements:l}=t,{apply:c=()=>{},...u}=md(e,t),m=await o.detectOverflow(t,u),p=hd(s),g=Dh(s),x=Jl(s)==="y",{width:y,height:v}=i.floating;let N,S;p==="top"||p==="bottom"?(N=p,S=g===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(S=p,N=g==="end"?"top":"bottom");const j=v-m.top-m.bottom,C=y-m.left-m.right,_=Du(v-m[N],j),A=Du(y-m[S],C),T=!t.middlewareData.shift;let R=_,M=A;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(M=C),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(R=j),T&&!g){const $=Li(m.left,0),w=Li(m.right,0),U=Li(m.top,0),X=Li(m.bottom,0);x?M=y-2*($!==0||w!==0?$+w:Li(m.left,m.right)):R=v-2*(U!==0||X!==0?U+X:Li(m.top,m.bottom))}await c({...t,availableWidth:M,availableHeight:R});const P=await o.getDimensions(l.floating);return y!==P.width||v!==P.height?{reset:{rects:!0}}:{}}}};function HN(){return typeof window<"u"}function Ph(e){return $q(e)?(e.nodeName||"").toLowerCase():"#document"}function Fi(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function xc(e){var t;return(t=($q(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function $q(e){return HN()?e instanceof Node||e instanceof Fi(e).Node:!1}function ol(e){return HN()?e instanceof Element||e instanceof Fi(e).Element:!1}function uc(e){return HN()?e instanceof HTMLElement||e instanceof Fi(e).HTMLElement:!1}function Z7(e){return!HN()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Fi(e).ShadowRoot}const YCe=new Set(["inline","contents"]);function Fx(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=ll(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!YCe.has(s)}const QCe=new Set(["table","td","th"]);function XCe(e){return QCe.has(Ph(e))}const JCe=[":popover-open",":modal"];function KN(e){return JCe.some(t=>{try{return e.matches(t)}catch{return!1}})}const ZCe=["transform","translate","scale","rotate","perspective"],eTe=["transform","translate","scale","rotate","perspective","filter"],tTe=["paint","layout","strict","content"];function y3(e){const t=v3(),n=ol(e)?ll(e):e;return ZCe.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||eTe.some(r=>(n.willChange||"").includes(r))||tTe.some(r=>(n.contain||"").includes(r))}function nTe(e){let t=Pu(e);for(;uc(t)&&!uh(t);){if(y3(t))return t;if(KN(t))return null;t=Pu(t)}return null}function v3(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const rTe=new Set(["html","body","#document"]);function uh(e){return rTe.has(Ph(e))}function ll(e){return Fi(e).getComputedStyle(e)}function zN(e){return ol(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Pu(e){if(Ph(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Z7(e)&&e.host||xc(e);return Z7(t)?t.host:t}function Fq(e){const t=Pu(e);return uh(t)?e.ownerDocument?e.ownerDocument.body:e.body:uc(t)&&Fx(t)?t:Fq(t)}function bx(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=Fq(e),i=s===((r=e.ownerDocument)==null?void 0:r.body),o=Fi(s);if(i){const l=PO(o);return t.concat(o,o.visualViewport||[],Fx(s)?s:[],l&&n?bx(l):[])}return t.concat(s,bx(s,[],n))}function PO(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Uq(e){const t=ll(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=uc(e),i=s?e.offsetWidth:n,o=s?e.offsetHeight:r,l=A1(n)!==i||A1(r)!==o;return l&&(n=i,r=o),{width:n,height:r,$:l}}function N3(e){return ol(e)?e:e.contextElement}function xm(e){const t=N3(e);if(!uc(t))return ic(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:i}=Uq(t);let o=(i?A1(n.width):n.width)/r,l=(i?A1(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const aTe=ic(0);function Bq(e){const t=Fi(e);return!v3()||!t.visualViewport?aTe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function sTe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Fi(e)?!1:t}function Jf(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),i=N3(e);let o=ic(1);t&&(r?ol(r)&&(o=xm(r)):o=xm(e));const l=sTe(i,n,r)?Bq(i):ic(0);let c=(s.left+l.x)/o.x,u=(s.top+l.y)/o.y,m=s.width/o.x,p=s.height/o.y;if(i){const g=Fi(i),x=r&&ol(r)?Fi(r):r;let y=g,v=PO(y);for(;v&&r&&x!==y;){const N=xm(v),S=v.getBoundingClientRect(),j=ll(v),C=S.left+(v.clientLeft+parseFloat(j.paddingLeft))*N.x,_=S.top+(v.clientTop+parseFloat(j.paddingTop))*N.y;c*=N.x,u*=N.y,m*=N.x,p*=N.y,c+=C,u+=_,y=Fi(v),v=PO(y)}}return C1({width:m,height:p,x:c,y:u})}function qN(e,t){const n=zN(e).scrollLeft;return t?t.left+n:Jf(xc(e)).left+n}function Gq(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-qN(e,n),s=n.top+t.scrollTop;return{x:r,y:s}}function iTe(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const i=s==="fixed",o=xc(r),l=t?KN(t.floating):!1;if(r===o||l&&i)return n;let c={scrollLeft:0,scrollTop:0},u=ic(1);const m=ic(0),p=uc(r);if((p||!p&&!i)&&((Ph(r)!=="body"||Fx(o))&&(c=zN(r)),uc(r))){const x=Jf(r);u=xm(r),m.x=x.x+r.clientLeft,m.y=x.y+r.clientTop}const g=o&&!p&&!i?Gq(o,c):ic(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+m.x+g.x,y:n.y*u.y-c.scrollTop*u.y+m.y+g.y}}function oTe(e){return Array.from(e.getClientRects())}function lTe(e){const t=xc(e),n=zN(e),r=e.ownerDocument.body,s=Li(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=Li(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+qN(e);const l=-n.scrollTop;return ll(r).direction==="rtl"&&(o+=Li(t.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:l}}const e8=25;function cTe(e,t){const n=Fi(e),r=xc(e),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,l=0,c=0;if(s){i=s.width,o=s.height;const m=v3();(!m||m&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}const u=qN(r);if(u<=0){const m=r.ownerDocument,p=m.body,g=getComputedStyle(p),x=m.compatMode==="CSS1Compat"&&parseFloat(g.marginLeft)+parseFloat(g.marginRight)||0,y=Math.abs(r.clientWidth-p.clientWidth-x);y<=e8&&(i-=y)}else u<=e8&&(i+=u);return{width:i,height:o,x:l,y:c}}const dTe=new Set(["absolute","fixed"]);function uTe(e,t){const n=Jf(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,i=uc(e)?xm(e):ic(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=s*i.x,u=r*i.y;return{width:o,height:l,x:c,y:u}}function t8(e,t,n){let r;if(t==="viewport")r=cTe(e,n);else if(t==="document")r=lTe(xc(e));else if(ol(t))r=uTe(t,n);else{const s=Bq(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return C1(r)}function Hq(e,t){const n=Pu(e);return n===t||!ol(n)||uh(n)?!1:ll(n).position==="fixed"||Hq(n,t)}function fTe(e,t){const n=t.get(e);if(n)return n;let r=bx(e,[],!1).filter(l=>ol(l)&&Ph(l)!=="body"),s=null;const i=ll(e).position==="fixed";let o=i?Pu(e):e;for(;ol(o)&&!uh(o);){const l=ll(o),c=y3(o);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&dTe.has(s.position)||Fx(o)&&!c&&Hq(e,o))?r=r.filter(m=>m!==o):s=l,o=Pu(o)}return t.set(e,r),r}function pTe(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const o=[...n==="clippingAncestors"?KN(t)?[]:fTe(t,this._c):[].concat(n),r],l=o[0],c=o.reduce((u,m)=>{const p=t8(t,m,s);return u.top=Li(p.top,u.top),u.right=Du(p.right,u.right),u.bottom=Du(p.bottom,u.bottom),u.left=Li(p.left,u.left),u},t8(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function mTe(e){const{width:t,height:n}=Uq(e);return{width:t,height:n}}function hTe(e,t,n){const r=uc(t),s=xc(t),i=n==="fixed",o=Jf(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=ic(0);function u(){c.x=qN(s)}if(r||!r&&!i)if((Ph(t)!=="body"||Fx(s))&&(l=zN(t)),r){const x=Jf(t,!0,i,t);c.x=x.x+t.clientLeft,c.y=x.y+t.clientTop}else s&&u();i&&!r&&s&&u();const m=s&&!r&&!i?Gq(s,l):ic(0),p=o.left+l.scrollLeft-c.x-m.x,g=o.top+l.scrollTop-c.y-m.y;return{x:p,y:g,width:o.width,height:o.height}}function E_(e){return ll(e).position==="static"}function n8(e,t){if(!uc(e)||ll(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return xc(e)===n&&(n=n.ownerDocument.body),n}function Kq(e,t){const n=Fi(e);if(KN(e))return n;if(!uc(e)){let s=Pu(e);for(;s&&!uh(s);){if(ol(s)&&!E_(s))return s;s=Pu(s)}return n}let r=n8(e,t);for(;r&&XCe(r)&&E_(r);)r=n8(r,t);return r&&uh(r)&&E_(r)&&!y3(r)?n:r||nTe(e)||n}const gTe=async function(e){const t=this.getOffsetParent||Kq,n=this.getDimensions,r=await n(e.floating);return{reference:hTe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function xTe(e){return ll(e).direction==="rtl"}const bTe={convertOffsetParentRelativeRectToViewportRelativeRect:iTe,getDocumentElement:xc,getClippingRect:pTe,getOffsetParent:Kq,getElementRects:gTe,getClientRects:oTe,getDimensions:mTe,getScale:xm,isElement:ol,isRTL:xTe};function zq(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function yTe(e,t){let n=null,r;const s=xc(e);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=e.getBoundingClientRect(),{left:m,top:p,width:g,height:x}=u;if(l||t(),!g||!x)return;const y=dy(p),v=dy(s.clientWidth-(m+g)),N=dy(s.clientHeight-(p+x)),S=dy(m),C={rootMargin:-y+"px "+-v+"px "+-N+"px "+-S+"px",threshold:Li(0,Du(1,c))||1};let _=!0;function A(T){const R=T[0].intersectionRatio;if(R!==c){if(!_)return o();R?o(!1,R):r=setTimeout(()=>{o(!1,1e-7)},1e3)}R===1&&!zq(u,e.getBoundingClientRect())&&o(),_=!1}try{n=new IntersectionObserver(A,{...C,root:s.ownerDocument})}catch{n=new IntersectionObserver(A,C)}n.observe(e)}return o(!0),i}function vTe(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=N3(e),m=s||i?[...u?bx(u):[],...bx(t)]:[];m.forEach(S=>{s&&S.addEventListener("scroll",n,{passive:!0}),i&&S.addEventListener("resize",n)});const p=u&&l?yTe(u,n):null;let g=-1,x=null;o&&(x=new ResizeObserver(S=>{let[j]=S;j&&j.target===u&&x&&(x.unobserve(t),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var C;(C=x)==null||C.observe(t)})),n()}),u&&!c&&x.observe(u),x.observe(t));let y,v=c?Jf(e):null;c&&N();function N(){const S=Jf(e);v&&!zq(v,S)&&n(),v=S,y=requestAnimationFrame(N)}return n(),()=>{var S;m.forEach(j=>{s&&j.removeEventListener("scroll",n),i&&j.removeEventListener("resize",n)}),p?.(),(S=x)==null||S.disconnect(),x=null,c&&cancelAnimationFrame(y)}}const NTe=zCe,STe=qCe,ETe=GCe,jTe=WCe,wTe=HCe,r8=BCe,ATe=VCe,_Te=(e,t,n)=>{const r=new Map,s={platform:bTe,...n},i={...s.platform,_c:r};return UCe(e,t,{...s,platform:i})};var CTe=typeof document<"u",TTe=function(){},By=CTe?h.useLayoutEffect:TTe;function T1(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!T1(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&e.$$typeof)&&!T1(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function qq(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function a8(e,t){const n=qq(e);return Math.round(t*n)/n}function j_(e){const t=h.useRef(e);return By(()=>{t.current=e}),t}function OTe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[m,p]=h.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[g,x]=h.useState(r);T1(g,r)||x(r);const[y,v]=h.useState(null),[N,S]=h.useState(null),j=h.useCallback(F=>{F!==T.current&&(T.current=F,v(F))},[]),C=h.useCallback(F=>{F!==R.current&&(R.current=F,S(F))},[]),_=i||y,A=o||N,T=h.useRef(null),R=h.useRef(null),M=h.useRef(m),P=c!=null,$=j_(c),w=j_(s),U=j_(u),X=h.useCallback(()=>{if(!T.current||!R.current)return;const F={placement:t,strategy:n,middleware:g};w.current&&(F.platform=w.current),_Te(T.current,R.current,F).then(K=>{const ne={...K,isPositioned:U.current!==!1};I.current&&!T1(M.current,ne)&&(M.current=ne,vh.flushSync(()=>{p(ne)}))})},[g,t,n,w,U]);By(()=>{u===!1&&M.current.isPositioned&&(M.current.isPositioned=!1,p(F=>({...F,isPositioned:!1})))},[u]);const I=h.useRef(!1);By(()=>(I.current=!0,()=>{I.current=!1}),[]),By(()=>{if(_&&(T.current=_),A&&(R.current=A),_&&A){if($.current)return $.current(_,A,X);X()}},[_,A,X,$,P]);const G=h.useMemo(()=>({reference:T,floating:R,setReference:j,setFloating:C}),[j,C]),L=h.useMemo(()=>({reference:_,floating:A}),[_,A]),H=h.useMemo(()=>{const F={position:n,left:0,top:0};if(!L.floating)return F;const K=a8(L.floating,m.x),ne=a8(L.floating,m.y);return l?{...F,transform:"translate("+K+"px, "+ne+"px)",...qq(L.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:K,top:ne}},[n,l,L.floating,m.x,m.y]);return h.useMemo(()=>({...m,update:X,refs:G,elements:L,floatingStyles:H}),[m,X,G,L,H])}const RTe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?r8({element:r.current,padding:s}).fn(n):{}:r?r8({element:r,padding:s}).fn(n):{}}}},kTe=(e,t)=>({...NTe(e),options:[e,t]}),ITe=(e,t)=>({...STe(e),options:[e,t]}),DTe=(e,t)=>({...ATe(e),options:[e,t]}),PTe=(e,t)=>({...ETe(e),options:[e,t]}),MTe=(e,t)=>({...jTe(e),options:[e,t]}),LTe=(e,t)=>({...wTe(e),options:[e,t]}),$Te=(e,t)=>({...RTe(e),options:[e,t]});var FTe="Arrow",Vq=h.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...i}=e;return a.jsx(yn.svg,{...i,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});Vq.displayName=FTe;var UTe=Vq,S3="Popper",[Wq,Mh]=cl(S3),[BTe,Yq]=Wq(S3),Qq=e=>{const{__scopePopper:t,children:n}=e,[r,s]=h.useState(null);return a.jsx(BTe,{scope:t,anchor:r,onAnchorChange:s,children:n})};Qq.displayName=S3;var Xq="PopperAnchor",Jq=h.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,i=Yq(Xq,n),o=h.useRef(null),l=Xn(t,o),c=h.useRef(null);return h.useEffect(()=>{const u=c.current;c.current=r?.current||o.current,u!==c.current&&i.onAnchorChange(c.current)}),r?null:a.jsx(yn.div,{...s,ref:l})});Jq.displayName=Xq;var E3="PopperContent",[GTe,HTe]=Wq(E3),Zq=h.forwardRef((e,t)=>{const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:m=0,sticky:p="partial",hideWhenDetached:g=!1,updatePositionStrategy:x="optimized",onPlaced:y,...v}=e,N=Yq(E3,n),[S,j]=h.useState(null),C=Xn(t,ie=>j(ie)),[_,A]=h.useState(null),T=jR(_),R=T?.width??0,M=T?.height??0,P=r+(i!=="center"?"-"+i:""),$=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},w=Array.isArray(u)?u:[u],U=w.length>0,X={padding:$,boundary:w.filter(zTe),altBoundary:U},{refs:I,floatingStyles:G,placement:L,isPositioned:H,middlewareData:F}=OTe({strategy:"fixed",placement:P,whileElementsMounted:(...ie)=>vTe(...ie,{animationFrame:x==="always"}),elements:{reference:N.anchor},middleware:[kTe({mainAxis:s+M,alignmentAxis:o}),c&&ITe({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?DTe():void 0,...X}),c&&PTe({...X}),MTe({...X,apply:({elements:ie,rects:Se,availableWidth:fe,availableHeight:Te})=>{const{width:Pe,height:oe}=Se.reference,le=ie.floating.style;le.setProperty("--radix-popper-available-width",`${fe}px`),le.setProperty("--radix-popper-available-height",`${Te}px`),le.setProperty("--radix-popper-anchor-width",`${Pe}px`),le.setProperty("--radix-popper-anchor-height",`${oe}px`)}}),_&&$Te({element:_,padding:l}),qTe({arrowWidth:R,arrowHeight:M}),g&&LTe({strategy:"referenceHidden",...X})]}),[K,ne]=nV(L),V=ld(y);Fa(()=>{H&&V?.()},[H,V]);const ee=F.arrow?.x,ae=F.arrow?.y,ue=F.arrow?.centerOffset!==0,[ce,Z]=h.useState();return Fa(()=>{S&&Z(window.getComputedStyle(S).zIndex)},[S]),a.jsx("div",{ref:I.setFloating,"data-radix-popper-content-wrapper":"",style:{...G,transform:H?G.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ce,"--radix-popper-transform-origin":[F.transformOrigin?.x,F.transformOrigin?.y].join(" "),...F.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:a.jsx(GTe,{scope:n,placedSide:K,onArrowChange:A,arrowX:ee,arrowY:ae,shouldHideArrow:ue,children:a.jsx(yn.div,{"data-side":K,"data-align":ne,...v,ref:C,style:{...v.style,animation:H?void 0:"none"}})})})});Zq.displayName=E3;var eV="PopperArrow",KTe={top:"bottom",right:"left",bottom:"top",left:"right"},tV=h.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,i=HTe(eV,r),o=KTe[i.placedSide];return a.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:a.jsx(UTe,{...s,ref:n,style:{...s.style,display:"block"}})})});tV.displayName=eV;function zTe(e){return e!==null}var qTe=e=>({name:"transformOrigin",options:e,fn(t){const{placement:n,rects:r,middlewareData:s}=t,o=s.arrow?.centerOffset!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[u,m]=nV(n),p={start:"0%",center:"50%",end:"100%"}[m],g=(s.arrow?.x??0)+l/2,x=(s.arrow?.y??0)+c/2;let y="",v="";return u==="bottom"?(y=o?p:`${g}px`,v=`${-c}px`):u==="top"?(y=o?p:`${g}px`,v=`${r.floating.height+c}px`):u==="right"?(y=`${-c}px`,v=o?p:`${x}px`):u==="left"&&(y=`${r.floating.width+c}px`,v=o?p:`${x}px`),{data:{x:y,y:v}}}});function nV(e){const[t,n="center"]=e.split("-");return[t,n]}var j3=Qq,VN=Jq,w3=Zq,A3=tV;function VTe(e){const t=WTe(e),n=h.forwardRef((r,s)=>{const{children:i,...o}=r,l=h.Children.toArray(i),c=l.find(QTe);if(c){const u=c.props.children,m=l.map(p=>p===c?h.Children.count(u)>1?h.Children.only(null):h.isValidElement(u)?u.props.children:null:p);return a.jsx(t,{...o,ref:s,children:h.isValidElement(u)?h.cloneElement(u,void 0,m):null})}return a.jsx(t,{...o,ref:s,children:i})});return n.displayName=`${e}.Slot`,n}function WTe(e){const t=h.forwardRef((n,r)=>{const{children:s,...i}=n;if(h.isValidElement(s)){const o=JTe(s),l=XTe(i,s.props);return s.type!==h.Fragment&&(l.ref=r?tp(r,o):o),h.cloneElement(s,l)}return h.Children.count(s)>1?h.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var YTe=Symbol("radix.slottable");function QTe(e){return h.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===YTe}function XTe(e,t){const n={...t};for(const r in t){const s=e[r],i=t[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...e,...n}}function JTe(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var rV=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),ZTe="VisuallyHidden",aV=h.forwardRef((e,t)=>a.jsx(yn.span,{...e,ref:t,style:{...rV,...e.style}}));aV.displayName=ZTe;var eOe=aV,tOe=[" ","Enter","ArrowUp","ArrowDown"],nOe=[" ","Enter"],Zf="Select",[WN,YN,rOe]=Pq(Zf),[Lh]=cl(Zf,[rOe,Mh]),QN=Mh(),[aOe,Bu]=Lh(Zf),[sOe,iOe]=Lh(Zf),sV=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:u,name:m,autoComplete:p,disabled:g,required:x,form:y}=e,v=QN(t),[N,S]=h.useState(null),[j,C]=h.useState(null),[_,A]=h.useState(!1),T=GN(u),[R,M]=od({prop:r,defaultProp:s??!1,onChange:i,caller:Zf}),[P,$]=od({prop:o,defaultProp:l,onChange:c,caller:Zf}),w=h.useRef(null),U=N?y||!!N.closest("form"):!0,[X,I]=h.useState(new Set),G=Array.from(X).map(L=>L.props.value).join(";");return a.jsx(j3,{...v,children:a.jsxs(aOe,{required:x,scope:t,trigger:N,onTriggerChange:S,valueNode:j,onValueNodeChange:C,valueNodeHasChildren:_,onValueNodeHasChildrenChange:A,contentId:tc(),value:P,onValueChange:$,open:R,onOpenChange:M,dir:T,triggerPointerDownPosRef:w,disabled:g,children:[a.jsx(WN.Provider,{scope:t,children:a.jsx(sOe,{scope:e.__scopeSelect,onNativeOptionAdd:h.useCallback(L=>{I(H=>new Set(H).add(L))},[]),onNativeOptionRemove:h.useCallback(L=>{I(H=>{const F=new Set(H);return F.delete(L),F})},[]),children:n})}),U?a.jsxs(_V,{"aria-hidden":!0,required:x,tabIndex:-1,name:m,autoComplete:p,value:P,onChange:L=>$(L.target.value),disabled:g,form:y,children:[P===void 0?a.jsx("option",{value:""}):null,Array.from(X)]},G):null]})})};sV.displayName=Zf;var iV="SelectTrigger",oV=h.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...s}=e,i=QN(n),o=Bu(iV,n),l=o.disabled||r,c=Xn(t,o.onTriggerChange),u=YN(n),m=h.useRef("touch"),[p,g,x]=TV(v=>{const N=u().filter(C=>!C.disabled),S=N.find(C=>C.value===o.value),j=OV(N,v,S);j!==void 0&&o.onValueChange(j.value)}),y=v=>{l||(o.onOpenChange(!0),x()),v&&(o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return a.jsx(VN,{asChild:!0,...i,children:a.jsx(yn.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":CV(o.value)?"":void 0,...s,ref:c,onClick:on(s.onClick,v=>{v.currentTarget.focus(),m.current!=="mouse"&&y(v)}),onPointerDown:on(s.onPointerDown,v=>{m.current=v.pointerType;const N=v.target;N.hasPointerCapture(v.pointerId)&&N.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(y(v),v.preventDefault())}),onKeyDown:on(s.onKeyDown,v=>{const N=p.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&g(v.key),!(N&&v.key===" ")&&tOe.includes(v.key)&&(y(),v.preventDefault())})})})});oV.displayName=iV;var lV="SelectValue",cV=h.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:o="",...l}=e,c=Bu(lV,n),{onValueNodeHasChildrenChange:u}=c,m=i!==void 0,p=Xn(t,c.onValueNodeChange);return Fa(()=>{u(m)},[u,m]),a.jsx(yn.span,{...l,ref:p,style:{pointerEvents:"none"},children:CV(c.value)?a.jsx(a.Fragment,{children:o}):i})});cV.displayName=lV;var oOe="SelectIcon",dV=h.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...s}=e;return a.jsx(yn.span,{"aria-hidden":!0,...s,ref:t,children:r||""})});dV.displayName=oOe;var lOe="SelectPortal",uV=e=>a.jsx(wx,{asChild:!0,...e});uV.displayName=lOe;var ep="SelectContent",fV=h.forwardRef((e,t)=>{const n=Bu(ep,e.__scopeSelect),[r,s]=h.useState();if(Fa(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?vh.createPortal(a.jsx(pV,{scope:e.__scopeSelect,children:a.jsx(WN.Slot,{scope:e.__scopeSelect,children:a.jsx("div",{children:e.children})})}),i):null}return a.jsx(mV,{...e,ref:t})});fV.displayName=ep;var qo=10,[pV,Gu]=Lh(ep),cOe="SelectContentImpl",dOe=VTe("SelectContent.RemoveScroll"),mV=h.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:m,arrowPadding:p,collisionBoundary:g,collisionPadding:x,sticky:y,hideWhenDetached:v,avoidCollisions:N,...S}=e,j=Bu(ep,n),[C,_]=h.useState(null),[A,T]=h.useState(null),R=Xn(t,ie=>_(ie)),[M,P]=h.useState(null),[$,w]=h.useState(null),U=YN(n),[X,I]=h.useState(!1),G=h.useRef(!1);h.useEffect(()=>{if(C)return _R(C)},[C]),AR();const L=h.useCallback(ie=>{const[Se,...fe]=U().map(oe=>oe.ref.current),[Te]=fe.slice(-1),Pe=document.activeElement;for(const oe of ie)if(oe===Pe||(oe?.scrollIntoView({block:"nearest"}),oe===Se&&A&&(A.scrollTop=0),oe===Te&&A&&(A.scrollTop=A.scrollHeight),oe?.focus(),document.activeElement!==Pe))return},[U,A]),H=h.useCallback(()=>L([M,C]),[L,M,C]);h.useEffect(()=>{X&&H()},[X,H]);const{onOpenChange:F,triggerPointerDownPosRef:K}=j;h.useEffect(()=>{if(C){let ie={x:0,y:0};const Se=Te=>{ie={x:Math.abs(Math.round(Te.pageX)-(K.current?.x??0)),y:Math.abs(Math.round(Te.pageY)-(K.current?.y??0))}},fe=Te=>{ie.x<=10&&ie.y<=10?Te.preventDefault():C.contains(Te.target)||F(!1),document.removeEventListener("pointermove",Se),K.current=null};return K.current!==null&&(document.addEventListener("pointermove",Se),document.addEventListener("pointerup",fe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Se),document.removeEventListener("pointerup",fe,{capture:!0})}}},[C,F,K]),h.useEffect(()=>{const ie=()=>F(!1);return window.addEventListener("blur",ie),window.addEventListener("resize",ie),()=>{window.removeEventListener("blur",ie),window.removeEventListener("resize",ie)}},[F]);const[ne,V]=TV(ie=>{const Se=U().filter(Pe=>!Pe.disabled),fe=Se.find(Pe=>Pe.ref.current===document.activeElement),Te=OV(Se,ie,fe);Te&&setTimeout(()=>Te.ref.current.focus())}),ee=h.useCallback((ie,Se,fe)=>{const Te=!G.current&&!fe;(j.value!==void 0&&j.value===Se||Te)&&(P(ie),Te&&(G.current=!0))},[j.value]),ae=h.useCallback(()=>C?.focus(),[C]),ue=h.useCallback((ie,Se,fe)=>{const Te=!G.current&&!fe;(j.value!==void 0&&j.value===Se||Te)&&w(ie)},[j.value]),ce=r==="popper"?MO:hV,Z=ce===MO?{side:l,sideOffset:c,align:u,alignOffset:m,arrowPadding:p,collisionBoundary:g,collisionPadding:x,sticky:y,hideWhenDetached:v,avoidCollisions:N}:{};return a.jsx(pV,{scope:n,content:C,viewport:A,onViewportChange:T,itemRefCallback:ee,selectedItem:M,onItemLeave:ae,itemTextRefCallback:ue,focusSelectedItem:H,selectedItemText:$,position:r,isPositioned:X,searchRef:ne,children:a.jsx(G1,{as:dOe,allowPinchZoom:!0,children:a.jsx(U1,{asChild:!0,trapped:j.open,onMountAutoFocus:ie=>{ie.preventDefault()},onUnmountAutoFocus:on(s,ie=>{j.trigger?.focus({preventScroll:!0}),ie.preventDefault()}),children:a.jsx(jx,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:ie=>ie.preventDefault(),onDismiss:()=>j.onOpenChange(!1),children:a.jsx(ce,{role:"listbox",id:j.contentId,"data-state":j.open?"open":"closed",dir:j.dir,onContextMenu:ie=>ie.preventDefault(),...S,...Z,onPlaced:()=>I(!0),ref:R,style:{display:"flex",flexDirection:"column",outline:"none",...S.style},onKeyDown:on(S.onKeyDown,ie=>{const Se=ie.ctrlKey||ie.altKey||ie.metaKey;if(ie.key==="Tab"&&ie.preventDefault(),!Se&&ie.key.length===1&&V(ie.key),["ArrowUp","ArrowDown","Home","End"].includes(ie.key)){let Te=U().filter(Pe=>!Pe.disabled).map(Pe=>Pe.ref.current);if(["ArrowUp","End"].includes(ie.key)&&(Te=Te.slice().reverse()),["ArrowUp","ArrowDown"].includes(ie.key)){const Pe=ie.target,oe=Te.indexOf(Pe);Te=Te.slice(oe+1)}setTimeout(()=>L(Te)),ie.preventDefault()}})})})})})})});mV.displayName=cOe;var uOe="SelectItemAlignedPosition",hV=h.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...s}=e,i=Bu(ep,n),o=Gu(ep,n),[l,c]=h.useState(null),[u,m]=h.useState(null),p=Xn(t,R=>m(R)),g=YN(n),x=h.useRef(!1),y=h.useRef(!0),{viewport:v,selectedItem:N,selectedItemText:S,focusSelectedItem:j}=o,C=h.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&v&&N&&S){const R=i.trigger.getBoundingClientRect(),M=u.getBoundingClientRect(),P=i.valueNode.getBoundingClientRect(),$=S.getBoundingClientRect();if(i.dir!=="rtl"){const Pe=$.left-M.left,oe=P.left-Pe,le=R.left-oe,ye=R.width+le,_e=Math.max(ye,M.width),te=window.innerWidth-qo,z=q7(oe,[qo,Math.max(qo,te-_e)]);l.style.minWidth=ye+"px",l.style.left=z+"px"}else{const Pe=M.right-$.right,oe=window.innerWidth-P.right-Pe,le=window.innerWidth-R.right-oe,ye=R.width+le,_e=Math.max(ye,M.width),te=window.innerWidth-qo,z=q7(oe,[qo,Math.max(qo,te-_e)]);l.style.minWidth=ye+"px",l.style.right=z+"px"}const w=g(),U=window.innerHeight-qo*2,X=v.scrollHeight,I=window.getComputedStyle(u),G=parseInt(I.borderTopWidth,10),L=parseInt(I.paddingTop,10),H=parseInt(I.borderBottomWidth,10),F=parseInt(I.paddingBottom,10),K=G+L+X+F+H,ne=Math.min(N.offsetHeight*5,K),V=window.getComputedStyle(v),ee=parseInt(V.paddingTop,10),ae=parseInt(V.paddingBottom,10),ue=R.top+R.height/2-qo,ce=U-ue,Z=N.offsetHeight/2,ie=N.offsetTop+Z,Se=G+L+ie,fe=K-Se;if(Se<=ue){const Pe=w.length>0&&N===w[w.length-1].ref.current;l.style.bottom="0px";const oe=u.clientHeight-v.offsetTop-v.offsetHeight,le=Math.max(ce,Z+(Pe?ae:0)+oe+H),ye=Se+le;l.style.height=ye+"px"}else{const Pe=w.length>0&&N===w[0].ref.current;l.style.top="0px";const le=Math.max(ue,G+v.offsetTop+(Pe?ee:0)+Z)+fe;l.style.height=le+"px",v.scrollTop=Se-ue+v.offsetTop}l.style.margin=`${qo}px 0`,l.style.minHeight=ne+"px",l.style.maxHeight=U+"px",r?.(),requestAnimationFrame(()=>x.current=!0)}},[g,i.trigger,i.valueNode,l,u,v,N,S,i.dir,r]);Fa(()=>C(),[C]);const[_,A]=h.useState();Fa(()=>{u&&A(window.getComputedStyle(u).zIndex)},[u]);const T=h.useCallback(R=>{R&&y.current===!0&&(C(),j?.(),y.current=!1)},[C,j]);return a.jsx(pOe,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:x,onScrollButtonChange:T,children:a.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:a.jsx(yn.div,{...s,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});hV.displayName=uOe;var fOe="SelectPopperPosition",MO=h.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=qo,...i}=e,o=QN(n);return a.jsx(w3,{...o,...i,ref:t,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});MO.displayName=fOe;var[pOe,_3]=Lh(ep,{}),LO="SelectViewport",gV=h.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...s}=e,i=Gu(LO,n),o=_3(LO,n),l=Xn(t,i.onViewportChange),c=h.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),a.jsx(WN.Slot,{scope:n,children:a.jsx(yn.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:on(s.onScroll,u=>{const m=u.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:g}=o;if(g?.current&&p){const x=Math.abs(c.current-m.scrollTop);if(x>0){const y=window.innerHeight-qo*2,v=parseFloat(p.style.minHeight),N=parseFloat(p.style.height),S=Math.max(v,N);if(S<y){const j=S+x,C=Math.min(y,j),_=j-C;p.style.height=C+"px",p.style.bottom==="0px"&&(m.scrollTop=_>0?_:0,p.style.justifyContent="flex-end")}}}c.current=m.scrollTop})})})]})});gV.displayName=LO;var xV="SelectGroup",[mOe,hOe]=Lh(xV),gOe=h.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=tc();return a.jsx(mOe,{scope:n,id:s,children:a.jsx(yn.div,{role:"group","aria-labelledby":s,...r,ref:t})})});gOe.displayName=xV;var bV="SelectLabel",xOe=h.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=hOe(bV,n);return a.jsx(yn.div,{id:s.id,...r,ref:t})});xOe.displayName=bV;var O1="SelectItem",[bOe,yV]=Lh(O1),vV=h.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...o}=e,l=Bu(O1,n),c=Gu(O1,n),u=l.value===r,[m,p]=h.useState(i??""),[g,x]=h.useState(!1),y=Xn(t,j=>c.itemRefCallback?.(j,r,s)),v=tc(),N=h.useRef("touch"),S=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(bOe,{scope:n,value:r,disabled:s,textId:v,isSelected:u,onItemTextChange:h.useCallback(j=>{p(C=>C||(j?.textContent??"").trim())},[]),children:a.jsx(WN.ItemSlot,{scope:n,value:r,disabled:s,textValue:m,children:a.jsx(yn.div,{role:"option","aria-labelledby":v,"data-highlighted":g?"":void 0,"aria-selected":u&&g,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:y,onFocus:on(o.onFocus,()=>x(!0)),onBlur:on(o.onBlur,()=>x(!1)),onClick:on(o.onClick,()=>{N.current!=="mouse"&&S()}),onPointerUp:on(o.onPointerUp,()=>{N.current==="mouse"&&S()}),onPointerDown:on(o.onPointerDown,j=>{N.current=j.pointerType}),onPointerMove:on(o.onPointerMove,j=>{N.current=j.pointerType,s?c.onItemLeave?.():N.current==="mouse"&&j.currentTarget.focus({preventScroll:!0})}),onPointerLeave:on(o.onPointerLeave,j=>{j.currentTarget===document.activeElement&&c.onItemLeave?.()}),onKeyDown:on(o.onKeyDown,j=>{c.searchRef?.current!==""&&j.key===" "||(nOe.includes(j.key)&&S(),j.key===" "&&j.preventDefault())})})})})});vV.displayName=O1;var dg="SelectItemText",NV=h.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,...i}=e,o=Bu(dg,n),l=Gu(dg,n),c=yV(dg,n),u=iOe(dg,n),[m,p]=h.useState(null),g=Xn(t,S=>p(S),c.onItemTextChange,S=>l.itemTextRefCallback?.(S,c.value,c.disabled)),x=m?.textContent,y=h.useMemo(()=>a.jsx("option",{value:c.value,disabled:c.disabled,children:x},c.value),[c.disabled,c.value,x]),{onNativeOptionAdd:v,onNativeOptionRemove:N}=u;return Fa(()=>(v(y),()=>N(y)),[v,N,y]),a.jsxs(a.Fragment,{children:[a.jsx(yn.span,{id:c.textId,...i,ref:g}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?vh.createPortal(i.children,o.valueNode):null]})});NV.displayName=dg;var SV="SelectItemIndicator",EV=h.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return yV(SV,n).isSelected?a.jsx(yn.span,{"aria-hidden":!0,...r,ref:t}):null});EV.displayName=SV;var $O="SelectScrollUpButton",jV=h.forwardRef((e,t)=>{const n=Gu($O,e.__scopeSelect),r=_3($O,e.__scopeSelect),[s,i]=h.useState(!1),o=Xn(t,r.onScrollButtonChange);return Fa(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?a.jsx(AV,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});jV.displayName=$O;var FO="SelectScrollDownButton",wV=h.forwardRef((e,t)=>{const n=Gu(FO,e.__scopeSelect),r=_3(FO,e.__scopeSelect),[s,i]=h.useState(!1),o=Xn(t,r.onScrollButtonChange);return Fa(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,m=Math.ceil(c.scrollTop)<u;i(m)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?a.jsx(AV,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});wV.displayName=FO;var AV=h.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=e,i=Gu("SelectScrollButton",n),o=h.useRef(null),l=YN(n),c=h.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return h.useEffect(()=>()=>c(),[c]),Fa(()=>{l().find(m=>m.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[l]),a.jsx(yn.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:on(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:on(s.onPointerMove,()=>{i.onItemLeave?.(),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:on(s.onPointerLeave,()=>{c()})})}),yOe="SelectSeparator",vOe=h.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return a.jsx(yn.div,{"aria-hidden":!0,...r,ref:t})});vOe.displayName=yOe;var UO="SelectArrow",NOe=h.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=QN(n),i=Bu(UO,n),o=Gu(UO,n);return i.open&&o.position==="popper"?a.jsx(A3,{...s,...r,ref:t}):null});NOe.displayName=UO;var SOe="SelectBubbleInput",_V=h.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const s=h.useRef(null),i=Xn(r,s),o=ER(t);return h.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLSelectElement.prototype,m=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&m){const p=new Event("change",{bubbles:!0});m.call(l,t),l.dispatchEvent(p)}},[o,t]),a.jsx(yn.select,{...n,style:{...rV,...n.style},ref:i,defaultValue:t})});_V.displayName=SOe;function CV(e){return e===""||e===void 0}function TV(e){const t=ld(e),n=h.useRef(""),r=h.useRef(0),s=h.useCallback(o=>{const l=n.current+o;t(l),(function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))})(l)},[t]),i=h.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return h.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function OV(e,t,n){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=EOe(e,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function EOe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var jOe=sV,wOe=oV,AOe=cV,_Oe=dV,COe=uV,TOe=fV,OOe=gV,ROe=vV,kOe=NV,IOe=EV,DOe=jV,POe=wV;function w_({...e}){return a.jsx(jOe,{"data-slot":"select",...e})}function A_({...e}){return a.jsx(AOe,{"data-slot":"select-value",...e})}function __({className:e,size:t="default",children:n,...r}){return a.jsxs(wOe,{"data-slot":"select-trigger","data-size":t,className:he("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r,children:[n,a.jsx(_Oe,{asChild:!0,children:a.jsx(Ds,{className:"size-4 opacity-50"})})]})}function C_({className:e,children:t,position:n="popper",...r}){return a.jsx(COe,{children:a.jsxs(TOe,{"data-slot":"select-content",className:he("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[a.jsx(MOe,{}),a.jsx(OOe,{className:he("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),a.jsx(LOe,{})]})})}function Wr({className:e,children:t,...n}){return a.jsxs(ROe,{"data-slot":"select-item",className:he("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...n,children:[a.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:a.jsx(IOe,{children:a.jsx(Uf,{className:"size-4"})})}),a.jsx(kOe,{children:t})]})}function MOe({className:e,...t}){return a.jsx(DOe,{"data-slot":"select-scroll-up-button",className:he("flex cursor-default items-center justify-center py-1",e),...t,children:a.jsx(id,{className:"size-4"})})}function LOe({className:e,...t}){return a.jsx(POe,{"data-slot":"select-scroll-down-button",className:he("flex cursor-default items-center justify-center py-1",e),...t,children:a.jsx(Ds,{className:"size-4"})})}var T_="rovingFocusGroup.onEntryFocus",$Oe={bubbles:!1,cancelable:!0},Ux="RovingFocusGroup",[BO,RV,FOe]=Pq(Ux),[UOe,XN]=cl(Ux,[FOe]),[BOe,GOe]=UOe(Ux),kV=h.forwardRef((e,t)=>a.jsx(BO.Provider,{scope:e.__scopeRovingFocusGroup,children:a.jsx(BO.Slot,{scope:e.__scopeRovingFocusGroup,children:a.jsx(HOe,{...e,ref:t})})}));kV.displayName=Ux;var HOe=h.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:m=!1,...p}=e,g=h.useRef(null),x=Xn(t,g),y=GN(i),[v,N]=od({prop:o,defaultProp:l??null,onChange:c,caller:Ux}),[S,j]=h.useState(!1),C=ld(u),_=RV(n),A=h.useRef(!1),[T,R]=h.useState(0);return h.useEffect(()=>{const M=g.current;if(M)return M.addEventListener(T_,C),()=>M.removeEventListener(T_,C)},[C]),a.jsx(BOe,{scope:n,orientation:r,dir:y,loop:s,currentTabStopId:v,onItemFocus:h.useCallback(M=>N(M),[N]),onItemShiftTab:h.useCallback(()=>j(!0),[]),onFocusableItemAdd:h.useCallback(()=>R(M=>M+1),[]),onFocusableItemRemove:h.useCallback(()=>R(M=>M-1),[]),children:a.jsx(yn.div,{tabIndex:S||T===0?-1:0,"data-orientation":r,...p,ref:x,style:{outline:"none",...e.style},onMouseDown:on(e.onMouseDown,()=>{A.current=!0}),onFocus:on(e.onFocus,M=>{const P=!A.current;if(M.target===M.currentTarget&&P&&!S){const $=new CustomEvent(T_,$Oe);if(M.currentTarget.dispatchEvent($),!$.defaultPrevented){const w=_().filter(L=>L.focusable),U=w.find(L=>L.active),X=w.find(L=>L.id===v),G=[U,X,...w].filter(Boolean).map(L=>L.ref.current);PV(G,m)}}A.current=!1}),onBlur:on(e.onBlur,()=>j(!1))})})}),IV="RovingFocusGroupItem",DV=h.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:o,...l}=e,c=tc(),u=i||c,m=GOe(IV,n),p=m.currentTabStopId===u,g=RV(n),{onFocusableItemAdd:x,onFocusableItemRemove:y,currentTabStopId:v}=m;return h.useEffect(()=>{if(r)return x(),()=>y()},[r,x,y]),a.jsx(BO.ItemSlot,{scope:n,id:u,focusable:r,active:s,children:a.jsx(yn.span,{tabIndex:p?0:-1,"data-orientation":m.orientation,...l,ref:t,onMouseDown:on(e.onMouseDown,N=>{r?m.onItemFocus(u):N.preventDefault()}),onFocus:on(e.onFocus,()=>m.onItemFocus(u)),onKeyDown:on(e.onKeyDown,N=>{if(N.key==="Tab"&&N.shiftKey){m.onItemShiftTab();return}if(N.target!==N.currentTarget)return;const S=qOe(N,m.orientation,m.dir);if(S!==void 0){if(N.metaKey||N.ctrlKey||N.altKey||N.shiftKey)return;N.preventDefault();let C=g().filter(_=>_.focusable).map(_=>_.ref.current);if(S==="last")C.reverse();else if(S==="prev"||S==="next"){S==="prev"&&C.reverse();const _=C.indexOf(N.currentTarget);C=m.loop?VOe(C,_+1):C.slice(_+1)}setTimeout(()=>PV(C))}}),children:typeof o=="function"?o({isCurrentTabStop:p,hasTabStop:v!=null}):o})})});DV.displayName=IV;var KOe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function zOe(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function qOe(e,t,n){const r=zOe(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return KOe[r]}function PV(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function VOe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var MV=kV,LV=DV,C3="Radio",[WOe,$V]=cl(C3),[YOe,QOe]=WOe(C3),FV=h.forwardRef((e,t)=>{const{__scopeRadio:n,name:r,checked:s=!1,required:i,disabled:o,value:l="on",onCheck:c,form:u,...m}=e,[p,g]=h.useState(null),x=Xn(t,N=>g(N)),y=h.useRef(!1),v=p?u||!!p.closest("form"):!0;return a.jsxs(YOe,{scope:n,checked:s,disabled:o,children:[a.jsx(yn.button,{type:"button",role:"radio","aria-checked":s,"data-state":HV(s),"data-disabled":o?"":void 0,disabled:o,value:l,...m,ref:x,onClick:on(e.onClick,N=>{s||c?.(),v&&(y.current=N.isPropagationStopped(),y.current||N.stopPropagation())})}),v&&a.jsx(GV,{control:p,bubbles:!y.current,name:r,value:l,checked:s,required:i,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});FV.displayName=C3;var UV="RadioIndicator",BV=h.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:r,...s}=e,i=QOe(UV,n);return a.jsx(dl,{present:r||i.checked,children:a.jsx(yn.span,{"data-state":HV(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:t})})});BV.displayName=UV;var XOe="RadioBubbleInput",GV=h.forwardRef(({__scopeRadio:e,control:t,checked:n,bubbles:r=!0,...s},i)=>{const o=h.useRef(null),l=Xn(o,i),c=ER(n),u=jR(t);return h.useEffect(()=>{const m=o.current;if(!m)return;const p=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(p,"checked").set;if(c!==n&&x){const y=new Event("click",{bubbles:r});x.call(m,n),m.dispatchEvent(y)}},[c,n,r]),a.jsx(yn.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});GV.displayName=XOe;function HV(e){return e?"checked":"unchecked"}var JOe=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],JN="RadioGroup",[ZOe]=cl(JN,[XN,$V]),KV=XN(),zV=$V(),[eRe,tRe]=ZOe(JN),qV=h.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:r,defaultValue:s,value:i,required:o=!1,disabled:l=!1,orientation:c,dir:u,loop:m=!0,onValueChange:p,...g}=e,x=KV(n),y=GN(u),[v,N]=od({prop:i,defaultProp:s??null,onChange:p,caller:JN});return a.jsx(eRe,{scope:n,name:r,required:o,disabled:l,value:v,onValueChange:N,children:a.jsx(MV,{asChild:!0,...x,orientation:c,dir:y,loop:m,children:a.jsx(yn.div,{role:"radiogroup","aria-required":o,"aria-orientation":c,"data-disabled":l?"":void 0,dir:y,...g,ref:t})})})});qV.displayName=JN;var VV="RadioGroupItem",WV=h.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:r,...s}=e,i=tRe(VV,n),o=i.disabled||r,l=KV(n),c=zV(n),u=h.useRef(null),m=Xn(t,u),p=i.value===s.value,g=h.useRef(!1);return h.useEffect(()=>{const x=v=>{JOe.includes(v.key)&&(g.current=!0)},y=()=>g.current=!1;return document.addEventListener("keydown",x),document.addEventListener("keyup",y),()=>{document.removeEventListener("keydown",x),document.removeEventListener("keyup",y)}},[]),a.jsx(LV,{asChild:!0,...l,focusable:!o,active:p,children:a.jsx(FV,{disabled:o,required:i.required,checked:p,...c,...s,name:i.name,ref:m,onCheck:()=>i.onValueChange(s.value),onKeyDown:on(x=>{x.key==="Enter"&&x.preventDefault()}),onFocus:on(s.onFocus,()=>{g.current&&u.current?.click()})})})});WV.displayName=VV;var nRe="RadioGroupIndicator",YV=h.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...r}=e,s=zV(n);return a.jsx(BV,{...s,...r,ref:t})});YV.displayName=nRe;var rRe=qV,aRe=WV,sRe=YV;function s8({className:e,...t}){return a.jsx(rRe,{"data-slot":"radio-group",className:he("grid gap-3",e),...t})}function Lp({className:e,...t}){return a.jsx(aRe,{"data-slot":"radio-group-item",className:he("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:a.jsx(sRe,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:a.jsx(IX,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}var iRe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],oRe=iRe.reduce((e,t)=>{const n=$1(`Primitive.${t}`),r=h.forwardRef((s,i)=>{const{asChild:o,...l}=s,c=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),lRe="Separator",i8="horizontal",cRe=["horizontal","vertical"],QV=h.forwardRef((e,t)=>{const{decorative:n,orientation:r=i8,...s}=e,i=dRe(r)?r:i8,l=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return a.jsx(oRe.div,{"data-orientation":i,...l,...s,ref:t})});QV.displayName=lRe;function dRe(e){return cRe.includes(e)}var uRe=QV;function M0({className:e,orientation:t="horizontal",decorative:n=!0,...r}){return a.jsx(uRe,{"data-slot":"separator-root",decorative:n,orientation:t,className:he("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...r})}var ZN="Tabs",[fRe]=cl(ZN,[XN]),XV=XN(),[pRe,T3]=fRe(ZN),JV=h.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=e,m=GN(l),[p,g]=od({prop:r,onChange:s,defaultProp:i??"",caller:ZN});return a.jsx(pRe,{scope:n,baseId:tc(),value:p,onValueChange:g,orientation:o,dir:m,activationMode:c,children:a.jsx(yn.div,{dir:m,"data-orientation":o,...u,ref:t})})});JV.displayName=ZN;var ZV="TabsList",eW=h.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...s}=e,i=T3(ZV,n),o=XV(n);return a.jsx(MV,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:a.jsx(yn.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:t})})});eW.displayName=ZV;var tW="TabsTrigger",nW=h.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=e,o=T3(tW,n),l=XV(n),c=sW(o.baseId,r),u=iW(o.baseId,r),m=r===o.value;return a.jsx(LV,{asChild:!0,...l,focusable:!s,active:m,children:a.jsx(yn.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":u,"data-state":m?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:t,onMouseDown:on(e.onMouseDown,p=>{!s&&p.button===0&&p.ctrlKey===!1?o.onValueChange(r):p.preventDefault()}),onKeyDown:on(e.onKeyDown,p=>{[" ","Enter"].includes(p.key)&&o.onValueChange(r)}),onFocus:on(e.onFocus,()=>{const p=o.activationMode!=="manual";!m&&!s&&p&&o.onValueChange(r)})})})});nW.displayName=tW;var rW="TabsContent",aW=h.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...o}=e,l=T3(rW,n),c=sW(l.baseId,r),u=iW(l.baseId,r),m=r===l.value,p=h.useRef(m);return h.useEffect(()=>{const g=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(g)},[]),a.jsx(dl,{present:s||m,children:({present:g})=>a.jsx(yn.div,{"data-state":m?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!g,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:p.current?"0s":void 0},children:g&&i})})});aW.displayName=rW;function sW(e,t){return`${e}-trigger-${t}`}function iW(e,t){return`${e}-content-${t}`}var mRe=JV,hRe=eW,gRe=nW,xRe=aW;function bRe({className:e,...t}){return a.jsx(mRe,{"data-slot":"tabs",className:he("flex flex-col gap-2",e),...t})}function yRe({className:e,...t}){return a.jsx(hRe,{"data-slot":"tabs-list",className:he("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",e),...t})}function uy({className:e,...t}){return a.jsx(gRe,{"data-slot":"tabs-trigger",className:he("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function fy({className:e,...t}){return a.jsx(xRe,{"data-slot":"tabs-content",className:he("flex-1 outline-none",e),...t})}function vRe(e){return e===""?"reconsultation":e===""||e===""?"dropout_recontact":e===""||e===""?"contacted":"new"}function NRe(e,t){return Math.max(1,Math.min(99,(t===""?92:t===""?78:t===""?58:38)+(e===""?6:e===""?-6:0)))}function SRe({caseId:e,patientName:t,initialTab:n="consultation",showReferralTab:r=!0,onComplete:s,onCancel:i,onBack:o}){const l=h.useMemo(()=>PN(e),[e]),c=h.useMemo(()=>yz(l),[l]),[u,m]=h.useState(n),[p,g]=h.useState("new"),[x,y]=h.useState(null),[v,N]=h.useState(!0),[S,j]=h.useState("greeting"),[C,_]=h.useState(""),[A,T]=h.useState(""),[R,M]=h.useState(""),[P,$]=h.useState(""),[w,U]=h.useState(""),[X,I]=h.useState(""),[G,L]=h.useState(""),[H,F]=h.useState(""),[K,ne]=h.useState(""),[V,ee]=h.useState(""),[ae,ue]=h.useState(""),[ce,Z]=h.useState(""),[ie,Se]=h.useState(""),[fe,Te]=h.useState({}),[Pe,oe]=h.useState(!1),[le,ye]=h.useState(""),[_e,te]=h.useState([]),[z,Ne]=h.useState("citizen"),me=h.useMemo(()=>l?{id:l.id,patientId:l.id,patientName:l.profile.name,ageGroup:oh(l.profile.age),gender:"",phone:l.profile.phone,guardianPhone:l.profile.guardianPhone??"",address:"    ",riskLevel:l.risk===""?"high":l.risk===""?"medium":"low",riskScore:NRe(l.risk,c.label),contactPriorityLabel:c.label,status:vRe(l.status),counselor:l.manager,registeredDate:l.updated.split(" ")[0],lastContact:l.updated.split(" ")[0]}:{id:e,patientId:e,patientName:t??"  ",ageGroup:" ",gender:"",phone:"010-0000-0000",guardianPhone:"",address:"  ",riskLevel:"medium",riskScore:60,contactPriorityLabel:"",status:"new",counselor:" ",registeredDate:new Date().toISOString().split("T")[0],lastContact:new Date().toISOString().split("T")[0]},[e,l,c.label,t]),[xe]=h.useState([{id:"CONS-001",date:"2026-02-01",time:"10:30",counselor:"",duration:15,result:"completed",summary:"  .    .",actions:["   (2026-02-10)"]}]),et={new:{greeting:{step:"greeting",title:"1:    ",content:`,    ${me.counselor} .   ?

       ?`,tips:["   ","    ","    "],checkpoints:["  ","  ","  "]},purpose:{step:"purpose",title:"2:   ",content:`          .

             .    ,   .`,tips:["   ","    ","   "],checkpoints:["  "," ","  "]},assessment:{step:"assessment",title:"3:   ",content:`   ?

 :
-     ?
-   ?
-       ?
-    ?`,tips:["   ","  ","  "],checkpoints:["  ","  ","   "]},scheduling:{step:"scheduling",title:"4:     ",content:`      .  30  ,     .

  ${me.address} ,     .

    .   ?`,tips:["   ","   ","(,  ) "],checkpoints:["  ","  "," "]}},contacted:{greeting:{step:"greeting",title:"1:  ",content:`,   ${me.counselor} .     ?`,tips:[" ","   "],checkpoints:[" ","   "]},purpose:{step:"purpose",title:"2:  ",content:"     .     ?",tips:["  ","   "],checkpoints:["  ","  "]},assessment:{step:"assessment",title:"3:   ",content:"     ?    .",tips:["  ","  "],checkpoints:["  ","  "]},scheduling:{step:"scheduling",title:"4:  ",content:"     .       .",tips:["  "," "],checkpoints:[" ","SMS  "]}},reconsultation:{greeting:{step:"greeting",title:"1:   ",content:`, ${me.counselor} .      .`,tips:["   ","  "],checkpoints:[" ","   "]},purpose:{step:"purpose",title:"2:  ",content:"  ,      .",tips:["  "," "],checkpoints:["  "," "]},assessment:{step:"assessment",title:"3:    ",content:"          .  .",tips:["   "," "],checkpoints:["  "," "]},scheduling:{step:"scheduling",title:"4:   ",content:"    .  ?",tips:[" ","   "],checkpoints:[" ","  "]}},dropout_recontact:{greeting:{step:"greeting",title:"1:  ",content:",  .  .   ?",tips:["  ","   "],checkpoints:[" ","  "]},purpose:{step:"purpose",title:"2:  ",content:"      .",tips:["  ","  "],checkpoints:[" "," "]},assessment:{step:"assessment",title:"3:   ",content:"  ?    .",tips:["  ","  "],checkpoints:["  ","  "]},scheduling:{step:"scheduling",title:"4:  ",content:"     ?      .",tips:["  ","  "],checkpoints:["  ","  "]}}};h.useEffect(()=>{if(v&&C.trim()){const Ve=setInterval(()=>{pt()},3e4);return()=>clearInterval(Ve)}},[C,v]),h.useEffect(()=>{g(me.status)},[me.status]),h.useEffect(()=>{m(n)},[n]),h.useEffect(()=>{!r&&u==="referral"&&m("consultation")},[r,u]),h.useEffect(()=>{oe(!1)},[S,p]),h.useEffect(()=>{if(w&&X&&G){const Rn=`[ ] ${new Date(X).toLocaleDateString("ko-KR",{month:"long",day:"numeric",weekday:"short"})} ${G} ${w==="screening"?"":w==="health_center"?" ":" "}  .

:    123-45
: 02-1234-5678

${H?": "+H:""}`;ne(Rn)}else ne("")},[w,X,G,H]);const Fe=()=>{y(new Date),console.log("[AUDIT] Consultation Started:",{action:"CONSULTATION_START",caseId:me.id,counselor:me.counselor,timestamp:new Date().toISOString()})},pt=()=>{console.log("[AUTO-SAVE] Consultation Draft Saved:",{caseId:me.id,notes:C,timestamp:new Date().toISOString()})},St=()=>{const Ve=`${p}-${S}`,Xt=et[p][S].content;ye(fe[Ve]??Xt),oe(!0)},qe=()=>{const Ve=`${p}-${S}`,Xt=et[p][S].content,On=fe[Ve]??Xt;Te(Rn=>({...Rn,[Ve]:le})),te(Rn=>[{id:`EDIT-${Date.now()}`,step:S,title:et[p][S].title,before:On,after:le,ts:new Date().toISOString()},...Rn]),_(Rn=>Rn+(Rn?`

`:"")+`[${et[p][S].title} - ]
${le}`),oe(!1)},rn=()=>{oe(!1)},at=()=>{console.log("[AUDIT] Temporary Save:",{action:"CONSULTATION_TEMP_SAVE",caseId:me.id,notes:C,result:A,timestamp:new Date().toISOString()}),alert(" .")},jt=()=>{if(!A){alert("  .");return}if((A==="postponed"||A==="refused")&&!P){alert("  .");return}const Ve=x?Math.floor((new Date().getTime()-x.getTime())/6e4):0;console.log("[AUDIT] Consultation Completed:",{action:"CONSULTATION_COMPLETE",caseId:me.id,counselor:me.counselor,result:A,reasonCode:P,reason:R,notes:C,duration:Ve,referral:w?{type:w,date:X,time:G}:null,dropout:V?{reason:V,details:ae}:null,timestamp:new Date().toISOString()}),alert(` !

 : ${Ve}
: ${A==="completed"?"":A==="postponed"?"":""}

  .`),s&&s()},It=()=>{if(!w||!X||!G){alert("   .");return}console.log("[AUDIT] Appointment Confirmed & SMS Sent:",{action:"APPOINTMENT_CREATE",caseId:me.id,counselor:me.counselor,referralType:w,appointmentDate:X,appointmentTime:G,preVisitNotes:H,smsContent:K,recipientPhone:me.phone,timestamp:new Date().toISOString()}),alert(`  !

SMS ${me.phone} .

 :
${K}`);const Ve=`

[/ ]
: ${w==="screening"?" ":w==="health_center"?" ":" "}
: ${X} ${G}
SMS : `;_(C+Ve),m("consultation")},an=()=>{if(!V||!ae.trim()){alert("     .");return}console.log("[AUDIT] Case Dropout:",{action:"CASE_DROPOUT",caseId:me.id,counselor:me.counselor,dropoutReason:V,dropoutDetails:ae,recontactDate:ce,recontactPlan:ie,timestamp:new Date().toISOString()}),alert(`   .

  '' .${ce?`

 : ${ce}`:""}`);const Ve=`

[  ]
: ${V}
: ${ae}
${ce?" : "+ce:""}`;_(C+Ve),m("consultation")},Ut=et[p],Ht=`${p}-${S}`,qt=Ut[S],Tn={greeting:{content:`,    ${me.counselor} . ?

   .   ?`,tips:[" (,  ) ","   ","   "]},purpose:{content:`           .

    1    .      .`,tips:["   ","    "," "]},assessment:{content:`    ?

     ?     ,      ?`,tips:["     ","    ","  "]},scheduling:{content:`      .

     .     .

      .`,tips:["   ","   ","   "]}},hn=z==="guardian"&&!!me.guardianPhone,ar=(()=>{const Ve={...qt,content:fe[Ht]??qt.content};if(hn&&!fe[Ht]){const Xt=Tn[S];return{...Ve,content:Xt.content,tips:Xt.tips}}return Ve})(),yt=()=>{if(!x)return"00:00";const Ve=Math.floor((new Date().getTime()-x.getTime())/1e3),Xt=Math.floor(Ve/60),On=Ve%60;return`${String(Xt).padStart(2,"0")}:${String(On).padStart(2,"0")}`};return a.jsxs("div",{className:"h-screen flex flex-col bg-gray-50",children:[a.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4 sticky top-0 z-10",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(Nt,{variant:"ghost",onClick:o||i,size:"sm",children:[a.jsx(Hl,{className:"h-4 w-4 mr-2"}),""]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold text-gray-900",children:" "}),a.jsxs("p",{className:"text-sm text-gray-500",children:[" ID: ",me.patientId]})]})]}),a.jsx("div",{className:"flex items-center gap-3",children:x?a.jsxs(rr,{variant:"destructive",className:"text-base px-4 py-2",children:[a.jsx(Zl,{className:"h-4 w-4 mr-2"}),"  ",yt()]}):a.jsxs(Nt,{onClick:Fe,variant:"default",children:[a.jsx(vo,{className:"h-4 w-4 mr-2"})," "]})})]}),a.jsxs("div",{className:"mt-4 grid grid-cols-6 gap-4 bg-gray-50 p-4 rounded-lg border border-gray-200",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),a.jsx("p",{className:"font-semibold text-sm",children:me.patientName}),a.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[me.ageGroup," / ",me.gender]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),a.jsxs("p",{className:"font-semibold text-sm flex items-center gap-1",children:[a.jsx(ti,{className:"h-3 w-3 text-gray-400"}),me.phone]}),me.guardianPhone&&a.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1 mt-0.5",children:[a.jsx(lc,{className:"h-3 w-3 text-blue-400"}),a.jsx("span",{className:"text-blue-600",children:""})," ",me.guardianPhone]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),a.jsxs("p",{className:"font-semibold text-sm flex items-center gap-1",children:[a.jsx(Vy,{className:"h-3 w-3 text-gray-400"}),me.address]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),a.jsxs(rr,{className:`text-xs ${me.contactPriorityLabel===""?"bg-red-50 text-red-700 border border-red-200":me.contactPriorityLabel===""?"bg-orange-50 text-orange-700 border border-orange-200":me.contactPriorityLabel===""?"bg-blue-50 text-blue-700 border border-blue-200":"bg-emerald-50 text-emerald-700 border border-emerald-200"}`,children:[me.contactPriorityLabel," (",me.riskScore,")"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),a.jsx(rr,{variant:"outline",className:"text-xs",children:me.status==="contacted"?"":""})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:" "}),a.jsxs("p",{className:"font-semibold text-sm flex items-center gap-1",children:[a.jsx(lc,{className:"h-3 w-3 text-gray-400"}),me.counselor]})]})]})]}),a.jsx("div",{className:"flex-1 overflow-hidden",children:a.jsxs(bRe,{value:u,onValueChange:Ve=>m(Ve),className:"h-full flex flex-col",children:[a.jsx("div",{className:"bg-white border-b border-gray-200 px-6",children:a.jsxs(yRe,{className:"w-full justify-start bg-transparent",children:[a.jsxs(uy,{value:"consultation",className:"data-[state=active]:bg-blue-50 data-[state=active]:text-blue-900",children:[a.jsx(vo,{className:"h-4 w-4 mr-2"})," "]}),r&&a.jsxs(uy,{value:"referral",className:"data-[state=active]:bg-purple-50 data-[state=active]:text-purple-900",children:[a.jsx(vC,{className:"h-4 w-4 mr-2"}),"/"]}),a.jsxs(uy,{value:"dropout",className:"data-[state=active]:bg-orange-50 data-[state=active]:text-orange-900",children:[a.jsx(ZS,{className:"h-4 w-4 mr-2"})," "]}),a.jsxs(uy,{value:"history",className:"data-[state=active]:bg-gray-50",children:[a.jsx(xa,{className:"h-4 w-4 mr-2"})," "]})]})}),a.jsxs("div",{className:"flex-1 overflow-auto",children:[a.jsx(fy,{value:"consultation",className:"h-full m-0 p-6",children:a.jsx("div",{className:"max-w-[1400px] mx-auto",children:a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs(In,{className:"h-fit",children:[a.jsxs(Cr,{className:"bg-gradient-to-r from-blue-50 to-purple-50 border-b",children:[a.jsxs(Tr,{className:"flex items-center gap-2 text-blue-900",children:[a.jsx(Tg,{className:"h-5 w-5"}),"AI   "]}),a.jsxs(zl,{children:[" : ",a.jsx(rr,{variant:"outline",className:"ml-2",children:p==="new"?"":p==="contacted"?"":p==="reconsultation"?"":"  "})]})]}),a.jsxs(Dn,{className:"p-4 space-y-4",children:[a.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-white",children:[a.jsx("p",{className:"text-[10px] font-semibold text-gray-500 mb-2",children:" "}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>Ne("citizen"),className:`flex-1 flex items-center gap-2 px-3 py-2.5 rounded-lg border-2 transition-all text-left ${z==="citizen"?"border-blue-500 bg-blue-50":"border-gray-200 bg-gray-50 hover:border-gray-300"}`,children:[a.jsx("div",{className:`w-3 h-3 rounded-full border-2 flex items-center justify-center ${z==="citizen"?"border-blue-500":"border-gray-300"}`,children:z==="citizen"&&a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-semibold text-gray-900",children:" "}),a.jsxs("div",{className:"text-[10px] text-gray-500 flex items-center gap-1",children:[a.jsx(ti,{className:"h-2.5 w-2.5"}),me.phone]})]})]}),me.guardianPhone?a.jsxs("button",{onClick:()=>Ne("guardian"),className:`flex-1 flex items-center gap-2 px-3 py-2.5 rounded-lg border-2 transition-all text-left ${z==="guardian"?"border-violet-500 bg-violet-50":"border-gray-200 bg-gray-50 hover:border-gray-300"}`,children:[a.jsx("div",{className:`w-3 h-3 rounded-full border-2 flex items-center justify-center ${z==="guardian"?"border-violet-500":"border-gray-300"}`,children:z==="guardian"&&a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-violet-500"})}),a.jsxs("div",{children:[a.jsxs("div",{className:"text-xs font-semibold text-gray-900 flex items-center gap-1",children:["",a.jsx("span",{className:"inline-flex px-1 py-0 rounded text-[8px] font-medium bg-blue-100 text-blue-700",children:""})]}),a.jsxs("div",{className:"text-[10px] text-gray-500 flex items-center gap-1",children:[a.jsx(ti,{className:"h-2.5 w-2.5"}),me.guardianPhone]})]})]}):a.jsxs("div",{className:"flex-1 flex items-center gap-2 px-3 py-2.5 rounded-lg border-2 border-dashed border-gray-200 bg-gray-50 opacity-50",children:[a.jsx("div",{className:"w-3 h-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-medium text-gray-400",children:""}),a.jsx("div",{className:"text-[10px] text-gray-400",children:"  "})]})]})]})]}),a.jsx("div",{className:"grid grid-cols-4 gap-2",children:["greeting","purpose","assessment","scheduling"].map((Ve,Xt)=>a.jsxs(Nt,{variant:S===Ve?"default":"outline",size:"sm",onClick:()=>j(Ve),children:[Xt+1,""]},Ve))}),a.jsx(M0,{}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:ar.title}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:Pe?a.jsxs("div",{className:"space-y-3",children:[a.jsx(Xo,{value:le,onChange:Ve=>ye(Ve.target.value),rows:6,className:"bg-white"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Nt,{size:"sm",onClick:qe,children:""}),a.jsx(Nt,{variant:"outline",size:"sm",onClick:rn,children:""})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"text-sm text-blue-900 whitespace-pre-line leading-relaxed",children:ar.content}),a.jsxs(Nt,{variant:"ghost",size:"sm",className:"mt-3 text-blue-600 hover:text-blue-700 hover:bg-blue-100",onClick:St,children:[a.jsx(FX,{className:"h-4 w-4 mr-2"})," "]})]})}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[a.jsx(ea,{className:"h-4 w-4 text-orange-500"})," "]}),a.jsx("ul",{className:"space-y-1",children:ar.tips.map((Ve,Xt)=>a.jsxs("li",{className:"text-xs text-gray-600 flex items-start gap-2",children:[a.jsx("span",{className:"text-orange-500 font-bold",children:""}),a.jsx("span",{children:Ve})]},Xt))})]}),a.jsxs("div",{children:[a.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[a.jsx(el,{className:"h-4 w-4 text-green-500"}),""]}),a.jsx("div",{className:"space-y-1",children:ar.checkpoints.map((Ve,Xt)=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",className:"rounded"}),a.jsx("span",{className:"text-xs text-gray-600",children:Ve})]},Xt))})]})]}),_e.length>0&&a.jsxs("div",{className:"mt-4 border-t pt-3",children:[a.jsx("h4",{className:"text-xs font-semibold text-gray-600 mb-2",children:"  "}),a.jsx("div",{className:"space-y-2",children:_e.slice(0,3).map(Ve=>a.jsxs("div",{className:"rounded-md border border-gray-200 bg-white p-2",children:[a.jsxs("div",{className:"flex items-center justify-between text-[11px] text-gray-500",children:[a.jsx("span",{children:Ve.title}),a.jsx("span",{children:new Date(Ve.ts).toLocaleString("ko-KR")})]}),a.jsx("p",{className:"mt-1 text-xs text-gray-700 line-clamp-2",children:Ve.after})]},Ve.id))})]})]})]})]}),a.jsxs(In,{className:"h-fit",children:[a.jsxs(Cr,{className:"bg-gradient-to-r from-green-50 to-blue-50 border-b",children:[a.jsxs(Tr,{className:"flex items-center gap-2 text-green-900",children:[a.jsx(Bf,{className:"h-5 w-5"}),"    "]}),a.jsx(zl,{className:"flex items-center gap-4",children:x&&a.jsxs(a.Fragment,{children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Zl,{className:"h-3 w-3"}),": ",x.toLocaleTimeString("ko-KR")]}),a.jsxs("span",{className:"flex items-center gap-1",children:[" : ",yt()]})]})})]}),a.jsxs(Dn,{className:"p-4 space-y-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx(Ft,{htmlFor:"consultation-notes",children:" "}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",id:"auto-save",checked:v,onChange:Ve=>N(Ve.target.checked),className:"rounded"}),a.jsx("label",{htmlFor:"auto-save",className:"text-xs text-gray-500",children:"30 "})]})]}),a.jsx(Xo,{id:"consultation-notes",value:C,onChange:Ve=>_(Ve.target.value),placeholder:" ,  ,    ...",rows:12,className:"font-mono text-sm"}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[C.length,"  / : ",v?"":""]})]}),a.jsx(M0,{}),a.jsxs("div",{children:[a.jsx(Ft,{children:"  *"}),a.jsxs(s8,{value:A,onValueChange:Ve=>T(Ve),className:"mt-2",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Lp,{value:"completed",id:"completed"}),a.jsxs(Ft,{htmlFor:"completed",className:"font-normal flex items-center gap-2",children:[a.jsx(el,{className:"h-4 w-4 text-green-600"})," "]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Lp,{value:"postponed",id:"postponed"}),a.jsxs(Ft,{htmlFor:"postponed",className:"font-normal flex items-center gap-2",children:[a.jsx(ea,{className:"h-4 w-4 text-yellow-600"}),""]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Lp,{value:"refused",id:"refused"}),a.jsxs(Ft,{htmlFor:"refused",className:"font-normal flex items-center gap-2",children:[a.jsx(Sm,{className:"h-4 w-4 text-red-600"}),""]})]})]})]}),(A==="postponed"||A==="refused")&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx(Ft,{htmlFor:"result-reason-code",children:"  *"}),a.jsxs(w_,{value:P,onValueChange:$,children:[a.jsx(__,{id:"result-reason-code",className:"mt-2",children:a.jsx(A_,{placeholder:"  "})}),a.jsx(C_,{children:A==="postponed"?a.jsxs(a.Fragment,{children:[a.jsx(Wr,{value:"P001",children:"P001 -  "}),a.jsx(Wr,{value:"P002",children:"P002 -   "}),a.jsx(Wr,{value:"P003",children:"P003 -   "}),a.jsx(Wr,{value:"P999",children:"P999 - "})]}):a.jsxs(a.Fragment,{children:[a.jsx(Wr,{value:"R001",children:"R001 -   ( )"}),a.jsx(Wr,{value:"R002",children:"R002 -  "}),a.jsx(Wr,{value:"R003",children:"R003 -  "}),a.jsx(Wr,{value:"R004",children:"R004 -  "}),a.jsx(Wr,{value:"R999",children:"R999 - "})]})})]})]}),a.jsxs("div",{children:[a.jsx(Ft,{htmlFor:"result-reason",children:" "}),a.jsx($n,{id:"result-reason",value:R,onChange:Ve=>M(Ve.target.value),placeholder:"  ",className:"mt-2"})]})]}),a.jsx(M0,{}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r?a.jsxs(Nt,{variant:"outline",onClick:()=>m("referral"),className:"w-full",children:[a.jsx(vC,{className:"h-4 w-4 mr-2"}),"/"]}):a.jsx("div",{className:"w-full rounded-md border border-gray-200 bg-gray-50 px-3 py-2 text-center text-xs text-gray-500",children:"/   "}),a.jsxs(Nt,{variant:"outline",onClick:()=>m("dropout"),className:"w-full",children:[a.jsx(ZS,{className:"h-4 w-4 mr-2"})," "]})]}),a.jsx(M0,{}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(Nt,{variant:"outline",onClick:at,className:"flex-1",children:[a.jsx(xR,{className:"h-4 w-4 mr-2"})," "]}),a.jsxs(Nt,{onClick:jt,className:"flex-1",disabled:!A,children:[a.jsx(el,{className:"h-4 w-4 mr-2"})," "]})]})]})]})]})})}),r&&a.jsx(fy,{value:"referral",className:"h-full m-0 p-6",children:a.jsx("div",{className:"max-w-[1200px] mx-auto",children:a.jsxs(In,{children:[a.jsxs(Cr,{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-b",children:[a.jsxs(Tr,{className:"flex items-center gap-2 text-purple-900",children:[a.jsx(Zo,{className:"h-5 w-5"}),"  "]}),a.jsx(zl,{children:"  ,  ,    -      "})]}),a.jsx(Dn,{className:"p-6",children:a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(Ft,{children:"  *"}),a.jsxs(s8,{value:w,onValueChange:Ve=>U(Ve),className:"mt-2 space-y-2",children:[a.jsxs("div",{className:"flex items-center space-x-2 border border-gray-200 rounded-lg p-3 hover:bg-gray-50",children:[a.jsx(Lp,{value:"screening",id:"screening"}),a.jsxs(Ft,{htmlFor:"screening",className:"font-normal flex items-center gap-2 cursor-pointer flex-1",children:[a.jsx(Tg,{className:"h-4 w-4 text-purple-600"}),"  "]})]}),a.jsxs("div",{className:"flex items-center space-x-2 border border-gray-200 rounded-lg p-3 hover:bg-gray-50",children:[a.jsx(Lp,{value:"health_center",id:"health_center"}),a.jsxs(Ft,{htmlFor:"health_center",className:"font-normal flex items-center gap-2 cursor-pointer flex-1",children:[a.jsx(sm,{className:"h-4 w-4 text-blue-600"})," "]})]}),a.jsxs("div",{className:"flex items-center space-x-2 border border-gray-200 rounded-lg p-3 hover:bg-gray-50",children:[a.jsx(Lp,{value:"medical",id:"medical"}),a.jsxs(Ft,{htmlFor:"medical",className:"font-normal flex items-center gap-2 cursor-pointer flex-1",children:[a.jsx(lJ,{className:"h-4 w-4 text-red-600"})," "]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(Ft,{htmlFor:"appointment-date",children:"  *"}),a.jsx($n,{id:"appointment-date",type:"date",value:X,onChange:Ve=>I(Ve.target.value),className:"mt-2",min:new Date().toISOString().split("T")[0]})]}),a.jsxs("div",{children:[a.jsx(Ft,{htmlFor:"appointment-time",children:"  *"}),a.jsxs(w_,{value:G,onValueChange:L,children:[a.jsx(__,{id:"appointment-time",className:"mt-2",children:a.jsx(A_,{placeholder:" "})}),a.jsxs(C_,{children:[a.jsx(Wr,{value:"09:00",children:" 09:00"}),a.jsx(Wr,{value:"10:00",children:" 10:00"}),a.jsx(Wr,{value:"11:00",children:" 11:00"}),a.jsx(Wr,{value:"14:00",children:" 02:00"}),a.jsx(Wr,{value:"15:00",children:" 03:00"}),a.jsx(Wr,{value:"16:00",children:" 04:00"})]})]})]})]}),a.jsxs("div",{children:[a.jsx(Ft,{htmlFor:"pre-visit",children:"  "}),a.jsx(Xo,{id:"pre-visit",value:H,onChange:Ve=>F(Ve.target.value),placeholder:":  ,   ,  ",rows:3,className:"mt-2"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(Ft,{children:"SMS  "}),a.jsx("div",{className:"mt-2 bg-gray-900 text-white p-4 rounded-lg min-h-[200px] font-mono text-sm whitespace-pre-line",children:K||"      SMS "})]}),a.jsxs(om,{children:[a.jsx(Og,{className:"h-4 w-4"}),a.jsxs(lm,{className:"text-sm",children:[a.jsx("strong",{children:":"})," ",me.phone,a.jsx("br",{}),"    SMS ,    ."]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Nt,{variant:"outline",onClick:()=>m("consultation"),className:"flex-1",children:" "}),a.jsxs(Nt,{onClick:It,className:"flex-1",disabled:!w||!X||!G,children:[a.jsx(Og,{className:"h-4 w-4 mr-2"})," "]})]})]})]})})]})})}),a.jsx(fy,{value:"dropout",className:"h-full m-0 p-6",children:a.jsx("div",{className:"max-w-[1200px] mx-auto",children:a.jsxs(In,{className:"border-orange-200",children:[a.jsxs(Cr,{className:"bg-gradient-to-r from-orange-50 to-red-50 border-b border-orange-200",children:[a.jsxs(Tr,{className:"flex items-center gap-2 text-orange-900",children:[a.jsx(ZS,{className:"h-5 w-5"}),"   "]}),a.jsx(zl,{children:"       -      "})]}),a.jsxs(Dn,{className:"p-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[a.jsx(fs,{className:"h-4 w-4 text-orange-600"})," "]}),a.jsxs("div",{children:[a.jsx(Ft,{htmlFor:"dropout-reason",children:"  *"}),a.jsxs(w_,{value:V,onValueChange:ee,children:[a.jsx(__,{id:"dropout-reason",className:"mt-2",children:a.jsx(A_,{placeholder:" "})}),a.jsxs(C_,{children:[a.jsx(Wr,{value:"no_response",children:"D001 -   (3  )"}),a.jsx(Wr,{value:"refused",children:"D002 -   "}),a.jsx(Wr,{value:"family_refused",children:"D003 -  "}),a.jsx(Wr,{value:"relocated",children:"D004 -  / "}),a.jsx(Wr,{value:"deceased",children:"D005 - "}),a.jsx(Wr,{value:"other_service",children:"D006 -   "}),a.jsx(Wr,{value:"other",children:"D999 - "})]})]})]}),a.jsxs("div",{children:[a.jsx(Ft,{htmlFor:"dropout-details",children:"  *"}),a.jsx(Xo,{id:"dropout-details",value:ae,onChange:Ve=>ue(Ve.target.value),placeholder:" ,   ,    ",rows:6,className:"mt-2"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[a.jsx(TI,{className:"h-4 w-4 text-blue-600"})," "]}),a.jsxs("div",{children:[a.jsx(Ft,{htmlFor:"recontact-date",children:" "}),a.jsx($n,{id:"recontact-date",type:"date",value:ce,onChange:Ve=>Z(Ve.target.value),className:"mt-2",min:new Date().toISOString().split("T")[0]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:ce&&" 1    "})]}),a.jsxs("div",{children:[a.jsx(Ft,{htmlFor:"recontact-plan",children:"   "}),a.jsx(Xo,{id:"recontact-plan",value:ie,onChange:Ve=>Se(Ve.target.value),placeholder:": 1     ,    ",rows:6,className:"mt-2"})]}),a.jsxs(om,{className:"border-blue-200 bg-blue-50",children:[a.jsx(TI,{className:"h-4 w-4 text-blue-600"}),a.jsx(lm,{className:"text-sm text-blue-900",children:"       ,   ."})]})]})]}),a.jsx(M0,{className:"my-6"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Nt,{variant:"outline",onClick:()=>m("consultation"),className:"flex-1",children:" "}),a.jsxs(Nt,{variant:"destructive",onClick:an,disabled:!V||!ae.trim(),className:"flex-1",children:[a.jsx(Sm,{className:"h-4 w-4 mr-2"}),"  "]})]})]})]})})}),a.jsx(fy,{value:"history",className:"h-full m-0 p-6",children:a.jsx("div",{className:"max-w-[1200px] mx-auto",children:a.jsxs(In,{children:[a.jsxs(Cr,{children:[a.jsxs(Tr,{className:"flex items-center gap-2",children:[a.jsx(Zl,{className:"h-5 w-5"}),"  "]}),a.jsx(zl,{children:"      "})]}),a.jsx(Dn,{className:"p-6",children:a.jsx("div",{className:"space-y-4",children:xe.map((Ve,Xt)=>a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 border-2 border-blue-600 flex items-center justify-center",children:a.jsx(vo,{className:"h-4 w-4 text-blue-600"})}),Xt<xe.length-1&&a.jsx("div",{className:"w-0.5 h-full bg-gray-300 mt-2"})]}),a.jsxs("div",{className:"flex-1 pb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{children:[a.jsxs("h4",{className:"font-semibold text-gray-900",children:[" #",xe.length-Xt]}),a.jsxs("p",{className:"text-sm text-gray-500",children:[Ve.date," ",Ve.time,"  ",Ve.counselor,"  ",Ve.duration,""]})]}),a.jsx(rr,{variant:Ve.result==="completed"?"default":Ve.result==="postponed"?"secondary":"destructive",children:Ve.result==="completed"?"":Ve.result==="postponed"?"":""})]}),a.jsx("p",{className:"text-sm text-gray-700 mb-2",children:Ve.summary}),Ve.actions.length>0&&a.jsx("div",{className:"space-y-1",children:Ve.actions.map((On,Rn)=>a.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[a.jsx(el,{className:"h-3 w-3 text-green-600"}),On]},Rn))})]})]},Ve.id))})})]})})})]})]})})]})}const ERe={VITE_BASE_PATH:"/neuro-shield/"},O_=[{id:"CONTACT_PRIMARY",category:"CONTACT",label:"1  ",hint:"  ",build:({centerName:e,link:t,centerPhone:n})=>`[:${e}]    .      (/)   .      : ${t} / : ${n}`},{id:"CONTACT_GUARDIAN_OPTION",category:"CONTACT",label:"1   ( )",hint:"    ",build:({centerName:e,link:t,centerPhone:n})=>`[:${e}]        ()   .  / : ${t} / : ${n}`},{id:"BOOKING_PRIMARY",category:"BOOKING",label:"1 ",hint:"/  ",build:({centerName:e,bookingLink:t,centerPhone:n})=>`[:${e}]  /  .   . /: ${t} / : ${n}`},{id:"BOOKING_CHANNEL_OPTION",category:"BOOKING",label:"1  (/ )",hint:"   ",build:({centerName:e,bookingLink:t})=>`[:${e}] /      .    . ${t}`},{id:"REMINDER_FIRST",category:"REMINDER",label:"1 ",hint:"/ 1 ",build:({centerName:e,link:t,centerPhone:n})=>`[:${e}]        .    ,    . ${t} / : ${n}`},{id:"REMINDER_FINAL",category:"REMINDER",label:" ",hint:" ",build:({centerName:e,link:t,centerPhone:n})=>`[:${e}]    .     /  . ${t} / : ${n}`}],R_={CONTACT:{label:"1 ",tone:"border-blue-200 bg-blue-50 text-blue-800"},BOOKING:{label:"",tone:"border-emerald-200 bg-emerald-50 text-emerald-800"},REMINDER:{label:"",tone:"border-amber-200 bg-amber-50 text-amber-800"}};function jRe(e){if(!e)return"-";const t=new Date(e);return Number.isNaN(t.getTime())?e:`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")} ${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`}async function wRe(e){const t=ERe,n=t.VITE_BASE_PATH.trim(),r=n?`/${n.replace(/^\/+|\/+$/g,"")}/`:"/neuro-shield/",s=r==="/"?"":r.replace(/\/$/,""),i=(t.VITE_SMS_API_BASE_URL||t.VITE_API_BASE_URL||"").trim().replace(/\/$/,""),o=["/api/outreach/send-sms",s?`${s}/api/outreach/send-sms`:"",typeof window<"u"?`${window.location.origin}/api/outreach/send-sms`:"",typeof window<"u"&&s?`${window.location.origin}${s}/api/outreach/send-sms`:"",i?`${i}/api/outreach/send-sms`:"","http://localhost:4120/api/outreach/send-sms"],l=Array.from(new Set(o.filter(c=>c.length>0)));for(const c of l)try{if((await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)return!0}catch{}return!1}function ARe({caseId:e,onBack:t}){const n=h.useMemo(()=>PN(e),[e]),[r,s]=h.useState("CONTACT_PRIMARY"),[i,o]=h.useState("citizen"),[l,c]=h.useState("NOW"),[u,m]=h.useState(""),[p,g]=h.useState(" "),[x,y]=h.useState("02-1234-5678".trim()||"02-1234-5678"),[v,N]=h.useState("https://neuro-shield.local/check"),[S,j]=h.useState("https://neuro-shield.local/booking"),[C,_]=h.useState([]),[A,T]=h.useState(!1),R=O_.find(I=>I.id===r)??O_[0],M=R.build({centerName:p,link:v,bookingLink:S,centerPhone:x}),P=h.useMemo(()=>{const I={CONTACT:[],BOOKING:[],REMINDER:[]};for(const G of O_)I[G.category].push(G);return I},[]),$=i==="guardian"?n?.profile.guardianPhone:n?.profile.phone,w=i==="guardian"&&!n?.profile.guardianPhone,U=A||!$||l==="SCHEDULE"&&!u,X=async()=>{if(!$)return;T(!0);const I=new Date().toISOString();let G=l==="NOW"?"SENT":"SCHEDULED";l==="NOW"&&(G=await wRe({case_id:e,template_id:R.id,citizen_phone:$,message:M,channel:"sms",dedupe_key:`${e}-${R.id}-${i}-${Date.now()}`})?"SENT":"FAILED"),_(L=>[{id:`${Date.now()}`,at:l==="SCHEDULE"?new Date(u).toISOString():I,recipient:i,templateLabel:R.label,status:G},...L]),T(!1)};return a.jsxs("div",{className:"h-full flex flex-col bg-gray-50",children:[a.jsx("div",{className:"sticky top-0 z-10 border-b border-gray-200 bg-white px-6 py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("button",{onClick:t,className:"inline-flex items-center gap-1 rounded-md border border-gray-200 px-3 py-1.5 text-xs font-semibold text-gray-700 hover:bg-gray-50",children:[a.jsx(Hl,{size:14})," "]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"/ "}),a.jsxs("p",{className:"text-xs text-gray-500",children:["CASE ID: ",e]})]})]}),a.jsx("span",{className:"rounded-full border border-blue-200 bg-blue-50 px-3 py-1 text-[11px] font-semibold text-blue-700",children:"Stage1   "})]})}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[a.jsx("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:a.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-4",children:[a.jsxs("div",{className:"rounded-lg border border-gray-100 bg-gray-50 p-3",children:[a.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),a.jsx("p",{className:"mt-1 text-sm font-bold text-gray-900",children:n?.id??e})]}),a.jsxs("div",{className:"rounded-lg border border-gray-100 bg-gray-50 p-3",children:[a.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase",children:""}),a.jsx("p",{className:"mt-1 text-sm font-bold text-gray-900",children:n?oh(n.profile.age):"-"})]}),a.jsxs("div",{className:"rounded-lg border border-gray-100 bg-gray-50 p-3",children:[a.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),a.jsx("p",{className:"mt-1 text-sm font-bold text-gray-900",children:n?tl(n.profile.phone):"-"})]}),a.jsxs("div",{className:"rounded-lg border border-gray-100 bg-gray-50 p-3",children:[a.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),a.jsx("p",{className:"mt-1 text-sm font-bold text-gray-900",children:n?.profile.guardianPhone?tl(n.profile.guardianPhone):""})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 gap-6 xl:grid-cols-12",children:[a.jsxs("section",{className:"xl:col-span-8 space-y-4",children:[a.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsxs("h3",{className:"text-sm font-bold text-gray-900 flex items-center gap-2",children:[a.jsx(vo,{size:15,className:"text-gray-500"})," "]}),a.jsx("div",{className:"mt-3 space-y-3",children:Object.keys(P).map(I=>a.jsxs("div",{className:"rounded-lg border border-gray-100 bg-gray-50 p-3",children:[a.jsx("p",{className:"mb-2 text-xs font-bold text-gray-700",children:R_[I].label}),a.jsx("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-2",children:P[I].map(G=>a.jsxs("button",{onClick:()=>s(G.id),className:`rounded-lg border px-3 py-2 text-left transition-colors ${r===G.id?"border-blue-300 bg-blue-50":"border-gray-200 bg-white hover:bg-gray-50"}`,children:[a.jsx("p",{className:"text-xs font-semibold text-gray-900",children:G.label}),a.jsx("p",{className:"mt-0.5 text-[11px] text-gray-500",children:G.hint})]},G.id))})]},I))})]}),a.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsxs("h3",{className:"text-sm font-bold text-gray-900 flex items-center gap-2",children:[a.jsx(FU,{size:15,className:"text-gray-500"})," "]}),a.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3 md:grid-cols-2",children:[a.jsxs("label",{className:"text-xs",children:[a.jsx("span",{className:"text-gray-500",children:""}),a.jsx("input",{value:p,onChange:I=>g(I.target.value),className:"mt-1 w-full rounded-md border border-gray-200 px-2 py-2 text-xs outline-none focus:border-blue-400"})]}),a.jsxs("label",{className:"text-xs",children:[a.jsx("span",{className:"text-gray-500",children:" "}),a.jsx("input",{value:x,onChange:I=>y(I.target.value),className:"mt-1 w-full rounded-md border border-gray-200 px-2 py-2 text-xs outline-none focus:border-blue-400"})]}),a.jsxs("label",{className:"text-xs",children:[a.jsx("span",{className:"text-gray-500",children:" "}),a.jsx("input",{value:v,onChange:I=>N(I.target.value),className:"mt-1 w-full rounded-md border border-gray-200 px-2 py-2 text-xs outline-none focus:border-blue-400"})]}),a.jsxs("label",{className:"text-xs",children:[a.jsx("span",{className:"text-gray-500",children:" "}),a.jsx("input",{value:S,onChange:I=>j(I.target.value),className:"mt-1 w-full rounded-md border border-gray-200 px-2 py-2 text-xs outline-none focus:border-blue-400"})]})]})]}),a.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-sm font-bold text-gray-900",children:" "}),a.jsx("span",{className:`rounded-full border px-2 py-0.5 text-[10px] font-semibold ${R_[R.category].tone}`,children:R_[R.category].label})]}),a.jsx("p",{className:"mt-3 whitespace-pre-wrap rounded-lg border border-gray-100 bg-gray-50 p-3 text-sm leading-relaxed text-gray-800",children:M}),a.jsxs("p",{className:"mt-2 text-[11px] text-gray-500",children:[" : ",M.length,""]})]})]}),a.jsxs("aside",{className:"xl:col-span-4 space-y-4",children:[a.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsxs("h3",{className:"text-sm font-bold text-gray-900 flex items-center gap-2",children:[a.jsx(Og,{size:15,className:"text-gray-500"})," "]}),a.jsxs("div",{className:"mt-3 space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2 rounded-lg border border-gray-200 bg-gray-50 px-3 py-2 text-xs",children:[a.jsx("input",{type:"radio",checked:i==="citizen",onChange:()=>o("citizen")}),a.jsx(lc,{size:12,className:"text-gray-500"})," (",n?tl(n.profile.phone):"-",")"]}),a.jsxs("label",{className:`flex items-center gap-2 rounded-lg border px-3 py-2 text-xs ${w?"border-dashed border-gray-200 bg-gray-50 text-gray-400":"border-gray-200 bg-gray-50"}`,children:[a.jsx("input",{type:"radio",checked:i==="guardian",onChange:()=>o("guardian"),disabled:w}),a.jsx(fZ,{size:12,className:"text-gray-500"})," (",n?.profile.guardianPhone?tl(n.profile.guardianPhone):"",")"]})]}),a.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-1 rounded-lg border border-gray-200 bg-gray-50 p-1 text-[11px] font-semibold",children:[a.jsx("button",{onClick:()=>c("NOW"),className:`rounded-md px-2 py-1 ${l==="NOW"?"bg-white text-gray-900 shadow-sm":"text-gray-500"}`,children:" "}),a.jsx("button",{onClick:()=>c("SCHEDULE"),className:`rounded-md px-2 py-1 ${l==="SCHEDULE"?"bg-white text-gray-900 shadow-sm":"text-gray-500"}`,children:" "})]}),l==="SCHEDULE"?a.jsxs("label",{className:"mt-3 block text-xs text-gray-500",children:[" ",a.jsx("input",{type:"datetime-local",value:u,onChange:I=>m(I.target.value),className:"mt-1 w-full rounded-md border border-gray-200 px-2 py-2 text-xs outline-none focus:border-blue-400"})]}):null,a.jsx("button",{onClick:X,disabled:U,className:"mt-3 inline-flex w-full items-center justify-center gap-2 rounded-md bg-[#163b6f] px-3 py-2 text-xs font-semibold text-white disabled:cursor-not-allowed disabled:bg-gray-300",children:A?" ...":l==="NOW"?" ":" "}),$?null:a.jsx("p",{className:"mt-2 text-[11px] text-red-600",children:"   ."})]}),a.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[a.jsxs("h3",{className:"text-sm font-bold text-gray-900 flex items-center gap-2",children:[a.jsx(xa,{size:15,className:"text-gray-500"})," "]}),a.jsx("div",{className:"mt-3 space-y-2",children:C.length===0?a.jsx("p",{className:"rounded-md border border-gray-100 bg-gray-50 px-3 py-2 text-xs text-gray-500",children:"  ."}):C.map(I=>a.jsxs("div",{className:"rounded-md border border-gray-100 bg-gray-50 px-3 py-2 text-xs",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"font-semibold text-gray-800",children:I.templateLabel}),a.jsx("span",{className:`rounded px-1.5 py-0.5 text-[10px] font-semibold ${I.status==="SENT"?"bg-emerald-100 text-emerald-700":I.status==="SCHEDULED"?"bg-blue-100 text-blue-700":"bg-red-100 text-red-700"}`,children:I.status==="SENT"?"":I.status==="SCHEDULED"?"":""})]}),a.jsxs("p",{className:"mt-1 text-[11px] text-gray-500",children:[I.recipient==="citizen"?"":"","  ",jRe(I.at)]})]},I.id))})]}),a.jsxs("div",{className:"rounded-xl border border-blue-100 bg-blue-50 p-4",children:[a.jsxs("h4",{className:"text-xs font-bold text-blue-900 flex items-center gap-1",children:[a.jsx(uR,{size:13})," "]}),a.jsxs("ul",{className:"mt-2 space-y-1 text-[11px] text-blue-800",children:[a.jsx("li",{children:"1 :      "}),a.jsx("li",{children:": /  "}),a.jsx("li",{children:":  "})]})]})]})]})]})]})}function _Re({userRole:e="counselor",userName:t="",centerName:n="  ",onLogout:r}){const[s,i]=h.useState("main"),[o,l]=h.useState(null),[c,u]=h.useState("Stage 1"),[m,p]=h.useState(null),[g,x]=h.useState("detail"),[y,v]=h.useState(""),[N,S]=h.useState(null),j=h.useRef(null),C=h.useRef(0),_=h.useRef(!1),A=h.useCallback(($,w)=>{C.current=j.current?.scrollTop??0,l($),u(w),x("detail"),i("cases")},[]),T=h.useCallback($=>{Fz($),p($),S(null),_.current=!1,l(null),x("detail"),i("cases")},[]),R=h.useCallback(()=>{_.current=!0,l(null),x("detail")},[]);h.useEffect(()=>{if(!_.current||s!=="cases"||o!==null)return;const $=window.requestAnimationFrame(()=>{j.current&&(j.current.scrollTop=C.current),_.current=!1});return()=>window.cancelAnimationFrame($)},[s,o]);const M=()=>{if(o&&s==="cases")return g==="consultation"?a.jsx(SRe,{caseId:o,showReferralTab:!1,onComplete:R,onCancel:()=>x("detail"),onBack:()=>x("detail")}):g==="sms"?a.jsx(ARe,{caseId:o,onBack:()=>x("detail")}):g==="stage-workflow"&&c==="Stage 2"?a.jsx(Iq,{caseId:o,onBack:R}):g==="stage-workflow"&&c==="Stage 3"?a.jsx(Dq,{caseId:o,onBack:R}):a.jsx(yCe,{caseId:o,stage:c,onBack:R});switch(s){case"main":return a.jsx(c7,{onNavigateToCases:T,onSelectCase:A,centerName:n});case"cases":return a.jsx(nwe,{onSelectCase:A,initialFilter:m,externalSearchKeyword:y,onExternalSearchKeywordChange:v,initialViewState:N,onViewStateChange:S});case"calendar":return a.jsx(uwe,{});case"reports":return a.jsx(fwe,{});case"settings":return a.jsx(pwe,{});default:return a.jsx(c7,{onNavigateToCases:T,onSelectCase:A,centerName:n})}},P=s==="cases"&&o!==null;return a.jsxs("div",{className:"flex h-screen w-full bg-gray-50 overflow-hidden text-slate-900 font-sans",children:[a.jsx(mwe,{activeTab:s,setActiveTab:$=>{$!=="cases"&&zp({stage:"ALL",status:"ALL",keyword:""}),i($),_.current=!1,l(null),p(null),x("detail")},userName:t,centerName:n,userRole:e,onLogout:r}),a.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[!P&&a.jsx(gwe,{activeTab:s,caseSearchKeyword:y,onCaseSearchKeywordChange:v}),a.jsx("main",{ref:j,className:"flex-1 overflow-y-auto p-6",children:M()})]})]})}const CRe=["","","","","",""],TRe={:" ",:" ",:" ",:"  ",:"",:" "};function ORe(e){let t=e;return CRe.forEach(n=>{t=t.split(n).join(TRe[n])}),t}function gt(e){return ORe(e)}const oW={11:[{code:"11010",label:""},{code:"11020",label:""},{code:"11030",label:""},{code:"11040",label:""}],26:[{code:"26010",label:""},{code:"26020",label:""},{code:"26030",label:""},{code:"26040",label:""}],27:[{code:"27010",label:""},{code:"27020",label:""},{code:"27030",label:""},{code:"27040",label:""}],29:[{code:"29010",label:""},{code:"29020",label:""},{code:"29030",label:""}],31:[{code:"31010",label:""},{code:"31020",label:""},{code:"31030",label:""},{code:"31040",label:""}],41:[{code:"41010",label:""},{code:"41020",label:""},{code:"41030",label:""},{code:"41040",label:""}],44:[{code:"44010",label:""},{code:"44020",label:""},{code:"44030",label:""},{code:"44040",label:""}],46:[{code:"46010",label:""},{code:"46020",label:""},{code:"46030",label:""},{code:"46040",label:""}],47:[{code:"47010",label:""},{code:"47020",label:""},{code:"47030",label:""},{code:"47040",label:""}],48:[{code:"48010",label:""},{code:"48020",label:""},{code:"48030",label:""},{code:"48040",label:""}],50:[{code:"50010",label:""},{code:"50020",label:""}]},RRe={slaBreachRate:.35,notReachedRate:.3,avgWaitTimeNorm:.2,longWaitRate:.15},o8={kpi:.6,volume:.4},lW=e=>Math.max(0,Math.min(1,e));function kRe(e,t,n,r){if(n<=t)return .5;const s=lW((e-t)/(n-t));return r==="higherWorse"?s:1-s}function IRe(e,t,n){return n<=t?.5:lW((e-t)/(n-t))}function DRe(e){const t=kRe(e.kpiValue,e.kpiMin,e.kpiMax,e.direction),n=IRe(e.volume,e.volumeMin,e.volumeMax);return Number((t*o8.kpi+n*o8.volume).toFixed(3))}const ug={thresholds:{longWaitDays:7,slaNearDays:3},weights:{...RRe},notifications:{slaBreachAlert:!0,slaImminentAlert:!0,longWaitSurge:!1,riskIncrease:!1}};function cW(e){try{const t=localStorage.getItem(`regional.settings.${e}.thresholds`),n=localStorage.getItem(`regional.settings.${e}.weights`),r=localStorage.getItem(`regional.settings.${e}.notifications`);return{thresholds:t?JSON.parse(t):ug.thresholds,weights:n?JSON.parse(n):ug.weights,notifications:r?JSON.parse(r):ug.notifications}}catch{return{...ug}}}function PRe(e,t){localStorage.setItem(`regional.settings.${e}.thresholds`,JSON.stringify(t.thresholds)),localStorage.setItem(`regional.settings.${e}.weights`,JSON.stringify(t.weights)),localStorage.setItem(`regional.settings.${e}.notifications`,JSON.stringify(t.notifications))}const MRe={regionalSla:"regional_sla_violation",regionalQueueRisk:"regional_queue_risk",regionalRecontact:"regional_recontact_rate",regionalDataReadiness:"regional_data_readiness",regionalGovernance:"regional_governance_missing",regionalAdTransitionHotspot:"regional_ad_transition_hotspot",regionalDxDelayHotspot:"regional_dx_delay_hotspot",regionalScreenToDxRate:"regional_screen_to_dx_rate"},l8={regionalSla:"blue",regionalQueueRisk:"orange",regionalRecontact:"red",regionalDataReadiness:"orange",regionalGovernance:"purple",regionalAdTransitionHotspot:"red",regionalDxDelayHotspot:"orange",regionalScreenToDxRate:"teal"},lu="    ",GO=[{key:"regionalSla",label:" (/24h)",shortLabel:" ",unit:"",direction:"higherWorse",tooltip:"     ",scopeLine:lu,clickAction:"   .",drilldownKind:"inflow",mapMetricLabel:"  ",trendGoal:280,color:"#2563eb",iconBg:"bg-blue-100 text-blue-700"},{key:"regionalQueueRisk",label:" ( )",shortLabel:" ",unit:"",direction:"higherWorse",tooltip:"  /   ",scopeLine:lu,clickAction:"    .",drilldownKind:"queue",mapMetricLabel:"  ",trendGoal:160,color:"#ea580c",iconBg:"bg-orange-100 text-orange-700"},{key:"regionalRecontact",label:"SLA (/)",shortLabel:"SLA ",unit:"%",direction:"higherWorse",tooltip:" /     ",scopeLine:lu,clickAction:"   .",drilldownKind:"sla",mapMetricLabel:" SLA  ",trendGoal:6,color:"#ef4444",iconBg:"bg-red-100 text-red-700"},{key:"regionalDataReadiness",label:" ",shortLabel:"",unit:"%",direction:"higherWorse",tooltip:"     ",scopeLine:lu,clickAction:"   .",drilldownKind:"recontact",mapMetricLabel:"   ",trendGoal:9,color:"#d97706",iconBg:"bg-amber-100 text-amber-700"},{key:"regionalGovernance",label:" ( )",shortLabel:" ",unit:"",direction:"higherWorse",tooltip:"  SLA    ",scopeLine:lu,clickAction:"   .",drilldownKind:"centerRisk",mapMetricLabel:"   ",trendGoal:40,color:"#7c3aed",iconBg:"bg-violet-100 text-violet-700"},{key:"regionalAdTransitionHotspot",label:"AD    ",shortLabel:" ",unit:"",direction:"higherWorse",tooltip:"      ",scopeLine:lu,clickAction:"      .",drilldownKind:"centerRisk",mapMetricLabel:" AD   ",trendGoal:42,color:"#dc2626",iconBg:"bg-rose-100 text-rose-700"},{key:"regionalDxDelayHotspot",label:"  ",shortLabel:" ",unit:"",direction:"higherWorse",tooltip:"       ",scopeLine:lu,clickAction:"      .",drilldownKind:"queue",mapMetricLabel:"   ",trendGoal:24,color:"#f97316",iconBg:"bg-orange-100 text-orange-700"},{key:"regionalScreenToDxRate",label:"  ",shortLabel:"",unit:"%",direction:"higherBetter",tooltip:"      ",scopeLine:lu,clickAction:"      .",drilldownKind:"sla",mapMetricLabel:"  ",trendGoal:68,color:"#0f766e",iconBg:"bg-teal-100 text-teal-700"}],bm=GO.reduce((e,t)=>(e[t.key]=t,e),{}),LRe="drill",$Re="kpi",FRe="range",URe="view",fh={REGION:0,SIGUNGU:1,EUPMYEONDONG:2,CUSTOM:3};function BRe(e){return e==="REGION"||e==="SIGUNGU"||e==="EUPMYEONDONG"||e==="CUSTOM"?e:null}function GRe(e){if(!e||typeof e!="object")return null;const t=e,n=BRe(t.l??t.level),r=t.i??t.id;if(!n||typeof r!="string"&&typeof r!="number")return null;const s=String(r),i=t.n??t.label??s,o=typeof i=="string"&&i.trim()?i:s;return{l:n,i:s,n:o}}function eS(e){const t=e.filter(Boolean).map(r=>({l:r.l,i:String(r.i),n:r.n})),n=[];return t.forEach(r=>{const s=fh[r.l];for(;n.length>0;){const i=n[n.length-1];if(fh[i.l]<s)break;n.pop()}n.push(r)}),n}function HO(e){const t=eS(e);return JSON.stringify(t.map(n=>({l:n.l,i:String(n.i),n:n.n})))}function c8(e){try{const t=JSON.parse(e);return Array.isArray(t)?eS(t.map(n=>GRe(n)).filter(n=>!!n)):[]}catch{return[]}}function dW(e){if(!e)return[];const t=c8(e);if(t.length>0)return t;try{const n=decodeURIComponent(e);if(n!==e)return c8(n)}catch{return[]}return[]}function KO(e){return e.map(t=>({l:t.level,i:String(t.id),n:t.label}))}function d8(e){const t=[];return e.forEach(n=>{const r=fh[n.level];for(;t.length>0;){const s=t[t.length-1];if(fh[s.level]<r)break;t.pop()}t.push({...n,id:String(n.id)})}),t}function L0(e,t){return{level:e.level,id:String(e.id),label:e.label,filters:{...t},timestamp:Date.now()}}function uW(e,t){return e==="geomap"||e==="heatmap"?e:t}function fW(e,t){return e==="24h"||e==="7d"||e==="30d"||e==="90d"?e:e==="weekly"?"7d":e==="monthly"?"30d":e==="quarterly"?"90d":t}function k_(e,t,n,r,s){if(typeof window>"u")return[e];const i=new URLSearchParams(window.location.search),o=dW(i.get(t)),l={kpi:i.get(n)??e.filters.kpi,range:fW(i.get(r)??e.filters.range,e.filters.range),view:uW(i.get(s),e.filters.view)};if(!o.length)return[{...e,filters:{...l}}];const c={l:e.level,i:String(e.id),n:e.label};return eS([c,...o.filter(m=>!(m.l===c.l&&m.i===c.i))]).map((m,p)=>({level:m.l,id:m.i,label:p===0?e.label:m.n,filters:{...l},timestamp:Date.now()+p}))}function HRe(e,t){return e.kpi===t.kpi&&e.range===t.range&&e.view===t.view&&(e.overlay??"")===(t.overlay??"")}function $p(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n+=1)if(e[n].level!==t[n].level||String(e[n].id)!==String(t[n].id)||e[n].label!==t[n].label||!HRe(e[n].filters,t[n].filters))return!1;return!0}function zO(e,t){return`${e}|${t.kpi}|${t.range}|${t.view}`}function u8(e){const{stack:t,mode:n,queryKey:r,kpiKey:s,rangeKey:i,viewKey:o,defaultFilters:l,lastAppliedQueryRef:c}=e;if(typeof window>"u"||!t.length)return!1;const u=new URL(window.location.href),m=new URL(window.location.href),p=t[t.length-1],g=HO(KO(t)),y=eS(KO(t)).length<=1,v=p.filters.kpi===l.kpi&&p.filters.range===l.range&&p.filters.view===l.view;if(y?m.searchParams.delete(r):m.searchParams.set(r,g),y&&v?(m.searchParams.delete(o),m.searchParams.delete(s),m.searchParams.delete(i)):(p.filters.view===l.view?m.searchParams.delete(o):m.searchParams.set(o,p.filters.view),p.filters.kpi===l.kpi?m.searchParams.delete(s):m.searchParams.set(s,p.filters.kpi),p.filters.range===l.range?m.searchParams.delete(i):m.searchParams.set(i,p.filters.range)),m.search===u.search)return!1;n==="replace"?window.history.replaceState({},"",m.toString()):window.history.pushState({},"",m.toString());const N=y?"":g;return c.current=zO(N,p.filters),!0}function KRe({root:e,initialFilters:t,queryKey:n=LRe,kpiKey:r=$Re,rangeKey:s=FRe,viewKey:i=URe}){const o=h.useRef(t),l=h.useRef("");h.useEffect(()=>{o.current=t},[t.kpi,t.overlay,t.range,t.view]);const c=h.useMemo(()=>`${e.level}:${String(e.id)}:${e.label}`,[e.id,e.label,e.level]),u=h.useMemo(()=>L0(e,t),[t.kpi,t.overlay,t.range,t.view,e.id,e.label,e.level,c]),[m,p]=h.useState(()=>k_(u,n,r,s,i)),g=m[m.length-1]??u,x=m.length>1,y=x;h.useEffect(()=>{l.current=zO(HO(KO(m)),g.filters)},[g.filters.kpi,g.filters.range,g.filters.view,m]);const v=h.useCallback((A,T)=>{const R=A.length?d8(A):[L0({level:e.level,id:String(e.id),label:e.label},o.current)];return u8({stack:R,mode:T,queryKey:n,kpiKey:r,rangeKey:s,viewKey:i,defaultFilters:o.current,lastAppliedQueryRef:l}),R},[r,n,s,e.id,e.label,e.level,i]);h.useEffect(()=>{const A=L0(e,o.current),T=k_(A,n,r,s,i);p(R=>$p(R,T)?R:T),u8({stack:T,mode:"replace",queryKey:n,kpiKey:r,rangeKey:s,viewKey:i,defaultFilters:o.current,lastAppliedQueryRef:l})},[r,n,s,e.id,e.label,e.level,c,i]),h.useEffect(()=>{const A=()=>{const T=new URLSearchParams(window.location.search),R=HO(dW(T.get(n)));if(zO(R,{kpi:T.get(r)??o.current.kpi,range:fW(T.get(s)??o.current.range,o.current.range),view:uW(T.get(i),o.current.view)})===l.current)return;const P=L0(e,o.current),$=k_(P,n,r,s,i);p(w=>$p(w,$)?w:$)};return window.addEventListener("popstate",A),()=>window.removeEventListener("popstate",A)},[r,n,s,e.id,e.label,e.level,c,i]);const N=h.useCallback((A,T="replace")=>{p(R=>{const M=R.length?R:[u],P=M.map($=>({...$,filters:{...$.filters,...A}}));return $p(M,P)?M:v(P,T)})},[v,u]),S=h.useCallback((A,T="push")=>{p(R=>{const M=d8(R.length?R:[u]),P=M[M.length-1],$={...A,id:String(A.id),filters:{...P.filters,...A.filters},timestamp:Date.now()},w=fh[$.level],U=[...M.filter(X=>fh[X.level]<w),$];return $p(M,U)?M:v(U,T)})},[v,u]),j=h.useCallback(()=>{p(A=>{if(A.length<=1)return A;const T=A.slice(0,-1);return v(T,"push")})},[v]),C=h.useCallback(A=>{p(T=>{if(A<0||A>=T.length)return T;const R=T.slice(0,A+1);return $p(T,R)?T:v(R,"push")})},[v]),_=h.useCallback(()=>{const A=[L0({level:e.level,id:String(e.id),label:e.label},o.current)];p(T=>$p(T,A)?T:v(A,"push"))},[v,e.id,e.label,e.level]);return{stack:m,current:g,canBack:y,canGoBack:x,push:S,back:j,jumpTo:C,reset:_,syncFilters:N}}const zRe={nation:"sido",sido:"sigungu",sigungu:"eupmyeondong",center:"case"};function f8(e,t,n){return n?e==="nation"?n.length===2:e==="sido"||e==="sigungu"?t?n.startsWith(t)&&n.length>t.length:!1:!0:!1}function pW({level:e,parentRegionCode:t,candidates:n}){const r=zRe[e],s=new Set,i=[];for(const c of n){const u=String(c.code??"").trim();u&&(s.has(u)||(s.add(u),i.push({code:u,name:String(c.name??"").trim()})))}let o=[];if(e==="nation")o=i.filter(c=>f8(e,t,c.code));else if(t){const c=i.filter(u=>u.code===t?!1:f8(e,t,u.code));c.length>0?o=c:(o=i.filter(u=>u.code!==t),o.length>0&&console.warn("[ChildrenScope] parent-child code prefix mismatch, fallback to candidate children",{level:e,parentRegionCode:t,sampleChildCode:o[0]?.code}))}else o=i;const l=o.reduce((c,u)=>(u.name&&(c[u.code]=u.name),c),{});return{childrenType:r,childrenCodes:o.map(c=>c.code),childrenNameMap:l,children:o}}function p8({height:e=220}){return a.jsx("div",{className:"animate-pulse rounded-lg bg-muted",style:{height:e}})}var qRe=Symbol("radix.slottable");function VRe(e){const t=({children:n})=>a.jsx(a.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=qRe,t}var[tS]=cl("Tooltip",[Mh]),nS=Mh(),mW="TooltipProvider",WRe=700,qO="tooltip.open",[YRe,O3]=tS(mW),hW=e=>{const{__scopeTooltip:t,delayDuration:n=WRe,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=e,o=h.useRef(!0),l=h.useRef(!1),c=h.useRef(0);return h.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),a.jsx(YRe,{scope:t,isOpenDelayedRef:o,delayDuration:n,onOpen:h.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:h.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:h.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:i})};hW.displayName=mW;var yx="Tooltip",[QRe,Bx]=tS(yx),gW=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:s,onOpenChange:i,disableHoverableContent:o,delayDuration:l}=e,c=O3(yx,e.__scopeTooltip),u=nS(t),[m,p]=h.useState(null),g=tc(),x=h.useRef(0),y=o??c.disableHoverableContent,v=l??c.delayDuration,N=h.useRef(!1),[S,j]=od({prop:r,defaultProp:s??!1,onChange:R=>{R?(c.onOpen(),document.dispatchEvent(new CustomEvent(qO))):c.onClose(),i?.(R)},caller:yx}),C=h.useMemo(()=>S?N.current?"delayed-open":"instant-open":"closed",[S]),_=h.useCallback(()=>{window.clearTimeout(x.current),x.current=0,N.current=!1,j(!0)},[j]),A=h.useCallback(()=>{window.clearTimeout(x.current),x.current=0,j(!1)},[j]),T=h.useCallback(()=>{window.clearTimeout(x.current),x.current=window.setTimeout(()=>{N.current=!0,j(!0),x.current=0},v)},[v,j]);return h.useEffect(()=>()=>{x.current&&(window.clearTimeout(x.current),x.current=0)},[]),a.jsx(j3,{...u,children:a.jsx(QRe,{scope:t,contentId:g,open:S,stateAttribute:C,trigger:m,onTriggerChange:p,onTriggerEnter:h.useCallback(()=>{c.isOpenDelayedRef.current?T():_()},[c.isOpenDelayedRef,T,_]),onTriggerLeave:h.useCallback(()=>{y?A():(window.clearTimeout(x.current),x.current=0)},[A,y]),onOpen:_,onClose:A,disableHoverableContent:y,children:n})})};gW.displayName=yx;var VO="TooltipTrigger",xW=h.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=Bx(VO,n),i=O3(VO,n),o=nS(n),l=h.useRef(null),c=Xn(t,l,s.onTriggerChange),u=h.useRef(!1),m=h.useRef(!1),p=h.useCallback(()=>u.current=!1,[]);return h.useEffect(()=>()=>document.removeEventListener("pointerup",p),[p]),a.jsx(VN,{asChild:!0,...o,children:a.jsx(yn.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:on(e.onPointerMove,g=>{g.pointerType!=="touch"&&!m.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),m.current=!0)}),onPointerLeave:on(e.onPointerLeave,()=>{s.onTriggerLeave(),m.current=!1}),onPointerDown:on(e.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",p,{once:!0})}),onFocus:on(e.onFocus,()=>{u.current||s.onOpen()}),onBlur:on(e.onBlur,s.onClose),onClick:on(e.onClick,s.onClose)})})});xW.displayName=VO;var R3="TooltipPortal",[XRe,JRe]=tS(R3,{forceMount:void 0}),bW=e=>{const{__scopeTooltip:t,forceMount:n,children:r,container:s}=e,i=Bx(R3,t);return a.jsx(XRe,{scope:t,forceMount:n,children:a.jsx(dl,{present:n||i.open,children:a.jsx(wx,{asChild:!0,container:s,children:r})})})};bW.displayName=R3;var ph="TooltipContent",yW=h.forwardRef((e,t)=>{const n=JRe(ph,e.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=e,o=Bx(ph,e.__scopeTooltip);return a.jsx(dl,{present:r||o.open,children:o.disableHoverableContent?a.jsx(vW,{side:s,...i,ref:t}):a.jsx(ZRe,{side:s,...i,ref:t})})}),ZRe=h.forwardRef((e,t)=>{const n=Bx(ph,e.__scopeTooltip),r=O3(ph,e.__scopeTooltip),s=h.useRef(null),i=Xn(t,s),[o,l]=h.useState(null),{trigger:c,onClose:u}=n,m=s.current,{onPointerInTransitChange:p}=r,g=h.useCallback(()=>{l(null),p(!1)},[p]),x=h.useCallback((y,v)=>{const N=y.currentTarget,S={x:y.clientX,y:y.clientY},j=rke(S,N.getBoundingClientRect()),C=ake(S,j),_=ske(v.getBoundingClientRect()),A=oke([...C,..._]);l(A),p(!0)},[p]);return h.useEffect(()=>()=>g(),[g]),h.useEffect(()=>{if(c&&m){const y=N=>x(N,m),v=N=>x(N,c);return c.addEventListener("pointerleave",y),m.addEventListener("pointerleave",v),()=>{c.removeEventListener("pointerleave",y),m.removeEventListener("pointerleave",v)}}},[c,m,x,g]),h.useEffect(()=>{if(o){const y=v=>{const N=v.target,S={x:v.clientX,y:v.clientY},j=c?.contains(N)||m?.contains(N),C=!ike(S,o);j?g():C&&(g(),u())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[c,m,o,u,g]),a.jsx(vW,{...e,ref:i})}),[eke,tke]=tS(yx,{isInside:!1}),nke=VRe("TooltipContent"),vW=h.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=e,c=Bx(ph,n),u=nS(n),{onClose:m}=c;return h.useEffect(()=>(document.addEventListener(qO,m),()=>document.removeEventListener(qO,m)),[m]),h.useEffect(()=>{if(c.trigger){const p=g=>{g.target?.contains(c.trigger)&&m()};return window.addEventListener("scroll",p,{capture:!0}),()=>window.removeEventListener("scroll",p,{capture:!0})}},[c.trigger,m]),a.jsx(jx,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:p=>p.preventDefault(),onDismiss:m,children:a.jsxs(w3,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[a.jsx(nke,{children:r}),a.jsx(eke,{scope:n,isInside:!0,children:a.jsx(eOe,{id:c.contentId,role:"tooltip",children:s||r})})]})})});yW.displayName=ph;var NW="TooltipArrow",SW=h.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=nS(n);return tke(NW,n).isInside?null:a.jsx(A3,{...s,...r,ref:t})});SW.displayName=NW;function rke(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function ake(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function ske(e){const{top:t,right:n,bottom:r,left:s}=e;return[{x:s,y:t},{x:n,y:t},{x:n,y:r},{x:s,y:r}]}function ike(e,t){const{x:n,y:r}=e;let s=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],u=l.x,m=l.y,p=c.x,g=c.y;m>r!=g>r&&n<(p-u)*(r-m)/(g-m)+u&&(s=!s)}return s}function oke(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),lke(t)}function lke(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))t.pop();else break}t.push(s)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const s=e[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var k3=hW,I3=gW,D3=xW,P3=bW,M3=yW,L3=SW;function cke({delayDuration:e=0,...t}){return a.jsx(k3,{"data-slot":"tooltip-provider",delayDuration:e,...t})}function dke({...e}){return a.jsx(cke,{children:a.jsx(I3,{"data-slot":"tooltip",...e})})}function uke({...e}){return a.jsx(D3,{"data-slot":"tooltip-trigger",...e})}function fke({className:e,sideOffset:t=0,children:n,...r}){return a.jsx(P3,{children:a.jsxs(M3,{"data-slot":"tooltip-content",sideOffset:t,className:he("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...r,children:[n,a.jsx(L3,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}function jf({help:e,onActionClick:t,actionLabel:n="  "}){return a.jsxs(dke,{children:[a.jsx(uke,{asChild:!0,children:a.jsx("button",{type:"button",className:"inline-flex h-4 w-4 items-center justify-center rounded-full border border-gray-300 bg-white text-gray-500 hover:text-gray-700","aria-label":"  ",children:a.jsx(wm,{className:"h-3 w-3"})})}),a.jsx(fke,{sideOffset:8,className:"max-w-[300px] rounded-lg border border-gray-200 bg-white px-3 py-2 text-gray-800 shadow-lg",children:a.jsxs("div",{className:"space-y-1.5 text-[11px] leading-relaxed",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold",children:":"})," ",e.definition]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold",children:" :"})," ",e.scope]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold",children:":"})," ",e.period]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold",children:":"})," ",e.threshold]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold",children:":"})," ",e.interpretation]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold",children:" :"})," ",e.nextAction]}),t?a.jsx("button",{type:"button",onClick:t,className:"mt-1 inline-flex h-6 items-center rounded border border-blue-200 bg-blue-50 px-2 text-[10px] font-medium text-blue-700 hover:bg-blue-100",children:n}):null]})})]})}function pke({label:e,help:t,onActionClick:n,className:r}){return a.jsxs("span",{className:`inline-flex items-center gap-1.5 ${r??""}`,children:[a.jsx("span",{children:e}),a.jsx(jf,{help:t,onActionClick:n})]})}function mke(e,t){const n={scope:`${t.scopeLabel}  `,period:`${t.rangeLabel} `};switch(e){case"slaRisk":return{definition:"     ",scope:n.scope,period:n.period,threshold:` ${t.longWaitDays}   `,interpretation:"   ",nextAction:"      ",actionTab:"bottleneck"};case"unprocessedWork":return{definition:"     ",scope:n.scope,period:`${t.rangeLabel} `,threshold:` ${t.longWaitDays}   `,interpretation:"       ",nextAction:"/    ",actionTab:"actions"};case"examDelay":return{definition:"     ",scope:n.scope,period:n.period,threshold:`  ${t.longWaitDays}`,interpretation:"  ",nextAction:"      ",actionTab:"bottleneck"};case"followupDelay":return{definition:"    ",scope:n.scope,period:n.period,threshold:` ${t.longWaitDays}    `,interpretation:"    ",nextAction:"/    ",actionTab:"actions"};case"conversionGap":return{definition:"    (-)",scope:n.scope,period:n.period,threshold:"    ",interpretation:"    ",nextAction:"    ",actionTab:"reports"};case"top5Share":return{definition:" 5    ",scope:n.scope,period:n.period,threshold:"       ",interpretation:"     ",nextAction:"/     ",actionTab:"actions"};case"insightHeadline":default:return{definition:"      ",scope:n.scope,period:n.period,threshold:` ${t.longWaitDays}  `,interpretation:"      ",nextAction:"      ",actionTab:"bottleneck"}}}const zc={unprocessedWork:{user:" ( )",technical:"Queue backlog /    "},workQueue:{user:" ",technical:" Queue"},queuePressure:{user:"  ",technical:"Queue pressure"},deadlineOverdue:{user:"  ",technical:"Long-wait backlog"},sla:{user:" ( )",technical:"SLA (  )"},examDelay:{user:"  ()",technical:"Differential exam delay hotspot"},conversionGap:{user:"   ",technical:"Screening-to-diagnostic conversion gap"},followupDelay:{user:"  ",technical:"Recontact delay"},contactUnsuccessful:{user:" ",technical:"Contact failure"}},hke=[[/ \( \)/g,zc.unprocessedWork.user],[//g,zc.workQueue.user],[/ /g," "],[/ /g,zc.queuePressure.user],[//g,zc.deadlineOverdue.user],[/\( \)/g,zc.examDelay.user],[/\(\)/g,zc.conversionGap.user],[/ /g,zc.followupDelay.user],[/ /g,zc.contactUnsuccessful.user]];function I_(e){return zc[e]}function D_(e){return hke.reduce((t,[n,r])=>t.replace(n,r),e)}const gke=[{causeKey:"staff_shortage",ownerOrg:"center",actionable:!0,regionalNeed:"high",escalationPath:[{toOrgRole:"centerLead",channel:"internal",slaHours:12},{toOrgRole:"regionalDutyOfficer",channel:"email",slaHours:24}],defaultActions:[{title:"   ",steps:[" 2    ","48  "],expectedEffectTags:["SLA "," "]}]},{causeKey:"contact_failure",ownerOrg:"center",actionable:!0,regionalNeed:"high",escalationPath:[{toOrgRole:"centerLead",channel:"internal",slaHours:12},{toOrgRole:"regionalCallOps",channel:"sms",slaHours:24}],defaultActions:[{title:"  ",steps:["  ","   "],expectedEffectTags:["SLA "," "]}]},{causeKey:"hospital_slot_delay",ownerOrg:"hospital",actionable:!1,regionalNeed:"high",escalationPath:[{toOrgRole:"hospitalLead",channel:"email",slaHours:12},{toOrgRole:"regionalPartnershipManager",channel:"internal",slaHours:24}],defaultActions:[{title:"   ",steps:["    ","   "],expectedEffectTags:["  ","SLA "]}]},{causeKey:"data_gap",ownerOrg:"system",actionable:!0,regionalNeed:"medium",escalationPath:[{toOrgRole:"systemOps",channel:"internal",slaHours:24},{toOrgRole:"regionalDataSteward",channel:"email",slaHours:48}],defaultActions:[{title:"   ",steps:["  ","   "],expectedEffectTags:[" "]}]},{causeKey:"external_dependency",ownerOrg:"external",actionable:!1,regionalNeed:"medium",escalationPath:[{toOrgRole:"externalPartner",channel:"email",slaHours:24},{toOrgRole:"regionalDutyOfficer",channel:"internal",slaHours:48}],defaultActions:[{title:"    ",steps:["    ","   "],expectedEffectTags:[" "]}]}],xke=[{kpiKey:"regionalSla",thresholds:{watch:12,critical:18},trendRules:[{type:"increasing_streak",metric:"ratio",days:3,deltaMin:1.5},{type:"no_decrease",metric:"ratio",days:5}]},{kpiKey:"regionalDxDelayHotspot",thresholds:{watch:30,critical:45},trendRules:[{type:"increasing_streak",metric:"count",days:3,deltaMin:5},{type:"rebound",metric:"count",days:4}]},{kpiKey:"regionalQueueRisk",thresholds:{watch:180,critical:260},trendRules:[{type:"increasing_streak",metric:"count",days:3,deltaMin:20},{type:"no_decrease",metric:"count",days:5}]},{kpiKey:"regionalRecontact",thresholds:{watch:14,critical:20},trendRules:[{type:"increasing_streak",metric:"ratio",days:4,deltaMin:1.2},{type:"rebound",metric:"ratio",days:4}]}],m8=[{regionKey:"seoul",ownerOrg:"center",assigneeId:"center-lead-seoul",assigneeRole:" ",defaultDueSlaHours:48},{regionKey:"seoul",ownerOrg:"hospital",assigneeId:"hospital-partner-seoul",assigneeRole:"  ",defaultDueSlaHours:72},{regionKey:"seoul",ownerOrg:"system",assigneeId:"system-ops-core",assigneeRole:" ",defaultDueSlaHours:72},{regionKey:"seoul",ownerOrg:"external",assigneeId:"external-link-manager",assigneeRole:"  ",defaultDueSlaHours:96}];function $3(e){return gke.find(t=>t.causeKey===e)}function F3(e){const t=m8.find(n=>n.regionKey===e.regionKey&&n.ownerOrg===e.ownerOrg&&(n.areaKey==null||n.areaKey===e.areaKey)&&(n.causeKey==null||n.causeKey===e.causeKey))??m8.find(n=>n.regionKey===e.regionKey&&n.ownerOrg===e.ownerOrg);return t||{regionKey:e.regionKey,ownerOrg:e.ownerOrg,assigneeId:"regional-duty-officer",assigneeRole:"  ",defaultDueSlaHours:72}}function bke(e){return xke.find(t=>t.kpiKey===e)}function h8(e){return`${e.kpiKey}|${e.areaLabel}|${e.causeKey}|${e.stageKey}|${e.period}`}function yke(e,t="open"){const n=e.selectedRegionSgg??`${e.regionLabel} `;return[{id:"todo-sla-risk",title:"SLA    ",reason:`   ${e.alertSummary.slaAtRiskRegions}  `,target:`${n}   `,recommendedAction:" 2    ",dueSlaHours:24,status:t,relatedQueryState:{regionKey:e.regionKey,period:e.selectedRange,kpiKey:"regionalSla",areaKey:e.selectedRegionSgg,layer:"RISK"}},{id:"todo-dx-delay",title:"    ",reason:`  ${Math.round(e.avgExamDelayDays)},  ${e.longWaitDays} `,target:`${n}   `,recommendedAction:"       ",dueSlaHours:24,status:t,relatedQueryState:{regionKey:e.regionKey,period:e.selectedRange,kpiKey:"regionalDxDelayHotspot",areaKey:e.selectedRegionSgg,layer:"BOTTLENECK"}},{id:"todo-followup",title:"   ",reason:`   ${e.overdueFollowups.toLocaleString()}`,target:`${n}    `,recommendedAction:"     ",dueSlaHours:48,status:t,relatedQueryState:{regionKey:e.regionKey,period:e.selectedRange,kpiKey:"regionalRecontact",areaKey:e.selectedRegionSgg,layer:"BOTTLENECK"}}]}function vke(e){const t=e.selectedRegionSgg?[e.selectedRegionSgg]:e.districtOptions.slice(0,Math.min(4,Math.max(1,e.districtOptions.length))),n=[{kpiKey:"regionalSla",stageKey:"Stage1",causeKey:"staff_shortage",ruleId:"RULE-SLA-15",ruleLabel:"SLA  15% "},{kpiKey:"regionalDxDelayHotspot",stageKey:"Stage2",causeKey:"hospital_slot_delay",ruleId:"RULE-DX-7D",ruleLabel:"  7 "},{kpiKey:"regionalAdTransitionHotspot",stageKey:"Stage3",causeKey:"contact_failure",ruleId:"RULE-AD-HR-5",ruleLabel:"AD    5 "}],r=new Set(e.existingOpenInterventions.filter(i=>i.status==="TODO"||i.status==="IN_PROGRESS").map(i=>h8({kpiKey:i.kpiKey,areaLabel:i.areaLabel,causeKey:i.causeKey,stageKey:i.stageKey,period:i.period}))),s=[];return t.forEach((i,o)=>{n.forEach((l,c)=>{const u=$3(l.causeKey),m=F3({regionKey:e.regionKey,areaKey:i,causeKey:l.causeKey,ownerOrg:u?.ownerOrg??"regional"}),p=bke(l.kpiKey),g=h8({kpiKey:l.kpiKey,areaLabel:i,causeKey:l.causeKey,stageKey:l.stageKey,period:e.selectedRange}),x=r.has(g);s.push({previewId:`preview-${o}-${c}`,dedupeKey:g,regionLabel:i,kpiKey:l.kpiKey,stageKey:l.stageKey,causeKey:l.causeKey,ownerOrg:u?.ownerOrg??"regional",assigneeId:m.assigneeId,assigneeRole:m.assigneeRole,dueSlaHours:p?.thresholds.critical?Math.max(24,Math.round(m.defaultDueSlaHours)):m.defaultDueSlaHours,blockedByDuplicate:x,blockedReason:x?" open  ":void 0,ruleId:l.ruleId,ruleLabel:l.ruleLabel})})}),s}const Nd="/api/regional";function Gx(e,t){const n=new URLSearchParams;Object.entries(t).forEach(([s,i])=>{i==null||i===""||n.set(s,String(i))});const r=n.toString();return r?`${e}?${r}`:e}function EW(e,t,n){const r=new URLSearchParams;Object.entries(t).forEach(([i,o])=>{o==null||o===""||r.set(i,String(o))}),n.forEach(i=>{i&&r.append("district",i)});const s=r.toString();return s?`${e}?${s}`:e}async function Sd(e,t){const n=await fetch(e,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},...t});if(!n.ok)throw new Error(`HTTP ${n.status}`);return await n.json()}function Hu(e){return e==="month"?"month":e==="quarter"?"quarter":"week"}function jW(e){return e.map(t=>{if(typeof t=="string")return t;const n=String(t.code||"").trim(),r=String(t.name||"").trim();return!n&&!r?"":n?r?`${n}::${r}`:n:r}).filter(Boolean)}function Nke(e){const t=String(e??"").trim();return t==="Stage2"||t==="L2"?"Stage2":t==="Stage3"||t==="3rd"?"Stage3":"Stage1"}function Ske(e){const t=String(e??"").trim();return t==="IN_PROGRESS"?"IN_PROGRESS":t==="DONE"?"DONE":t==="BLOCKED"?"BLOCKED":"TODO"}function Eke(e){const t=String(e??"").trim();return t==="STAFFING"||t==="RECONTACT_PUSH"||t==="DATA_FIX"||t==="PATHWAY_TUNE"||t==="GOVERNANCE_FIX"?t:"RECONTACT_PUSH"}function jke(e){const t=String(e??"").trim();return t==="center"||t==="hospital"||t==="system"||t==="external"||t==="regional"?t:"regional"}function WO(e){const t=String(e??"").trim();return["regionalSla","regionalQueueRisk","regionalRecontact","regionalDataReadiness","regionalGovernance","regionalAdTransitionHotspot","regionalDxDelayHotspot","regionalScreenToDxRate"].includes(t)?t:"regionalQueueRisk"}function wke(){return{regionalSla:0,regionalQueueRisk:0,regionalRecontact:0,regionalDataReadiness:0,regionalGovernance:0,regionalAdTransitionHotspot:0,regionalDxDelayHotspot:0,regionalScreenToDxRate:0}}function Ake(e){return e==="regionalAdTransitionHotspot"?"RISK":e==="regionalScreenToDxRate"?"GAP":e==="regionalDxDelayHotspot"||e==="regionalRecontact"?"BOTTLENECK":"LOAD"}function g8(e,t,n,r,s){const i=e?.selectedStage,o=i==="contact"||i==="recontact"||i==="L2"||i==="3rd"?i:null;return{regionKey:String(e?.regionKey||t),period:e?.period==="week"||e?.period==="month"||e?.period==="quarter"?e.period:n,kpiKey:WO(e?.kpiKey||r),areaKey:e?.areaKey==null?s:String(e.areaKey),layer:e?.layer==="RISK"||e?.layer==="BOTTLENECK"||e?.layer==="GAP"||e?.layer==="LOAD"?e.layer:Ake(r),selectedStage:o,selectedCauseKey:e?.selectedCauseKey==null?null:String(e.selectedCauseKey),trendMetric:e?.trendMetric==="count"?"count":"ratio"}}function _ke(e,t,n){const r=WO(e?.kpiKey),s=String(e?.areaLabel||e?.areaKey||" "),i=String(e?.areaKey||s),o=e?.createdFrom?.snapshot??{},l=e?.beforeMetrics&&typeof e.beforeMetrics=="object"?e.beforeMetrics:wke(),c=e?.afterMetrics&&typeof e.afterMetrics=="object"?e.afterMetrics:void 0,u=Number(o.kpiValue??l[r]??0),m=Number(o.backlogCount??l.regionalQueueRisk??0);return{id:String(e?.id||`INT-${Date.now()}`),title:String(e?.title||`${s} ${r}  `),stageKey:Nke(e?.stageKey),areaKey:i,areaLabel:s,region:String(e?.region||t),kpiKey:r,type:Eke(e?.type),status:Ske(e?.status),owner:String(e?.owner||" "),ownerOrg:jke(e?.ownerOrg),createdAt:String(e?.createdAt||new Date().toISOString()),dueAt:e?.dueAt?String(e.dueAt):void 0,ruleId:e?.ruleId?String(e.ruleId):void 0,context:g8(e?.context??e?.createdFrom?.queryState,t,n,r,i),assignment:e?.assignment,successMetric:e?.successMetric,createdFrom:{causeKey:String(e?.createdFrom?.causeKey||"staff_shortage"),kpiKey:WO(e?.createdFrom?.kpiKey||r),snapshotId:e?.createdFrom?.snapshotId?String(e.createdFrom.snapshotId):void 0,queryState:g8(e?.createdFrom?.queryState,t,n,r,i),snapshot:{kpiValue:u,backlogCount:m,avgDwell:Number(o.avgDwell??o.avgDwellMin??0),deltaVsRegional:o.deltaVsRegional==null?void 0:Number(o.deltaVsRegional),unit:o.unit==="%"||o.unit===""||o.unit===""||o.unit===""?o.unit:void 0}},expectedEffectTags:Array.isArray(e?.expectedEffectTags)?e.expectedEffectTags.map(p=>String(p)):[],logs:Array.isArray(e?.logs)?e.logs:[],kpiComparison:e?.kpiComparison&&typeof e.kpiComparison=="object"?e.kpiComparison:{before:{value:u,backlog:m}},notes:String(e?.notes||""),evidenceLinks:Array.isArray(e?.evidenceLinks)?e.evidenceLinks.map(p=>String(p)):[],beforeMetrics:l,afterMetrics:c,timeline:Array.isArray(e?.timeline)?e.timeline:[]}}async function Cke(e){const t=jW(e.districts),n=EW(`${Nd}/dashboard/districts`,{regionId:e.regionId,period:Hu(e.period),rangePreset:e.rangePreset},t);return Sd(n)}async function Tke(e){return Sd(Gx(`${Nd}/cause/summary`,{regionId:e.regionId,kpiKey:e.kpiKey,sigungu:e.sigungu,period:Hu(e.period),selectedStage:e.selectedStage??void 0,selectedCauseKey:e.selectedCauseKey??void 0}))}async function Oke(e){return Sd(Gx(`${Nd}/cause/causes`,{regionId:e.regionId,kpiKey:e.kpiKey,sigungu:e.sigungu,period:Hu(e.period),selectedStage:e.selectedStage??void 0,selectedArea:e.selectedArea??void 0}))}async function Rke(e){const t=EW(`${Nd}/cause/area-comparison`,{regionId:e.regionId,kpiKey:e.kpiKey,sigungu:e.sigungu,period:Hu(e.period),selectedStage:e.selectedStage??void 0,selectedCauseKey:e.selectedCauseKey??void 0},jW(e.districtOptions));return Sd(t)}async function kke(e){return Sd(Gx(`${Nd}/cause/trend`,{regionId:e.regionId,kpiKey:e.kpiKey,sigungu:e.sigungu,period:Hu(e.period),selectedStage:e.selectedStage??void 0,selectedCauseKey:e.selectedCauseKey??void 0,selectedArea:e.selectedArea??void 0,trendMetric:e.trendMetric}))}async function Ike(e){return Sd(`${Nd}/cause/interventions`,{method:"POST",body:JSON.stringify(e)})}async function Dke(e){const t=Gx(`${Nd}/interventions/snapshot`,{regionId:e.regionId,period:Hu(e.period)}),n=await Sd(t),r=Array.isArray(n.items)?n.items.map(s=>_ke(s,e.regionId,e.period)):[];return{regionId:n.regionId,period:n.period,items:r,count:r.length}}async function Pke(e){return Sd(`${Nd}/interventions/snapshot`,{method:"PUT",body:JSON.stringify({regionId:e.regionId,period:Hu(e.period),items:e.items})})}async function Mke(e){return Sd(Gx(`${Nd}/reports/summary`,{regionId:e.regionId,scopeMode:e.scopeMode,sgg:e.sgg,kpi:e.kpi,period:Hu(e.period)}))}const Lke={regionalSla:"LOAD",regionalQueueRisk:"BOTTLENECK",regionalRecontact:"BOTTLENECK",regionalDataReadiness:"LOAD",regionalGovernance:"LOAD",regionalAdTransitionHotspot:"RISK",regionalDxDelayHotspot:"BOTTLENECK",regionalScreenToDxRate:"GAP"},py={RISK:"regionalAdTransitionHotspot",BOTTLENECK:"regionalDxDelayHotspot",GAP:"regionalScreenToDxRate",LOAD:"regionalQueueRisk"},$ke={regionalSla:" ( )",regionalQueueRisk:" ( )",regionalRecontact:"  ",regionalDataReadiness:"  ",regionalGovernance:" ",regionalAdTransitionHotspot:"  ",regionalDxDelayHotspot:"  ()",regionalScreenToDxRate:"   "},Fke={regionalSla:"slaRisk",regionalQueueRisk:"unprocessedWork",regionalRecontact:"followupDelay",regionalDataReadiness:"unprocessedWork",regionalGovernance:"unprocessedWork",regionalAdTransitionHotspot:"slaRisk",regionalDxDelayHotspot:"examDelay",regionalScreenToDxRate:"conversionGap"};function Uke(){const e=h.useRef(null),[t,n]=h.useState({width:typeof window<"u"?window.innerWidth:1920,height:typeof window<"u"?window.innerHeight:1080}),r=h.useRef(null);return h.useEffect(()=>{const s=e.current;if(!s)return;const i=()=>{r.current&&cancelAnimationFrame(r.current),r.current=requestAnimationFrame(()=>{const l=s.getBoundingClientRect();n(c=>c.width===l.width&&c.height===l.height?c:{width:l.width,height:l.height})})},o=new ResizeObserver(i);return o.observe(s),window.addEventListener("resize",i,{passive:!0}),i(),()=>{o.disconnect(),window.removeEventListener("resize",i),r.current&&cancelAnimationFrame(r.current)}},[]),[e,t]}const Bke=e=>{let t=0;for(let n=0;n<e.length;n+=1)t=t*31+e.charCodeAt(n)>>>0;return t},kt=(e,t,n)=>t+(n-t)*(Bke(e)%1e3/1e3),YO={week:1,month:1.1,quarter:1.25},Gke={"24h":"week","7d":"week","30d":"month","90d":"quarter"},Fp={"24h":"24h","7d":"7","30d":"30","90d":"90"},wW={"24h":.35,"7d":1,"30d":2.8,"90d":6.8},AW={"24h":.85,"7d":1,"30d":1.25,"90d":1.45},_W={"24h":-.4,"7d":0,"30d":.5,"90d":.8},Qn={regionalSla:[35,260],regionalQueueRisk:[40,320],regionalRecontact:[3,21],regionalDataReadiness:[4,24],regionalGovernance:[22,78],regionalAdTransitionHotspot:[18,92],regionalDxDelayHotspot:[8,68],regionalScreenToDxRate:[34,91]},Hke={regionalSla:a.jsx(fs,{className:"h-4 w-4"}),regionalQueueRisk:a.jsx(ym,{className:"h-4 w-4"}),regionalRecontact:a.jsx(ti,{className:"h-4 w-4"}),regionalDataReadiness:a.jsx(gd,{className:"h-4 w-4"}),regionalGovernance:a.jsx(nl,{className:"h-4 w-4"}),regionalAdTransitionHotspot:a.jsx(Tg,{className:"h-4 w-4"}),regionalDxDelayHotspot:a.jsx(L1,{className:"h-4 w-4"}),regionalScreenToDxRate:a.jsx(KU,{className:"h-4 w-4"})},P_={density:.45,transition:.35,delta:.2},M_={wait:.45,delayed:.3,backlog:.25},L_={gapRate:.45,deltaGap:.35,support:.2},x8={seoul:["","","","","","","","","","","","","","","","","","","","","","","","",""],busan:["","","","","","","","","","","","","","","",""],daegu:["","","","","","","",""],incheon:["","","","","","","","","",""],gwangju:["","","","",""],daejeon:["","","","",""],ulsan:["","","","",""],sejong:[""],gyeonggi:["","","","","","","","","","","","","","","","","","","",""],gangwon:["","","","","","","","","",""],chungbuk:["","","","","","","","","",""],chungnam:["","","","","","","","","",""],jeonbuk:["","","","","","","","","",""],jeonnam:["","","","","","","","","",""],gyeongbuk:["","","","","","","","","",""],gyeongnam:["","","","","","","","","",""],jeju:["",""]},Kke=["08-10","10-12","12-14","14-16","16-18","18-20"];function $l(e){return String(e??"").trim().replace(/\s+/g,"").replace(/[()]/g,"")}function $0(e){return e==="REGION"?"SIGUNGU":"EUPMYEONDONG"}function my(e,t){const n=bm[e];return n.unit===""?`${Math.round(t).toLocaleString()}`:n.unit===""?`${Math.round(t)}`:n.unit===""?`${Math.round(t)}`:`${t.toFixed(1)}%`}function oo(e){const t=new Map;return e.forEach(n=>{n.forEach(r=>{t.set(r.name,(t.get(r.name)??0)+r.value)})}),[...t.entries()].map(([n,r])=>({name:n,value:Number(r.toFixed(1))})).sort((n,r)=>r.value-n.value)}function Hc(e,t,n){if(!Number.isFinite(e)||!Number.isFinite(t)||!Number.isFinite(n)||n<=t)return .5;const r=(e-t)/(n-t);return Math.max(0,Math.min(1,r))}function Vp(e,t,n,r,s){const i=`${t}-${n}-${e}`,o=YO[n],l=wW[r]*o,c=AW[r]*o,u=_W[r],m=Math.round(kt(`${i}-volume`,120,1100)*l),p=Math.round(kt(`${i}-inflow`,Qn.regionalSla[0],Qn.regionalSla[1])*l),g=Math.round(kt(`${i}-queue`,Qn.regionalQueueRisk[0],Qn.regionalQueueRisk[1])*c),x=Number(Math.max(Qn.regionalRecontact[0],Math.min(Qn.regionalRecontact[1],kt(`${i}-sla-risk`,Qn.regionalRecontact[0],Qn.regionalRecontact[1])+u)).toFixed(1)),y=Number(Math.max(Qn.regionalDataReadiness[0],Math.min(Qn.regionalDataReadiness[1],kt(`${i}-recontact-need`,Qn.regionalDataReadiness[0],Qn.regionalDataReadiness[1])+u)).toFixed(1)),v=Number(Math.max(Qn.regionalGovernance[0],Math.min(Qn.regionalGovernance[1],kt(`${i}-center-risk`,Qn.regionalGovernance[0],Qn.regionalGovernance[1])+u*4)).toFixed(1)),N=Number(Math.max(Qn.regionalAdTransitionHotspot[0],Math.min(Qn.regionalAdTransitionHotspot[1],kt(`${i}-ad-density`,Qn.regionalAdTransitionHotspot[0],Qn.regionalAdTransitionHotspot[1])+u*3)).toFixed(1)),S=Math.round(kt(`${i}-ad-highrisk`,28,240)*l),j=Math.round(kt(`${i}-ad-tr30`,8,88)*l),C=Math.round(kt(`${i}-ad-tr90`,22,210)*l),_=Number(Math.max(Qn.regionalDxDelayHotspot[0],Math.min(Qn.regionalDxDelayHotspot[1],kt(`${i}-dx-wait`,Qn.regionalDxDelayHotspot[0],Qn.regionalDxDelayHotspot[1])+u*2.5)).toFixed(1)),A=Number(Math.max(.04,Math.min(.42,kt(`${i}-dx-delayed-ratio`,.08,.36)+u*.01)).toFixed(3)),T=Math.round(kt(`${i}-dx-backlog`,20,210)*c),R=Number(Math.max(Qn.regionalScreenToDxRate[0],Math.min(Qn.regionalScreenToDxRate[1],kt(`${i}-screen-dx-rate`,Qn.regionalScreenToDxRate[0],Qn.regionalScreenToDxRate[1])-u)).toFixed(1)),M=Number(kt(`${i}-screen-dx-recontact`,6,24).toFixed(1)),P=Number(kt(`${i}-screen-dx-delay`,8,46).toFixed(1)),$={:kt(`${i}-sla-contact`,12,34),:kt(`${i}-sla-recontact`,10,26),L2:kt(`${i}-sla-l2`,8,20),"2":kt(`${i}-sla-s2`,10,24),"3":kt(`${i}-sla-s3`,8,20)},w=Object.values($).reduce((Z,ie)=>Z+ie,0),U=Object.entries($).map(([Z,ie])=>({name:Z,value:Number((ie/w*100).toFixed(1))})),X=[{name:" ",value:Math.round(kt(`${i}-qt-recontact`,18,165)*c)},{name:"L2 ",value:Math.round(kt(`${i}-qt-l2`,14,132)*c)},{name:"2 ",value:Math.round(kt(`${i}-qt-s2`,10,120)*c)},{name:"3 ",value:Math.round(kt(`${i}-qt-s3`,8,95)*c)}],I=[{name:" ",value:Math.round(kt(`${i}-cause-contact`,10,65)*c)},{name:"  ",value:Math.round(kt(`${i}-cause-staff`,8,52)*c)},{name:" ",value:Math.round(kt(`${i}-cause-data`,6,44)*c)},{name:"2/3 ",value:Math.round(kt(`${i}-cause-stage`,7,48)*c)},{name:" ",value:Math.round(kt(`${i}-cause-booking`,5,36)*c)}].sort((Z,ie)=>ie.value-Z.value),G=[{name:" ",value:Math.round(kt(`${i}-rr-contact`,12,58)*c)},{name:"",value:Math.round(kt(`${i}-rr-noanswer`,18,82)*c)},{name:" ",value:Math.round(kt(`${i}-rr-time`,10,52)*c)}].sort((Z,ie)=>ie.value-Z.value),L=["D-6","D-5","D-4","D-3","D-2","D-1","D0"].map((Z,ie)=>({day:Z,value:Number(kt(`${i}-rt-${ie}`,6,40).toFixed(1))})),H=Kke.map((Z,ie)=>({slot:Z,successRate:Number(kt(`${i}-slot-rate-${ie}`,42,88).toFixed(1)),attempts:Math.round(kt(`${i}-slot-attempt-${ie}`,18,120)*c)})),F=[{name:" ",value:Math.round(kt(`${i}-mf-phone`,10,64)*c)},{name:" ",value:Math.round(kt(`${i}-mf-guardian`,8,44)*c)},{name:" ",value:Math.round(kt(`${i}-mf-condition`,7,40)*c)},{name:"  ",value:Math.round(kt(`${i}-mf-history`,6,36)*c)}].sort((Z,ie)=>ie.value-Z.value),K=[{name:"0-1",value:Math.round(kt(`${i}-lead-0`,22,96)*c)},{name:"2-3",value:Math.round(kt(`${i}-lead-1`,16,76)*c)},{name:"4-7",value:Math.round(kt(`${i}-lead-2`,10,58)*c)},{name:"8+",value:Math.round(kt(`${i}-lead-3`,6,42)*c)}],ne=[{name:" ",value:Math.round(kt(`${i}-gov-owner`,5,32)*c)},{name:"  ",value:Math.round(kt(`${i}-gov-proof`,6,36)*c)},{name:"  ",value:Math.round(kt(`${i}-gov-log`,7,40)*c)}].sort((Z,ie)=>ie.value-Z.value),V=[{status:"",value:Math.round(kt(`${i}-gact-open`,8,48)*c)},{status:"",value:Math.round(kt(`${i}-gact-progress`,6,36)*c)},{status:"",value:Math.round(kt(`${i}-gact-done`,4,30)*c)}],ee=[{name:" ",value:S},{name:" 30  ",value:j},{name:"   ",value:Number((N-45).toFixed(1))}],ae=[{name:" ",value:_},{name:" ",value:Number((A*100).toFixed(1))},{name:" ",value:T}],ue=[{name:" ",value:Number((100-R).toFixed(1))},{name:" ",value:M},{name:" ",value:P}],ce={stage1SignalDelta:Number(kt(`${i}-s1-signal`,-18,24).toFixed(1)),stage1QueueDelta:Math.round(kt(`${i}-s1-queue`,-14,36)*c),stage2SignalDelta:Number(kt(`${i}-s2-signal`,-16,22).toFixed(1)),stage2QueueDelta:Math.round(kt(`${i}-s2-queue`,-12,32)*c),stage3SignalDelta:Number(kt(`${i}-s3-signal`,-12,18).toFixed(1)),stage3QueueDelta:Math.round(kt(`${i}-s3-queue`,-10,26)*c)};return{regionId:s??e,name:e,volume:m,kpi:{regionalSla:p,regionalQueueRisk:g,regionalRecontact:x,regionalDataReadiness:y,regionalGovernance:v,regionalAdTransitionHotspot:N,regionalDxDelayHotspot:_,regionalScreenToDxRate:R},mapMetric:{regionalSla:p,regionalQueueRisk:g,regionalRecontact:x,regionalDataReadiness:y,regionalGovernance:v,regionalAdTransitionHotspot:N,regionalDxDelayHotspot:_,regionalScreenToDxRate:R},adTransitionSignal:{regionId:`${t}-${e}`,regionName:e,highRiskCount:S,transition30d:j,transition90d:C,densityScore:N,deltaFromAvg:Number((N-45).toFixed(1))},differentialDelay:{regionId:`${t}-${e}`,regionName:e,avgWaitDays:_,delayedRatio:A,backlogCount:T,deltaFromAvg:Number((_-24).toFixed(1))},stageConversionRate:{regionId:`${t}-${e}`,regionName:e,conversionRate:Number((R/100).toFixed(3)),deltaFromRegional:Number((R-64).toFixed(1))},adTransitionDrivers:ee,dxDelayDrivers:ae,screenToDxDrivers:ue,policyImpactLocal:Number(kt(`${i}-policy-impact`,42,88).toFixed(1)),slaStageContribution:U,queueTypeBacklog:X,queueCauseTop:I,recontactReasons:G,recontactTrend:L,recontactSlots:H,missingFields:F,collectionLeadtime:K,governanceMissingTypes:ne,governanceActionStatus:V,stageImpact:ce}}function zke(e){if(!e.length)return Vp("","empty","week","7d","empty");const t=e.reduce((x,y)=>x+y.volume,0),n=x=>t>0?x.volume/t:1/e.length,r=x=>Number(e.reduce((y,v)=>y+v.kpi[x]*n(v),0).toFixed(1)),s=x=>Number(e.reduce((y,v)=>y+v.mapMetric[x]*n(v),0).toFixed(1)),i=new Map;e.forEach(x=>{x.recontactSlots.forEach(y=>{const v=i.get(y.slot)??{attempts:0,weightedSuccess:0};i.set(y.slot,{attempts:v.attempts+y.attempts,weightedSuccess:v.weightedSuccess+y.successRate*y.attempts})})});const o=[...i.entries()].map(([x,y])=>({slot:x,attempts:y.attempts,successRate:y.attempts>0?Number((y.weightedSuccess/y.attempts).toFixed(1)):0})),l=e[0].recontactTrend.length,c=Array.from({length:l},(x,y)=>{const v=e[0].recontactTrend[y].day,N=Number(e.reduce((S,j)=>S+j.recontactTrend[y].value*n(j),0).toFixed(1));return{day:v,value:N}}),u={stage1SignalDelta:Number(e.reduce((x,y)=>x+y.stageImpact.stage1SignalDelta*n(y),0).toFixed(1)),stage1QueueDelta:Math.round(e.reduce((x,y)=>x+y.stageImpact.stage1QueueDelta*n(y),0)),stage2SignalDelta:Number(e.reduce((x,y)=>x+y.stageImpact.stage2SignalDelta*n(y),0).toFixed(1)),stage2QueueDelta:Math.round(e.reduce((x,y)=>x+y.stageImpact.stage2QueueDelta*n(y),0)),stage3SignalDelta:Number(e.reduce((x,y)=>x+y.stageImpact.stage3SignalDelta*n(y),0).toFixed(1)),stage3QueueDelta:Math.round(e.reduce((x,y)=>x+y.stageImpact.stage3QueueDelta*n(y),0))},m=Number(e.reduce((x,y)=>x+y.adTransitionSignal.densityScore*n(y),0).toFixed(1)),p=Number(e.reduce((x,y)=>x+y.differentialDelay.avgWaitDays*n(y),0).toFixed(1)),g=Number(e.reduce((x,y)=>x+y.stageConversionRate.conversionRate*n(y),0).toFixed(3));return{regionId:"regional-avg",name:" ",volume:t,kpi:{regionalSla:r("regionalSla"),regionalQueueRisk:r("regionalQueueRisk"),regionalRecontact:r("regionalRecontact"),regionalDataReadiness:r("regionalDataReadiness"),regionalGovernance:r("regionalGovernance"),regionalAdTransitionHotspot:r("regionalAdTransitionHotspot"),regionalDxDelayHotspot:r("regionalDxDelayHotspot"),regionalScreenToDxRate:r("regionalScreenToDxRate")},mapMetric:{regionalSla:s("regionalSla"),regionalQueueRisk:s("regionalQueueRisk"),regionalRecontact:s("regionalRecontact"),regionalDataReadiness:s("regionalDataReadiness"),regionalGovernance:s("regionalGovernance"),regionalAdTransitionHotspot:s("regionalAdTransitionHotspot"),regionalDxDelayHotspot:s("regionalDxDelayHotspot"),regionalScreenToDxRate:s("regionalScreenToDxRate")},adTransitionSignal:{regionId:"regional-avg",regionName:" ",highRiskCount:Math.round(e.reduce((x,y)=>x+y.adTransitionSignal.highRiskCount,0)),transition30d:Math.round(e.reduce((x,y)=>x+y.adTransitionSignal.transition30d,0)),transition90d:Math.round(e.reduce((x,y)=>x+(y.adTransitionSignal.transition90d??0),0)),densityScore:m,deltaFromAvg:0},differentialDelay:{regionId:"regional-avg",regionName:" ",avgWaitDays:p,delayedRatio:Number(e.reduce((x,y)=>x+y.differentialDelay.delayedRatio*n(y),0).toFixed(3)),backlogCount:Math.round(e.reduce((x,y)=>x+y.differentialDelay.backlogCount,0)),deltaFromAvg:0},stageConversionRate:{regionId:"regional-avg",regionName:" ",conversionRate:g,bestRate:Number(Math.max(...e.map(x=>x.stageConversionRate.conversionRate)).toFixed(3)),worstRate:Number(Math.min(...e.map(x=>x.stageConversionRate.conversionRate)).toFixed(3)),deltaFromRegional:0},adTransitionDrivers:oo(e.map(x=>x.adTransitionDrivers)),dxDelayDrivers:oo(e.map(x=>x.dxDelayDrivers)),screenToDxDrivers:oo(e.map(x=>x.screenToDxDrivers)),policyImpactLocal:Number(e.reduce((x,y)=>x+y.policyImpactLocal*n(y),0).toFixed(1)),slaStageContribution:oo(e.map(x=>x.slaStageContribution)),queueTypeBacklog:oo(e.map(x=>x.queueTypeBacklog)),queueCauseTop:oo(e.map(x=>x.queueCauseTop)),recontactReasons:oo(e.map(x=>x.recontactReasons)),recontactTrend:c,recontactSlots:o,missingFields:oo(e.map(x=>x.missingFields)),collectionLeadtime:oo(e.map(x=>x.collectionLeadtime)),governanceMissingTypes:oo(e.map(x=>x.governanceMissingTypes)),governanceActionStatus:oo(e.map(x=>x.governanceActionStatus.map(y=>({name:y.status,value:y.value})))).map(x=>({status:x.name,value:x.value})),stageImpact:u}}function QO(e){return bm[e]?.direction??"higherWorse"}function qke(e){return e==="REGION"?"sido":e==="SIGUNGU"?"sigungu":"center"}function $_(e,t){const n=bm[e];return n?.unit===""?`${t>0?"+":""}${Math.round(t)}`:n?.unit===""?`${t>0?"+":""}${Math.round(t)}`:n?.unit===""?`${t>0?"+":""}${Math.round(t)}`:`${t>0?"+":""}${t.toFixed(1)}%p`}function Vke(e,t){return t===""?`${Math.round(e).toLocaleString()}`:t===""?`${Math.round(e)}`:`${Math.round(e).toLocaleString()}`}function Wke(e,t){const n=e>0?"+":"";return t===""?`${n}${Math.round(e)}`:t===""?`${n}${Math.round(e)}`:`${n}${Math.round(e)}`}function Yke(e,t,n){if(!e.length)return[];const r=Math.min(...e),s=Math.max(...e),i=Math.max(1,e.length-1);return e.map((o,l)=>{const c=l/i*t,u=s===r?.5:(o-r)/(s-r),m=n-u*(n-6)-3;return{x:c,y:m}})}function Qke(e,t,n){if(!n)return"normal";const s=QO(e)==="higherBetter"?n-t:t-n;return s>=8?"warning":s>=3?"attention":"normal"}function Xke(e,t,n,r){return[`${e}: ${t}`,` : ${n}`,r]}function Jke({region:e,selectedKpiKey:t,selectedRegionSgg:n,selectedRange:r,onSelectedKpiKeyChange:s,onSelectedRegionSggChange:i,onSelectedRangeChange:o,onCreateIntervention:l,onNavigateModule:c}){const[u,m]=h.useState("week"),[p,g]=h.useState("7d"),[x,y]=h.useState("regionalSla"),[v,N]=h.useState("geomap"),[S,j]=Uke(),[C,_]=h.useState(null),[A,T]=h.useState(null),[R,M]=h.useState(void 0),[P,$]=h.useState(void 0),[w,U]=h.useState({}),[X,I]=h.useState(!1),[G,L]=h.useState(!1),[H,F]=h.useState(null),[K,ne]=h.useState(!1),[V,ee]=h.useState("STAFFING"),[ae,ue]=h.useState(!1),[ce,Z]=h.useState({}),[ie,Se]=h.useState("Initial"),fe=h.useRef(""),Te=h.useRef(null),Pe=h.useRef(""),oe=h.useRef(void 0),le=h.useRef(n),ye=h.useRef(i),_e=h.useRef({}),te=ie==="RegionChange";h.useEffect(()=>{le.current=n,ye.current=i},[i,n]);const z=h.useMemo(()=>cW(e.id),[e.id]),Ne=r??u,me=Ne==="month"?"30d":Ne==="quarter"?"90d":p,xe=t??x,et=n??C,Fe=A,pt=KRe({root:{level:"REGION",id:e.ctprvnCode,label:e.label},initialFilters:{kpi:xe,range:me,view:v}}),{stack:St,current:qe,canGoBack:rn,push:at,back:jt,jumpTo:It,reset:an,syncFilters:Ut}=pt,Ht=h.useMemo(()=>St.map(J=>`${J.level}:${J.id}`).join(">"),[St]),qt=h.useMemo(()=>{const J=w[Ht],be=J?.length?void 0:Object.entries(w).filter(([ot,ct])=>ct.length>0&&Ht.startsWith(ot)).sort((ot,ct)=>ct[0].length-ot[0].length)[0]?.[1],Ie=J?.length?J:be??[];if(!Ie.length)return[];const Je=new Map;return Ie.forEach(ot=>{const ct=Qr(ot.code)||Qr(Uc(ot.regionId)),wt=String(ot.name??"").trim();!ct||!wt||Je.has(ct)||Je.set(ct,{...ot,code:ct,name:wt,regionKey:{...ot.regionKey,code:ct,name:wt},regionId:ot.regionId||Qs({level:ot.regionKey.level,code:ct})})}),[...Je.values()]},[w,Ht]),Tn=h.useCallback(J=>{t==null&&y(J),s?.(J)},[s,t]),hn=h.useCallback(J=>{r==null&&m(J),o?.(J)},[o,r]),ar=h.useCallback(J=>{g(J),hn(Gke[J])},[hn]),yt=h.useCallback(J=>{_(Ie=>Ie===J?Ie:J),(le.current??null)!==J&&ye.current?.(J)},[]),Ve=h.useCallback(J=>{T(J)},[]);h.useEffect(()=>{_(null),Ve(null),M(void 0),$(void 0),U({}),_e.current={},L(!1),ne(!1),Z({})},[e.id,Ve]),h.useEffect(()=>{Ne==="month"&&p!=="30d"&&g("30d"),Ne==="quarter"&&p!=="90d"&&g("90d")},[Ne,p]),h.useEffect(()=>{F(null)},[xe,et]),h.useEffect(()=>{ue(!1),ne(!1)},[et,xe]),h.useEffect(()=>{const J=`${xe}|${me}|${v}`;if(J!==fe.current)return Te.current&&window.clearTimeout(Te.current),Te.current=window.setTimeout(()=>{Ut({kpi:xe,range:me,view:v},"replace"),fe.current=J},180),()=>{Te.current&&window.clearTimeout(Te.current)}},[me,xe,Ut,v]),h.useEffect(()=>{qe.filters.view!==v&&N(qe.filters.view)},[qe.filters.view,v]);const Xt=h.useMemo(()=>{const J=j.width||(typeof window<"u"?window.innerWidth:1920);return J>=1024?"desktop":J>=768?"tablet":"mobile"},[j.width]),On=h.useMemo(()=>{const J=j.height||(typeof window<"u"?window.innerHeight:900);return Math.max(360,Math.min(680,Math.round(J-(Xt==="desktop"?320:260))))},[j.height,Xt]),Rn=h.useMemo(()=>x8[e.id]??x8.seoul,[e.id]),Or=h.useMemo(()=>{const J=new Map;return Rn.forEach(be=>J.set($l(be),be)),J},[Rn]),Ee=h.useMemo(()=>qt.filter(J=>J.regionKey.level==="SIGUNGU"),[qt]),ze=h.useMemo(()=>{const J=new Map;return Ee.forEach(be=>J.set($l(be.name),be)),J},[Ee]),ht=h.useMemo(()=>Rn.map(J=>{const be=$l(J),Ie=ze.get(be);return{name:J,code:Ie?.code??""}}).filter(J=>J.code),[Rn,ze]),pn=h.useMemo(()=>qt.filter(J=>J.regionKey.level==="EUPMYEONDONG"),[qt]),En=h.useMemo(()=>{const J=new Map;return Ee.forEach(be=>J.set(String(be.code),be.name)),J},[Ee]),lr=h.useMemo(()=>{const J=new Map;return pn.forEach(be=>J.set(String(be.code),{code:String(be.code),name:be.name})),J},[pn]),jn=h.useMemo(()=>{for(let J=St.length-1;J>=0;J-=1){const be=St[J];if(be.level==="SIGUNGU")return En.get(String(be.id))??be.label;if(be.level==="EUPMYEONDONG"){const Ie=String(be.id).slice(0,5),Je=En.get(Ie);if(Je)return Je}}return null},[St,En]);h.useEffect(()=>{if(qe.level==="REGION"){et!==null&&yt(null),Fe!==null&&Ve(null),M("sig"),$(e.ctprvnCode);return}if(jn&&et!==jn&&yt(jn),qe.level==="SIGUNGU"){const be=Qs({level:"SIGUNGU",code:String(qe.id),name:qe.label});Fe!==be&&Ve(be),M("emd"),$(qe.id);return}const J=Qs({level:"EUPMYEONDONG",code:String(qe.id),name:qe.label});Fe!==J&&Ve(J),M("emd"),$(qe.id)},[jn,qe.id,qe.label,qe.level,e.ctprvnCode,et,Fe,yt,Ve]),h.useEffect(()=>{const J=oe.current!==n;if(oe.current=n,!J||!n||qe.level!=="REGION"||St.some(ot=>ot.level==="SIGUNGU"&&$l(ot.label)===$l(n)))return;const Ie=ze.get($l(n));if(!Ie?.code)return;const Je=Or.get($l(n))??n;Ve(Qs({level:"SIGUNGU",code:Ie.code})),h.startTransition(()=>{at({level:"SIGUNGU",id:Ie.code,label:Je,filters:{kpi:xe,range:me,view:v}},"replace")})},[qe.level,St,Or,at,me,xe,n,ze,Ve,v]);const Qe=h.useMemo(()=>({level:qe.level==="REGION"||qe.level==="SIGUNGU"||qe.level==="EUPMYEONDONG"?qe.level:"REGION",id:String(qe.id),name:qe.label}),[qe.id,qe.label,qe.level]),sr=h.useMemo(()=>$0(Qe.level),[Qe.level]),bn=h.useMemo(()=>qt.filter(J=>J.regionKey.level===sr),[sr,qt]),Ke=h.useMemo(()=>{if(Ee.length>=3)return Ee.map(be=>({code:String(be.code),name:be.name}));const J=oW[e.ctprvnCode]??[];return J.length?J.map(be=>({code:String(be.code),name:be.label})):ht.map(be=>({code:String(be.code),name:be.name}))},[ht,e.ctprvnCode,Ee]),Be=go({queryKey:["regional-dashboard","districts",e.id,Ne,me,Ke.map(J=>`${J.code}:${J.name}`).join("|")],queryFn:async()=>({items:(await Cke({regionId:e.id,period:Ne,rangePreset:me,districts:Ke})).items||[]}),staleTime:3e4,placeholderData:J=>J}),Me=h.useMemo(()=>{const J=Be.data?.items??[];return J.length?J:Ke.map(be=>Vp(be.name,`${e.id}-${me}`,Ne,me,be.code))},[Ne,Be.data?.items,Ke,me,e.id]),xt=h.useMemo(()=>pn.length?pn.map(J=>Vp(J.name,`${e.id}-${qe.level}-${qe.id}-${me}`,Ne,me,J.code)):[],[Ne,qe.id,qe.level,pn,me,e.id]),Le=h.useMemo(()=>{if(qe.level!=="SIGUNGU")return[];if(!bn.length)return[];const J=bn.filter(Ie=>{const Je=String(Ie.code);return Je.startsWith(String(qe.id))&&Je.length>String(qe.id).length});return(J.length>0?J:bn.filter(Ie=>String(Ie.code)!==String(qe.id))).map(Ie=>Vp(Ie.name,`${e.id}-${qe.level}-${qe.id}-${me}-map-fallback`,Ne,me,Ie.code))},[Ne,qe.id,qe.level,me,e.id,bn]),$t=h.useMemo(()=>{if(Qe.level==="REGION")return bn.length>0?bn.map(J=>({code:String(J.code),name:J.name})):Me.map(J=>({code:String(J.regionId),name:J.name}));if(Qe.level==="SIGUNGU"){const J=bn.filter(Ie=>{const Je=String(Ie.code);return Je.startsWith(String(Qe.id))&&Je.length>String(Qe.id).length}).map(Ie=>({code:String(Ie.code),name:Ie.name})),be=J.length>0?J:bn.filter(Ie=>String(Ie.code)!==String(Qe.id)).map(Ie=>({code:String(Ie.code),name:Ie.name}));return be.length>0?be:xt.map(Ie=>({code:String(Ie.regionId),name:Ie.name}))}return[]},[Qe.id,Qe.level,Me,xt,bn]),Bt=h.useMemo(()=>pW({level:qke(Qe.level),parentRegionCode:String(Qe.id),candidates:$t}),[$t,Qe.id,Qe.level]),Zn=h.useMemo(()=>{const J=new Map;return[...Me,...xt,...Le].forEach(be=>{J.set(String(be.regionId),be)}),Bt.children.map(be=>{const Ie=J.get(be.code);return Ie||Vp(be.name,`${e.id}-${Qe.level}-${Qe.id}-${me}-scope-fill`,Ne,me,be.code)})},[Ne,Bt.children,Qe.id,Qe.level,Me,xt,me,e.id,Le]),Mn=h.useMemo(()=>{if(Qe.level==="EUPMYEONDONG"){const J=xt.find(be=>String(be.regionId)===String(Qe.id))??Le.find(be=>String(be.regionId)===String(Qe.id));return J?[J]:[Vp(Qe.name,`${e.id}-${Qe.level}-${Qe.id}-${me}-leaf`,Ne,me,Qe.id)]}return Zn.length>0?Zn:Qe.level==="REGION"?Me:Qe.level==="SIGUNGU"?Le.length>0?Le:xt.length>0?xt:[]:[]},[Ne,Qe.id,Qe.level,Qe.name,Me,xt,me,e.id,Zn,Le]),Ur=h.useRef({});h.useEffect(()=>{Mn.length&&(Ur.current[Ht]=Mn)},[Mn,Ht]);const bt=h.useMemo(()=>{if(Mn.length)return Mn;const J=Ur.current[Ht];return J?.length?J:Qe.level==="REGION"?Me:Qe.level==="SIGUNGU"&&Le.length?Le:Qe.level==="SIGUNGU"&&xt.length?xt:[]},[Mn,Qe.level,Me,xt,Ht,Le]),ms=bt.length>0,Dr=`${Ht}|${xe}|${me}|${v}`;h.useEffect(()=>{Dr!==Pe.current&&(Pe.current=Dr,ie!=="Initial"&&Se("RegionChange"))},[ie,Dr]),h.useEffect(()=>{if(ie!=="RegionChange")return;const J=window.setTimeout(()=>{Se(ms?"Ready":"PartialData")},140);return()=>window.clearTimeout(J)},[ms,ie]),h.useEffect(()=>{ie==="Initial"&&Se(ms?"Ready":"Empty")},[ms,ie]),h.useEffect(()=>{ms&&(ie==="Ready"||ie==="RegionChange"||Se("Ready"))},[ms,ie]);const jo=ie==="RegionChange"?"transition-[opacity,transform] duration-200 ease-out opacity-60 translate-y-[2px] pointer-events-none":"transition-[opacity,transform] duration-200 ease-out opacity-100 translate-y-0",jr=h.useMemo(()=>qe.level==="SIGUNGU"?String(qe.id):qe.level==="EUPMYEONDONG"?String(qe.id).slice(0,5):null,[qe.id,qe.level]),Fn=h.useMemo(()=>{if(jr){const J=Me.find(be=>String(be.regionId)===jr);if(J)return J}return et?Me.find(J=>$l(J.name)===$l(et))??null:null},[Me,et,jr]),Br=h.useMemo(()=>zke(bt.length?bt:Me),[Me,bt]),Jt=h.useMemo(()=>qe.level==="REGION"?Fn??Br:qe.level==="SIGUNGU"?Br:qe.level==="EUPMYEONDONG"?bt[0]??Br:Fn??Br,[Br,qe.level,bt,Fn]),Kt=h.useMemo(()=>bm[xe]??GO[0],[xe]),Ai=Lke[xe],hr=h.useMemo(()=>[{key:"RISK",label:"",kpi:py.RISK},{key:"BOTTLENECK",label:"",kpi:py.BOTTLENECK},{key:"GAP",label:"",kpi:py.GAP},{key:"LOAD",label:"",kpi:py.LOAD}],[]),gr=h.useMemo(()=>GO.map(J=>{const be=J.key;return{...J,key:be,value:Br.kpi[be],mapColorScheme:l8[be]??"blue",tooltipLines:Xke(J.label,J.tooltip,J.scopeLine,J.clickAction)}}),[Br]),Ps=MRe[xe]??"regional_sla_violation",Ba=l8[xe]??"blue";h.useMemo(()=>hu[Ba]??hu.blue,[Ba]);const Gr=St,la=qe.level==="REGION"?e.label:qe.label,ca=h.useCallback(J=>{c&&(J==="bottleneck"&&c("cause"),J==="actions"&&c("interventions"),J==="reports"&&c("reports"),J==="settings"&&c("settings"))},[c]),Ga=h.useCallback((J,be,Ie)=>{const Je=mke(be,{scopeLabel:la,rangeLabel:Fp[me],longWaitDays:z.thresholds.longWaitDays});return a.jsx(pke,{label:J,help:Je,className:Ie,onActionClick:()=>ca(Je.actionTab)})},[la,ca,me,z.thresholds.longWaitDays]),ta=`${Fp[me]}  ${e.label}  ${D_(Kt.shortLabel)}  `,na=h.useMemo(()=>bt.map(J=>J.mapMetric[xe]),[bt,xe]),ns=h.useMemo(()=>na.length?Math.min(...na):0,[na]),Ha=h.useMemo(()=>na.length?Math.max(...na):0,[na]),wr=h.useMemo(()=>na.length?Number((na.reduce((J,be)=>J+be,0)/na.length).toFixed(1)):0,[na]);h.useMemo(()=>{const J=hu[Ba]??hu.blue,be=Ha-ns||1;return bt.map(Ie=>{const Je=Ie.mapMetric[xe],ot=(Je-ns)/be,ct=Math.max(0,Math.min(J.length-1,Math.floor(ot*J.length))),wt=String(Ie.regionId);return{code:wt,name:Ie.name,regionId:Qs({level:$0(Qe.level),code:wt,name:Ie.name}),size:Math.max(1,Je),value:Je,fill:J[ct]}})},[Qe.level,bt,xe,ns,Ha,Ba]);const da=Br.kpi[xe],hs=h.useMemo(()=>{const J=QO(xe),be=bt.map(Zt=>Zt.kpi[xe]),Ie=bt.map(Zt=>Zt.volume),Je=Math.min(...be),ot=Math.max(...be),ct=Math.min(...Ie),wt=Math.max(...Ie),Vt=bt.map(Zt=>Zt.adTransitionSignal.densityScore),xn=bt.map(Zt=>Zt.adTransitionSignal.transition30d),Kr=bt.map(Zt=>Zt.adTransitionSignal.deltaFromAvg),pa=bt.map(Zt=>Zt.differentialDelay.avgWaitDays),ln=bt.map(Zt=>Zt.differentialDelay.delayedRatio),Lr=bt.map(Zt=>Zt.differentialDelay.backlogCount),Wn=bt.map(Zt=>1-Zt.stageConversionRate.conversionRate),Us=bt.map(Zt=>-Zt.stageConversionRate.deltaFromRegional),wd=bt.map(Zt=>Zt.screenToDxDrivers.reduce((va,Na)=>va+Na.value,0)/Math.max(1,Zt.screenToDxDrivers.length));return bt.map(Zt=>{const va=Zt.kpi[xe];let Na=DRe({kpiValue:va,kpiMin:Je,kpiMax:ot,volume:Zt.volume,volumeMin:ct,volumeMax:wt,direction:J});if(xe==="regionalAdTransitionHotspot"){const Hi=Hc(Zt.adTransitionSignal.densityScore,Math.min(...Vt),Math.max(...Vt)),Sa=Hc(Zt.adTransitionSignal.transition30d,Math.min(...xn),Math.max(...xn)),Bs=Hc(Zt.adTransitionSignal.deltaFromAvg,Math.min(...Kr),Math.max(...Kr));Na=Number((Hi*P_.density+Sa*P_.transition+Bs*P_.delta).toFixed(3))}else if(xe==="regionalDxDelayHotspot"){const Hi=Hc(Zt.differentialDelay.avgWaitDays,Math.min(...pa),Math.max(...pa)),Sa=Hc(Zt.differentialDelay.delayedRatio,Math.min(...ln),Math.max(...ln)),Bs=Hc(Zt.differentialDelay.backlogCount,Math.min(...Lr),Math.max(...Lr));Na=Number((Hi*M_.wait+Sa*M_.delayed+Bs*M_.backlog).toFixed(3))}else if(xe==="regionalScreenToDxRate"){const Hi=Hc(1-Zt.stageConversionRate.conversionRate,Math.min(...Wn),Math.max(...Wn)),Sa=Hc(-Zt.stageConversionRate.deltaFromRegional,Math.min(...Us),Math.max(...Us)),Bs=Zt.screenToDxDrivers.reduce((Vu,Wu)=>Vu+Wu.value,0)/Math.max(1,Zt.screenToDxDrivers.length),$r=Hc(Bs,Math.min(...wd),Math.max(...wd));Na=Number((Hi*L_.gapRate+Sa*L_.deltaGap+$r*L_.support).toFixed(3))}const Uh=Number(kt(`national-${xe}-${me}-${Ne}-${qe.level}-${qe.id}-${Zt.name}`,Qn[xe][0],Qn[xe][1]).toFixed(1)),qu=Qr(Uc(Zt.regionId))||Qr(Zt.regionId);return{code:qu,regionId:Qs({level:$0(Qe.level),code:qu,name:Zt.name}),name:Zt.name,kpiValue:va,volume:Zt.volume,priorityScore:Na,nationalDelta:Number((va-Uh).toFixed(1))}}).sort((Zt,va)=>{if(va.priorityScore!==Zt.priorityScore)return va.priorityScore-Zt.priorityScore;const Na=Zt.name.localeCompare(va.name,"ko-KR");return Na!==0?Na:Zt.code.localeCompare(va.code)})},[Ne,Qe.level,qe.id,qe.level,me,bt,xe]),ai=h.useMemo(()=>new Set(Bt.childrenCodes.map(J=>Qr(J)).filter(Boolean)),[Bt.childrenCodes]),Pr=h.useMemo(()=>{const J=$0(Qe.level),be=hs.filter(ot=>{const ct=Qr(ot.code)||Qr(Uc(ot.code));return ct?ai.size?ai.has(ct):!0:!1}),Ie=(be.length>0?be:hs).slice(0,5),Je=[];return Ie.forEach(ot=>{const ct=Qr(ot.code)||Qr(Uc(ot.regionId));ct&&Je.push({...ot,code:ct,regionKey:{level:J,code:ct,name:ot.name},regionId:Qs({level:J,code:ct,name:ot.name})})}),Je},[ai,Qe.level,hs]),ua=h.useMemo(()=>bt.reduce((J,be)=>J+be.volume,0),[bt]),Hr=h.useMemo(()=>{if(!Pr.length||ua<=0)return null;const J=Pr.reduce((be,Ie)=>be+Ie.volume,0);return Number((J/ua*100).toFixed(1))},[Pr,ua]),xl=Hr==null?"":`${Hr.toFixed(1)}%`,Ms=h.useMemo(()=>{const J=Pr.slice(0,2).map(be=>be.name);return J.length?J.join("/"):`${e.label} `},[e.label,Pr]),cr=$ke[xe]??D_(Kt.shortLabel),Bi=h.useMemo(()=>{const J=hr.find(Ie=>Ie.key===Ai)?.label??Ai,be=Kt.direction==="higherWorse"?`${cr} `:`${cr}  `;return gt(`${Fp[me]}  ${J}  ${be}   : ${Ms}`)},[Ai,hr,me,Kt.direction,cr,Ms]),Ls=h.useMemo(()=>{const J=me==="7d"?["D-6","D-5","D-4","D-3","D-2","D-1","D0"]:["T-7","T-6","T-5","T-4","T-3","T-2","T-1","T0"],be=bt.filter(ct=>ct.kpi.regionalRecontact>=10).length,Ie=bt.reduce((ct,wt)=>ct+(wt.recontactReasons.find(Vt=>Vt.name==="")?.value??0),0),Je=bt.length>0?Number((bt.reduce((ct,wt)=>ct+wt.differentialDelay.avgWaitDays,0)/bt.length).toFixed(1)):0,ot=(ct,wt,Vt,xn)=>{const Kr=kt(`${e.id}-${ct}-${me}-drift`,-1.2,1.2),pa=Vt===""?Math.max(6,xn*.08):Vt===""?1.5:1,ln=J.map((Us,wd)=>{const Zt=wd-(J.length-1),va=xn+Zt*Kr+kt(`${e.id}-${ct}-${me}-${Us}`,-pa,pa),Na=Math.max(0,Vt===""?Number(va.toFixed(1)):Math.round(va));return{t:Us,v:Na}});ln.length&&(ln[ln.length-1]={...ln[ln.length-1],v:Vt===""?Number(xn.toFixed(1)):Math.round(xn)});const Lr=ln[ln.length-1]?.v??0,Wn=ln[Math.max(0,ln.length-2)]?.v??Lr;return{key:ct,label:wt,unit:Vt,points:ln,value:Lr,delta:Number((Lr-Wn).toFixed(1))}};return[ot("slaRisk","SLA  ","",be),ot("bottleneck"," ","",Je),ot("overdueFollowup"," ","",Ie)]},[me,bt,e.id]),wn=h.useMemo(()=>{const J=Math.round(bm.regionalDxDelayHotspot.target??24),be=Math.round(bm.regionalRecontact.target??12);return[{label:`SLA   ${z.thresholds.longWaitDays} `,tooltip:`SLA  : ${z.thresholds.longWaitDays}    `},{label:`   ${J}`,tooltip:`   : ${J}`},{label:`  ${be}%`,tooltip:`   : ${be}%`}]},[z.thresholds.longWaitDays]),ra=h.useMemo(()=>{const J=bt.filter(ot=>ot.kpi.regionalRecontact>=10).length,be=bt.filter(ot=>ot.differentialDelay.avgWaitDays>=z.thresholds.longWaitDays).length,Ie=bt.reduce((ot,ct)=>ot+(ct.recontactReasons.find(wt=>wt.name==="")?.value??0),0),Je=bt.filter(ot=>ot.stageImpact.stage1QueueDelta>=12).length;return{slaAtRiskRegions:J,examDelayRegions:be,overdueFollowups:Math.round(Ie),surgeRegions:Je}},[bt,z.thresholds.longWaitDays]),Gi=h.useMemo(()=>{const J=bt.filter(Vt=>Vt.adTransitionSignal.densityScore>=70).length,be=bt.reduce((Vt,xn)=>Vt+xn.adTransitionSignal.highRiskCount,0),Ie=bt.length>0?Number((bt.reduce((Vt,xn)=>Vt+xn.differentialDelay.avgWaitDays,0)/bt.length).toFixed(1)):0,Je=Math.round(bt.reduce((Vt,xn)=>Vt+(xn.queueTypeBacklog.find(Kr=>Kr.name==="2 ")?.value??0),0)),ot=bt.map(Vt=>Vt.stageConversionRate.conversionRate*100),ct=ot.length>1?Number((Math.max(...ot)-Math.min(...ot)).toFixed(1)):0,wt=bt.length>1?Number((Math.max(...bt.map(Vt=>Vt.differentialDelay.avgWaitDays))-Math.min(...bt.map(Vt=>Vt.differentialDelay.avgWaitDays))).toFixed(1)):0;return[{id:"risk",title:"Risk",value:J,unit:"",delta:{value:ra.slaAtRiskRegions,unit:"",direction:ra.slaAtRiskRegions>0?"up":"flat"},severity:ra.slaAtRiskRegions>4?"critical":ra.slaAtRiskRegions>2?"warn":"normal",bindLayer:"RISK"},{id:"bottleneck",title:"Bottleneck",value:Ie,unit:"",delta:{value:Je,unit:"",direction:Je>0?"up":"flat"},severity:Ie>z.thresholds.longWaitDays?"critical":Ie>z.thresholds.longWaitDays-1?"warn":"normal",bindLayer:"BOTTLENECK"},{id:"gap",title:"Gap",value:ct,unit:"%p",delta:{value:wt,unit:"",direction:wt>0?"up":"flat"},severity:ct>18?"critical":ct>10?"warn":"normal",bindLayer:"GAP"},{id:"load",title:"Load",value:be,unit:"",delta:{value:ra.surgeRegions,unit:"",direction:ra.surgeRegions>0?"up":"flat"},severity:ra.surgeRegions>3?"warn":"normal",bindLayer:"LOAD"}]},[ra,bt,z.thresholds.longWaitDays]),rs=h.useMemo(()=>{const J=Gi.find(Ie=>Ie.id==="bottleneck"),be=Gi.find(Ie=>Ie.id==="gap");return[{id:"sla-risk",label:`${I_("sla").user}  `,helpKey:"slaRisk",value:`${ra.slaAtRiskRegions.toLocaleString()}`,tone:ra.slaAtRiskRegions>3?"text-red-700 bg-red-50 border-red-100":"text-emerald-700 bg-emerald-50 border-emerald-100"},{id:"bottleneck",label:I_("examDelay").user,helpKey:"examDelay",value:`${Math.round(J?.value??0)}`,tone:(J?.severity??"normal")==="critical"?"text-red-700 bg-red-50 border-red-100":"text-amber-700 bg-amber-50 border-amber-100"},{id:"gap",label:I_("conversionGap").user,helpKey:"conversionGap",value:`${(be?.value??0).toFixed(1)}%p`,tone:(be?.severity??"normal")==="critical"?"text-red-700 bg-red-50 border-red-100":"text-indigo-700 bg-indigo-50 border-indigo-100"}]},[ra.slaAtRiskRegions,Gi]),Q=h.useMemo(()=>Fn?Number((Fn.kpi[xe]-da).toFixed(1)):null,[da,Fn,xe]),pe=h.useMemo(()=>{const J=new Map;return bt.forEach(be=>{const Ie=String(be.regionId),Je=Qr(Uc(Ie));J.set(Ie,be),Je&&J.set(Je,be)}),J},[bt]),Ge=h.useCallback(({code:J,name:be})=>{const Ie=Qr(J)||Qr(Uc(J)),Je=(Ie?pe.get(Ie):void 0)??pe.get(String(J));if(!Je)return[];const ot=Number(kt(`${e.id}-${be}-${xe}-delta7-${me}-${Ne}`,-12,12).toFixed(1)),ct=Kt.unit===""?"":Kt.unit===""?"":Kt.unit===""?"":"%p";return[`: ${Je.volume.toLocaleString()}`,` 7 : ${ot>0?"+":""}${Kt.unit===""||Kt.unit===""?Math.round(ot):ot}${ct}`]},[Ne,pe,me,e.id,Kt.unit,xe]),st=h.useCallback(()=>{yt(null),Ve(null),an(),L(!1)},[an,yt,Ve]),it=h.useCallback(()=>{rn&&(St.length<=2&&(yt(null),Ve(null)),jt(),L(!1))},[jt,rn,St.length,yt,Ve]),Ce=h.useCallback(({level:J,code:be,name:Ie,regionId:Je})=>{if(J==="ctprvn"){st();return}const ot=Qr(be)||Qr(Uc(Je)),ct=J==="sig"||J==="emd"&&ot.length===5,wt=$l(Ie);if(ct&&ot){const Vt=En.get(ot)??Or.get(wt)??Ie,xn=Je??Qs({level:"SIGUNGU",code:ot});Ve(xn),yt(Vt),h.startTransition(()=>{at({level:"SIGUNGU",id:ot,label:Vt,filters:{kpi:xe,range:me,view:v}})});return}if(J==="emd"){if(!ot)return;const Vt=lr.get(ot)?.name??Ie,xn=Je??Qs({level:"EUPMYEONDONG",code:ot});Ve(xn),h.startTransition(()=>{at({level:"EUPMYEONDONG",id:ot,label:Vt,filters:{kpi:xe,range:me,view:v}})})}},[lr,st,Or,at,me,xe,En,yt,Ve,v]),Dt=h.useCallback(J=>{const be=$0(Qe.level),Je=J.map(wt=>{const Vt=Qr(wt.code)||Qr(Uc(wt.regionId)),xn=String(wt.name??"").trim();return!Vt||!xn?null:{...wt,code:Vt,name:xn,regionKey:{...wt.regionKey,level:wt.regionKey.level,code:Vt,name:xn},regionId:wt.regionId||Qs({level:wt.regionKey.level,code:Vt})}}).filter(wt=>!!wt).filter((wt,Vt,xn)=>xn.findIndex(Kr=>Kr.code===wt.code)===Vt).filter(wt=>wt.regionKey.level===be).sort((wt,Vt)=>wt.code.localeCompare(Vt.code,"ko-KR"));if(!Je.length)return;const ot=`${be}|${Je.map(wt=>`${wt.code}:${wt.name}`).join("|")}`;_e.current[Ht]!==ot&&(_e.current[Ht]=ot,U(wt=>{const Vt=wt[Ht]??[];return Vt.length===Je.length&&Vt.every((xn,Kr)=>xn.code===Je[Kr]?.code&&xn.name===Je[Kr]?.name&&xn.regionKey.level===Je[Kr]?.regionKey.level)?wt:{...wt,[Ht]:Je}}))},[Qe.level,Ht]),zt=h.useCallback((J,be,Ie)=>{const Je=Qr(J)||Qr(Uc(Ie));if(!Je)return;const ot=Ie?.startsWith("EUPMYEONDONG:")?"EUPMYEONDONG":Ie?.startsWith("SIGUNGU:")||qe.level==="REGION"?"SIGUNGU":"EUPMYEONDONG",ct=Qs({level:ot,code:Je});if(Ve(ct),ct!==Fe){if(ot==="SIGUNGU"){yt(be),h.startTransition(()=>{at({level:"SIGUNGU",id:Je,label:be,filters:{kpi:xe,range:me,view:v}})});return}h.startTransition(()=>{at({level:"EUPMYEONDONG",id:Je,label:be,filters:{kpi:xe,range:me,view:v}},qe.level==="EUPMYEONDONG"?"replace":"push")})}},[qe.level,at,me,Fe,xe,yt,Ve,v]),cn=h.useMemo(()=>{const J=Ne==="week"?7:4,be=Ne==="week"?["","","","","","",""]:Ne==="month"?["1","2","3","4"]:["Q1","Q2","Q3","Q4"],[Ie,Je]=Qn[xe],ot=xe==="regionalSla"?wW[me]*YO[Ne]:AW[me]*YO[Ne],ct=_W[me],wt=Vt=>Kt.unit===""?Number((Vt*ot).toFixed(1)):Kt.unit===""?Number(Math.max(Ie,Math.min(Je,Vt+ct*4)).toFixed(1)):Kt.unit===""?Number(Math.max(Ie,Math.min(Je,Vt+ct*2)).toFixed(1)):Number(Math.max(Ie,Math.min(Je,Vt+ct)).toFixed(1));return Array.from({length:J},(Vt,xn)=>{const Kr=wt(kt(`${e.id}-${xe}-${Ne}-reg-${xn}`,Ie,Je)),pa=wt(kt(`national-${xe}-${me}-${Ne}-tr-${xn}`,Ie,Je)),ln=et?wt(kt(`${e.id}-${et}-${xe}-${me}-${Ne}-dist-${xn}`,Ie,Je)):void 0;return{label:be[xn],regional:Kr,national:pa,district:ln}})},[Ne,me,e.id,et,Kt.unit,xe]);h.useMemo(()=>{const J=Number((Me.reduce((be,Ie)=>be+Ie.mapMetric.regionalSla,0)/Math.max(1,Me.length)).toFixed(1));return Me.map(be=>({name:be.name,value:be.mapMetric.regionalSla,delta:Number((be.mapMetric.regionalSla-J).toFixed(1))})).sort((be,Ie)=>Ie.value-be.value).slice(0,8)},[Me]),h.useMemo(()=>Me.map(be=>({name:be.name,missing:be.mapMetric.regionalGovernance,statuses:be.governanceActionStatus})).sort((be,Ie)=>Ie.missing-be.missing).slice(0,5).map(be=>{const Ie=be.statuses.find(ct=>ct.status==="")?.value??0,Je=be.statuses.find(ct=>ct.status==="")?.value??0,ot=be.statuses.find(ct=>ct.status==="")?.value??0;return{name:be.name,:Ie,:Je,:ot}}),[Me]),h.useMemo(()=>{const J=Jt.stageImpact;return[{stage:"Stage1 (ML)",signal:J.stage1SignalDelta,queue:J.stage1QueueDelta,desc:"       "},{stage:"Stage2 (ANN)",signal:J.stage2SignalDelta,queue:J.stage2QueueDelta,desc:"2    2   "},{stage:"Stage3 (CNN)",signal:J.stage3SignalDelta,queue:J.stage3QueueDelta,desc:"3    3    "}]},[Jt.stageImpact]);const gn=h.useMemo(()=>xe==="regionalSla"?[gt("Stage        "),gt("          ")]:xe==="regionalQueueRisk"?[gt("        "),gt("       ")]:xe==="regionalRecontact"?[gt("SLA      "),gt("SLA       ")]:xe==="regionalDataReadiness"?[gt("       "),gt("       ")]:xe==="regionalAdTransitionHotspot"?[gt("     Stage3     "),gt("        ")]:xe==="regionalDxDelayHotspot"?[gt("        "),gt("       ")]:xe==="regionalScreenToDxRate"?[gt("         "),gt("       ")]:[gt("       "),gt("       ")],[xe]),Vn=h.useMemo(()=>xe==="regionalSla"?Jt.queueTypeBacklog.slice(0,3):xe==="regionalQueueRisk"?Jt.queueCauseTop.slice(0,3):xe==="regionalRecontact"?Jt.slaStageContribution.slice(0,3):xe==="regionalDataReadiness"?Jt.recontactReasons.slice(0,3):xe==="regionalAdTransitionHotspot"?Jt.adTransitionDrivers.slice(0,3):xe==="regionalDxDelayHotspot"?Jt.dxDelayDrivers.slice(0,3):xe==="regionalScreenToDxRate"?Jt.screenToDxDrivers.slice(0,3):Jt.governanceMissingTypes.slice(0,3),[Jt,xe]),zu=h.useCallback(J=>xe==="regionalRecontact"?`${J.value.toFixed(1)}%`:xe==="regionalAdTransitionHotspot"?J.name.includes("")?`${J.value.toFixed(1)}`:`${Math.round(J.value).toLocaleString()}`:xe==="regionalDxDelayHotspot"?J.name.includes("")?`${J.value.toFixed(1)}%`:J.name.includes("")?`${Math.round(J.value)}`:`${Math.round(J.value).toLocaleString()}`:xe==="regionalScreenToDxRate"?J.name.includes("")?`${J.value.toFixed(1)}%p`:`${J.value.toFixed(1)}`:`${Math.round(J.value).toLocaleString()}`,[xe]);h.useMemo(()=>oo([Jt.missingFields]),[Jt.missingFields]);const as=h.useMemo(()=>{if(xe==="regionalSla"){const be=[...Jt.queueTypeBacklog].sort((Ie,Je)=>Je.value-Ie.value)[0];return{stage:be?.name??" ",valueLabel:be?`${Math.round(be.value)}`:"",basis:gt("    ")}}if(xe==="regionalQueueRisk"){const be=Jt.queueCauseTop[0];return{stage:be?.name??" ",valueLabel:be?`${Math.round(be.value)}`:"",basis:gt("      ")}}if(xe==="regionalRecontact"){const be=Jt.slaStageContribution[0];return{stage:be?.name??"SLA ",valueLabel:be?`${be.value.toFixed(1)}%`:"",basis:gt("SLA     ")}}if(xe==="regionalDataReadiness"){const be=Jt.recontactReasons[0];return{stage:be?.name??"",valueLabel:be?`${Math.round(be.value)}`:"",basis:gt("      ")}}if(xe==="regionalAdTransitionHotspot")return{stage:" ",valueLabel:`${Math.round(Jt.adTransitionSignal.highRiskCount)}  ${Math.round(Jt.adTransitionSignal.densityScore)}`,basis:gt("     ")};if(xe==="regionalDxDelayHotspot")return{stage:" ",valueLabel:`${Math.round(Jt.differentialDelay.avgWaitDays)}  ${(Jt.differentialDelay.delayedRatio*100).toFixed(1)}%`,basis:gt("      ")};if(xe==="regionalScreenToDxRate")return{stage:" ",valueLabel:`${(Jt.stageConversionRate.conversionRate*100).toFixed(1)}%`,basis:gt("      ")};const J=Jt.governanceMissingTypes[0];return{stage:J?.name??" ",valueLabel:J?`${Math.round(J.value)}`:"",basis:gt("     ")}},[Jt.adTransitionSignal.densityScore,Jt.adTransitionSignal.highRiskCount,Jt.differentialDelay.avgWaitDays,Jt.differentialDelay.delayedRatio,Jt.governanceMissingTypes,Jt.queueCauseTop,Jt.queueTypeBacklog,Jt.recontactReasons,Jt.slaStageContribution,Jt.stageConversionRate.conversionRate,xe]),fa=h.useMemo(()=>({primaryDriverStage:as.stage,alertLevel:Qke(xe,da,Kt.trendGoal)}),[as.stage,da,Kt.trendGoal,xe]);h.useMemo(()=>gt(xe==="regionalSla"?`${fa.primaryDriverStage}          `:xe==="regionalQueueRisk"?`${fa.primaryDriverStage}         `:xe==="regionalRecontact"?"SLA /       ":xe==="regionalDataReadiness"?"        ":xe==="regionalAdTransitionHotspot"?"          ":xe==="regionalDxDelayHotspot"?"         ":xe==="regionalScreenToDxRate"?"          ":"        "),[xe,fa.primaryDriverStage]);const $s=h.useMemo(()=>{const J=Pr.slice(0,2).map(be=>be.name);return J.length?J.join(", "):`${e.label}  `},[e.label,Pr]),aa=h.useMemo(()=>gt(`${e.label}() ${cr} ${my(xe,da)} (  ${my(xe,wr)},  ${$_(xe,Number((da-wr).toFixed(1)))})`),[wr,e.label,da,xe,cr]),bl=h.useMemo(()=>gt(`    ${z.thresholds.longWaitDays}    `),[z.thresholds.longWaitDays]),Mr=h.useMemo(()=>gt(xe==="regionalQueueRisk"?`   : ${$s}     `:xe==="regionalRecontact"?`   : ${$s} SLA    `:xe==="regionalDataReadiness"?`   : ${$s}     `:xe==="regionalGovernance"?`   : ${$s}     `:xe==="regionalAdTransitionHotspot"?`   : ${$s}      `:xe==="regionalDxDelayHotspot"?`   : ${$s}       `:xe==="regionalScreenToDxRate"?`   : ${$s}       `:`   : ${$s}     `),[xe,$s]),Ed=h.useMemo(()=>yke({regionKey:e.id,regionLabel:e.label,selectedRegionSgg:et,selectedRange:Ne,alertSummary:ra,avgExamDelayDays:Jt.differentialDelay.avgWaitDays,overdueFollowups:ra.overdueFollowups,longWaitDays:z.thresholds.longWaitDays}),[Ai,ra,Ne,Jt.differentialDelay.avgWaitDays,e.id,e.label,et,xe,z.thresholds.longWaitDays]),kn=h.useMemo(()=>Ed.map(J=>{const be=ce[J.id];return{...J,status:be?.status??J.status,dismissReason:be?.dismissReason??J.dismissReason}}),[Ed,ce]),yl=h.useMemo(()=>kn.filter(J=>J.status==="open"||J.status==="acknowledged").length,[kn]),xr=h.useCallback((J,be,Ie)=>{Z(Je=>({...Je,[J]:{status:be,dismissReason:Ie??Je[J]?.dismissReason}}))},[]),jd=h.useCallback(J=>{const be=J.relatedQueryState.kpiKey;Tn(be),J.relatedQueryState.areaKey&&yt(J.relatedQueryState.areaKey),hn(J.relatedQueryState.period),xr(J.id,"acknowledged"),c?.("cause")},[c,xr,yt,Tn,hn]),$h=h.useCallback(J=>{const be=J.relatedQueryState.kpiKey;l?.({kpi:be,sgg:J.relatedQueryState.areaKey??et??null,range:J.relatedQueryState.period,source:"overview",primaryDriverStage:fa.primaryDriverStage}),xr(J.id,"converted_to_intervention")},[l,et,xr,fa.primaryDriverStage]),Fh=h.useCallback(J=>{const be=window.prompt("To-Do   .");if(be==null)return;const Ie=be.trim();xr(J.id,"dismissed",Ie||" ")},[xr]),Fs=h.useMemo(()=>{const J=Jt.queueTypeBacklog.reduce((Je,ot)=>Je+ot.value,0),be=Jt.recontactReasons.reduce((Je,ot)=>Je+ot.value,0),Ie=Math.max(0,Math.round(Jt.volume-J));return[{label:"Stage  ",value:`${as.stage}  ${as.valueLabel}`},{label:"  ",value:` ${Math.round(Jt.differentialDelay.avgWaitDays)}   ${(Jt.differentialDelay.delayedRatio*100).toFixed(1)}%`},{label:"  ",value:`${Math.round(be).toLocaleString()}`},{label:"  ",value:`${Ie.toLocaleString()}`}]},[Jt.differentialDelay.avgWaitDays,Jt.differentialDelay.delayedRatio,Jt.queueTypeBacklog,Jt.recontactReasons,Jt.volume,as.stage,as.valueLabel]),si=h.useMemo(()=>{const J=Fn?.name??`${e.label} `,Ie=Math.max(.8,Math.min(5.8,(Hr??20)/8));return[{id:"STAFFING",title:"   ",detail:gt(`${J} /    `),expected:`SLA   +${(Ie*1.05).toFixed(1)}%p`,stage:""},{id:"EXAM_SLOT",title:"   ",detail:gt(`${J}      `),expected:`SLA   +${(Ie*.85).toFixed(1)}%p`,stage:"2"},{id:"FOLLOWUP_AUTOMATION",title:"  ",detail:gt(`${J} /    `),expected:`SLA   +${(Ie*.72).toFixed(1)}%p`,stage:""},{id:"HOSPITAL_LINK",title:"  ",detail:gt(`${J}        `),expected:`SLA   +${(Ie*.66).toFixed(1)}%p`,stage:"3"}]},[e.label,Fn?.name,Hr]),ss=h.useMemo(()=>si.find(J=>J.id===V)??si[0]??null,[si,V]);h.useEffect(()=>{ss&&ss.id!==V&&ee(ss.id)},[ss,V]);const vl=h.useMemo(()=>Fn?xe==="regionalSla"?Fn.queueTypeBacklog[0]?.name??" ":xe==="regionalQueueRisk"?Fn.queueCauseTop[0]?.name??" ":xe==="regionalRecontact"?Fn.slaStageContribution[0]?.name??"SLA ":xe==="regionalDataReadiness"?Fn.recontactReasons[0]?.name??"":xe==="regionalAdTransitionHotspot"?Fn.adTransitionDrivers[0]?.name??" ":xe==="regionalDxDelayHotspot"?Fn.dxDelayDrivers[0]?.name??" ":xe==="regionalScreenToDxRate"?Fn.screenToDxDrivers[0]?.name??" ":Fn.governanceMissingTypes[0]?.name??" ":null,[Fn,xe]),An=h.useMemo(()=>Fn&&Q!=null?gt(`${Fn.name}:    ${$_(xe,Q)}   1: ${vl??""}`):gt("       "),[Fn,Q,xe,vl]);h.useMemo(()=>{const J=Fn?Fn.name:`${e.label} `,be=Pr[0]?.name??J,Ie=Vn.slice(0,2).map(Je=>Kt.unit==="%"?`${Je.name} ${Je.value.toFixed(1)}%`:Kt.unit===""?`${Je.name} ${Math.round(Je.value)}`:Kt.unit===""?`${Je.name} ${Math.round(Je.value)}`:`${Je.name} ${Math.round(Je.value)}`);return[{id:"scenario-a",target:J,action:gn[0]??gt("   "),effect:"  ",risk:gt("    "),evidence:Ie[0]??gt("  ")},{id:"scenario-b",target:be,action:gn[1]??gt("   "),effect:"  ",risk:gt("   "),evidence:Ie[1]??gt("  ")}]},[gn,Vn,e.label,Fn,Kt.unit,Pr]);const ya=h.useMemo(()=>cn.length<3?null:Math.max(1,Math.floor(cn.length/2)),[cn]);return h.useMemo(()=>{if(!cn.length)return gt("  ");const J=Math.max(1,Math.floor(cn.length/2)),be=cn.slice(0,J).reduce((pa,ln)=>pa+ln.regional,0)/J,Ie=cn.slice(J),Je=Ie.reduce((pa,ln)=>pa+ln.regional,0)/Math.max(1,Ie.length),ot=Number((Je-be).toFixed(1)),ct=QO(xe),wt=ct==="higherBetter"&&ot>.4||ct==="higherWorse"&&ot<-.4,Vt=ct==="higherBetter"&&ot<-.4||ct==="higherWorse"&&ot>.4,xn=wt?" ":Vt?"/ ":" ",Kr=me==="24h"?" 24":`${Fp[me]} `;return gt(`${Kr}:    ${xn} (    )`)},[me,xe,cn]),h.useMemo(()=>{if(ya==null||ya>=cn.length)return"";const J=cn.slice(0,ya).map(ct=>ct.regional),be=cn.slice(ya).map(ct=>ct.regional);if(!J.length||!be.length)return"";const Ie=J.reduce((ct,wt)=>ct+wt,0)/J.length,Je=be.reduce((ct,wt)=>ct+wt,0)/be.length,ot=Number((Je-Ie).toFixed(1));return $_(xe,ot)},[xe,cn,ya]),a.jsxs("div",{ref:S,className:"flex h-full min-h-0 flex-col overflow-hidden bg-gray-50",children:[a.jsxs("div",{className:"bg-white border-b border-gray-200 px-4 py-2 shrink-0",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-1.5 flex-1 min-w-0",children:rs.map(J=>a.jsxs("div",{role:"status",className:`rounded-md border px-2.5 py-2 ${J.tone}`,children:[Ga(J.label,J.helpKey,"text-[10px] font-semibold"),a.jsx("div",{className:"text-[14px] font-bold mt-0.5",children:J.value})]},J.id))}),a.jsxs("button",{onClick:()=>I(J=>!J),className:"h-8 px-2.5 rounded-md border border-gray-200 text-xs text-gray-600 hover:bg-gray-50 shrink-0",children:["  ",X?"":""]})]}),X&&a.jsx("div",{className:"mt-2 grid grid-cols-2 lg:grid-cols-4 gap-1.5",children:gr.map(J=>{const be=xe===J.key;return a.jsxs("div",{className:`rounded-md border px-2.5 py-2 ${be?"border-blue-200 bg-blue-50":"border-gray-200 bg-gray-50"}`,children:[a.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] font-semibold text-gray-600",children:[a.jsx("span",{className:`p-1 rounded ${J.iconBg}`,children:Hke[J.key]}),a.jsx("span",{className:"truncate",children:D_(J.shortLabel)})]}),a.jsx("div",{className:"text-[13px] font-bold text-gray-800 mt-1",children:my(J.key,J.value)})]},J.key)})})]}),a.jsx("div",{className:"flex-1 overflow-hidden min-h-0",children:a.jsxs("div",{className:`p-2 gap-2 h-full min-h-0 ${Xt==="desktop"?"grid overflow-hidden":"flex flex-col overflow-y-auto"}`,style:Xt==="desktop"?{gridTemplateColumns:"3fr 6fr 3fr",minHeight:0,alignItems:"stretch"}:void 0,children:[a.jsxs("div",{className:`${Xt==="desktop"?"min-w-0 min-h-0 overflow-hidden":Xt==="tablet"?"hidden":"w-full shrink-0"} flex flex-col gap-2`,children:[a.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-2 text-center",children:[a.jsx("span",{className:"text-xs text-indigo-700 font-medium",children:et?` ${et}`:` ${e.label}`}),a.jsxs("span",{className:"ml-2 text-[12px] text-indigo-500",children:["   ",Fp[me]]})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"  To-Do"}),a.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded border border-blue-200 bg-blue-50 text-blue-700",children:[" ",yl,""]})]}),a.jsx("div",{className:"space-y-1.5",children:kn.map((J,be)=>{const Ie=J.status==="converted_to_intervention"?"border-emerald-200 bg-emerald-50 text-emerald-700":J.status==="dismissed"?"border-slate-200 bg-slate-100 text-slate-600":J.status==="acknowledged"?"border-blue-200 bg-blue-50 text-blue-700":"border-amber-200 bg-amber-50 text-amber-700",Je=J.status==="converted_to_intervention"?" ":J.status==="dismissed"?"":J.status==="acknowledged"?"":"";return a.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-2 py-2",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsxs("div",{className:"text-[11px] font-semibold text-gray-800 truncate",children:[be+1,". ",J.title]}),a.jsx("div",{className:"text-[10px] text-gray-600 mt-0.5",children:J.reason}),a.jsxs("div",{className:"text-[10px] text-gray-500 mt-0.5",children:[" ",J.target,"  SLA ",J.dueSlaHours,"h"]})]}),a.jsx("span",{className:`shrink-0 rounded border px-1.5 py-0.5 text-[10px] font-semibold ${Ie}`,children:Je})]}),J.status==="dismissed"&&J.dismissReason?a.jsxs("div",{className:"mt-1 rounded border border-slate-200 bg-white px-1.5 py-1 text-[10px] text-slate-600",children:[" : ",J.dismissReason]}):null,a.jsxs("div",{className:"mt-1.5 flex items-center gap-1",children:[a.jsx("button",{type:"button",onClick:()=>jd(J),className:"rounded border border-blue-200 bg-blue-50 px-1.5 py-1 text-[10px] font-medium text-blue-700 hover:bg-blue-100",children:" "}),a.jsx("button",{type:"button",onClick:()=>$h(J),className:"rounded border border-emerald-200 bg-emerald-50 px-1.5 py-1 text-[10px] font-medium text-emerald-700 hover:bg-emerald-100",children:" "}),a.jsx("button",{type:"button",onClick:()=>xr(J.id,"acknowledged"),className:"rounded border border-gray-200 bg-white px-1.5 py-1 text-[10px] text-gray-600 hover:bg-gray-100",children:""}),a.jsx("button",{type:"button",onClick:()=>Fh(J),className:"rounded border border-gray-200 bg-white px-1.5 py-1 text-[10px] text-gray-500 hover:bg-gray-100",children:""})]})]},J.id)})})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"1.  (  )"}),a.jsx("span",{className:"text-[11px] px-1.5 py-0.5 rounded bg-blue-50 text-blue-700",children:Ga(cr,Fke[xe])})]}),a.jsx("div",{className:"mb-2 text-[11px] text-gray-500",children:"    "}),a.jsxs("div",{className:"space-y-1.5 text-[12px] leading-relaxed",children:[a.jsx("div",{className:"p-2 rounded border border-gray-100 bg-gray-50 text-gray-800",children:aa}),a.jsx("div",{className:"p-2 rounded border border-amber-100 bg-amber-50 text-amber-900",children:bl}),a.jsx("div",{className:"p-2 rounded border border-blue-100 bg-blue-50 text-blue-900",children:Mr})]})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3 min-h-0 overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[Ga("Top  ","top5Share","text-sm font-semibold text-gray-700"),a.jsx("span",{className:"text-[11px] px-1.5 py-0.5 rounded bg-rose-50 text-rose-700 border border-rose-200",children:" 5"})]}),a.jsx("div",{className:"mb-2 rounded border border-blue-100 bg-blue-50 px-2 py-1.5 text-[11px] text-blue-800",children:Ga(`Top5  ${cr}  ${xl} `,"top5Share","text-[11px] text-blue-800")}),a.jsxs("div",{className:"space-y-1.5 overflow-y-auto pr-1",children:[Pr.map((J,be)=>a.jsx("button",{onClick:()=>zt(J.code,J.name,J.regionId),className:`w-full rounded-md border px-2 py-2 text-left ${Fe===J.regionId?"border-blue-300 bg-blue-50":"border-gray-200 bg-white hover:bg-gray-50"}`,children:a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("div",{className:"flex items-center gap-1.5 min-w-0",children:[a.jsx("span",{className:"w-5 h-5 shrink-0 rounded-full bg-gray-100 text-gray-700 text-[11px] font-semibold flex items-center justify-center",children:be+1}),a.jsx("span",{className:"text-[12px] font-medium text-gray-800 truncate",children:J.name})]}),a.jsx("span",{className:"text-[12px] font-semibold text-gray-900",children:my(xe,J.kpiValue)})]})},J.regionId)),Pr.length===0&&a.jsx("div",{className:"rounded border border-dashed border-gray-200 bg-gray-50 px-2 py-3 text-[11px] text-gray-500",children:"     "})]})]})]}),a.jsx("div",{className:`${Xt==="desktop"?"min-w-0 min-h-0 flex flex-col overflow-hidden":"w-full shrink-0"} ${jo}`,children:a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden flex flex-col flex-1",children:[a.jsx("div",{className:"px-4 py-3 border-b border-gray-200 bg-white rounded-t-lg",children:a.jsxs("div",{className:"flex items-center justify-between gap-2 flex-wrap",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:it,disabled:!rn,className:`flex items-center gap-1 h-8 px-3 text-sm rounded-lg transition-colors font-medium ${rn?"text-blue-600 bg-blue-50 hover:bg-blue-100":"text-gray-400 bg-gray-100 cursor-not-allowed"}`,children:[a.jsx(vm,{className:"h-4 w-4"}),a.jsx("span",{children:""})]}),a.jsx("button",{onClick:st,className:"h-8 px-3 text-xs rounded-lg border border-gray-200 text-gray-600 hover:bg-gray-50",children:""}),a.jsx("span",{className:"text-sm font-semibold text-gray-800",children:ta})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"rounded-md border border-blue-200 bg-blue-50 px-3 py-1.5 text-xs font-semibold text-blue-700",children:""}),a.jsx("div",{className:"flex rounded-md border border-gray-200 overflow-hidden",children:hr.map(J=>a.jsx("button",{onClick:()=>Tn(J.kpi),className:`px-2.5 py-1.5 text-[11px] font-medium transition border-l first:border-l-0 ${Ai===J.key?"bg-slate-700 text-white border-slate-700":"bg-white text-gray-600 border-gray-200 hover:bg-gray-100"}`,title:`${J.label}  `,children:J.label},J.key))}),a.jsx("div",{className:"flex items-center gap-0.5",children:["7d","30d","90d"].map(J=>a.jsx("button",{onClick:()=>ar(J),className:`rounded-md px-3 py-1.5 text-xs font-medium transition ${me===J?"bg-blue-600 text-white":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,children:Fp[J]},J))})]})]})}),a.jsx("div",{className:"px-4 py-2 border-b border-gray-100 bg-gray-50",children:a.jsx("div",{className:"flex items-center gap-1.5 overflow-x-auto",children:Gr.map((J,be)=>a.jsxs(W.Fragment,{children:[be>0&&a.jsx(ji,{className:"h-3.5 w-3.5 text-gray-400 shrink-0"}),a.jsx("button",{onClick:()=>It(be),className:`text-[11px] whitespace-nowrap ${be===Gr.length-1?"font-semibold text-blue-700":"text-gray-600 hover:text-blue-700"}`,children:J.label})]},`${J.level}-${J.id}-${be}`))})}),a.jsxs("div",{className:"px-4 py-2 border-b border-gray-100 bg-white",children:[a.jsx("div",{className:"text-[12px] font-medium text-gray-700 truncate",children:Ga(Bi,"insightHeadline")}),a.jsx("div",{className:"mt-1.5 flex flex-wrap gap-1.5",children:wn.map(J=>a.jsx("span",{title:J.tooltip,className:"rounded-full border border-gray-200 bg-gray-50 px-2 py-0.5 text-[10px] text-gray-600",children:J.label},J.label))}),a.jsx("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-3 gap-2",children:Ls.map(J=>{const be=Yke(J.points.map(ct=>ct.v),124,28),Ie=be.map((ct,wt)=>`${wt===0?"M":"L"} ${ct.x} ${ct.y}`).join(" "),Je=be[be.length-1],ot=J.delta>0?"text-red-600":J.delta<0?"text-blue-600":"text-gray-500";return a.jsxs("div",{className:"rounded-md border border-gray-200 bg-gray-50 px-2 py-1.5",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("span",{className:"text-[10px] text-gray-500",children:J.label}),a.jsx("span",{className:`text-[10px] font-semibold ${ot}`,children:Wke(J.delta,J.unit)})]}),a.jsxs("div",{className:"flex items-end justify-between gap-2 mt-0.5",children:[a.jsx("span",{className:"text-[12px] font-semibold text-gray-800",children:Vke(J.value,J.unit)}),a.jsxs("svg",{viewBox:"0 0 124 28",className:"h-7 w-[124px] shrink-0",children:[a.jsx("path",{d:Ie,fill:"none",stroke:Kt.color,strokeWidth:"1.8",strokeLinecap:"round"}),Je?a.jsx("circle",{cx:Je.x,cy:Je.y,r:"2.5",fill:Kt.color}):null]})]})]},J.key)})})]}),a.jsxs("div",{className:"relative p-2 min-h-0",children:[a.jsxs("div",{className:"absolute left-4 top-4 z-20 w-[min(420px,calc(100%-2rem))] rounded-lg border border-blue-200 bg-white/95 backdrop-blur px-3 py-2 shadow-sm",children:[a.jsx("div",{className:"text-[12px] font-semibold text-blue-800",children:" "}),a.jsx("div",{className:"text-[12px] text-gray-700 mt-1 leading-relaxed",children:An})]}),a.jsx(Xk,{title:"",indicatorId:Ps,year:2026,scope:{mode:"regional",ctprvnCodes:[e.ctprvnCode],label:e.label},variant:"portal",mapHeight:On,hideBreadcrumb:!0,onRegionSelect:Ce,externalColorScheme:Ba,hideLegendPanel:!0,externalLevel:R,externalSelectedCode:P,onSubRegionsChange:Dt,getTooltipExtraLines:Ge})]}),a.jsxs("div",{className:"mx-2 mb-2 px-3 py-2 rounded-lg bg-gradient-to-r from-gray-50 to-gray-100/80 border border-gray-200/60 shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full",style:{backgroundColor:Kt.color}}),a.jsxs("span",{className:"text-[12px] font-bold text-gray-600 tracking-wide",children:[cr,"  "]}),a.jsx("span",{className:"text-[11px] text-gray-400",children:":  "})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-[12px] font-semibold text-gray-500 tabular-nums min-w-[42px] text-right",children:Kt.unit===""?`${Math.round(ns)}`:Kt.unit===""?`${Math.round(ns)}`:Kt.unit===""?`${Math.round(ns)}`:`${ns.toFixed(1)}%`}),a.jsx("div",{className:"flex-1 h-3 rounded-md overflow-hidden flex shadow-inner",children:(hu[Ba]||hu.blue).map((J,be)=>a.jsx("div",{className:"flex-1",style:{backgroundColor:J}},be))}),a.jsx("span",{className:"text-[12px] font-semibold text-gray-500 tabular-nums min-w-[42px]",children:Kt.unit===""?`${Math.round(Ha)}`:Kt.unit===""?`${Math.round(Ha)}`:Kt.unit===""?`${Math.round(Ha)}`:`${Ha.toFixed(1)}%`})]})]})]})}),a.jsxs("div",{className:`${Xt==="desktop"?"min-w-0 min-h-0 overflow-hidden":Xt==="tablet"?"hidden":"w-full shrink-0"} flex flex-col gap-2 ${jo}`,children:[a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3 shrink-0",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"2.  ( )"}),a.jsx("span",{className:"text-[11px] px-1.5 py-0.5 bg-indigo-50 text-indigo-600 rounded border border-indigo-200",children:la})]}),a.jsx("div",{className:"text-[11px] text-gray-500 mb-1",children:"  /  3 "}),a.jsxs("div",{className:"text-[12px] text-gray-500",children:[" : ",a.jsx("span",{className:"font-medium text-gray-700",children:cr}),"  :  "]}),c?a.jsx("button",{type:"button",onClick:()=>c("cause"),className:"mt-2 text-[11px] text-blue-700 hover:text-blue-800 underline underline-offset-2",children:"     "}):null]}),a.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto overscroll-contain pr-1 space-y-2",children:te?a.jsxs("div",{className:"space-y-2",children:[a.jsx(p8,{height:176}),a.jsx(p8,{height:176})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[a.jsx("div",{className:"grid grid-cols-1 gap-1.5",children:Fs.map(J=>a.jsxs("div",{className:"rounded border border-gray-100 bg-gray-50 px-2 py-1.5",children:[a.jsx("div",{className:"text-[10px] text-gray-500",children:J.label}),a.jsx("div",{className:"text-[12px] font-medium text-gray-800 mt-0.5",children:J.value})]},J.label))}),a.jsxs("div",{className:"mt-2 rounded border border-gray-100 bg-gray-50 px-2 py-2",children:[a.jsx("div",{className:"text-[11px] font-semibold text-gray-700 mb-1",children:" Top3"}),a.jsx("div",{className:"space-y-1",children:Vn.slice(0,3).map((J,be)=>a.jsxs("div",{className:"flex items-center justify-between text-[11px]",children:[a.jsxs("span",{className:"text-gray-700",children:[be+1,". ",J.name]}),a.jsx("span",{className:"font-semibold text-gray-900",children:zu(J)})]},`${J.name}-${be}`))})]})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"3.  ( )"}),a.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded border border-emerald-200 bg-emerald-50 text-emerald-700",children:" "})]}),a.jsx("div",{className:"text-[11px] text-gray-500 mb-1.5",children:"    "}),c?a.jsx("button",{type:"button",onClick:()=>c("interventions"),className:"mb-2 text-[11px] text-blue-700 hover:text-blue-800 underline underline-offset-2",children:"/   "}):null,a.jsx("div",{className:"space-y-1.5",children:si.map(J=>a.jsxs("button",{onClick:()=>ee(J.id),className:`w-full rounded border px-2 py-2 text-left ${V===J.id?"border-blue-300 bg-blue-50":"border-gray-200 bg-white hover:bg-gray-50"}`,children:[a.jsx("div",{className:"text-[12px] font-medium text-gray-800",children:J.title}),a.jsx("div",{className:"text-[11px] text-gray-600 mt-0.5",children:J.detail}),a.jsx("div",{className:"text-[11px] text-blue-700 mt-1",children:J.expected})]},J.id))}),a.jsx("button",{onClick:()=>l?.({kpi:xe,sgg:et,range:Ne,source:"overview",primaryDriverStage:ss?.stage??fa.primaryDriverStage}),className:"mt-2.5 w-full h-9 rounded-md text-[12px] font-semibold text-white bg-blue-600 hover:bg-blue-700",children:" "})]})]})})]})]})})]})}function Zke({regionCode:e,regionLabel:t,userRole:n="center_director"}){const r=n==="center_director",[s,i]=h.useState(!1),[o,l]=h.useState(()=>cW(e)),c=h.useCallback((y,v)=>{l(N=>({...N,thresholds:{...N.thresholds,[y]:v}})),i(!1)},[]),u=h.useCallback((y,v)=>{l(N=>({...N,weights:{...N.weights,[y]:v}})),i(!1)},[]),m=h.useCallback(y=>{l(v=>({...v,notifications:{...v.notifications,[y]:!v.notifications[y]}})),i(!1)},[]),p=h.useCallback(()=>{PRe(e,o),i(!0),setTimeout(()=>i(!1),3e3)},[e,o]),g=h.useCallback(()=>{l({...ug}),i(!1)},[]),x=h.useMemo(()=>{const y=o.weights;return Number((y.slaBreachRate+y.notReachedRate+y.avgWaitTimeNorm+y.longWaitRate).toFixed(2))},[o.weights]);return a.jsxs("div",{className:"p-6 max-w-4xl mx-auto space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-bold text-gray-800",children:""}),a.jsxs("p",{className:"text-sm text-gray-500 mt-0.5",children:[t,"     "]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[s&&a.jsxs("span",{className:"flex items-center gap-1 text-green-600 text-sm font-medium animate-pulse",children:[a.jsx(el,{className:"h-4 w-4"}),"  "]}),a.jsx("button",{onClick:g,disabled:!r,className:"px-3 py-1.5 text-xs border border-gray-300 rounded-lg text-gray-600 hover:bg-gray-50 disabled:opacity-40 disabled:cursor-not-allowed",children:" "}),a.jsxs("button",{onClick:p,disabled:!r,className:"flex items-center gap-1.5 px-4 py-1.5 text-xs font-semibold bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-40 disabled:cursor-not-allowed shadow-sm",children:[a.jsx(xR,{className:"h-3.5 w-3.5"}),""]})]})]}),a.jsxs("section",{className:"bg-white border border-gray-200 rounded-xl p-5",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(eX,{className:"h-4.5 w-4.5 text-indigo-600"}),a.jsx("h3",{className:"text-sm font-bold text-gray-800",children:" "}),a.jsx("span",{className:"text-[10px] bg-gray-100 text-gray-500 px-2 py-0.5 rounded-full",children:" "})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-3",children:[a.jsx("div",{className:"text-[10px] text-indigo-500 font-medium mb-1",children:" "}),a.jsx("div",{className:"text-sm font-semibold text-indigo-800",children:"case_id ( )"}),a.jsx("div",{className:"text-[10px] text-indigo-400 mt-1",children:"     1 "})]}),a.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-3",children:[a.jsx("div",{className:"text-[10px] text-indigo-500 font-medium mb-1",children:" "}),a.jsx("div",{className:"text-sm font-semibold text-indigo-800",children:"event_id/signal_id  "}),a.jsx("div",{className:"text-[10px] text-indigo-400 mt-1",children:"  signal   "})]}),a.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-3",children:[a.jsx("div",{className:"text-[10px] text-indigo-500 font-medium mb-1",children:"  "}),a.jsx("div",{className:"text-sm font-semibold text-indigo-800",children:"   "}),a.jsx("div",{className:"text-[10px] text-indigo-400 mt-1",children:" KPI       "})]})]})]}),a.jsxs("section",{className:"bg-white border border-gray-200 rounded-xl p-5",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(HU,{className:"h-4.5 w-4.5 text-orange-600"}),a.jsx("h3",{className:"text-sm font-bold text-gray-800",children:" / "}),!r&&a.jsx(ju,{className:"h-3.5 w-3.5 text-gray-400"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"   (thresholdDays)"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"number",min:1,max:90,value:o.thresholds.longWaitDays,onChange:y=>c("longWaitDays",Number(y.target.value)),disabled:!r,className:"w-24 px-3 py-1.5 border border-gray-300 rounded-lg text-sm disabled:bg-gray-100 disabled:cursor-not-allowed focus:ring-1 focus:ring-blue-500 focus:outline-none"}),a.jsx("span",{className:"text-xs text-gray-500",children:""}),a.jsxs("span",{className:"text-[10px] text-gray-400 ml-2",children:["  ",o.thresholds.longWaitDays,'    " "']})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"SLA   (slaNearDays)"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"number",min:1,max:30,value:o.thresholds.slaNearDays,onChange:y=>c("slaNearDays",Number(y.target.value)),disabled:!r,className:"w-24 px-3 py-1.5 border border-gray-300 rounded-lg text-sm disabled:bg-gray-100 disabled:cursor-not-allowed focus:ring-1 focus:ring-blue-500 focus:outline-none"}),a.jsx("span",{className:"text-xs text-gray-500",children:""}),a.jsxs("span",{className:"text-[10px] text-gray-400 ml-2",children:["SLA  ",o.thresholds.slaNearDays,'  ""']})]})]})]}),a.jsxs("div",{className:"border-t border-gray-100 pt-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("span",{className:"text-xs font-semibold text-gray-700",children:"Top5   (w1~w4)"}),a.jsxs("span",{className:`text-[10px] font-medium px-2 py-0.5 rounded-full ${x===1?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:[": ",x," ",x===1?"":" 1.00"]})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{key:"slaBreachRate",label:"w1  SLA ",color:"text-red-600"},{key:"notReachedRate",label:"w2  ",color:"text-orange-600"},{key:"avgWaitTimeNorm",label:"w3  ",color:"text-purple-600"},{key:"longWaitRate",label:"w4  ",color:"text-blue-600"}].map(({key:y,label:v,color:N})=>a.jsxs("div",{children:[a.jsx("label",{className:`text-[10px] font-medium ${N} block mb-1`,children:v}),a.jsx("input",{type:"number",min:0,max:1,step:.05,value:o.weights[y],onChange:S=>u(y,Number(S.target.value)),disabled:!r,className:"w-full px-3 py-1.5 border border-gray-300 rounded-lg text-sm disabled:bg-gray-100 disabled:cursor-not-allowed focus:ring-1 focus:ring-blue-500 focus:outline-none"})]},y))}),a.jsx("div",{className:"mt-2 text-[10px] text-gray-400",children:"risk_score = w1SLA + w2 + w3() + w4"})]})]}),a.jsxs("section",{className:"bg-white border border-gray-200 rounded-xl p-5",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(gh,{className:"h-4.5 w-4.5 text-yellow-600"}),a.jsx("h3",{className:"text-sm font-bold text-gray-800",children:" "}),!r&&a.jsx(ju,{className:"h-3.5 w-3.5 text-gray-400"})]}),a.jsx("div",{className:"space-y-3",children:[{key:"slaBreachAlert",label:"SLA  ",desc:"SLA     ",ready:!0},{key:"slaImminentAlert",label:"SLA  ",desc:"SLA  N  ",ready:!0},{key:"longWaitSurge",label:"  ",desc:"    30%   ",ready:!1},{key:"riskIncrease",label:"  ",desc:"     ",ready:!1}].map(({key:y,label:v,desc:N,ready:S})=>a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-100 hover:bg-gray-50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(fs,{className:`h-4 w-4 ${o.notifications[y]?"text-yellow-500":"text-gray-300"}`}),a.jsxs("div",{children:[a.jsxs("div",{className:"text-xs font-medium text-gray-800 flex items-center gap-1.5",children:[v,!S&&a.jsx("span",{className:"text-[9px] bg-gray-100 text-gray-400 px-1.5 py-0.5 rounded-full",children:""})]}),a.jsx("div",{className:"text-[10px] text-gray-500",children:N})]})]}),a.jsx("button",{onClick:()=>m(y),disabled:!r,className:`relative w-10 h-5.5 rounded-full transition-colors disabled:opacity-40 disabled:cursor-not-allowed ${o.notifications[y]?"bg-blue-500":"bg-gray-300"}`,style:{height:"22px"},children:a.jsx("span",{className:"absolute top-0.5 w-4 h-4 rounded-full bg-white shadow transition-transform",style:{left:o.notifications[y]?"22px":"2px"}})})]},y))})]}),a.jsxs("section",{className:"bg-white border border-gray-200 rounded-xl p-5",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(oc,{className:"h-4.5 w-4.5 text-green-600"}),a.jsx("h3",{className:"text-sm font-bold text-gray-800",children:" / "})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-green-50 border border-green-200",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"w-6 h-6 rounded-full bg-green-500 text-white flex items-center justify-center text-[10px] font-bold",children:""}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-medium text-green-800",children:""}),a.jsx("div",{className:"text-[10px] text-green-600",children:"   "})]})]}),a.jsx("span",{className:`text-[10px] font-semibold px-2 py-0.5 rounded-full ${r?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:r?" ":""})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-100",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"w-6 h-6 rounded-full bg-gray-400 text-white flex items-center justify-center text-[10px] font-bold",children:""}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-medium text-gray-700",children:" "}),a.jsx("div",{className:"text-[10px] text-gray-500",children:"     "})]})]}),a.jsx("span",{className:`text-[10px] font-semibold px-2 py-0.5 rounded-full ${r?"":"bg-gray-100 text-gray-600"}`,children:r?"":" "})]})]}),a.jsxs("div",{className:"mt-3 text-[10px] text-gray-400",children:[" : localStorage  regional.settings.",e,".*    "]})]})]})}const XO={regionalSla:" SLA",regionalQueueRisk:" ( )",regionalRecontact:"  ",regionalDataReadiness:"  ",regionalGovernance:"  ",regionalAdTransitionHotspot:"AD  ",regionalDxDelayHotspot:" ",regionalScreenToDxRate:" "},U3={contact:"",recontact:"",L2:"L2","3rd":"3"},e3e=["contact","recontact","L2","3rd"],b8={week:"",month:"",quarter:""},hy={center:"",hospital:"",system:"",external:""},y8={high:"High",medium:"Med",low:"Low"},t3e={watch:"bg-amber-50 text-amber-700 border-amber-200",critical:"bg-red-50 text-red-700 border-red-200"},fg={count:"",ratio:""},v8={call_log:"",appointment:"",integration:"",manual:""},N8={high:"High",med:"Med",low:"Low"},n3e={high:"border-emerald-200 bg-emerald-50 text-emerald-700",med:"border-amber-200 bg-amber-50 text-amber-700",low:"border-rose-200 bg-rose-50 text-rose-700"},F_={backlogType:{snapshot_waiting:" ",period_accumulated:" "},denominator:{overall:" ",stage:"Stage ",cause:" "},areaOwnership:{resident:" ",center:" ",hospital:"  "}},r3e={none:"bg-gray-50 text-gray-600 border-gray-200",watch:"bg-amber-50 text-amber-700 border-amber-200",critical:"bg-red-50 text-red-700 border-red-200"},CW=[{causeKey:"staff_shortage",causeLabel:"  ",owner:"center",actionable:!0,regionalNeed:"high"},{causeKey:"contact_failure",causeLabel:" ",owner:"center",actionable:!0,regionalNeed:"high"},{causeKey:"data_gap",causeLabel:" ",owner:"system",actionable:!0,regionalNeed:"medium"},{causeKey:"hospital_slot_delay",causeLabel:"  ",owner:"hospital",actionable:!1,regionalNeed:"high"},{causeKey:"external_dependency",causeLabel:"  ",owner:"external",actionable:!1,regionalNeed:"medium"}],a3e={contact:["contact_failure","staff_shortage","data_gap"],recontact:["contact_failure","staff_shortage","external_dependency"],L2:["data_gap","hospital_slot_delay","staff_shortage"],"3rd":["hospital_slot_delay","external_dependency","data_gap"]},s3e={staff_shortage:{contact:1.2,recontact:1.15,L2:.95,"3rd":.9},contact_failure:{contact:1.28,recontact:1.35,L2:.8,"3rd":.78},data_gap:{contact:.84,recontact:.88,L2:1.2,"3rd":1.16},hospital_slot_delay:{contact:.7,recontact:.76,L2:1.22,"3rd":1.32},external_dependency:{contact:.75,recontact:.83,L2:1.06,"3rd":1.24}},i3e={staff_shortage:["    "," 2    ","48   "],contact_failure:["     ","   ","    "],data_gap:["     ","     ","24   "],hospital_slot_delay:["     ","     ","    "],external_dependency:["    ","    ","     "]};function Xa(e){let t=0;for(let n=0;n<e.length;n+=1)t=t*31+e.charCodeAt(n)>>>0;return t}function La(e,t,n){return t+(n-t)*(Xa(e)%1e3/1e3)}function TW(e,t,n){return Math.max(t,Math.min(n,e))}function S8(e){return e==="contact"||e==="recontact"||e==="L2"||e==="3rd"?e:null}function o3e(e){return e==="week"||e==="month"||e==="quarter"?e:null}function l3e(e){return e?e in XO:!1}function lo(e){return`${Math.round(e).toLocaleString()}`}function zo(e){return`${e.toFixed(1)}%`}function E8(e,t){return e==="count"?lo(t):zo(t)}function c3e(e){const t=e3e.map((r,s)=>{const i=Math.round(La(`${e}-${r}-count`,82+s*12,360+s*20)),o=Math.round(La(`${e}-${r}-dwell`,48+s*28,420+s*35)),l=Number(La(`${e}-${r}-delta`,-18,22).toFixed(1)),c=a3e[r].slice(0,2).map((u,m)=>({causeKey:u,ratio:Number(La(`${e}-${r}-${u}-top-${m}`,14,44-m*6).toFixed(1))}));return{stageKey:r,stageLabel:U3[r],count:i,avgDwellMinutes:o,deltaVsRegionalAvg:l,topCauses:c}}),n=t.reduce((r,s)=>r+s.count,0);return t.map(r=>({...r,ratio:n>0?Number((r.count/n*100).toFixed(1)):0}))}function d3e(e,t,n){const r=CW.map(i=>{const o=t?s3e[i.causeKey]?.[t]??1:1,l=n?1+(Xa(`${n}-${i.causeKey}`)%120-60)/700:1,c=Math.max(8,Math.round(La(`${e}-${i.causeKey}-count`,42,260)*o*l)),u=["call_log","appointment","integration","manual"],m=u[Xa(`${e}-${i.causeKey}-evidence-type`)%u.length],p=["high","med","low"],g=p[Xa(`${e}-${i.causeKey}-evidence-confidence`)%p.length],x=Xa(`${e}-${i.causeKey}-evidence-link`)%100>=23,y=["  "," ","  ","   "],v=y[Xa(`${e}-${i.causeKey}-missing`)%y.length];return{...i,count:c,evidence:{type:m,link:x?`/regional/bottleneck?cause=${i.causeKey}`:null,confidence:g,...x?{}:{missingReason:v}}}}).sort((i,o)=>o.count-i.count),s=r.reduce((i,o)=>i+o.count,0);return r.map(i=>({causeKey:i.causeKey,causeLabel:i.causeLabel,ratio:s>0?Number((i.count/s*100).toFixed(1)):0,count:i.count,meta:{owner:i.owner,actionable:i.actionable,regionalNeed:i.regionalNeed},evidence:i.evidence}))}function u3e(e,t,n,r){const s=t.slice(0,Math.min(10,t.length));if(!s.length)return[];const i=n?1+Xa(`${n}-weight`)%90/200:1,o=r?1+Xa(`${r}-weight`)%70/220:1,l=s.map(p=>{const g=Math.round(La(`${e}-area-${p}-count`,36,220)*i*o);return{areaKey:p,areaLabel:p,count:g}}),c=l.reduce((p,g)=>p+g.count,0),u=l.map(p=>({...p,ratio:c>0?Number((p.count/c*100).toFixed(1)):0})),m=u.reduce((p,g)=>p+g.ratio,0)/Math.max(1,u.length);return u.map(p=>{const g=Number((p.ratio-m).toFixed(1)),x=Math.abs(g),y=x>=8?"critical":x>=4?"watch":"none";return{...p,deltaVsAvg:g,highlightLevel:y}}).sort((p,g)=>g.ratio-p.ratio)}function f3e(e,t,n,r,s){const i=t==="week"?7:t==="month"?8:12,o=Array.from({length:i},(y,v)=>t==="week"?`D-${i-1-v}`:t==="month"?`W-${i-1-v}`:`M-${i-1-v}`),l=s?Xa(`${s}-trend-bias`)%90/18:0,c=r?Xa(`${r}-trend-bias`)%60/20:0,u=n?Xa(`${n}-trend-bias`)%70/18:0,m=La(`${e}-trend-base-count`,80,220)+l+c+u,p=La(`${e}-trend-slope-count`,-6,9),g=La(`${e}-trend-base-ratio`,10,36)+u/3,x=La(`${e}-trend-slope-ratio`,-1.2,1.8);return o.map((y,v)=>{const N=La(`${e}-${y}-count-noise`,-14,14),S=La(`${e}-${y}-ratio-noise`,-1.8,1.8),j=Math.max(1,Math.round(m+p*v+N)),C=Number(TW(g+x*v+S,0,100).toFixed(1));return{dateKey:y,count:j,ratio:C}})}function OW(e){const t=Xa(`${e}-backlog-type`)%100<82?"snapshot_waiting":"period_accumulated",n=["overall","stage","cause"],r=n[Xa(`${e}-denominator`)%n.length],s=["center","resident","hospital"],i=s[Xa(`${e}-area-ownership`)%s.length];return{backlogType:t,denominator:r,areaOwnership:i}}function B3(e,t,n){const r=t?Xa(`${t}-coverage`)%16-8:0,s=n?Xa(`${n}-coverage`)%14-7:0,i=TW(Number((La(`${e}-classified`,64,94)+r+s).toFixed(1)),28,98),o=Number((100-i).toFixed(1)),l=["system","center","hospital","external"],c=l[Xa(`${e}-unclassified-owner`)%l.length];return{classifiedRatio:i,unclassifiedRatio:o,unclassifiedOwner:c}}function p3e(e,t){if(e.length<3)return[];const n=[],r=e.map(u=>t==="count"?u.count:u.ratio);let s=1;for(let u=r.length-1;u>0&&r[u]>r[u-1];u-=1)s+=1;if(s>=3){const u=Number((r[r.length-1]-r[Math.max(0,r.length-s)]).toFixed(1));n.push({type:"increasing_streak",metric:t,days:s,severity:s>=5?"critical":"watch",delta:u})}const i=r.slice(-Math.min(5,r.length));if(!i.some((u,m)=>m>0&&u<i[m-1])&&i.length>=4&&i[i.length-1]>=i[0]){const u=Number((i[i.length-1]-i[0]).toFixed(1));n.push({type:"no_decrease",metric:t,days:i.length,severity:i.length>=5?"critical":"watch",delta:u})}const l=Math.max(1,r.length-4),c=r.slice(l-1);if(c.length>=4&&c[1]<c[0]&&c[2]>c[1]&&c[3]>c[2]){const u=Number((c[3]-c[1]).toFixed(1));n.push({type:"rebound",metric:t,days:2,severity:"watch",delta:u})}return n}function m3e(e){return[{stage:"Stage1 (ML)",signal:Number(La(`${e}-stage1-signal`,-16,20).toFixed(1)),queue:Math.round(La(`${e}-stage1-queue`,-20,48)),desc:"       "},{stage:"Stage2 (ANN)",signal:Number(La(`${e}-stage2-signal`,-14,18).toFixed(1)),queue:Math.round(La(`${e}-stage2-queue`,-18,42)),desc:"   2    "},{stage:"Stage3 (CNN)",signal:Number(La(`${e}-stage3-signal`,-12,16).toFixed(1)),queue:Math.round(La(`${e}-stage3-queue`,-16,38)),desc:"   3     "}]}function h3e(e,t,n){return{stageBacklogBreakdown:c3e(`${e}-stage`),kpiDefinition:OW(`${e}-definition`),classificationCoverage:B3(`${e}-coverage`,t,n)}}function g3e(e,t,n){return{causes:d3e(`${e}-causes`,t,n),coverage:B3(`${e}-coverage`,t,null)}}function x3e(e,t,n,r,s,i){const o=f3e(e,t,n,r,s),l=p3e(o,i);return{metric:i,points:o.map(c=>({dateKey:c.dateKey,value:i==="count"?c.count:c.ratio,count:c.count,ratio:c.ratio})),alerts:l}}function b3e(e,t,n,r){const s=t.reduce((l,c)=>l+c.count,0),i=t.reduce((l,c)=>l+c.avgDwellMinutes*c.count,0)/Math.max(1,s);return{kpiValue:(()=>{if(e==="regionalQueueRisk")return s;if(e==="regionalDxDelayHotspot")return Number((i/60).toFixed(1));if(e==="regionalSla"){const l=t.find(c=>c.stageKey==="recontact")?.ratio??t[0]?.ratio??0;return Number((100-l).toFixed(1))}return Number(e==="regionalRecontact"?(n.find(l=>l.causeKey==="contact_failure")?.ratio??n[0]?.ratio??0).toFixed(1):e==="regionalDataReadiness"?(100-(n.find(l=>l.causeKey==="data_gap")?.ratio??0)).toFixed(1):e==="regionalGovernance"?(100-r.unclassifiedRatio).toFixed(1):e==="regionalAdTransitionHotspot"?(n[0]?.ratio??0).toFixed(1):e==="regionalScreenToDxRate"?(100-(n.find(l=>l.causeKey==="hospital_slot_delay")?.ratio??0)).toFixed(1):(n[0]?.ratio??0).toFixed(1))})(),backlogCount:s,avgDwellMin:Number(i.toFixed(1)),stageBreakdown:t,causeBreakdownTop5:n.slice(0,5),coverage:r}}async function y3e(e){const t="regional_bottleneck_intervention_snapshots_v1",n=window.localStorage.getItem(t),r=n?JSON.parse(n):[],s=`INT-${Date.now()}`,i=`SNAP-${Date.now()}`;return r.unshift({snapshotId:i,interventionId:s,createdAt:new Date().toISOString(),payload:e}),window.localStorage.setItem(t,JSON.stringify(r.slice(0,200))),{interventionId:s,snapshotId:i,redirectUrl:`/regional/interventions/new?interventionId=${s}&snapshotId=${i}`}}function v3e(e,t,n,r,s,i,o){const l=s?n.find(p=>p.stageKey===s)??n[0]:n[0],c=o?r.find(p=>p.areaKey===o)??r[0]:r[0];return(i?t.filter(p=>p.causeKey===i):t.slice(0,3)).filter(p=>!!(p&&typeof p.ratio=="number"&&typeof p.count=="number")).slice(0,3).map((p,g)=>{const x=Number((p.ratio*.62+(l?.ratio??0)*.22+Math.max(0,c?.deltaVsAvg??0)*.16).toFixed(1)),y=p.meta.owner,v=i3e[p.causeKey]??["    ","    ","   "];return{recId:`REC-${g+1}-${Xa(`${e}-${p.causeKey}`)}`,evidence:{causeKey:p.causeKey,causeLabel:p.causeLabel,stageKey:l?.stageKey??"contact",stageLabel:l?.stageLabel??U3.contact,areaKey:c?.areaKey??null,areaLabel:c?.areaLabel??" "},action:{title:gt(`${p.causeLabel}    `),steps:v,ownerSuggested:y},expectedEffect:{qualitative:gt("       ")},priorityScore:x}})}function N3e(e){return e>=8?"text-red-700":e>=4?"text-amber-700":e<=-6?"text-blue-700":"text-gray-700"}function S3e(e,t=""){return`${e>0?"+":""}${e.toFixed(1)}${t}`}function E3e(e){const t=fg[e.metric],n=e.metric==="ratio"?`${e.delta>0?"+":""}${e.delta.toFixed(1)}%p`:`${e.delta>0?"+":""}${Math.round(e.delta)}`;return e.type==="increasing_streak"?`${t} ${e.days}  (${n})`:e.type==="no_decrease"?`${t} ${e.days}  (${n})`:`${t}   (${n})`}function F0(){return a.jsxs("div",{className:"animate-pulse space-y-2",children:[a.jsx("div",{className:"h-4 w-1/3 rounded bg-gray-200"}),a.jsx("div",{className:"h-40 rounded bg-gray-100"}),a.jsx("div",{className:"h-4 w-2/3 rounded bg-gray-200"})]})}function j3e({region:e,districtOptions:t,selectedKpiKey:n,selectedRegionSgg:r,selectedRange:s,onSelectedKpiKeyChange:i,onSelectedRegionSggChange:o,onSelectedRangeChange:l,onCreateIntervention:c}){const u=h.useMemo(()=>new URLSearchParams(window.location.search),[]),[m,p]=h.useState(u.get("stageImpact")!=="0"),[g,x]=h.useState(S8(u.get("stage"))),[y,v]=h.useState(u.get("cause")||null),[N,S]=h.useState(u.get("trendMetric")==="count"?"count":"ratio"),[j,C]=h.useState(u.get("compareArea")||u.get("area")||null),_=h.useRef(null),A=h.useRef(null),T=h.useCallback(()=>{const z=new URLSearchParams(window.location.search),Ne=z.get("kpi"),me=z.get("sigungu"),xe=o3e(z.get("period"));l3e(Ne)&&Ne!==n&&i(Ne),me!==null&&me!==(r??"")&&o(me||null),xe&&xe!==s&&l(xe);const et=z.get("stageImpact")!=="0",Fe=S8(z.get("stage")),pt=z.get("cause")||null,St=z.get("compareArea")||z.get("area")||null,qe=z.get("trendMetric")==="count"?"count":"ratio";p(rn=>rn===et?rn:et),x(rn=>rn===Fe?rn:Fe),v(rn=>rn===pt?rn:pt),C(rn=>rn===St?rn:St),S(rn=>rn===qe?rn:qe)},[i,l,o,n,s,r]);h.useEffect(()=>{T()},[T]),h.useEffect(()=>{const z=()=>T();return window.addEventListener("popstate",z),()=>window.removeEventListener("popstate",z)},[T]),h.useEffect(()=>{j&&!t.includes(j)&&C(null)},[t,j]),h.useEffect(()=>(_.current&&window.clearTimeout(_.current),_.current=window.setTimeout(()=>{const z=new URL(window.location.href),Ne=z.searchParams;Ne.set("kpi",n),Ne.set("period",s),r?Ne.set("sigungu",r):Ne.delete("sigungu"),Ne.set("stageImpact",m?"1":"0"),g?Ne.set("stage",g):Ne.delete("stage"),y?Ne.set("cause",y):Ne.delete("cause"),j?Ne.set("area",j):Ne.delete("area"),j?Ne.set("compareArea",j):Ne.delete("compareArea"),Ne.set("trendMetric",N);const me=Ne.toString();`?${me}`!==z.search&&window.history.replaceState({},"",`${z.pathname}?${me}${z.hash}`)},180),()=>{_.current&&window.clearTimeout(_.current)}),[j,y,n,s,r,g,m,N]);const R=h.useMemo(()=>({regionKey:e.id,kpiKey:n,sigungu:r??"",period:s,stageImpactOn:m,selectedStage:g,selectedCauseKey:y,selectedCompareAreaKey:j,trendMetric:N}),[e.id,j,y,n,s,r,g,m,N]),M=h.useMemo(()=>`${e.id}-${R.sigungu||"all"}-${R.kpiKey}-${R.period}`,[R.kpiKey,R.period,R.sigungu,e.id]),P=go({queryKey:["regional-cause","summary",e.id,R.kpiKey,R.sigungu,R.period,R.selectedStage??"all",R.selectedCauseKey??"all",R.stageImpactOn?"impact-on":"impact-off"],queryFn:async()=>{try{return await Tke({regionId:e.id,kpiKey:R.kpiKey,sigungu:R.sigungu,period:R.period,selectedStage:R.selectedStage,selectedCauseKey:R.selectedCauseKey})}catch{return h3e(`${M}-summary`,R.selectedStage,R.selectedCauseKey)}},staleTime:3e4,placeholderData:z=>z}),$=go({queryKey:["regional-cause","causes",e.id,R.kpiKey,R.sigungu,R.period,R.selectedStage??"all",R.selectedCompareAreaKey??"all"],queryFn:async()=>{try{return await Oke({regionId:e.id,kpiKey:R.kpiKey,sigungu:R.sigungu,period:R.period,selectedStage:R.selectedStage,selectedArea:R.selectedCompareAreaKey})}catch{return g3e(`${M}-causes`,R.selectedStage,R.selectedCompareAreaKey)}},staleTime:3e4,placeholderData:z=>z}),w=go({queryKey:["regional-cause","area-comparison",e.id,R.kpiKey,R.sigungu,R.period,R.selectedStage??"all",R.selectedCauseKey??"all",R.selectedCompareAreaKey??"all"],queryFn:async()=>{try{return await Rke({regionId:e.id,kpiKey:R.kpiKey,sigungu:R.sigungu,period:R.period,selectedStage:R.selectedStage,selectedCauseKey:R.selectedCauseKey,districtOptions:t})}catch{return u3e(`${M}-area-${R.selectedCauseKey??"all"}`,t,R.selectedCauseKey,R.selectedStage)}},staleTime:3e4,placeholderData:z=>z}),U=go({queryKey:["regional-cause","trend",e.id,R.kpiKey,R.sigungu,R.period,R.selectedStage??"all",R.selectedCauseKey??"all",R.selectedCompareAreaKey??"all",R.trendMetric],queryFn:async()=>{try{return await kke({regionId:e.id,kpiKey:R.kpiKey,sigungu:R.sigungu,period:R.period,selectedStage:R.selectedStage,selectedCauseKey:R.selectedCauseKey,selectedArea:R.selectedCompareAreaKey,trendMetric:R.trendMetric})}catch{return x3e(`${M}-trend`,R.period,R.selectedCauseKey,R.selectedStage,R.selectedCompareAreaKey,R.trendMetric)}},staleTime:3e4,placeholderData:z=>z}),X=h.useMemo(()=>m3e(`${M}-impact`),[M]),I=P.data?.stageBacklogBreakdown??[],G=P.data?.kpiDefinition??OW(`${M}-fallback-definition`),L=P.data?.classificationCoverage??B3(`${M}-fallback-summary-cov`,g,y),H=$.data?.causes??[],F=$.data?.coverage??L,K=w.data??[],ne=U.data,V=ne?.points??[],ee=ne?.alerts??[],ae=h.useMemo(()=>v3e(`${M}-rec`,H,I,K,g,y,j),[K,M,H,j,y,g,I]),ue=P.isPending||$.isPending||w.isPending;h.useEffect(()=>{H.length&&(y&&H.some(z=>z.causeKey===y)||v(H[0].causeKey))},[H,y]),h.useEffect(()=>{!K.length||!j||K.some(z=>z.areaKey===j)||C(null)},[K,j]);const ce=h.useMemo(()=>H.find(z=>z.causeKey===y)??null,[H,y]),Z=h.useMemo(()=>K.find(z=>z.areaKey===j)??null,[K,j]),ie=h.useMemo(()=>I.reduce((z,Ne)=>z+Ne.count,0),[I]),Se=h.useMemo(()=>I.length?[...I].sort((z,Ne)=>Ne.count-z.count)[0]:null,[I]),fe=h.useMemo(()=>H.length?H[0]:null,[H]),Te=h.useMemo(()=>K.filter(z=>z.highlightLevel==="critical").length,[K]),Pe=h.useCallback(z=>{const{x:Ne=0,y:me=0,width:xe=0,payload:et,index:Fe,value:pt}=z??{},St=et??(typeof Fe=="number"?I[Fe]:void 0),qe=St?.ratio,rn=St?.count??pt;return typeof qe!="number"||typeof rn!="number"?null:a.jsxs("text",{x:Ne+xe+8,y:me+13,fill:"#374151",fontSize:11,children:[zo(qe),"  ",lo(rn)]})},[I]),oe=h.useCallback(z=>{const{x:Ne=0,y:me=0,width:xe=0,payload:et,index:Fe,value:pt}=z??{},St=et??(typeof Fe=="number"?H[Fe]:void 0),qe=St?.ratio,rn=St?.count??pt;return typeof qe!="number"||typeof rn!="number"?null:a.jsxs("text",{x:Ne+xe+8,y:me+13,fill:"#1f2937",fontSize:11,children:[zo(qe),"  ",lo(rn)]})},[H]),le=h.useMemo(()=>{if(!V.length)return gt("  ");const z=V[V.length-1],Ne=fg[N];return gt(`${z.dateKey}  ${Ne} ${E8(N,z.value)} (  )`)},[N,V]),ye=TQ({mutationFn:async z=>{try{return await Ike(z)}catch{return y3e(z)}}}),_e=h.useCallback(z=>{const Ne=z?.stage??g,me=z?.causeKey??y,xe=z?.area??j??r,et=b3e(n,I,H,F),Fe={...R,selectedStage:Ne,selectedCauseKey:me,selectedCompareAreaKey:xe};ye.mutate({from:"bottleneck",queryState:Fe,beforeSnapshot:et},{onSuccess:({snapshotId:pt})=>{const St=Ne?U3[Ne]:null;c?.({region:xe??null,kpiKey:n,range:s,source:"cause",primaryDriverStage:St??void 0,selectedStage:Ne??null,selectedCauseKey:me??null,selectedArea:xe??null,snapshotId:pt})}})},[F,H,ye,R,c,y,n,s,r,g,j,I]),te=h.useCallback(z=>{x(z.evidence.stageKey),v(z.evidence.causeKey),C(z.evidence.areaKey),A.current?.scrollIntoView({behavior:"smooth",block:"start"})},[]);return a.jsxs("div",{className:"h-full overflow-auto bg-slate-50 px-4 py-3 space-y-3",children:[a.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-semibold text-slate-900",children:" "}),a.jsx("div",{className:"text-[12px] text-slate-500",children:"()  ()  () 2  "})]}),a.jsx("button",{onClick:()=>_e(),disabled:ye.isPending,className:"px-3 py-1.5 rounded-md bg-blue-600 text-white text-sm font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:ye.isPending?" ...":" "})]}),a.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-5 gap-2.5",children:[a.jsx("select",{value:n,onChange:z=>i(z.target.value),className:"px-2.5 py-2 border border-slate-300 rounded-lg text-sm text-slate-700 bg-white",children:Object.entries(XO).map(([z,Ne])=>a.jsx("option",{value:z,children:Ne},z))}),a.jsxs("select",{value:r??"",onChange:z=>o(z.target.value||null),className:"px-2.5 py-2 border border-slate-300 rounded-lg text-sm text-slate-700 bg-white",children:[a.jsxs("option",{value:"",children:[e.label," "]}),t.map(z=>a.jsx("option",{value:z,children:z},z))]}),a.jsxs("select",{value:s,onChange:z=>l(z.target.value),className:"px-2.5 py-2 border border-slate-300 rounded-lg text-sm text-slate-700 bg-white",children:[a.jsx("option",{value:"week",children:""}),a.jsx("option",{value:"month",children:""}),a.jsx("option",{value:"quarter",children:""})]}),a.jsxs("button",{onClick:()=>p(z=>!z),className:`px-2.5 py-2 border rounded-lg text-sm flex items-center justify-center gap-1 ${m?"border-indigo-300 bg-indigo-50 text-indigo-700":"border-slate-300 text-slate-700 hover:bg-slate-50"}`,children:["Stage  ",m?"ON":"OFF"," ",m?a.jsx(id,{className:"h-4 w-4"}):a.jsx(Ds,{className:"h-4 w-4"})]}),a.jsxs("div",{className:"px-2.5 py-2 border border-slate-200 rounded-lg text-xs text-slate-600 flex items-center bg-slate-50",children:["URL sync: ",r??" ","  ",b8[s]]})]}),a.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2 text-[11px]",children:[a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-2.5 py-1 text-slate-700",children:[" : ",F_.backlogType[G.backlogType],"  : ",F_.denominator[G.denominator],"  : ",F_.areaOwnership[G.areaOwnership]]}),a.jsxs("div",{className:"rounded-lg border border-indigo-200 bg-indigo-50 px-2.5 py-1 text-indigo-700",children:["   ",L.classifiedRatio.toFixed(1),"% /  ",L.unclassifiedRatio.toFixed(1),"%"]}),a.jsxs("div",{className:"rounded-lg border border-amber-200 bg-amber-50 px-2.5 py-1 text-amber-700",children:[" : ",hy[L.unclassifiedOwner]]})]}),a.jsxs("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-2",children:[a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white px-3 py-2",children:[a.jsx("div",{className:"text-[11px] text-slate-500",children:"  "}),a.jsx("div",{className:"text-[16px] font-semibold text-slate-900",children:lo(ie)}),a.jsx("div",{className:"text-[11px] text-slate-500",children:" KPI    "})]}),a.jsxs("div",{className:"rounded-lg border border-red-200 bg-red-50 px-3 py-2",children:[a.jsx("div",{className:"text-[11px] text-red-600",children:" "}),a.jsx("div",{className:"text-[16px] font-semibold text-red-700",children:Se?`${Se.stageLabel} ${zo(Se.ratio)}`:"-"}),a.jsx("div",{className:"text-[11px] text-red-600",children:Se?`${lo(Se.count)}   ${S3e(Se.deltaVsRegionalAvg,"%p")}`:"  "})]}),a.jsxs("div",{className:"rounded-lg border border-amber-200 bg-amber-50 px-3 py-2",children:[a.jsx("div",{className:"text-[11px] text-amber-700",children:" "}),a.jsx("div",{className:"text-[16px] font-semibold text-amber-800",children:fe?fe.causeLabel:"-"}),a.jsx("div",{className:"text-[11px] text-amber-700",children:fe?`${zo(fe.ratio)}  ${lo(fe.count)}`:"  "})]}),a.jsxs("div",{className:"rounded-lg border border-blue-200 bg-blue-50 px-3 py-2",children:[a.jsx("div",{className:"text-[11px] text-blue-700",children:" "}),a.jsxs("div",{className:"text-[16px] font-semibold text-blue-800",children:[Te,""]}),a.jsx("div",{className:"text-[11px] text-blue-700",children:"      "})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-12 gap-3",children:[a.jsxs("div",{className:"xl:col-span-5 bg-white border border-slate-200 rounded-xl p-3.5 relative shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"text-sm font-semibold text-slate-700",children:"  "}),a.jsx("div",{className:"text-[11px] text-slate-500",children:"Stage   /  "})]}),!I.length&&P.isPending?a.jsx(F0,{}):a.jsx("div",{className:"rounded-lg border border-slate-100 bg-slate-50/60 p-2",style:{height:312},children:a.jsx(Da,{width:"100%",height:"100%",children:a.jsxs(Df,{data:I,margin:{top:12,right:104,left:-4,bottom:10},children:[a.jsx(Rs,{strokeDasharray:"2 3",vertical:!1,stroke:"#e2e8f0"}),a.jsx(oa,{dataKey:"stageLabel",tick:{fontSize:12,fill:"#64748b"},axisLine:!1,tickLine:!1}),a.jsx(Zr,{tick:{fontSize:11,fill:"#64748b"},axisLine:!1,tickLine:!1,width:26}),a.jsx(or,{cursor:{fill:"#eff6ff"},content:({active:z,payload:Ne})=>{if(!z||!Ne?.length)return null;const me=Ne[0].payload;return a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white px-2.5 py-2 text-[11px] shadow-md",children:[a.jsx("div",{className:"font-semibold text-slate-800",children:me.stageLabel}),a.jsxs("div",{className:"text-slate-700",children:[" ",zo(me.ratio),"   ",lo(me.count)]}),a.jsxs("div",{className:"text-slate-600",children:[" : ",Math.round(me.avgDwellMinutes),""]}),a.jsxs("div",{className:N3e(me.deltaVsRegionalAvg),children:["    ",me.deltaVsRegionalAvg>0?"+":"",me.deltaVsRegionalAvg.toFixed(1),"%p"]}),a.jsxs("div",{className:"text-slate-600",children:[" Top2:"," ",me.topCauses.map(xe=>`${CW.find(Fe=>Fe.causeKey===xe.causeKey)?.causeLabel??xe.causeKey} ${zo(xe.ratio)}`).join("  ")]})]})}}),a.jsx("defs",{children:a.jsxs("linearGradient",{id:"stageBarFill",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:"#fb923c"}),a.jsx("stop",{offset:"100%",stopColor:"#f97316"})]})}),a.jsxs(us,{dataKey:"count",radius:[5,5,0,0],onClick:z=>{x(Ne=>Ne===z.stageKey?null:z.stageKey)},children:[I.map(z=>a.jsx(xo,{fill:g===z.stageKey?"#dc2626":"url(#stageBarFill)",stroke:g===z.stageKey?"#991b1b":"#fb923c",strokeWidth:g===z.stageKey?1.2:0},z.stageKey)),a.jsx(ks,{content:Pe})]})]})})}),a.jsx("div",{className:"mt-2 flex flex-wrap gap-1.5",children:I.map(z=>a.jsxs("button",{onClick:()=>x(Ne=>Ne===z.stageKey?null:z.stageKey),className:`px-2 py-1 rounded-md border text-[11px] transition-colors ${g===z.stageKey?"border-red-300 bg-red-50 text-red-700":"border-slate-200 text-slate-600 hover:bg-slate-50"}`,children:[z.stageLabel," ",zo(z.ratio),"  ",lo(z.count)]},z.stageKey))}),P.isFetching&&I.length?a.jsx("div",{className:"absolute inset-0 rounded-xl bg-white/50 backdrop-blur-[1px] pointer-events-none"}):null]}),a.jsxs("div",{className:"xl:col-span-7 bg-white border border-slate-200 rounded-xl p-3.5 relative shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"text-sm font-semibold text-slate-700",children:"  TopN"}),a.jsx("div",{className:"text-[11px] text-slate-500",children:"   //  "})]}),a.jsxs("div",{className:"mb-2 flex flex-wrap gap-1.5",children:[a.jsxs("span",{className:"rounded border border-indigo-200 bg-indigo-50 px-2 py-0.5 text-[11px] text-indigo-700",children:["  ",F.classifiedRatio.toFixed(1),"%"]}),a.jsxs("span",{className:"rounded border border-amber-200 bg-amber-50 px-2 py-0.5 text-[11px] text-amber-700",children:[" ",F.unclassifiedRatio.toFixed(1),"%   ",hy[F.unclassifiedOwner]]})]}),!H.length&&$.isPending?a.jsx(F0,{}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"rounded-lg border border-slate-100 bg-slate-50/60 p-2",style:{height:312},children:a.jsx(Da,{width:"100%",height:"100%",children:a.jsxs(Df,{data:H,layout:"vertical",margin:{top:10,right:114,left:16,bottom:10},children:[a.jsx(Rs,{strokeDasharray:"2 3",horizontal:!1,stroke:"#e2e8f0"}),a.jsx(oa,{type:"number",tick:{fontSize:11,fill:"#64748b"},axisLine:!1,tickLine:!1}),a.jsx(Zr,{dataKey:"causeLabel",type:"category",width:120,tick:{fontSize:11,fill:"#64748b"},axisLine:!1,tickLine:!1}),a.jsx(or,{cursor:{fill:"#fff7ed"},content:({active:z,payload:Ne})=>{if(!z||!Ne?.length)return null;const me=Ne[0].payload,xe=me.meta.actionable?"   ":"   (/  )";return a.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white px-2.5 py-2 text-[11px] shadow-md",children:[a.jsx("div",{className:"font-semibold text-slate-800",children:me.causeLabel}),a.jsxs("div",{className:"text-slate-700",children:[" ",zo(me.ratio),"   ",lo(me.count)]}),a.jsxs("div",{className:"text-slate-600",children:[" : ",hy[me.meta.owner]]}),a.jsxs("div",{className:"text-slate-600",children:["  : ",y8[me.meta.regionalNeed]]}),a.jsxs("div",{className:"text-slate-600",children:[": ",v8[me.evidence.type],"   ",N8[me.evidence.confidence]]}),me.evidence.link?a.jsx("div",{className:"text-blue-700",children:"  "}):a.jsxs("div",{className:"text-amber-700",children:[" : ",me.evidence.missingReason??"  "]}),a.jsx("div",{className:me.meta.actionable?"text-blue-700":"text-amber-700",children:xe})]})}}),a.jsxs(us,{dataKey:"count",radius:[0,6,6,0],onClick:z=>v(z.causeKey),children:[H.map(z=>a.jsx(xo,{fill:y===z.causeKey?"#ea580c":"#f59e0b"},z.causeKey)),a.jsx(ks,{content:oe})]})]})})}),a.jsx("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-1.5",children:H.map(z=>a.jsxs("div",{onClick:()=>v(z.causeKey),onKeyDown:Ne=>{(Ne.key==="Enter"||Ne.key===" ")&&(Ne.preventDefault(),v(z.causeKey))},role:"button",tabIndex:0,className:`w-full rounded-lg border px-2 py-1.5 text-left transition-colors ${y===z.causeKey?"border-orange-300 bg-orange-50":"border-slate-200 bg-white hover:bg-slate-50"}`,children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("div",{className:"text-[12px] font-medium text-gray-800",children:z.causeLabel}),a.jsxs("div",{className:"text-[11px] text-gray-600",children:[zo(z.ratio),"  ",lo(z.count)]})]}),a.jsxs("div",{className:"mt-1 flex flex-wrap gap-1",children:[a.jsxs("span",{className:"rounded border border-gray-200 bg-gray-50 px-1.5 py-0.5 text-[10px] text-gray-600",children:[": ",hy[z.meta.owner]]}),a.jsxs("span",{className:`rounded border px-1.5 py-0.5 text-[10px] ${z.meta.actionable?"border-blue-200 bg-blue-50 text-blue-700":"border-amber-200 bg-amber-50 text-amber-700"}`,children:[" : ",z.meta.actionable?"Yes":"No"]}),a.jsxs("span",{className:`rounded border px-1.5 py-0.5 text-[10px] ${z.meta.regionalNeed==="high"?"border-red-200 bg-red-50 text-red-700":z.meta.regionalNeed==="medium"?"border-amber-200 bg-amber-50 text-amber-700":"border-emerald-200 bg-emerald-50 text-emerald-700"}`,children:[" : ",y8[z.meta.regionalNeed]]}),a.jsxs("span",{className:"rounded border border-blue-200 bg-blue-50 px-1.5 py-0.5 text-[10px] text-blue-700",children:[": ",v8[z.evidence.type]]}),a.jsxs("span",{className:`rounded border px-1.5 py-0.5 text-[10px] ${n3e[z.evidence.confidence]}`,children:[": ",N8[z.evidence.confidence]]})]}),a.jsx("div",{className:"mt-1 text-[10px]",children:z.evidence.link?a.jsx("button",{type:"button",onClick:Ne=>{Ne.stopPropagation(),window.open(z.evidence.link,"_blank","noopener,noreferrer")},className:"rounded border border-blue-200 bg-white px-1.5 py-0.5 text-blue-700 hover:bg-blue-50",children:" "}):a.jsxs("span",{className:"text-amber-700",children:[" : ",z.evidence.missingReason??"  "]})})]},z.causeKey))})]}),$.isFetching&&H.length?a.jsx("div",{className:"absolute inset-0 rounded-xl bg-white/50 backdrop-blur-[1px] pointer-events-none"}):null]})]}),a.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-12 gap-3",children:[a.jsxs("div",{className:"xl:col-span-7 bg-white border border-slate-200 rounded-xl p-3.5 relative shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"text-sm font-semibold text-slate-700",children:"  (   )"}),a.jsx("div",{className:"text-[11px] text-slate-500",children:"      "})]}),!K.length&&w.isPending?a.jsx(F0,{}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"rounded-lg border border-slate-100 bg-slate-50/60 p-2",style:{height:320},children:a.jsx(Da,{width:"100%",height:"100%",children:a.jsxs(Bk,{data:K,margin:{top:10,right:8,left:-8,bottom:64},children:[a.jsx(Rs,{strokeDasharray:"2 3",vertical:!1,stroke:"#e2e8f0"}),a.jsx(oa,{dataKey:"areaLabel",tick:{fontSize:11,fill:"#64748b"},tickMargin:8,interval:0,angle:-30,textAnchor:"end",height:64,axisLine:!1,tickLine:!1}),a.jsx(Zr,{yAxisId:"left",tick:{fontSize:11,fill:"#64748b"},axisLine:!1,tickLine:!1}),a.jsx(Zr,{yAxisId:"right",orientation:"right",tick:{fontSize:11,fill:"#64748b"},axisLine:!1,tickLine:!1}),a.jsx(or,{formatter:(z,Ne)=>Ne==="deltaVsAvg"?`${z>0?"+":""}${Number(z).toFixed(1)}%p`:`${Math.round(Number(z)).toLocaleString()}`}),a.jsx(nc,{wrapperStyle:{fontSize:"12px"},formatter:z=>z==="count"?"":"   "}),a.jsxs(us,{yAxisId:"left",dataKey:"count",radius:[5,5,0,0],onClick:z=>C(Ne=>Ne===z.areaKey?null:z.areaKey),children:[K.map(z=>a.jsx(xo,{fill:j===z.areaKey?"#1d4ed8":z.highlightLevel==="critical"?"#ef4444":z.highlightLevel==="watch"?"#f59e0b":"#93c5fd"},z.areaKey)),a.jsx(ks,{dataKey:"count",position:"top",formatter:z=>`${Math.round(z)}`})]}),a.jsx(Ja,{yAxisId:"right",dataKey:"deltaVsAvg",stroke:"#1d4ed8",strokeWidth:2.2,dot:{r:3.2},children:a.jsx(ks,{dataKey:"deltaVsAvg",position:"top",formatter:z=>`${z>0?"+":""}${Number(z).toFixed(1)}`})})]})})}),a.jsx("div",{className:"mt-2 flex flex-wrap gap-1.5",children:K.slice(0,8).map(z=>a.jsxs("button",{onClick:()=>C(Ne=>Ne===z.areaKey?null:z.areaKey),className:`rounded-md border px-2 py-1 text-[11px] ${j===z.areaKey?"border-blue-300 bg-blue-50 text-blue-700":r3e[z.highlightLevel]}`,children:[z.areaLabel,"   ",z.deltaVsAvg>0?"+":"",z.deltaVsAvg.toFixed(1),"%p  ",lo(z.count)]},z.areaKey))}),j?a.jsx("div",{className:"mt-2",children:a.jsx("button",{onClick:()=>_e(),className:"h-8 rounded-md border border-blue-200 bg-blue-50 px-3 text-[12px] font-medium text-blue-700 hover:bg-blue-100",children:"  "})}):null]}),w.isFetching&&K.length?a.jsx("div",{className:"absolute inset-0 rounded-xl bg-white/50 backdrop-blur-[1px] pointer-events-none"}):null]}),a.jsxs("div",{ref:A,className:"xl:col-span-5 bg-white border border-slate-200 rounded-xl p-3.5 relative shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"text-sm font-semibold text-slate-700",children:"  "}),a.jsx("div",{className:"text-[11px] text-slate-500",children:le})]}),a.jsx("div",{className:"mb-2 inline-flex rounded-md border border-gray-200 bg-white p-0.5",children:["ratio","count"].map(z=>a.jsx("button",{onClick:()=>S(z),className:`px-2 py-1 text-[11px] rounded ${N===z?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"}`,children:fg[z]},z))}),a.jsx("div",{className:"mb-2 flex flex-wrap gap-1.5",children:ee.length?ee.map(z=>a.jsx("span",{className:`rounded border px-2 py-0.5 text-[11px] ${t3e[z.severity]}`,children:E3e(z)},`${z.type}-${z.days}`)):a.jsx("span",{className:"rounded border border-gray-200 bg-gray-50 px-2 py-0.5 text-[11px] text-gray-600",children:"   "})}),!V.length&&U.isPending?a.jsx(F0,{}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"rounded-lg border border-slate-100 bg-slate-50/60 p-2",style:{height:320},children:a.jsx(Da,{width:"100%",height:"100%",children:a.jsxs(RN,{data:V,margin:{top:8,right:12,left:0,bottom:8},children:[a.jsx(Rs,{strokeDasharray:"2 3",vertical:!1,stroke:"#e2e8f0"}),a.jsx(oa,{dataKey:"dateKey",tick:{fontSize:11,fill:"#64748b"},axisLine:!1,tickLine:!1}),a.jsx(Zr,{tick:{fontSize:11,fill:"#64748b"},domain:N==="ratio"?[0,100]:["auto","auto"],axisLine:!1,tickLine:!1}),a.jsx(or,{content:({active:z,payload:Ne,label:me})=>{if(!z||!Ne?.length)return null;const xe=Ne[0].payload;if(!xe)return null;const et=ee.some(pt=>pt.type==="increasing_streak"&&pt.metric===N),Fe=fg[N];return a.jsxs("div",{className:"rounded border border-gray-200 bg-white px-2 py-1.5 text-[11px] shadow-sm",children:[a.jsx("div",{className:"font-semibold text-gray-800",children:me}),a.jsxs("div",{className:"text-gray-700",children:[Fe," ",E8(N,xe.value)]}),a.jsxs("div",{className:"text-gray-600",children:[" ",lo(xe.count),"   ",zo(xe.ratio)]}),et?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"text-red-700",children:"n   "}),a.jsx("div",{className:"text-red-700",children:"   SLA   "})]}):null]})}}),a.jsx(nc,{wrapperStyle:{fontSize:"12px"},formatter:()=>fg[N]}),a.jsx(Ja,{type:"monotone",dataKey:"value",stroke:"#ef4444",strokeWidth:2.3,dot:{r:3.2},children:a.jsx(ks,{dataKey:"value",position:"top",formatter:z=>N==="count"?`${Math.round(Number(z)).toLocaleString()}`:`${Number(z).toFixed(1)}%`})})]})})}),a.jsx("div",{className:"mt-2 text-[11px] text-gray-600",children:ee.some(z=>z.type==="increasing_streak"&&z.metric===N)?"   SLA   ":"       "})]}),U.isFetching&&V.length?a.jsx("div",{className:"absolute inset-0 rounded-xl bg-white/50 backdrop-blur-[1px] pointer-events-none"}):null]})]}),a.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-3.5 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[a.jsx(fs,{className:"h-4 w-4 text-orange-500"}),a.jsx("span",{className:"text-sm font-semibold text-slate-700",children:" "})]}),!ae.length&&ue?a.jsx(F0,{}):a.jsx("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-2.5",children:ae.map(z=>a.jsxs("div",{className:"p-3 rounded-lg border border-orange-100 bg-gradient-to-br from-orange-50 to-amber-50",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("div",{className:"text-[13px] font-medium text-orange-900",children:z.action.title}),a.jsxs("div",{className:"text-[11px] text-orange-700",children:[" ",z.priorityScore]})]}),a.jsxs("div",{className:"mt-1 text-[12px] text-orange-800",children:[" : ",z.evidence.causeLabel,"   Stage: ",z.evidence.stageLabel,"   : ",z.evidence.areaLabel]}),a.jsxs("div",{className:"mt-1 text-[12px] text-orange-900",children:[" : ",z.action.steps.join("  ")]}),a.jsxs("div",{className:"mt-1 text-[12px] text-orange-800",children:[" : ",z.expectedEffect.qualitative]}),a.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[a.jsx("button",{onClick:()=>_e({stage:z.evidence.stageKey,causeKey:z.evidence.causeKey,area:z.evidence.areaKey}),className:"h-8 rounded-md bg-blue-600 px-3 text-[12px] font-medium text-white hover:bg-blue-700",children:"  "}),a.jsx("button",{onClick:()=>te(z),className:"h-8 rounded-md border border-orange-200 bg-white px-3 text-[12px] font-medium text-orange-700 hover:bg-orange-100",children:"  "})]})]},z.recId))})]}),m&&a.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-3.5 shadow-sm",children:[a.jsx("div",{className:"text-sm font-semibold text-slate-700 mb-2",children:"Stage  ( )"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:X.map(z=>a.jsxs("div",{className:"p-2.5 rounded-lg border border-slate-100 bg-slate-50",children:[a.jsx("div",{className:"text-[13px] font-medium text-slate-800",children:z.stage}),a.jsxs("div",{className:"text-[12px] text-slate-600",children:["  ",z.signal>0?"":""," (",z.signal>0?"+":"",z.signal,"%)   ",z.queue>0?"":""," (",z.queue>0?"+":"",z.queue,")"]}),a.jsx("div",{className:"text-[11px] text-slate-500",children:z.desc})]},z.stage))})]}),a.jsxs("div",{className:"text-[12px] text-slate-500 pb-2",children:[": ",e.label,"  ",r??" ","  ",XO[n],"  ",b8[s],ce?`   : ${ce.causeLabel}`:"",Z?`   : ${Z.areaLabel}`:""]})]})}const R1=1440*60*1e3,k1=48,w3e=3,Up={regionalSla:" SLA",regionalQueueRisk:" ",regionalRecontact:" ",regionalDataReadiness:" ",regionalGovernance:"/ ",regionalAdTransitionHotspot:"AD  ",regionalDxDelayHotspot:" ",regionalScreenToDxRate:" "},_f={regionalSla:"%",regionalQueueRisk:"",regionalRecontact:"%",regionalDataReadiness:"%",regionalGovernance:"%",regionalAdTransitionHotspot:"",regionalDxDelayHotspot:"",regionalScreenToDxRate:"%"},JO={regionalSla:!0,regionalQueueRisk:!1,regionalRecontact:!1,regionalDataReadiness:!0,regionalGovernance:!0,regionalAdTransitionHotspot:!1,regionalDxDelayHotspot:!1,regionalScreenToDxRate:!0},ZO={STAFFING:" ",RECONTACT_PUSH:" ",DATA_FIX:" ",PATHWAY_TUNE:" ",GOVERNANCE_FIX:" "},U0={TODO:"",IN_PROGRESS:"",DONE:"",BLOCKED:""},j8={TODO:"bg-gray-100 text-gray-700 border-gray-200",IN_PROGRESS:"bg-blue-100 text-blue-700 border-blue-200",DONE:"bg-green-100 text-green-700 border-green-200",BLOCKED:"bg-amber-100 text-amber-700 border-amber-200"},A3e={instruction:"",adjustment:"",confirmation:"",completion:" ",escalation:""},Gy={Stage1:"Stage1",Stage2:"Stage2",Stage3:"Stage3"},w8={contact:"Stage1",recontact:"Stage1",L2:"Stage2","3rd":"Stage3"},Hy={staff_shortage:"  ",contact_failure:" ",data_gap:" ",hospital_slot_delay:"  ",governance_gap:"  ",external_dependency:"  "},Su=["","","",""],_3e="regional_bottleneck_intervention_snapshots_v1",B0={regional:"",center:"",hospital:"",system:"",external:""},eR=e=>{let t=0;for(let n=0;n<e.length;n+=1)t=t*31+e.charCodeAt(n)>>>0;return t},Gl=(e,t,n)=>t+(n-t)*(eR(e)%1e3/1e3),Nf=e=>new Date(e).toLocaleString("ko-KR",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}),C3e=e=>new Date(e).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"}),T3e=e=>Math.max(0,Math.floor((Date.now()-Date.parse(e))/R1));function A8(e){return{regionalSla:Number(Gl(`${e}-sla`,72,96).toFixed(1)),regionalQueueRisk:Math.round(Gl(`${e}-queue`,110,540)),regionalRecontact:Number(Gl(`${e}-recontact`,7,26).toFixed(1)),regionalDataReadiness:Number(Gl(`${e}-readiness`,58,92).toFixed(1)),regionalGovernance:Number(Gl(`${e}-gov`,68,98).toFixed(1)),regionalAdTransitionHotspot:Number(Gl(`${e}-ad-risk`,22,81).toFixed(1)),regionalDxDelayHotspot:Number(Gl(`${e}-dx-delay`,9,52).toFixed(1)),regionalScreenToDxRate:Number(Gl(`${e}-conv`,34,84).toFixed(1))}}function _8(e,t){return e[t]}function Ky(e,t){return t===""?`${Math.round(e).toLocaleString()}`:t===""?`${e.toFixed(1)}`:t===""?`${e.toFixed(1)}`:`${e.toFixed(1)}%`}function O3e(e){return e==="regionalAdTransitionHotspot"?"RISK":e==="regionalScreenToDxRate"?"GAP":e==="regionalDxDelayHotspot"||e==="regionalRecontact"?"BOTTLENECK":"LOAD"}function U_(e){return _f[e]===""?"count":"ratio"}function R3e(e){if(!e)return null;try{const t=window.localStorage.getItem(_3e);return t?JSON.parse(t).find(s=>s.snapshotId===e)?.payload?.beforeSnapshot??null:null}catch{return null}}function C8(e){return e==="regionalGovernance"?"GOVERNANCE_FIX":e==="regionalDxDelayHotspot"?"STAFFING":e==="regionalAdTransitionHotspot"||e==="regionalScreenToDxRate"?"PATHWAY_TUNE":e==="regionalDataReadiness"?"DATA_FIX":e==="regionalQueueRisk"?"STAFFING":"RECONTACT_PUSH"}function k3e(e){if(e.selectedStage&&w8[e.selectedStage])return w8[e.selectedStage];const t=e.primaryDriverStage??"";return/3/.test(t)?"Stage3":/2|L2/i.test(t)?"Stage2":"Stage1"}function I3e(e){return e==="regionalDxDelayHotspot"?"hospital_slot_delay":e==="regionalGovernance"?"governance_gap":e==="regionalDataReadiness"?"data_gap":e==="regionalQueueRisk"?"staff_shortage":"contact_failure"}function D3e(e){return e==="regionalSla"?["SLA "," "]:e==="regionalQueueRisk"?[" ","SLA "]:e==="regionalDxDelayHotspot"?["  "," "]:e==="regionalAdTransitionHotspot"?["AD    ","SLA "]:e==="regionalScreenToDxRate"?["AD    ","SLA "]:e==="regionalDataReadiness"?[" ","SLA "]:["SLA "," "]}function P3e(e,t,n){const r=_8(t,e),s=t.regionalQueueRisk;if(!n)return{before:{value:r,backlog:s},after:void 0,delta:void 0};const i=_8(n,e),o=n.regionalQueueRisk;return{before:{value:r,backlog:s},after:{value:i,backlog:o},delta:{value:Number((i-r).toFixed(1)),backlog:Number((o-s).toFixed(1))}}}function M3e(e,t,n,r,s){const i=Date.parse(s),o=new Date(i).toISOString(),l=new Date(i+600*60*1e3).toISOString(),c=new Date(i+1320*60*1e3).toISOString(),u=new Date(i+2400*60*1e3).toISOString(),m=[{id:`${e}-log-instruction`,type:"instruction",actor:t,actorOrg:n,timestamp:o,referenceLink:"/regional/bottleneck",requiresFollowup:!0,followupDueAt:new Date(Date.parse(o)+k1*60*60*1e3).toISOString(),note:gt("       ")}];return r!=="TODO"&&m.push({id:`${e}-log-adjustment`,type:"adjustment",actor:Su[(eR(e)+1)%Su.length],actorOrg:n,timestamp:l,referenceLink:"/regional/ops",requiresFollowup:!0,followedUpAt:r==="BLOCKED"?void 0:c,followupDueAt:new Date(Date.parse(l)+k1*60*60*1e3).toISOString(),note:gt("      ")}),(r==="IN_PROGRESS"||r==="DONE")&&m.push({id:`${e}-log-confirm`,type:"confirmation",actor:Su[(eR(e)+2)%Su.length],actorOrg:n,timestamp:c,referenceLink:"https://hospital.example.local/sync",requiresFollowup:!1,note:gt("      ")}),r==="DONE"&&m.push({id:`${e}-log-complete`,type:"completion",actor:t,actorOrg:n,timestamp:u,referenceLink:"/regional/reports",requiresFollowup:!1,note:gt("      ")}),m}function B_(e){const t=T3e(e.createdAt),n=e.status!=="DONE"&&t>w3e,r=e.kpiComparison,s=!!r.after,i=r.before.value,o=r.after?.value,l=JO[e.kpiKey];let c=!1,u=!1,m=!1;if(s&&o!=null){const x=o-i;Math.abs(x)<.01?m=!0:l?(c=x>0,u=x<0):(c=x<0,u=x>0)}const p=!s&&e.status!=="DONE";return{elapsedDays:t,delayed:n,improved:c,worsened:u,noImprovement:m,missingAfter:p,needsAttention:n||m||u||p}}function L3e(e){return!e.requiresFollowup||e.followedUpAt?!1:Date.now()-Date.parse(e.timestamp)>k1*60*60*1e3}function tR(e){const t=A8(`${e.seed}-before`);e.beforeSnapshot&&(t[e.kpiKey]=Number(e.beforeSnapshot.kpiValue),t.regionalQueueRisk=Number(e.beforeSnapshot.backlogCount));const n=e.includeAfter?A8(`${e.seed}-after`):void 0,r=P3e(e.kpiKey,t,n),i=`[${Hy[e.causeKey]??e.causeKey}] ${e.areaLabel} ${Gy[e.stageKey]} `,o=$3(e.causeKey),l=e.ownerOrg??o?.ownerOrg??"regional",c=e.assignmentOverride?{assigneeId:e.assignmentOverride.assigneeId,assigneeRole:e.assignmentOverride.assigneeRole,defaultDueSlaHours:e.assignmentOverride.dueSlaHours}:F3({regionKey:e.regionId,areaKey:e.areaLabel,causeKey:e.causeKey,ownerOrg:l}),u=e.dueAt??new Date(Date.parse(e.createdAt)+c.defaultDueSlaHours*60*60*1e3).toISOString(),m={regionKey:e.regionId,period:e.period,kpiKey:e.kpiKey,areaKey:e.areaLabel,layer:O3e(e.kpiKey),selectedStage:e.stageKey==="Stage3"?"3rd":e.stageKey==="Stage2"?"L2":"contact",selectedCauseKey:e.causeKey,trendMetric:U_(e.kpiKey)},p={kpiKey:e.kpiKey,metricType:U_(e.kpiKey),targetDelta:U_(e.kpiKey)==="count"?-12:-2.5,evaluationWindowDays:7};return{id:e.id,title:i,stageKey:e.stageKey,areaKey:`${e.regionId}:${e.areaLabel}`,areaLabel:e.areaLabel,region:e.areaLabel,kpiKey:e.kpiKey,type:e.type,status:e.status,owner:e.owner,ownerOrg:l,createdAt:e.createdAt,dueAt:u,ruleId:e.ruleId,context:m,assignment:{ownerOrg:l,assigneeId:c.assigneeId,assigneeName:c.assigneeRole,dueAt:u,slaHours:c.defaultDueSlaHours,escalationPolicyId:`ESC-${e.causeKey.toUpperCase()}`},successMetric:{...p},createdFrom:{causeKey:e.causeKey,kpiKey:e.kpiKey,queryState:m,snapshot:{kpiValue:r.before.value,backlogCount:r.before.backlog,avgDwell:e.beforeSnapshot?Number((e.beforeSnapshot.avgDwellMin/60).toFixed(1)):Number(Gl(`${e.seed}-dwell`,24,96).toFixed(1)),deltaVsRegional:e.beforeSnapshot?Number((e.beforeSnapshot.stageBreakdown?.[0]?.deltaVsRegionalAvg??0).toFixed(1)):Number(Gl(`${e.seed}-delta`,-12,24).toFixed(1)),unit:_f[e.kpiKey]}},expectedEffectTags:D3e(e.kpiKey),logs:M3e(e.seed,e.owner,l,e.status,e.createdAt),kpiComparison:r,notes:e.notes??gt(`${e.areaLabel}  ${ZO[e.type]}  `),evidenceLinks:["/regional/bottleneck","https://hospital.example.local/sync"],beforeMetrics:t,afterMetrics:n,timeline:[{id:`${e.id}-timeline-created`,at:e.createdAt,actor:"",message:gt("  ")}]}}function T8(e,t,n){const r=t.length?t:[" "],s=Date.now();return[{kpiKey:"regionalQueueRisk",status:"IN_PROGRESS",stageKey:"Stage2",causeKey:"staff_shortage",type:"STAFFING",includeAfter:!0},{kpiKey:"regionalDxDelayHotspot",status:"TODO",stageKey:"Stage2",causeKey:"hospital_slot_delay",type:"PATHWAY_TUNE",includeAfter:!1},{kpiKey:"regionalRecontact",status:"DONE",stageKey:"Stage1",causeKey:"contact_failure",type:"RECONTACT_PUSH",includeAfter:!0},{kpiKey:"regionalDataReadiness",status:"BLOCKED",stageKey:"Stage1",causeKey:"data_gap",type:"DATA_FIX",includeAfter:!1},{kpiKey:"regionalAdTransitionHotspot",status:"IN_PROGRESS",stageKey:"Stage3",causeKey:"external_dependency",type:"PATHWAY_TUNE",includeAfter:!0}].map((o,l)=>{const c=new Date(s-R1*(l+1.4)).toISOString(),u=new Date(Date.parse(c)+R1*(2+l%3)).toISOString(),m=r[l%r.length];return tR({id:`INT-${l+1}`,regionId:e,areaLabel:m,period:n,kpiKey:o.kpiKey,type:o.type,status:o.status,owner:Su[l%Su.length],stageKey:o.stageKey,causeKey:o.causeKey,createdAt:c,dueAt:u,includeAfter:o.includeAfter,seed:`${e}-${m}-${o.kpiKey}-${l}`})})}function O8({value:e,unit:t,className:n}){const[r,s]=h.useState(e);return h.useEffect(()=>{const i=r,o=e,l=performance.now(),c=260;let u=0;const m=p=>{const g=Math.min(1,(p-l)/c),x=1-Math.pow(1-g,3);s(i+(o-i)*x),g<1&&(u=window.requestAnimationFrame(m))};return u=window.requestAnimationFrame(m),()=>window.cancelAnimationFrame(u)},[e]),a.jsx("span",{className:n,children:Ky(r,t)})}function $3e({region:e,districtOptions:t,selectedKpiKey:n,selectedRegionSgg:r,selectedRange:s,onSelectedKpiKeyChange:i,onSelectedRegionSggChange:o,onSelectedRangeChange:l,pendingDraft:c,onPendingDraftConsumed:u}){const[m,p]=h.useState(()=>T8(e.id,t,s)),[g,x]=h.useState(null),[y,v]=h.useState("ALL"),[N,S]=h.useState("ALL"),[j,C]=h.useState("ALL"),[_,A]=h.useState(!1),[T,R]=h.useState(!1),M=h.useRef(!1),P=h.useRef(m),$=h.useRef(null);h.useEffect(()=>{P.current=m},[m]),h.useEffect(()=>{let Z=!0;R(!1);const ie=T8(e.id,t,s);return(async()=>{try{const fe=await Dke({regionId:e.id,period:s});if(!Z)return;p(fe.items.length?fe.items:ie)}catch{if(!Z)return;p(ie)}finally{if(!Z)return;x(null),R(!0)}})(),()=>{Z=!1,$.current&&(window.clearTimeout($.current),$.current=null)}},[t,e.id,s]),h.useEffect(()=>{if(T)return $.current&&(window.clearTimeout($.current),$.current=null),$.current=window.setTimeout(()=>{Pke({regionId:e.id,period:s,items:P.current}).catch(()=>{})},400),()=>{$.current&&(window.clearTimeout($.current),$.current=null)}},[m,e.id,s,T]);const w=h.useCallback((Z,ie="manual")=>{if(Z.snapshotId){const Ne=P.current.find(me=>me.createdFrom.snapshotId&&me.createdFrom.snapshotId===Z.snapshotId);if(Ne){x(Ne.id);return}}const Se=new Date().toISOString(),fe=Z.region??r??t[0]??`${e.label} `,Te=Z.kpiKey,Pe=Z.type??C8(Te),oe=k3e(Z),le=Z.selectedCauseKey??I3e(Te),ye=`${e.id}-${fe}-${Te}-${Se}`,_e=R3e(Z.snapshotId),te=gt(ie==="url"?"      ":"   "),z=tR({id:`INT-${Date.now()}`,regionId:e.id,areaLabel:fe,period:Z.range??s,kpiKey:Te,type:Pe,status:"TODO",owner:Su[0],stageKey:oe,causeKey:le,createdAt:Se,dueAt:new Date(Date.parse(Se)+R1*3).toISOString(),includeAfter:!1,seed:ye,beforeSnapshot:_e,notes:gt(`${te}
[] ${Hy[le]??le}
[] ${Gy[oe]}
[] ${Z.selectedArea??fe}${Z.snapshotId?`
[] ${Z.snapshotId}`:""}`)});p(Ne=>[z,...Ne]),x(z.id)},[t,e.id,e.label,s,r]);h.useEffect(()=>{c&&(w(c,"manual"),u?.())},[w,u,c]),h.useEffect(()=>{if(!T||c||M.current)return;const Z=new URLSearchParams(window.location.search);if(Z.get("create")!=="1"||Z.get("source")!=="cause")return;const ie=Z.get("kpi");if(!ie)return;const Se=Z.get("range"),fe=Se==="monthly"?"month":Se==="quarterly"?"quarter":"week",Te={region:Z.get("area")??r??null,kpiKey:ie,range:fe,source:"cause",selectedStage:Z.get("stage")??null,selectedCauseKey:Z.get("cause"),selectedArea:Z.get("area"),primaryDriverStage:Z.get("stage")??void 0,snapshotId:Z.get("snapshotId")};w(Te,"url"),M.current=!0},[w,c,r,T]);const U=h.useMemo(()=>m.filter(Z=>!(r&&Z.areaLabel!==r||n&&Z.kpiKey!==n||y!=="ALL"&&Z.status!==y||N!=="ALL"&&Z.type!==N||j!=="ALL"&&Z.owner!==j)),[m,j,n,r,y,N]),X=h.useMemo(()=>Array.from(new Set([...Su,...m.map(Z=>Z.owner)])),[m]),I=h.useMemo(()=>U.length?g?U.find(Z=>Z.id===g)??U[0]:U[0]:null,[U,g]),G=h.useMemo(()=>U.filter(Z=>B_(Z).needsAttention).length,[U]),L=h.useMemo(()=>vke({regionKey:e.id,selectedRange:s,selectedRegionSgg:r,districtOptions:t,existingOpenInterventions:m.map(Z=>({kpiKey:Z.kpiKey,areaLabel:Z.areaLabel,causeKey:Z.createdFrom.causeKey,stageKey:Z.stageKey,period:Z.context?.period??s,status:Z.status}))}),[t,m,e.id,s,r]),H=h.useMemo(()=>L.filter(Z=>!Z.blockedByDuplicate).length,[L]),F=h.useMemo(()=>Array.from(new Map(L.map(Z=>[Z.ruleId,Z.ruleLabel])).entries()).map(([Z,ie])=>({ruleId:Z,ruleLabel:ie})),[L]),K=h.useMemo(()=>Array.from(new Map(L.map(Z=>[`${Z.ownerOrg}-${Z.assigneeId}`,`${B0[Z.ownerOrg]}  ${Z.assigneeRole}`])).values()),[L]),ne=Z=>{I&&p(ie=>ie.map(Se=>{if(Se.id!==I.id)return Se;const fe=new Date().toISOString(),Te={id:`${Se.id}-status-${Date.now()}`,type:Z==="DONE"?"completion":Z==="IN_PROGRESS"?"adjustment":"confirmation",actor:" ",actorOrg:"regional",timestamp:fe,referenceLink:"/regional/actions",requiresFollowup:Z!=="DONE",followupDueAt:Z!=="DONE"?new Date(Date.parse(fe)+k1*60*60*1e3).toISOString():void 0,note:gt(` ${U0[Z]} `)};return{...Se,status:Z,logs:[...Se.logs,Te],timeline:[...Se.timeline,{id:`${Se.id}-timeline-${Date.now()}`,at:fe,actor:" ",message:gt(` : ${U0[Z]}`)}]}}))},V=()=>{const Z=Date.now(),ie=L.filter(fe=>!fe.blockedByDuplicate);if(!ie.length){window.alert("    .   .");return}const Se=ie.map((fe,Te)=>{const Pe=F3({regionKey:e.id,areaKey:fe.regionLabel,causeKey:fe.causeKey,ownerOrg:fe.ownerOrg});return tR({id:`INT-AUTO-${Z+Te}`,regionId:e.id,areaLabel:fe.regionLabel,period:s,kpiKey:fe.kpiKey,type:C8(fe.kpiKey),status:"TODO",owner:Pe.assigneeRole,ownerOrg:fe.ownerOrg,stageKey:fe.stageKey,causeKey:fe.causeKey,createdAt:new Date(Z).toISOString(),dueAt:new Date(Z+fe.dueSlaHours*60*60*1e3).toISOString(),includeAfter:!1,ruleId:fe.ruleId,seed:`${e.id}-${fe.regionLabel}-auto-${Te}`,assignmentOverride:{assigneeId:fe.assigneeId,assigneeRole:fe.assigneeRole,dueSlaHours:fe.dueSlaHours},notes:gt(`    : ${fe.ruleLabel}
 : ${fe.dedupeKey}`)})});p(fe=>[...Se,...fe]),x(Se[0]?.id??null),A(!1)},ee=()=>{if(!I)return;const ie=$3(I.createdFrom.causeKey)?.escalationPath?.[0];if(!ie){window.alert("   .");return}const Se=new Date().toISOString(),fe=new Date(Date.parse(Se)+ie.slaHours*60*60*1e3).toISOString();p(Te=>Te.map(Pe=>{if(Pe.id!==I.id)return Pe;const oe={id:`${Pe.id}-escalation-${Date.now()}`,type:"escalation",actor:" ",actorOrg:"regional",timestamp:Se,referenceLink:"/regional/actions",requiresFollowup:!0,followupDueAt:fe,note:gt(`: ${ie.toOrgRole}(${ie.channel})   SLA ${ie.slaHours}h`)};return{...Pe,logs:[...Pe.logs,oe],timeline:[...Pe.timeline,{id:`${Pe.id}-timeline-escalation-${Date.now()}`,at:Se,actor:" ",message:gt(" ")}]}}))},ae=I?B_(I):null,ue=I?Hy[I.createdFrom.causeKey]??I.createdFrom.causeKey:"-",ce=h.useMemo(()=>{if(!I)return[];const Z=I.logs.find(fe=>fe.type==="instruction"),ie=I.logs.find(fe=>fe.type==="adjustment"),Se=I.logs.find(fe=>fe.type==="completion");return[{key:"created",label:"",at:I.createdAt,actor:"",done:!0},{key:"instruction",label:" ",at:Z?.timestamp,actor:Z?.actor,done:!!Z},{key:"progress",label:"",at:ie?.timestamp,actor:ie?.actor,done:I.status==="IN_PROGRESS"||I.status==="DONE"||I.status==="BLOCKED"},{key:"done",label:"",at:Se?.timestamp,actor:Se?.actor,done:I.status==="DONE"},{key:"blocked",label:"/",at:I.status==="BLOCKED"?I.logs[I.logs.length-1]?.timestamp:void 0,actor:I.status==="BLOCKED"?I.logs[I.logs.length-1]?.actor:void 0,done:I.status==="BLOCKED"||(ae?.delayed??!1)}]},[I,ae?.delayed]);return a.jsxs("div",{className:"h-full overflow-auto bg-gray-50 p-4 space-y-3",children:[a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-semibold text-gray-800",children:" "}),a.jsx("div",{className:"text-[12px] text-gray-500",children:"         "})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:"px-2.5 py-1 rounded border border-amber-200 bg-amber-50 text-amber-700 text-xs font-semibold",children:["  ",G,""]}),a.jsx("button",{type:"button",onClick:()=>A(!0),className:"px-3 py-1.5 rounded-md border border-purple-200 bg-purple-50 text-purple-700 text-sm font-medium hover:bg-purple-100",children:"    "})]})]}),a.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-6 gap-2",children:[a.jsxs("select",{value:s,onChange:Z=>l(Z.target.value),className:"px-2 py-1.5 border border-gray-300 rounded text-sm",children:[a.jsx("option",{value:"week",children:""}),a.jsx("option",{value:"month",children:""}),a.jsx("option",{value:"quarter",children:""})]}),a.jsxs("select",{value:r??"",onChange:Z=>o(Z.target.value||null),className:"px-2 py-1.5 border border-gray-300 rounded text-sm",children:[a.jsxs("option",{value:"",children:[e.label," "]}),t.map(Z=>a.jsx("option",{value:Z,children:Z},Z))]}),a.jsx("select",{value:n,onChange:Z=>i(Z.target.value),className:"px-2 py-1.5 border border-gray-300 rounded text-sm",children:Object.entries(Up).map(([Z,ie])=>a.jsx("option",{value:Z,children:ie},Z))}),a.jsxs("select",{value:y,onChange:Z=>v(Z.target.value),className:"px-2 py-1.5 border border-gray-300 rounded text-sm",children:[a.jsx("option",{value:"ALL",children:" "}),Object.entries(U0).map(([Z,ie])=>a.jsx("option",{value:Z,children:ie},Z))]}),a.jsxs("select",{value:N,onChange:Z=>S(Z.target.value),className:"px-2 py-1.5 border border-gray-300 rounded text-sm",children:[a.jsx("option",{value:"ALL",children:" "}),Object.entries(ZO).map(([Z,ie])=>a.jsx("option",{value:Z,children:ie},Z))]}),a.jsxs("select",{value:j,onChange:Z=>C(Z.target.value),className:"px-2 py-1.5 border border-gray-300 rounded text-sm",children:[a.jsx("option",{value:"ALL",children:" "}),X.map(Z=>a.jsx("option",{value:Z,children:Z},Z))]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-[420px_1fr] gap-3 min-h-[700px]",children:[a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3 overflow-y-auto",children:[a.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:" "}),a.jsxs("div",{className:"space-y-2",children:[U.map(Z=>{const ie=B_(Z),Se=Hy[Z.createdFrom.causeKey]??Z.createdFrom.causeKey,fe=Z.dueAt?Date.now()>Date.parse(Z.dueAt)&&Z.status!=="DONE":!1;return a.jsxs("button",{type:"button",onClick:()=>x(Z.id),className:`w-full text-left rounded-lg border p-2.5 transition ${I?.id===Z.id?"border-blue-300 bg-blue-50":ie.needsAttention?"border-rose-300 bg-rose-50 hover:bg-rose-100":"border-gray-200 bg-white hover:bg-gray-50"}`,children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsx("div",{className:"text-[13px] font-semibold text-gray-900 truncate",children:Z.title}),a.jsxs("div",{className:"mt-0.5 text-[11px] text-gray-600",children:[Z.areaLabel,"  ",Gy[Z.stageKey],"  ",ZO[Z.type]]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-1 shrink-0",children:[a.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${j8[Z.status]}`,children:U0[Z.status]}),(ie.delayed||fe)&&a.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded border border-rose-300 bg-rose-100 text-rose-700",children:" "})]})]}),a.jsxs("div",{className:"mt-2 rounded border border-gray-200 bg-white px-2 py-1.5",children:[a.jsx("div",{className:"text-[10px] text-gray-500",children:" "}),a.jsxs("div",{className:"text-[11px] text-gray-700 mt-0.5",children:[Se,"  ",Up[Z.createdFrom.kpiKey]]}),a.jsxs("div",{className:"text-[11px] text-gray-700",children:["  ",Ky(Z.createdFrom.snapshot.kpiValue,Z.createdFrom.snapshot.unit??_f[Z.kpiKey])]})]}),a.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:Z.expectedEffectTags.map(Te=>a.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded border border-emerald-200 bg-emerald-50 text-emerald-700",children:Te},`${Z.id}-${Te}`))}),a.jsxs("div",{className:"mt-2 flex items-center justify-between text-[11px]",children:[a.jsxs("span",{className:"text-gray-500",children:["T+",ie.elapsedDays,""]}),Z.ruleId?a.jsx("span",{className:"text-violet-600 font-medium",children:Z.ruleId}):a.jsx("span",{className:"text-gray-500",children:" "})]})]},Z.id)}),!U.length&&a.jsx("div",{className:"rounded border border-dashed border-gray-300 bg-gray-50 px-3 py-4 text-sm text-gray-500",children:"    ."})]})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3 overflow-y-auto",children:[!I&&a.jsx("div",{className:"text-sm text-gray-500",children:"   ."}),I&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2 flex-wrap",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-semibold text-gray-800",children:I.title}),a.jsxs("div",{className:"text-[12px] text-gray-500",children:[" ",I.areaLabel,"   ",I.owner,"   ",C3e(I.createdAt)]}),a.jsxs("div",{className:"text-[11px] text-gray-500",children:["  ",B0[I.ownerOrg??"regional"],"  "," ",I.assignment?.dueAt?Nf(I.assignment.dueAt):I.dueAt?Nf(I.dueAt):""]})]}),a.jsxs("div",{className:"flex items-center gap-1.5",children:[["TODO","IN_PROGRESS","DONE","BLOCKED"].map(Z=>a.jsx("button",{type:"button",onClick:()=>ne(Z),className:`px-2 py-1 rounded border text-[11px] font-medium ${I.status===Z?j8[Z]:"border-gray-200 text-gray-600 hover:bg-gray-50"}`,children:U0[Z]},Z)),a.jsx("button",{type:"button",onClick:ee,className:"px-2 py-1 rounded border border-rose-200 bg-rose-50 text-[11px] font-medium text-rose-700 hover:bg-rose-100",children:""})]})]}),a.jsxs("section",{className:"rounded-lg border border-gray-200 p-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"text-[13px] font-semibold text-gray-800",children:"1)  "}),(ae?.delayed??!1)&&a.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded border border-rose-300 bg-rose-100 text-rose-700",children:" 3  "})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2",children:ce.map(Z=>a.jsxs("div",{className:`rounded border px-2 py-2 ${Z.done?"border-blue-200 bg-blue-50":"border-gray-200 bg-gray-50"}`,children:[a.jsx("div",{className:"text-[11px] font-semibold text-gray-700",children:Z.label}),a.jsx("div",{className:"text-[10px] text-gray-500 mt-1",children:Z.at?Nf(Z.at):""}),a.jsx("div",{className:"text-[10px] text-gray-500",children:Z.actor??"-"})]},Z.key))})]}),a.jsxs("section",{className:"rounded-lg border border-gray-200 p-3",children:[a.jsx("div",{className:"text-[13px] font-semibold text-gray-800 mb-2",children:"2)  "}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-[12px]",children:[a.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-2 py-2",children:[a.jsx("div",{className:"text-gray-500",children:" "}),a.jsx("div",{className:"mt-1 font-medium text-gray-800",children:ue})]}),a.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-2 py-2",children:[a.jsx("div",{className:"text-gray-500",children:" Stage"}),a.jsx("div",{className:"mt-1 font-medium text-gray-800",children:Gy[I.stageKey]})]}),a.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-2 py-2",children:[a.jsx("div",{className:"text-gray-500",children:" "}),a.jsx("div",{className:"mt-1 font-medium text-gray-800",children:I.areaLabel})]}),a.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-2 py-2",children:[a.jsx("div",{className:"text-gray-500",children:"  KPI Snapshot"}),a.jsxs("div",{className:"mt-1 font-medium text-gray-800",children:[Up[I.createdFrom.kpiKey]," ",Ky(I.createdFrom.snapshot.kpiValue,I.createdFrom.snapshot.unit??_f[I.kpiKey])]}),a.jsxs("div",{className:"text-gray-600 mt-0.5",children:[" ",Math.round(I.createdFrom.snapshot.backlogCount).toLocaleString(),"    ",I.createdFrom.snapshot.avgDwell.toFixed(1),""]}),a.jsxs("div",{className:"text-gray-600",children:["   ",I.createdFrom.snapshot.deltaVsRegional!=null?`${I.createdFrom.snapshot.deltaVsRegional>0?"+":""}${I.createdFrom.snapshot.deltaVsRegional.toFixed(1)}`:"-"]})]}),a.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-2 py-2",children:[a.jsx("div",{className:"text-gray-500",children:"/"}),a.jsxs("div",{className:"mt-1 font-medium text-gray-800",children:[B0[I.assignment?.ownerOrg??I.ownerOrg??"regional"],"  ",I.assignment?.assigneeName??I.owner]}),a.jsxs("div",{className:"text-gray-600 mt-0.5",children:["SLA ",I.assignment?.slaHours??"-","h  "," ",I.assignment?.dueAt?Nf(I.assignment.dueAt):I.dueAt?Nf(I.dueAt):""]})]}),a.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-2 py-2",children:[a.jsx("div",{className:"text-gray-500",children:" "}),a.jsxs("div",{className:"mt-1 font-medium text-gray-800",children:[Up[I.successMetric?.kpiKey??I.kpiKey],"  ",I.successMetric?.metricType==="count"?"":""]}),a.jsxs("div",{className:"text-gray-600 mt-0.5",children:["  ",I.successMetric?.targetDelta!=null?`${I.successMetric.targetDelta>0?"+":""}${I.successMetric.targetDelta}`:"-","   ",I.successMetric?.evaluationWindowDays??7,""]})]})]})]}),a.jsxs("section",{className:"rounded-lg border border-gray-200 p-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"text-[13px] font-semibold text-gray-800",children:"3) KPI Before / After "}),a.jsx("span",{className:"text-[11px] text-gray-500",children:Up[I.kpiKey]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[a.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-2 py-2",children:[a.jsx("div",{className:"text-[11px] text-gray-500",children:"Before (  )"}),a.jsx("div",{className:"mt-1 text-[14px] font-semibold text-gray-900",children:a.jsx(O8,{value:I.kpiComparison.before.value,unit:_f[I.kpiKey]})}),a.jsxs("div",{className:"text-[11px] text-gray-600 mt-0.5",children:[" ",Math.round(I.kpiComparison.before.backlog).toLocaleString(),""]})]}),a.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-2 py-2",children:[a.jsx("div",{className:"text-[11px] text-gray-500",children:"After ()"}),I.kpiComparison.after?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"mt-1 text-[14px] font-semibold text-gray-900",children:a.jsx(O8,{value:I.kpiComparison.after.value,unit:_f[I.kpiKey]})}),a.jsxs("div",{className:"text-[11px] text-gray-600 mt-0.5",children:[" ",Math.round(I.kpiComparison.after.backlog).toLocaleString(),""]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"mt-1 text-[13px] font-semibold text-amber-700",children:" "}),a.jsxs("div",{className:"text-[11px] text-gray-600 mt-0.5",children:[" : ",I.owner," (  )"]})]})]})]}),I.kpiComparison.delta&&a.jsxs("div",{className:"mt-2 rounded border border-gray-200 bg-white px-2 py-2 text-[12px]",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"  "}),a.jsxs("span",{className:`font-semibold ${I.kpiComparison.delta.value===0?"text-gray-700":I.kpiComparison.delta.value>0?JO[I.kpiKey]?"text-emerald-700":"text-rose-700":JO[I.kpiKey]?"text-rose-700":"text-emerald-700"}`,children:[I.kpiComparison.delta.value>0?"+":"",Ky(I.kpiComparison.delta.value,_f[I.kpiKey])]})]}),a.jsxs("div",{className:"flex items-center justify-between mt-1",children:[a.jsx("span",{className:"text-gray-600",children:"  "}),a.jsxs("span",{className:`font-semibold ${I.kpiComparison.delta.backlog>0?"text-rose-700":"text-emerald-700"}`,children:[I.kpiComparison.delta.backlog>0?"+":"",Math.round(I.kpiComparison.delta.backlog).toLocaleString(),""]})]})]})]}),a.jsxs("section",{className:"rounded-lg border border-gray-200 p-3",children:[a.jsx("div",{className:"text-[13px] font-semibold text-gray-800 mb-2",children:"4)   &  "}),a.jsx("div",{className:"space-y-2",children:I.logs.map(Z=>{const ie=L3e(Z);return a.jsxs("div",{className:`rounded border px-2 py-2 ${ie?"border-rose-300 bg-rose-50":"border-gray-200 bg-gray-50"}`,children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("div",{className:"text-[12px] font-medium text-gray-800",children:[A3e[Z.type],"  ",Z.actor,Z.actorOrg?` (${B0[Z.actorOrg]})`:""]}),a.jsxs("div",{className:"flex items-center gap-1",children:[Z.requiresFollowup&&a.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${Z.followedUpAt?"border-emerald-300 bg-emerald-100 text-emerald-700":"border-amber-300 bg-amber-100 text-amber-700"}`,children:Z.followedUpAt?" ":" "}),ie&&a.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded border border-rose-300 bg-rose-100 text-rose-700",children:" 48 "})]})]}),a.jsx("div",{className:"text-[11px] text-gray-500 mt-0.5",children:Nf(Z.timestamp)}),a.jsx("div",{className:"text-[12px] text-gray-700 mt-1",children:Z.note}),Z.followupDueAt?a.jsxs("div",{className:"mt-1 text-[11px] text-gray-600",children:[" : ",Nf(Z.followupDueAt)]}):null,a.jsx("div",{className:"mt-1 text-[11px]",children:Z.referenceLink?a.jsx("a",{href:Z.referenceLink,target:"_blank",rel:"noreferrer",className:"text-blue-700 underline underline-offset-2",children:" "}):a.jsx("span",{className:"text-gray-500",children:"  "})})]},Z.id)})})]})]})]})]}),_&&a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/35",onClick:()=>A(!1)}),a.jsxs("div",{className:"relative w-full max-w-xl rounded-lg border border-gray-200 bg-white p-4 shadow-xl",children:[a.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"    "}),a.jsx("div",{className:"text-[12px] text-gray-500 mt-1",children:"       ."}),a.jsxs("div",{className:"mt-3 rounded border border-gray-200 bg-gray-50 p-3",children:[a.jsx("div",{className:"text-[12px] font-semibold text-gray-700 mb-1.5",children:"  "}),a.jsx("div",{className:"space-y-1 text-[12px] text-gray-700",children:F.map(Z=>a.jsxs("div",{children:["- ",Z.ruleLabel]},Z.ruleId))})]}),a.jsx("div",{className:"mt-2 rounded border border-violet-200 bg-violet-50 p-3",children:a.jsxs("div",{className:"text-[12px] font-semibold text-violet-800",children:["  : ",H," /   ",L.length,""]})}),a.jsxs("div",{className:"mt-2 rounded border border-gray-200 bg-gray-50 p-3",children:[a.jsx("div",{className:"text-[12px] font-semibold text-gray-700 mb-1.5",children:"   "}),a.jsx("div",{className:"space-y-1 text-[12px] text-gray-700",children:K.map(Z=>a.jsxs("div",{children:["- ",Z]},Z))})]}),a.jsxs("div",{className:"mt-2 rounded border border-gray-200 bg-white p-3 max-h-56 overflow-y-auto",children:[a.jsx("div",{className:"text-[12px] font-semibold text-gray-700 mb-1.5",children:"  "}),a.jsx("div",{className:"space-y-1.5",children:L.map(Z=>a.jsxs("div",{className:`rounded border px-2 py-1.5 text-[11px] ${Z.blockedByDuplicate?"border-rose-200 bg-rose-50 text-rose-700":"border-emerald-200 bg-emerald-50 text-emerald-700"}`,children:[a.jsxs("div",{className:"font-semibold",children:[Z.regionLabel,"  ",Up[Z.kpiKey],"  ",Z.stageKey]}),a.jsxs("div",{className:"mt-0.5",children:[Z.ruleLabel,"  ",B0[Z.ownerOrg],"  ",Z.assigneeRole,"  SLA ",Z.dueSlaHours,"h"]}),Z.blockedByDuplicate?a.jsxs("div",{className:"mt-0.5",children:[" : ",Z.blockedReason]}):null]},Z.previewId))})]}),a.jsxs("div",{className:"mt-4 flex items-center justify-end gap-2",children:[a.jsx("button",{type:"button",onClick:()=>A(!1),className:"px-3 py-1.5 rounded border border-gray-300 text-sm text-gray-700 hover:bg-gray-50",children:""}),a.jsx("button",{type:"button",onClick:V,disabled:H===0,className:`px-3 py-1.5 rounded text-sm font-semibold text-white ${H===0?"bg-gray-300 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700"}`,children:"  "})]})]})]})]})}const R8={regionalSla:" SLA",regionalQueueRisk:" ",regionalRecontact:" ",regionalDataReadiness:" ",regionalGovernance:"/ ",regionalAdTransitionHotspot:"AD  ",regionalDxDelayHotspot:" ",regionalScreenToDxRate:" "},F3e={week:"",month:"",quarter:""},Bp={queue:"  ",actions:"  ",pending:" ",bottleneckRelief:" ",effectRate:"   ",slaDelta:"SLA   "},U3e=e=>{let t=0;for(let n=0;n<e.length;n+=1)t=t*31+e.charCodeAt(n)>>>0;return t},As=(e,t,n)=>t+(n-t)*(U3e(e)%1e3/1e3);function G_(e){return`${e.toFixed(1)}%`}function gy(e){return`${Math.round(e).toLocaleString()}`}function B3e(e,t){return`${e>0?"+":""}${e.toFixed(1)}%p`}function H_(e,t){return t==="%"?`${e.toFixed(1)}%`:`${Math.round(e).toLocaleString()}`}function G3e(){const t=window.location.pathname.indexOf("/regional/");return t<0?"":window.location.pathname.slice(0,t)}function xy(e,t){const n=new URLSearchParams(t).toString();return`${G3e()}${e}${n?`?${n}`:""}`}function Gp(e,t,n){const r={scope:`${e} `,period:`${t} `},s={queue:{definition:"         ",threshold:" 7   ",interpretation:"    ",nextAction:"      "},actions:{definition:"      ",threshold:" 80%     ",interpretation:"    ",nextAction:"    "},pending:{definition:"       ",threshold:"T+3    ",interpretation:"    ",nextAction:"    "},bottleneckRelief:{definition:"     ",threshold:"(  -  )/   100",interpretation:"    ",nextAction:"     "},effectRate:{definition:"After         ",threshold:"   48  After ",interpretation:"    ",nextAction:"     "},slaDelta:{definition:"  SLA  (  )",threshold:"  ",interpretation:"   ,  ",nextAction:"     "}};return{definition:s[n].definition,scope:r.scope,period:r.period,threshold:s[n].threshold,interpretation:s[n].interpretation,nextAction:s[n].nextAction,actionTab:"reports"}}function H3e({region:e,districtOptions:t,selectedKpiKey:n,selectedRegionSgg:r,selectedRange:s}){const[i,o]=h.useState(r?"sigungu":"regional"),[l,c]=h.useState(r??t[0]??""),[u,m]=h.useState(n),[p,g]=h.useState(s),[x,y]=h.useState("pdf"),v=i==="sigungu"?l||t[0]||e.label:"",N=i==="sigungu"?v:`${e.label}  `,S=F3e[p],j=`${e.id}-${i}-${v||"all"}-${u}-${p}`,C=h.useMemo(()=>{const K=Math.round(As(`${j}-queue-before`,250,760)),ne=Math.round(As(`${j}-queue-after`,140,620)),V=Math.round(As(`${j}-actions`,14,64)),ee=Math.round(As(`${j}-pending`,4,28)),ae=Math.max(0,Math.min(V,Math.round(V*As(`${j}-effect-ratio`,.42,.89)))),ue=(K-ne)/Math.max(K,1)*100,ce=Number(As(`${j}-sla-prev`,11,24).toFixed(1)),Z=Number((ce+As(`${j}-sla-delta`,-6.4,4.2)).toFixed(1)),ie=Number((Z-ce).toFixed(1));return{queueBefore:K,queueAfter:ne,queue:ne,actions:V,pending:ee,bottleneckRelief:Number(Math.max(-20,Math.min(95,ue)).toFixed(1)),effectRate:Number((ae/Math.max(V,1)*100).toFixed(1)),slaPrev:ce,slaNow:Z,slaDelta:ie}},[j]),_=h.useMemo(()=>{const K=[{key:"contact_failure",label:" ",count:Math.round(As(`${j}-cause-contact`,80,280))},{key:"staff_shortage",label:"  ",count:Math.round(As(`${j}-cause-staff`,60,260))},{key:"hospital_slot_delay",label:"  ",count:Math.round(As(`${j}-cause-hospital`,50,220))},{key:"data_gap",label:" ",count:Math.round(As(`${j}-cause-data`,40,170))},{key:"external_dependency",label:"  ",count:Math.round(As(`${j}-cause-external`,20,130))}],ne=K.reduce((V,ee)=>V+ee.count,0);return K.sort((V,ee)=>ee.count-V.count).slice(0,3).map(V=>({...V,ratio:Number((V.count/Math.max(ne,1)*100).toFixed(1))}))},[j]),A=h.useMemo(()=>[{title:"  ",owner:" ",stage:"Stage1",count:Math.round(As(`${j}-itv-1`,2,8)),status:""},{title:"   ",owner:"  ",stage:"Stage2",count:Math.round(As(`${j}-itv-2`,1,6)),status:""},{title:"   ",owner:" ",stage:"Stage3",count:Math.round(As(`${j}-itv-3`,1,5)),status:""}],[j]),T=h.useMemo(()=>[{label:"SLA ",before:C.slaPrev,after:C.slaNow,unit:"%",higherBetter:!1},{label:"  ",before:C.queueBefore,after:C.queueAfter,unit:"",higherBetter:!1},{label:"   ",before:Number(Math.max(15,C.effectRate-As(`${j}-effect-before`,6,18)).toFixed(1)),after:C.effectRate,unit:"%",higherBetter:!0}].map(ne=>({...ne,delta:Number((ne.after-ne.before).toFixed(1))})),[C.effectRate,C.queueAfter,C.queueBefore,C.slaNow,C.slaPrev,j]),R=h.useMemo(()=>[{title:"Stage2      ",risk:"",recommendation:"    "},{title:"After     ",risk:"",recommendation:"     "},{title:"    ",risk:"",recommendation:"   "}],[]),M=go({queryKey:["regional-report-summary",e.id,i,v,u,p],queryFn:async()=>Mke({regionId:e.id,scopeMode:i,sgg:v,kpi:u,period:p}),staleTime:3e4,placeholderData:K=>K}),P=M.data?.metrics??C,$=M.data?.causeTop3??_,w=M.data?.interventionSummary??A,U=M.data?.kpiBeforeAfter??T,X=M.data?.unresolvedTasks??R,I=h.useMemo(()=>{const K={kpi:u==="all"?n:u,range:p==="week"?"weekly":p==="month"?"monthly":"quarterly",...i==="sigungu"?{sgg:v}:{}};return{bottleneck:xy("/regional/bottleneck",K),actions:xy("/regional/actions",K),ops:xy("/regional/ops",K),reports:xy("/regional/reports",K)}},[v,u,p,i,n]),G=h.useMemo(()=>{const K=$[0],ne=w.reduce((ce,Z)=>ce+Z.count,0),V=P.slaDelta>0?`${P.slaDelta.toFixed(1)}%p `:`${Math.abs(P.slaDelta).toFixed(1)}%p `,ee=`${S} ${N} ${K?.label??" "}    ,    ${$.map(ce=>ce.label).join(", ")}  .`,ae=`   ${ne} ,  ${w[0].title}  .`,ue=`SLA     ${V},   ${X.length}     .`;return{line1:ee,line2:ae,line3:ue}},[$,w,P.slaDelta,S,N,X.length]),L=h.useMemo(()=>[{id:1,title:" ",evidence:I.ops},{id:2,title:"   Top3",evidence:I.bottleneck},{id:3,title:"   ",evidence:I.actions},{id:4,title:" / KPI ",evidence:I.actions},{id:5,title:"     ",evidence:I.reports}],[I.actions,I.bottleneck,I.ops,I.reports]),H={pdf:"PDF",ppt:"PPT",csv:"CSV"},F=`${H[x]}   ${N}  ${u==="all"?"KPI ":R8[u]}  ${S}`;return a.jsxs("div",{className:"h-full overflow-auto bg-gray-50 p-4 space-y-3",children:[a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-start justify-between gap-3 flex-wrap",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-semibold text-gray-800",children:""}),a.jsx("div",{className:"text-[12px] text-gray-500 mt-0.5",children:"  +      "})]}),a.jsx("div",{className:"flex items-center gap-2",children:["pdf","ppt","csv"].map(K=>a.jsx("button",{type:"button",onClick:()=>y(K),className:`px-3 py-1.5 rounded border text-sm ${x===K?"border-blue-600 bg-blue-600 text-white":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:H[K]},K))})]}),a.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-4 gap-2",children:[a.jsxs("select",{value:i,onChange:K=>o(K.target.value),className:"px-2 py-1.5 border border-gray-300 rounded text-sm",children:[a.jsx("option",{value:"regional",children:" "}),a.jsx("option",{value:"sigungu",children:" "})]}),a.jsx("select",{value:v,onChange:K=>c(K.target.value),disabled:i!=="sigungu",className:"px-2 py-1.5 border border-gray-300 rounded text-sm disabled:bg-gray-100 disabled:text-gray-400",children:t.map(K=>a.jsx("option",{value:K,children:K},K))}),a.jsxs("select",{value:u,onChange:K=>m(K.target.value),className:"px-2 py-1.5 border border-gray-300 rounded text-sm",children:[a.jsx("option",{value:"all",children:"KPI "}),Object.entries(R8).map(([K,ne])=>a.jsx("option",{value:K,children:ne},K))]}),a.jsxs("select",{value:p,onChange:K=>g(K.target.value),className:"px-2 py-1.5 border border-gray-300 rounded text-sm",children:[a.jsx("option",{value:"week",children:""}),a.jsx("option",{value:"month",children:""}),a.jsx("option",{value:"quarter",children:""})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-3",children:[a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"text-[12px] text-gray-500",children:Bp.queue}),a.jsx(jf,{help:Gp(N,S,"queue")})]}),a.jsx("div",{className:"text-xl font-bold text-gray-900 mt-1",children:gy(P.queue)}),a.jsx("a",{className:"text-[11px] text-blue-700 underline underline-offset-2",href:I.bottleneck,children:"  "})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"text-[12px] text-gray-500",children:Bp.actions}),a.jsx(jf,{help:Gp(N,S,"actions")})]}),a.jsx("div",{className:"text-xl font-bold text-gray-900 mt-1",children:gy(P.actions)}),a.jsx("a",{className:"text-[11px] text-blue-700 underline underline-offset-2",href:I.actions,children:"  "})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"text-[12px] text-gray-500",children:Bp.pending}),a.jsx(jf,{help:Gp(N,S,"pending")})]}),a.jsx("div",{className:"text-xl font-bold text-gray-900 mt-1",children:gy(P.pending)}),a.jsx("a",{className:"text-[11px] text-blue-700 underline underline-offset-2",href:I.actions,children:"  "})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"text-[12px] text-gray-500",children:Bp.bottleneckRelief}),a.jsx(jf,{help:Gp(N,S,"bottleneckRelief")})]}),a.jsx("div",{className:`text-xl font-bold mt-1 ${P.bottleneckRelief>=0?"text-emerald-700":"text-rose-700"}`,children:G_(P.bottleneckRelief)}),a.jsx("a",{className:"text-[11px] text-blue-700 underline underline-offset-2",href:I.bottleneck,children:"  "})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"text-[12px] text-gray-500",children:Bp.effectRate}),a.jsx(jf,{help:Gp(N,S,"effectRate")})]}),a.jsx("div",{className:"text-xl font-bold text-gray-900 mt-1",children:G_(P.effectRate)}),a.jsx("a",{className:"text-[11px] text-blue-700 underline underline-offset-2",href:I.actions,children:"  "})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"text-[12px] text-gray-500",children:Bp.slaDelta}),a.jsx(jf,{help:Gp(N,S,"slaDelta")})]}),a.jsx("div",{className:`text-xl font-bold mt-1 ${P.slaDelta<=0?"text-emerald-700":"text-rose-700"}`,children:B3e(P.slaDelta)}),a.jsx("a",{className:"text-[11px] text-blue-700 underline underline-offset-2",href:I.ops,children:"  "})]})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm font-semibold text-gray-700",children:"  "}),a.jsxs("div",{className:"mt-2 space-y-2",children:[a.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-3 py-2 text-[13px] text-gray-800",children:[G.line1,a.jsx("a",{className:"ml-2 text-blue-700 underline underline-offset-2 text-[12px]",href:I.bottleneck,children:"[]"})]}),a.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-3 py-2 text-[13px] text-gray-800",children:[G.line2,a.jsx("a",{className:"ml-2 text-blue-700 underline underline-offset-2 text-[12px]",href:I.actions,children:"[]"})]}),a.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-3 py-2 text-[13px] text-gray-800",children:[G.line3,a.jsx("a",{className:"ml-2 text-blue-700 underline underline-offset-2 text-[12px]",href:I.reports,children:"[]"})]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:F}),a.jsx("div",{className:"space-y-2",children:L.map(K=>a.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-3 py-2 flex items-center justify-between gap-2",children:[a.jsxs("div",{className:"text-[13px] text-gray-800",children:[K.id,". ",K.title]}),a.jsx("a",{href:K.evidence,className:"text-[11px] text-blue-700 underline underline-offset-2",children:" "})]},K.id))})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:[a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"   Top3"}),a.jsx("div",{className:"space-y-2",children:$.map((K,ne)=>a.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-3 py-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"text-[13px] font-medium text-gray-800",children:[ne+1,". ",K.label]}),a.jsxs("div",{className:"text-[12px] font-semibold text-gray-900",children:[gy(K.count),"  ",G_(K.ratio)]})]}),a.jsx("a",{href:I.bottleneck,className:"text-[11px] text-blue-700 underline underline-offset-2",children:"  "})]},K.key))})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"   "}),a.jsx("div",{className:"space-y-2",children:w.map(K=>a.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-3 py-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"text-[13px] font-medium text-gray-800",children:K.title}),a.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${K.status===""?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-blue-200 bg-blue-50 text-blue-700"}`,children:K.status})]}),a.jsxs("div",{className:"text-[12px] text-gray-600 mt-1",children:[K.stage,"  ",K.owner,"  ",K.count,""]}),a.jsx("a",{href:I.actions,className:"text-[11px] text-blue-700 underline underline-offset-2",children:"  "})]},K.title))})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:[a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:" / KPI "}),a.jsxs("table",{className:"w-full text-[12px]",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-200",children:[a.jsx("th",{className:"text-left py-1",children:""}),a.jsx("th",{className:"text-right py-1",children:"Before"}),a.jsx("th",{className:"text-right py-1",children:"After"}),a.jsx("th",{className:"text-right py-1",children:""}),a.jsx("th",{className:"text-right py-1",children:""})]})}),a.jsx("tbody",{children:U.map(K=>{const ne=K.higherBetter?K.delta>0:K.delta<0;return a.jsxs("tr",{className:"border-b border-gray-100 last:border-b-0",children:[a.jsx("td",{className:"py-1 text-gray-700",children:K.label}),a.jsx("td",{className:"py-1 text-right text-gray-600",children:H_(K.before,K.unit)}),a.jsx("td",{className:"py-1 text-right text-gray-600",children:H_(K.after,K.unit)}),a.jsxs("td",{className:`py-1 text-right font-semibold ${ne?"text-emerald-700":K.delta===0?"text-gray-700":"text-rose-700"}`,children:[K.delta>0?"+":"",H_(K.delta,K.unit)]}),a.jsx("td",{className:"py-1 text-right",children:a.jsx("a",{href:I.actions,className:"text-blue-700 underline underline-offset-2",children:""})})]},K.label)})})]})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"     "}),a.jsx("div",{className:"space-y-2",children:X.map(K=>a.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-3 py-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"text-[13px] font-medium text-gray-800",children:K.title}),a.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${K.risk===""?"border-rose-300 bg-rose-100 text-rose-700":"border-amber-300 bg-amber-100 text-amber-700"}`,children:K.risk})]}),a.jsxs("div",{className:"text-[12px] text-gray-600 mt-1",children:[": ",K.recommendation]}),a.jsx("a",{href:I.actions,className:"text-[11px] text-blue-700 underline underline-offset-2",children:"  "})]},K.title))}),a.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[a.jsxs("button",{className:"px-3 py-1.5 rounded border border-gray-300 text-sm text-gray-700 hover:bg-gray-50",children:[S,"  PDF"]}),a.jsxs("button",{className:"px-3 py-1.5 rounded border border-gray-300 text-sm text-gray-700 hover:bg-gray-50",children:[S,"  PPT"]}),a.jsx("button",{className:"px-3 py-1.5 rounded border border-gray-300 text-sm text-gray-700 hover:bg-gray-50",children:"KPI CSV"})]})]})]})]})}const K3e={overview:"/regional/ops",cause:"/regional/bottleneck",interventions:"/regional/actions",reports:"/regional/reports",settings:"/regional/settings"};function z3e(e){if(!e.trim())return"/";let t=e.trim();return t.startsWith("/")||(t=`/${t}`),t.endsWith("/")||(t=`${t}/`),t}const tm=z3e("/neuro-shield/");function RW(e){if(tm==="/")return e;if(e===tm.slice(0,-1))return"/";if(!e.startsWith(tm))return e;const t=e.slice(tm.length);return t.startsWith("/")?t:`/${t}`}function q3e(e){if(tm==="/")return e;const t=e.startsWith("/")?e.slice(1):e;return`${tm}${t}`}const V3e={week:"weekly",month:"monthly",quarter:"quarterly"},k8={weekly:"week",monthly:"month",quarterly:"quarter"};function W3e(e){return V3e[e]}function Y3e(e){return e&&e in k8?k8[e]:"week"}function Q3e(e){const t=RW(e);if(t==="/"||t==="/regional/overview"||t==="/regional/ops")return"overview";const r=t.match(/^\/regional\/([^/?#]+)/)?.[1];return r?r==="bottleneck"||r==="cause"?"cause":r==="actions"||r==="interventions"?"interventions":r==="reports"?"reports":r==="settings"?"settings":"overview":"overview"}function X3e(e){const t=RW(e);return t==="/"||t.startsWith("/regional/")}function by(e,t,n){const r=new URLSearchParams,s=q3e(K3e[e]);t.selectedKpiKey!=="regionalSla"&&r.set("kpi",t.selectedKpiKey),t.selectedRange!=="week"&&r.set("range",W3e(t.selectedRange)),t.selectedRegionSgg&&r.set("sgg",t.selectedRegionSgg),n&&Object.entries(n).forEach(([c,u])=>{u==null||u===""||r.set(c,u)});const i=!!(n&&Object.values(n).some(c=>c!=null&&c!==""));if(e==="overview"&&t.selectedKpiKey==="regionalSla"&&t.selectedRange==="week"&&!t.selectedRegionSgg&&!i)return s;const l=r.toString();return l?`${s}?${l}`:s}function J3e(e,t){const n=new URLSearchParams(e),r=n.get("kpi")??t;return{selectedKpiKey:r==="regionalSla"||r==="regionalQueueRisk"||r==="regionalRecontact"||r==="regionalDataReadiness"||r==="regionalGovernance"||r==="regionalAdTransitionHotspot"||r==="regionalDxDelayHotspot"||r==="regionalScreenToDxRate"?r:t,selectedRange:Y3e(n.get("range")),selectedRegionSgg:n.get("sgg")}}const K_="regionalSla",I8=[{id:"overview",label:" ",icon:Nx},{id:"cause",label:"  ",icon:fs},{id:"interventions",label:" ",icon:pR},{id:"reports",label:"",icon:Bf},{id:"settings",label:"",icon:Ex}],D8={seoul:["","","","","","","","","","","","","","","","","","","","","","","","",""],busan:["","","","","","","","","","","","","","","",""],daegu:["","","","","","","",""],incheon:["","","","","","","","","",""],gwangju:["","","","",""],daejeon:["","","","",""],ulsan:["","","","",""],sejong:[""],gyeonggi:["","","","","","","","","","","","","","","","","","","",""],gangwon:["","","","","","","","","",""],chungbuk:["","","","","","","","","",""],chungnam:["","","","","","","","","",""],jeonbuk:["","","","","","","","","",""],jeonnam:["","","","","","","","","",""],gyeongbuk:["","","","","","","","","",""],gyeongnam:["","","","","","","","","",""],jeju:["",""]};function Z3e(e){return e==="month"?"month":e==="quarter"?"quarter":"week"}function P8(e,t){return e.selectedKpiKey===t.selectedKpiKey&&e.selectedRegionSgg===t.selectedRegionSgg&&e.selectedRange===t.selectedRange}function z_(e){const t=Q3e(window.location.pathname),n=J3e(window.location.search,e);return{page:t,selection:n}}function e5e({userName:e="",centerName:t=" ",onLogout:n}){const r=z2e(t),[s,i]=h.useState(r.id),[o,l]=h.useState(!0),[c,u]=h.useState(!1),m=h.useMemo(()=>z_(K_),[]),[p,g]=h.useState(m.page),[x,y]=h.useState(m.selection),[v,N]=h.useState(null),S=sd.find(P=>P.id===s)??sd[0],j=D8[s]??D8.seoul,C=h.useCallback((P,$,w="push",U)=>{const X=by(P,$,U),I=new URL(X,window.location.origin),G=new URL(window.location.href);P==="overview"&&["drill","view"].forEach(H=>{if(!I.searchParams.has(H)&&G.searchParams.has(H)){const F=G.searchParams.get(H);F&&I.searchParams.set(H,F)}}),P==="cause"&&["stageImpact","stage","cause","area","period"].forEach(H=>{if(!I.searchParams.has(H)&&G.searchParams.has(H)){const F=G.searchParams.get(H);F&&I.searchParams.set(H,F)}}),!(I.pathname===G.pathname&&I.search===G.search&&I.hash===G.hash)&&(w==="replace"?window.history.replaceState({},"",`${I.pathname}${I.search}${I.hash}`):window.history.pushState({},"",`${I.pathname}${I.search}${I.hash}`))},[]);h.useEffect(()=>{const{page:P,selection:$}=z_(K_),w=window.location.pathname.replace(/\/+$/,""),U=/\/regional\/overview$/i.test(w);if(!X3e(window.location.pathname)){const I={selectedKpiKey:$.selectedKpiKey,selectedRegionSgg:$.selectedRegionSgg,selectedRange:$.selectedRange};g("overview"),y(I),C("overview",I,"replace");return}if(P==="overview"&&U){const I=by("overview",$);window.history.replaceState({},"",I)}g(P),y($);const X=()=>{const I=z_(K_),G=window.location.pathname.replace(/\/+$/,""),L=/\/regional\/overview$/i.test(G);if(I.page==="overview"&&L){const H=by("overview",I.selection);window.history.replaceState({},"",H)}g(I.page),y(I.selection)};return window.addEventListener("popstate",X),()=>window.removeEventListener("popstate",X)},[C]),h.useEffect(()=>{if(x.selectedRegionSgg&&!j.includes(x.selectedRegionSgg)){const P={...x,selectedRegionSgg:null};y(P),C(p,P,"replace")}},[p,j,x,C]);const _=h.useCallback((P,$,w)=>{g(P),y(U=>{const X={...U,...$};return P8(U,X)?(C(P,X,"replace",w),U):(C(P,X,"push",w),X)})},[C]),A=h.useCallback(P=>{y($=>{const w={...$,...P};return P8($,w)?$:(C(p,w,"replace"),w)})},[p,C]),T=h.useCallback(P=>{if(N(P),P.source==="top5")return;const $={selectedKpiKey:P.kpiKey,selectedRegionSgg:P.region,selectedRange:P.range},w={create:"1",source:P.source??"overview"};if(P.primaryDriverStage&&(w.primaryDriverStage=P.primaryDriverStage),P.selectedStage&&(w.stage=P.selectedStage),P.selectedCauseKey&&(w.cause=P.selectedCauseKey),P.selectedArea&&(w.area=P.selectedArea),P.snapshotId&&(w.snapshotId=P.snapshotId),P.source==="cause"){g("interventions"),y($);const U=by("interventions",$,w),X=new URL(U,window.location.origin);X.pathname=X.pathname.replace(/\/regional\/(?:actions|interventions)$/i,"/regional/interventions/new");const I=new URL(window.location.href);(X.pathname!==I.pathname||X.search!==I.search||X.hash!==I.hash)&&window.history.pushState({},"",`${X.pathname}${X.search}${X.hash}`);return}_("interventions",$,w)},[_]),R=()=>{switch(p){case"overview":return a.jsx(Jke,{region:S,selectedKpiKey:x.selectedKpiKey,selectedRegionSgg:x.selectedRegionSgg,selectedRange:Z3e(x.selectedRange),onSelectedKpiKeyChange:P=>A({selectedKpiKey:P}),onSelectedRegionSggChange:P=>A({selectedRegionSgg:P}),onSelectedRangeChange:P=>A({selectedRange:P}),onCreateIntervention:({kpi:P,sgg:$,range:w,source:U,primaryDriverStage:X})=>T({kpiKey:P,region:$,range:w,source:U,primaryDriverStage:X}),onNavigateModule:P=>_(P)});case"cause":return a.jsx(j3e,{region:S,districtOptions:j,selectedKpiKey:x.selectedKpiKey,selectedRegionSgg:x.selectedRegionSgg,selectedRange:x.selectedRange,onSelectedKpiKeyChange:P=>A({selectedKpiKey:P}),onSelectedRegionSggChange:P=>A({selectedRegionSgg:P}),onSelectedRangeChange:P=>A({selectedRange:P}),onCreateIntervention:P=>T(P)});case"interventions":return a.jsx($3e,{region:S,districtOptions:j,selectedKpiKey:x.selectedKpiKey,selectedRegionSgg:x.selectedRegionSgg,selectedRange:x.selectedRange,onSelectedKpiKeyChange:P=>A({selectedKpiKey:P}),onSelectedRegionSggChange:P=>A({selectedRegionSgg:P}),onSelectedRangeChange:P=>A({selectedRange:P}),pendingDraft:v,onPendingDraftConsumed:()=>N(null)});case"reports":return a.jsx(H3e,{region:S,districtOptions:j,selectedKpiKey:x.selectedKpiKey,selectedRegionSgg:x.selectedRegionSgg,selectedRange:x.selectedRange});case"settings":return a.jsx(Zke,{regionCode:S.id,regionLabel:S.label});default:return null}},M=()=>{window.confirm(" ?")&&n&&n()};return a.jsxs("div",{className:"flex h-[100dvh] min-h-0 overflow-hidden bg-gray-50",children:[a.jsxs("aside",{className:`${o?"w-64":"w-20"} bg-slate-800 border-r border-slate-700 transition-all duration-300 flex flex-col shrink-0`,children:[a.jsx("div",{className:"h-16 flex items-center justify-between px-4 border-b border-slate-700",children:o?a.jsxs(a.Fragment,{children:[a.jsx(vR,{size:36,showText:!0,subtitle:`${S.label}  `,variant:"dark"}),a.jsx(Nt,{variant:"ghost",size:"sm",onClick:()=>l(!1),className:"h-8 w-8 p-0 text-slate-400 hover:text-white hover:bg-slate-700 shrink-0",children:a.jsx(Mu,{className:"h-4 w-4"})})]}):a.jsx(Nt,{variant:"ghost",size:"sm",onClick:()=>l(!0),className:"h-8 w-8 p-0 mx-auto text-slate-400 hover:text-white hover:bg-slate-700",children:a.jsx(hR,{className:"h-4 w-4"})})}),o&&a.jsxs("div",{className:"px-4 py-3 border-b border-slate-700",children:[a.jsx("label",{className:"text-[10px] text-slate-400 block mb-1",children:" "}),a.jsx("select",{value:s,onChange:P=>{i(P.target.value),A({selectedRegionSgg:null})},className:"w-full bg-slate-700 border border-slate-600 text-slate-200 rounded px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500",children:sd.map(P=>a.jsx("option",{value:P.id,children:P.label},P.id))})]}),a.jsx("nav",{className:"flex-1 p-4 space-y-1",children:I8.map(P=>{const $=P.icon,w=p===P.id;return a.jsxs("button",{onClick:()=>_(P.id),className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${w?"bg-blue-600 text-white":"text-slate-300 hover:bg-slate-700 hover:text-white"}`,title:o?void 0:P.label,children:[a.jsx($,{className:`h-5 w-5 ${o?"":"mx-auto"}`}),o&&a.jsx("span",{className:"text-sm font-medium",children:P.label})]},P.id)})}),o&&a.jsxs("div",{className:"p-4 border-t border-slate-700",children:[a.jsxs("div",{className:"text-xs text-slate-400 mb-1",children:[S.label," "]}),a.jsx("div",{className:"text-sm font-medium text-white",children:e}),a.jsx("div",{className:"text-xs text-slate-400",children:" "})]})]}),a.jsxs("div",{className:"flex-1 flex min-h-0 flex-col overflow-hidden min-w-0",children:[a.jsxs("header",{className:"h-14 bg-white border-b border-gray-200 flex items-center justify-between px-6 shrink-0",children:[a.jsx("div",{className:"flex items-center gap-4",children:(()=>{const P=I8.find(U=>U.id===p),$=P?.icon||Nx,w=o3[p];return a.jsx(l3,{title:w?.title??P?.label??"  ",subtitle:w?.subtitle??"Neuro-Shield   ",icon:a.jsx($,{className:"h-4 w-4 text-white"})})})()}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(Nt,{variant:"ghost",size:"sm",className:"relative",children:[a.jsx(gh,{className:"h-5 w-5"}),a.jsx(rr,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs",children:"3"})]}),a.jsxs("div",{className:"relative",children:[a.jsxs(Nt,{variant:"ghost",className:"flex items-center gap-2",onClick:()=>u(!c),children:[a.jsx("div",{className:"h-8 w-8 rounded-full bg-slate-100 flex items-center justify-center text-slate-600 font-semibold text-sm",children:e.charAt(0)}),a.jsx("span",{className:"text-sm font-medium",children:e}),a.jsx(Ds,{className:"h-4 w-4 text-gray-400"})]}),c&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>u(!1)}),a.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-md shadow-lg border border-gray-200 z-50",children:[a.jsxs("div",{className:"px-3 py-2 border-b border-gray-200",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:e}),a.jsx("div",{className:"text-xs text-gray-500",children:" "})]}),a.jsx("div",{className:"border-t border-gray-200 py-1",children:a.jsxs("button",{onClick:()=>{u(!1),M()},className:"w-full flex items-center px-3 py-2 text-sm text-red-600 hover:bg-red-50",children:[a.jsx(mR,{className:"mr-2 h-4 w-4"}),""]})})]})]})]})]})]}),a.jsx("main",{className:"relative flex-1 min-h-0 w-full overflow-hidden",children:R()})]})]})}function t5e(e,t=[]){let n=[];function r(i,o){const l=h.createContext(o);l.displayName=i+"Context";const c=n.length;n=[...n,o];const u=p=>{const{scope:g,children:x,...y}=p,v=g?.[e]?.[c]||l,N=h.useMemo(()=>y,Object.values(y));return a.jsx(v.Provider,{value:N,children:x})};u.displayName=i+"Provider";function m(p,g){const x=g?.[e]?.[c]||l,y=h.useContext(x);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${p}\` must be used within \`${i}\``)}return[u,m]}const s=()=>{const i=n.map(o=>h.createContext(o));return function(l){const c=l?.[e]||i;return h.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[r,n5e(s,...t)]}function n5e(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const p=c(i)[`__scope${u}`];return{...l,...p}},{});return h.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}var r5e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],G3=r5e.reduce((e,t)=>{const n=$1(`Primitive.${t}`),r=h.forwardRef((s,i)=>{const{asChild:o,...l}=s,c=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),q_={exports:{}},V_={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M8;function a5e(){if(M8)return V_;M8=1;var e=P1();function t(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,s=e.useEffect,i=e.useLayoutEffect,o=e.useDebugValue;function l(p,g){var x=g(),y=r({inst:{value:x,getSnapshot:g}}),v=y[0].inst,N=y[1];return i(function(){v.value=x,v.getSnapshot=g,c(v)&&N({inst:v})},[p,x,g]),s(function(){return c(v)&&N({inst:v}),p(function(){c(v)&&N({inst:v})})},[p]),o(x),x}function c(p){var g=p.getSnapshot;p=p.value;try{var x=g();return!n(p,x)}catch{return!0}}function u(p,g){return g()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:l;return V_.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:m,V_}var L8;function s5e(){return L8||(L8=1,q_.exports=a5e()),q_.exports}var i5e=s5e();function o5e(){return i5e.useSyncExternalStore(l5e,()=>!0,()=>!1)}function l5e(){return()=>{}}var H3="Avatar",[c5e]=t5e(H3),[d5e,kW]=c5e(H3),IW=h.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[s,i]=h.useState("idle");return a.jsx(d5e,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:a.jsx(G3.span,{...r,ref:t})})});IW.displayName=H3;var DW="AvatarImage",u5e=h.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...i}=e,o=kW(DW,n),l=f5e(r,i),c=ld(u=>{s(u),o.onImageLoadingStatusChange(u)});return Fa(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?a.jsx(G3.img,{...i,ref:t,src:r}):null});u5e.displayName=DW;var PW="AvatarFallback",MW=h.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...s}=e,i=kW(PW,n),[o,l]=h.useState(r===void 0);return h.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&i.imageLoadingStatus!=="loaded"?a.jsx(G3.span,{...s,ref:t}):null});MW.displayName=PW;function $8(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function f5e(e,{referrerPolicy:t,crossOrigin:n}){const r=o5e(),s=h.useRef(null),i=r?(s.current||(s.current=new window.Image),s.current):null,[o,l]=h.useState(()=>$8(i,e));return Fa(()=>{l($8(i,e))},[i,e]),Fa(()=>{const c=p=>()=>{l(p)};if(!i)return;const u=c("loaded"),m=c("error");return i.addEventListener("load",u),i.addEventListener("error",m),t&&(i.referrerPolicy=t),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",u),i.removeEventListener("error",m)}},[i,n,t]),o}var p5e=IW,m5e=MW;function h5e({className:e,...t}){return a.jsx(p5e,{"data-slot":"avatar",className:he("relative flex size-10 shrink-0 overflow-hidden rounded-full",e),...t})}function g5e({className:e,...t}){return a.jsx(m5e,{"data-slot":"avatar-fallback",className:he("bg-muted flex size-full items-center justify-center rounded-full",e),...t})}const F8=[{id:"national-dashboard",label:"  ",icon:xh,roles:["central_admin","policy_maker"]},{id:"model-apply",label:"  ",icon:Tg,roles:["central_admin","policy_maker"]},{id:"model-governance",label:"/  ",icon:nl,roles:["central_admin"]},{id:"quality-monitoring",label:"& ",icon:gd,roles:["central_admin","policy_maker"]},{id:"compliance-audit",label:"   ",icon:fR,roles:["central_admin"]},{id:"kpi-dictionary",label:"KPI ",icon:ym,roles:["central_admin","policy_maker"]},{id:"settings",label:"",icon:Ex,roles:["central_admin","policy_maker"]}];function x5e({children:e,currentPage:t,userRole:n,userName:r,onPageChange:s,onLogout:i}){const[o,l]=h.useState(!0),[c]=h.useState(5),[u,m]=h.useState(!1),p=F8.filter(y=>y.roles.includes(n)),g=y=>{switch(y){case"central_admin":return" ";case"policy_maker":return" ";default:return""}},x=()=>{window.confirm(" ?")&&i()};return a.jsxs("div",{className:"flex h-screen bg-gray-50",children:[a.jsxs("aside",{className:`${o?"w-64":"w-20"} bg-slate-800 border-r border-slate-700 transition-all duration-300 flex flex-col`,children:[a.jsx("div",{className:"h-16 flex items-center justify-between px-4 border-b border-slate-700",children:o?a.jsxs(a.Fragment,{children:[a.jsx(vR,{size:36,showText:!0,subtitle:" ",variant:"dark"}),a.jsx(Nt,{variant:"ghost",size:"sm",onClick:()=>l(!1),className:"h-8 w-8 p-0 text-slate-400 hover:text-white hover:bg-slate-700",children:a.jsx(Mu,{className:"h-4 w-4"})})]}):a.jsx(Nt,{variant:"ghost",size:"sm",onClick:()=>l(!0),className:"h-8 w-8 p-0 mx-auto text-slate-400 hover:text-white hover:bg-slate-700",children:a.jsx(hR,{className:"h-4 w-4"})})}),a.jsx("nav",{className:"flex-1 p-4 space-y-1",children:p.map(y=>{const v=y.icon,N=t===y.id;return a.jsxs("button",{onClick:()=>s(y.id),className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${N?"bg-blue-600 text-white":"text-slate-300 hover:bg-slate-700 hover:text-white"}`,children:[a.jsx(v,{className:`h-5 w-5 ${!o&&"mx-auto"}`}),o&&a.jsx("span",{className:"text-sm font-medium",children:y.label})]},y.id)})}),o&&a.jsxs("div",{className:"p-4 border-t border-slate-700",children:[a.jsx("div",{className:"text-xs text-slate-400 mb-1",children:""}),a.jsx("div",{className:"text-sm font-medium text-white",children:r}),a.jsx("div",{className:"text-xs text-slate-400",children:g(n)})]})]}),a.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[a.jsxs("header",{className:"h-14 bg-white border-b border-gray-200 flex items-center justify-between px-6",children:[a.jsx("div",{className:"flex items-center gap-3",children:(()=>{const y=F8.find(S=>S.id===t),v=y?.icon||xh,N=o3[t];return a.jsx(l3,{title:N?.title??y?.label??"  ",subtitle:N?.subtitle??"Neuro-Shield  ",icon:a.jsx(v,{className:"h-4 w-4 text-white"})})})()}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(Nt,{variant:"ghost",size:"sm",className:"relative",children:[a.jsx(gh,{className:"h-5 w-5"}),c>0&&a.jsx(rr,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs",children:c})]}),a.jsxs("div",{className:"relative",children:[a.jsxs(Nt,{variant:"ghost",className:"flex items-center gap-2",onClick:()=>m(!u),children:[a.jsx(h5e,{className:"h-8 w-8",children:a.jsx(g5e,{className:"bg-slate-100 text-slate-600",children:r.charAt(0)})}),a.jsx("span",{className:"text-sm font-medium",children:r}),a.jsx(Ds,{className:"h-4 w-4 text-gray-400"})]}),u&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>m(!1)}),a.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-md shadow-lg border border-gray-200 z-50",children:[a.jsxs("div",{className:"px-3 py-2 border-b border-gray-200",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:r}),a.jsx("div",{className:"text-xs text-gray-500",children:g(n)})]}),a.jsx("div",{className:"py-1",children:a.jsxs("button",{onClick:()=>{m(!1),s("settings")},className:"w-full flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[a.jsx(Ex,{className:"mr-2 h-4 w-4"}),""]})}),a.jsx("div",{className:"border-t border-gray-200 py-1",children:a.jsxs("button",{onClick:()=>{m(!1),x()},className:"w-full flex items-center px-3 py-2 text-sm text-red-600 hover:bg-red-50",children:[a.jsx(mR,{className:"mr-2 h-4 w-4"}),""]})})]})]})]})]})]}),a.jsx("main",{className:"flex-1 w-full overflow-auto relative",children:e})]})]})}const W_={drillLevel:"nation",drillPath:[{level:"nation",code:"KR",name:""}],selectedRegion:null};function b5e(){const[e,t]=h.useState(W_),n=h.useCallback((c,u={})=>{const m=u.replace??!0;t(p=>{if(c.level==="nation")return G0("nation","KR",m),W_;const g=p.drillPath[p.drillPath.length-1],x=p.drillPath.findIndex(v=>v.level===c.level&&v.code===c.code);let y;return x>=0?(y=p.drillPath.slice(0,x+1),y[y.length-1]={level:c.level,code:c.code,name:c.name}):g?.level===c.level?y=[...p.drillPath.slice(0,-1),c]:y=[...p.drillPath,c],G0(c.level,c.code,m),{drillLevel:c.level,drillPath:y,selectedRegion:c}})},[]),r=h.useCallback(c=>{n(c,{replace:!0})},[n]),s=h.useCallback(()=>{t(c=>{if(c.drillPath.length<=1)return c;const u=c.drillPath.slice(0,-1),m=u[u.length-1];return G0(m.level,m.code,!0),{drillLevel:m.level,drillPath:u,selectedRegion:m.level==="nation"?null:{code:m.code,name:m.name,level:m.level}}})},[]),i=h.useCallback(c=>{t(u=>{if(c<0||c>=u.drillPath.length)return u;const m=u.drillPath.slice(0,c+1),p=m[m.length-1];return G0(p.level,p.code,!0),{drillLevel:p.level,drillPath:m,selectedRegion:p.level==="nation"?null:{code:p.code,name:p.name,level:p.level}}})},[]),o=h.useCallback(()=>{t(W_),G0("nation","KR",!0)},[]),l=h.useCallback(c=>{t(u=>({...u,selectedRegion:c}))},[]);return{...e,drillDown:r,drillUp:s,drillTo:i,resetDrill:o,setSelectedRegion:l,setScope:n}}function G0(e,t,n=!0){if(typeof window>"u")return;const r=new URL(window.location.href);if(r.searchParams.set("level",e),r.searchParams.set("region",t),n){window.history.replaceState({},"",r.toString());return}window.history.pushState({},"",r.toString())}function Y_(e){return{nation:"",sido:"",sigungu:"",center:""}[e]||e}const rS=[{id:"sla-status",name:"SLA ",description:"SLA / ",domain:"sla",metric:{numerator:"sla_compliant_count",denominator:"total_count",aggregation:"rate",unit:"%"},visualization:{chartType:"donut",breakdown:"status",colorScheme:"sla",format:{decimals:2,suffix:"%"}},filters:{allowedLevels:["nation","sido","sigungu","center"],defaultTimeRange:"week"},priority:1,isActive:!0},{id:"data-status",name:" ",description:" / ",domain:"data",metric:{numerator:"data_sufficient_count",denominator:"total_count",aggregation:"rate",unit:"%"},visualization:{chartType:"donut",breakdown:"status",colorScheme:"data",format:{decimals:2,suffix:"%"}},filters:{allowedLevels:["nation","sido","sigungu","center"],defaultTimeRange:"week"},priority:2,isActive:!0},{id:"case-distribution",name:" ",description:"/  ",domain:"case",metric:{valueField:"case_count",aggregation:"sum",unit:""},visualization:{chartType:"bar",breakdown:"ageGroup",colorScheme:"age",format:{decimals:0}},filters:{allowedLevels:["nation","sido","sigungu","center"],defaultTimeRange:"week"},priority:3,isActive:!0},{id:"center-load",name:"  ",description:"   ",domain:"case",metric:{valueField:"transfer_count",aggregation:"sum",unit:""},visualization:{chartType:"bar",breakdown:"centerType",colorScheme:"blue",format:{decimals:0}},filters:{allowedLevels:["nation","sido"],defaultTimeRange:"week"},priority:4,isActive:!0},{id:"trend-timeseries",name:"  ",description:"    ",domain:"case",metric:{valueField:"processed_count",aggregation:"sum",unit:""},visualization:{chartType:"line",breakdown:"month",colorScheme:"green",format:{decimals:0}},filters:{allowedLevels:["nation","sido","sigungu"],defaultTimeRange:"year"},priority:10,isActive:!0},{id:"kpi-summary-table",name:"KPI ",description:"KPI // ",domain:"case",metric:{valueField:"kpi_value",aggregation:"avg",unit:"%"},visualization:{chartType:"table",format:{decimals:1}},filters:{allowedLevels:["nation","sido"],defaultTimeRange:"week"},priority:5,isActive:!0,chartEnabled:!1},{id:"kpi-sla-rate",name:"SLA ",description:"   SLA   ",domain:"sla",metric:{numerator:"sla_compliant_count",denominator:"total_count",aggregation:"rate",unit:"%",baseline:92,target:95,higherBetter:!0},visualization:{chartType:"bullet",format:{decimals:1,suffix:"%"}},filters:{allowedLevels:["nation","sido","sigungu","center"],defaultTimeRange:"week"},priority:100,isActive:!0,chartEnabled:!0},{id:"kpi-data-rate",name:" ",description:"      ",domain:"data",metric:{numerator:"data_sufficient_count",denominator:"total_count",aggregation:"rate",unit:"%",baseline:88,target:90,higherBetter:!0},visualization:{chartType:"bullet",format:{decimals:1,suffix:"%"}},filters:{allowedLevels:["nation","sido","sigungu","center"],defaultTimeRange:"week"},priority:101,isActive:!0,chartEnabled:!0},{id:"kpi-completion-rate",name:" ",description:"      ",domain:"case",metric:{numerator:"completed_count",denominator:"total_count",aggregation:"rate",unit:"%",baseline:88,target:90,higherBetter:!0},visualization:{chartType:"bullet",format:{decimals:1,suffix:"%"}},filters:{allowedLevels:["nation","sido","sigungu","center"],defaultTimeRange:"week"},priority:102,isActive:!0,chartEnabled:!0},{id:"kpi-response-rate",name:" ",description:"     ",domain:"response",metric:{numerator:"timely_response_count",denominator:"total_count",aggregation:"rate",unit:"%",baseline:82,target:85,higherBetter:!0},visualization:{chartType:"bullet",format:{decimals:1,suffix:"%"}},filters:{allowedLevels:["nation","sido","sigungu","center"],defaultTimeRange:"week"},priority:103,isActive:!0,chartEnabled:!0},{id:"kpi-quality-score",name:" ",description:"    ",domain:"quality",metric:{valueField:"quality_score",aggregation:"avg",unit:"",baseline:85,target:88,higherBetter:!0},visualization:{chartType:"bullet",format:{decimals:1,suffix:""}},filters:{allowedLevels:["nation","sido","sigungu","center"],defaultTimeRange:"week"},priority:104,isActive:!0,chartEnabled:!0},{id:"kpi-avg-processing-time",name:" ",description:"     ()",domain:"time",metric:{valueField:"processing_time_days",aggregation:"avg",unit:"",baseline:3,target:2.5,higherBetter:!1},visualization:{chartType:"bullet",format:{decimals:1,suffix:""}},filters:{allowedLevels:["nation","sido","sigungu","center"],defaultTimeRange:"week"},priority:105,isActive:!0,chartEnabled:!0},{id:"total-cases",name:" ",description:"   ",domain:"case",metric:{valueField:"total_case_count",aggregation:"sum",unit:""},visualization:{chartType:"treemap",breakdown:"region",colorScheme:"blue",format:{decimals:0}},filters:{allowedLevels:["nation","sido","sigungu","center"],defaultTimeRange:"week"},priority:0,isActive:!0}];function U8(e){const t=rS.filter(n=>n.isActive);switch(e){case"left":return t.filter(n=>n.visualization.chartType==="treemap"||n.id==="total-cases").sort((n,r)=>n.priority-r.priority);case"right":return t.filter(n=>["donut","bar","table"].includes(n.visualization.chartType)&&n.id!=="total-cases").sort((n,r)=>n.priority-r.priority);case"bottom":return t.filter(n=>n.visualization.chartType==="line").sort((n,r)=>n.priority-r.priority);default:return[]}}function y5e(e){return rS.find(t=>t.id===e)}function v5e(e){return rS.filter(t=>t.isActive&&t.filters.allowedLevels.includes(e)).sort((t,n)=>t.priority-n.priority)}function N5e(e){return rS.filter(t=>t.isActive&&t.chartEnabled===!0&&(!e||t.filters.allowedLevels.includes(e))).sort((t,n)=>t.priority-n.priority)}function S5e(e){let t=0;for(let n=0;n<e.length;n++)t=t*31+e.charCodeAt(n)>>>0;return t}function Yr(e,t,n){const r=S5e(e)%1e3/1e3;return t+(n-t)*r}function E5e(e,t,n,r){const s=y5e(e);if(!s)return null;const i=`${e}-${t}-${n}`;switch(s.visualization.chartType){case"donut":{if(e==="sla-status"){const o=100-Yr(`${i}-sla`,2,6);return[{name:"",value:Number(o.toFixed(2)),color:"#3b82f6"},{name:"",value:Number((100-o).toFixed(2)),color:"#ef4444"}]}if(e==="data-status"){const o=100-Yr(`${i}-data`,3,8);return[{name:"",value:Number(o.toFixed(2)),color:"#3b82f6"},{name:"",value:Number((100-o).toFixed(2)),color:"#f59e0b"}]}return[{name:"1",value:Math.round(Yr(`${i}-1`,40,60)),color:"#3b82f6"},{name:"2",value:Math.round(Yr(`${i}-2`,20,40)),color:"#22c55e"},{name:"3",value:Math.round(Yr(`${i}-3`,10,20)),color:"#f59e0b"}]}case"bar":{if(e==="case-distribution"){const o=["20~24","25~29","30~34","35~39","40~44","45~49","50~54","55~59","60~64","65~69","70~74","75~79","80~84","85~"],l=[1200,1800,2200,2300,2700,3400,3600,3300,3900,3800,4400,4200,4100,3500,2300,1700,1300,1e3];return o.map((c,u)=>({label:c,value:Math.round(l[u]*(.9+Yr(`${i}-age-${u}`,0,.2)))}))}return e==="center-load"?[{label:"",value:Math.round(Yr(`${i}-load-1`,35e3,45e3))},{label:" ",value:Math.round(Yr(`${i}-load-2`,4e3,6e3))},{label:" ",value:Math.round(Yr(`${i}-load-3`,1500,2500))},{label:" ",value:Math.round(Yr(`${i}-load-4`,1200,2e3))},{label:"",value:Math.round(Yr(`${i}-load-5`,1e3,1800))}]:[{label:"A",value:Math.round(Yr(`${i}-a`,1e3,5e3))},{label:"B",value:Math.round(Yr(`${i}-b`,1e3,5e3))},{label:"C",value:Math.round(Yr(`${i}-c`,1e3,5e3))}]}case"table":return{columns:[{key:"kpi",label:"KPI ",align:"left"},{key:"avg",label:"",align:"right",format:"percent"},{key:"min",label:"()",align:"right"},{key:"max",label:"()",align:"right"}],rows:[{kpi:"SLA ",avg:96.2,min:"91.3% ()",max:"99.1% ()"},{kpi:" ",avg:94.8,min:"88.5% ()",max:"98.2% ()"},{kpi:" ",avg:2.3,min:"1.8 ()",max:"3.5 ()"}]};case"line":return["2018","2019","2020","2021","2022","2023","2024","2025","2026"].map((l,c)=>({x:l,value:Math.round(Yr(`${i}-ts-${c}`,12e3,18e3))}));case"treemap":return[{name:"",value:Math.round(Yr(`${i}-tree-`,2500,3500))},{name:"",value:Math.round(Yr(`${i}-tree-`,1800,2500))},{name:"",value:Math.round(Yr(`${i}-tree-`,1500,2200))},{name:"",value:Math.round(Yr(`${i}-tree-`,1200,1800))},{name:"",value:Math.round(Yr(`${i}-tree-`,1e3,1500))}];case"bullet":{const o=s.metric,l=o.baseline??85,c=o.target??90,u=o.higherBetter!==!1,m=o.unit||"%",p=[],g=(y,v)=>{const N=v.match(/\d+/),S=N?Number(N[0]):0,j=Yr(`${i}-phase`,0,6.28),C=Math.sin(S*.9+j),_=Yr(`${i}-${y}-${v}`,-1,1);return y==="kpi-sla-rate"?92+C*4+_*2:y==="kpi-data-rate"?91+C*5+_*2:y==="kpi-completion-rate"?90+C*4.5+_*2:y==="kpi-response-rate"?85+C*5+_*3:y==="kpi-quality-score"?88+C*4+_*2:y==="kpi-avg-processing-time"?2.8+C*.8+_*.3:l+C*5+_*3};if(r==="week"){const y=new Date(2026,1,5);for(let v=6;v>=0;v--){const N=new Date(y);N.setDate(N.getDate()-v);const S=`${N.getMonth()+1}/${N.getDate()}`;p.push({date:S,value:Number(g(e,`d${v}`).toFixed(1))})}}else if(r==="month"){const y=["1","2","3","4","5","6","7","8","9","10","11","12"];for(let v=0;v<12;v++)p.push({date:y[v],value:Number(g(e,`m${v}`).toFixed(1))})}else{const y=["1","2","3","4"];for(let v=0;v<4;v++)p.push({date:y[v],value:Number(g(e,`q${v}`).toFixed(1))})}const x=p[p.length-1].value;return{dailyData:p,current:x,baseline:l,target:c,unit:m,higherBetter:u}}default:return null}}const nm=[{id:"chg_20260124",title:"L2  6560  ",type:"rule_threshold",version:"v2.3.2 (draft)",deployedAt:"2026-01-24T14:00:00+09:00",deployedBy:"-",status:"reviewing",description:"   L2   . 60~64   24%     .",before:{slaRate:89.8,responseTimeliness:85.1,completionRate:92.7,dataFulfillment:94.3},after:{slaRate:89.8,responseTimeliness:85.1,completionRate:92.7,dataFulfillment:94.3},impactSummary:[{kpi:"SLA",label:"SLA ",changePp:0,verdict:"insignificant"},{kpi:"RESP",label:" ",changePp:0,verdict:"insignificant"},{kpi:"COMP",label:" ",changePp:0,verdict:"insignificant"},{kpi:"DATA",label:" ",changePp:0,verdict:"insignificant"}],affectedRegions:[""],riskLevel:"medium",requestedBy:" ()",approvedBy:null,currentRule:"  65  L2",proposedRule:"  60  L2",reason:" 3   , 60~64   ( 24%).      15%     ."},{id:"chg_20260120",title:"L2  6065  ",type:"rule_threshold",version:"v2.3.1",deployedAt:"2026-01-20T09:00:00+09:00",deployedBy:" ()",status:"deployed",description:"L2    60 65 .         .",before:{slaRate:87.2,responseTimeliness:82.5,completionRate:91.3,dataFulfillment:94.1},after:{slaRate:89.8,responseTimeliness:85.1,completionRate:92.7,dataFulfillment:94.3},impactSummary:[{kpi:"SLA",label:"SLA ",changePp:2.6,verdict:"improved"},{kpi:"RESP",label:" ",changePp:2.6,verdict:"improved"},{kpi:"COMP",label:" ",changePp:1.4,verdict:"improved"},{kpi:"DATA",label:" ",changePp:.2,verdict:"insignificant"}],affectedRegions:[""],riskLevel:"medium",requestedBy:" ()",approvedBy:" ()"},{id:"chg_20260115",title:"  75 ",type:"contact_rule",version:"v2.3.0",deployedAt:"2026-01-15T14:30:00+09:00",deployedBy:" ()",status:"deployed",description:"L3    7 5 .    .",before:{slaRate:85.8,responseTimeliness:80.1,completionRate:89.5,dataFulfillment:93.8},after:{slaRate:87.2,responseTimeliness:82.5,completionRate:91.3,dataFulfillment:94.1},impactSummary:[{kpi:"SLA",label:"SLA ",changePp:1.4,verdict:"improved"},{kpi:"RESP",label:" ",changePp:2.4,verdict:"improved"},{kpi:"COMP",label:" ",changePp:1.8,verdict:"improved"},{kpi:"DATA",label:" ",changePp:.3,verdict:"insignificant"}],affectedRegions:[""],riskLevel:"low",requestedBy:" ( )",approvedBy:" ()"},{id:"chg_20260110",title:"  v3.2 ",type:"model_version",version:"v3.2.0",deployedAt:"2026-01-10T11:00:00+09:00",deployedBy:" ()",status:"deployed",description:"   v3.2  .  +3.2%p,  +1.8%p .",before:{slaRate:84.1,responseTimeliness:78.9,completionRate:88.2,dataFulfillment:93.2},after:{slaRate:85.8,responseTimeliness:80.1,completionRate:89.5,dataFulfillment:93.8},impactSummary:[{kpi:"SLA",label:"SLA ",changePp:1.7,verdict:"improved"},{kpi:"RESP",label:" ",changePp:1.2,verdict:"improved"},{kpi:"COMP",label:" ",changePp:1.3,verdict:"improved"},{kpi:"DATA",label:" ",changePp:.6,verdict:"insignificant"}],affectedRegions:[""],riskLevel:"low",requestedBy:" ()",approvedBy:" ()"},{id:"chg_20260105",title:"  1.21.35 ",type:"ruleset",version:"v2.2.5",deployedAt:"2026-01-05T10:00:00+09:00",deployedBy:" ()",status:"rollback",description:"   1.2 1.35 .   1  .",before:{slaRate:84.5,responseTimeliness:79.2,completionRate:88.8,dataFulfillment:93.5},after:{slaRate:82.3,responseTimeliness:76.8,completionRate:86.1,dataFulfillment:93.4},impactSummary:[{kpi:"SLA",label:"SLA ",changePp:-2.2,verdict:"worsened"},{kpi:"RESP",label:" ",changePp:-2.4,verdict:"worsened"},{kpi:"COMP",label:" ",changePp:-2.7,verdict:"worsened"},{kpi:"DATA",label:" ",changePp:-.1,verdict:"insignificant"}],affectedRegions:[""],riskLevel:"high",requestedBy:" ()",approvedBy:" ()"}],B8=[{key:"ops_bottleneck",label:" ",icon:"",description:" , SLA ,        ",severity:"critical",score:38,contributionPct:35,topRegions:[{code:"26",name:"",score:22,detail:"SLA 78.2%,  42"},{code:"27",name:"",score:35,detail:"SLA 82.5%,  "},{code:"31",name:"",score:41,detail:"  SLA 84%"}],indicators:[{label:" SLA ",value:89.8,unit:"%",threshold:90,status:"yellow"},{label:"  ",value:156,unit:"",threshold:100,status:"red"},{label:"  ",value:4.2,unit:"",threshold:3,status:"red"},{label:"   ",value:28.5,unit:"/",threshold:25,status:"yellow"}]},{key:"data_quality",label:" ",icon:"",description:" ,  ,      ",severity:"warning",score:62,contributionPct:28,topRegions:[{code:"26",name:"",score:48,detail:"  8.2%"},{code:"27",name:"",score:55,detail:"   48"},{code:"28",name:"",score:61,detail:"  12"}],indicators:[{label:" ",value:95.5,unit:"%",threshold:95,status:"green"},{label:" ",value:96.8,unit:"%",threshold:95,status:"green"},{label:" ",value:93.8,unit:"%",threshold:95,status:"yellow"},{label:"  ",value:4.5,unit:"%",threshold:5,status:"yellow"}]},{key:"contact_strategy",label:" ",icon:"",description:" ,  ,       ",severity:"good",score:75,contributionPct:22,topRegions:[{code:"30",name:"",score:58,detail:"  62%"},{code:"29",name:"",score:65,detail:"  68%"},{code:"31",name:"",score:70,detail:"  "}],indicators:[{label:" ",value:78.5,unit:"%",threshold:80,status:"yellow"},{label:" ",value:72.3,unit:"%",threshold:70,status:"green"},{label:"  ",value:2.8,unit:"",threshold:3,status:"green"},{label:" ",value:85.1,unit:"%",threshold:85,status:"green"}]},{key:"model_fitness",label:" ",icon:"",description:"  ,  ,      ",severity:"good",score:82,contributionPct:15,topRegions:[{code:"27",name:"",score:68,detail:"F1 89.2%,  "},{code:"26",name:"",score:72,detail:"Precision  "},{code:"28",name:"",score:78,detail:" "}],indicators:[{label:" F1 ",value:91.6,unit:"%",threshold:90,status:"green"},{label:"  ",value:.12,unit:"",threshold:.15,status:"green"},{label:" ",value:90.5,unit:"%",threshold:90,status:"green"},{label:"",value:92.8,unit:"%",threshold:90,status:"green"}]}],Ag=[{id:"qa_001",type:"sla_breach",severity:"critical",title:" SLA  ",description:"SLA  78.2% (85%) .  42 .",region:"",detectedAt:"2026-01-24T08:00:00+09:00",resolved:!1,relatedDriver:"ops_bottleneck"},{id:"qa_002",type:"update_delay",severity:"warning",title:"   ",description:"   48. (24) .",region:"",detectedAt:"2026-01-23T10:00:00+09:00",resolved:!1,relatedDriver:"data_quality"},{id:"qa_003",type:"model_drift",severity:"warning",title:"L3     ",description:"F1 89.2%    -2.4%p.  .",region:"",detectedAt:"2026-01-22T15:00:00+09:00",resolved:!1,relatedDriver:"model_fitness"},{id:"qa_004",type:"data_missing",severity:"info",title:"   ",description:"  12 .    .",region:"",detectedAt:"2026-01-21T09:00:00+09:00",resolved:!0,relatedDriver:"data_quality"}],G8=[{id:"ua_001",timestamp:"2026-01-24T09:15:00+09:00",type:"violation",severity:"high",status:"reviewing",title:"  PII  ",actor:" (CS-1042)",actorRole:"",center:" ",target:"  DB",violationType:"  ",violatedRegulation:" 29,  SEC-003",cause:"      . IP     .",requestor:" (CS-1042)",executor:" (CS-1042)",policyRef:" 29",internalStandardId:"SEC-003",approvalComment:"     .    .",rationale:"  PII    .    .",kpiSnapshot:{slaRate:89.8,riskTop3:[" "," "," "],regionContext:""}},{id:"ua_002",timestamp:"2026-01-22T14:20:00+09:00",type:"violation",severity:"medium",status:"resolved",title:"   ",actor:"",actorRole:"  ",center:" ",target:"   #2847",violationType:"   ",violatedRegulation:" ACC-007 (   )",cause:"      .  .",relatedChangeId:"chg_20260120",requestor:"",approver:" ()",executor:"  ",policyRef:"     v2.1",internalStandardId:"ACC-007",approvalComment:"    .  .",rationale:"     .       .",kpiSnapshot:{slaRate:88.5,riskTop3:[" "," "," "],regionContext:""}},{id:"ua_003",timestamp:"2026-01-20T16:00:00+09:00",type:"violation",severity:"low",status:"resolved",title:"SLA   (3)",actor:" ",actorRole:" ",center:" ",target:"SLA  (48   )",violationType:"SLA  ",violatedRegulation:" SLA-001 (  48)",cause:"     (+15).   .",requestor:" ",executor:"  ",approvalComment:"  1  . 3  72   .",policyRef:" SLA-001",internalStandardId:"SLA-001",rationale:"   48 SLA .     .",kpiSnapshot:{slaRate:87.2,riskTop3:[" "," "," "],regionContext:""}},{id:"ua_004",timestamp:"2026-01-20T09:00:00+09:00",type:"policy_change",severity:"medium",status:"resolved",title:"L2  6065  ",actor:"",actorRole:" ",target:"L2   ()",cause:"        .",relatedChangeId:"chg_20260120",requestor:" ()",approver:" ()",executor:" ()",policyRef:"    v4.2",internalStandardId:"RULE-L2-001",approvalComment:"  . SLA +2.6%p  .   .",rationale:"       .   .",kpiSnapshot:{slaRate:87.2,riskTop3:[" "," "," "],regionContext:""}},{id:"ua_005",timestamp:"2026-01-15T14:30:00+09:00",type:"policy_change",severity:"low",status:"resolved",title:"  75  ()",actor:"",actorRole:" ",target:"L3   ()",cause:"L3  7    2 . 5  .",relatedChangeId:"chg_20260115",requestor:" ()",approver:" ()",executor:"  ",policyRef:"   v3.0",internalStandardId:"RULE-CT-002",approvalComment:"   . 2    .",rationale:"L3  7    2 . 5     .",kpiSnapshot:{slaRate:86.1,riskTop3:[" "," "," "],regionContext:""}},{id:"ua_006",timestamp:"2026-01-10T11:00:00+09:00",type:"model_deploy",severity:"medium",status:"resolved",title:"   v3.2  ",actor:"",actorRole:" ",target:"    ",cause:"v3.1   +3.2%p . A/B  2 .",relatedChangeId:"chg_20260110",requestor:" ()",approver:" ()",executor:" ()",policyRef:"    v1.3",internalStandardId:"MDL-DEP-001",approvalComment:"A/B   .  +3.2%p,  +1.8%p.   .",rationale:"v3.1   +3.2%p. A/B  2    .",kpiSnapshot:{slaRate:85.8,riskTop3:[" "," "," "],regionContext:""}},{id:"ua_007",timestamp:"2026-01-24T17:00:00+09:00",type:"resolution",severity:"high",status:"resolved",title:"     ",actor:"",actorRole:" ",target:"  5 ",cause:"SLA  78.2%  .  42   .",requestor:" ",approver:" ()",executor:"",policyRef:"    v2.0",internalStandardId:"OPS-EMG-001",approvalComment:"5   2 10  . 48    50% .",rationale:"SLA  78.2%  .   42 .    .",kpiSnapshot:{slaRate:78.2,riskTop3:[" "," "," "],regionContext:""}},{id:"ua_008",timestamp:"2026-01-18T11:30:00+09:00",type:"resolution",severity:"medium",status:"resolved",title:"    ",actor:"",actorRole:" ",target:"   ",cause:"        .",requestor:"  ",approver:" ()",executor:"  ",policyRef:"     v1.5",internalStandardId:"SEC-POST-001",approvalComment:"     .   .",rationale:"   48    .      .",kpiSnapshot:{slaRate:88.5,riskTop3:[" "," "," "],regionContext:""}},{id:"ua_009",timestamp:"2026-01-05T10:00:00+09:00",type:"policy_change",severity:"high",status:"resolved",title:"  1.21.35  ( )",actor:"",actorRole:" ",target:"   ",cause:"    .   .",relatedChangeId:"chg_20260105",requestor:" ()",approver:"",executor:"  ",policyRef:"   v2.0",internalStandardId:"RULE-WT-001",approvalComment:" +22%  1   . SLA -2.2%p  .",rationale:"     1  . SLA  .",kpiSnapshot:{slaRate:82.3,riskTop3:[" "," "," "],regionContext:""}}];function j5e(e){let t=0;for(let n=0;n<e.length;n++)t=t*31+e.charCodeAt(n)>>>0;return t}function Ue(e,t,n){return t+j5e(e)%1e4/1e4*(n-t)}function Ia(e,t,n){return Math.min(n,Math.max(t,e))}function Wp(e,t,n){const r=Math.max(.1,n.spread),s=Ia(n.volatility??.28,.12,.6),i=Ia(n.trendBias??0,-1,1),o=Ue(`${e}-slope`,-r*.24,r*.24)+i*r*.14,l=Ue(`${e}-cycle`,r*.12,r*.42),c=Ue(`${e}-phase`,0,Math.PI*2),u=r*s,m=Math.round(Ue(`${e}-shock-day`,1,Math.max(1,t-2))),p=Ue(`${e}-shock-amp`,r*.25,r*.85),g=Ue(`${e}-shock-recovery`,.35,.72),x=Ue(`${e}-pre-shock`,.15,.35);let y=Ue(`${e}-shock-sign`,-1,1)>=0?1:-1;n.shockDirection==="up"&&(y=1),n.shockDirection==="down"&&(y=-1);const v=p*y,N=[],S=Math.max(1,t-1);for(let j=0;j<t;j+=1){const C=(j-S/2)*o,_=Math.sin(j/S*Math.PI*2+c)*l,A=Math.sin(j/S*Math.PI+c*.5)*(l*.35),T=Ue(`${e}-noise-${j}`,-u,u);let R=0;j===m&&(R+=v),j===m-1&&(R+=v*x),j===m+1&&(R-=v*g),j===m+2&&(R-=v*g*.35);const M=n.base+C+_+A+T+R;N.push(Number(Ia(M,n.min,n.max).toFixed(1)))}return N}function Yl(e,t=9){if(!e.length)return 0;const n=Math.max(0,e.length-3),r=e[e.length-1]-e[n];return Number(Ia(r,-t,t).toFixed(1))}const LW=[{code:"11",name:""},{code:"26",name:""},{code:"27",name:""},{code:"28",name:""},{code:"29",name:""},{code:"30",name:""},{code:"31",name:""},{code:"36",name:""},{code:"41",name:""},{code:"43",name:""},{code:"44",name:""},{code:"45",name:""},{code:"46",name:""},{code:"47",name:""},{code:"48",name:""},{code:"50",name:""},{code:"51",name:""}],Hx=e=>new Promise(t=>setTimeout(t,e));async function H8(e="LAST_7D",t="default"){await Hx(200);const n=`central-kpis-${e}-${t}`,r=Wp(`${n}-sq-sp`,7,{base:92.2,spread:3.4,min:84,max:99,volatility:.24,trendBias:.12,shockDirection:"down"}),s=Wp(`${n}-pi-sp`,7,{base:27.5,spread:9.2,min:8,max:48,volatility:.34,trendBias:.08,shockDirection:"both"}),i=Wp(`${n}-br-sp`,7,{base:38.5,spread:8.5,min:15,max:58,volatility:.33,trendBias:.16,shockDirection:"up"}),o=Wp(`${n}-dr-sp`,7,{base:90.8,spread:4.8,min:78,max:99,volatility:.26,trendBias:.1,shockDirection:"down"}),l=Wp(`${n}-gs-sp`,7,{base:95.1,spread:2.8,min:88,max:99,volatility:.2,trendBias:.06,shockDirection:"down"}),c=Number(Ia(r[r.length-1]+Ue(`${n}-sq-adjust`,-.6,.6),85,97).toFixed(1)),u=Number(Ia(s[s.length-1]+Ue(`${n}-pi-adjust`,-1.2,1.2),12,42).toFixed(1)),m=Number(Ia(i[i.length-1]+Ue(`${n}-br-adjust`,-1.5,1.5),18,55).toFixed(1)),p=Number(Ia(o[o.length-1]+Ue(`${n}-dr-adjust`,-.8,.8),80,98).toFixed(1)),g=Number(Ia(l[l.length-1]+Ue(`${n}-gs-adjust`,-.5,.5),88,99).toFixed(1)),x=Math.round(Ue(`${n}-sq-d`,1e4,18e3)),y=Math.round(Ue(`${n}-dr-d`,8e3,17e3)),v=Math.round(Ue(`${n}-gs-d`,900,2e3)),N=[{kpiId:"SIGNAL_QUALITY",window:e,numerator:Math.round(Ia(x*c/100+Ue(`${n}-sq-n-jitter`,-120,120),0,x)),denominator:x,value:c,delta7d:Yl(r,3.5),sparkline:r},{kpiId:"POLICY_IMPACT",window:e,numerator:Math.round(Ia(u+Ue(`${n}-pi-n-jitter`,-2.5,2.5),0,100)),denominator:100,value:u,delta7d:Yl(s,8),auxiliary:{rollbackCount:Math.round(Ue(`${n}-pi-rb`,0,3)),warningRegions:Math.round(Ue(`${n}-pi-wr`,1,5))},sparkline:s},{kpiId:"BOTTLENECK_RISK",window:e,numerator:Math.round(Ia(m+Ue(`${n}-br-n-jitter`,-3,3),0,100)),denominator:100,value:m,delta7d:Yl(i,7),auxiliary:{slaViolationRate:Number(Ue(`${n}-br-sla`,5,25).toFixed(1)),l2BacklogCount:Math.round(Ue(`${n}-br-bc`,30,200))},sparkline:i},{kpiId:"DATA_READINESS",window:e,numerator:Math.round(Ia(y*p/100+Ue(`${n}-dr-n-jitter`,-140,140),0,y)),denominator:y,value:p,delta7d:Yl(o,4.5),auxiliary:{missingFieldRate:Number(Ue(`${n}-dr-mf`,1,12).toFixed(1)),linkagePendingRate:Number(Ue(`${n}-dr-lp`,2,15).toFixed(1))},sparkline:o},{kpiId:"GOVERNANCE_SAFETY",window:e,numerator:Math.round(Ia(v*g/100+Ue(`${n}-gs-n-jitter`,-20,20),0,v)),denominator:v,value:g,delta7d:Yl(l,3),auxiliary:{missingResponsible:Math.round(Ue(`${n}-gs-mr`,0,8)),missingExplanation:Math.round(Ue(`${n}-gs-me`,0,6))},sparkline:l}];return{window:e,timestamp:new Date().toISOString(),kpis:N}}async function K8(e="LAST_7D",t="default"){await Hx(150);const n=`central-funnel-${e}-${t}`,r=Math.round(Ue(`${n}-reach`,5e4,12e4)),s=Math.round(r*Ue(`${n}-s0r`,.25,.4)),i=Math.round(s*Ue(`${n}-s1r`,.1,.2)),o=Math.round(i*Ue(`${n}-cnr`,.5,.72)),l=Math.round(o*Ue(`${n}-l0r`,.3,.45)),c=Math.round(o*Ue(`${n}-l1r`,.25,.38)),u=Math.round(o*Ue(`${n}-l2r`,.12,.25)),m=Math.round((c+u)*Ue(`${n}-s2r`,.35,.55)),p=Math.round(m*Ue(`${n}-s3r`,.15,.35)),g=[{stage:"Reach",label:"(Reach)",count:r},{stage:"Stage0",label:"0 ",count:s},{stage:"Stage1",label:"1  ",count:i},{stage:"Consent",label:" ",count:o},{stage:"L0",label:"L0 ",count:l},{stage:"L1",label:"L1 ",count:c},{stage:"L2",label:"L2 ",count:u},{stage:"Stage2",label:"2 ",count:m},{stage:"Stage3",label:"3 ",count:p}],x=g.map((y,v)=>({...y,conversionRate:v===0?100:Number((y.count/g[v-1].count*100).toFixed(1))}));return{window:e,stages:x}}async function z8(e="LAST_7D",t="default"){await Hx(150);const n=`central-bn-${e}-${t}`,r=[{key:"consent_pending_rate",label:" ",value:Number(Ue(`${n}-cp`,15,45).toFixed(1)),unit:"%",threshold:30,status:Ue(`${n}-cp`,15,45)>30?"red":Ue(`${n}-cp`,15,45)>20?"yellow":"green",category:"consent"},{key:"consent_median_days",label:"  ",value:Number(Ue(`${n}-cd`,1.5,6).toFixed(1)),unit:"",threshold:3,status:Ue(`${n}-cd`,1.5,6)>3?"red":Ue(`${n}-cd`,1.5,6)>2?"yellow":"green",category:"consent"},{key:"input_readiness_rate",label:" ",value:Number(Ue(`${n}-ir`,70,98).toFixed(1)),unit:"%",threshold:90,status:Ue(`${n}-ir`,70,98)<90?"red":"green",category:"readiness"},{key:"data_completeness",label:" ",value:Number(Ue(`${n}-dc`,82,99).toFixed(1)),unit:"%",threshold:95,status:Ue(`${n}-dc`,82,99)<95?"yellow":"green",category:"readiness"},{key:"stage2_blocked_rate",label:"2 ",value:Number(Ue(`${n}-s2b`,5,25).toFixed(1)),unit:"%",threshold:15,status:Ue(`${n}-s2b`,5,25)>15?"red":Ue(`${n}-s2b`,5,25)>10?"yellow":"green",category:"blocked"},{key:"stage3_blocked_rate",label:"3 ",value:Number(Ue(`${n}-s3b`,3,20).toFixed(1)),unit:"%",threshold:12,status:Ue(`${n}-s3b`,3,20)>12?"red":Ue(`${n}-s3b`,3,20)>8?"yellow":"green",category:"blocked"},{key:"api_p95_latency",label:"API P95 ",value:Math.round(Ue(`${n}-api`,120,800)),unit:"ms",threshold:500,status:Ue(`${n}-api`,120,800)>500?"red":Ue(`${n}-api`,120,800)>300?"yellow":"green",category:"system"},{key:"queue_depth",label:"  ",value:Math.round(Ue(`${n}-qd`,0,500)),unit:"",threshold:200,status:Ue(`${n}-qd`,0,500)>200?"red":Ue(`${n}-qd`,0,500)>100?"yellow":"green",category:"system"}];return{window:e,metrics:r}}async function q8(e="LAST_7D",t="default"){await Hx(150);const n=`central-link-${e}-${t}`,r=[{stage:"stage2",linkageRate:Number(Ue(`${n}-s2lr`,55,82).toFixed(1)),medianLeadTimeDays:Number(Ue(`${n}-s2lt`,3,12).toFixed(1)),blockedCount:Math.round(Ue(`${n}-s2bc`,15,90)),blockedReasons:[{reason:" ",count:Math.round(Ue(`${n}-s2r1`,5,30))},{reason:" ",count:Math.round(Ue(`${n}-s2r2`,3,20))},{reason:" ",count:Math.round(Ue(`${n}-s2r3`,2,15))},{reason:" ",count:Math.round(Ue(`${n}-s2r4`,1,10))}]},{stage:"stage3",linkageRate:Number(Ue(`${n}-s3lr`,40,70).toFixed(1)),medianLeadTimeDays:Number(Ue(`${n}-s3lt`,7,28).toFixed(1)),blockedCount:Math.round(Ue(`${n}-s3bc`,5,40)),blockedReasons:[{reason:"(dropout)",count:Math.round(Ue(`${n}-s3r1`,3,15))},{reason:" ",count:Math.round(Ue(`${n}-s3r2`,2,10))},{reason:" ",count:Math.round(Ue(`${n}-s3r3`,1,8))}]}];return{window:e,metrics:r}}async function V8(e="LAST_7D",t="default"){await Hx(200);const n=`central-reg-${e}-${t}`,r=LW.map(s=>{const i=`${n}-${s.code}`;return{regionCode:s.code,regionName:s.name,signalQuality:Number(Ue(`${i}-sq`,80,98).toFixed(1)),policyImpact:Number(Ue(`${i}-pi`,10,45).toFixed(1)),bottleneckRisk:Number(Ue(`${i}-br`,15,55).toFixed(1)),dataReadiness:Number(Ue(`${i}-dr`,78,99).toFixed(1)),governanceSafety:Number(Ue(`${i}-gs`,85,99).toFixed(1)),blockedPct:Number(Ue(`${i}-blk`,5,30).toFixed(1)),consentPct:Number(Ue(`${i}-cnp`,40,80).toFixed(1)),backlogCount:Math.round(Ue(`${i}-bc`,5,120))}});return r.sort((s,i)=>i.blockedPct-s.blockedPct),{window:e,rows:r}}async function W8(e="LAST_7D",t,n,r,s="default"){const i=r?`${n}-${r}`:"nation",o=`bundle-${e}-${s}-${i}`,l=t&&t.length>0?t:LW,c=(ne,V,ee)=>l.map(ae=>({regionCode:ae.code,regionName:ae.name,value:Number(Ue(`${o}-${ne}-${ae.code}`,V,ee).toFixed(1))})),u=(ne,V)=>{const ee=V.length??7,ae=Wp(`${o}-${ne}-tr`,ee,{base:V.base,spread:V.spread,min:V.min,max:V.max,volatility:V.volatility,trendBias:V.trendBias,shockDirection:V.shockDirection});return{values:ae,points:ae.map((ue,ce)=>({period:`D${ce+1}`,value:ue}))}},m=(ne,V)=>{const ee=[...ne].sort((ae,ue)=>V?ae.value-ue.value:ue.value-ae.value);return{worst:ee.slice(0,5),best:ee.slice(-5).reverse()}},p=c("sq",80,98),g=m(p,!0),x=u("sq",{base:92,spread:3.2,min:84,max:99,volatility:.24,trendBias:.1,shockDirection:"down"}),v={national:{value:Number(Ia(x.values[x.values.length-1]+Ue(`${o}-sq-nat-j`,-.6,.6),85,97).toFixed(1)),deltaPP:Yl(x.values,3.5),target:95},regions:p,breakdown:[{name:" ",value:Math.round(Ue(`${o}-sq-b1`,8500,16e3)),color:"#2563eb"},{name:"",value:Math.round(Ue(`${o}-sq-b2`,200,800)),color:"#f59e0b"},{name:"",value:Math.round(Ue(`${o}-sq-b3`,100,400)),color:"#ef4444"},{name:"",value:Math.round(Ue(`${o}-sq-b4`,50,200)),color:"#6b7280"}],breakdownType:"donut",cause:[{name:" ",value:Math.round(Ue(`${o}-sq-c1`,120,350))},{name:" ",value:Math.round(Ue(`${o}-sq-c2`,80,250))},{name:" ",value:Math.round(Ue(`${o}-sq-c3`,50,180))},{name:" ",value:Math.round(Ue(`${o}-sq-c4`,30,120))},{name:"",value:Math.round(Ue(`${o}-sq-c5`,10,60))}],causeType:"bar",trend:x.points,worstRegions:g.worst,bestRegions:g.best},N=c("pi",10,50),S=m(N,!1),j=u("pi",{base:27.8,spread:9.4,min:8,max:48,volatility:.34,trendBias:.08,shockDirection:"both"}),_={national:{value:Number(Ia(j.values[j.values.length-1]+Ue(`${o}-pi-nat-j`,-1.4,1.4),12,42).toFixed(1)),deltaPP:Yl(j.values,8),target:20},regions:N,breakdown:[{name:" ",value:Math.round(Ue(`${o}-pi-b1`,3,12)),color:"#7c3aed"},{name:" ",value:Math.round(Ue(`${o}-pi-b2`,1,5)),color:"#a855f7"},{name:" ",value:Math.round(Ue(`${o}-pi-b3`,2,8)),color:"#c084fc"},{name:"",value:Math.round(Ue(`${o}-pi-b4`,1,4)),color:"#e9d5ff"}],breakdownType:"bar",cause:[{name:"SLA ",value:Number(Ue(`${o}-pi-c1`,1,8).toFixed(1))},{name:"  ",value:Number(Ue(`${o}-pi-c2`,.5,5).toFixed(1))},{name:" ",value:Number(Ue(`${o}-pi-c3`,.3,4).toFixed(1))},{name:"  ",value:Number(Ue(`${o}-pi-c4`,.1,2).toFixed(1))}],causeType:"bar",trend:j.points,worstRegions:S.worst,bestRegions:S.best},A=c("br",15,60),T=m(A,!1),R=u("br",{base:38.6,spread:8.9,min:15,max:60,volatility:.35,trendBias:.16,shockDirection:"up"}),P={national:{value:Number(Ia(R.values[R.values.length-1]+Ue(`${o}-br-nat-j`,-1.8,1.8),18,55).toFixed(1)),deltaPP:Yl(R.values,7),target:30},regions:A,breakdown:[{name:"SLA ",value:Number(Ue(`${o}-br-b1`,5,25).toFixed(1)),color:"#dc2626"},{name:"L2 ",value:Number(Ue(`${o}-br-b2`,8,30).toFixed(1)),color:"#f87171"},{name:" ",value:Number(Ue(`${o}-br-b3`,3,18).toFixed(1)),color:"#fca5a5"}],breakdownType:"stacked",cause:[{name:" ",value:Math.round(Ue(`${o}-br-c1`,20,80))},{name:" ",value:Math.round(Ue(`${o}-br-c2`,10,45))},{name:" ",value:Math.round(Ue(`${o}-br-c3`,8,35))},{name:" ",value:Math.round(Ue(`${o}-br-c4`,5,20))},{name:"",value:Math.round(Ue(`${o}-br-c5`,3,15))}],causeType:"bar",trend:R.points,worstRegions:T.worst,bestRegions:T.best},$=c("dr",78,99),w=m($,!0),U=u("dr",{base:90.8,spread:4.6,min:78,max:99,volatility:.26,trendBias:.1,shockDirection:"down"}),I={national:{value:Number(Ia(U.values[U.values.length-1]+Ue(`${o}-dr-nat-j`,-.9,.9),80,98).toFixed(1)),deltaPP:Yl(U.values,4.5),target:95},regions:$,breakdown:[{name:" ",value:Math.round(Ue(`${o}-dr-b1`,7e3,15e3)),color:"#059669"},{name:" ",value:Math.round(Ue(`${o}-dr-b2`,200,900)),color:"#f59e0b"},{name:" ",value:Math.round(Ue(`${o}-dr-b3`,100,500)),color:"#ef4444"}],breakdownType:"donut",cause:[{name:" ",value:Math.round(Ue(`${o}-dr-c1`,80,300))},{name:" ",value:Math.round(Ue(`${o}-dr-c2`,60,250))},{name:" ",value:Math.round(Ue(`${o}-dr-c3`,40,180))},{name:" ",value:Math.round(Ue(`${o}-dr-c4`,20,120))}],causeType:"donut",trend:U.points,worstRegions:w.worst,bestRegions:w.best},G=c("gs",85,99),L=m(G,!0),H=u("gs",{base:95.1,spread:2.6,min:88,max:99,volatility:.2,trendBias:.06,shockDirection:"down"}),K={national:{value:Number(Ia(H.values[H.values.length-1]+Ue(`${o}-gs-nat-j`,-.5,.5),88,99).toFixed(1)),deltaPP:Yl(H.values,3),target:98},regions:G,breakdown:[{name:" ",value:Math.round(Ue(`${o}-gs-b1`,30,150)),color:"#d97706"},{name:" ",value:Math.round(Ue(`${o}-gs-b2`,20,100)),color:"#f59e0b"},{name:" ",value:Math.round(Ue(`${o}-gs-b3`,10,60)),color:"#fbbf24"},{name:" ",value:Math.round(Ue(`${o}-gs-b4`,5,40)),color:"#fcd34d"}],breakdownType:"donut",cause:[{name:"",value:Math.round(Ue(`${o}-gs-c1`,8,25))},{name:"",value:Math.round(Ue(`${o}-gs-c2`,6,20))},{name:"",value:Math.round(Ue(`${o}-gs-c3`,4,18))},{name:"",value:Math.round(Ue(`${o}-gs-c4`,3,15))},{name:"",value:Math.round(Ue(`${o}-gs-c5`,2,12))}],causeType:"lineRank",trend:H.points,worstRegions:L.worst,bestRegions:L.best};return{signalQuality:v,policyImpact:_,bottleneckRisk:P,dataReadiness:I,governanceSafety:K}}const w5e={SIGNAL_QUALITY:{id:"SIGNAL_QUALITY",name:" ",shortName:" ",description:"  :      ( )",formula:"ValidSignals / TotalSignals  100",numeratorField:"validSignals",denominatorField:"totalSignals",unit:"%",higherBetter:!0,baseline:88,target:95,drillToken:"VALID_SIGNALS"},POLICY_IMPACT:{id:"POLICY_IMPACT",name:" ",shortName:" ",description:"/   KPI  (  0-100)",formula:"PolicyChangeImpactScore ()",numeratorField:"impactScore",denominatorField:"maxScore",unit:"%",higherBetter:!1,baseline:35,target:20,drillToken:"POLICY_IMPACT_SCORE",auxiliaryKeys:["rollbackCount","warningRegions"]},BOTTLENECK_RISK:{id:"BOTTLENECK_RISK",name:" ",shortName:" ",description:"SLA    (0-100 )",formula:"(SLAViolation0.4 + L2Backlog0.35 + RecontactNeed0.25)",numeratorField:"weightedRisk",denominatorField:"maxRisk",unit:"%",higherBetter:!1,baseline:45,target:30,drillToken:"BOTTLENECK_SCORE",auxiliaryKeys:["slaViolationRate","l2BacklogCount"]},DATA_READINESS:{id:"DATA_READINESS",name:" ",shortName:" ",description:"     ",formula:"ReadyCases / TotalCases  100",numeratorField:"readyCases",denominatorField:"totalCases",unit:"%",higherBetter:!0,baseline:85,target:95,drillToken:"DATA_READY_CASES",auxiliaryKeys:["missingFieldRate","linkagePendingRate"]},GOVERNANCE_SAFETY:{id:"GOVERNANCE_SAFETY",name:" ",shortName:"",description:"       ()",formula:"AuditReady / TotalAuditable  100",numeratorField:"auditReady",denominatorField:"totalAuditable",unit:"%",higherBetter:!0,baseline:90,target:98,drillToken:"AUDIT_READY",auxiliaryKeys:["missingResponsible","missingExplanation"]}};function $W(){return Object.values(w5e)}const A5e={SIGNAL_QUALITY:{bg:"bg-blue-50",text:"text-blue-700",border:"border-blue-300",icon:"",hex:"#2563eb"},POLICY_IMPACT:{bg:"bg-violet-50",text:"text-violet-700",border:"border-violet-300",icon:"",hex:"#7c3aed"},BOTTLENECK_RISK:{bg:"bg-red-50",text:"text-red-700",border:"border-red-300",icon:"",hex:"#dc2626"},DATA_READINESS:{bg:"bg-emerald-50",text:"text-emerald-700",border:"border-emerald-300",icon:"",hex:"#059669"},GOVERNANCE_SAFETY:{bg:"bg-amber-50",text:"text-amber-700",border:"border-amber-300",icon:"",hex:"#d97706"}},Hp=e=>`${e.toFixed(1)}%`,yy=e=>e.toFixed(1),Q_={signalQuality:{key:"signalQuality",label:" ",shortLabel:"",unit:"%",description:"  :     ",tooltipLines:["       ",": ()  {period}"," ,  //  "],primaryColor:"#2563eb",softBg:"#dbeafe",palette:["#eff6ff","#bfdbfe","#93c5fd","#60a5fa","#3b82f6","#2563eb","#1d4ed8"],valueFormatter:Hp,target:95,warnBelow:90,riskBelow:85,legend:{ticks:[0,20,40,60,80,100],format:Hp,direction:"higherBetter"},analysisSummary:" , /    "},policyImpact:{key:"policyImpact",label:" ",shortLabel:"",unit:"",description:"/   KPI (  0-100)",tooltipLines:["/      ",": ()  {period}","  ,      "],primaryColor:"#7c3aed",softBg:"#ede9fe",palette:["#faf5ff","#e9d5ff","#d8b4fe","#c084fc","#a855f7","#7c3aed","#6d28d9"],valueFormatter:yy,higherIsWorse:!0,legend:{ticks:[0,20,40,60,80,100],format:yy,direction:"higherWorse"},analysisSummary:"/      "},bottleneckRisk:{key:"bottleneckRisk",label:" ",shortLabel:"",unit:"",description:"SLA    (0-100 )",tooltipLines:["    ",": ()  {period}"," ,  //  "],primaryColor:"#dc2626",softBg:"#fee2e2",palette:["#fef2f2","#fecaca","#fca5a5","#f87171","#ef4444","#dc2626","#b91c1c"],valueFormatter:yy,higherIsWorse:!0,warnBelow:void 0,legend:{ticks:[0,20,40,60,80,100],format:yy,direction:"higherWorse"},analysisSummary:"SLA //    "},dataReadiness:{key:"dataReadiness",label:" ",shortLabel:"",unit:"%",description:"    ",tooltipLines:["   /   ",": ()  {period}"," ,   /  "],primaryColor:"#059669",softBg:"#d1fae5",palette:["#ecfdf5","#d1fae5","#a7f3d0","#6ee7b7","#34d399","#059669","#047857"],valueFormatter:Hp,target:95,warnBelow:90,riskBelow:85,legend:{ticks:[0,20,40,60,80,100],format:Hp,direction:"higherBetter"},analysisSummary:"  /    "},governanceSafety:{key:"governanceSafety",label:" ",shortLabel:"",unit:"%",description:" /    ",tooltipLines:["    ",": ()  {period}"," ,   /  "],primaryColor:"#d97706",softBg:"#fef3c7",palette:["#fffbeb","#fef3c7","#fde68a","#fcd34d","#fbbf24","#d97706","#b45309"],valueFormatter:Hp,target:98,warnBelow:95,riskBelow:90,legend:{ticks:[0,20,40,60,80,100],format:Hp,direction:"higherBetter"},analysisSummary:"/  /  "}},X_={SIGNAL_QUALITY:"signalQuality",POLICY_IMPACT:"policyImpact",BOTTLENECK_RISK:"bottleneckRisk",DATA_READINESS:"dataReadiness",GOVERNANCE_SAFETY:"governanceSafety"},J_={signalQuality:"SIGNAL_QUALITY",policyImpact:"POLICY_IMPACT",bottleneckRisk:"BOTTLENECK_RISK",dataReadiness:"DATA_READINESS",governanceSafety:"GOVERNANCE_SAFETY"},_5e={neutral:"text-slate-600",good:"text-emerald-600",warn:"text-amber-600",bad:"text-rose-600"};function nR(e){return typeof e=="number"&&Number.isFinite(e)?e.toLocaleString("ko-KR"):String(e??"-")}function I1(e){return typeof e!="number"||!Number.isFinite(e)?null:`${Math.max(0,Math.min(100,e)).toFixed(1)}%`}function Y8(e,t){const n=[`${t+1}`,e.title,` ${nR(e.value)}`],r=I1(e.percentOfTotal);r&&n.push(`  ${r}`);const s=I1(e.conversionFromPrev);return s&&n.push(` ${s}`),e.helperText&&n.push(e.helperText),n.join(", ")}function C5e({steps:e,ariaLabel:t="  ",density:n="comfortable",layout:r="scroll"}){const s=n==="compact",i=r==="scroll";return!e||e.length===0?a.jsx("div",{className:"rounded-xl border border-slate-200 bg-slate-50 px-3 py-4 text-center text-xs text-slate-500",children:"   ."}):a.jsx("div",{className:he("rounded-2xl border border-slate-200 bg-white p-3 shadow-sm",s?"p-2.5":"p-3"),children:a.jsx("div",{className:he(i?"overflow-x-auto pb-1":"overflow-visible"),children:a.jsx("ol",{className:he("items-stretch",i?"flex min-w-max gap-2":"flex flex-wrap gap-2"),"aria-label":t,children:e.map((o,l)=>{const c=I1(o.percentOfTotal),u=I1(o.conversionFromPrev),m=_5e[o.status??"neutral"],p=typeof o.onClick=="function";return a.jsxs(W.Fragment,{children:[a.jsx("li",{className:he("rounded-xl border border-slate-200 bg-slate-50/70 transition-all",i?"w-[198px] shrink-0":"min-w-[180px] grow basis-[180px]",p&&"hover:border-slate-300 hover:shadow-md"),children:p?a.jsxs("button",{type:"button",onClick:o.onClick,className:he("h-full w-full rounded-xl px-4 py-3 text-left outline-none focus-visible:ring-2 focus-visible:ring-blue-300",s?"px-3 py-2.5":"px-4 py-3"),"aria-label":Y8(o,l),title:o.helperText,children:[a.jsx("p",{className:he("font-semibold text-slate-800",s?"text-[11px]":"text-xs"),children:o.title}),a.jsx("p",{className:he("mt-1.5 font-bold leading-none text-slate-900",s?"text-2xl":"text-[30px]"),children:nR(o.value)}),a.jsxs("div",{className:"mt-2 flex items-center justify-between text-[11px]",children:[a.jsx("span",{className:"text-slate-500",children:o.subLabel??" "}),c?a.jsx("span",{className:he("font-semibold",m),children:c}):null]}),u?a.jsxs("div",{className:"mt-2 border-t border-slate-200 pt-1.5 text-[11px]",children:[a.jsx("span",{className:"text-slate-500",children:": "}),a.jsx("span",{className:he("font-semibold",m),children:u})]}):null]}):a.jsxs("div",{className:he("h-full rounded-xl px-4 py-3 text-left outline-none focus-visible:ring-2 focus-visible:ring-blue-300",s?"px-3 py-2.5":"px-4 py-3"),tabIndex:0,"aria-label":Y8(o,l),title:o.helperText,children:[a.jsx("p",{className:he("font-semibold text-slate-800",s?"text-[11px]":"text-xs"),children:o.title}),a.jsx("p",{className:he("mt-1.5 font-bold leading-none text-slate-900",s?"text-2xl":"text-[30px]"),children:nR(o.value)}),a.jsxs("div",{className:"mt-2 flex items-center justify-between text-[11px]",children:[a.jsx("span",{className:"text-slate-500",children:o.subLabel??" "}),c?a.jsx("span",{className:he("font-semibold",m),children:c}):null]}),u?a.jsxs("div",{className:"mt-2 border-t border-slate-200 pt-1.5 text-[11px]",children:[a.jsx("span",{className:"text-slate-500",children:": "}),a.jsx("span",{className:he("font-semibold",m),children:u})]}):null]})}),l<e.length-1?a.jsx("li",{"aria-hidden":"true",className:"flex shrink-0 items-center justify-center px-0.5 text-slate-300",children:a.jsx(ji,{size:18})}):null]},o.id)})})})})}const bc="true".toLowerCase()!=="false",yc="/api/central";function vc(e,t){const n=new URLSearchParams;Object.entries(t).forEach(([s,i])=>{i==null||i===""||n.set(s,String(i))});const r=n.toString();return r?`${e}?${r}`:e}async function Nc(e){const t=await fetch(e,{method:"GET",headers:{Accept:"application/json"}});if(!t.ok)throw new Error(`HTTP ${t.status}`);return await t.json()}async function FW(e="LAST_7D",t="default"){if(!bc)return H8(e,t);try{return await Nc(vc(`${yc}/dashboard/kpis`,{window:e,periodVariant:t}))}catch{return H8(e,t)}}async function T5e(e="LAST_7D",t="default"){if(!bc)return K8(e,t);try{return await Nc(vc(`${yc}/metrics/funnel`,{window:e,periodVariant:t}))}catch{return K8(e,t)}}async function O5e(e="LAST_7D",t="default"){if(!bc)return z8(e,t);try{return await Nc(vc(`${yc}/metrics/bottlenecks`,{window:e,periodVariant:t}))}catch{return z8(e,t)}}async function R5e(e="LAST_7D",t="default"){if(!bc)return q8(e,t);try{return await Nc(vc(`${yc}/metrics/linkage`,{window:e,periodVariant:t}))}catch{return q8(e,t)}}async function k5e(e="LAST_7D",t="default"){if(!bc)return V8(e,t);try{return await Nc(vc(`${yc}/metrics/regions`,{window:e,periodVariant:t}))}catch{return V8(e,t)}}async function Q8(e="LAST_7D",t,n,r,s="default"){if(!bc)return W8(e,t,n,r,s);try{const i=t?.map(o=>o.code).join(",");return await Nc(vc(`${yc}/dashboard/bundle`,{window:e,periodVariant:s,scope_level:n??"nation",scope_id:r??"KR",child_codes:i}))}catch{return W8(e,t,n,r,s)}}async function UW(e={}){if(!bc)return nm;try{return await Nc(vc(`${yc}/policy/changes`,e))}catch{return nm}}async function I5e(e={}){if(!bc)return B8;try{return await Nc(vc(`${yc}/quality/drivers`,e))}catch{return B8}}async function D5e(e={}){if(!bc)return Ag;try{return await Nc(vc(`${yc}/quality/alerts`,e))}catch{return Ag}}async function P5e(e={}){if(!bc)return G8;try{return await Nc(vc(`${yc}/audit/unified`,e))}catch{return G8}}const vy=6e4,Ny=30*6e4,M5e={funnelData:[],bottleneckData:[],linkageData:[],regionData:[]};function X8(e){if(e.level!=="nation"&&e.subRegions?.length)return e.subRegions.map(t=>({code:t.id,name:t.name}))}function J8(e,t,n,r){const s=e.subRegions?.length?e.subRegions.map(i=>i.id).join("|"):"none";return["dashboard",e.level,e.regionCode??"KR",s,t,r??"default",n]}function L5e(e,t,n,r={}){const s=M1(),i=h.useMemo(()=>X8(e),[e]),o=r.loadDrilldown??!1,l=r.periodVariant,c=h.useMemo(()=>J8(e,t,n,l),[e,t,l,n]),u=go({queryKey:[...c,"kpis"],queryFn:async()=>(await FW(t,l)).kpis,placeholderData:am,staleTime:vy,gcTime:Ny,refetchOnWindowFocus:!1}),m=go({queryKey:[...c,"bundle"],queryFn:()=>Q8(t,i,e.level,e.regionCode,l),placeholderData:am,staleTime:vy,gcTime:Ny,refetchOnWindowFocus:!1}),p=go({queryKey:[...c,"drilldown"],queryFn:async()=>{const[S,j,C,_]=await Promise.all([T5e(t,l),O5e(t,l),R5e(t,l),k5e(t,l)]);return{funnelData:S.stages,bottleneckData:j.metrics,linkageData:C.metrics,regionData:_.rows}},enabled:o,placeholderData:am,staleTime:vy,gcTime:Ny,refetchOnWindowFocus:!1}),g=h.useCallback(S=>{const j=X8(S),C=J8(S,t,n,l);s.prefetchQuery({queryKey:[...C,"bundle"],queryFn:()=>Q8(t,j,S.level,S.regionCode,l),staleTime:vy,gcTime:Ny})},[t,l,s,n]),x=!!(m.data&&u.data),y=x&&(m.isFetching||o&&p.isFetching),v=x&&!y&&u.isFetching,N=x?y?"loadingScopeChange":v?"refreshing":"ready":"loadingInitial";return{centralKpis:u.data??[],dashData:m.data??null,drilldownData:p.data??M5e,loadingStage:N,isInitialLoading:N==="loadingInitial",isScopeChangeLoading:N==="loadingScopeChange",isRefreshing:N==="refreshing",prefetchScope:g}}function $5e({visible:e,stage:t="scopeChange",label:n,className:r}){if(!e)return null;const s=n??(t==="refreshing"?"   ":"  ");return a.jsxs("div",{className:he("pointer-events-none absolute inset-0 z-30",r),children:[a.jsx("div",{className:he("absolute inset-0 transition-opacity duration-300",t==="scopeChange"?"bg-white/35 backdrop-blur-[1px]":"bg-white/18")}),a.jsx("div",{className:"absolute inset-x-0 top-0 h-0.5 overflow-hidden bg-blue-100/90",children:a.jsx("div",{className:"ns-loading-overlay-bar h-full w-1/3 bg-blue-600"})}),a.jsx("div",{className:"absolute right-3 top-3 rounded-md border border-blue-100 bg-white/90 px-2 py-1 text-[11px] font-medium text-blue-700 shadow-sm",children:s})]})}function BW({value:e,className:t,decimals:n=0,duration:r=420,locale:s="ko-KR",formatter:i,prefix:o="",suffix:l=""}){const[c,u]=h.useState(e),m=h.useRef(e),p=h.useRef(null);h.useEffect(()=>{if(!Number.isFinite(e)){u(e),m.current=e;return}const x=performance.now(),y=m.current,v=e;if(!Number.isFinite(y)||r<=0){u(v),m.current=v;return}p.current&&cancelAnimationFrame(p.current);const N=S=>{const j=Math.min(1,(S-x)/r),C=1-Math.pow(1-j,3),_=y+(v-y)*C;u(_),j<1?p.current=requestAnimationFrame(N):(m.current=v,p.current=null)};return p.current=requestAnimationFrame(N),()=>{p.current&&cancelAnimationFrame(p.current),p.current=null}},[r,e]);const g=i?i(c):new Intl.NumberFormat(s,{minimumFractionDigits:n,maximumFractionDigits:n}).format(c);return a.jsx("span",{className:he("tabular-nums",t),children:`${o}${g}${l}`})}function F5e({top5:e,childrenCodes:t,parentRegionCode:n}){const r=new Set(t),s=e.some(l=>!r.has(l.code)),i=n!=null&&e.some(l=>l.code===n),o=!s&&!i;return console.assert(o,"[Top5] invalid candidate detected",{top5Codes:e.map(l=>l.code),parentRegionCode:n,childrenCodes:t}),o}const K3="central.settings.v1",Z_=(e,t,n)=>Math.min(n,Math.max(t,e)),ka={matrixThresholds:{slaCut:86,dataCut:86},headline:{maxItems:3,includePartialBadge:!0},drilldown:{keepPreviousData:!0,prefetchEnabled:!0,useScopeOverlay:!0},notifications:{batchDelayed:!0,qualityRisk:!0,governanceGap:!0,policyImpactSpike:!1},reports:{defaultPeriod:"weekly",includeFilterContext:!0}};function U5e(e){return e==="weekly"||e==="monthly"||e==="quarterly"||e==="yearly_cum"}function GW(e){return{matrixThresholds:{slaCut:Z_(Number(e?.matrixThresholds?.slaCut??ka.matrixThresholds.slaCut),70,99),dataCut:Z_(Number(e?.matrixThresholds?.dataCut??ka.matrixThresholds.dataCut),70,99)},headline:{maxItems:Z_(Number(e?.headline?.maxItems??ka.headline.maxItems),1,5),includePartialBadge:!!(e?.headline?.includePartialBadge??ka.headline.includePartialBadge)},drilldown:{keepPreviousData:!!(e?.drilldown?.keepPreviousData??ka.drilldown.keepPreviousData),prefetchEnabled:!!(e?.drilldown?.prefetchEnabled??ka.drilldown.prefetchEnabled),useScopeOverlay:!!(e?.drilldown?.useScopeOverlay??ka.drilldown.useScopeOverlay)},notifications:{batchDelayed:!!(e?.notifications?.batchDelayed??ka.notifications.batchDelayed),qualityRisk:!!(e?.notifications?.qualityRisk??ka.notifications.qualityRisk),governanceGap:!!(e?.notifications?.governanceGap??ka.notifications.governanceGap),policyImpactSpike:!!(e?.notifications?.policyImpactSpike??ka.notifications.policyImpactSpike)},reports:{defaultPeriod:U5e(e?.reports?.defaultPeriod)?e.reports.defaultPeriod:ka.reports.defaultPeriod,includeFilterContext:!!(e?.reports?.includeFilterContext??ka.reports.includeFilterContext)}}}function HW(){try{if(typeof window>"u")return{...ka};const e=localStorage.getItem(K3);if(!e)return{...ka};const t=JSON.parse(e);return GW(t)}catch{return{...ka}}}function B5e(e){const t=GW(e);typeof window>"u"||localStorage.setItem(K3,JSON.stringify(t))}function G5e(){return typeof window<"u"&&localStorage.removeItem(K3),{...ka}}function H5e(){const e=h.useRef(null),[t,n]=h.useState({width:typeof window<"u"?window.innerWidth:1920,height:typeof window<"u"?window.innerHeight:1080}),r=h.useRef(null);return h.useEffect(()=>{const s=e.current;if(!s)return;const i=()=>{r.current&&cancelAnimationFrame(r.current),r.current=requestAnimationFrame(()=>{const c=s.getBoundingClientRect();n(u=>u.width===c.width&&u.height===c.height?u:{width:c.width,height:c.height})})},o=new ResizeObserver(i);o.observe(s);const l=()=>i();return window.addEventListener("resize",l,{passive:!0}),i(),()=>{o.disconnect(),window.removeEventListener("resize",l),r.current&&cancelAnimationFrame(r.current)}},[]),[e,t]}const H0={blue:"#3b82f6",red:"#ef4444",green:"#22c55e",orange:"#f59e0b",cyan:"#06b6d4"},Z8=[{id:"total_cases",label:" ",unit:"",color:"blue",iconBg:"bg-blue-100 text-blue-600",getValue:e=>Math.round(kr(`${e}-new`,1200,2800))},{id:"completion",label:" ",unit:"",color:"green",iconBg:"bg-green-100 text-green-600",getValue:e=>Math.round(kr(`${e}-progress`,800,1500))},{id:"consultation_time",label:"SLA ",unit:"%",color:"red",iconBg:"bg-red-100 text-red-600",getValue:e=>Number(kr(`${e}-sla`,2.5,8.5).toFixed(1))},{id:"followup_dropout",label:" ",unit:"%",color:"orange",iconBg:"bg-amber-100 text-amber-600",getValue:e=>Number(kr(`${e}-data`,3,12).toFixed(1))},{id:"dropout",label:" ",unit:"%",color:"purple",iconBg:"bg-purple-100 text-purple-600",getValue:e=>Number(kr(`${e}-recontact`,5,15).toFixed(1))}],K5e=e=>{const{cx:t,cy:n,midAngle:r,innerRadius:s,outerRadius:i,percent:o,name:l}=e;if(o*100<5)return null;const c=Math.PI/180,u=s+(i-s)*.5,m=t+u*Math.cos(-r*c),p=n+u*Math.sin(-r*c);return a.jsx("text",{x:m,y:p,fill:"#fff",textAnchor:"middle",dominantBaseline:"central",fontSize:10,fontWeight:600,style:{textShadow:"0 1px 2px rgba(0,0,0,0.3)"},children:`${(o*100).toFixed(1)}%`})},z5e=e=>{let t=0;for(let n=0;n<e.length;n++)t=t*31+e.charCodeAt(n)>>>0;return t},kr=(e,t,n)=>{const r=z5e(e)%1e3/1e3;return t+(n-t)*r},eU=["#3b82f6","#22c55e","#f59e0b","#8b5cf6","#ec4899","#06b6d4"];function q5e({kpiDef:e,data:t,colorIndex:n,analyticsPeriod:r}){if(!t)return a.jsx("div",{className:"bg-gray-50 rounded-lg p-2 h-[80px] flex items-center justify-center border border-gray-200 shadow-sm",children:a.jsx("div",{className:"w-full h-10 bg-gray-100 rounded animate-pulse"})});const{dailyData:s,current:i,baseline:o,target:l,unit:c,higherBetter:u}=t,m=eU[n%eU.length],p=u?i>=l:i<=l,g=r==="week"?0:r==="month"?2:r==="year"?3:0,x=["bg-blue-50/50","bg-green-50/50","bg-amber-50/50","bg-purple-50/50","bg-pink-50/50","bg-cyan-50/50"],y=x[n%x.length];return a.jsxs("div",{className:`${y} rounded-lg p-2 border border-gray-200 shadow-sm`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-1 pb-1 border-b border-gray-200/60",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("span",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:m}}),a.jsx("span",{className:"text-[12px] font-semibold text-gray-700 truncate",children:e.name})]}),a.jsxs("span",{className:`text-[13px] font-bold flex-shrink-0 ${p?"text-green-600":"text-amber-600"}`,children:[i,c]})]}),a.jsx("div",{style:{height:"90px"},children:a.jsx(Da,{width:"100%",height:"100%",children:a.jsxs(Bk,{data:s,margin:{top:5,right:8,left:8,bottom:2},children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:`kpiGrad-${e.id}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:m,stopOpacity:.35}),a.jsx("stop",{offset:"100%",stopColor:m,stopOpacity:.05})]})}),a.jsx(Rs,{strokeDasharray:"3 3",vertical:!1,stroke:"#e5e7eb"}),a.jsx(oa,{dataKey:"date",tick:{fontSize:14,fill:"#374151",fontWeight:500},tickLine:!1,axisLine:{stroke:"#d1d5db"},interval:g}),a.jsx(Zr,{tick:{fontSize:13,fill:"#6b7280"},tickLine:!1,axisLine:!1,domain:["auto","auto"],width:44}),a.jsx(or,{contentStyle:{fontSize:"14px",padding:"6px 10px",borderRadius:"6px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)"},formatter:v=>[`${v}${c}`,e.name],labelFormatter:v=>`${v}`}),a.jsx(sc,{y:l,stroke:"#ef4444",strokeDasharray:"4 2",strokeWidth:1.5,label:{value:"",fontSize:12,fill:"#ef4444",position:"right"}}),a.jsx(sc,{y:o,stroke:"#9ca3af",strokeDasharray:"3 3",strokeWidth:1}),a.jsx(mc,{type:"monotone",dataKey:"value",fill:`url(#kpiGrad-${e.id})`,stroke:"none",isAnimationActive:!0,animationDuration:500,animationEasing:"ease-out"}),a.jsx(Ja,{type:"monotone",dataKey:"value",stroke:m,strokeWidth:2,dot:!1,isAnimationActive:!0,animationDuration:500,animationEasing:"ease-out",activeDot:{r:4,fill:m,stroke:"#fff",strokeWidth:2}})]})})})]})}function K0({title:e,isOpen:t,onToggle:n,summary:r,children:s,className:i=""}){return a.jsxs("div",{className:`bg-white border border-gray-200 rounded-lg overflow-hidden ${i}`,children:[a.jsxs("button",{onClick:n,className:"w-full flex items-center justify-between px-3 py-2 hover:bg-gray-50 transition-colors",children:[a.jsx("span",{className:"text-[12px] font-semibold text-gray-700",children:e}),a.jsxs("div",{className:"flex items-center gap-2",children:[!t&&r&&a.jsx("span",{className:"text-[11px] text-gray-400 truncate max-w-[120px]",children:r}),t?a.jsx(id,{className:"h-3.5 w-3.5 text-gray-400 shrink-0"}):a.jsx(Ds,{className:"h-3.5 w-3.5 text-gray-400 shrink-0"})]})]}),t&&a.jsx("div",{className:"border-t border-gray-100 px-3 py-2",children:s})]})}function tU({title:e,badge:t,height:n=280,children:r,className:s=""}){return a.jsxs("div",{className:`bg-white border border-gray-200 rounded-lg overflow-hidden flex flex-col ${s}`,style:{height:`${n}px`},children:[a.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-gray-100 shrink-0",children:[a.jsx("span",{className:"text-[12px] font-semibold text-gray-700",children:e}),t]}),a.jsx("div",{className:"flex-1 overflow-y-auto px-3 py-2 min-h-0",children:r})]})}const V5e={SIGNAL_QUALITY:a.jsx(fs,{className:"h-4 w-4"}),POLICY_IMPACT:a.jsx(pR,{className:"h-4 w-4"}),BOTTLENECK_RISK:a.jsx(Zl,{className:"h-4 w-4"}),DATA_READINESS:a.jsx(FU,{className:"h-4 w-4"}),GOVERNANCE_SAFETY:a.jsx(ec,{className:"h-4 w-4"})},nU=["dualRisk","dataRisk","slaRisk","good"],rU={SIGNAL_QUALITY:"     ",POLICY_IMPACT:"/      ",BOTTLENECK_RISK:"SLA     ",DATA_READINESS:"      ",GOVERNANCE_SAFETY:"     "},W5e={SIGNAL_QUALITY:"         .",POLICY_IMPACT:"          .",BOTTLENECK_RISK:"          .",DATA_READINESS:"          .",GOVERNANCE_SAFETY:"            ."},aU={SIGNAL_QUALITY:"    /  .",POLICY_IMPACT:"         .",BOTTLENECK_RISK:"SLA ,  ,      .",DATA_READINESS:"         .",GOVERNANCE_SAFETY:"//      ."},Y5e={SIGNAL_QUALITY:":   (   )",POLICY_IMPACT:":   (100  )",BOTTLENECK_RISK:":   (100  )",DATA_READINESS:":      ",GOVERNANCE_SAFETY:":     "},z0={ok:"",warn:"",risk:" "},eC={ok:"bg-green-50 text-green-700 border-green-200",warn:"bg-amber-50 text-amber-700 border-amber-200",risk:"bg-red-50 text-red-700 border-red-200"},Kc={good:{label:"",guideLabel:"",description:" SLA   ",badgeClass:"bg-green-50 text-green-700 border-green-200",dotClass:"bg-green-500"},dataRisk:{label:"  ",guideLabel:" ",description:" SLA   ",badgeClass:"bg-amber-50 text-amber-700 border-amber-200",dotClass:"bg-amber-400"},slaRisk:{label:"  ",guideLabel:" ",description:" SLA   ",badgeClass:"bg-orange-50 text-orange-700 border-orange-200",dotClass:"bg-orange-500"},dualRisk:{label:"  ",guideLabel:" ",description:" SLA   ",badgeClass:"bg-red-50 text-red-700 border-red-200",dotClass:"bg-red-500"}};function Q5e(e){return nU.reduce((t,n)=>e[n]>e[t]?n:t,nU[0])}function sU(e,t){const n=Number(e);return Number.isFinite(n)?Math.min(99,Math.max(70,n)):t}const iU=[" "," "," "," "];function Fl(e){return`${e>=0?"+":""}${e.toFixed(1)}pp`}function oU(e,t){return Number((t-e.target).toFixed(1))}function X5e(e,t){const n=e.higherBetter?-t:t;return Number(n.toFixed(1))}function J5e(e,t,n){const r=e+Math.max(0,t*.8)+(n?2.5:0);return r>=7?"risk":r>=3?"warn":"ok"}function q0(e,t,n,r){const s=e>=n,i=t>=r;return s&&i?"good":s&&!i?"dataRisk":!s&&i?"slaRisk":"dualRisk"}const Z5e={weekly:"LAST_7D",monthly:"LAST_30D",quarterly:"LAST_90D",yearly_cum:"LAST_90D"},eIe={weekly:"",monthly:"",quarterly:"",yearly_cum:"()"},lU=260,tC=420;function tIe({title:e,lines:t,color:n,anchorRef:r,visible:s}){const i=h.useRef(null),[o,l]=h.useState(null);return h.useEffect(()=>{if(!s||!r.current){l(null);return}const c=r.current.getBoundingClientRect(),u=340,m=34+t.length*19;let p=c.bottom+6,g=c.left+c.width/2-u/2;g<8&&(g=8),g+u>window.innerWidth-8&&(g=window.innerWidth-u-8),p+m>window.innerHeight-8&&(p=c.top-m-6),l({top:p,left:g})},[s,r,t.length]),!s||!o?null:vh.createPortal(a.jsxs("div",{ref:i,role:"tooltip",className:"fixed z-[9999] rounded-lg shadow-lg border border-gray-200 bg-white text-left pointer-events-none",style:{top:o.top,left:o.left,maxWidth:360,minWidth:300},children:[a.jsx("div",{className:"h-[3px] rounded-t-lg",style:{backgroundColor:n}}),a.jsxs("div",{className:"px-3 py-2.5 space-y-1",children:[a.jsx("p",{className:"text-[11px] leading-[1.45] font-semibold text-gray-800",children:e}),t.map((c,u)=>a.jsx("p",{className:`text-[11px] leading-[1.45] ${u===t.length-1?"text-gray-500":"text-gray-600"}`,children:c},u))]})]}),document.body)}function nIe({kpi:e,def:t,isActive:n,onClick:r,plainLine:s,tooltipTitle:i,tooltipLines:o,tooltipColor:l,severityLabel:c,severityClass:u}){const m=A5e[t.id],p=t.higherBetter?e.delta7d>=0?"text-green-600":"text-red-600":e.delta7d<=0?"text-green-600":"text-red-600",g=t.higherBetter?e.value>=t.target:e.value<=t.target,x=h.useRef(null),[y,v]=h.useState(!1),N=h.useRef(),S=h.useCallback(()=>{N.current=setTimeout(()=>v(!0),200)},[]),j=h.useCallback(()=>{clearTimeout(N.current),v(!1)},[]);return h.useEffect(()=>()=>clearTimeout(N.current),[]),a.jsxs(a.Fragment,{children:[a.jsxs("button",{ref:x,onClick:r,onMouseEnter:S,onMouseLeave:j,onFocus:S,onBlur:j,onKeyDown:C=>{C.key==="Escape"&&j()},"aria-describedby":y?`kpi-tip-${t.id}`:void 0,className:`relative flex flex-col gap-2 px-3.5 py-3 rounded-xl border-2 transition-all min-w-[196px] text-left ${n?`${m.border} ${m.bg} shadow-md ring-2 ring-offset-1 ring-${m.border.replace("border-","")}/30`:"border-gray-200 bg-white hover:border-gray-300 hover:shadow-sm"}`,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:`p-1 rounded-md ${n?m.bg:"bg-gray-100"} ${n?m.text:"text-gray-500"}`,children:V5e[t.id]}),a.jsx("span",{className:`text-[11px] font-semibold truncate ${n?m.text:"text-gray-600"}`,children:t.shortName})]}),a.jsx("p",{className:"text-[10px] text-gray-500 leading-[1.4]",children:s}),a.jsx("span",{className:`inline-flex w-fit items-center rounded-full border px-1.5 py-0.5 text-[10px] font-semibold ${u}`,children:c}),a.jsxs("div",{className:"flex items-end gap-1.5",children:[a.jsxs("span",{className:`text-lg font-bold tabular-nums ${n?m.text:"text-gray-800"}`,children:[a.jsx(BW,{value:e.value,decimals:t.unit==="%"?1:0}),t.unit]}),a.jsxs("span",{className:`text-[11px] font-medium ${p}`,children:[e.delta7d>0?"+":"",e.delta7d,"pp"]})]}),a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("div",{className:"flex-1 h-1.5 rounded-full bg-gray-200 overflow-hidden",children:a.jsx("div",{className:`h-full rounded-full transition-all ${g?"bg-green-500":"bg-amber-400"}`,style:{width:`${Math.min(100,e.value/t.target*100)}%`}})}),a.jsxs("span",{className:"text-[10px] text-gray-400",children:[" ",t.target,t.unit]})]}),a.jsxs("div",{className:"text-[10px] text-gray-400",children:[e.numerator.toLocaleString()," / ",e.denominator.toLocaleString()]})]}),a.jsx(tIe,{title:i,lines:o,color:l,anchorRef:x,visible:y})]})}function rIe({stages:e}){const t=e[0]?.count??0,n=e.map((r,s)=>{const i=t>0?Number((r.count/t*100).toFixed(1)):0,o=s===0?void 0:r.conversionRate,l=o==null?"neutral":o>=80?"good":o>=55?"warn":"bad";return{id:`funnel-${r.stage}-${s}`,title:r.label,value:r.count,subLabel:" ",percentOfTotal:i,conversionFromPrev:o,status:l}});return a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs font-semibold text-gray-700 mb-3",children:"  "}),a.jsx(C5e,{steps:n,ariaLabel:"    ",density:"compact",layout:"scroll"})]})}function aIe({metrics:e}){const t=[{key:"consent",label:"",color:"#8b5cf6"},{key:"readiness",label:" Readiness",color:"#3b82f6"},{key:"blocked",label:" ",color:"#ef4444"},{key:"system",label:" ",color:"#06b6d4"}];return a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs font-semibold text-gray-700 mb-3",children:" "}),a.jsx("div",{className:"space-y-3",children:t.map(n=>{const r=e.filter(s=>s.category===n.key);return r.length===0?null:a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-1.5 mb-1.5",children:[a.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:n.color}}),a.jsx("span",{className:"text-[11px] font-semibold text-gray-600",children:n.label})]}),a.jsx("div",{className:"space-y-1",children:r.map(s=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"flex-1 text-[11px] text-gray-600 truncate",children:s.label}),a.jsxs("span",{className:`text-[11px] font-bold ${s.status==="red"?"text-red-600":s.status==="yellow"?"text-amber-600":"text-green-600"}`,children:[s.value,s.unit]}),a.jsx("span",{className:`w-2 h-2 rounded-full ${s.status==="red"?"bg-red-500":s.status==="yellow"?"bg-amber-400":"bg-green-500"}`})]},s.key))})]},n.key)})})]})}function sIe({metrics:e}){return a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs font-semibold text-gray-700 mb-3",children:" & "}),a.jsx("div",{className:"space-y-3",children:e.map(t=>a.jsxs("div",{className:"border border-gray-100 rounded-lg p-2.5",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-[12px] font-semibold text-gray-700",children:t.stage==="stage2"?"2 ":"3 "}),a.jsxs("span",{className:`text-sm font-bold ${t.linkageRate>=60?"text-green-600":t.linkageRate>=40?"text-amber-600":"text-red-600"}`,children:[t.linkageRate,"%"]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-[11px] mb-2",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"median "}),a.jsxs("div",{className:"font-semibold text-gray-800",children:[t.medianLeadTimeDays,""]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:" "}),a.jsxs("div",{className:"font-semibold text-red-600",children:[t.blockedCount,""]})]})]}),t.blockedReasons.length>0&&a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("span",{className:"text-[10px] text-gray-400",children:" "}),t.blockedReasons.map(n=>a.jsxs("div",{className:"flex items-center justify-between text-[11px]",children:[a.jsx("span",{className:"text-gray-600",children:n.reason}),a.jsxs("span",{className:"font-medium text-gray-800",children:[n.count,""]})]},n.reason))]})]},t.stage))})]})}function iIe({rows:e}){const t=n=>n.replace(/||||$/g,"").trim()||n.slice(0,2);return a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[a.jsxs("div",{className:"text-xs font-semibold text-gray-700 mb-2",children:["   ",a.jsx("span",{className:"text-[10px] text-gray-400 ml-1",children:"(worst-first)"})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-[11px]",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[a.jsx("th",{className:"px-1.5 py-1 text-left font-medium text-gray-600 sticky left-0 bg-gray-50 z-10",children:""}),a.jsx("th",{className:"px-1.5 py-1 text-right font-medium text-gray-600",children:""}),a.jsx("th",{className:"px-1.5 py-1 text-right font-medium text-gray-600",children:""}),a.jsx("th",{className:"px-1.5 py-1 text-right font-medium text-gray-600",children:""}),a.jsx("th",{className:"px-1.5 py-1 text-right font-medium text-gray-600",children:""}),a.jsx("th",{className:"px-1.5 py-1 text-right font-medium text-gray-600",children:""}),a.jsx("th",{className:"px-1.5 py-1 text-right font-medium text-gray-600",children:"%"}),a.jsx("th",{className:"px-1.5 py-1 text-right font-medium text-gray-600",children:""})]})}),a.jsx("tbody",{children:e.map((n,r)=>a.jsxs("tr",{className:`border-b border-gray-100 hover:bg-amber-50/30 ${r<3?"bg-red-50/30":""}`,children:[a.jsx("td",{className:"px-1.5 py-1 font-medium text-gray-800 sticky left-0 bg-inherit z-10",children:t(n.regionName)}),a.jsxs("td",{className:"px-1.5 py-1 text-right tabular-nums",children:[n.signalQuality,"%"]}),a.jsxs("td",{className:"px-1.5 py-1 text-right tabular-nums",children:[n.policyImpact,"%"]}),a.jsxs("td",{className:`px-1.5 py-1 text-right tabular-nums font-medium ${n.bottleneckRisk>40?"text-red-600":""}`,children:[n.bottleneckRisk,"%"]}),a.jsxs("td",{className:"px-1.5 py-1 text-right tabular-nums",children:[n.dataReadiness,"%"]}),a.jsxs("td",{className:"px-1.5 py-1 text-right tabular-nums",children:[n.governanceSafety,"%"]}),a.jsxs("td",{className:`px-1.5 py-1 text-right tabular-nums font-medium ${n.blockedPct>20?"text-red-600":n.blockedPct>15?"text-amber-600":"text-green-600"}`,children:[n.blockedPct,"%"]}),a.jsx("td",{className:"px-1.5 py-1 text-right tabular-nums",children:n.backlogCount})]},n.regionCode))})]})})]})}function cU({onNavigate:e}){const t="total_cases",[n,r]=h.useState("weekly"),s=h.useMemo(()=>Z5e[n],[n]),i=eIe[n],o=h.useMemo(()=>({weekly:"week",monthly:"month",quarterly:"quarter",yearly_cum:"year"})[n],[n]),[l,c]=h.useState("geomap"),[u,m]=h.useState(null),[p,g]=h.useState(!1),[x,y]=h.useState({opsSummary:!1,ageRisk:!1,kpiTable:!1}),v=h.useCallback(Q=>{y(pe=>({...pe,[Q]:!pe[Q]}))},[]),[N,S]=h.useState(!1),[j,C]=h.useState(!1),[_,A]=h.useState({type:"none"}),[T,R]=h.useState(null),[M,P]=h.useState(null),[$,w]=h.useState({slaMatrix:!1,stageDistribution:!1}),U=h.useCallback(Q=>{w(pe=>({...pe,[Q]:!pe[Q]}))},[]),X=t,[I,G]=H5e(),[L,H]=h.useState(null),[F,K]=h.useState([]),ne=h.useCallback(Q=>{K(Q.map(pe=>({id:pe.code,name:pe.name})))},[]),[V,ee]=h.useState("SIGNAL_QUALITY"),[ae,ue]=h.useState(!1),[ce,Z]=h.useState(tC),[ie,Se]=h.useState(!1),fe=h.useRef({startY:0,startHeight:tC}),Te=h.useMemo(()=>$W(),[]),Pe=h.useMemo(()=>X_[V],[V]),oe=h.useMemo(()=>Q_[Pe],[Pe]),le=h.useMemo(()=>Te.find(Q=>Q.id===V)??Te[0],[Te,V]),ye=h.useMemo(()=>({SIGNAL_QUALITY:"blue",POLICY_IMPACT:"purple",BOTTLENECK_RISK:"red",DATA_READINESS:"green",GOVERNANCE_SAFETY:"orange"})[V],[V]),{drillLevel:_e,drillPath:te,selectedRegion:z,drillUp:Ne,drillTo:me,resetDrill:xe,setScope:et}=b5e(),[Fe,pt]=h.useState(null),St=Fe?.code??z?.code??"national",qe=h.useMemo(()=>{const Q=G.width||(typeof window<"u"?window.innerWidth:1920);return Q>=1024?"desktop":Q>=768?"tablet":"mobile"},[G.width]),rn=h.useMemo(()=>{const Q=G.height||(typeof window<"u"?window.innerHeight:900),pe=qe==="mobile"?.55:.72;return Math.max(lU+40,Math.floor(Q*pe))},[G.height,qe]),at=h.useCallback(Q=>Math.min(rn,Math.max(lU,Q)),[rn]);h.useEffect(()=>{Z(Q=>at(Q))},[at]);const jt=h.useCallback(Q=>{qe!=="mobile"&&(Q.preventDefault(),fe.current={startY:Q.clientY,startHeight:ce},Se(!0))},[qe,ce]),It=h.useCallback(()=>{Z(at(tC))},[at]);h.useEffect(()=>{if(!ie)return;const Q=Ge=>{const st=Ge.clientY-fe.current.startY,it=at(fe.current.startHeight+st);Z(it)},pe=()=>{Se(!1)};return window.addEventListener("mousemove",Q),window.addEventListener("mouseup",pe),document.body.style.userSelect="none",document.body.style.cursor="ns-resize",()=>{window.removeEventListener("mousemove",Q),window.removeEventListener("mouseup",pe),document.body.style.userSelect="",document.body.style.cursor=""}},[ie,at]),h.useMemo(()=>{const Q=G.width;return Q<768?{left:1,center:1,right:1}:Q<1024?{left:1,center:1,right:1}:{left:1.35,center:2.35,right:2.3}},[G.width]);const an=h.useMemo(()=>U8("left"),[]),Ut=h.useMemo(()=>v5e(_e).filter(Q=>["donut","bar","table"].includes(Q.visualization.chartType)&&Q.id!=="total-cases"&&Q.id!=="center-load"&&Q.id!=="case-distribution"&&Q.id!=="kpi-summary-table"),[_e]),Ht=h.useMemo(()=>U8("bottom"),[]),qt=h.useMemo(()=>N5e(_e),[_e]),Tn=h.useMemo(()=>{const Q={};return[...an,...Ut,...Ht,...qt].forEach(pe=>{Q[pe.id]=E5e(pe.id,z?.code||"KR",_e,n)}),Q},[an,Ut,Ht,qt,z,_e,n]),hn=[{id:"11",name:""},{id:"21",name:""},{id:"22",name:""},{id:"23",name:""},{id:"24",name:""},{id:"25",name:""},{id:"26",name:""},{id:"29",name:""},{id:"31",name:""},{id:"33",name:""},{id:"34",name:""},{id:"35",name:""},{id:"36",name:""},{id:"37",name:""},{id:"38",name:""},{id:"39",name:""},{id:"32",name:""}],ar=h.useMemo(()=>{if(_e==="nation")return hn.map(Q=>({code:Q.id,name:Q.name}));if(F.length>0)return F.map(Q=>({code:Q.id,name:Q.name}));if(_e==="sido"&&z?.code){const Q=oW[z.code]??[];if(Q.length>0)return Q.map(pe=>({code:pe.code,name:pe.label}))}return[]},[_e,F,z?.code]),yt=h.useMemo(()=>pW({level:_e,parentRegionCode:z?.code,candidates:ar}),[_e,z?.code,ar]),Ve=h.useMemo(()=>yt.children.map(Q=>({id:Q.code,name:Q.name})),[yt]);h.useEffect(()=>{pt(null)},[_e,z?.code]),h.useEffect(()=>{Fe&&(yt.childrenCodes.includes(Fe.code)||pt(null))},[Fe,yt.childrenCodes]);const Xt=h.useMemo(()=>({level:_e,regionCode:z?.code,regionName:z?.name,subRegions:Ve}),[_e,z,Ve]),{centralKpis:On,dashData:Rn,drilldownData:Or,loadingStage:Ee,isScopeChangeLoading:ze,prefetchScope:ht}=L5e(Xt,s,V,{loadDrilldown:ae,periodVariant:n}),{funnelData:pn,bottleneckData:En,linkageData:lr,regionData:jn}=Or,Qe=h.useMemo(()=>Rn?Rn[Pe]:null,[Rn,Pe]),sr=h.useMemo(()=>HW(),[]),bn=h.useMemo(()=>Math.min(5,Math.max(1,sr.headline.maxItems)),[sr.headline.maxItems]),Ke=h.useMemo(()=>On.find(Q=>Q.kpiId==="DATA_READINESS")?.value??null,[On]),Be=h.useMemo(()=>{const Q=new Map(Te.map(pe=>[pe.id,pe]));return On.map(pe=>{const Ge=Q.get(pe.kpiId);if(!Ge)return null;const st=Ge.target,it=oU(Ge,pe.value),Ce=Math.max(0,Ge.higherBetter?st-pe.value:pe.value-st),Dt=X5e(Ge,pe.delta7d),zt=pe.kpiId==="DATA_READINESS"?pe.value<Math.max(88,st-3):Ke!=null&&Ke<90,cn=J5e(Ce,Dt,zt),gn=Number((Ce+Math.max(0,Dt*.8)+(zt?2.5:0)).toFixed(2));return{kpiKey:X_[pe.kpiId],actual:pe.value,target:st,deltaPp:it,trendWorseningPp:Dt,severity:cn,partialPossible:zt,score:gn}}).filter(pe=>pe!=null)},[On,Te,Ke]),Me=h.useMemo(()=>Be.reduce((Q,pe)=>(Q[J_[pe.kpiKey]]=pe,Q),{SIGNAL_QUALITY:void 0,POLICY_IMPACT:void 0,BOTTLENECK_RISK:void 0,DATA_READINESS:void 0,GOVERNANCE_SAFETY:void 0}),[Be]),xt=h.useMemo(()=>{const Q={risk:3,warn:2,ok:1};return[...Be].filter(pe=>pe.severity!=="ok"||pe.partialPossible).sort((pe,Ge)=>{const st=Q[Ge.severity]-Q[pe.severity];if(st!==0)return st;const it=Ge.score-pe.score;return it!==0?it:Ge.actual-pe.actual}).slice(0,bn)},[Be,bn]),Le=h.useMemo(()=>[...nm].filter(Q=>Q.status==="deployed"||Q.status==="reviewing").sort((Q,pe)=>new Date(pe.deployedAt).getTime()-new Date(Q.deployedAt).getTime()).slice(0,3).map(Q=>({policyId:Q.id,title:Q.title,effectiveAt:Q.deployedAt.slice(0,10),impactedKpis:Q.impactSummary.map(pe=>({kpiKey:pe.label,deltaPp:pe.changePp})),impactedRegions:Q.affectedRegions.includes("")?Math.max(Ve.length,17):Q.affectedRegions.length,notes:`/   SLA ${Q.before.slaRate}%${Q.after.slaRate}%   ${Q.before.responseTimeliness}%${Q.after.responseTimeliness}%`})),[Ve.length]),$t=h.useCallback((Q,pe)=>{const Ge=pe||Fe?.name||z?.name||"";return Array.from({length:4},(st,it)=>{const Ce=it+1;return{orgName:`${Ge.replace(/|||/g,"").trim()} ${Ce}`,regionName:Ge,count:Math.round(kr(`${Q}-${Ge}-owner-count-${it}`,8,46)),lastOccurredAt:`2026-02-${String(Math.round(kr(`${Q}-${Ge}-owner-day-${it}`,4,12))).padStart(2,"0")}`,ownerRole:iU[it%iU.length]}})},[Fe?.name,z?.name]),Bt=h.useCallback(Q=>Q.includes("")?"       .":Q.includes("")?"      .":Q.includes("")?"      .":Q.includes("")||Q.includes("")?"       .":"       .",[]),Zn=h.useCallback(Q=>{if(Q==="POLICY_IMPACT"){A({type:"policy",items:Le});return}const pe=Me[Q];pe&&A({type:"kpi",kpiId:Q,severity:pe.severity,deltaPp:pe.deltaPp,trendWorseningPp:pe.trendWorseningPp,partialPossible:pe.partialPossible})},[Me,Le]),Mn=h.useMemo(()=>{if(!Qe)return[];const Q=new Map(Qe.regions.map(Ce=>[Ce.regionCode,Ce])),pe=Qe.national.target??Qe.national.value,Ge=oe.target??pe,st=new Set(z?.code?[z.code]:[]);return yt.childrenCodes.filter(Ce=>!st.has(Ce)).map(Ce=>{const Dt=Q.get(Ce),zt=Dt?.value;if(zt==null||!Number.isFinite(zt))return null;const cn=Dt?.regionName,gn=yt.childrenNameMap[Ce]||cn;gn||console.warn(`[Top5] missing nameMap for code: ${Ce}`);const Vn=Number(kr(`${Ce}-${Pe}-wdelta`,-3.8,3.8).toFixed(1)),zu=Number((oe.higherIsWorse?Vn:-Vn).toFixed(1)),as=Number((zt-Ge).toFixed(1));return{code:Ce,name:gn||`: ${Ce}`,value:zt,targetGapPp:as,gapAbs:Math.abs(as),weeklyDeltaPp:Vn,worseningPp:zu}}).filter(Ce=>Ce!=null).sort((Ce,Dt)=>{const zt=Dt.gapAbs-Ce.gapAbs;if(zt!==0)return zt;const cn=Dt.worseningPp-Ce.worseningPp;if(cn!==0)return cn;const gn=Dt.value-Ce.value;return gn!==0?gn:Ce.name.localeCompare(Dt.name,"ko-KR")}).slice(0,5).map((Ce,Dt)=>({...Ce,rank:Dt+1}))},[Qe,oe.target,oe.higherIsWorse,Pe,yt.childrenCodes,yt.childrenNameMap,z?.code]),Ur=h.useMemo(()=>Qe?Fe?.code?Qe.cause.map((Q,pe)=>({...Q,value:Math.max(1,Math.round(Q.value+kr(`${Fe.code}-${Pe}-cause-${pe}`,-12,14)))})):Qe.cause:[],[Qe,Fe?.code,Pe]),bt=h.useMemo(()=>Ur[0]?.name??" ",[Ur]),ms=h.useCallback(Q=>{pt({code:Q.code,name:Q.name}),A({type:"top5",row:Q,causeName:bt,owners:$t(bt,Q.name),actionText:Bt(bt)})},[Bt,$t,bt]),Dr=h.useMemo(()=>!Fe||!Qe?null:Qe.regions.find(Q=>Q.regionCode===Fe.code)??null,[Qe,Fe]),jo=h.useMemo(()=>Qe?Fe?.code?Qe.trend.map((Q,pe)=>({...Q,value:Number((Q.value+kr(`${Fe.code}-${Pe}-trend-${pe}`,-2.8,2.8)).toFixed(1))})):Qe.trend:[],[Qe,Fe?.code,Pe]);h.useEffect(()=>{_e==="sido"&&console.assert(yt.childrenType==="sigungu","[Top5] expected childrenType=sigungu when level=sido",{childrenType:yt.childrenType})},[_e,yt.childrenType]),h.useEffect(()=>{Mn.length&&F5e({top5:Mn,childrenCodes:yt.childrenCodes,parentRegionCode:z?.code})},[Mn,yt.childrenCodes,z?.code]),h.useEffect(()=>{_.type==="none"&&On.length&&Zn(V)},[_.type,On.length,Zn,V]);const jr=h.useMemo(()=>{const Q=o==="week"?1:o==="month"?4.2:o==="year"?52:13,pe=`${St}-${o}`,Ge=Ve.map(zt=>({name:zt.name,size:Math.round(kr(`${pe}-tree-${zt.id}`,250,3500)*Q)})),st=Math.max(...Ge.map(zt=>zt.size)),it=Math.min(...Ge.map(zt=>zt.size)),Ce=oe.palette,Dt=zt=>{const cn=(zt-it)/(st-it||1);return cn<.14?Ce[0]:cn<.28?Ce[1]:cn<.42?Ce[2]:cn<.57?Ce[3]:cn<.71?Ce[4]:cn<.85?Ce[5]:Ce[6]};return Ge.map(zt=>({...zt,fill:Dt(zt.size)}))},[St,o,oe.palette,Ve]),Fn=h.useMemo(()=>jr.reduce((Q,pe)=>Q+pe.size,0),[jr]),Br=o==="week"?"":o==="month"?"":o==="year"?"()":"",Jt=h.useMemo(()=>Z8.find(Q=>Q.id===X)??Z8[0],[X]),Kt=h.useMemo(()=>{const pe={total_cases:{min:300,max:2200},completion:{min:60,max:98},consultation_time:{min:1,max:15},followup_dropout:{min:2,max:20},dropout:{min:3,max:25}}[X]??{min:10,max:100},Ge=`${St}-${X}-heat`,st=Ve.map(gn=>({name:gn.name,value:kr(`${Ge}-${gn.id}`,pe.min,pe.max)})),it=Math.max(...st.map(gn=>gn.value)),Ce=Math.min(...st.map(gn=>gn.value)),Dt=oe.palette,zt=gn=>{const Vn=(gn-Ce)/(it-Ce||1);return Vn<.14?Dt[0]:Vn<.28?Dt[1]:Vn<.42?Dt[2]:Vn<.57?Dt[3]:Vn<.71?Dt[4]:Vn<.85?Dt[5]:Dt[6]},cn=new Set([Dt[0],Dt[1]]);return st.map(gn=>{const Vn=zt(gn.value);return{name:gn.name,size:Math.round(gn.value),fill:Vn,textColor:cn.has(Vn)?"#1e293b":"#ffffff"}})},[St,X,oe.palette,Ve]),Ai=h.useMemo(()=>({slaCut:sU(void 0,sr.matrixThresholds.slaCut),dataCut:sU(void 0,sr.matrixThresholds.dataCut)}),[sr.matrixThresholds.dataCut,sr.matrixThresholds.slaCut]),hr=Ai.slaCut,gr=Ai.dataCut,Ps={:[{id:"11010",name:""},{id:"11020",name:""},{id:"11030",name:""},{id:"11040",name:""},{id:"11050",name:""},{id:"11060",name:""},{id:"11070",name:""},{id:"11080",name:""},{id:"11090",name:""},{id:"11100",name:""},{id:"11110",name:""},{id:"11120",name:""},{id:"11130",name:""},{id:"11140",name:""},{id:"11150",name:""},{id:"11160",name:""},{id:"11170",name:""},{id:"11180",name:""},{id:"11190",name:""},{id:"11200",name:""},{id:"11210",name:""},{id:"11220",name:""},{id:"11230",name:""},{id:"11240",name:""},{id:"11250",name:""}],:[{id:"21010",name:""},{id:"21020",name:""},{id:"21030",name:""},{id:"21040",name:""},{id:"21050",name:""},{id:"21060",name:""},{id:"21070",name:""},{id:"21080",name:""},{id:"21090",name:""},{id:"21100",name:""},{id:"21110",name:""},{id:"21120",name:""},{id:"21130",name:""},{id:"21140",name:""},{id:"21150",name:""},{id:"21310",name:""}],:[{id:"22010",name:""},{id:"22020",name:""},{id:"22030",name:""},{id:"22040",name:""},{id:"22050",name:""},{id:"22060",name:""},{id:"22070",name:""},{id:"22310",name:""}],:[{id:"23010",name:""},{id:"23020",name:""},{id:"23030",name:""},{id:"23040",name:""},{id:"23050",name:""},{id:"23060",name:""},{id:"23070",name:""},{id:"23080",name:""},{id:"23310",name:""},{id:"23320",name:""}],:[{id:"24010",name:""},{id:"24020",name:""},{id:"24030",name:""},{id:"24040",name:""},{id:"24050",name:""}],:[{id:"25010",name:""},{id:"25020",name:""},{id:"25030",name:""},{id:"25040",name:""},{id:"25050",name:""}],:[{id:"26010",name:""},{id:"26020",name:""},{id:"26030",name:""},{id:"26040",name:""},{id:"26310",name:""}],:[{id:"29010",name:""}],:[{id:"31011",name:""},{id:"31021",name:""},{id:"31030",name:""},{id:"31041",name:""},{id:"31050",name:""},{id:"31060",name:""},{id:"31070",name:""},{id:"31080",name:""},{id:"31091",name:""},{id:"31101",name:""},{id:"31110",name:""},{id:"31120",name:""},{id:"31130",name:""},{id:"31140",name:""},{id:"31150",name:""},{id:"31160",name:""},{id:"31170",name:""},{id:"31180",name:""},{id:"31191",name:""},{id:"31200",name:""},{id:"31210",name:""},{id:"31220",name:""},{id:"31230",name:""},{id:"31240",name:""},{id:"31250",name:""},{id:"31260",name:""},{id:"31270",name:""},{id:"31280",name:""},{id:"31350",name:""},{id:"31370",name:""},{id:"31380",name:""}],:[{id:"33041",name:""},{id:"33020",name:""},{id:"33030",name:""},{id:"33320",name:""},{id:"33330",name:""},{id:"33340",name:""},{id:"33390",name:""},{id:"33350",name:""},{id:"33360",name:""},{id:"33370",name:""},{id:"33380",name:""}],:[{id:"34011",name:""},{id:"34020",name:""},{id:"34030",name:""},{id:"34040",name:""},{id:"34050",name:""},{id:"34060",name:""},{id:"34070",name:""},{id:"34080",name:""},{id:"34310",name:""},{id:"34330",name:""},{id:"34340",name:""},{id:"34350",name:""},{id:"34360",name:""},{id:"34370",name:""},{id:"34380",name:""}],:[{id:"35011",name:""},{id:"35020",name:""},{id:"35030",name:""},{id:"35040",name:""},{id:"35050",name:""},{id:"35060",name:""},{id:"35310",name:""},{id:"35320",name:""},{id:"35330",name:""},{id:"35340",name:""},{id:"35350",name:""},{id:"35360",name:""},{id:"35370",name:""},{id:"35380",name:""}],:[{id:"36010",name:""},{id:"36020",name:""},{id:"36030",name:""},{id:"36040",name:""},{id:"36060",name:""},{id:"36310",name:""},{id:"36320",name:""},{id:"36330",name:""},{id:"36350",name:""},{id:"36360",name:""},{id:"36370",name:""},{id:"36380",name:""},{id:"36390",name:""},{id:"36400",name:""},{id:"36410",name:""},{id:"36420",name:""},{id:"36430",name:""},{id:"36440",name:""},{id:"36450",name:""},{id:"36460",name:""},{id:"36470",name:""},{id:"36480",name:""}],:[{id:"37011",name:""},{id:"37020",name:""},{id:"37030",name:""},{id:"37040",name:""},{id:"37050",name:""},{id:"37060",name:""},{id:"37070",name:""},{id:"37080",name:""},{id:"37090",name:""},{id:"37100",name:""},{id:"37310",name:""},{id:"37320",name:""},{id:"37330",name:""},{id:"37340",name:""},{id:"37350",name:""},{id:"37360",name:""},{id:"37370",name:""},{id:"37380",name:""},{id:"37390",name:""},{id:"37400",name:""},{id:"37410",name:""},{id:"37420",name:""},{id:"37430",name:""}],:[{id:"38111",name:""},{id:"38030",name:""},{id:"38050",name:""},{id:"38060",name:""},{id:"38070",name:""},{id:"38080",name:""},{id:"38090",name:""},{id:"38100",name:""},{id:"38310",name:""},{id:"38320",name:""},{id:"38330",name:""},{id:"38340",name:""},{id:"38350",name:""},{id:"38360",name:""},{id:"38370",name:""},{id:"38380",name:""},{id:"38390",name:""},{id:"38400",name:""}],:[{id:"39010",name:""},{id:"39020",name:""}],:[{id:"32010",name:""},{id:"32020",name:""},{id:"32030",name:""},{id:"32040",name:""},{id:"32050",name:""},{id:"32060",name:""},{id:"32070",name:""},{id:"32310",name:""},{id:"32320",name:""},{id:"32330",name:""},{id:"32340",name:""},{id:"32350",name:""},{id:"32360",name:""},{id:"32370",name:""},{id:"32380",name:""},{id:"32390",name:""},{id:"32400",name:""},{id:"32410",name:""}]},Ba={11010:[{id:"1111051",name:""},{id:"1111053",name:""},{id:"1111055",name:""},{id:"1111057",name:""},{id:"1111060",name:""},{id:"1111064",name:""},{id:"1111068",name:""},{id:"1111070",name:""}],11020:[{id:"1114051",name:""},{id:"1114053",name:""},{id:"1114055",name:""},{id:"1114057",name:""},{id:"1114060",name:""},{id:"1114062",name:""},{id:"1114065",name:""},{id:"1114067",name:""}],11030:[{id:"1117051",name:""},{id:"1117053",name:"2"},{id:"1117055",name:""},{id:"1117057",name:""},{id:"1117060",name:"1"},{id:"1117062",name:"2"},{id:"1117065",name:"1"},{id:"1117067",name:"2"},{id:"1117070",name:""},{id:"1117072",name:""}],11040:[{id:"1120051",name:"2"},{id:"1120053",name:""},{id:"1120055",name:""},{id:"1120057",name:""},{id:"1120060",name:"1"},{id:"1120062",name:"2"},{id:"1120065",name:""},{id:"1120067",name:"1"},{id:"1120070",name:""},{id:"1120072",name:"11"},{id:"1120074",name:"12"},{id:"1120076",name:"21"},{id:"1120078",name:"23"},{id:"1120080",name:""}],11140:[{id:"1144051",name:""},{id:"1144053",name:""},{id:"1144055",name:""},{id:"1144057",name:""},{id:"1144060",name:""},{id:"1144062",name:""},{id:"1144065",name:""},{id:"1144067",name:"1"},{id:"1144070",name:"2"},{id:"1144072",name:""},{id:"1144074",name:"1"},{id:"1144076",name:"2"},{id:"1144078",name:""}],11190:[{id:"1156051",name:""},{id:"1156053",name:"1"},{id:"1156055",name:"2"},{id:"1156057",name:""},{id:"1156060",name:""},{id:"1156062",name:""},{id:"1156065",name:""},{id:"1156067",name:"1"},{id:"1156070",name:"3"},{id:"1156072",name:"4"},{id:"1156074",name:"5"},{id:"1156076",name:"1"},{id:"1156078",name:"2"},{id:"1156080",name:"3"}],11220:[{id:"1165051",name:"1"},{id:"1165053",name:"2"},{id:"1165055",name:"3"},{id:"1165057",name:"4"},{id:"1165060",name:""},{id:"1165062",name:"1"},{id:"1165065",name:"2"},{id:"1165067",name:"3"},{id:"1165070",name:"4"},{id:"1165072",name:""},{id:"1165074",name:"1"},{id:"1165076",name:"2"},{id:"1165078",name:"3"},{id:"1165080",name:"4"},{id:"1165082",name:""}],11230:[{id:"1168051",name:""},{id:"1168053",name:"1"},{id:"1168055",name:"2"},{id:"1168057",name:""},{id:"1168060",name:""},{id:"1168062",name:"1"},{id:"1168064",name:"2"},{id:"1168066",name:"1"},{id:"1168068",name:"2"},{id:"1168070",name:"4"},{id:"1168072",name:"1"},{id:"1168074",name:"2"},{id:"1168076",name:"1"},{id:"1168078",name:"2"},{id:"1168080",name:"1"},{id:"1168082",name:"4"},{id:"1168084",name:""},{id:"1168086",name:"1"},{id:"1168088",name:""},{id:"1168090",name:""}],11240:[{id:"1171051",name:""},{id:"1171053",name:"2"},{id:"1171055",name:"3"},{id:"1171057",name:"4"},{id:"1171060",name:"6"},{id:"1171062",name:"7"},{id:"1171064",name:"1"},{id:"1171066",name:"2"},{id:"1171068",name:""},{id:"1171070",name:"1"},{id:"1171072",name:"2"},{id:"1171074",name:"1"},{id:"1171076",name:"2"},{id:"1171078",name:"1"},{id:"1171080",name:"2"},{id:"1171082",name:"1"},{id:"1171084",name:"2"},{id:"1171086",name:""},{id:"1171088",name:"1"},{id:"1171090",name:"2"},{id:"1171092",name:""},{id:"1171094",name:""}],11250:[{id:"1174051",name:""},{id:"1174053",name:"1"},{id:"1174055",name:"2"},{id:"1174057",name:"1"},{id:"1174060",name:"2"},{id:"1174062",name:"1"},{id:"1174064",name:"2"},{id:"1174066",name:"1"},{id:"1174068",name:"2"},{id:"1174070",name:"3"},{id:"1174072",name:"1"},{id:"1174074",name:"2"},{id:"1174076",name:"3"},{id:"1174078",name:"1"},{id:"1174080",name:"2"},{id:"1174082",name:"3"},{id:"1174084",name:"1"},{id:"1174086",name:"2"}],21010:[{id:"2611051",name:""},{id:"2611053",name:""},{id:"2611055",name:""},{id:"2611057",name:""},{id:"2611060",name:""},{id:"2611062",name:""},{id:"2611064",name:""},{id:"2611066",name:""}],21050:[{id:"2623051",name:"1"},{id:"2623053",name:"2"},{id:"2623055",name:""},{id:"2623057",name:""},{id:"2623060",name:"1"},{id:"2623062",name:"2"},{id:"2623064",name:"1"},{id:"2623066",name:"2"},{id:"2623068",name:"1"},{id:"2623070",name:"3"},{id:"2623072",name:"1"},{id:"2623074",name:"4"},{id:"2623076",name:"1"},{id:"2623078",name:"2"},{id:"2623080",name:"1"},{id:"2623082",name:"2"},{id:"2623084",name:"3"},{id:"2623086",name:"1"},{id:"2623088",name:"2"}],21090:[{id:"2635051",name:"1"},{id:"2635053",name:"2"},{id:"2635055",name:"3"},{id:"2635057",name:"1"},{id:"2635060",name:"2"},{id:"2635062",name:"1"},{id:"2635064",name:"2"},{id:"2635066",name:"3"},{id:"2635068",name:"4"},{id:"2635070",name:""},{id:"2635072",name:"1"},{id:"2635074",name:"2"},{id:"2635076",name:"3"},{id:"2635078",name:"4"},{id:"2635080",name:"1"},{id:"2635082",name:"2"},{id:"2635084",name:"1"},{id:"2635086",name:"2"}],22010:[{id:"2711051",name:""},{id:"2711053",name:""},{id:"2711055",name:"1"},{id:"2711057",name:"2"},{id:"2711060",name:"3"},{id:"2711062",name:""},{id:"2711064",name:"1"},{id:"2711066",name:"2"},{id:"2711068",name:"3"},{id:"2711070",name:"4"},{id:"2711072",name:"1"},{id:"2711074",name:"2"}],22060:[{id:"2726051",name:"1"},{id:"2726053",name:"2"},{id:"2726055",name:"3"},{id:"2726057",name:"4"},{id:"2726060",name:"1"},{id:"2726062",name:"2"},{id:"2726064",name:"3"},{id:"2726066",name:"1"},{id:"2726068",name:"23"},{id:"2726070",name:"4"},{id:"2726072",name:"1"},{id:"2726074",name:"2"},{id:"2726076",name:""},{id:"2726078",name:""},{id:"2726080",name:""},{id:"2726082",name:""},{id:"2726084",name:""},{id:"2726086",name:"1"},{id:"2726088",name:"2"},{id:"2726090",name:"1"},{id:"2726092",name:"2"},{id:"2726094",name:"3"}],23040:[{id:"2818551",name:"1"},{id:"2818553",name:"2"},{id:"2818555",name:""},{id:"2818557",name:"1"},{id:"2818560",name:"2"},{id:"2818562",name:"3"},{id:"2818564",name:""},{id:"2818566",name:"1"},{id:"2818568",name:"2"},{id:"2818570",name:"3"},{id:"2818572",name:"1"},{id:"2818574",name:"2"},{id:"2818576",name:"3"}],23050:[{id:"2820051",name:"1"},{id:"2820053",name:"2"},{id:"2820055",name:"3"},{id:"2820057",name:"4"},{id:"2820060",name:"1"},{id:"2820062",name:"2"},{id:"2820064",name:"3"},{id:"2820066",name:"4"},{id:"2820068",name:"1"},{id:"2820070",name:"2"},{id:"2820072",name:"3"},{id:"2820074",name:"4"},{id:"2820076",name:"5"},{id:"2820078",name:"6"},{id:"2820080",name:""},{id:"2820082",name:"2"},{id:"2820084",name:""},{id:"2820086",name:"1"},{id:"2820088",name:"2"},{id:"2820090",name:""},{id:"2820092",name:"1"}],24010:[{id:"2911051",name:""},{id:"2911053",name:""},{id:"2911055",name:"1"},{id:"2911057",name:"2"},{id:"2911060",name:"1"},{id:"2911062",name:"2"},{id:"2911064",name:"1"},{id:"2911066",name:"2"},{id:"2911068",name:""},{id:"2911070",name:""}],24020:[{id:"2914051",name:""},{id:"2914053",name:"1"},{id:"2914055",name:"2"},{id:"2914057",name:""},{id:"2914060",name:""},{id:"2914062",name:""},{id:"2914064",name:"1"},{id:"2914066",name:"2"},{id:"2914068",name:"1"},{id:"2914070",name:"2"},{id:"2914072",name:""},{id:"2914074",name:"1"},{id:"2914076",name:"2"},{id:"2914078",name:""},{id:"2914080",name:""}],25030:[{id:"3017051",name:""},{id:"3017053",name:"1"},{id:"3017055",name:"2"},{id:"3017057",name:""},{id:"3017060",name:""},{id:"3017062",name:""},{id:"3017064",name:""},{id:"3017066",name:"1"},{id:"3017068",name:"2"},{id:"3017070",name:"3"},{id:"3017072",name:""},{id:"3017074",name:"1"},{id:"3017076",name:"2"},{id:"3017078",name:"1"},{id:"3017080",name:"2"},{id:"3017082",name:"3"},{id:"3017084",name:""},{id:"3017086",name:""},{id:"3017088",name:""},{id:"3017090",name:"1"},{id:"3017092",name:"2"}],25040:[{id:"3020051",name:""},{id:"3020053",name:""},{id:"3020055",name:"1"},{id:"3020057",name:"2"},{id:"3020060",name:"1"},{id:"3020062",name:"2"},{id:"3020064",name:"3"},{id:"3020066",name:""},{id:"3020068",name:""},{id:"3020070",name:""},{id:"3020072",name:""},{id:"3020074",name:""}],26010:[{id:"3111051",name:""},{id:"3111053",name:""},{id:"3111055",name:""},{id:"3111057",name:""},{id:"3111060",name:"1"},{id:"3111062",name:"2"},{id:"3111064",name:""},{id:"3111066",name:""},{id:"3111068",name:""},{id:"3111070",name:""},{id:"3111072",name:"1"},{id:"3111074",name:"2"},{id:"3111076",name:"3"},{id:"3111078",name:"4"},{id:"3111080",name:"5"}],26020:[{id:"3114051",name:""},{id:"3114053",name:""},{id:"3114055",name:""},{id:"3114057",name:""},{id:"3114060",name:""},{id:"3114062",name:""},{id:"3114064",name:""},{id:"3114066",name:""}],29010:[{id:"3611051",name:""},{id:"3611053",name:""},{id:"3611055",name:""},{id:"3611057",name:""},{id:"3611060",name:""},{id:"3611062",name:""},{id:"3611064",name:""},{id:"3611066",name:""},{id:"3611068",name:""},{id:"3611070",name:""},{id:"3611072",name:""},{id:"3611074",name:""},{id:"3611076",name:""},{id:"3611078",name:""},{id:"3611080",name:""},{id:"3611082",name:""}],31011:[{id:"4111051",name:""},{id:"4111053",name:""},{id:"4111055",name:""},{id:"4111057",name:""}],31021:[{id:"4113051",name:""},{id:"4113053",name:""},{id:"4113055",name:""}],31101:[{id:"4128051",name:""},{id:"4128053",name:""},{id:"4128055",name:""}],31191:[{id:"4146051",name:""},{id:"4146053",name:""},{id:"4146055",name:""}],33041:[{id:"4311051",name:""},{id:"4311053",name:""},{id:"4311055",name:""},{id:"4311057",name:""}],33020:[{id:"4313051",name:""},{id:"4313053",name:""},{id:"4313055",name:""},{id:"4313057",name:""},{id:"4313060",name:""},{id:"4313062",name:""},{id:"4313064",name:""},{id:"4313066",name:""},{id:"4313068",name:""},{id:"4313070",name:""},{id:"4313072",name:""},{id:"4313074",name:""},{id:"4313076",name:""},{id:"4313078",name:""}],33030:[{id:"4315051",name:""},{id:"4315053",name:""},{id:"4315055",name:""},{id:"4315057",name:""},{id:"4315060",name:""},{id:"4315062",name:""},{id:"4315064",name:""},{id:"4315066",name:""},{id:"4315068",name:""},{id:"4315070",name:""},{id:"4315072",name:""},{id:"4315074",name:""}],34011:[{id:"4413051",name:""},{id:"4413053",name:""}],34040:[{id:"4420051",name:"1"},{id:"4420053",name:"2"},{id:"4420055",name:"3"},{id:"4420057",name:"4"},{id:"4420060",name:"5"},{id:"4420062",name:"6"},{id:"4420064",name:""},{id:"4420066",name:""},{id:"4420068",name:""},{id:"4420070",name:""},{id:"4420072",name:""},{id:"4420074",name:""},{id:"4420076",name:""},{id:"4420078",name:""},{id:"4420080",name:""},{id:"4420082",name:""}],35011:[{id:"4511051",name:""},{id:"4511053",name:""}],35020:[{id:"4513051",name:""},{id:"4513053",name:""},{id:"4513055",name:""},{id:"4513057",name:"1"},{id:"4513060",name:"2"},{id:"4513062",name:""},{id:"4513064",name:""},{id:"4513066",name:""},{id:"4513068",name:""},{id:"4513070",name:""},{id:"4513072",name:""},{id:"4513074",name:""},{id:"4513076",name:""},{id:"4513078",name:""},{id:"4513080",name:""},{id:"4513082",name:""},{id:"4513084",name:""}],36010:[{id:"4611051",name:"1"},{id:"4611053",name:"2"},{id:"4611055",name:""},{id:"4611057",name:""},{id:"4611060",name:""},{id:"4611062",name:""},{id:"4611064",name:""},{id:"4611066",name:""},{id:"4611068",name:""},{id:"4611070",name:""},{id:"4611072",name:""},{id:"4611074",name:""},{id:"4611076",name:""},{id:"4611078",name:""},{id:"4611080",name:""},{id:"4611082",name:""}],36020:[{id:"4613051",name:""},{id:"4613053",name:""},{id:"4613055",name:""},{id:"4613057",name:""},{id:"4613060",name:""},{id:"4613062",name:""},{id:"4613064",name:""},{id:"4613066",name:""},{id:"4613068",name:""},{id:"4613070",name:""},{id:"4613072",name:""},{id:"4613074",name:""},{id:"4613076",name:""},{id:"4613078",name:""},{id:"4613080",name:""},{id:"4613082",name:""}],37011:[{id:"4711151",name:""},{id:"4711153",name:""},{id:"4711155",name:""},{id:"4711157",name:""},{id:"4711160",name:""},{id:"4711162",name:""},{id:"4711164",name:""},{id:"4711166",name:""}],37020:[{id:"4713051",name:""},{id:"4713053",name:""},{id:"4713055",name:""},{id:"4713057",name:""},{id:"4713060",name:""},{id:"4713062",name:""},{id:"4713064",name:""},{id:"4713066",name:""},{id:"4713068",name:""},{id:"4713070",name:""},{id:"4713072",name:""},{id:"4713074",name:""},{id:"4713076",name:""},{id:"4713078",name:""},{id:"4713080",name:""}],38111:[{id:"4812151",name:""},{id:"4812153",name:""},{id:"4812155",name:""},{id:"4812157",name:""},{id:"4812160",name:""}],38070:[{id:"4825051",name:""},{id:"4825053",name:""},{id:"4825055",name:""},{id:"4825057",name:""},{id:"4825060",name:""},{id:"4825062",name:""},{id:"4825064",name:""},{id:"4825066",name:""},{id:"4825068",name:"1"},{id:"4825070",name:"2"},{id:"4825072",name:"3"},{id:"4825074",name:""},{id:"4825076",name:""},{id:"4825078",name:""},{id:"4825080",name:""},{id:"4825082",name:""},{id:"4825084",name:""}],39010:[{id:"5011051",name:"1"},{id:"5011053",name:"2"},{id:"5011055",name:"1"},{id:"5011057",name:"2"},{id:"5011060",name:"1"},{id:"5011062",name:"2"},{id:"5011064",name:"1"},{id:"5011066",name:"2"},{id:"5011068",name:""},{id:"5011070",name:""},{id:"5011072",name:""},{id:"5011074",name:""},{id:"5011076",name:""},{id:"5011078",name:""},{id:"5011080",name:""},{id:"5011082",name:""},{id:"5011084",name:""},{id:"5011086",name:""},{id:"5011088",name:""},{id:"5011090",name:""},{id:"5011092",name:""},{id:"5011094",name:""},{id:"5011096",name:""},{id:"5011098",name:""},{id:"5011100",name:""}],39020:[{id:"5013051",name:""},{id:"5013053",name:""},{id:"5013055",name:""},{id:"5013057",name:""},{id:"5013060",name:""},{id:"5013062",name:""},{id:"5013064",name:""},{id:"5013066",name:""},{id:"5013068",name:""},{id:"5013070",name:""},{id:"5013072",name:""},{id:"5013074",name:""},{id:"5013076",name:""},{id:"5013078",name:""},{id:"5013080",name:""},{id:"5013082",name:""}],32010:[{id:"5111051",name:""},{id:"5111053",name:""},{id:"5111055",name:""},{id:"5111057",name:""},{id:"5111060",name:""},{id:"5111062",name:"1"},{id:"5111064",name:"2"},{id:"5111066",name:"3"},{id:"5111068",name:""},{id:"5111070",name:""},{id:"5111072",name:""},{id:"5111074",name:""},{id:"5111076",name:""},{id:"5111078",name:""},{id:"5111080",name:""},{id:"5111082",name:""},{id:"5111084",name:""},{id:"5111086",name:""},{id:"5111088",name:""}],32020:[{id:"5113051",name:""},{id:"5113053",name:""},{id:"5113055",name:""},{id:"5113057",name:"1"},{id:"5113060",name:"2"},{id:"5113062",name:""},{id:"5113064",name:""},{id:"5113066",name:""},{id:"5113068",name:""},{id:"5113070",name:""},{id:"5113072",name:"1"},{id:"5113074",name:"2"},{id:"5113076",name:""},{id:"5113078",name:""},{id:"5113080",name:""},{id:"5113082",name:""},{id:"5113084",name:""},{id:"5113086",name:""},{id:"5113088",name:""},{id:"5113090",name:""}],32030:[{id:"5115051",name:"1"},{id:"5115053",name:"2"},{id:"5115055",name:"1"},{id:"5115057",name:"2"},{id:"5115060",name:""},{id:"5115062",name:""},{id:"5115064",name:""},{id:"5115066",name:""},{id:"5115068",name:""},{id:"5115070",name:""},{id:"5115072",name:""},{id:"5115074",name:""},{id:"5115076",name:""},{id:"5115078",name:""},{id:"5115080",name:""},{id:"5115082",name:""}]},Gr=h.useMemo(()=>{const Q=[{id:"11",name:""},{id:"21",name:""},{id:"22",name:""},{id:"23",name:""},{id:"24",name:""},{id:"25",name:""},{id:"26",name:""},{id:"29",name:""},{id:"31",name:""},{id:"33",name:""},{id:"34",name:""},{id:"35",name:""},{id:"36",name:""},{id:"37",name:""},{id:"38",name:""},{id:"39",name:""},{id:"32",name:""}];let pe;if(_e==="nation")pe=Q;else if(F.length>0)pe=F;else if(_e==="sido"){const Ge={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},st=z?.name||"",it=Ge[st]||st.replace(/||||$/g,"").trim()||st;pe=Ps[it]||Q}else{const Ge=z?.code||"00",st=Ba[Ge];if(st)pe=st;else{const it=z?.name||"";if(it.endsWith("")){const Ce=it.slice(0,-1);pe=[{id:`${Ge}-E1`,name:`${Ce}`},{id:`${Ge}-E2`,name:""},{id:`${Ge}-E3`,name:""},{id:`${Ge}-E4`,name:""},{id:`${Ge}-E5`,name:""},{id:`${Ge}-E6`,name:""},{id:`${Ge}-E7`,name:""},{id:`${Ge}-E8`,name:""},{id:`${Ge}-E9`,name:""}]}else pe=[{id:`${Ge}-E1`,name:""},{id:`${Ge}-E2`,name:""},{id:`${Ge}-E3`,name:""},{id:`${Ge}-E4`,name:""},{id:`${Ge}-E5`,name:""},{id:`${Ge}-E6`,name:""},{id:`${Ge}-E7`,name:""},{id:`${Ge}-E8`,name:""}]}}return pe.map(Ge=>{const st=`${St}-${o}-risk-${Ge.id}`,it=Number(kr(`${st}-sla`,78,100).toFixed(1)),Ce=Number(kr(`${st}-data`,75,100).toFixed(1)),Dt=Math.round(kr(`${st}-cases`,200,3e3));return{regionId:Ge.id,regionName:Ge.name,slaRate:it,dataRate:Ce,totalCases:Dt}})},[St,o,_e,z,F]),la=["incoming","inProgress","needRecontact","slaBreach","completed"],ca={incoming:"",inProgress:"",needRecontact:" ",slaBreach:"SLA ",completed:""},Ga={incoming:H0.blue,inProgress:H0.cyan,needRecontact:H0.orange,slaBreach:H0.red,completed:H0.green},ta=h.useMemo(()=>Ve.map(Q=>{const pe=`${St}-${o}-stage-${Q.id}`,Ge=Q.name.length>3?Q.name.replace(/||||$/g,"").trim()||Q.name.slice(0,2):Q.name;return{regionName:Ge.length>4?Ge.slice(0,4):Ge,incoming:Math.round(kr(`${pe}-inc`,50,300)),inProgress:Math.round(kr(`${pe}-inp`,100,500)),needRecontact:Math.round(kr(`${pe}-nrc`,20,150)),slaBreach:Math.round(kr(`${pe}-sla`,5,80)),completed:Math.round(kr(`${pe}-cmp`,200,800))}}),[St,o,Ve]),na=h.useMemo(()=>{const Q=["20-39","40-59","60-69","70-79","80+"],pe=`${St}-${o}-agestat`;return Q.map(Ge=>{const st=`${pe}-${Ge}`;return{age:Ge,normal:Math.round(kr(`${st}-n`,120,450)),caution:Math.round(kr(`${st}-c`,40,180)),highRisk:Math.round(kr(`${st}-h`,15,90)),slaViolation:Math.round(kr(`${st}-s`,5,40))}})},[St,o]),ns=Q=>{const{x:pe,y:Ge,width:st,height:it,name:Ce,fill:Dt,textColor:zt}=Q;if(!Ce||st<25||it<18)return null;const cn=Ce.length>5?Ce.replace(/|||/g,"").trim()||Ce.slice(0,4):Ce,gn=zt||"#fff";return a.jsxs("g",{children:[a.jsx("rect",{x:pe,y:Ge,width:st,height:it,fill:Dt,stroke:"#fff",strokeWidth:1.5,rx:2,style:{filter:"brightness(1.0)",transition:"filter 0.2s"}}),st>35&&it>25&&a.jsx("text",{x:pe+st/2,y:Ge+it/2,textAnchor:"middle",dominantBaseline:"middle",fill:gn,fontSize:st>70?10:8,fontWeight:"600",style:{textShadow:gn==="#ffffff"?"0 1px 2px rgba(0,0,0,0.4)":"none"},children:cn})]})},Ha=h.useCallback(Q=>Q==="nation"?"sido":"sigungu",[]),wr=h.useCallback(({level:Q,code:pe,name:Ge})=>{const it={sig:"sido",emd:"sigungu"}[Q];it&&(ht({level:it,regionCode:pe,regionName:Ge}),et({code:pe,name:Ge,level:it},{replace:!0}))},[ht,et]);h.useEffect(()=>{if(!Qe?.worstRegions?.length)return;const Q=Ha(_e);Qe.worstRegions.slice(0,3).forEach(pe=>{ht({level:Q,regionCode:pe.regionCode,regionName:pe.regionName})})},[Qe,_e,Ha,ht]);const da=h.useMemo(()=>Be.some(Q=>Q.partialPossible),[Be]),hs=h.useCallback((Q,pe)=>{const Ge=Me[Q.id],st=z0[Ge?.severity??"ok"],it=Ge?.deltaPp??oU(Q,pe.value);return[`: ${rU[Q.id]}`,`: ${W5e[Q.id]}`,` : ${st}   (${i}) ${pe.value.toFixed(1)}${Q.unit} (  ${Fl(it)})`,` : ${aU[Q.id]}`,`/: ${Q.target}${Q.unit}    ${Fl(pe.delta7d)}`,`${Y5e[Q.id]}  ${pe.numerator.toLocaleString()} / ${pe.denominator.toLocaleString()}`]},[Me,i]),ai=h.useCallback(Q=>{const pe=J_[Q.kpiKey];ee(pe),Zn(pe)},[Zn]),Pr=h.useMemo(()=>Gr.reduce((Q,pe)=>{const Ge=q0(pe.slaRate,pe.dataRate,hr,gr);return Q[Ge]+=1,Q},{good:0,dataRisk:0,slaRisk:0,dualRisk:0}),[Gr,hr,gr]),ua=h.useMemo(()=>{const Q={good:[],dataRisk:[],slaRisk:[],dualRisk:[]};return Gr.forEach(pe=>{const Ge=q0(pe.slaRate,pe.dataRate,hr,gr);Q[Ge].push(pe)}),Object.keys(Q).forEach(pe=>{Q[pe].sort((Ge,st)=>st.totalCases-Ge.totalCases)}),Q},[Gr,hr,gr]),Hr=h.useMemo(()=>Q5e(Pr),[Pr]),xl=T??Hr,Ms=h.useCallback(Q=>ua[Q].slice(0,8).map(pe=>({regionName:pe.regionName,slaRate:pe.slaRate,dataRate:pe.dataRate,totalCases:pe.totalCases})),[ua]),cr=h.useCallback((Q,pe)=>{const Ge=Ms(Q);A({type:"matrix",quadrant:Q,selectedRegionName:pe??Ge[0]?.regionName??" ",items:Ge})},[Ms]),Bi=h.useCallback(Q=>{const pe=T===Q?null:Q;R(pe),P(null),cr(pe??Hr)},[T,Hr,cr]),Ls=h.useCallback(Q=>{if(!Q?.regionId)return;const pe=q0(Q.slaRate,Q.dataRate,hr,gr);pt({code:Q.regionId,name:Q.regionName}),R(pe),P(null),cr(pe,Q.regionName)},[hr,gr,cr]),wn=h.useMemo(()=>T?ua[T]:Gr,[T,Gr,ua]),ra=h.useMemo(()=>{const Q=Math.min(96,Math.max(4,(gr-70)/30*100)),pe=Math.min(96,Math.max(4,(1-(hr-70)/30)*100));return{good:{left:(Q+100)/2,top:pe/2},dataRisk:{left:Q/2,top:pe/2},slaRisk:{left:(Q+100)/2,top:(pe+100)/2},dualRisk:{left:Q/2,top:(pe+100)/2}}},[hr,gr]);h.useEffect(()=>{!$.slaMatrix||Gr.length===0||_.type!=="matrix"&&cr(xl)},[$.slaMatrix,Gr.length,_.type,xl,cr]),h.useEffect(()=>{if(M===null)return;const Q=Ge=>{Ge.target?.closest("[data-matrix-help-popover]")||P(null)},pe=Ge=>{Ge.key==="Escape"&&P(null)};return document.addEventListener("mousedown",Q),document.addEventListener("keydown",pe),()=>{document.removeEventListener("mousedown",Q),document.removeEventListener("keydown",pe)}},[M]);const Gi=h.useCallback(()=>{if(!wn.length)return;const Ge=["period,kpi,scope,quadrant,quadrantFilter,region,slaRate,dataRate,slaCut,dataCut,totalCases",...wn.map(cn=>{const gn=q0(cn.slaRate,cn.dataRate,hr,gr);return[i,oe.shortLabel,z?.name??"",Kc[gn].label,T?Kc[T].label:"",cn.regionName,cn.slaRate.toFixed(1),cn.dataRate.toFixed(1),`${hr.toFixed(1)}%`,`${gr.toFixed(1)}%`,String(cn.totalCases)].join(",")})].join(`
`),st=new Blob([`\uFEFF${Ge}`],{type:"text/csv;charset=utf-8;"}),it=URL.createObjectURL(st),Ce=document.createElement("a"),Dt=(z?.name??"").replace(/\s+/g,""),zt=T?Kc[T].guideLabel:"all";Ce.href=it,Ce.download=`sla-data-matrix_${i}_${Dt}_${zt}.csv`,document.body.appendChild(Ce),Ce.click(),document.body.removeChild(Ce),URL.revokeObjectURL(it)},[wn,i,oe.shortLabel,z?.name,hr,gr,T]),rs=Ee==="loadingScopeChange"||Ee==="refreshing";return a.jsxs("div",{ref:I,className:"flex flex-col bg-gray-50 h-full min-h-0",children:[a.jsxs("div",{className:"bg-white border-b border-gray-200 px-4 py-2 shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"flex items-center gap-2 overflow-x-auto flex-1 min-w-0 pb-0.5",children:Te.map(Q=>{const pe=On.find(it=>it.kpiId===Q.id);if(!pe)return a.jsx("div",{className:"min-w-[196px] h-[124px] rounded-xl border border-gray-200 bg-gray-50 animate-pulse"},Q.id);const st=Me[Q.id]?.severity??"ok";return a.jsx(nIe,{kpi:pe,def:Q,isActive:V===Q.id,onClick:()=>{ee(Q.id),Zn(Q.id)},plainLine:rU[Q.id],tooltipTitle:`${Q.shortName}  ${z0[st]}`,tooltipLines:hs(Q,pe),tooltipColor:Q_[X_[Q.id]].primaryColor,severityLabel:z0[st],severityClass:eC[st]},Q.id)})}),a.jsx("div",{className:"w-px h-10 bg-gray-200 shrink-0"}),a.jsxs("button",{onClick:()=>{const Q=!ae;ue(Q),w({slaMatrix:Q,stageDistribution:Q}),y(pe=>({...pe,opsSummary:Q,ageRisk:Q,kpiTable:Q}))},className:`px-3 py-1.5 text-[11px] font-medium rounded-md transition flex items-center gap-1.5 shrink-0 ${ae?"bg-violet-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[a.jsx(ym,{className:"h-3.5 w-3.5"}),ae?" ":""]}),a.jsx("div",{className:"w-px h-8 bg-gray-200 shrink-0"}),a.jsxs("div",{className:"flex items-center gap-1.5 shrink-0",children:[te.length>1&&a.jsxs("button",{onClick:Ne,className:"flex items-center gap-1 px-2 py-1 text-xs text-blue-600 bg-blue-50 rounded hover:bg-blue-100 transition-colors",children:[a.jsx(vm,{className:"h-3 w-3"}),a.jsx("span",{children:""})]}),a.jsx("div",{className:"flex items-center gap-1 text-xs text-gray-600",children:te.map((Q,pe)=>a.jsxs(W.Fragment,{children:[a.jsx("button",{onClick:()=>me(pe),className:`px-1.5 py-0.5 rounded transition-colors ${pe===te.length-1?"bg-blue-500 text-white font-medium":"hover:bg-gray-200 text-gray-600"}`,children:Q.name}),pe<te.length-1&&a.jsx(ji,{className:"h-3 w-3 text-gray-400"})]},`${Q.level}-${Q.code}`))}),te.length>1&&a.jsx("button",{onClick:xe,className:"p-1 text-gray-500 hover:text-blue-600 hover:bg-gray-100 rounded transition-colors",title:" ",children:a.jsx(xh,{className:"h-3.5 w-3.5"})})]}),a.jsx("div",{className:"w-px h-8 bg-gray-200 shrink-0"}),a.jsxs("div",{className:"flex items-center gap-1 text-gray-500 shrink-0",children:[a.jsx("button",{className:"p-1.5 hover:bg-gray-100 rounded",title:"",children:a.jsx(bC,{className:"h-4 w-4"})}),a.jsx("button",{className:"p-1.5 hover:bg-gray-100 rounded",title:" ",children:a.jsx(ym,{className:"h-4 w-4"})}),a.jsx("button",{className:"p-1.5 hover:bg-gray-100 rounded",title:"",children:a.jsx(im,{className:"h-4 w-4"})})]})]}),a.jsx("div",{className:"mt-2 border-t border-gray-100 pt-2",children:a.jsxs("div",{className:"flex flex-wrap items-center gap-1.5",children:[a.jsx("span",{className:"inline-flex items-center rounded-md bg-slate-100 px-2 py-1 text-[11px] font-semibold text-slate-700",children:"   "}),xt.length>0?xt.map(Q=>{const pe=J_[Q.kpiKey],Ge=Q_[Q.kpiKey];return a.jsxs("button",{onClick:()=>ai(Q),className:"inline-flex items-center gap-1 rounded-md border border-slate-200 bg-white px-2 py-1 text-[11px] text-slate-700 hover:bg-slate-50",children:[a.jsx("span",{className:`inline-flex rounded-full border px-1.5 py-0.5 font-semibold ${eC[Q.severity]}`,children:z0[Q.severity]}),a.jsx("span",{className:"font-semibold",children:Ge.shortLabel}),a.jsxs("span",{className:"text-slate-500",children:["(  ",Fl(Q.deltaPp),")"]}),V===pe&&a.jsx("span",{className:"text-blue-600",children:""})]},Q.kpiKey)}):a.jsx("span",{className:"text-[11px] text-slate-500",children:"     ."}),da&&a.jsx("span",{className:"inline-flex items-center rounded-md border border-amber-200 bg-amber-50 px-2 py-1 text-[11px] font-medium text-amber-700",children:"  "})]})})]}),ae&&a.jsxs("div",{className:"bg-gradient-to-b from-slate-50 to-white border-b border-gray-200 px-4 py-3 shrink-0",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-bold text-gray-800",children:" "}),a.jsx("span",{className:"text-[11px] text-gray-400 bg-gray-100 px-2 py-0.5 rounded-full",children:i}),V&&a.jsxs("span",{className:"text-[11px] px-2 py-0.5 rounded-full font-medium",style:{backgroundColor:`${oe.primaryColor}15`,color:oe.primaryColor},children:[oe.shortLabel," "]})]}),a.jsx("button",{onClick:()=>ue(!1),className:"text-[11px] text-gray-500 hover:text-gray-700 px-2 py-1 rounded hover:bg-gray-100",children:" "})]}),a.jsxs("div",{className:"overflow-y-auto pr-1",style:{height:`${ce}px`},children:[a.jsx(rIe,{stages:pn}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-3 mt-3",children:[a.jsx(aIe,{metrics:En}),a.jsx(sIe,{metrics:lr}),a.jsx(iIe,{rows:jn})]})]}),qe!=="mobile"&&a.jsx("button",{type:"button",onMouseDown:jt,onDoubleClick:It,"aria-label":"   ",title:"  ,   ",className:`mt-2 flex w-full cursor-ns-resize items-center justify-center rounded-md border py-1 transition-colors ${ie?"border-blue-300 bg-blue-50/70":"border-gray-200 bg-white/70 hover:bg-gray-50"}`,children:a.jsx("span",{className:`h-1.5 w-16 rounded-full ${ie?"bg-blue-400":"bg-gray-300"}`})})]}),a.jsxs("div",{className:"relative flex-1 overflow-y-auto min-h-0",children:[a.jsx("div",{className:`transition-opacity duration-300 ${rs?"opacity-60":"opacity-100"}`,children:a.jsxs("div",{className:`p-2 gap-2 ${qe==="desktop"?"grid":"flex flex-col"}`,style:qe==="desktop"?{gridTemplateColumns:"1.2fr 2.2fr 2.6fr",minHeight:"calc(100vh - 140px)",alignItems:"stretch"}:void 0,children:[a.jsxs("div",{className:`flex flex-col gap-2 ${qe==="desktop"?"min-w-0":qe==="tablet"?"hidden":"w-full shrink-0"}`,children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-1.5 text-center",children:[a.jsxs("span",{className:"text-[11px] text-blue-700 font-medium",children:[Y_(_e)," "]}),z&&a.jsxs("span",{className:"ml-1.5 text-[11px] text-blue-600",children:["(",z.name,")"]})]}),a.jsxs("div",{className:"bg-slate-50/70 border border-slate-200 rounded-lg p-3 shadow-[inset_0_1px_0_rgba(255,255,255,0.7)]",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-semibold text-gray-700",children:" KPI "}),a.jsx("span",{className:"text-[11px] px-1.5 py-0.5 rounded font-medium",style:{backgroundColor:`${oe.primaryColor}15`,color:oe.primaryColor},children:oe.shortLabel})]}),Qe?(()=>{const{national:Q,worstRegions:pe,bestRegions:Ge}=Qe,st=Dr?.value??Q.value,it=Dr?`${(Fe?.name||Dr.regionName).replace(/|||/g,"").trim()} `:_e==="nation"?" ":`${z?.name?.replace(/|||/g,"").trim()||""} `,Ce=oe.higherIsWorse?Q.deltaPP<=0?"text-green-600":"text-red-600":Q.deltaPP>=0?"text-green-600":"text-red-600";return a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-[12px] text-gray-500",children:it}),a.jsx("span",{className:"text-sm font-bold",style:{color:oe.primaryColor},children:a.jsx(BW,{value:st,formatter:Dt=>oe.valueFormatter(Dt)})})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-[12px] text-gray-500",children:" "}),a.jsxs("span",{className:`text-sm font-bold ${Ce}`,children:[Q.deltaPP>0?"+":"",Q.deltaPP,"pp"]})]}),Q.target!=null&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-[12px] text-gray-500",children:""}),a.jsx("span",{className:"text-xs font-semibold text-gray-600",children:oe.valueFormatter(Q.target)})]}),Ge[0]&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"text-[12px] text-gray-500",children:[" (",Ge[0].regionName.replace(/|||/g,"").trim(),")"]}),a.jsx("span",{className:"text-xs font-semibold text-green-600",children:oe.valueFormatter(Ge[0].value)})]}),pe[0]&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"text-[12px] text-gray-500",children:[" (",pe[0].regionName.replace(/|||/g,"").trim(),")"]}),a.jsx("span",{className:"text-xs font-semibold text-red-600",children:oe.valueFormatter(pe[0].value)})]})]})})():a.jsx("div",{className:"h-24 flex items-center justify-center text-xs text-gray-400 animate-pulse",children:" "})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("span",{className:"text-sm font-semibold text-gray-700",children:[oe.legend.direction==="higherWorse"?"":""," Top 5"]}),a.jsx("span",{className:"text-[11px] px-1.5 py-0.5 rounded font-medium",style:{backgroundColor:`${oe.primaryColor}15`,color:oe.primaryColor},children:oe.shortLabel})]}),a.jsx("p",{className:"text-[10px] text-gray-500 mb-1",children:" :         "}),a.jsxs("div",{className:"space-y-0.5",children:[(()=>{if(!Mn.length)return null;const Q=Mn.map(it=>it.gapAbs),pe=Math.min(...Q),st=Math.max(...Q)-pe||1;return Mn.map((it,Ce)=>a.jsxs("div",{role:"button",tabIndex:0,onMouseEnter:()=>{ht({level:Ha(_e),regionCode:it.code,regionName:it.name})},onClick:()=>{ms(it)},onKeyDown:Dt=>{(Dt.key==="Enter"||Dt.key===" ")&&(Dt.preventDefault(),ms(it))},className:`w-full flex items-center gap-2 px-2 py-1.5 rounded transition-colors cursor-pointer select-none ${Fe?.code===it.code?"bg-blue-50 ring-1 ring-blue-200":"hover:bg-gray-50"} ${ze?"animate-pulse":""}`,children:[a.jsx("span",{className:"w-5 h-5 rounded-full flex items-center justify-center text-[11px] font-bold text-white shrink-0",style:{backgroundColor:Ce===0?oe.primaryColor:Ce===1?`${oe.primaryColor}cc`:`${oe.primaryColor}88`},children:it.rank}),a.jsx("div",{className:"min-w-[54px] shrink-0",children:a.jsx("span",{className:"text-[12px] text-gray-800 truncate block",children:it.name.replace(/|||/g,"").trim()})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"h-[6px] bg-gray-100 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full rounded-full transition-all",style:{width:`${Math.max(10,(it.gapAbs-pe)/st*100)}%`,backgroundColor:oe.primaryColor,opacity:.55+.35*(1-Ce/5)}})}),a.jsxs("div",{className:"mt-0.5 text-[10px] text-gray-500 tabular-nums",children:[" ",Fl(it.targetGapPp),"   ",Fl(it.weeklyDeltaPp)]})]}),a.jsx("span",{className:"text-[12px] font-bold tabular-nums text-right min-w-[58px] shrink-0",style:{color:oe.primaryColor},children:oe.valueFormatter(it.value)})]},it.code))})(),Qe&&Mn.length===0&&a.jsx("div",{className:"text-xs text-gray-400 text-center py-4",children:"   ."}),!Qe&&a.jsx("div",{className:"text-xs text-gray-400 text-center py-4 animate-pulse",children:" "})]})]}),a.jsx(K0,{title:" ",isOpen:x.opsSummary,onToggle:()=>v("opsSummary"),summary:`${nm.filter(Q=>Q.status==="deployed").length} `,children:a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("button",{onClick:()=>e?.("model-governance",{}),className:"w-full flex items-center gap-2 p-2 rounded-md hover:bg-blue-50 transition-colors text-left",children:[a.jsx(vx,{className:"h-4 w-4 text-blue-500 shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-[12px] font-medium text-gray-900",children:"  "}),a.jsxs("div",{className:"text-[11px] text-gray-500 truncate",children:[nm.filter(Q=>Q.status==="deployed").length,"   ",nm.filter(Q=>Q.status==="pending").length," "]})]}),a.jsx(es,{className:"h-3 w-3 text-gray-400 shrink-0"})]}),a.jsxs("button",{onClick:()=>e?.("compliance-audit",{}),className:"w-full flex items-center gap-2 p-2 rounded-md hover:bg-orange-50 transition-colors text-left",children:[a.jsx(nl,{className:"h-4 w-4 text-orange-500 shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-[12px] font-medium text-gray-900",children:"  "}),a.jsx("div",{className:"text-[11px] text-gray-500",children:" 0   4/4 "})]}),a.jsx(es,{className:"h-3 w-3 text-gray-400 shrink-0"})]}),a.jsxs("button",{onClick:()=>e?.("quality-monitoring",{}),className:"w-full flex items-center gap-2 p-2 rounded-md hover:bg-purple-50 transition-colors text-left",children:[a.jsx(gd,{className:"h-4 w-4 text-purple-500 shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-[12px] font-medium text-gray-900",children:" &  "}),a.jsxs("div",{className:"text-[11px] text-gray-500",children:[" ",Ag.filter(Q=>Q.severity!=="info").length,"",Ag.filter(Q=>Q.severity==="critical").length>0&&a.jsxs("span",{className:"ml-1 text-red-600 font-medium",children:["  ",Ag.filter(Q=>Q.severity==="critical").length,""]})]})]}),a.jsx(es,{className:"h-3 w-3 text-gray-400 shrink-0"})]})]})}),a.jsx(K0,{title:" / ",isOpen:x.ageRisk,onToggle:()=>v("ageRisk"),summary:"5  2",children:a.jsx("div",{style:{height:"190px"},children:a.jsx(Da,{width:"100%",height:"100%",children:a.jsxs(Df,{data:na.map(Q=>{const pe=Q.normal+Q.caution+Q.highRisk+Q.slaViolation;return{age:Q.age,slaViolation:pe>0?Number((Q.slaViolation/pe*100).toFixed(1)):0,recontactNeed:pe>0?Number(((Q.highRisk+Q.caution)/pe*100).toFixed(1)):0}}),margin:{top:8,right:6,left:6,bottom:4},children:[a.jsx(Rs,{strokeDasharray:"3 3",vertical:!1,stroke:"#e5e7eb"}),a.jsx(oa,{dataKey:"age",tick:{fontSize:14,fill:"#4b5563"},tickLine:!1}),a.jsx(Zr,{tick:{fontSize:13,fill:"#6b7280"},tickLine:!1,axisLine:!1,width:44,tickFormatter:Q=>`${Q}%`}),a.jsx(or,{content:({active:Q,payload:pe,label:Ge})=>!Q||!pe?.length?null:a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-2 shadow-lg text-xs",children:[a.jsxs("div",{className:"font-semibold text-gray-800 mb-1",children:[Ge,""]}),pe.map((st,it)=>a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:st.color}}),a.jsxs("span",{children:[st.dataKey==="slaViolation"?"SLA ":" ",": ",Number(st.value).toFixed(1),"%"]})]},it))]})}),a.jsx(nc,{formatter:Q=>Q==="slaViolation"?"SLA ":" ",wrapperStyle:{fontSize:"13px"}}),a.jsx(us,{dataKey:"slaViolation",fill:"#ef4444",radius:[3,3,0,0],isAnimationActive:!0,animationDuration:460,animationEasing:"ease-out"}),a.jsx(us,{dataKey:"recontactNeed",fill:"#f59e0b",radius:[3,3,0,0],isAnimationActive:!0,animationDuration:460,animationEasing:"ease-out"})]})})})}),a.jsx(K0,{title:"KPI  ",isOpen:x.kpiTable,onToggle:()=>v("kpiTable"),summary:`${qt.length} `,children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-[12px]",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[a.jsx("th",{className:"px-1.5 py-1 text-left font-medium text-gray-600",children:"KPI"}),a.jsx("th",{className:"px-1.5 py-1 text-right font-medium text-gray-600",children:""}),a.jsx("th",{className:"px-1.5 py-1 text-right font-medium text-gray-600",children:""}),a.jsx("th",{className:"px-1.5 py-1 text-right font-medium text-gray-600",children:""})]})}),a.jsx("tbody",{children:qt.map(Q=>{const pe=Tn[Q.id];return pe?a.jsxs("tr",{className:"border-b border-gray-100 hover:bg-blue-50/30",children:[a.jsx("td",{className:"px-1.5 py-1 truncate max-w-[80px]",children:Q.name}),a.jsxs("td",{className:"px-1.5 py-1 text-right whitespace-nowrap",children:[pe.current,pe.unit]}),a.jsxs("td",{className:"px-1.5 py-1 text-right text-red-600 whitespace-nowrap",children:[(pe.current*.95).toFixed(1),pe.unit]}),a.jsxs("td",{className:"px-1.5 py-1 text-right text-blue-600 whitespace-nowrap",children:[(pe.current*1.03).toFixed(1),pe.unit]})]},Q.id):null})})]})})})]}),a.jsx("div",{className:`${qe==="desktop"?"min-w-0 flex flex-col":"w-full shrink-0"}`,children:a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden flex flex-col flex-1",children:[a.jsxs("div",{className:"px-3 py-2 border-b border-gray-200 bg-white rounded-t-lg space-y-1.5",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[_e!=="nation"&&a.jsxs("button",{onClick:Ne,className:"flex items-center gap-0.5 px-2 py-1 text-xs text-blue-600 bg-blue-50 rounded hover:bg-blue-100 transition-colors font-medium shrink-0",children:[a.jsx(vm,{className:"h-3.5 w-3.5"}),""]}),a.jsxs("span",{className:"text-[12px] text-gray-600",children:[Br,"  2026  ",a.jsx("span",{className:"font-semibold",style:{color:oe.primaryColor},children:oe.shortLabel}),"  ",Y_(_e),z&&a.jsxs("span",{className:"text-gray-500",children:[" (",z.name,")"]})]})]}),a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsxs("div",{className:"flex rounded-md border border-gray-200 overflow-hidden",children:[a.jsx("button",{onClick:()=>c("geomap"),className:`px-2.5 py-1 text-[11px] font-medium transition ${l==="geomap"?"bg-blue-600 text-white":"bg-white text-gray-500 hover:bg-gray-100"}`,children:""}),a.jsx("button",{onClick:()=>c("heatmap"),className:`px-2.5 py-1 text-[11px] font-medium transition border-l border-gray-200 ${l==="heatmap"?"bg-blue-600 text-white":"bg-white text-gray-500 hover:bg-gray-100"}`,children:""})]}),a.jsx("div",{className:"flex items-center gap-0.5",children:["weekly","monthly","quarterly","yearly_cum"].map(Q=>a.jsx("button",{onClick:()=>r(Q),className:`rounded-md px-2.5 py-1 text-[11px] font-medium transition ${n===Q?"bg-blue-600 text-white":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,children:Q==="weekly"?"":Q==="monthly"?"":Q==="quarterly"?"":"()"},Q))}),a.jsx("button",{className:"h-6 w-6 flex items-center justify-center hover:bg-gray-100 rounded transition-colors ml-auto shrink-0",children:a.jsx(im,{className:"h-3 w-3 text-gray-500"})})]})]}),a.jsx("div",{className:"p-2 min-h-0",children:l==="geomap"?a.jsx(Xk,{indicatorId:t,periodType:n,year:2026,scope:{mode:"national"},variant:"portal",mapHeight:670,hideBreadcrumb:!0,externalLevel:_e==="nation"?"ctprvn":_e==="sido"?"sig":"emd",externalSelectedCode:Fe?.code??z?.code,onRegionSelect:wr,onGoBack:Ne,externalColorScheme:ye,hideLegendPanel:!0,onSubRegionsChange:ne}):a.jsxs("div",{className:"relative w-full",style:{height:"clamp(320px, 44vh, 480px)"},children:[a.jsx(Da,{width:"100%",height:"100%",children:a.jsx(o1,{data:Kt,dataKey:"size",stroke:"#fff",isAnimationActive:!0,animationDuration:520,animationEasing:"ease-out",content:ns})}),L&&(()=>{const pe=[...Kt].sort((it,Ce)=>Ce.size-it.size).findIndex(it=>it.name===L.name)+1,Ge=Kt.reduce((it,Ce)=>it+Ce.size,0),st=Ge>0?(L.size/Ge*100).toFixed(1):"0";return a.jsxs("div",{className:"absolute z-50 pointer-events-none bg-white border border-gray-200 rounded-lg p-2.5 shadow-xl text-xs min-w-[170px]",style:{left:Math.min(L.x+12,200),top:Math.max(L.y-60,0)},children:[a.jsxs("div",{className:"flex items-center justify-between mb-1 pb-1 border-b border-gray-100",children:[a.jsx("span",{className:"font-semibold text-gray-800",children:L.name}),a.jsx("span",{className:"text-[11px] bg-orange-50 text-orange-600 px-1.5 py-0.5 rounded font-medium",children:n==="weekly"?"":n==="monthly"?"":n==="quarterly"?"":"()"})]}),a.jsxs("div",{className:"flex justify-between py-0.5",children:[a.jsx("span",{className:"text-gray-500",children:t}),a.jsx("span",{className:"font-bold text-blue-600",children:L.size.toLocaleString()})]}),a.jsxs("div",{className:"flex justify-between py-0.5",children:[a.jsx("span",{className:"text-gray-500",children:""}),a.jsxs("span",{className:"font-bold text-gray-700",children:[pe,"/",Kt.length]})]}),a.jsxs("div",{className:"flex justify-between py-0.5",children:[a.jsx("span",{className:"text-gray-500",children:""}),a.jsxs("span",{className:"font-bold text-gray-700",children:[st,"%"]})]})]})})()]})}),a.jsxs("div",{className:"mx-2 mb-2 px-3 py-2 rounded-lg bg-gradient-to-r from-gray-50 to-gray-100/80 border border-gray-200/60 shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full",style:{backgroundColor:oe.primaryColor}}),a.jsx("span",{className:"text-[12px] font-bold text-gray-600 tracking-wide",children:oe.shortLabel}),a.jsx("span",{className:"text-[11px] text-gray-400 ml-auto",children:oe.unit})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-[12px] font-semibold text-gray-500 tabular-nums min-w-[36px] text-right",children:oe.legend.format(oe.legend.ticks[0])}),a.jsx("div",{className:"flex-1 h-3 rounded-md overflow-hidden flex shadow-inner",children:oe.palette.map((Q,pe)=>a.jsx("div",{className:"flex-1 transition-colors",style:{backgroundColor:Q}},pe))}),a.jsx("span",{className:"text-[12px] font-semibold text-gray-500 tabular-nums min-w-[36px]",children:oe.legend.format(oe.legend.ticks[oe.legend.ticks.length-1])})]}),a.jsx("div",{className:"flex items-center justify-center gap-1 mt-1",children:a.jsx("span",{className:"text-[10px] text-gray-400",children:oe.legend.direction==="higherBetter"?"  ()   () ":"  ()   () "})})]})]})}),a.jsxs("div",{className:`flex flex-col gap-2 ${qe==="desktop"?"min-w-0":qe==="tablet"?"hidden":"w-full shrink-0"}`,children:[a.jsx("div",{className:"bg-white border border-gray-200 rounded-lg px-3 py-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"w-2 h-2 rounded-full shrink-0",style:{backgroundColor:oe.primaryColor}}),a.jsx("span",{className:"text-[12px] font-semibold text-gray-700 shrink-0",children:oe.shortLabel}),a.jsx("p",{className:"text-[11px] text-gray-500 truncate flex-1",title:oe.analysisSummary,children:oe.analysisSummary})]})}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg px-3 py-2.5",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[a.jsx("span",{className:"text-[12px] font-semibold text-gray-700",children:" "}),_.type==="kpi"&&a.jsx("span",{className:`inline-flex items-center rounded-full border px-1.5 py-0.5 text-[10px] font-semibold ${eC[_.severity]}`,children:z0[_.severity]}),_.type==="matrix"&&a.jsx("span",{className:`inline-flex items-center rounded-full border px-1.5 py-0.5 text-[10px] font-semibold ${Kc[_.quadrant].badgeClass}`,children:Kc[_.quadrant].label})]}),_.type==="none"&&a.jsx("p",{className:"text-[11px] text-gray-500",children:"Top5,  ,      ."}),_.type==="kpi"&&a.jsxs("div",{className:"space-y-1.5 text-[11px] text-gray-600",children:[a.jsxs("p",{className:"font-semibold text-gray-800",children:[le.shortName,"  "]}),a.jsxs("p",{children:["   ",Fl(_.deltaPp),"    ",Fl(_.trendWorseningPp)]}),a.jsxs("p",{children:[" : ",aU[_.kpiId]]}),_.partialPossible&&a.jsx("span",{className:"inline-flex items-center rounded-md border border-amber-200 bg-amber-50 px-1.5 py-0.5 text-[10px] font-medium text-amber-700",children:"  "})]}),_.type==="top5"&&a.jsxs("div",{className:"space-y-1.5 text-[11px]",children:[a.jsxs("p",{className:"font-semibold text-gray-800",children:[_.row.name,"  ",oe.valueFormatter(_.row.value)]}),a.jsxs("p",{className:"text-gray-600",children:["  ",Fl(_.row.targetGapPp),"    ",Fl(_.row.weeklyDeltaPp)]}),a.jsxs("p",{className:"text-gray-600",children:[": ",_.causeName]}),a.jsx("p",{className:"text-gray-600",children:_.actionText}),a.jsx("div",{className:"space-y-1 pt-1 border-t border-gray-100",children:_.owners.slice(0,3).map(Q=>a.jsxs("div",{className:"flex items-center justify-between text-[10px]",children:[a.jsx("span",{className:"truncate text-gray-600",children:Q.orgName}),a.jsxs("span",{className:"font-semibold text-gray-800",children:[Q.count,""]})]},`${Q.orgName}-${Q.lastOccurredAt}`))})]}),_.type==="cause"&&a.jsxs("div",{className:"space-y-1.5 text-[11px]",children:[a.jsxs("p",{className:"font-semibold text-gray-800",children:[": ",_.causeName]}),a.jsx("p",{className:"text-gray-600",children:_.actionText}),a.jsx("div",{className:"space-y-1 pt-1 border-t border-gray-100",children:_.owners.slice(0,4).map(Q=>a.jsxs("div",{className:"rounded border border-gray-100 bg-gray-50 px-2 py-1",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-[10px] font-medium text-gray-700",children:Q.orgName}),a.jsxs("span",{className:"text-[10px] font-semibold text-gray-800",children:[Q.count,""]})]}),a.jsxs("div",{className:"text-[10px] text-gray-500",children:[Q.regionName,"  ",Q.lastOccurredAt]})]},`${Q.orgName}-${Q.lastOccurredAt}`))}),a.jsx("button",{onClick:()=>e?.("compliance-audit",{region:Fe?.code??z?.code??"KR",kpi:V}),className:"text-[10px] text-blue-600 hover:text-blue-700 font-semibold",children:" /   "})]}),_.type==="matrix"&&a.jsxs("div",{className:"space-y-1.5 text-[11px] text-gray-600",children:[a.jsxs("p",{className:"font-semibold text-gray-800",children:[_.selectedRegionName,"   ",Kc[_.quadrant].description]}),a.jsx("div",{className:"space-y-1 pt-1 border-t border-gray-100 max-h-[120px] overflow-y-auto",children:_.items.map(Q=>a.jsxs("div",{className:"flex items-center justify-between text-[10px]",children:[a.jsx("span",{className:"truncate",children:Q.regionName}),a.jsxs("span",{className:"tabular-nums text-gray-800",children:["SLA ",Q.slaRate.toFixed(1),"%   ",Q.dataRate.toFixed(1),"%"]})]},`${Q.regionName}-${Q.slaRate}`))})]}),_.type==="policy"&&a.jsxs("div",{className:"space-y-1.5 text-[11px] text-gray-600",children:[a.jsx("p",{className:"font-semibold text-gray-800",children:" /  Top 3"}),a.jsx("div",{className:"space-y-1 max-h-[132px] overflow-y-auto",children:_.items.map(Q=>a.jsxs("div",{className:"rounded border border-gray-100 bg-gray-50 px-2 py-1",children:[a.jsx("div",{className:"text-[10px] font-semibold text-gray-800",children:Q.title}),a.jsxs("div",{className:"text-[10px] text-gray-500",children:[Q.effectiveAt,"    ",Q.impactedRegions,""]}),a.jsx("div",{className:"text-[10px] text-gray-600 mt-0.5",children:Q.impactedKpis.map(pe=>`${pe.kpiKey} ${Fl(pe.deltaPp)}`).join("  ")}),Q.notes&&a.jsx("div",{className:"text-[10px] text-gray-500 mt-0.5",children:Q.notes})]},Q.policyId))})]})]}),Qe&&a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs(tU,{title:" ",height:300,badge:a.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded font-medium",style:{backgroundColor:`${oe.primaryColor}15`,color:oe.primaryColor},children:Qe.breakdownType==="donut"?"":""}),children:[Qe.breakdownType==="donut"?a.jsxs("div",{className:"relative",style:{height:"160px"},children:[a.jsx(Da,{width:"100%",height:"100%",children:a.jsxs(DK,{children:[a.jsx(pc,{data:Qe.breakdown,cx:"50%",cy:"50%",innerRadius:35,outerRadius:60,dataKey:"value",startAngle:90,endAngle:-270,paddingAngle:2,strokeWidth:0,label:K5e,labelLine:!1,isAnimationActive:!0,animationDuration:460,animationEasing:"ease-out",children:Qe.breakdown.map((Q,pe)=>a.jsx(xo,{fill:Q.color||oe.palette[pe%oe.palette.length]},pe))}),a.jsx(or,{formatter:Q=>[Q.toLocaleString(),""],contentStyle:{fontSize:"11px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.12)"}})]})}),a.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center pointer-events-none",children:[a.jsx("div",{className:"text-[10px] text-gray-500",children:""}),a.jsx("div",{className:"text-[12px] font-bold text-gray-800",children:Qe.breakdown.reduce((Q,pe)=>Q+pe.value,0).toLocaleString()})]})]}):a.jsx("div",{style:{height:"160px"},children:a.jsx(Da,{width:"100%",height:"100%",children:a.jsxs(Df,{data:Qe.breakdown,margin:{top:4,right:8,left:6,bottom:4},children:[a.jsx(Rs,{strokeDasharray:"3 3",vertical:!1,stroke:"#e5e7eb"}),a.jsx(oa,{dataKey:"name",tick:{fontSize:10,fill:"#4b5563"},tickLine:!1}),a.jsx(Zr,{tick:{fontSize:10,fill:"#6b7280"},tickLine:!1,axisLine:!1,width:40}),a.jsx(or,{contentStyle:{fontSize:"11px",borderRadius:"8px"}}),a.jsx(us,{dataKey:"value",radius:[3,3,0,0],isAnimationActive:!0,animationDuration:460,animationEasing:"ease-out",children:Qe.breakdown.map((Q,pe)=>a.jsx(xo,{fill:Q.color||oe.palette[pe%oe.palette.length]},pe))})]})})}),a.jsxs("div",{className:"space-y-0.5 mt-1 pt-1 border-t border-gray-100",children:[Qe.breakdown.slice(0,N?Qe.breakdown.length:3).map((Q,pe)=>a.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-600",children:[a.jsx("span",{className:"w-2 h-2 rounded-sm shrink-0",style:{backgroundColor:Q.color||oe.palette[pe%oe.palette.length]}}),a.jsx("span",{className:"truncate",children:Q.name}),a.jsx("span",{className:"font-semibold text-gray-800 ml-auto tabular-nums",children:Q.value.toLocaleString()})]},pe)),Qe.breakdown.length>3&&a.jsx("button",{onClick:()=>S(!N),title:N?"  ":` : ${Qe.breakdown.slice(3,6).map(Q=>Q.name).join(", ")}`,className:"text-[10px] text-blue-500 hover:text-blue-700 w-full text-center pt-0.5",children:N?"":`+${Qe.breakdown.length-3} `})]})]}),a.jsxs(tU,{title:" ",height:300,children:[a.jsx("div",{style:{height:"180px"},children:a.jsx(Da,{width:"100%",height:"100%",children:a.jsxs(Df,{data:Ur.slice(0,j?Ur.length:3),layout:"vertical",margin:{top:4,right:24,left:4,bottom:4},children:[a.jsx(Rs,{strokeDasharray:"3 3",horizontal:!1,stroke:"#e5e7eb"}),a.jsx(oa,{type:"number",tick:{fontSize:10,fill:"#6b7280"}}),a.jsx(Zr,{type:"category",dataKey:"name",tick:{fontSize:10,fill:"#4b5563"},width:60}),a.jsx(or,{contentStyle:{fontSize:"11px",borderRadius:"8px"}}),a.jsx(us,{dataKey:"value",radius:[0,3,3,0],fill:oe.primaryColor,isAnimationActive:!0,animationDuration:460,animationEasing:"ease-out",onClick:Q=>{const Ge=(Q?.payload??Q)?.name;Ge&&A({type:"cause",causeName:Ge,owners:$t(Ge),actionText:Bt(Ge)})},label:{position:"right",fontSize:10,fill:"#374151",formatter:Q=>Q.toLocaleString()},children:Ur.slice(0,j?Ur.length:3).map((Q,pe)=>a.jsx(xo,{fill:oe.palette[Math.min(pe+1,oe.palette.length-2)]},pe))})]})})}),Ur.length>3&&a.jsx("button",{onClick:()=>C(!j),title:j?"  ":` : ${Ur.slice(3,6).map(Q=>Q.name).join(", ")}`,className:"text-[10px] text-blue-500 hover:text-blue-700 w-full text-center pt-1",children:j?"":`+${Ur.length-3} `})]})]}),Qe&&a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:oe.primaryColor}}),a.jsxs("span",{className:"text-[12px] font-semibold text-gray-700",children:[oe.shortLabel," ",Fe?.name?` (${Fe.name})`:""]})]}),a.jsx("span",{className:"text-[10px] text-gray-400",children:Br})]}),a.jsx("div",{style:{height:"160px"},children:a.jsx(Da,{width:"100%",height:"100%",children:a.jsxs(Bk,{data:jo,margin:{top:6,right:10,left:10,bottom:4},children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"kpiTrendGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:oe.primaryColor,stopOpacity:.25}),a.jsx("stop",{offset:"100%",stopColor:oe.primaryColor,stopOpacity:.03})]})}),a.jsx(Rs,{strokeDasharray:"3 3",vertical:!1,stroke:"#f3f4f6"}),a.jsx(oa,{dataKey:"period",tick:{fontSize:10,fill:"#6b7280"},tickLine:!1}),a.jsx(Zr,{tick:{fontSize:10,fill:"#9ca3af"},tickLine:!1,axisLine:!1,tickMargin:4,width:oe.unit==="%"?58:46,tickFormatter:Q=>oe.valueFormatter(Q)}),a.jsx(or,{contentStyle:{fontSize:"11px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.12)"},formatter:Q=>[oe.valueFormatter(Q),oe.shortLabel]}),oe.target!=null&&a.jsx(sc,{y:oe.target,stroke:"#ef4444",strokeDasharray:"4 2",strokeWidth:1.5,label:{value:` ${oe.valueFormatter(oe.target)}`,fontSize:10,fill:"#ef4444",position:"right"}}),a.jsx(mc,{type:"monotone",dataKey:"value",fill:"url(#kpiTrendGrad)",stroke:"none",isAnimationActive:!0,animationDuration:500,animationEasing:"ease-out"}),a.jsx(Ja,{type:"monotone",dataKey:"value",stroke:oe.primaryColor,strokeWidth:2,isAnimationActive:!0,animationDuration:500,animationEasing:"ease-out",dot:!1,activeDot:{r:4,fill:oe.primaryColor,stroke:"#fff",strokeWidth:2}})]})})})]}),a.jsxs(K0,{title:"SLA    ",isOpen:$.slaMatrix,onToggle:()=>U("slaMatrix"),summary:` ${Gr.filter(pe=>pe.slaRate<hr&&pe.dataRate<gr).length} `,children:[a.jsxs("div",{className:"flex items-center justify-between gap-2 text-[10px] text-gray-500 mb-1",children:[a.jsx("span",{className:"text-[11px] text-gray-500",children:" (SLA)      "}),a.jsxs("button",{onClick:Gi,className:"inline-flex items-center gap-1 rounded border border-gray-200 bg-white px-2 py-0.5 text-[10px] font-medium text-gray-600 hover:bg-gray-50",children:[a.jsx(im,{className:"h-3 w-3"}),""]})]}),a.jsxs("div",{className:"mb-1 flex items-center justify-between gap-2",children:[a.jsxs("button",{type:"button",onClick:()=>Bi(Hr),className:"inline-flex items-center gap-1 rounded-md border border-blue-200 bg-blue-50/70 px-2 py-0.5 text-[10px] font-semibold text-blue-700 hover:bg-blue-100/80",children:["   :",a.jsx("span",{children:Kc[Hr].guideLabel}),a.jsxs("span",{children:["(",Pr[Hr]," )"]})]}),a.jsxs("div",{className:"flex items-center justify-end gap-2 text-[10px] text-gray-500",children:[a.jsxs("span",{className:"flex items-center gap-0.5",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"}),""]}),a.jsxs("span",{className:"flex items-center gap-0.5",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-amber-400"}),""]}),a.jsxs("span",{className:"flex items-center gap-0.5",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"}),""]})]})]}),a.jsxs("div",{className:"mb-1 text-[10px] text-gray-500",children:[" : SLA ",hr.toFixed(1),"% /  ",gr.toFixed(1),"%"]}),Gr.length>0?a.jsxs("div",{className:"relative",style:{height:"220px"},children:[a.jsx(Da,{width:"100%",height:"100%",children:a.jsxs(Zve,{margin:{top:8,right:12,left:8,bottom:8},children:[a.jsx(Rs,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),a.jsx(oa,{type:"number",dataKey:"dataRate",name:" ",unit:"%",domain:[70,100],tick:{fontSize:11},label:{value:" (%)",position:"insideBottom",offset:-2,fontSize:11,fill:"#6b7280"}}),a.jsx(Zr,{type:"number",dataKey:"slaRate",name:"SLA ",unit:"%",domain:[70,100],tick:{fontSize:11},width:46,label:{value:"SLA(%)",angle:-90,position:"insideLeft",offset:0,fontSize:11,fill:"#6b7280"}}),a.jsx(kh,{type:"number",dataKey:"totalCases",range:[30,250],name:" "}),a.jsx(sc,{x:gr,stroke:"#9ca3af",strokeDasharray:"4 2"}),a.jsx(sc,{y:hr,stroke:"#9ca3af",strokeDasharray:"4 2"}),a.jsx(or,{content:({active:Q,payload:pe})=>{if(!Q||!pe?.[0])return null;const Ge=pe[0].payload;return a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-2 shadow-lg text-xs",children:[a.jsx("div",{className:"font-semibold text-gray-800 mb-1",children:Ge.regionName}),a.jsxs("div",{children:["SLA : ",a.jsxs("span",{className:"font-medium",children:[Ge.slaRate,"%"]})]}),a.jsxs("div",{children:[" : ",a.jsxs("span",{className:"font-medium",children:[Ge.dataRate,"%"]})]}),a.jsxs("div",{children:[": ",a.jsxs("span",{className:"font-medium",children:[Ge.totalCases.toLocaleString(),""]})]})]})}}),a.jsx(Ih,{data:Gr,isAnimationActive:!0,animationDuration:480,animationEasing:"ease-out",onClick:Ls,children:Gr.map((Q,pe)=>{const Ge=q0(Q.slaRate,Q.dataRate,hr,gr),st=Ge==="good"?"#22c55e":Ge==="dualRisk"?"#ef4444":"#f59e0b",it=T!==null&&T!==Ge;return a.jsx(xo,{fill:st,fillOpacity:it?.2:.95,stroke:it?"#d1d5db":st,strokeWidth:it?1:1.5,style:{cursor:"pointer"}},pe)})})]})}),a.jsx("div",{className:"pointer-events-none absolute inset-0",children:["good","dataRisk","slaRisk","dualRisk"].map(Q=>{const pe=Kc[Q],Ge=ra[Q],st=xl===Q;return a.jsxs("button",{type:"button",onClick:()=>Bi(Q),className:`pointer-events-auto absolute -translate-x-1/2 -translate-y-1/2 rounded-md border px-1.5 py-0.5 text-[10px] font-semibold transition-colors ${st?"border-blue-200 bg-white/95 text-blue-700 shadow-sm":"border-gray-200 bg-white/70 text-gray-500 hover:bg-white/90"}`,style:{left:`${Ge.left}%`,top:`${Ge.top}%`},children:[pe.guideLabel," (",Pr[Q],")"]},`overlay-${Q}`)})})]}):a.jsx("div",{className:"h-[160px] flex items-center justify-center text-xs text-gray-400",children:" "}),a.jsx("div",{className:"mt-2 grid grid-cols-2 gap-1.5",children:["good","dataRisk","slaRisk","dualRisk"].map(Q=>{const pe=Kc[Q],Ge=T===Q,st=T===null&&Hr===Q;return a.jsxs("div",{role:"button",tabIndex:0,"aria-pressed":Ge,title:pe.description,onClick:()=>Bi(Q),onKeyDown:it=>{(it.key==="Enter"||it.key===" ")&&(it.preventDefault(),Bi(Q))},className:`rounded-md border px-2 py-1 text-left transition-colors ${Ge?"ring-1 ring-blue-300 border-blue-200 bg-blue-50/70":st?"border-indigo-200 bg-indigo-50/60":"border-gray-200 bg-gray-50/70 hover:bg-gray-100"}`,children:[a.jsxs("div",{className:"flex items-start justify-between gap-1",children:[a.jsx("span",{className:`inline-flex items-center rounded-full border px-1.5 py-0.5 text-[10px] font-semibold ${pe.badgeClass}`,children:pe.guideLabel}),a.jsxs("div",{className:"relative","data-matrix-help-popover":!0,children:[a.jsx("button",{type:"button","aria-label":`${pe.guideLabel}  `,className:"inline-flex items-center justify-center rounded text-gray-400 hover:text-gray-600",onClick:it=>{it.stopPropagation(),P(Ce=>Ce===Q?null:Q)},children:a.jsx(bC,{className:"h-3 w-3"})}),M===Q&&a.jsx("div",{className:"absolute right-0 top-4 z-20 min-w-[130px] rounded border border-gray-200 bg-white px-2 py-1 text-[10px] text-gray-600 shadow-lg",children:pe.description})]})]}),a.jsxs("p",{className:"mt-1 text-[11px] font-semibold text-gray-700",children:["  ",Pr[Q],""]})]},Q)})})]}),a.jsx(K0,{title:"   ()",isOpen:$.stageDistribution,onToggle:()=>U("stageDistribution"),summary:`${ta.length} `,children:ta.length>0?a.jsx("div",{style:{height:"240px"},children:a.jsx(Da,{width:"100%",height:"100%",children:a.jsxs(Df,{data:ta,margin:{top:5,right:8,left:8,bottom:22},children:[a.jsx(Rs,{strokeDasharray:"3 3",vertical:!1,stroke:"#e5e7eb"}),a.jsx(oa,{dataKey:"regionName",tick:{fontSize:11,fill:"#4b5563"},interval:0,angle:-35,textAnchor:"end"}),a.jsx(Zr,{tick:{fontSize:11,fill:"#6b7280"},width:46,tickFormatter:Q=>Q>=1e3?`${(Q/1e3).toFixed(0)}K`:String(Q)}),a.jsx(or,{content:({active:Q,payload:pe,label:Ge})=>{if(!Q||!pe?.length)return null;const st=pe.reduce((it,Ce)=>it+(Number(Ce.value)||0),0);return a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-2 shadow-lg text-xs",children:[a.jsx("div",{className:"font-semibold text-gray-800 mb-1",children:Ge}),pe.map((it,Ce)=>a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:it.color}}),a.jsxs("span",{children:[ca[it.dataKey]||it.dataKey,": ",Number(it.value).toLocaleString()," (",st>0?(Number(it.value)/st*100).toFixed(1):0,"%)"]})]},Ce)),a.jsxs("div",{className:"mt-1 pt-1 border-t border-gray-100 font-medium",children:[": ",st.toLocaleString(),""]})]})}}),a.jsx(nc,{formatter:Q=>ca[Q]||Q,wrapperStyle:{fontSize:"11px"}}),la.map(Q=>a.jsx(us,{dataKey:Q,stackId:"stage",fill:Ga[Q],isAnimationActive:!0,animationDuration:460,animationEasing:"ease-out"},Q))]})})}):a.jsx("div",{className:"h-[180px] flex items-center justify-center text-xs text-gray-400",children:" "})})]}),qe==="tablet"&&a.jsxs("div",{className:"flex gap-2 flex-1 min-h-0",children:[a.jsxs("div",{className:"flex-1 flex flex-col gap-2 overflow-y-auto",children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-2 text-center",children:[a.jsxs("span",{className:"text-xs text-blue-700 font-medium",children:[Y_(_e)," "]}),z&&a.jsxs("span",{className:"ml-2 text-xs text-blue-600",children:["(",z.name,")"]})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3 flex-1",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsxs("div",{className:"text-xs text-gray-500",children:[Br,"  "]}),a.jsx("div",{className:"text-[11px] text-blue-500 bg-blue-50 px-1.5 py-0.5 rounded",children:Br})]}),a.jsxs("div",{className:"text-2xl font-bold text-blue-600 mb-2",children:[Fn.toLocaleString()," ",a.jsx("span",{className:"text-sm font-normal text-gray-500",children:""})]}),a.jsxs("div",{className:"text-[12px] text-gray-500 mb-2",children:[Jt.label," ()"]}),a.jsx("div",{className:"h-[140px]",children:a.jsx(Da,{width:"100%",height:"100%",children:a.jsx(o1,{data:Kt,dataKey:"size",aspectRatio:4/3,stroke:"#fff",isAnimationActive:!0,animationDuration:520,animationEasing:"ease-out",content:a.jsx(ns,{})})})})]})]}),a.jsx("div",{className:"flex-1 flex flex-col gap-2 overflow-y-auto",children:a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3 flex-1",children:[a.jsx("div",{className:"text-xs font-medium text-gray-700 mb-2",children:"KPI  "}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:qt.slice(0,4).map((Q,pe)=>a.jsx(q5e,{kpiDef:Q,data:Tn[Q.id],colorIndex:pe,analyticsPeriod:o},Q.id))})]})})]})]})}),a.jsx($5e,{visible:rs,stage:Ee==="refreshing"?"refreshing":"scopeChange"})]})]})}const oIe={"national-dashboard":"","model-governance":"/  ","quality-monitoring":"& ","compliance-audit":"   "},lIe=["SIGNAL_QUALITY","POLICY_IMPACT","BOTTLENECK_RISK","DATA_READINESS","GOVERNANCE_SAFETY"],KW={SIGNAL_QUALITY:{id:"SIGNAL_QUALITY",category:"",scope:"",definition:{what:"             .",why:"      ,      ."},calculation:{numeratorLabel:"   (validSignals)",denominatorLabel:"    (totalSignals)",includeRules:["Stage0    +      ","         ","       "],excludeRules:["  ,  ,    ","/   ","       "]},interpretation:{high:"   , Stage0/Stage1   .",low:"             ."},linkedModelStages:["Reach","Stage0","Stage1"],usageScreens:[{page:"national-dashboard",label:"",reason:" KPI    "},{page:"quality-monitoring",label:"& ",reason:"  Driver "},{page:"compliance-audit",label:"   ",reason:" /   "}],linkedTabs:[{page:"model-governance",label:"",reason:" /    "},{page:"quality-monitoring",label:"",reason:"  "},{page:"compliance-audit",label:"",reason:"      "}],changeHistory:[{version:"v2.4",changedAt:"2026-02-03",changedBy:" ",definitionChange:"        ",formulaChange:"          ",impactedScreens:["national-dashboard","quality-monitoring","compliance-audit"]},{version:"v2.3",changedAt:"2026-01-20",changedBy:" ",definitionChange:"       1  ",formulaChange:"   citizenId+eventDate  ",impactedScreens:["national-dashboard","quality-monitoring"]},{version:"v2.1",changedAt:"2025-11-18",changedBy:" TF",definitionChange:"     ",formulaChange:"    ",impactedScreens:["national-dashboard","compliance-audit"]}],whyChecklist:["  (window)  ","(validSignals) (totalSignals)    ","/     ","         "]},POLICY_IMPACT:{id:"POLICY_IMPACT",category:"",scope:"",definition:{what:"     KPI   (0~100) .",why:"    , /     ."},calculation:{numeratorLabel:"    (impactScore)",denominatorLabel:"   (maxScore=100)",includeRules:[" (deployed)  (rollback)   ","SLA,  , ,    ","     KPI  "],excludeRules:[" (reviewing)  (pending)  "," /     ","      "]},interpretation:{high:"      ,     .",low:"      ."},linkedModelStages:["Stage1","L1","L2","Stage2"],usageScreens:[{page:"national-dashboard",label:"",reason:"  KPI / "},{page:"model-governance",label:"/  ",reason:"     "},{page:"compliance-audit",label:"   ",reason:"   "}],linkedTabs:[{page:"model-governance",label:"",reason:"   "},{page:"quality-monitoring",label:"",reason:"   /   "},{page:"compliance-audit",label:"",reason:"       "}],changeHistory:[{version:"v3.0",changedAt:"2026-01-24",changedBy:"",definitionChange:"       ",formulaChange:"     (+0.2) ",impactedScreens:["national-dashboard","model-governance","compliance-audit"]},{version:"v2.6",changedAt:"2026-01-10",changedBy:" ",definitionChange:"  7  (window)   ",formulaChange:"      ",impactedScreens:["model-governance","compliance-audit"]},{version:"v2.2",changedAt:"2025-10-28",changedBy:"",definitionChange:"   ( )  ",formulaChange:"  maxScore 120100 ",impactedScreens:["national-dashboard"]}],whyChecklist:["   /   ","  KPI    ","      ","         "]},BOTTLENECK_RISK:{id:"BOTTLENECK_RISK",category:"",scope:"",definition:{what:"SLA , L2 ,        0~100 .",why:"     /     ."},calculation:{numeratorLabel:"   (weightedRisk)",denominatorLabel:"   (maxRisk=100)",includeRules:["SLA , L2 backlog,       ","       ","     "],excludeRules:["/    ","        ","   1 "]},interpretation:{high:"     (/ )  .",low:"        ."},linkedModelStages:["L1","L2","Stage2","Stage3"],usageScreens:[{page:"national-dashboard",label:"",reason:" Top5    "},{page:"quality-monitoring",label:"& ",reason:"  Driver  "},{page:"model-governance",label:"/  ",reason:"    "}],linkedTabs:[{page:"model-governance",label:"",reason:"L2 /   "},{page:"quality-monitoring",label:"",reason:"  Driver   "},{page:"compliance-audit",label:"",reason:"    "}],changeHistory:[{version:"v2.8",changedAt:"2026-01-22",changedBy:"",definitionChange:"      ",formulaChange:" SLA 0.450.40, L2Backlog 0.300.35 ",impactedScreens:["national-dashboard","quality-monitoring","model-governance"]},{version:"v2.4",changedAt:"2025-12-15",changedBy:" ",definitionChange:"    ",formulaChange:"      ",impactedScreens:["national-dashboard","quality-monitoring"]},{version:"v2.0",changedAt:"2025-09-30",changedBy:"  TF",definitionChange:"  KPI    ",formulaChange:"3    ",impactedScreens:["national-dashboard"]}],whyChecklist:["SLA /L2 /  3  ","       ","     ","   L2   "]},DATA_READINESS:{id:"DATA_READINESS",category:"",scope:"",definition:{what:"        .",why:"      ,      ."},calculation:{numeratorLabel:"    (readyCases)",denominatorLabel:"     (totalCases)",includeRules:[" ( )   ","      ","   /  "],excludeRules:["/  ","/   ","        "]},interpretation:{high:"          .",low:"       ."},linkedModelStages:["Stage0","Consent","L0","L1","L2"],usageScreens:[{page:"national-dashboard",label:"",reason:"  KPI / "},{page:"quality-monitoring",label:"& ",reason:"/   "},{page:"compliance-audit",label:"   ",reason:"    "}],linkedTabs:[{page:"model-governance",label:"",reason:" /    "},{page:"quality-monitoring",label:"",reason:" /  "},{page:"compliance-audit",label:"",reason:"      "}],changeHistory:[{version:"v2.5",changedAt:"2026-01-18",changedBy:"  ",definitionChange:"        ",formulaChange:"  linkagePending   ",impactedScreens:["national-dashboard","quality-monitoring","compliance-audit"]},{version:"v2.2",changedAt:"2025-12-03",changedBy:" ",definitionChange:"     ",formulaChange:"    ",impactedScreens:["national-dashboard","quality-monitoring"]},{version:"v1.9",changedAt:"2025-08-21",changedBy:"",definitionChange:"/     ",formulaChange:" /  ",impactedScreens:["national-dashboard"]}],whyChecklist:["  (readyCases)  (totalCases)   ","        ","//     ","       "]},GOVERNANCE_SAFETY:{id:"GOVERNANCE_SAFETY",category:"",scope:"",definition:{what:"   ()     .",why:"    ,       ."},calculation:{numeratorLabel:"    (auditReady)",denominatorLabel:"    (totalAuditable)",includeRules:[", , ,      "," / /   ","      "],excludeRules:[" heartbeat     ","     ","       "]},interpretation:{high:"      ,    .",low:"  /     ."},linkedModelStages:["Stage2","Stage3","PolicyChange"],usageScreens:[{page:"national-dashboard",label:"",reason:"  KPI  "},{page:"compliance-audit",label:"   ",reason:"//  "},{page:"model-governance",label:"/  ",reason:"/   "}],linkedTabs:[{page:"model-governance",label:"",reason:"    "},{page:"quality-monitoring",label:"",reason:" /   "},{page:"compliance-audit",label:"",reason:"    "}],changeHistory:[{version:"v3.1",changedAt:"2026-01-26",changedBy:" ",definitionChange:"     ",formulaChange:"  missingExplanation=0  ",impactedScreens:["national-dashboard","compliance-audit","model-governance"]},{version:"v2.9",changedAt:"2026-01-09",changedBy:"",definitionChange:"     ",formulaChange:"  missingResponsible>0  ",impactedScreens:["compliance-audit","national-dashboard"]},{version:"v2.4",changedAt:"2025-10-10",changedBy:"",definitionChange:"    30  ",formulaChange:"  30   ",impactedScreens:["national-dashboard","compliance-audit"]}],whyChecklist:["  (auditReady)   (totalAuditable) "," (missingExplanation)  (missingResponsible)  ","/    ","       "]}};function cIe(e){return KW[e]}function dIe(){return lIe.map(e=>KW[e])}const dU={LAST_24H:" 24",LAST_7D:" 7",LAST_30D:" 30",LAST_90D:" 90"},nC={:"bg-blue-50 text-blue-700 border-blue-200",:"bg-violet-50 text-violet-700 border-violet-200",:"bg-red-50 text-red-700 border-red-200",:"bg-emerald-50 text-emerald-700 border-emerald-200",:"bg-amber-50 text-amber-700 border-amber-200"},uIe={SIGNAL_QUALITY:{kpi:"SIGNAL_QUALITY",auditId:"ua_002",driver:"data_quality"},POLICY_IMPACT:{kpi:"POLICY_IMPACT",changeId:"chg_20260124",auditId:"ua_004",driver:"model_fitness"},BOTTLENECK_RISK:{kpi:"BOTTLENECK_RISK",changeId:"chg_20260120",auditId:"ua_001",driver:"ops_bottleneck"},DATA_READINESS:{kpi:"DATA_READINESS",auditId:"ua_003",driver:"data_quality"},GOVERNANCE_SAFETY:{kpi:"GOVERNANCE_SAFETY",changeId:"chg_20260110",auditId:"ua_001",driver:"contact_strategy"}},fIe=["national-dashboard","model-governance","quality-monitoring","compliance-audit"];function zW(e,t){const n=uIe[e],r={level:"nation",region:"KR",period:"WEEK",kpi:n.kpi};return t==="model-governance"&&n.changeId&&(r.changeId=n.changeId),t==="quality-monitoring"&&n.driver&&(r.driver=n.driver),t==="compliance-audit"&&n.auditId&&(r.auditId=n.auditId),r}function uU({screens:e,onNavigate:t,kpiId:n}){return a.jsx("div",{className:"flex flex-wrap gap-1.5",children:e.map(r=>a.jsx("button",{type:"button",onClick:()=>t?.(r,zW(n,r)),className:"text-[11px] px-2 py-1 rounded border border-gray-200 bg-white hover:bg-gray-50",children:oIe[r]},r))})}function pIe({onNavigate:e}){const t=h.useMemo(()=>$W(),[]),n=h.useMemo(()=>dIe(),[]),r=h.useMemo(()=>Object.fromEntries(t.map(A=>[A.id,A])),[t]),[s,i]=h.useState(""),[o,l]=h.useState(n[0]?.id??"SIGNAL_QUALITY"),[c,u]=h.useState("LAST_7D"),[m,p]=h.useState([]),[g,x]=h.useState(!1);h.useEffect(()=>{let A=!1;return x(!0),FW(c).then(T=>{A||(p(T.kpis),x(!1))}).catch(()=>{A||(p([]),x(!1))}),()=>{A=!0}},[c]);const y=h.useMemo(()=>{const A=s.trim().toLowerCase();return A?n.filter(T=>{const R=r[T.id];return[R?.name,R?.shortName,T.category,T.scope,...T.usageScreens.map(P=>P.label)].join(" ").toLowerCase().includes(A)}):n},[s,n,r]);h.useEffect(()=>{if(y.length===0)return;y.some(T=>T.id===o)||l(y[0].id)},[y,o]);const v=cIe(o),N=r[o],S=m.find(A=>A.kpiId===o),j=h.useMemo(()=>!S||S.denominator===0?null:Number((S.numerator/S.denominator*100).toFixed(1)),[S]),C=h.useMemo(()=>n.flatMap(A=>{const T=r[A.id];return A.changeHistory.map(R=>({...R,id:A.id,kpiName:T?.name??A.id,category:A.category}))}).sort((A,T)=>new Date(T.changedAt).getTime()-new Date(A.changedAt).getTime()),[n,r]),_=(A,T)=>{e?.(A,zW(T,A))};return a.jsxs("div",{className:"space-y-4 p-1",children:[a.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"KPI  (  )"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:" KPI     ."})]}),a.jsx("div",{className:"flex items-center gap-1.5 rounded-lg border border-gray-200 bg-white p-1",children:["LAST_24H","LAST_7D","LAST_30D","LAST_90D"].map(A=>a.jsx("button",{type:"button",onClick:()=>u(A),className:`px-2.5 py-1.5 text-[11px] rounded-md font-medium transition ${c===A?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:dU[A]},A))})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-4 2xl:grid-cols-12",children:[a.jsxs(In,{className:"2xl:col-span-5",children:[a.jsxs(Cr,{className:"pb-3",children:[a.jsx(Tr,{className:"text-base",children:"KPI  "}),a.jsxs("div",{className:"relative",children:[a.jsx(Sx,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx($n,{value:s,onChange:A=>i(A.target.value),placeholder:"KPI// ",className:"pl-10"})]})]}),a.jsx(Dn,{className:"pt-0",children:a.jsx("div",{className:"overflow-auto rounded-md border border-gray-200",children:a.jsxs("table",{className:"w-full min-w-[760px]",children:[a.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:a.jsxs("tr",{children:[a.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-700",children:"KPI"}),a.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-700",children:"KPI "}),a.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-700",children:" "}),a.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-700",children:"  ()"})]})}),a.jsxs("tbody",{children:[y.map(A=>{const T=r[A.id],R=o===A.id;return a.jsxs("tr",{className:`border-b border-gray-100 cursor-pointer ${R?"bg-blue-50/50":"hover:bg-gray-50"}`,onClick:()=>l(A.id),children:[a.jsxs("td",{className:"px-3 py-2 align-top",children:[a.jsx("div",{className:"text-sm font-semibold text-gray-900",children:T?.name}),a.jsx("div",{className:"text-[11px] text-gray-500",children:A.id})]}),a.jsx("td",{className:"px-3 py-2 align-top",children:a.jsx("span",{className:`inline-flex items-center rounded-md border px-2 py-1 text-[11px] font-medium ${nC[A.category]}`,children:A.category})}),a.jsx("td",{className:"px-3 py-2 text-sm text-gray-700 align-top",children:A.scope}),a.jsx("td",{className:"px-3 py-2 align-top",children:a.jsx("div",{className:"flex flex-wrap gap-1.5",children:A.usageScreens.map(M=>a.jsxs("button",{type:"button",onClick:P=>{P.stopPropagation(),fIe.includes(M.page)&&_(M.page,A.id)},className:"inline-flex items-center gap-1 rounded-md border border-gray-200 bg-white px-2 py-1 text-[11px] text-gray-700 hover:bg-gray-50",title:M.reason,children:[M.label,a.jsx(es,{className:"h-3 w-3"})]},`${A.id}-${M.page}`))})})]},A.id)}),y.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:4,className:"px-3 py-10 text-center text-sm text-gray-500",children:"   KPI ."})})]})]})})})]}),a.jsxs(In,{className:"2xl:col-span-7",children:[a.jsx(Cr,{children:a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[a.jsxs("div",{children:[a.jsx(Tr,{className:"text-base",children:N?.name}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'KPI   ("  ")    '})]}),a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(rr,{variant:"outline",className:nC[v.category],children:v.category}),a.jsx(rr,{variant:"outline",children:v.scope}),a.jsx(rr,{variant:"outline",children:o})]})]})}),a.jsxs(Dn,{className:"space-y-4",children:[a.jsxs("section",{className:"rounded-lg border border-gray-200 p-3",children:[a.jsx("div",{className:"text-sm font-semibold text-gray-900 mb-2",children:""}),a.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[a.jsxs("div",{className:"rounded-md bg-gray-50 p-3 border border-gray-200",children:[a.jsx("div",{className:"text-[11px] font-medium text-gray-500 mb-1",children:" "}),a.jsx("div",{className:"text-sm text-gray-800 leading-relaxed",children:v.definition.what})]}),a.jsxs("div",{className:"rounded-md bg-gray-50 p-3 border border-gray-200",children:[a.jsx("div",{className:"text-[11px] font-medium text-gray-500 mb-1",children:" "}),a.jsx("div",{className:"text-sm text-gray-800 leading-relaxed",children:v.definition.why})]})]})]}),a.jsxs("section",{className:"rounded-lg border border-gray-200 p-3",children:[a.jsxs("div",{className:"flex items-center gap-1.5 text-sm font-semibold text-gray-900 mb-2",children:[a.jsx(QJ,{className:"h-4 w-4"}),""]}),a.jsx("div",{className:"rounded-md border border-gray-200 bg-gray-50 px-3 py-2 text-[13px] font-mono text-gray-900",children:N?.formula}),a.jsxs("div",{className:"grid grid-cols-1 gap-3 mt-3 md:grid-cols-2",children:[a.jsxs("div",{className:"rounded-md border border-blue-200 bg-blue-50 p-3",children:[a.jsx("div",{className:"text-[11px] font-semibold text-blue-700 mb-1",children:""}),a.jsx("div",{className:"text-sm text-blue-900",children:v.calculation.numeratorLabel}),a.jsxs("div",{className:"text-[11px] text-blue-700 mt-1",children:[": ",N?.numeratorField]})]}),a.jsxs("div",{className:"rounded-md border border-indigo-200 bg-indigo-50 p-3",children:[a.jsx("div",{className:"text-[11px] font-semibold text-indigo-700 mb-1",children:""}),a.jsx("div",{className:"text-sm text-indigo-900",children:v.calculation.denominatorLabel}),a.jsxs("div",{className:"text-[11px] text-indigo-700 mt-1",children:[": ",N?.denominatorField]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-3 mt-3 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-[11px] font-semibold text-gray-700 mb-1.5",children:" "}),a.jsx("ul",{className:"space-y-1",children:v.calculation.includeRules.map((A,T)=>a.jsx("li",{className:"text-xs text-gray-700 leading-relaxed list-disc list-inside",children:A},`${o}-in-${T}`))})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-[11px] font-semibold text-gray-700 mb-1.5",children:" "}),a.jsx("ul",{className:"space-y-1",children:v.calculation.excludeRules.map((A,T)=>a.jsx("li",{className:"text-xs text-gray-700 leading-relaxed list-disc list-inside",children:A},`${o}-out-${T}`))})]})]})]}),a.jsxs("section",{className:"rounded-lg border border-gray-200 p-3",children:[a.jsx("div",{className:"text-sm font-semibold text-gray-900 mb-2",children:" "}),a.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[a.jsxs("div",{className:"rounded-md border border-green-200 bg-green-50 p-3",children:[a.jsx("div",{className:"text-[11px] font-semibold text-green-700 mb-1",children:"   "}),a.jsx("div",{className:"text-sm text-green-900 leading-relaxed",children:v.interpretation.high})]}),a.jsxs("div",{className:"rounded-md border border-orange-200 bg-orange-50 p-3",children:[a.jsx("div",{className:"text-[11px] font-semibold text-orange-700 mb-1",children:"   "}),a.jsx("div",{className:"text-sm text-orange-900 leading-relaxed",children:v.interpretation.low})]})]})]}),a.jsxs("section",{className:"rounded-lg border border-gray-200 p-3",children:[a.jsxs("div",{className:"flex items-center gap-1.5 text-sm font-semibold text-gray-900 mb-2",children:[a.jsx(Am,{className:"h-4 w-4"})," "]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("div",{className:"text-[11px] font-semibold text-gray-600 mb-1.5",children:"   Stage"}),a.jsx("div",{className:"flex flex-wrap gap-1.5",children:v.linkedModelStages.map(A=>a.jsx("span",{className:"text-[11px] px-2 py-1 rounded border border-gray-200 bg-gray-50 text-gray-700",children:A},`${o}-${A}`))})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-[11px] font-semibold text-gray-600 mb-1.5",children:"   (//)"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:v.linkedTabs.map(A=>a.jsxs(Nt,{variant:"outline",size:"sm",onClick:()=>_(A.page,o),className:"h-7 text-[11px]",children:[A.label,a.jsx(es,{className:"h-3 w-3 ml-1"})]},`${o}-tab-${A.page}`))}),a.jsx("div",{className:"space-y-1 mt-2",children:v.linkedTabs.map(A=>a.jsxs("div",{className:"text-[11px] text-gray-600",children:[a.jsx("span",{className:"font-medium",children:A.label}),": ",A.reason]},`${o}-tab-reason-${A.page}`))})]})]}),a.jsxs("section",{className:"rounded-lg border border-gray-200 p-3",children:[a.jsxs("div",{className:"flex items-center gap-1.5 text-sm font-semibold text-gray-900 mb-2",children:[a.jsx(_J,{className:"h-4 w-4"}),"  KPI   ( )"]}),a.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:[" : ",dU[c]]}),g&&a.jsx("div",{className:"text-sm text-gray-500",children:"    ..."}),!g&&!S&&a.jsx("div",{className:"text-sm text-gray-500",children:"    ."}),!g&&S&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-3",children:[a.jsxs("div",{className:"rounded-md border border-gray-200 bg-gray-50 p-2.5",children:[a.jsx("div",{className:"text-[11px] text-gray-500 mb-0.5",children:""}),a.jsx("div",{className:"text-sm font-bold text-gray-900",children:S.numerator.toLocaleString()})]}),a.jsxs("div",{className:"rounded-md border border-gray-200 bg-gray-50 p-2.5",children:[a.jsx("div",{className:"text-[11px] text-gray-500 mb-0.5",children:""}),a.jsx("div",{className:"text-sm font-bold text-gray-900",children:S.denominator.toLocaleString()})]}),a.jsxs("div",{className:"rounded-md border border-gray-200 bg-gray-50 p-2.5",children:[a.jsx("div",{className:"text-[11px] text-gray-500 mb-0.5",children:" KPI "}),a.jsxs("div",{className:"text-sm font-bold text-gray-900",children:[S.value,N?.unit]})]})]}),j!==null&&a.jsxs("div",{className:"rounded-md border border-blue-200 bg-blue-50 px-3 py-2 text-sm text-blue-900",children:[" : ",S.numerator.toLocaleString()," / ",S.denominator.toLocaleString(),"  100 = ",j,"%",a.jsxs("span",{className:"ml-2 text-[11px] text-blue-700",children:["( ",S.value,N?.unit,", 7d ",S.delta7d,"pp)"]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-[11px] font-semibold text-gray-700 mb-1.5",children:" "}),a.jsx("ul",{className:"space-y-1",children:v.whyChecklist.map((A,T)=>a.jsx("li",{className:"text-xs text-gray-700 leading-relaxed list-disc list-inside",children:A},`${o}-why-${T}`))})]})]})]}),a.jsxs("section",{className:"rounded-lg border border-gray-200 p-3",children:[a.jsxs("div",{className:"flex items-center gap-1.5 text-sm font-semibold text-gray-900 mb-2",children:[a.jsx(rJ,{className:"h-4 w-4"}),"KPI  "]}),a.jsx("div",{className:"overflow-auto rounded-md border border-gray-200",children:a.jsxs("table",{className:"w-full min-w-[760px]",children:[a.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:a.jsxs("tr",{children:[a.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-700",children:""}),a.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-700",children:""}),a.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-700",children:" "}),a.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-700",children:" "}),a.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-700",children:"  "})]})}),a.jsx("tbody",{children:v.changeHistory.map(A=>a.jsxs("tr",{className:"border-b border-gray-100",children:[a.jsx("td",{className:"px-3 py-2 text-xs font-semibold text-gray-900",children:A.version}),a.jsxs("td",{className:"px-3 py-2 text-xs text-gray-700",children:[a.jsx("div",{children:A.changedAt}),a.jsx("div",{className:"text-[11px] text-gray-500",children:A.changedBy})]}),a.jsx("td",{className:"px-3 py-2 text-xs text-gray-700 leading-relaxed",children:A.definitionChange}),a.jsx("td",{className:"px-3 py-2 text-xs text-gray-700 leading-relaxed",children:A.formulaChange}),a.jsx("td",{className:"px-3 py-2",children:a.jsx(uU,{screens:A.impactedScreens,onNavigate:e,kpiId:o})})]},`${o}-${A.version}-${A.changedAt}`))})]})})]})]})]})]}),a.jsxs(In,{children:[a.jsx(Cr,{children:a.jsx(Tr,{className:"text-base",children:" KPI   ()"})}),a.jsx(Dn,{className:"pt-0",children:a.jsx("div",{className:"overflow-auto rounded-md border border-gray-200",children:a.jsxs("table",{className:"w-full min-w-[920px]",children:[a.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:a.jsxs("tr",{children:[a.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-700",children:""}),a.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-700",children:"KPI"}),a.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-700",children:""}),a.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-700",children:" "}),a.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-700",children:" "}),a.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-700",children:" "})]})}),a.jsx("tbody",{children:C.map(A=>a.jsxs("tr",{className:"border-b border-gray-100",children:[a.jsx("td",{className:"px-3 py-2 text-xs text-gray-700",children:A.changedAt}),a.jsx("td",{className:"px-3 py-2",children:a.jsx("button",{type:"button",onClick:()=>l(A.id),className:"text-xs font-semibold text-blue-700 hover:underline",children:A.kpiName})}),a.jsx("td",{className:"px-3 py-2",children:a.jsx("span",{className:`inline-flex items-center rounded-md border px-2 py-1 text-[11px] font-medium ${nC[A.category]}`,children:A.category})}),a.jsx("td",{className:"px-3 py-2 text-xs text-gray-700 leading-relaxed",children:A.definitionChange}),a.jsx("td",{className:"px-3 py-2 text-xs text-gray-700 leading-relaxed",children:A.formulaChange}),a.jsx("td",{className:"px-3 py-2",children:a.jsx(uU,{screens:A.impactedScreens,onNavigate:e,kpiId:A.id})})]},`${A.id}-${A.version}-${A.changedAt}`))})]})})})]})]})}function mIe(e){const t=hIe(e),n=h.forwardRef((r,s)=>{const{children:i,...o}=r,l=h.Children.toArray(i),c=l.find(xIe);if(c){const u=c.props.children,m=l.map(p=>p===c?h.Children.count(u)>1?h.Children.only(null):h.isValidElement(u)?u.props.children:null:p);return a.jsx(t,{...o,ref:s,children:h.isValidElement(u)?h.cloneElement(u,void 0,m):null})}return a.jsx(t,{...o,ref:s,children:i})});return n.displayName=`${e}.Slot`,n}function hIe(e){const t=h.forwardRef((n,r)=>{const{children:s,...i}=n;if(h.isValidElement(s)){const o=yIe(s),l=bIe(i,s.props);return s.type!==h.Fragment&&(l.ref=r?tp(r,o):o),h.cloneElement(s,l)}return h.Children.count(s)>1?h.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var gIe=Symbol("radix.slottable");function xIe(e){return h.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===gIe}function bIe(e,t){const n={...t};for(const r in t){const s=e[r],i=t[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...e,...n}}function yIe(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var aS="Popover",[qW]=cl(aS,[Mh]),Kx=Mh(),[vIe,Ku]=qW(aS),VW=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!1}=e,l=Kx(t),c=h.useRef(null),[u,m]=h.useState(!1),[p,g]=od({prop:r,defaultProp:s??!1,onChange:i,caller:aS});return a.jsx(j3,{...l,children:a.jsx(vIe,{scope:t,contentId:tc(),triggerRef:c,open:p,onOpenChange:g,onOpenToggle:h.useCallback(()=>g(x=>!x),[g]),hasCustomAnchor:u,onCustomAnchorAdd:h.useCallback(()=>m(!0),[]),onCustomAnchorRemove:h.useCallback(()=>m(!1),[]),modal:o,children:n})})};VW.displayName=aS;var WW="PopoverAnchor",NIe=h.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Ku(WW,n),i=Kx(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=s;return h.useEffect(()=>(o(),()=>l()),[o,l]),a.jsx(VN,{...i,...r,ref:t})});NIe.displayName=WW;var YW="PopoverTrigger",QW=h.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Ku(YW,n),i=Kx(n),o=Xn(t,s.triggerRef),l=a.jsx(yn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":tY(s.open),...r,ref:o,onClick:on(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:a.jsx(VN,{asChild:!0,...i,children:l})});QW.displayName=YW;var z3="PopoverPortal",[SIe,EIe]=qW(z3,{forceMount:void 0}),XW=e=>{const{__scopePopover:t,forceMount:n,children:r,container:s}=e,i=Ku(z3,t);return a.jsx(SIe,{scope:t,forceMount:n,children:a.jsx(dl,{present:n||i.open,children:a.jsx(wx,{asChild:!0,container:s,children:r})})})};XW.displayName=z3;var mh="PopoverContent",JW=h.forwardRef((e,t)=>{const n=EIe(mh,e.__scopePopover),{forceMount:r=n.forceMount,...s}=e,i=Ku(mh,e.__scopePopover);return a.jsx(dl,{present:r||i.open,children:i.modal?a.jsx(wIe,{...s,ref:t}):a.jsx(AIe,{...s,ref:t})})});JW.displayName=mh;var jIe=mIe("PopoverContent.RemoveScroll"),wIe=h.forwardRef((e,t)=>{const n=Ku(mh,e.__scopePopover),r=h.useRef(null),s=Xn(t,r),i=h.useRef(!1);return h.useEffect(()=>{const o=r.current;if(o)return _R(o)},[]),a.jsx(G1,{as:jIe,allowPinchZoom:!0,children:a.jsx(ZW,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:on(e.onCloseAutoFocus,o=>{o.preventDefault(),i.current||n.triggerRef.current?.focus()}),onPointerDownOutside:on(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;i.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:on(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),AIe=h.forwardRef((e,t)=>{const n=Ku(mh,e.__scopePopover),r=h.useRef(!1),s=h.useRef(!1);return a.jsx(ZW,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{e.onCloseAutoFocus?.(i),i.defaultPrevented||(r.current||n.triggerRef.current?.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{e.onInteractOutside?.(i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;n.triggerRef.current?.contains(o)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),ZW=h.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:m,...p}=e,g=Ku(mh,n),x=Kx(n);return AR(),a.jsx(U1,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:a.jsx(jx,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:m,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>g.onOpenChange(!1),children:a.jsx(w3,{"data-state":tY(g.open),role:"dialog",id:g.contentId,...x,...p,ref:t,style:{...p.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),eY="PopoverClose",_Ie=h.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Ku(eY,n);return a.jsx(yn.button,{type:"button",...r,ref:t,onClick:on(e.onClick,()=>s.onOpenChange(!1))})});_Ie.displayName=eY;var CIe="PopoverArrow",TIe=h.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Kx(n);return a.jsx(A3,{...s,...r,ref:t})});TIe.displayName=CIe;function tY(e){return e?"open":"closed"}var nY=VW,rY=QW,aY=XW,sY=JW;const Wa="2026-02-12",cu=`: ${Wa}  D-1`,pg={baseDate:Wa,receiveDeadline:"08:30",modelWindow:"08:35-08:48",dispatchTime:"08:52",status:"partial",impactedStages:["S2","S3"],notes:" (7)   Stage2/3   .",receiveRate:76.4,missingInstitutionCount:7,expectedRetryAt:"2026-02-13 11:30"},pu={baseDate:Wa,receivedN:157204,adPct:23.4,mciPct:62.1,normalPct:14.5},Ul={cnn_mri_extractor:"v1.0.3",ann_multimodal_conversion:"v2.1.0",guardrails:"v1.0.0"},Bl={stage1_sources:["health_check","survey_lifestyle","admin_info","history"],stage2_sources:["cognition_summary","blood_biomarker","pre_questionnaire","medication_dx_history"],mri_cnn_used:!0},rC=["3 ","  "],OIe=[{case_id:"C-2026-000101",stage:3,model_version:Ul,inputs_summary:Bl,upstream_cnn_signal:{mri_quality:"OK",cnn_risk_score:.18,key_rois:["hippocampus_stable"]},outputs:{conversion_risk_2y:.14,conversion_risk_band_2y:"Low",conversion_reason_codes:["MMSE_STABLE","BIO_LOW_RISK","MRI_STABLE"],conversion_top_features:[{name:"MMSE trend",contribution:.11},{name:"p-tau",contribution:.08}],followup_priority:"Low",recommended_actions:["6 "," "],guardrail_flags:[]}},{case_id:"C-2026-000102",stage:3,model_version:Ul,inputs_summary:Bl,upstream_cnn_signal:{mri_quality:"WARN",cnn_risk_score:.42,key_rois:["temporal_cortex_thinning"]},outputs:{conversion_risk_2y:.33,conversion_risk_band_2y:"Med",conversion_reason_codes:["MMSE_DROP","MRI_TEMPORAL_THINNING","FAMILY_HISTORY"],conversion_top_features:[{name:"MMSE trend",contribution:.17},{name:"CNN MRI risk",contribution:.14}],followup_priority:"Med",recommended_actions:rC,guardrail_flags:["MRI_QUALITY_WARN"]}},{case_id:"C-2026-000103",stage:3,model_version:Ul,inputs_summary:Bl,upstream_cnn_signal:{mri_quality:"OK",cnn_risk_score:.63,key_rois:["hippocampus_volume_low"]},outputs:{conversion_risk_2y:.58,conversion_risk_band_2y:"High",conversion_reason_codes:["MRI_HIPPOCAMPUS_LOW","BIO_PTAU_HIGH","MMSE_DROP"],conversion_top_features:[{name:"p-tau",contribution:.21},{name:"CNN MRI risk",contribution:.15}],followup_priority:"High",recommended_actions:["MRI  ","3 ","  "],guardrail_flags:[]}},{case_id:"C-2026-000104",stage:3,model_version:Ul,inputs_summary:Bl,upstream_cnn_signal:{mri_quality:"OK",cnn_risk_score:.48,key_rois:["parietal_atrophy_index_high"]},outputs:{conversion_risk_2y:.41,conversion_reason_codes:["IADL_DECLINE","MRI_PARIETAL_ATROPHY","BIO_BORDERLINE"],conversion_top_features:[{name:"IADL change",contribution:.16},{name:"CNN MRI risk",contribution:.13}],followup_priority:"Med",recommended_actions:rC,guardrail_flags:[]}},{case_id:"C-2026-000105",stage:3,model_version:Ul,inputs_summary:Bl,upstream_cnn_signal:{mri_quality:"WARN",cnn_risk_score:.54,key_rois:["temporal_cortex_thinning"]},outputs:{conversion_risk_2y:.47,conversion_risk_band_2y:"Med",conversion_reason_codes:["MMSE_DROP","APOE4_POSITIVE","MRI_TEMPORAL_THINNING"],conversion_top_features:[{name:"APOE4",contribution:.18},{name:"MMSE trend",contribution:.16}],followup_priority:"High",recommended_actions:["  ","3 "],guardrail_flags:["PARTIAL_STAGE2_RECEIVED"]}},{case_id:"C-2026-000106",stage:3,model_version:Ul,inputs_summary:Bl,upstream_cnn_signal:{mri_quality:"OK",cnn_risk_score:.22,key_rois:["hippocampus_stable"]},outputs:{conversion_risk_2y:.19,conversion_risk_band_2y:"Low",conversion_reason_codes:["MMSE_STABLE","BIO_LOW_RISK","FOLLOWUP_ADHERENT"],conversion_top_features:[{name:"Follow-up adherence",contribution:.12},{name:"MMSE trend",contribution:.1}],followup_priority:"Low",recommended_actions:["6 "," "],guardrail_flags:[]}},{case_id:"C-2026-000107",stage:3,model_version:Ul,inputs_summary:Bl,upstream_cnn_signal:{mri_quality:"OK",cnn_risk_score:.67,key_rois:["hippocampus_volume_low","temporal_cortex_thinning"]},outputs:{conversion_risk_2y:.62,conversion_risk_band_2y:"High",conversion_reason_codes:["BIO_PTAU_HIGH","MMSE_DROP","MRI_HIPPOCAMPUS_LOW"],conversion_top_features:[{name:"p-tau",contribution:.22},{name:"CNN MRI risk",contribution:.16}],followup_priority:"High",recommended_actions:["MRI  ","3 ","  "],guardrail_flags:[]}},{case_id:"C-2026-000108",stage:3,model_version:Ul,inputs_summary:Bl,upstream_cnn_signal:{mri_quality:"WARN",cnn_risk_score:.39,key_rois:["frontal_cortex_borderline"]},outputs:{conversion_risk_2y:.29,conversion_reason_codes:["SLEEP_ISSUE","MMSE_MINOR_DROP","MRI_BORDERLINE"],conversion_top_features:[{name:"Sleep quality",contribution:.12},{name:"CNN MRI risk",contribution:.11}],followup_priority:"Med",recommended_actions:rC,guardrail_flags:["MRI_QUALITY_WARN"]}},{case_id:"C-2026-000109",stage:3,model_version:Ul,inputs_summary:Bl,upstream_cnn_signal:{mri_quality:"OK",cnn_risk_score:.71,key_rois:["hippocampus_volume_low","parietal_atrophy_index_high"]},outputs:{conversion_risk_2y:.69,conversion_risk_band_2y:"High",conversion_reason_codes:["MRI_HIPPOCAMPUS_LOW","MMSE_SHARP_DROP","BIO_PTAU_HIGH"],conversion_top_features:[{name:"CNN MRI risk",contribution:.2},{name:"MMSE trend",contribution:.18}],followup_priority:"High",recommended_actions:["  ","3 "," "],guardrail_flags:["PARTIAL_STAGE2_RECEIVED"]}},{case_id:"C-2026-000110",stage:3,model_version:Ul,inputs_summary:Bl,upstream_cnn_signal:{mri_quality:"OK",cnn_risk_score:.31,key_rois:["temporal_cortex_mild_change"]},outputs:{conversion_risk_2y:.24,conversion_risk_band_2y:"Med",conversion_reason_codes:["MMSE_MINOR_DROP","BIO_BORDERLINE","MRI_MILD_CHANGE"],conversion_top_features:[{name:"MMSE trend",contribution:.14},{name:"Biomarker",contribution:.12}],followup_priority:"Med",recommended_actions:["6 ","  "],guardrail_flags:[]}}];function RIe(e,t){return t||(e<.2?"Low":e<.5?"Med":"High")}const rR=OIe.map(e=>({...e,outputs:{...e.outputs,conversion_risk_band_2y:RIe(e.outputs.conversion_risk_2y,e.outputs.conversion_risk_band_2y)}})),iY=Number((rR.reduce((e,t)=>e+t.outputs.conversion_risk_2y,0)/rR.length*100).toFixed(1)),aC=rR.reduce((e,t)=>{const n=t.outputs.conversion_risk_band_2y;return e[n]+=1,e},{Low:0,Med:0,High:0}),rm=[{stage:"S1",destination:"",sentCount:38124,failedCount:18,retryCount:18,lastSentAt:"2026-02-13 08:53",slaStatus:"ok"},{stage:"S2",destination:"",sentCount:11832,failedCount:64,retryCount:41,lastSentAt:"2026-02-13 08:54",slaStatus:"delayed"},{stage:"S3",destination:"",sentCount:7405,failedCount:39,retryCount:27,lastSentAt:"2026-02-13 08:56",slaStatus:"delayed"}],kIe=[{key:"total-subjects",label:" ",value:1247653,unit:"",delta:1.2,baseDate:Wa,scopeLine:cu,status:"neutral",help:{title:" ",body:`(D-1): ${Wa}
     ( )`}},{key:"s1-applied-rate",label:"1  ",value:87.3,unit:"%",delta:2.1,baseDate:Wa,scopeLine:cu,status:"good",help:{title:"1  ",body:`(D-1): ${Wa}
/  1    `},jumpTo:"stage1",modeOverride:{quality:{label:"1  ",value:4.2,unit:"%",status:"warn"},audit:{label:"1   Top1",value:56.3,unit:"%",status:"warn"}}},{key:"s1-high-risk-rate",label:"1  ",value:12.3,unit:"%",delta:-.8,baseDate:Wa,scopeLine:cu,status:"warn",help:{title:"1  ",body:`(D-1): ${Wa}
    ''   (  )`},jumpTo:"stage1"},{key:"s2-receive-rate",label:"2  ",value:76.4,unit:"%",delta:-1.7,baseDate:Wa,partialStages:["S2","S3"],scopeLine:cu,status:"warn",help:{title:"2  ",body:`(D-1): ${Wa}
 2     
 80%    `},jumpTo:"stage2",modeOverride:{quality:{label:"2 ",value:6.8,unit:"%",status:"warn"},audit:{label:"2  ",value:18.3,unit:"",status:"risk"}}},{key:"s2-distribution",label:"2  (MCI/AD)",value:pu.adPct,valuePrefix:"AD",secondaryValueLine:`MCI ${pu.mciPct}%`,unit:"%",delta:1.1,baseDate:Wa,partialStages:["S2"],scopeLine:cu,status:"risk",help:{title:"2  (MCI/AD)",body:`(D-1): ${pu.baseDate}
: 2     ${pu.receivedN.toLocaleString()}
AD ${pu.adPct}%  MCI ${pu.mciPct}%   ${pu.normalPct}%
  `},jumpTo:"stage2"},{key:"s3-enrollment-rate",label:"2 (MCIAD)",value:iY,secondaryValueLine:" ANN (S1/2 + MRI-CNN)",unit:"%",delta:1.8,baseDate:Wa,partialStages:["S3"],scopeLine:cu,status:"warn",help:{title:"2 (MCIAD)",body:`(D-1): ${Wa}
: 2  MCI AD  (0100%)
: Stage1/2   + MRI(CNN)    ANN 
: Low ${aC.Low}  Med ${aC.Med}  High ${aC.High}
:      `},jumpTo:"stage3",modeOverride:{quality:{label:" ",value:8.1,unit:"%",status:"warn"},audit:{label:"SLA ",value:12,unit:"",status:"risk"}}},{key:"s3-adherence-rate",label:"3  ",value:71.4,unit:"%",delta:-2.3,baseDate:Wa,partialStages:["S3"],scopeLine:cu,status:"warn",help:{title:" ",body:`(D-1): ${Wa}
 //    `},jumpTo:"stage3"},{key:"sla-violation",label:"SLA /",value:12,unit:"",delta:-3,baseDate:Wa,partialStages:["S2","S3"],scopeLine:cu,status:"risk",help:{title:"SLA ",body:`(D-1): ${Wa}
      `}}],sC=[{stageId:"stage1",examLabel:"1 ",title:"1 ",purposeLine:"   '  '     ",inputs:[{name:" ",desc:"  "},{name:"/",desc:"   "},{name:"",desc:", ,   "},{name:"  ",desc:"   "}],processing:[{name:"Stage1 Risk Scoring",desc:"  ",version:"v3.2.1"},{name:"Eligibility Rules",desc:"   ",version:"v1.4"}],outputs:[{name:"risk_score",desc:"   (0100)"},{name:"risk_band",desc:" /  / "},{name:"reason_codes",desc:" 35  "},{name:"data_quality_flags",desc:"  "}],transition:[{to:"stage2",ruleLine:"(risk_band=)  2  "},{to:"end",ruleLine:"/   (6)"}],metrics:{applied:1089353,appliedRate:87.3,conversionRate:14.4,avgLatencyDays:3.2,topIssues:[{code:"NA-01",label:" ",count:89234},{code:"NA-02",label:" ",count:45678},{code:"NA-03",label:"",count:23388}]}},{stageId:"stage2",examLabel:"2 ",title:"2  ",purposeLine:"/   ' ' ,     ",inputs:[{name:"1  ",desc:"Stage1 risk_score, risk_band, reason_codes"},{name:"2  ",desc:"PET/MRI/   "}],processing:[{name:"  ",desc:"   ",version:"v2.1"},{name:"Consistency Check",desc:"  vs    ()",version:"v1.2"}],outputs:[{name:"diagnosis_class",desc:"AD / MCI /  (  )"},{name:"model_support_signal",desc:"   (//)"},{name:"next_step_policy",desc:"3  /  /  "}],transition:[{to:"stage3",ruleLine:"MCI   3  "},{to:"end",ruleLine:"AD     /    "}],metrics:{applied:157204,appliedRate:91.1,conversionRate:38.4,avgLatencyDays:18.3,topIssues:[{code:"DL-01",label:"  (30+)",count:4128},{code:"DL-02",label:"( vs )",count:2347}]}},{stageId:"stage3",examLabel:"3 ",title:"3  ",purposeLine:"Stage1/2   MRI(CNN)   2  MCIAD (%) ",inputs:[{name:"Stage1/2  ",desc:"///  "},{name:"MRI  CNN ",desc:"  ROI  "},{name:" ",desc:"//  "}],processing:[{name:"S3 MRI Feature Extractor (CNN)",desc:"MRI    /  ",version:"v1.0.3"},{name:"S3 Conversion Risk Predictor ( ANN)",desc:"2  MCIAD (%) ",version:"v2.1.0"},{name:"Transition Policy",desc:"//  ",version:"v1.3"}],outputs:[{name:"conversion_risk_2y",desc:"2  MCIAD  (%)"},{name:"conversion_risk_band_2y",desc:"Low / Med / High"},{name:"conversion_reason_codes",desc:"   (35)"},{name:"conversion_top_features",desc:"   "},{name:"upstream_cnn_signal",desc:"MRI // ROI "},{name:"followup_priority",desc:"High / Med / Low"},{name:"recommended_actions",desc:"//  "},{name:"guardrail_flags",desc:"// "}],transition:[{to:"end",ruleLine:"/   "}],metrics:{applied:60234,appliedRate:78.6,conversionRate:iY,avgLatencyDays:14.7,topIssues:[{code:"FU-01",label:"  ",count:3891},{code:"FU-02",label:"()",count:1245},{code:"FU-03",label:" ",count:987}]}}],IIe=[{id:"in-health",group:"input",label:"",shortDesc:" ",stageTag:"stage1"},{id:"in-survey",group:"input",label:"/",shortDesc:"   ",stageTag:"stage1"},{id:"in-admin",group:"input",label:"",shortDesc:", , ",stageTag:"stage1"},{id:"in-history",group:"input",label:"",shortDesc:"   ",stageTag:"stage1"},{id:"in-cogtest",group:"input",label:" ",shortDesc:"MMSE/MoCA/CDR ",stageTag:"stage2"},{id:"in-biomarker",group:"input",label:"/",shortDesc:"A42, p-tau, NfL ",stageTag:"stage2"},{id:"in-survey2",group:"input",label:"2 ",shortDesc:"  +  ",stageTag:"stage2"},{id:"in-medhist",group:"input",label:"/",shortDesc:", / ",stageTag:"stage2"},{id:"in-mri",group:"input",label:"MRI ",shortDesc:" ,   ",stageTag:"stage3"},{id:"in-pet",group:"input",label:"PET ",shortDesc:"A/Tau SUVR, Centiloid",stageTag:"stage3"},{id:"in-imgderiv",group:"input",label:" ",shortDesc:"ROI ,  ",stageTag:"stage3"},{id:"in-followup",group:"input",label:"",shortDesc:"// ",stageTag:"stage3"},{id:"ft-builder",group:"feature",label:"S1 Feature Builder",shortDesc:"1  ",stageTag:"stage1"},{id:"ft-s2-vec",group:"feature",label:"S2 Vectorizer",shortDesc:"++ ",stageTag:"stage2"},{id:"ft-s3-enc",group:"feature",label:"S3 MRI Encoder",shortDesc:"MRI    ",stageTag:"stage3"},{id:"md-s1-risk",group:"model",label:"S1 Risk Scoring",shortDesc:"   v3.2.1",stageTag:"stage1"},{id:"md-s1-rule",group:"model",label:"Eligibility Rules",shortDesc:"    v1.4",stageTag:"stage1"},{id:"md-s2-ann",group:"model",label:"S2 ANN Classifier",shortDesc:"ANN    v1.0",stageTag:"stage2"},{id:"md-s2-consist",group:"model",label:"Consistency Check",shortDesc:"   v1.2",stageTag:"stage2"},{id:"md-s3-cnn",group:"model",label:"S3 MRI Feature Extractor (CNN)",shortDesc:"  /  v1.0.3",stageTag:"stage3"},{id:"md-s3-prio",group:"model",label:"S3 Conversion Risk Predictor ( ANN)",shortDesc:"2  MCIAD (%)  v2.1.0",stageTag:"stage3"},{id:"md-guardrail",group:"model",label:"Post-Model Guardrails",shortDesc:"  v1.0",stageTag:"common"},{id:"md-transition",group:"model",label:"Transition Policy",shortDesc:"    v1.3",stageTag:"common"},{id:"out-score",group:"output",label:"risk_score",shortDesc:"   0100",stageTag:"stage1"},{id:"out-band",group:"output",label:"risk_band",shortDesc:"//",stageTag:"stage1"},{id:"out-reason",group:"output",label:"reason_codes",shortDesc:" 35  ",stageTag:"stage1"},{id:"out-quality",group:"output",label:"data_quality_flags",shortDesc:"  ",stageTag:"stage1"},{id:"out-s2-class",group:"output",label:"s2_support_class",shortDesc:"   ()",stageTag:"stage2"},{id:"out-s2-conf",group:"output",label:"s2_support_confidence",shortDesc:"  ",stageTag:"stage2"},{id:"out-s2-reason",group:"output",label:"s2_reason_codes",shortDesc:"S2   ",stageTag:"stage2"},{id:"out-diag",group:"output",label:"diagnosis_class",shortDesc:"AD/MCI/ ( )",stageTag:"stage2",isExternal:!0},{id:"out-signal",group:"output",label:"model_support_signal",shortDesc:"// ()",stageTag:"stage2"},{id:"out-s3-class",group:"output",label:"conversion_risk_2y",shortDesc:"2  MCIAD (%)",stageTag:"stage3"},{id:"out-s3-conf",group:"output",label:"conversion_risk_band_2y",shortDesc:"Low/Med/High  ",stageTag:"stage3"},{id:"out-s3-reason",group:"output",label:"conversion_reason_codes",shortDesc:"   ",stageTag:"stage3"},{id:"out-s3-top",group:"output",label:"conversion_top_features",shortDesc:"  Top",stageTag:"stage3"},{id:"out-s3-cnn",group:"output",label:"upstream_cnn_signal",shortDesc:"MRI //ROI ",stageTag:"stage3"},{id:"out-priority",group:"output",label:"followup_priority",shortDesc:"High/Med/Low",stageTag:"stage3"},{id:"out-actions",group:"output",label:"recommended_actions",shortDesc:"  ",stageTag:"stage3"},{id:"out-guardrail",group:"output",label:"guardrail_flags",shortDesc:"/  ",stageTag:"common"},{id:"dispatch-s1",group:"dispatch",label:"S1 Dispatch",shortDesc:"   /   ",stageTag:"stage1"},{id:"dispatch-s2",group:"dispatch",label:"S2 Dispatch",shortDesc:"    /  ",stageTag:"stage2"},{id:"dispatch-s3",group:"dispatch",label:"S3 Dispatch",shortDesc:"  /  /  ",stageTag:"stage3"},{id:"ops-case",group:"ops",label:" ",shortDesc:"  ",stageTag:"stage1"},{id:"ops-booking",group:"ops",label:" ",shortDesc:"2   ",stageTag:"stage1"},{id:"ops-s2-prio",group:"ops",label:"2  ",shortDesc:"2   ",stageTag:"stage2"},{id:"ops-s3-route",group:"ops",label:" ",shortDesc:"   ",stageTag:"stage3"},{id:"ops-s3-resched",group:"ops",label:"/ ",shortDesc:"  ",stageTag:"stage3"},{id:"ops-resource",group:"ops",label:" ",shortDesc:"  ",stageTag:"common"},{id:"ops-tracking",group:"ops",label:"MCI ",shortDesc:"  ",stageTag:"stage3"}],DIe=[{from:"in-health",to:"ft-builder",label:" "},{from:"in-survey",to:"ft-builder",label:" "},{from:"in-admin",to:"ft-builder",label:" "},{from:"in-history",to:"ft-builder",label:" "},{from:"ft-builder",to:"md-s1-risk",label:" "},{from:"ft-builder",to:"md-s1-rule",label:" "},{from:"md-s1-risk",to:"out-score",label:"risk_score"},{from:"md-s1-risk",to:"out-band",label:"risk_band"},{from:"md-s1-risk",to:"out-reason",label:"reason_codes"},{from:"md-s1-rule",to:"out-quality",label:"quality_flags"},{from:"out-score",to:"md-guardrail",label:"S1 "},{from:"out-score",to:"dispatch-s1",label:"  "},{from:"out-band",to:"dispatch-s1",label:"  "},{from:"dispatch-s1",to:"ops-case",label:"  "},{from:"dispatch-s1",to:"ops-booking",label:"  "},{from:"in-cogtest",to:"ft-s2-vec",label:" "},{from:"in-biomarker",to:"ft-s2-vec",label:""},{from:"in-survey2",to:"ft-s2-vec",label:"2 "},{from:"in-medhist",to:"ft-s2-vec",label:""},{from:"out-band",to:"ft-s2-vec",label:"1  ",style:"dashed"},{from:"ft-s2-vec",to:"md-s2-ann",label:"S2 "},{from:"md-s2-ann",to:"out-s2-class",label:" "},{from:"md-s2-ann",to:"out-s2-conf",label:""},{from:"md-s2-ann",to:"out-s2-reason",label:" "},{from:"out-s2-class",to:"md-guardrail",label:"S2 "},{from:"out-diag",to:"md-s2-consist",label:" ",style:"dashed"},{from:"out-s2-class",to:"md-s2-consist",label:"  "},{from:"md-s2-consist",to:"out-signal",label:" "},{from:"out-diag",to:"md-transition",style:"dashed"},{from:"out-diag",to:"dispatch-s2",label:"   "},{from:"out-signal",to:"dispatch-s2",label:" "},{from:"dispatch-s2",to:"ops-s2-prio",label:" "},{from:"in-mri",to:"ft-s3-enc",label:"MRI "},{from:"in-pet",to:"ft-s3-enc",label:"PET "},{from:"in-imgderiv",to:"ft-s3-enc",label:" "},{from:"ft-s2-vec",to:"md-s3-prio",label:"S1/2  ",style:"dashed"},{from:"out-diag",to:"md-s3-prio",label:"  ",style:"dashed"},{from:"out-signal",to:"md-s3-prio",label:" ",style:"dashed"},{from:"in-followup",to:"md-s3-prio",label:" "},{from:"ft-s3-enc",to:"md-s3-cnn",label:"MRI "},{from:"md-s3-cnn",to:"out-s3-cnn",label:"MRI  "},{from:"out-s3-cnn",to:"md-s3-prio",label:" CNN "},{from:"md-s3-prio",to:"out-s3-class",label:"(2)"},{from:"md-s3-prio",to:"out-s3-conf",label:" "},{from:"md-s3-prio",to:"out-s3-reason",label:" "},{from:"md-s3-prio",to:"out-s3-top",label:" "},{from:"md-s3-prio",to:"out-priority",label:""},{from:"md-s3-prio",to:"out-actions",label:" "},{from:"out-s3-class",to:"md-guardrail",label:"S3  "},{from:"md-transition",to:"md-s3-prio",label:"MCI "},{from:"md-guardrail",to:"out-guardrail",label:" "},{from:"out-s3-class",to:"dispatch-s3",label:"(%)"},{from:"out-s3-conf",to:"dispatch-s3",label:" "},{from:"out-priority",to:"dispatch-s3",label:"High  "},{from:"out-actions",to:"dispatch-s3",label:"  "},{from:"out-guardrail",to:"dispatch-s3",label:"  "},{from:"dispatch-s3",to:"ops-tracking",label:" "},{from:"dispatch-s3",to:"ops-resource",label:"  "},{from:"dispatch-s3",to:"ops-s3-route",label:" "},{from:"dispatch-s3",to:"ops-s3-resched",label:" "}],Wt="  : /.     .",PIe={"batch-cycle":{id:"batch-cycle",definition:{what:"D-1     / /   .",why:"           .",whereUsed:["Batch Cycle Banner","  ","  "],responsibility:Wt},dataContract:{outputs:[{field:"baseDate",type:"date",nullable:!1,note:"D-1 "},{field:"receiveDeadline",type:"time",nullable:!1,note:"  "},{field:"modelWindow",type:"string",nullable:!1,note:"  "},{field:"dispatchTime",type:"time",nullable:!1,note:"  "}],refreshCadence:" 1 "},qualityAudit:{changeLog:[{version:"BATCH-2026-02-13",date:"2026-02-13",summary:"S2/S3      "}]},batchSummary:{impactedStages:pg.impactedStages,receiveRate:pg.receiveRate,missingInstitutionCount:pg.missingInstitutionCount,expectedRetryAt:pg.expectedRetryAt,impactedMetrics:["2  (MCI/AD)","2 (MCIAD)","3  "],dispatchLogs:rm}},stage1:{id:"stage1",definition:{what:"   '  '     .",why:" 2     ,     .",whereUsed:[" "," ","   "],responsibility:Wt},dataContract:{inputs:[{field:"health_exam_result",type:"object",nullable:!1,note:"  "},{field:"survey_responses",type:"array",nullable:!0,note:"/ "},{field:"admin_info",type:"object",nullable:!1,note:", "},{field:"prior_screening_history",type:"array",nullable:!0,note:"  "}],outputs:[{field:"risk_score",type:"number(0-100)",nullable:!1},{field:"risk_band",type:"enum(||)",nullable:!1},{field:"reason_codes",type:"string[]",nullable:!1,note:" 35 "},{field:"data_quality_flags",type:"string[]",nullable:!0},{field:"transition_eligible",type:"boolean",nullable:!1}],refreshCadence:" 1 "},qualityAudit:{missingRate:4.2,driftSignals:[{name:"risk_score  ",level:"low",note:" +1.3 ( )"}],biasAlerts:[{group:"75+ ",level:"mid",note:"     +8.1%p"}],changeLog:[{version:"v3.2.1",date:"2026-01-15",summary:"  ",impact:"75+  -2.3%p"},{version:"v3.2.0",date:"2025-12-01",summary:"BMI  ",impact:"  +1.1%p"},{version:"v3.1.0",date:"2025-09-20",summary:"   "}]}},stage2:{id:"stage2",definition:{what:"/   ' ' ,     .",why:" ( )  ()    ,  /   .",whereUsed:["2   "," ","3   "],responsibility:Wt},dataContract:{inputs:[{field:"stage1_result",type:"object",nullable:!1,note:"risk_score, risk_band"},{field:"exam_result",type:"object",nullable:!1,note:"PET/MRI/"}],outputs:[{field:"diagnosis_class",type:"enum(AD|MCI|NORMAL)",nullable:!1,note:"  =  "},{field:"model_support_signal",type:"enum(||)",nullable:!1,note:"  = (   )"},{field:"next_step_policy",type:"enum(3||)",nullable:!1}],refreshCadence:" 1  (D-1  )"},qualityAudit:{missingRate:8.9,driftSignals:[{name:" ",level:"mid",note:"  +1.2%p "}],biasAlerts:[{group:" ",level:"mid",note:"    +5.2"}],changeLog:[{version:"v2.1",date:"2026-01-20",summary:"  ",impact:" +3.4%p"},{version:"v2.0",date:"2025-11-15",summary:"PET/MRI   "}]},batchSummary:{impactedStages:["S2","S3"],receiveRate:76.4,missingInstitutionCount:7,expectedRetryAt:"2026-02-13 11:30",impactedMetrics:["2  (MCI/AD)","2 (MCIAD)","3  "]}},stage3:{id:"stage3",definition:{what:"Stage1/2   MRI(CNN)   2  MCIAD (0100%)   .",why:"     ,         .",whereUsed:["  "," (High/Med/Low) ","/ "," (// )"],responsibility:Wt},dataContract:{inputs:[{field:"stage12_feature_vector",type:"number[96]",nullable:!1,note:"Stage1/2   "},{field:"diagnosis_class",type:"enum(MCI|AD)",nullable:!1,note:"  "},{field:"upstream_cnn_signal",type:"object",nullable:!1,note:"MRI // ROI "},{field:"followup_history",type:"array",nullable:!0,note:"// "}],outputs:[{field:"conversion_risk_2y",type:"number(0-1)",nullable:!1,note:"UI : 0100%"},{field:"conversion_risk_band_2y",type:"enum(Low|Med|High)",nullable:!1},{field:"conversion_reason_codes",type:"string[]",nullable:!1,note:" 35  "},{field:"conversion_top_features",type:"object[]",nullable:!0,note:"name/contribution"},{field:"upstream_cnn_signal",type:"object",nullable:!1,note:"mri_quality/cnn_risk_score/key_rois"},{field:"followup_priority",type:"enum(High|Med|Low)",nullable:!1},{field:"recommended_actions",type:"string[]",nullable:!1},{field:"guardrail_flags",type:"string[]",nullable:!0}],refreshCadence:" 1  (D-1  )"},qualityAudit:{missingRate:8.1,driftSignals:[{name:"  ",level:"mid",note:"3  -1.5%p/"}],biasAlerts:[{group:" ",level:"high",note:"   +12.3%p"}],changeLog:[{version:"v2.0",date:"2026-01-10",summary:"   ",impact:"High  +4.2%p"},{version:"v1.3",date:"2025-10-05",summary:"    "}]}},"md-s1-risk":{id:"md-s1-risk",definition:{what:"    (0100)    .",why:"     2     .",whereUsed:["1  risk_score ","  "],responsibility:Wt},dataContract:{inputs:[{field:"feature_vector",type:"number[48]",nullable:!1,note:"Feature Builder "}],outputs:[{field:"risk_score",type:"number(0-100)",nullable:!1},{field:"risk_band",type:"enum",nullable:!1},{field:"reason_codes",type:"string[3-5]",nullable:!1}],refreshCadence:" 1 "},qualityAudit:{missingRate:.3,driftSignals:[{name:"  ",level:"low",note:"PSI 0.02 ()"}],biasAlerts:[],changeLog:[{version:"v3.2.1",date:"2026-01-15",summary:"   "},{version:"v3.2.0",date:"2025-12-01",summary:"BMI  "}]}},"ft-builder":{id:"ft-builder",definition:{what:"1         .",why:"        .",whereUsed:["Stage1 Risk Scoring ","Eligibility Rules "],responsibility:Wt},dataContract:{inputs:[{field:"raw_health_exam",type:"object",nullable:!1},{field:"raw_survey",type:"array",nullable:!0},{field:"raw_admin",type:"object",nullable:!1}],outputs:[{field:"feature_vector",type:"number[48]",nullable:!1},{field:"missing_flags",type:"string[]",nullable:!0}],refreshCadence:" 1 "},qualityAudit:{missingRate:4.2,driftSignals:[],biasAlerts:[],changeLog:[{version:"v2.1",date:"2025-12-01",summary:"BMI   "}]}},"ft-s2-vec":{id:"ft-s2-vec",definition:{what:"  ANN    .",why:"  2      ANN   .",whereUsed:["S2 ANN Classifier "],responsibility:Wt},dataContract:{inputs:[{field:"cogtest_features",type:"number[6]",nullable:!1,note:" "},{field:"biomarker_features",type:"number[4]",nullable:!0,note:" "},{field:"survey2_features",type:"number[8]",nullable:!0,note:"2  "},{field:"medhist_features",type:"number[5]",nullable:!0,note:" "}],outputs:[{field:"s2_feature_vector",type:"number[64]",nullable:!1},{field:"missing_flags",type:"string[]",nullable:!0}],refreshCadence:"  "},qualityAudit:{missingRate:8.3,driftSignals:[{name:"  ",level:"low",note:"PSI 0.03 ()"}],biasAlerts:[],changeLog:[{version:"v1.0",date:"2026-01-15",summary:" "}]}},"ft-s3-enc":{id:"ft-s3-enc",definition:{what:"MRI   Stage3  CNN   .",why:"    /      .",whereUsed:["S3 MRI Feature Extractor (CNN) "],responsibility:Wt},dataContract:{inputs:[{field:"mri_features",type:"number[128]",nullable:!1,note:"MRI  "},{field:"pet_features",type:"number[64]",nullable:!0,note:"PET  "},{field:"derived_metrics",type:"number[16]",nullable:!0,note:"  "}],outputs:[{field:"s3_tensor",type:"tensor[1,208]",nullable:!1},{field:"missing_flags",type:"string[]",nullable:!0}],refreshCadence:"  "},qualityAudit:{missingRate:18.7,driftSignals:[{name:"  ",level:"mid",note:"    4.2%"}],biasAlerts:[],changeLog:[{version:"v1.0",date:"2026-01-20",summary:" "}]}},"in-health":{id:"in-health",definition:{what:"    .",why:"1     , BMI    .",whereUsed:["Feature Builder ","1  risk_score "],responsibility:Wt},dataContract:{inputs:[{field:"exam_date",type:"date",nullable:!1,note:" "},{field:"bmi",type:"number",nullable:!0,note:""},{field:"blood_pressure",type:"object",nullable:!0,note:"/"},{field:"chronic_diseases",type:"string[]",nullable:!0,note:" "}],refreshCadence:" 1  "},qualityAudit:{missingRate:3.1,driftSignals:[{name:"   ",level:"low",note:" 2 "}],biasAlerts:[],changeLog:[{version:"v1.0",date:"2025-06-01",summary:"  "}]}},"in-survey":{id:"in-survey",definition:{what:"        .",why:" ,           .",whereUsed:["Feature Builder "],responsibility:Wt},dataContract:{inputs:[{field:"survey_id",type:"string",nullable:!1},{field:"responses",type:"object[]",nullable:!1,note:" "}],refreshCadence:"  1"},qualityAudit:{missingRate:12.7,driftSignals:[],biasAlerts:[{group:"75+ ",level:"mid",note:"   +8%p"}],changeLog:[{version:"v1.2",date:"2025-11-01",summary:"  (1520)"}]}},"in-admin":{id:"in-admin",definition:{what:" (, ,  ).",why:"  ,         .",whereUsed:["Feature Builder ","    "],responsibility:Wt},dataContract:{inputs:[{field:"address",type:"object",nullable:!1},{field:"household_type",type:"enum",nullable:!0,note:"//"},{field:"contact_phone",type:"string",nullable:!0}],refreshCadence:"/ "},qualityAudit:{missingRate:5.4,driftSignals:[],biasAlerts:[],changeLog:[{version:"v1.1",date:"2025-08-15",summary:"  "}]}},"in-history":{id:"in-history",definition:{what:"  1      .",why:"            .",whereUsed:["Feature Builder "],responsibility:Wt},dataContract:{inputs:[{field:"prior_risk_scores",type:"number[]",nullable:!0},{field:"prior_risk_bands",type:"string[]",nullable:!0},{field:"last_screening_date",type:"date",nullable:!0}],refreshCadence:" 1 "},qualityAudit:{missingRate:18.3,driftSignals:[{name:"    ",level:"low",note:"22.1% ( )"}],biasAlerts:[],changeLog:[{version:"v1.0",date:"2025-06-01",summary:" "}]}},"in-exam":{id:"in-cogtest",definition:{what:"(MMSE, MoCA, CDR )   .",why:"2 ANN   ,      .",whereUsed:["S2 Vectorizer ","ANN Classifier "],responsibility:Wt},dataContract:{inputs:[{field:"mmse_score",type:"number(0-30)",nullable:!1,note:"MMSE "},{field:"moca_score",type:"number(0-30)",nullable:!0,note:"MoCA "},{field:"cdr_global",type:"number(0-3)",nullable:!0,note:"CDR  "},{field:"exam_date",type:"date",nullable:!1}],refreshCadence:"  1"},qualityAudit:{missingRate:6.4,driftSignals:[{name:"   ",level:"low",note:"MoCA v8.1  v7.1  2.1%"}],biasAlerts:[{group:" ",level:"mid",note:"MMSE    +6.2%p"}],changeLog:[{version:"v1.0",date:"2025-09-01",summary:"  "}]}},"in-cogtest":{id:"in-cogtest",definition:{what:"(MMSE, MoCA, CDR )   .",why:"2 ANN   ,      .",whereUsed:["S2 Vectorizer ","ANN Classifier "],responsibility:Wt},dataContract:{inputs:[{field:"mmse_score",type:"number(0-30)",nullable:!1,note:"MMSE "},{field:"moca_score",type:"number(0-30)",nullable:!0,note:"MoCA "},{field:"cdr_global",type:"number(0-3)",nullable:!0,note:"CDR  "},{field:"exam_date",type:"date",nullable:!1}],refreshCadence:"  1"},qualityAudit:{missingRate:6.4,driftSignals:[{name:"   ",level:"low",note:"MoCA v8.1  v7.1  2.1%"}],biasAlerts:[{group:" ",level:"mid",note:"MMSE    +6.2%p"}],changeLog:[{version:"v1.0",date:"2025-09-01",summary:"  "}]}},"in-biomarker":{id:"in-biomarker",definition:{what:"  (A42, p-tau181, NfL )  .",why:"ANN   ,     .",whereUsed:["S2 Vectorizer "],responsibility:Wt},dataContract:{inputs:[{field:"ab42_ratio",type:"number",nullable:!0,note:"A42/40 "},{field:"ptau181",type:"number",nullable:!0,note:"pg/mL"},{field:"nfl",type:"number",nullable:!0,note:"Neurofilament light"},{field:"sample_date",type:"date",nullable:!1}],refreshCadence:"  1"},qualityAudit:{missingRate:22.1,driftSignals:[{name:"  ",level:"mid",note:"Elecsys  Lumipulse   2.3% "}],biasAlerts:[],changeLog:[{version:"v1.0",date:"2025-10-01",summary:" "}]}},"in-survey2":{id:"in-survey2",definition:{what:"2         .",why:"          .",whereUsed:["S2 Vectorizer "],responsibility:Wt},dataContract:{inputs:[{field:"adl_score",type:"number",nullable:!0,note:" "},{field:"iadl_score",type:"number",nullable:!0,note:" "},{field:"guardian_responses",type:"object[]",nullable:!0,note:"  "}],refreshCadence:"2   1"},qualityAudit:{missingRate:15.3,driftSignals:[],biasAlerts:[{group:" ",level:"high",note:"   42.1%"}],changeLog:[{version:"v1.0",date:"2025-11-01",summary:" "}]}},"in-medhist":{id:"in-medhist",definition:{what:"     () .",why:"           .",whereUsed:["S2 Vectorizer "],responsibility:Wt},dataContract:{inputs:[{field:"rx_codes",type:"string[]",nullable:!0,note:"  ATC "},{field:"visit_history",type:"object[]",nullable:!0,note:"/ "},{field:"comorbidity_index",type:"number",nullable:!0,note:"Charlson  "}],refreshCadence:" 1 "},qualityAudit:{missingRate:11.7,driftSignals:[],biasAlerts:[],changeLog:[{version:"v1.0",date:"2025-11-15",summary:"   "}]}},"in-mri":{id:"in-mri",definition:{what:" MRI   ,  ,     .",why:"Stage3  ANN   CNN       .",whereUsed:["S3 MRI Encoder ","S3 MRI Feature Extractor(CNN) "],responsibility:Wt},dataContract:{inputs:[{field:"hippocampal_volume",type:"number",nullable:!1,note:"  (mm)"},{field:"cortical_thickness",type:"number[]",nullable:!0,note:"ROI  "},{field:"ventricular_ratio",type:"number",nullable:!0,note:" "},{field:"scan_date",type:"date",nullable:!1}],refreshCadence:"  1"},qualityAudit:{missingRate:14.2,driftSignals:[{name:"  ",level:"mid",note:"3T/1.5T     3.1%"}],biasAlerts:[],changeLog:[{version:"v1.0",date:"2025-12-01",summary:"FreeSurfer  "}]}},"in-pet":{id:"in-pet",definition:{what:"/ PET  SUVR, Centiloid   .",why:"        Stage3    .",whereUsed:["S3 MRI Encoder "],responsibility:Wt},dataContract:{inputs:[{field:"amyloid_suvr",type:"number",nullable:!0,note:"A PET SUVR"},{field:"centiloid",type:"number",nullable:!0,note:"Centiloid "},{field:"tau_suvr",type:"number",nullable:!0,note:"Tau PET SUVR"},{field:"scan_date",type:"date",nullable:!1}],refreshCadence:"  1"},qualityAudit:{missingRate:31.4,driftSignals:[{name:"  ",level:"mid",note:"Florbetaben vs Flutemetamol "}],biasAlerts:[{group:" ",level:"high",note:"PET      +18%p"}],changeLog:[{version:"v1.0",date:"2025-12-15",summary:"PET   "}]}},"in-imgderiv":{id:"in-imgderiv",definition:{what:"MRI/PET     (ROI ,   ).",why:"          .",whereUsed:["S3 MRI Encoder "],responsibility:Wt},dataContract:{inputs:[{field:"atrophy_index",type:"number",nullable:!0,note:"   "},{field:"roi_ratios",type:"number[]",nullable:!0,note:"ROI  "},{field:"asymmetry_score",type:"number",nullable:!0,note:"  "}],refreshCadence:"MRI/PET   "},qualityAudit:{missingRate:16.8,driftSignals:[],biasAlerts:[],changeLog:[{version:"v1.0",date:"2026-01-05",summary:"   "}]}},"in-followup":{id:"in-followup",definition:{what:"MCI   //   .",why:"  , Stage3   ( ANN)  .",whereUsed:["S3 Conversion Risk Predictor "," "],responsibility:Wt},dataContract:{inputs:[{field:"visit_records",type:"object[]",nullable:!0},{field:"last_contact_date",type:"date",nullable:!0},{field:"program_participation",type:"string[]",nullable:!0}],refreshCadence:" 1 "},qualityAudit:{missingRate:8.1,driftSignals:[{name:" ",level:"mid",note:"3  -1.5%p/"}],biasAlerts:[{group:" ",level:"high",note:" +12.3%p"}],changeLog:[{version:"v1.0",date:"2025-06-01",summary:" "}]}},"md-s1-rule":{id:"md-s1-rule",definition:{what:"       .",why:",   ,         .",whereUsed:["1    ","   "],responsibility:Wt},dataContract:{inputs:[{field:"base_criteria",type:"object",nullable:!1,note:"//"}],outputs:[{field:"eligible",type:"boolean",nullable:!1},{field:"exclusion_reason",type:"string",nullable:!0},{field:"data_quality_flags",type:"string[]",nullable:!0}],refreshCadence:" 1 "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[{version:"v1.4",date:"2025-12-15",summary:"75+  "},{version:"v1.3",date:"2025-09-01",summary:"   "}]}},"md-s2-ann":{id:"md-s2-ann",definition:{what:"   2     ANN .",why:"        ,     .",whereUsed:["S2    ","Consistency Check  "],responsibility:Wt},dataContract:{inputs:[{field:"s2_feature_vector",type:"number[64]",nullable:!1,note:"S2 Vectorizer "}],outputs:[{field:"s2_support_class",type:"enum(AD|MCI|NORMAL)",nullable:!1,note:"  ()"},{field:"s2_support_confidence",type:"number(0-1)",nullable:!1,note:" "},{field:"s2_reason_codes",type:"string[3-5]",nullable:!1,note:"  "}],refreshCadence:"  "},qualityAudit:{missingRate:.5,driftSignals:[{name:"  ",level:"low",note:"PSI 0.04 ()"}],biasAlerts:[{group:"75+ ",level:"mid",note:"AD    +5.4%p"}],changeLog:[{version:"v1.0",date:"2026-01-15",summary:"ANN Classifier  "}]}},"md-s2-consist":{id:"md-s2-consist",definition:{what:"  2   1       .",why:" (: 1   2 AD)    .",whereUsed:[" ","model_support_signal "],responsibility:Wt},dataContract:{inputs:[{field:"stage1_risk_band",type:"enum",nullable:!1},{field:"exam_diagnosis",type:"enum(AD|MCI|NORMAL)",nullable:!1}],outputs:[{field:"model_support_signal",type:"enum(||)",nullable:!1},{field:"inconsistency_score",type:"number",nullable:!1}],refreshCadence:""},qualityAudit:{missingRate:0,driftSignals:[{name:" ",level:"mid",note:"  +1.2%p"}],biasAlerts:[],changeLog:[{version:"v1.2",date:"2026-01-10",summary:"  "}]}},"md-transition":{id:"md-transition",definition:{what:"2     (3 //)   .",why:"         .",whereUsed:["3 MCI   ","/ "],responsibility:Wt},dataContract:{inputs:[{field:"diagnosis_class",type:"enum(AD|MCI|NORMAL)",nullable:!1}],outputs:[{field:"next_step_policy",type:"enum(3||)",nullable:!1}],refreshCadence:""},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[{version:"v1.3",date:"2026-01-10",summary:"MCI   "},{version:"v1.2",date:"2025-10-01",summary:"AD     "}]}},"md-s3-cnn":{id:"md-s3-cnn",definition:{what:"MRI    Stage3  ANN     CNN     .",why:"      ( ANN)    .",whereUsed:["upstream_cnn_signal ","S3 Conversion Risk Predictor "],responsibility:Wt},dataContract:{inputs:[{field:"s3_tensor",type:"tensor[1,208]",nullable:!1,note:"S3 Encoder "}],outputs:[{field:"upstream_cnn_signal.mri_quality",type:"enum(OK|WARN|FAIL)",nullable:!1},{field:"upstream_cnn_signal.cnn_risk_score",type:"number(0-1)",nullable:!1},{field:"upstream_cnn_signal.key_rois",type:"string[]",nullable:!1,note:"  ROI"}],refreshCadence:"  "},qualityAudit:{missingRate:.8,driftSignals:[{name:"  ",level:"low",note:"KL divergence 0.02 ()"}],biasAlerts:[{group:"1.5T ",level:"mid",note:"3T  cnn_risk_score -0.08 "}],changeLog:[{version:"v1.0.3",date:"2026-02-01",summary:"S3 MRI Feature Extractor(CNN) "}]}},"md-s3-prio":{id:"md-s3-prio",definition:{what:"Stage1/2   MRI(CNN)   2  MCIAD (%)  Stage3  ( ANN).",why:"       .",whereUsed:["2 (MCIAD) ","followup_priority ","recommended_actions "],responsibility:Wt},dataContract:{inputs:[{field:"stage12_feature_vector",type:"number[96]",nullable:!1,note:"Stage1/2  "},{field:"diagnosis_class",type:"enum(MCI|AD)",nullable:!1},{field:"upstream_cnn_signal",type:"object",nullable:!1},{field:"followup_history",type:"array",nullable:!0}],outputs:[{field:"conversion_risk_2y",type:"number(0-1)",nullable:!1,note:"UI : 0100%"},{field:"conversion_risk_band_2y",type:"enum(Low|Med|High)",nullable:!1},{field:"conversion_reason_codes",type:"string[]",nullable:!1},{field:"conversion_top_features",type:"object[]",nullable:!0,note:"{name, contribution}"},{field:"followup_priority",type:"enum(High|Med|Low)",nullable:!1},{field:"recommended_actions",type:"string[]",nullable:!1}],refreshCadence:" 1  (D-1 )"},qualityAudit:{missingRate:.5,driftSignals:[{name:"  ",level:"low",note:" +0.9%p ()"}],biasAlerts:[{group:" ",level:"high",note:"High  +12%p"}],changeLog:[{version:"v2.1.0",date:"2026-01-10",summary:" ANN    ",impact:"2   AUC +3.9%p"}]}},"out-score":{id:"out-score",definition:{what:"1    (0100).",why:"         .",whereUsed:["  ","  "],responsibility:Wt},dataContract:{outputs:[{field:"risk_score",type:"number(0-100)",nullable:!1}],refreshCadence:" 1 "},qualityAudit:{missingRate:.3,driftSignals:[],biasAlerts:[],changeLog:[]}},"out-band":{id:"out-band",definition:{what:"  (//).",why:" 3     .",whereUsed:["  ","2   "],responsibility:Wt},dataContract:{outputs:[{field:"risk_band",type:"enum(||)",nullable:!1}],refreshCadence:" 1 "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"out-reason":{id:"out-reason",definition:{what:"   35  .",why:"      .",whereUsed:["   ","  "],responsibility:Wt},dataContract:{outputs:[{field:"reason_codes",type:"string[3-5]",nullable:!1}],refreshCadence:" 1 "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"out-diag":{id:"out-diag",definition:{what:"2   (AD/MCI/).   ,   .",why:"        .",whereUsed:["3  ","  "],responsibility:Wt},dataContract:{outputs:[{field:"diagnosis_class",type:"enum(AD|MCI|NORMAL)",nullable:!1,note:"  "}],refreshCadence:" (  )"},qualityAudit:{missingRate:8.9,driftSignals:[],biasAlerts:[],changeLog:[]}},"out-signal":{id:"out-signal",definition:{what:"  (//).   1     .",why:"   ,     .",whereUsed:["  "," "],responsibility:Wt},dataContract:{outputs:[{field:"model_support_signal",type:"enum(||)",nullable:!1,note:"  "}],refreshCadence:""},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"out-priority":{id:"out-priority",definition:{what:"MCI  (High/Med/Low) .",why:"        .",whereUsed:["MCI   ","  "],responsibility:Wt},dataContract:{outputs:[{field:"followup_priority",type:"enum(High|Med|Low)",nullable:!1}],refreshCadence:" 1 "},qualityAudit:{missingRate:.5,driftSignals:[],biasAlerts:[],changeLog:[]}},"out-actions":{id:"out-actions",definition:{what:"   (// ).",why:"       .",whereUsed:["   ","  "],responsibility:Wt},dataContract:{outputs:[{field:"recommended_actions",type:"string[]",nullable:!1}],refreshCadence:" 1 "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"out-quality":{id:"out-quality",definition:{what:"   .",why:"        .",whereUsed:["  ","1   "],responsibility:Wt},dataContract:{outputs:[{field:"data_quality_flags",type:"string[]",nullable:!0}],refreshCadence:" 1 "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"out-s2-class":{id:"out-s2-class",definition:{what:"ANN  2   (AD/MCI/NORMAL).      .",why:"   (Consistency Check)   .",whereUsed:["Consistency Check ","S2  "],responsibility:Wt},dataContract:{outputs:[{field:"s2_support_class",type:"enum(AD|MCI|NORMAL)",nullable:!1,note:"   ()"}],refreshCadence:"  "},qualityAudit:{missingRate:.5,driftSignals:[],biasAlerts:[],changeLog:[]}},"out-s2-conf":{id:"out-s2-conf",definition:{what:"ANN   (01).",why:"     ,      .",whereUsed:["2   "," "],responsibility:Wt},dataContract:{outputs:[{field:"s2_support_confidence",type:"number(0-1)",nullable:!1}],refreshCadence:"  "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"out-s2-reason":{id:"out-s2-reason",definition:{what:"ANN   35   .",why:"       .",whereUsed:["Inspector "," "],responsibility:Wt},dataContract:{outputs:[{field:"s2_reason_codes",type:"string[3-5]",nullable:!1}],refreshCadence:"  "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"out-s3-class":{id:"out-s3-class",definition:{what:"2  MCI AD  (0100%)  .",why:"/          .",whereUsed:["  ","  ","Guardrails "],responsibility:Wt},dataContract:{outputs:[{field:"conversion_risk_2y",type:"number(0-1)",nullable:!1,note:"UI : 0100%"}],refreshCadence:" 1  (D-1 )"},qualityAudit:{missingRate:.8,driftSignals:[],biasAlerts:[],changeLog:[]}},"out-s3-conf":{id:"out-s3-conf",definition:{what:"2 (%)  (Low/Med/High)  .",why:"       .",whereUsed:["  ","  "],responsibility:Wt},dataContract:{outputs:[{field:"conversion_risk_band_2y",type:"enum(Low|Med|High)",nullable:!1}],refreshCadence:" 1  (D-1 )"},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"out-s3-reason":{id:"out-s3-reason",definition:{what:"     35  .",why:"    /     .",whereUsed:["Inspector "," "],responsibility:Wt},dataContract:{outputs:[{field:"conversion_reason_codes",type:"string[3-5]",nullable:!1}],refreshCadence:" 1  (D-1 )"},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"out-s3-top":{id:"out-s3-top",definition:{what:"      .",why:"       .",whereUsed:["Inspector "," "],responsibility:Wt},dataContract:{outputs:[{field:"conversion_top_features",type:"object[]",nullable:!0,note:"{name, contribution}"}],refreshCadence:" 1  (D-1 )"},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"out-s3-cnn":{id:"out-s3-cnn",definition:{what:"MRI  CNN   (mri_quality, cnn_risk_score, key_rois).",why:"     ANN       .",whereUsed:["S3 Conversion Risk Predictor "," "],responsibility:Wt},dataContract:{outputs:[{field:"upstream_cnn_signal.mri_quality",type:"enum(OK|WARN|FAIL)",nullable:!1},{field:"upstream_cnn_signal.cnn_risk_score",type:"number(0-1)",nullable:!1},{field:"upstream_cnn_signal.key_rois",type:"string[]",nullable:!1}],refreshCadence:"  "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"md-guardrail":{id:"md-guardrail",definition:{what:"S1/S2/S3     ,  ,     .",why:"           .",whereUsed:["guardrail_flags ","/   "],responsibility:Wt},dataContract:{inputs:[{field:"risk_score",type:"number",nullable:!0,note:"S1 "},{field:"s2_support_class",type:"enum",nullable:!0,note:"S2 "},{field:"conversion_risk_2y",type:"number",nullable:!0,note:"S3 "}],outputs:[{field:"guardrail_flags",type:"string[]",nullable:!1,note:"/ "},{field:"confidence_adjusted",type:"boolean",nullable:!1}],refreshCadence:"   "},qualityAudit:{missingRate:0,driftSignals:[{name:" ",level:"low",note:"2.1% ( )"}],biasAlerts:[],changeLog:[{version:"v1.0",date:"2026-02-01",summary:"Guardrails  "}]}},"out-guardrail":{id:"out-guardrail",definition:{what:"Post-Model Guardrails  /  .",why:"        .",whereUsed:["/  "," "],responsibility:Wt},dataContract:{outputs:[{field:"guardrail_flags",type:"string[]",nullable:!1,note:"/ "}],refreshCadence:"   "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"dispatch-s1":{id:"dispatch-s1",definition:{what:"S1 (  /  )      .",why:"          .",whereUsed:["S1 Dispatch ","  "," "],responsibility:Wt},dataContract:{inputs:[{field:"risk_score",type:"number",nullable:!1},{field:"risk_band",type:"enum",nullable:!1}],outputs:[{field:"dispatch_payload",type:"object[]",nullable:!1,note:"  /   "}],refreshCadence:" 1  "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]},batchSummary:{dispatchLogs:rm.filter(e=>e.stage==="S1")}},"dispatch-s2":{id:"dispatch-s2",definition:{what:"S2           .",why:"     /  .",whereUsed:["S2 Dispatch ","  ","2  "],responsibility:Wt},dataContract:{inputs:[{field:"diagnosis_class",type:"enum(AD|MCI|NORMAL)",nullable:!1},{field:"model_support_signal",type:"enum(||)",nullable:!1}],outputs:[{field:"dispatch_payload",type:"object[]",nullable:!1,note:"   /  "}],refreshCadence:" 1  "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]},batchSummary:{impactedStages:["S2"],dispatchLogs:rm.filter(e=>e.stage==="S2")}},"dispatch-s3":{id:"dispatch-s3",definition:{what:"S3 (2)   /      .",why:"    //  .",whereUsed:["S3 Dispatch ","MCI/AD  "," "],responsibility:Wt},dataContract:{inputs:[{field:"conversion_risk_2y",type:"number(0-1)",nullable:!1,note:"UI : 0100%"},{field:"conversion_risk_band_2y",type:"enum(Low|Med|High)",nullable:!1},{field:"followup_priority",type:"enum(High|Med|Low)",nullable:!1},{field:"recommended_actions",type:"string[]",nullable:!1}],outputs:[{field:"dispatch_payload",type:"object[]",nullable:!1,note:"  / High   /  "}],refreshCadence:" 1  "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]},batchSummary:{impactedStages:["S3"],dispatchLogs:rm.filter(e=>e.stage==="S3")}},"ops-case":{id:"ops-case",definition:{what:"        .",why:"        .",whereUsed:["  "],responsibility:Wt},dataContract:{inputs:[{field:"risk_score",type:"number",nullable:!1},{field:"risk_band",type:"enum",nullable:!1}],refreshCadence:" 1  "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"ops-booking":{id:"ops-booking",definition:{what:"  2     .",why:"    2     .",whereUsed:["SMS/ ","  "],responsibility:Wt},dataContract:{inputs:[{field:"risk_band",type:"enum",nullable:!1}],refreshCadence:" 1  "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"ops-resource":{id:"ops-resource",definition:{what:"    (//)   .",why:"      .",whereUsed:["  "," "],responsibility:Wt},dataContract:{inputs:[{field:"recommended_actions",type:"string[]",nullable:!1}],refreshCadence:" 1  "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"ops-tracking":{id:"ops-tracking",definition:{what:"MCI      .",why:"  //   .",whereUsed:["MCI   "," "],responsibility:Wt},dataContract:{inputs:[{field:"followup_priority",type:"enum(High|Med|Low)",nullable:!1}],refreshCadence:" 1  "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"ops-s2-prio":{id:"ops-s2-prio",definition:{what:"    2     .",why:" 2        .",whereUsed:["2    "],responsibility:Wt},dataContract:{inputs:[{field:"s2_support_confidence",type:"number(0-1)",nullable:!1}],refreshCadence:" 1  "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"ops-s3-route":{id:"ops-s3-route",definition:{what:"3    (PET/MRI/)   .",why:"2 (%)  ,  CNN     .",whereUsed:["3   "],responsibility:Wt},dataContract:{inputs:[{field:"conversion_risk_2y",type:"number(0-1)",nullable:!1},{field:"conversion_risk_band_2y",type:"enum(Low|Med|High)",nullable:!1},{field:"upstream_cnn_signal.cnn_risk_score",type:"number(0-1)",nullable:!0}],refreshCadence:" 1  "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"ops-s3-resched":{id:"ops-s3-resched",definition:{what:"Guardrails       .",why:"         .",whereUsed:["  ","  "],responsibility:Wt},dataContract:{inputs:[{field:"guardrail_flags",type:"string[]",nullable:!1}],refreshCadence:"  "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}}},fU={ops:{label:"",icon:Em,color:"bg-blue-600"},quality:{label:"",icon:vx,color:"bg-amber-500"},audit:{label:"",icon:oc,color:"bg-purple-600"}};function MIe({mode:e,onChange:t}){return a.jsx("div",{className:"inline-flex items-center rounded-lg border border-slate-200 bg-white p-0.5 shadow-sm",children:Object.keys(fU).map(n=>{const r=fU[n],s=r.icon,i=e===n;return a.jsxs("button",{onClick:()=>t(n),className:`flex items-center gap-1.5 px-3.5 py-1.5 rounded-md text-xs font-semibold transition-all ${i?`${r.color} text-white shadow-sm`:"text-slate-500 hover:text-slate-700 hover:bg-slate-50"}`,children:[a.jsx(s,{className:"h-3.5 w-3.5"}),r.label]},n)})})}const LIe={completed:{label:"",chip:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:Si},running:{label:"",chip:"bg-blue-100 text-blue-700 border-blue-200",icon:Zl},partial:{label:"",chip:"bg-amber-100 text-amber-700 border-amber-200",icon:fs},delayed:{label:"",chip:"bg-orange-100 text-orange-700 border-orange-200",icon:fs},failed:{label:"",chip:"bg-red-100 text-red-700 border-red-200",icon:Sm}};function $Ie({meta:e,onOpenDetail:t}){const n=LIe[e.status],r=n.icon,s=e.status==="partial"||e.status==="delayed"||e.status==="failed";return a.jsxs("div",{className:"bg-white border-b border-slate-200 px-5 py-2.5 flex items-center justify-between gap-3 flex-shrink-0",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-[11px] text-slate-600",children:[a.jsxs("span",{className:"inline-flex items-center gap-1 rounded-md bg-slate-100 px-2 py-1 text-slate-700 font-semibold",children:["D-1 : ",e.baseDate]}),a.jsxs("span",{className:"rounded-md bg-slate-50 px-2 py-1 border border-slate-200",children:[" : ",e.receiveDeadline]}),a.jsxs("span",{className:"rounded-md bg-slate-50 px-2 py-1 border border-slate-200",children:[" : ",e.modelWindow]}),a.jsxs("span",{className:"rounded-md bg-slate-50 px-2 py-1 border border-slate-200",children:["  : ",e.dispatchTime]}),a.jsxs("span",{className:`inline-flex items-center gap-1 rounded-md border px-2 py-1 font-semibold ${n.chip}`,children:[a.jsx(r,{className:"h-3 w-3"}),": ",n.label]}),s&&e.impactedStages&&e.impactedStages.length>0&&a.jsxs("span",{className:"inline-flex items-center gap-1",children:[a.jsx("span",{className:"text-slate-400",children:" Stage"}),e.impactedStages.map(i=>a.jsx("span",{className:"rounded-md bg-amber-100 text-amber-700 border border-amber-200 px-1.5 py-0.5 font-semibold",children:i},i))]}),e.notes&&a.jsx("span",{className:"text-slate-500",children:e.notes})]}),a.jsx("button",{className:"text-[11px] text-blue-600 hover:text-blue-700 font-semibold whitespace-nowrap",onClick:t,children:"  "})]})}const FIe={good:"border-emerald-200 bg-gradient-to-br from-white to-emerald-50/80 shadow-sm",warn:"border-amber-200 bg-gradient-to-br from-white to-amber-50/80 shadow-sm",risk:"border-red-200 bg-gradient-to-br from-white to-red-50/80 shadow-sm",neutral:"border-slate-200 bg-gradient-to-br from-white to-slate-50/60 shadow-sm"},UIe={good:"bg-emerald-500",warn:"bg-amber-500",risk:"bg-red-500",neutral:"bg-slate-400"};function BIe({kpi:e,viewMode:t,onJump:n}){const[r,s]=h.useState(!1),i=e.modeOverride?.[t],o=i?.label??e.label,l=i?.value??e.value,c=i?.valuePrefix??e.valuePrefix,u=i?.secondaryValueLine??e.secondaryValueLine,m=i?.unit??e.unit,p=i?.status??e.status??"neutral",g=m===""?l.toLocaleString():`${l}`,x=e.delta==null?null:e.delta>0?a.jsx(MU,{className:"h-3 w-3 text-emerald-500"}):e.delta<0?a.jsx(PU,{className:"h-3 w-3 text-red-500"}):a.jsx(wJ,{className:"h-3 w-3 text-slate-400"});return a.jsxs("div",{className:`relative flex flex-col justify-between rounded-xl border p-3.5 transition-all duration-200 ease-out hover:shadow-lg hover:scale-[1.04] hover:-translate-y-0.5 ${FIe[p]} ${e.jumpTo?"cursor-pointer":""}`,onClick:()=>e.jumpTo&&n?.(e.jumpTo),children:[e.help&&a.jsx("button",{className:"absolute top-2 left-2 text-slate-300 hover:text-slate-500",onClick:y=>{y.stopPropagation(),s(!r)},children:a.jsx(bC,{className:"h-3.5 w-3.5"})}),a.jsxs("div",{className:"absolute top-2 right-2 flex flex-col items-end gap-1",children:[a.jsxs("span",{className:"rounded bg-slate-100 px-1.5 py-0.5 text-[9px] text-slate-500",children:[": ",e.baseDate,"  D-1"]}),e.partialStages&&e.partialStages.length>0&&a.jsx("span",{className:"rounded bg-amber-100 px-1.5 py-0.5 text-[9px] text-amber-700",title:` : ${e.partialStages.join("/")}`,children:" "})]}),r&&e.help&&a.jsxs("div",{className:"absolute top-8 left-2 z-20 w-60 rounded-lg border border-slate-200 bg-white p-3 text-xs shadow-lg",children:[a.jsx("p",{className:"font-semibold text-slate-700 mb-1",children:e.help.title}),a.jsx("p",{className:"text-slate-500 leading-relaxed whitespace-pre-line",children:e.help.body})]}),a.jsxs("div",{className:"flex items-center gap-1.5 mb-2 mt-8",children:[a.jsx("span",{className:`h-1.5 w-1.5 rounded-full ${UIe[p]}`}),a.jsx("span",{className:"text-[11px] font-medium text-slate-500 leading-tight truncate",children:o})]}),a.jsxs("div",{className:"flex items-end gap-1.5",children:[a.jsxs("span",{className:"text-xl font-bold text-slate-800 leading-none",children:[c?`${c} `:"",g]}),m&&a.jsx("span",{className:"text-xs text-slate-400 mb-0.5",children:m})]}),u&&a.jsx("p",{className:"mt-1 text-[10px] text-slate-500 font-medium",children:u}),a.jsxs("div",{className:"flex items-center justify-between mt-2",children:[a.jsx("span",{className:"text-[10px] text-slate-400",children:e.scopeLine}),e.delta!=null&&a.jsxs("span",{className:"flex items-center gap-0.5 text-[10px] text-slate-500",children:[x,Math.abs(e.delta),m===""||m===""?"":"%p"]})]})]})}function GIe({kpis:e,viewMode:t,onJump:n}){return a.jsx("div",{className:"grid grid-cols-4 lg:grid-cols-8 gap-3",children:e.map(r=>a.jsx(BIe,{kpi:r,viewMode:t,onJump:n},r.key))})}const HIe={stage1:{bg:"bg-blue-50/60",border:"border-blue-200",accent:"text-blue-700",headerBg:"bg-blue-600"},stage2:{bg:"bg-amber-50/60",border:"border-amber-200",accent:"text-amber-700",headerBg:"bg-amber-500"},stage3:{bg:"bg-emerald-50/60",border:"border-emerald-200",accent:"text-emerald-700",headerBg:"bg-emerald-600"}},q3={stage1:"S1",stage2:"S2",stage3:"S3"},D1={completed:{label:"",badgeClass:"bg-emerald-100 text-emerald-700 border-emerald-200"},partial:{label:" ",badgeClass:"bg-amber-100 text-amber-700 border-amber-200"},delayed:{label:"",badgeClass:"bg-orange-100 text-orange-700 border-orange-200"},failed:{label:"",badgeClass:"bg-red-100 text-red-700 border-red-200"}};function KIe(){const[e,t]=h.useState(!1);return h.useEffect(()=>{if(typeof window>"u")return;const n=window.matchMedia("(hover: none), (pointer: coarse)"),r=()=>t(n.matches||navigator.maxTouchPoints>0);return r(),n.addEventListener?.("change",r),()=>n.removeEventListener?.("change",r)},[]),e}function oY(e,t,n){const r=n.filter(i=>i.stage===e),s=!!t.impactedStages?.includes(e);return r.some(i=>i.slaStatus==="breached")||t.status==="failed"&&s?"failed":r.some(i=>i.slaStatus==="delayed")||t.status==="delayed"&&s?"delayed":r.some(i=>i.failedCount>0||i.retryCount>0)||t.status==="partial"&&s?"partial":"completed"}function zIe(e,t,n){const r=q3[e.stageId],s=oY(r,t,n),i=D1[s].label,o=s==="partial"||s==="delayed"||s==="failed";return e.stageId==="stage1"?{dispatchState:s,meta:{stage:r,title:"Stage1  1 ",baseDate:t.baseDate,definition:"//      ",denominator:{label:"",n:e.metrics.applied},coverage:{receivedPct:e.metrics.appliedRate,partial:o,notes:t.notes},outputs:["   ","2()  / "," ( )"],caution:"     / ",modelChip:`ML ${e.processing[0]?.version??"v-"}`,dispatchChip:`: ${i}`}}:e.stageId==="stage2"?{dispatchState:s,meta:{stage:r,title:"Stage2  2 ",baseDate:t.baseDate,definition:"   ,     ",denominator:{label:"  ",n:pu.receivedN},coverage:{receivedPct:t.receiveRate,partial:o,notes:t.notes},outputs:["AD/MCI/  ","/ ","  "],caution:"      (   )",modelChip:"ANN v1.0",dispatchChip:`: ${i}`}}:{dispatchState:s,meta:{stage:r,title:"Stage3  3  ( )",baseDate:t.baseDate,definition:"Stage1/2   MRI(CNN)   2  MCIAD (0100%) ",denominator:{label:" ",n:e.metrics.applied},coverage:{receivedPct:e.metrics.appliedRate,partial:o,notes:t.notes},outputs:["2 (MCIAD) %"," / "," "],caution:"    . MRI-CNN   .",modelChip:"ANN v2.1.0 + CNN v1.0.3",dispatchChip:`: ${i}`}}}function pU({hoverMeta:e,dispatchState:t,onOpenDetail:n}){const r=e.coverage?.receivedPct!=null?`${e.coverage.receivedPct.toFixed(1)}%`:"-",s=e.coverage?.partial?" ":"",i=D1[t];return a.jsxs("div",{className:"w-[340px] rounded-lg border border-slate-200 bg-white p-2.5 text-[11px] leading-4 shadow-xl",children:[a.jsxs("p",{className:"flex items-center justify-between gap-2 text-slate-800 font-semibold",children:[a.jsx("span",{className:"truncate",children:e.title}),a.jsx("span",{className:`shrink-0 rounded border px-1.5 py-0.5 text-[10px] font-semibold ${i.badgeClass}`,children:i.label})]}),a.jsxs("p",{className:"mt-1 truncate text-slate-500",children:["(D-1): ",e.baseDate,"  ",e.modelChip??" ","  ",e.dispatchChip??": -"]}),a.jsxs("p",{className:"mt-1 truncate text-slate-600",children:[": ",e.definition]}),a.jsxs("p",{className:"mt-1 truncate text-slate-600",children:[": ",e.denominator.label," ",e.denominator.n.toLocaleString(),"   ",r,"  ",s]}),a.jsxs("p",{className:"mt-1 truncate text-slate-600",children:[": ",e.outputs.slice(0,3).join(" / ")]}),a.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[a.jsxs("p",{className:"min-w-0 flex-1 truncate text-slate-500",children:[": ",e.caution??"-"]}),a.jsxs("button",{className:"inline-flex items-center gap-1 text-[10px] font-semibold text-blue-600 hover:text-blue-700 shrink-0",onClick:o=>{o.stopPropagation(),n()},children:[" ",a.jsx(es,{className:"h-3 w-3"})]})]})]})}function qIe({stage:e,viewMode:t,isSelected:n,isBatchImpacted:r,hoverMeta:s,dispatchState:i,isTouchDevice:o,onOpenDetail:l,onClick:c}){const u=HIe[e.stageId],[m,p]=h.useState(!1),[g,x]=h.useState(!1),[y,v]=h.useState(!1),N=h.useCallback(()=>{x(!1),v(!1),l()},[l]),S=a.jsxs("div",{className:`relative pt-2 rounded-xl border-2 transition-all cursor-pointer ${u.bg} ${n?`${u.border} shadow-lg ring-2 ring-offset-1 ring-blue-300`:`${u.border} hover:shadow-md`}`,onClick:c,role:"button",tabIndex:0,onKeyDown:j=>{(j.key==="Enter"||j.key===" ")&&(j.preventDefault(),c())},children:[a.jsx("span",{className:"absolute left-3 -top-2.5 rounded-full border border-slate-200 bg-slate-50 px-2 py-0.5 text-[10px] font-semibold text-slate-700 whitespace-nowrap",children:e.examLabel}),a.jsxs("div",{className:`${u.headerBg} rounded-t-[10px] px-4 py-2.5 flex items-center justify-between`,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-white/80 text-xs font-mono",children:e.stageId.toUpperCase()}),a.jsx("span",{className:"text-white font-semibold text-sm",children:e.title})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[r&&a.jsx("span",{className:"rounded bg-amber-100/90 px-1.5 py-0.5 text-[9px] font-semibold text-amber-700",children:" "}),o&&a.jsxs(nY,{open:y,onOpenChange:v,children:[a.jsx(rY,{asChild:!0,children:a.jsx("button",{className:"text-[11px] font-semibold text-white/90 hover:text-white rounded px-1",onClick:j=>j.stopPropagation(),"aria-label":`${s.title} `,children:""})}),a.jsx(aY,{children:a.jsx(sY,{side:"top",align:"end",sideOffset:8,collisionPadding:12,className:"z-50 p-0 bg-transparent border-0 shadow-none",children:a.jsx(pU,{hoverMeta:s,dispatchState:i,onOpenDetail:N})})})]}),a.jsx("button",{className:"text-white/70 hover:text-white",onClick:j=>{j.stopPropagation(),p(!m)},children:m?a.jsx(Ds,{className:"h-4 w-4"}):a.jsx(ji,{className:"h-4 w-4"})})]})]}),a.jsx("div",{className:"px-4 py-2 border-b border-dashed border-slate-200/80",children:a.jsx("p",{className:"text-[11px] text-slate-500 italic",children:e.purposeLine})}),e.stageId==="stage2"&&a.jsx("div",{className:"mx-4 mt-2 rounded-md border border-amber-200 bg-amber-50 px-2.5 py-1.5 text-[10px] text-amber-700 font-semibold",children:"  =      = (   )"}),e.stageId==="stage3"&&a.jsx("div",{className:"mx-4 mt-2 rounded-md border border-emerald-200 bg-emerald-50 px-2.5 py-1.5 text-[10px] text-emerald-700 font-semibold",children:"  = 2 (MCIAD, %)     "}),a.jsxs("div",{className:"px-4 py-3 grid grid-cols-2 gap-x-4 gap-y-2 text-xs",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-slate-400",children:""}),a.jsxs("span",{className:"ml-1.5 font-bold text-slate-700",children:[e.metrics.applied.toLocaleString(),""]})]}),e.metrics.appliedRate!=null&&a.jsxs("div",{children:[a.jsx("span",{className:"text-slate-400",children:""}),a.jsxs("span",{className:"ml-1.5 font-bold text-slate-700",children:[e.metrics.appliedRate,"%"]})]}),e.metrics.conversionRate!=null&&a.jsxs("div",{children:[a.jsx("span",{className:"text-slate-400",children:e.stageId==="stage3"?"2 ":""}),a.jsxs("span",{className:"ml-1.5 font-bold text-slate-700",children:[e.metrics.conversionRate,"%"]})]}),e.metrics.avgLatencyDays!=null&&a.jsxs("div",{children:[a.jsx("span",{className:"text-slate-400",children:""}),a.jsxs("span",{className:"ml-1.5 font-bold text-slate-700",children:[e.metrics.avgLatencyDays,""]})]})]}),t==="quality"&&a.jsxs("div",{className:"mx-4 mb-2 px-2.5 py-1.5 bg-amber-100/80 rounded text-[10px] text-amber-700 flex items-center gap-1",children:[a.jsx(fs,{className:"h-3 w-3"}),"   ",e.metrics.topIssues?.length??0,""]}),t==="audit"&&a.jsxs("div",{className:"mx-4 mb-2 px-2.5 py-1.5 bg-purple-100/80 rounded text-[10px] text-purple-700 flex items-center gap-1",children:[a.jsx(oc,{className:"h-3 w-3"})," : ",e.processing[0]?.version??"-"]}),m&&a.jsxs("div",{className:"px-4 pb-3 space-y-2.5 border-t border-slate-200/60 mt-1 pt-3",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-1",children:[a.jsx(gd,{className:"h-3 w-3"})," "]}),a.jsx("div",{className:"flex flex-wrap gap-1",children:e.inputs.map(j=>a.jsx("span",{className:"inline-block bg-blue-100 text-blue-700 text-[10px] px-1.5 py-0.5 rounded",children:j.name},j.name))})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-1",children:[a.jsx($U,{className:"h-3 w-3"})," /"]}),a.jsx("div",{className:"flex flex-wrap gap-1",children:e.processing.map(j=>a.jsxs("span",{className:"inline-flex items-center gap-1 bg-slate-100 text-slate-600 text-[10px] px-1.5 py-0.5 rounded",children:[j.name,j.version&&a.jsx("span",{className:"text-slate-400 font-mono",children:j.version})]},j.name))})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-1",children:[a.jsx(Cg,{className:"h-3 w-3"})," "]}),a.jsx("div",{className:"flex flex-wrap gap-1",children:e.outputs.map(j=>a.jsx("span",{className:"inline-block bg-emerald-100 text-emerald-700 text-[10px] px-1.5 py-0.5 rounded font-mono",children:j.name},j.name))})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-1",children:[a.jsx(yR,{className:"h-3 w-3"})," "]}),e.transition.map((j,C)=>a.jsxs("p",{className:"text-[10px] text-slate-500 ml-4",children:[" ",j.to==="end"?"":j.to.toUpperCase(),": ",j.ruleLine]},C))]}),e.metrics.topIssues&&e.metrics.topIssues.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-1",children:[a.jsx(fs,{className:"h-3 w-3"}),"  "]}),e.metrics.topIssues.map(j=>a.jsxs("div",{className:"flex items-center justify-between text-[10px] text-slate-500 ml-4",children:[a.jsx("span",{className:"font-mono text-slate-400",children:j.code}),a.jsx("span",{children:j.label}),a.jsx("span",{className:"font-bold text-slate-600",children:j.count.toLocaleString()})]},j.code))]})]})]});return o?S:a.jsxs(I3,{open:g,onOpenChange:x,delayDuration:180,children:[a.jsx(D3,{asChild:!0,children:S}),a.jsx(P3,{children:a.jsxs(M3,{side:"top",align:"end",sideOffset:8,collisionPadding:12,className:"z-50 p-0 bg-transparent border-0 shadow-none",children:[a.jsx(pU,{hoverMeta:s,dispatchState:i,onOpenDetail:N}),a.jsx(L3,{className:"fill-white"})]})})]})}function VIe({stages:e,viewMode:t,selectedStage:n,batchMeta:r,dispatchLogs:s,onSelectStage:i,onOpenStageDetail:o}){const l=KIe(),c=h.useMemo(()=>e.reduce((u,m)=>(u[m.stageId]=zIe(m,r,s),u),{}),[e,r,s]);return a.jsx(k3,{delayDuration:180,children:a.jsx("div",{className:"flex items-stretch gap-3",children:e.map((u,m)=>{const p=c[u.stageId];return a.jsxs(W.Fragment,{children:[a.jsx("div",{className:"flex-1 min-w-0",children:a.jsx(qIe,{stage:u,viewMode:t,isSelected:n===u.stageId,isBatchImpacted:!!r.impactedStages?.includes(q3[u.stageId]),hoverMeta:p.meta,dispatchState:p.dispatchState,isTouchDevice:l,onClick:()=>i(u.stageId),onOpenDetail:()=>o(u.stageId)})}),m<e.length-1&&a.jsx("div",{className:"flex items-center",children:a.jsx(Cg,{className:"h-5 w-5 text-slate-300"})})]},u.stageId)})})})}const Sy=[{key:"input",label:"INPUT SOURCES",labelKo:" ",color:"#3b82f6",bg:"#dbeafe",bgSoft:"bg-blue-50/40",borderColor:"border-blue-200",icon:gd},{key:"feature",label:"FEATURE BUILDER",labelKo:" ",color:"#8b5cf6",bg:"#ede9fe",bgSoft:"bg-violet-50/40",borderColor:"border-violet-200",icon:oX},{key:"model",label:"MODELS & RULES",labelKo:" / ",color:"#f59e0b",bg:"#fef3c7",bgSoft:"bg-amber-50/40",borderColor:"border-amber-200",icon:$U},{key:"output",label:"OUTPUTS",labelKo:"",color:"#10b981",bg:"#d1fae5",bgSoft:"bg-emerald-50/40",borderColor:"border-emerald-200",icon:Cg},{key:"dispatch",label:"DISPATCH",labelKo:"",color:"#2563eb",bg:"#dbeafe",bgSoft:"bg-blue-50/30",borderColor:"border-blue-200",icon:ec},{key:"ops",label:"DOWNSTREAM OPS",labelKo:" ",color:"#ef4444",bg:"#fee2e2",bgSoft:"bg-red-50/40",borderColor:"border-red-200",icon:yR}],aR={stage1:{bg:"bg-blue-100",text:"text-blue-600",label:"S1"},stage2:{bg:"bg-amber-100",text:"text-amber-600",label:"S2"},stage3:{bg:"bg-emerald-100",text:"text-emerald-600",label:"S3"},common:{bg:"bg-slate-100",text:"text-slate-500",label:""}};function WIe({node:e,meta:t,isSelected:n,isHovered:r,isConnected:s,dimmed:i,onSelect:o,onHover:l,onLeave:c}){const u=e.stageTag?aR[e.stageTag]:null;return a.jsxs("button",{onClick:o,onMouseEnter:l,onMouseLeave:c,className:`
        group relative w-full text-left rounded-lg border px-3 py-2.5
        transition-all duration-150 ease-out
        ${e.isExternal?"border-dashed":""}
        ${n?"shadow-md ring-2 ring-offset-1 text-white":r||s?"shadow-sm -translate-y-0.5":i?"opacity-30":"hover:shadow-sm hover:-translate-y-0.5"}
      `,style:{background:n?t.color:r?t.bg:"#ffffff",borderColor:n||r||s?t.color:e.isExternal?"#f59e0b":"#e2e8f0",...s&&!n&&!r?{borderColor:t.color,borderWidth:2}:{}},children:[u&&a.jsx("span",{className:`absolute -top-1.5 -left-1 text-[7px] font-bold px-1 py-px rounded ${n?"bg-white/30 text-white":`${u.bg} ${u.text}`}`,children:u.label}),e.isExternal&&!n&&a.jsx("span",{className:"absolute -top-1.5 -right-1 text-[7px] font-bold px-1 py-px rounded bg-amber-100 text-amber-600",children:""}),a.jsx("p",{className:`text-[11px] font-semibold leading-tight truncate ${n?"text-white":"text-slate-700"}`,children:e.label}),a.jsx("p",{className:`text-[9px] mt-0.5 leading-tight truncate ${n?"text-white/70":"text-slate-400"}`,children:e.shortDesc}),s&&!n&&a.jsx("span",{className:"absolute -top-1 -right-1 h-2.5 w-2.5 rounded-full ring-2 ring-white",style:{background:t.color}})]})}function YIe({nodes:e,edges:t,selectedNode:n,onSelectNode:r,viewMode:s}){const[i,o]=h.useState(null),l=h.useMemo(()=>{const x={};for(const y of e)(x[y.group]??=[]).push(y);return x},[e]),c=["stage1","stage2","stage3","common",void 0],u={stage1:"Stage 1",stage2:"Stage 2",stage3:"Stage 3",common:""},m=h.useMemo(()=>{const x={};for(const y of Sy){const v=l[y.key]??[],N=[];for(const S of c){const j=v.filter(C=>(C.stageTag??void 0)===S);j.length>0&&N.push({tag:S??"etc",label:u[S??""]??"",nodes:j})}x[y.key]=N}return x},[l]),{connectedNodes:p}=h.useMemo(()=>{const x=i??n;if(!x)return{connectedNodes:new Set};const y=new Set;for(const v of t)(v.from===x||v.to===x)&&(y.add(v.from),y.add(v.to));return{connectedNodes:y}},[t,i,n]),g=i!=null||n!=null;return a.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:[a.jsx("div",{className:"grid grid-cols-6 border-b border-slate-100",children:Sy.map(x=>{const y=x.icon;return a.jsxs("div",{className:`flex flex-col items-center gap-0.5 py-3 ${x.bgSoft} border-r last:border-r-0 ${x.borderColor}`,children:[a.jsx(y,{className:"h-4 w-4",style:{color:x.color}}),a.jsx("span",{className:"text-[10px] font-bold tracking-wider",style:{color:x.color},children:x.label}),a.jsx("span",{className:"text-[9px] text-slate-400",children:x.labelKo})]},x.key)})}),a.jsxs("div",{className:"relative",children:[a.jsx("svg",{className:"absolute inset-0 w-full h-full pointer-events-none z-0",preserveAspectRatio:"none"}),a.jsx("div",{className:"grid grid-cols-6 min-h-[420px]",children:Sy.map((x,y)=>{const v=m[x.key]??[];return a.jsx("div",{className:`flex flex-col gap-1.5 p-3 ${x.bgSoft} ${y<Sy.length-1?`border-r ${x.borderColor}`:""}`,children:v.map((N,S)=>a.jsxs(W.Fragment,{children:[N.label&&a.jsx("div",{className:`flex items-center gap-1 ${S>0?"mt-2 pt-2 border-t border-dashed border-slate-200/60":""}`,children:a.jsx("span",{className:`text-[8px] font-bold px-1 py-px rounded ${aR[N.tag]?.bg??"bg-slate-100"} ${aR[N.tag]?.text??"text-slate-400"}`,children:N.label})}),N.nodes.map(j=>{const C=n===j.id,_=i===j.id,A=p.has(j.id);return a.jsx(WIe,{node:j,meta:x,isSelected:C,isHovered:_,isConnected:A&&!C&&!_,dimmed:g&&!A&&!C&&!_,onSelect:()=>r(j.id),onHover:()=>o(j.id),onLeave:()=>o(null)},j.id)})]},N.tag))},x.key)})})]}),(i||n)&&(()=>{const x=i??n,y=e.find(N=>N.id===x),v=t.filter(N=>N.from===x||N.to===x);return!y||v.length===0?null:a.jsxs("div",{className:"border-t border-slate-100 bg-slate-50/80 px-4 py-2.5",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[a.jsx("span",{className:"text-[10px] font-bold text-slate-600",children:y.label}),a.jsx("span",{className:"text-[9px] text-slate-400",children:"  "})]}),a.jsx("div",{className:"flex flex-wrap gap-1.5",children:v.map(N=>{const S=N.from===x,j=S?N.to:N.from,C=e.find(_=>_.id===j);return a.jsxs("span",{className:"inline-flex items-center gap-1 text-[9px] bg-white border border-slate-200 rounded px-2 py-0.5 text-slate-500",children:[S?"":"",a.jsx("span",{className:"font-medium text-slate-700",children:C?.label??j}),N.label&&a.jsxs("span",{className:"text-slate-300",children:["(",N.label,")"]})]},`${N.from}-${N.to}`)})})]})})(),s==="quality"&&a.jsxs("div",{className:"border-t border-amber-200 bg-amber-50 px-4 py-2 text-[10px] text-amber-700 flex items-center gap-1.5",children:[a.jsx(fs,{className:"h-3 w-3"})," :      "]}),s==="audit"&&a.jsxs("div",{className:"border-t border-purple-200 bg-purple-50 px-4 py-2 text-[10px] text-purple-700 flex items-center gap-1.5",children:[a.jsx(oc,{className:"h-3 w-3"})," :    /   Inspector "]})]})}const QIe=[{id:"definition",label:"",icon:YX},{id:"contract",label:" ",icon:gd},{id:"quality",label:"/",icon:oc}];function XIe({content:e,viewMode:t,selectedContext:n,stages:r,batchMeta:s,dispatchLogs:i,focusMode:o,focusNonce:l}){const[c,u]=h.useState("definition"),m=h.useRef(null),p=h.useMemo(()=>{const S={};for(const j of r)S[j.stageId]=j;return S},[r]),g=n?p[n]:null,x=g?q3[g.stageId]:null,y=x?i.filter(S=>S.stage===x):[],v=x?oY(x,s,i):null,N=!!g;return h.useEffect(()=>{o==="stage-detail"&&N&&(l<1||(u("quality"),requestAnimationFrame(()=>{m.current?.scrollTo({top:0,behavior:"smooth"})})))},[o,l,N]),e?a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsxs("div",{className:"border-b border-slate-200 px-4 pt-3 pb-0",children:[a.jsxs("p",{className:"text-xs font-bold text-slate-700 mb-2 flex items-center gap-1.5",children:[a.jsx(wX,{className:"h-3.5 w-3.5 text-blue-500"}),e.id]}),a.jsx("div",{className:"flex gap-1",children:QIe.map(S=>{const j=S.icon;return a.jsxs("button",{onClick:()=>u(S.id),className:`flex items-center gap-1 px-2.5 py-1.5 text-[11px] font-medium rounded-t-md transition ${c===S.id?"bg-white border border-b-0 border-slate-200 text-slate-800 -mb-px":"text-slate-400 hover:text-slate-600"}`,children:[a.jsx(j,{className:"h-3 w-3"}),S.label]},S.id)})})]}),a.jsxs("div",{ref:m,className:"flex-1 overflow-y-auto p-4 text-xs leading-relaxed space-y-3",children:[c==="definition"&&a.jsxs(a.Fragment,{children:[a.jsx(cs,{title:" ",children:a.jsx("p",{className:"text-slate-600",children:e.definition.what})}),a.jsx(cs,{title:" ",children:a.jsx("p",{className:"text-slate-600",children:e.definition.why})}),a.jsx(cs,{title:" ",children:a.jsx("div",{className:"flex flex-wrap gap-1",children:e.definition.whereUsed.map(S=>a.jsx("span",{className:"bg-blue-50 text-blue-700 px-1.5 py-0.5 rounded text-[10px]",children:S},S))})}),a.jsx(cs,{title:" ",children:a.jsxs("p",{className:"text-slate-600 font-medium bg-amber-50 px-2 py-1.5 rounded border border-amber-200",children:[" ",e.definition.responsibility]})}),e.batchSummary&&a.jsx(cs,{title:"  ",children:a.jsxs("div",{className:"space-y-1.5",children:[e.batchSummary.impactedStages&&e.batchSummary.impactedStages.length>0&&a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("span",{className:"text-slate-400",children:" Stage"}),e.batchSummary.impactedStages.map(S=>a.jsx("span",{className:"rounded bg-amber-100 px-1.5 py-0.5 text-[10px] font-semibold text-amber-700",children:S},S))]}),e.batchSummary.receiveRate!=null&&a.jsxs("p",{className:"text-slate-600",children:["  : ",a.jsxs("span",{className:"font-semibold",children:[e.batchSummary.receiveRate,"%"]})]}),e.batchSummary.missingInstitutionCount!=null&&a.jsxs("p",{className:"text-slate-600",children:["  : ",a.jsxs("span",{className:"font-semibold",children:[e.batchSummary.missingInstitutionCount,""]})]}),e.batchSummary.expectedRetryAt&&a.jsxs("p",{className:"text-slate-600",children:["  : ",a.jsx("span",{className:"font-semibold",children:e.batchSummary.expectedRetryAt})]})]})})]}),c==="contract"&&a.jsxs(a.Fragment,{children:[e.dataContract.inputs&&a.jsx(cs,{title:" ",children:a.jsxs("table",{className:"w-full text-[10px]",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-slate-400 border-b border-slate-100",children:[a.jsx("th",{className:"text-left py-1",children:""}),a.jsx("th",{className:"text-left py-1",children:""}),a.jsx("th",{className:"text-center py-1",children:"null"}),a.jsx("th",{className:"text-left py-1",children:""})]})}),a.jsx("tbody",{children:e.dataContract.inputs.map(S=>a.jsxs("tr",{className:"border-b border-slate-50",children:[a.jsx("td",{className:"py-1 font-mono text-slate-700",children:S.field}),a.jsx("td",{className:"py-1 text-slate-500",children:S.type}),a.jsx("td",{className:"py-1 text-center",children:S.nullable?"":""}),a.jsx("td",{className:"py-1 text-slate-400",children:S.note??""})]},S.field))})]})}),e.dataContract.outputs&&a.jsx(cs,{title:" ",children:a.jsxs("table",{className:"w-full text-[10px]",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-slate-400 border-b border-slate-100",children:[a.jsx("th",{className:"text-left py-1",children:""}),a.jsx("th",{className:"text-left py-1",children:""}),a.jsx("th",{className:"text-center py-1",children:"null"}),a.jsx("th",{className:"text-left py-1",children:""})]})}),a.jsx("tbody",{children:e.dataContract.outputs.map(S=>a.jsxs("tr",{className:"border-b border-slate-50",children:[a.jsx("td",{className:"py-1 font-mono text-slate-700",children:S.field}),a.jsx("td",{className:"py-1 text-slate-500",children:S.type}),a.jsx("td",{className:"py-1 text-center",children:S.nullable?"":""}),a.jsx("td",{className:"py-1 text-slate-400",children:S.note??""})]},S.field))})]})}),e.dataContract.refreshCadence&&a.jsx(cs,{title:" ",children:a.jsxs("span",{className:"inline-flex items-center gap-1 bg-slate-100 text-slate-600 px-2 py-1 rounded",children:[a.jsx(Zl,{className:"h-3 w-3"}),e.dataContract.refreshCadence]})})]}),c==="quality"&&a.jsxs(a.Fragment,{children:[N&&g&&v&&a.jsxs(a.Fragment,{children:[a.jsx(cs,{title:"Daily Batch Timeline",children:a.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 p-2.5 text-[11px] text-slate-600 space-y-1",children:[a.jsxs("p",{className:"flex items-center justify-between",children:[a.jsx("span",{children:g.examLabel}),a.jsx("span",{className:`rounded border px-1.5 py-0.5 text-[10px] font-semibold ${D1[v].badgeClass}`,children:D1[v].label})]}),a.jsxs("p",{children:["(D-1): ",s.baseDate]}),a.jsxs("p",{children:["  ",s.receiveDeadline,"   ",s.modelWindow,"   ",s.dispatchTime]}),s.impactedStages?.includes(x)&&a.jsxs("p",{className:"text-amber-700",children:["   Stage (",x,")"]})]})}),a.jsx(cs,{title:"Model Meta",children:a.jsxs("div",{className:"rounded-md border border-slate-200 bg-white p-2.5 text-[11px] text-slate-600 space-y-1",children:[g.processing.map(S=>a.jsxs("p",{children:[S.name,S.version?a.jsx("span",{className:"ml-1 text-slate-400 font-mono",children:S.version}):null]},S.name)),a.jsx("p",{className:"text-slate-500",children:g.stageId==="stage2"?"  =   /   = (   )":g.stageId==="stage3"?"2 (MCIAD, %)     / MRI-CNN   ":" /  "})]})}),a.jsx(cs,{title:"Dispatch Log",children:a.jsxs("table",{className:"w-full text-[10px]",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-slate-400 border-b border-slate-100",children:[a.jsx("th",{className:"text-left py-1",children:""}),a.jsx("th",{className:"text-right py-1",children:""}),a.jsx("th",{className:"text-right py-1",children:"/"}),a.jsx("th",{className:"text-left py-1",children:"SLA"})]})}),a.jsxs("tbody",{children:[y.map(S=>a.jsxs("tr",{className:"border-b border-slate-50 text-slate-600",children:[a.jsx("td",{className:"py-1",children:S.destination}),a.jsx("td",{className:"py-1 text-right",children:S.sentCount.toLocaleString()}),a.jsxs("td",{className:"py-1 text-right",children:[S.failedCount,"/",S.retryCount]}),a.jsx("td",{className:"py-1",children:S.slaStatus})]},`${S.stage}-${S.destination}`)),y.length===0&&a.jsx("tr",{children:a.jsx("td",{className:"py-2 text-slate-400",colSpan:4,children:"  ."})})]})]})})]}),!N&&e.batchSummary?.impactedMetrics&&e.batchSummary.impactedMetrics.length>0&&a.jsx(cs,{title:" ",children:a.jsx("div",{className:"flex flex-wrap gap-1",children:e.batchSummary.impactedMetrics.map(S=>a.jsx("span",{className:"rounded bg-amber-100 px-1.5 py-0.5 text-[10px] font-medium text-amber-700",children:S},S))})}),e.qualityAudit.missingRate!=null&&a.jsx(cs,{title:" ",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"flex-1 bg-slate-100 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full ${e.qualityAudit.missingRate>5?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${Math.min(e.qualityAudit.missingRate*5,100)}%`}})}),a.jsxs("span",{className:"text-slate-600 font-bold",children:[e.qualityAudit.missingRate,"%"]})]})}),e.qualityAudit.driftSignals&&e.qualityAudit.driftSignals.length>0&&a.jsx(cs,{title:"Drift ",children:e.qualityAudit.driftSignals.map(S=>a.jsxs("div",{className:"flex items-start gap-2 bg-slate-50 p-2 rounded mb-1",children:[a.jsx(mU,{level:S.level}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-slate-700",children:S.name}),a.jsx("p",{className:"text-slate-400",children:S.note})]})]},S.name))}),e.qualityAudit.biasAlerts&&e.qualityAudit.biasAlerts.length>0&&a.jsx(cs,{title:" ",children:e.qualityAudit.biasAlerts.map(S=>a.jsxs("div",{className:"flex items-start gap-2 bg-slate-50 p-2 rounded mb-1",children:[a.jsx(mU,{level:S.level}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-slate-700",children:S.group}),a.jsx("p",{className:"text-slate-400",children:S.note})]})]},S.group))}),e.qualityAudit.changeLog&&e.qualityAudit.changeLog.length>0&&a.jsx(cs,{title:" ",children:a.jsx("div",{className:"space-y-1.5",children:e.qualityAudit.changeLog.map(S=>a.jsx("div",{className:"flex items-start gap-2 border-l-2 border-blue-300 pl-2.5",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-mono font-semibold text-blue-600",children:S.version}),a.jsx("span",{className:"text-slate-400",children:S.date})]}),a.jsx("p",{className:"text-slate-600",children:S.summary}),S.impact&&a.jsxs("p",{className:"text-slate-400 mt-0.5",children:[": ",S.impact]})]})},S.version+S.date))})}),!N&&e.batchSummary?.dispatchLogs&&e.batchSummary.dispatchLogs.length>0&&a.jsx(cs,{title:"DISPATCH ",children:a.jsxs("table",{className:"w-full text-[10px]",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-slate-400 border-b border-slate-100",children:[a.jsx("th",{className:"text-left py-1",children:"Stage"}),a.jsx("th",{className:"text-left py-1",children:""}),a.jsx("th",{className:"text-right py-1",children:""}),a.jsx("th",{className:"text-right py-1",children:"/"}),a.jsx("th",{className:"text-left py-1",children:"SLA"})]})}),a.jsx("tbody",{children:e.batchSummary.dispatchLogs.map(S=>a.jsxs("tr",{className:"border-b border-slate-50 text-slate-600",children:[a.jsx("td",{className:"py-1 font-semibold",children:S.stage}),a.jsx("td",{className:"py-1",children:S.destination}),a.jsx("td",{className:"py-1 text-right",children:S.sentCount.toLocaleString()}),a.jsxs("td",{className:"py-1 text-right",children:[S.failedCount,"/",S.retryCount]}),a.jsx("td",{className:"py-1",children:S.slaStatus})]},`${S.stage}-${S.destination}`))})]})})]})]})]}):a.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400 text-xs p-6",children:[a.jsx(Am,{className:"h-8 w-8 mb-2 text-slate-300"}),a.jsx("p",{children:"     "}),a.jsx("p",{children:"    ."})]})}function cs({title:e,children:t}){return a.jsxs("div",{children:[a.jsx("h4",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-1.5",children:e}),t]})}function mU({level:e}){const t={low:"bg-emerald-100 text-emerald-700",mid:"bg-amber-100 text-amber-700",high:"bg-red-100 text-red-700"};return a.jsx("span",{className:`inline-block text-[9px] font-bold px-1.5 py-0.5 rounded ${t[e]}`,children:e.toUpperCase()})}function JIe(){const[e,t]=h.useState("ops"),[n,r]=h.useState(null),[s,i]=h.useState("default"),[o,l]=h.useState(0),c=pg,u=h.useRef({}),m=h.useCallback(y=>{r(y),i("default"),u.current[y]?.scrollIntoView({behavior:"smooth",block:"center"})},[]),p=h.useCallback(y=>{r(y),i("default")},[]),g=h.useCallback(y=>{r(y),i("stage-detail"),l(v=>v+1),u.current[y]?.scrollIntoView({behavior:"smooth",block:"center"})},[]),x=n?PIe[n]??null:null;return a.jsxs("div",{className:"h-full flex flex-col overflow-hidden bg-slate-50",children:[a.jsxs("div",{className:"bg-slate-700 text-slate-300 text-[10px] text-center py-1.5 px-4 flex-shrink-0",children:[a.jsx(wm,{className:"inline h-3 w-3 mr-1 -mt-0.5"}),"      ,     .        ."]}),a.jsxs("div",{className:"flex items-center justify-between px-5 py-3 bg-white border-b border-slate-200 flex-shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h1",{className:"text-base font-bold text-slate-800",children:"  "}),a.jsx("span",{className:"text-[10px] text-slate-400 bg-slate-100 px-2 py-0.5 rounded",children:" : 2026-02-13 09:00"})]}),a.jsx(MIe,{mode:e,onChange:t})]}),a.jsx($Ie,{meta:c,onOpenDetail:()=>p("batch-cycle")}),a.jsxs("div",{className:"flex-1 flex min-h-0 overflow-hidden",children:[a.jsxs("div",{className:"flex-1 overflow-y-auto p-5 space-y-5",children:[a.jsxs("section",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx("h2",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Pipeline KPI"}),a.jsx("span",{className:"text-[9px] bg-slate-100 text-slate-400 px-1.5 py-0.5 rounded",children:e==="ops"?" ":e==="quality"?" ":" "})]}),a.jsx(GIe,{kpis:kIe,viewMode:e,onJump:m})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-3",children:"3  "}),a.jsx("div",{ref:y=>{u.current.stage1=y}}),a.jsx(VIe,{stages:sC,viewMode:e,batchMeta:c,dispatchLogs:rm,selectedStage:n,onSelectStage:p,onOpenStageDetail:g}),sC.map(y=>a.jsx("div",{ref:v=>{u.current[y.stageId]=v}},y.stageId))]}),a.jsxs("section",{children:[a.jsxs("h2",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-3 flex items-center gap-2",children:["Model Use Map    ",a.jsx("span",{className:"text-[9px] bg-slate-100 text-slate-400 px-1.5 py-0.5 rounded font-normal normal-case",children:"    Inspector "})]}),a.jsx(YIe,{nodes:IIe,edges:DIe,selectedNode:n,onSelectNode:p,viewMode:e})]}),a.jsxs("section",{className:"bg-white rounded-xl border border-slate-200 p-4",children:[a.jsxs("h3",{className:"text-xs font-bold text-slate-700 mb-2 flex items-center gap-1.5",children:[a.jsx(wm,{className:"h-3.5 w-3.5 text-amber-500"}),"Stage 2      "]}),a.jsx("div",{className:"rounded-lg border border-amber-200 bg-amber-50 px-3 py-2 mb-3 text-[11px] font-semibold text-amber-700",children:"  =      = (   )"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 text-[11px]",children:[a.jsxs("div",{className:"bg-amber-50 rounded-lg p-3 border border-amber-200",children:[a.jsx("p",{className:"font-semibold text-amber-700 mb-1",children:"2   (  )"}),a.jsx("p",{className:"text-amber-600",children:"    (AD / MCI / )"}),a.jsx("p",{className:"text-amber-500 mt-1 italic",children:"  /  "})]}),a.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 border border-blue-200",children:[a.jsx("p",{className:"font-semibold text-blue-700 mb-1",children:"  "}),a.jsx("p",{className:"text-blue-600",children:" /  /  "}),a.jsx("p",{className:"text-blue-500 mt-1 italic",children:"   ,     "})]})]}),c.status==="partial"&&a.jsxs("p",{className:"mt-3 text-[11px] text-amber-700",children:["  :  ",c.receiveRate,"%    ",c.missingInstitutionCount,"    ",c.expectedRetryAt]})]}),a.jsxs("section",{className:"bg-slate-100/50 rounded-xl border border-slate-200 p-4",children:[a.jsxs("h3",{className:"text-xs font-bold text-slate-600 mb-2 flex items-center gap-1.5",children:[a.jsx(BU,{className:"h-3.5 w-3.5"}),"View Mode "]}),a.jsxs("div",{className:"grid grid-cols-3 gap-3 text-[10px]",children:[a.jsxs("div",{className:`p-2.5 rounded-lg border ${e==="ops"?"bg-blue-50 border-blue-300":"bg-white border-slate-200"}`,children:[a.jsx("p",{className:"font-semibold text-blue-700",children:" "}),a.jsx("p",{className:"text-slate-500 mt-0.5",children:", , , "})]}),a.jsxs("div",{className:`p-2.5 rounded-lg border ${e==="quality"?"bg-amber-50 border-amber-300":"bg-white border-slate-200"}`,children:[a.jsx("p",{className:"font-semibold text-amber-700",children:" "}),a.jsx("p",{className:"text-slate-500 mt-0.5",children:", drift,  "})]}),a.jsxs("div",{className:`p-2.5 rounded-lg border ${e==="audit"?"bg-purple-50 border-purple-300":"bg-white border-slate-200"}`,children:[a.jsx("p",{className:"font-semibold text-purple-700",children:" "}),a.jsx("p",{className:"text-slate-500 mt-0.5",children:"/ ,  , SLA"})]})]})]})]}),a.jsx("div",{className:"w-80 border-l border-slate-200 bg-white flex-shrink-0",children:a.jsx(XIe,{content:x,viewMode:e,selectedContext:n,stages:sC,batchMeta:c,dispatchLogs:rm,focusMode:s,focusNonce:o})})]})]})}function ZIe(){return a.jsx(JIe,{})}const eDe=720*60*60*1e3,lY={Stage1:["signalQuality","bottleneckRisk"],Stage2:["dataReadiness","bottleneckRisk"],Stage3:["governanceSafety","dataQuality"]},iC={signalQuality:{label:"",chipClass:"bg-blue-50 text-blue-700 border-blue-200",stroke:"#2563eb"},policyImpact:{label:"",chipClass:"bg-violet-50 text-violet-700 border-violet-200",stroke:"#7c3aed"},bottleneckRisk:{label:"",chipClass:"bg-red-50 text-red-700 border-red-200",stroke:"#dc2626"},dataReadiness:{label:" ",chipClass:"bg-emerald-50 text-emerald-700 border-emerald-200",stroke:"#059669"},dataQuality:{label:" ",chipClass:"bg-cyan-50 text-cyan-700 border-cyan-200",stroke:"#0891b2"},governanceSafety:{label:"",chipClass:"bg-amber-50 text-amber-700 border-amber-200",stroke:"#d97706"}},tDe={model_version_change:"  ",rule_parameter_change:"  ",guardrail_change:"Guardrail "},nDe={none:{label:" ",className:"bg-slate-100 text-slate-600 border-slate-200"},watch:{label:"",className:"bg-amber-50 text-amber-700 border-amber-200"},warning:{label:"",className:"bg-red-50 text-red-700 border-red-200"}},rDe={rule_threshold:"Stage1",model_version:"Stage2",ruleset:"Stage2",contact_rule:"Stage3"},aDe={rule_threshold:"rule_parameter_change",model_version:"model_version_change",ruleset:"guardrail_change",contact_rule:"guardrail_change"},sDe={chg_20260124:{stage:"Stage1",changeType:"rule_parameter_change",targetName:"L2  ",summaryLine:"60~64        .",scope:"",scopeDetail:" 6 ",beforeLabel:"",beforeValue:"  65  L2",afterLabel:"",afterValue:"  60  L2 ()",reason:" 3  60~64          .",observedKpis:["policyImpact"],sparklineByKpi:{signalQuality:[89.8,89.7,89.8,89.8,89.9,89.8,89.8],bottleneckRisk:[41.5,41.7,41.8,41.9,41.8,41.8,41.9],policyImpact:[24,24.8,25.6,26.1,26.4,26.2,26]},deltaPpByKpi:{signalQuality:0,bottleneckRisk:.4,policyImpact:2},topRegions:[" "," "," "]},chg_20260120:{stage:"Stage1",changeType:"rule_parameter_change",targetName:"L2  ",summaryLine:"    Stage1    .",scope:"",scopeDetail:" 17 ",beforeLabel:"",beforeValue:"  60  L2",afterLabel:"",afterValue:"  65  L2",observedKpis:["policyImpact"],sparklineByKpi:{signalQuality:[88.9,89.1,89.3,89.5,89.7,89.8,89.8],bottleneckRisk:[44,43.4,42.9,42.3,41.9,41.5,41.1],policyImpact:[31.2,30.4,29.8,29.1,28.8,28.5,28.1]},deltaPpByKpi:{signalQuality:.9,bottleneckRisk:-2.9,policyImpact:-3.1},topRegions:[" "," "," "]},chg_20260115:{stage:"Stage3",changeType:"guardrail_change",targetName:"L3  ",summaryLine:"    /   .",scope:"",scopeDetail:"",beforeLabel:" ",beforeValue:" 7 ",afterLabel:" ",afterValue:" 5 ",observedKpis:["policyImpact"],sparklineByKpi:{governanceSafety:[95,95.1,95.3,95.6,95.8,95.9,96.1],dataQuality:[94.2,94.4,94.5,94.6,94.8,94.8,94.9],policyImpact:[27.5,27.2,27,26.8,26.6,26.4,26.3]},deltaPpByKpi:{governanceSafety:1.1,dataQuality:.7,policyImpact:-1.2},topRegions:[" "," "," "]},chg_20260110:{stage:"Stage2",changeType:"model_version_change",targetName:"  ",summaryLine:"    Stage2     .",scope:"",scopeDetail:" 17 ",beforeLabel:" ",beforeValue:"v3.1.4",afterLabel:" ",afterValue:"v3.2.0",observedKpis:["policyImpact"],sparklineByKpi:{dataReadiness:[93.2,93.3,93.5,93.6,93.7,93.8,93.8],bottleneckRisk:[45,44.3,43.8,43.4,43,42.7,42.4],policyImpact:[25.4,24.8,24.2,23.8,23.2,22.8,22.3]},deltaPpByKpi:{dataReadiness:.6,bottleneckRisk:-2.6,policyImpact:-3.1},topRegions:[" "," "," "]},chg_20260105:{stage:"Stage2",changeType:"rule_parameter_change",targetName:"  ",summaryLine:"       .",scope:"",scopeDetail:" 17 ",beforeLabel:"",beforeValue:"1.20",afterLabel:"",afterValue:"1.35 ( 1.20 )",observedKpis:["policyImpact"],sparklineByKpi:{dataReadiness:[93.5,93.3,93.1,92.9,93,93.2,93.4],bottleneckRisk:[40.2,43.6,46.8,48.1,47.4,44,41.4],policyImpact:[34,39.2,46.4,52.1,57.2,50.6,41.3]},deltaPpByKpi:{dataReadiness:-.1,bottleneckRisk:1.2,policyImpact:7.3},topRegions:[" "," "," "]}};function iDe(e){const t=new Date(e);return{date:t.toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"}),time:t.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!1})}}function oDe(e){return Array.from(new Set(e))}function lDe(e){const t=Math.max(0,...e.impactSummary.map(n=>Math.abs(n.changePp)));return e.status==="rollback"||t>=2?"warning":t>=.5||e.status==="deployed"?"watch":"none"}function cDe(e){const t=rDe[e.type],n=lY[t];return{stage:t,changeType:aDe[e.type],targetName:e.title,summaryLine:"KPI       .",scope:e.affectedRegions[0]===""?"":"",scopeDetail:e.affectedRegions.join(", "),beforeLabel:"",beforeValue:e.version,afterLabel:"",afterValue:e.version,reason:e.reason,observedKpis:["policyImpact"],sparklineByKpi:{[n[0]]:[0,0,0,0,0,0,0],[n[1]]:[0,0,0,0,0,0,0],policyImpact:[0,0,0,0,0,0,0]},deltaPpByKpi:{[n[0]]:0,[n[1]]:0,policyImpact:0},topRegions:e.affectedRegions.slice(0,3)}}function dDe(e,t){const n=e.replace("#",""),r=n.length===3?n.split("").map(l=>l+l).join(""):n.padEnd(6,"0").slice(0,6),s=parseInt(r.slice(0,2),16),i=parseInt(r.slice(2,4),16),o=parseInt(r.slice(4,6),16);return`rgba(${s}, ${i}, ${o}, ${t})`}function uDe(e){if(!e.length)return"";if(e.length===1)return`M ${e[0].x} ${e[0].y}`;const t=[`M ${e[0].x} ${e[0].y}`];for(let n=0;n<e.length-1;n+=1){const r=e[n],s=e[n+1],i=(r.x+s.x)/2;t.push(`C ${i} ${r.y}, ${i} ${s.y}, ${s.x} ${s.y}`)}return t.join(" ")}function fDe(e,t,n){if(!e||t.length<2)return"";const r=t[0],s=t[t.length-1];return`${e} L ${s.x} ${n} L ${r.x} ${n} Z`}function pDe({points:e,stroke:t,chartId:n}){if(e.length<2)return a.jsx("div",{className:"h-20 w-full rounded-lg border border-slate-100 bg-slate-50"});const r=n.replace(/[^a-zA-Z0-9_-]/g,""),s=4,i=32,o=31,l=Math.max(...e),c=Math.min(...e),u=l-c||1,m=100/(e.length-1),p=e.map((N,S)=>({x:Number((S*m).toFixed(2)),y:Number((i-(N-c)/u*(i-s)).toFixed(2))})),g=uDe(p),x=fDe(g,p,o),y=p[p.length-1],v=p[0];return a.jsxs("div",{className:"rounded-lg border border-slate-100 bg-white p-2",children:[a.jsxs("svg",{viewBox:"0 0 100 34",className:"h-16 w-full",children:[a.jsxs("defs",{children:[a.jsxs("linearGradient",{id:`fill-${r}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:t,stopOpacity:"0.32"}),a.jsx("stop",{offset:"100%",stopColor:t,stopOpacity:"0.02"})]}),a.jsxs("radialGradient",{id:`halo-${r}`,cx:"50%",cy:"50%",r:"50%",children:[a.jsx("stop",{offset:"0%",stopColor:t,stopOpacity:"0.42"}),a.jsx("stop",{offset:"100%",stopColor:t,stopOpacity:"0"})]})]}),[6,14,22,30].map(N=>a.jsx("line",{x1:0,y1:N,x2:100,y2:N,stroke:"#e2e8f0",strokeDasharray:"2.5 2.5",strokeWidth:.6},`${r}-grid-${N}`)),a.jsx("path",{d:x,fill:`url(#fill-${r})`}),a.jsx("path",{d:g,fill:"none",stroke:t,strokeWidth:2.1,strokeLinecap:"round"}),a.jsx("circle",{cx:v.x,cy:v.y,r:1.6,fill:"#ffffff",stroke:t,strokeWidth:1.2}),a.jsx("circle",{cx:y.x,cy:y.y,r:4.6,fill:`url(#halo-${r})`}),a.jsx("circle",{cx:y.x,cy:y.y,r:2.1,fill:"#ffffff",stroke:t,strokeWidth:1.4})]}),a.jsxs("div",{className:"mt-1.5 flex items-center justify-between text-[10px] text-slate-500",children:[a.jsxs("span",{children:["D1 ",e[0].toFixed(1)]}),a.jsxs("span",{children:[c.toFixed(1)," ~ ",l.toFixed(1)]}),a.jsxs("span",{children:["D7 ",e[e.length-1].toFixed(1)]})]})]})}function mDe({context:e,onNavigate:t}){const[n,r]=h.useState(e?.changeId??""),[s,i]=h.useState({}),[o,l]=h.useState([]);h.useEffect(()=>{let p=!1;return UW().then(g=>{p||l(g)}).catch(()=>{p||l([])}),()=>{p=!0}},[]);const c=h.useMemo(()=>[...o].sort((p,g)=>new Date(g.deployedAt).getTime()-new Date(p.deployedAt).getTime()).map(p=>{const g=sDe[p.id]??cDe(p),x=lY[g.stage],y=oDe([...x,...g.observedKpis]);return{event:p,extension:g,stageLinkedKpis:x,impactKpis:y,impactStatus:lDe(p),rollback:p.status==="rollback"}}),[o]);h.useEffect(()=>{e?.changeId&&r(e.changeId)},[e?.changeId]),h.useEffect(()=>{if(!c.length)return;c.some(g=>g.event.id===n)||r(c[0].event.id)},[c,n]);const u=h.useMemo(()=>c.find(p=>p.event.id===n)??c[0]??null,[c,n]),m=h.useMemo(()=>{const p=Date.now(),g=c.filter(j=>p-new Date(j.event.deployedAt).getTime()<=eDe),x=g.length>0?g:c,y=x.filter(j=>j.impactStatus!=="none").length,v=x.filter(j=>j.rollback).length,N={Stage1:0,Stage2:0,Stage3:0};x.forEach(j=>{N[j.extension.stage]+=1});const S=x.length?Number((y/x.length*100).toFixed(1)):0;return{recentCount:x.length,impactRatio:S,rollbackCount:v,stageDistribution:N}},[c]);return u?a.jsxs("div",{className:"space-y-4 p-1",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"/   "}),a.jsx("p",{className:"mt-1 text-xs text-slate-500",children:" ,    KPI  Stage1~3    ."})]}),a.jsx("div",{className:"sticky top-0 z-10 rounded-xl border border-slate-200 bg-white/95 px-4 py-3 backdrop-blur",children:a.jsxs("div",{className:"flex flex-wrap items-center gap-x-6 gap-y-2 text-xs text-slate-700",children:[a.jsxs("span",{children:[" 30   ",a.jsxs("strong",{className:"ml-1 text-slate-900",children:[m.recentCount,""]})]}),a.jsxs("span",{children:[" KPI   ",a.jsxs("strong",{className:"ml-1 text-slate-900",children:[m.impactRatio,"%"]})]}),a.jsxs("span",{children:["   ",a.jsxs("strong",{className:"ml-1 text-slate-900",children:[m.rollbackCount,""]})]}),a.jsxs("span",{children:["Stage  "," ",a.jsxs("strong",{className:"ml-1 text-slate-900",children:["Stage1 ",m.stageDistribution.Stage1,"  Stage2 ",m.stageDistribution.Stage2,"  Stage3 ",m.stageDistribution.Stage3]})]})]})}),a.jsxs(In,{children:[a.jsxs(Cr,{className:"pb-2",children:[a.jsx(Tr,{className:"text-sm",children:"  (KPI  )"}),a.jsx("p",{className:"text-[11px] text-slate-500",children:"       KPI   ."})]}),a.jsx(Dn,{className:"p-0",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-[1200px] w-full text-xs",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-y border-slate-200 bg-slate-50 text-slate-600",children:[a.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:""}),a.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:" "}),a.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:"Stage"}),a.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:" /"}),a.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:" "}),a.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:" KPI"}),a.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:" "}),a.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:" "})]})}),a.jsx("tbody",{children:c.map(p=>{const g=u.event.id===p.event.id,{date:x,time:y}=iDe(p.event.deployedAt),v=!!s[p.event.id],N=nDe[p.impactStatus];return a.jsxs(W.Fragment,{children:[a.jsxs("tr",{onClick:()=>r(p.event.id),className:`cursor-pointer border-b border-slate-100 transition-colors ${g?"bg-blue-50/40":"hover:bg-slate-50"}`,children:[a.jsx("td",{className:"px-3 py-2 align-top",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("button",{onClick:S=>{S.stopPropagation(),i(j=>({...j,[p.event.id]:!j[p.event.id]}))},className:"mt-0.5 rounded p-0.5 text-slate-500 hover:bg-slate-100","aria-label":"  ",children:v?a.jsx(Ds,{className:"h-3.5 w-3.5"}):a.jsx(ji,{className:"h-3.5 w-3.5"})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-slate-900",children:x}),a.jsx("div",{className:"text-[11px] text-slate-500",children:y})]})]})}),a.jsx("td",{className:"px-3 py-2 align-top text-slate-700",children:tDe[p.extension.changeType]}),a.jsx("td",{className:"px-3 py-2 align-top",children:a.jsx("span",{className:"inline-flex rounded border border-slate-200 bg-white px-2 py-0.5 text-[11px] font-medium text-slate-700",children:p.extension.stage})}),a.jsx("td",{className:"px-3 py-2 align-top font-medium text-slate-900",children:p.extension.targetName}),a.jsx("td",{className:"px-3 py-2 align-top text-slate-700",children:p.extension.summaryLine}),a.jsx("td",{className:"px-3 py-2 align-top",children:a.jsx("div",{className:"flex flex-wrap gap-1",children:p.impactKpis.map(S=>{const j=iC[S];return a.jsx("span",{className:`inline-flex rounded border px-1.5 py-0.5 text-[10px] font-medium ${j.chipClass}`,children:j.label},`${p.event.id}-${S}`)})})}),a.jsx("td",{className:"px-3 py-2 align-top",children:a.jsx("span",{className:`inline-flex rounded border px-2 py-0.5 text-[11px] font-medium ${N.className}`,children:N.label})}),a.jsx("td",{className:"px-3 py-2 align-top",children:p.rollback?a.jsx("span",{className:"text-[11px] font-semibold text-red-600",children:""}):a.jsx("span",{className:"text-[11px] text-slate-400",children:""})})]}),v&&a.jsx("tr",{className:"border-b border-slate-100 bg-slate-50/70",children:a.jsxs("td",{colSpan:8,className:"px-4 py-3",children:[a.jsx("div",{className:"text-[11px] font-semibold text-slate-600",children:" "}),a.jsx("p",{className:"mt-1 text-xs leading-relaxed text-slate-700",children:p.extension.reason||p.event.reason||"  ."})]})})]},p.event.id)})})]})})})]}),a.jsxs("div",{className:"grid grid-cols-12 gap-4",children:[a.jsx("div",{className:"col-span-12 lg:col-span-6",children:a.jsxs(In,{className:"h-full",children:[a.jsxs(Cr,{className:"pb-2",children:[a.jsx(Tr,{className:"text-sm",children:" "}),a.jsx("p",{className:"text-[11px] text-slate-500",children:" / ,  ,  Stage  ."})]}),a.jsxs(Dn,{className:"space-y-3",children:[a.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[a.jsx("div",{className:"text-[11px] text-slate-500",children:" /"}),a.jsx("div",{className:"mt-0.5 text-sm font-semibold text-slate-900",children:u.extension.targetName}),a.jsxs("div",{className:"mt-2 flex flex-wrap gap-1.5",children:[a.jsxs("span",{className:"rounded border border-slate-200 bg-slate-50 px-2 py-0.5 text-[11px] font-medium text-slate-700",children:[" Stage: ",u.extension.stage]}),a.jsxs("span",{className:"rounded border border-slate-200 bg-slate-50 px-2 py-0.5 text-[11px] font-medium text-slate-700",children:[" : ",u.extension.scope]}),a.jsx("span",{className:"rounded border border-slate-200 bg-slate-50 px-2 py-0.5 text-[11px] font-medium text-slate-700",children:u.extension.scopeDetail})]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[a.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[a.jsx("div",{className:"text-[11px] text-slate-500",children:" "}),a.jsx("div",{className:"mt-1 text-sm font-semibold text-slate-900",children:u.extension.beforeValue}),a.jsx("div",{className:"mt-0.5 text-[11px] text-slate-500",children:u.extension.beforeLabel})]}),a.jsxs("div",{className:"rounded-lg border border-blue-200 bg-blue-50/40 p-3",children:[a.jsx("div",{className:"text-[11px] text-blue-600",children:" "}),a.jsx("div",{className:"mt-1 text-sm font-semibold text-blue-900",children:u.extension.afterValue}),a.jsx("div",{className:"mt-0.5 text-[11px] text-blue-700",children:u.extension.afterLabel})]})]}),a.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[a.jsx("div",{className:"text-[11px] text-slate-500",children:"Stage   KPI"}),a.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:u.stageLinkedKpis.map(p=>{const g=iC[p];return a.jsx("span",{className:`inline-flex rounded border px-1.5 py-0.5 text-[10px] font-medium ${g.chipClass}`,children:g.label},`stage-link-${p}`)})})]})]})]})}),a.jsx("div",{className:"col-span-12 lg:col-span-6",children:a.jsxs(In,{className:"h-full",children:[a.jsxs(Cr,{className:"pb-2",children:[a.jsx(Tr,{className:"text-sm",children:"KPI "}),a.jsx("p",{className:"text-[11px] text-slate-500",children:"  7 KPI  "})]}),a.jsxs(Dn,{className:"space-y-3",children:[u.stageLinkedKpis.map(p=>{const g=iC[p],x=u.extension.sparklineByKpi[p]??[],y=u.extension.deltaPpByKpi[p]??0,v=x[0]??0,N=x[x.length-1]??0,S=N-v,j=S>.15?" ":S<-.15?" ":" ",C=S>.15?"text-emerald-700":S<-.15?"text-red-700":"text-slate-600";return a.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 shadow-sm",style:{backgroundImage:`linear-gradient(135deg, ${dDe(g.stroke,.16)} 0%, #ffffff 52%, #f8fafc 100%)`},children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("span",{className:`inline-flex rounded border px-1.5 py-0.5 text-[10px] font-medium ${g.chipClass}`,children:g.label}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:`text-xs font-semibold ${y>=0?"text-emerald-600":"text-red-600"}`,children:[" ",y>=0?"+":"",y.toFixed(1),"pp"]}),a.jsx("div",{className:"text-[10px] text-slate-500",children:"7 "})]})]}),a.jsx("div",{className:"mt-2",children:a.jsx(pDe,{points:x,stroke:g.stroke,chartId:`${u.event.id}-${p}`})}),a.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[a.jsx("span",{className:`text-[10px] font-medium ${C}`,children:j}),a.jsxs("span",{className:"text-[10px] text-slate-500",children:[" ",v.toFixed(1),"   ",N.toFixed(1)]})]})]},`spark-${p}`)}),a.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[a.jsx("div",{className:"text-[11px] text-slate-500",children:"   Top3"}),a.jsx("div",{className:"mt-1 flex flex-wrap gap-1.5",children:u.extension.topRegions.slice(0,3).map(p=>a.jsx("span",{className:"rounded border border-slate-200 bg-slate-50 px-2 py-0.5 text-[11px] font-medium text-slate-700",children:p},`${u.event.id}-${p}`))})]}),a.jsx("p",{className:"text-[11px] text-slate-500",children:" KPI        ."}),a.jsxs("div",{className:"flex flex-wrap gap-2 pt-1",children:[a.jsxs("button",{onClick:()=>t?.("quality-monitoring",{changeId:u.event.id}),className:"inline-flex items-center gap-1 rounded border border-slate-200 px-2 py-1 text-[11px] font-medium text-slate-700 hover:bg-slate-50",children:["  ",a.jsx(es,{className:"h-3 w-3"})]}),a.jsxs("button",{onClick:()=>t?.("compliance-audit",{changeId:u.event.id}),className:"inline-flex items-center gap-1 rounded border border-slate-200 px-2 py-1 text-[11px] font-medium text-slate-700 hover:bg-slate-50",children:["  ",a.jsx(es,{className:"h-3 w-3"})]})]})]})]})})]})]}):a.jsx("div",{className:"p-4 text-sm text-slate-500",children:"/    ."})}function hDe({...e}){return a.jsx(zB,{"data-slot":"sheet",...e})}function gDe({...e}){return a.jsx(qB,{"data-slot":"sheet-portal",...e})}function xDe({className:e,...t}){return a.jsx(VB,{"data-slot":"sheet-overlay",className:he("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function bDe({className:e,children:t,side:n="right",...r}){return a.jsxs(gDe,{children:[a.jsx(xDe,{}),a.jsxs(WB,{"data-slot":"sheet-content",className:he("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",n==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",n==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",n==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",n==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",e),...r,children:[t,a.jsxs(XB,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[a.jsx(Mu,{className:"size-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function yDe({className:e,...t}){return a.jsx("div",{"data-slot":"sheet-header",className:he("flex flex-col gap-1.5 p-4",e),...t})}function vDe({className:e,...t}){return a.jsx(YB,{"data-slot":"sheet-title",className:he("text-foreground font-semibold",e),...t})}function NDe({className:e,...t}){return a.jsx(QB,{"data-slot":"sheet-description",className:he("text-muted-foreground text-sm",e),...t})}const oC=[{id:"stage1",name:"Stage1",title:"  &  ",responsibility:" / ",status:"caution",kpiLinks:[""," "],metrics:[{label:"  ",value:"96.8%",target:" 97% ",signal:"watch",note:"/    "},{label:"/ ",value:"4.9%",target:" 3% ",signal:"risk",note:"24    "},{label:"  ",value:"2  ",target:"0 ",signal:"watch",note:"     "}]},{id:"stage2",name:"Stage2",title:"ANN / ",responsibility:" /  ",status:"warning",kpiLinks:[""," "],metrics:[{label:"Feature   ",value:"JS Divergence 0.11",target:" 0.10 ",signal:"risk",note:" 7   "},{label:"Class  ",value:"  6.3%p",target:" 5.0%p ",signal:"watch",note:"L2     "},{label:"Confidence  ",value:"+17%",target:" 10% ",signal:"risk",note:"   "}]},{id:"stage3",name:"Stage3",title:"CNN / ",responsibility:" / ",status:"caution",kpiLinks:[""," "],metrics:[{label:"  ",value:"Drift Score 0.21",target:" 0.20 ",signal:"watch",note:"    "},{label:"Class   ",value:" +0.08",target:" +0.05 ",signal:"watch",note:"   "},{label:"Guardrail Flag ",value:"2.2%",target:" 2.0% ",signal:"risk",note:" fallback   "}]}],SDe=[{id:"qa-stage1-20260211",occurredAt:"2026-02-11 08:55",stage:"stage1",causeType:"",impactKpi:" ",status:" "},{id:"qa-stage2-20260211",occurredAt:"2026-02-11 10:20",stage:"stage2",causeType:"",impactKpi:"",status:" "},{id:"qa-stage3-20260210",occurredAt:"2026-02-10 16:40",stage:"stage3",causeType:"",impactKpi:"",status:""},{id:"qa-link-20260210",occurredAt:"2026-02-10 11:05",stage:"stage2",causeType:"",impactKpi:" ",status:""},{id:"qa-stage1-20260209",occurredAt:"2026-02-09 09:30",stage:"stage1",causeType:"",impactKpi:"",status:" "}],EDe={normal:"bg-green-100 text-green-700",caution:"bg-amber-100 text-amber-700",warning:"bg-red-100 text-red-700"},Ey={normal:"",caution:"",warning:""},jDe={good:"bg-green-50 text-green-700 border-green-200",watch:"bg-amber-50 text-amber-700 border-amber-200",risk:"bg-red-50 text-red-700 border-red-200"},wDe={:"bg-blue-50 text-blue-700 border-blue-200"," ":"bg-red-50 text-red-700 border-red-200"," ":"bg-green-50 text-green-700 border-green-200"},ADe={:"bg-sky-50 text-sky-700 border-sky-200",:"bg-violet-50 text-violet-700 border-violet-200",:"bg-orange-50 text-orange-700 border-orange-200"},cY="2026-02-12",hU={good:"ok",watch:"warn",risk:"risk"},_De={ok:{label:" ",className:"bg-green-50 text-green-700 border-green-200"},warn:{label:" ",className:"bg-amber-50 text-amber-700 border-amber-200"},risk:{label:" ",className:"bg-red-50 text-red-700 border-red-200"}},CDe={"  ":{key:"stage1-required-fields",title:"  ",subtitlePlain:"       .",whyItMatters:"           .",interpretTemplate:{ok:"       .",warn:" /       .",risk:"        ."},actionHint:{ok:"    .",warn:"  /   .",risk:"        ."},targetLine:" 97% "},"/ ":{key:"stage1-delay-missing-rate",title:"/ ",subtitlePlain:"       .",whyItMatters:"        .",interpretTemplate:{ok:"         .",warn:"       .",risk:"24         ."},actionHint:{ok:"     .",warn:"  /   .",risk:"     ."},targetLine:" 3% "},"  ":{key:"stage1-distribution-drift",title:"  ",subtitlePlain:"      .",whyItMatters:"         .",interpretTemplate:{ok:"       .",warn:"       .",risk:"       ."},actionHint:{ok:"    .",warn:"      .",risk:"      ."},targetLine:"0 "},"Feature   ":{key:"stage2-feature-jsd",title:"Feature    (JS Divergence)",subtitlePlain:"       .",whyItMatters:"       .",interpretTemplate:{ok:"       .",warn:"        .",risk:"        ."},actionHint:{ok:"   .",warn:"   /   .",risk:"       ."},targetLine:" 0.10 ",terms:["JS Divergence:   (0  )"]},"Class  ":{key:"stage2-class-bias",title:"Class  ",subtitlePlain:"        .",whyItMatters:"    /   .",interpretTemplate:{ok:"       .",warn:"        .",risk:"        ."},actionHint:{ok:"    .",warn:" /      .",risk:"      ."},targetLine:" 5.0%p "},"Confidence  ":{key:"stage2-confidence-variance",title:"Confidence  ",subtitlePlain:"      .",whyItMatters:"         .",interpretTemplate:{ok:"      .",warn:"     .",risk:"      ."},actionHint:{ok:"   .",warn:"      .",risk:" / /    ."},targetLine:" 10% "},"  ":{key:"stage3-embedding-drift",title:"   (Drift Score)",subtitlePlain:"       .",whyItMatters:"         .",interpretTemplate:{ok:"       .",warn:"     .",risk:"      ."},actionHint:{ok:"    .",warn:" (/)   .",risk:" /     ."},targetLine:" 0.20 "},"Class   ":{key:"stage3-entropy-shift",title:"Class    ()",subtitlePlain:"      .",whyItMatters:"         .",interpretTemplate:{ok:"      .",warn:"      .",risk:"        ."},actionHint:{ok:"    .",warn:"     .",risk:"/     ."},targetLine:" +0.05 ",terms:[":   ( )"]},"Guardrail Flag ":{key:"stage3-guardrail-rate",title:"Guardrail Flag ",subtitlePlain:"( )    .",whyItMatters:"/        .",interpretTemplate:{ok:"       .",warn:"     .",risk:"fallback       ."},actionHint:{ok:"   .",warn:"     .",risk:" / /     ."},targetLine:" 2.0% "}};function TDe(){const[e,t]=h.useState(!1);return h.useEffect(()=>{if(typeof window>"u")return;const n=window.matchMedia("(hover: none), (pointer: coarse)"),r=()=>t(n.matches||navigator.maxTouchPoints>0);return r(),n.addEventListener?.("change",r),()=>n.removeEventListener?.("change",r)},[]),e}function gU(e){return CDe[e.label]??{key:e.label,title:e.label,subtitlePlain:"         .",whyItMatters:"         .",interpretTemplate:{ok:"     .",warn:"      .",risk:"        ."},actionHint:{ok:"   .",warn:"    .",risk:"      ."},targetLine:e.target}}function ODe(e){return e==="data_quality"?"stage1":e==="model_fitness"?"stage3":"stage2"}function RDe(e){return e==="stage1"?"Stage1":e==="stage2"?"Stage2":"Stage3"}function kDe(e,t){return t==="risk"?e.interpretTemplate.risk:t==="warn"?e.interpretTemplate.warn:e.interpretTemplate.ok}function IDe(e,t){return t==="risk"?e.actionHint.risk:t==="warn"?e.actionHint.warn:e.actionHint.ok}function DDe(e){return e==="risk"?" 7         .":e==="warn"?" 7        .":" 7        ."}function xU({stage:e,metric:t,explain:n,severity:r,onOpenDetail:s}){const i=_De[r];return a.jsxs("div",{className:"w-[min(92vw,460px)] max-w-[460px] rounded-lg border border-slate-200 bg-white p-3 text-[11px] leading-[1.35] shadow-xl",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"text-[10px] font-semibold text-slate-500",children:e.name}),a.jsx("p",{className:"truncate text-slate-800 font-semibold",children:n.title})]}),a.jsx("span",{className:`inline-flex shrink-0 items-center whitespace-nowrap rounded-full border px-2 py-0.5 text-[10px] font-semibold leading-none ${i.className}`,children:i.label})]}),a.jsxs("p",{className:"mt-1 truncate text-slate-600",children:[": ",n.subtitlePlain]}),a.jsxs("p",{className:"mt-1 truncate text-slate-600",children:[" : ",i.label,"  ",t.value]}),a.jsxs("p",{className:"mt-1 truncate text-slate-600",children:[": ",kDe(n,r)]}),a.jsxs("p",{className:"mt-1 truncate text-slate-600",children:[" : ",IDe(n,r)]}),a.jsxs("div",{className:"mt-1 flex items-center justify-between gap-2",children:[a.jsxs("span",{className:"truncate text-slate-500",children:[": ",n.targetLine||t.target,"  D-1 ",cY]}),a.jsxs("button",{type:"button",className:"inline-flex items-center gap-1 text-[10px] font-semibold text-blue-600 hover:text-blue-700 shrink-0",onClick:o=>{o.stopPropagation(),s()},children:["",a.jsx(es,{className:"h-3 w-3"})]})]})]})}function PDe({context:e,onNavigate:t}){const n=h.useMemo(()=>ODe(e?.driver),[e?.driver]),[r,s]=h.useState([n]),[i,o]=h.useState(!1),[l,c]=h.useState(null),[u,m]=h.useState([]),[p,g]=h.useState([]),x=TDe(),y=h.useRef({});h.useEffect(()=>{let P=!1;return Promise.all([D5e(),I5e()]).then(([$,w])=>{P||(m($),g(w))}).catch(()=>{P||(m([]),g([]))}),()=>{P=!0}},[]);const v=h.useMemo(()=>{if(!u.length)return SDe;const P=X=>X.type==="model_drift"?"stage3":X.type==="sla_breach"?"stage2":X.relatedDriver==="data_quality"?"stage1":X.relatedDriver==="model_fitness"?"stage3":"stage2",$=X=>X.type==="model_drift"||X.relatedDriver==="model_fitness"?"":X.type==="data_missing"||X.type==="update_delay"||X.relatedDriver==="data_quality"?"":"",w=X=>X.resolved?" ":X.severity==="critical"?" ":"",U=X=>X.relatedDriver==="data_quality"?" ":X.relatedDriver==="model_fitness"?"":X.relatedDriver==="ops_bottleneck"?"":" ";return u.map(X=>({id:X.id,occurredAt:X.detectedAt.replace("T"," ").slice(0,16),stage:P(X),causeType:$(X),impactKpi:U(X),status:w(X)}))},[u]),N=h.useMemo(()=>{const P=p.find(w=>w.key==="data_quality");return P?P.indicators.find(w=>w.label.includes(""))?.value??95.1:95.1},[p]),S=v.filter(P=>P.status!==" ").length,j=h.useMemo(()=>v.reduce((P,$)=>($.status!==" "&&(P[$.causeType]+=1),P),{:0,:0,:0}),[v]),C=h.useMemo(()=>oC.reduce((P,$)=>(P[$.id]=$.status,P),{}),[]),_=P=>{s($=>$.includes(P)?$.filter(w=>w!==P):[...$,P])},A=h.useCallback((P,$)=>`${P}::${$}`,[]),T=h.useCallback((P,$)=>{const w=gU($);s(X=>X.includes(P.id)?X:[...X,P.id]),c({stage:P,metric:$,explain:w}),o(!0);const U=A(P.id,$.label);requestAnimationFrame(()=>{setTimeout(()=>{y.current[U]?.scrollIntoView({behavior:"smooth",block:"center"})},120)})},[A]),R=l?hU[l.metric.signal]:null,M=h.useMemo(()=>l?v.filter(P=>P.stage===l.stage.id&&P.status!==" "):[],[l,v]);return a.jsx(k3,{delayDuration:200,children:a.jsxs("div",{className:"space-y-5 p-1",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:" &  "}),a.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Stage     / /   ."})]}),a.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-5",children:[{label:"  ",value:`${N.toFixed(1)}%`,sub:" ",icon:a.jsx(gd,{className:"h-5 w-5"}),color:N>=96?"text-green-600":"text-amber-600",bg:N>=96?"bg-green-50":"bg-amber-50"},{label:"Stage1 ",value:Ey[C.stage1],sub:"  & ",icon:a.jsx(yR,{className:"h-5 w-5"}),color:C.stage1==="warning"?"text-red-600":C.stage1==="caution"?"text-amber-600":"text-green-600",bg:C.stage1==="warning"?"bg-red-50":C.stage1==="caution"?"bg-amber-50":"bg-green-50"},{label:"Stage2 ",value:Ey[C.stage2],sub:"ANN /",icon:a.jsx(Tg,{className:"h-5 w-5"}),color:C.stage2==="warning"?"text-red-600":C.stage2==="caution"?"text-amber-600":"text-green-600",bg:C.stage2==="warning"?"bg-red-50":C.stage2==="caution"?"bg-amber-50":"bg-green-50"},{label:"Stage3 ",value:Ey[C.stage3],sub:"CNN /",icon:a.jsx(oc,{className:"h-5 w-5"}),color:C.stage3==="warning"?"text-red-600":C.stage3==="caution"?"text-amber-600":"text-green-600",bg:C.stage3==="warning"?"bg-red-50":C.stage3==="caution"?"bg-amber-50":"bg-green-50"},{label:"  ",value:`${S}`,sub:"  ",icon:a.jsx(fs,{className:"h-5 w-5"}),color:S>2?"text-red-600":"text-amber-600",bg:S>2?"bg-red-50":"bg-amber-50"}].map((P,$)=>a.jsx(In,{className:"border-0 shadow-sm",children:a.jsx(Dn,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`p-2 rounded-lg ${P.bg} ${P.color}`,children:P.icon}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-xs text-gray-500",children:P.label}),a.jsx("div",{className:"text-xl font-bold text-gray-900",children:P.value}),a.jsx("div",{className:"text-[11px] text-gray-400 truncate",children:P.sub})]})]})})},$))}),a.jsxs(In,{children:[a.jsx(Cr,{className:"pb-3",children:a.jsxs(Tr,{className:"text-sm flex items-center gap-2",children:[a.jsx(HQ,{className:"h-4 w-4 text-slate-600"}),"5  "]})}),a.jsx(Dn,{className:"pt-0",children:a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsxs("span",{className:"inline-flex items-center rounded-full border px-2 py-1 text-xs font-medium bg-sky-50 text-sky-700 border-sky-200",children:["  ",j.,""]}),a.jsxs("span",{className:"inline-flex items-center rounded-full border px-2 py-1 text-xs font-medium bg-violet-50 text-violet-700 border-violet-200",children:["  ",j.,""]}),a.jsxs("span",{className:"inline-flex items-center rounded-full border px-2 py-1 text-xs font-medium bg-orange-50 text-orange-700 border-orange-200",children:["  ",j.,""]}),a.jsxs("span",{className:"text-xs text-gray-500",children:[" Stage: ",oC.filter(P=>P.status==="warning").map(P=>P.name).join(", ")||""]})]})})]}),a.jsx("div",{className:"space-y-3",children:oC.map(P=>{const $=r.includes(P.id);return a.jsxs(In,{className:"border border-slate-200 overflow-hidden gap-0",children:[a.jsx("button",{type:"button",onClick:()=>_(P.id),className:"w-full px-5 py-4 bg-white hover:bg-slate-50 transition-colors text-left",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-sm font-semibold text-slate-800 min-w-16",children:P.name}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold text-gray-900",children:P.title}),a.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:P.responsibility})]}),a.jsx("span",{className:`ml-auto inline-flex items-center rounded-full px-2 py-1 text-[11px] font-medium ${EDe[P.status]}`,children:Ey[P.status]}),$?a.jsx(id,{className:"h-4 w-4 text-gray-400"}):a.jsx(Ds,{className:"h-4 w-4 text-gray-400"})]})}),$&&a.jsxs(Dn,{className:"pt-1 pb-5 px-5 space-y-4 border-t border-slate-100",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx("span",{className:"text-[11px] text-slate-500",children:"KPI "}),P.kpiLinks.map(w=>a.jsx("span",{className:"inline-flex items-center rounded-full border border-slate-200 bg-slate-50 px-2 py-0.5 text-[11px] font-medium text-slate-700",children:w},w))]}),a.jsx("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-3",children:P.metrics.map(w=>{const U=hU[w.signal],X=gU(w),I=A(P.id,w.label),G=a.jsxs("div",{ref:L=>{y.current[I]=L},role:"button",tabIndex:0,onKeyDown:L=>{L.key==="Enter"&&(L.preventDefault(),T(P,w))},className:"relative rounded-lg border border-slate-200 bg-white p-3 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-200",children:[a.jsx("p",{className:"text-xs text-slate-500 pr-8",children:w.label}),a.jsx("p",{className:"text-lg font-semibold text-gray-900 mt-1",children:w.value}),a.jsxs("div",{className:"flex items-center justify-between mt-2",children:[a.jsx("span",{className:"text-[11px] text-slate-500",children:w.target}),a.jsx("span",{className:`inline-flex items-center rounded-full border px-2 py-0.5 text-[10px] font-semibold ${jDe[w.signal]}`,children:w.signal==="risk"?"":w.signal==="watch"?"":""})]}),a.jsx("p",{className:"text-[11px] text-slate-500 mt-2",children:w.note}),x&&a.jsxs(nY,{children:[a.jsx(rY,{asChild:!0,children:a.jsx("button",{type:"button","aria-label":`${w.label} `,className:"absolute right-2 top-2 inline-flex h-5 w-5 items-center justify-center rounded border border-slate-200 bg-slate-50 text-slate-500 hover:bg-slate-100",onClick:L=>L.stopPropagation(),children:a.jsx(wm,{className:"h-3 w-3"})})}),a.jsx(aY,{children:a.jsx(sY,{side:"top",align:"end",sideOffset:8,collisionPadding:12,className:"z-50 max-w-[92vw] p-0 border-0 bg-transparent shadow-none",children:a.jsx(xU,{stage:P,metric:w,explain:X,severity:U,onOpenDetail:()=>T(P,w)})})})]})]});return x?a.jsx(W.Fragment,{children:G},I):a.jsxs(I3,{delayDuration:200,children:[a.jsx(D3,{asChild:!0,children:G}),a.jsx(P3,{children:a.jsxs(M3,{side:"top",align:"end",sideOffset:8,collisionPadding:12,className:"z-50 max-w-[92vw] p-0 border-0 bg-transparent shadow-none",children:[a.jsx(xU,{stage:P,metric:w,explain:X,severity:U,onOpenDetail:()=>T(P,w)}),a.jsx(L3,{className:"fill-white"})]})})]},I)})})]})]},P.id)})}),a.jsxs(In,{children:[a.jsx(Cr,{className:"pb-3",children:a.jsxs(Tr,{className:"text-base flex items-center gap-2",children:[a.jsx(fs,{className:"h-4 w-4 text-amber-500"})," "]})}),a.jsxs(Dn,{className:"pt-0",children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[760px]",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50/70",children:[a.jsx("th",{className:"text-left py-2.5 px-3 text-xs font-semibold text-gray-600",children:""}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs font-semibold text-gray-600",children:"Stage"}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs font-semibold text-gray-600",children:" "}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs font-semibold text-gray-600",children:" KPI"}),a.jsx("th",{className:"text-left py-2.5 px-3 text-xs font-semibold text-gray-600",children:""})]})}),a.jsxs("tbody",{children:[v.map(P=>a.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50/50",children:[a.jsx("td",{className:"py-3 px-3 text-sm text-gray-700",children:P.occurredAt}),a.jsx("td",{className:"py-3 px-3",children:a.jsx("span",{className:"text-sm font-medium text-gray-900",children:RDe(P.stage)})}),a.jsx("td",{className:"py-3 px-3",children:a.jsx("span",{className:`inline-flex items-center rounded-full border px-2 py-1 text-[11px] font-medium ${ADe[P.causeType]}`,children:P.causeType})}),a.jsx("td",{className:"py-3 px-3 text-sm text-gray-700",children:P.impactKpi}),a.jsx("td",{className:"py-3 px-3",children:a.jsx("span",{className:`inline-flex items-center rounded-full border px-2 py-1 text-[11px] font-medium ${wDe[P.status]}`,children:P.status})})]},P.id)),v.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"py-6 text-center text-sm text-gray-500",children:"   ."})})]})]})}),a.jsx("div",{className:"mt-3 text-[11px] text-gray-500",children:" : ( ),  (/  ),  (  )"})]})]}),a.jsx(hDe,{open:i,onOpenChange:o,children:a.jsx(bDe,{side:"right",className:"w-[420px] sm:max-w-[420px]",children:l?a.jsxs(a.Fragment,{children:[a.jsxs(yDe,{className:"border-b border-slate-200 pb-3",children:[a.jsxs(vDe,{className:"text-base text-slate-900",children:[l.stage.name,"  ",l.metric.label]}),a.jsxs(NDe,{className:"text-xs text-slate-500",children:[l.stage.title,"     ",cY," (D-1)"]})]}),a.jsxs("div",{className:"flex-1 space-y-3 overflow-y-auto px-4 pb-4 text-sm",children:[a.jsxs("section",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[a.jsx("p",{className:"text-[11px] font-semibold text-slate-600",children:" 7 "}),a.jsx("p",{className:"mt-1 text-sm text-slate-800",children:DDe(R??"ok")}),a.jsxs("p",{className:"mt-1 text-[11px] text-slate-500",children:[" : ",l.metric.value,"  ",l.explain.targetLine||l.metric.target]})]}),a.jsxs("section",{className:"rounded-lg border border-slate-200 p-3",children:[a.jsx("p",{className:"text-[11px] font-semibold text-slate-600",children:" "}),a.jsx("p",{className:"mt-1 text-sm text-slate-700",children:l.metric.note})]}),a.jsxs("section",{className:"rounded-lg border border-slate-200 p-3",children:[a.jsx("p",{className:"text-[11px] font-semibold text-slate-600",children:" "}),a.jsx("div",{className:"mt-2 flex flex-wrap gap-1.5",children:l.stage.kpiLinks.map(P=>a.jsx("span",{className:"inline-flex items-center rounded-full border border-slate-200 bg-slate-50 px-2 py-0.5 text-[11px] text-slate-700",children:P},P))})]}),a.jsxs("section",{className:"rounded-lg border border-slate-200 p-3",children:[a.jsx("p",{className:"text-[11px] font-semibold text-slate-600",children:" "}),M.length>0?a.jsx("ul",{className:"mt-2 space-y-2",children:M.slice(0,4).map(P=>a.jsxs("li",{className:"rounded border border-slate-100 bg-slate-50 px-2 py-1.5",children:[a.jsx("p",{className:"text-[11px] text-slate-600",children:P.occurredAt}),a.jsxs("p",{className:"text-xs text-slate-800",children:[P.causeType,"  ",P.impactKpi,"  ",P.status]})]},P.id))}):a.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"    ."})]})]})]}):a.jsx("div",{className:"flex h-full items-center justify-center text-sm text-slate-500",children:"KPI    ."})})})]})})}const jy={regulation:{label:" ",dotClass:"bg-amber-500",badgeClass:"bg-amber-50 text-amber-700 border-amber-200",icon:a.jsx(nl,{className:"h-3.5 w-3.5"})},model:{label:" ",dotClass:"bg-purple-500",badgeClass:"bg-purple-50 text-purple-700 border-purple-200",icon:a.jsx($J,{className:"h-3.5 w-3.5"})},policy:{label:" ",dotClass:"bg-blue-500",badgeClass:"bg-blue-50 text-blue-700 border-blue-200",icon:a.jsx(fR,{className:"h-3.5 w-3.5"})}},MDe={:{cls:"bg-green-50 text-green-700 border-green-200"},:{cls:"bg-amber-50 text-amber-700 border-amber-200"},:{cls:"bg-red-50 text-red-700 border-red-200"}},LDe=[{question:"AI   ?",answer:"",detail:"Stage1~3         .",verdict:"no"},{question:"()   ?",answer:"",detail:"//        .",verdict:"yes"},{question:"     ?",answer:"",detail:"  /      .",verdict:"yes"}];function wy(e,t){return t<=0?100:Math.round(e/t*100)}function V0(e){return e===0?"":e===1?"":""}function bU(e){return new Date(e).toLocaleString("ko-KR",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function $De(e){const t=e.type==="model_version"?"model":"regulation",n=e.approvedBy||e.deployedBy||"",r=` ${e.requestedBy||"-"} /  ${e.approvedBy||""} /  ${e.deployedBy||"-"}`;return{id:`timeline-policy-${e.id}`,timestamp:e.deployedAt,category:t,title:e.title,owner:n,decisionLog:r,evidence:e.reason||e.description,changeId:e.id,statusLabel:e.status}}function FDe(e){return{id:`timeline-audit-${e.id}`,timestamp:e.timestamp,category:"policy",title:e.title,owner:e.approver||e.actor,decisionLog:` ${e.requestor||"-"} /  ${e.approver||""} /  ${e.executor||"-"}`,evidence:e.rationale,changeId:e.relatedChangeId,auditId:e.id,statusLabel:e.status}}function UDe({context:e,onNavigate:t}){const[n,r]=h.useState([]),[s,i]=h.useState([]),[o,l]=h.useState("all"),[c,u]=h.useState(null),[m,p]=h.useState(!1);h.useEffect(()=>{let _=!1;return Promise.all([UW(),P5e()]).then(([A,T])=>{_||(r(A),i(T))}).catch(()=>{_||(r([]),i([]))}),()=>{_=!0}},[]);const g=h.useMemo(()=>{const _=n.map($De),A=s.filter(T=>T.type==="policy_change").map(FDe);return[..._,...A].sort((T,R)=>new Date(R.timestamp).getTime()-new Date(T.timestamp).getTime())},[n,s]),x=h.useMemo(()=>o==="all"?g:g.filter(_=>_.category===o),[g,o]);h.useEffect(()=>{if(g.length){if(e?.auditId){const _=g.find(A=>A.auditId===e.auditId);if(_){u(_.id);return}}if(e?.changeId){const _=g.find(A=>A.changeId===e.changeId);if(_){u(_.id);return}}u(_=>_||g[0].id)}},[g,e?.auditId,e?.changeId]),h.useEffect(()=>{if(!x.length){u(null);return}x.some(A=>A.id===c)||u(x[0].id)},[x,c]);const y=h.useMemo(()=>g.find(_=>_.id===c)||null,[g,c]),v=h.useMemo(()=>{const _=s.length,A=s.filter($=>!!$.cause&&$.kpiSnapshot.riskTop3.length>0).length,T=s.filter($=>!!$.requestor&&!!$.approver&&!!$.rationale).length,R=s.filter($=>!!$.executor&&!!$.approvalComment).length,M=A+T+R,P=_*3;return{stage1:A,stage2:T,stage3:R,totalEvents:_,rate:wy(M,P)}},[s]),N=h.useMemo(()=>{const _=s.length,A=s.filter(M=>!!M.approver).length,T=s.filter(M=>!!M.rationale&&(!!M.policyRef||!!M.internalStandardId)).length,R=s.filter(M=>/ai|  /i.test(M.approver||"")).length;return{totalEvents:_,ownerAssigned:A,rationaleAttached:T,aiFinalDecisionCount:R,humanDecisionCount:A}},[s]),S=h.useMemo(()=>{const _=s.filter($=>!$.approver),A=s.filter($=>!$.rationale||!$.policyRef&&!$.internalStandardId),T=s.filter($=>!$.executor),R=s.filter($=>$.type==="violation"&&$.severity==="high"&&$.status!=="resolved"),M=s.filter($=>!$.cause||!$.requestor||!$.approver||!$.executor),P=n[0]?.id;return[{id:"owner",itemName:" () ",stage:"Stage2",nonComplianceCases:_.length,status:V0(_.length),linkLabel:"  ",navPage:"compliance-audit",navContext:_[0]?{auditId:_[0].id}:void 0},{id:"evidence",itemName:" (/) ",stage:"Stage2~3",nonComplianceCases:A.length,status:V0(A.length),linkLabel:"  ",navPage:"model-governance",navContext:{changeId:A[0]?.relatedChangeId||P}},{id:"executor",itemName:" (Executor)  ",stage:"Stage3",nonComplianceCases:T.length,status:V0(T.length),linkLabel:"  ",navPage:"compliance-audit",navContext:T[0]?{auditId:T[0].id}:void 0},{id:"high-risk",itemName:"    ",stage:"Stage3",nonComplianceCases:R.length,status:V0(R.length),linkLabel:"  ",navPage:"compliance-audit",navContext:R[0]?{auditId:R[0].id}:void 0},{id:"stage-chain",itemName:"Stage1~3   ",stage:"Stage1~3",nonComplianceCases:M.length,status:V0(M.length),linkLabel:"  ",navPage:"compliance-audit",navContext:M[0]?{auditId:M[0].id}:void 0}]},[n,s]),j=h.useMemo(()=>{const _=S.filter(A=>A.status==="").length;return wy(_,S.length)},[S]),C=h.useMemo(()=>[{label:"  ",value:`${wy(N.ownerAssigned,N.totalEvents)}%`,detail:`${N.ownerAssigned}/${N.totalEvents}`},{label:"  ",value:`${wy(N.rationaleAttached,N.totalEvents)}%`,detail:`${N.rationaleAttached}/${N.totalEvents}`},{label:" ",value:`${j}%`,detail:`${S.filter(_=>_.status==="").length}/${S.length} `},{label:"Stage  ",value:`${v.rate}%`,detail:`S1 ${v.stage1}/${v.totalEvents}  S2 ${v.stage2}/${v.totalEvents}  S3 ${v.stage3}/${v.totalEvents}`}],[S,j,v,N]);return a.jsxs("div",{className:"space-y-5 p-1",children:[a.jsxs("div",{className:"flex justify-between items-start gap-3",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"   "}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"             ."})]}),a.jsxs(Nt,{size:"sm",onClick:()=>alert("   (mock)"),children:[a.jsx(im,{className:"h-4 w-4 mr-2"}),"  "]})]}),a.jsxs("div",{className:"rounded-xl border-2 border-blue-200 bg-gradient-to-r from-blue-50 via-white to-white p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(nl,{className:"h-4 w-4 text-blue-600"}),a.jsx("span",{className:"text-sm font-bold text-gray-900",children:"  "})]}),a.jsx("div",{className:"grid gap-3 md:grid-cols-3",children:LDe.map(_=>a.jsx(BDe,{question:_.question,answer:_.answer,detail:_.detail,verdict:_.verdict},_.question))}),a.jsxs("div",{className:"mt-3 text-xs text-gray-600",children:["AI  "," ",a.jsxs("span",{className:"font-semibold text-red-600",children:[N.aiFinalDecisionCount,""]})," /   "," ",a.jsxs("span",{className:"font-semibold text-blue-700",children:[N.humanDecisionCount,""]})]})]}),a.jsx("div",{className:"grid gap-3 md:grid-cols-4",children:C.map(_=>a.jsx(GDe,{label:_.label,value:_.value,detail:_.detail},_.label))}),a.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(lc,{className:"h-4 w-4 text-indigo-600"}),a.jsx("h2",{className:"text-sm font-bold text-gray-900",children:"  "})]}),a.jsxs("div",{className:"grid gap-3 lg:grid-cols-[1fr_auto_1fr_auto_1fr] items-center",children:[a.jsx(lC,{title:"Stage1",subtitle:"  ",description:" /  .",badge:" ",badgeClass:"bg-gray-100 text-gray-700 border-gray-200"}),a.jsx(Cg,{className:"h-4 w-4 text-gray-400 justify-self-center hidden lg:block"}),a.jsx(lC,{title:"Stage2",subtitle:" ",description:"/      .",badge:" ",badgeClass:"bg-blue-50 text-blue-700 border-blue-200"}),a.jsx(Cg,{className:"h-4 w-4 text-gray-400 justify-self-center hidden lg:block"}),a.jsx(lC,{title:"Stage3",subtitle:" ",description:"       .",badge:" ",badgeClass:"bg-green-50 text-green-700 border-green-200"})]}),a.jsx("div",{className:"mt-3 rounded-lg border border-indigo-200 bg-indigo-50 p-3",children:a.jsx("p",{className:"text-sm font-semibold text-indigo-900",children:"   (). AI/       ."})})]}),a.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4",children:[a.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(fR,{className:"h-4 w-4 text-gray-700"}),a.jsx("h2",{className:"text-sm font-bold text-gray-900",children:" "})]}),a.jsxs("button",{onClick:()=>p(_=>!_),className:"text-xs text-gray-500 inline-flex items-center gap-1 hover:text-gray-700",children:["Stage  ",m?a.jsx(id,{className:"h-4 w-4"}):a.jsx(Ds,{className:"h-4 w-4"})]})]}),m&&a.jsx("div",{className:"mb-3 rounded-lg border border-gray-200 bg-gray-50 p-3 text-xs text-gray-600",children:"Stage1:   (cause, riskTop3) / Stage2:  / Stage3:  "}),a.jsx("div",{className:"overflow-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-left text-xs text-gray-500 border-b border-gray-200",children:[a.jsx("th",{className:"py-2 pr-3",children:" "}),a.jsx("th",{className:"py-2 pr-3",children:" Stage"}),a.jsx("th",{className:"py-2 pr-3",children:""}),a.jsx("th",{className:"py-2 pr-3",children:"  "}),a.jsx("th",{className:"py-2",children:"  "})]})}),a.jsx("tbody",{children:S.map(_=>a.jsxs("tr",{className:"border-b border-gray-100 last:border-b-0",children:[a.jsx("td",{className:"py-2.5 pr-3 font-medium text-gray-900",children:_.itemName}),a.jsx("td",{className:"py-2.5 pr-3 text-gray-600",children:_.stage}),a.jsx("td",{className:"py-2.5 pr-3",children:a.jsx("span",{className:`inline-flex items-center px-2 py-0.5 text-xs rounded border ${MDe[_.status].cls}`,children:_.status})}),a.jsxs("td",{className:"py-2.5 pr-3 text-gray-700",children:[_.nonComplianceCases,""]}),a.jsx("td",{className:"py-2.5",children:a.jsxs("button",{onClick:()=>t?.(_.navPage,_.navContext),className:"text-xs inline-flex items-center gap-1 text-blue-600 hover:text-blue-800 hover:underline",children:[a.jsx(es,{className:"h-3.5 w-3.5"}),_.linkLabel]})})]},_.id))})]})})]}),a.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Zl,{className:"h-4 w-4 text-gray-700"}),a.jsx("h2",{className:"text-sm font-bold text-gray-900",children:"  "})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ay,{label:"",active:o==="all",onClick:()=>l("all")}),a.jsx(Ay,{label:" ",active:o==="regulation",onClick:()=>l("regulation")}),a.jsx(Ay,{label:" ",active:o==="model",onClick:()=>l("model")}),a.jsx(Ay,{label:" ",active:o==="policy",onClick:()=>l("policy")})]})]}),a.jsxs("div",{className:"grid gap-4 lg:grid-cols-[2fr_3fr]",children:[a.jsxs("div",{className:"relative max-h-[420px] overflow-y-auto pr-1",children:[a.jsx("div",{className:"absolute left-[11px] top-0 bottom-0 w-0.5 bg-gray-200"}),x.length===0?a.jsx("div",{className:"py-16 text-center text-sm text-gray-400",children:"   ."}):a.jsx("div",{className:"space-y-1.5",children:x.map(_=>{const A=_.id===c,T=jy[_.category];return a.jsxs("button",{onClick:()=>u(_.id),className:`relative w-full text-left pl-8 pr-3 py-2.5 rounded-lg border transition-colors ${A?"border-blue-300 bg-blue-50":"border-transparent hover:bg-gray-50 hover:border-gray-200"}`,children:[a.jsx("div",{className:`absolute left-[5px] top-3.5 w-3 h-3 rounded-full ${T.dotClass}`}),a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("span",{className:`inline-flex items-center gap-1 px-1.5 py-0.5 text-[10px] rounded border ${T.badgeClass}`,children:[T.icon,T.label]}),a.jsx("span",{className:"text-[10px] text-gray-400",children:bU(_.timestamp)})]}),a.jsx("div",{className:"mt-1 text-sm font-semibold text-gray-900 leading-snug",children:_.title}),a.jsxs("div",{className:"mt-1 text-[11px] text-gray-500",children:[": ",_.owner]})]},_.id)})})]}),a.jsx("div",{children:y?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-3",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 text-xs rounded border ${jy[y.category].badgeClass}`,children:[jy[y.category].icon,jy[y.category].label]}),a.jsx("span",{className:"text-xs text-gray-500",children:bU(y.timestamp)})]}),a.jsx("h3",{className:"mt-2 text-base font-bold text-gray-900",children:y.title}),a.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[": ",y.statusLabel]})]}),a.jsx(cC,{icon:a.jsx(lc,{className:"h-4 w-4 text-blue-600"}),title:" ",children:a.jsx("p",{className:"text-sm font-semibold text-gray-900",children:y.owner})}),a.jsx(cC,{icon:a.jsx(el,{className:"h-4 w-4 text-green-600"}),title:" ",children:a.jsx("p",{className:"text-sm text-gray-800 leading-relaxed",children:y.decisionLog})}),a.jsx(cC,{icon:a.jsx(Bf,{className:"h-4 w-4 text-indigo-600"}),title:" ",children:a.jsx("p",{className:"text-sm text-gray-800 leading-relaxed",children:y.evidence})}),a.jsx("div",{className:"rounded-lg border border-blue-200 bg-blue-50 p-3",children:a.jsx("p",{className:"text-xs font-semibold text-blue-900",children:" :       /    ."})}),a.jsxs("div",{className:"flex flex-wrap gap-2 justify-end",children:[y.changeId&&a.jsxs(Nt,{size:"sm",variant:"outline",className:"text-xs text-blue-700",onClick:()=>t?.("model-governance",{changeId:y.changeId}),children:[a.jsx(es,{className:"h-3.5 w-3.5 mr-1"}),"  "]}),y.auditId&&a.jsxs(Nt,{size:"sm",variant:"outline",className:"text-xs",onClick:()=>t?.("compliance-audit",{auditId:y.auditId}),children:[a.jsx(es,{className:"h-3.5 w-3.5 mr-1"}),"  "]})]})]}):a.jsx("div",{className:"h-[240px] rounded-lg border border-dashed border-gray-200 flex items-center justify-center text-sm text-gray-400",children:"       ."})})]})]})]})}function BDe({question:e,answer:t,detail:n,verdict:r}){return a.jsxs("div",{className:`rounded-lg border p-3 ${r==="yes"?"border-green-200 bg-green-50/50":"border-red-200 bg-red-50/50"}`,children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r==="yes"?a.jsx(el,{className:"h-4 w-4 text-green-600"}):a.jsx(Sm,{className:"h-4 w-4 text-red-600"}),a.jsx("span",{className:"text-xs font-semibold text-gray-700",children:e})]}),a.jsx("p",{className:`text-sm font-bold ${r==="yes"?"text-green-700":"text-red-700"}`,children:t}),a.jsx("p",{className:"mt-1 text-xs text-gray-600 leading-relaxed",children:n})]})}function GDe({label:e,value:t,detail:n}){return a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-3",children:[a.jsx("p",{className:"text-xs text-gray-500",children:e}),a.jsx("p",{className:"text-xl font-bold text-gray-900 mt-1",children:t}),a.jsx("p",{className:"text-[11px] text-gray-500 mt-1",children:n})]})}function lC({title:e,subtitle:t,description:n,badge:r,badgeClass:s}){return a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-3",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("span",{className:"text-xs font-bold text-gray-700",children:e}),a.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${s}`,children:r})]}),a.jsx("p",{className:"text-sm font-semibold text-gray-900 mt-1",children:t}),a.jsx("p",{className:"text-xs text-gray-600 mt-1 leading-relaxed",children:n})]})}function Ay({label:e,active:t,onClick:n}){return a.jsx("button",{onClick:n,className:`text-xs px-2 py-1 rounded border transition-colors ${t?"bg-blue-50 text-blue-700 border-blue-200":"bg-white text-gray-600 border-gray-200 hover:bg-gray-50"}`,children:e})}function cC({icon:e,title:t,children:n}){return a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-3",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e,a.jsx("span",{className:"text-xs font-semibold text-gray-700",children:t})]}),n]})}const yU=(e,t,n)=>Math.min(n,Math.max(t,e));function HDe({userRole:e}){const t=e==="central_admin",[n,r]=h.useState(!1),[s,i]=h.useState(()=>HW()),o=h.useCallback((N,S)=>{i(j=>({...j,matrixThresholds:{...j.matrixThresholds,[N]:yU(S,70,99)}})),r(!1)},[]),l=h.useCallback((N,S)=>{i(j=>({...j,headline:{...j.headline,[N]:S}})),r(!1)},[]),c=h.useCallback(N=>{i(S=>({...S,drilldown:{...S.drilldown,[N]:!S.drilldown[N]}})),r(!1)},[]),u=h.useCallback(N=>{i(S=>({...S,notifications:{...S.notifications,[N]:!S.notifications[N]}})),r(!1)},[]),m=h.useCallback(N=>{i(S=>({...S,reports:{...S.reports,defaultPeriod:N}})),r(!1)},[]),p=h.useCallback(()=>{i(N=>({...N,reports:{...N.reports,includeFilterContext:!N.reports.includeFilterContext}})),r(!1)},[]),g=h.useCallback(()=>{B5e(s),r(!0),setTimeout(()=>r(!1),3e3)},[s]),x=h.useCallback(()=>{const N=G5e();i(N),r(!1)},[]),y=h.useMemo(()=>Math.abs(s.matrixThresholds.slaCut-s.matrixThresholds.dataCut)<=1?" ":s.matrixThresholds.slaCut>s.matrixThresholds.dataCut?"SLA   ":"   ",[s.matrixThresholds.dataCut,s.matrixThresholds.slaCut]),v=t?" ":" ";return a.jsxs("div",{className:"p-6 max-w-5xl mx-auto space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-bold text-gray-800",children:" "}),a.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:"     /  ."})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[n&&a.jsxs("span",{className:"inline-flex items-center gap-1 text-green-600 text-sm font-medium animate-pulse",children:[a.jsx(Si,{className:"h-4 w-4"})," "]}),a.jsxs("button",{type:"button",onClick:x,disabled:!t,className:"inline-flex items-center gap-1 px-3 py-1.5 text-xs border border-gray-300 rounded-lg text-gray-600 hover:bg-gray-50 disabled:opacity-40 disabled:cursor-not-allowed",children:[a.jsx(UJ,{className:"h-3.5 w-3.5"})," "]}),a.jsxs("button",{type:"button",onClick:g,disabled:!t,className:"inline-flex items-center gap-1.5 px-4 py-1.5 text-xs font-semibold bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-40 disabled:cursor-not-allowed shadow-sm",children:[a.jsx(xR,{className:"h-3.5 w-3.5"}),""]})]})]}),a.jsxs("section",{className:"bg-white border border-gray-200 rounded-xl p-5",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(mJ,{className:"h-4.5 w-4.5 text-indigo-600"}),a.jsx("h3",{className:"text-sm font-bold text-gray-800",children:" "}),a.jsx("span",{className:"text-[10px] bg-gray-100 text-gray-500 px-2 py-0.5 rounded-full",children:" "})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-3",children:[a.jsx("div",{className:"text-[10px] text-indigo-500 font-medium mb-1",children:" "}),a.jsx("div",{className:"text-sm font-semibold text-indigo-800",children:"D-1  "}),a.jsx("div",{className:"text-[10px] text-indigo-400 mt-1",children:"       ."})]}),a.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-3",children:[a.jsx("div",{className:"text-[10px] text-indigo-500 font-medium mb-1",children:" "}),a.jsx("div",{className:"text-sm font-semibold text-indigo-800",children:"  "}),a.jsx("div",{className:"text-[10px] text-indigo-400 mt-1",children:"       ."})]}),a.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-3",children:[a.jsx("div",{className:"text-[10px] text-indigo-500 font-medium mb-1",children:" "}),a.jsx("div",{className:"text-sm font-semibold text-indigo-800",children:"  "}),a.jsx("div",{className:"text-[10px] text-indigo-400 mt-1",children:"     ."})]})]})]}),a.jsxs("section",{className:"bg-white border border-gray-200 rounded-xl p-5",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(tJ,{className:"h-4.5 w-4.5 text-orange-600"}),a.jsx("h3",{className:"text-sm font-bold text-gray-800",children:"SLA    "}),!t&&a.jsx(ju,{className:"h-3.5 w-3.5 text-gray-400"}),a.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-orange-50 text-orange-700 border border-orange-200 ml-auto",children:y})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-2",children:"SLA  (%)"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("input",{type:"range",min:70,max:99,value:s.matrixThresholds.slaCut,onChange:N=>o("slaCut",Number(N.target.value)),disabled:!t,className:"w-full accent-blue-600 disabled:opacity-40"}),a.jsx("input",{type:"number",min:70,max:99,value:s.matrixThresholds.slaCut,onChange:N=>o("slaCut",Number(N.target.value)||s.matrixThresholds.slaCut),disabled:!t,className:"w-16 px-2 py-1.5 border border-gray-300 rounded-lg text-sm disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-2",children:"  (%)"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("input",{type:"range",min:70,max:99,value:s.matrixThresholds.dataCut,onChange:N=>o("dataCut",Number(N.target.value)),disabled:!t,className:"w-full accent-emerald-600 disabled:opacity-40"}),a.jsx("input",{type:"number",min:70,max:99,value:s.matrixThresholds.dataCut,onChange:N=>o("dataCut",Number(N.target.value)||s.matrixThresholds.dataCut),disabled:!t,className:"w-16 px-2 py-1.5 border border-gray-300 rounded-lg text-sm disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]})]}),a.jsx("div",{className:"mt-3 text-[11px] text-gray-500",children:"         ."})]}),a.jsxs("section",{className:"bg-white border border-gray-200 rounded-xl p-5",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(HU,{className:"h-4.5 w-4.5 text-blue-600"}),a.jsx("h3",{className:"text-sm font-bold text-gray-800",children:"/ "}),!t&&a.jsx(ju,{className:"h-3.5 w-3.5 text-gray-400"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"rounded-lg border border-gray-100 p-3",children:[a.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-2",children:"   "}),a.jsx("input",{type:"number",min:1,max:5,value:s.headline.maxItems,onChange:N=>l("maxItems",yU(Number(N.target.value)||1,1,5)),disabled:!t,className:"w-20 px-3 py-1.5 border border-gray-300 rounded-lg text-sm disabled:bg-gray-100 disabled:cursor-not-allowed"}),a.jsx("div",{className:"text-[10px] text-gray-500 mt-1",children:"      "})]}),a.jsxs("div",{className:"rounded-lg border border-gray-100 p-3 space-y-2",children:[a.jsxs("label",{className:"inline-flex items-center gap-2 text-xs text-gray-700",children:[a.jsx("input",{type:"checkbox",checked:s.headline.includePartialBadge,onChange:N=>l("includePartialBadge",N.target.checked),disabled:!t,className:"accent-blue-600"}),"   "]}),a.jsx("div",{className:"text-[10px] text-gray-500",children:"        "})]}),[{key:"keepPreviousData",label:"  (keepPreviousData)",desc:"      "},{key:"prefetchEnabled",label:" ",desc:"     "},{key:"useScopeOverlay",label:"  ",desc:"      "}].map(N=>a.jsxs("button",{type:"button",onClick:()=>c(N.key),disabled:!t,className:`rounded-lg border px-3 py-2 text-left transition-colors disabled:opacity-40 disabled:cursor-not-allowed ${s.drilldown[N.key]?"border-blue-200 bg-blue-50":"border-gray-200 bg-gray-50"}`,children:[a.jsx("div",{className:"text-xs font-semibold text-gray-800",children:N.label}),a.jsx("div",{className:"text-[10px] text-gray-500 mt-0.5",children:N.desc})]},N.key))]})]}),a.jsxs("section",{className:"bg-white border border-gray-200 rounded-xl p-5",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(gh,{className:"h-4.5 w-4.5 text-amber-600"}),a.jsx("h3",{className:"text-sm font-bold text-gray-800",children:"/ "}),!t&&a.jsx(ju,{className:"h-3.5 w-3.5 text-gray-400"})]}),a.jsx("div",{className:"space-y-3",children:[{key:"batchDelayed",label:"  ",desc:"D-1        "},{key:"qualityRisk",label:"  ",desc:"       "},{key:"governanceGap",label:"  ",desc:"       "},{key:"policyImpactSpike",label:"   ",desc:"      "}].map(N=>a.jsxs("button",{type:"button",onClick:()=>u(N.key),disabled:!t,className:`w-full rounded-lg border px-3 py-2 text-left transition-colors disabled:opacity-40 disabled:cursor-not-allowed ${s.notifications[N.key]?"border-amber-200 bg-amber-50/70":"border-gray-200 bg-gray-50"}`,children:[a.jsx("div",{className:"text-xs font-semibold text-gray-800",children:N.label}),a.jsx("div",{className:"text-[10px] text-gray-500 mt-0.5",children:N.desc})]},N.key))}),a.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"rounded-lg border border-gray-100 p-3",children:[a.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"  "}),a.jsxs("select",{value:s.reports.defaultPeriod,onChange:N=>m(N.target.value),disabled:!t,className:"w-full px-3 py-1.5 border border-gray-300 rounded-lg text-sm disabled:bg-gray-100 disabled:cursor-not-allowed",children:[a.jsx("option",{value:"weekly",children:""}),a.jsx("option",{value:"monthly",children:""}),a.jsx("option",{value:"quarterly",children:""}),a.jsx("option",{value:"yearly_cum",children:"()"})]})]}),a.jsxs("div",{className:"rounded-lg border border-gray-100 p-3",children:[a.jsxs("label",{className:"inline-flex items-center gap-2 text-xs text-gray-700",children:[a.jsx("input",{type:"checkbox",checked:s.reports.includeFilterContext,onChange:p,disabled:!t,className:"accent-amber-600"}),"     "]}),a.jsx("div",{className:"text-[10px] text-gray-500 mt-1",children:"KPI///  CSV  "})]})]})]}),a.jsxs("section",{className:"bg-white border border-gray-200 rounded-xl p-5",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(oc,{className:"h-4.5 w-4.5 text-green-600"}),a.jsx("h3",{className:"text-sm font-bold text-gray-800",children:"   "})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[a.jsxs("div",{className:"rounded-lg border border-green-200 bg-green-50 p-3",children:[a.jsx("div",{className:"text-xs font-semibold text-green-800",children:" "}),a.jsx("div",{className:"text-[10px] text-green-700 mt-1",children:" /// "})]}),a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-3",children:[a.jsx("div",{className:"text-xs font-semibold text-gray-800",children:" "}),a.jsx("div",{className:"text-[10px] text-gray-600 mt-1",children:"   ( )"})]})]}),a.jsxs("div",{className:"mt-3 text-[10px] text-gray-400 flex items-center gap-1.5",children:[a.jsx(gd,{className:"h-3.5 w-3.5"})," : central.settings.v1   : ",v,"  : SLA ",ka.matrixThresholds.slaCut,"% /  ",ka.matrixThresholds.dataCut,"%"]})]})]})}const KDe={level:"nation",region:"KR",kpi:"SLA",period:"WEEK"};function zDe(e,t){return{...e,...t}}function qDe({userRole:e,userName:t,onLogout:n}){const[r,s]=h.useState("national-dashboard"),[i,o]=h.useState(KDe),l=h.useCallback((u,m)=>{o(p=>zDe(p,m)),s(u)},[]),c=()=>{switch(r){case"national-dashboard":return a.jsx(cU,{onNavigate:l});case"kpi-dictionary":return a.jsx(pIe,{onNavigate:l});case"model-apply":return a.jsx(ZIe,{});case"model-governance":return a.jsx(mDe,{context:i,onNavigate:l});case"quality-monitoring":return a.jsx(PDe,{context:i,onNavigate:l});case"compliance-audit":return a.jsx(UDe,{context:i,onNavigate:l});case"settings":return a.jsx(HDe,{userRole:e});default:return a.jsx(cU,{onNavigate:l})}};return a.jsx(x5e,{currentPage:r,userRole:e,userName:t,onPageChange:s,onLogout:n,children:c()})}var VDe=(e,t,n,r,s,i,o,l)=>{let c=document.documentElement,u=["light","dark"];function m(x){(Array.isArray(e)?e:[e]).forEach(y=>{let v=y==="class",N=v&&i?s.map(S=>i[S]||S):s;v?(c.classList.remove(...N),c.classList.add(i&&i[x]?i[x]:x)):c.setAttribute(y,x)}),p(x)}function p(x){l&&u.includes(x)&&(c.style.colorScheme=x)}function g(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)m(r);else try{let x=localStorage.getItem(t)||n,y=o&&x==="system"?g():x;m(y)}catch{}},WDe=h.createContext(void 0),YDe={setTheme:e=>{},themes:[]},QDe=()=>{var e;return(e=h.useContext(WDe))!=null?e:YDe};h.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,themes:l,nonce:c,scriptProps:u})=>{let m=JSON.stringify([n,t,i,e,l,o,r,s]).slice(1,-1);return h.createElement("script",{...u,suppressHydrationWarning:!0,nonce:typeof window>"u"?c:"",dangerouslySetInnerHTML:{__html:`(${VDe.toString()})(${m})`}})});const _y=({...e})=>{const{theme:t="system"}=QDe();return a.jsx(pte,{theme:t,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...e})};function dY(e){if(!e.trim())return"/neuro-shield/";let t=e.trim();return t.startsWith("/")||(t=`/${t}`),t.endsWith("/")||(t=`${t}/`),t}function vU(e){if(e==="/p/sms"||e==="/p/sms/")return!0;const t=dY("/neuro-shield/");if(!e.startsWith(t))return!1;const n=e.slice(t.length-1);return n==="/p/sms"||n==="/p/sms/"}function NU(e){const t=new Set(["/citizen","/citizen/","/p/citizen","/p/citizen/","/citizen-portal","/citizen-portal/"]);if(t.has(e))return!0;const n=dY("/neuro-shield/");if(!e.startsWith(n))return!1;const r=e.slice(n.length-1);return t.has(r)}function XDe(){const[e,t]=h.useState(()=>window.location.hash==="#citizen");return h.useEffect(()=>{const n=()=>t(window.location.hash==="#citizen");return window.addEventListener("hashchange",n),()=>window.removeEventListener("hashchange",n)},[]),e}function JDe(){const[e,t]=h.useState(()=>NU(window.location.pathname));return h.useEffect(()=>{const n=()=>t(NU(window.location.pathname));return window.addEventListener("popstate",n),window.addEventListener("hashchange",n),()=>{window.removeEventListener("popstate",n),window.removeEventListener("hashchange",n)}},[]),e}function ZDe(){const[e,t]=h.useState(()=>vU(window.location.pathname));return h.useEffect(()=>{const n=()=>t(vU(window.location.pathname));return window.addEventListener("popstate",n),window.addEventListener("hashchange",n),()=>{window.removeEventListener("popstate",n),window.removeEventListener("hashchange",n)}},[]),e}function ePe(){const[e,t]=h.useState(null),n=XDe(),r=JDe(),s=n||r,i=ZDe(),o=c=>{t(c),console.log("[AUDIT] User Logged In:",{email:c.email,role:c.role,timestamp:new Date().toISOString()})},l=()=>{console.log("[AUDIT] User Logged Out:",{email:e?.email,timestamp:new Date().toISOString()}),t(null),window.location.hash==="#citizen"&&history.replaceState(null,"",window.location.pathname)};return i?a.jsxs(a.Fragment,{children:[a.jsx(_y,{}),a.jsx(Zne,{})]}):s?a.jsxs(a.Fragment,{children:[a.jsx(_y,{}),a.jsx(OC,{})]}):e?a.jsxs(a.Fragment,{children:[a.jsx(_y,{}),e.role==="citizen"&&a.jsx(OC,{}),e.role==="local_center"&&a.jsx(_Re,{userRole:"counselor",userName:e.name,centerName:e.organization||"",onLogout:l}),e.role==="regional_center"&&a.jsx(e5e,{userRole:"counselor",userName:e.name,centerName:e.organization||"",onLogout:l}),e.role==="central_admin"&&a.jsx(qDe,{userRole:"central_admin",userName:e.name,onLogout:l})]}):a.jsxs(a.Fragment,{children:[a.jsx(_y,{}),a.jsx(xte,{onLogin:o})]})}const SU="neuro_shield_api_base",dC=e=>{if(!e)return null;const t=e.trim();return t?t.endsWith("/")?t.slice(0,-1):t:null},tPe=()=>{const e=dC(new URLSearchParams(window.location.search).get("apiBase"));if(e){try{window.localStorage.setItem(SU,e)}catch{}return e}try{const t=dC(window.localStorage.getItem(SU));if(t)return t}catch{}return dC(void 0)},uC=(e,t)=>{try{const n=new URL(e,window.location.origin);if(n.pathname.startsWith("/api")&&n.origin===window.location.origin)return`${t}${n.pathname}${n.search}${n.hash}`}catch{if(e.startsWith("/api"))return`${t}${e}`}return e},nPe=e=>{if(!e)return;const t=window.fetch.bind(window),n=(r,s)=>{if(typeof r=="string")return t(uC(r,e),s);if(r instanceof URL)return t(uC(r.toString(),e),s);const i=uC(r.url,e);return i===r.url?t(r,s):t(new Request(i,r),s)};window.fetch=n};nPe(tPe());const rPe=new gQ({defaultOptions:{queries:{staleTime:6e4,gcTime:30*6e4,refetchOnWindowFocus:!1}}});DQ.createRoot(document.getElementById("root")).render(a.jsx(xQ,{client:rPe,children:a.jsx(ePe,{})}));
