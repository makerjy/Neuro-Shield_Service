function yV(e,t){for(var r=0;r<t.length;r++){const a=t[r];if(typeof a!="string"&&!Array.isArray(a)){for(const s in a)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(a,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>a[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var kx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var l2={exports:{}},yh={},c2={exports:{}},xr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pR;function vV(){if(pR)return xr;pR=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;function h(q){return q===null||typeof q!="object"?null:(q=m&&q[m]||q["@@iterator"],typeof q=="function"?q:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,N={};function v(q,L,H){this.props=q,this.context=L,this.refs=N,this.updater=H||x}v.prototype.isReactComponent={},v.prototype.setState=function(q,L){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,L,"setState")},v.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function j(){}j.prototype=v.prototype;function E(q,L,H){this.props=q,this.context=L,this.refs=N,this.updater=H||x}var C=E.prototype=new j;C.constructor=E,y(C,v.prototype),C.isPureReactComponent=!0;var A=Array.isArray,S=Object.prototype.hasOwnProperty,_={current:null},O={key:!0,ref:!0,__self:!0,__source:!0};function D(q,L,H){var ae,oe={},ve=null,ce=null;if(L!=null)for(ae in L.ref!==void 0&&(ce=L.ref),L.key!==void 0&&(ve=""+L.key),L)S.call(L,ae)&&!O.hasOwnProperty(ae)&&(oe[ae]=L[ae]);var Ee=arguments.length-2;if(Ee===1)oe.children=H;else if(1<Ee){for(var xe=Array(Ee),Te=0;Te<Ee;Te++)xe[Te]=arguments[Te+2];oe.children=xe}if(q&&q.defaultProps)for(ae in Ee=q.defaultProps,Ee)oe[ae]===void 0&&(oe[ae]=Ee[ae]);return{$$typeof:e,type:q,key:ve,ref:ce,props:oe,_owner:_.current}}function k(q,L){return{$$typeof:e,type:q.type,key:L,ref:q.ref,props:q.props,_owner:q._owner}}function M(q){return typeof q=="object"&&q!==null&&q.$$typeof===e}function F(q){var L={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(H){return L[H]})}var $=/\/+/g;function B(q,L){return typeof q=="object"&&q!==null&&q.key!=null?F(""+q.key):L.toString(36)}function P(q,L,H,ae,oe){var ve=typeof q;(ve==="undefined"||ve==="boolean")&&(q=null);var ce=!1;if(q===null)ce=!0;else switch(ve){case"string":case"number":ce=!0;break;case"object":switch(q.$$typeof){case e:case t:ce=!0}}if(ce)return ce=q,oe=oe(ce),q=ae===""?"."+B(ce,0):ae,A(oe)?(H="",q!=null&&(H=q.replace($,"$&/")+"/"),P(oe,L,H,"",function(Te){return Te})):oe!=null&&(M(oe)&&(oe=k(oe,H+(!oe.key||ce&&ce.key===oe.key?"":(""+oe.key).replace($,"$&/")+"/")+q)),L.push(oe)),1;if(ce=0,ae=ae===""?".":ae+":",A(q))for(var Ee=0;Ee<q.length;Ee++){ve=q[Ee];var xe=ae+B(ve,Ee);ce+=P(ve,L,H,xe,oe)}else if(xe=h(q),typeof xe=="function")for(q=xe.call(q),Ee=0;!(ve=q.next()).done;)ve=ve.value,xe=ae+B(ve,Ee++),ce+=P(ve,L,H,xe,oe);else if(ve==="object")throw L=String(q),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.");return ce}function W(q,L,H){if(q==null)return q;var ae=[],oe=0;return P(q,ae,"","",function(ve){return L.call(H,ve,oe++)}),ae}function K(q){if(q._status===-1){var L=q._result;L=L(),L.then(function(H){(q._status===0||q._status===-1)&&(q._status=1,q._result=H)},function(H){(q._status===0||q._status===-1)&&(q._status=2,q._result=H)}),q._status===-1&&(q._status=0,q._result=L)}if(q._status===1)return q._result.default;throw q._result}var G={current:null},U={transition:null},te={ReactCurrentDispatcher:G,ReactCurrentBatchConfig:U,ReactCurrentOwner:_};function re(){throw Error("act(...) is not supported in production builds of React.")}return xr.Children={map:W,forEach:function(q,L,H){W(q,function(){L.apply(this,arguments)},H)},count:function(q){var L=0;return W(q,function(){L++}),L},toArray:function(q){return W(q,function(L){return L})||[]},only:function(q){if(!M(q))throw Error("React.Children.only expected to receive a single React element child.");return q}},xr.Component=v,xr.Fragment=r,xr.Profiler=s,xr.PureComponent=E,xr.StrictMode=a,xr.Suspense=d,xr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=te,xr.act=re,xr.cloneElement=function(q,L,H){if(q==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+q+".");var ae=y({},q.props),oe=q.key,ve=q.ref,ce=q._owner;if(L!=null){if(L.ref!==void 0&&(ve=L.ref,ce=_.current),L.key!==void 0&&(oe=""+L.key),q.type&&q.type.defaultProps)var Ee=q.type.defaultProps;for(xe in L)S.call(L,xe)&&!O.hasOwnProperty(xe)&&(ae[xe]=L[xe]===void 0&&Ee!==void 0?Ee[xe]:L[xe])}var xe=arguments.length-2;if(xe===1)ae.children=H;else if(1<xe){Ee=Array(xe);for(var Te=0;Te<xe;Te++)Ee[Te]=arguments[Te+2];ae.children=Ee}return{$$typeof:e,type:q.type,key:oe,ref:ve,props:ae,_owner:ce}},xr.createContext=function(q){return q={$$typeof:o,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},q.Provider={$$typeof:i,_context:q},q.Consumer=q},xr.createElement=D,xr.createFactory=function(q){var L=D.bind(null,q);return L.type=q,L},xr.createRef=function(){return{current:null}},xr.forwardRef=function(q){return{$$typeof:l,render:q}},xr.isValidElement=M,xr.lazy=function(q){return{$$typeof:p,_payload:{_status:-1,_result:q},_init:K}},xr.memo=function(q,L){return{$$typeof:u,type:q,compare:L===void 0?null:L}},xr.startTransition=function(q){var L=U.transition;U.transition={};try{q()}finally{U.transition=L}},xr.unstable_act=re,xr.useCallback=function(q,L){return G.current.useCallback(q,L)},xr.useContext=function(q){return G.current.useContext(q)},xr.useDebugValue=function(){},xr.useDeferredValue=function(q){return G.current.useDeferredValue(q)},xr.useEffect=function(q,L){return G.current.useEffect(q,L)},xr.useId=function(){return G.current.useId()},xr.useImperativeHandle=function(q,L,H){return G.current.useImperativeHandle(q,L,H)},xr.useInsertionEffect=function(q,L){return G.current.useInsertionEffect(q,L)},xr.useLayoutEffect=function(q,L){return G.current.useLayoutEffect(q,L)},xr.useMemo=function(q,L){return G.current.useMemo(q,L)},xr.useReducer=function(q,L,H){return G.current.useReducer(q,L,H)},xr.useRef=function(q){return G.current.useRef(q)},xr.useState=function(q){return G.current.useState(q)},xr.useSyncExternalStore=function(q,L,H){return G.current.useSyncExternalStore(q,L,H)},xr.useTransition=function(){return G.current.useTransition()},xr.version="18.3.1",xr}var hR;function $v(){return hR||(hR=1,c2.exports=vV()),c2.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gR;function NV(){if(gR)return yh;gR=1;var e=$v(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(l,d,u){var p,m={},h=null,x=null;u!==void 0&&(h=""+u),d.key!==void 0&&(h=""+d.key),d.ref!==void 0&&(x=d.ref);for(p in d)a.call(d,p)&&!i.hasOwnProperty(p)&&(m[p]=d[p]);if(l&&l.defaultProps)for(p in d=l.defaultProps,d)m[p]===void 0&&(m[p]=d[p]);return{$$typeof:t,type:l,key:h,ref:x,props:m,_owner:s.current}}return yh.Fragment=r,yh.jsx=o,yh.jsxs=o,yh}var xR;function SV(){return xR||(xR=1,l2.exports=NV()),l2.exports}var n=SV(),Sp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},jV={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},wV=class{#e=jV;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},Mu=new wV;function EV(e){setTimeout(e,0)}var Wu=typeof window>"u"||"Deno"in globalThis;function Ts(){}function AV(e,t){return typeof e=="function"?e(t):e}function yC(e){return typeof e=="number"&&e>=0&&e!==1/0}function c8(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Id(e,t){return typeof e=="function"?e(t):e}function Yi(e,t){return typeof e=="function"?e(t):e}function bR(e,t){const{type:r="all",exact:a,fetchStatus:s,predicate:i,queryKey:o,stale:l}=e;if(o){if(a){if(t.queryHash!==cO(o,t.options))return!1}else if(!S0(t.queryKey,o))return!1}if(r!=="all"){const d=t.isActive();if(r==="active"&&!d||r==="inactive"&&d)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||i&&!i(t))}function yR(e,t){const{exact:r,status:a,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(Vu(t.options.mutationKey)!==Vu(i))return!1}else if(!S0(t.options.mutationKey,i))return!1}return!(a&&t.state.status!==a||s&&!s(t))}function cO(e,t){return(t?.queryKeyHashFn||Vu)(e)}function Vu(e){return JSON.stringify(e,(t,r)=>vC(r)?Object.keys(r).sort().reduce((a,s)=>(a[s]=r[s],a),{}):r)}function S0(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>S0(e[r],t[r])):!1}var CV=Object.prototype.hasOwnProperty;function d8(e,t,r=0){if(e===t)return e;if(r>500)return t;const a=vR(e)&&vR(t);if(!a&&!(vC(e)&&vC(t)))return t;const i=(a?e:Object.keys(e)).length,o=a?t:Object.keys(t),l=o.length,d=a?new Array(l):{};let u=0;for(let p=0;p<l;p++){const m=a?p:o[p],h=e[m],x=t[m];if(h===x){d[m]=h,(a?p<i:CV.call(e,m))&&u++;continue}if(h===null||x===null||typeof h!="object"||typeof x!="object"){d[m]=x;continue}const y=d8(h,x,r+1);d[m]=y,y===h&&u++}return i===l&&u===i?e:d}function Yb(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function vR(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function vC(e){if(!NR(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!NR(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function NR(e){return Object.prototype.toString.call(e)==="[object Object]"}function _V(e){return new Promise(t=>{Mu.setTimeout(t,e)})}function NC(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?d8(e,t):t}function d0(e){return e}function TV(e,t,r=0){const a=[...e,t];return r&&a.length>r?a.slice(1):a}function OV(e,t,r=0){const a=[t,...e];return r&&a.length>r?a.slice(0,-1):a}var dO=Symbol();function u8(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===dO?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function uO(e,t){return typeof e=="function"?e(...t):!!e}function kV(e,t,r){let a=!1,s;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(s??=t(),a||(a=!0,s.aborted?r():s.addEventListener("abort",r,{once:!0})),s)}),e}var RV=class extends Sp{#e;#t;#r;constructor(){super(),this.#r=e=>{if(!Wu&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},fO=new RV;function SC(){let e,t;const r=new Promise((s,i)=>{e=s,t=i});r.status="pending",r.catch(()=>{});function a(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{a({status:"fulfilled",value:s}),e(s)},r.reject=s=>{a({status:"rejected",reason:s}),t(s)},r}var PV=EV;function DV(){let e=[],t=0,r=l=>{l()},a=l=>{l()},s=PV;const i=l=>{t?e.push(l):s(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&s(()=>{a(()=>{l.forEach(d=>{r(d)})})})};return{batch:l=>{let d;t++;try{d=l()}finally{t--,t||o()}return d},batchCalls:l=>(...d)=>{i(()=>{l(...d)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{a=l},setScheduler:l=>{s=l}}}var ba=DV(),IV=class extends Sp{#e=!0;#t;#r;constructor(){super(),this.#r=e=>{if(!Wu&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(r=>{r(e)}))}isOnline(){return this.#e}},Xb=new IV;function MV(e){return Math.min(1e3*2**e,3e4)}function f8(e){return(e??"online")==="online"?Xb.isOnline():!0}var jC=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function m8(e){let t=!1,r=0,a;const s=SC(),i=()=>s.status!=="pending",o=N=>{if(!i()){const v=new jC(N);h(v),e.onCancel?.(v)}},l=()=>{t=!0},d=()=>{t=!1},u=()=>fO.isFocused()&&(e.networkMode==="always"||Xb.isOnline())&&e.canRun(),p=()=>f8(e.networkMode)&&e.canRun(),m=N=>{i()||(a?.(),s.resolve(N))},h=N=>{i()||(a?.(),s.reject(N))},x=()=>new Promise(N=>{a=v=>{(i()||u())&&N(v)},e.onPause?.()}).then(()=>{a=void 0,i()||e.onContinue?.()}),y=()=>{if(i())return;let N;const v=r===0?e.initialPromise:void 0;try{N=v??e.fn()}catch(j){N=Promise.reject(j)}Promise.resolve(N).then(m).catch(j=>{if(i())return;const E=e.retry??(Wu?0:3),C=e.retryDelay??MV,A=typeof C=="function"?C(r,j):C,S=E===!0||typeof E=="number"&&r<E||typeof E=="function"&&E(r,j);if(t||!S){h(j);return}r++,e.onFail?.(r,j),_V(A).then(()=>u()?void 0:x()).then(()=>{t?h(j):y()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(a?.(),s),cancelRetry:l,continueRetry:d,canStart:p,start:()=>(p()?y():x().then(y),s)}}var p8=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),yC(this.gcTime)&&(this.#e=Mu.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Wu?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Mu.clearTimeout(this.#e),this.#e=void 0)}},LV=class extends p8{#e;#t;#r;#a;#n;#i;#o;constructor(e){super(),this.#o=!1,this.#i=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#a=e.client,this.#r=this.#a.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=jR(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(e){if(this.options={...this.#i,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=jR(this.options);t.data!==void 0&&(this.setState(SR(t.data,t.dataUpdatedAt)),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,t){const r=NC(this.state.data,e,this.options);return this.#s({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#s({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#n?.promise;return this.#n?.cancel(e),t?t.then(Ts).catch(Ts):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>Yi(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===dO||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Id(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!c8(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#n&&(this.#o?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#n?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(e&&this.setOptions(e),!this.options.queryFn){const l=this.observers.find(d=>d.options.queryFn);l&&this.setOptions(l.options)}const r=new AbortController,a=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(this.#o=!0,r.signal)})},s=()=>{const l=u8(this.options,t),u=(()=>{const p={client:this.#a,queryKey:this.queryKey,meta:this.meta};return a(p),p})();return this.#o=!1,this.options.persister?this.options.persister(l,u,this):l(u)},o=(()=>{const l={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#a,state:this.state,fetchFn:s};return a(l),l})();this.options.behavior?.onFetch(o,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#s({type:"fetch",meta:o.fetchOptions?.meta}),this.#n=m8({initialPromise:t?.initialPromise,fn:o.fetchFn,onCancel:l=>{l instanceof jC&&l.revert&&this.setState({...this.#t,fetchStatus:"idle"}),r.abort()},onFail:(l,d)=>{this.#s({type:"failed",failureCount:l,error:d})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0});try{const l=await this.#n.start();if(l===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(l),this.#r.config.onSuccess?.(l,this),this.#r.config.onSettled?.(l,this.state.error,this),l}catch(l){if(l instanceof jC){if(l.silent)return this.#n.promise;if(l.revert){if(this.state.data===void 0)throw l;return this.state.data}}throw this.#s({type:"error",error:l}),this.#r.config.onError?.(l,this),this.#r.config.onSettled?.(this.state.data,l,this),l}finally{this.scheduleGc()}}#s(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...h8(r.data,this.options),fetchMeta:e.meta??null};case"success":const a={...r,...SR(e.data,e.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?a:void 0,a;case"error":const s=e.error;return{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),ba.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function h8(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:f8(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function SR(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function jR(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,a=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var $V=class extends Sp{constructor(e,t){super(),this.options=t,this.#e=e,this.#s=null,this.#o=SC(),this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#r=void 0;#a=void 0;#n;#i;#o;#s;#h;#f;#m;#c;#d;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),wR(this.#t,this.options)?this.#u():this.updateResult(),this.#y())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return wC(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return wC(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#v(),this.#N(),this.#t.removeObserver(this)}setOptions(e){const t=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Yi(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#S(),this.#t.setOptions(this.options),t._defaulted&&!Yb(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const a=this.hasListeners();a&&ER(this.#t,r,this.options,t)&&this.#u(),this.updateResult(),a&&(this.#t!==r||Yi(this.options.enabled,this.#t)!==Yi(t.enabled,this.#t)||Id(this.options.staleTime,this.#t)!==Id(t.staleTime,this.#t))&&this.#g();const s=this.#x();a&&(this.#t!==r||Yi(this.options.enabled,this.#t)!==Yi(t.enabled,this.#t)||s!==this.#l)&&this.#b(s)}getOptimisticResult(e){const t=this.#e.getQueryCache().build(this.#e,e),r=this.createResult(t,e);return BV(this,r)&&(this.#a=r,this.#i=this.options,this.#n=this.#t.state),r}getCurrentResult(){return this.#a}trackResult(e,t){return new Proxy(e,{get:(r,a)=>(this.trackProp(a),t?.(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,a))})}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#e.defaultQueryOptions(e),r=this.#e.getQueryCache().build(this.#e,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#u({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#a))}#u(e){this.#S();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(Ts)),t}#g(){this.#v();const e=Id(this.options.staleTime,this.#t);if(Wu||this.#a.isStale||!yC(e))return;const r=c8(this.#a.dataUpdatedAt,e)+1;this.#c=Mu.setTimeout(()=>{this.#a.isStale||this.updateResult()},r)}#x(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#b(e){this.#N(),this.#l=e,!(Wu||Yi(this.options.enabled,this.#t)===!1||!yC(this.#l)||this.#l===0)&&(this.#d=Mu.setInterval(()=>{(this.options.refetchIntervalInBackground||fO.isFocused())&&this.#u()},this.#l))}#y(){this.#g(),this.#b(this.#x())}#v(){this.#c&&(Mu.clearTimeout(this.#c),this.#c=void 0)}#N(){this.#d&&(Mu.clearInterval(this.#d),this.#d=void 0)}createResult(e,t){const r=this.#t,a=this.options,s=this.#a,i=this.#n,o=this.#i,d=e!==r?e.state:this.#r,{state:u}=e;let p={...u},m=!1,h;if(t._optimisticResults){const D=this.hasListeners(),k=!D&&wR(e,t),M=D&&ER(e,r,t,a);(k||M)&&(p={...p,...h8(u.data,e.options)}),t._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:x,errorUpdatedAt:y,status:N}=p;h=p.data;let v=!1;if(t.placeholderData!==void 0&&h===void 0&&N==="pending"){let D;s?.isPlaceholderData&&t.placeholderData===o?.placeholderData?(D=s.data,v=!0):D=typeof t.placeholderData=="function"?t.placeholderData(this.#m?.state.data,this.#m):t.placeholderData,D!==void 0&&(N="success",h=NC(s?.data,D,t),m=!0)}if(t.select&&h!==void 0&&!v)if(s&&h===i?.data&&t.select===this.#h)h=this.#f;else try{this.#h=t.select,h=t.select(h),h=NC(s?.data,h,t),this.#f=h,this.#s=null}catch(D){this.#s=D}this.#s&&(x=this.#s,h=this.#f,y=Date.now(),N="error");const j=p.fetchStatus==="fetching",E=N==="pending",C=N==="error",A=E&&j,S=h!==void 0,O={status:N,fetchStatus:p.fetchStatus,isPending:E,isSuccess:N==="success",isError:C,isInitialLoading:A,isLoading:A,data:h,dataUpdatedAt:p.dataUpdatedAt,error:x,errorUpdatedAt:y,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>d.dataUpdateCount||p.errorUpdateCount>d.errorUpdateCount,isFetching:j,isRefetching:j&&!E,isLoadingError:C&&!S,isPaused:p.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:C&&S,isStale:mO(e,t),refetch:this.refetch,promise:this.#o,isEnabled:Yi(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const D=O.data!==void 0,k=O.status==="error"&&!D,M=B=>{k?B.reject(O.error):D&&B.resolve(O.data)},F=()=>{const B=this.#o=O.promise=SC();M(B)},$=this.#o;switch($.status){case"pending":e.queryHash===r.queryHash&&M($);break;case"fulfilled":(k||O.data!==$.value)&&F();break;case"rejected":(!k||O.error!==$.reason)&&F();break}}return O}updateResult(){const e=this.#a,t=this.createResult(this.#t,this.options);if(this.#n=this.#t.state,this.#i=this.options,this.#n.data!==void 0&&(this.#m=this.#t),Yb(t,e))return;this.#a=t;const r=()=>{if(!e)return!0;const{notifyOnChangeProps:a}=this.options,s=typeof a=="function"?a():a;if(s==="all"||!s&&!this.#p.size)return!0;const i=new Set(s??this.#p);return this.options.throwOnError&&i.add("error"),Object.keys(this.#a).some(o=>{const l=o;return this.#a[l]!==e[l]&&i.has(l)})};this.#j({listeners:r()})}#S(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const t=this.#t;this.#t=e,this.#r=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#y()}#j(e){ba.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#a)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function FV(e,t){return Yi(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function wR(e,t){return FV(e,t)||e.state.data!==void 0&&wC(e,t,t.refetchOnMount)}function wC(e,t,r){if(Yi(t.enabled,e)!==!1&&Id(t.staleTime,e)!=="static"){const a=typeof r=="function"?r(e):r;return a==="always"||a!==!1&&mO(e,t)}return!1}function ER(e,t,r,a){return(e!==t||Yi(a.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&mO(e,r)}function mO(e,t){return Yi(t.enabled,e)!==!1&&e.isStaleByTime(Id(t.staleTime,e))}function BV(e,t){return!Yb(e.getCurrentResult(),t)}function AR(e){return{onFetch:(t,r)=>{const a=t.options,s=t.fetchOptions?.meta?.fetchMore?.direction,i=t.state.data?.pages||[],o=t.state.data?.pageParams||[];let l={pages:[],pageParams:[]},d=0;const u=async()=>{let p=!1;const m=y=>{kV(y,()=>t.signal,()=>p=!0)},h=u8(t.options,t.fetchOptions),x=async(y,N,v)=>{if(p)return Promise.reject();if(N==null&&y.pages.length)return Promise.resolve(y);const E=(()=>{const _={client:t.client,queryKey:t.queryKey,pageParam:N,direction:v?"backward":"forward",meta:t.options.meta};return m(_),_})(),C=await h(E),{maxPages:A}=t.options,S=v?OV:TV;return{pages:S(y.pages,C,A),pageParams:S(y.pageParams,N,A)}};if(s&&i.length){const y=s==="backward",N=y?UV:CR,v={pages:i,pageParams:o},j=N(a,v);l=await x(v,j,y)}else{const y=e??i.length;do{const N=d===0?o[0]??a.initialPageParam:CR(a,l);if(d>0&&N==null)break;l=await x(l,N),d++}while(d<y)}return l};t.options.persister?t.fetchFn=()=>t.options.persister?.(u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=u}}}function CR(e,{pages:t,pageParams:r}){const a=t.length-1;return t.length>0?e.getNextPageParam(t[a],t,r[a],r):void 0}function UV(e,{pages:t,pageParams:r}){return t.length>0?e.getPreviousPageParam?.(t[0],t,r[0],r):void 0}var HV=class extends p8{#e;#t;#r;#a;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#r=e.mutationCache,this.#t=[],this.state=e.state||g8(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#r.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#r.remove(this))}continue(){return this.#a?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#n({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#a=m8({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(i,o)=>{this.#n({type:"failed",failureCount:i,error:o})},onPause:()=>{this.#n({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#r.canRun(this)});const a=this.state.status==="pending",s=!this.#a.canStart();try{if(a)t();else{this.#n({type:"pending",variables:e,isPaused:s}),this.#r.config.onMutate&&await this.#r.config.onMutate(e,this,r);const o=await this.options.onMutate?.(e,r);o!==this.state.context&&this.#n({type:"pending",context:o,variables:e,isPaused:s})}const i=await this.#a.start();return await this.#r.config.onSuccess?.(i,e,this.state.context,this,r),await this.options.onSuccess?.(i,e,this.state.context,r),await this.#r.config.onSettled?.(i,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(i,null,e,this.state.context,r),this.#n({type:"success",data:i}),i}catch(i){try{await this.#r.config.onError?.(i,e,this.state.context,this,r)}catch(o){Promise.reject(o)}try{await this.options.onError?.(i,e,this.state.context,r)}catch(o){Promise.reject(o)}try{await this.#r.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this,r)}catch(o){Promise.reject(o)}try{await this.options.onSettled?.(void 0,i,e,this.state.context,r)}catch(o){Promise.reject(o)}throw this.#n({type:"error",error:i}),i}finally{this.#r.runNext(this)}}#n(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),ba.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(e)}),this.#r.notify({mutation:this,type:"updated",action:e})})}};function g8(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var GV=class extends Sp{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(e,t,r){const a=new HV({client:e,mutationCache:this,mutationId:++this.#r,options:e.defaultMutationOptions(t),state:r});return this.add(a),a}add(e){this.#e.add(e);const t=Rx(e);if(typeof t=="string"){const r=this.#t.get(t);r?r.push(e):this.#t.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=Rx(e);if(typeof t=="string"){const r=this.#t.get(t);if(r)if(r.length>1){const a=r.indexOf(e);a!==-1&&r.splice(a,1)}else r[0]===e&&this.#t.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Rx(e);if(typeof t=="string"){const a=this.#t.get(t)?.find(s=>s.state.status==="pending");return!a||a===e}else return!0}runNext(e){const t=Rx(e);return typeof t=="string"?this.#t.get(t)?.find(a=>a!==e&&a.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){ba.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(r=>yR(t,r))}findAll(e={}){return this.getAll().filter(t=>yR(e,t))}notify(e){ba.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return ba.batch(()=>Promise.all(e.map(t=>t.continue().catch(Ts))))}};function Rx(e){return e.options.scope?.id}var KV=class extends Sp{#e;#t=void 0;#r;#a;constructor(t,r){super(),this.#e=t,this.setOptions(r),this.bindMethods(),this.#n()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const r=this.options;this.options=this.#e.defaultMutationOptions(t),Yb(this.options,r)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),r?.mutationKey&&this.options.mutationKey&&Vu(r.mutationKey)!==Vu(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(t){this.#n(),this.#i(t)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#n(),this.#i()}mutate(t,r){return this.#a=r,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(t)}#n(){const t=this.#r?.state??g8();this.#t={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#i(t){ba.batch(()=>{if(this.#a&&this.hasListeners()){const r=this.#t.variables,a=this.#t.context,s={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(t?.type==="success"){try{this.#a.onSuccess?.(t.data,r,a,s)}catch(i){Promise.reject(i)}try{this.#a.onSettled?.(t.data,null,r,a,s)}catch(i){Promise.reject(i)}}else if(t?.type==="error"){try{this.#a.onError?.(t.error,r,a,s)}catch(i){Promise.reject(i)}try{this.#a.onSettled?.(void 0,t.error,r,a,s)}catch(i){Promise.reject(i)}}}this.listeners.forEach(r=>{r(this.#t)})})}},zV=class extends Sp{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,r){const a=t.queryKey,s=t.queryHash??cO(a,t);let i=this.get(s);return i||(i=new LV({client:e,queryKey:a,queryHash:s,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(a)}),this.add(i)),i}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ba.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>bR(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>bR(e,r)):t}notify(e){ba.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){ba.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ba.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},qV=class{#e;#t;#r;#a;#n;#i;#o;#s;constructor(e={}){this.#e=e.queryCache||new zV,this.#t=e.mutationCache||new GV,this.#r=e.defaultOptions||{},this.#a=new Map,this.#n=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#o=fO.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#s=Xb.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#o?.(),this.#o=void 0,this.#s?.(),this.#s=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=this.#e.build(this,t),a=r.state.data;return a===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Id(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(a))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:r})=>{const a=r.data;return[t,a]})}setQueryData(e,t,r){const a=this.defaultQueryOptions({queryKey:e}),i=this.#e.get(a.queryHash)?.state.data,o=AV(t,i);if(o!==void 0)return this.#e.build(this,a).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return ba.batch(()=>this.#e.findAll(e).map(({queryKey:a})=>[a,this.setQueryData(a,t,r)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;ba.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=this.#e;return ba.batch(()=>(r.findAll(e).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},a=ba.batch(()=>this.#e.findAll(e).map(s=>s.cancel(r)));return Promise.all(a).then(Ts).catch(Ts)}invalidateQueries(e,t={}){return ba.batch(()=>(this.#e.findAll(e).forEach(r=>{r.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},a=ba.batch(()=>this.#e.findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,r);return r.throwOnError||(i=i.catch(Ts)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(a).then(Ts)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=this.#e.build(this,t);return r.isStaleByTime(Id(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Ts).catch(Ts)}fetchInfiniteQuery(e){return e.behavior=AR(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Ts).catch(Ts)}ensureInfiniteQueryData(e){return e.behavior=AR(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Xb.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,t){this.#a.set(Vu(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#a.values()],r={};return t.forEach(a=>{S0(e,a.queryKey)&&Object.assign(r,a.defaultOptions)}),r}setMutationDefaults(e,t){this.#n.set(Vu(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#n.values()],r={};return t.forEach(a=>{S0(e,a.mutationKey)&&Object.assign(r,a.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=cO(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===dO&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},g=$v();const Y=Vr(g),pO=yV({__proto__:null,default:Y},[g]);var x8=g.createContext(void 0),hO=e=>{const t=g.useContext(x8);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},WV=({client:e,children:t})=>(g.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),n.jsx(x8.Provider,{value:e,children:t})),b8=g.createContext(!1),VV=()=>g.useContext(b8);b8.Provider;function YV(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var XV=g.createContext(YV()),QV=()=>g.useContext(XV),ZV=(e,t,r)=>{const a=r?.state.error&&typeof e.throwOnError=="function"?uO(e.throwOnError,[r.state.error,r]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||a)&&(t.isReset()||(e.retryOnMount=!1))},JV=e=>{g.useEffect(()=>{e.clearReset()},[e])},eY=({result:e,errorResetBoundary:t,throwOnError:r,query:a,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&a&&(s&&e.data===void 0||uO(r,[e.error,a])),tY=e=>{if(e.suspense){const r=s=>s==="static"?s:Math.max(s??1e3,1e3),a=e.staleTime;e.staleTime=typeof a=="function"?(...s)=>r(a(...s)):r(a),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},rY=(e,t)=>e.isLoading&&e.isFetching&&!t,nY=(e,t)=>e?.suspense&&t.isPending,_R=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function aY(e,t,r){const a=VV(),s=QV(),i=hO(),o=i.defaultQueryOptions(e);i.getDefaultOptions().queries?._experimental_beforeQuery?.(o);const l=i.getQueryCache().get(o.queryHash);o._optimisticResults=a?"isRestoring":"optimistic",tY(o),ZV(o,s,l),JV(s);const d=!i.getQueryCache().get(o.queryHash),[u]=g.useState(()=>new t(i,o)),p=u.getOptimisticResult(o),m=!a&&e.subscribed!==!1;if(g.useSyncExternalStore(g.useCallback(h=>{const x=m?u.subscribe(ba.batchCalls(h)):Ts;return u.updateResult(),x},[u,m]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),g.useEffect(()=>{u.setOptions(o)},[o,u]),nY(o,p))throw _R(o,u,s);if(eY({result:p,errorResetBoundary:s,throwOnError:o.throwOnError,query:l,suspense:o.suspense}))throw p.error;return i.getDefaultOptions().queries?._experimental_afterQuery?.(o,p),o.experimental_prefetchInRender&&!Wu&&rY(p,a)&&(d?_R(o,u,s):l?.promise)?.catch(Ts).finally(()=>{u.updateResult()}),o.notifyOnChangeProps?p:u.trackResult(p)}function xc(e,t){return aY(e,$V)}function sY(e,t){const r=hO(),[a]=g.useState(()=>new KV(r,e));g.useEffect(()=>{a.setOptions(e)},[a,e]);const s=g.useSyncExternalStore(g.useCallback(o=>a.subscribe(ba.batchCalls(o)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),i=g.useCallback((o,l)=>{a.mutate(o,l).catch(Ts)},[a]);if(s.error&&uO(a.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}var Px={},d2={exports:{}},Ys={},u2={exports:{}},f2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TR;function iY(){return TR||(TR=1,(function(e){function t(U,te){var re=U.length;U.push(te);e:for(;0<re;){var q=re-1>>>1,L=U[q];if(0<s(L,te))U[q]=te,U[re]=L,re=q;else break e}}function r(U){return U.length===0?null:U[0]}function a(U){if(U.length===0)return null;var te=U[0],re=U.pop();if(re!==te){U[0]=re;e:for(var q=0,L=U.length,H=L>>>1;q<H;){var ae=2*(q+1)-1,oe=U[ae],ve=ae+1,ce=U[ve];if(0>s(oe,re))ve<L&&0>s(ce,oe)?(U[q]=ce,U[ve]=re,q=ve):(U[q]=oe,U[ae]=re,q=ae);else if(ve<L&&0>s(ce,re))U[q]=ce,U[ve]=re,q=ve;else break e}}return te}function s(U,te){var re=U.sortIndex-te.sortIndex;return re!==0?re:U.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var d=[],u=[],p=1,m=null,h=3,x=!1,y=!1,N=!1,v=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(U){for(var te=r(u);te!==null;){if(te.callback===null)a(u);else if(te.startTime<=U)a(u),te.sortIndex=te.expirationTime,t(d,te);else break;te=r(u)}}function A(U){if(N=!1,C(U),!y)if(r(d)!==null)y=!0,K(S);else{var te=r(u);te!==null&&G(A,te.startTime-U)}}function S(U,te){y=!1,N&&(N=!1,j(D),D=-1),x=!0;var re=h;try{for(C(te),m=r(d);m!==null&&(!(m.expirationTime>te)||U&&!F());){var q=m.callback;if(typeof q=="function"){m.callback=null,h=m.priorityLevel;var L=q(m.expirationTime<=te);te=e.unstable_now(),typeof L=="function"?m.callback=L:m===r(d)&&a(d),C(te)}else a(d);m=r(d)}if(m!==null)var H=!0;else{var ae=r(u);ae!==null&&G(A,ae.startTime-te),H=!1}return H}finally{m=null,h=re,x=!1}}var _=!1,O=null,D=-1,k=5,M=-1;function F(){return!(e.unstable_now()-M<k)}function $(){if(O!==null){var U=e.unstable_now();M=U;var te=!0;try{te=O(!0,U)}finally{te?B():(_=!1,O=null)}}else _=!1}var B;if(typeof E=="function")B=function(){E($)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,W=P.port2;P.port1.onmessage=$,B=function(){W.postMessage(null)}}else B=function(){v($,0)};function K(U){O=U,_||(_=!0,B())}function G(U,te){D=v(function(){U(e.unstable_now())},te)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_continueExecution=function(){y||x||(y=!0,K(S))},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(U){switch(h){case 1:case 2:case 3:var te=3;break;default:te=h}var re=h;h=te;try{return U()}finally{h=re}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(U,te){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var re=h;h=U;try{return te()}finally{h=re}},e.unstable_scheduleCallback=function(U,te,re){var q=e.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?q+re:q):re=q,U){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=re+L,U={id:p++,callback:te,priorityLevel:U,startTime:re,expirationTime:L,sortIndex:-1},re>q?(U.sortIndex=re,t(u,U),r(d)===null&&U===r(u)&&(N?(j(D),D=-1):N=!0,G(A,re-q))):(U.sortIndex=L,t(d,U),y||x||(y=!0,K(S))),U},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(U){var te=h;return function(){var re=h;h=te;try{return U.apply(this,arguments)}finally{h=re}}}})(f2)),f2}var OR;function oY(){return OR||(OR=1,u2.exports=iY()),u2.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kR;function lY(){if(kR)return Ys;kR=1;var e=$v(),t=oY();function r(c){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+c,b=1;b<arguments.length;b++)f+="&args[]="+encodeURIComponent(arguments[b]);return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function i(c,f){o(c,f),o(c+"Capture",f)}function o(c,f){for(s[c]=f,c=0;c<f.length;c++)a.add(f[c])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function h(c){return d.call(m,c)?!0:d.call(p,c)?!1:u.test(c)?m[c]=!0:(p[c]=!0,!1)}function x(c,f,b,w){if(b!==null&&b.type===0)return!1;switch(typeof f){case"function":case"symbol":return!0;case"boolean":return w?!1:b!==null?!b.acceptsBooleans:(c=c.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-");default:return!1}}function y(c,f,b,w){if(f===null||typeof f>"u"||x(c,f,b,w))return!0;if(w)return!1;if(b!==null)switch(b.type){case 3:return!f;case 4:return f===!1;case 5:return isNaN(f);case 6:return isNaN(f)||1>f}return!1}function N(c,f,b,w,T,R,z){this.acceptsBooleans=f===2||f===3||f===4,this.attributeName=w,this.attributeNamespace=T,this.mustUseProperty=b,this.propertyName=c,this.type=f,this.sanitizeURL=R,this.removeEmptyString=z}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){v[c]=new N(c,0,!1,c,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var f=c[0];v[f]=new N(f,1,!1,c[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){v[c]=new N(c,2,!1,c.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){v[c]=new N(c,2,!1,c,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){v[c]=new N(c,3,!1,c.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(c){v[c]=new N(c,3,!0,c,null,!1,!1)}),["capture","download"].forEach(function(c){v[c]=new N(c,4,!1,c,null,!1,!1)}),["cols","rows","size","span"].forEach(function(c){v[c]=new N(c,6,!1,c,null,!1,!1)}),["rowSpan","start"].forEach(function(c){v[c]=new N(c,5,!1,c.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function E(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var f=c.replace(j,E);v[f]=new N(f,1,!1,c,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var f=c.replace(j,E);v[f]=new N(f,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var f=c.replace(j,E);v[f]=new N(f,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(c){v[c]=new N(c,1,!1,c.toLowerCase(),null,!1,!1)}),v.xlinkHref=new N("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(c){v[c]=new N(c,1,!1,c.toLowerCase(),null,!0,!0)});function C(c,f,b,w){var T=v.hasOwnProperty(f)?v[f]:null;(T!==null?T.type!==0:w||!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(y(f,b,T,w)&&(b=null),w||T===null?h(f)&&(b===null?c.removeAttribute(f):c.setAttribute(f,""+b)):T.mustUseProperty?c[T.propertyName]=b===null?T.type===3?!1:"":b:(f=T.attributeName,w=T.attributeNamespace,b===null?c.removeAttribute(f):(T=T.type,b=T===3||T===4&&b===!0?"":""+b,w?c.setAttributeNS(w,f,b):c.setAttribute(f,b))))}var A=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),_=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),F=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),G=Symbol.for("react.offscreen"),U=Symbol.iterator;function te(c){return c===null||typeof c!="object"?null:(c=U&&c[U]||c["@@iterator"],typeof c=="function"?c:null)}var re=Object.assign,q;function L(c){if(q===void 0)try{throw Error()}catch(b){var f=b.stack.trim().match(/\n( *(at )?)/);q=f&&f[1]||""}return`
`+q+c}var H=!1;function ae(c,f){if(!c||H)return"";H=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(Ce){var w=Ce}Reflect.construct(c,[],f)}else{try{f.call()}catch(Ce){w=Ce}c.call(f.prototype)}else{try{throw Error()}catch(Ce){w=Ce}c()}}catch(Ce){if(Ce&&w&&typeof Ce.stack=="string"){for(var T=Ce.stack.split(`
`),R=w.stack.split(`
`),z=T.length-1,ne=R.length-1;1<=z&&0<=ne&&T[z]!==R[ne];)ne--;for(;1<=z&&0<=ne;z--,ne--)if(T[z]!==R[ne]){if(z!==1||ne!==1)do if(z--,ne--,0>ne||T[z]!==R[ne]){var ue=`
`+T[z].replace(" at new "," at ");return c.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",c.displayName)),ue}while(1<=z&&0<=ne);break}}}finally{H=!1,Error.prepareStackTrace=b}return(c=c?c.displayName||c.name:"")?L(c):""}function oe(c){switch(c.tag){case 5:return L(c.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return c=ae(c.type,!1),c;case 11:return c=ae(c.type.render,!1),c;case 1:return c=ae(c.type,!0),c;default:return""}}function ve(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case O:return"Fragment";case _:return"Portal";case k:return"Profiler";case D:return"StrictMode";case B:return"Suspense";case P:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case F:return(c.displayName||"Context")+".Consumer";case M:return(c._context.displayName||"Context")+".Provider";case $:var f=c.render;return c=c.displayName,c||(c=f.displayName||f.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case W:return f=c.displayName||null,f!==null?f:ve(c.type)||"Memo";case K:f=c._payload,c=c._init;try{return ve(c(f))}catch{}}return null}function ce(c){var f=c.type;switch(c.tag){case 24:return"Cache";case 9:return(f.displayName||"Context")+".Consumer";case 10:return(f._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=f.render,c=c.displayName||c.name||"",f.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return f;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ve(f);case 8:return f===D?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f}return null}function Ee(c){switch(typeof c){case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function xe(c){var f=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function Te(c){var f=xe(c)?"checked":"value",b=Object.getOwnPropertyDescriptor(c.constructor.prototype,f),w=""+c[f];if(!c.hasOwnProperty(f)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var T=b.get,R=b.set;return Object.defineProperty(c,f,{configurable:!0,get:function(){return T.call(this)},set:function(z){w=""+z,R.call(this,z)}}),Object.defineProperty(c,f,{enumerable:b.enumerable}),{getValue:function(){return w},setValue:function(z){w=""+z},stopTracking:function(){c._valueTracker=null,delete c[f]}}}}function ye(c){c._valueTracker||(c._valueTracker=Te(c))}function se(c){if(!c)return!1;var f=c._valueTracker;if(!f)return!0;var b=f.getValue(),w="";return c&&(w=xe(c)?c.checked?"true":"false":c.value),c=w,c!==b?(f.setValue(c),!0):!1}function ct(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}function Q(c,f){var b=f.checked;return re({},f,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:b??c._wrapperState.initialChecked})}function he(c,f){var b=f.defaultValue==null?"":f.defaultValue,w=f.checked!=null?f.checked:f.defaultChecked;b=Ee(f.value!=null?f.value:b),c._wrapperState={initialChecked:w,initialValue:b,controlled:f.type==="checkbox"||f.type==="radio"?f.checked!=null:f.value!=null}}function $e(c,f){f=f.checked,f!=null&&C(c,"checked",f,!1)}function Z(c,f){$e(c,f);var b=Ee(f.value),w=f.type;if(b!=null)w==="number"?(b===0&&c.value===""||c.value!=b)&&(c.value=""+b):c.value!==""+b&&(c.value=""+b);else if(w==="submit"||w==="reset"){c.removeAttribute("value");return}f.hasOwnProperty("value")?ge(c,f.type,b):f.hasOwnProperty("defaultValue")&&ge(c,f.type,Ee(f.defaultValue)),f.checked==null&&f.defaultChecked!=null&&(c.defaultChecked=!!f.defaultChecked)}function je(c,f,b){if(f.hasOwnProperty("value")||f.hasOwnProperty("defaultValue")){var w=f.type;if(!(w!=="submit"&&w!=="reset"||f.value!==void 0&&f.value!==null))return;f=""+c._wrapperState.initialValue,b||f===c.value||(c.value=f),c.defaultValue=f}b=c.name,b!==""&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,b!==""&&(c.name=b)}function ge(c,f,b){(f!=="number"||ct(c.ownerDocument)!==c)&&(b==null?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+b&&(c.defaultValue=""+b))}var be=Array.isArray;function it(c,f,b,w){if(c=c.options,f){f={};for(var T=0;T<b.length;T++)f["$"+b[T]]=!0;for(b=0;b<c.length;b++)T=f.hasOwnProperty("$"+c[b].value),c[b].selected!==T&&(c[b].selected=T),T&&w&&(c[b].defaultSelected=!0)}else{for(b=""+Ee(b),f=null,T=0;T<c.length;T++){if(c[T].value===b){c[T].selected=!0,w&&(c[T].defaultSelected=!0);return}f!==null||c[T].disabled||(f=c[T])}f!==null&&(f.selected=!0)}}function Fe(c,f){if(f.dangerouslySetInnerHTML!=null)throw Error(r(91));return re({},f,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function Et(c,f){var b=f.value;if(b==null){if(b=f.children,f=f.defaultValue,b!=null){if(f!=null)throw Error(r(92));if(be(b)){if(1<b.length)throw Error(r(93));b=b[0]}f=b}f==null&&(f=""),b=f}c._wrapperState={initialValue:Ee(b)}}function Mt(c,f){var b=Ee(f.value),w=Ee(f.defaultValue);b!=null&&(b=""+b,b!==c.value&&(c.value=b),f.defaultValue==null&&c.defaultValue!==b&&(c.defaultValue=b)),w!=null&&(c.defaultValue=""+w)}function Be(c){var f=c.textContent;f===c._wrapperState.initialValue&&f!==""&&f!==null&&(c.value=f)}function tr(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function br(c,f){return c==null||c==="http://www.w3.org/1999/xhtml"?tr(f):c==="http://www.w3.org/2000/svg"&&f==="foreignObject"?"http://www.w3.org/1999/xhtml":c}var Er,yr=(function(c){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(f,b,w,T){MSApp.execUnsafeLocalFunction(function(){return c(f,b,w,T)})}:c})(function(c,f){if(c.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in c)c.innerHTML=f;else{for(Er=Er||document.createElement("div"),Er.innerHTML="<svg>"+f.valueOf().toString()+"</svg>",f=Er.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;f.firstChild;)c.appendChild(f.firstChild)}});function Rr(c,f){if(f){var b=c.firstChild;if(b&&b===c.lastChild&&b.nodeType===3){b.nodeValue=f;return}}c.textContent=f}var zr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pr=["Webkit","ms","Moz","O"];Object.keys(zr).forEach(function(c){pr.forEach(function(f){f=f+c.charAt(0).toUpperCase()+c.substring(1),zr[f]=zr[c]})});function hr(c,f,b){return f==null||typeof f=="boolean"||f===""?"":b||typeof f!="number"||f===0||zr.hasOwnProperty(c)&&zr[c]?(""+f).trim():f+"px"}function Tr(c,f){c=c.style;for(var b in f)if(f.hasOwnProperty(b)){var w=b.indexOf("--")===0,T=hr(b,f[b],w);b==="float"&&(b="cssFloat"),w?c.setProperty(b,T):c[b]=T}}var Mr=re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jn(c,f){if(f){if(Mr[c]&&(f.children!=null||f.dangerouslySetInnerHTML!=null))throw Error(r(137,c));if(f.dangerouslySetInnerHTML!=null){if(f.children!=null)throw Error(r(60));if(typeof f.dangerouslySetInnerHTML!="object"||!("__html"in f.dangerouslySetInnerHTML))throw Error(r(61))}if(f.style!=null&&typeof f.style!="object")throw Error(r(62))}}function rt(c,f){if(c.indexOf("-")===-1)return typeof f.is=="string";switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pe=null;function Kt(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var Pr=null,vr=null,Cn=null;function Ae(c){if(c=nd(c)){if(typeof Pr!="function")throw Error(r(280));var f=c.stateNode;f&&(f=Xn(f),Pr(c.stateNode,c.type,f))}}function Ge(c){vr?Cn?Cn.push(c):Cn=[c]:vr=c}function ut(){if(vr){var c=vr,f=Cn;if(Cn=vr=null,Ae(c),f)for(c=0;c<f.length;c++)Ae(f[c])}}function er(c,f){return c(f)}function mr(){}var Or=!1;function ft(c,f,b){if(Or)return c(f,b);Or=!0;try{return er(c,f,b)}finally{Or=!1,(vr!==null||Cn!==null)&&(mr(),ut())}}function Le(c,f){var b=c.stateNode;if(b===null)return null;var w=Xn(b);if(w===null)return null;b=w[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(c=c.type,w=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!w;break e;default:c=!1}if(c)return null;if(b&&typeof b!="function")throw Error(r(231,f,typeof b));return b}var We=!1;if(l)try{var $t={};Object.defineProperty($t,"passive",{get:function(){We=!0}}),window.addEventListener("test",$t,$t),window.removeEventListener("test",$t,$t)}catch{We=!1}function Re(c,f,b,w,T,R,z,ne,ue){var Ce=Array.prototype.slice.call(arguments,3);try{f.apply(b,Ce)}catch(qe){this.onError(qe)}}var _e=!1,Ve=null,At=!1,Dt=null,ir={onError:function(c){_e=!0,Ve=c}};function St(c,f,b,w,T,R,z,ne,ue){_e=!1,Ve=null,Re.apply(ir,arguments)}function nn(c,f,b,w,T,R,z,ne,ue){if(St.apply(this,arguments),_e){if(_e){var Ce=Ve;_e=!1,Ve=null}else throw Error(r(198));At||(At=!0,Dt=Ce)}}function an(c){var f=c,b=c;if(c.alternate)for(;f.return;)f=f.return;else{c=f;do f=c,(f.flags&4098)!==0&&(b=f.return),c=f.return;while(c)}return f.tag===3?b:null}function bt(c){if(c.tag===13){var f=c.memoizedState;if(f===null&&(c=c.alternate,c!==null&&(f=c.memoizedState)),f!==null)return f.dehydrated}return null}function ja(c){if(an(c)!==c)throw Error(r(188))}function oo(c){var f=c.alternate;if(!f){if(f=an(c),f===null)throw Error(r(188));return f!==c?null:c}for(var b=c,w=f;;){var T=b.return;if(T===null)break;var R=T.alternate;if(R===null){if(w=T.return,w!==null){b=w;continue}break}if(T.child===R.child){for(R=T.child;R;){if(R===b)return ja(T),c;if(R===w)return ja(T),f;R=R.sibling}throw Error(r(188))}if(b.return!==w.return)b=T,w=R;else{for(var z=!1,ne=T.child;ne;){if(ne===b){z=!0,b=T,w=R;break}if(ne===w){z=!0,w=T,b=R;break}ne=ne.sibling}if(!z){for(ne=R.child;ne;){if(ne===b){z=!0,b=R,w=T;break}if(ne===w){z=!0,w=R,b=T;break}ne=ne.sibling}if(!z)throw Error(r(189))}}if(b.alternate!==w)throw Error(r(190))}if(b.tag!==3)throw Error(r(188));return b.stateNode.current===b?c:f}function ji(c){return c=oo(c),c!==null?ri(c):null}function ri(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var f=ri(c);if(f!==null)return f;c=c.sibling}return null}var Nr=t.unstable_scheduleCallback,Kn=t.unstable_cancelCallback,Ut=t.unstable_shouldYield,fr=t.unstable_requestPaint,Sr=t.unstable_now,Ba=t.unstable_getCurrentPriorityLevel,yn=t.unstable_ImmediatePriority,sn=t.unstable_UserBlockingPriority,Ua=t.unstable_NormalPriority,wi=t.unstable_LowPriority,Lr=t.unstable_IdlePriority,xs=null,_n=null;function Ul(c){if(_n&&typeof _n.onCommitFiberRoot=="function")try{_n.onCommitFiberRoot(xs,c,void 0,(c.current.flags&128)===128)}catch{}}var Zr=Math.clz32?Math.clz32:lo,aa=Math.log,Ls=Math.LN2;function lo(c){return c>>>=0,c===0?32:31-(aa(c)/Ls|0)|0}var wa=64,sa=4194304;function bs(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function Rn(c,f){var b=c.pendingLanes;if(b===0)return 0;var w=0,T=c.suspendedLanes,R=c.pingedLanes,z=b&268435455;if(z!==0){var ne=z&~T;ne!==0?w=bs(ne):(R&=z,R!==0&&(w=bs(R)))}else z=b&~T,z!==0?w=bs(z):R!==0&&(w=bs(R));if(w===0)return 0;if(f!==0&&f!==w&&(f&T)===0&&(T=w&-w,R=f&-f,T>=R||T===16&&(R&4194240)!==0))return f;if((w&4)!==0&&(w|=b&16),f=c.entangledLanes,f!==0)for(c=c.entanglements,f&=w;0<f;)b=31-Zr(f),T=1<<b,w|=c[b],f&=~T;return w}function Za(c,f){switch(c){case 1:case 2:case 4:return f+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pn(c,f){for(var b=c.suspendedLanes,w=c.pingedLanes,T=c.expirationTimes,R=c.pendingLanes;0<R;){var z=31-Zr(R),ne=1<<z,ue=T[z];ue===-1?((ne&b)===0||(ne&w)!==0)&&(T[z]=Za(ne,f)):ue<=f&&(c.expiredLanes|=ne),R&=~ne}}function Ja(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function ht(){var c=wa;return wa<<=1,(wa&4194240)===0&&(wa=64),c}function Jr(c){for(var f=[],b=0;31>b;b++)f.push(c);return f}function Ur(c,f,b){c.pendingLanes|=f,f!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,f=31-Zr(f),c[f]=b}function Ei(c,f){var b=c.pendingLanes&~f;c.pendingLanes=f,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=f,c.mutableReadLanes&=f,c.entangledLanes&=f,f=c.entanglements;var w=c.eventTimes;for(c=c.expirationTimes;0<b;){var T=31-Zr(b),R=1<<T;f[T]=0,w[T]=-1,c[T]=-1,b&=~R}}function ys(c,f){var b=c.entangledLanes|=f;for(c=c.entanglements;b;){var w=31-Zr(b),T=1<<w;T&f|c[w]&f&&(c[w]|=f),b&=~T}}var Wt=0;function zo(c){return c&=-c,1<c?4<c?(c&268435455)!==0?16:536870912:4:1}var qo,Ea,X,ie,De,Ye=!1,Ze=[],Ke=null,Zt=null,kt=null,Ar=new Map,jr=new Map,fn=[],ia="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function es(c,f){switch(c){case"focusin":case"focusout":Ke=null;break;case"dragenter":case"dragleave":Zt=null;break;case"mouseover":case"mouseout":kt=null;break;case"pointerover":case"pointerout":Ar.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":jr.delete(f.pointerId)}}function Dn(c,f,b,w,T,R){return c===null||c.nativeEvent!==R?(c={blockedOn:f,domEventName:b,eventSystemFlags:w,nativeEvent:R,targetContainers:[T]},f!==null&&(f=nd(f),f!==null&&Ea(f)),c):(c.eventSystemFlags|=w,f=c.targetContainers,T!==null&&f.indexOf(T)===-1&&f.push(T),c)}function tu(c,f,b,w,T){switch(f){case"focusin":return Ke=Dn(Ke,c,f,b,w,T),!0;case"dragenter":return Zt=Dn(Zt,c,f,b,w,T),!0;case"mouseover":return kt=Dn(kt,c,f,b,w,T),!0;case"pointerover":var R=T.pointerId;return Ar.set(R,Dn(Ar.get(R)||null,c,f,b,w,T)),!0;case"gotpointercapture":return R=T.pointerId,jr.set(R,Dn(jr.get(R)||null,c,f,b,w,T)),!0}return!1}function Hr(c){var f=Di(c.target);if(f!==null){var b=an(f);if(b!==null){if(f=b.tag,f===13){if(f=bt(b),f!==null){c.blockedOn=f,De(c.priority,function(){X(b)});return}}else if(f===3&&b.stateNode.current.memoizedState.isDehydrated){c.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}c.blockedOn=null}function ts(c){if(c.blockedOn!==null)return!1;for(var f=c.targetContainers;0<f.length;){var b=Vo(c.domEventName,c.eventSystemFlags,f[0],c.nativeEvent);if(b===null){b=c.nativeEvent;var w=new b.constructor(b.type,b);Pe=w,b.target.dispatchEvent(w),Pe=null}else return f=nd(b),f!==null&&Ea(f),c.blockedOn=b,!1;f.shift()}return!0}function Hl(c,f,b){ts(c)&&b.delete(f)}function Wo(){Ye=!1,Ke!==null&&ts(Ke)&&(Ke=null),Zt!==null&&ts(Zt)&&(Zt=null),kt!==null&&ts(kt)&&(kt=null),Ar.forEach(Hl),jr.forEach(Hl)}function oa(c,f){c.blockedOn===f&&(c.blockedOn=null,Ye||(Ye=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Wo)))}function Aa(c){function f(T){return oa(T,c)}if(0<Ze.length){oa(Ze[0],c);for(var b=1;b<Ze.length;b++){var w=Ze[b];w.blockedOn===c&&(w.blockedOn=null)}}for(Ke!==null&&oa(Ke,c),Zt!==null&&oa(Zt,c),kt!==null&&oa(kt,c),Ar.forEach(f),jr.forEach(f),b=0;b<fn.length;b++)w=fn[b],w.blockedOn===c&&(w.blockedOn=null);for(;0<fn.length&&(b=fn[0],b.blockedOn===null);)Hr(b),b.blockedOn===null&&fn.shift()}var mn=A.ReactCurrentBatchConfig,ni=!0;function Wp(c,f,b,w){var T=Wt,R=mn.transition;mn.transition=null;try{Wt=1,$s(c,f,b,w)}finally{Wt=T,mn.transition=R}}function hf(c,f,b,w){var T=Wt,R=mn.transition;mn.transition=null;try{Wt=4,$s(c,f,b,w)}finally{Wt=T,mn.transition=R}}function $s(c,f,b,w){if(ni){var T=Vo(c,f,b,w);if(T===null)Xc(c,f,w,Fs,b),es(c,w);else if(tu(T,c,f,b,w))w.stopPropagation();else if(es(c,w),f&4&&-1<ia.indexOf(c)){for(;T!==null;){var R=nd(T);if(R!==null&&qo(R),R=Vo(c,f,b,w),R===null&&Xc(c,f,w,Fs,b),R===T)break;T=R}T!==null&&w.stopPropagation()}else Xc(c,f,w,null,b)}}var Fs=null;function Vo(c,f,b,w){if(Fs=null,c=Kt(w),c=Di(c),c!==null)if(f=an(c),f===null)c=null;else if(b=f.tag,b===13){if(c=bt(f),c!==null)return c;c=null}else if(b===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;c=null}else f!==c&&(c=null);return Fs=c,null}function vs(c){switch(c){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ba()){case yn:return 1;case sn:return 4;case Ua:case wi:return 16;case Lr:return 536870912;default:return 16}default:return 16}}var Ha=null,J=null,fe=null;function Oe(){if(fe)return fe;var c,f=J,b=f.length,w,T="value"in Ha?Ha.value:Ha.textContent,R=T.length;for(c=0;c<b&&f[c]===T[c];c++);var z=b-c;for(w=1;w<=z&&f[b-w]===T[R-w];w++);return fe=T.slice(c,1<w?1-w:void 0)}function Ue(c){var f=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&f===13&&(c=13)):c=f,c===10&&(c=13),32<=c||c===13?c:0}function nt(){return!0}function ot(){return!1}function lt(c){function f(b,w,T,R,z){this._reactName=b,this._targetInst=T,this.type=w,this.nativeEvent=R,this.target=z,this.currentTarget=null;for(var ne in c)c.hasOwnProperty(ne)&&(b=c[ne],this[ne]=b?b(R):R[ne]);return this.isDefaultPrevented=(R.defaultPrevented!=null?R.defaultPrevented:R.returnValue===!1)?nt:ot,this.isPropagationStopped=ot,this}return re(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=nt)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=nt)},persist:function(){},isPersistent:nt}),f}var Ft={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dr=lt(Ft),kr=re({},Ft,{view:0,detail:0}),qr=lt(kr),$r,Ca,Ns,ai=re({},kr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:si,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==Ns&&(Ns&&c.type==="mousemove"?($r=c.screenX-Ns.screenX,Ca=c.screenY-Ns.screenY):Ca=$r=0,Ns=c),$r)},movementY:function(c){return"movementY"in c?c.movementY:Ca}}),la=lt(ai),Ht=re({},ai,{dataTransfer:0}),ca=lt(Ht),ur=re({},kr,{relatedTarget:0}),Ai=lt(ur),Ci=re({},Ft,{animationName:0,elapsedTime:0,pseudoElement:0}),_i=lt(Ci),co=re({},Ft,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),uo=lt(co),Ti=re({},Ft,{data:0}),Fc=lt(Ti),Gl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},aN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ig(c){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(c):(c=aN[c])?!!f[c]:!1}function si(){return Ig}var Vp=re({},kr,{key:function(c){if(c.key){var f=Gl[c.key]||c.key;if(f!=="Unidentified")return f}return c.type==="keypress"?(c=Ue(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?Dg[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:si,charCode:function(c){return c.type==="keypress"?Ue(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?Ue(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),sN=lt(Vp),Yp=re({},ai,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gf=lt(Yp),iN=re({},kr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:si}),ii=lt(iN),Mg=re({},Ft,{propertyName:0,elapsedTime:0,pseudoElement:0}),Lg=lt(Mg),$g=re({},ai,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),oN=lt($g),lN=[9,13,27,32],Xp=l&&"CompositionEvent"in window,Bc=null;l&&"documentMode"in document&&(Bc=document.documentMode);var Je=l&&"TextEvent"in window&&!Bc,Fg=l&&(!Xp||Bc&&8<Bc&&11>=Bc),st=" ",ru=!1;function nu(c,f){switch(c){case"keyup":return lN.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kl(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var Uc=!1;function Bg(c,f){switch(c){case"compositionend":return Kl(f);case"keypress":return f.which!==32?null:(ru=!0,st);case"textInput":return c=f.data,c===st&&ru?null:c;default:return null}}function xf(c,f){if(Uc)return c==="compositionend"||!Xp&&nu(c,f)?(c=Oe(),fe=J=Ha=null,Uc=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return Fg&&f.locale!=="ko"?null:f.data;default:return null}}var Ug={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hg(c){var f=c&&c.nodeName&&c.nodeName.toLowerCase();return f==="input"?!!Ug[c.type]:f==="textarea"}function au(c,f,b,w){Ge(w),f=Vl(f,"onChange"),0<f.length&&(b=new dr("onChange","change",null,b,w),c.push({event:b,listeners:f}))}var su=null,zl=null;function Hc(c){Yg(c,0)}function iu(c){var f=Yl(c);if(se(f))return c}function bf(c,f){if(c==="change")return f}var Qp=!1;if(l){var fo;if(l){var mo="oninput"in document;if(!mo){var Gg=document.createElement("div");Gg.setAttribute("oninput","return;"),mo=typeof Gg.oninput=="function"}fo=mo}else fo=!1;Qp=fo&&(!document.documentMode||9<document.documentMode)}function Kg(){su&&(su.detachEvent("onpropertychange",zg),zl=su=null)}function zg(c){if(c.propertyName==="value"&&iu(zl)){var f=[];au(f,zl,c,Kt(c)),ft(Hc,f)}}function cN(c,f,b){c==="focusin"?(Kg(),su=f,zl=b,su.attachEvent("onpropertychange",zg)):c==="focusout"&&Kg()}function dN(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return iu(zl)}function uN(c,f){if(c==="click")return iu(f)}function qg(c,f){if(c==="input"||c==="change")return iu(f)}function Zp(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var Bs=typeof Object.is=="function"?Object.is:Zp;function Gc(c,f){if(Bs(c,f))return!0;if(typeof c!="object"||c===null||typeof f!="object"||f===null)return!1;var b=Object.keys(c),w=Object.keys(f);if(b.length!==w.length)return!1;for(w=0;w<b.length;w++){var T=b[w];if(!d.call(f,T)||!Bs(c[T],f[T]))return!1}return!0}function Jp(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function yf(c,f){var b=Jp(c);c=0;for(var w;b;){if(b.nodeType===3){if(w=c+b.textContent.length,c<=f&&w>=f)return{node:b,offset:f-c};c=w}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=Jp(b)}}function eh(c,f){return c&&f?c===f?!0:c&&c.nodeType===3?!1:f&&f.nodeType===3?eh(c,f.parentNode):"contains"in c?c.contains(f):c.compareDocumentPosition?!!(c.compareDocumentPosition(f)&16):!1:!1}function vf(){for(var c=window,f=ct();f instanceof c.HTMLIFrameElement;){try{var b=typeof f.contentWindow.location.href=="string"}catch{b=!1}if(b)c=f.contentWindow;else break;f=ct(c.document)}return f}function th(c){var f=c&&c.nodeName&&c.nodeName.toLowerCase();return f&&(f==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||f==="textarea"||c.contentEditable==="true")}function fN(c){var f=vf(),b=c.focusedElem,w=c.selectionRange;if(f!==b&&b&&b.ownerDocument&&eh(b.ownerDocument.documentElement,b)){if(w!==null&&th(b)){if(f=w.start,c=w.end,c===void 0&&(c=f),"selectionStart"in b)b.selectionStart=f,b.selectionEnd=Math.min(c,b.value.length);else if(c=(f=b.ownerDocument||document)&&f.defaultView||window,c.getSelection){c=c.getSelection();var T=b.textContent.length,R=Math.min(w.start,T);w=w.end===void 0?R:Math.min(w.end,T),!c.extend&&R>w&&(T=w,w=R,R=T),T=yf(b,R);var z=yf(b,w);T&&z&&(c.rangeCount!==1||c.anchorNode!==T.node||c.anchorOffset!==T.offset||c.focusNode!==z.node||c.focusOffset!==z.offset)&&(f=f.createRange(),f.setStart(T.node,T.offset),c.removeAllRanges(),R>w?(c.addRange(f),c.extend(z.node,z.offset)):(f.setEnd(z.node,z.offset),c.addRange(f)))}}for(f=[],c=b;c=c.parentNode;)c.nodeType===1&&f.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<f.length;b++)c=f[b],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var mN=l&&"documentMode"in document&&11>=document.documentMode,Kc=null,Us=null,ql=null,ou=!1;function Nf(c,f,b){var w=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;ou||Kc==null||Kc!==ct(w)||(w=Kc,"selectionStart"in w&&th(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),ql&&Gc(ql,w)||(ql=w,w=Vl(Us,"onSelect"),0<w.length&&(f=new dr("onSelect","select",null,f,b),c.push({event:f,listeners:w}),f.target=Kc)))}function zc(c,f){var b={};return b[c.toLowerCase()]=f.toLowerCase(),b["Webkit"+c]="webkit"+f,b["Moz"+c]="moz"+f,b}var Yo={animationend:zc("Animation","AnimationEnd"),animationiteration:zc("Animation","AnimationIteration"),animationstart:zc("Animation","AnimationStart"),transitionend:zc("Transition","TransitionEnd")},qc={},Sf={};l&&(Sf=document.createElement("div").style,"AnimationEvent"in window||(delete Yo.animationend.animation,delete Yo.animationiteration.animation,delete Yo.animationstart.animation),"TransitionEvent"in window||delete Yo.transitionend.transition);function Wc(c){if(qc[c])return qc[c];if(!Yo[c])return c;var f=Yo[c],b;for(b in f)if(f.hasOwnProperty(b)&&b in Sf)return qc[c]=f[b];return c}var Wl=Wc("animationend"),jf=Wc("animationiteration"),Wg=Wc("animationstart"),Hs=Wc("transitionend"),wf=new Map,rh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function po(c,f){wf.set(c,f),i(f,[c])}for(var nh=0;nh<rh.length;nh++){var In=rh[nh],pN=In.toLowerCase(),Xo=In[0].toUpperCase()+In.slice(1);po(pN,"on"+Xo)}po(Wl,"onAnimationEnd"),po(jf,"onAnimationIteration"),po(Wg,"onAnimationStart"),po("dblclick","onDoubleClick"),po("focusin","onFocus"),po("focusout","onBlur"),po(Hs,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vg=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vc));function lu(c,f,b){var w=c.type||"unknown-event";c.currentTarget=b,nn(w,f,void 0,c),c.currentTarget=null}function Yg(c,f){f=(f&4)!==0;for(var b=0;b<c.length;b++){var w=c[b],T=w.event;w=w.listeners;e:{var R=void 0;if(f)for(var z=w.length-1;0<=z;z--){var ne=w[z],ue=ne.instance,Ce=ne.currentTarget;if(ne=ne.listener,ue!==R&&T.isPropagationStopped())break e;lu(T,ne,Ce),R=ue}else for(z=0;z<w.length;z++){if(ne=w[z],ue=ne.instance,Ce=ne.currentTarget,ne=ne.listener,ue!==R&&T.isPropagationStopped())break e;lu(T,ne,Ce),R=ue}}}if(At)throw c=Dt,At=!1,Dt=null,c}function tn(c,f){var b=f[Pi];b===void 0&&(b=f[Pi]=new Set);var w=c+"__bubble";b.has(w)||(Qo(f,c,2,!1),b.add(w))}function Yc(c,f,b){var w=0;f&&(w|=4),Qo(b,c,w,f)}var Ga="_reactListening"+Math.random().toString(36).slice(2);function Gs(c){if(!c[Ga]){c[Ga]=!0,a.forEach(function(b){b!=="selectionchange"&&(Vg.has(b)||Yc(b,!1,c),Yc(b,!0,c))});var f=c.nodeType===9?c:c.ownerDocument;f===null||f[Ga]||(f[Ga]=!0,Yc("selectionchange",!1,f))}}function Qo(c,f,b,w){switch(vs(f)){case 1:var T=Wp;break;case 4:T=hf;break;default:T=$s}b=T.bind(null,f,b,c),T=void 0,!We||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(T=!0),w?T!==void 0?c.addEventListener(f,b,{capture:!0,passive:T}):c.addEventListener(f,b,!0):T!==void 0?c.addEventListener(f,b,{passive:T}):c.addEventListener(f,b,!1)}function Xc(c,f,b,w,T){var R=w;if((f&1)===0&&(f&2)===0&&w!==null)e:for(;;){if(w===null)return;var z=w.tag;if(z===3||z===4){var ne=w.stateNode.containerInfo;if(ne===T||ne.nodeType===8&&ne.parentNode===T)break;if(z===4)for(z=w.return;z!==null;){var ue=z.tag;if((ue===3||ue===4)&&(ue=z.stateNode.containerInfo,ue===T||ue.nodeType===8&&ue.parentNode===T))return;z=z.return}for(;ne!==null;){if(z=Di(ne),z===null)return;if(ue=z.tag,ue===5||ue===6){w=R=z;continue e}ne=ne.parentNode}}w=w.return}ft(function(){var Ce=R,qe=Kt(b),Qe=[];e:{var ze=wf.get(c);if(ze!==void 0){var yt=dr,Ct=c;switch(c){case"keypress":if(Ue(b)===0)break e;case"keydown":case"keyup":yt=sN;break;case"focusin":Ct="focus",yt=Ai;break;case"focusout":Ct="blur",yt=Ai;break;case"beforeblur":case"afterblur":yt=Ai;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":yt=la;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":yt=ca;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":yt=ii;break;case Wl:case jf:case Wg:yt=_i;break;case Hs:yt=Lg;break;case"scroll":yt=qr;break;case"wheel":yt=oN;break;case"copy":case"cut":case"paste":yt=uo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":yt=gf}var Pt=(f&4)!==0,Wn=!Pt&&c==="scroll",Ne=Pt?ze!==null?ze+"Capture":null:ze;Pt=[];for(var pe=Ce,we;pe!==null;){we=pe;var at=we.stateNode;if(we.tag===5&&at!==null&&(we=at,Ne!==null&&(at=Le(pe,Ne),at!=null&&Pt.push(cu(pe,at,we)))),Wn)break;pe=pe.return}0<Pt.length&&(ze=new yt(ze,Ct,null,b,qe),Qe.push({event:ze,listeners:Pt}))}}if((f&7)===0){e:{if(ze=c==="mouseover"||c==="pointerover",yt=c==="mouseout"||c==="pointerout",ze&&b!==Pe&&(Ct=b.relatedTarget||b.fromElement)&&(Di(Ct)||Ct[Yn]))break e;if((yt||ze)&&(ze=qe.window===qe?qe:(ze=qe.ownerDocument)?ze.defaultView||ze.parentWindow:window,yt?(Ct=b.relatedTarget||b.toElement,yt=Ce,Ct=Ct?Di(Ct):null,Ct!==null&&(Wn=an(Ct),Ct!==Wn||Ct.tag!==5&&Ct.tag!==6)&&(Ct=null)):(yt=null,Ct=Ce),yt!==Ct)){if(Pt=la,at="onMouseLeave",Ne="onMouseEnter",pe="mouse",(c==="pointerout"||c==="pointerover")&&(Pt=gf,at="onPointerLeave",Ne="onPointerEnter",pe="pointer"),Wn=yt==null?ze:Yl(yt),we=Ct==null?ze:Yl(Ct),ze=new Pt(at,pe+"leave",yt,b,qe),ze.target=Wn,ze.relatedTarget=we,at=null,Di(qe)===Ce&&(Pt=new Pt(Ne,pe+"enter",Ct,b,qe),Pt.target=we,Pt.relatedTarget=Wn,at=Pt),Wn=at,yt&&Ct)t:{for(Pt=yt,Ne=Ct,pe=0,we=Pt;we;we=Qc(we))pe++;for(we=0,at=Ne;at;at=Qc(at))we++;for(;0<pe-we;)Pt=Qc(Pt),pe--;for(;0<we-pe;)Ne=Qc(Ne),we--;for(;pe--;){if(Pt===Ne||Ne!==null&&Pt===Ne.alternate)break t;Pt=Qc(Pt),Ne=Qc(Ne)}Pt=null}else Pt=null;yt!==null&&Xg(Qe,ze,yt,Pt,!1),Ct!==null&&Wn!==null&&Xg(Qe,Wn,Ct,Pt,!0)}}e:{if(ze=Ce?Yl(Ce):window,yt=ze.nodeName&&ze.nodeName.toLowerCase(),yt==="select"||yt==="input"&&ze.type==="file")var Lt=bf;else if(Hg(ze))if(Qp)Lt=qg;else{Lt=dN;var Yt=cN}else(yt=ze.nodeName)&&yt.toLowerCase()==="input"&&(ze.type==="checkbox"||ze.type==="radio")&&(Lt=uN);if(Lt&&(Lt=Lt(c,Ce))){au(Qe,Lt,b,qe);break e}Yt&&Yt(c,ze,Ce),c==="focusout"&&(Yt=ze._wrapperState)&&Yt.controlled&&ze.type==="number"&&ge(ze,"number",ze.value)}switch(Yt=Ce?Yl(Ce):window,c){case"focusin":(Hg(Yt)||Yt.contentEditable==="true")&&(Kc=Yt,Us=Ce,ql=null);break;case"focusout":ql=Us=Kc=null;break;case"mousedown":ou=!0;break;case"contextmenu":case"mouseup":case"dragend":ou=!1,Nf(Qe,b,qe);break;case"selectionchange":if(mN)break;case"keydown":case"keyup":Nf(Qe,b,qe)}var Xt;if(Xp)e:{switch(c){case"compositionstart":var rr="onCompositionStart";break e;case"compositionend":rr="onCompositionEnd";break e;case"compositionupdate":rr="onCompositionUpdate";break e}rr=void 0}else Uc?nu(c,b)&&(rr="onCompositionEnd"):c==="keydown"&&b.keyCode===229&&(rr="onCompositionStart");rr&&(Fg&&b.locale!=="ko"&&(Uc||rr!=="onCompositionStart"?rr==="onCompositionEnd"&&Uc&&(Xt=Oe()):(Ha=qe,J="value"in Ha?Ha.value:Ha.textContent,Uc=!0)),Yt=Vl(Ce,rr),0<Yt.length&&(rr=new Fc(rr,c,null,b,qe),Qe.push({event:rr,listeners:Yt}),Xt?rr.data=Xt:(Xt=Kl(b),Xt!==null&&(rr.data=Xt)))),(Xt=Je?Bg(c,b):xf(c,b))&&(Ce=Vl(Ce,"onBeforeInput"),0<Ce.length&&(qe=new Fc("onBeforeInput","beforeinput",null,b,qe),Qe.push({event:qe,listeners:Ce}),qe.data=Xt))}Yg(Qe,f)})}function cu(c,f,b){return{instance:c,listener:f,currentTarget:b}}function Vl(c,f){for(var b=f+"Capture",w=[];c!==null;){var T=c,R=T.stateNode;T.tag===5&&R!==null&&(T=R,R=Le(c,b),R!=null&&w.unshift(cu(c,R,T)),R=Le(c,f),R!=null&&w.push(cu(c,R,T))),c=c.return}return w}function Qc(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5);return c||null}function Xg(c,f,b,w,T){for(var R=f._reactName,z=[];b!==null&&b!==w;){var ne=b,ue=ne.alternate,Ce=ne.stateNode;if(ue!==null&&ue===w)break;ne.tag===5&&Ce!==null&&(ne=Ce,T?(ue=Le(b,R),ue!=null&&z.unshift(cu(b,ue,ne))):T||(ue=Le(b,R),ue!=null&&z.push(cu(b,ue,ne)))),b=b.return}z.length!==0&&c.push({event:f,listeners:z})}var Qg=/\r\n?/g,rs=/\u0000|\uFFFD/g;function Oi(c){return(typeof c=="string"?c:""+c).replace(Qg,`
`).replace(rs,"")}function oi(c,f,b){if(f=Oi(f),Oi(c)!==f&&b)throw Error(r(425))}function Zc(){}var Jc=null,ki=null;function Ss(c,f){return c==="textarea"||c==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var du=typeof setTimeout=="function"?setTimeout:void 0,ed=typeof clearTimeout=="function"?clearTimeout:void 0,ah=typeof Promise=="function"?Promise:void 0,Zg=typeof queueMicrotask=="function"?queueMicrotask:typeof ah<"u"?function(c){return ah.resolve(null).then(c).catch(uu)}:du;function uu(c){setTimeout(function(){throw c})}function sh(c,f){var b=f,w=0;do{var T=b.nextSibling;if(c.removeChild(b),T&&T.nodeType===8)if(b=T.data,b==="/$"){if(w===0){c.removeChild(T),Aa(f);return}w--}else b!=="$"&&b!=="$?"&&b!=="$!"||w++;b=T}while(b);Aa(f)}function js(c){for(;c!=null;c=c.nextSibling){var f=c.nodeType;if(f===1||f===3)break;if(f===8){if(f=c.data,f==="$"||f==="$!"||f==="$?")break;if(f==="/$")return null}}return c}function Jg(c){c=c.previousSibling;for(var f=0;c;){if(c.nodeType===8){var b=c.data;if(b==="$"||b==="$!"||b==="$?"){if(f===0)return c;f--}else b==="/$"&&f++}c=c.previousSibling}return null}var td=Math.random().toString(36).slice(2),Ri="__reactFiber$"+td,Zo="__reactProps$"+td,Yn="__reactContainer$"+td,Pi="__reactEvents$"+td,Ef="__reactListeners$"+td,rd="__reactHandles$"+td;function Di(c){var f=c[Ri];if(f)return f;for(var b=c.parentNode;b;){if(f=b[Yn]||b[Ri]){if(b=f.alternate,f.child!==null||b!==null&&b.child!==null)for(c=Jg(c);c!==null;){if(b=c[Ri])return b;c=Jg(c)}return f}c=b,b=c.parentNode}return null}function nd(c){return c=c[Ri]||c[Yn],!c||c.tag!==5&&c.tag!==6&&c.tag!==13&&c.tag!==3?null:c}function Yl(c){if(c.tag===5||c.tag===6)return c.stateNode;throw Error(r(33))}function Xn(c){return c[Zo]||null}var ad=[],Xl=-1;function ho(c){return{current:c}}function on(c){0>Xl||(c.current=ad[Xl],ad[Xl]=null,Xl--)}function Fr(c,f){Xl++,ad[Xl]=c.current,c.current=f}var Qn={},_a=ho(Qn),ns=ho(!1),Ii=Qn;function Ql(c,f){var b=c.type.contextTypes;if(!b)return Qn;var w=c.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===f)return w.__reactInternalMemoizedMaskedChildContext;var T={},R;for(R in b)T[R]=f[R];return w&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=f,c.__reactInternalMemoizedMaskedChildContext=T),T}function as(c){return c=c.childContextTypes,c!=null}function Af(){on(ns),on(_a)}function li(c,f,b){if(_a.current!==Qn)throw Error(r(168));Fr(_a,f),Fr(ns,b)}function Cf(c,f,b){var w=c.stateNode;if(f=f.childContextTypes,typeof w.getChildContext!="function")return b;w=w.getChildContext();for(var T in w)if(!(T in f))throw Error(r(108,ce(c)||"Unknown",T));return re({},b,w)}function fu(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||Qn,Ii=_a.current,Fr(_a,c),Fr(ns,ns.current),!0}function ci(c,f,b){var w=c.stateNode;if(!w)throw Error(r(169));b?(c=Cf(c,f,Ii),w.__reactInternalMemoizedMergedChildContext=c,on(ns),on(_a),Fr(_a,c)):on(ns),Fr(ns,b)}var di=null,Ks=!1,Jo=!1;function mu(c){di===null?di=[c]:di.push(c)}function sd(c){Ks=!0,mu(c)}function ui(){if(!Jo&&di!==null){Jo=!0;var c=0,f=Wt;try{var b=di;for(Wt=1;c<b.length;c++){var w=b[c];do w=w(!0);while(w!==null)}di=null,Ks=!1}catch(T){throw di!==null&&(di=di.slice(c+1)),Nr(yn,ui),T}finally{Wt=f,Jo=!1}}return null}var Dr=[],go=0,xo=null,pu=0,Ka=[],Ta=0,fi=null,ws=1,Es="";function Oa(c,f){Dr[go++]=pu,Dr[go++]=xo,xo=c,pu=f}function _f(c,f,b){Ka[Ta++]=ws,Ka[Ta++]=Es,Ka[Ta++]=fi,fi=c;var w=ws;c=Es;var T=32-Zr(w)-1;w&=~(1<<T),b+=1;var R=32-Zr(f)+T;if(30<R){var z=T-T%5;R=(w&(1<<z)-1).toString(32),w>>=z,T-=z,ws=1<<32-Zr(f)+T|b<<T|w,Es=R+c}else ws=1<<R|b<<T|w,Es=c}function hu(c){c.return!==null&&(Oa(c,1),_f(c,1,0))}function Mi(c){for(;c===xo;)xo=Dr[--go],Dr[go]=null,pu=Dr[--go],Dr[go]=null;for(;c===fi;)fi=Ka[--Ta],Ka[Ta]=null,Es=Ka[--Ta],Ka[Ta]=null,ws=Ka[--Ta],Ka[Ta]=null}var wn=null,Zn=null,ln=!1,mi=null;function ex(c,f){var b=Bi(5,null,null,0);b.elementType="DELETED",b.stateNode=f,b.return=c,f=c.deletions,f===null?(c.deletions=[b],c.flags|=16):f.push(b)}function tx(c,f){switch(c.tag){case 5:var b=c.type;return f=f.nodeType!==1||b.toLowerCase()!==f.nodeName.toLowerCase()?null:f,f!==null?(c.stateNode=f,wn=c,Zn=js(f.firstChild),!0):!1;case 6:return f=c.pendingProps===""||f.nodeType!==3?null:f,f!==null?(c.stateNode=f,wn=c,Zn=null,!0):!1;case 13:return f=f.nodeType!==8?null:f,f!==null?(b=fi!==null?{id:ws,overflow:Es}:null,c.memoizedState={dehydrated:f,treeContext:b,retryLane:1073741824},b=Bi(18,null,null,0),b.stateNode=f,b.return=c,c.child=b,wn=c,Zn=null,!0):!1;default:return!1}}function I(c){return(c.mode&1)!==0&&(c.flags&128)===0}function V(c){if(ln){var f=Zn;if(f){var b=f;if(!tx(c,f)){if(I(c))throw Error(r(418));f=js(b.nextSibling);var w=wn;f&&tx(c,f)?ex(w,b):(c.flags=c.flags&-4097|2,ln=!1,wn=c)}}else{if(I(c))throw Error(r(418));c.flags=c.flags&-4097|2,ln=!1,wn=c}}}function ee(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;wn=c}function me(c){if(c!==wn)return!1;if(!ln)return ee(c),ln=!0,!1;var f;if((f=c.tag!==3)&&!(f=c.tag!==5)&&(f=c.type,f=f!=="head"&&f!=="body"&&!Ss(c.type,c.memoizedProps)),f&&(f=Zn)){if(I(c))throw le(),Error(r(418));for(;f;)ex(c,f),f=js(f.nextSibling)}if(ee(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));e:{for(c=c.nextSibling,f=0;c;){if(c.nodeType===8){var b=c.data;if(b==="/$"){if(f===0){Zn=js(c.nextSibling);break e}f--}else b!=="$"&&b!=="$!"&&b!=="$?"||f++}c=c.nextSibling}Zn=null}}else Zn=wn?js(c.stateNode.nextSibling):null;return!0}function le(){for(var c=Zn;c;)c=js(c.nextSibling)}function tt(){Zn=wn=null,ln=!1}function Xe(c){mi===null?mi=[c]:mi.push(c)}var Se=A.ReactCurrentBatchConfig;function pt(c,f,b){if(c=b.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(b._owner){if(b=b._owner,b){if(b.tag!==1)throw Error(r(309));var w=b.stateNode}if(!w)throw Error(r(147,c));var T=w,R=""+c;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===R?f.ref:(f=function(z){var ne=T.refs;z===null?delete ne[R]:ne[R]=z},f._stringRef=R,f)}if(typeof c!="string")throw Error(r(284));if(!b._owner)throw Error(r(290,c))}return c}function or(c,f){throw c=Object.prototype.toString.call(f),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":c))}function gt(c){var f=c._init;return f(c._payload)}function lr(c){function f(Ne,pe){if(c){var we=Ne.deletions;we===null?(Ne.deletions=[pe],Ne.flags|=16):we.push(pe)}}function b(Ne,pe){if(!c)return null;for(;pe!==null;)f(Ne,pe),pe=pe.sibling;return null}function w(Ne,pe){for(Ne=new Map;pe!==null;)pe.key!==null?Ne.set(pe.key,pe):Ne.set(pe.index,pe),pe=pe.sibling;return Ne}function T(Ne,pe){return Ne=md(Ne,pe),Ne.index=0,Ne.sibling=null,Ne}function R(Ne,pe,we){return Ne.index=we,c?(we=Ne.alternate,we!==null?(we=we.index,we<pe?(Ne.flags|=2,pe):we):(Ne.flags|=2,pe)):(Ne.flags|=1048576,pe)}function z(Ne){return c&&Ne.alternate===null&&(Ne.flags|=2),Ne}function ne(Ne,pe,we,at){return pe===null||pe.tag!==6?(pe=r2(we,Ne.mode,at),pe.return=Ne,pe):(pe=T(pe,we),pe.return=Ne,pe)}function ue(Ne,pe,we,at){var Lt=we.type;return Lt===O?qe(Ne,pe,we.props.children,at,we.key):pe!==null&&(pe.elementType===Lt||typeof Lt=="object"&&Lt!==null&&Lt.$$typeof===K&&gt(Lt)===pe.type)?(at=T(pe,we.props),at.ref=pt(Ne,pe,we),at.return=Ne,at):(at=jx(we.type,we.key,we.props,null,Ne.mode,at),at.ref=pt(Ne,pe,we),at.return=Ne,at)}function Ce(Ne,pe,we,at){return pe===null||pe.tag!==4||pe.stateNode.containerInfo!==we.containerInfo||pe.stateNode.implementation!==we.implementation?(pe=n2(we,Ne.mode,at),pe.return=Ne,pe):(pe=T(pe,we.children||[]),pe.return=Ne,pe)}function qe(Ne,pe,we,at,Lt){return pe===null||pe.tag!==7?(pe=ju(we,Ne.mode,at,Lt),pe.return=Ne,pe):(pe=T(pe,we),pe.return=Ne,pe)}function Qe(Ne,pe,we){if(typeof pe=="string"&&pe!==""||typeof pe=="number")return pe=r2(""+pe,Ne.mode,we),pe.return=Ne,pe;if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case S:return we=jx(pe.type,pe.key,pe.props,null,Ne.mode,we),we.ref=pt(Ne,null,pe),we.return=Ne,we;case _:return pe=n2(pe,Ne.mode,we),pe.return=Ne,pe;case K:var at=pe._init;return Qe(Ne,at(pe._payload),we)}if(be(pe)||te(pe))return pe=ju(pe,Ne.mode,we,null),pe.return=Ne,pe;or(Ne,pe)}return null}function ze(Ne,pe,we,at){var Lt=pe!==null?pe.key:null;if(typeof we=="string"&&we!==""||typeof we=="number")return Lt!==null?null:ne(Ne,pe,""+we,at);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case S:return we.key===Lt?ue(Ne,pe,we,at):null;case _:return we.key===Lt?Ce(Ne,pe,we,at):null;case K:return Lt=we._init,ze(Ne,pe,Lt(we._payload),at)}if(be(we)||te(we))return Lt!==null?null:qe(Ne,pe,we,at,null);or(Ne,we)}return null}function yt(Ne,pe,we,at,Lt){if(typeof at=="string"&&at!==""||typeof at=="number")return Ne=Ne.get(we)||null,ne(pe,Ne,""+at,Lt);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case S:return Ne=Ne.get(at.key===null?we:at.key)||null,ue(pe,Ne,at,Lt);case _:return Ne=Ne.get(at.key===null?we:at.key)||null,Ce(pe,Ne,at,Lt);case K:var Yt=at._init;return yt(Ne,pe,we,Yt(at._payload),Lt)}if(be(at)||te(at))return Ne=Ne.get(we)||null,qe(pe,Ne,at,Lt,null);or(pe,at)}return null}function Ct(Ne,pe,we,at){for(var Lt=null,Yt=null,Xt=pe,rr=pe=0,Pa=null;Xt!==null&&rr<we.length;rr++){Xt.index>rr?(Pa=Xt,Xt=null):Pa=Xt.sibling;var Gr=ze(Ne,Xt,we[rr],at);if(Gr===null){Xt===null&&(Xt=Pa);break}c&&Xt&&Gr.alternate===null&&f(Ne,Xt),pe=R(Gr,pe,rr),Yt===null?Lt=Gr:Yt.sibling=Gr,Yt=Gr,Xt=Pa}if(rr===we.length)return b(Ne,Xt),ln&&Oa(Ne,rr),Lt;if(Xt===null){for(;rr<we.length;rr++)Xt=Qe(Ne,we[rr],at),Xt!==null&&(pe=R(Xt,pe,rr),Yt===null?Lt=Xt:Yt.sibling=Xt,Yt=Xt);return ln&&Oa(Ne,rr),Lt}for(Xt=w(Ne,Xt);rr<we.length;rr++)Pa=yt(Xt,Ne,rr,we[rr],at),Pa!==null&&(c&&Pa.alternate!==null&&Xt.delete(Pa.key===null?rr:Pa.key),pe=R(Pa,pe,rr),Yt===null?Lt=Pa:Yt.sibling=Pa,Yt=Pa);return c&&Xt.forEach(function(pd){return f(Ne,pd)}),ln&&Oa(Ne,rr),Lt}function Pt(Ne,pe,we,at){var Lt=te(we);if(typeof Lt!="function")throw Error(r(150));if(we=Lt.call(we),we==null)throw Error(r(151));for(var Yt=Lt=null,Xt=pe,rr=pe=0,Pa=null,Gr=we.next();Xt!==null&&!Gr.done;rr++,Gr=we.next()){Xt.index>rr?(Pa=Xt,Xt=null):Pa=Xt.sibling;var pd=ze(Ne,Xt,Gr.value,at);if(pd===null){Xt===null&&(Xt=Pa);break}c&&Xt&&pd.alternate===null&&f(Ne,Xt),pe=R(pd,pe,rr),Yt===null?Lt=pd:Yt.sibling=pd,Yt=pd,Xt=Pa}if(Gr.done)return b(Ne,Xt),ln&&Oa(Ne,rr),Lt;if(Xt===null){for(;!Gr.done;rr++,Gr=we.next())Gr=Qe(Ne,Gr.value,at),Gr!==null&&(pe=R(Gr,pe,rr),Yt===null?Lt=Gr:Yt.sibling=Gr,Yt=Gr);return ln&&Oa(Ne,rr),Lt}for(Xt=w(Ne,Xt);!Gr.done;rr++,Gr=we.next())Gr=yt(Xt,Ne,rr,Gr.value,at),Gr!==null&&(c&&Gr.alternate!==null&&Xt.delete(Gr.key===null?rr:Gr.key),pe=R(Gr,pe,rr),Yt===null?Lt=Gr:Yt.sibling=Gr,Yt=Gr);return c&&Xt.forEach(function(bV){return f(Ne,bV)}),ln&&Oa(Ne,rr),Lt}function Wn(Ne,pe,we,at){if(typeof we=="object"&&we!==null&&we.type===O&&we.key===null&&(we=we.props.children),typeof we=="object"&&we!==null){switch(we.$$typeof){case S:e:{for(var Lt=we.key,Yt=pe;Yt!==null;){if(Yt.key===Lt){if(Lt=we.type,Lt===O){if(Yt.tag===7){b(Ne,Yt.sibling),pe=T(Yt,we.props.children),pe.return=Ne,Ne=pe;break e}}else if(Yt.elementType===Lt||typeof Lt=="object"&&Lt!==null&&Lt.$$typeof===K&&gt(Lt)===Yt.type){b(Ne,Yt.sibling),pe=T(Yt,we.props),pe.ref=pt(Ne,Yt,we),pe.return=Ne,Ne=pe;break e}b(Ne,Yt);break}else f(Ne,Yt);Yt=Yt.sibling}we.type===O?(pe=ju(we.props.children,Ne.mode,at,we.key),pe.return=Ne,Ne=pe):(at=jx(we.type,we.key,we.props,null,Ne.mode,at),at.ref=pt(Ne,pe,we),at.return=Ne,Ne=at)}return z(Ne);case _:e:{for(Yt=we.key;pe!==null;){if(pe.key===Yt)if(pe.tag===4&&pe.stateNode.containerInfo===we.containerInfo&&pe.stateNode.implementation===we.implementation){b(Ne,pe.sibling),pe=T(pe,we.children||[]),pe.return=Ne,Ne=pe;break e}else{b(Ne,pe);break}else f(Ne,pe);pe=pe.sibling}pe=n2(we,Ne.mode,at),pe.return=Ne,Ne=pe}return z(Ne);case K:return Yt=we._init,Wn(Ne,pe,Yt(we._payload),at)}if(be(we))return Ct(Ne,pe,we,at);if(te(we))return Pt(Ne,pe,we,at);or(Ne,we)}return typeof we=="string"&&we!==""||typeof we=="number"?(we=""+we,pe!==null&&pe.tag===6?(b(Ne,pe.sibling),pe=T(pe,we),pe.return=Ne,Ne=pe):(b(Ne,pe),pe=r2(we,Ne.mode,at),pe.return=Ne,Ne=pe),z(Ne)):b(Ne,pe)}return Wn}var zn=lr(!0),cn=lr(!1),zs=ho(null),zt=null,Vt=null,qn=null;function za(){qn=Vt=zt=null}function Tf(c){var f=zs.current;on(zs),c._currentValue=f}function hN(c,f,b){for(;c!==null;){var w=c.alternate;if((c.childLanes&f)!==f?(c.childLanes|=f,w!==null&&(w.childLanes|=f)):w!==null&&(w.childLanes&f)!==f&&(w.childLanes|=f),c===b)break;c=c.return}}function Of(c,f){zt=c,qn=Vt=null,c=c.dependencies,c!==null&&c.firstContext!==null&&((c.lanes&f)!==0&&(qs=!0),c.firstContext=null)}function Li(c){var f=c._currentValue;if(qn!==c)if(c={context:c,memoizedValue:f,next:null},Vt===null){if(zt===null)throw Error(r(308));Vt=c,zt.dependencies={lanes:0,firstContext:c}}else Vt=Vt.next=c;return f}var gu=null;function gN(c){gu===null?gu=[c]:gu.push(c)}function V5(c,f,b,w){var T=f.interleaved;return T===null?(b.next=b,gN(f)):(b.next=T.next,T.next=b),f.interleaved=b,Zl(c,w)}function Zl(c,f){c.lanes|=f;var b=c.alternate;for(b!==null&&(b.lanes|=f),b=c,c=c.return;c!==null;)c.childLanes|=f,b=c.alternate,b!==null&&(b.childLanes|=f),b=c,c=c.return;return b.tag===3?b.stateNode:null}var id=!1;function xN(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Y5(c,f){c=c.updateQueue,f.updateQueue===c&&(f.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function Jl(c,f){return{eventTime:c,lane:f,tag:0,payload:null,callback:null,next:null}}function od(c,f,b){var w=c.updateQueue;if(w===null)return null;if(w=w.shared,(Br&2)!==0){var T=w.pending;return T===null?f.next=f:(f.next=T.next,T.next=f),w.pending=f,Zl(c,b)}return T=w.interleaved,T===null?(f.next=f,gN(w)):(f.next=T.next,T.next=f),w.interleaved=f,Zl(c,b)}function rx(c,f,b){if(f=f.updateQueue,f!==null&&(f=f.shared,(b&4194240)!==0)){var w=f.lanes;w&=c.pendingLanes,b|=w,f.lanes=b,ys(c,b)}}function X5(c,f){var b=c.updateQueue,w=c.alternate;if(w!==null&&(w=w.updateQueue,b===w)){var T=null,R=null;if(b=b.firstBaseUpdate,b!==null){do{var z={eventTime:b.eventTime,lane:b.lane,tag:b.tag,payload:b.payload,callback:b.callback,next:null};R===null?T=R=z:R=R.next=z,b=b.next}while(b!==null);R===null?T=R=f:R=R.next=f}else T=R=f;b={baseState:w.baseState,firstBaseUpdate:T,lastBaseUpdate:R,shared:w.shared,effects:w.effects},c.updateQueue=b;return}c=b.lastBaseUpdate,c===null?b.firstBaseUpdate=f:c.next=f,b.lastBaseUpdate=f}function nx(c,f,b,w){var T=c.updateQueue;id=!1;var R=T.firstBaseUpdate,z=T.lastBaseUpdate,ne=T.shared.pending;if(ne!==null){T.shared.pending=null;var ue=ne,Ce=ue.next;ue.next=null,z===null?R=Ce:z.next=Ce,z=ue;var qe=c.alternate;qe!==null&&(qe=qe.updateQueue,ne=qe.lastBaseUpdate,ne!==z&&(ne===null?qe.firstBaseUpdate=Ce:ne.next=Ce,qe.lastBaseUpdate=ue))}if(R!==null){var Qe=T.baseState;z=0,qe=Ce=ue=null,ne=R;do{var ze=ne.lane,yt=ne.eventTime;if((w&ze)===ze){qe!==null&&(qe=qe.next={eventTime:yt,lane:0,tag:ne.tag,payload:ne.payload,callback:ne.callback,next:null});e:{var Ct=c,Pt=ne;switch(ze=f,yt=b,Pt.tag){case 1:if(Ct=Pt.payload,typeof Ct=="function"){Qe=Ct.call(yt,Qe,ze);break e}Qe=Ct;break e;case 3:Ct.flags=Ct.flags&-65537|128;case 0:if(Ct=Pt.payload,ze=typeof Ct=="function"?Ct.call(yt,Qe,ze):Ct,ze==null)break e;Qe=re({},Qe,ze);break e;case 2:id=!0}}ne.callback!==null&&ne.lane!==0&&(c.flags|=64,ze=T.effects,ze===null?T.effects=[ne]:ze.push(ne))}else yt={eventTime:yt,lane:ze,tag:ne.tag,payload:ne.payload,callback:ne.callback,next:null},qe===null?(Ce=qe=yt,ue=Qe):qe=qe.next=yt,z|=ze;if(ne=ne.next,ne===null){if(ne=T.shared.pending,ne===null)break;ze=ne,ne=ze.next,ze.next=null,T.lastBaseUpdate=ze,T.shared.pending=null}}while(!0);if(qe===null&&(ue=Qe),T.baseState=ue,T.firstBaseUpdate=Ce,T.lastBaseUpdate=qe,f=T.shared.interleaved,f!==null){T=f;do z|=T.lane,T=T.next;while(T!==f)}else R===null&&(T.shared.lanes=0);yu|=z,c.lanes=z,c.memoizedState=Qe}}function Q5(c,f,b){if(c=f.effects,f.effects=null,c!==null)for(f=0;f<c.length;f++){var w=c[f],T=w.callback;if(T!==null){if(w.callback=null,w=b,typeof T!="function")throw Error(r(191,T));T.call(w)}}}var ih={},el=ho(ih),oh=ho(ih),lh=ho(ih);function xu(c){if(c===ih)throw Error(r(174));return c}function bN(c,f){switch(Fr(lh,f),Fr(oh,c),Fr(el,ih),c=f.nodeType,c){case 9:case 11:f=(f=f.documentElement)?f.namespaceURI:br(null,"");break;default:c=c===8?f.parentNode:f,f=c.namespaceURI||null,c=c.tagName,f=br(f,c)}on(el),Fr(el,f)}function kf(){on(el),on(oh),on(lh)}function Z5(c){xu(lh.current);var f=xu(el.current),b=br(f,c.type);f!==b&&(Fr(oh,c),Fr(el,b))}function yN(c){oh.current===c&&(on(el),on(oh))}var Tn=ho(0);function ax(c){for(var f=c;f!==null;){if(f.tag===13){var b=f.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||b.data==="$?"||b.data==="$!"))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var vN=[];function NN(){for(var c=0;c<vN.length;c++)vN[c]._workInProgressVersionPrimary=null;vN.length=0}var sx=A.ReactCurrentDispatcher,SN=A.ReactCurrentBatchConfig,bu=0,On=null,da=null,ka=null,ix=!1,ch=!1,dh=0,BW=0;function ss(){throw Error(r(321))}function jN(c,f){if(f===null)return!1;for(var b=0;b<f.length&&b<c.length;b++)if(!Bs(c[b],f[b]))return!1;return!0}function wN(c,f,b,w,T,R){if(bu=R,On=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,sx.current=c===null||c.memoizedState===null?KW:zW,c=b(w,T),ch){R=0;do{if(ch=!1,dh=0,25<=R)throw Error(r(301));R+=1,ka=da=null,f.updateQueue=null,sx.current=qW,c=b(w,T)}while(ch)}if(sx.current=cx,f=da!==null&&da.next!==null,bu=0,ka=da=On=null,ix=!1,f)throw Error(r(300));return c}function EN(){var c=dh!==0;return dh=0,c}function tl(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ka===null?On.memoizedState=ka=c:ka=ka.next=c,ka}function $i(){if(da===null){var c=On.alternate;c=c!==null?c.memoizedState:null}else c=da.next;var f=ka===null?On.memoizedState:ka.next;if(f!==null)ka=f,da=c;else{if(c===null)throw Error(r(310));da=c,c={memoizedState:da.memoizedState,baseState:da.baseState,baseQueue:da.baseQueue,queue:da.queue,next:null},ka===null?On.memoizedState=ka=c:ka=ka.next=c}return ka}function uh(c,f){return typeof f=="function"?f(c):f}function AN(c){var f=$i(),b=f.queue;if(b===null)throw Error(r(311));b.lastRenderedReducer=c;var w=da,T=w.baseQueue,R=b.pending;if(R!==null){if(T!==null){var z=T.next;T.next=R.next,R.next=z}w.baseQueue=T=R,b.pending=null}if(T!==null){R=T.next,w=w.baseState;var ne=z=null,ue=null,Ce=R;do{var qe=Ce.lane;if((bu&qe)===qe)ue!==null&&(ue=ue.next={lane:0,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null}),w=Ce.hasEagerState?Ce.eagerState:c(w,Ce.action);else{var Qe={lane:qe,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null};ue===null?(ne=ue=Qe,z=w):ue=ue.next=Qe,On.lanes|=qe,yu|=qe}Ce=Ce.next}while(Ce!==null&&Ce!==R);ue===null?z=w:ue.next=ne,Bs(w,f.memoizedState)||(qs=!0),f.memoizedState=w,f.baseState=z,f.baseQueue=ue,b.lastRenderedState=w}if(c=b.interleaved,c!==null){T=c;do R=T.lane,On.lanes|=R,yu|=R,T=T.next;while(T!==c)}else T===null&&(b.lanes=0);return[f.memoizedState,b.dispatch]}function CN(c){var f=$i(),b=f.queue;if(b===null)throw Error(r(311));b.lastRenderedReducer=c;var w=b.dispatch,T=b.pending,R=f.memoizedState;if(T!==null){b.pending=null;var z=T=T.next;do R=c(R,z.action),z=z.next;while(z!==T);Bs(R,f.memoizedState)||(qs=!0),f.memoizedState=R,f.baseQueue===null&&(f.baseState=R),b.lastRenderedState=R}return[R,w]}function J5(){}function e3(c,f){var b=On,w=$i(),T=f(),R=!Bs(w.memoizedState,T);if(R&&(w.memoizedState=T,qs=!0),w=w.queue,_N(n3.bind(null,b,w,c),[c]),w.getSnapshot!==f||R||ka!==null&&ka.memoizedState.tag&1){if(b.flags|=2048,fh(9,r3.bind(null,b,w,T,f),void 0,null),Ra===null)throw Error(r(349));(bu&30)!==0||t3(b,f,T)}return T}function t3(c,f,b){c.flags|=16384,c={getSnapshot:f,value:b},f=On.updateQueue,f===null?(f={lastEffect:null,stores:null},On.updateQueue=f,f.stores=[c]):(b=f.stores,b===null?f.stores=[c]:b.push(c))}function r3(c,f,b,w){f.value=b,f.getSnapshot=w,a3(f)&&s3(c)}function n3(c,f,b){return b(function(){a3(f)&&s3(c)})}function a3(c){var f=c.getSnapshot;c=c.value;try{var b=f();return!Bs(c,b)}catch{return!0}}function s3(c){var f=Zl(c,1);f!==null&&No(f,c,1,-1)}function i3(c){var f=tl();return typeof c=="function"&&(c=c()),f.memoizedState=f.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:uh,lastRenderedState:c},f.queue=c,c=c.dispatch=GW.bind(null,On,c),[f.memoizedState,c]}function fh(c,f,b,w){return c={tag:c,create:f,destroy:b,deps:w,next:null},f=On.updateQueue,f===null?(f={lastEffect:null,stores:null},On.updateQueue=f,f.lastEffect=c.next=c):(b=f.lastEffect,b===null?f.lastEffect=c.next=c:(w=b.next,b.next=c,c.next=w,f.lastEffect=c)),c}function o3(){return $i().memoizedState}function ox(c,f,b,w){var T=tl();On.flags|=c,T.memoizedState=fh(1|f,b,void 0,w===void 0?null:w)}function lx(c,f,b,w){var T=$i();w=w===void 0?null:w;var R=void 0;if(da!==null){var z=da.memoizedState;if(R=z.destroy,w!==null&&jN(w,z.deps)){T.memoizedState=fh(f,b,R,w);return}}On.flags|=c,T.memoizedState=fh(1|f,b,R,w)}function l3(c,f){return ox(8390656,8,c,f)}function _N(c,f){return lx(2048,8,c,f)}function c3(c,f){return lx(4,2,c,f)}function d3(c,f){return lx(4,4,c,f)}function u3(c,f){if(typeof f=="function")return c=c(),f(c),function(){f(null)};if(f!=null)return c=c(),f.current=c,function(){f.current=null}}function f3(c,f,b){return b=b!=null?b.concat([c]):null,lx(4,4,u3.bind(null,f,c),b)}function TN(){}function m3(c,f){var b=$i();f=f===void 0?null:f;var w=b.memoizedState;return w!==null&&f!==null&&jN(f,w[1])?w[0]:(b.memoizedState=[c,f],c)}function p3(c,f){var b=$i();f=f===void 0?null:f;var w=b.memoizedState;return w!==null&&f!==null&&jN(f,w[1])?w[0]:(c=c(),b.memoizedState=[c,f],c)}function h3(c,f,b){return(bu&21)===0?(c.baseState&&(c.baseState=!1,qs=!0),c.memoizedState=b):(Bs(b,f)||(b=ht(),On.lanes|=b,yu|=b,c.baseState=!0),f)}function UW(c,f){var b=Wt;Wt=b!==0&&4>b?b:4,c(!0);var w=SN.transition;SN.transition={};try{c(!1),f()}finally{Wt=b,SN.transition=w}}function g3(){return $i().memoizedState}function HW(c,f,b){var w=ud(c);if(b={lane:w,action:b,hasEagerState:!1,eagerState:null,next:null},x3(c))b3(f,b);else if(b=V5(c,f,b,w),b!==null){var T=Cs();No(b,c,w,T),y3(b,f,w)}}function GW(c,f,b){var w=ud(c),T={lane:w,action:b,hasEagerState:!1,eagerState:null,next:null};if(x3(c))b3(f,T);else{var R=c.alternate;if(c.lanes===0&&(R===null||R.lanes===0)&&(R=f.lastRenderedReducer,R!==null))try{var z=f.lastRenderedState,ne=R(z,b);if(T.hasEagerState=!0,T.eagerState=ne,Bs(ne,z)){var ue=f.interleaved;ue===null?(T.next=T,gN(f)):(T.next=ue.next,ue.next=T),f.interleaved=T;return}}catch{}finally{}b=V5(c,f,T,w),b!==null&&(T=Cs(),No(b,c,w,T),y3(b,f,w))}}function x3(c){var f=c.alternate;return c===On||f!==null&&f===On}function b3(c,f){ch=ix=!0;var b=c.pending;b===null?f.next=f:(f.next=b.next,b.next=f),c.pending=f}function y3(c,f,b){if((b&4194240)!==0){var w=f.lanes;w&=c.pendingLanes,b|=w,f.lanes=b,ys(c,b)}}var cx={readContext:Li,useCallback:ss,useContext:ss,useEffect:ss,useImperativeHandle:ss,useInsertionEffect:ss,useLayoutEffect:ss,useMemo:ss,useReducer:ss,useRef:ss,useState:ss,useDebugValue:ss,useDeferredValue:ss,useTransition:ss,useMutableSource:ss,useSyncExternalStore:ss,useId:ss,unstable_isNewReconciler:!1},KW={readContext:Li,useCallback:function(c,f){return tl().memoizedState=[c,f===void 0?null:f],c},useContext:Li,useEffect:l3,useImperativeHandle:function(c,f,b){return b=b!=null?b.concat([c]):null,ox(4194308,4,u3.bind(null,f,c),b)},useLayoutEffect:function(c,f){return ox(4194308,4,c,f)},useInsertionEffect:function(c,f){return ox(4,2,c,f)},useMemo:function(c,f){var b=tl();return f=f===void 0?null:f,c=c(),b.memoizedState=[c,f],c},useReducer:function(c,f,b){var w=tl();return f=b!==void 0?b(f):f,w.memoizedState=w.baseState=f,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:f},w.queue=c,c=c.dispatch=HW.bind(null,On,c),[w.memoizedState,c]},useRef:function(c){var f=tl();return c={current:c},f.memoizedState=c},useState:i3,useDebugValue:TN,useDeferredValue:function(c){return tl().memoizedState=c},useTransition:function(){var c=i3(!1),f=c[0];return c=UW.bind(null,c[1]),tl().memoizedState=c,[f,c]},useMutableSource:function(){},useSyncExternalStore:function(c,f,b){var w=On,T=tl();if(ln){if(b===void 0)throw Error(r(407));b=b()}else{if(b=f(),Ra===null)throw Error(r(349));(bu&30)!==0||t3(w,f,b)}T.memoizedState=b;var R={value:b,getSnapshot:f};return T.queue=R,l3(n3.bind(null,w,R,c),[c]),w.flags|=2048,fh(9,r3.bind(null,w,R,b,f),void 0,null),b},useId:function(){var c=tl(),f=Ra.identifierPrefix;if(ln){var b=Es,w=ws;b=(w&~(1<<32-Zr(w)-1)).toString(32)+b,f=":"+f+"R"+b,b=dh++,0<b&&(f+="H"+b.toString(32)),f+=":"}else b=BW++,f=":"+f+"r"+b.toString(32)+":";return c.memoizedState=f},unstable_isNewReconciler:!1},zW={readContext:Li,useCallback:m3,useContext:Li,useEffect:_N,useImperativeHandle:f3,useInsertionEffect:c3,useLayoutEffect:d3,useMemo:p3,useReducer:AN,useRef:o3,useState:function(){return AN(uh)},useDebugValue:TN,useDeferredValue:function(c){var f=$i();return h3(f,da.memoizedState,c)},useTransition:function(){var c=AN(uh)[0],f=$i().memoizedState;return[c,f]},useMutableSource:J5,useSyncExternalStore:e3,useId:g3,unstable_isNewReconciler:!1},qW={readContext:Li,useCallback:m3,useContext:Li,useEffect:_N,useImperativeHandle:f3,useInsertionEffect:c3,useLayoutEffect:d3,useMemo:p3,useReducer:CN,useRef:o3,useState:function(){return CN(uh)},useDebugValue:TN,useDeferredValue:function(c){var f=$i();return da===null?f.memoizedState=c:h3(f,da.memoizedState,c)},useTransition:function(){var c=CN(uh)[0],f=$i().memoizedState;return[c,f]},useMutableSource:J5,useSyncExternalStore:e3,useId:g3,unstable_isNewReconciler:!1};function bo(c,f){if(c&&c.defaultProps){f=re({},f),c=c.defaultProps;for(var b in c)f[b]===void 0&&(f[b]=c[b]);return f}return f}function ON(c,f,b,w){f=c.memoizedState,b=b(w,f),b=b==null?f:re({},f,b),c.memoizedState=b,c.lanes===0&&(c.updateQueue.baseState=b)}var dx={isMounted:function(c){return(c=c._reactInternals)?an(c)===c:!1},enqueueSetState:function(c,f,b){c=c._reactInternals;var w=Cs(),T=ud(c),R=Jl(w,T);R.payload=f,b!=null&&(R.callback=b),f=od(c,R,T),f!==null&&(No(f,c,T,w),rx(f,c,T))},enqueueReplaceState:function(c,f,b){c=c._reactInternals;var w=Cs(),T=ud(c),R=Jl(w,T);R.tag=1,R.payload=f,b!=null&&(R.callback=b),f=od(c,R,T),f!==null&&(No(f,c,T,w),rx(f,c,T))},enqueueForceUpdate:function(c,f){c=c._reactInternals;var b=Cs(),w=ud(c),T=Jl(b,w);T.tag=2,f!=null&&(T.callback=f),f=od(c,T,w),f!==null&&(No(f,c,w,b),rx(f,c,w))}};function v3(c,f,b,w,T,R,z){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(w,R,z):f.prototype&&f.prototype.isPureReactComponent?!Gc(b,w)||!Gc(T,R):!0}function N3(c,f,b){var w=!1,T=Qn,R=f.contextType;return typeof R=="object"&&R!==null?R=Li(R):(T=as(f)?Ii:_a.current,w=f.contextTypes,R=(w=w!=null)?Ql(c,T):Qn),f=new f(b,R),c.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=dx,c.stateNode=f,f._reactInternals=c,w&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=T,c.__reactInternalMemoizedMaskedChildContext=R),f}function S3(c,f,b,w){c=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(b,w),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(b,w),f.state!==c&&dx.enqueueReplaceState(f,f.state,null)}function kN(c,f,b,w){var T=c.stateNode;T.props=b,T.state=c.memoizedState,T.refs={},xN(c);var R=f.contextType;typeof R=="object"&&R!==null?T.context=Li(R):(R=as(f)?Ii:_a.current,T.context=Ql(c,R)),T.state=c.memoizedState,R=f.getDerivedStateFromProps,typeof R=="function"&&(ON(c,f,R,b),T.state=c.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(f=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),f!==T.state&&dx.enqueueReplaceState(T,T.state,null),nx(c,b,T,w),T.state=c.memoizedState),typeof T.componentDidMount=="function"&&(c.flags|=4194308)}function Rf(c,f){try{var b="",w=f;do b+=oe(w),w=w.return;while(w);var T=b}catch(R){T=`
Error generating stack: `+R.message+`
`+R.stack}return{value:c,source:f,stack:T,digest:null}}function RN(c,f,b){return{value:c,source:null,stack:b??null,digest:f??null}}function PN(c,f){try{console.error(f.value)}catch(b){setTimeout(function(){throw b})}}var WW=typeof WeakMap=="function"?WeakMap:Map;function j3(c,f,b){b=Jl(-1,b),b.tag=3,b.payload={element:null};var w=f.value;return b.callback=function(){xx||(xx=!0,VN=w),PN(c,f)},b}function w3(c,f,b){b=Jl(-1,b),b.tag=3;var w=c.type.getDerivedStateFromError;if(typeof w=="function"){var T=f.value;b.payload=function(){return w(T)},b.callback=function(){PN(c,f)}}var R=c.stateNode;return R!==null&&typeof R.componentDidCatch=="function"&&(b.callback=function(){PN(c,f),typeof w!="function"&&(cd===null?cd=new Set([this]):cd.add(this));var z=f.stack;this.componentDidCatch(f.value,{componentStack:z!==null?z:""})}),b}function E3(c,f,b){var w=c.pingCache;if(w===null){w=c.pingCache=new WW;var T=new Set;w.set(f,T)}else T=w.get(f),T===void 0&&(T=new Set,w.set(f,T));T.has(b)||(T.add(b),c=oV.bind(null,c,f,b),f.then(c,c))}function A3(c){do{var f;if((f=c.tag===13)&&(f=c.memoizedState,f=f!==null?f.dehydrated!==null:!0),f)return c;c=c.return}while(c!==null);return null}function C3(c,f,b,w,T){return(c.mode&1)===0?(c===f?c.flags|=65536:(c.flags|=128,b.flags|=131072,b.flags&=-52805,b.tag===1&&(b.alternate===null?b.tag=17:(f=Jl(-1,1),f.tag=2,od(b,f,1))),b.lanes|=1),c):(c.flags|=65536,c.lanes=T,c)}var VW=A.ReactCurrentOwner,qs=!1;function As(c,f,b,w){f.child=c===null?cn(f,null,b,w):zn(f,c.child,b,w)}function _3(c,f,b,w,T){b=b.render;var R=f.ref;return Of(f,T),w=wN(c,f,b,w,R,T),b=EN(),c!==null&&!qs?(f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~T,ec(c,f,T)):(ln&&b&&hu(f),f.flags|=1,As(c,f,w,T),f.child)}function T3(c,f,b,w,T){if(c===null){var R=b.type;return typeof R=="function"&&!t2(R)&&R.defaultProps===void 0&&b.compare===null&&b.defaultProps===void 0?(f.tag=15,f.type=R,O3(c,f,R,w,T)):(c=jx(b.type,null,w,f,f.mode,T),c.ref=f.ref,c.return=f,f.child=c)}if(R=c.child,(c.lanes&T)===0){var z=R.memoizedProps;if(b=b.compare,b=b!==null?b:Gc,b(z,w)&&c.ref===f.ref)return ec(c,f,T)}return f.flags|=1,c=md(R,w),c.ref=f.ref,c.return=f,f.child=c}function O3(c,f,b,w,T){if(c!==null){var R=c.memoizedProps;if(Gc(R,w)&&c.ref===f.ref)if(qs=!1,f.pendingProps=w=R,(c.lanes&T)!==0)(c.flags&131072)!==0&&(qs=!0);else return f.lanes=c.lanes,ec(c,f,T)}return DN(c,f,b,w,T)}function k3(c,f,b){var w=f.pendingProps,T=w.children,R=c!==null?c.memoizedState:null;if(w.mode==="hidden")if((f.mode&1)===0)f.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fr(Df,pi),pi|=b;else{if((b&1073741824)===0)return c=R!==null?R.baseLanes|b:b,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:c,cachePool:null,transitions:null},f.updateQueue=null,Fr(Df,pi),pi|=c,null;f.memoizedState={baseLanes:0,cachePool:null,transitions:null},w=R!==null?R.baseLanes:b,Fr(Df,pi),pi|=w}else R!==null?(w=R.baseLanes|b,f.memoizedState=null):w=b,Fr(Df,pi),pi|=w;return As(c,f,T,b),f.child}function R3(c,f){var b=f.ref;(c===null&&b!==null||c!==null&&c.ref!==b)&&(f.flags|=512,f.flags|=2097152)}function DN(c,f,b,w,T){var R=as(b)?Ii:_a.current;return R=Ql(f,R),Of(f,T),b=wN(c,f,b,w,R,T),w=EN(),c!==null&&!qs?(f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~T,ec(c,f,T)):(ln&&w&&hu(f),f.flags|=1,As(c,f,b,T),f.child)}function P3(c,f,b,w,T){if(as(b)){var R=!0;fu(f)}else R=!1;if(Of(f,T),f.stateNode===null)fx(c,f),N3(f,b,w),kN(f,b,w,T),w=!0;else if(c===null){var z=f.stateNode,ne=f.memoizedProps;z.props=ne;var ue=z.context,Ce=b.contextType;typeof Ce=="object"&&Ce!==null?Ce=Li(Ce):(Ce=as(b)?Ii:_a.current,Ce=Ql(f,Ce));var qe=b.getDerivedStateFromProps,Qe=typeof qe=="function"||typeof z.getSnapshotBeforeUpdate=="function";Qe||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(ne!==w||ue!==Ce)&&S3(f,z,w,Ce),id=!1;var ze=f.memoizedState;z.state=ze,nx(f,w,z,T),ue=f.memoizedState,ne!==w||ze!==ue||ns.current||id?(typeof qe=="function"&&(ON(f,b,qe,w),ue=f.memoizedState),(ne=id||v3(f,b,ne,w,ze,ue,Ce))?(Qe||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount()),typeof z.componentDidMount=="function"&&(f.flags|=4194308)):(typeof z.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=w,f.memoizedState=ue),z.props=w,z.state=ue,z.context=Ce,w=ne):(typeof z.componentDidMount=="function"&&(f.flags|=4194308),w=!1)}else{z=f.stateNode,Y5(c,f),ne=f.memoizedProps,Ce=f.type===f.elementType?ne:bo(f.type,ne),z.props=Ce,Qe=f.pendingProps,ze=z.context,ue=b.contextType,typeof ue=="object"&&ue!==null?ue=Li(ue):(ue=as(b)?Ii:_a.current,ue=Ql(f,ue));var yt=b.getDerivedStateFromProps;(qe=typeof yt=="function"||typeof z.getSnapshotBeforeUpdate=="function")||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(ne!==Qe||ze!==ue)&&S3(f,z,w,ue),id=!1,ze=f.memoizedState,z.state=ze,nx(f,w,z,T);var Ct=f.memoizedState;ne!==Qe||ze!==Ct||ns.current||id?(typeof yt=="function"&&(ON(f,b,yt,w),Ct=f.memoizedState),(Ce=id||v3(f,b,Ce,w,ze,Ct,ue)||!1)?(qe||typeof z.UNSAFE_componentWillUpdate!="function"&&typeof z.componentWillUpdate!="function"||(typeof z.componentWillUpdate=="function"&&z.componentWillUpdate(w,Ct,ue),typeof z.UNSAFE_componentWillUpdate=="function"&&z.UNSAFE_componentWillUpdate(w,Ct,ue)),typeof z.componentDidUpdate=="function"&&(f.flags|=4),typeof z.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof z.componentDidUpdate!="function"||ne===c.memoizedProps&&ze===c.memoizedState||(f.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||ne===c.memoizedProps&&ze===c.memoizedState||(f.flags|=1024),f.memoizedProps=w,f.memoizedState=Ct),z.props=w,z.state=Ct,z.context=ue,w=Ce):(typeof z.componentDidUpdate!="function"||ne===c.memoizedProps&&ze===c.memoizedState||(f.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||ne===c.memoizedProps&&ze===c.memoizedState||(f.flags|=1024),w=!1)}return IN(c,f,b,w,R,T)}function IN(c,f,b,w,T,R){R3(c,f);var z=(f.flags&128)!==0;if(!w&&!z)return T&&ci(f,b,!1),ec(c,f,R);w=f.stateNode,VW.current=f;var ne=z&&typeof b.getDerivedStateFromError!="function"?null:w.render();return f.flags|=1,c!==null&&z?(f.child=zn(f,c.child,null,R),f.child=zn(f,null,ne,R)):As(c,f,ne,R),f.memoizedState=w.state,T&&ci(f,b,!0),f.child}function D3(c){var f=c.stateNode;f.pendingContext?li(c,f.pendingContext,f.pendingContext!==f.context):f.context&&li(c,f.context,!1),bN(c,f.containerInfo)}function I3(c,f,b,w,T){return tt(),Xe(T),f.flags|=256,As(c,f,b,w),f.child}var MN={dehydrated:null,treeContext:null,retryLane:0};function LN(c){return{baseLanes:c,cachePool:null,transitions:null}}function M3(c,f,b){var w=f.pendingProps,T=Tn.current,R=!1,z=(f.flags&128)!==0,ne;if((ne=z)||(ne=c!==null&&c.memoizedState===null?!1:(T&2)!==0),ne?(R=!0,f.flags&=-129):(c===null||c.memoizedState!==null)&&(T|=1),Fr(Tn,T&1),c===null)return V(f),c=f.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?((f.mode&1)===0?f.lanes=1:c.data==="$!"?f.lanes=8:f.lanes=1073741824,null):(z=w.children,c=w.fallback,R?(w=f.mode,R=f.child,z={mode:"hidden",children:z},(w&1)===0&&R!==null?(R.childLanes=0,R.pendingProps=z):R=wx(z,w,0,null),c=ju(c,w,b,null),R.return=f,c.return=f,R.sibling=c,f.child=R,f.child.memoizedState=LN(b),f.memoizedState=MN,c):$N(f,z));if(T=c.memoizedState,T!==null&&(ne=T.dehydrated,ne!==null))return YW(c,f,z,w,ne,T,b);if(R){R=w.fallback,z=f.mode,T=c.child,ne=T.sibling;var ue={mode:"hidden",children:w.children};return(z&1)===0&&f.child!==T?(w=f.child,w.childLanes=0,w.pendingProps=ue,f.deletions=null):(w=md(T,ue),w.subtreeFlags=T.subtreeFlags&14680064),ne!==null?R=md(ne,R):(R=ju(R,z,b,null),R.flags|=2),R.return=f,w.return=f,w.sibling=R,f.child=w,w=R,R=f.child,z=c.child.memoizedState,z=z===null?LN(b):{baseLanes:z.baseLanes|b,cachePool:null,transitions:z.transitions},R.memoizedState=z,R.childLanes=c.childLanes&~b,f.memoizedState=MN,w}return R=c.child,c=R.sibling,w=md(R,{mode:"visible",children:w.children}),(f.mode&1)===0&&(w.lanes=b),w.return=f,w.sibling=null,c!==null&&(b=f.deletions,b===null?(f.deletions=[c],f.flags|=16):b.push(c)),f.child=w,f.memoizedState=null,w}function $N(c,f){return f=wx({mode:"visible",children:f},c.mode,0,null),f.return=c,c.child=f}function ux(c,f,b,w){return w!==null&&Xe(w),zn(f,c.child,null,b),c=$N(f,f.pendingProps.children),c.flags|=2,f.memoizedState=null,c}function YW(c,f,b,w,T,R,z){if(b)return f.flags&256?(f.flags&=-257,w=RN(Error(r(422))),ux(c,f,z,w)):f.memoizedState!==null?(f.child=c.child,f.flags|=128,null):(R=w.fallback,T=f.mode,w=wx({mode:"visible",children:w.children},T,0,null),R=ju(R,T,z,null),R.flags|=2,w.return=f,R.return=f,w.sibling=R,f.child=w,(f.mode&1)!==0&&zn(f,c.child,null,z),f.child.memoizedState=LN(z),f.memoizedState=MN,R);if((f.mode&1)===0)return ux(c,f,z,null);if(T.data==="$!"){if(w=T.nextSibling&&T.nextSibling.dataset,w)var ne=w.dgst;return w=ne,R=Error(r(419)),w=RN(R,w,void 0),ux(c,f,z,w)}if(ne=(z&c.childLanes)!==0,qs||ne){if(w=Ra,w!==null){switch(z&-z){case 4:T=2;break;case 16:T=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:T=32;break;case 536870912:T=268435456;break;default:T=0}T=(T&(w.suspendedLanes|z))!==0?0:T,T!==0&&T!==R.retryLane&&(R.retryLane=T,Zl(c,T),No(w,c,T,-1))}return e2(),w=RN(Error(r(421))),ux(c,f,z,w)}return T.data==="$?"?(f.flags|=128,f.child=c.child,f=lV.bind(null,c),T._reactRetry=f,null):(c=R.treeContext,Zn=js(T.nextSibling),wn=f,ln=!0,mi=null,c!==null&&(Ka[Ta++]=ws,Ka[Ta++]=Es,Ka[Ta++]=fi,ws=c.id,Es=c.overflow,fi=f),f=$N(f,w.children),f.flags|=4096,f)}function L3(c,f,b){c.lanes|=f;var w=c.alternate;w!==null&&(w.lanes|=f),hN(c.return,f,b)}function FN(c,f,b,w,T){var R=c.memoizedState;R===null?c.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:w,tail:b,tailMode:T}:(R.isBackwards=f,R.rendering=null,R.renderingStartTime=0,R.last=w,R.tail=b,R.tailMode=T)}function $3(c,f,b){var w=f.pendingProps,T=w.revealOrder,R=w.tail;if(As(c,f,w.children,b),w=Tn.current,(w&2)!==0)w=w&1|2,f.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=f.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&L3(c,b,f);else if(c.tag===19)L3(c,b,f);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===f)break e;for(;c.sibling===null;){if(c.return===null||c.return===f)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}w&=1}if(Fr(Tn,w),(f.mode&1)===0)f.memoizedState=null;else switch(T){case"forwards":for(b=f.child,T=null;b!==null;)c=b.alternate,c!==null&&ax(c)===null&&(T=b),b=b.sibling;b=T,b===null?(T=f.child,f.child=null):(T=b.sibling,b.sibling=null),FN(f,!1,T,b,R);break;case"backwards":for(b=null,T=f.child,f.child=null;T!==null;){if(c=T.alternate,c!==null&&ax(c)===null){f.child=T;break}c=T.sibling,T.sibling=b,b=T,T=c}FN(f,!0,b,null,R);break;case"together":FN(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function fx(c,f){(f.mode&1)===0&&c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2)}function ec(c,f,b){if(c!==null&&(f.dependencies=c.dependencies),yu|=f.lanes,(b&f.childLanes)===0)return null;if(c!==null&&f.child!==c.child)throw Error(r(153));if(f.child!==null){for(c=f.child,b=md(c,c.pendingProps),f.child=b,b.return=f;c.sibling!==null;)c=c.sibling,b=b.sibling=md(c,c.pendingProps),b.return=f;b.sibling=null}return f.child}function XW(c,f,b){switch(f.tag){case 3:D3(f),tt();break;case 5:Z5(f);break;case 1:as(f.type)&&fu(f);break;case 4:bN(f,f.stateNode.containerInfo);break;case 10:var w=f.type._context,T=f.memoizedProps.value;Fr(zs,w._currentValue),w._currentValue=T;break;case 13:if(w=f.memoizedState,w!==null)return w.dehydrated!==null?(Fr(Tn,Tn.current&1),f.flags|=128,null):(b&f.child.childLanes)!==0?M3(c,f,b):(Fr(Tn,Tn.current&1),c=ec(c,f,b),c!==null?c.sibling:null);Fr(Tn,Tn.current&1);break;case 19:if(w=(b&f.childLanes)!==0,(c.flags&128)!==0){if(w)return $3(c,f,b);f.flags|=128}if(T=f.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),Fr(Tn,Tn.current),w)break;return null;case 22:case 23:return f.lanes=0,k3(c,f,b)}return ec(c,f,b)}var F3,BN,B3,U3;F3=function(c,f){for(var b=f.child;b!==null;){if(b.tag===5||b.tag===6)c.appendChild(b.stateNode);else if(b.tag!==4&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===f)break;for(;b.sibling===null;){if(b.return===null||b.return===f)return;b=b.return}b.sibling.return=b.return,b=b.sibling}},BN=function(){},B3=function(c,f,b,w){var T=c.memoizedProps;if(T!==w){c=f.stateNode,xu(el.current);var R=null;switch(b){case"input":T=Q(c,T),w=Q(c,w),R=[];break;case"select":T=re({},T,{value:void 0}),w=re({},w,{value:void 0}),R=[];break;case"textarea":T=Fe(c,T),w=Fe(c,w),R=[];break;default:typeof T.onClick!="function"&&typeof w.onClick=="function"&&(c.onclick=Zc)}jn(b,w);var z;b=null;for(Ce in T)if(!w.hasOwnProperty(Ce)&&T.hasOwnProperty(Ce)&&T[Ce]!=null)if(Ce==="style"){var ne=T[Ce];for(z in ne)ne.hasOwnProperty(z)&&(b||(b={}),b[z]="")}else Ce!=="dangerouslySetInnerHTML"&&Ce!=="children"&&Ce!=="suppressContentEditableWarning"&&Ce!=="suppressHydrationWarning"&&Ce!=="autoFocus"&&(s.hasOwnProperty(Ce)?R||(R=[]):(R=R||[]).push(Ce,null));for(Ce in w){var ue=w[Ce];if(ne=T?.[Ce],w.hasOwnProperty(Ce)&&ue!==ne&&(ue!=null||ne!=null))if(Ce==="style")if(ne){for(z in ne)!ne.hasOwnProperty(z)||ue&&ue.hasOwnProperty(z)||(b||(b={}),b[z]="");for(z in ue)ue.hasOwnProperty(z)&&ne[z]!==ue[z]&&(b||(b={}),b[z]=ue[z])}else b||(R||(R=[]),R.push(Ce,b)),b=ue;else Ce==="dangerouslySetInnerHTML"?(ue=ue?ue.__html:void 0,ne=ne?ne.__html:void 0,ue!=null&&ne!==ue&&(R=R||[]).push(Ce,ue)):Ce==="children"?typeof ue!="string"&&typeof ue!="number"||(R=R||[]).push(Ce,""+ue):Ce!=="suppressContentEditableWarning"&&Ce!=="suppressHydrationWarning"&&(s.hasOwnProperty(Ce)?(ue!=null&&Ce==="onScroll"&&tn("scroll",c),R||ne===ue||(R=[])):(R=R||[]).push(Ce,ue))}b&&(R=R||[]).push("style",b);var Ce=R;(f.updateQueue=Ce)&&(f.flags|=4)}},U3=function(c,f,b,w){b!==w&&(f.flags|=4)};function mh(c,f){if(!ln)switch(c.tailMode){case"hidden":f=c.tail;for(var b=null;f!==null;)f.alternate!==null&&(b=f),f=f.sibling;b===null?c.tail=null:b.sibling=null;break;case"collapsed":b=c.tail;for(var w=null;b!==null;)b.alternate!==null&&(w=b),b=b.sibling;w===null?f||c.tail===null?c.tail=null:c.tail.sibling=null:w.sibling=null}}function is(c){var f=c.alternate!==null&&c.alternate.child===c.child,b=0,w=0;if(f)for(var T=c.child;T!==null;)b|=T.lanes|T.childLanes,w|=T.subtreeFlags&14680064,w|=T.flags&14680064,T.return=c,T=T.sibling;else for(T=c.child;T!==null;)b|=T.lanes|T.childLanes,w|=T.subtreeFlags,w|=T.flags,T.return=c,T=T.sibling;return c.subtreeFlags|=w,c.childLanes=b,f}function QW(c,f,b){var w=f.pendingProps;switch(Mi(f),f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return is(f),null;case 1:return as(f.type)&&Af(),is(f),null;case 3:return w=f.stateNode,kf(),on(ns),on(_a),NN(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(c===null||c.child===null)&&(me(f)?f.flags|=4:c===null||c.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,mi!==null&&(QN(mi),mi=null))),BN(c,f),is(f),null;case 5:yN(f);var T=xu(lh.current);if(b=f.type,c!==null&&f.stateNode!=null)B3(c,f,b,w,T),c.ref!==f.ref&&(f.flags|=512,f.flags|=2097152);else{if(!w){if(f.stateNode===null)throw Error(r(166));return is(f),null}if(c=xu(el.current),me(f)){w=f.stateNode,b=f.type;var R=f.memoizedProps;switch(w[Ri]=f,w[Zo]=R,c=(f.mode&1)!==0,b){case"dialog":tn("cancel",w),tn("close",w);break;case"iframe":case"object":case"embed":tn("load",w);break;case"video":case"audio":for(T=0;T<Vc.length;T++)tn(Vc[T],w);break;case"source":tn("error",w);break;case"img":case"image":case"link":tn("error",w),tn("load",w);break;case"details":tn("toggle",w);break;case"input":he(w,R),tn("invalid",w);break;case"select":w._wrapperState={wasMultiple:!!R.multiple},tn("invalid",w);break;case"textarea":Et(w,R),tn("invalid",w)}jn(b,R),T=null;for(var z in R)if(R.hasOwnProperty(z)){var ne=R[z];z==="children"?typeof ne=="string"?w.textContent!==ne&&(R.suppressHydrationWarning!==!0&&oi(w.textContent,ne,c),T=["children",ne]):typeof ne=="number"&&w.textContent!==""+ne&&(R.suppressHydrationWarning!==!0&&oi(w.textContent,ne,c),T=["children",""+ne]):s.hasOwnProperty(z)&&ne!=null&&z==="onScroll"&&tn("scroll",w)}switch(b){case"input":ye(w),je(w,R,!0);break;case"textarea":ye(w),Be(w);break;case"select":case"option":break;default:typeof R.onClick=="function"&&(w.onclick=Zc)}w=T,f.updateQueue=w,w!==null&&(f.flags|=4)}else{z=T.nodeType===9?T:T.ownerDocument,c==="http://www.w3.org/1999/xhtml"&&(c=tr(b)),c==="http://www.w3.org/1999/xhtml"?b==="script"?(c=z.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):typeof w.is=="string"?c=z.createElement(b,{is:w.is}):(c=z.createElement(b),b==="select"&&(z=c,w.multiple?z.multiple=!0:w.size&&(z.size=w.size))):c=z.createElementNS(c,b),c[Ri]=f,c[Zo]=w,F3(c,f,!1,!1),f.stateNode=c;e:{switch(z=rt(b,w),b){case"dialog":tn("cancel",c),tn("close",c),T=w;break;case"iframe":case"object":case"embed":tn("load",c),T=w;break;case"video":case"audio":for(T=0;T<Vc.length;T++)tn(Vc[T],c);T=w;break;case"source":tn("error",c),T=w;break;case"img":case"image":case"link":tn("error",c),tn("load",c),T=w;break;case"details":tn("toggle",c),T=w;break;case"input":he(c,w),T=Q(c,w),tn("invalid",c);break;case"option":T=w;break;case"select":c._wrapperState={wasMultiple:!!w.multiple},T=re({},w,{value:void 0}),tn("invalid",c);break;case"textarea":Et(c,w),T=Fe(c,w),tn("invalid",c);break;default:T=w}jn(b,T),ne=T;for(R in ne)if(ne.hasOwnProperty(R)){var ue=ne[R];R==="style"?Tr(c,ue):R==="dangerouslySetInnerHTML"?(ue=ue?ue.__html:void 0,ue!=null&&yr(c,ue)):R==="children"?typeof ue=="string"?(b!=="textarea"||ue!=="")&&Rr(c,ue):typeof ue=="number"&&Rr(c,""+ue):R!=="suppressContentEditableWarning"&&R!=="suppressHydrationWarning"&&R!=="autoFocus"&&(s.hasOwnProperty(R)?ue!=null&&R==="onScroll"&&tn("scroll",c):ue!=null&&C(c,R,ue,z))}switch(b){case"input":ye(c),je(c,w,!1);break;case"textarea":ye(c),Be(c);break;case"option":w.value!=null&&c.setAttribute("value",""+Ee(w.value));break;case"select":c.multiple=!!w.multiple,R=w.value,R!=null?it(c,!!w.multiple,R,!1):w.defaultValue!=null&&it(c,!!w.multiple,w.defaultValue,!0);break;default:typeof T.onClick=="function"&&(c.onclick=Zc)}switch(b){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}}w&&(f.flags|=4)}f.ref!==null&&(f.flags|=512,f.flags|=2097152)}return is(f),null;case 6:if(c&&f.stateNode!=null)U3(c,f,c.memoizedProps,w);else{if(typeof w!="string"&&f.stateNode===null)throw Error(r(166));if(b=xu(lh.current),xu(el.current),me(f)){if(w=f.stateNode,b=f.memoizedProps,w[Ri]=f,(R=w.nodeValue!==b)&&(c=wn,c!==null))switch(c.tag){case 3:oi(w.nodeValue,b,(c.mode&1)!==0);break;case 5:c.memoizedProps.suppressHydrationWarning!==!0&&oi(w.nodeValue,b,(c.mode&1)!==0)}R&&(f.flags|=4)}else w=(b.nodeType===9?b:b.ownerDocument).createTextNode(w),w[Ri]=f,f.stateNode=w}return is(f),null;case 13:if(on(Tn),w=f.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(ln&&Zn!==null&&(f.mode&1)!==0&&(f.flags&128)===0)le(),tt(),f.flags|=98560,R=!1;else if(R=me(f),w!==null&&w.dehydrated!==null){if(c===null){if(!R)throw Error(r(318));if(R=f.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(r(317));R[Ri]=f}else tt(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;is(f),R=!1}else mi!==null&&(QN(mi),mi=null),R=!0;if(!R)return f.flags&65536?f:null}return(f.flags&128)!==0?(f.lanes=b,f):(w=w!==null,w!==(c!==null&&c.memoizedState!==null)&&w&&(f.child.flags|=8192,(f.mode&1)!==0&&(c===null||(Tn.current&1)!==0?ua===0&&(ua=3):e2())),f.updateQueue!==null&&(f.flags|=4),is(f),null);case 4:return kf(),BN(c,f),c===null&&Gs(f.stateNode.containerInfo),is(f),null;case 10:return Tf(f.type._context),is(f),null;case 17:return as(f.type)&&Af(),is(f),null;case 19:if(on(Tn),R=f.memoizedState,R===null)return is(f),null;if(w=(f.flags&128)!==0,z=R.rendering,z===null)if(w)mh(R,!1);else{if(ua!==0||c!==null&&(c.flags&128)!==0)for(c=f.child;c!==null;){if(z=ax(c),z!==null){for(f.flags|=128,mh(R,!1),w=z.updateQueue,w!==null&&(f.updateQueue=w,f.flags|=4),f.subtreeFlags=0,w=b,b=f.child;b!==null;)R=b,c=w,R.flags&=14680066,z=R.alternate,z===null?(R.childLanes=0,R.lanes=c,R.child=null,R.subtreeFlags=0,R.memoizedProps=null,R.memoizedState=null,R.updateQueue=null,R.dependencies=null,R.stateNode=null):(R.childLanes=z.childLanes,R.lanes=z.lanes,R.child=z.child,R.subtreeFlags=0,R.deletions=null,R.memoizedProps=z.memoizedProps,R.memoizedState=z.memoizedState,R.updateQueue=z.updateQueue,R.type=z.type,c=z.dependencies,R.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),b=b.sibling;return Fr(Tn,Tn.current&1|2),f.child}c=c.sibling}R.tail!==null&&Sr()>If&&(f.flags|=128,w=!0,mh(R,!1),f.lanes=4194304)}else{if(!w)if(c=ax(z),c!==null){if(f.flags|=128,w=!0,b=c.updateQueue,b!==null&&(f.updateQueue=b,f.flags|=4),mh(R,!0),R.tail===null&&R.tailMode==="hidden"&&!z.alternate&&!ln)return is(f),null}else 2*Sr()-R.renderingStartTime>If&&b!==1073741824&&(f.flags|=128,w=!0,mh(R,!1),f.lanes=4194304);R.isBackwards?(z.sibling=f.child,f.child=z):(b=R.last,b!==null?b.sibling=z:f.child=z,R.last=z)}return R.tail!==null?(f=R.tail,R.rendering=f,R.tail=f.sibling,R.renderingStartTime=Sr(),f.sibling=null,b=Tn.current,Fr(Tn,w?b&1|2:b&1),f):(is(f),null);case 22:case 23:return JN(),w=f.memoizedState!==null,c!==null&&c.memoizedState!==null!==w&&(f.flags|=8192),w&&(f.mode&1)!==0?(pi&1073741824)!==0&&(is(f),f.subtreeFlags&6&&(f.flags|=8192)):is(f),null;case 24:return null;case 25:return null}throw Error(r(156,f.tag))}function ZW(c,f){switch(Mi(f),f.tag){case 1:return as(f.type)&&Af(),c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 3:return kf(),on(ns),on(_a),NN(),c=f.flags,(c&65536)!==0&&(c&128)===0?(f.flags=c&-65537|128,f):null;case 5:return yN(f),null;case 13:if(on(Tn),c=f.memoizedState,c!==null&&c.dehydrated!==null){if(f.alternate===null)throw Error(r(340));tt()}return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 19:return on(Tn),null;case 4:return kf(),null;case 10:return Tf(f.type._context),null;case 22:case 23:return JN(),null;case 24:return null;default:return null}}var mx=!1,os=!1,JW=typeof WeakSet=="function"?WeakSet:Set,jt=null;function Pf(c,f){var b=c.ref;if(b!==null)if(typeof b=="function")try{b(null)}catch(w){Mn(c,f,w)}else b.current=null}function UN(c,f,b){try{b()}catch(w){Mn(c,f,w)}}var H3=!1;function eV(c,f){if(Jc=ni,c=vf(),th(c)){if("selectionStart"in c)var b={start:c.selectionStart,end:c.selectionEnd};else e:{b=(b=c.ownerDocument)&&b.defaultView||window;var w=b.getSelection&&b.getSelection();if(w&&w.rangeCount!==0){b=w.anchorNode;var T=w.anchorOffset,R=w.focusNode;w=w.focusOffset;try{b.nodeType,R.nodeType}catch{b=null;break e}var z=0,ne=-1,ue=-1,Ce=0,qe=0,Qe=c,ze=null;t:for(;;){for(var yt;Qe!==b||T!==0&&Qe.nodeType!==3||(ne=z+T),Qe!==R||w!==0&&Qe.nodeType!==3||(ue=z+w),Qe.nodeType===3&&(z+=Qe.nodeValue.length),(yt=Qe.firstChild)!==null;)ze=Qe,Qe=yt;for(;;){if(Qe===c)break t;if(ze===b&&++Ce===T&&(ne=z),ze===R&&++qe===w&&(ue=z),(yt=Qe.nextSibling)!==null)break;Qe=ze,ze=Qe.parentNode}Qe=yt}b=ne===-1||ue===-1?null:{start:ne,end:ue}}else b=null}b=b||{start:0,end:0}}else b=null;for(ki={focusedElem:c,selectionRange:b},ni=!1,jt=f;jt!==null;)if(f=jt,c=f.child,(f.subtreeFlags&1028)!==0&&c!==null)c.return=f,jt=c;else for(;jt!==null;){f=jt;try{var Ct=f.alternate;if((f.flags&1024)!==0)switch(f.tag){case 0:case 11:case 15:break;case 1:if(Ct!==null){var Pt=Ct.memoizedProps,Wn=Ct.memoizedState,Ne=f.stateNode,pe=Ne.getSnapshotBeforeUpdate(f.elementType===f.type?Pt:bo(f.type,Pt),Wn);Ne.__reactInternalSnapshotBeforeUpdate=pe}break;case 3:var we=f.stateNode.containerInfo;we.nodeType===1?we.textContent="":we.nodeType===9&&we.documentElement&&we.removeChild(we.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(at){Mn(f,f.return,at)}if(c=f.sibling,c!==null){c.return=f.return,jt=c;break}jt=f.return}return Ct=H3,H3=!1,Ct}function ph(c,f,b){var w=f.updateQueue;if(w=w!==null?w.lastEffect:null,w!==null){var T=w=w.next;do{if((T.tag&c)===c){var R=T.destroy;T.destroy=void 0,R!==void 0&&UN(f,b,R)}T=T.next}while(T!==w)}}function px(c,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var b=f=f.next;do{if((b.tag&c)===c){var w=b.create;b.destroy=w()}b=b.next}while(b!==f)}}function HN(c){var f=c.ref;if(f!==null){var b=c.stateNode;switch(c.tag){case 5:c=b;break;default:c=b}typeof f=="function"?f(c):f.current=c}}function G3(c){var f=c.alternate;f!==null&&(c.alternate=null,G3(f)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(f=c.stateNode,f!==null&&(delete f[Ri],delete f[Zo],delete f[Pi],delete f[Ef],delete f[rd])),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function K3(c){return c.tag===5||c.tag===3||c.tag===4}function z3(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||K3(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function GN(c,f,b){var w=c.tag;if(w===5||w===6)c=c.stateNode,f?b.nodeType===8?b.parentNode.insertBefore(c,f):b.insertBefore(c,f):(b.nodeType===8?(f=b.parentNode,f.insertBefore(c,b)):(f=b,f.appendChild(c)),b=b._reactRootContainer,b!=null||f.onclick!==null||(f.onclick=Zc));else if(w!==4&&(c=c.child,c!==null))for(GN(c,f,b),c=c.sibling;c!==null;)GN(c,f,b),c=c.sibling}function KN(c,f,b){var w=c.tag;if(w===5||w===6)c=c.stateNode,f?b.insertBefore(c,f):b.appendChild(c);else if(w!==4&&(c=c.child,c!==null))for(KN(c,f,b),c=c.sibling;c!==null;)KN(c,f,b),c=c.sibling}var qa=null,yo=!1;function ld(c,f,b){for(b=b.child;b!==null;)q3(c,f,b),b=b.sibling}function q3(c,f,b){if(_n&&typeof _n.onCommitFiberUnmount=="function")try{_n.onCommitFiberUnmount(xs,b)}catch{}switch(b.tag){case 5:os||Pf(b,f);case 6:var w=qa,T=yo;qa=null,ld(c,f,b),qa=w,yo=T,qa!==null&&(yo?(c=qa,b=b.stateNode,c.nodeType===8?c.parentNode.removeChild(b):c.removeChild(b)):qa.removeChild(b.stateNode));break;case 18:qa!==null&&(yo?(c=qa,b=b.stateNode,c.nodeType===8?sh(c.parentNode,b):c.nodeType===1&&sh(c,b),Aa(c)):sh(qa,b.stateNode));break;case 4:w=qa,T=yo,qa=b.stateNode.containerInfo,yo=!0,ld(c,f,b),qa=w,yo=T;break;case 0:case 11:case 14:case 15:if(!os&&(w=b.updateQueue,w!==null&&(w=w.lastEffect,w!==null))){T=w=w.next;do{var R=T,z=R.destroy;R=R.tag,z!==void 0&&((R&2)!==0||(R&4)!==0)&&UN(b,f,z),T=T.next}while(T!==w)}ld(c,f,b);break;case 1:if(!os&&(Pf(b,f),w=b.stateNode,typeof w.componentWillUnmount=="function"))try{w.props=b.memoizedProps,w.state=b.memoizedState,w.componentWillUnmount()}catch(ne){Mn(b,f,ne)}ld(c,f,b);break;case 21:ld(c,f,b);break;case 22:b.mode&1?(os=(w=os)||b.memoizedState!==null,ld(c,f,b),os=w):ld(c,f,b);break;default:ld(c,f,b)}}function W3(c){var f=c.updateQueue;if(f!==null){c.updateQueue=null;var b=c.stateNode;b===null&&(b=c.stateNode=new JW),f.forEach(function(w){var T=cV.bind(null,c,w);b.has(w)||(b.add(w),w.then(T,T))})}}function vo(c,f){var b=f.deletions;if(b!==null)for(var w=0;w<b.length;w++){var T=b[w];try{var R=c,z=f,ne=z;e:for(;ne!==null;){switch(ne.tag){case 5:qa=ne.stateNode,yo=!1;break e;case 3:qa=ne.stateNode.containerInfo,yo=!0;break e;case 4:qa=ne.stateNode.containerInfo,yo=!0;break e}ne=ne.return}if(qa===null)throw Error(r(160));q3(R,z,T),qa=null,yo=!1;var ue=T.alternate;ue!==null&&(ue.return=null),T.return=null}catch(Ce){Mn(T,f,Ce)}}if(f.subtreeFlags&12854)for(f=f.child;f!==null;)V3(f,c),f=f.sibling}function V3(c,f){var b=c.alternate,w=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(vo(f,c),rl(c),w&4){try{ph(3,c,c.return),px(3,c)}catch(Pt){Mn(c,c.return,Pt)}try{ph(5,c,c.return)}catch(Pt){Mn(c,c.return,Pt)}}break;case 1:vo(f,c),rl(c),w&512&&b!==null&&Pf(b,b.return);break;case 5:if(vo(f,c),rl(c),w&512&&b!==null&&Pf(b,b.return),c.flags&32){var T=c.stateNode;try{Rr(T,"")}catch(Pt){Mn(c,c.return,Pt)}}if(w&4&&(T=c.stateNode,T!=null)){var R=c.memoizedProps,z=b!==null?b.memoizedProps:R,ne=c.type,ue=c.updateQueue;if(c.updateQueue=null,ue!==null)try{ne==="input"&&R.type==="radio"&&R.name!=null&&$e(T,R),rt(ne,z);var Ce=rt(ne,R);for(z=0;z<ue.length;z+=2){var qe=ue[z],Qe=ue[z+1];qe==="style"?Tr(T,Qe):qe==="dangerouslySetInnerHTML"?yr(T,Qe):qe==="children"?Rr(T,Qe):C(T,qe,Qe,Ce)}switch(ne){case"input":Z(T,R);break;case"textarea":Mt(T,R);break;case"select":var ze=T._wrapperState.wasMultiple;T._wrapperState.wasMultiple=!!R.multiple;var yt=R.value;yt!=null?it(T,!!R.multiple,yt,!1):ze!==!!R.multiple&&(R.defaultValue!=null?it(T,!!R.multiple,R.defaultValue,!0):it(T,!!R.multiple,R.multiple?[]:"",!1))}T[Zo]=R}catch(Pt){Mn(c,c.return,Pt)}}break;case 6:if(vo(f,c),rl(c),w&4){if(c.stateNode===null)throw Error(r(162));T=c.stateNode,R=c.memoizedProps;try{T.nodeValue=R}catch(Pt){Mn(c,c.return,Pt)}}break;case 3:if(vo(f,c),rl(c),w&4&&b!==null&&b.memoizedState.isDehydrated)try{Aa(f.containerInfo)}catch(Pt){Mn(c,c.return,Pt)}break;case 4:vo(f,c),rl(c);break;case 13:vo(f,c),rl(c),T=c.child,T.flags&8192&&(R=T.memoizedState!==null,T.stateNode.isHidden=R,!R||T.alternate!==null&&T.alternate.memoizedState!==null||(WN=Sr())),w&4&&W3(c);break;case 22:if(qe=b!==null&&b.memoizedState!==null,c.mode&1?(os=(Ce=os)||qe,vo(f,c),os=Ce):vo(f,c),rl(c),w&8192){if(Ce=c.memoizedState!==null,(c.stateNode.isHidden=Ce)&&!qe&&(c.mode&1)!==0)for(jt=c,qe=c.child;qe!==null;){for(Qe=jt=qe;jt!==null;){switch(ze=jt,yt=ze.child,ze.tag){case 0:case 11:case 14:case 15:ph(4,ze,ze.return);break;case 1:Pf(ze,ze.return);var Ct=ze.stateNode;if(typeof Ct.componentWillUnmount=="function"){w=ze,b=ze.return;try{f=w,Ct.props=f.memoizedProps,Ct.state=f.memoizedState,Ct.componentWillUnmount()}catch(Pt){Mn(w,b,Pt)}}break;case 5:Pf(ze,ze.return);break;case 22:if(ze.memoizedState!==null){Q3(Qe);continue}}yt!==null?(yt.return=ze,jt=yt):Q3(Qe)}qe=qe.sibling}e:for(qe=null,Qe=c;;){if(Qe.tag===5){if(qe===null){qe=Qe;try{T=Qe.stateNode,Ce?(R=T.style,typeof R.setProperty=="function"?R.setProperty("display","none","important"):R.display="none"):(ne=Qe.stateNode,ue=Qe.memoizedProps.style,z=ue!=null&&ue.hasOwnProperty("display")?ue.display:null,ne.style.display=hr("display",z))}catch(Pt){Mn(c,c.return,Pt)}}}else if(Qe.tag===6){if(qe===null)try{Qe.stateNode.nodeValue=Ce?"":Qe.memoizedProps}catch(Pt){Mn(c,c.return,Pt)}}else if((Qe.tag!==22&&Qe.tag!==23||Qe.memoizedState===null||Qe===c)&&Qe.child!==null){Qe.child.return=Qe,Qe=Qe.child;continue}if(Qe===c)break e;for(;Qe.sibling===null;){if(Qe.return===null||Qe.return===c)break e;qe===Qe&&(qe=null),Qe=Qe.return}qe===Qe&&(qe=null),Qe.sibling.return=Qe.return,Qe=Qe.sibling}}break;case 19:vo(f,c),rl(c),w&4&&W3(c);break;case 21:break;default:vo(f,c),rl(c)}}function rl(c){var f=c.flags;if(f&2){try{e:{for(var b=c.return;b!==null;){if(K3(b)){var w=b;break e}b=b.return}throw Error(r(160))}switch(w.tag){case 5:var T=w.stateNode;w.flags&32&&(Rr(T,""),w.flags&=-33);var R=z3(c);KN(c,R,T);break;case 3:case 4:var z=w.stateNode.containerInfo,ne=z3(c);GN(c,ne,z);break;default:throw Error(r(161))}}catch(ue){Mn(c,c.return,ue)}c.flags&=-3}f&4096&&(c.flags&=-4097)}function tV(c,f,b){jt=c,Y3(c)}function Y3(c,f,b){for(var w=(c.mode&1)!==0;jt!==null;){var T=jt,R=T.child;if(T.tag===22&&w){var z=T.memoizedState!==null||mx;if(!z){var ne=T.alternate,ue=ne!==null&&ne.memoizedState!==null||os;ne=mx;var Ce=os;if(mx=z,(os=ue)&&!Ce)for(jt=T;jt!==null;)z=jt,ue=z.child,z.tag===22&&z.memoizedState!==null?Z3(T):ue!==null?(ue.return=z,jt=ue):Z3(T);for(;R!==null;)jt=R,Y3(R),R=R.sibling;jt=T,mx=ne,os=Ce}X3(c)}else(T.subtreeFlags&8772)!==0&&R!==null?(R.return=T,jt=R):X3(c)}}function X3(c){for(;jt!==null;){var f=jt;if((f.flags&8772)!==0){var b=f.alternate;try{if((f.flags&8772)!==0)switch(f.tag){case 0:case 11:case 15:os||px(5,f);break;case 1:var w=f.stateNode;if(f.flags&4&&!os)if(b===null)w.componentDidMount();else{var T=f.elementType===f.type?b.memoizedProps:bo(f.type,b.memoizedProps);w.componentDidUpdate(T,b.memoizedState,w.__reactInternalSnapshotBeforeUpdate)}var R=f.updateQueue;R!==null&&Q5(f,R,w);break;case 3:var z=f.updateQueue;if(z!==null){if(b=null,f.child!==null)switch(f.child.tag){case 5:b=f.child.stateNode;break;case 1:b=f.child.stateNode}Q5(f,z,b)}break;case 5:var ne=f.stateNode;if(b===null&&f.flags&4){b=ne;var ue=f.memoizedProps;switch(f.type){case"button":case"input":case"select":case"textarea":ue.autoFocus&&b.focus();break;case"img":ue.src&&(b.src=ue.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(f.memoizedState===null){var Ce=f.alternate;if(Ce!==null){var qe=Ce.memoizedState;if(qe!==null){var Qe=qe.dehydrated;Qe!==null&&Aa(Qe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}os||f.flags&512&&HN(f)}catch(ze){Mn(f,f.return,ze)}}if(f===c){jt=null;break}if(b=f.sibling,b!==null){b.return=f.return,jt=b;break}jt=f.return}}function Q3(c){for(;jt!==null;){var f=jt;if(f===c){jt=null;break}var b=f.sibling;if(b!==null){b.return=f.return,jt=b;break}jt=f.return}}function Z3(c){for(;jt!==null;){var f=jt;try{switch(f.tag){case 0:case 11:case 15:var b=f.return;try{px(4,f)}catch(ue){Mn(f,b,ue)}break;case 1:var w=f.stateNode;if(typeof w.componentDidMount=="function"){var T=f.return;try{w.componentDidMount()}catch(ue){Mn(f,T,ue)}}var R=f.return;try{HN(f)}catch(ue){Mn(f,R,ue)}break;case 5:var z=f.return;try{HN(f)}catch(ue){Mn(f,z,ue)}}}catch(ue){Mn(f,f.return,ue)}if(f===c){jt=null;break}var ne=f.sibling;if(ne!==null){ne.return=f.return,jt=ne;break}jt=f.return}}var rV=Math.ceil,hx=A.ReactCurrentDispatcher,zN=A.ReactCurrentOwner,Fi=A.ReactCurrentBatchConfig,Br=0,Ra=null,Jn=null,Wa=0,pi=0,Df=ho(0),ua=0,hh=null,yu=0,gx=0,qN=0,gh=null,Ws=null,WN=0,If=1/0,tc=null,xx=!1,VN=null,cd=null,bx=!1,dd=null,yx=0,xh=0,YN=null,vx=-1,Nx=0;function Cs(){return(Br&6)!==0?Sr():vx!==-1?vx:vx=Sr()}function ud(c){return(c.mode&1)===0?1:(Br&2)!==0&&Wa!==0?Wa&-Wa:Se.transition!==null?(Nx===0&&(Nx=ht()),Nx):(c=Wt,c!==0||(c=window.event,c=c===void 0?16:vs(c.type)),c)}function No(c,f,b,w){if(50<xh)throw xh=0,YN=null,Error(r(185));Ur(c,b,w),((Br&2)===0||c!==Ra)&&(c===Ra&&((Br&2)===0&&(gx|=b),ua===4&&fd(c,Wa)),Vs(c,w),b===1&&Br===0&&(f.mode&1)===0&&(If=Sr()+500,Ks&&ui()))}function Vs(c,f){var b=c.callbackNode;Pn(c,f);var w=Rn(c,c===Ra?Wa:0);if(w===0)b!==null&&Kn(b),c.callbackNode=null,c.callbackPriority=0;else if(f=w&-w,c.callbackPriority!==f){if(b!=null&&Kn(b),f===1)c.tag===0?sd(eR.bind(null,c)):mu(eR.bind(null,c)),Zg(function(){(Br&6)===0&&ui()}),b=null;else{switch(zo(w)){case 1:b=yn;break;case 4:b=sn;break;case 16:b=Ua;break;case 536870912:b=Lr;break;default:b=Ua}b=lR(b,J3.bind(null,c))}c.callbackPriority=f,c.callbackNode=b}}function J3(c,f){if(vx=-1,Nx=0,(Br&6)!==0)throw Error(r(327));var b=c.callbackNode;if(Mf()&&c.callbackNode!==b)return null;var w=Rn(c,c===Ra?Wa:0);if(w===0)return null;if((w&30)!==0||(w&c.expiredLanes)!==0||f)f=Sx(c,w);else{f=w;var T=Br;Br|=2;var R=rR();(Ra!==c||Wa!==f)&&(tc=null,If=Sr()+500,Nu(c,f));do try{sV();break}catch(ne){tR(c,ne)}while(!0);za(),hx.current=R,Br=T,Jn!==null?f=0:(Ra=null,Wa=0,f=ua)}if(f!==0){if(f===2&&(T=Ja(c),T!==0&&(w=T,f=XN(c,T))),f===1)throw b=hh,Nu(c,0),fd(c,w),Vs(c,Sr()),b;if(f===6)fd(c,w);else{if(T=c.current.alternate,(w&30)===0&&!nV(T)&&(f=Sx(c,w),f===2&&(R=Ja(c),R!==0&&(w=R,f=XN(c,R))),f===1))throw b=hh,Nu(c,0),fd(c,w),Vs(c,Sr()),b;switch(c.finishedWork=T,c.finishedLanes=w,f){case 0:case 1:throw Error(r(345));case 2:Su(c,Ws,tc);break;case 3:if(fd(c,w),(w&130023424)===w&&(f=WN+500-Sr(),10<f)){if(Rn(c,0)!==0)break;if(T=c.suspendedLanes,(T&w)!==w){Cs(),c.pingedLanes|=c.suspendedLanes&T;break}c.timeoutHandle=du(Su.bind(null,c,Ws,tc),f);break}Su(c,Ws,tc);break;case 4:if(fd(c,w),(w&4194240)===w)break;for(f=c.eventTimes,T=-1;0<w;){var z=31-Zr(w);R=1<<z,z=f[z],z>T&&(T=z),w&=~R}if(w=T,w=Sr()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*rV(w/1960))-w,10<w){c.timeoutHandle=du(Su.bind(null,c,Ws,tc),w);break}Su(c,Ws,tc);break;case 5:Su(c,Ws,tc);break;default:throw Error(r(329))}}}return Vs(c,Sr()),c.callbackNode===b?J3.bind(null,c):null}function XN(c,f){var b=gh;return c.current.memoizedState.isDehydrated&&(Nu(c,f).flags|=256),c=Sx(c,f),c!==2&&(f=Ws,Ws=b,f!==null&&QN(f)),c}function QN(c){Ws===null?Ws=c:Ws.push.apply(Ws,c)}function nV(c){for(var f=c;;){if(f.flags&16384){var b=f.updateQueue;if(b!==null&&(b=b.stores,b!==null))for(var w=0;w<b.length;w++){var T=b[w],R=T.getSnapshot;T=T.value;try{if(!Bs(R(),T))return!1}catch{return!1}}}if(b=f.child,f.subtreeFlags&16384&&b!==null)b.return=f,f=b;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function fd(c,f){for(f&=~qN,f&=~gx,c.suspendedLanes|=f,c.pingedLanes&=~f,c=c.expirationTimes;0<f;){var b=31-Zr(f),w=1<<b;c[b]=-1,f&=~w}}function eR(c){if((Br&6)!==0)throw Error(r(327));Mf();var f=Rn(c,0);if((f&1)===0)return Vs(c,Sr()),null;var b=Sx(c,f);if(c.tag!==0&&b===2){var w=Ja(c);w!==0&&(f=w,b=XN(c,w))}if(b===1)throw b=hh,Nu(c,0),fd(c,f),Vs(c,Sr()),b;if(b===6)throw Error(r(345));return c.finishedWork=c.current.alternate,c.finishedLanes=f,Su(c,Ws,tc),Vs(c,Sr()),null}function ZN(c,f){var b=Br;Br|=1;try{return c(f)}finally{Br=b,Br===0&&(If=Sr()+500,Ks&&ui())}}function vu(c){dd!==null&&dd.tag===0&&(Br&6)===0&&Mf();var f=Br;Br|=1;var b=Fi.transition,w=Wt;try{if(Fi.transition=null,Wt=1,c)return c()}finally{Wt=w,Fi.transition=b,Br=f,(Br&6)===0&&ui()}}function JN(){pi=Df.current,on(Df)}function Nu(c,f){c.finishedWork=null,c.finishedLanes=0;var b=c.timeoutHandle;if(b!==-1&&(c.timeoutHandle=-1,ed(b)),Jn!==null)for(b=Jn.return;b!==null;){var w=b;switch(Mi(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&Af();break;case 3:kf(),on(ns),on(_a),NN();break;case 5:yN(w);break;case 4:kf();break;case 13:on(Tn);break;case 19:on(Tn);break;case 10:Tf(w.type._context);break;case 22:case 23:JN()}b=b.return}if(Ra=c,Jn=c=md(c.current,null),Wa=pi=f,ua=0,hh=null,qN=gx=yu=0,Ws=gh=null,gu!==null){for(f=0;f<gu.length;f++)if(b=gu[f],w=b.interleaved,w!==null){b.interleaved=null;var T=w.next,R=b.pending;if(R!==null){var z=R.next;R.next=T,w.next=z}b.pending=w}gu=null}return c}function tR(c,f){do{var b=Jn;try{if(za(),sx.current=cx,ix){for(var w=On.memoizedState;w!==null;){var T=w.queue;T!==null&&(T.pending=null),w=w.next}ix=!1}if(bu=0,ka=da=On=null,ch=!1,dh=0,zN.current=null,b===null||b.return===null){ua=1,hh=f,Jn=null;break}e:{var R=c,z=b.return,ne=b,ue=f;if(f=Wa,ne.flags|=32768,ue!==null&&typeof ue=="object"&&typeof ue.then=="function"){var Ce=ue,qe=ne,Qe=qe.tag;if((qe.mode&1)===0&&(Qe===0||Qe===11||Qe===15)){var ze=qe.alternate;ze?(qe.updateQueue=ze.updateQueue,qe.memoizedState=ze.memoizedState,qe.lanes=ze.lanes):(qe.updateQueue=null,qe.memoizedState=null)}var yt=A3(z);if(yt!==null){yt.flags&=-257,C3(yt,z,ne,R,f),yt.mode&1&&E3(R,Ce,f),f=yt,ue=Ce;var Ct=f.updateQueue;if(Ct===null){var Pt=new Set;Pt.add(ue),f.updateQueue=Pt}else Ct.add(ue);break e}else{if((f&1)===0){E3(R,Ce,f),e2();break e}ue=Error(r(426))}}else if(ln&&ne.mode&1){var Wn=A3(z);if(Wn!==null){(Wn.flags&65536)===0&&(Wn.flags|=256),C3(Wn,z,ne,R,f),Xe(Rf(ue,ne));break e}}R=ue=Rf(ue,ne),ua!==4&&(ua=2),gh===null?gh=[R]:gh.push(R),R=z;do{switch(R.tag){case 3:R.flags|=65536,f&=-f,R.lanes|=f;var Ne=j3(R,ue,f);X5(R,Ne);break e;case 1:ne=ue;var pe=R.type,we=R.stateNode;if((R.flags&128)===0&&(typeof pe.getDerivedStateFromError=="function"||we!==null&&typeof we.componentDidCatch=="function"&&(cd===null||!cd.has(we)))){R.flags|=65536,f&=-f,R.lanes|=f;var at=w3(R,ne,f);X5(R,at);break e}}R=R.return}while(R!==null)}aR(b)}catch(Lt){f=Lt,Jn===b&&b!==null&&(Jn=b=b.return);continue}break}while(!0)}function rR(){var c=hx.current;return hx.current=cx,c===null?cx:c}function e2(){(ua===0||ua===3||ua===2)&&(ua=4),Ra===null||(yu&268435455)===0&&(gx&268435455)===0||fd(Ra,Wa)}function Sx(c,f){var b=Br;Br|=2;var w=rR();(Ra!==c||Wa!==f)&&(tc=null,Nu(c,f));do try{aV();break}catch(T){tR(c,T)}while(!0);if(za(),Br=b,hx.current=w,Jn!==null)throw Error(r(261));return Ra=null,Wa=0,ua}function aV(){for(;Jn!==null;)nR(Jn)}function sV(){for(;Jn!==null&&!Ut();)nR(Jn)}function nR(c){var f=oR(c.alternate,c,pi);c.memoizedProps=c.pendingProps,f===null?aR(c):Jn=f,zN.current=null}function aR(c){var f=c;do{var b=f.alternate;if(c=f.return,(f.flags&32768)===0){if(b=QW(b,f,pi),b!==null){Jn=b;return}}else{if(b=ZW(b,f),b!==null){b.flags&=32767,Jn=b;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{ua=6,Jn=null;return}}if(f=f.sibling,f!==null){Jn=f;return}Jn=f=c}while(f!==null);ua===0&&(ua=5)}function Su(c,f,b){var w=Wt,T=Fi.transition;try{Fi.transition=null,Wt=1,iV(c,f,b,w)}finally{Fi.transition=T,Wt=w}return null}function iV(c,f,b,w){do Mf();while(dd!==null);if((Br&6)!==0)throw Error(r(327));b=c.finishedWork;var T=c.finishedLanes;if(b===null)return null;if(c.finishedWork=null,c.finishedLanes=0,b===c.current)throw Error(r(177));c.callbackNode=null,c.callbackPriority=0;var R=b.lanes|b.childLanes;if(Ei(c,R),c===Ra&&(Jn=Ra=null,Wa=0),(b.subtreeFlags&2064)===0&&(b.flags&2064)===0||bx||(bx=!0,lR(Ua,function(){return Mf(),null})),R=(b.flags&15990)!==0,(b.subtreeFlags&15990)!==0||R){R=Fi.transition,Fi.transition=null;var z=Wt;Wt=1;var ne=Br;Br|=4,zN.current=null,eV(c,b),V3(b,c),fN(ki),ni=!!Jc,ki=Jc=null,c.current=b,tV(b),fr(),Br=ne,Wt=z,Fi.transition=R}else c.current=b;if(bx&&(bx=!1,dd=c,yx=T),R=c.pendingLanes,R===0&&(cd=null),Ul(b.stateNode),Vs(c,Sr()),f!==null)for(w=c.onRecoverableError,b=0;b<f.length;b++)T=f[b],w(T.value,{componentStack:T.stack,digest:T.digest});if(xx)throw xx=!1,c=VN,VN=null,c;return(yx&1)!==0&&c.tag!==0&&Mf(),R=c.pendingLanes,(R&1)!==0?c===YN?xh++:(xh=0,YN=c):xh=0,ui(),null}function Mf(){if(dd!==null){var c=zo(yx),f=Fi.transition,b=Wt;try{if(Fi.transition=null,Wt=16>c?16:c,dd===null)var w=!1;else{if(c=dd,dd=null,yx=0,(Br&6)!==0)throw Error(r(331));var T=Br;for(Br|=4,jt=c.current;jt!==null;){var R=jt,z=R.child;if((jt.flags&16)!==0){var ne=R.deletions;if(ne!==null){for(var ue=0;ue<ne.length;ue++){var Ce=ne[ue];for(jt=Ce;jt!==null;){var qe=jt;switch(qe.tag){case 0:case 11:case 15:ph(8,qe,R)}var Qe=qe.child;if(Qe!==null)Qe.return=qe,jt=Qe;else for(;jt!==null;){qe=jt;var ze=qe.sibling,yt=qe.return;if(G3(qe),qe===Ce){jt=null;break}if(ze!==null){ze.return=yt,jt=ze;break}jt=yt}}}var Ct=R.alternate;if(Ct!==null){var Pt=Ct.child;if(Pt!==null){Ct.child=null;do{var Wn=Pt.sibling;Pt.sibling=null,Pt=Wn}while(Pt!==null)}}jt=R}}if((R.subtreeFlags&2064)!==0&&z!==null)z.return=R,jt=z;else e:for(;jt!==null;){if(R=jt,(R.flags&2048)!==0)switch(R.tag){case 0:case 11:case 15:ph(9,R,R.return)}var Ne=R.sibling;if(Ne!==null){Ne.return=R.return,jt=Ne;break e}jt=R.return}}var pe=c.current;for(jt=pe;jt!==null;){z=jt;var we=z.child;if((z.subtreeFlags&2064)!==0&&we!==null)we.return=z,jt=we;else e:for(z=pe;jt!==null;){if(ne=jt,(ne.flags&2048)!==0)try{switch(ne.tag){case 0:case 11:case 15:px(9,ne)}}catch(Lt){Mn(ne,ne.return,Lt)}if(ne===z){jt=null;break e}var at=ne.sibling;if(at!==null){at.return=ne.return,jt=at;break e}jt=ne.return}}if(Br=T,ui(),_n&&typeof _n.onPostCommitFiberRoot=="function")try{_n.onPostCommitFiberRoot(xs,c)}catch{}w=!0}return w}finally{Wt=b,Fi.transition=f}}return!1}function sR(c,f,b){f=Rf(b,f),f=j3(c,f,1),c=od(c,f,1),f=Cs(),c!==null&&(Ur(c,1,f),Vs(c,f))}function Mn(c,f,b){if(c.tag===3)sR(c,c,b);else for(;f!==null;){if(f.tag===3){sR(f,c,b);break}else if(f.tag===1){var w=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(cd===null||!cd.has(w))){c=Rf(b,c),c=w3(f,c,1),f=od(f,c,1),c=Cs(),f!==null&&(Ur(f,1,c),Vs(f,c));break}}f=f.return}}function oV(c,f,b){var w=c.pingCache;w!==null&&w.delete(f),f=Cs(),c.pingedLanes|=c.suspendedLanes&b,Ra===c&&(Wa&b)===b&&(ua===4||ua===3&&(Wa&130023424)===Wa&&500>Sr()-WN?Nu(c,0):qN|=b),Vs(c,f)}function iR(c,f){f===0&&((c.mode&1)===0?f=1:(f=sa,sa<<=1,(sa&130023424)===0&&(sa=4194304)));var b=Cs();c=Zl(c,f),c!==null&&(Ur(c,f,b),Vs(c,b))}function lV(c){var f=c.memoizedState,b=0;f!==null&&(b=f.retryLane),iR(c,b)}function cV(c,f){var b=0;switch(c.tag){case 13:var w=c.stateNode,T=c.memoizedState;T!==null&&(b=T.retryLane);break;case 19:w=c.stateNode;break;default:throw Error(r(314))}w!==null&&w.delete(f),iR(c,b)}var oR;oR=function(c,f,b){if(c!==null)if(c.memoizedProps!==f.pendingProps||ns.current)qs=!0;else{if((c.lanes&b)===0&&(f.flags&128)===0)return qs=!1,XW(c,f,b);qs=(c.flags&131072)!==0}else qs=!1,ln&&(f.flags&1048576)!==0&&_f(f,pu,f.index);switch(f.lanes=0,f.tag){case 2:var w=f.type;fx(c,f),c=f.pendingProps;var T=Ql(f,_a.current);Of(f,b),T=wN(null,f,w,c,T,b);var R=EN();return f.flags|=1,typeof T=="object"&&T!==null&&typeof T.render=="function"&&T.$$typeof===void 0?(f.tag=1,f.memoizedState=null,f.updateQueue=null,as(w)?(R=!0,fu(f)):R=!1,f.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,xN(f),T.updater=dx,f.stateNode=T,T._reactInternals=f,kN(f,w,c,b),f=IN(null,f,w,!0,R,b)):(f.tag=0,ln&&R&&hu(f),As(null,f,T,b),f=f.child),f;case 16:w=f.elementType;e:{switch(fx(c,f),c=f.pendingProps,T=w._init,w=T(w._payload),f.type=w,T=f.tag=uV(w),c=bo(w,c),T){case 0:f=DN(null,f,w,c,b);break e;case 1:f=P3(null,f,w,c,b);break e;case 11:f=_3(null,f,w,c,b);break e;case 14:f=T3(null,f,w,bo(w.type,c),b);break e}throw Error(r(306,w,""))}return f;case 0:return w=f.type,T=f.pendingProps,T=f.elementType===w?T:bo(w,T),DN(c,f,w,T,b);case 1:return w=f.type,T=f.pendingProps,T=f.elementType===w?T:bo(w,T),P3(c,f,w,T,b);case 3:e:{if(D3(f),c===null)throw Error(r(387));w=f.pendingProps,R=f.memoizedState,T=R.element,Y5(c,f),nx(f,w,null,b);var z=f.memoizedState;if(w=z.element,R.isDehydrated)if(R={element:w,isDehydrated:!1,cache:z.cache,pendingSuspenseBoundaries:z.pendingSuspenseBoundaries,transitions:z.transitions},f.updateQueue.baseState=R,f.memoizedState=R,f.flags&256){T=Rf(Error(r(423)),f),f=I3(c,f,w,b,T);break e}else if(w!==T){T=Rf(Error(r(424)),f),f=I3(c,f,w,b,T);break e}else for(Zn=js(f.stateNode.containerInfo.firstChild),wn=f,ln=!0,mi=null,b=cn(f,null,w,b),f.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(tt(),w===T){f=ec(c,f,b);break e}As(c,f,w,b)}f=f.child}return f;case 5:return Z5(f),c===null&&V(f),w=f.type,T=f.pendingProps,R=c!==null?c.memoizedProps:null,z=T.children,Ss(w,T)?z=null:R!==null&&Ss(w,R)&&(f.flags|=32),R3(c,f),As(c,f,z,b),f.child;case 6:return c===null&&V(f),null;case 13:return M3(c,f,b);case 4:return bN(f,f.stateNode.containerInfo),w=f.pendingProps,c===null?f.child=zn(f,null,w,b):As(c,f,w,b),f.child;case 11:return w=f.type,T=f.pendingProps,T=f.elementType===w?T:bo(w,T),_3(c,f,w,T,b);case 7:return As(c,f,f.pendingProps,b),f.child;case 8:return As(c,f,f.pendingProps.children,b),f.child;case 12:return As(c,f,f.pendingProps.children,b),f.child;case 10:e:{if(w=f.type._context,T=f.pendingProps,R=f.memoizedProps,z=T.value,Fr(zs,w._currentValue),w._currentValue=z,R!==null)if(Bs(R.value,z)){if(R.children===T.children&&!ns.current){f=ec(c,f,b);break e}}else for(R=f.child,R!==null&&(R.return=f);R!==null;){var ne=R.dependencies;if(ne!==null){z=R.child;for(var ue=ne.firstContext;ue!==null;){if(ue.context===w){if(R.tag===1){ue=Jl(-1,b&-b),ue.tag=2;var Ce=R.updateQueue;if(Ce!==null){Ce=Ce.shared;var qe=Ce.pending;qe===null?ue.next=ue:(ue.next=qe.next,qe.next=ue),Ce.pending=ue}}R.lanes|=b,ue=R.alternate,ue!==null&&(ue.lanes|=b),hN(R.return,b,f),ne.lanes|=b;break}ue=ue.next}}else if(R.tag===10)z=R.type===f.type?null:R.child;else if(R.tag===18){if(z=R.return,z===null)throw Error(r(341));z.lanes|=b,ne=z.alternate,ne!==null&&(ne.lanes|=b),hN(z,b,f),z=R.sibling}else z=R.child;if(z!==null)z.return=R;else for(z=R;z!==null;){if(z===f){z=null;break}if(R=z.sibling,R!==null){R.return=z.return,z=R;break}z=z.return}R=z}As(c,f,T.children,b),f=f.child}return f;case 9:return T=f.type,w=f.pendingProps.children,Of(f,b),T=Li(T),w=w(T),f.flags|=1,As(c,f,w,b),f.child;case 14:return w=f.type,T=bo(w,f.pendingProps),T=bo(w.type,T),T3(c,f,w,T,b);case 15:return O3(c,f,f.type,f.pendingProps,b);case 17:return w=f.type,T=f.pendingProps,T=f.elementType===w?T:bo(w,T),fx(c,f),f.tag=1,as(w)?(c=!0,fu(f)):c=!1,Of(f,b),N3(f,w,T),kN(f,w,T,b),IN(null,f,w,!0,c,b);case 19:return $3(c,f,b);case 22:return k3(c,f,b)}throw Error(r(156,f.tag))};function lR(c,f){return Nr(c,f)}function dV(c,f,b,w){this.tag=c,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bi(c,f,b,w){return new dV(c,f,b,w)}function t2(c){return c=c.prototype,!(!c||!c.isReactComponent)}function uV(c){if(typeof c=="function")return t2(c)?1:0;if(c!=null){if(c=c.$$typeof,c===$)return 11;if(c===W)return 14}return 2}function md(c,f){var b=c.alternate;return b===null?(b=Bi(c.tag,f,c.key,c.mode),b.elementType=c.elementType,b.type=c.type,b.stateNode=c.stateNode,b.alternate=c,c.alternate=b):(b.pendingProps=f,b.type=c.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=c.flags&14680064,b.childLanes=c.childLanes,b.lanes=c.lanes,b.child=c.child,b.memoizedProps=c.memoizedProps,b.memoizedState=c.memoizedState,b.updateQueue=c.updateQueue,f=c.dependencies,b.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},b.sibling=c.sibling,b.index=c.index,b.ref=c.ref,b}function jx(c,f,b,w,T,R){var z=2;if(w=c,typeof c=="function")t2(c)&&(z=1);else if(typeof c=="string")z=5;else e:switch(c){case O:return ju(b.children,T,R,f);case D:z=8,T|=8;break;case k:return c=Bi(12,b,f,T|2),c.elementType=k,c.lanes=R,c;case B:return c=Bi(13,b,f,T),c.elementType=B,c.lanes=R,c;case P:return c=Bi(19,b,f,T),c.elementType=P,c.lanes=R,c;case G:return wx(b,T,R,f);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case M:z=10;break e;case F:z=9;break e;case $:z=11;break e;case W:z=14;break e;case K:z=16,w=null;break e}throw Error(r(130,c==null?c:typeof c,""))}return f=Bi(z,b,f,T),f.elementType=c,f.type=w,f.lanes=R,f}function ju(c,f,b,w){return c=Bi(7,c,w,f),c.lanes=b,c}function wx(c,f,b,w){return c=Bi(22,c,w,f),c.elementType=G,c.lanes=b,c.stateNode={isHidden:!1},c}function r2(c,f,b){return c=Bi(6,c,null,f),c.lanes=b,c}function n2(c,f,b){return f=Bi(4,c.children!==null?c.children:[],c.key,f),f.lanes=b,f.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},f}function fV(c,f,b,w,T){this.tag=f,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jr(0),this.expirationTimes=Jr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jr(0),this.identifierPrefix=w,this.onRecoverableError=T,this.mutableSourceEagerHydrationData=null}function a2(c,f,b,w,T,R,z,ne,ue){return c=new fV(c,f,b,ne,ue),f===1?(f=1,R===!0&&(f|=8)):f=0,R=Bi(3,null,null,f),c.current=R,R.stateNode=c,R.memoizedState={element:w,isDehydrated:b,cache:null,transitions:null,pendingSuspenseBoundaries:null},xN(R),c}function mV(c,f,b){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_,key:w==null?null:""+w,children:c,containerInfo:f,implementation:b}}function cR(c){if(!c)return Qn;c=c._reactInternals;e:{if(an(c)!==c||c.tag!==1)throw Error(r(170));var f=c;do{switch(f.tag){case 3:f=f.stateNode.context;break e;case 1:if(as(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break e}}f=f.return}while(f!==null);throw Error(r(171))}if(c.tag===1){var b=c.type;if(as(b))return Cf(c,b,f)}return f}function dR(c,f,b,w,T,R,z,ne,ue){return c=a2(b,w,!0,c,T,R,z,ne,ue),c.context=cR(null),b=c.current,w=Cs(),T=ud(b),R=Jl(w,T),R.callback=f??null,od(b,R,T),c.current.lanes=T,Ur(c,T,w),Vs(c,w),c}function Ex(c,f,b,w){var T=f.current,R=Cs(),z=ud(T);return b=cR(b),f.context===null?f.context=b:f.pendingContext=b,f=Jl(R,z),f.payload={element:c},w=w===void 0?null:w,w!==null&&(f.callback=w),c=od(T,f,z),c!==null&&(No(c,T,z,R),rx(c,T,z)),z}function Ax(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function uR(c,f){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var b=c.retryLane;c.retryLane=b!==0&&b<f?b:f}}function s2(c,f){uR(c,f),(c=c.alternate)&&uR(c,f)}function pV(){return null}var fR=typeof reportError=="function"?reportError:function(c){console.error(c)};function i2(c){this._internalRoot=c}Cx.prototype.render=i2.prototype.render=function(c){var f=this._internalRoot;if(f===null)throw Error(r(409));Ex(c,f,null,null)},Cx.prototype.unmount=i2.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var f=c.containerInfo;vu(function(){Ex(null,c,null,null)}),f[Yn]=null}};function Cx(c){this._internalRoot=c}Cx.prototype.unstable_scheduleHydration=function(c){if(c){var f=ie();c={blockedOn:null,target:c,priority:f};for(var b=0;b<fn.length&&f!==0&&f<fn[b].priority;b++);fn.splice(b,0,c),b===0&&Hr(c)}};function o2(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function _x(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11&&(c.nodeType!==8||c.nodeValue!==" react-mount-point-unstable "))}function mR(){}function hV(c,f,b,w,T){if(T){if(typeof w=="function"){var R=w;w=function(){var Ce=Ax(z);R.call(Ce)}}var z=dR(f,w,c,0,null,!1,!1,"",mR);return c._reactRootContainer=z,c[Yn]=z.current,Gs(c.nodeType===8?c.parentNode:c),vu(),z}for(;T=c.lastChild;)c.removeChild(T);if(typeof w=="function"){var ne=w;w=function(){var Ce=Ax(ue);ne.call(Ce)}}var ue=a2(c,0,!1,null,null,!1,!1,"",mR);return c._reactRootContainer=ue,c[Yn]=ue.current,Gs(c.nodeType===8?c.parentNode:c),vu(function(){Ex(f,ue,b,w)}),ue}function Tx(c,f,b,w,T){var R=b._reactRootContainer;if(R){var z=R;if(typeof T=="function"){var ne=T;T=function(){var ue=Ax(z);ne.call(ue)}}Ex(f,z,c,T)}else z=hV(b,f,c,T,w);return Ax(z)}qo=function(c){switch(c.tag){case 3:var f=c.stateNode;if(f.current.memoizedState.isDehydrated){var b=bs(f.pendingLanes);b!==0&&(ys(f,b|1),Vs(f,Sr()),(Br&6)===0&&(If=Sr()+500,ui()))}break;case 13:vu(function(){var w=Zl(c,1);if(w!==null){var T=Cs();No(w,c,1,T)}}),s2(c,1)}},Ea=function(c){if(c.tag===13){var f=Zl(c,134217728);if(f!==null){var b=Cs();No(f,c,134217728,b)}s2(c,134217728)}},X=function(c){if(c.tag===13){var f=ud(c),b=Zl(c,f);if(b!==null){var w=Cs();No(b,c,f,w)}s2(c,f)}},ie=function(){return Wt},De=function(c,f){var b=Wt;try{return Wt=c,f()}finally{Wt=b}},Pr=function(c,f,b){switch(f){case"input":if(Z(c,b),f=b.name,b.type==="radio"&&f!=null){for(b=c;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll("input[name="+JSON.stringify(""+f)+'][type="radio"]'),f=0;f<b.length;f++){var w=b[f];if(w!==c&&w.form===c.form){var T=Xn(w);if(!T)throw Error(r(90));se(w),Z(w,T)}}}break;case"textarea":Mt(c,b);break;case"select":f=b.value,f!=null&&it(c,!!b.multiple,f,!1)}},er=ZN,mr=vu;var gV={usingClientEntryPoint:!1,Events:[nd,Yl,Xn,Ge,ut,ZN]},bh={findFiberByHostInstance:Di,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xV={bundleType:bh.bundleType,version:bh.version,rendererPackageName:bh.rendererPackageName,rendererConfig:bh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:A.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){return c=ji(c),c===null?null:c.stateNode},findFiberByHostInstance:bh.findFiberByHostInstance||pV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ox=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ox.isDisabled&&Ox.supportsFiber)try{xs=Ox.inject(xV),_n=Ox}catch{}}return Ys.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gV,Ys.createPortal=function(c,f){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!o2(f))throw Error(r(200));return mV(c,f,null,b)},Ys.createRoot=function(c,f){if(!o2(c))throw Error(r(299));var b=!1,w="",T=fR;return f!=null&&(f.unstable_strictMode===!0&&(b=!0),f.identifierPrefix!==void 0&&(w=f.identifierPrefix),f.onRecoverableError!==void 0&&(T=f.onRecoverableError)),f=a2(c,1,!1,null,null,b,!1,w,T),c[Yn]=f.current,Gs(c.nodeType===8?c.parentNode:c),new i2(f)},Ys.findDOMNode=function(c){if(c==null)return null;if(c.nodeType===1)return c;var f=c._reactInternals;if(f===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=ji(f),c=c===null?null:c.stateNode,c},Ys.flushSync=function(c){return vu(c)},Ys.hydrate=function(c,f,b){if(!_x(f))throw Error(r(200));return Tx(null,c,f,!0,b)},Ys.hydrateRoot=function(c,f,b){if(!o2(c))throw Error(r(405));var w=b!=null&&b.hydratedSources||null,T=!1,R="",z=fR;if(b!=null&&(b.unstable_strictMode===!0&&(T=!0),b.identifierPrefix!==void 0&&(R=b.identifierPrefix),b.onRecoverableError!==void 0&&(z=b.onRecoverableError)),f=dR(f,null,c,1,b??null,T,!1,R,z),c[Yn]=f.current,Gs(c),w)for(c=0;c<w.length;c++)b=w[c],T=b._getVersion,T=T(b._source),f.mutableSourceEagerHydrationData==null?f.mutableSourceEagerHydrationData=[b,T]:f.mutableSourceEagerHydrationData.push(b,T);return new Cx(f)},Ys.render=function(c,f,b){if(!_x(f))throw Error(r(200));return Tx(null,c,f,!1,b)},Ys.unmountComponentAtNode=function(c){if(!_x(c))throw Error(r(40));return c._reactRootContainer?(vu(function(){Tx(null,null,c,!1,function(){c._reactRootContainer=null,c[Yn]=null})}),!0):!1},Ys.unstable_batchedUpdates=ZN,Ys.unstable_renderSubtreeIntoContainer=function(c,f,b,w){if(!_x(b))throw Error(r(200));if(c==null||c._reactInternals===void 0)throw Error(r(38));return Tx(c,f,b,!1,w)},Ys.version="18.3.1-next-f1338f8080-20240426",Ys}var RR;function y8(){if(RR)return d2.exports;RR=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),d2.exports=lY(),d2.exports}var PR;function cY(){if(PR)return Px;PR=1;var e=y8();return Px.createRoot=e.createRoot,Px.hydrateRoot=e.hydrateRoot,Px}var dY=cY();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uY=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),fY=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,a)=>a?a.toUpperCase():r.toLowerCase()),DR=e=>{const t=fY(e);return t.charAt(0).toUpperCase()+t.slice(1)},v8=(...e)=>e.filter((t,r,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var mY={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pY=g.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:s="",children:i,iconNode:o,...l},d)=>g.createElement("svg",{ref:d,...mY,width:t,height:t,stroke:e,strokeWidth:a?Number(r)*24/Number(t):r,className:v8("lucide",s),...l},[...o.map(([u,p])=>g.createElement(u,p)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=(e,t)=>{const r=g.forwardRef(({className:a,...s},i)=>g.createElement(pY,{ref:i,iconNode:t,className:v8(`lucide-${uY(DR(e))}`,`lucide-${e}`,a),...s}));return r.displayName=DR(e),r};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hY=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Fv=He("activity",hY);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gY=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],N8=He("arrow-down-right",gY);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xY=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],cl=He("arrow-left",xY);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bY=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],yY=He("arrow-right-left",bY);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vY=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],j0=He("arrow-right",vY);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NY=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],SY=He("arrow-up-down",NY);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jY=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],S8=He("arrow-up-right",jY);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]],EY=He("ban",wY);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AY=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],jp=He("bell",AY);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CY=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],_Y=He("bell-ring",CY);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TY=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],OY=He("book-open",TY);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kY=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z",key:"169p4p"}],["path",{d:"m9 10 2 2 4-4",key:"1gnqz4"}]],RY=He("bookmark-check",kY);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PY=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],DY=He("bookmark",PY);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IY=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],j8=He("bot",IY);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MY=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],LY=He("box",MY);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Y=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],w0=He("brain",$Y);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FY=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],pm=He("building-2",FY);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BY=[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]],gO=He("calendar-clock",BY);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UY=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],HY=He("calendar-days",UY);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GY=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Ro=He("calendar",GY);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KY=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],_m=He("chart-column",KY);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zY=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Yu=He("check",zY);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qY=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],gs=He("chevron-down",qY);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WY=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Tm=He("chevron-left",WY);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VY=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ei=He("chevron-right",VY);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YY=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Ac=He("chevron-up",YY);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Gn=He("circle-alert",XY);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"m12 16 4-4-4-4",key:"1i9zcv"}]],Om=He("circle-arrow-right",QY);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZY=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Po=He("circle-check-big",ZY);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Zs=He("circle-check",JY);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]],tX=He("circle-dot",eX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],EC=He("circle-help",rX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]],aX=He("circle-pause",nX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],iX=He("circle-user",sX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],km=He("circle-x",oX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],cX=He("circle",lX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dX=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],xO=He("clipboard-check",dX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uX=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],bO=He("clipboard-list",uX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16.5 12",key:"1aq6pp"}]],Bv=He("clock-3",fX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Sl=He("clock",mX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pX=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],hX=He("copy",pX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gX=[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]],w8=He("cpu",gX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xX=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Ic=He("database",xX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bX=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],hm=He("download",bX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yX=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Na=He("external-link",yX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vX=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],AC=He("eye-off",vX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NX=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Rm=He("eye",NX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SX=[["path",{d:"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"142zxg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]],jX=He("file-pen-line",SX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wX=[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M4.268 21a2 2 0 0 0 1.727 1H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"ms7g94"}],["path",{d:"m9 18-1.5-1.5",key:"1j6qii"}],["circle",{cx:"5",cy:"14",r:"3",key:"ufru5t"}]],EX=He("file-search",wX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AX=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],CX=He("file-spreadsheet",AX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _X=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Xu=He("file-text",_X);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TX=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Pm=He("funnel",TX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OX=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],kX=He("gauge",OX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RX=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]],PX=He("git-compare",RX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DX=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],IX=He("heart",DX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MX=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],ta=He("history",MX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LX=[["path",{d:"M12 6v4",key:"16clxf"}],["path",{d:"M14 14h-4",key:"esezmu"}],["path",{d:"M14 18h-4",key:"16mqa2"}],["path",{d:"M14 8h-4",key:"z8ypaz"}],["path",{d:"M18 12h2a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-9a2 2 0 0 1 2-2h2",key:"b1k337"}],["path",{d:"M18 22V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v18",key:"16g51d"}]],$X=He("hospital",LX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FX=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],wp=He("house",FX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Dm=He("info",BX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UX=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Im=He("layers",UX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HX=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],mg=He("layout-dashboard",HX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GX=[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]],KX=He("layout-template",GX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zX=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],E8=He("link-2",zX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qX=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],CC=He("link",qX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WX=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Md=He("lock",WX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VX=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],yO=He("log-out",VX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YX=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],XX=He("mail",YX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QX=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Qb=He("map-pin",QX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZX=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],vO=He("menu",ZX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JX=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],ro=He("message-square",JX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eQ=[["path",{d:"M5 12h14",key:"1ays0h"}]],tQ=He("minus",eQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rQ=[["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["path",{d:"M9.5 8h5",key:"11mslq"}],["path",{d:"M9.5 12H16",key:"ktog6x"}],["path",{d:"M9.5 16H14",key:"p1seyn"}]],nQ=He("notebook-text",rQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aQ=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],NO=He("package",aQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sQ=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],iQ=He("palette",sQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oQ=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],lQ=He("pen-line",oQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cQ=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]],_C=He("phone-call",cQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dQ=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],Ps=He("phone",dQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uQ=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],A8=He("plus",uQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fQ=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],IR=He("refresh-cw",fQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mQ=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],pQ=He("rocket",mQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hQ=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],gQ=He("rotate-ccw",hQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xQ=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],SO=He("save",xQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bQ=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],pg=He("search",bQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yQ=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],E0=He("send",yQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vQ=[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],C8=He("settings-2",vQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NQ=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],hg=He("settings",NQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SQ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],_8=He("shield-alert",SQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jQ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ol=He("shield-check",jQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wQ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Do=He("shield",wQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EQ=[["path",{d:"M18 7V5a1 1 0 0 0-1-1H6.5a.5.5 0 0 0-.4.8l4.5 6a2 2 0 0 1 0 2.4l-4.5 6a.5.5 0 0 0 .4.8H17a1 1 0 0 0 1-1v-2",key:"wuwx1p"}]],AQ=He("sigma",EQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CQ=[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]],T8=He("sliders-vertical",CQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Q=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],Zb=He("sparkles",_Q);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TQ=[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]],OQ=He("star-off",TQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kQ=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],RQ=He("star",kQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PQ=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],DQ=He("stethoscope",PQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IQ=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],O8=He("timer",IQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MQ=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],LQ=He("trash-2",MQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Q=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],k8=He("trending-up",$Q);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FQ=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Qa=He("triangle-alert",FQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BQ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],zh=He("user-check",BQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UQ=[["path",{d:"M2 21a8 8 0 0 1 13.292-6",key:"bjp14o"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"m16 19 2 2 4-4",key:"1b14m6"}]],HQ=He("user-round-check",UQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GQ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],m2=He("user-x",GQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KQ=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],kl=He("user",KQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zQ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],jl=He("users",zQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qQ=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],jO=He("workflow",qQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WQ=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],qd=He("x",WQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VQ=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],u0=He("zap",VQ),R8="/neuro-shield/logo.png";function wO({size:e=40,className:t="",showText:r=!1,textColor:a,subtitle:s,subtitleColor:i,variant:o="dark"}){const l=a||(o==="dark"?"#ffffff":"#1e293b"),d=i||(o==="dark"?"#94a3b8":"#64748b");return n.jsxs("div",{className:`flex items-center gap-2.5 ${t}`,children:[n.jsx("img",{src:R8,alt:"Neuro-Shield",width:e,height:e,className:"shrink-0 object-contain",draggable:!1}),r&&n.jsxs("div",{className:"min-w-0",children:[n.jsx("h1",{className:"font-bold text-sm leading-tight truncate",style:{color:l},children:"Neuro-Shield"}),s&&n.jsx("p",{className:"text-[10px] leading-tight truncate",style:{color:d},children:s})]})]})}function YQ({size:e=80,className:t=""}){return n.jsxs("div",{className:`flex flex-col items-center ${t}`,children:[n.jsx("img",{src:R8,alt:"Neuro-Shield",width:e,height:e,className:"object-contain",draggable:!1}),n.jsx("h1",{className:"mt-4 text-4xl font-bold bg-gradient-to-r from-blue-700 via-teal-600 to-teal-500 bg-clip-text text-transparent",children:"Neuro-Shield"}),n.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"    "})]})}function P8(e){var t,r,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=P8(e[t]))&&(a&&(a+=" "),a+=r)}else for(r in e)e[r]&&(a&&(a+=" "),a+=r);return a}function ar(){for(var e,t,r=0,a="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=P8(e))&&(a&&(a+=" "),a+=t);return a}const XQ=(e,t)=>{const r=new Array(e.length+t.length);for(let a=0;a<e.length;a++)r[a]=e[a];for(let a=0;a<t.length;a++)r[e.length+a]=t[a];return r},QQ=(e,t)=>({classGroupId:e,validator:t}),D8=(e=new Map,t=null,r)=>({nextPart:e,validators:t,classGroupId:r}),Jb="-",MR=[],ZQ="arbitrary..",JQ=e=>{const t=tZ(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:a}=e;return{getClassGroupId:o=>{if(o.startsWith("[")&&o.endsWith("]"))return eZ(o);const l=o.split(Jb),d=l[0]===""&&l.length>1?1:0;return I8(l,d,t)},getConflictingClassGroupIds:(o,l)=>{if(l){const d=a[o],u=r[o];return d?u?XQ(u,d):d:u||MR}return r[o]||MR}}},I8=(e,t,r)=>{if(e.length-t===0)return r.classGroupId;const s=e[t],i=r.nextPart.get(s);if(i){const u=I8(e,t+1,i);if(u)return u}const o=r.validators;if(o===null)return;const l=t===0?e.join(Jb):e.slice(t).join(Jb),d=o.length;for(let u=0;u<d;u++){const p=o[u];if(p.validator(l))return p.classGroupId}},eZ=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),r=t.indexOf(":"),a=t.slice(0,r);return a?ZQ+a:void 0})(),tZ=e=>{const{theme:t,classGroups:r}=e;return rZ(r,t)},rZ=(e,t)=>{const r=D8();for(const a in e){const s=e[a];EO(s,r,a,t)}return r},EO=(e,t,r,a)=>{const s=e.length;for(let i=0;i<s;i++){const o=e[i];nZ(o,t,r,a)}},nZ=(e,t,r,a)=>{if(typeof e=="string"){aZ(e,t,r);return}if(typeof e=="function"){sZ(e,t,r,a);return}iZ(e,t,r,a)},aZ=(e,t,r)=>{const a=e===""?t:M8(t,e);a.classGroupId=r},sZ=(e,t,r,a)=>{if(oZ(e)){EO(e(a),t,r,a);return}t.validators===null&&(t.validators=[]),t.validators.push(QQ(r,e))},iZ=(e,t,r,a)=>{const s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[l,d]=s[o];EO(d,M8(t,l),r,a)}},M8=(e,t)=>{let r=e;const a=t.split(Jb),s=a.length;for(let i=0;i<s;i++){const o=a[i];let l=r.nextPart.get(o);l||(l=D8(),r.nextPart.set(o,l)),r=l}return r},oZ=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,lZ=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=Object.create(null),a=Object.create(null);const s=(i,o)=>{r[i]=o,t++,t>e&&(t=0,a=r,r=Object.create(null))};return{get(i){let o=r[i];if(o!==void 0)return o;if((o=a[i])!==void 0)return s(i,o),o},set(i,o){i in r?r[i]=o:s(i,o)}}},TC="!",LR=":",cZ=[],$R=(e,t,r,a,s)=>({modifiers:e,hasImportantModifier:t,baseClassName:r,maybePostfixModifierPosition:a,isExternal:s}),dZ=e=>{const{prefix:t,experimentalParseClassName:r}=e;let a=s=>{const i=[];let o=0,l=0,d=0,u;const p=s.length;for(let N=0;N<p;N++){const v=s[N];if(o===0&&l===0){if(v===LR){i.push(s.slice(d,N)),d=N+1;continue}if(v==="/"){u=N;continue}}v==="["?o++:v==="]"?o--:v==="("?l++:v===")"&&l--}const m=i.length===0?s:s.slice(d);let h=m,x=!1;m.endsWith(TC)?(h=m.slice(0,-1),x=!0):m.startsWith(TC)&&(h=m.slice(1),x=!0);const y=u&&u>d?u-d:void 0;return $R(i,x,h,y)};if(t){const s=t+LR,i=a;a=o=>o.startsWith(s)?i(o.slice(s.length)):$R(cZ,!1,o,void 0,!0)}if(r){const s=a;a=i=>r({className:i,parseClassName:s})}return a},uZ=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((r,a)=>{t.set(r,1e6+a)}),r=>{const a=[];let s=[];for(let i=0;i<r.length;i++){const o=r[i],l=o[0]==="[",d=t.has(o);l||d?(s.length>0&&(s.sort(),a.push(...s),s=[]),a.push(o)):s.push(o)}return s.length>0&&(s.sort(),a.push(...s)),a}},fZ=e=>({cache:lZ(e.cacheSize),parseClassName:dZ(e),sortModifiers:uZ(e),...JQ(e)}),mZ=/\s+/,pZ=(e,t)=>{const{parseClassName:r,getClassGroupId:a,getConflictingClassGroupIds:s,sortModifiers:i}=t,o=[],l=e.trim().split(mZ);let d="";for(let u=l.length-1;u>=0;u-=1){const p=l[u],{isExternal:m,modifiers:h,hasImportantModifier:x,baseClassName:y,maybePostfixModifierPosition:N}=r(p);if(m){d=p+(d.length>0?" "+d:d);continue}let v=!!N,j=a(v?y.substring(0,N):y);if(!j){if(!v){d=p+(d.length>0?" "+d:d);continue}if(j=a(y),!j){d=p+(d.length>0?" "+d:d);continue}v=!1}const E=h.length===0?"":h.length===1?h[0]:i(h).join(":"),C=x?E+TC:E,A=C+j;if(o.indexOf(A)>-1)continue;o.push(A);const S=s(j,v);for(let _=0;_<S.length;++_){const O=S[_];o.push(C+O)}d=p+(d.length>0?" "+d:d)}return d},hZ=(...e)=>{let t=0,r,a,s="";for(;t<e.length;)(r=e[t++])&&(a=L8(r))&&(s&&(s+=" "),s+=a);return s},L8=e=>{if(typeof e=="string")return e;let t,r="";for(let a=0;a<e.length;a++)e[a]&&(t=L8(e[a]))&&(r&&(r+=" "),r+=t);return r},gZ=(e,...t)=>{let r,a,s,i;const o=d=>{const u=t.reduce((p,m)=>m(p),e());return r=fZ(u),a=r.cache.get,s=r.cache.set,i=l,l(d)},l=d=>{const u=a(d);if(u)return u;const p=pZ(d,r);return s(d,p),p};return i=o,(...d)=>i(hZ(...d))},xZ=[],fa=e=>{const t=r=>r[e]||xZ;return t.isThemeGetter=!0,t},$8=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,F8=/^\((?:(\w[\w-]*):)?(.+)\)$/i,bZ=/^\d+\/\d+$/,yZ=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,vZ=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,NZ=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,SZ=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,jZ=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Lf=e=>bZ.test(e),gr=e=>!!e&&!Number.isNaN(Number(e)),hd=e=>!!e&&Number.isInteger(Number(e)),p2=e=>e.endsWith("%")&&gr(e.slice(0,-1)),rc=e=>yZ.test(e),wZ=()=>!0,EZ=e=>vZ.test(e)&&!NZ.test(e),B8=()=>!1,AZ=e=>SZ.test(e),CZ=e=>jZ.test(e),_Z=e=>!_t(e)&&!Tt(e),TZ=e=>Ep(e,G8,B8),_t=e=>$8.test(e),wu=e=>Ep(e,K8,EZ),h2=e=>Ep(e,DZ,gr),FR=e=>Ep(e,U8,B8),OZ=e=>Ep(e,H8,CZ),Dx=e=>Ep(e,z8,AZ),Tt=e=>F8.test(e),vh=e=>Ap(e,K8),kZ=e=>Ap(e,IZ),BR=e=>Ap(e,U8),RZ=e=>Ap(e,G8),PZ=e=>Ap(e,H8),Ix=e=>Ap(e,z8,!0),Ep=(e,t,r)=>{const a=$8.exec(e);return a?a[1]?t(a[1]):r(a[2]):!1},Ap=(e,t,r=!1)=>{const a=F8.exec(e);return a?a[1]?t(a[1]):r:!1},U8=e=>e==="position"||e==="percentage",H8=e=>e==="image"||e==="url",G8=e=>e==="length"||e==="size"||e==="bg-size",K8=e=>e==="length",DZ=e=>e==="number",IZ=e=>e==="family-name",z8=e=>e==="shadow",MZ=()=>{const e=fa("color"),t=fa("font"),r=fa("text"),a=fa("font-weight"),s=fa("tracking"),i=fa("leading"),o=fa("breakpoint"),l=fa("container"),d=fa("spacing"),u=fa("radius"),p=fa("shadow"),m=fa("inset-shadow"),h=fa("text-shadow"),x=fa("drop-shadow"),y=fa("blur"),N=fa("perspective"),v=fa("aspect"),j=fa("ease"),E=fa("animate"),C=()=>["auto","avoid","all","avoid-page","page","left","right","column"],A=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],S=()=>[...A(),Tt,_t],_=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto","contain","none"],D=()=>[Tt,_t,d],k=()=>[Lf,"full","auto",...D()],M=()=>[hd,"none","subgrid",Tt,_t],F=()=>["auto",{span:["full",hd,Tt,_t]},hd,Tt,_t],$=()=>[hd,"auto",Tt,_t],B=()=>["auto","min","max","fr",Tt,_t],P=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],W=()=>["start","end","center","stretch","center-safe","end-safe"],K=()=>["auto",...D()],G=()=>[Lf,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...D()],U=()=>[e,Tt,_t],te=()=>[...A(),BR,FR,{position:[Tt,_t]}],re=()=>["no-repeat",{repeat:["","x","y","space","round"]}],q=()=>["auto","cover","contain",RZ,TZ,{size:[Tt,_t]}],L=()=>[p2,vh,wu],H=()=>["","none","full",u,Tt,_t],ae=()=>["",gr,vh,wu],oe=()=>["solid","dashed","dotted","double"],ve=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ce=()=>[gr,p2,BR,FR],Ee=()=>["","none",y,Tt,_t],xe=()=>["none",gr,Tt,_t],Te=()=>["none",gr,Tt,_t],ye=()=>[gr,Tt,_t],se=()=>[Lf,"full",...D()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[rc],breakpoint:[rc],color:[wZ],container:[rc],"drop-shadow":[rc],ease:["in","out","in-out"],font:[_Z],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[rc],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[rc],shadow:[rc],spacing:["px",gr],text:[rc],"text-shadow":[rc],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Lf,_t,Tt,v]}],container:["container"],columns:[{columns:[gr,_t,Tt,l]}],"break-after":[{"break-after":C()}],"break-before":[{"break-before":C()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:S()}],overflow:[{overflow:_()}],"overflow-x":[{"overflow-x":_()}],"overflow-y":[{"overflow-y":_()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:k()}],"inset-x":[{"inset-x":k()}],"inset-y":[{"inset-y":k()}],start:[{start:k()}],end:[{end:k()}],top:[{top:k()}],right:[{right:k()}],bottom:[{bottom:k()}],left:[{left:k()}],visibility:["visible","invisible","collapse"],z:[{z:[hd,"auto",Tt,_t]}],basis:[{basis:[Lf,"full","auto",l,...D()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[gr,Lf,"auto","initial","none",_t]}],grow:[{grow:["",gr,Tt,_t]}],shrink:[{shrink:["",gr,Tt,_t]}],order:[{order:[hd,"first","last","none",Tt,_t]}],"grid-cols":[{"grid-cols":M()}],"col-start-end":[{col:F()}],"col-start":[{"col-start":$()}],"col-end":[{"col-end":$()}],"grid-rows":[{"grid-rows":M()}],"row-start-end":[{row:F()}],"row-start":[{"row-start":$()}],"row-end":[{"row-end":$()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":B()}],"auto-rows":[{"auto-rows":B()}],gap:[{gap:D()}],"gap-x":[{"gap-x":D()}],"gap-y":[{"gap-y":D()}],"justify-content":[{justify:[...P(),"normal"]}],"justify-items":[{"justify-items":[...W(),"normal"]}],"justify-self":[{"justify-self":["auto",...W()]}],"align-content":[{content:["normal",...P()]}],"align-items":[{items:[...W(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...W(),{baseline:["","last"]}]}],"place-content":[{"place-content":P()}],"place-items":[{"place-items":[...W(),"baseline"]}],"place-self":[{"place-self":["auto",...W()]}],p:[{p:D()}],px:[{px:D()}],py:[{py:D()}],ps:[{ps:D()}],pe:[{pe:D()}],pt:[{pt:D()}],pr:[{pr:D()}],pb:[{pb:D()}],pl:[{pl:D()}],m:[{m:K()}],mx:[{mx:K()}],my:[{my:K()}],ms:[{ms:K()}],me:[{me:K()}],mt:[{mt:K()}],mr:[{mr:K()}],mb:[{mb:K()}],ml:[{ml:K()}],"space-x":[{"space-x":D()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":D()}],"space-y-reverse":["space-y-reverse"],size:[{size:G()}],w:[{w:[l,"screen",...G()]}],"min-w":[{"min-w":[l,"screen","none",...G()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[o]},...G()]}],h:[{h:["screen","lh",...G()]}],"min-h":[{"min-h":["screen","lh","none",...G()]}],"max-h":[{"max-h":["screen","lh",...G()]}],"font-size":[{text:["base",r,vh,wu]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[a,Tt,h2]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",p2,_t]}],"font-family":[{font:[kZ,_t,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,Tt,_t]}],"line-clamp":[{"line-clamp":[gr,"none",Tt,h2]}],leading:[{leading:[i,...D()]}],"list-image":[{"list-image":["none",Tt,_t]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Tt,_t]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:U()}],"text-color":[{text:U()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...oe(),"wavy"]}],"text-decoration-thickness":[{decoration:[gr,"from-font","auto",Tt,wu]}],"text-decoration-color":[{decoration:U()}],"underline-offset":[{"underline-offset":[gr,"auto",Tt,_t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Tt,_t]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Tt,_t]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:te()}],"bg-repeat":[{bg:re()}],"bg-size":[{bg:q()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},hd,Tt,_t],radial:["",Tt,_t],conic:[hd,Tt,_t]},PZ,OZ]}],"bg-color":[{bg:U()}],"gradient-from-pos":[{from:L()}],"gradient-via-pos":[{via:L()}],"gradient-to-pos":[{to:L()}],"gradient-from":[{from:U()}],"gradient-via":[{via:U()}],"gradient-to":[{to:U()}],rounded:[{rounded:H()}],"rounded-s":[{"rounded-s":H()}],"rounded-e":[{"rounded-e":H()}],"rounded-t":[{"rounded-t":H()}],"rounded-r":[{"rounded-r":H()}],"rounded-b":[{"rounded-b":H()}],"rounded-l":[{"rounded-l":H()}],"rounded-ss":[{"rounded-ss":H()}],"rounded-se":[{"rounded-se":H()}],"rounded-ee":[{"rounded-ee":H()}],"rounded-es":[{"rounded-es":H()}],"rounded-tl":[{"rounded-tl":H()}],"rounded-tr":[{"rounded-tr":H()}],"rounded-br":[{"rounded-br":H()}],"rounded-bl":[{"rounded-bl":H()}],"border-w":[{border:ae()}],"border-w-x":[{"border-x":ae()}],"border-w-y":[{"border-y":ae()}],"border-w-s":[{"border-s":ae()}],"border-w-e":[{"border-e":ae()}],"border-w-t":[{"border-t":ae()}],"border-w-r":[{"border-r":ae()}],"border-w-b":[{"border-b":ae()}],"border-w-l":[{"border-l":ae()}],"divide-x":[{"divide-x":ae()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ae()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...oe(),"hidden","none"]}],"divide-style":[{divide:[...oe(),"hidden","none"]}],"border-color":[{border:U()}],"border-color-x":[{"border-x":U()}],"border-color-y":[{"border-y":U()}],"border-color-s":[{"border-s":U()}],"border-color-e":[{"border-e":U()}],"border-color-t":[{"border-t":U()}],"border-color-r":[{"border-r":U()}],"border-color-b":[{"border-b":U()}],"border-color-l":[{"border-l":U()}],"divide-color":[{divide:U()}],"outline-style":[{outline:[...oe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[gr,Tt,_t]}],"outline-w":[{outline:["",gr,vh,wu]}],"outline-color":[{outline:U()}],shadow:[{shadow:["","none",p,Ix,Dx]}],"shadow-color":[{shadow:U()}],"inset-shadow":[{"inset-shadow":["none",m,Ix,Dx]}],"inset-shadow-color":[{"inset-shadow":U()}],"ring-w":[{ring:ae()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:U()}],"ring-offset-w":[{"ring-offset":[gr,wu]}],"ring-offset-color":[{"ring-offset":U()}],"inset-ring-w":[{"inset-ring":ae()}],"inset-ring-color":[{"inset-ring":U()}],"text-shadow":[{"text-shadow":["none",h,Ix,Dx]}],"text-shadow-color":[{"text-shadow":U()}],opacity:[{opacity:[gr,Tt,_t]}],"mix-blend":[{"mix-blend":[...ve(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ve()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[gr]}],"mask-image-linear-from-pos":[{"mask-linear-from":ce()}],"mask-image-linear-to-pos":[{"mask-linear-to":ce()}],"mask-image-linear-from-color":[{"mask-linear-from":U()}],"mask-image-linear-to-color":[{"mask-linear-to":U()}],"mask-image-t-from-pos":[{"mask-t-from":ce()}],"mask-image-t-to-pos":[{"mask-t-to":ce()}],"mask-image-t-from-color":[{"mask-t-from":U()}],"mask-image-t-to-color":[{"mask-t-to":U()}],"mask-image-r-from-pos":[{"mask-r-from":ce()}],"mask-image-r-to-pos":[{"mask-r-to":ce()}],"mask-image-r-from-color":[{"mask-r-from":U()}],"mask-image-r-to-color":[{"mask-r-to":U()}],"mask-image-b-from-pos":[{"mask-b-from":ce()}],"mask-image-b-to-pos":[{"mask-b-to":ce()}],"mask-image-b-from-color":[{"mask-b-from":U()}],"mask-image-b-to-color":[{"mask-b-to":U()}],"mask-image-l-from-pos":[{"mask-l-from":ce()}],"mask-image-l-to-pos":[{"mask-l-to":ce()}],"mask-image-l-from-color":[{"mask-l-from":U()}],"mask-image-l-to-color":[{"mask-l-to":U()}],"mask-image-x-from-pos":[{"mask-x-from":ce()}],"mask-image-x-to-pos":[{"mask-x-to":ce()}],"mask-image-x-from-color":[{"mask-x-from":U()}],"mask-image-x-to-color":[{"mask-x-to":U()}],"mask-image-y-from-pos":[{"mask-y-from":ce()}],"mask-image-y-to-pos":[{"mask-y-to":ce()}],"mask-image-y-from-color":[{"mask-y-from":U()}],"mask-image-y-to-color":[{"mask-y-to":U()}],"mask-image-radial":[{"mask-radial":[Tt,_t]}],"mask-image-radial-from-pos":[{"mask-radial-from":ce()}],"mask-image-radial-to-pos":[{"mask-radial-to":ce()}],"mask-image-radial-from-color":[{"mask-radial-from":U()}],"mask-image-radial-to-color":[{"mask-radial-to":U()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":A()}],"mask-image-conic-pos":[{"mask-conic":[gr]}],"mask-image-conic-from-pos":[{"mask-conic-from":ce()}],"mask-image-conic-to-pos":[{"mask-conic-to":ce()}],"mask-image-conic-from-color":[{"mask-conic-from":U()}],"mask-image-conic-to-color":[{"mask-conic-to":U()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:te()}],"mask-repeat":[{mask:re()}],"mask-size":[{mask:q()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Tt,_t]}],filter:[{filter:["","none",Tt,_t]}],blur:[{blur:Ee()}],brightness:[{brightness:[gr,Tt,_t]}],contrast:[{contrast:[gr,Tt,_t]}],"drop-shadow":[{"drop-shadow":["","none",x,Ix,Dx]}],"drop-shadow-color":[{"drop-shadow":U()}],grayscale:[{grayscale:["",gr,Tt,_t]}],"hue-rotate":[{"hue-rotate":[gr,Tt,_t]}],invert:[{invert:["",gr,Tt,_t]}],saturate:[{saturate:[gr,Tt,_t]}],sepia:[{sepia:["",gr,Tt,_t]}],"backdrop-filter":[{"backdrop-filter":["","none",Tt,_t]}],"backdrop-blur":[{"backdrop-blur":Ee()}],"backdrop-brightness":[{"backdrop-brightness":[gr,Tt,_t]}],"backdrop-contrast":[{"backdrop-contrast":[gr,Tt,_t]}],"backdrop-grayscale":[{"backdrop-grayscale":["",gr,Tt,_t]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[gr,Tt,_t]}],"backdrop-invert":[{"backdrop-invert":["",gr,Tt,_t]}],"backdrop-opacity":[{"backdrop-opacity":[gr,Tt,_t]}],"backdrop-saturate":[{"backdrop-saturate":[gr,Tt,_t]}],"backdrop-sepia":[{"backdrop-sepia":["",gr,Tt,_t]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":D()}],"border-spacing-x":[{"border-spacing-x":D()}],"border-spacing-y":[{"border-spacing-y":D()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Tt,_t]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[gr,"initial",Tt,_t]}],ease:[{ease:["linear","initial",j,Tt,_t]}],delay:[{delay:[gr,Tt,_t]}],animate:[{animate:["none",E,Tt,_t]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[N,Tt,_t]}],"perspective-origin":[{"perspective-origin":S()}],rotate:[{rotate:xe()}],"rotate-x":[{"rotate-x":xe()}],"rotate-y":[{"rotate-y":xe()}],"rotate-z":[{"rotate-z":xe()}],scale:[{scale:Te()}],"scale-x":[{"scale-x":Te()}],"scale-y":[{"scale-y":Te()}],"scale-z":[{"scale-z":Te()}],"scale-3d":["scale-3d"],skew:[{skew:ye()}],"skew-x":[{"skew-x":ye()}],"skew-y":[{"skew-y":ye()}],transform:[{transform:[Tt,_t,"","none","gpu","cpu"]}],"transform-origin":[{origin:S()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:se()}],"translate-x":[{"translate-x":se()}],"translate-y":[{"translate-y":se()}],"translate-z":[{"translate-z":se()}],"translate-none":["translate-none"],accent:[{accent:U()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:U()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Tt,_t]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Tt,_t]}],fill:[{fill:["none",...U()]}],"stroke-w":[{stroke:[gr,vh,wu,h2]}],stroke:[{stroke:["none",...U()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},LZ=gZ(MZ);function de(...e){return LZ(ar(e))}function Cr({className:e,...t}){return n.jsx("div",{"data-slot":"card",className:de("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",e),...t})}function Nn({className:e,...t}){return n.jsx("div",{"data-slot":"card-header",className:de("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function Sn({className:e,...t}){return n.jsx("h4",{"data-slot":"card-title",className:de("leading-none",e),...t})}function fl({className:e,...t}){return n.jsx("p",{"data-slot":"card-description",className:de("text-muted-foreground",e),...t})}function _r({className:e,...t}){return n.jsx("div",{"data-slot":"card-content",className:de("px-6 [&:last-child]:pb-6",e),...t})}function UR(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function df(...e){return t=>{let r=!1;const a=e.map(s=>{const i=UR(s,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let s=0;s<a.length;s++){const i=a[s];typeof i=="function"?i():UR(e[s],null)}}}}function wr(...e){return g.useCallback(df(...e),e)}var $Z=Symbol.for("react.lazy"),ey=pO[" use ".trim().toString()];function FZ(e){return typeof e=="object"&&e!==null&&"then"in e}function q8(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===$Z&&"_payload"in e&&FZ(e._payload)}function Uv(e){const t=BZ(e),r=g.forwardRef((a,s)=>{let{children:i,...o}=a;q8(i)&&typeof ey=="function"&&(i=ey(i._payload));const l=g.Children.toArray(i),d=l.find(HZ);if(d){const u=d.props.children,p=l.map(m=>m===d?g.Children.count(u)>1?g.Children.only(null):g.isValidElement(u)?u.props.children:null:m);return n.jsx(t,{...o,ref:s,children:g.isValidElement(u)?g.cloneElement(u,void 0,p):null})}return n.jsx(t,{...o,ref:s,children:i})});return r.displayName=`${e}.Slot`,r}var W8=Uv("Slot");function BZ(e){const t=g.forwardRef((r,a)=>{let{children:s,...i}=r;if(q8(s)&&typeof ey=="function"&&(s=ey(s._payload)),g.isValidElement(s)){const o=KZ(s),l=GZ(i,s.props);return s.type!==g.Fragment&&(l.ref=a?df(a,o):o),g.cloneElement(s,l)}return g.Children.count(s)>1?g.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var UZ=Symbol("radix.slottable");function HZ(e){return g.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===UZ}function GZ(e,t){const r={...t};for(const a in t){const s=e[a],i=t[a];/^on[A-Z]/.test(a)?s&&i?r[a]=(...l)=>{const d=i(...l);return s(...l),d}:s&&(r[a]=s):a==="style"?r[a]={...s,...i}:a==="className"&&(r[a]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function KZ(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}const HR=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,GR=ar,AO=(e,t)=>r=>{var a;if(t?.variants==null)return GR(e,r?.class,r?.className);const{variants:s,defaultVariants:i}=t,o=Object.keys(s).map(u=>{const p=r?.[u],m=i?.[u];if(p===null)return null;const h=HR(p)||HR(m);return s[u][h]}),l=r&&Object.entries(r).reduce((u,p)=>{let[m,h]=p;return h===void 0||(u[m]=h),u},{}),d=t==null||(a=t.compoundVariants)===null||a===void 0?void 0:a.reduce((u,p)=>{let{class:m,className:h,...x}=p;return Object.entries(x).every(y=>{let[N,v]=y;return Array.isArray(v)?v.includes({...i,...l}[N]):{...i,...l}[N]===v})?[...u,m,h]:u},[]);return GR(e,o,d,r?.class,r?.className)},zZ=AO("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function Nt({className:e,variant:t,size:r,asChild:a=!1,...s}){const i=a?W8:"button";return n.jsx(i,{"data-slot":"button",className:de(zZ({variant:t,size:r,className:e})),...s})}function Ir({className:e,type:t,...r}){return n.jsx("input",{type:t,"data-slot":"input",className:de("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...r})}var Cp=y8();const V8=Vr(Cp);var qZ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],WZ=qZ.reduce((e,t)=>{const r=Uv(`Primitive.${t}`),a=g.forwardRef((s,i)=>{const{asChild:o,...l}=s,d=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(d,{...l,ref:i})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{}),VZ="Label",Y8=g.forwardRef((e,t)=>n.jsx(WZ.label,{...e,ref:t,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(e.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));Y8.displayName=VZ;var YZ=Y8;function It({className:e,...t}){return n.jsx(YZ,{"data-slot":"label",className:de("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}function XZ(e,t){const r=g.createContext(t),a=i=>{const{children:o,...l}=i,d=g.useMemo(()=>l,Object.values(l));return n.jsx(r.Provider,{value:d,children:o})};a.displayName=e+"Provider";function s(i){const o=g.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[a,s]}function ao(e,t=[]){let r=[];function a(i,o){const l=g.createContext(o),d=r.length;r=[...r,o];const u=m=>{const{scope:h,children:x,...y}=m,N=h?.[e]?.[d]||l,v=g.useMemo(()=>y,Object.values(y));return n.jsx(N.Provider,{value:v,children:x})};u.displayName=i+"Provider";function p(m,h){const x=h?.[e]?.[d]||l,y=g.useContext(x);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${i}\``)}return[u,p]}const s=()=>{const i=r.map(o=>g.createContext(o));return function(l){const d=l?.[e]||i;return g.useMemo(()=>({[`__scope${e}`]:{...l,[e]:d}}),[l,d])}};return s.scopeName=e,[a,QZ(s,...t)]}function QZ(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const a=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=a.reduce((l,{useScope:d,scopeName:u})=>{const m=d(i)[`__scope${u}`];return{...l,...m}},{});return g.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function Bt(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e?.(s),r===!1||!s.defaultPrevented)return t?.(s)}}var na=globalThis?.document?g.useLayoutEffect:()=>{},ZZ=pO[" useInsertionEffect ".trim().toString()]||na;function Cc({prop:e,defaultProp:t,onChange:r=()=>{},caller:a}){const[s,i,o]=JZ({defaultProp:t,onChange:r}),l=e!==void 0,d=l?e:s;{const p=g.useRef(e!==void 0);g.useEffect(()=>{const m=p.current;m!==l&&console.warn(`${a} is changing from ${m?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),p.current=l},[l,a])}const u=g.useCallback(p=>{if(l){const m=eJ(p)?p(e):p;m!==e&&o.current?.(m)}else i(p)},[l,e,i,o]);return[d,u]}function JZ({defaultProp:e,onChange:t}){const[r,a]=g.useState(e),s=g.useRef(r),i=g.useRef(t);return ZZ(()=>{i.current=t},[t]),g.useEffect(()=>{s.current!==r&&(i.current?.(r),s.current=r)},[r,s]),[r,a,i]}function eJ(e){return typeof e=="function"}function CO(e){const t=g.useRef({value:e,previous:e});return g.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function _O(e){const[t,r]=g.useState(void 0);return na(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const a=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,l;if("borderBoxSize"in i){const d=i.borderBoxSize,u=Array.isArray(d)?d[0]:d;o=u.inlineSize,l=u.blockSize}else o=e.offsetWidth,l=e.offsetHeight;r({width:o,height:l})});return a.observe(e,{box:"border-box"}),()=>a.unobserve(e)}else r(void 0)},[e]),t}function tJ(e,t){return g.useReducer((r,a)=>t[r][a]??r,e)}var Is=e=>{const{present:t,children:r}=e,a=rJ(t),s=typeof r=="function"?r({present:a.isPresent}):g.Children.only(r),i=wr(a.ref,nJ(s));return typeof r=="function"||a.isPresent?g.cloneElement(s,{ref:i}):null};Is.displayName="Presence";function rJ(e){const[t,r]=g.useState(),a=g.useRef(null),s=g.useRef(e),i=g.useRef("none"),o=e?"mounted":"unmounted",[l,d]=tJ(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const u=Mx(a.current);i.current=l==="mounted"?u:"none"},[l]),na(()=>{const u=a.current,p=s.current;if(p!==e){const h=i.current,x=Mx(u);e?d("MOUNT"):x==="none"||u?.display==="none"?d("UNMOUNT"):d(p&&h!==x?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,d]),na(()=>{if(t){let u;const p=t.ownerDocument.defaultView??window,m=x=>{const N=Mx(a.current).includes(CSS.escape(x.animationName));if(x.target===t&&N&&(d("ANIMATION_END"),!s.current)){const v=t.style.animationFillMode;t.style.animationFillMode="forwards",u=p.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=v)})}},h=x=>{x.target===t&&(i.current=Mx(a.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",m),t.addEventListener("animationend",m),()=>{p.clearTimeout(u),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",m),t.removeEventListener("animationend",m)}}else d("ANIMATION_END")},[t,d]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:g.useCallback(u=>{a.current=u?getComputedStyle(u):null,r(u)},[])}}function Mx(e){return e?.animationName||"none"}function nJ(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function aJ(e){const t=sJ(e),r=g.forwardRef((a,s)=>{const{children:i,...o}=a,l=g.Children.toArray(i),d=l.find(oJ);if(d){const u=d.props.children,p=l.map(m=>m===d?g.Children.count(u)>1?g.Children.only(null):g.isValidElement(u)?u.props.children:null:m);return n.jsx(t,{...o,ref:s,children:g.isValidElement(u)?g.cloneElement(u,void 0,p):null})}return n.jsx(t,{...o,ref:s,children:i})});return r.displayName=`${e}.Slot`,r}function sJ(e){const t=g.forwardRef((r,a)=>{const{children:s,...i}=r;if(g.isValidElement(s)){const o=cJ(s),l=lJ(i,s.props);return s.type!==g.Fragment&&(l.ref=a?df(a,o):o),g.cloneElement(s,l)}return g.Children.count(s)>1?g.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var iJ=Symbol("radix.slottable");function oJ(e){return g.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===iJ}function lJ(e,t){const r={...t};for(const a in t){const s=e[a],i=t[a];/^on[A-Z]/.test(a)?s&&i?r[a]=(...l)=>{const d=i(...l);return s(...l),d}:s&&(r[a]=s):a==="style"?r[a]={...s,...i}:a==="className"&&(r[a]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function cJ(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var dJ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],sr=dJ.reduce((e,t)=>{const r=aJ(`Primitive.${t}`),a=g.forwardRef((s,i)=>{const{asChild:o,...l}=s,d=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(d,{...l,ref:i})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{});function uJ(e,t){e&&Cp.flushSync(()=>e.dispatchEvent(t))}var Hv="Checkbox",[fJ]=ao(Hv),[mJ,TO]=fJ(Hv);function pJ(e){const{__scopeCheckbox:t,checked:r,children:a,defaultChecked:s,disabled:i,form:o,name:l,onCheckedChange:d,required:u,value:p="on",internal_do_not_use_render:m}=e,[h,x]=Cc({prop:r,defaultProp:s??!1,onChange:d,caller:Hv}),[y,N]=g.useState(null),[v,j]=g.useState(null),E=g.useRef(!1),C=y?!!o||!!y.closest("form"):!0,A={checked:h,disabled:i,setChecked:x,control:y,setControl:N,name:l,form:o,value:p,hasConsumerStoppedPropagationRef:E,required:u,defaultChecked:Ld(s)?!1:s,isFormControl:C,bubbleInput:v,setBubbleInput:j};return n.jsx(mJ,{scope:t,...A,children:hJ(m)?m(A):a})}var X8="CheckboxTrigger",Q8=g.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...a},s)=>{const{control:i,value:o,disabled:l,checked:d,required:u,setControl:p,setChecked:m,hasConsumerStoppedPropagationRef:h,isFormControl:x,bubbleInput:y}=TO(X8,e),N=wr(s,p),v=g.useRef(d);return g.useEffect(()=>{const j=i?.form;if(j){const E=()=>m(v.current);return j.addEventListener("reset",E),()=>j.removeEventListener("reset",E)}},[i,m]),n.jsx(sr.button,{type:"button",role:"checkbox","aria-checked":Ld(d)?"mixed":d,"aria-required":u,"data-state":nB(d),"data-disabled":l?"":void 0,disabled:l,value:o,...a,ref:N,onKeyDown:Bt(t,j=>{j.key==="Enter"&&j.preventDefault()}),onClick:Bt(r,j=>{m(E=>Ld(E)?!0:!E),y&&x&&(h.current=j.isPropagationStopped(),h.current||j.stopPropagation())})})});Q8.displayName=X8;var Z8=g.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:a,checked:s,defaultChecked:i,required:o,disabled:l,value:d,onCheckedChange:u,form:p,...m}=e;return n.jsx(pJ,{__scopeCheckbox:r,checked:s,defaultChecked:i,disabled:l,required:o,onCheckedChange:u,name:a,form:p,value:d,internal_do_not_use_render:({isFormControl:h})=>n.jsxs(n.Fragment,{children:[n.jsx(Q8,{...m,ref:t,__scopeCheckbox:r}),h&&n.jsx(rB,{__scopeCheckbox:r})]})})});Z8.displayName=Hv;var J8="CheckboxIndicator",eB=g.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:a,...s}=e,i=TO(J8,r);return n.jsx(Is,{present:a||Ld(i.checked)||i.checked===!0,children:n.jsx(sr.span,{"data-state":nB(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});eB.displayName=J8;var tB="CheckboxBubbleInput",rB=g.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:a,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:o,required:l,disabled:d,name:u,value:p,form:m,bubbleInput:h,setBubbleInput:x}=TO(tB,e),y=wr(r,x),N=CO(i),v=_O(a);g.useEffect(()=>{const E=h;if(!E)return;const C=window.HTMLInputElement.prototype,S=Object.getOwnPropertyDescriptor(C,"checked").set,_=!s.current;if(N!==i&&S){const O=new Event("click",{bubbles:_});E.indeterminate=Ld(i),S.call(E,Ld(i)?!1:i),E.dispatchEvent(O)}},[h,N,i,s]);const j=g.useRef(Ld(i)?!1:i);return n.jsx(sr.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??j.current,required:l,disabled:d,name:u,value:p,form:m,...t,tabIndex:-1,ref:y,style:{...t.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});rB.displayName=tB;function hJ(e){return typeof e=="function"}function Ld(e){return e==="indeterminate"}function nB(e){return Ld(e)?"indeterminate":e?"checked":"unchecked"}function Tb({className:e,...t}){return n.jsx(Z8,{"data-slot":"checkbox",className:de("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:n.jsx(eB,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:n.jsx(Yu,{className:"size-3.5"})})})}const gJ=AO("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function gm({className:e,variant:t,...r}){return n.jsx("div",{"data-slot":"alert",role:"alert",className:de(gJ({variant:t}),e),...r})}function xm({className:e,...t}){return n.jsx("div",{"data-slot":"alert-description",className:de("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...t})}function xJ(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}const bJ=e=>{switch(e){case"success":return NJ;case"info":return jJ;case"warning":return SJ;case"error":return wJ;default:return null}},yJ=Array(12).fill(0),vJ=({visible:e,className:t})=>Y.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},Y.createElement("div",{className:"sonner-spinner"},yJ.map((r,a)=>Y.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${a}`})))),NJ=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),SJ=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),jJ=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),wJ=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),EJ=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Y.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Y.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),AJ=()=>{const[e,t]=Y.useState(document.hidden);return Y.useEffect(()=>{const r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e};let OC=1;class CJ{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const r=this.subscribers.indexOf(t);this.subscribers.splice(r,1)}),this.publish=t=>{this.subscribers.forEach(r=>r(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var r;const{message:a,...s}=t,i=typeof t?.id=="number"||((r=t.id)==null?void 0:r.length)>0?t.id:OC++,o=this.toasts.find(d=>d.id===i),l=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(d=>d.id===i?(this.publish({...d,...t,id:i,title:a}),{...d,...t,id:i,dismissible:l,title:a}):d):this.addToast({title:a,...s,dismissible:l,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(r=>r({id:t,dismiss:!0})))):this.toasts.forEach(r=>{this.subscribers.forEach(a=>a({id:r.id,dismiss:!0}))}),t),this.message=(t,r)=>this.create({...r,message:t}),this.error=(t,r)=>this.create({...r,message:t,type:"error"}),this.success=(t,r)=>this.create({...r,type:"success",message:t}),this.info=(t,r)=>this.create({...r,type:"info",message:t}),this.warning=(t,r)=>this.create({...r,type:"warning",message:t}),this.loading=(t,r)=>this.create({...r,type:"loading",message:t}),this.promise=(t,r)=>{if(!r)return;let a;r.loading!==void 0&&(a=this.create({...r,promise:t,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));const s=Promise.resolve(t instanceof Function?t():t);let i=a!==void 0,o;const l=s.then(async u=>{if(o=["resolve",u],Y.isValidElement(u))i=!1,this.create({id:a,type:"default",message:u});else if(TJ(u)&&!u.ok){i=!1;const m=typeof r.error=="function"?await r.error(`HTTP error! status: ${u.status}`):r.error,h=typeof r.description=="function"?await r.description(`HTTP error! status: ${u.status}`):r.description,y=typeof m=="object"&&!Y.isValidElement(m)?m:{message:m};this.create({id:a,type:"error",description:h,...y})}else if(u instanceof Error){i=!1;const m=typeof r.error=="function"?await r.error(u):r.error,h=typeof r.description=="function"?await r.description(u):r.description,y=typeof m=="object"&&!Y.isValidElement(m)?m:{message:m};this.create({id:a,type:"error",description:h,...y})}else if(r.success!==void 0){i=!1;const m=typeof r.success=="function"?await r.success(u):r.success,h=typeof r.description=="function"?await r.description(u):r.description,y=typeof m=="object"&&!Y.isValidElement(m)?m:{message:m};this.create({id:a,type:"success",description:h,...y})}}).catch(async u=>{if(o=["reject",u],r.error!==void 0){i=!1;const p=typeof r.error=="function"?await r.error(u):r.error,m=typeof r.description=="function"?await r.description(u):r.description,x=typeof p=="object"&&!Y.isValidElement(p)?p:{message:p};this.create({id:a,type:"error",description:m,...x})}}).finally(()=>{i&&(this.dismiss(a),a=void 0),r.finally==null||r.finally.call(r)}),d=()=>new Promise((u,p)=>l.then(()=>o[0]==="reject"?p(o[1]):u(o[1])).catch(p));return typeof a!="string"&&typeof a!="number"?{unwrap:d}:Object.assign(a,{unwrap:d})},this.custom=(t,r)=>{const a=r?.id||OC++;return this.create({jsx:t(a),id:a,...r}),a},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Xs=new CJ,_J=(e,t)=>{const r=t?.id||OC++;return Xs.addToast({title:e,...t,id:r}),r},TJ=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",OJ=_J,kJ=()=>Xs.toasts,RJ=()=>Xs.getActiveToasts(),Me=Object.assign(OJ,{success:Xs.success,info:Xs.info,warning:Xs.warning,error:Xs.error,custom:Xs.custom,message:Xs.message,promise:Xs.promise,dismiss:Xs.dismiss,loading:Xs.loading},{getHistory:kJ,getToasts:RJ});xJ("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Lx(e){return e.label!==void 0}const PJ=3,DJ="24px",IJ="16px",KR=4e3,MJ=356,LJ=14,$J=45,FJ=200;function nl(...e){return e.filter(Boolean).join(" ")}function BJ(e){const[t,r]=e.split("-"),a=[];return t&&a.push(t),r&&a.push(r),a}const UJ=e=>{var t,r,a,s,i,o,l,d,u;const{invert:p,toast:m,unstyled:h,interacting:x,setHeights:y,visibleToasts:N,heights:v,index:j,toasts:E,expanded:C,removeToast:A,defaultRichColors:S,closeButton:_,style:O,cancelButtonStyle:D,actionButtonStyle:k,className:M="",descriptionClassName:F="",duration:$,position:B,gap:P,expandByDefault:W,classNames:K,icons:G,closeButtonAriaLabel:U="Close toast"}=e,[te,re]=Y.useState(null),[q,L]=Y.useState(null),[H,ae]=Y.useState(!1),[oe,ve]=Y.useState(!1),[ce,Ee]=Y.useState(!1),[xe,Te]=Y.useState(!1),[ye,se]=Y.useState(!1),[ct,Q]=Y.useState(0),[he,$e]=Y.useState(0),Z=Y.useRef(m.duration||$||KR),je=Y.useRef(null),ge=Y.useRef(null),be=j===0,it=j+1<=N,Fe=m.type,Et=m.dismissible!==!1,Mt=m.className||"",Be=m.descriptionClassName||"",tr=Y.useMemo(()=>v.findIndex(Ge=>Ge.toastId===m.id)||0,[v,m.id]),br=Y.useMemo(()=>{var Ge;return(Ge=m.closeButton)!=null?Ge:_},[m.closeButton,_]),Er=Y.useMemo(()=>m.duration||$||KR,[m.duration,$]),yr=Y.useRef(0),Rr=Y.useRef(0),zr=Y.useRef(0),pr=Y.useRef(null),[hr,Tr]=B.split("-"),Mr=Y.useMemo(()=>v.reduce((Ge,ut,er)=>er>=tr?Ge:Ge+ut.height,0),[v,tr]),jn=AJ(),rt=m.invert||p,Pe=Fe==="loading";Rr.current=Y.useMemo(()=>tr*P+Mr,[tr,Mr]),Y.useEffect(()=>{Z.current=Er},[Er]),Y.useEffect(()=>{ae(!0)},[]),Y.useEffect(()=>{const Ge=ge.current;if(Ge){const ut=Ge.getBoundingClientRect().height;return $e(ut),y(er=>[{toastId:m.id,height:ut,position:m.position},...er]),()=>y(er=>er.filter(mr=>mr.toastId!==m.id))}},[y,m.id]),Y.useLayoutEffect(()=>{if(!H)return;const Ge=ge.current,ut=Ge.style.height;Ge.style.height="auto";const er=Ge.getBoundingClientRect().height;Ge.style.height=ut,$e(er),y(mr=>mr.find(ft=>ft.toastId===m.id)?mr.map(ft=>ft.toastId===m.id?{...ft,height:er}:ft):[{toastId:m.id,height:er,position:m.position},...mr])},[H,m.title,m.description,y,m.id,m.jsx,m.action,m.cancel]);const Kt=Y.useCallback(()=>{ve(!0),Q(Rr.current),y(Ge=>Ge.filter(ut=>ut.toastId!==m.id)),setTimeout(()=>{A(m)},FJ)},[m,A,y,Rr]);Y.useEffect(()=>{if(m.promise&&Fe==="loading"||m.duration===1/0||m.type==="loading")return;let Ge;return C||x||jn?(()=>{if(zr.current<yr.current){const mr=new Date().getTime()-yr.current;Z.current=Z.current-mr}zr.current=new Date().getTime()})():(()=>{Z.current!==1/0&&(yr.current=new Date().getTime(),Ge=setTimeout(()=>{m.onAutoClose==null||m.onAutoClose.call(m,m),Kt()},Z.current))})(),()=>clearTimeout(Ge)},[C,x,m,Fe,jn,Kt]),Y.useEffect(()=>{m.delete&&(Kt(),m.onDismiss==null||m.onDismiss.call(m,m))},[Kt,m.delete]);function Pr(){var Ge;if(G?.loading){var ut;return Y.createElement("div",{className:nl(K?.loader,m==null||(ut=m.classNames)==null?void 0:ut.loader,"sonner-loader"),"data-visible":Fe==="loading"},G.loading)}return Y.createElement(vJ,{className:nl(K?.loader,m==null||(Ge=m.classNames)==null?void 0:Ge.loader),visible:Fe==="loading"})}const vr=m.icon||G?.[Fe]||bJ(Fe);var Cn,Ae;return Y.createElement("li",{tabIndex:0,ref:ge,className:nl(M,Mt,K?.toast,m==null||(t=m.classNames)==null?void 0:t.toast,K?.default,K?.[Fe],m==null||(r=m.classNames)==null?void 0:r[Fe]),"data-sonner-toast":"","data-rich-colors":(Cn=m.richColors)!=null?Cn:S,"data-styled":!(m.jsx||m.unstyled||h),"data-mounted":H,"data-promise":!!m.promise,"data-swiped":ye,"data-removed":oe,"data-visible":it,"data-y-position":hr,"data-x-position":Tr,"data-index":j,"data-front":be,"data-swiping":ce,"data-dismissible":Et,"data-type":Fe,"data-invert":rt,"data-swipe-out":xe,"data-swipe-direction":q,"data-expanded":!!(C||W&&H),"data-testid":m.testId,style:{"--index":j,"--toasts-before":j,"--z-index":E.length-j,"--offset":`${oe?ct:Rr.current}px`,"--initial-height":W?"auto":`${he}px`,...O,...m.style},onDragEnd:()=>{Ee(!1),re(null),pr.current=null},onPointerDown:Ge=>{Ge.button!==2&&(Pe||!Et||(je.current=new Date,Q(Rr.current),Ge.target.setPointerCapture(Ge.pointerId),Ge.target.tagName!=="BUTTON"&&(Ee(!0),pr.current={x:Ge.clientX,y:Ge.clientY})))},onPointerUp:()=>{var Ge,ut,er;if(xe||!Et)return;pr.current=null;const mr=Number(((Ge=ge.current)==null?void 0:Ge.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Or=Number(((ut=ge.current)==null?void 0:ut.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ft=new Date().getTime()-((er=je.current)==null?void 0:er.getTime()),Le=te==="x"?mr:Or,We=Math.abs(Le)/ft;if(Math.abs(Le)>=$J||We>.11){Q(Rr.current),m.onDismiss==null||m.onDismiss.call(m,m),L(te==="x"?mr>0?"right":"left":Or>0?"down":"up"),Kt(),Te(!0);return}else{var $t,Re;($t=ge.current)==null||$t.style.setProperty("--swipe-amount-x","0px"),(Re=ge.current)==null||Re.style.setProperty("--swipe-amount-y","0px")}se(!1),Ee(!1),re(null)},onPointerMove:Ge=>{var ut,er,mr;if(!pr.current||!Et||((ut=window.getSelection())==null?void 0:ut.toString().length)>0)return;const ft=Ge.clientY-pr.current.y,Le=Ge.clientX-pr.current.x;var We;const $t=(We=e.swipeDirections)!=null?We:BJ(B);!te&&(Math.abs(Le)>1||Math.abs(ft)>1)&&re(Math.abs(Le)>Math.abs(ft)?"x":"y");let Re={x:0,y:0};const _e=Ve=>1/(1.5+Math.abs(Ve)/20);if(te==="y"){if($t.includes("top")||$t.includes("bottom"))if($t.includes("top")&&ft<0||$t.includes("bottom")&&ft>0)Re.y=ft;else{const Ve=ft*_e(ft);Re.y=Math.abs(Ve)<Math.abs(ft)?Ve:ft}}else if(te==="x"&&($t.includes("left")||$t.includes("right")))if($t.includes("left")&&Le<0||$t.includes("right")&&Le>0)Re.x=Le;else{const Ve=Le*_e(Le);Re.x=Math.abs(Ve)<Math.abs(Le)?Ve:Le}(Math.abs(Re.x)>0||Math.abs(Re.y)>0)&&se(!0),(er=ge.current)==null||er.style.setProperty("--swipe-amount-x",`${Re.x}px`),(mr=ge.current)==null||mr.style.setProperty("--swipe-amount-y",`${Re.y}px`)}},br&&!m.jsx&&Fe!=="loading"?Y.createElement("button",{"aria-label":U,"data-disabled":Pe,"data-close-button":!0,onClick:Pe||!Et?()=>{}:()=>{Kt(),m.onDismiss==null||m.onDismiss.call(m,m)},className:nl(K?.closeButton,m==null||(a=m.classNames)==null?void 0:a.closeButton)},(Ae=G?.close)!=null?Ae:EJ):null,(Fe||m.icon||m.promise)&&m.icon!==null&&(G?.[Fe]!==null||m.icon)?Y.createElement("div",{"data-icon":"",className:nl(K?.icon,m==null||(s=m.classNames)==null?void 0:s.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||Pr():null,m.type!=="loading"?vr:null):null,Y.createElement("div",{"data-content":"",className:nl(K?.content,m==null||(i=m.classNames)==null?void 0:i.content)},Y.createElement("div",{"data-title":"",className:nl(K?.title,m==null||(o=m.classNames)==null?void 0:o.title)},m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title),m.description?Y.createElement("div",{"data-description":"",className:nl(F,Be,K?.description,m==null||(l=m.classNames)==null?void 0:l.description)},typeof m.description=="function"?m.description():m.description):null),Y.isValidElement(m.cancel)?m.cancel:m.cancel&&Lx(m.cancel)?Y.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||D,onClick:Ge=>{Lx(m.cancel)&&Et&&(m.cancel.onClick==null||m.cancel.onClick.call(m.cancel,Ge),Kt())},className:nl(K?.cancelButton,m==null||(d=m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,Y.isValidElement(m.action)?m.action:m.action&&Lx(m.action)?Y.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||k,onClick:Ge=>{Lx(m.action)&&(m.action.onClick==null||m.action.onClick.call(m.action,Ge),!Ge.defaultPrevented&&Kt())},className:nl(K?.actionButton,m==null||(u=m.classNames)==null?void 0:u.actionButton)},m.action.label):null)};function zR(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function HJ(e,t){const r={};return[e,t].forEach((a,s)=>{const i=s===1,o=i?"--mobile-offset":"--offset",l=i?IJ:DJ;function d(u){["top","right","bottom","left"].forEach(p=>{r[`${o}-${p}`]=typeof u=="number"?`${u}px`:u})}typeof a=="number"||typeof a=="string"?d(a):typeof a=="object"?["top","right","bottom","left"].forEach(u=>{a[u]===void 0?r[`${o}-${u}`]=l:r[`${o}-${u}`]=typeof a[u]=="number"?`${a[u]}px`:a[u]}):d(l)}),r}const GJ=Y.forwardRef(function(t,r){const{id:a,invert:s,position:i="bottom-right",hotkey:o=["altKey","KeyT"],expand:l,closeButton:d,className:u,offset:p,mobileOffset:m,theme:h="light",richColors:x,duration:y,style:N,visibleToasts:v=PJ,toastOptions:j,dir:E=zR(),gap:C=LJ,icons:A,containerAriaLabel:S="Notifications"}=t,[_,O]=Y.useState([]),D=Y.useMemo(()=>a?_.filter(H=>H.toasterId===a):_.filter(H=>!H.toasterId),[_,a]),k=Y.useMemo(()=>Array.from(new Set([i].concat(D.filter(H=>H.position).map(H=>H.position)))),[D,i]),[M,F]=Y.useState([]),[$,B]=Y.useState(!1),[P,W]=Y.useState(!1),[K,G]=Y.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),U=Y.useRef(null),te=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),re=Y.useRef(null),q=Y.useRef(!1),L=Y.useCallback(H=>{O(ae=>{var oe;return(oe=ae.find(ve=>ve.id===H.id))!=null&&oe.delete||Xs.dismiss(H.id),ae.filter(({id:ve})=>ve!==H.id)})},[]);return Y.useEffect(()=>Xs.subscribe(H=>{if(H.dismiss){requestAnimationFrame(()=>{O(ae=>ae.map(oe=>oe.id===H.id?{...oe,delete:!0}:oe))});return}setTimeout(()=>{V8.flushSync(()=>{O(ae=>{const oe=ae.findIndex(ve=>ve.id===H.id);return oe!==-1?[...ae.slice(0,oe),{...ae[oe],...H},...ae.slice(oe+1)]:[H,...ae]})})})}),[_]),Y.useEffect(()=>{if(h!=="system"){G(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?G("dark"):G("light")),typeof window>"u")return;const H=window.matchMedia("(prefers-color-scheme: dark)");try{H.addEventListener("change",({matches:ae})=>{G(ae?"dark":"light")})}catch{H.addListener(({matches:oe})=>{try{G(oe?"dark":"light")}catch(ve){console.error(ve)}})}},[h]),Y.useEffect(()=>{_.length<=1&&B(!1)},[_]),Y.useEffect(()=>{const H=ae=>{var oe;if(o.every(Ee=>ae[Ee]||ae.code===Ee)){var ce;B(!0),(ce=U.current)==null||ce.focus()}ae.code==="Escape"&&(document.activeElement===U.current||(oe=U.current)!=null&&oe.contains(document.activeElement))&&B(!1)};return document.addEventListener("keydown",H),()=>document.removeEventListener("keydown",H)},[o]),Y.useEffect(()=>{if(U.current)return()=>{re.current&&(re.current.focus({preventScroll:!0}),re.current=null,q.current=!1)}},[U.current]),Y.createElement("section",{ref:r,"aria-label":`${S} ${te}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},k.map((H,ae)=>{var oe;const[ve,ce]=H.split("-");return D.length?Y.createElement("ol",{key:H,dir:E==="auto"?zR():E,tabIndex:-1,ref:U,className:u,"data-sonner-toaster":!0,"data-sonner-theme":K,"data-y-position":ve,"data-x-position":ce,style:{"--front-toast-height":`${((oe=M[0])==null?void 0:oe.height)||0}px`,"--width":`${MJ}px`,"--gap":`${C}px`,...N,...HJ(p,m)},onBlur:Ee=>{q.current&&!Ee.currentTarget.contains(Ee.relatedTarget)&&(q.current=!1,re.current&&(re.current.focus({preventScroll:!0}),re.current=null))},onFocus:Ee=>{Ee.target instanceof HTMLElement&&Ee.target.dataset.dismissible==="false"||q.current||(q.current=!0,re.current=Ee.relatedTarget)},onMouseEnter:()=>B(!0),onMouseMove:()=>B(!0),onMouseLeave:()=>{P||B(!1)},onDragEnd:()=>B(!1),onPointerDown:Ee=>{Ee.target instanceof HTMLElement&&Ee.target.dataset.dismissible==="false"||W(!0)},onPointerUp:()=>W(!1)},D.filter(Ee=>!Ee.position&&ae===0||Ee.position===H).map((Ee,xe)=>{var Te,ye;return Y.createElement(UJ,{key:Ee.id,icons:A,index:xe,toast:Ee,defaultRichColors:x,duration:(Te=j?.duration)!=null?Te:y,className:j?.className,descriptionClassName:j?.descriptionClassName,invert:s,visibleToasts:v,closeButton:(ye=j?.closeButton)!=null?ye:d,interacting:P,position:H,style:j?.style,unstyled:j?.unstyled,classNames:j?.classNames,cancelButtonStyle:j?.cancelButtonStyle,actionButtonStyle:j?.actionButtonStyle,closeButtonAriaLabel:j?.closeButtonAriaLabel,removeToast:L,toasts:D.filter(se=>se.position==Ee.position),heights:M.filter(se=>se.position==Ee.position),setHeights:F,expandByDefault:l,gap:C,expanded:$,swipeDirections:t.swipeDirections})})):null}))}),g2=[{email:"admin@central.gov.kr",password:"demo1234",role:"central_admin",name:"",organization:""},{email:"regional@seoul.go.kr",password:"demo1234",role:"regional_center",name:"",organization:" "},{email:"local@gangnam.go.kr",password:"demo1234",role:"local_center",name:"",organization:"  "}];function KJ({onLogin:e}){const[t,r]=g.useState("select"),[a,s]=g.useState(null),[i,o]=g.useState(""),[l,d]=g.useState(""),[u,p]=g.useState(""),[m,h]=g.useState(""),[x,y]=g.useState(!1),[N,v]=g.useState(!1),[j,E]=g.useState(1),C=[{id:"citizen",title:"",description:"    ( )",icon:kl,color:"bg-blue-600"},{id:"local_center",title:"",description:"// ",icon:pm,color:"bg-green-600"},{id:"regional_center",title:"",description:" ",icon:pm,color:"bg-purple-600"},{id:"central_admin",title:"",description:" ",icon:Do,color:"bg-red-600"}],A=k=>{if(k==="citizen"){window.location.hash="#citizen";return}s(k),r("login")},S=()=>{if(!i||!l){Me.error("  ");return}const k=g2.find(M=>M.email===i&&M.password===l);k?(console.log("[AUDIT] Login Success:",{email:i,role:k.role,timestamp:new Date().toISOString(),ipAddress:"CLIENT_IP"}),N&&localStorage.setItem("rememberedEmail",i),Me.success(` : ${k.name}`),e({email:k.email,role:k.role,name:k.name,organization:k.organization})):(console.log("[AUDIT] Login Failed:",{email:i,timestamp:new Date().toISOString(),reason:"Invalid credentials"}),Me.error("    "))},_=()=>{if(j===1){if(!i||!l){Me.error("  ");return}E(2)}else{if(!u||a!=="citizen"&&!m){Me.error("   ");return}console.log("[AUDIT] Registration:",{email:i,role:a,name:u,organization:m,timestamp:new Date().toISOString()}),Me.success(" "),r("login"),E(1)}},O=()=>{t==="register"&&j===2?E(1):(r("select"),s(null),E(1),o(""),d(""),p(""),h(""))},D=k=>{o(k.email),d(k.password),Me.info(`   : ${k.name}`)};return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-100 via-gray-200 to-gray-300 flex items-center justify-center p-4",children:n.jsxs("div",{className:"w-full max-w-6xl",children:[n.jsx("div",{className:"text-center mb-8",children:n.jsx(YQ,{size:88})}),t==="select"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs(Cr,{className:"border-2",children:[n.jsxs(Nn,{children:[n.jsx(Sn,{className:"text-center",children:"/ "}),n.jsx(fl,{className:"text-center",children:"       "})]}),n.jsx(_r,{children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:C.map(k=>{const M=k.icon;return n.jsxs("button",{onClick:()=>A(k.id),className:"p-6 border-2 border-gray-300 hover:border-primary rounded transition-all hover:shadow-lg group",children:[n.jsx("div",{className:`${k.color} w-16 h-16 rounded flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform`,children:n.jsx(M,{className:"h-8 w-8 text-white"})}),n.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:k.title}),n.jsx("p",{className:"text-sm text-gray-600",children:k.description})]},k.id)})})})]}),n.jsxs(Cr,{className:"border-blue-300 bg-blue-50",children:[n.jsx(Nn,{children:n.jsxs(Sn,{className:"text-blue-900 flex items-center gap-2",children:[n.jsx(Gn,{className:"h-5 w-5"}),"  "]})}),n.jsxs(_r,{children:[n.jsx("p",{className:"text-sm text-blue-800 mb-4",children:"      :"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:g2.map(k=>n.jsxs("div",{className:"bg-white p-3 rounded border border-blue-200",children:[n.jsx("p",{className:"font-semibold text-gray-900 mb-1",children:k.name}),n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:k.email}),n.jsxs("p",{className:"text-xs text-gray-500",children:[": ",k.password]})]},k.email))})]})]})]}),t==="login"&&a&&n.jsxs(Cr,{className:"max-w-md mx-auto border-2",children:[n.jsxs(Nn,{children:[n.jsxs(Nt,{variant:"ghost",size:"sm",onClick:O,className:"mb-2 -ml-2",children:[n.jsx(cl,{className:"h-4 w-4 mr-2"}),""]}),n.jsxs(Sn,{children:[C.find(k=>k.id===a)?.title," "]}),n.jsx(fl,{children:"   "})]}),n.jsxs(_r,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(It,{htmlFor:"email",children:""}),n.jsx(Ir,{id:"email",type:"email",value:i,onChange:k=>o(k.target.value),placeholder:"example@domain.com",className:"mt-2"})]}),n.jsxs("div",{children:[n.jsx(It,{htmlFor:"password",children:""}),n.jsxs("div",{className:"relative mt-2",children:[n.jsx(Ir,{id:"password",type:x?"text":"password",value:l,onChange:k=>d(k.target.value),placeholder:""}),n.jsx("button",{type:"button",onClick:()=>y(!x),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500",children:x?n.jsx(AC,{className:"h-4 w-4"}):n.jsx(Rm,{className:"h-4 w-4"})})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Tb,{id:"remember",checked:N,onCheckedChange:k=>v(k)}),n.jsx("label",{htmlFor:"remember",className:"text-sm text-gray-700 cursor-pointer",children:" "})]}),n.jsx(Nt,{className:"w-full",onClick:S,children:""}),n.jsx("div",{className:"text-center",children:n.jsx("button",{onClick:()=>r("register"),className:"text-sm text-primary hover:underline",children:" ? "})}),n.jsxs(gm,{children:[n.jsx(Gn,{className:"h-4 w-4"}),n.jsxs(xm,{children:[n.jsx("p",{className:"text-sm font-medium mb-2",children:" :"}),n.jsx("div",{className:"space-y-1",children:g2.filter(k=>k.role===a).map(k=>n.jsxs("button",{onClick:()=>D(k),className:"text-xs text-blue-600 hover:underline block",children:[k.name," (",k.email,")"]},k.email))})]})]})]})]}),t==="register"&&a&&n.jsxs(Cr,{className:"max-w-md mx-auto border-2",children:[n.jsxs(Nn,{children:[n.jsxs(Nt,{variant:"ghost",size:"sm",onClick:O,className:"mb-2 -ml-2",children:[n.jsx(cl,{className:"h-4 w-4 mr-2"}),""]}),n.jsxs(Sn,{children:[C.find(k=>k.id===a)?.title," "]}),n.jsx(fl,{children:j===1?"  ":"  "})]}),n.jsxs(_r,{className:"space-y-4",children:[j===1?n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx(It,{htmlFor:"reg-email",children:" *"}),n.jsx(Ir,{id:"reg-email",type:"email",value:i,onChange:k=>o(k.target.value),placeholder:"example@domain.com",className:"mt-2"})]}),n.jsxs("div",{children:[n.jsx(It,{htmlFor:"reg-password",children:" *"}),n.jsxs("div",{className:"relative mt-2",children:[n.jsx(Ir,{id:"reg-password",type:x?"text":"password",value:l,onChange:k=>d(k.target.value),placeholder:"8 "}),n.jsx("button",{type:"button",onClick:()=>y(!x),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500",children:x?n.jsx(AC,{className:"h-4 w-4"}):n.jsx(Rm,{className:"h-4 w-4"})})]})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx(It,{htmlFor:"name",children:" *"}),n.jsx(Ir,{id:"name",value:u,onChange:k=>p(k.target.value),placeholder:"",className:"mt-2"})]}),a!=="citizen"&&n.jsxs("div",{children:[n.jsx(It,{htmlFor:"organization",children:"  *"}),n.jsx(Ir,{id:"organization",value:m,onChange:k=>h(k.target.value),placeholder:":   ",className:"mt-2"})]})]}),n.jsx(Nt,{className:"w-full",onClick:_,children:j===1?"":" "}),n.jsx("div",{className:"text-center",children:n.jsx("button",{onClick:()=>{r("login"),E(1)},className:"text-sm text-primary hover:underline",children:"  ? "})})]})]}),n.jsxs("div",{className:"text-center mt-8 text-sm text-gray-600",children:[n.jsx("p",{children:" 2026 Neuro-Shield. All rights reserved."}),n.jsx("p",{className:"mt-1",children:""})]})]})})}function Oo({className:e,...t}){return n.jsx("textarea",{"data-slot":"textarea",className:de("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}var zJ=pO[" useId ".trim().toString()]||(()=>{}),qJ=0;function wl(e){const[t,r]=g.useState(zJ());return na(()=>{r(a=>a??String(qJ++))},[e]),e||(t?`radix-${t}`:"")}function ps(e){const t=g.useRef(e);return g.useEffect(()=>{t.current=e}),g.useMemo(()=>(...r)=>t.current?.(...r),[])}function WJ(e,t=globalThis?.document){const r=ps(e);g.useEffect(()=>{const a=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",a,{capture:!0}),()=>t.removeEventListener("keydown",a,{capture:!0})},[r,t])}var VJ="DismissableLayer",kC="dismissableLayer.update",YJ="dismissableLayer.pointerDownOutside",XJ="dismissableLayer.focusOutside",qR,aB=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),gg=g.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:a,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...d}=e,u=g.useContext(aB),[p,m]=g.useState(null),h=p?.ownerDocument??globalThis?.document,[,x]=g.useState({}),y=wr(t,O=>m(O)),N=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),j=N.indexOf(v),E=p?N.indexOf(p):-1,C=u.layersWithOutsidePointerEventsDisabled.size>0,A=E>=j,S=JJ(O=>{const D=O.target,k=[...u.branches].some(M=>M.contains(D));!A||k||(s?.(O),o?.(O),O.defaultPrevented||l?.())},h),_=eee(O=>{const D=O.target;[...u.branches].some(M=>M.contains(D))||(i?.(O),o?.(O),O.defaultPrevented||l?.())},h);return WJ(O=>{E===u.layers.size-1&&(a?.(O),!O.defaultPrevented&&l&&(O.preventDefault(),l()))},h),g.useEffect(()=>{if(p)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(qR=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(p)),u.layers.add(p),WR(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=qR)}},[p,h,r,u]),g.useEffect(()=>()=>{p&&(u.layers.delete(p),u.layersWithOutsidePointerEventsDisabled.delete(p),WR())},[p,u]),g.useEffect(()=>{const O=()=>x({});return document.addEventListener(kC,O),()=>document.removeEventListener(kC,O)},[]),n.jsx(sr.div,{...d,ref:y,style:{pointerEvents:C?A?"auto":"none":void 0,...e.style},onFocusCapture:Bt(e.onFocusCapture,_.onFocusCapture),onBlurCapture:Bt(e.onBlurCapture,_.onBlurCapture),onPointerDownCapture:Bt(e.onPointerDownCapture,S.onPointerDownCapture)})});gg.displayName=VJ;var QJ="DismissableLayerBranch",ZJ=g.forwardRef((e,t)=>{const r=g.useContext(aB),a=g.useRef(null),s=wr(t,a);return g.useEffect(()=>{const i=a.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),n.jsx(sr.div,{...e,ref:s})});ZJ.displayName=QJ;function JJ(e,t=globalThis?.document){const r=ps(e),a=g.useRef(!1),s=g.useRef(()=>{});return g.useEffect(()=>{const i=l=>{if(l.target&&!a.current){let d=function(){sB(YJ,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=d,t.addEventListener("click",s.current,{once:!0})):d()}else t.removeEventListener("click",s.current);a.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>a.current=!0}}function eee(e,t=globalThis?.document){const r=ps(e),a=g.useRef(!1);return g.useEffect(()=>{const s=i=>{i.target&&!a.current&&sB(XJ,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}function WR(){const e=new CustomEvent(kC);document.dispatchEvent(e)}function sB(e,t,r,{discrete:a}){const s=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),a?uJ(s,i):s.dispatchEvent(i)}var x2="focusScope.autoFocusOnMount",b2="focusScope.autoFocusOnUnmount",VR={bubbles:!1,cancelable:!0},tee="FocusScope",Gv=g.forwardRef((e,t)=>{const{loop:r=!1,trapped:a=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=e,[l,d]=g.useState(null),u=ps(s),p=ps(i),m=g.useRef(null),h=wr(t,N=>d(N)),x=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(a){let N=function(C){if(x.paused||!l)return;const A=C.target;l.contains(A)?m.current=A:vd(m.current,{select:!0})},v=function(C){if(x.paused||!l)return;const A=C.relatedTarget;A!==null&&(l.contains(A)||vd(m.current,{select:!0}))},j=function(C){if(document.activeElement===document.body)for(const S of C)S.removedNodes.length>0&&vd(l)};document.addEventListener("focusin",N),document.addEventListener("focusout",v);const E=new MutationObserver(j);return l&&E.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",N),document.removeEventListener("focusout",v),E.disconnect()}}},[a,l,x.paused]),g.useEffect(()=>{if(l){XR.add(x);const N=document.activeElement;if(!l.contains(N)){const j=new CustomEvent(x2,VR);l.addEventListener(x2,u),l.dispatchEvent(j),j.defaultPrevented||(ree(oee(iB(l)),{select:!0}),document.activeElement===N&&vd(l))}return()=>{l.removeEventListener(x2,u),setTimeout(()=>{const j=new CustomEvent(b2,VR);l.addEventListener(b2,p),l.dispatchEvent(j),j.defaultPrevented||vd(N??document.body,{select:!0}),l.removeEventListener(b2,p),XR.remove(x)},0)}}},[l,u,p,x]);const y=g.useCallback(N=>{if(!r&&!a||x.paused)return;const v=N.key==="Tab"&&!N.altKey&&!N.ctrlKey&&!N.metaKey,j=document.activeElement;if(v&&j){const E=N.currentTarget,[C,A]=nee(E);C&&A?!N.shiftKey&&j===A?(N.preventDefault(),r&&vd(C,{select:!0})):N.shiftKey&&j===C&&(N.preventDefault(),r&&vd(A,{select:!0})):j===E&&N.preventDefault()}},[r,a,x.paused]);return n.jsx(sr.div,{tabIndex:-1,...o,ref:h,onKeyDown:y})});Gv.displayName=tee;function ree(e,{select:t=!1}={}){const r=document.activeElement;for(const a of e)if(vd(a,{select:t}),document.activeElement!==r)return}function nee(e){const t=iB(e),r=YR(t,e),a=YR(t.reverse(),e);return[r,a]}function iB(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const s=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||s?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function YR(e,t){for(const r of e)if(!aee(r,{upTo:t}))return r}function aee(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function see(e){return e instanceof HTMLInputElement&&"select"in e}function vd(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&see(e)&&t&&e.select()}}var XR=iee();function iee(){let e=[];return{add(t){const r=e[0];t!==r&&r?.pause(),e=QR(e,t),e.unshift(t)},remove(t){e=QR(e,t),e[0]?.resume()}}}function QR(e,t){const r=[...e],a=r.indexOf(t);return a!==-1&&r.splice(a,1),r}function oee(e){return e.filter(t=>t.tagName!=="A")}var lee="Portal",xg=g.forwardRef((e,t)=>{const{container:r,...a}=e,[s,i]=g.useState(!1);na(()=>i(!0),[]);const o=r||s&&globalThis?.document?.body;return o?V8.createPortal(n.jsx(sr.div,{...a,ref:t}),o):null});xg.displayName=lee;var y2=0;function OO(){g.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??ZR()),document.body.insertAdjacentElement("beforeend",e[1]??ZR()),y2++,()=>{y2===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),y2--}},[])}function ZR(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var ml=function(){return ml=Object.assign||function(t){for(var r,a=1,s=arguments.length;a<s;a++){r=arguments[a];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},ml.apply(this,arguments)};function oB(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(r[a[s]]=e[a[s]]);return r}function cee(e,t,r){if(r||arguments.length===2)for(var a=0,s=t.length,i;a<s;a++)(i||!(a in t))&&(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))}var Ob="right-scroll-bar-position",kb="width-before-scroll-bar",dee="with-scroll-bars-hidden",uee="--removed-body-scroll-bar-size";function v2(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function fee(e,t){var r=g.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(a){var s=r.value;s!==a&&(r.value=a,r.callback(a,s))}}}})[0];return r.callback=t,r.facade}var mee=typeof window<"u"?g.useLayoutEffect:g.useEffect,JR=new WeakMap;function pee(e,t){var r=fee(null,function(a){return e.forEach(function(s){return v2(s,a)})});return mee(function(){var a=JR.get(r);if(a){var s=new Set(a),i=new Set(e),o=r.current;s.forEach(function(l){i.has(l)||v2(l,null)}),i.forEach(function(l){s.has(l)||v2(l,o)})}JR.set(r,e)},[e]),r}function hee(e){return e}function gee(e,t){t===void 0&&(t=hee);var r=[],a=!1,s={read:function(){if(a)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var o=t(i,a);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(a=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){a=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(i),o=r}var d=function(){var p=o;o=[],p.forEach(i)},u=function(){return Promise.resolve().then(d)};u(),r={push:function(p){o.push(p),u()},filter:function(p){return o=o.filter(p),r}}}};return s}function xee(e){e===void 0&&(e={});var t=gee(null);return t.options=ml({async:!0,ssr:!1},e),t}var lB=function(e){var t=e.sideCar,r=oB(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var a=t.read();if(!a)throw new Error("Sidecar medium not found");return g.createElement(a,ml({},r))};lB.isSideCarExport=!0;function bee(e,t){return e.useMedium(t),lB}var cB=xee(),N2=function(){},Kv=g.forwardRef(function(e,t){var r=g.useRef(null),a=g.useState({onScrollCapture:N2,onWheelCapture:N2,onTouchMoveCapture:N2}),s=a[0],i=a[1],o=e.forwardProps,l=e.children,d=e.className,u=e.removeScrollBar,p=e.enabled,m=e.shards,h=e.sideCar,x=e.noRelative,y=e.noIsolation,N=e.inert,v=e.allowPinchZoom,j=e.as,E=j===void 0?"div":j,C=e.gapMode,A=oB(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=h,_=pee([r,t]),O=ml(ml({},A),s);return g.createElement(g.Fragment,null,p&&g.createElement(S,{sideCar:cB,removeScrollBar:u,shards:m,noRelative:x,noIsolation:y,inert:N,setCallbacks:i,allowPinchZoom:!!v,lockRef:r,gapMode:C}),o?g.cloneElement(g.Children.only(l),ml(ml({},O),{ref:_})):g.createElement(E,ml({},O,{className:d,ref:_}),l))});Kv.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Kv.classNames={fullWidth:kb,zeroRight:Ob};var yee=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function vee(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=yee();return t&&e.setAttribute("nonce",t),e}function Nee(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function See(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var jee=function(){var e=0,t=null;return{add:function(r){e==0&&(t=vee())&&(Nee(t,r),See(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},wee=function(){var e=jee();return function(t,r){g.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},dB=function(){var e=wee(),t=function(r){var a=r.styles,s=r.dynamic;return e(a,s),null};return t},Eee={left:0,top:0,right:0,gap:0},S2=function(e){return parseInt(e||"",10)||0},Aee=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],a=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[S2(r),S2(a),S2(s)]},Cee=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Eee;var t=Aee(e),r=document.documentElement.clientWidth,a=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,a-r+t[2]-t[0])}},_ee=dB(),bm="data-scroll-locked",Tee=function(e,t,r,a){var s=e.left,i=e.top,o=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(dee,` {
   overflow: hidden `).concat(a,`;
   padding-right: `).concat(l,"px ").concat(a,`;
  }
  body[`).concat(bm,`] {
    overflow: hidden `).concat(a,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(a,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(a,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(a,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ob,` {
    right: `).concat(l,"px ").concat(a,`;
  }
  
  .`).concat(kb,` {
    margin-right: `).concat(l,"px ").concat(a,`;
  }
  
  .`).concat(Ob," .").concat(Ob,` {
    right: 0 `).concat(a,`;
  }
  
  .`).concat(kb," .").concat(kb,` {
    margin-right: 0 `).concat(a,`;
  }
  
  body[`).concat(bm,`] {
    `).concat(uee,": ").concat(l,`px;
  }
`)},eP=function(){var e=parseInt(document.body.getAttribute(bm)||"0",10);return isFinite(e)?e:0},Oee=function(){g.useEffect(function(){return document.body.setAttribute(bm,(eP()+1).toString()),function(){var e=eP()-1;e<=0?document.body.removeAttribute(bm):document.body.setAttribute(bm,e.toString())}},[])},kee=function(e){var t=e.noRelative,r=e.noImportant,a=e.gapMode,s=a===void 0?"margin":a;Oee();var i=g.useMemo(function(){return Cee(s)},[s]);return g.createElement(_ee,{styles:Tee(i,!t,s,r?"":"!important")})},RC=!1;if(typeof window<"u")try{var $x=Object.defineProperty({},"passive",{get:function(){return RC=!0,!0}});window.addEventListener("test",$x,$x),window.removeEventListener("test",$x,$x)}catch{RC=!1}var $f=RC?{passive:!1}:!1,Ree=function(e){return e.tagName==="TEXTAREA"},uB=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!Ree(e)&&r[t]==="visible")},Pee=function(e){return uB(e,"overflowY")},Dee=function(e){return uB(e,"overflowX")},tP=function(e,t){var r=t.ownerDocument,a=t;do{typeof ShadowRoot<"u"&&a instanceof ShadowRoot&&(a=a.host);var s=fB(e,a);if(s){var i=mB(e,a),o=i[1],l=i[2];if(o>l)return!0}a=a.parentNode}while(a&&a!==r.body);return!1},Iee=function(e){var t=e.scrollTop,r=e.scrollHeight,a=e.clientHeight;return[t,r,a]},Mee=function(e){var t=e.scrollLeft,r=e.scrollWidth,a=e.clientWidth;return[t,r,a]},fB=function(e,t){return e==="v"?Pee(t):Dee(t)},mB=function(e,t){return e==="v"?Iee(t):Mee(t)},Lee=function(e,t){return e==="h"&&t==="rtl"?-1:1},$ee=function(e,t,r,a,s){var i=Lee(e,window.getComputedStyle(t).direction),o=i*a,l=r.target,d=t.contains(l),u=!1,p=o>0,m=0,h=0;do{if(!l)break;var x=mB(e,l),y=x[0],N=x[1],v=x[2],j=N-v-i*y;(y||j)&&fB(e,l)&&(m+=j,h+=y);var E=l.parentNode;l=E&&E.nodeType===Node.DOCUMENT_FRAGMENT_NODE?E.host:E}while(!d&&l!==document.body||d&&(t.contains(l)||t===l));return(p&&Math.abs(m)<1||!p&&Math.abs(h)<1)&&(u=!0),u},Fx=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},rP=function(e){return[e.deltaX,e.deltaY]},nP=function(e){return e&&"current"in e?e.current:e},Fee=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Bee=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Uee=0,Ff=[];function Hee(e){var t=g.useRef([]),r=g.useRef([0,0]),a=g.useRef(),s=g.useState(Uee++)[0],i=g.useState(dB)[0],o=g.useRef(e);g.useEffect(function(){o.current=e},[e]),g.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var N=cee([e.lockRef.current],(e.shards||[]).map(nP),!0).filter(Boolean);return N.forEach(function(v){return v.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),N.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=g.useCallback(function(N,v){if("touches"in N&&N.touches.length===2||N.type==="wheel"&&N.ctrlKey)return!o.current.allowPinchZoom;var j=Fx(N),E=r.current,C="deltaX"in N?N.deltaX:E[0]-j[0],A="deltaY"in N?N.deltaY:E[1]-j[1],S,_=N.target,O=Math.abs(C)>Math.abs(A)?"h":"v";if("touches"in N&&O==="h"&&_.type==="range")return!1;var D=window.getSelection(),k=D&&D.anchorNode,M=k?k===_||k.contains(_):!1;if(M)return!1;var F=tP(O,_);if(!F)return!0;if(F?S=O:(S=O==="v"?"h":"v",F=tP(O,_)),!F)return!1;if(!a.current&&"changedTouches"in N&&(C||A)&&(a.current=S),!S)return!0;var $=a.current||S;return $ee($,v,N,$==="h"?C:A)},[]),d=g.useCallback(function(N){var v=N;if(!(!Ff.length||Ff[Ff.length-1]!==i)){var j="deltaY"in v?rP(v):Fx(v),E=t.current.filter(function(S){return S.name===v.type&&(S.target===v.target||v.target===S.shadowParent)&&Fee(S.delta,j)})[0];if(E&&E.should){v.cancelable&&v.preventDefault();return}if(!E){var C=(o.current.shards||[]).map(nP).filter(Boolean).filter(function(S){return S.contains(v.target)}),A=C.length>0?l(v,C[0]):!o.current.noIsolation;A&&v.cancelable&&v.preventDefault()}}},[]),u=g.useCallback(function(N,v,j,E){var C={name:N,delta:v,target:j,should:E,shadowParent:Gee(j)};t.current.push(C),setTimeout(function(){t.current=t.current.filter(function(A){return A!==C})},1)},[]),p=g.useCallback(function(N){r.current=Fx(N),a.current=void 0},[]),m=g.useCallback(function(N){u(N.type,rP(N),N.target,l(N,e.lockRef.current))},[]),h=g.useCallback(function(N){u(N.type,Fx(N),N.target,l(N,e.lockRef.current))},[]);g.useEffect(function(){return Ff.push(i),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:h}),document.addEventListener("wheel",d,$f),document.addEventListener("touchmove",d,$f),document.addEventListener("touchstart",p,$f),function(){Ff=Ff.filter(function(N){return N!==i}),document.removeEventListener("wheel",d,$f),document.removeEventListener("touchmove",d,$f),document.removeEventListener("touchstart",p,$f)}},[]);var x=e.removeScrollBar,y=e.inert;return g.createElement(g.Fragment,null,y?g.createElement(i,{styles:Bee(s)}):null,x?g.createElement(kee,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function Gee(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Kee=bee(cB,Hee);var zv=g.forwardRef(function(e,t){return g.createElement(Kv,ml({},e,{ref:t,sideCar:Kee}))});zv.classNames=Kv.classNames;var zee=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Bf=new WeakMap,Bx=new WeakMap,Ux={},j2=0,pB=function(e){return e&&(e.host||pB(e.parentNode))},qee=function(e,t){return t.map(function(r){if(e.contains(r))return r;var a=pB(r);return a&&e.contains(a)?a:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},Wee=function(e,t,r,a){var s=qee(t,Array.isArray(e)?e:[e]);Ux[r]||(Ux[r]=new WeakMap);var i=Ux[r],o=[],l=new Set,d=new Set(s),u=function(m){!m||l.has(m)||(l.add(m),u(m.parentNode))};s.forEach(u);var p=function(m){!m||d.has(m)||Array.prototype.forEach.call(m.children,function(h){if(l.has(h))p(h);else try{var x=h.getAttribute(a),y=x!==null&&x!=="false",N=(Bf.get(h)||0)+1,v=(i.get(h)||0)+1;Bf.set(h,N),i.set(h,v),o.push(h),N===1&&y&&Bx.set(h,!0),v===1&&h.setAttribute(r,"true"),y||h.setAttribute(a,"true")}catch(j){console.error("aria-hidden: cannot operate on ",h,j)}})};return p(t),l.clear(),j2++,function(){o.forEach(function(m){var h=Bf.get(m)-1,x=i.get(m)-1;Bf.set(m,h),i.set(m,x),h||(Bx.has(m)||m.removeAttribute(a),Bx.delete(m)),x||m.removeAttribute(r)}),j2--,j2||(Bf=new WeakMap,Bf=new WeakMap,Bx=new WeakMap,Ux={})}},kO=function(e,t,r){r===void 0&&(r="data-aria-hidden");var a=Array.from(Array.isArray(e)?e:[e]),s=zee(e);return s?(a.push.apply(a,Array.from(s.querySelectorAll("[aria-live], script"))),Wee(a,s,r,"aria-hidden")):function(){return null}};function Vee(e){const t=Yee(e),r=g.forwardRef((a,s)=>{const{children:i,...o}=a,l=g.Children.toArray(i),d=l.find(Qee);if(d){const u=d.props.children,p=l.map(m=>m===d?g.Children.count(u)>1?g.Children.only(null):g.isValidElement(u)?u.props.children:null:m);return n.jsx(t,{...o,ref:s,children:g.isValidElement(u)?g.cloneElement(u,void 0,p):null})}return n.jsx(t,{...o,ref:s,children:i})});return r.displayName=`${e}.Slot`,r}function Yee(e){const t=g.forwardRef((r,a)=>{const{children:s,...i}=r;if(g.isValidElement(s)){const o=Jee(s),l=Zee(i,s.props);return s.type!==g.Fragment&&(l.ref=a?df(a,o):o),g.cloneElement(s,l)}return g.Children.count(s)>1?g.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Xee=Symbol("radix.slottable");function Qee(e){return g.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Xee}function Zee(e,t){const r={...t};for(const a in t){const s=e[a],i=t[a];/^on[A-Z]/.test(a)?s&&i?r[a]=(...l)=>{const d=i(...l);return s(...l),d}:s&&(r[a]=s):a==="style"?r[a]={...s,...i}:a==="className"&&(r[a]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function Jee(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var qv="Dialog",[hB]=ao(qv),[ete,Fo]=hB(qv),gB=e=>{const{__scopeDialog:t,children:r,open:a,defaultOpen:s,onOpenChange:i,modal:o=!0}=e,l=g.useRef(null),d=g.useRef(null),[u,p]=Cc({prop:a,defaultProp:s??!1,onChange:i,caller:qv});return n.jsx(ete,{scope:t,triggerRef:l,contentRef:d,contentId:wl(),titleId:wl(),descriptionId:wl(),open:u,onOpenChange:p,onOpenToggle:g.useCallback(()=>p(m=>!m),[p]),modal:o,children:r})};gB.displayName=qv;var xB="DialogTrigger",tte=g.forwardRef((e,t)=>{const{__scopeDialog:r,...a}=e,s=Fo(xB,r),i=wr(t,s.triggerRef);return n.jsx(sr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":DO(s.open),...a,ref:i,onClick:Bt(e.onClick,s.onOpenToggle)})});tte.displayName=xB;var RO="DialogPortal",[rte,bB]=hB(RO,{forceMount:void 0}),yB=e=>{const{__scopeDialog:t,forceMount:r,children:a,container:s}=e,i=Fo(RO,t);return n.jsx(rte,{scope:t,forceMount:r,children:g.Children.map(a,o=>n.jsx(Is,{present:r||i.open,children:n.jsx(xg,{asChild:!0,container:s,children:o})}))})};yB.displayName=RO;var ty="DialogOverlay",vB=g.forwardRef((e,t)=>{const r=bB(ty,e.__scopeDialog),{forceMount:a=r.forceMount,...s}=e,i=Fo(ty,e.__scopeDialog);return i.modal?n.jsx(Is,{present:a||i.open,children:n.jsx(ate,{...s,ref:t})}):null});vB.displayName=ty;var nte=Vee("DialogOverlay.RemoveScroll"),ate=g.forwardRef((e,t)=>{const{__scopeDialog:r,...a}=e,s=Fo(ty,r);return n.jsx(zv,{as:nte,allowPinchZoom:!0,shards:[s.contentRef],children:n.jsx(sr.div,{"data-state":DO(s.open),...a,ref:t,style:{pointerEvents:"auto",...a.style}})})}),Qu="DialogContent",NB=g.forwardRef((e,t)=>{const r=bB(Qu,e.__scopeDialog),{forceMount:a=r.forceMount,...s}=e,i=Fo(Qu,e.__scopeDialog);return n.jsx(Is,{present:a||i.open,children:i.modal?n.jsx(ste,{...s,ref:t}):n.jsx(ite,{...s,ref:t})})});NB.displayName=Qu;var ste=g.forwardRef((e,t)=>{const r=Fo(Qu,e.__scopeDialog),a=g.useRef(null),s=wr(t,r.contentRef,a);return g.useEffect(()=>{const i=a.current;if(i)return kO(i)},[]),n.jsx(SB,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Bt(e.onCloseAutoFocus,i=>{i.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:Bt(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:Bt(e.onFocusOutside,i=>i.preventDefault())})}),ite=g.forwardRef((e,t)=>{const r=Fo(Qu,e.__scopeDialog),a=g.useRef(!1),s=g.useRef(!1);return n.jsx(SB,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{e.onCloseAutoFocus?.(i),i.defaultPrevented||(a.current||r.triggerRef.current?.focus(),i.preventDefault()),a.current=!1,s.current=!1},onInteractOutside:i=>{e.onInteractOutside?.(i),i.defaultPrevented||(a.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;r.triggerRef.current?.contains(o)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),SB=g.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:a,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=e,l=Fo(Qu,r),d=g.useRef(null),u=wr(t,d);return OO(),n.jsxs(n.Fragment,{children:[n.jsx(Gv,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:s,onUnmountAutoFocus:i,children:n.jsx(gg,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":DO(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),n.jsxs(n.Fragment,{children:[n.jsx(ote,{titleId:l.titleId}),n.jsx(cte,{contentRef:d,descriptionId:l.descriptionId})]})]})}),PO="DialogTitle",jB=g.forwardRef((e,t)=>{const{__scopeDialog:r,...a}=e,s=Fo(PO,r);return n.jsx(sr.h2,{id:s.titleId,...a,ref:t})});jB.displayName=PO;var wB="DialogDescription",EB=g.forwardRef((e,t)=>{const{__scopeDialog:r,...a}=e,s=Fo(wB,r);return n.jsx(sr.p,{id:s.descriptionId,...a,ref:t})});EB.displayName=wB;var AB="DialogClose",CB=g.forwardRef((e,t)=>{const{__scopeDialog:r,...a}=e,s=Fo(AB,r);return n.jsx(sr.button,{type:"button",...a,ref:t,onClick:Bt(e.onClick,()=>s.onOpenChange(!1))})});CB.displayName=AB;function DO(e){return e?"open":"closed"}var _B="DialogTitleWarning",[MRe,TB]=XZ(_B,{contentName:Qu,titleName:PO,docsSlug:"dialog"}),ote=({titleId:e})=>{const t=TB(_B),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return g.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},lte="DialogDescriptionWarning",cte=({contentRef:e,descriptionId:t})=>{const a=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${TB(lte).contentName}}.`;return g.useEffect(()=>{const s=e.current?.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(a))},[a,e,t]),null},OB=gB,kB=yB,RB=vB,PB=NB,DB=jB,IB=EB,MB=CB;function Gu({...e}){return n.jsx(OB,{"data-slot":"dialog",...e})}function dte({...e}){return n.jsx(kB,{"data-slot":"dialog-portal",...e})}function ute({className:e,...t}){return n.jsx(RB,{"data-slot":"dialog-overlay",className:de("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function Ku({className:e,children:t,...r}){return n.jsxs(dte,{"data-slot":"dialog-portal",children:[n.jsx(ute,{}),n.jsxs(PB,{"data-slot":"dialog-content",className:de("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...r,children:[t,n.jsxs(MB,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[n.jsx(qd,{}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function ry({className:e,...t}){return n.jsx("div",{"data-slot":"dialog-header",className:de("flex flex-col gap-2 text-center sm:text-left",e),...t})}function PC({className:e,...t}){return n.jsx("div",{"data-slot":"dialog-footer",className:de("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function ny({className:e,...t}){return n.jsx(DB,{"data-slot":"dialog-title",className:de("text-lg leading-none font-semibold",e),...t})}function DC({className:e,...t}){return n.jsx(IB,{"data-slot":"dialog-description",className:de("text-muted-foreground text-sm",e),...t})}var fte=g.createContext(void 0);function bg(e){const t=g.useContext(fte);return e||t||"ltr"}function IC(e,[t,r]){return Math.min(r,Math.max(t,e))}function mte(e,t){return g.useReducer((r,a)=>t[r][a]??r,e)}var IO="ScrollArea",[LB]=ao(IO),[pte,so]=LB(IO),$B=g.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:a="hover",dir:s,scrollHideDelay:i=600,...o}=e,[l,d]=g.useState(null),[u,p]=g.useState(null),[m,h]=g.useState(null),[x,y]=g.useState(null),[N,v]=g.useState(null),[j,E]=g.useState(0),[C,A]=g.useState(0),[S,_]=g.useState(!1),[O,D]=g.useState(!1),k=wr(t,F=>d(F)),M=bg(s);return n.jsx(pte,{scope:r,type:a,dir:M,scrollHideDelay:i,scrollArea:l,viewport:u,onViewportChange:p,content:m,onContentChange:h,scrollbarX:x,onScrollbarXChange:y,scrollbarXEnabled:S,onScrollbarXEnabledChange:_,scrollbarY:N,onScrollbarYChange:v,scrollbarYEnabled:O,onScrollbarYEnabledChange:D,onCornerWidthChange:E,onCornerHeightChange:A,children:n.jsx(sr.div,{dir:M,...o,ref:k,style:{position:"relative","--radix-scroll-area-corner-width":j+"px","--radix-scroll-area-corner-height":C+"px",...e.style}})})});$B.displayName=IO;var FB="ScrollAreaViewport",BB=g.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:a,nonce:s,...i}=e,o=so(FB,r),l=g.useRef(null),d=wr(t,l,o.onViewportChange);return n.jsxs(n.Fragment,{children:[n.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),n.jsx(sr.div,{"data-radix-scroll-area-viewport":"",...i,ref:d,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:n.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:a})})]})});BB.displayName=FB;var Il="ScrollAreaScrollbar",UB=g.forwardRef((e,t)=>{const{forceMount:r,...a}=e,s=so(Il,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=s,l=e.orientation==="horizontal";return g.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),s.type==="hover"?n.jsx(hte,{...a,ref:t,forceMount:r}):s.type==="scroll"?n.jsx(gte,{...a,ref:t,forceMount:r}):s.type==="auto"?n.jsx(HB,{...a,ref:t,forceMount:r}):s.type==="always"?n.jsx(MO,{...a,ref:t}):null});UB.displayName=Il;var hte=g.forwardRef((e,t)=>{const{forceMount:r,...a}=e,s=so(Il,e.__scopeScrollArea),[i,o]=g.useState(!1);return g.useEffect(()=>{const l=s.scrollArea;let d=0;if(l){const u=()=>{window.clearTimeout(d),o(!0)},p=()=>{d=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",p),()=>{window.clearTimeout(d),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",p)}}},[s.scrollArea,s.scrollHideDelay]),n.jsx(Is,{present:r||i,children:n.jsx(HB,{"data-state":i?"visible":"hidden",...a,ref:t})})}),gte=g.forwardRef((e,t)=>{const{forceMount:r,...a}=e,s=so(Il,e.__scopeScrollArea),i=e.orientation==="horizontal",o=Vv(()=>d("SCROLL_END"),100),[l,d]=mte("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return g.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>d("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,d]),g.useEffect(()=>{const u=s.viewport,p=i?"scrollLeft":"scrollTop";if(u){let m=u[p];const h=()=>{const x=u[p];m!==x&&(d("SCROLL"),o()),m=x};return u.addEventListener("scroll",h),()=>u.removeEventListener("scroll",h)}},[s.viewport,i,d,o]),n.jsx(Is,{present:r||l!=="hidden",children:n.jsx(MO,{"data-state":l==="hidden"?"hidden":"visible",...a,ref:t,onPointerEnter:Bt(e.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:Bt(e.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),HB=g.forwardRef((e,t)=>{const r=so(Il,e.__scopeScrollArea),{forceMount:a,...s}=e,[i,o]=g.useState(!1),l=e.orientation==="horizontal",d=Vv(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,p=r.viewport.offsetHeight<r.viewport.scrollHeight;o(l?u:p)}},10);return Mm(r.viewport,d),Mm(r.content,d),n.jsx(Is,{present:a||i,children:n.jsx(MO,{"data-state":i?"visible":"hidden",...s,ref:t})})}),MO=g.forwardRef((e,t)=>{const{orientation:r="vertical",...a}=e,s=so(Il,e.__scopeScrollArea),i=g.useRef(null),o=g.useRef(0),[l,d]=g.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=WB(l.viewport,l.content),p={...a,sizes:l,onSizesChange:d,hasThumb:u>0&&u<1,onThumbChange:h=>i.current=h,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:h=>o.current=h};function m(h,x){return Ste(h,o.current,l,x)}return r==="horizontal"?n.jsx(xte,{...p,ref:t,onThumbPositionChange:()=>{if(s.viewport&&i.current){const h=s.viewport.scrollLeft,x=aP(h,l,s.dir);i.current.style.transform=`translate3d(${x}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=m(h,s.dir))}}):r==="vertical"?n.jsx(bte,{...p,ref:t,onThumbPositionChange:()=>{if(s.viewport&&i.current){const h=s.viewport.scrollTop,x=aP(h,l);i.current.style.transform=`translate3d(0, ${x}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=m(h))}}):null}),xte=g.forwardRef((e,t)=>{const{sizes:r,onSizesChange:a,...s}=e,i=so(Il,e.__scopeScrollArea),[o,l]=g.useState(),d=g.useRef(null),u=wr(t,d,i.onScrollbarXChange);return g.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),n.jsx(KB,{"data-orientation":"horizontal",...s,ref:u,sizes:r,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Wv(r)+"px",...e.style},onThumbPointerDown:p=>e.onThumbPointerDown(p.x),onDragScroll:p=>e.onDragScroll(p.x),onWheelScroll:(p,m)=>{if(i.viewport){const h=i.viewport.scrollLeft+p.deltaX;e.onWheelScroll(h),YB(h,m)&&p.preventDefault()}},onResize:()=>{d.current&&i.viewport&&o&&a({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:sy(o.paddingLeft),paddingEnd:sy(o.paddingRight)}})}})}),bte=g.forwardRef((e,t)=>{const{sizes:r,onSizesChange:a,...s}=e,i=so(Il,e.__scopeScrollArea),[o,l]=g.useState(),d=g.useRef(null),u=wr(t,d,i.onScrollbarYChange);return g.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),n.jsx(KB,{"data-orientation":"vertical",...s,ref:u,sizes:r,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Wv(r)+"px",...e.style},onThumbPointerDown:p=>e.onThumbPointerDown(p.y),onDragScroll:p=>e.onDragScroll(p.y),onWheelScroll:(p,m)=>{if(i.viewport){const h=i.viewport.scrollTop+p.deltaY;e.onWheelScroll(h),YB(h,m)&&p.preventDefault()}},onResize:()=>{d.current&&i.viewport&&o&&a({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:sy(o.paddingTop),paddingEnd:sy(o.paddingBottom)}})}})}),[yte,GB]=LB(Il),KB=g.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:a,hasThumb:s,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:d,onDragScroll:u,onWheelScroll:p,onResize:m,...h}=e,x=so(Il,r),[y,N]=g.useState(null),v=wr(t,k=>N(k)),j=g.useRef(null),E=g.useRef(""),C=x.viewport,A=a.content-a.viewport,S=ps(p),_=ps(d),O=Vv(m,10);function D(k){if(j.current){const M=k.clientX-j.current.left,F=k.clientY-j.current.top;u({x:M,y:F})}}return g.useEffect(()=>{const k=M=>{const F=M.target;y?.contains(F)&&S(M,A)};return document.addEventListener("wheel",k,{passive:!1}),()=>document.removeEventListener("wheel",k,{passive:!1})},[C,y,A,S]),g.useEffect(_,[a,_]),Mm(y,O),Mm(x.content,O),n.jsx(yte,{scope:r,scrollbar:y,hasThumb:s,onThumbChange:ps(i),onThumbPointerUp:ps(o),onThumbPositionChange:_,onThumbPointerDown:ps(l),children:n.jsx(sr.div,{...h,ref:v,style:{position:"absolute",...h.style},onPointerDown:Bt(e.onPointerDown,k=>{k.button===0&&(k.target.setPointerCapture(k.pointerId),j.current=y.getBoundingClientRect(),E.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",x.viewport&&(x.viewport.style.scrollBehavior="auto"),D(k))}),onPointerMove:Bt(e.onPointerMove,D),onPointerUp:Bt(e.onPointerUp,k=>{const M=k.target;M.hasPointerCapture(k.pointerId)&&M.releasePointerCapture(k.pointerId),document.body.style.webkitUserSelect=E.current,x.viewport&&(x.viewport.style.scrollBehavior=""),j.current=null})})})}),ay="ScrollAreaThumb",zB=g.forwardRef((e,t)=>{const{forceMount:r,...a}=e,s=GB(ay,e.__scopeScrollArea);return n.jsx(Is,{present:r||s.hasThumb,children:n.jsx(vte,{ref:t,...a})})}),vte=g.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:a,...s}=e,i=so(ay,r),o=GB(ay,r),{onThumbPositionChange:l}=o,d=wr(t,m=>o.onThumbChange(m)),u=g.useRef(void 0),p=Vv(()=>{u.current&&(u.current(),u.current=void 0)},100);return g.useEffect(()=>{const m=i.viewport;if(m){const h=()=>{if(p(),!u.current){const x=jte(m,l);u.current=x,l()}};return l(),m.addEventListener("scroll",h),()=>m.removeEventListener("scroll",h)}},[i.viewport,p,l]),n.jsx(sr.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...a},onPointerDownCapture:Bt(e.onPointerDownCapture,m=>{const x=m.target.getBoundingClientRect(),y=m.clientX-x.left,N=m.clientY-x.top;o.onThumbPointerDown({x:y,y:N})}),onPointerUp:Bt(e.onPointerUp,o.onThumbPointerUp)})});zB.displayName=ay;var LO="ScrollAreaCorner",qB=g.forwardRef((e,t)=>{const r=so(LO,e.__scopeScrollArea),a=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&a?n.jsx(Nte,{...e,ref:t}):null});qB.displayName=LO;var Nte=g.forwardRef((e,t)=>{const{__scopeScrollArea:r,...a}=e,s=so(LO,r),[i,o]=g.useState(0),[l,d]=g.useState(0),u=!!(i&&l);return Mm(s.scrollbarX,()=>{const p=s.scrollbarX?.offsetHeight||0;s.onCornerHeightChange(p),d(p)}),Mm(s.scrollbarY,()=>{const p=s.scrollbarY?.offsetWidth||0;s.onCornerWidthChange(p),o(p)}),u?n.jsx(sr.div,{...a,ref:t,style:{width:i,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function sy(e){return e?parseInt(e,10):0}function WB(e,t){const r=e/t;return isNaN(r)?0:r}function Wv(e){const t=WB(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=(e.scrollbar.size-r)*t;return Math.max(a,18)}function Ste(e,t,r,a="ltr"){const s=Wv(r),i=s/2,o=t||i,l=s-o,d=r.scrollbar.paddingStart+o,u=r.scrollbar.size-r.scrollbar.paddingEnd-l,p=r.content-r.viewport,m=a==="ltr"?[0,p]:[p*-1,0];return VB([d,u],m)(e)}function aP(e,t,r="ltr"){const a=Wv(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-s,o=t.content-t.viewport,l=i-a,d=r==="ltr"?[0,o]:[o*-1,0],u=IC(e,d);return VB([0,o],[0,l])(u)}function VB(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const a=(t[1]-t[0])/(e[1]-e[0]);return t[0]+a*(r-e[0])}}function YB(e,t){return e>0&&e<t}var jte=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},a=0;return(function s(){const i={left:e.scrollLeft,top:e.scrollTop},o=r.left!==i.left,l=r.top!==i.top;(o||l)&&t(),r=i,a=window.requestAnimationFrame(s)})(),()=>window.cancelAnimationFrame(a)};function Vv(e,t){const r=ps(e),a=g.useRef(0);return g.useEffect(()=>()=>window.clearTimeout(a.current),[]),g.useCallback(()=>{window.clearTimeout(a.current),a.current=window.setTimeout(r,t)},[r,t])}function Mm(e,t){const r=ps(t);na(()=>{let a=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(a),a=window.requestAnimationFrame(r)});return s.observe(e),()=>{window.cancelAnimationFrame(a),s.unobserve(e)}}},[e,r])}var wte=$B,Ete=BB,Ate=qB;function Cte({className:e,children:t,...r}){return n.jsxs(wte,{"data-slot":"scroll-area",className:de("relative",e),...r,children:[n.jsx(Ete,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),n.jsx(_te,{}),n.jsx(Ate,{})]})}function _te({className:e,orientation:t="vertical",...r}){return n.jsx(UB,{"data-slot":"scroll-area-scrollbar",orientation:t,className:de("flex touch-none p-px transition-colors select-none",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",e),...r,children:n.jsx(zB,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function Tte({open:e,onOpenChange:t}){const[r,a]=g.useState([{id:"1",type:"bot",content:"!  .  ?",timestamp:new Date}]),[s,i]=g.useState(""),o=g.useRef(null),l={" ":"            .       .",:"       .     .",:" ,   1:1 ,   ,         .",:"     ,      .      .",:'   " "     .   ,    .',:"  30  ,    1   .",:"  .    .",:",    .       .",:"     .   .",:"      ,        ."},d=["  ?"," ?","    ?","  ?"];g.useEffect(()=>{o.current&&(o.current.scrollTop=o.current.scrollHeight)},[r]);const u=h=>{const x=h.toLowerCase().replace(/\s+/g,"");for(const[y,N]of Object.entries(l))if(x.includes(y.replace(/\s+/g,"")))return N;return".      .    ,    . (: 02-1234-5678)"},p=()=>{if(!s.trim())return;const h={id:Date.now().toString(),type:"user",content:s,timestamp:new Date};a(x=>[...x,h]),i(""),setTimeout(()=>{const x={id:(Date.now()+1).toString(),type:"bot",content:u(s),timestamp:new Date};a(y=>[...y,x])},500)},m=h=>{i(h),setTimeout(()=>p(),100)};return n.jsx(Gu,{open:e,onOpenChange:t,children:n.jsxs(Ku,{className:"max-w-2xl h-[600px] flex flex-col p-0",children:[n.jsx(ry,{className:"p-6 pb-4 border-b",children:n.jsxs(ny,{className:"flex items-center gap-2",children:[n.jsx("div",{className:"bg-blue-100 p-2 rounded-full",children:n.jsx(j8,{className:"h-5 w-5 text-blue-600"})}),"AI "]})}),n.jsxs(Cte,{className:"flex-1 p-6",ref:o,children:[n.jsx("div",{className:"space-y-4",children:r.map(h=>n.jsx("div",{className:`flex ${h.type==="user"?"justify-end":"justify-start"}`,children:n.jsxs("div",{className:`max-w-[80%] rounded-lg p-3 ${h.type==="user"?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"}`,children:[n.jsx("p",{className:"text-sm whitespace-pre-wrap",children:h.content}),n.jsx("p",{className:`text-xs mt-1 ${h.type==="user"?"text-blue-100":"text-gray-500"}`,children:h.timestamp.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"})})]})},h.id))}),r.length===1&&n.jsxs("div",{className:"mt-6",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"  :"}),n.jsx("div",{className:"grid grid-cols-2 gap-2",children:d.map((h,x)=>n.jsx("button",{onClick:()=>m(h),className:"p-3 text-left text-sm border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors",children:h},x))})]})]}),n.jsxs("div",{className:"p-4 border-t",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Ir,{value:s,onChange:h=>i(h.target.value),onKeyPress:h=>h.key==="Enter"&&p(),placeholder:" ...",className:"flex-1"}),n.jsx(Nt,{onClick:p,disabled:!s.trim(),children:n.jsx(E0,{className:"h-4 w-4"})})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"*      "})]})]})})}function MC(){const[e,t]=g.useState("home"),[r,a]=g.useState(!1),[s,i]=g.useState(!1),[o,l]=g.useState(""),[d,u]=g.useState(""),[p,m]=g.useState(""),[h,x]=g.useState(""),[y,N]=g.useState(""),[v,j]=g.useState(""),[E,C]=g.useState(""),[A,S]=g.useState(""),[_,O]=g.useState(!1),[D,k]=g.useState(!1),[M,F]=g.useState(!1),$=[{id:"health",name:" ",address:"   426"},{id:"dementia",name:" ",address:"   524"},{id:"hospital",name:" ",address:"   81"}],B=["09:00","09:30","10:00","10:30","11:00","11:30","14:00","14:30","15:00","15:30","16:00","16:30"],P=[{question:"  ?",answer:"            .       ."},{question:" ?",answer:".        .     ."},{question:"    ?",answer:" ,   1:1 ,   ,         ."},{question:"  ?",answer:"     ,      .      ."}],W=()=>{t("consent")},K=()=>{if(!r){Me.error("   ");return}t("center-select")},G=ye=>{l(ye),t("datetime")},U=()=>{if(!d||!p){Me.error("  ");return}t("confirm")},te=/^01[016789]-?\d{3,4}-?\d{4}$/,re=()=>{if(!h||!y||!v){Me.error("   ");return}if(!te.test(y.replace(/-/g,""))){Me.error("   ");return}if(A&&!te.test(A.replace(/-/g,""))){Me.error("    ");return}console.log("New Appointment:",{center:o,date:d,time:p,name:h,phone:y,birthdate:v,guardianPhone:A||void 0,consentOptional:s,notes:E,timestamp:new Date().toISOString()}),t("complete")},q=()=>{console.log("Remind Later Request:",{timestamp:new Date().toISOString(),remindDate:new Date(Date.now()+336*60*60*1e3).toISOString()}),Me.success("2   ")},L=()=>{console.log("Stop Contact Request:",{timestamp:new Date().toISOString()}),Me.success("   "),k(!1)},H=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsx(Cr,{className:"border-2 border-primary bg-gradient-to-br from-blue-50 to-white",children:n.jsx(_r,{className:"p-6",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"bg-primary p-3 rounded",children:n.jsx(pm,{className:"h-8 w-8 text-white"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"    "}),n.jsx("p",{className:"text-gray-700 mb-4",children:"     .      ."}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Po,{className:"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5"}),n.jsx("span",{className:"text-sm text-gray-700",children:" "})]}),n.jsxs("div",{className:"flex gap-2 mt-1",children:[n.jsx(Po,{className:"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5"}),n.jsx("span",{className:"text-sm text-gray-700",children:" 30 "})]}),n.jsxs("div",{className:"flex gap-2 mt-1",children:[n.jsx(Po,{className:"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5"}),n.jsx("span",{className:"text-sm text-gray-700",children:"  "})]})]})]})})}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs(Nt,{className:"w-full h-14 text-lg",onClick:W,children:[" ",n.jsx(ei,{className:"h-5 w-5 ml-2"})]}),n.jsxs(Nt,{variant:"outline",className:"w-full h-14 text-lg",onClick:q,children:["   ",n.jsx(Sl,{className:"h-5 w-5 ml-2"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("button",{onClick:()=>t("faq"),className:"p-4 border-2 border-gray-300 rounded hover:border-primary transition-colors",children:[n.jsx(ro,{className:"h-6 w-6 text-primary mx-auto mb-2"}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:"  "})]}),n.jsxs("button",{onClick:()=>t("contact"),className:"p-4 border-2 border-gray-300 rounded hover:border-primary transition-colors",children:[n.jsx(Ps,{className:"h-6 w-6 text-primary mx-auto mb-2"}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:"  "})]})]})]}),ae=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs(Nt,{variant:"ghost",onClick:()=>t("home"),className:"-ml-2",children:[n.jsx(cl,{className:"h-4 w-4 mr-2"}),""]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:" "}),n.jsx("p",{className:"text-gray-600",children:"     "})]}),n.jsx(Cr,{children:n.jsxs(_r,{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"flex items-start gap-3 p-4 border-2 border-primary rounded",children:[n.jsx(Tb,{id:"required",checked:r,onCheckedChange:ye=>a(ye)}),n.jsxs("div",{className:"flex-1",children:[n.jsxs(It,{htmlFor:"required",className:"cursor-pointer",children:[n.jsx("span",{className:"font-bold text-primary",children:""}),"     "]}),n.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"   ,   ,   ."})]})]}),n.jsxs("div",{className:"flex items-start gap-3 p-4 border-2 border-gray-300 rounded",children:[n.jsx(Tb,{id:"optional",checked:s,onCheckedChange:ye=>i(ye)}),n.jsxs("div",{className:"flex-1",children:[n.jsxs(It,{htmlFor:"optional",className:"cursor-pointer",children:[n.jsx("span",{className:"text-gray-600",children:""}),"    "]}),n.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"2           ."})]})]})]})}),n.jsxs(gm,{children:[n.jsx(Gn,{className:"h-4 w-4"}),n.jsx(xm,{className:"text-sm",children:"   ,      ."})]}),n.jsx(Nt,{className:"w-full",onClick:K,children:""})]}),oe=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs(Nt,{variant:"ghost",onClick:()=>t("consent"),className:"-ml-2",children:[n.jsx(cl,{className:"h-4 w-4 mr-2"}),""]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:" "}),n.jsx("p",{className:"text-gray-600",children:"  "})]}),n.jsx("div",{className:"space-y-3",children:$.map(ye=>n.jsx("button",{onClick:()=>G(ye.id),className:"w-full p-4 border-2 border-gray-300 hover:border-primary rounded transition-colors text-left",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(pm,{className:"h-6 w-6 text-primary flex-shrink-0 mt-1"}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:ye.name}),n.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-1",children:[n.jsx(Qb,{className:"h-3 w-3"}),ye.address]})]}),n.jsx(ei,{className:"h-5 w-5 text-gray-400 ml-auto"})]})},ye.id))})]}),ve=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs(Nt,{variant:"ghost",onClick:()=>t("center-select"),className:"-ml-2",children:[n.jsx(cl,{className:"h-4 w-4 mr-2"}),""]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"   "}),n.jsx("p",{className:"text-gray-600",children:"   "})]}),n.jsx(Cr,{children:n.jsxs(_r,{className:"p-6 space-y-6",children:[n.jsxs("div",{children:[n.jsx(It,{htmlFor:"date",children:"  *"}),n.jsx(Ir,{id:"date",type:"date",value:d,onChange:ye=>u(ye.target.value),min:new Date().toISOString().split("T")[0],className:"mt-2"})]}),n.jsxs("div",{children:[n.jsx(It,{children:"  *"}),n.jsx("div",{className:"grid grid-cols-3 gap-2 mt-2",children:B.map(ye=>n.jsx("button",{onClick:()=>m(ye),className:`p-3 border-2 rounded transition-colors ${p===ye?"border-primary bg-blue-50 text-primary font-semibold":"border-gray-300 hover:border-gray-400"}`,children:ye},ye))})]})]})}),n.jsx(Nt,{className:"w-full",onClick:U,disabled:!d||!p,children:""})]}),ce=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs(Nt,{variant:"ghost",onClick:()=>t("datetime"),className:"-ml-2",children:[n.jsx(cl,{className:"h-4 w-4 mr-2"}),""]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:" "}),n.jsx("p",{className:"text-gray-600",children:"    "})]}),n.jsx(Cr,{children:n.jsxs(_r,{className:"p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx(It,{htmlFor:"name",children:" *"}),n.jsx(Ir,{id:"name",value:h,onChange:ye=>x(ye.target.value),placeholder:"",className:"mt-2"})]}),n.jsxs("div",{children:[n.jsx(It,{htmlFor:"phone",children:" *"}),n.jsx(Ir,{id:"phone",type:"tel",value:y,onChange:ye=>N(ye.target.value),placeholder:"010-1234-5678",className:"mt-2"})]}),n.jsxs("div",{children:[n.jsx(It,{htmlFor:"birthdate",children:" *"}),n.jsx(Ir,{id:"birthdate",type:"date",value:v,onChange:ye=>j(ye.target.value),className:"mt-2"})]}),n.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Tb,{id:"guardianToggle",checked:_,onCheckedChange:ye=>{O(ye),ye||S("")}}),n.jsx(It,{htmlFor:"guardianToggle",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"  "})]}),_&&n.jsxs("div",{className:"mt-2",children:[n.jsx(It,{htmlFor:"guardianPhone",children:"  ()"}),n.jsx(Ir,{id:"guardianPhone",type:"tel",value:A,onChange:ye=>S(ye.target.value),placeholder:"010-0000-0000",className:"mt-2"})]}),n.jsxs("p",{className:"text-xs text-gray-400 mt-2 leading-relaxed",children:["        .",n.jsx("br",{}),"    ."]})]}),n.jsxs("div",{children:[n.jsx(It,{htmlFor:"notes",children:" ()"}),n.jsx(Oo,{id:"notes",value:E,onChange:ye=>C(ye.target.value),placeholder:"       ",rows:3,className:"mt-2"})]})]})}),n.jsxs(Cr,{className:"border-blue-300 bg-blue-50",children:[n.jsx(Nn,{children:n.jsx(Sn,{className:"text-blue-900",children:"  "})}),n.jsxs(_r,{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-blue-700",children:":"}),n.jsx("span",{className:"font-medium text-blue-900",children:$.find(ye=>ye.id===o)?.name})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-blue-700",children:":"}),n.jsx("span",{className:"font-medium text-blue-900",children:d&&new Date(d).toLocaleDateString("ko-KR")})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-blue-700",children:":"}),n.jsx("span",{className:"font-medium text-blue-900",children:p})]})]})]}),n.jsx(Nt,{className:"w-full",onClick:re,disabled:!h||!y||!v,children:" "})]}),Ee=()=>n.jsxs("div",{className:"space-y-6 text-center py-8",children:[n.jsx("div",{className:"bg-green-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto",children:n.jsx(Po,{className:"h-12 w-12 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:" "}),n.jsx("p",{className:"text-gray-600",children:"   "})]}),n.jsx(Cr,{children:n.jsxs(_r,{className:"p-6 space-y-3",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:":"}),n.jsx("span",{className:"font-medium",children:$.find(ye=>ye.id===o)?.name})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:":"}),n.jsx("span",{className:"font-medium",children:d&&new Date(d).toLocaleDateString("ko-KR")})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:":"}),n.jsx("span",{className:"font-medium",children:p})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:":"}),n.jsx("span",{className:"font-medium",children:h})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:":"}),n.jsx("span",{className:"font-medium",children:y})]}),A&&n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:" :"}),n.jsx("span",{className:"font-medium",children:A.replace(/(\d{3})\d{4}(\d{4})/,"$1-****-$2")})]})]})}),n.jsxs(gm,{children:[n.jsx(Gn,{className:"h-4 w-4"}),n.jsx(xm,{className:"text-sm",children:" 3    .    ."})]}),n.jsx(Nt,{variant:"outline",className:"w-full",onClick:()=>t("home"),children:""})]}),xe=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs(Nt,{variant:"ghost",onClick:()=>t("home"),className:"-ml-2",children:[n.jsx(cl,{className:"h-4 w-4 mr-2"}),""]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"  "}),n.jsx("p",{className:"text-gray-600",children:"  "})]}),n.jsx("div",{className:"space-y-4",children:P.map((ye,se)=>n.jsxs(Cr,{children:[n.jsx(Nn,{children:n.jsx(Sn,{className:"text-base",children:ye.question})}),n.jsx(_r,{children:n.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:ye.answer})})]},se))})]}),Te=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs(Nt,{variant:"ghost",onClick:()=>t("home"),className:"-ml-2",children:[n.jsx(cl,{className:"h-4 w-4 mr-2"}),""]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"  "}),n.jsx("p",{className:"text-gray-600",children:"    "})]}),n.jsxs(Cr,{children:[n.jsx(Nn,{children:n.jsx(Sn,{children:" "})}),n.jsxs(_r,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Ps,{className:"h-5 w-5 text-primary"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:""}),n.jsx("p",{className:"font-medium",children:"02-1234-5678"})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(XX,{className:"h-5 w-5 text-primary"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:""}),n.jsx("p",{className:"font-medium",children:"support@gangnam.go.kr"})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Qb,{className:"h-5 w-5 text-primary"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:""}),n.jsx("p",{className:"font-medium",children:"   524"})]})]})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(Nt,{variant:"outline",className:"w-full",children:"  "}),n.jsx(Nt,{variant:"destructive",className:"w-full",onClick:()=>k(!0),children:"  "})]}),n.jsx(Gu,{open:D,onOpenChange:k,children:n.jsxs(Ku,{children:[n.jsxs(ry,{children:[n.jsx(ny,{className:"text-red-600",children:"  "}),n.jsx(DC,{children:"  ?"})]}),n.jsxs(gm,{className:"border-red-300 bg-red-50",children:[n.jsx(Gn,{className:"h-4 w-4 text-red-600"}),n.jsx(xm,{className:"text-red-900 text-sm",children:"       .   ."})]}),n.jsxs(PC,{children:[n.jsx(Nt,{variant:"outline",onClick:()=>k(!1),children:""}),n.jsx(Nt,{variant:"destructive",onClick:L,children:" "})]})]})})]});return n.jsx("div",{className:"min-h-screen bg-gray-100 py-4 px-4",children:n.jsxs("div",{className:"max-w-lg mx-auto",children:[n.jsxs("div",{className:"mb-6 text-center",children:[n.jsx("div",{className:"flex items-center justify-center mb-2",children:n.jsx(pm,{className:"h-8 w-8 text-primary"})}),n.jsx("h1",{className:"text-xl font-bold text-gray-900",children:""}),n.jsx("p",{className:"text-sm text-gray-600",children:" "})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e==="home"&&H(),e==="consent"&&ae(),e==="center-select"&&oe(),e==="datetime"&&ve(),e==="confirm"&&ce(),e==="complete"&&Ee(),e==="faq"&&xe(),e==="contact"&&Te()]}),n.jsx("button",{onClick:()=>F(!0),className:"fixed bottom-6 right-6 bg-primary hover:bg-primary-hover text-white rounded-full p-4 shadow-lg transition-transform hover:scale-110",children:n.jsx(j8,{className:"h-6 w-6"})}),n.jsx(Tte,{open:M,onOpenChange:F})]})})}const Ote=AO("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Qr({className:e,variant:t,asChild:r=!1,...a}){const s=r?W8:"span";return n.jsx(s,{"data-slot":"badge",className:de(Ote({variant:t}),e),...a})}const LC="   ,     .";function kte(){return typeof window>"u"?"":new URLSearchParams(window.location.search).get("t")||""}function Rte(e){return e?e.toUpperCase().includes("3")?"STAGE3":e.toUpperCase().includes("2")?"STAGE2":"STAGE1":"STAGE1"}function Pte(e){const t=e.toLowerCase(),r=t.includes("s3")?"STAGE3":t.includes("s2")?"STAGE2":"STAGE1";return r==="STAGE1"?{stage:r,actionType:"BOOKING",centerName:" ",callbackPhone:"02-555-0199",caseAlias:"",privacyNotice:LC}:{stage:r,actionType:r==="STAGE3"?"FOLLOW_UP_HUB":"NEXT_STEP_HUB",centerName:" ",callbackPhone:"02-555-0199",caseAlias:"",dueDate:r==="STAGE3"?"7   ":"3   ",cta:{primary:r==="STAGE3"?"  ":"/  ",secondary:" "},checklist:r==="STAGE3"?["  ","     ","    "]:["/  ","  "," / "],privacyNotice:LC}}function Dte({token:e,data:t}){const[r,a]=g.useState(!1),s=t.centerName||"",i=t.callbackPhone||"02-555-0199",o=t.checklist||[],l=async()=>{try{await fetch("/api/public/sms/landing/action",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e,actionType:t.actionType||"HUB_ACTION",status:"ACTION_COMPLETED"})})}catch{}finally{a(!0)}};return n.jsx("div",{className:"min-h-screen bg-slate-100 py-6 px-4",children:n.jsxs("div",{className:"mx-auto max-w-xl space-y-4",children:[n.jsxs(Cr,{className:"border-blue-200 bg-blue-50",children:[n.jsxs(Nn,{className:"pb-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(Qr,{className:"bg-blue-600 text-white border-blue-500",children:t.stage==="STAGE2"?"Stage2 ":"Stage3 "}),r&&n.jsx(Qr,{className:"bg-emerald-600 text-white border-emerald-500",children:"ACTION_COMPLETED"})]}),n.jsxs(Sn,{className:"text-slate-900",children:[s," "]}),n.jsxs(fl,{className:"text-slate-700",children:[t.caseAlias||"","    ."]})]}),n.jsxs(_r,{className:"space-y-3",children:[t.dueDate&&n.jsxs("div",{className:"flex items-center gap-2 rounded-lg border border-blue-200 bg-white px-3 py-2 text-sm text-slate-700",children:[n.jsx(gO,{className:"h-4 w-4 text-blue-600"}),t.dueDate]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-3",children:[n.jsxs("p",{className:"text-sm font-semibold text-slate-800 flex items-center gap-2",children:[n.jsx(bO,{className:"h-4 w-4"}),"  "]}),n.jsx("ul",{className:"mt-2 space-y-1.5 text-sm text-slate-700",children:o.map(d=>n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"mt-1 h-1.5 w-1.5 rounded-full bg-slate-500"}),d]},d))})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs(Nt,{onClick:l,className:"w-full",children:[n.jsx(Zs,{className:"h-4 w-4 mr-1.5"}),t.cta?.primary||"  "]}),n.jsxs(Nt,{variant:"outline",className:"w-full",onClick:()=>{typeof window<"u"&&(window.location.href=`tel:${i}`)},children:[n.jsx(Ps,{className:"h-4 w-4 mr-1.5"}),t.cta?.secondary||" "]})]})]})]}),n.jsx(Cr,{className:"border-slate-200",children:n.jsx(_r,{className:"pt-4",children:n.jsxs("div",{className:"flex items-start gap-2 text-xs text-slate-600",children:[n.jsx(Gn,{className:"h-4 w-4 mt-0.5"}),n.jsx("p",{children:t.privacyNotice||LC})]})})})]})})}function Ite(){const e=g.useMemo(()=>kte(),[]),[t,r]=g.useState(!0),[a,s]=g.useState(null),[i,o]=g.useState(null);return g.useEffect(()=>{let l=!0;return(async()=>{if(!e){if(!l)return;s("   ."),r(!1);return}try{const u=await fetch(`/api/public/sms/landing?t=${encodeURIComponent(e)}`);if(!u.ok)throw new Error(`landing api error: ${u.status}`);const p=await u.json();if(!l)return;o({...p,stage:Rte(p.stage)}),s(null)}catch{if(!l)return;o(Pte(e)),s(null)}finally{l&&r(!1)}})(),()=>{l=!1}},[e]),t?n.jsx("div",{className:"min-h-screen bg-slate-100 flex items-center justify-center px-4",children:n.jsx(Cr,{className:"w-full max-w-md",children:n.jsx(_r,{className:"pt-6 text-sm text-slate-600",children:"   ..."})})}):a||!i?n.jsx("div",{className:"min-h-screen bg-slate-100 flex items-center justify-center px-4",children:n.jsxs(Cr,{className:"w-full max-w-md border-red-200",children:[n.jsxs(Nn,{children:[n.jsx(Sn,{className:"text-red-700",children:" "}),n.jsx(fl,{children:"    ."})]}),n.jsx(_r,{className:"text-sm text-slate-600",children:a||"  ."})]})}):i.stage==="STAGE1"?n.jsx(MC,{}):n.jsx(Dte,{token:e,data:i})}var w2,sP;function Ms(){if(sP)return w2;sP=1;var e=Array.isArray;return w2=e,w2}var E2,iP;function XB(){if(iP)return E2;iP=1;var e=typeof kx=="object"&&kx&&kx.Object===Object&&kx;return E2=e,E2}var A2,oP;function Bo(){if(oP)return A2;oP=1;var e=XB(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return A2=r,A2}var C2,lP;function _p(){if(lP)return C2;lP=1;var e=Bo(),t=e.Symbol;return C2=t,C2}var _2,cP;function Mte(){if(cP)return _2;cP=1;var e=_p(),t=Object.prototype,r=t.hasOwnProperty,a=t.toString,s=e?e.toStringTag:void 0;function i(o){var l=r.call(o,s),d=o[s];try{o[s]=void 0;var u=!0}catch{}var p=a.call(o);return u&&(l?o[s]=d:delete o[s]),p}return _2=i,_2}var T2,dP;function Lte(){if(dP)return T2;dP=1;var e=Object.prototype,t=e.toString;function r(a){return t.call(a)}return T2=r,T2}var O2,uP;function Mc(){if(uP)return O2;uP=1;var e=_p(),t=Mte(),r=Lte(),a="[object Null]",s="[object Undefined]",i=e?e.toStringTag:void 0;function o(l){return l==null?l===void 0?s:a:i&&i in Object(l)?t(l):r(l)}return O2=o,O2}var k2,fP;function Uo(){if(fP)return k2;fP=1;function e(t){return t!=null&&typeof t=="object"}return k2=e,k2}var R2,mP;function Tp(){if(mP)return R2;mP=1;var e=Mc(),t=Uo(),r="[object Symbol]";function a(s){return typeof s=="symbol"||t(s)&&e(s)==r}return R2=a,R2}var P2,pP;function $O(){if(pP)return P2;pP=1;var e=Ms(),t=Tp(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function s(i,o){if(e(i))return!1;var l=typeof i;return l=="number"||l=="symbol"||l=="boolean"||i==null||t(i)?!0:a.test(i)||!r.test(i)||o!=null&&i in Object(o)}return P2=s,P2}var D2,hP;function Ho(){if(hP)return D2;hP=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return D2=e,D2}var I2,gP;function FO(){if(gP)return I2;gP=1;var e=Mc(),t=Ho(),r="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",i="[object Proxy]";function o(l){if(!t(l))return!1;var d=e(l);return d==a||d==s||d==r||d==i}return I2=o,I2}var M2,xP;function $te(){if(xP)return M2;xP=1;var e=Bo(),t=e["__core-js_shared__"];return M2=t,M2}var L2,bP;function Fte(){if(bP)return L2;bP=1;var e=$te(),t=(function(){var a=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""})();function r(a){return!!t&&t in a}return L2=r,L2}var $2,yP;function QB(){if(yP)return $2;yP=1;var e=Function.prototype,t=e.toString;function r(a){if(a!=null){try{return t.call(a)}catch{}try{return a+""}catch{}}return""}return $2=r,$2}var F2,vP;function Bte(){if(vP)return F2;vP=1;var e=FO(),t=Fte(),r=Ho(),a=QB(),s=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,d=o.toString,u=l.hasOwnProperty,p=RegExp("^"+d.call(u).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function m(h){if(!r(h)||t(h))return!1;var x=e(h)?p:i;return x.test(a(h))}return F2=m,F2}var B2,NP;function Ute(){if(NP)return B2;NP=1;function e(t,r){return t?.[r]}return B2=e,B2}var U2,SP;function uf(){if(SP)return U2;SP=1;var e=Bte(),t=Ute();function r(a,s){var i=t(a,s);return e(i)?i:void 0}return U2=r,U2}var H2,jP;function Yv(){if(jP)return H2;jP=1;var e=uf(),t=e(Object,"create");return H2=t,H2}var G2,wP;function Hte(){if(wP)return G2;wP=1;var e=Yv();function t(){this.__data__=e?e(null):{},this.size=0}return G2=t,G2}var K2,EP;function Gte(){if(EP)return K2;EP=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return K2=e,K2}var z2,AP;function Kte(){if(AP)return z2;AP=1;var e=Yv(),t="__lodash_hash_undefined__",r=Object.prototype,a=r.hasOwnProperty;function s(i){var o=this.__data__;if(e){var l=o[i];return l===t?void 0:l}return a.call(o,i)?o[i]:void 0}return z2=s,z2}var q2,CP;function zte(){if(CP)return q2;CP=1;var e=Yv(),t=Object.prototype,r=t.hasOwnProperty;function a(s){var i=this.__data__;return e?i[s]!==void 0:r.call(i,s)}return q2=a,q2}var W2,_P;function qte(){if(_P)return W2;_P=1;var e=Yv(),t="__lodash_hash_undefined__";function r(a,s){var i=this.__data__;return this.size+=this.has(a)?0:1,i[a]=e&&s===void 0?t:s,this}return W2=r,W2}var V2,TP;function Wte(){if(TP)return V2;TP=1;var e=Hte(),t=Gte(),r=Kte(),a=zte(),s=qte();function i(o){var l=-1,d=o==null?0:o.length;for(this.clear();++l<d;){var u=o[l];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=a,i.prototype.set=s,V2=i,V2}var Y2,OP;function Vte(){if(OP)return Y2;OP=1;function e(){this.__data__=[],this.size=0}return Y2=e,Y2}var X2,kP;function Xv(){if(kP)return X2;kP=1;function e(t,r){return t===r||t!==t&&r!==r}return X2=e,X2}var Q2,RP;function Qv(){if(RP)return Q2;RP=1;var e=Xv();function t(r,a){for(var s=r.length;s--;)if(e(r[s][0],a))return s;return-1}return Q2=t,Q2}var Z2,PP;function Yte(){if(PP)return Z2;PP=1;var e=Qv(),t=Array.prototype,r=t.splice;function a(s){var i=this.__data__,o=e(i,s);if(o<0)return!1;var l=i.length-1;return o==l?i.pop():r.call(i,o,1),--this.size,!0}return Z2=a,Z2}var J2,DP;function Xte(){if(DP)return J2;DP=1;var e=Qv();function t(r){var a=this.__data__,s=e(a,r);return s<0?void 0:a[s][1]}return J2=t,J2}var eS,IP;function Qte(){if(IP)return eS;IP=1;var e=Qv();function t(r){return e(this.__data__,r)>-1}return eS=t,eS}var tS,MP;function Zte(){if(MP)return tS;MP=1;var e=Qv();function t(r,a){var s=this.__data__,i=e(s,r);return i<0?(++this.size,s.push([r,a])):s[i][1]=a,this}return tS=t,tS}var rS,LP;function Zv(){if(LP)return rS;LP=1;var e=Vte(),t=Yte(),r=Xte(),a=Qte(),s=Zte();function i(o){var l=-1,d=o==null?0:o.length;for(this.clear();++l<d;){var u=o[l];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=a,i.prototype.set=s,rS=i,rS}var nS,$P;function BO(){if($P)return nS;$P=1;var e=uf(),t=Bo(),r=e(t,"Map");return nS=r,nS}var aS,FP;function Jte(){if(FP)return aS;FP=1;var e=Wte(),t=Zv(),r=BO();function a(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return aS=a,aS}var sS,BP;function ere(){if(BP)return sS;BP=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return sS=e,sS}var iS,UP;function Jv(){if(UP)return iS;UP=1;var e=ere();function t(r,a){var s=r.__data__;return e(a)?s[typeof a=="string"?"string":"hash"]:s.map}return iS=t,iS}var oS,HP;function tre(){if(HP)return oS;HP=1;var e=Jv();function t(r){var a=e(this,r).delete(r);return this.size-=a?1:0,a}return oS=t,oS}var lS,GP;function rre(){if(GP)return lS;GP=1;var e=Jv();function t(r){return e(this,r).get(r)}return lS=t,lS}var cS,KP;function nre(){if(KP)return cS;KP=1;var e=Jv();function t(r){return e(this,r).has(r)}return cS=t,cS}var dS,zP;function are(){if(zP)return dS;zP=1;var e=Jv();function t(r,a){var s=e(this,r),i=s.size;return s.set(r,a),this.size+=s.size==i?0:1,this}return dS=t,dS}var uS,qP;function UO(){if(qP)return uS;qP=1;var e=Jte(),t=tre(),r=rre(),a=nre(),s=are();function i(o){var l=-1,d=o==null?0:o.length;for(this.clear();++l<d;){var u=o[l];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=a,i.prototype.set=s,uS=i,uS}var fS,WP;function ZB(){if(WP)return fS;WP=1;var e=UO(),t="Expected a function";function r(a,s){if(typeof a!="function"||s!=null&&typeof s!="function")throw new TypeError(t);var i=function(){var o=arguments,l=s?s.apply(this,o):o[0],d=i.cache;if(d.has(l))return d.get(l);var u=a.apply(this,o);return i.cache=d.set(l,u)||d,u};return i.cache=new(r.Cache||e),i}return r.Cache=e,fS=r,fS}var mS,VP;function sre(){if(VP)return mS;VP=1;var e=ZB(),t=500;function r(a){var s=e(a,function(o){return i.size===t&&i.clear(),o}),i=s.cache;return s}return mS=r,mS}var pS,YP;function ire(){if(YP)return pS;YP=1;var e=sre(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,a=e(function(s){var i=[];return s.charCodeAt(0)===46&&i.push(""),s.replace(t,function(o,l,d,u){i.push(d?u.replace(r,"$1"):l||o)}),i});return pS=a,pS}var hS,XP;function e1(){if(XP)return hS;XP=1;function e(t,r){for(var a=-1,s=t==null?0:t.length,i=Array(s);++a<s;)i[a]=r(t[a],a,t);return i}return hS=e,hS}var gS,QP;function ore(){if(QP)return gS;QP=1;var e=_p(),t=e1(),r=Ms(),a=Tp(),s=e?e.prototype:void 0,i=s?s.toString:void 0;function o(l){if(typeof l=="string")return l;if(r(l))return t(l,o)+"";if(a(l))return i?i.call(l):"";var d=l+"";return d=="0"&&1/l==-1/0?"-0":d}return gS=o,gS}var xS,ZP;function JB(){if(ZP)return xS;ZP=1;var e=ore();function t(r){return r==null?"":e(r)}return xS=t,xS}var bS,JP;function t1(){if(JP)return bS;JP=1;var e=Ms(),t=$O(),r=ire(),a=JB();function s(i,o){return e(i)?i:t(i,o)?[i]:r(a(i))}return bS=s,bS}var yS,eD;function yg(){if(eD)return yS;eD=1;var e=Tp();function t(r){if(typeof r=="string"||e(r))return r;var a=r+"";return a=="0"&&1/r==-1/0?"-0":a}return yS=t,yS}var vS,tD;function r1(){if(tD)return vS;tD=1;var e=t1(),t=yg();function r(a,s){s=e(s,a);for(var i=0,o=s.length;a!=null&&i<o;)a=a[t(s[i++])];return i&&i==o?a:void 0}return vS=r,vS}var NS,rD;function eU(){if(rD)return NS;rD=1;var e=r1();function t(r,a,s){var i=r==null?void 0:e(r,a);return i===void 0?s:i}return NS=t,NS}var lre=eU();const Js=Vr(lre);var SS,nD;function cre(){if(nD)return SS;nD=1;function e(t){return t==null}return SS=e,SS}var dre=cre();const Qt=Vr(dre);var jS,aD;function ure(){if(aD)return jS;aD=1;var e=Mc(),t=Ms(),r=Uo(),a="[object String]";function s(i){return typeof i=="string"||!t(i)&&r(i)&&e(i)==a}return jS=s,jS}var fre=ure();const Zu=Vr(fre);var mre=FO();const Gt=Vr(mre);var pre=Ho();const Op=Vr(pre);var wS={exports:{}},Yr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sD;function hre(){if(sD)return Yr;sD=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),x=Symbol.for("react.offscreen"),y;y=Symbol.for("react.module.reference");function N(v){if(typeof v=="object"&&v!==null){var j=v.$$typeof;switch(j){case e:switch(v=v.type,v){case r:case s:case a:case u:case p:return v;default:switch(v=v&&v.$$typeof,v){case l:case o:case d:case h:case m:case i:return v;default:return j}}case t:return j}}}return Yr.ContextConsumer=o,Yr.ContextProvider=i,Yr.Element=e,Yr.ForwardRef=d,Yr.Fragment=r,Yr.Lazy=h,Yr.Memo=m,Yr.Portal=t,Yr.Profiler=s,Yr.StrictMode=a,Yr.Suspense=u,Yr.SuspenseList=p,Yr.isAsyncMode=function(){return!1},Yr.isConcurrentMode=function(){return!1},Yr.isContextConsumer=function(v){return N(v)===o},Yr.isContextProvider=function(v){return N(v)===i},Yr.isElement=function(v){return typeof v=="object"&&v!==null&&v.$$typeof===e},Yr.isForwardRef=function(v){return N(v)===d},Yr.isFragment=function(v){return N(v)===r},Yr.isLazy=function(v){return N(v)===h},Yr.isMemo=function(v){return N(v)===m},Yr.isPortal=function(v){return N(v)===t},Yr.isProfiler=function(v){return N(v)===s},Yr.isStrictMode=function(v){return N(v)===a},Yr.isSuspense=function(v){return N(v)===u},Yr.isSuspenseList=function(v){return N(v)===p},Yr.isValidElementType=function(v){return typeof v=="string"||typeof v=="function"||v===r||v===s||v===a||v===u||v===p||v===x||typeof v=="object"&&v!==null&&(v.$$typeof===h||v.$$typeof===m||v.$$typeof===i||v.$$typeof===o||v.$$typeof===d||v.$$typeof===y||v.getModuleId!==void 0)},Yr.typeOf=N,Yr}var iD;function gre(){return iD||(iD=1,wS.exports=hre()),wS.exports}var xre=gre(),ES,oD;function tU(){if(oD)return ES;oD=1;var e=Mc(),t=Uo(),r="[object Number]";function a(s){return typeof s=="number"||t(s)&&e(s)==r}return ES=a,ES}var AS,lD;function bre(){if(lD)return AS;lD=1;var e=tU();function t(r){return e(r)&&r!=+r}return AS=t,AS}var yre=bre();const Wd=Vr(yre);var vre=tU();const Nre=Vr(vre);var Os=function(t){return t===0?0:t>0?1:-1},Lu=function(t){return Zu(t)&&t.indexOf("%")===t.length-1},et=function(t){return Nre(t)&&!Wd(t)},Sre=function(t){return Qt(t)},va=function(t){return et(t)||Zu(t)},jre=0,Lc=function(t){var r=++jre;return"".concat(t||"").concat(r)},ks=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!et(t)&&!Zu(t))return a;var i;if(Lu(t)){var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return Wd(i)&&(i=a),s&&i>r&&(i=r),i},_d=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},wre=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,a={},s=0;s<r;s++)if(!a[t[s]])a[t[s]]=!0;else return!0;return!1},kn=function(t,r){return et(t)&&et(r)?function(a){return t+a*(r-t)}:function(){return r}};function iy(e,t,r){return!e||!e.length?null:e.find(function(a){return a&&(typeof t=="function"?t(a):Js(a,t))===r})}var Ere=function(t){if(!t||!t.length)return null;for(var r=t.length,a=0,s=0,i=0,o=0,l=1/0,d=-1/0,u=0,p=0,m=0;m<r;m++)u=t[m].cx||0,p=t[m].cy||0,a+=u,s+=p,i+=u*p,o+=u*u,l=Math.min(l,u),d=Math.max(d,u);var h=r*o!==a*a?(r*i-a*s)/(r*o-a*a):0;return{xmin:l,xmax:d,a:h,b:(s-h*a)/r}},Are=function(t,r){return et(t)&&et(r)?t-r:Zu(t)&&Zu(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function ym(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var a in t)if({}.hasOwnProperty.call(t,a)&&!{}.hasOwnProperty.call(e,a))return!1;return!0}function $C(e){"@babel/helpers - typeof";return $C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$C(e)}var Cre=["viewBox","children"],_re=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],cD=["points","pathLength"],CS={svg:Cre,polygon:cD,polyline:cD},HO=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],oy=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(g.isValidElement(t)&&(a=t.props),!Op(a))return null;var s={};return Object.keys(a).forEach(function(i){HO.includes(i)&&(s[i]=r||function(o){return a[i](a,o)})}),s},Tre=function(t,r,a){return function(s){return t(r,a,s),null}},Ud=function(t,r,a){if(!Op(t)||$C(t)!=="object")return null;var s=null;return Object.keys(t).forEach(function(i){var o=t[i];HO.includes(i)&&typeof o=="function"&&(s||(s={}),s[i]=Tre(o,r,a))}),s},Ore=["children"],kre=["children"];function dD(e,t){if(e==null)return{};var r=Rre(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Rre(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function FC(e){"@babel/helpers - typeof";return FC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},FC(e)}var uD={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Sc=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},fD=null,_S=null,n1=function e(t){if(t===fD&&Array.isArray(_S))return _S;var r=[];return g.Children.forEach(t,function(a){Qt(a)||(xre.isFragment(a)?r=r.concat(e(a.props.children)):r.push(a))}),_S=r,fD=t,r};function Ds(e,t){var r=[],a=[];return Array.isArray(t)?a=t.map(function(s){return Sc(s)}):a=[Sc(t)],n1(e).forEach(function(s){var i=Js(s,"type.displayName")||Js(s,"type.name");a.indexOf(i)!==-1&&r.push(s)}),r}function us(e,t){var r=Ds(e,t);return r&&r[0]}var BC=function(t){if(!t||!t.props)return!1;var r=t.props,a=r.width,s=r.height;return!(!et(a)||a<=0||!et(s)||s<=0)},Pre=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],rU=function(t){return t&&t.type&&Zu(t.type)&&Pre.indexOf(t.type)>=0},nU=function(t){return t&&FC(t)==="object"&&"clipDot"in t},Dre=function(t,r,a,s){var i,o=(i=CS?.[s])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!Gt(t)&&(s&&o.includes(r)||_re.includes(r))||a&&HO.includes(r)},Ire=function(t){var r=[];return n1(t).forEach(function(a){rU(a)&&r.push(a)}),r},Rt=function(t,r,a){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(g.isValidElement(t)&&(s=t.props),!Op(s))return null;var i={};return Object.keys(s).forEach(function(o){var l;Dre((l=s)===null||l===void 0?void 0:l[o],o,r,a)&&(i[o]=s[o])}),i},UC=function e(t,r){if(t===r)return!0;var a=g.Children.count(t);if(a!==g.Children.count(r))return!1;if(a===0)return!0;if(a===1)return mD(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var s=0;s<a;s++){var i=t[s],o=r[s];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!mD(i,o))return!1}return!0},mD=function(t,r){if(Qt(t)&&Qt(r))return!0;if(!Qt(t)&&!Qt(r)){var a=t.props||{},s=a.children,i=dD(a,Ore),o=r.props||{},l=o.children,d=dD(o,kre);return s&&l?ym(i,d)&&UC(s,l):!s&&!l?ym(i,d):!1}return!1},pD=function(t,r){var a=[],s={};return n1(t).forEach(function(i,o){if(rU(i))a.push(i);else if(i){var l=Sc(i.type),d=r[l]||{},u=d.handler,p=d.once;if(u&&(!p||!s[l])){var m=u(i,l,o);a.push(m),s[l]=!0}}}),a},Mre=function(t){var r=t&&t.type;return r&&uD[r]?uD[r]:null},Lre=function(t,r){return n1(r).indexOf(t)},$re=["children","width","height","viewBox","className","style","title","desc"];function HC(){return HC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},HC.apply(this,arguments)}function Fre(e,t){if(e==null)return{};var r=Bre(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Bre(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function ly(e){var t=e.children,r=e.width,a=e.height,s=e.viewBox,i=e.className,o=e.style,l=e.title,d=e.desc,u=Fre(e,$re),p=s||{width:r,height:a,x:0,y:0},m=ar("recharts-surface",i);return Y.createElement("svg",HC({},Rt(u,!0,"svg"),{className:m,width:r,height:a,style:o,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height)}),Y.createElement("title",null,l),Y.createElement("desc",null,d),t)}var Ure=["children","className"];function GC(){return GC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},GC.apply(this,arguments)}function Hre(e,t){if(e==null)return{};var r=Gre(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Gre(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var cr=Y.forwardRef(function(e,t){var r=e.children,a=e.className,s=Hre(e,Ure),i=ar("recharts-layer",a);return Y.createElement("g",GC({className:i},Rt(s,!0),{ref:t}),r)}),Io=function(t,r){for(var a=arguments.length,s=new Array(a>2?a-2:0),i=2;i<a;i++)s[i-2]=arguments[i]},TS,hD;function aU(){if(hD)return TS;hD=1;function e(t,r,a){var s=-1,i=t.length;r<0&&(r=-r>i?0:i+r),a=a>i?i:a,a<0&&(a+=i),i=r>a?0:a-r>>>0,r>>>=0;for(var o=Array(i);++s<i;)o[s]=t[s+r];return o}return TS=e,TS}var OS,gD;function Kre(){if(gD)return OS;gD=1;var e=aU();function t(r,a,s){var i=r.length;return s=s===void 0?i:s,!a&&s>=i?r:e(r,a,s)}return OS=t,OS}var kS,xD;function sU(){if(xD)return kS;xD=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",s=t+r+a,i="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+e+s+i+"]");function d(u){return l.test(u)}return kS=d,kS}var RS,bD;function zre(){if(bD)return RS;bD=1;function e(t){return t.split("")}return RS=e,RS}var PS,yD;function qre(){if(yD)return PS;yD=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",s=t+r+a,i="\\ufe0e\\ufe0f",o="["+e+"]",l="["+s+"]",d="\\ud83c[\\udffb-\\udfff]",u="(?:"+l+"|"+d+")",p="[^"+e+"]",m="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",x="\\u200d",y=u+"?",N="["+i+"]?",v="(?:"+x+"(?:"+[p,m,h].join("|")+")"+N+y+")*",j=N+y+v,E="(?:"+[p+l+"?",l,m,h,o].join("|")+")",C=RegExp(d+"(?="+d+")|"+E+j,"g");function A(S){return S.match(C)||[]}return PS=A,PS}var DS,vD;function Wre(){if(vD)return DS;vD=1;var e=zre(),t=sU(),r=qre();function a(s){return t(s)?r(s):e(s)}return DS=a,DS}var IS,ND;function Vre(){if(ND)return IS;ND=1;var e=Kre(),t=sU(),r=Wre(),a=JB();function s(i){return function(o){o=a(o);var l=t(o)?r(o):void 0,d=l?l[0]:o.charAt(0),u=l?e(l,1).join(""):o.slice(1);return d[i]()+u}}return IS=s,IS}var MS,SD;function Yre(){if(SD)return MS;SD=1;var e=Vre(),t=e("toUpperCase");return MS=t,MS}var Xre=Yre();const a1=Vr(Xre);function xn(e){return function(){return e}}const iU=Math.cos,cy=Math.sin,Go=Math.sqrt,dy=Math.PI,s1=2*dy,KC=Math.PI,zC=2*KC,Ou=1e-6,Qre=zC-Ou;function oU(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function Zre(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return oU;const r=10**t;return function(a){this._+=a[0];for(let s=1,i=a.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+a[s]}}class Jre{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?oU:Zre(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,a,s){this._append`Q${+t},${+r},${this._x1=+a},${this._y1=+s}`}bezierCurveTo(t,r,a,s,i,o){this._append`C${+t},${+r},${+a},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,a,s,i){if(t=+t,r=+r,a=+a,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,d=a-t,u=s-r,p=o-t,m=l-r,h=p*p+m*m;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>Ou)if(!(Math.abs(m*d-u*p)>Ou)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let x=a-o,y=s-l,N=d*d+u*u,v=x*x+y*y,j=Math.sqrt(N),E=Math.sqrt(h),C=i*Math.tan((KC-Math.acos((N+h-v)/(2*j*E)))/2),A=C/E,S=C/j;Math.abs(A-1)>Ou&&this._append`L${t+A*p},${r+A*m}`,this._append`A${i},${i},0,0,${+(m*x>p*y)},${this._x1=t+S*d},${this._y1=r+S*u}`}}arc(t,r,a,s,i,o){if(t=+t,r=+r,a=+a,o=!!o,a<0)throw new Error(`negative radius: ${a}`);let l=a*Math.cos(s),d=a*Math.sin(s),u=t+l,p=r+d,m=1^o,h=o?s-i:i-s;this._x1===null?this._append`M${u},${p}`:(Math.abs(this._x1-u)>Ou||Math.abs(this._y1-p)>Ou)&&this._append`L${u},${p}`,a&&(h<0&&(h=h%zC+zC),h>Qre?this._append`A${a},${a},0,1,${m},${t-l},${r-d}A${a},${a},0,1,${m},${this._x1=u},${this._y1=p}`:h>Ou&&this._append`A${a},${a},0,${+(h>=KC)},${m},${this._x1=t+a*Math.cos(i)},${this._y1=r+a*Math.sin(i)}`)}rect(t,r,a,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${a=+a}v${+s}h${-a}Z`}toString(){return this._}}function GO(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const a=Math.floor(r);if(!(a>=0))throw new RangeError(`invalid digits: ${r}`);t=a}return e},()=>new Jre(t)}function KO(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function lU(e){this._context=e}lU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function i1(e){return new lU(e)}function cU(e){return e[0]}function dU(e){return e[1]}function uU(e,t){var r=xn(!0),a=null,s=i1,i=null,o=GO(l);e=typeof e=="function"?e:e===void 0?cU:xn(e),t=typeof t=="function"?t:t===void 0?dU:xn(t);function l(d){var u,p=(d=KO(d)).length,m,h=!1,x;for(a==null&&(i=s(x=o())),u=0;u<=p;++u)!(u<p&&r(m=d[u],u,d))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(m,u,d),+t(m,u,d));if(x)return i=null,x+""||null}return l.x=function(d){return arguments.length?(e=typeof d=="function"?d:xn(+d),l):e},l.y=function(d){return arguments.length?(t=typeof d=="function"?d:xn(+d),l):t},l.defined=function(d){return arguments.length?(r=typeof d=="function"?d:xn(!!d),l):r},l.curve=function(d){return arguments.length?(s=d,a!=null&&(i=s(a)),l):s},l.context=function(d){return arguments.length?(d==null?a=i=null:i=s(a=d),l):a},l}function Hx(e,t,r){var a=null,s=xn(!0),i=null,o=i1,l=null,d=GO(u);e=typeof e=="function"?e:e===void 0?cU:xn(+e),t=typeof t=="function"?t:xn(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?dU:xn(+r);function u(m){var h,x,y,N=(m=KO(m)).length,v,j=!1,E,C=new Array(N),A=new Array(N);for(i==null&&(l=o(E=d())),h=0;h<=N;++h){if(!(h<N&&s(v=m[h],h,m))===j)if(j=!j)x=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),y=h-1;y>=x;--y)l.point(C[y],A[y]);l.lineEnd(),l.areaEnd()}j&&(C[h]=+e(v,h,m),A[h]=+t(v,h,m),l.point(a?+a(v,h,m):C[h],r?+r(v,h,m):A[h]))}if(E)return l=null,E+""||null}function p(){return uU().defined(s).curve(o).context(i)}return u.x=function(m){return arguments.length?(e=typeof m=="function"?m:xn(+m),a=null,u):e},u.x0=function(m){return arguments.length?(e=typeof m=="function"?m:xn(+m),u):e},u.x1=function(m){return arguments.length?(a=m==null?null:typeof m=="function"?m:xn(+m),u):a},u.y=function(m){return arguments.length?(t=typeof m=="function"?m:xn(+m),r=null,u):t},u.y0=function(m){return arguments.length?(t=typeof m=="function"?m:xn(+m),u):t},u.y1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:xn(+m),u):r},u.lineX0=u.lineY0=function(){return p().x(e).y(t)},u.lineY1=function(){return p().x(e).y(r)},u.lineX1=function(){return p().x(a).y(t)},u.defined=function(m){return arguments.length?(s=typeof m=="function"?m:xn(!!m),u):s},u.curve=function(m){return arguments.length?(o=m,i!=null&&(l=o(i)),u):o},u.context=function(m){return arguments.length?(m==null?i=l=null:l=o(i=m),u):i},u}class fU{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function ene(e){return new fU(e,!0)}function tne(e){return new fU(e,!1)}const zO={draw(e,t){const r=Go(t/dy);e.moveTo(r,0),e.arc(0,0,r,0,s1)}},rne={draw(e,t){const r=Go(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},mU=Go(1/3),nne=mU*2,ane={draw(e,t){const r=Go(t/nne),a=r*mU;e.moveTo(0,-r),e.lineTo(a,0),e.lineTo(0,r),e.lineTo(-a,0),e.closePath()}},sne={draw(e,t){const r=Go(t),a=-r/2;e.rect(a,a,r,r)}},ine=.8908130915292852,pU=cy(dy/10)/cy(7*dy/10),one=cy(s1/10)*pU,lne=-iU(s1/10)*pU,cne={draw(e,t){const r=Go(t*ine),a=one*r,s=lne*r;e.moveTo(0,-r),e.lineTo(a,s);for(let i=1;i<5;++i){const o=s1*i/5,l=iU(o),d=cy(o);e.lineTo(d*r,-l*r),e.lineTo(l*a-d*s,d*a+l*s)}e.closePath()}},LS=Go(3),dne={draw(e,t){const r=-Go(t/(LS*3));e.moveTo(0,r*2),e.lineTo(-LS*r,-r),e.lineTo(LS*r,-r),e.closePath()}},Ui=-.5,Hi=Go(3)/2,qC=1/Go(12),une=(qC/2+1)*3,fne={draw(e,t){const r=Go(t/une),a=r/2,s=r*qC,i=a,o=r*qC+r,l=-i,d=o;e.moveTo(a,s),e.lineTo(i,o),e.lineTo(l,d),e.lineTo(Ui*a-Hi*s,Hi*a+Ui*s),e.lineTo(Ui*i-Hi*o,Hi*i+Ui*o),e.lineTo(Ui*l-Hi*d,Hi*l+Ui*d),e.lineTo(Ui*a+Hi*s,Ui*s-Hi*a),e.lineTo(Ui*i+Hi*o,Ui*o-Hi*i),e.lineTo(Ui*l+Hi*d,Ui*d-Hi*l),e.closePath()}};function mne(e,t){let r=null,a=GO(s);e=typeof e=="function"?e:xn(e||zO),t=typeof t=="function"?t:xn(t===void 0?64:+t);function s(){let i;if(r||(r=i=a()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:xn(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:xn(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function uy(){}function fy(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function hU(e){this._context=e}hU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:fy(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:fy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function pne(e){return new hU(e)}function gU(e){this._context=e}gU.prototype={areaStart:uy,areaEnd:uy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:fy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function hne(e){return new gU(e)}function xU(e){this._context=e}xU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,a):this._context.moveTo(r,a);break;case 3:this._point=4;default:fy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function gne(e){return new xU(e)}function bU(e){this._context=e}bU.prototype={areaStart:uy,areaEnd:uy,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function xne(e){return new bU(e)}function jD(e){return e<0?-1:1}function wD(e,t,r){var a=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(a||s<0&&-0),o=(r-e._y1)/(s||a<0&&-0),l=(i*s+o*a)/(a+s);return(jD(i)+jD(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function ED(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function $S(e,t,r){var a=e._x0,s=e._y0,i=e._x1,o=e._y1,l=(i-a)/3;e._context.bezierCurveTo(a+l,s+l*t,i-l,o-l*r,i,o)}function my(e){this._context=e}my.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:$S(this,this._t0,ED(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,$S(this,ED(this,r=wD(this,e,t)),r);break;default:$S(this,this._t0,r=wD(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function yU(e){this._context=new vU(e)}(yU.prototype=Object.create(my.prototype)).point=function(e,t){my.prototype.point.call(this,t,e)};function vU(e){this._context=e}vU.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,a,s,i){this._context.bezierCurveTo(t,e,a,r,i,s)}};function bne(e){return new my(e)}function yne(e){return new yU(e)}function NU(e){this._context=e}NU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var a=AD(e),s=AD(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(a[0][i],s[0][i],a[1][i],s[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function AD(e){var t,r=e.length-1,a,s=new Array(r),i=new Array(r),o=new Array(r);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)a=s[t]/i[t-1],i[t]-=a,o[t]-=a*o[t-1];for(s[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function vne(e){return new NU(e)}function o1(e,t){this._context=e,this._t=t}o1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function Nne(e){return new o1(e,.5)}function Sne(e){return new o1(e,0)}function jne(e){return new o1(e,1)}function Lm(e,t){if((o=e.length)>1)for(var r=1,a,s,i=e[t[0]],o,l=i.length;r<o;++r)for(s=i,i=e[t[r]],a=0;a<l;++a)i[a][1]+=i[a][0]=isNaN(s[a][1])?s[a][0]:s[a][1]}function WC(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function wne(e,t){return e[t]}function Ene(e){const t=[];return t.key=e,t}function Ane(){var e=xn([]),t=WC,r=Lm,a=wne;function s(i){var o=Array.from(e.apply(this,arguments),Ene),l,d=o.length,u=-1,p;for(const m of i)for(l=0,++u;l<d;++l)(o[l][u]=[0,+a(m,o[l].key,u,i)]).data=m;for(l=0,p=KO(t(o));l<d;++l)o[p[l]].index=l;return r(o,p),o}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:xn(Array.from(i)),s):e},s.value=function(i){return arguments.length?(a=typeof i=="function"?i:xn(+i),s):a},s.order=function(i){return arguments.length?(t=i==null?WC:typeof i=="function"?i:xn(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??Lm,s):r},s}function Cne(e,t){if((a=e.length)>0){for(var r,a,s=0,i=e[0].length,o;s<i;++s){for(o=r=0;r<a;++r)o+=e[r][s][1]||0;if(o)for(r=0;r<a;++r)e[r][s][1]/=o}Lm(e,t)}}function _ne(e,t){if((s=e.length)>0){for(var r=0,a=e[t[0]],s,i=a.length;r<i;++r){for(var o=0,l=0;o<s;++o)l+=e[o][r][1]||0;a[r][1]+=a[r][0]=-l/2}Lm(e,t)}}function Tne(e,t){if(!(!((o=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,a=1,s,i,o;a<i;++a){for(var l=0,d=0,u=0;l<o;++l){for(var p=e[t[l]],m=p[a][1]||0,h=p[a-1][1]||0,x=(m-h)/2,y=0;y<l;++y){var N=e[t[y]],v=N[a][1]||0,j=N[a-1][1]||0;x+=v-j}d+=m,u+=x*m}s[a-1][1]+=s[a-1][0]=r,d&&(r-=u/d)}s[a-1][1]+=s[a-1][0]=r,Lm(e,t)}}function A0(e){"@babel/helpers - typeof";return A0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A0(e)}var One=["type","size","sizeType"];function VC(){return VC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},VC.apply(this,arguments)}function CD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function _D(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CD(Object(r),!0).forEach(function(a){kne(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CD(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function kne(e,t,r){return t=Rne(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rne(e){var t=Pne(e,"string");return A0(t)=="symbol"?t:t+""}function Pne(e,t){if(A0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(A0(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Dne(e,t){if(e==null)return{};var r=Ine(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Ine(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var SU={symbolCircle:zO,symbolCross:rne,symbolDiamond:ane,symbolSquare:sne,symbolStar:cne,symbolTriangle:dne,symbolWye:fne},Mne=Math.PI/180,Lne=function(t){var r="symbol".concat(a1(t));return SU[r]||zO},$ne=function(t,r,a){if(r==="area")return t;switch(a){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var s=18*Mne;return 1.25*t*t*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Fne=function(t,r){SU["symbol".concat(a1(t))]=r},l1=function(t){var r=t.type,a=r===void 0?"circle":r,s=t.size,i=s===void 0?64:s,o=t.sizeType,l=o===void 0?"area":o,d=Dne(t,One),u=_D(_D({},d),{},{type:a,size:i,sizeType:l}),p=function(){var v=Lne(a),j=mne().type(v).size($ne(i,l,a));return j()},m=u.className,h=u.cx,x=u.cy,y=Rt(u,!0);return h===+h&&x===+x&&i===+i?Y.createElement("path",VC({},y,{className:ar("recharts-symbols",m),transform:"translate(".concat(h,", ").concat(x,")"),d:p()})):null};l1.registerSymbol=Fne;function $m(e){"@babel/helpers - typeof";return $m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$m(e)}function YC(){return YC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},YC.apply(this,arguments)}function TD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Bne(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TD(Object(r),!0).forEach(function(a){C0(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TD(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Une(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hne(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,wU(a.key),a)}}function Gne(e,t,r){return t&&Hne(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Kne(e,t,r){return t=py(t),zne(e,jU()?Reflect.construct(t,r||[],py(e).constructor):t.apply(e,r))}function zne(e,t){if(t&&($m(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qne(e)}function qne(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jU=function(){return!!e})()}function py(e){return py=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},py(e)}function Wne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&XC(e,t)}function XC(e,t){return XC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},XC(e,t)}function C0(e,t,r){return t=wU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wU(e){var t=Vne(e,"string");return $m(t)=="symbol"?t:t+""}function Vne(e,t){if($m(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if($m(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Gi=32,qO=(function(e){function t(){return Une(this,t),Kne(this,t,arguments)}return Wne(t,e),Gne(t,[{key:"renderIcon",value:function(a){var s=this.props.inactiveColor,i=Gi/2,o=Gi/6,l=Gi/3,d=a.inactive?s:a.color;if(a.type==="plainline")return Y.createElement("line",{strokeWidth:4,fill:"none",stroke:d,strokeDasharray:a.payload.strokeDasharray,x1:0,y1:i,x2:Gi,y2:i,className:"recharts-legend-icon"});if(a.type==="line")return Y.createElement("path",{strokeWidth:4,fill:"none",stroke:d,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(Gi,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(a.type==="rect")return Y.createElement("path",{stroke:"none",fill:d,d:"M0,".concat(Gi/8,"h").concat(Gi,"v").concat(Gi*3/4,"h").concat(-Gi,"z"),className:"recharts-legend-icon"});if(Y.isValidElement(a.legendIcon)){var u=Bne({},a);return delete u.legendIcon,Y.cloneElement(a.legendIcon,u)}return Y.createElement(l1,{fill:d,cx:i,cy:i,size:Gi,sizeType:"diameter",type:a.type})}},{key:"renderItems",value:function(){var a=this,s=this.props,i=s.payload,o=s.iconSize,l=s.layout,d=s.formatter,u=s.inactiveColor,p={x:0,y:0,width:Gi,height:Gi},m={display:l==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(x,y){var N=x.formatter||d,v=ar(C0(C0({"recharts-legend-item":!0},"legend-item-".concat(y),!0),"inactive",x.inactive));if(x.type==="none")return null;var j=Gt(x.value)?null:x.value;Io(!Gt(x.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var E=x.inactive?u:x.color;return Y.createElement("li",YC({className:v,style:m,key:"legend-item-".concat(y)},Ud(a.props,x,y)),Y.createElement(ly,{width:o,height:o,viewBox:p,style:h},a.renderIcon(x)),Y.createElement("span",{className:"recharts-legend-item-text",style:{color:E}},N?N(j,x,y):j))})}},{key:"render",value:function(){var a=this.props,s=a.payload,i=a.layout,o=a.align;if(!s||!s.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return Y.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])})(g.PureComponent);C0(qO,"displayName","Legend");C0(qO,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var FS,OD;function Yne(){if(OD)return FS;OD=1;var e=Zv();function t(){this.__data__=new e,this.size=0}return FS=t,FS}var BS,kD;function Xne(){if(kD)return BS;kD=1;function e(t){var r=this.__data__,a=r.delete(t);return this.size=r.size,a}return BS=e,BS}var US,RD;function Qne(){if(RD)return US;RD=1;function e(t){return this.__data__.get(t)}return US=e,US}var HS,PD;function Zne(){if(PD)return HS;PD=1;function e(t){return this.__data__.has(t)}return HS=e,HS}var GS,DD;function Jne(){if(DD)return GS;DD=1;var e=Zv(),t=BO(),r=UO(),a=200;function s(i,o){var l=this.__data__;if(l instanceof e){var d=l.__data__;if(!t||d.length<a-1)return d.push([i,o]),this.size=++l.size,this;l=this.__data__=new r(d)}return l.set(i,o),this.size=l.size,this}return GS=s,GS}var KS,ID;function WO(){if(ID)return KS;ID=1;var e=Zv(),t=Yne(),r=Xne(),a=Qne(),s=Zne(),i=Jne();function o(l){var d=this.__data__=new e(l);this.size=d.size}return o.prototype.clear=t,o.prototype.delete=r,o.prototype.get=a,o.prototype.has=s,o.prototype.set=i,KS=o,KS}var zS,MD;function eae(){if(MD)return zS;MD=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return zS=t,zS}var qS,LD;function tae(){if(LD)return qS;LD=1;function e(t){return this.__data__.has(t)}return qS=e,qS}var WS,$D;function EU(){if($D)return WS;$D=1;var e=UO(),t=eae(),r=tae();function a(s){var i=-1,o=s==null?0:s.length;for(this.__data__=new e;++i<o;)this.add(s[i])}return a.prototype.add=a.prototype.push=t,a.prototype.has=r,WS=a,WS}var VS,FD;function AU(){if(FD)return VS;FD=1;function e(t,r){for(var a=-1,s=t==null?0:t.length;++a<s;)if(r(t[a],a,t))return!0;return!1}return VS=e,VS}var YS,BD;function CU(){if(BD)return YS;BD=1;function e(t,r){return t.has(r)}return YS=e,YS}var XS,UD;function _U(){if(UD)return XS;UD=1;var e=EU(),t=AU(),r=CU(),a=1,s=2;function i(o,l,d,u,p,m){var h=d&a,x=o.length,y=l.length;if(x!=y&&!(h&&y>x))return!1;var N=m.get(o),v=m.get(l);if(N&&v)return N==l&&v==o;var j=-1,E=!0,C=d&s?new e:void 0;for(m.set(o,l),m.set(l,o);++j<x;){var A=o[j],S=l[j];if(u)var _=h?u(S,A,j,l,o,m):u(A,S,j,o,l,m);if(_!==void 0){if(_)continue;E=!1;break}if(C){if(!t(l,function(O,D){if(!r(C,D)&&(A===O||p(A,O,d,u,m)))return C.push(D)})){E=!1;break}}else if(!(A===S||p(A,S,d,u,m))){E=!1;break}}return m.delete(o),m.delete(l),E}return XS=i,XS}var QS,HD;function TU(){if(HD)return QS;HD=1;var e=Bo(),t=e.Uint8Array;return QS=t,QS}var ZS,GD;function rae(){if(GD)return ZS;GD=1;function e(t){var r=-1,a=Array(t.size);return t.forEach(function(s,i){a[++r]=[i,s]}),a}return ZS=e,ZS}var JS,KD;function VO(){if(KD)return JS;KD=1;function e(t){var r=-1,a=Array(t.size);return t.forEach(function(s){a[++r]=s}),a}return JS=e,JS}var ej,zD;function nae(){if(zD)return ej;zD=1;var e=_p(),t=TU(),r=Xv(),a=_U(),s=rae(),i=VO(),o=1,l=2,d="[object Boolean]",u="[object Date]",p="[object Error]",m="[object Map]",h="[object Number]",x="[object RegExp]",y="[object Set]",N="[object String]",v="[object Symbol]",j="[object ArrayBuffer]",E="[object DataView]",C=e?e.prototype:void 0,A=C?C.valueOf:void 0;function S(_,O,D,k,M,F,$){switch(D){case E:if(_.byteLength!=O.byteLength||_.byteOffset!=O.byteOffset)return!1;_=_.buffer,O=O.buffer;case j:return!(_.byteLength!=O.byteLength||!F(new t(_),new t(O)));case d:case u:case h:return r(+_,+O);case p:return _.name==O.name&&_.message==O.message;case x:case N:return _==O+"";case m:var B=s;case y:var P=k&o;if(B||(B=i),_.size!=O.size&&!P)return!1;var W=$.get(_);if(W)return W==O;k|=l,$.set(_,O);var K=a(B(_),B(O),k,M,F,$);return $.delete(_),K;case v:if(A)return A.call(_)==A.call(O)}return!1}return ej=S,ej}var tj,qD;function YO(){if(qD)return tj;qD=1;function e(t,r){for(var a=-1,s=r.length,i=t.length;++a<s;)t[i+a]=r[a];return t}return tj=e,tj}var rj,WD;function OU(){if(WD)return rj;WD=1;var e=YO(),t=Ms();function r(a,s,i){var o=s(a);return t(a)?o:e(o,i(a))}return rj=r,rj}var nj,VD;function aae(){if(VD)return nj;VD=1;function e(t,r){for(var a=-1,s=t==null?0:t.length,i=0,o=[];++a<s;){var l=t[a];r(l,a,t)&&(o[i++]=l)}return o}return nj=e,nj}var aj,YD;function kU(){if(YD)return aj;YD=1;function e(){return[]}return aj=e,aj}var sj,XD;function XO(){if(XD)return sj;XD=1;var e=aae(),t=kU(),r=Object.prototype,a=r.propertyIsEnumerable,s=Object.getOwnPropertySymbols,i=s?function(o){return o==null?[]:(o=Object(o),e(s(o),function(l){return a.call(o,l)}))}:t;return sj=i,sj}var ij,QD;function sae(){if(QD)return ij;QD=1;function e(t,r){for(var a=-1,s=Array(t);++a<t;)s[a]=r(a);return s}return ij=e,ij}var oj,ZD;function iae(){if(ZD)return oj;ZD=1;var e=Mc(),t=Uo(),r="[object Arguments]";function a(s){return t(s)&&e(s)==r}return oj=a,oj}var lj,JD;function QO(){if(JD)return lj;JD=1;var e=iae(),t=Uo(),r=Object.prototype,a=r.hasOwnProperty,s=r.propertyIsEnumerable,i=e((function(){return arguments})())?e:function(o){return t(o)&&a.call(o,"callee")&&!s.call(o,"callee")};return lj=i,lj}var qh={exports:{}},cj,eI;function oae(){if(eI)return cj;eI=1;function e(){return!1}return cj=e,cj}qh.exports;var tI;function ZO(){return tI||(tI=1,(function(e,t){var r=Bo(),a=oae(),s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===s,l=o?r.Buffer:void 0,d=l?l.isBuffer:void 0,u=d||a;e.exports=u})(qh,qh.exports)),qh.exports}var dj,rI;function JO(){if(rI)return dj;rI=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(a,s){var i=typeof a;return s=s??e,!!s&&(i=="number"||i!="symbol"&&t.test(a))&&a>-1&&a%1==0&&a<s}return dj=r,dj}var uj,nI;function ek(){if(nI)return uj;nI=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return uj=t,uj}var fj,aI;function lae(){if(aI)return fj;aI=1;var e=Mc(),t=ek(),r=Uo(),a="[object Arguments]",s="[object Array]",i="[object Boolean]",o="[object Date]",l="[object Error]",d="[object Function]",u="[object Map]",p="[object Number]",m="[object Object]",h="[object RegExp]",x="[object Set]",y="[object String]",N="[object WeakMap]",v="[object ArrayBuffer]",j="[object DataView]",E="[object Float32Array]",C="[object Float64Array]",A="[object Int8Array]",S="[object Int16Array]",_="[object Int32Array]",O="[object Uint8Array]",D="[object Uint8ClampedArray]",k="[object Uint16Array]",M="[object Uint32Array]",F={};F[E]=F[C]=F[A]=F[S]=F[_]=F[O]=F[D]=F[k]=F[M]=!0,F[a]=F[s]=F[v]=F[i]=F[j]=F[o]=F[l]=F[d]=F[u]=F[p]=F[m]=F[h]=F[x]=F[y]=F[N]=!1;function $(B){return r(B)&&t(B.length)&&!!F[e(B)]}return fj=$,fj}var mj,sI;function c1(){if(sI)return mj;sI=1;function e(t){return function(r){return t(r)}}return mj=e,mj}var Wh={exports:{}};Wh.exports;var iI;function tk(){return iI||(iI=1,(function(e,t){var r=XB(),a=t&&!t.nodeType&&t,s=a&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===a,o=i&&r.process,l=(function(){try{var d=s&&s.require&&s.require("util").types;return d||o&&o.binding&&o.binding("util")}catch{}})();e.exports=l})(Wh,Wh.exports)),Wh.exports}var pj,oI;function RU(){if(oI)return pj;oI=1;var e=lae(),t=c1(),r=tk(),a=r&&r.isTypedArray,s=a?t(a):e;return pj=s,pj}var hj,lI;function PU(){if(lI)return hj;lI=1;var e=sae(),t=QO(),r=Ms(),a=ZO(),s=JO(),i=RU(),o=Object.prototype,l=o.hasOwnProperty;function d(u,p){var m=r(u),h=!m&&t(u),x=!m&&!h&&a(u),y=!m&&!h&&!x&&i(u),N=m||h||x||y,v=N?e(u.length,String):[],j=v.length;for(var E in u)(p||l.call(u,E))&&!(N&&(E=="length"||x&&(E=="offset"||E=="parent")||y&&(E=="buffer"||E=="byteLength"||E=="byteOffset")||s(E,j)))&&v.push(E);return v}return hj=d,hj}var gj,cI;function rk(){if(cI)return gj;cI=1;var e=Object.prototype;function t(r){var a=r&&r.constructor,s=typeof a=="function"&&a.prototype||e;return r===s}return gj=t,gj}var xj,dI;function DU(){if(dI)return xj;dI=1;function e(t,r){return function(a){return t(r(a))}}return xj=e,xj}var bj,uI;function cae(){if(uI)return bj;uI=1;var e=DU(),t=e(Object.keys,Object);return bj=t,bj}var yj,fI;function dae(){if(fI)return yj;fI=1;var e=rk(),t=cae(),r=Object.prototype,a=r.hasOwnProperty;function s(i){if(!e(i))return t(i);var o=[];for(var l in Object(i))a.call(i,l)&&l!="constructor"&&o.push(l);return o}return yj=s,yj}var vj,mI;function kp(){if(mI)return vj;mI=1;var e=FO(),t=ek();function r(a){return a!=null&&t(a.length)&&!e(a)}return vj=r,vj}var Nj,pI;function Rp(){if(pI)return Nj;pI=1;var e=PU(),t=dae(),r=kp();function a(s){return r(s)?e(s):t(s)}return Nj=a,Nj}var Sj,hI;function IU(){if(hI)return Sj;hI=1;var e=OU(),t=XO(),r=Rp();function a(s){return e(s,r,t)}return Sj=a,Sj}var jj,gI;function uae(){if(gI)return jj;gI=1;var e=IU(),t=1,r=Object.prototype,a=r.hasOwnProperty;function s(i,o,l,d,u,p){var m=l&t,h=e(i),x=h.length,y=e(o),N=y.length;if(x!=N&&!m)return!1;for(var v=x;v--;){var j=h[v];if(!(m?j in o:a.call(o,j)))return!1}var E=p.get(i),C=p.get(o);if(E&&C)return E==o&&C==i;var A=!0;p.set(i,o),p.set(o,i);for(var S=m;++v<x;){j=h[v];var _=i[j],O=o[j];if(d)var D=m?d(O,_,j,o,i,p):d(_,O,j,i,o,p);if(!(D===void 0?_===O||u(_,O,l,d,p):D)){A=!1;break}S||(S=j=="constructor")}if(A&&!S){var k=i.constructor,M=o.constructor;k!=M&&"constructor"in i&&"constructor"in o&&!(typeof k=="function"&&k instanceof k&&typeof M=="function"&&M instanceof M)&&(A=!1)}return p.delete(i),p.delete(o),A}return jj=s,jj}var wj,xI;function fae(){if(xI)return wj;xI=1;var e=uf(),t=Bo(),r=e(t,"DataView");return wj=r,wj}var Ej,bI;function mae(){if(bI)return Ej;bI=1;var e=uf(),t=Bo(),r=e(t,"Promise");return Ej=r,Ej}var Aj,yI;function MU(){if(yI)return Aj;yI=1;var e=uf(),t=Bo(),r=e(t,"Set");return Aj=r,Aj}var Cj,vI;function pae(){if(vI)return Cj;vI=1;var e=uf(),t=Bo(),r=e(t,"WeakMap");return Cj=r,Cj}var _j,NI;function d1(){if(NI)return _j;NI=1;var e=fae(),t=BO(),r=mae(),a=MU(),s=pae(),i=Mc(),o=QB(),l="[object Map]",d="[object Object]",u="[object Promise]",p="[object Set]",m="[object WeakMap]",h="[object DataView]",x=o(e),y=o(t),N=o(r),v=o(a),j=o(s),E=i;return(e&&E(new e(new ArrayBuffer(1)))!=h||t&&E(new t)!=l||r&&E(r.resolve())!=u||a&&E(new a)!=p||s&&E(new s)!=m)&&(E=function(C){var A=i(C),S=A==d?C.constructor:void 0,_=S?o(S):"";if(_)switch(_){case x:return h;case y:return l;case N:return u;case v:return p;case j:return m}return A}),_j=E,_j}var Tj,SI;function hae(){if(SI)return Tj;SI=1;var e=WO(),t=_U(),r=nae(),a=uae(),s=d1(),i=Ms(),o=ZO(),l=RU(),d=1,u="[object Arguments]",p="[object Array]",m="[object Object]",h=Object.prototype,x=h.hasOwnProperty;function y(N,v,j,E,C,A){var S=i(N),_=i(v),O=S?p:s(N),D=_?p:s(v);O=O==u?m:O,D=D==u?m:D;var k=O==m,M=D==m,F=O==D;if(F&&o(N)){if(!o(v))return!1;S=!0,k=!1}if(F&&!k)return A||(A=new e),S||l(N)?t(N,v,j,E,C,A):r(N,v,O,j,E,C,A);if(!(j&d)){var $=k&&x.call(N,"__wrapped__"),B=M&&x.call(v,"__wrapped__");if($||B){var P=$?N.value():N,W=B?v.value():v;return A||(A=new e),C(P,W,j,E,A)}}return F?(A||(A=new e),a(N,v,j,E,C,A)):!1}return Tj=y,Tj}var Oj,jI;function nk(){if(jI)return Oj;jI=1;var e=hae(),t=Uo();function r(a,s,i,o,l){return a===s?!0:a==null||s==null||!t(a)&&!t(s)?a!==a&&s!==s:e(a,s,i,o,r,l)}return Oj=r,Oj}var kj,wI;function gae(){if(wI)return kj;wI=1;var e=WO(),t=nk(),r=1,a=2;function s(i,o,l,d){var u=l.length,p=u,m=!d;if(i==null)return!p;for(i=Object(i);u--;){var h=l[u];if(m&&h[2]?h[1]!==i[h[0]]:!(h[0]in i))return!1}for(;++u<p;){h=l[u];var x=h[0],y=i[x],N=h[1];if(m&&h[2]){if(y===void 0&&!(x in i))return!1}else{var v=new e;if(d)var j=d(y,N,x,i,o,v);if(!(j===void 0?t(N,y,r|a,d,v):j))return!1}}return!0}return kj=s,kj}var Rj,EI;function LU(){if(EI)return Rj;EI=1;var e=Ho();function t(r){return r===r&&!e(r)}return Rj=t,Rj}var Pj,AI;function xae(){if(AI)return Pj;AI=1;var e=LU(),t=Rp();function r(a){for(var s=t(a),i=s.length;i--;){var o=s[i],l=a[o];s[i]=[o,l,e(l)]}return s}return Pj=r,Pj}var Dj,CI;function $U(){if(CI)return Dj;CI=1;function e(t,r){return function(a){return a==null?!1:a[t]===r&&(r!==void 0||t in Object(a))}}return Dj=e,Dj}var Ij,_I;function bae(){if(_I)return Ij;_I=1;var e=gae(),t=xae(),r=$U();function a(s){var i=t(s);return i.length==1&&i[0][2]?r(i[0][0],i[0][1]):function(o){return o===s||e(o,s,i)}}return Ij=a,Ij}var Mj,TI;function yae(){if(TI)return Mj;TI=1;function e(t,r){return t!=null&&r in Object(t)}return Mj=e,Mj}var Lj,OI;function vae(){if(OI)return Lj;OI=1;var e=t1(),t=QO(),r=Ms(),a=JO(),s=ek(),i=yg();function o(l,d,u){d=e(d,l);for(var p=-1,m=d.length,h=!1;++p<m;){var x=i(d[p]);if(!(h=l!=null&&u(l,x)))break;l=l[x]}return h||++p!=m?h:(m=l==null?0:l.length,!!m&&s(m)&&a(x,m)&&(r(l)||t(l)))}return Lj=o,Lj}var $j,kI;function Nae(){if(kI)return $j;kI=1;var e=yae(),t=vae();function r(a,s){return a!=null&&t(a,s,e)}return $j=r,$j}var Fj,RI;function Sae(){if(RI)return Fj;RI=1;var e=nk(),t=eU(),r=Nae(),a=$O(),s=LU(),i=$U(),o=yg(),l=1,d=2;function u(p,m){return a(p)&&s(m)?i(o(p),m):function(h){var x=t(h,p);return x===void 0&&x===m?r(h,p):e(m,x,l|d)}}return Fj=u,Fj}var Bj,PI;function Pp(){if(PI)return Bj;PI=1;function e(t){return t}return Bj=e,Bj}var Uj,DI;function jae(){if(DI)return Uj;DI=1;function e(t){return function(r){return r?.[t]}}return Uj=e,Uj}var Hj,II;function wae(){if(II)return Hj;II=1;var e=r1();function t(r){return function(a){return e(a,r)}}return Hj=t,Hj}var Gj,MI;function Eae(){if(MI)return Gj;MI=1;var e=jae(),t=wae(),r=$O(),a=yg();function s(i){return r(i)?e(a(i)):t(i)}return Gj=s,Gj}var Kj,LI;function Ml(){if(LI)return Kj;LI=1;var e=bae(),t=Sae(),r=Pp(),a=Ms(),s=Eae();function i(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?a(o)?t(o[0],o[1]):e(o):s(o)}return Kj=i,Kj}var zj,$I;function FU(){if($I)return zj;$I=1;function e(t,r,a,s){for(var i=t.length,o=a+(s?1:-1);s?o--:++o<i;)if(r(t[o],o,t))return o;return-1}return zj=e,zj}var qj,FI;function Aae(){if(FI)return qj;FI=1;function e(t){return t!==t}return qj=e,qj}var Wj,BI;function Cae(){if(BI)return Wj;BI=1;function e(t,r,a){for(var s=a-1,i=t.length;++s<i;)if(t[s]===r)return s;return-1}return Wj=e,Wj}var Vj,UI;function _ae(){if(UI)return Vj;UI=1;var e=FU(),t=Aae(),r=Cae();function a(s,i,o){return i===i?r(s,i,o):e(s,t,o)}return Vj=a,Vj}var Yj,HI;function Tae(){if(HI)return Yj;HI=1;var e=_ae();function t(r,a){var s=r==null?0:r.length;return!!s&&e(r,a,0)>-1}return Yj=t,Yj}var Xj,GI;function Oae(){if(GI)return Xj;GI=1;function e(t,r,a){for(var s=-1,i=t==null?0:t.length;++s<i;)if(a(r,t[s]))return!0;return!1}return Xj=e,Xj}var Qj,KI;function kae(){if(KI)return Qj;KI=1;function e(){}return Qj=e,Qj}var Zj,zI;function Rae(){if(zI)return Zj;zI=1;var e=MU(),t=kae(),r=VO(),a=1/0,s=e&&1/r(new e([,-0]))[1]==a?function(i){return new e(i)}:t;return Zj=s,Zj}var Jj,qI;function Pae(){if(qI)return Jj;qI=1;var e=EU(),t=Tae(),r=Oae(),a=CU(),s=Rae(),i=VO(),o=200;function l(d,u,p){var m=-1,h=t,x=d.length,y=!0,N=[],v=N;if(p)y=!1,h=r;else if(x>=o){var j=u?null:s(d);if(j)return i(j);y=!1,h=a,v=new e}else v=u?[]:N;e:for(;++m<x;){var E=d[m],C=u?u(E):E;if(E=p||E!==0?E:0,y&&C===C){for(var A=v.length;A--;)if(v[A]===C)continue e;u&&v.push(C),N.push(E)}else h(v,C,p)||(v!==N&&v.push(C),N.push(E))}return N}return Jj=l,Jj}var ew,WI;function Dae(){if(WI)return ew;WI=1;var e=Ml(),t=Pae();function r(a,s){return a&&a.length?t(a,e(s,2)):[]}return ew=r,ew}var Iae=Dae();const VI=Vr(Iae);function BU(e,t,r){return t===!0?VI(e,r):Gt(t)?VI(e,t):e}function Fm(e){"@babel/helpers - typeof";return Fm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fm(e)}var Mae=["ref"];function YI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function nc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YI(Object(r),!0).forEach(function(a){u1(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YI(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Lae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function XI(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,HU(a.key),a)}}function $ae(e,t,r){return t&&XI(e.prototype,t),r&&XI(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Fae(e,t,r){return t=hy(t),Bae(e,UU()?Reflect.construct(t,r||[],hy(e).constructor):t.apply(e,r))}function Bae(e,t){if(t&&(Fm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Uae(e)}function Uae(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UU=function(){return!!e})()}function hy(e){return hy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},hy(e)}function Hae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&QC(e,t)}function QC(e,t){return QC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},QC(e,t)}function u1(e,t,r){return t=HU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HU(e){var t=Gae(e,"string");return Fm(t)=="symbol"?t:t+""}function Gae(e,t){if(Fm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Fm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Kae(e,t){if(e==null)return{};var r=zae(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function zae(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function qae(e){return e.value}function Wae(e,t){if(Y.isValidElement(e))return Y.cloneElement(e,t);if(typeof e=="function")return Y.createElement(e,t);t.ref;var r=Kae(t,Mae);return Y.createElement(qO,r)}var QI=1,El=(function(e){function t(){var r;Lae(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=Fae(this,t,[].concat(s)),u1(r,"lastBoundingBox",{width:-1,height:-1}),r}return Hae(t,e),$ae(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();return a.height=this.wrapperNode.offsetHeight,a.width=this.wrapperNode.offsetWidth,a}return null}},{key:"updateBBox",value:function(){var a=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>QI||Math.abs(s.height-this.lastBoundingBox.height)>QI)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,a&&a(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,a&&a(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?nc({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(a){var s=this.props,i=s.layout,o=s.align,l=s.verticalAlign,d=s.margin,u=s.chartWidth,p=s.chartHeight,m,h;if(!a||(a.left===void 0||a.left===null)&&(a.right===void 0||a.right===null))if(o==="center"&&i==="vertical"){var x=this.getBBoxSnapshot();m={left:((u||0)-x.width)/2}}else m=o==="right"?{right:d&&d.right||0}:{left:d&&d.left||0};if(!a||(a.top===void 0||a.top===null)&&(a.bottom===void 0||a.bottom===null))if(l==="middle"){var y=this.getBBoxSnapshot();h={top:((p||0)-y.height)/2}}else h=l==="bottom"?{bottom:d&&d.bottom||0}:{top:d&&d.top||0};return nc(nc({},m),h)}},{key:"render",value:function(){var a=this,s=this.props,i=s.content,o=s.width,l=s.height,d=s.wrapperStyle,u=s.payloadUniqBy,p=s.payload,m=nc(nc({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(d)),d);return Y.createElement("div",{className:"recharts-legend-wrapper",style:m,ref:function(x){a.wrapperNode=x}},Wae(i,nc(nc({},this.props),{},{payload:BU(p,u,qae)})))}}],[{key:"getWithHeight",value:function(a,s){var i=nc(nc({},this.defaultProps),a.props),o=i.layout;return o==="vertical"&&et(a.props.height)?{height:a.props.height}:o==="horizontal"?{width:a.props.width||s}:null}}])})(g.PureComponent);u1(El,"displayName","Legend");u1(El,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var tw,ZI;function Vae(){if(ZI)return tw;ZI=1;var e=_p(),t=QO(),r=Ms(),a=e?e.isConcatSpreadable:void 0;function s(i){return r(i)||t(i)||!!(a&&i&&i[a])}return tw=s,tw}var rw,JI;function ak(){if(JI)return rw;JI=1;var e=YO(),t=Vae();function r(a,s,i,o,l){var d=-1,u=a.length;for(i||(i=t),l||(l=[]);++d<u;){var p=a[d];s>0&&i(p)?s>1?r(p,s-1,i,o,l):e(l,p):o||(l[l.length]=p)}return l}return rw=r,rw}var nw,eM;function Yae(){if(eM)return nw;eM=1;function e(t){return function(r,a,s){for(var i=-1,o=Object(r),l=s(r),d=l.length;d--;){var u=l[t?d:++i];if(a(o[u],u,o)===!1)break}return r}}return nw=e,nw}var aw,tM;function Xae(){if(tM)return aw;tM=1;var e=Yae(),t=e();return aw=t,aw}var sw,rM;function GU(){if(rM)return sw;rM=1;var e=Xae(),t=Rp();function r(a,s){return a&&e(a,s,t)}return sw=r,sw}var iw,nM;function Qae(){if(nM)return iw;nM=1;var e=kp();function t(r,a){return function(s,i){if(s==null)return s;if(!e(s))return r(s,i);for(var o=s.length,l=a?o:-1,d=Object(s);(a?l--:++l<o)&&i(d[l],l,d)!==!1;);return s}}return iw=t,iw}var ow,aM;function sk(){if(aM)return ow;aM=1;var e=GU(),t=Qae(),r=t(e);return ow=r,ow}var lw,sM;function KU(){if(sM)return lw;sM=1;var e=sk(),t=kp();function r(a,s){var i=-1,o=t(a)?Array(a.length):[];return e(a,function(l,d,u){o[++i]=s(l,d,u)}),o}return lw=r,lw}var cw,iM;function Zae(){if(iM)return cw;iM=1;function e(t,r){var a=t.length;for(t.sort(r);a--;)t[a]=t[a].value;return t}return cw=e,cw}var dw,oM;function Jae(){if(oM)return dw;oM=1;var e=Tp();function t(r,a){if(r!==a){var s=r!==void 0,i=r===null,o=r===r,l=e(r),d=a!==void 0,u=a===null,p=a===a,m=e(a);if(!u&&!m&&!l&&r>a||l&&d&&p&&!u&&!m||i&&d&&p||!s&&p||!o)return 1;if(!i&&!l&&!m&&r<a||m&&s&&o&&!i&&!l||u&&s&&o||!d&&o||!p)return-1}return 0}return dw=t,dw}var uw,lM;function ese(){if(lM)return uw;lM=1;var e=Jae();function t(r,a,s){for(var i=-1,o=r.criteria,l=a.criteria,d=o.length,u=s.length;++i<d;){var p=e(o[i],l[i]);if(p){if(i>=u)return p;var m=s[i];return p*(m=="desc"?-1:1)}}return r.index-a.index}return uw=t,uw}var fw,cM;function tse(){if(cM)return fw;cM=1;var e=e1(),t=r1(),r=Ml(),a=KU(),s=Zae(),i=c1(),o=ese(),l=Pp(),d=Ms();function u(p,m,h){m.length?m=e(m,function(N){return d(N)?function(v){return t(v,N.length===1?N[0]:N)}:N}):m=[l];var x=-1;m=e(m,i(r));var y=a(p,function(N,v,j){var E=e(m,function(C){return C(N)});return{criteria:E,index:++x,value:N}});return s(y,function(N,v){return o(N,v,h)})}return fw=u,fw}var mw,dM;function rse(){if(dM)return mw;dM=1;function e(t,r,a){switch(a.length){case 0:return t.call(r);case 1:return t.call(r,a[0]);case 2:return t.call(r,a[0],a[1]);case 3:return t.call(r,a[0],a[1],a[2])}return t.apply(r,a)}return mw=e,mw}var pw,uM;function zU(){if(uM)return pw;uM=1;var e=rse(),t=Math.max;function r(a,s,i){return s=t(s===void 0?a.length-1:s,0),function(){for(var o=arguments,l=-1,d=t(o.length-s,0),u=Array(d);++l<d;)u[l]=o[s+l];l=-1;for(var p=Array(s+1);++l<s;)p[l]=o[l];return p[s]=i(u),e(a,this,p)}}return pw=r,pw}var hw,fM;function nse(){if(fM)return hw;fM=1;function e(t){return function(){return t}}return hw=e,hw}var gw,mM;function qU(){if(mM)return gw;mM=1;var e=uf(),t=(function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}})();return gw=t,gw}var xw,pM;function ase(){if(pM)return xw;pM=1;var e=nse(),t=qU(),r=Pp(),a=t?function(s,i){return t(s,"toString",{configurable:!0,enumerable:!1,value:e(i),writable:!0})}:r;return xw=a,xw}var bw,hM;function sse(){if(hM)return bw;hM=1;var e=800,t=16,r=Date.now;function a(s){var i=0,o=0;return function(){var l=r(),d=t-(l-o);if(o=l,d>0){if(++i>=e)return arguments[0]}else i=0;return s.apply(void 0,arguments)}}return bw=a,bw}var yw,gM;function WU(){if(gM)return yw;gM=1;var e=ase(),t=sse(),r=t(e);return yw=r,yw}var vw,xM;function ise(){if(xM)return vw;xM=1;var e=Pp(),t=zU(),r=WU();function a(s,i){return r(t(s,i,e),s+"")}return vw=a,vw}var Nw,bM;function f1(){if(bM)return Nw;bM=1;var e=Xv(),t=kp(),r=JO(),a=Ho();function s(i,o,l){if(!a(l))return!1;var d=typeof o;return(d=="number"?t(l)&&r(o,l.length):d=="string"&&o in l)?e(l[o],i):!1}return Nw=s,Nw}var Sw,yM;function ose(){if(yM)return Sw;yM=1;var e=ak(),t=tse(),r=ise(),a=f1(),s=r(function(i,o){if(i==null)return[];var l=o.length;return l>1&&a(i,o[0],o[1])?o=[]:l>2&&a(o[0],o[1],o[2])&&(o=[o[0]]),t(i,e(o,1),[])});return Sw=s,Sw}var lse=ose();const ik=Vr(lse);function _0(e){"@babel/helpers - typeof";return _0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_0(e)}function ZC(){return ZC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ZC.apply(this,arguments)}function cse(e,t){return mse(e)||fse(e,t)||use(e,t)||dse()}function dse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function use(e,t){if(e){if(typeof e=="string")return vM(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vM(e,t)}}function vM(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function fse(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(p){u=!0,s=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function mse(e){if(Array.isArray(e))return e}function NM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function jw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NM(Object(r),!0).forEach(function(a){pse(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NM(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function pse(e,t,r){return t=hse(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hse(e){var t=gse(e,"string");return _0(t)=="symbol"?t:t+""}function gse(e,t){if(_0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(_0(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xse(e){return Array.isArray(e)&&va(e[0])&&va(e[1])?e.join(" ~ "):e}var bse=function(t){var r=t.separator,a=r===void 0?" : ":r,s=t.contentStyle,i=s===void 0?{}:s,o=t.itemStyle,l=o===void 0?{}:o,d=t.labelStyle,u=d===void 0?{}:d,p=t.payload,m=t.formatter,h=t.itemSorter,x=t.wrapperClassName,y=t.labelClassName,N=t.label,v=t.labelFormatter,j=t.accessibilityLayer,E=j===void 0?!1:j,C=function(){if(p&&p.length){var $={padding:0,margin:0},B=(h?ik(p,h):p).map(function(P,W){if(P.type==="none")return null;var K=jw({display:"block",paddingTop:4,paddingBottom:4,color:P.color||"#000"},l),G=P.formatter||m||xse,U=P.value,te=P.name,re=U,q=te;if(G&&re!=null&&q!=null){var L=G(U,te,P,W,p);if(Array.isArray(L)){var H=cse(L,2);re=H[0],q=H[1]}else re=L}return Y.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(W),style:K},va(q)?Y.createElement("span",{className:"recharts-tooltip-item-name"},q):null,va(q)?Y.createElement("span",{className:"recharts-tooltip-item-separator"},a):null,Y.createElement("span",{className:"recharts-tooltip-item-value"},re),Y.createElement("span",{className:"recharts-tooltip-item-unit"},P.unit||""))});return Y.createElement("ul",{className:"recharts-tooltip-item-list",style:$},B)}return null},A=jw({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),S=jw({margin:0},u),_=!Qt(N),O=_?N:"",D=ar("recharts-default-tooltip",x),k=ar("recharts-tooltip-label",y);_&&v&&p!==void 0&&p!==null&&(O=v(N,p));var M=E?{role:"status","aria-live":"assertive"}:{};return Y.createElement("div",ZC({className:D,style:A},M),Y.createElement("p",{className:k,style:S},Y.isValidElement(O)?O:"".concat(O)),C())};function T0(e){"@babel/helpers - typeof";return T0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T0(e)}function Gx(e,t,r){return t=yse(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yse(e){var t=vse(e,"string");return T0(t)=="symbol"?t:t+""}function vse(e,t){if(T0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(T0(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Nh="recharts-tooltip-wrapper",Nse={visibility:"hidden"};function Sse(e){var t=e.coordinate,r=e.translateX,a=e.translateY;return ar(Nh,Gx(Gx(Gx(Gx({},"".concat(Nh,"-right"),et(r)&&t&&et(t.x)&&r>=t.x),"".concat(Nh,"-left"),et(r)&&t&&et(t.x)&&r<t.x),"".concat(Nh,"-bottom"),et(a)&&t&&et(t.y)&&a>=t.y),"".concat(Nh,"-top"),et(a)&&t&&et(t.y)&&a<t.y))}function SM(e){var t=e.allowEscapeViewBox,r=e.coordinate,a=e.key,s=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,d=e.viewBox,u=e.viewBoxDimension;if(i&&et(i[a]))return i[a];var p=r[a]-l-s,m=r[a]+s;if(t[a])return o[a]?p:m;if(o[a]){var h=p,x=d[a];return h<x?Math.max(m,d[a]):Math.max(p,d[a])}var y=m+l,N=d[a]+u;return y>N?Math.max(p,d[a]):Math.max(m,d[a])}function jse(e){var t=e.translateX,r=e.translateY,a=e.useTranslate3d;return{transform:a?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function wse(e){var t=e.allowEscapeViewBox,r=e.coordinate,a=e.offsetTopLeft,s=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,d=e.viewBox,u,p,m;return o.height>0&&o.width>0&&r?(p=SM({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:d,viewBoxDimension:d.width}),m=SM({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:d,viewBoxDimension:d.height}),u=jse({translateX:p,translateY:m,useTranslate3d:l})):u=Nse,{cssProperties:u,cssClasses:Sse({translateX:p,translateY:m,coordinate:r})}}function Bm(e){"@babel/helpers - typeof";return Bm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bm(e)}function jM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function wM(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jM(Object(r),!0).forEach(function(a){e_(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jM(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Ese(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ase(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,YU(a.key),a)}}function Cse(e,t,r){return t&&Ase(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _se(e,t,r){return t=gy(t),Tse(e,VU()?Reflect.construct(t,r||[],gy(e).constructor):t.apply(e,r))}function Tse(e,t){if(t&&(Bm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ose(e)}function Ose(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function VU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VU=function(){return!!e})()}function gy(e){return gy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},gy(e)}function kse(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&JC(e,t)}function JC(e,t){return JC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},JC(e,t)}function e_(e,t,r){return t=YU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YU(e){var t=Rse(e,"string");return Bm(t)=="symbol"?t:t+""}function Rse(e,t){if(Bm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Bm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var EM=1,Pse=(function(e){function t(){var r;Ese(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=_se(this,t,[].concat(s)),e_(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),e_(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,d,u,p;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(d=r.props.coordinate)===null||d===void 0?void 0:d.x)!==null&&l!==void 0?l:0,y:(u=(p=r.props.coordinate)===null||p===void 0?void 0:p.y)!==null&&u!==void 0?u:0}})}}),r}return kse(t,e),Cse(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();(Math.abs(a.width-this.state.lastBoundingBox.width)>EM||Math.abs(a.height-this.state.lastBoundingBox.height)>EM)&&this.setState({lastBoundingBox:{width:a.width,height:a.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var a,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var a=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,d=s.animationEasing,u=s.children,p=s.coordinate,m=s.hasPayload,h=s.isAnimationActive,x=s.offset,y=s.position,N=s.reverseDirection,v=s.useTranslate3d,j=s.viewBox,E=s.wrapperStyle,C=wse({allowEscapeViewBox:o,coordinate:p,offsetTopLeft:x,position:y,reverseDirection:N,tooltipBox:this.state.lastBoundingBox,useTranslate3d:v,viewBox:j}),A=C.cssClasses,S=C.cssProperties,_=wM(wM({transition:h&&i?"transform ".concat(l,"ms ").concat(d):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&m?"visible":"hidden",position:"absolute",top:0,left:0},E);return Y.createElement("div",{tabIndex:-1,className:A,style:_,ref:function(D){a.wrapperNode=D}},u)}}])})(g.PureComponent),Dse=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Mo={isSsr:Dse()};function Um(e){"@babel/helpers - typeof";return Um=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Um(e)}function AM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function CM(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AM(Object(r),!0).forEach(function(a){ok(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AM(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Ise(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mse(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,QU(a.key),a)}}function Lse(e,t,r){return t&&Mse(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function $se(e,t,r){return t=xy(t),Fse(e,XU()?Reflect.construct(t,r||[],xy(e).constructor):t.apply(e,r))}function Fse(e,t){if(t&&(Um(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bse(e)}function Bse(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XU=function(){return!!e})()}function xy(e){return xy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},xy(e)}function Use(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&t_(e,t)}function t_(e,t){return t_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},t_(e,t)}function ok(e,t,r){return t=QU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QU(e){var t=Hse(e,"string");return Um(t)=="symbol"?t:t+""}function Hse(e,t){if(Um(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Um(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Gse(e){return e.dataKey}function Kse(e,t){return Y.isValidElement(e)?Y.cloneElement(e,t):typeof e=="function"?Y.createElement(e,t):Y.createElement(bse,t)}var en=(function(e){function t(){return Ise(this,t),$se(this,t,arguments)}return Use(t,e),Lse(t,[{key:"render",value:function(){var a=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,d=s.animationEasing,u=s.content,p=s.coordinate,m=s.filterNull,h=s.isAnimationActive,x=s.offset,y=s.payload,N=s.payloadUniqBy,v=s.position,j=s.reverseDirection,E=s.useTranslate3d,C=s.viewBox,A=s.wrapperStyle,S=y??[];m&&S.length&&(S=BU(y.filter(function(O){return O.value!=null&&(O.hide!==!0||a.props.includeHidden)}),N,Gse));var _=S.length>0;return Y.createElement(Pse,{allowEscapeViewBox:o,animationDuration:l,animationEasing:d,isAnimationActive:h,active:i,coordinate:p,hasPayload:_,offset:x,position:v,reverseDirection:j,useTranslate3d:E,viewBox:C,wrapperStyle:A},Kse(u,CM(CM({},this.props),{},{payload:S})))}}])})(g.PureComponent);ok(en,"displayName","Tooltip");ok(en,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Mo.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var ww,_M;function zse(){if(_M)return ww;_M=1;var e=Bo(),t=function(){return e.Date.now()};return ww=t,ww}var Ew,TM;function qse(){if(TM)return Ew;TM=1;var e=/\s/;function t(r){for(var a=r.length;a--&&e.test(r.charAt(a)););return a}return Ew=t,Ew}var Aw,OM;function Wse(){if(OM)return Aw;OM=1;var e=qse(),t=/^\s+/;function r(a){return a&&a.slice(0,e(a)+1).replace(t,"")}return Aw=r,Aw}var Cw,kM;function ZU(){if(kM)return Cw;kM=1;var e=Wse(),t=Ho(),r=Tp(),a=NaN,s=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function d(u){if(typeof u=="number")return u;if(r(u))return a;if(t(u)){var p=typeof u.valueOf=="function"?u.valueOf():u;u=t(p)?p+"":p}if(typeof u!="string")return u===0?u:+u;u=e(u);var m=i.test(u);return m||o.test(u)?l(u.slice(2),m?2:8):s.test(u)?a:+u}return Cw=d,Cw}var _w,RM;function Vse(){if(RM)return _w;RM=1;var e=Ho(),t=zse(),r=ZU(),a="Expected a function",s=Math.max,i=Math.min;function o(l,d,u){var p,m,h,x,y,N,v=0,j=!1,E=!1,C=!0;if(typeof l!="function")throw new TypeError(a);d=r(d)||0,e(u)&&(j=!!u.leading,E="maxWait"in u,h=E?s(r(u.maxWait)||0,d):h,C="trailing"in u?!!u.trailing:C);function A(B){var P=p,W=m;return p=m=void 0,v=B,x=l.apply(W,P),x}function S(B){return v=B,y=setTimeout(D,d),j?A(B):x}function _(B){var P=B-N,W=B-v,K=d-P;return E?i(K,h-W):K}function O(B){var P=B-N,W=B-v;return N===void 0||P>=d||P<0||E&&W>=h}function D(){var B=t();if(O(B))return k(B);y=setTimeout(D,_(B))}function k(B){return y=void 0,C&&p?A(B):(p=m=void 0,x)}function M(){y!==void 0&&clearTimeout(y),v=0,p=N=m=y=void 0}function F(){return y===void 0?x:k(t())}function $(){var B=t(),P=O(B);if(p=arguments,m=this,N=B,P){if(y===void 0)return S(N);if(E)return clearTimeout(y),y=setTimeout(D,d),A(N)}return y===void 0&&(y=setTimeout(D,d)),x}return $.cancel=M,$.flush=F,$}return _w=o,_w}var Tw,PM;function Yse(){if(PM)return Tw;PM=1;var e=Vse(),t=Ho(),r="Expected a function";function a(s,i,o){var l=!0,d=!0;if(typeof s!="function")throw new TypeError(r);return t(o)&&(l="leading"in o?!!o.leading:l,d="trailing"in o?!!o.trailing:d),e(s,i,{leading:l,maxWait:i,trailing:d})}return Tw=a,Tw}var Xse=Yse();const JU=Vr(Xse);function O0(e){"@babel/helpers - typeof";return O0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O0(e)}function DM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Kx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DM(Object(r),!0).forEach(function(a){Qse(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DM(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Qse(e,t,r){return t=Zse(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zse(e){var t=Jse(e,"string");return O0(t)=="symbol"?t:t+""}function Jse(e,t){if(O0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(O0(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eie(e,t){return aie(e)||nie(e,t)||rie(e,t)||tie()}function tie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rie(e,t){if(e){if(typeof e=="string")return IM(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return IM(e,t)}}function IM(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function nie(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(p){u=!0,s=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function aie(e){if(Array.isArray(e))return e}var xa=g.forwardRef(function(e,t){var r=e.aspect,a=e.initialDimension,s=a===void 0?{width:-1,height:-1}:a,i=e.width,o=i===void 0?"100%":i,l=e.height,d=l===void 0?"100%":l,u=e.minWidth,p=u===void 0?0:u,m=e.minHeight,h=e.maxHeight,x=e.children,y=e.debounce,N=y===void 0?0:y,v=e.id,j=e.className,E=e.onResize,C=e.style,A=C===void 0?{}:C,S=g.useRef(null),_=g.useRef();_.current=E,g.useImperativeHandle(t,function(){return Object.defineProperty(S.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),S.current},configurable:!0})});var O=g.useState({containerWidth:s.width,containerHeight:s.height}),D=eie(O,2),k=D[0],M=D[1],F=g.useCallback(function(B,P){M(function(W){var K=Math.round(B),G=Math.round(P);return W.containerWidth===K&&W.containerHeight===G?W:{containerWidth:K,containerHeight:G}})},[]);g.useEffect(function(){var B=function(te){var re,q=te[0].contentRect,L=q.width,H=q.height;F(L,H),(re=_.current)===null||re===void 0||re.call(_,L,H)};N>0&&(B=JU(B,N,{trailing:!0,leading:!1}));var P=new ResizeObserver(B),W=S.current.getBoundingClientRect(),K=W.width,G=W.height;return F(K,G),P.observe(S.current),function(){P.disconnect()}},[F,N]);var $=g.useMemo(function(){var B=k.containerWidth,P=k.containerHeight;if(B<0||P<0)return null;Io(Lu(o)||Lu(d),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,d),Io(!r||r>0,"The aspect(%s) must be greater than zero.",r);var W=Lu(o)?B:o,K=Lu(d)?P:d;r&&r>0&&(W?K=W/r:K&&(W=K*r),h&&K>h&&(K=h)),Io(W>0||K>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,W,K,o,d,p,m,r);var G=!Array.isArray(x)&&Sc(x.type).endsWith("Chart");return Y.Children.map(x,function(U){return Y.isValidElement(U)?g.cloneElement(U,Kx({width:W,height:K},G?{style:Kx({height:"100%",width:"100%",maxHeight:K,maxWidth:W},U.props.style)}:{})):U})},[r,x,d,h,m,p,k,o]);return Y.createElement("div",{id:v?"".concat(v):void 0,className:ar("recharts-responsive-container",j),style:Kx(Kx({},A),{},{width:o,height:d,minWidth:p,minHeight:m,maxHeight:h}),ref:S},$)}),Ji=function(t){return null};Ji.displayName="Cell";function k0(e){"@babel/helpers - typeof";return k0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k0(e)}function MM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function r_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MM(Object(r),!0).forEach(function(a){sie(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MM(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function sie(e,t,r){return t=iie(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iie(e){var t=oie(e,"string");return k0(t)=="symbol"?t:t+""}function oie(e,t){if(k0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(k0(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Uf={widthCache:{},cacheCount:0},lie=2e3,cie={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},LM="recharts_measurement_span";function die(e){var t=r_({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var vm=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Mo.isSsr)return{width:0,height:0};var a=die(r),s=JSON.stringify({text:t,copyStyle:a});if(Uf.widthCache[s])return Uf.widthCache[s];try{var i=document.getElementById(LM);i||(i=document.createElement("span"),i.setAttribute("id",LM),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=r_(r_({},cie),a);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),d={width:l.width,height:l.height};return Uf.widthCache[s]=d,++Uf.cacheCount>lie&&(Uf.cacheCount=0,Uf.widthCache={}),d}catch{return{width:0,height:0}}},uie=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function R0(e){"@babel/helpers - typeof";return R0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R0(e)}function by(e,t){return hie(e)||pie(e,t)||mie(e,t)||fie()}function fie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mie(e,t){if(e){if(typeof e=="string")return $M(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $M(e,t)}}function $M(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function pie(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(p){u=!0,s=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function hie(e){if(Array.isArray(e))return e}function gie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FM(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,bie(a.key),a)}}function xie(e,t,r){return t&&FM(e.prototype,t),r&&FM(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function bie(e){var t=yie(e,"string");return R0(t)=="symbol"?t:t+""}function yie(e,t){if(R0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(R0(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var BM=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,UM=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,vie=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Nie=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,e9={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Sie=Object.keys(e9),im="NaN";function jie(e,t){return e*e9[t]}var zx=(function(){function e(t,r){gie(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!vie.test(r)&&(this.num=NaN,this.unit=""),Sie.includes(r)&&(this.num=jie(t,r),this.unit="px")}return xie(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var a,s=(a=Nie.exec(r))!==null&&a!==void 0?a:[],i=by(s,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])})();function t9(e){if(e.includes(im))return im;for(var t=e;t.includes("*")||t.includes("/");){var r,a=(r=BM.exec(t))!==null&&r!==void 0?r:[],s=by(a,4),i=s[1],o=s[2],l=s[3],d=zx.parse(i??""),u=zx.parse(l??""),p=o==="*"?d.multiply(u):d.divide(u);if(p.isNaN())return im;t=t.replace(BM,p.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var m,h=(m=UM.exec(t))!==null&&m!==void 0?m:[],x=by(h,4),y=x[1],N=x[2],v=x[3],j=zx.parse(y??""),E=zx.parse(v??""),C=N==="+"?j.add(E):j.subtract(E);if(C.isNaN())return im;t=t.replace(UM,C.toString())}return t}var HM=/\(([^()]*)\)/;function wie(e){for(var t=e;t.includes("(");){var r=HM.exec(t),a=by(r,2),s=a[1];t=t.replace(HM,t9(s))}return t}function Eie(e){var t=e.replace(/\s+/g,"");return t=wie(t),t=t9(t),t}function Aie(e){try{return Eie(e)}catch{return im}}function Ow(e){var t=Aie(e.slice(5,-1));return t===im?"":t}var Cie=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],_ie=["dx","dy","angle","className","breakAll"];function n_(){return n_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},n_.apply(this,arguments)}function GM(e,t){if(e==null)return{};var r=Tie(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Tie(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function KM(e,t){return Pie(e)||Rie(e,t)||kie(e,t)||Oie()}function Oie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kie(e,t){if(e){if(typeof e=="string")return zM(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zM(e,t)}}function zM(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Rie(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(p){u=!0,s=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Pie(e){if(Array.isArray(e))return e}var r9=/[ \f\n\r\t\v\u2028\u2029]+/,n9=function(t){var r=t.children,a=t.breakAll,s=t.style;try{var i=[];Qt(r)||(a?i=r.toString().split(""):i=r.toString().split(r9));var o=i.map(function(d){return{word:d,width:vm(d,s).width}}),l=a?0:vm("",s).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},Die=function(t,r,a,s,i){var o=t.maxLines,l=t.children,d=t.style,u=t.breakAll,p=et(o),m=l,h=function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return W.reduce(function(K,G){var U=G.word,te=G.width,re=K[K.length-1];if(re&&(s==null||i||re.width+te+a<Number(s)))re.words.push(U),re.width+=te+a;else{var q={words:[U],width:te};K.push(q)}return K},[])},x=h(r),y=function(W){return W.reduce(function(K,G){return K.width>G.width?K:G})};if(!p)return x;for(var N="",v=function(W){var K=m.slice(0,W),G=n9({breakAll:u,style:d,children:K+N}).wordsWithComputedWidth,U=h(G),te=U.length>o||y(U).width>Number(s);return[te,U]},j=0,E=m.length-1,C=0,A;j<=E&&C<=m.length-1;){var S=Math.floor((j+E)/2),_=S-1,O=v(_),D=KM(O,2),k=D[0],M=D[1],F=v(S),$=KM(F,1),B=$[0];if(!k&&!B&&(j=S+1),k&&B&&(E=S-1),!k&&B){A=M;break}C++}return A||x},qM=function(t){var r=Qt(t)?[]:t.toString().split(r9);return[{words:r}]},Iie=function(t){var r=t.width,a=t.scaleToFit,s=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((r||a)&&!Mo.isSsr){var d,u,p=n9({breakAll:o,children:s,style:i});if(p){var m=p.wordsWithComputedWidth,h=p.spaceWidth;d=m,u=h}else return qM(s);return Die({breakAll:o,children:s,maxLines:l,style:i},d,u,r,a)}return qM(s)},WM="#808080",Ju=function(t){var r=t.x,a=r===void 0?0:r,s=t.y,i=s===void 0?0:s,o=t.lineHeight,l=o===void 0?"1em":o,d=t.capHeight,u=d===void 0?"0.71em":d,p=t.scaleToFit,m=p===void 0?!1:p,h=t.textAnchor,x=h===void 0?"start":h,y=t.verticalAnchor,N=y===void 0?"end":y,v=t.fill,j=v===void 0?WM:v,E=GM(t,Cie),C=g.useMemo(function(){return Iie({breakAll:E.breakAll,children:E.children,maxLines:E.maxLines,scaleToFit:m,style:E.style,width:E.width})},[E.breakAll,E.children,E.maxLines,m,E.style,E.width]),A=E.dx,S=E.dy,_=E.angle,O=E.className,D=E.breakAll,k=GM(E,_ie);if(!va(a)||!va(i))return null;var M=a+(et(A)?A:0),F=i+(et(S)?S:0),$;switch(N){case"start":$=Ow("calc(".concat(u,")"));break;case"middle":$=Ow("calc(".concat((C.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:$=Ow("calc(".concat(C.length-1," * -").concat(l,")"));break}var B=[];if(m){var P=C[0].width,W=E.width;B.push("scale(".concat((et(W)?W/P:1)/P,")"))}return _&&B.push("rotate(".concat(_,", ").concat(M,", ").concat(F,")")),B.length&&(k.transform=B.join(" ")),Y.createElement("text",n_({},Rt(k,!0),{x:M,y:F,className:ar("recharts-text",O),textAnchor:x,fill:j.includes("url")?WM:j}),C.map(function(K,G){var U=K.words.join(D?"":" ");return Y.createElement("tspan",{x:M,dy:G===0?$:l,key:"".concat(U,"-").concat(G)},U)}))};function $d(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Mie(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function lk(e){let t,r,a;e.length!==2?(t=$d,r=(l,d)=>$d(e(l),d),a=(l,d)=>e(l)-d):(t=e===$d||e===Mie?e:Lie,r=e,a=e);function s(l,d,u=0,p=l.length){if(u<p){if(t(d,d)!==0)return p;do{const m=u+p>>>1;r(l[m],d)<0?u=m+1:p=m}while(u<p)}return u}function i(l,d,u=0,p=l.length){if(u<p){if(t(d,d)!==0)return p;do{const m=u+p>>>1;r(l[m],d)<=0?u=m+1:p=m}while(u<p)}return u}function o(l,d,u=0,p=l.length){const m=s(l,d,u,p-1);return m>u&&a(l[m-1],d)>-a(l[m],d)?m-1:m}return{left:s,center:o,right:i}}function Lie(){return 0}function a9(e){return e===null?NaN:+e}function*$ie(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const Fie=lk($d),vg=Fie.right;lk(a9).center;class Hm{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const r=this._partials;let a=0;for(let s=0;s<this._n&&s<32;s++){const i=r[s],o=t+i,l=Math.abs(t)<Math.abs(i)?t-(o-i):i-(o-t);l&&(r[a++]=l),t=o}return r[a]=t,this._n=a+1,this}valueOf(){const t=this._partials;let r=this._n,a,s,i,o=0;if(r>0){for(o=t[--r];r>0&&(a=o,s=t[--r],o=a+s,i=s-(o-a),!i););r>0&&(i<0&&t[r-1]<0||i>0&&t[r-1]>0)&&(s=i*2,a=o+s,s==a-o&&(o=a))}return o}}class VM extends Map{constructor(t,r=Hie){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[a,s]of t)this.set(a,s)}get(t){return super.get(YM(this,t))}has(t){return super.has(YM(this,t))}set(t,r){return super.set(Bie(this,t),r)}delete(t){return super.delete(Uie(this,t))}}function YM({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):r}function Bie({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):(e.set(a,r),r)}function Uie({_intern:e,_key:t},r){const a=t(r);return e.has(a)&&(r=e.get(a),e.delete(a)),r}function Hie(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Gie(e=$d){if(e===$d)return s9;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const a=e(t,r);return a||a===0?a:(e(r,r)===0)-(e(t,t)===0)}}function s9(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Kie=Math.sqrt(50),zie=Math.sqrt(10),qie=Math.sqrt(2);function yy(e,t,r){const a=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(a)),i=a/Math.pow(10,s),o=i>=Kie?10:i>=zie?5:i>=qie?2:1;let l,d,u;return s<0?(u=Math.pow(10,-s)/o,l=Math.round(e*u),d=Math.round(t*u),l/u<e&&++l,d/u>t&&--d,u=-u):(u=Math.pow(10,s)*o,l=Math.round(e/u),d=Math.round(t/u),l*u<e&&++l,d*u>t&&--d),d<l&&.5<=r&&r<2?yy(e,t,r*2):[l,d,u]}function a_(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const a=t<e,[s,i,o]=a?yy(t,e,r):yy(e,t,r);if(!(i>=s))return[];const l=i-s+1,d=new Array(l);if(a)if(o<0)for(let u=0;u<l;++u)d[u]=(i-u)/-o;else for(let u=0;u<l;++u)d[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)d[u]=(s+u)/-o;else for(let u=0;u<l;++u)d[u]=(s+u)*o;return d}function s_(e,t,r){return t=+t,e=+e,r=+r,yy(e,t,r)[2]}function i_(e,t,r){t=+t,e=+e,r=+r;const a=t<e,s=a?s_(t,e,r):s_(e,t,r);return(a?-1:1)*(s<0?1/-s:s)}function XM(e,t){let r;for(const a of e)a!=null&&(r<a||r===void 0&&a>=a)&&(r=a);return r}function QM(e,t){let r;for(const a of e)a!=null&&(r>a||r===void 0&&a>=a)&&(r=a);return r}function i9(e,t,r=0,a=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),a=Math.floor(Math.min(e.length-1,a)),!(r<=t&&t<=a))return e;for(s=s===void 0?s9:Gie(s);a>r;){if(a-r>600){const d=a-r+1,u=t-r+1,p=Math.log(d),m=.5*Math.exp(2*p/3),h=.5*Math.sqrt(p*m*(d-m)/d)*(u-d/2<0?-1:1),x=Math.max(r,Math.floor(t-u*m/d+h)),y=Math.min(a,Math.floor(t+(d-u)*m/d+h));i9(e,t,x,y,s)}const i=e[t];let o=r,l=a;for(Sh(e,r,t),s(e[a],i)>0&&Sh(e,r,a);o<l;){for(Sh(e,o,l),++o,--l;s(e[o],i)<0;)++o;for(;s(e[l],i)>0;)--l}s(e[r],i)===0?Sh(e,r,l):(++l,Sh(e,l,a)),l<=t&&(r=l+1),t<=l&&(a=l-1)}return e}function Sh(e,t,r){const a=e[t];e[t]=e[r],e[r]=a}function Wie(e,t,r){if(e=Float64Array.from($ie(e)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return QM(e);if(t>=1)return XM(e);var a,s=(a-1)*t,i=Math.floor(s),o=XM(i9(e,i).subarray(0,i+1)),l=QM(e.subarray(i+1));return o+(l-o)*(s-i)}}function Vie(e,t,r=a9){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+r(e[0],0,e);if(t>=1)return+r(e[a-1],a-1,e);var a,s=(a-1)*t,i=Math.floor(s),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(s-i)}}function*Yie(e){for(const t of e)yield*t}function Xie(e){return Array.from(Yie(e))}function Qie(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var a=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++a<s;)i[a]=e+a*r;return i}function io(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function $c(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const o_=Symbol("implicit");function ck(){var e=new VM,t=[],r=[],a=o_;function s(i){let o=e.get(i);if(o===void 0){if(a!==o_)return a;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new VM;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return ck(t,r).unknown(a)},io.apply(s,arguments),s}function P0(){var e=ck().unknown(void 0),t=e.domain,r=e.range,a=0,s=1,i,o,l=!1,d=0,u=0,p=.5;delete e.unknown;function m(){var h=t().length,x=s<a,y=x?s:a,N=x?a:s;i=(N-y)/Math.max(1,h-d+u*2),l&&(i=Math.floor(i)),y+=(N-y-i*(h-d))*p,o=i*(1-d),l&&(y=Math.round(y),o=Math.round(o));var v=Qie(h).map(function(j){return y+i*j});return r(x?v.reverse():v)}return e.domain=function(h){return arguments.length?(t(h),m()):t()},e.range=function(h){return arguments.length?([a,s]=h,a=+a,s=+s,m()):[a,s]},e.rangeRound=function(h){return[a,s]=h,a=+a,s=+s,l=!0,m()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(h){return arguments.length?(l=!!h,m()):l},e.padding=function(h){return arguments.length?(d=Math.min(1,u=+h),m()):d},e.paddingInner=function(h){return arguments.length?(d=Math.min(1,h),m()):d},e.paddingOuter=function(h){return arguments.length?(u=+h,m()):u},e.align=function(h){return arguments.length?(p=Math.max(0,Math.min(1,h)),m()):p},e.copy=function(){return P0(t(),[a,s]).round(l).paddingInner(d).paddingOuter(u).align(p)},io.apply(m(),arguments)}function o9(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return o9(t())},e}function f0(){return o9(P0.apply(null,arguments).paddingInner(1))}function dk(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function l9(e,t){var r=Object.create(e.prototype);for(var a in t)r[a]=t[a];return r}function Ng(){}var D0=.7,vy=1/D0,Nm="\\s*([+-]?\\d+)\\s*",I0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Al="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Zie=/^#([0-9a-f]{3,8})$/,Jie=new RegExp(`^rgb\\(${Nm},${Nm},${Nm}\\)$`),eoe=new RegExp(`^rgb\\(${Al},${Al},${Al}\\)$`),toe=new RegExp(`^rgba\\(${Nm},${Nm},${Nm},${I0}\\)$`),roe=new RegExp(`^rgba\\(${Al},${Al},${Al},${I0}\\)$`),noe=new RegExp(`^hsl\\(${I0},${Al},${Al}\\)$`),aoe=new RegExp(`^hsla\\(${I0},${Al},${Al},${I0}\\)$`),ZM={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};dk(Ng,ef,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:JM,formatHex:JM,formatHex8:soe,formatHsl:ioe,formatRgb:eL,toString:eL});function JM(){return this.rgb().formatHex()}function soe(){return this.rgb().formatHex8()}function ioe(){return c9(this).formatHsl()}function eL(){return this.rgb().formatRgb()}function ef(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Zie.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?tL(t):r===3?new Qs(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?qx(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?qx(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Jie.exec(e))?new Qs(t[1],t[2],t[3],1):(t=eoe.exec(e))?new Qs(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=toe.exec(e))?qx(t[1],t[2],t[3],t[4]):(t=roe.exec(e))?qx(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=noe.exec(e))?aL(t[1],t[2]/100,t[3]/100,1):(t=aoe.exec(e))?aL(t[1],t[2]/100,t[3]/100,t[4]):ZM.hasOwnProperty(e)?tL(ZM[e]):e==="transparent"?new Qs(NaN,NaN,NaN,0):null}function tL(e){return new Qs(e>>16&255,e>>8&255,e&255,1)}function qx(e,t,r,a){return a<=0&&(e=t=r=NaN),new Qs(e,t,r,a)}function ooe(e){return e instanceof Ng||(e=ef(e)),e?(e=e.rgb(),new Qs(e.r,e.g,e.b,e.opacity)):new Qs}function Ny(e,t,r,a){return arguments.length===1?ooe(e):new Qs(e,t,r,a??1)}function Qs(e,t,r,a){this.r=+e,this.g=+t,this.b=+r,this.opacity=+a}dk(Qs,Ny,l9(Ng,{brighter(e){return e=e==null?vy:Math.pow(vy,e),new Qs(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?D0:Math.pow(D0,e),new Qs(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Qs(zu(this.r),zu(this.g),zu(this.b),Sy(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rL,formatHex:rL,formatHex8:loe,formatRgb:nL,toString:nL}));function rL(){return`#${$u(this.r)}${$u(this.g)}${$u(this.b)}`}function loe(){return`#${$u(this.r)}${$u(this.g)}${$u(this.b)}${$u((isNaN(this.opacity)?1:this.opacity)*255)}`}function nL(){const e=Sy(this.opacity);return`${e===1?"rgb(":"rgba("}${zu(this.r)}, ${zu(this.g)}, ${zu(this.b)}${e===1?")":`, ${e})`}`}function Sy(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function zu(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function $u(e){return e=zu(e),(e<16?"0":"")+e.toString(16)}function aL(e,t,r,a){return a<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new ko(e,t,r,a)}function c9(e){if(e instanceof ko)return new ko(e.h,e.s,e.l,e.opacity);if(e instanceof Ng||(e=ef(e)),!e)return new ko;if(e instanceof ko)return e;e=e.rgb();var t=e.r/255,r=e.g/255,a=e.b/255,s=Math.min(t,r,a),i=Math.max(t,r,a),o=NaN,l=i-s,d=(i+s)/2;return l?(t===i?o=(r-a)/l+(r<a)*6:r===i?o=(a-t)/l+2:o=(t-r)/l+4,l/=d<.5?i+s:2-i-s,o*=60):l=d>0&&d<1?0:o,new ko(o,l,d,e.opacity)}function coe(e,t,r,a){return arguments.length===1?c9(e):new ko(e,t,r,a??1)}function ko(e,t,r,a){this.h=+e,this.s=+t,this.l=+r,this.opacity=+a}dk(ko,coe,l9(Ng,{brighter(e){return e=e==null?vy:Math.pow(vy,e),new ko(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?D0:Math.pow(D0,e),new ko(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,a=r+(r<.5?r:1-r)*t,s=2*r-a;return new Qs(kw(e>=240?e-240:e+120,s,a),kw(e,s,a),kw(e<120?e+240:e-120,s,a),this.opacity)},clamp(){return new ko(sL(this.h),Wx(this.s),Wx(this.l),Sy(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Sy(this.opacity);return`${e===1?"hsl(":"hsla("}${sL(this.h)}, ${Wx(this.s)*100}%, ${Wx(this.l)*100}%${e===1?")":`, ${e})`}`}}));function sL(e){return e=(e||0)%360,e<0?e+360:e}function Wx(e){return Math.max(0,Math.min(1,e||0))}function kw(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}function doe(e,t,r,a,s){var i=e*e,o=i*e;return((1-3*e+3*i-o)*t+(4-6*i+3*o)*r+(1+3*e+3*i-3*o)*a+o*s)/6}function uoe(e){var t=e.length-1;return function(r){var a=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),s=e[a],i=e[a+1],o=a>0?e[a-1]:2*s-i,l=a<t-1?e[a+2]:2*i-s;return doe((r-a/t)*t,o,s,i,l)}}const uk=e=>()=>e;function foe(e,t){return function(r){return e+r*t}}function moe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(a){return Math.pow(e+a*t,r)}}function poe(e){return(e=+e)==1?d9:function(t,r){return r-t?moe(t,r,e):uk(isNaN(t)?r:t)}}function d9(e,t){var r=t-e;return r?foe(e,r):uk(isNaN(e)?t:e)}const jy=(function e(t){var r=poe(t);function a(s,i){var o=r((s=Ny(s)).r,(i=Ny(i)).r),l=r(s.g,i.g),d=r(s.b,i.b),u=d9(s.opacity,i.opacity);return function(p){return s.r=o(p),s.g=l(p),s.b=d(p),s.opacity=u(p),s+""}}return a.gamma=e,a})(1);function hoe(e){return function(t){var r=t.length,a=new Array(r),s=new Array(r),i=new Array(r),o,l;for(o=0;o<r;++o)l=Ny(t[o]),a[o]=l.r||0,s[o]=l.g||0,i[o]=l.b||0;return a=e(a),s=e(s),i=e(i),l.opacity=1,function(d){return l.r=a(d),l.g=s(d),l.b=i(d),l+""}}}var goe=hoe(uoe);function xoe(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,a=t.slice(),s;return function(i){for(s=0;s<r;++s)a[s]=e[s]*(1-i)+t[s]*i;return a}}function boe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function yoe(e,t){var r=t?t.length:0,a=e?Math.min(r,e.length):0,s=new Array(a),i=new Array(r),o;for(o=0;o<a;++o)s[o]=Dp(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<a;++o)i[o]=s[o](l);return i}}function voe(e,t){var r=new Date;return e=+e,t=+t,function(a){return r.setTime(e*(1-a)+t*a),r}}function To(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Noe(e,t){var r={},a={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=Dp(e[s],t[s]):a[s]=t[s];return function(i){for(s in r)a[s]=r[s](i);return a}}var l_=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Rw=new RegExp(l_.source,"g");function Soe(e){return function(){return e}}function joe(e){return function(t){return e(t)+""}}function u9(e,t){var r=l_.lastIndex=Rw.lastIndex=0,a,s,i,o=-1,l=[],d=[];for(e=e+"",t=t+"";(a=l_.exec(e))&&(s=Rw.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(a=a[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,d.push({i:o,x:To(a,s)})),r=Rw.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?d[0]?joe(d[0].x):Soe(t):(t=d.length,function(u){for(var p=0,m;p<t;++p)l[(m=d[p]).i]=m.x(u);return l.join("")})}function Dp(e,t){var r=typeof t,a;return t==null||r==="boolean"?uk(t):(r==="number"?To:r==="string"?(a=ef(t))?(t=a,jy):u9:t instanceof ef?jy:t instanceof Date?voe:boe(t)?xoe:Array.isArray(t)?yoe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Noe:To)(e,t)}function fk(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}var iL=180/Math.PI,c_={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function f9(e,t,r,a,s,i){var o,l,d;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(d=e*r+t*a)&&(r-=e*d,a-=t*d),(l=Math.sqrt(r*r+a*a))&&(r/=l,a/=l,d/=l),e*a<t*r&&(e=-e,t=-t,d=-d,o=-o),{translateX:s,translateY:i,rotate:Math.atan2(t,e)*iL,skewX:Math.atan(d)*iL,scaleX:o,scaleY:l}}var Vx;function woe(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?c_:f9(t.a,t.b,t.c,t.d,t.e,t.f)}function Eoe(e){return e==null||(Vx||(Vx=document.createElementNS("http://www.w3.org/2000/svg","g")),Vx.setAttribute("transform",e),!(e=Vx.transform.baseVal.consolidate()))?c_:(e=e.matrix,f9(e.a,e.b,e.c,e.d,e.e,e.f))}function m9(e,t,r,a){function s(u){return u.length?u.pop()+" ":""}function i(u,p,m,h,x,y){if(u!==m||p!==h){var N=x.push("translate(",null,t,null,r);y.push({i:N-4,x:To(u,m)},{i:N-2,x:To(p,h)})}else(m||h)&&x.push("translate("+m+t+h+r)}function o(u,p,m,h){u!==p?(u-p>180?p+=360:p-u>180&&(u+=360),h.push({i:m.push(s(m)+"rotate(",null,a)-2,x:To(u,p)})):p&&m.push(s(m)+"rotate("+p+a)}function l(u,p,m,h){u!==p?h.push({i:m.push(s(m)+"skewX(",null,a)-2,x:To(u,p)}):p&&m.push(s(m)+"skewX("+p+a)}function d(u,p,m,h,x,y){if(u!==m||p!==h){var N=x.push(s(x)+"scale(",null,",",null,")");y.push({i:N-4,x:To(u,m)},{i:N-2,x:To(p,h)})}else(m!==1||h!==1)&&x.push(s(x)+"scale("+m+","+h+")")}return function(u,p){var m=[],h=[];return u=e(u),p=e(p),i(u.translateX,u.translateY,p.translateX,p.translateY,m,h),o(u.rotate,p.rotate,m,h),l(u.skewX,p.skewX,m,h),d(u.scaleX,u.scaleY,p.scaleX,p.scaleY,m,h),u=p=null,function(x){for(var y=-1,N=h.length,v;++y<N;)m[(v=h[y]).i]=v.x(x);return m.join("")}}}var Aoe=m9(woe,"px, ","px)","deg)"),Coe=m9(Eoe,", ",")",")"),_oe=1e-12;function oL(e){return((e=Math.exp(e))+1/e)/2}function Toe(e){return((e=Math.exp(e))-1/e)/2}function Ooe(e){return((e=Math.exp(2*e))-1)/(e+1)}const koe=(function e(t,r,a){function s(i,o){var l=i[0],d=i[1],u=i[2],p=o[0],m=o[1],h=o[2],x=p-l,y=m-d,N=x*x+y*y,v,j;if(N<_oe)j=Math.log(h/u)/t,v=function(O){return[l+O*x,d+O*y,u*Math.exp(t*O*j)]};else{var E=Math.sqrt(N),C=(h*h-u*u+a*N)/(2*u*r*E),A=(h*h-u*u-a*N)/(2*h*r*E),S=Math.log(Math.sqrt(C*C+1)-C),_=Math.log(Math.sqrt(A*A+1)-A);j=(_-S)/t,v=function(O){var D=O*j,k=oL(S),M=u/(r*E)*(k*Ooe(t*D+S)-Toe(S));return[l+M*x,d+M*y,u*k/oL(t*D+S)]}}return v.duration=j*1e3*t/Math.SQRT2,v}return s.rho=function(i){var o=Math.max(.001,+i),l=o*o,d=l*l;return e(o,l,d)},s})(Math.SQRT2,2,4);function Roe(e,t){t===void 0&&(t=e,e=Dp);for(var r=0,a=t.length-1,s=t[0],i=new Array(a<0?0:a);r<a;)i[r]=e(s,s=t[++r]);return function(o){var l=Math.max(0,Math.min(a-1,Math.floor(o*=a)));return i[l](o-l)}}function Poe(e){return function(){return e}}function wy(e){return+e}var lL=[0,1];function Rs(e){return e}function d_(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:Poe(isNaN(t)?NaN:.5)}function Doe(e,t){var r;return e>t&&(r=e,e=t,t=r),function(a){return Math.max(e,Math.min(t,a))}}function Ioe(e,t,r){var a=e[0],s=e[1],i=t[0],o=t[1];return s<a?(a=d_(s,a),i=r(o,i)):(a=d_(a,s),i=r(i,o)),function(l){return i(a(l))}}function Moe(e,t,r){var a=Math.min(e.length,t.length)-1,s=new Array(a),i=new Array(a),o=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<a;)s[o]=d_(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var d=vg(e,l,1,a)-1;return i[d](s[d](l))}}function Sg(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function m1(){var e=lL,t=lL,r=Dp,a,s,i,o=Rs,l,d,u;function p(){var h=Math.min(e.length,t.length);return o!==Rs&&(o=Doe(e[0],e[h-1])),l=h>2?Moe:Ioe,d=u=null,m}function m(h){return h==null||isNaN(h=+h)?i:(d||(d=l(e.map(a),t,r)))(a(o(h)))}return m.invert=function(h){return o(s((u||(u=l(t,e.map(a),To)))(h)))},m.domain=function(h){return arguments.length?(e=Array.from(h,wy),p()):e.slice()},m.range=function(h){return arguments.length?(t=Array.from(h),p()):t.slice()},m.rangeRound=function(h){return t=Array.from(h),r=fk,p()},m.clamp=function(h){return arguments.length?(o=h?!0:Rs,p()):o!==Rs},m.interpolate=function(h){return arguments.length?(r=h,p()):r},m.unknown=function(h){return arguments.length?(i=h,m):i},function(h,x){return a=h,s=x,p()}}function mk(){return m1()(Rs,Rs)}function Loe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Ey(e,t){if(!isFinite(e)||e===0)return null;var r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),a=e.slice(0,r);return[a.length>1?a[0]+a.slice(2):a,+e.slice(r+1)]}function Gm(e){return e=Ey(Math.abs(e)),e?e[1]:NaN}function $oe(e,t){return function(r,a){for(var s=r.length,i=[],o=0,l=e[0],d=0;s>0&&l>0&&(d+l+1>a&&(l=Math.max(1,a-d)),i.push(r.substring(s-=l,s+l)),!((d+=l+1)>a));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function Foe(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var Boe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function M0(e){if(!(t=Boe.exec(e)))throw new Error("invalid format: "+e);var t;return new pk({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}M0.prototype=pk.prototype;function pk(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}pk.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Uoe(e){e:for(var t=e.length,r=1,a=-1,s;r<t;++r)switch(e[r]){case".":a=s=r;break;case"0":a===0&&(a=r),s=r;break;default:if(!+e[r])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(s+1):e}var Ay;function Hoe(e,t){var r=Ey(e,t);if(!r)return Ay=void 0,e.toPrecision(t);var a=r[0],s=r[1],i=s-(Ay=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=a.length;return i===o?a:i>o?a+new Array(i-o+1).join("0"):i>0?a.slice(0,i)+"."+a.slice(i):"0."+new Array(1-i).join("0")+Ey(e,Math.max(0,t+i-1))[0]}function cL(e,t){var r=Ey(e,t);if(!r)return e+"";var a=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+a:a.length>s+1?a.slice(0,s+1)+"."+a.slice(s+1):a+new Array(s-a.length+2).join("0")}const dL={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Loe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>cL(e*100,t),r:cL,s:Hoe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function uL(e){return e}var fL=Array.prototype.map,mL=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Goe(e){var t=e.grouping===void 0||e.thousands===void 0?uL:$oe(fL.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?uL:Foe(fL.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function u(m,h){m=M0(m);var x=m.fill,y=m.align,N=m.sign,v=m.symbol,j=m.zero,E=m.width,C=m.comma,A=m.precision,S=m.trim,_=m.type;_==="n"?(C=!0,_="g"):dL[_]||(A===void 0&&(A=12),S=!0,_="g"),(j||x==="0"&&y==="=")&&(j=!0,x="0",y="=");var O=(h&&h.prefix!==void 0?h.prefix:"")+(v==="$"?r:v==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():""),D=(v==="$"?a:/[%p]/.test(_)?o:"")+(h&&h.suffix!==void 0?h.suffix:""),k=dL[_],M=/[defgprs%]/.test(_);A=A===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function F($){var B=O,P=D,W,K,G;if(_==="c")P=k($)+P,$="";else{$=+$;var U=$<0||1/$<0;if($=isNaN($)?d:k(Math.abs($),A),S&&($=Uoe($)),U&&+$==0&&N!=="+"&&(U=!1),B=(U?N==="("?N:l:N==="-"||N==="("?"":N)+B,P=(_==="s"&&!isNaN($)&&Ay!==void 0?mL[8+Ay/3]:"")+P+(U&&N==="("?")":""),M){for(W=-1,K=$.length;++W<K;)if(G=$.charCodeAt(W),48>G||G>57){P=(G===46?s+$.slice(W+1):$.slice(W))+P,$=$.slice(0,W);break}}}C&&!j&&($=t($,1/0));var te=B.length+$.length+P.length,re=te<E?new Array(E-te+1).join(x):"";switch(C&&j&&($=t(re+$,re.length?E-P.length:1/0),re=""),y){case"<":$=B+$+P+re;break;case"=":$=B+re+$+P;break;case"^":$=re.slice(0,te=re.length>>1)+B+$+P+re.slice(te);break;default:$=re+B+$+P;break}return i($)}return F.toString=function(){return m+""},F}function p(m,h){var x=Math.max(-8,Math.min(8,Math.floor(Gm(h)/3)))*3,y=Math.pow(10,-x),N=u((m=M0(m),m.type="f",m),{suffix:mL[8+x/3]});return function(v){return N(y*v)}}return{format:u,formatPrefix:p}}var Yx,hk,p9;Koe({thousands:",",grouping:[3],currency:["$",""]});function Koe(e){return Yx=Goe(e),hk=Yx.format,p9=Yx.formatPrefix,Yx}function zoe(e){return Math.max(0,-Gm(Math.abs(e)))}function qoe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Gm(t)/3)))*3-Gm(Math.abs(e)))}function Woe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Gm(t)-Gm(e))+1}function h9(e,t,r,a){var s=i_(e,t,r),i;switch(a=M0(a??",f"),a.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(i=qoe(s,o))&&(a.precision=i),p9(a,o)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(i=Woe(s,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=i-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(i=zoe(s))&&(a.precision=i-(a.type==="%")*2);break}}return hk(a)}function Vd(e){var t=e.domain;return e.ticks=function(r){var a=t();return a_(a[0],a[a.length-1],r??10)},e.tickFormat=function(r,a){var s=t();return h9(s[0],s[s.length-1],r??10,a)},e.nice=function(r){r==null&&(r=10);var a=t(),s=0,i=a.length-1,o=a[s],l=a[i],d,u,p=10;for(l<o&&(u=o,o=l,l=u,u=s,s=i,i=u);p-- >0;){if(u=s_(o,l,r),u===d)return a[s]=o,a[i]=l,t(a);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;d=u}return e},e}function Cy(){var e=mk();return e.copy=function(){return Sg(e,Cy())},io.apply(e,arguments),Vd(e)}function g9(e){var t;function r(a){return a==null||isNaN(a=+a)?t:a}return r.invert=r,r.domain=r.range=function(a){return arguments.length?(e=Array.from(a,wy),r):e.slice()},r.unknown=function(a){return arguments.length?(t=a,r):t},r.copy=function(){return g9(e).unknown(t)},e=arguments.length?Array.from(e,wy):[0,1],Vd(r)}function x9(e,t){e=e.slice();var r=0,a=e.length-1,s=e[r],i=e[a],o;return i<s&&(o=r,r=a,a=o,o=s,s=i,i=o),e[r]=t.floor(s),e[a]=t.ceil(i),e}function pL(e){return Math.log(e)}function hL(e){return Math.exp(e)}function Voe(e){return-Math.log(-e)}function Yoe(e){return-Math.exp(-e)}function Xoe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Qoe(e){return e===10?Xoe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Zoe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function gL(e){return(t,r)=>-e(-t,r)}function gk(e){const t=e(pL,hL),r=t.domain;let a=10,s,i;function o(){return s=Zoe(a),i=Qoe(a),r()[0]<0?(s=gL(s),i=gL(i),e(Voe,Yoe)):e(pL,hL),t}return t.base=function(l){return arguments.length?(a=+l,o()):a},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const d=r();let u=d[0],p=d[d.length-1];const m=p<u;m&&([u,p]=[p,u]);let h=s(u),x=s(p),y,N;const v=l==null?10:+l;let j=[];if(!(a%1)&&x-h<v){if(h=Math.floor(h),x=Math.ceil(x),u>0){for(;h<=x;++h)for(y=1;y<a;++y)if(N=h<0?y/i(-h):y*i(h),!(N<u)){if(N>p)break;j.push(N)}}else for(;h<=x;++h)for(y=a-1;y>=1;--y)if(N=h>0?y/i(-h):y*i(h),!(N<u)){if(N>p)break;j.push(N)}j.length*2<v&&(j=a_(u,p,v))}else j=a_(h,x,Math.min(x-h,v)).map(i);return m?j.reverse():j},t.tickFormat=(l,d)=>{if(l==null&&(l=10),d==null&&(d=a===10?"s":","),typeof d!="function"&&(!(a%1)&&(d=M0(d)).precision==null&&(d.trim=!0),d=hk(d)),l===1/0)return d;const u=Math.max(1,a*l/t.ticks().length);return p=>{let m=p/i(Math.round(s(p)));return m*a<a-.5&&(m*=a),m<=u?d(p):""}},t.nice=()=>r(x9(r(),{floor:l=>i(Math.floor(s(l))),ceil:l=>i(Math.ceil(s(l)))})),t}function b9(){const e=gk(m1()).domain([1,10]);return e.copy=()=>Sg(e,b9()).base(e.base()),io.apply(e,arguments),e}function xL(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function bL(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function xk(e){var t=1,r=e(xL(t),bL(t));return r.constant=function(a){return arguments.length?e(xL(t=+a),bL(t)):t},Vd(r)}function y9(){var e=xk(m1());return e.copy=function(){return Sg(e,y9()).constant(e.constant())},io.apply(e,arguments)}function yL(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Joe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function ele(e){return e<0?-e*e:e*e}function bk(e){var t=e(Rs,Rs),r=1;function a(){return r===1?e(Rs,Rs):r===.5?e(Joe,ele):e(yL(r),yL(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,a()):r},Vd(t)}function yk(){var e=bk(m1());return e.copy=function(){return Sg(e,yk()).exponent(e.exponent())},io.apply(e,arguments),e}function tle(){return yk.apply(null,arguments).exponent(.5)}function vL(e){return Math.sign(e)*e*e}function rle(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function v9(){var e=mk(),t=[0,1],r=!1,a;function s(i){var o=rle(e(i));return isNaN(o)?a:r?Math.round(o):o}return s.invert=function(i){return e.invert(vL(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,wy)).map(vL)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return v9(e.domain(),t).round(r).clamp(e.clamp()).unknown(a)},io.apply(s,arguments),Vd(s)}function N9(){var e=[],t=[],r=[],a;function s(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=Vie(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?a:t[vg(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort($d),s()},i.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},i.unknown=function(o){return arguments.length?(a=o,i):a},i.quantiles=function(){return r.slice()},i.copy=function(){return N9().domain(e).range(t).unknown(a)},io.apply(i,arguments)}function vk(){var e=0,t=1,r=1,a=[.5],s=[0,1],i;function o(d){return d!=null&&d<=d?s[vg(a,d,0,r)]:i}function l(){var d=-1;for(a=new Array(r);++d<r;)a[d]=((d+1)*t-(d-r)*e)/(r+1);return o}return o.domain=function(d){return arguments.length?([e,t]=d,e=+e,t=+t,l()):[e,t]},o.range=function(d){return arguments.length?(r=(s=Array.from(d)).length-1,l()):s.slice()},o.invertExtent=function(d){var u=s.indexOf(d);return u<0?[NaN,NaN]:u<1?[e,a[0]]:u>=r?[a[r-1],t]:[a[u-1],a[u]]},o.unknown=function(d){return arguments.length&&(i=d),o},o.thresholds=function(){return a.slice()},o.copy=function(){return vk().domain([e,t]).range(s).unknown(i)},io.apply(Vd(o),arguments)}function S9(){var e=[.5],t=[0,1],r,a=1;function s(i){return i!=null&&i<=i?t[vg(e,i,0,a)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),a=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),a=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return S9().domain(e).range(t).unknown(r)},io.apply(s,arguments)}const Pw=new Date,Dw=new Date;function Sa(e,t,r,a){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const o=s(i),l=s.ceil(i);return i-o<l-i?o:l},s.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,l)=>{const d=[];if(i=s.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return d;let u;do d.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<o);return d},s.filter=i=>Sa(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(s.count=(i,o)=>(Pw.setTime(+i),Dw.setTime(+o),e(Pw),e(Dw),Math.floor(r(Pw,Dw))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(a?o=>a(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const _y=Sa(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);_y.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Sa(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):_y);_y.range;const bc=1e3,eo=bc*60,yc=eo*60,_c=yc*24,Nk=_c*7,NL=_c*30,Iw=_c*365,Fu=Sa(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*bc)},(e,t)=>(t-e)/bc,e=>e.getUTCSeconds());Fu.range;const Sk=Sa(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*bc)},(e,t)=>{e.setTime(+e+t*eo)},(e,t)=>(t-e)/eo,e=>e.getMinutes());Sk.range;const jk=Sa(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*eo)},(e,t)=>(t-e)/eo,e=>e.getUTCMinutes());jk.range;const wk=Sa(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*bc-e.getMinutes()*eo)},(e,t)=>{e.setTime(+e+t*yc)},(e,t)=>(t-e)/yc,e=>e.getHours());wk.range;const Ek=Sa(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*yc)},(e,t)=>(t-e)/yc,e=>e.getUTCHours());Ek.range;const jg=Sa(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*eo)/_c,e=>e.getDate()-1);jg.range;const p1=Sa(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/_c,e=>e.getUTCDate()-1);p1.range;const j9=Sa(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/_c,e=>Math.floor(e/_c));j9.range;function ff(e){return Sa(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*eo)/Nk)}const h1=ff(0),Ty=ff(1),nle=ff(2),ale=ff(3),Km=ff(4),sle=ff(5),ile=ff(6);h1.range;Ty.range;nle.range;ale.range;Km.range;sle.range;ile.range;function mf(e){return Sa(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Nk)}const g1=mf(0),Oy=mf(1),ole=mf(2),lle=mf(3),zm=mf(4),cle=mf(5),dle=mf(6);g1.range;Oy.range;ole.range;lle.range;zm.range;cle.range;dle.range;const Ak=Sa(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Ak.range;const Ck=Sa(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Ck.range;const Tc=Sa(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Tc.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Sa(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Tc.range;const Oc=Sa(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Oc.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Sa(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Oc.range;function w9(e,t,r,a,s,i){const o=[[Fu,1,bc],[Fu,5,5*bc],[Fu,15,15*bc],[Fu,30,30*bc],[i,1,eo],[i,5,5*eo],[i,15,15*eo],[i,30,30*eo],[s,1,yc],[s,3,3*yc],[s,6,6*yc],[s,12,12*yc],[a,1,_c],[a,2,2*_c],[r,1,Nk],[t,1,NL],[t,3,3*NL],[e,1,Iw]];function l(u,p,m){const h=p<u;h&&([u,p]=[p,u]);const x=m&&typeof m.range=="function"?m:d(u,p,m),y=x?x.range(u,+p+1):[];return h?y.reverse():y}function d(u,p,m){const h=Math.abs(p-u)/m,x=lk(([,,v])=>v).right(o,h);if(x===o.length)return e.every(i_(u/Iw,p/Iw,m));if(x===0)return _y.every(Math.max(i_(u,p,m),1));const[y,N]=o[h/o[x-1][2]<o[x][2]/h?x-1:x];return y.every(N)}return[l,d]}const[ule,fle]=w9(Oc,Ck,g1,j9,Ek,jk),[mle,ple]=w9(Tc,Ak,h1,jg,wk,Sk);function Mw(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Lw(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function jh(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function hle(e){var t=e.dateTime,r=e.date,a=e.time,s=e.periods,i=e.days,o=e.shortDays,l=e.months,d=e.shortMonths,u=wh(s),p=Eh(s),m=wh(i),h=Eh(i),x=wh(o),y=Eh(o),N=wh(l),v=Eh(l),j=wh(d),E=Eh(d),C={a:G,A:U,b:te,B:re,c:null,d:CL,e:CL,f:$le,g:Vle,G:Xle,H:Ile,I:Mle,j:Lle,L:E9,m:Fle,M:Ble,p:q,q:L,Q:OL,s:kL,S:Ule,u:Hle,U:Gle,V:Kle,w:zle,W:qle,x:null,X:null,y:Wle,Y:Yle,Z:Qle,"%":TL},A={a:H,A:ae,b:oe,B:ve,c:null,d:_L,e:_L,f:tce,g:uce,G:mce,H:Zle,I:Jle,j:ece,L:C9,m:rce,M:nce,p:ce,q:Ee,Q:OL,s:kL,S:ace,u:sce,U:ice,V:oce,w:lce,W:cce,x:null,X:null,y:dce,Y:fce,Z:pce,"%":TL},S={a:M,A:F,b:$,B,c:P,d:EL,e:EL,f:kle,g:wL,G:jL,H:AL,I:AL,j:Cle,L:Ole,m:Ale,M:_le,p:k,q:Ele,Q:Ple,s:Dle,S:Tle,u:vle,U:Nle,V:Sle,w:yle,W:jle,x:W,X:K,y:wL,Y:jL,Z:wle,"%":Rle};C.x=_(r,C),C.X=_(a,C),C.c=_(t,C),A.x=_(r,A),A.X=_(a,A),A.c=_(t,A);function _(xe,Te){return function(ye){var se=[],ct=-1,Q=0,he=xe.length,$e,Z,je;for(ye instanceof Date||(ye=new Date(+ye));++ct<he;)xe.charCodeAt(ct)===37&&(se.push(xe.slice(Q,ct)),(Z=SL[$e=xe.charAt(++ct)])!=null?$e=xe.charAt(++ct):Z=$e==="e"?" ":"0",(je=Te[$e])&&($e=je(ye,Z)),se.push($e),Q=ct+1);return se.push(xe.slice(Q,ct)),se.join("")}}function O(xe,Te){return function(ye){var se=jh(1900,void 0,1),ct=D(se,xe,ye+="",0),Q,he;if(ct!=ye.length)return null;if("Q"in se)return new Date(se.Q);if("s"in se)return new Date(se.s*1e3+("L"in se?se.L:0));if(Te&&!("Z"in se)&&(se.Z=0),"p"in se&&(se.H=se.H%12+se.p*12),se.m===void 0&&(se.m="q"in se?se.q:0),"V"in se){if(se.V<1||se.V>53)return null;"w"in se||(se.w=1),"Z"in se?(Q=Lw(jh(se.y,0,1)),he=Q.getUTCDay(),Q=he>4||he===0?Oy.ceil(Q):Oy(Q),Q=p1.offset(Q,(se.V-1)*7),se.y=Q.getUTCFullYear(),se.m=Q.getUTCMonth(),se.d=Q.getUTCDate()+(se.w+6)%7):(Q=Mw(jh(se.y,0,1)),he=Q.getDay(),Q=he>4||he===0?Ty.ceil(Q):Ty(Q),Q=jg.offset(Q,(se.V-1)*7),se.y=Q.getFullYear(),se.m=Q.getMonth(),se.d=Q.getDate()+(se.w+6)%7)}else("W"in se||"U"in se)&&("w"in se||(se.w="u"in se?se.u%7:"W"in se?1:0),he="Z"in se?Lw(jh(se.y,0,1)).getUTCDay():Mw(jh(se.y,0,1)).getDay(),se.m=0,se.d="W"in se?(se.w+6)%7+se.W*7-(he+5)%7:se.w+se.U*7-(he+6)%7);return"Z"in se?(se.H+=se.Z/100|0,se.M+=se.Z%100,Lw(se)):Mw(se)}}function D(xe,Te,ye,se){for(var ct=0,Q=Te.length,he=ye.length,$e,Z;ct<Q;){if(se>=he)return-1;if($e=Te.charCodeAt(ct++),$e===37){if($e=Te.charAt(ct++),Z=S[$e in SL?Te.charAt(ct++):$e],!Z||(se=Z(xe,ye,se))<0)return-1}else if($e!=ye.charCodeAt(se++))return-1}return se}function k(xe,Te,ye){var se=u.exec(Te.slice(ye));return se?(xe.p=p.get(se[0].toLowerCase()),ye+se[0].length):-1}function M(xe,Te,ye){var se=x.exec(Te.slice(ye));return se?(xe.w=y.get(se[0].toLowerCase()),ye+se[0].length):-1}function F(xe,Te,ye){var se=m.exec(Te.slice(ye));return se?(xe.w=h.get(se[0].toLowerCase()),ye+se[0].length):-1}function $(xe,Te,ye){var se=j.exec(Te.slice(ye));return se?(xe.m=E.get(se[0].toLowerCase()),ye+se[0].length):-1}function B(xe,Te,ye){var se=N.exec(Te.slice(ye));return se?(xe.m=v.get(se[0].toLowerCase()),ye+se[0].length):-1}function P(xe,Te,ye){return D(xe,t,Te,ye)}function W(xe,Te,ye){return D(xe,r,Te,ye)}function K(xe,Te,ye){return D(xe,a,Te,ye)}function G(xe){return o[xe.getDay()]}function U(xe){return i[xe.getDay()]}function te(xe){return d[xe.getMonth()]}function re(xe){return l[xe.getMonth()]}function q(xe){return s[+(xe.getHours()>=12)]}function L(xe){return 1+~~(xe.getMonth()/3)}function H(xe){return o[xe.getUTCDay()]}function ae(xe){return i[xe.getUTCDay()]}function oe(xe){return d[xe.getUTCMonth()]}function ve(xe){return l[xe.getUTCMonth()]}function ce(xe){return s[+(xe.getUTCHours()>=12)]}function Ee(xe){return 1+~~(xe.getUTCMonth()/3)}return{format:function(xe){var Te=_(xe+="",C);return Te.toString=function(){return xe},Te},parse:function(xe){var Te=O(xe+="",!1);return Te.toString=function(){return xe},Te},utcFormat:function(xe){var Te=_(xe+="",A);return Te.toString=function(){return xe},Te},utcParse:function(xe){var Te=O(xe+="",!0);return Te.toString=function(){return xe},Te}}}var SL={"-":"",_:" ",0:"0"},Fa=/^\s*\d+/,gle=/^%/,xle=/[\\^$*+?|[\]().{}]/g;function Kr(e,t,r){var a=e<0?"-":"",s=(a?-e:e)+"",i=s.length;return a+(i<r?new Array(r-i+1).join(t)+s:s)}function ble(e){return e.replace(xle,"\\$&")}function wh(e){return new RegExp("^(?:"+e.map(ble).join("|")+")","i")}function Eh(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function yle(e,t,r){var a=Fa.exec(t.slice(r,r+1));return a?(e.w=+a[0],r+a[0].length):-1}function vle(e,t,r){var a=Fa.exec(t.slice(r,r+1));return a?(e.u=+a[0],r+a[0].length):-1}function Nle(e,t,r){var a=Fa.exec(t.slice(r,r+2));return a?(e.U=+a[0],r+a[0].length):-1}function Sle(e,t,r){var a=Fa.exec(t.slice(r,r+2));return a?(e.V=+a[0],r+a[0].length):-1}function jle(e,t,r){var a=Fa.exec(t.slice(r,r+2));return a?(e.W=+a[0],r+a[0].length):-1}function jL(e,t,r){var a=Fa.exec(t.slice(r,r+4));return a?(e.y=+a[0],r+a[0].length):-1}function wL(e,t,r){var a=Fa.exec(t.slice(r,r+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),r+a[0].length):-1}function wle(e,t,r){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),r+a[0].length):-1}function Ele(e,t,r){var a=Fa.exec(t.slice(r,r+1));return a?(e.q=a[0]*3-3,r+a[0].length):-1}function Ale(e,t,r){var a=Fa.exec(t.slice(r,r+2));return a?(e.m=a[0]-1,r+a[0].length):-1}function EL(e,t,r){var a=Fa.exec(t.slice(r,r+2));return a?(e.d=+a[0],r+a[0].length):-1}function Cle(e,t,r){var a=Fa.exec(t.slice(r,r+3));return a?(e.m=0,e.d=+a[0],r+a[0].length):-1}function AL(e,t,r){var a=Fa.exec(t.slice(r,r+2));return a?(e.H=+a[0],r+a[0].length):-1}function _le(e,t,r){var a=Fa.exec(t.slice(r,r+2));return a?(e.M=+a[0],r+a[0].length):-1}function Tle(e,t,r){var a=Fa.exec(t.slice(r,r+2));return a?(e.S=+a[0],r+a[0].length):-1}function Ole(e,t,r){var a=Fa.exec(t.slice(r,r+3));return a?(e.L=+a[0],r+a[0].length):-1}function kle(e,t,r){var a=Fa.exec(t.slice(r,r+6));return a?(e.L=Math.floor(a[0]/1e3),r+a[0].length):-1}function Rle(e,t,r){var a=gle.exec(t.slice(r,r+1));return a?r+a[0].length:-1}function Ple(e,t,r){var a=Fa.exec(t.slice(r));return a?(e.Q=+a[0],r+a[0].length):-1}function Dle(e,t,r){var a=Fa.exec(t.slice(r));return a?(e.s=+a[0],r+a[0].length):-1}function CL(e,t){return Kr(e.getDate(),t,2)}function Ile(e,t){return Kr(e.getHours(),t,2)}function Mle(e,t){return Kr(e.getHours()%12||12,t,2)}function Lle(e,t){return Kr(1+jg.count(Tc(e),e),t,3)}function E9(e,t){return Kr(e.getMilliseconds(),t,3)}function $le(e,t){return E9(e,t)+"000"}function Fle(e,t){return Kr(e.getMonth()+1,t,2)}function Ble(e,t){return Kr(e.getMinutes(),t,2)}function Ule(e,t){return Kr(e.getSeconds(),t,2)}function Hle(e){var t=e.getDay();return t===0?7:t}function Gle(e,t){return Kr(h1.count(Tc(e)-1,e),t,2)}function A9(e){var t=e.getDay();return t>=4||t===0?Km(e):Km.ceil(e)}function Kle(e,t){return e=A9(e),Kr(Km.count(Tc(e),e)+(Tc(e).getDay()===4),t,2)}function zle(e){return e.getDay()}function qle(e,t){return Kr(Ty.count(Tc(e)-1,e),t,2)}function Wle(e,t){return Kr(e.getFullYear()%100,t,2)}function Vle(e,t){return e=A9(e),Kr(e.getFullYear()%100,t,2)}function Yle(e,t){return Kr(e.getFullYear()%1e4,t,4)}function Xle(e,t){var r=e.getDay();return e=r>=4||r===0?Km(e):Km.ceil(e),Kr(e.getFullYear()%1e4,t,4)}function Qle(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Kr(t/60|0,"0",2)+Kr(t%60,"0",2)}function _L(e,t){return Kr(e.getUTCDate(),t,2)}function Zle(e,t){return Kr(e.getUTCHours(),t,2)}function Jle(e,t){return Kr(e.getUTCHours()%12||12,t,2)}function ece(e,t){return Kr(1+p1.count(Oc(e),e),t,3)}function C9(e,t){return Kr(e.getUTCMilliseconds(),t,3)}function tce(e,t){return C9(e,t)+"000"}function rce(e,t){return Kr(e.getUTCMonth()+1,t,2)}function nce(e,t){return Kr(e.getUTCMinutes(),t,2)}function ace(e,t){return Kr(e.getUTCSeconds(),t,2)}function sce(e){var t=e.getUTCDay();return t===0?7:t}function ice(e,t){return Kr(g1.count(Oc(e)-1,e),t,2)}function _9(e){var t=e.getUTCDay();return t>=4||t===0?zm(e):zm.ceil(e)}function oce(e,t){return e=_9(e),Kr(zm.count(Oc(e),e)+(Oc(e).getUTCDay()===4),t,2)}function lce(e){return e.getUTCDay()}function cce(e,t){return Kr(Oy.count(Oc(e)-1,e),t,2)}function dce(e,t){return Kr(e.getUTCFullYear()%100,t,2)}function uce(e,t){return e=_9(e),Kr(e.getUTCFullYear()%100,t,2)}function fce(e,t){return Kr(e.getUTCFullYear()%1e4,t,4)}function mce(e,t){var r=e.getUTCDay();return e=r>=4||r===0?zm(e):zm.ceil(e),Kr(e.getUTCFullYear()%1e4,t,4)}function pce(){return"+0000"}function TL(){return"%"}function OL(e){return+e}function kL(e){return Math.floor(+e/1e3)}var Hf,T9,O9;hce({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function hce(e){return Hf=hle(e),T9=Hf.format,Hf.parse,O9=Hf.utcFormat,Hf.utcParse,Hf}function gce(e){return new Date(e)}function xce(e){return e instanceof Date?+e:+new Date(+e)}function _k(e,t,r,a,s,i,o,l,d,u){var p=mk(),m=p.invert,h=p.domain,x=u(".%L"),y=u(":%S"),N=u("%I:%M"),v=u("%I %p"),j=u("%a %d"),E=u("%b %d"),C=u("%B"),A=u("%Y");function S(_){return(d(_)<_?x:l(_)<_?y:o(_)<_?N:i(_)<_?v:a(_)<_?s(_)<_?j:E:r(_)<_?C:A)(_)}return p.invert=function(_){return new Date(m(_))},p.domain=function(_){return arguments.length?h(Array.from(_,xce)):h().map(gce)},p.ticks=function(_){var O=h();return e(O[0],O[O.length-1],_??10)},p.tickFormat=function(_,O){return O==null?S:u(O)},p.nice=function(_){var O=h();return(!_||typeof _.range!="function")&&(_=t(O[0],O[O.length-1],_??10)),_?h(x9(O,_)):p},p.copy=function(){return Sg(p,_k(e,t,r,a,s,i,o,l,d,u))},p}function bce(){return io.apply(_k(mle,ple,Tc,Ak,h1,jg,wk,Sk,Fu,T9).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function yce(){return io.apply(_k(ule,fle,Oc,Ck,g1,p1,Ek,jk,Fu,O9).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function x1(){var e=0,t=1,r,a,s,i,o=Rs,l=!1,d;function u(m){return m==null||isNaN(m=+m)?d:o(s===0?.5:(m=(i(m)-r)*s,l?Math.max(0,Math.min(1,m)):m))}u.domain=function(m){return arguments.length?([e,t]=m,r=i(e=+e),a=i(t=+t),s=r===a?0:1/(a-r),u):[e,t]},u.clamp=function(m){return arguments.length?(l=!!m,u):l},u.interpolator=function(m){return arguments.length?(o=m,u):o};function p(m){return function(h){var x,y;return arguments.length?([x,y]=h,o=m(x,y),u):[o(0),o(1)]}}return u.range=p(Dp),u.rangeRound=p(fk),u.unknown=function(m){return arguments.length?(d=m,u):d},function(m){return i=m,r=m(e),a=m(t),s=r===a?0:1/(a-r),u}}function Yd(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Tk(){var e=Vd(x1()(Rs));return e.copy=function(){return Yd(e,Tk())},$c.apply(e,arguments)}function k9(){var e=gk(x1()).domain([1,10]);return e.copy=function(){return Yd(e,k9()).base(e.base())},$c.apply(e,arguments)}function R9(){var e=xk(x1());return e.copy=function(){return Yd(e,R9()).constant(e.constant())},$c.apply(e,arguments)}function Ok(){var e=bk(x1());return e.copy=function(){return Yd(e,Ok()).exponent(e.exponent())},$c.apply(e,arguments)}function vce(){return Ok.apply(null,arguments).exponent(.5)}function P9(){var e=[],t=Rs;function r(a){if(a!=null&&!isNaN(a=+a))return t((vg(e,a,1)-1)/(e.length-1))}return r.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let s of a)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort($d),r},r.interpolator=function(a){return arguments.length?(t=a,r):t},r.range=function(){return e.map((a,s)=>t(s/(e.length-1)))},r.quantiles=function(a){return Array.from({length:a+1},(s,i)=>Wie(e,i/a))},r.copy=function(){return P9(t).domain(e)},$c.apply(r,arguments)}function b1(){var e=0,t=.5,r=1,a=1,s,i,o,l,d,u=Rs,p,m=!1,h;function x(N){return isNaN(N=+N)?h:(N=.5+((N=+p(N))-i)*(a*N<a*i?l:d),u(m?Math.max(0,Math.min(1,N)):N))}x.domain=function(N){return arguments.length?([e,t,r]=N,s=p(e=+e),i=p(t=+t),o=p(r=+r),l=s===i?0:.5/(i-s),d=i===o?0:.5/(o-i),a=i<s?-1:1,x):[e,t,r]},x.clamp=function(N){return arguments.length?(m=!!N,x):m},x.interpolator=function(N){return arguments.length?(u=N,x):u};function y(N){return function(v){var j,E,C;return arguments.length?([j,E,C]=v,u=Roe(N,[j,E,C]),x):[u(0),u(.5),u(1)]}}return x.range=y(Dp),x.rangeRound=y(fk),x.unknown=function(N){return arguments.length?(h=N,x):h},function(N){return p=N,s=N(e),i=N(t),o=N(r),l=s===i?0:.5/(i-s),d=i===o?0:.5/(o-i),a=i<s?-1:1,x}}function D9(){var e=Vd(b1()(Rs));return e.copy=function(){return Yd(e,D9())},$c.apply(e,arguments)}function I9(){var e=gk(b1()).domain([.1,1,10]);return e.copy=function(){return Yd(e,I9()).base(e.base())},$c.apply(e,arguments)}function M9(){var e=xk(b1());return e.copy=function(){return Yd(e,M9()).constant(e.constant())},$c.apply(e,arguments)}function kk(){var e=bk(b1());return e.copy=function(){return Yd(e,kk()).exponent(e.exponent())},$c.apply(e,arguments)}function Nce(){return kk.apply(null,arguments).exponent(.5)}const RL=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:P0,scaleDiverging:D9,scaleDivergingLog:I9,scaleDivergingPow:kk,scaleDivergingSqrt:Nce,scaleDivergingSymlog:M9,scaleIdentity:g9,scaleImplicit:o_,scaleLinear:Cy,scaleLog:b9,scaleOrdinal:ck,scalePoint:f0,scalePow:yk,scaleQuantile:N9,scaleQuantize:vk,scaleRadial:v9,scaleSequential:Tk,scaleSequentialLog:k9,scaleSequentialPow:Ok,scaleSequentialQuantile:P9,scaleSequentialSqrt:vce,scaleSequentialSymlog:R9,scaleSqrt:tle,scaleSymlog:y9,scaleThreshold:S9,scaleTime:bce,scaleUtc:yce,tickFormat:h9},Symbol.toStringTag,{value:"Module"}));var $w,PL;function y1(){if(PL)return $w;PL=1;var e=Tp();function t(r,a,s){for(var i=-1,o=r.length;++i<o;){var l=r[i],d=a(l);if(d!=null&&(u===void 0?d===d&&!e(d):s(d,u)))var u=d,p=l}return p}return $w=t,$w}var Fw,DL;function L9(){if(DL)return Fw;DL=1;function e(t,r){return t>r}return Fw=e,Fw}var Bw,IL;function Sce(){if(IL)return Bw;IL=1;var e=y1(),t=L9(),r=Pp();function a(s){return s&&s.length?e(s,r,t):void 0}return Bw=a,Bw}var jce=Sce();const Od=Vr(jce);var Uw,ML;function $9(){if(ML)return Uw;ML=1;function e(t,r){return t<r}return Uw=e,Uw}var Hw,LL;function wce(){if(LL)return Hw;LL=1;var e=y1(),t=$9(),r=Pp();function a(s){return s&&s.length?e(s,r,t):void 0}return Hw=a,Hw}var Ece=wce();const v1=Vr(Ece);var Gw,$L;function Ace(){if($L)return Gw;$L=1;var e=e1(),t=Ml(),r=KU(),a=Ms();function s(i,o){var l=a(i)?e:r;return l(i,t(o,3))}return Gw=s,Gw}var Kw,FL;function Cce(){if(FL)return Kw;FL=1;var e=ak(),t=Ace();function r(a,s){return e(t(a,s),1)}return Kw=r,Kw}var _ce=Cce();const Tce=Vr(_ce);var zw,BL;function Oce(){if(BL)return zw;BL=1;var e=nk();function t(r,a){return e(r,a)}return zw=t,zw}var kce=Oce();const Hd=Vr(kce);var Ip=1e9,Rce={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Pk,An=!0,no="[DecimalError] ",qu=no+"Invalid argument: ",Rk=no+"Exponent out of range: ",Mp=Math.floor,ku=Math.pow,Pce=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,vi,Ia=1e7,vn=7,F9=9007199254740991,ky=Mp(F9/vn),wt={};wt.absoluteValue=wt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};wt.comparedTo=wt.cmp=function(e){var t,r,a,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(a=i.d.length,s=e.d.length,t=0,r=a<s?a:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return a===s?0:a>s^i.s<0?1:-1};wt.decimalPlaces=wt.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*vn;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};wt.dividedBy=wt.div=function(e){return jc(this,new this.constructor(e))};wt.dividedToIntegerBy=wt.idiv=function(e){var t=this,r=t.constructor;return un(jc(t,new r(e),0,1),r.precision)};wt.equals=wt.eq=function(e){return!this.cmp(e)};wt.exponent=function(){return ra(this)};wt.greaterThan=wt.gt=function(e){return this.cmp(e)>0};wt.greaterThanOrEqualTo=wt.gte=function(e){return this.cmp(e)>=0};wt.isInteger=wt.isint=function(){return this.e>this.d.length-2};wt.isNegative=wt.isneg=function(){return this.s<0};wt.isPositive=wt.ispos=function(){return this.s>0};wt.isZero=function(){return this.s===0};wt.lessThan=wt.lt=function(e){return this.cmp(e)<0};wt.lessThanOrEqualTo=wt.lte=function(e){return this.cmp(e)<1};wt.logarithm=wt.log=function(e){var t,r=this,a=r.constructor,s=a.precision,i=s+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(vi))throw Error(no+"NaN");if(r.s<1)throw Error(no+(r.s?"NaN":"-Infinity"));return r.eq(vi)?new a(0):(An=!1,t=jc(L0(r,i),L0(e,i),i),An=!0,un(t,s))};wt.minus=wt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?H9(t,e):B9(t,(e.s=-e.s,e))};wt.modulo=wt.mod=function(e){var t,r=this,a=r.constructor,s=a.precision;if(e=new a(e),!e.s)throw Error(no+"NaN");return r.s?(An=!1,t=jc(r,e,0,1).times(e),An=!0,r.minus(t)):un(new a(r),s)};wt.naturalExponential=wt.exp=function(){return U9(this)};wt.naturalLogarithm=wt.ln=function(){return L0(this)};wt.negated=wt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};wt.plus=wt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?B9(t,e):H9(t,(e.s=-e.s,e))};wt.precision=wt.sd=function(e){var t,r,a,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(qu+e);if(t=ra(s)+1,a=s.d.length-1,r=a*vn+1,a=s.d[a],a){for(;a%10==0;a/=10)r--;for(a=s.d[0];a>=10;a/=10)r++}return e&&t>r?t:r};wt.squareRoot=wt.sqrt=function(){var e,t,r,a,s,i,o,l=this,d=l.constructor;if(l.s<1){if(!l.s)return new d(0);throw Error(no+"NaN")}for(e=ra(l),An=!1,s=Math.sqrt(+l),s==0||s==1/0?(t=xl(l.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=Mp((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new d(t)):a=new d(s.toString()),r=d.precision,s=o=r+3;;)if(i=a,a=i.plus(jc(l,i,o+2)).times(.5),xl(i.d).slice(0,o)===(t=xl(a.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&t=="4999"){if(un(i,r+1,0),i.times(i).eq(l)){a=i;break}}else if(t!="9999")break;o+=4}return An=!0,un(a,r)};wt.times=wt.mul=function(e){var t,r,a,s,i,o,l,d,u,p=this,m=p.constructor,h=p.d,x=(e=new m(e)).d;if(!p.s||!e.s)return new m(0);for(e.s*=p.s,r=p.e+e.e,d=h.length,u=x.length,d<u&&(i=h,h=x,x=i,o=d,d=u,u=o),i=[],o=d+u,a=o;a--;)i.push(0);for(a=u;--a>=0;){for(t=0,s=d+a;s>a;)l=i[s]+x[a]*h[s-a-1]+t,i[s--]=l%Ia|0,t=l/Ia|0;i[s]=(i[s]+t)%Ia|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,An?un(e,m.precision):e};wt.toDecimalPlaces=wt.todp=function(e,t){var r=this,a=r.constructor;return r=new a(r),e===void 0?r:(Rl(e,0,Ip),t===void 0?t=a.rounding:Rl(t,0,8),un(r,e+ra(r)+1,t))};wt.toExponential=function(e,t){var r,a=this,s=a.constructor;return e===void 0?r=tf(a,!0):(Rl(e,0,Ip),t===void 0?t=s.rounding:Rl(t,0,8),a=un(new s(a),e+1,t),r=tf(a,!0,e+1)),r};wt.toFixed=function(e,t){var r,a,s=this,i=s.constructor;return e===void 0?tf(s):(Rl(e,0,Ip),t===void 0?t=i.rounding:Rl(t,0,8),a=un(new i(s),e+ra(s)+1,t),r=tf(a.abs(),!1,e+ra(a)+1),s.isneg()&&!s.isZero()?"-"+r:r)};wt.toInteger=wt.toint=function(){var e=this,t=e.constructor;return un(new t(e),ra(e)+1,t.rounding)};wt.toNumber=function(){return+this};wt.toPower=wt.pow=function(e){var t,r,a,s,i,o,l=this,d=l.constructor,u=12,p=+(e=new d(e));if(!e.s)return new d(vi);if(l=new d(l),!l.s){if(e.s<1)throw Error(no+"Infinity");return l}if(l.eq(vi))return l;if(a=d.precision,e.eq(vi))return un(l,a);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=p<0?-p:p)<=F9){for(s=new d(vi),t=Math.ceil(a/vn+4),An=!1;r%2&&(s=s.times(l),HL(s.d,t)),r=Mp(r/2),r!==0;)l=l.times(l),HL(l.d,t);return An=!0,e.s<0?new d(vi).div(s):un(s,a)}}else if(i<0)throw Error(no+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,An=!1,s=e.times(L0(l,a+u)),An=!0,s=U9(s),s.s=i,s};wt.toPrecision=function(e,t){var r,a,s=this,i=s.constructor;return e===void 0?(r=ra(s),a=tf(s,r<=i.toExpNeg||r>=i.toExpPos)):(Rl(e,1,Ip),t===void 0?t=i.rounding:Rl(t,0,8),s=un(new i(s),e,t),r=ra(s),a=tf(s,e<=r||r<=i.toExpNeg,e)),a};wt.toSignificantDigits=wt.tosd=function(e,t){var r=this,a=r.constructor;return e===void 0?(e=a.precision,t=a.rounding):(Rl(e,1,Ip),t===void 0?t=a.rounding:Rl(t,0,8)),un(new a(r),e,t)};wt.toString=wt.valueOf=wt.val=wt.toJSON=wt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=ra(e),r=e.constructor;return tf(e,t<=r.toExpNeg||t>=r.toExpPos)};function B9(e,t){var r,a,s,i,o,l,d,u,p=e.constructor,m=p.precision;if(!e.s||!t.s)return t.s||(t=new p(e)),An?un(t,m):t;if(d=e.d,u=t.d,o=e.e,s=t.e,d=d.slice(),i=o-s,i){for(i<0?(a=d,i=-i,l=u.length):(a=u,s=o,l=d.length),o=Math.ceil(m/vn),l=o>l?o+1:l+1,i>l&&(i=l,a.length=1),a.reverse();i--;)a.push(0);a.reverse()}for(l=d.length,i=u.length,l-i<0&&(i=l,a=u,u=d,d=a),r=0;i;)r=(d[--i]=d[i]+u[i]+r)/Ia|0,d[i]%=Ia;for(r&&(d.unshift(r),++s),l=d.length;d[--l]==0;)d.pop();return t.d=d,t.e=s,An?un(t,m):t}function Rl(e,t,r){if(e!==~~e||e<t||e>r)throw Error(qu+e)}function xl(e){var t,r,a,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)a=e[t]+"",r=vn-a.length,r&&(i+=wd(r)),i+=a;o=e[t],a=o+"",r=vn-a.length,r&&(i+=wd(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var jc=(function(){function e(a,s){var i,o=0,l=a.length;for(a=a.slice();l--;)i=a[l]*s+o,a[l]=i%Ia|0,o=i/Ia|0;return o&&a.unshift(o),a}function t(a,s,i,o){var l,d;if(i!=o)d=i>o?1:-1;else for(l=d=0;l<i;l++)if(a[l]!=s[l]){d=a[l]>s[l]?1:-1;break}return d}function r(a,s,i){for(var o=0;i--;)a[i]-=o,o=a[i]<s[i]?1:0,a[i]=o*Ia+a[i]-s[i];for(;!a[0]&&a.length>1;)a.shift()}return function(a,s,i,o){var l,d,u,p,m,h,x,y,N,v,j,E,C,A,S,_,O,D,k=a.constructor,M=a.s==s.s?1:-1,F=a.d,$=s.d;if(!a.s)return new k(a);if(!s.s)throw Error(no+"Division by zero");for(d=a.e-s.e,O=$.length,S=F.length,x=new k(M),y=x.d=[],u=0;$[u]==(F[u]||0);)++u;if($[u]>(F[u]||0)&&--d,i==null?E=i=k.precision:o?E=i+(ra(a)-ra(s))+1:E=i,E<0)return new k(0);if(E=E/vn+2|0,u=0,O==1)for(p=0,$=$[0],E++;(u<S||p)&&E--;u++)C=p*Ia+(F[u]||0),y[u]=C/$|0,p=C%$|0;else{for(p=Ia/($[0]+1)|0,p>1&&($=e($,p),F=e(F,p),O=$.length,S=F.length),A=O,N=F.slice(0,O),v=N.length;v<O;)N[v++]=0;D=$.slice(),D.unshift(0),_=$[0],$[1]>=Ia/2&&++_;do p=0,l=t($,N,O,v),l<0?(j=N[0],O!=v&&(j=j*Ia+(N[1]||0)),p=j/_|0,p>1?(p>=Ia&&(p=Ia-1),m=e($,p),h=m.length,v=N.length,l=t(m,N,h,v),l==1&&(p--,r(m,O<h?D:$,h))):(p==0&&(l=p=1),m=$.slice()),h=m.length,h<v&&m.unshift(0),r(N,m,v),l==-1&&(v=N.length,l=t($,N,O,v),l<1&&(p++,r(N,O<v?D:$,v))),v=N.length):l===0&&(p++,N=[0]),y[u++]=p,l&&N[0]?N[v++]=F[A]||0:(N=[F[A]],v=1);while((A++<S||N[0]!==void 0)&&E--)}return y[0]||y.shift(),x.e=d,un(x,o?i+ra(x)+1:i)}})();function U9(e,t){var r,a,s,i,o,l,d=0,u=0,p=e.constructor,m=p.precision;if(ra(e)>16)throw Error(Rk+ra(e));if(!e.s)return new p(vi);for(An=!1,l=m,o=new p(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(a=Math.log(ku(2,u))/Math.LN10*2+5|0,l+=a,r=s=i=new p(vi),p.precision=l;;){if(s=un(s.times(e),l),r=r.times(++d),o=i.plus(jc(s,r,l)),xl(o.d).slice(0,l)===xl(i.d).slice(0,l)){for(;u--;)i=un(i.times(i),l);return p.precision=m,t==null?(An=!0,un(i,m)):i}i=o}}function ra(e){for(var t=e.e*vn,r=e.d[0];r>=10;r/=10)t++;return t}function qw(e,t,r){if(t>e.LN10.sd())throw An=!0,r&&(e.precision=r),Error(no+"LN10 precision limit exceeded");return un(new e(e.LN10),t)}function wd(e){for(var t="";e--;)t+="0";return t}function L0(e,t){var r,a,s,i,o,l,d,u,p,m=1,h=10,x=e,y=x.d,N=x.constructor,v=N.precision;if(x.s<1)throw Error(no+(x.s?"NaN":"-Infinity"));if(x.eq(vi))return new N(0);if(t==null?(An=!1,u=v):u=t,x.eq(10))return t==null&&(An=!0),qw(N,u);if(u+=h,N.precision=u,r=xl(y),a=r.charAt(0),i=ra(x),Math.abs(i)<15e14){for(;a<7&&a!=1||a==1&&r.charAt(1)>3;)x=x.times(e),r=xl(x.d),a=r.charAt(0),m++;i=ra(x),a>1?(x=new N("0."+r),i++):x=new N(a+"."+r.slice(1))}else return d=qw(N,u+2,v).times(i+""),x=L0(new N(a+"."+r.slice(1)),u-h).plus(d),N.precision=v,t==null?(An=!0,un(x,v)):x;for(l=o=x=jc(x.minus(vi),x.plus(vi),u),p=un(x.times(x),u),s=3;;){if(o=un(o.times(p),u),d=l.plus(jc(o,new N(s),u)),xl(d.d).slice(0,u)===xl(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(qw(N,u+2,v).times(i+""))),l=jc(l,new N(m),u),N.precision=v,t==null?(An=!0,un(l,v)):l;l=d,s+=2}}function UL(e,t){var r,a,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(r<0&&(r=a),r+=+t.slice(a+1),t=t.substring(0,a)):r<0&&(r=t.length),a=0;t.charCodeAt(a)===48;)++a;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(a,s),t){if(s-=a,r=r-a-1,e.e=Mp(r/vn),e.d=[],a=(r+1)%vn,r<0&&(a+=vn),a<s){for(a&&e.d.push(+t.slice(0,a)),s-=vn;a<s;)e.d.push(+t.slice(a,a+=vn));t=t.slice(a),a=vn-t.length}else a-=s;for(;a--;)t+="0";if(e.d.push(+t),An&&(e.e>ky||e.e<-ky))throw Error(Rk+r)}else e.s=0,e.e=0,e.d=[0];return e}function un(e,t,r){var a,s,i,o,l,d,u,p,m=e.d;for(o=1,i=m[0];i>=10;i/=10)o++;if(a=t-o,a<0)a+=vn,s=t,u=m[p=0];else{if(p=Math.ceil((a+1)/vn),i=m.length,p>=i)return e;for(u=i=m[p],o=1;i>=10;i/=10)o++;a%=vn,s=a-vn+o}if(r!==void 0&&(i=ku(10,o-s-1),l=u/i%10|0,d=t<0||m[p+1]!==void 0||u%i,d=r<4?(l||d)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||d||r==6&&(a>0?s>0?u/ku(10,o-s):0:m[p-1])%10&1||r==(e.s<0?8:7))),t<1||!m[0])return d?(i=ra(e),m.length=1,t=t-i-1,m[0]=ku(10,(vn-t%vn)%vn),e.e=Mp(-t/vn)||0):(m.length=1,m[0]=e.e=e.s=0),e;if(a==0?(m.length=p,i=1,p--):(m.length=p+1,i=ku(10,vn-a),m[p]=s>0?(u/ku(10,o-s)%ku(10,s)|0)*i:0),d)for(;;)if(p==0){(m[0]+=i)==Ia&&(m[0]=1,++e.e);break}else{if(m[p]+=i,m[p]!=Ia)break;m[p--]=0,i=1}for(a=m.length;m[--a]===0;)m.pop();if(An&&(e.e>ky||e.e<-ky))throw Error(Rk+ra(e));return e}function H9(e,t){var r,a,s,i,o,l,d,u,p,m,h=e.constructor,x=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),An?un(t,x):t;if(d=e.d,m=t.d,a=t.e,u=e.e,d=d.slice(),o=u-a,o){for(p=o<0,p?(r=d,o=-o,l=m.length):(r=m,a=u,l=d.length),s=Math.max(Math.ceil(x/vn),l)+2,o>s&&(o=s,r.length=1),r.reverse(),s=o;s--;)r.push(0);r.reverse()}else{for(s=d.length,l=m.length,p=s<l,p&&(l=s),s=0;s<l;s++)if(d[s]!=m[s]){p=d[s]<m[s];break}o=0}for(p&&(r=d,d=m,m=r,t.s=-t.s),l=d.length,s=m.length-l;s>0;--s)d[l++]=0;for(s=m.length;s>o;){if(d[--s]<m[s]){for(i=s;i&&d[--i]===0;)d[i]=Ia-1;--d[i],d[s]+=Ia}d[s]-=m[s]}for(;d[--l]===0;)d.pop();for(;d[0]===0;d.shift())--a;return d[0]?(t.d=d,t.e=a,An?un(t,x):t):new h(0)}function tf(e,t,r){var a,s=ra(e),i=xl(e.d),o=i.length;return t?(r&&(a=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+wd(a):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+wd(-s-1)+i,r&&(a=r-o)>0&&(i+=wd(a))):s>=o?(i+=wd(s+1-o),r&&(a=r-s-1)>0&&(i=i+"."+wd(a))):((a=s+1)<o&&(i=i.slice(0,a)+"."+i.slice(a)),r&&(a=r-o)>0&&(s+1===o&&(i+="."),i+=wd(a))),e.s<0?"-"+i:i}function HL(e,t){if(e.length>t)return e.length=t,!0}function G9(e){var t,r,a;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(qu+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return UL(o,i.toString())}else if(typeof i!="string")throw Error(qu+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,Pce.test(i))UL(o,i);else throw Error(qu+i)}if(s.prototype=wt,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=G9,s.config=s.set=Dce,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(r=a[t++])||(e[r]=this[r]);return s.config(e),s}function Dce(e){if(!e||typeof e!="object")throw Error(no+"Object expected");var t,r,a,s=["precision",1,Ip,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((a=e[r=s[t]])!==void 0)if(Mp(a)===a&&a>=s[t+1]&&a<=s[t+2])this[r]=a;else throw Error(qu+r+": "+a);if((a=e[r="LN10"])!==void 0)if(a==Math.LN10)this[r]=new this(a);else throw Error(qu+r+": "+a);return this}var Pk=G9(Rce);vi=new Pk(1);const rn=Pk;function Ice(e){return Fce(e)||$ce(e)||Lce(e)||Mce()}function Mce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lce(e,t){if(e){if(typeof e=="string")return u_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u_(e,t)}}function $ce(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Fce(e){if(Array.isArray(e))return u_(e)}function u_(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var Bce=function(t){return t},K9={},z9=function(t){return t===K9},GL=function(t){return function r(){return arguments.length===0||arguments.length===1&&z9(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},Uce=function e(t,r){return t===1?r:GL(function(){for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];var o=s.filter(function(l){return l!==K9}).length;return o>=t?r.apply(void 0,s):e(t-o,GL(function(){for(var l=arguments.length,d=new Array(l),u=0;u<l;u++)d[u]=arguments[u];var p=s.map(function(m){return z9(m)?d.shift():m});return r.apply(void 0,Ice(p).concat(d))}))})},N1=function(t){return Uce(t.length,t)},f_=function(t,r){for(var a=[],s=t;s<r;++s)a[s-t]=s;return a},Hce=N1(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),Gce=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];if(!r.length)return Bce;var s=r.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce(function(l,d){return d(l)},i.apply(void 0,arguments))}},m_=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},q9=function(t){var r=null,a=null;return function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r&&i.every(function(l,d){return l===r[d]})||(r=i,a=t.apply(void 0,i)),a}};function Kce(e){var t;return e===0?t=1:t=Math.floor(new rn(e).abs().log(10).toNumber())+1,t}function zce(e,t,r){for(var a=new rn(e),s=0,i=[];a.lt(t)&&s<1e5;)i.push(a.toNumber()),a=a.add(r),s++;return i}var qce=N1(function(e,t,r){var a=+e,s=+t;return a+r*(s-a)}),Wce=N1(function(e,t,r){var a=t-+e;return a=a||1/0,(r-e)/a}),Vce=N1(function(e,t,r){var a=t-+e;return a=a||1/0,Math.max(0,Math.min(1,(r-e)/a))});const S1={rangeStep:zce,getDigitCount:Kce,interpolateNumber:qce,uninterpolateNumber:Wce,uninterpolateTruncation:Vce};function p_(e){return Qce(e)||Xce(e)||W9(e)||Yce()}function Yce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xce(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Qce(e){if(Array.isArray(e))return h_(e)}function $0(e,t){return ede(e)||Jce(e,t)||W9(e,t)||Zce()}function Zce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W9(e,t){if(e){if(typeof e=="string")return h_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h_(e,t)}}function h_(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Jce(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],a=!0,s=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done)&&(r.push(l.value),!(t&&r.length===t));a=!0);}catch(d){s=!0,i=d}finally{try{!a&&o.return!=null&&o.return()}finally{if(s)throw i}}return r}}function ede(e){if(Array.isArray(e))return e}function V9(e){var t=$0(e,2),r=t[0],a=t[1],s=r,i=a;return r>a&&(s=a,i=r),[s,i]}function Y9(e,t,r){if(e.lte(0))return new rn(0);var a=S1.getDigitCount(e.toNumber()),s=new rn(10).pow(a),i=e.div(s),o=a!==1?.05:.1,l=new rn(Math.ceil(i.div(o).toNumber())).add(r).mul(o),d=l.mul(s);return t?d:new rn(Math.ceil(d))}function tde(e,t,r){var a=1,s=new rn(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(a=new rn(10).pow(S1.getDigitCount(e)-1),s=new rn(Math.floor(s.div(a).toNumber())).mul(a)):i>1&&(s=new rn(Math.floor(e)))}else e===0?s=new rn(Math.floor((t-1)/2)):r||(s=new rn(Math.floor(e)));var o=Math.floor((t-1)/2),l=Gce(Hce(function(d){return s.add(new rn(d-o).mul(a)).toNumber()}),f_);return l(0,t)}function X9(e,t,r,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new rn(0),tickMin:new rn(0),tickMax:new rn(0)};var i=Y9(new rn(t).sub(e).div(r-1),a,s),o;e<=0&&t>=0?o=new rn(0):(o=new rn(e).add(t).div(2),o=o.sub(new rn(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),d=Math.ceil(new rn(t).sub(o).div(i).toNumber()),u=l+d+1;return u>r?X9(e,t,r,a,s+1):(u<r&&(d=t>0?d+(r-u):d,l=t>0?l:l+(r-u)),{step:i,tickMin:o.sub(new rn(l).mul(i)),tickMax:o.add(new rn(d).mul(i))})}function rde(e){var t=$0(e,2),r=t[0],a=t[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(s,2),l=V9([r,a]),d=$0(l,2),u=d[0],p=d[1];if(u===-1/0||p===1/0){var m=p===1/0?[u].concat(p_(f_(0,s-1).map(function(){return 1/0}))):[].concat(p_(f_(0,s-1).map(function(){return-1/0})),[p]);return r>a?m_(m):m}if(u===p)return tde(u,s,i);var h=X9(u,p,o,i),x=h.step,y=h.tickMin,N=h.tickMax,v=S1.rangeStep(y,N.add(new rn(.1).mul(x)),x);return r>a?m_(v):v}function nde(e,t){var r=$0(e,2),a=r[0],s=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=V9([a,s]),l=$0(o,2),d=l[0],u=l[1];if(d===-1/0||u===1/0)return[a,s];if(d===u)return[d];var p=Math.max(t,2),m=Y9(new rn(u).sub(d).div(p-1),i,0),h=[].concat(p_(S1.rangeStep(new rn(d),new rn(u).sub(new rn(.99).mul(m)),m)),[u]);return a>s?m_(h):h}var ade=q9(rde),sde=q9(nde),ide="Invariant failed";function rf(e,t){throw new Error(ide)}var ode=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function qm(e){"@babel/helpers - typeof";return qm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qm(e)}function Ry(){return Ry=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ry.apply(this,arguments)}function lde(e,t){return fde(e)||ude(e,t)||dde(e,t)||cde()}function cde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dde(e,t){if(e){if(typeof e=="string")return KL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return KL(e,t)}}function KL(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function ude(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(p){u=!0,s=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function fde(e){if(Array.isArray(e))return e}function mde(e,t){if(e==null)return{};var r=pde(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function pde(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function hde(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gde(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,J9(a.key),a)}}function xde(e,t,r){return t&&gde(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function bde(e,t,r){return t=Py(t),yde(e,Q9()?Reflect.construct(t,r||[],Py(e).constructor):t.apply(e,r))}function yde(e,t){if(t&&(qm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vde(e)}function vde(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Q9=function(){return!!e})()}function Py(e){return Py=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Py(e)}function Nde(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g_(e,t)}function g_(e,t){return g_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},g_(e,t)}function Z9(e,t,r){return t=J9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function J9(e){var t=Sde(e,"string");return qm(t)=="symbol"?t:t+""}function Sde(e,t){if(qm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(qm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Lp=(function(e){function t(){return hde(this,t),bde(this,t,arguments)}return Nde(t,e),xde(t,[{key:"render",value:function(){var a=this.props,s=a.offset,i=a.layout,o=a.width,l=a.dataKey,d=a.data,u=a.dataPointFormatter,p=a.xAxis,m=a.yAxis,h=mde(a,ode),x=Rt(h,!1);this.props.direction==="x"&&p.type!=="number"&&rf();var y=d.map(function(N){var v=u(N,l),j=v.x,E=v.y,C=v.value,A=v.errorVal;if(!A)return null;var S=[],_,O;if(Array.isArray(A)){var D=lde(A,2);_=D[0],O=D[1]}else _=O=A;if(i==="vertical"){var k=p.scale,M=E+s,F=M+o,$=M-o,B=k(C-_),P=k(C+O);S.push({x1:P,y1:F,x2:P,y2:$}),S.push({x1:B,y1:M,x2:P,y2:M}),S.push({x1:B,y1:F,x2:B,y2:$})}else if(i==="horizontal"){var W=m.scale,K=j+s,G=K-o,U=K+o,te=W(C-_),re=W(C+O);S.push({x1:G,y1:re,x2:U,y2:re}),S.push({x1:K,y1:te,x2:K,y2:re}),S.push({x1:G,y1:te,x2:U,y2:te})}return Y.createElement(cr,Ry({className:"recharts-errorBar",key:"bar-".concat(S.map(function(q){return"".concat(q.x1,"-").concat(q.x2,"-").concat(q.y1,"-").concat(q.y2)}))},x),S.map(function(q){return Y.createElement("line",Ry({},q,{key:"line-".concat(q.x1,"-").concat(q.x2,"-").concat(q.y1,"-").concat(q.y2)}))}))});return Y.createElement(cr,{className:"recharts-errorBars"},y)}}])})(Y.Component);Z9(Lp,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});Z9(Lp,"displayName","ErrorBar");function F0(e){"@babel/helpers - typeof";return F0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F0(e)}function zL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Eu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zL(Object(r),!0).forEach(function(a){jde(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zL(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function jde(e,t,r){return t=wde(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wde(e){var t=Ede(e,"string");return F0(t)=="symbol"?t:t+""}function Ede(e,t){if(F0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(F0(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var eH=function(t){var r=t.children,a=t.formattedGraphicalItems,s=t.legendWidth,i=t.legendContent,o=us(r,El);if(!o)return null;var l=El.defaultProps,d=l!==void 0?Eu(Eu({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:i==="children"?u=(a||[]).reduce(function(p,m){var h=m.item,x=m.props,y=x.sectors||x.data||[];return p.concat(y.map(function(N){return{type:o.props.iconType||h.props.legendType,value:N.name,color:N.fill,payload:N}}))},[]):u=(a||[]).map(function(p){var m=p.item,h=m.type.defaultProps,x=h!==void 0?Eu(Eu({},h),m.props):{},y=x.dataKey,N=x.name,v=x.legendType,j=x.hide;return{inactive:j,dataKey:y,type:d.iconType||v||"square",color:Dk(m),value:N||y,payload:x}}),Eu(Eu(Eu({},d),El.getWithHeight(o,s)),{},{payload:u,item:o})};function B0(e){"@babel/helpers - typeof";return B0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B0(e)}function qL(e){return Tde(e)||_de(e)||Cde(e)||Ade()}function Ade(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cde(e,t){if(e){if(typeof e=="string")return x_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x_(e,t)}}function _de(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Tde(e){if(Array.isArray(e))return x_(e)}function x_(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function WL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Bn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WL(Object(r),!0).forEach(function(a){Sm(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WL(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Sm(e,t,r){return t=Ode(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ode(e){var t=kde(e,"string");return B0(t)=="symbol"?t:t+""}function kde(e,t){if(B0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(B0(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dn(e,t,r){return Qt(e)||Qt(t)?r:va(t)?Js(e,t,r):Gt(t)?t(e):r}function m0(e,t,r,a){var s=Tce(e,function(l){return dn(l,t)});if(r==="number"){var i=s.filter(function(l){return et(l)||parseFloat(l)});return i.length?[v1(i),Od(i)]:[1/0,-1/0]}var o=a?s.filter(function(l){return!Qt(l)}):s;return o.map(function(l){return va(l)||l instanceof Date?l:""})}var Rde=function(t){var r,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=a?.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var d=i.range,u=0;u<l;u++){var p=u>0?s[u-1].coordinate:s[l-1].coordinate,m=s[u].coordinate,h=u>=l-1?s[0].coordinate:s[u+1].coordinate,x=void 0;if(Os(m-p)!==Os(h-m)){var y=[];if(Os(h-m)===Os(d[1]-d[0])){x=h;var N=m+d[1]-d[0];y[0]=Math.min(N,(N+p)/2),y[1]=Math.max(N,(N+p)/2)}else{x=p;var v=h+d[1]-d[0];y[0]=Math.min(m,(v+m)/2),y[1]=Math.max(m,(v+m)/2)}var j=[Math.min(m,(x+m)/2),Math.max(m,(x+m)/2)];if(t>j[0]&&t<=j[1]||t>=y[0]&&t<=y[1]){o=s[u].index;break}}else{var E=Math.min(p,h),C=Math.max(p,h);if(t>(E+m)/2&&t<=(C+m)/2){o=s[u].index;break}}}else for(var A=0;A<l;A++)if(A===0&&t<=(a[A].coordinate+a[A+1].coordinate)/2||A>0&&A<l-1&&t>(a[A].coordinate+a[A-1].coordinate)/2&&t<=(a[A].coordinate+a[A+1].coordinate)/2||A===l-1&&t>(a[A].coordinate+a[A-1].coordinate)/2){o=a[A].index;break}return o},Dk=function(t){var r,a=t,s=a.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Bn(Bn({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,d;switch(s){case"Line":d=o;break;case"Area":case"Radar":d=o&&o!=="none"?o:l;break;default:d=l;break}return d},Pde=function(t){var r=t.barSize,a=t.totalSize,s=t.stackGroups,i=s===void 0?{}:s;if(!i)return{};for(var o={},l=Object.keys(i),d=0,u=l.length;d<u;d++)for(var p=i[l[d]].stackGroups,m=Object.keys(p),h=0,x=m.length;h<x;h++){var y=p[m[h]],N=y.items,v=y.cateAxisId,j=N.filter(function(O){return Sc(O.type).indexOf("Bar")>=0});if(j&&j.length){var E=j[0].type.defaultProps,C=E!==void 0?Bn(Bn({},E),j[0].props):j[0].props,A=C.barSize,S=C[v];o[S]||(o[S]=[]);var _=Qt(A)?r:A;o[S].push({item:j[0],stackList:j.slice(1),barSize:Qt(_)?void 0:ks(_,a,0)})}}return o},Dde=function(t){var r=t.barGap,a=t.barCategoryGap,s=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,d=o.length;if(d<1)return null;var u=ks(r,s,0,!0),p,m=[];if(o[0].barSize===+o[0].barSize){var h=!1,x=s/d,y=o.reduce(function(A,S){return A+S.barSize||0},0);y+=(d-1)*u,y>=s&&(y-=(d-1)*u,u=0),y>=s&&x>0&&(h=!0,x*=.9,y=d*x);var N=(s-y)/2>>0,v={offset:N-u,size:0};p=o.reduce(function(A,S){var _={item:S.item,position:{offset:v.offset+v.size+u,size:h?x:S.barSize}},O=[].concat(qL(A),[_]);return v=O[O.length-1].position,S.stackList&&S.stackList.length&&S.stackList.forEach(function(D){O.push({item:D,position:v})}),O},m)}else{var j=ks(a,s,0,!0);s-2*j-(d-1)*u<=0&&(u=0);var E=(s-2*j-(d-1)*u)/d;E>1&&(E>>=0);var C=l===+l?Math.min(E,l):E;p=o.reduce(function(A,S,_){var O=[].concat(qL(A),[{item:S.item,position:{offset:j+(E+u)*_+(E-C)/2,size:C}}]);return S.stackList&&S.stackList.length&&S.stackList.forEach(function(D){O.push({item:D,position:O[O.length-1].position})}),O},m)}return p},Ide=function(t,r,a,s){var i=a.children,o=a.width,l=a.margin,d=o-(l.left||0)-(l.right||0),u=eH({children:i,legendWidth:d});if(u){var p=s||{},m=p.width,h=p.height,x=u.align,y=u.verticalAlign,N=u.layout;if((N==="vertical"||N==="horizontal"&&y==="middle")&&x!=="center"&&et(t[x]))return Bn(Bn({},t),{},Sm({},x,t[x]+(m||0)));if((N==="horizontal"||N==="vertical"&&x==="center")&&y!=="middle"&&et(t[y]))return Bn(Bn({},t),{},Sm({},y,t[y]+(h||0)))}return t},Mde=function(t,r,a){return Qt(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||a==="x"?r==="xAxis":a==="y"?r==="yAxis":!0},tH=function(t,r,a,s,i){var o=r.props.children,l=Ds(o,Lp).filter(function(u){return Mde(s,i,u.props.direction)});if(l&&l.length){var d=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,p){var m=dn(p,a);if(Qt(m))return u;var h=Array.isArray(m)?[v1(m),Od(m)]:[m,m],x=d.reduce(function(y,N){var v=dn(p,N,0),j=h[0]-Math.abs(Array.isArray(v)?v[0]:v),E=h[1]+Math.abs(Array.isArray(v)?v[1]:v);return[Math.min(j,y[0]),Math.max(E,y[1])]},[1/0,-1/0]);return[Math.min(x[0],u[0]),Math.max(x[1],u[1])]},[1/0,-1/0])}return null},Lde=function(t,r,a,s,i){var o=r.map(function(l){return tH(t,l,a,i,s)}).filter(function(l){return!Qt(l)});return o&&o.length?o.reduce(function(l,d){return[Math.min(l[0],d[0]),Math.max(l[1],d[1])]},[1/0,-1/0]):null},rH=function(t,r,a,s,i){var o=r.map(function(d){var u=d.props.dataKey;return a==="number"&&u&&tH(t,d,u,s)||m0(t,u,a,i)});if(a==="number")return o.reduce(function(d,u){return[Math.min(d[0],u[0]),Math.max(d[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(d,u){for(var p=0,m=u.length;p<m;p++)l[u[p]]||(l[u[p]]=!0,d.push(u[p]));return d},[])},nH=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},aH=function(t,r,a,s){if(s)return t.map(function(d){return d.coordinate});var i,o,l=t.map(function(d){return d.coordinate===r&&(i=!0),d.coordinate===a&&(o=!0),d.coordinate});return i||l.push(r),o||l.push(a),l},vc=function(t,r,a){if(!t)return null;var s=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,d=t.realScaleType==="scaleBand"?s.bandwidth()/2:2,u=(r||a)&&o==="category"&&s.bandwidth?s.bandwidth()/d:0;if(u=t.axisType==="angleAxis"&&l?.length>=2?Os(l[0]-l[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var p=(t.ticks||t.niceTicks).map(function(m){var h=i?i.indexOf(m):m;return{coordinate:s(h)+u,value:m,offset:u}});return p.filter(function(m){return!Wd(m.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(m,h){return{coordinate:s(m)+u,value:m,index:h,offset:u}}):s.ticks&&!a?s.ticks(t.tickCount).map(function(m){return{coordinate:s(m)+u,value:m,offset:u}}):s.domain().map(function(m,h){return{coordinate:s(m)+u,value:i?i[m]:m,index:h,offset:u}})},Ww=new WeakMap,Xx=function(t,r){if(typeof r!="function")return t;Ww.has(t)||Ww.set(t,new WeakMap);var a=Ww.get(t);if(a.has(r))return a.get(r);var s=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return a.set(r,s),s},sH=function(t,r,a){var s=t.scale,i=t.type,o=t.layout,l=t.axisType;if(s==="auto")return o==="radial"&&l==="radiusAxis"?{scale:P0(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:Cy(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!a)?{scale:f0(),realScaleType:"point"}:i==="category"?{scale:P0(),realScaleType:"band"}:{scale:Cy(),realScaleType:"linear"};if(Zu(s)){var d="scale".concat(a1(s));return{scale:(RL[d]||f0)(),realScaleType:RL[d]?d:"point"}}return Gt(s)?{scale:s}:{scale:f0(),realScaleType:"point"}},VL=1e-4,iH=function(t){var r=t.domain();if(!(!r||r.length<=2)){var a=r.length,s=t.range(),i=Math.min(s[0],s[1])-VL,o=Math.max(s[0],s[1])+VL,l=t(r[0]),d=t(r[a-1]);(l<i||l>o||d<i||d>o)&&t.domain([r[0],r[a-1]])}},$de=function(t,r){if(!t)return null;for(var a=0,s=t.length;a<s;a++)if(t[a].item===r)return t[a].position;return null},Fde=function(t,r){if(!r||r.length!==2||!et(r[0])||!et(r[1]))return t;var a=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!et(t[0])||t[0]<a)&&(i[0]=a),(!et(t[1])||t[1]>s)&&(i[1]=s),i[0]>s&&(i[0]=s),i[1]<a&&(i[1]=a),i},Bde=function(t){var r=t.length;if(!(r<=0))for(var a=0,s=t[0].length;a<s;++a)for(var i=0,o=0,l=0;l<r;++l){var d=Wd(t[l][a][1])?t[l][a][0]:t[l][a][1];d>=0?(t[l][a][0]=i,t[l][a][1]=i+d,i=t[l][a][1]):(t[l][a][0]=o,t[l][a][1]=o+d,o=t[l][a][1])}},Ude=function(t){var r=t.length;if(!(r<=0))for(var a=0,s=t[0].length;a<s;++a)for(var i=0,o=0;o<r;++o){var l=Wd(t[o][a][1])?t[o][a][0]:t[o][a][1];l>=0?(t[o][a][0]=i,t[o][a][1]=i+l,i=t[o][a][1]):(t[o][a][0]=0,t[o][a][1]=0)}},Hde={sign:Bde,expand:Cne,none:Lm,silhouette:_ne,wiggle:Tne,positive:Ude},Gde=function(t,r,a){var s=r.map(function(l){return l.props.dataKey}),i=Hde[a],o=Ane().keys(s).value(function(l,d){return+dn(l,d,0)}).order(WC).offset(i);return o(t)},Kde=function(t,r,a,s,i,o){if(!t)return null;var l=o?r.reverse():r,d={},u=l.reduce(function(m,h){var x,y=(x=h.type)!==null&&x!==void 0&&x.defaultProps?Bn(Bn({},h.type.defaultProps),h.props):h.props,N=y.stackId,v=y.hide;if(v)return m;var j=y[a],E=m[j]||{hasStack:!1,stackGroups:{}};if(va(N)){var C=E.stackGroups[N]||{numericAxisId:a,cateAxisId:s,items:[]};C.items.push(h),E.hasStack=!0,E.stackGroups[N]=C}else E.stackGroups[Lc("_stackId_")]={numericAxisId:a,cateAxisId:s,items:[h]};return Bn(Bn({},m),{},Sm({},j,E))},d),p={};return Object.keys(u).reduce(function(m,h){var x=u[h];if(x.hasStack){var y={};x.stackGroups=Object.keys(x.stackGroups).reduce(function(N,v){var j=x.stackGroups[v];return Bn(Bn({},N),{},Sm({},v,{numericAxisId:a,cateAxisId:s,items:j.items,stackedData:Gde(t,j.items,i)}))},y)}return Bn(Bn({},m),{},Sm({},h,x))},p)},oH=function(t,r){var a=r.realScaleType,s=r.type,i=r.tickCount,o=r.originalDomain,l=r.allowDecimals,d=a||r.scale;if(d!=="auto"&&d!=="linear")return null;if(i&&s==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var p=ade(u,i,l);return t.domain([v1(p),Od(p)]),{niceTicks:p}}if(i&&s==="number"){var m=t.domain(),h=sde(m,i,l);return{niceTicks:h}}return null};function Wm(e){var t=e.axis,r=e.ticks,a=e.bandSize,s=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Qt(s[t.dataKey])){var l=iy(r,"value",s[t.dataKey]);if(l)return l.coordinate+a/2}return r[i]?r[i].coordinate+a/2:null}var d=dn(s,Qt(o)?t.dataKey:o);return Qt(d)?null:t.scale(d)}var YL=function(t){var r=t.axis,a=t.ticks,s=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(r.type==="category")return a[l]?a[l].coordinate+s:null;var d=dn(o,r.dataKey,r.domain[l]);return Qt(d)?null:r.scale(d)-i/2+s},zde=function(t){var r=t.numericAxis,a=r.scale.domain();if(r.type==="number"){var s=Math.min(a[0],a[1]),i=Math.max(a[0],a[1]);return s<=0&&i>=0?0:i<0?i:s}return a[0]},qde=function(t,r){var a,s=(a=t.type)!==null&&a!==void 0&&a.defaultProps?Bn(Bn({},t.type.defaultProps),t.props):t.props,i=s.stackId;if(va(i)){var o=r[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},Wde=function(t){return t.reduce(function(r,a){return[v1(a.concat([r[0]]).filter(et)),Od(a.concat([r[1]]).filter(et))]},[1/0,-1/0])},lH=function(t,r,a){return Object.keys(t).reduce(function(s,i){var o=t[i],l=o.stackedData,d=l.reduce(function(u,p){var m=Wde(p.slice(r,a+1));return[Math.min(u[0],m[0]),Math.max(u[1],m[1])]},[1/0,-1/0]);return[Math.min(d[0],s[0]),Math.max(d[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},XL=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,QL=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,b_=function(t,r,a){if(Gt(t))return t(r,a);if(!Array.isArray(t))return r;var s=[];if(et(t[0]))s[0]=a?t[0]:Math.min(t[0],r[0]);else if(XL.test(t[0])){var i=+XL.exec(t[0])[1];s[0]=r[0]-i}else Gt(t[0])?s[0]=t[0](r[0]):s[0]=r[0];if(et(t[1]))s[1]=a?t[1]:Math.max(t[1],r[1]);else if(QL.test(t[1])){var o=+QL.exec(t[1])[1];s[1]=r[1]+o}else Gt(t[1])?s[1]=t[1](r[1]):s[1]=r[1];return s},Dy=function(t,r,a){if(t&&t.scale&&t.scale.bandwidth){var s=t.scale.bandwidth();if(!a||s>0)return s}if(t&&r&&r.length>=2){for(var i=ik(r,function(m){return m.coordinate}),o=1/0,l=1,d=i.length;l<d;l++){var u=i[l],p=i[l-1];o=Math.min((u.coordinate||0)-(p.coordinate||0),o)}return o===1/0?0:o}return a?void 0:0},ZL=function(t,r,a){return!t||!t.length||Hd(t,Js(a,"type.defaultProps.domain"))?r:t},cH=function(t,r){var a=t.type.defaultProps?Bn(Bn({},t.type.defaultProps),t.props):t.props,s=a.dataKey,i=a.name,o=a.unit,l=a.formatter,d=a.tooltipType,u=a.chartType,p=a.hide;return Bn(Bn({},Rt(t,!1)),{},{dataKey:s,unit:o,formatter:l,name:i||s,color:Dk(t),value:dn(r,s),type:d,payload:r,chartType:u,hide:p})};function U0(e){"@babel/helpers - typeof";return U0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U0(e)}function JL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function uc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JL(Object(r),!0).forEach(function(a){dH(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JL(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function dH(e,t,r){return t=Vde(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vde(e){var t=Yde(e,"string");return U0(t)=="symbol"?t:t+""}function Yde(e,t){if(U0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(U0(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xde(e,t){return eue(e)||Jde(e,t)||Zde(e,t)||Qde()}function Qde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zde(e,t){if(e){if(typeof e=="string")return e$(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e$(e,t)}}function e$(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Jde(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(p){u=!0,s=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function eue(e){if(Array.isArray(e))return e}var Iy=Math.PI/180,tue=function(t){return t*180/Math.PI},bn=function(t,r,a,s){return{x:t+Math.cos(-Iy*s)*a,y:r+Math.sin(-Iy*s)*a}},uH=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(a.left||0)-(a.right||0)),Math.abs(r-(a.top||0)-(a.bottom||0)))/2},rue=function(t,r,a,s,i){var o=t.width,l=t.height,d=t.startAngle,u=t.endAngle,p=ks(t.cx,o,o/2),m=ks(t.cy,l,l/2),h=uH(o,l,a),x=ks(t.innerRadius,h,0),y=ks(t.outerRadius,h,h*.8),N=Object.keys(r);return N.reduce(function(v,j){var E=r[j],C=E.domain,A=E.reversed,S;if(Qt(E.range))s==="angleAxis"?S=[d,u]:s==="radiusAxis"&&(S=[x,y]),A&&(S=[S[1],S[0]]);else{S=E.range;var _=S,O=Xde(_,2);d=O[0],u=O[1]}var D=sH(E,i),k=D.realScaleType,M=D.scale;M.domain(C).range(S),iH(M);var F=oH(M,uc(uc({},E),{},{realScaleType:k})),$=uc(uc(uc({},E),F),{},{range:S,radius:y,realScaleType:k,scale:M,cx:p,cy:m,innerRadius:x,outerRadius:y,startAngle:d,endAngle:u});return uc(uc({},v),{},dH({},j,$))},{})},nue=function(t,r){var a=t.x,s=t.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(a-i,2)+Math.pow(s-o,2))},aue=function(t,r){var a=t.x,s=t.y,i=r.cx,o=r.cy,l=nue({x:a,y:s},{x:i,y:o});if(l<=0)return{radius:l};var d=(a-i)/l,u=Math.acos(d);return s>o&&(u=2*Math.PI-u),{radius:l,angle:tue(u),angleInRadian:u}},sue=function(t){var r=t.startAngle,a=t.endAngle,s=Math.floor(r/360),i=Math.floor(a/360),o=Math.min(s,i);return{startAngle:r-o*360,endAngle:a-o*360}},iue=function(t,r){var a=r.startAngle,s=r.endAngle,i=Math.floor(a/360),o=Math.floor(s/360),l=Math.min(i,o);return t+l*360},t$=function(t,r){var a=t.x,s=t.y,i=aue({x:a,y:s},r),o=i.radius,l=i.angle,d=r.innerRadius,u=r.outerRadius;if(o<d||o>u)return!1;if(o===0)return!0;var p=sue(r),m=p.startAngle,h=p.endAngle,x=l,y;if(m<=h){for(;x>h;)x-=360;for(;x<m;)x+=360;y=x>=m&&x<=h}else{for(;x>m;)x-=360;for(;x<h;)x+=360;y=x>=h&&x<=m}return y?uc(uc({},r),{},{radius:o,angle:iue(x,r)}):null},fH=function(t){return!g.isValidElement(t)&&!Gt(t)&&typeof t!="boolean"?t.className:""};function H0(e){"@babel/helpers - typeof";return H0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},H0(e)}var oue=["offset"];function lue(e){return fue(e)||uue(e)||due(e)||cue()}function cue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function due(e,t){if(e){if(typeof e=="string")return y_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y_(e,t)}}function uue(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function fue(e){if(Array.isArray(e))return y_(e)}function y_(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function mue(e,t){if(e==null)return{};var r=pue(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function pue(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function r$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function pa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?r$(Object(r),!0).forEach(function(a){hue(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r$(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function hue(e,t,r){return t=gue(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gue(e){var t=xue(e,"string");return H0(t)=="symbol"?t:t+""}function xue(e,t){if(H0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(H0(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function G0(){return G0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},G0.apply(this,arguments)}var bue=function(t){var r=t.value,a=t.formatter,s=Qt(t.children)?r:t.children;return Gt(a)?a(s):s},yue=function(t,r){var a=Os(r-t),s=Math.min(Math.abs(r-t),360);return a*s},vue=function(t,r,a){var s=t.position,i=t.viewBox,o=t.offset,l=t.className,d=i,u=d.cx,p=d.cy,m=d.innerRadius,h=d.outerRadius,x=d.startAngle,y=d.endAngle,N=d.clockWise,v=(m+h)/2,j=yue(x,y),E=j>=0?1:-1,C,A;s==="insideStart"?(C=x+E*o,A=N):s==="insideEnd"?(C=y-E*o,A=!N):s==="end"&&(C=y+E*o,A=N),A=j<=0?A:!A;var S=bn(u,p,v,C),_=bn(u,p,v,C+(A?1:-1)*359),O="M".concat(S.x,",").concat(S.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(A?0:1,`,
    `).concat(_.x,",").concat(_.y),D=Qt(t.id)?Lc("recharts-radial-line-"):t.id;return Y.createElement("text",G0({},a,{dominantBaseline:"central",className:ar("recharts-radial-bar-label",l)}),Y.createElement("defs",null,Y.createElement("path",{id:D,d:O})),Y.createElement("textPath",{xlinkHref:"#".concat(D)},r))},Nue=function(t){var r=t.viewBox,a=t.offset,s=t.position,i=r,o=i.cx,l=i.cy,d=i.innerRadius,u=i.outerRadius,p=i.startAngle,m=i.endAngle,h=(p+m)/2;if(s==="outside"){var x=bn(o,l,u+a,h),y=x.x,N=x.y;return{x:y,y:N,textAnchor:y>=o?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var v=(d+u)/2,j=bn(o,l,v,h),E=j.x,C=j.y;return{x:E,y:C,textAnchor:"middle",verticalAnchor:"middle"}},Sue=function(t){var r=t.viewBox,a=t.parentViewBox,s=t.offset,i=t.position,o=r,l=o.x,d=o.y,u=o.width,p=o.height,m=p>=0?1:-1,h=m*s,x=m>0?"end":"start",y=m>0?"start":"end",N=u>=0?1:-1,v=N*s,j=N>0?"end":"start",E=N>0?"start":"end";if(i==="top"){var C={x:l+u/2,y:d-m*s,textAnchor:"middle",verticalAnchor:x};return pa(pa({},C),a?{height:Math.max(d-a.y,0),width:u}:{})}if(i==="bottom"){var A={x:l+u/2,y:d+p+h,textAnchor:"middle",verticalAnchor:y};return pa(pa({},A),a?{height:Math.max(a.y+a.height-(d+p),0),width:u}:{})}if(i==="left"){var S={x:l-v,y:d+p/2,textAnchor:j,verticalAnchor:"middle"};return pa(pa({},S),a?{width:Math.max(S.x-a.x,0),height:p}:{})}if(i==="right"){var _={x:l+u+v,y:d+p/2,textAnchor:E,verticalAnchor:"middle"};return pa(pa({},_),a?{width:Math.max(a.x+a.width-_.x,0),height:p}:{})}var O=a?{width:u,height:p}:{};return i==="insideLeft"?pa({x:l+v,y:d+p/2,textAnchor:E,verticalAnchor:"middle"},O):i==="insideRight"?pa({x:l+u-v,y:d+p/2,textAnchor:j,verticalAnchor:"middle"},O):i==="insideTop"?pa({x:l+u/2,y:d+h,textAnchor:"middle",verticalAnchor:y},O):i==="insideBottom"?pa({x:l+u/2,y:d+p-h,textAnchor:"middle",verticalAnchor:x},O):i==="insideTopLeft"?pa({x:l+v,y:d+h,textAnchor:E,verticalAnchor:y},O):i==="insideTopRight"?pa({x:l+u-v,y:d+h,textAnchor:j,verticalAnchor:y},O):i==="insideBottomLeft"?pa({x:l+v,y:d+p-h,textAnchor:E,verticalAnchor:x},O):i==="insideBottomRight"?pa({x:l+u-v,y:d+p-h,textAnchor:j,verticalAnchor:x},O):Op(i)&&(et(i.x)||Lu(i.x))&&(et(i.y)||Lu(i.y))?pa({x:l+ks(i.x,u),y:d+ks(i.y,p),textAnchor:"end",verticalAnchor:"end"},O):pa({x:l+u/2,y:d+p/2,textAnchor:"middle",verticalAnchor:"middle"},O)},jue=function(t){return"cx"in t&&et(t.cx)};function Ma(e){var t=e.offset,r=t===void 0?5:t,a=mue(e,oue),s=pa({offset:r},a),i=s.viewBox,o=s.position,l=s.value,d=s.children,u=s.content,p=s.className,m=p===void 0?"":p,h=s.textBreakAll;if(!i||Qt(l)&&Qt(d)&&!g.isValidElement(u)&&!Gt(u))return null;if(g.isValidElement(u))return g.cloneElement(u,s);var x;if(Gt(u)){if(x=g.createElement(u,s),g.isValidElement(x))return x}else x=bue(s);var y=jue(i),N=Rt(s,!0);if(y&&(o==="insideStart"||o==="insideEnd"||o==="end"))return vue(s,x,N);var v=y?Nue(s):Sue(s);return Y.createElement(Ju,G0({className:ar("recharts-label",m)},N,v,{breakAll:h}),x)}Ma.displayName="Label";var mH=function(t){var r=t.cx,a=t.cy,s=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,d=t.radius,u=t.innerRadius,p=t.outerRadius,m=t.x,h=t.y,x=t.top,y=t.left,N=t.width,v=t.height,j=t.clockWise,E=t.labelViewBox;if(E)return E;if(et(N)&&et(v)){if(et(m)&&et(h))return{x:m,y:h,width:N,height:v};if(et(x)&&et(y))return{x,y,width:N,height:v}}return et(m)&&et(h)?{x:m,y:h,width:0,height:0}:et(r)&&et(a)?{cx:r,cy:a,startAngle:i||s||0,endAngle:o||s||0,innerRadius:u||0,outerRadius:p||d||l||0,clockWise:j}:t.viewBox?t.viewBox:{}},wue=function(t,r){return t?t===!0?Y.createElement(Ma,{key:"label-implicit",viewBox:r}):va(t)?Y.createElement(Ma,{key:"label-implicit",viewBox:r,value:t}):g.isValidElement(t)?t.type===Ma?g.cloneElement(t,{key:"label-implicit",viewBox:r}):Y.createElement(Ma,{key:"label-implicit",content:t,viewBox:r}):Gt(t)?Y.createElement(Ma,{key:"label-implicit",content:t,viewBox:r}):Op(t)?Y.createElement(Ma,G0({viewBox:r},t,{key:"label-implicit"})):null:null},Eue=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&a&&!t.label)return null;var s=t.children,i=mH(t),o=Ds(s,Ma).map(function(d,u){return g.cloneElement(d,{viewBox:r||i,key:"label-".concat(u)})});if(!a)return o;var l=wue(t.label,r||i);return[l].concat(lue(o))};Ma.parseViewBox=mH;Ma.renderCallByParent=Eue;var Vw,n$;function pH(){if(n$)return Vw;n$=1;function e(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}return Vw=e,Vw}var Aue=pH();const Cue=Vr(Aue);function K0(e){"@babel/helpers - typeof";return K0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K0(e)}var _ue=["valueAccessor"],Tue=["data","dataKey","clockWise","id","textBreakAll"];function Oue(e){return Due(e)||Pue(e)||Rue(e)||kue()}function kue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rue(e,t){if(e){if(typeof e=="string")return v_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v_(e,t)}}function Pue(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Due(e){if(Array.isArray(e))return v_(e)}function v_(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function My(){return My=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},My.apply(this,arguments)}function a$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function s$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?a$(Object(r),!0).forEach(function(a){Iue(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a$(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Iue(e,t,r){return t=Mue(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mue(e){var t=Lue(e,"string");return K0(t)=="symbol"?t:t+""}function Lue(e,t){if(K0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(K0(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function i$(e,t){if(e==null)return{};var r=$ue(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function $ue(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var Fue=function(t){return Array.isArray(t.value)?Cue(t.value):t.value};function hs(e){var t=e.valueAccessor,r=t===void 0?Fue:t,a=i$(e,_ue),s=a.data,i=a.dataKey,o=a.clockWise,l=a.id,d=a.textBreakAll,u=i$(a,Tue);return!s||!s.length?null:Y.createElement(cr,{className:"recharts-label-list"},s.map(function(p,m){var h=Qt(i)?r(p,m):dn(p&&p.payload,i),x=Qt(l)?{}:{id:"".concat(l,"-").concat(m)};return Y.createElement(Ma,My({},Rt(p,!0),u,x,{parentViewBox:p.parentViewBox,value:h,textBreakAll:d,viewBox:Ma.parseViewBox(Qt(o)?p:s$(s$({},p),{},{clockWise:o})),key:"label-".concat(m),index:m}))}))}hs.displayName="LabelList";function Bue(e,t){return e?e===!0?Y.createElement(hs,{key:"labelList-implicit",data:t}):Y.isValidElement(e)||Gt(e)?Y.createElement(hs,{key:"labelList-implicit",data:t,content:e}):Op(e)?Y.createElement(hs,My({data:t},e,{key:"labelList-implicit"})):null:null}function Uue(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var a=e.children,s=Ds(a,hs).map(function(o,l){return g.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!r)return s;var i=Bue(e.label,t);return[i].concat(Oue(s))}hs.renderCallByParent=Uue;function z0(e){"@babel/helpers - typeof";return z0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z0(e)}function N_(){return N_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},N_.apply(this,arguments)}function o$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function l$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o$(Object(r),!0).forEach(function(a){Hue(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o$(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Hue(e,t,r){return t=Gue(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gue(e){var t=Kue(e,"string");return z0(t)=="symbol"?t:t+""}function Kue(e,t){if(z0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(z0(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zue=function(t,r){var a=Os(r-t),s=Math.min(Math.abs(r-t),359.999);return a*s},Qx=function(t){var r=t.cx,a=t.cy,s=t.radius,i=t.angle,o=t.sign,l=t.isExternal,d=t.cornerRadius,u=t.cornerIsExternal,p=d*(l?1:-1)+s,m=Math.asin(d/p)/Iy,h=u?i:i+o*m,x=bn(r,a,p,h),y=bn(r,a,s,h),N=u?i-o*m:i,v=bn(r,a,p*Math.cos(m*Iy),N);return{center:x,circleTangency:y,lineTangency:v,theta:m}},hH=function(t){var r=t.cx,a=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,d=zue(o,l),u=o+d,p=bn(r,a,i,o),m=bn(r,a,i,u),h="M ".concat(p.x,",").concat(p.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(d)>180),",").concat(+(o>u),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(s>0){var x=bn(r,a,s,o),y=bn(r,a,s,u);h+="L ".concat(y.x,",").concat(y.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(d)>180),",").concat(+(o<=u),`,
            `).concat(x.x,",").concat(x.y," Z")}else h+="L ".concat(r,",").concat(a," Z");return h},que=function(t){var r=t.cx,a=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,d=t.cornerIsExternal,u=t.startAngle,p=t.endAngle,m=Os(p-u),h=Qx({cx:r,cy:a,radius:i,angle:u,sign:m,cornerRadius:o,cornerIsExternal:d}),x=h.circleTangency,y=h.lineTangency,N=h.theta,v=Qx({cx:r,cy:a,radius:i,angle:p,sign:-m,cornerRadius:o,cornerIsExternal:d}),j=v.circleTangency,E=v.lineTangency,C=v.theta,A=d?Math.abs(u-p):Math.abs(u-p)-N-C;if(A<0)return l?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):hH({cx:r,cy:a,innerRadius:s,outerRadius:i,startAngle:u,endAngle:p});var S="M ".concat(y.x,",").concat(y.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(A>180),",").concat(+(m<0),",").concat(j.x,",").concat(j.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(E.x,",").concat(E.y,`
  `);if(s>0){var _=Qx({cx:r,cy:a,radius:s,angle:u,sign:m,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),O=_.circleTangency,D=_.lineTangency,k=_.theta,M=Qx({cx:r,cy:a,radius:s,angle:p,sign:-m,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),F=M.circleTangency,$=M.lineTangency,B=M.theta,P=d?Math.abs(u-p):Math.abs(u-p)-k-B;if(P<0&&o===0)return"".concat(S,"L").concat(r,",").concat(a,"Z");S+="L".concat($.x,",").concat($.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(F.x,",").concat(F.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(P>180),",").concat(+(m>0),",").concat(O.x,",").concat(O.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(D.x,",").concat(D.y,"Z")}else S+="L".concat(r,",").concat(a,"Z");return S},Wue={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},gH=function(t){var r=l$(l$({},Wue),t),a=r.cx,s=r.cy,i=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,d=r.forceCornerRadius,u=r.cornerIsExternal,p=r.startAngle,m=r.endAngle,h=r.className;if(o<i||p===m)return null;var x=ar("recharts-sector",h),y=o-i,N=ks(l,y,0,!0),v;return N>0&&Math.abs(p-m)<360?v=que({cx:a,cy:s,innerRadius:i,outerRadius:o,cornerRadius:Math.min(N,y/2),forceCornerRadius:d,cornerIsExternal:u,startAngle:p,endAngle:m}):v=hH({cx:a,cy:s,innerRadius:i,outerRadius:o,startAngle:p,endAngle:m}),Y.createElement("path",N_({},Rt(r,!0),{className:x,d:v,role:"img"}))};function q0(e){"@babel/helpers - typeof";return q0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q0(e)}function S_(){return S_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},S_.apply(this,arguments)}function c$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function d$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?c$(Object(r),!0).forEach(function(a){Vue(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c$(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Vue(e,t,r){return t=Yue(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yue(e){var t=Xue(e,"string");return q0(t)=="symbol"?t:t+""}function Xue(e,t){if(q0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(q0(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var u$={curveBasisClosed:hne,curveBasisOpen:gne,curveBasis:pne,curveBumpX:ene,curveBumpY:tne,curveLinearClosed:xne,curveLinear:i1,curveMonotoneX:bne,curveMonotoneY:yne,curveNatural:vne,curveStep:Nne,curveStepAfter:jne,curveStepBefore:Sne},Zx=function(t){return t.x===+t.x&&t.y===+t.y},Ah=function(t){return t.x},Ch=function(t){return t.y},Que=function(t,r){if(Gt(t))return t;var a="curve".concat(a1(t));return(a==="curveMonotone"||a==="curveBump")&&r?u$["".concat(a).concat(r==="vertical"?"Y":"X")]:u$[a]||i1},Zue=function(t){var r=t.type,a=r===void 0?"linear":r,s=t.points,i=s===void 0?[]:s,o=t.baseLine,l=t.layout,d=t.connectNulls,u=d===void 0?!1:d,p=Que(a,l),m=u?i.filter(function(N){return Zx(N)}):i,h;if(Array.isArray(o)){var x=u?o.filter(function(N){return Zx(N)}):o,y=m.map(function(N,v){return d$(d$({},N),{},{base:x[v]})});return l==="vertical"?h=Hx().y(Ch).x1(Ah).x0(function(N){return N.base.x}):h=Hx().x(Ah).y1(Ch).y0(function(N){return N.base.y}),h.defined(Zx).curve(p),h(y)}return l==="vertical"&&et(o)?h=Hx().y(Ch).x1(Ah).x0(o):et(o)?h=Hx().x(Ah).y1(Ch).y0(o):h=uU().x(Ah).y(Ch),h.defined(Zx).curve(p),h(m)},Fd=function(t){var r=t.className,a=t.points,s=t.path,i=t.pathRef;if((!a||!a.length)&&!s)return null;var o=a&&a.length?Zue(t):s;return g.createElement("path",S_({},Rt(t,!1),oy(t),{className:ar("recharts-curve",r),d:o,ref:i}))},Yw={exports:{}},Xw,f$;function Jue(){if(f$)return Xw;f$=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Xw=e,Xw}var Qw,m$;function efe(){if(m$)return Qw;m$=1;var e=Jue();function t(){}function r(){}return r.resetWarningCache=t,Qw=function(){function a(o,l,d,u,p,m){if(m!==e){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}a.isRequired=a;function s(){return a}var i={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:s,element:a,elementType:a,instanceOf:s,node:a,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:r,resetWarningCache:t};return i.PropTypes=i,i},Qw}var p$;function tfe(){return p$||(p$=1,Yw.exports=efe()()),Yw.exports}var rfe=tfe();const Xr=Vr(rfe),{getOwnPropertyNames:nfe,getOwnPropertySymbols:afe}=Object,{hasOwnProperty:sfe}=Object.prototype;function Zw(e,t){return function(a,s,i){return e(a,s,i)&&t(a,s,i)}}function Jx(e){return function(r,a,s){if(!r||!a||typeof r!="object"||typeof a!="object")return e(r,a,s);const{cache:i}=s,o=i.get(r),l=i.get(a);if(o&&l)return o===a&&l===r;i.set(r,a),i.set(a,r);const d=e(r,a,s);return i.delete(r),i.delete(a),d}}function ife(e){return e?.[Symbol.toStringTag]}function h$(e){return nfe(e).concat(afe(e))}const ofe=Object.hasOwn||((e,t)=>sfe.call(e,t));function pf(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const lfe="__v",cfe="__o",dfe="_owner",{getOwnPropertyDescriptor:g$,keys:x$}=Object;function ufe(e,t){return e.byteLength===t.byteLength&&Ly(new Uint8Array(e),new Uint8Array(t))}function ffe(e,t,r){let a=e.length;if(t.length!==a)return!1;for(;a-- >0;)if(!r.equals(e[a],t[a],a,a,e,t,r))return!1;return!0}function mfe(e,t){return e.byteLength===t.byteLength&&Ly(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function pfe(e,t){return pf(e.getTime(),t.getTime())}function hfe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function gfe(e,t){return e===t}function b$(e,t,r){const a=e.size;if(a!==t.size)return!1;if(!a)return!0;const s=new Array(a),i=e.entries();let o,l,d=0;for(;(o=i.next())&&!o.done;){const u=t.entries();let p=!1,m=0;for(;(l=u.next())&&!l.done;){if(s[m]){m++;continue}const h=o.value,x=l.value;if(r.equals(h[0],x[0],d,m,e,t,r)&&r.equals(h[1],x[1],h[0],x[0],e,t,r)){p=s[m]=!0;break}m++}if(!p)return!1;d++}return!0}const xfe=pf;function bfe(e,t,r){const a=x$(e);let s=a.length;if(x$(t).length!==s)return!1;for(;s-- >0;)if(!xH(e,t,r,a[s]))return!1;return!0}function _h(e,t,r){const a=h$(e);let s=a.length;if(h$(t).length!==s)return!1;let i,o,l;for(;s-- >0;)if(i=a[s],!xH(e,t,r,i)||(o=g$(e,i),l=g$(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function yfe(e,t){return pf(e.valueOf(),t.valueOf())}function vfe(e,t){return e.source===t.source&&e.flags===t.flags}function y$(e,t,r){const a=e.size;if(a!==t.size)return!1;if(!a)return!0;const s=new Array(a),i=e.values();let o,l;for(;(o=i.next())&&!o.done;){const d=t.values();let u=!1,p=0;for(;(l=d.next())&&!l.done;){if(!s[p]&&r.equals(o.value,l.value,o.value,l.value,e,t,r)){u=s[p]=!0;break}p++}if(!u)return!1}return!0}function Ly(e,t){let r=e.byteLength;if(t.byteLength!==r||e.byteOffset!==t.byteOffset)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function Nfe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function xH(e,t,r,a){return(a===dfe||a===cfe||a===lfe)&&(e.$$typeof||t.$$typeof)?!0:ofe(t,a)&&r.equals(e[a],t[a],a,a,e,t,r)}const Sfe="[object ArrayBuffer]",jfe="[object Arguments]",wfe="[object Boolean]",Efe="[object DataView]",Afe="[object Date]",Cfe="[object Error]",_fe="[object Map]",Tfe="[object Number]",Ofe="[object Object]",kfe="[object RegExp]",Rfe="[object Set]",Pfe="[object String]",Dfe={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},Ife="[object URL]",Mfe=Object.prototype.toString;function Lfe({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:r,areDatesEqual:a,areErrorsEqual:s,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:l,areObjectsEqual:d,arePrimitiveWrappersEqual:u,areRegExpsEqual:p,areSetsEqual:m,areTypedArraysEqual:h,areUrlsEqual:x,unknownTagComparators:y}){return function(v,j,E){if(v===j)return!0;if(v==null||j==null)return!1;const C=typeof v;if(C!==typeof j)return!1;if(C!=="object")return C==="number"?l(v,j,E):C==="function"?i(v,j,E):!1;const A=v.constructor;if(A!==j.constructor)return!1;if(A===Object)return d(v,j,E);if(Array.isArray(v))return t(v,j,E);if(A===Date)return a(v,j,E);if(A===RegExp)return p(v,j,E);if(A===Map)return o(v,j,E);if(A===Set)return m(v,j,E);const S=Mfe.call(v);if(S===Afe)return a(v,j,E);if(S===kfe)return p(v,j,E);if(S===_fe)return o(v,j,E);if(S===Rfe)return m(v,j,E);if(S===Ofe)return typeof v.then!="function"&&typeof j.then!="function"&&d(v,j,E);if(S===Ife)return x(v,j,E);if(S===Cfe)return s(v,j,E);if(S===jfe)return d(v,j,E);if(Dfe[S])return h(v,j,E);if(S===Sfe)return e(v,j,E);if(S===Efe)return r(v,j,E);if(S===wfe||S===Tfe||S===Pfe)return u(v,j,E);if(y){let _=y[S];if(!_){const O=ife(v);O&&(_=y[O])}if(_)return _(v,j,E)}return!1}}function $fe({circular:e,createCustomConfig:t,strict:r}){let a={areArrayBuffersEqual:ufe,areArraysEqual:r?_h:ffe,areDataViewsEqual:mfe,areDatesEqual:pfe,areErrorsEqual:hfe,areFunctionsEqual:gfe,areMapsEqual:r?Zw(b$,_h):b$,areNumbersEqual:xfe,areObjectsEqual:r?_h:bfe,arePrimitiveWrappersEqual:yfe,areRegExpsEqual:vfe,areSetsEqual:r?Zw(y$,_h):y$,areTypedArraysEqual:r?Zw(Ly,_h):Ly,areUrlsEqual:Nfe,unknownTagComparators:void 0};if(t&&(a=Object.assign({},a,t(a))),e){const s=Jx(a.areArraysEqual),i=Jx(a.areMapsEqual),o=Jx(a.areObjectsEqual),l=Jx(a.areSetsEqual);a=Object.assign({},a,{areArraysEqual:s,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:l})}return a}function Ffe(e){return function(t,r,a,s,i,o,l){return e(t,r,l)}}function Bfe({circular:e,comparator:t,createState:r,equals:a,strict:s}){if(r)return function(l,d){const{cache:u=e?new WeakMap:void 0,meta:p}=r();return t(l,d,{cache:u,equals:a,meta:p,strict:s})};if(e)return function(l,d){return t(l,d,{cache:new WeakMap,equals:a,meta:void 0,strict:s})};const i={cache:void 0,equals:a,meta:void 0,strict:s};return function(l,d){return t(l,d,i)}}const Ufe=Xd();Xd({strict:!0});Xd({circular:!0});Xd({circular:!0,strict:!0});Xd({createInternalComparator:()=>pf});Xd({strict:!0,createInternalComparator:()=>pf});Xd({circular:!0,createInternalComparator:()=>pf});Xd({circular:!0,createInternalComparator:()=>pf,strict:!0});function Xd(e={}){const{circular:t=!1,createInternalComparator:r,createState:a,strict:s=!1}=e,i=$fe(e),o=Lfe(i),l=r?r(o):Ffe(o);return Bfe({circular:t,comparator:o,createState:a,equals:l,strict:s})}function Hfe(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function v$(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,a=function s(i){r<0&&(r=i),i-r>t?(e(i),r=-1):Hfe(s)};requestAnimationFrame(a)}function j_(e){"@babel/helpers - typeof";return j_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j_(e)}function Gfe(e){return Wfe(e)||qfe(e)||zfe(e)||Kfe()}function Kfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zfe(e,t){if(e){if(typeof e=="string")return N$(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N$(e,t)}}function N$(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function qfe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Wfe(e){if(Array.isArray(e))return e}function Vfe(){var e={},t=function(){return null},r=!1,a=function s(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,l=Gfe(o),d=l[0],u=l.slice(1);if(typeof d=="number"){v$(s.bind(null,u),d);return}s(d),v$(s.bind(null,u));return}j_(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,a(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function W0(e){"@babel/helpers - typeof";return W0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},W0(e)}function S$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function j$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?S$(Object(r),!0).forEach(function(a){bH(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S$(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function bH(e,t,r){return t=Yfe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yfe(e){var t=Xfe(e,"string");return W0(t)==="symbol"?t:String(t)}function Xfe(e,t){if(W0(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(W0(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Qfe=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(a,s){return a.filter(function(i){return s.includes(i)})})},Zfe=function(t){return t},Jfe=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},p0=function(t,r){return Object.keys(r).reduce(function(a,s){return j$(j$({},a),{},bH({},s,t(s,r[s])))},{})},w$=function(t,r,a){return t.map(function(s){return"".concat(Jfe(s)," ").concat(r,"ms ").concat(a)}).join(",")};function eme(e,t){return nme(e)||rme(e,t)||yH(e,t)||tme()}function tme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rme(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(p){u=!0,s=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function nme(e){if(Array.isArray(e))return e}function ame(e){return ome(e)||ime(e)||yH(e)||sme()}function sme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yH(e,t){if(e){if(typeof e=="string")return w_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w_(e,t)}}function ime(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ome(e){if(Array.isArray(e))return w_(e)}function w_(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var $y=1e-4,vH=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},NH=function(t,r){return t.map(function(a,s){return a*Math.pow(r,s)}).reduce(function(a,s){return a+s})},E$=function(t,r){return function(a){var s=vH(t,r);return NH(s,a)}},lme=function(t,r){return function(a){var s=vH(t,r),i=[].concat(ame(s.map(function(o,l){return o*l}).slice(1)),[0]);return NH(i,a)}},A$=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var s=r[0],i=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":s=0,i=0,o=1,l=1;break;case"ease":s=.25,i=.1,o=.25,l=1;break;case"ease-in":s=.42,i=0,o=1,l=1;break;case"ease-out":s=.42,i=0,o=.58,l=1;break;case"ease-in-out":s=0,i=0,o=.58,l=1;break;default:{var d=r[0].split("(");if(d[0]==="cubic-bezier"&&d[1].split(")")[0].split(",").length===4){var u=d[1].split(")")[0].split(",").map(function(v){return parseFloat(v)}),p=eme(u,4);s=p[0],i=p[1],o=p[2],l=p[3]}}}var m=E$(s,o),h=E$(i,l),x=lme(s,o),y=function(j){return j>1?1:j<0?0:j},N=function(j){for(var E=j>1?1:j,C=E,A=0;A<8;++A){var S=m(C)-E,_=x(C);if(Math.abs(S-E)<$y||_<$y)return h(C);C=y(C-S/_)}return h(C)};return N.isStepper=!1,N},cme=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,a=r===void 0?100:r,s=t.damping,i=s===void 0?8:s,o=t.dt,l=o===void 0?17:o,d=function(p,m,h){var x=-(p-m)*a,y=h*i,N=h+(x-y)*l/1e3,v=h*l/1e3+p;return Math.abs(v-m)<$y&&Math.abs(N)<$y?[m,0]:[v,N]};return d.isStepper=!0,d.dt=l,d},dme=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var s=r[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return A$(s);case"spring":return cme();default:if(s.split("(")[0]==="cubic-bezier")return A$(s)}return typeof s=="function"?s:null};function V0(e){"@babel/helpers - typeof";return V0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V0(e)}function C$(e){return mme(e)||fme(e)||SH(e)||ume()}function ume(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fme(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function mme(e){if(Array.isArray(e))return A_(e)}function _$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Ya(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_$(Object(r),!0).forEach(function(a){E_(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_$(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function E_(e,t,r){return t=pme(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pme(e){var t=hme(e,"string");return V0(t)==="symbol"?t:String(t)}function hme(e,t){if(V0(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(V0(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gme(e,t){return yme(e)||bme(e,t)||SH(e,t)||xme()}function xme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SH(e,t){if(e){if(typeof e=="string")return A_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A_(e,t)}}function A_(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function bme(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(p){u=!0,s=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function yme(e){if(Array.isArray(e))return e}var Fy=function(t,r,a){return t+(r-t)*a},C_=function(t){var r=t.from,a=t.to;return r!==a},vme=function e(t,r,a){var s=p0(function(i,o){if(C_(o)){var l=t(o.from,o.to,o.velocity),d=gme(l,2),u=d[0],p=d[1];return Ya(Ya({},o),{},{from:u,velocity:p})}return o},r);return a<1?p0(function(i,o){return C_(o)?Ya(Ya({},o),{},{velocity:Fy(o.velocity,s[i].velocity,a),from:Fy(o.from,s[i].from,a)}):o},r):e(t,s,a-1)};const Nme=(function(e,t,r,a,s){var i=Qfe(e,t),o=i.reduce(function(v,j){return Ya(Ya({},v),{},E_({},j,[e[j],t[j]]))},{}),l=i.reduce(function(v,j){return Ya(Ya({},v),{},E_({},j,{from:e[j],velocity:0,to:t[j]}))},{}),d=-1,u,p,m=function(){return null},h=function(){return p0(function(j,E){return E.from},l)},x=function(){return!Object.values(l).filter(C_).length},y=function(j){u||(u=j);var E=j-u,C=E/r.dt;l=vme(r,l,C),s(Ya(Ya(Ya({},e),t),h())),u=j,x()||(d=requestAnimationFrame(m))},N=function(j){p||(p=j);var E=(j-p)/a,C=p0(function(S,_){return Fy.apply(void 0,C$(_).concat([r(E)]))},o);if(s(Ya(Ya(Ya({},e),t),C)),E<1)d=requestAnimationFrame(m);else{var A=p0(function(S,_){return Fy.apply(void 0,C$(_).concat([r(1)]))},o);s(Ya(Ya(Ya({},e),t),A))}};return m=r.isStepper?y:N,function(){return requestAnimationFrame(m),function(){cancelAnimationFrame(d)}}});function Vm(e){"@babel/helpers - typeof";return Vm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vm(e)}var Sme=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function jme(e,t){if(e==null)return{};var r=wme(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function wme(e,t){if(e==null)return{};var r={},a=Object.keys(e),s,i;for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function Jw(e){return _me(e)||Cme(e)||Ame(e)||Eme()}function Eme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ame(e,t){if(e){if(typeof e=="string")return __(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return __(e,t)}}function Cme(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _me(e){if(Array.isArray(e))return __(e)}function __(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function T$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function So(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?T$(Object(r),!0).forEach(function(a){Vh(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T$(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Vh(e,t,r){return t=jH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ome(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,jH(a.key),a)}}function kme(e,t,r){return t&&Ome(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function jH(e){var t=Rme(e,"string");return Vm(t)==="symbol"?t:String(t)}function Rme(e,t){if(Vm(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Vm(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pme(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T_(e,t)}function T_(e,t){return T_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},T_(e,t)}function Dme(e){var t=Ime();return function(){var a=By(e),s;if(t){var i=By(this).constructor;s=Reflect.construct(a,arguments,i)}else s=a.apply(this,arguments);return O_(this,s)}}function O_(e,t){if(t&&(Vm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return k_(e)}function k_(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ime(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function By(e){return By=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},By(e)}var ti=(function(e){Pme(r,e);var t=Dme(r);function r(a,s){var i;Tme(this,r),i=t.call(this,a,s);var o=i.props,l=o.isActive,d=o.attributeName,u=o.from,p=o.to,m=o.steps,h=o.children,x=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(k_(i)),i.changeStyle=i.changeStyle.bind(k_(i)),!l||x<=0)return i.state={style:{}},typeof h=="function"&&(i.state={style:p}),O_(i);if(m&&m.length)i.state={style:m[0].style};else if(u){if(typeof h=="function")return i.state={style:u},O_(i);i.state={style:d?Vh({},d,u):u}}else i.state={style:{}};return i}return kme(r,[{key:"componentDidMount",value:function(){var s=this.props,i=s.isActive,o=s.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var i=this.props,o=i.isActive,l=i.canBegin,d=i.attributeName,u=i.shouldReAnimate,p=i.to,m=i.from,h=this.state.style;if(l){if(!o){var x={style:d?Vh({},d,p):p};this.state&&h&&(d&&h[d]!==p||!d&&h!==p)&&this.setState(x);return}if(!(Ufe(s.to,p)&&s.canBegin&&s.isActive)){var y=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var N=y||u?m:s.to;if(this.state&&h){var v={style:d?Vh({},d,N):N};(d&&h[d]!==N||!d&&h!==N)&&this.setState(v)}this.runAnimation(So(So({},this.props),{},{from:N,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var i=this,o=s.from,l=s.to,d=s.duration,u=s.easing,p=s.begin,m=s.onAnimationEnd,h=s.onAnimationStart,x=Nme(o,l,dme(u),d,this.changeStyle),y=function(){i.stopJSAnimation=x()};this.manager.start([h,p,y,d,m])}},{key:"runStepAnimation",value:function(s){var i=this,o=s.steps,l=s.begin,d=s.onAnimationStart,u=o[0],p=u.style,m=u.duration,h=m===void 0?0:m,x=function(N,v,j){if(j===0)return N;var E=v.duration,C=v.easing,A=C===void 0?"ease":C,S=v.style,_=v.properties,O=v.onAnimationEnd,D=j>0?o[j-1]:v,k=_||Object.keys(S);if(typeof A=="function"||A==="spring")return[].concat(Jw(N),[i.runJSAnimation.bind(i,{from:D.style,to:S,duration:E,easing:A}),E]);var M=w$(k,E,A),F=So(So(So({},D.style),S),{},{transition:M});return[].concat(Jw(N),[F,E,O]).filter(Zfe)};return this.manager.start([d].concat(Jw(o.reduce(x,[p,Math.max(h,l)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=Vfe());var i=s.begin,o=s.duration,l=s.attributeName,d=s.to,u=s.easing,p=s.onAnimationStart,m=s.onAnimationEnd,h=s.steps,x=s.children,y=this.manager;if(this.unSubscribe=y.subscribe(this.handleStyleChange),typeof u=="function"||typeof x=="function"||u==="spring"){this.runJSAnimation(s);return}if(h.length>1){this.runStepAnimation(s);return}var N=l?Vh({},l,d):d,v=w$(Object.keys(N),o,u);y.start([p,i,So(So({},N),{},{transition:v}),o,m])}},{key:"render",value:function(){var s=this.props,i=s.children;s.begin;var o=s.duration;s.attributeName,s.easing;var l=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var d=jme(s,Sme),u=g.Children.count(i),p=this.state.style;if(typeof i=="function")return i(p);if(!l||u===0||o<=0)return i;var m=function(x){var y=x.props,N=y.style,v=N===void 0?{}:N,j=y.className,E=g.cloneElement(x,So(So({},d),{},{style:So(So({},v),p),className:j}));return E};return u===1?m(g.Children.only(i)):Y.createElement("div",null,g.Children.map(i,function(h){return m(h)}))}}]),r})(g.PureComponent);ti.displayName="Animate";ti.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};ti.propTypes={from:Xr.oneOfType([Xr.object,Xr.string]),to:Xr.oneOfType([Xr.object,Xr.string]),attributeName:Xr.string,duration:Xr.number,begin:Xr.number,easing:Xr.oneOfType([Xr.string,Xr.func]),steps:Xr.arrayOf(Xr.shape({duration:Xr.number.isRequired,style:Xr.object.isRequired,easing:Xr.oneOfType([Xr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Xr.func]),properties:Xr.arrayOf("string"),onAnimationEnd:Xr.func})),children:Xr.oneOfType([Xr.node,Xr.func]),isActive:Xr.bool,canBegin:Xr.bool,onAnimationEnd:Xr.func,shouldReAnimate:Xr.bool,onAnimationStart:Xr.func,onAnimationReStart:Xr.func};function Y0(e){"@babel/helpers - typeof";return Y0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y0(e)}function Uy(){return Uy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Uy.apply(this,arguments)}function Mme(e,t){return Bme(e)||Fme(e,t)||$me(e,t)||Lme()}function Lme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $me(e,t){if(e){if(typeof e=="string")return O$(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O$(e,t)}}function O$(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Fme(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(p){u=!0,s=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Bme(e){if(Array.isArray(e))return e}function k$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function R$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?k$(Object(r),!0).forEach(function(a){Ume(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k$(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Ume(e,t,r){return t=Hme(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hme(e){var t=Gme(e,"string");return Y0(t)=="symbol"?t:t+""}function Gme(e,t){if(Y0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Y0(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var P$=function(t,r,a,s,i){var o=Math.min(Math.abs(a)/2,Math.abs(s)/2),l=s>=0?1:-1,d=a>=0?1:-1,u=s>=0&&a>=0||s<0&&a<0?1:0,p;if(o>0&&i instanceof Array){for(var m=[0,0,0,0],h=0,x=4;h<x;h++)m[h]=i[h]>o?o:i[h];p="M".concat(t,",").concat(r+l*m[0]),m[0]>0&&(p+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(u,",").concat(t+d*m[0],",").concat(r)),p+="L ".concat(t+a-d*m[1],",").concat(r),m[1]>0&&(p+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(u,`,
        `).concat(t+a,",").concat(r+l*m[1])),p+="L ".concat(t+a,",").concat(r+s-l*m[2]),m[2]>0&&(p+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(u,`,
        `).concat(t+a-d*m[2],",").concat(r+s)),p+="L ".concat(t+d*m[3],",").concat(r+s),m[3]>0&&(p+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+s-l*m[3])),p+="Z"}else if(o>0&&i===+i&&i>0){var y=Math.min(o,i);p="M ".concat(t,",").concat(r+l*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+d*y,",").concat(r,`
            L `).concat(t+a-d*y,",").concat(r,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+a,",").concat(r+l*y,`
            L `).concat(t+a,",").concat(r+s-l*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+a-d*y,",").concat(r+s,`
            L `).concat(t+d*y,",").concat(r+s,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t,",").concat(r+s-l*y," Z")}else p="M ".concat(t,",").concat(r," h ").concat(a," v ").concat(s," h ").concat(-a," Z");return p},Kme=function(t,r){if(!t||!r)return!1;var a=t.x,s=t.y,i=r.x,o=r.y,l=r.width,d=r.height;if(Math.abs(l)>0&&Math.abs(d)>0){var u=Math.min(i,i+l),p=Math.max(i,i+l),m=Math.min(o,o+d),h=Math.max(o,o+d);return a>=u&&a<=p&&s>=m&&s<=h}return!1},zme={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},j1=function(t){var r=R$(R$({},zme),t),a=g.useRef(),s=g.useState(-1),i=Mme(s,2),o=i[0],l=i[1];g.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var A=a.current.getTotalLength();A&&l(A)}catch{}},[]);var d=r.x,u=r.y,p=r.width,m=r.height,h=r.radius,x=r.className,y=r.animationEasing,N=r.animationDuration,v=r.animationBegin,j=r.isAnimationActive,E=r.isUpdateAnimationActive;if(d!==+d||u!==+u||p!==+p||m!==+m||p===0||m===0)return null;var C=ar("recharts-rectangle",x);return E?Y.createElement(ti,{canBegin:o>0,from:{width:p,height:m,x:d,y:u},to:{width:p,height:m,x:d,y:u},duration:N,animationEasing:y,isActive:E},function(A){var S=A.width,_=A.height,O=A.x,D=A.y;return Y.createElement(ti,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:N,isActive:j,easing:y},Y.createElement("path",Uy({},Rt(r,!0),{className:C,d:P$(O,D,S,_,h),ref:a})))}):Y.createElement("path",Uy({},Rt(r,!0),{className:C,d:P$(d,u,p,m,h)}))},qme=["points","className","baseLinePoints","connectNulls"];function om(){return om=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},om.apply(this,arguments)}function Wme(e,t){if(e==null)return{};var r=Vme(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Vme(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function D$(e){return Zme(e)||Qme(e)||Xme(e)||Yme()}function Yme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xme(e,t){if(e){if(typeof e=="string")return R_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R_(e,t)}}function Qme(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Zme(e){if(Array.isArray(e))return R_(e)}function R_(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var I$=function(t){return t&&t.x===+t.x&&t.y===+t.y},Jme=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(a){I$(a)?r[r.length-1].push(a):r[r.length-1].length>0&&r.push([])}),I$(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},h0=function(t,r){var a=Jme(t);r&&(a=[a.reduce(function(i,o){return[].concat(D$(i),D$(o))},[])]);var s=a.map(function(i){return i.reduce(function(o,l,d){return"".concat(o).concat(d===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return a.length===1?"".concat(s,"Z"):s},epe=function(t,r,a){var s=h0(t,a);return"".concat(s.slice(-1)==="Z"?s.slice(0,-1):s,"L").concat(h0(r.reverse(),a).slice(1))},wH=function(t){var r=t.points,a=t.className,s=t.baseLinePoints,i=t.connectNulls,o=Wme(t,qme);if(!r||!r.length)return null;var l=ar("recharts-polygon",a);if(s&&s.length){var d=o.stroke&&o.stroke!=="none",u=epe(r,s,i);return Y.createElement("g",{className:l},Y.createElement("path",om({},Rt(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),d?Y.createElement("path",om({},Rt(o,!0),{fill:"none",d:h0(r,i)})):null,d?Y.createElement("path",om({},Rt(o,!0),{fill:"none",d:h0(s,i)})):null)}var p=h0(r,i);return Y.createElement("path",om({},Rt(o,!0),{fill:p.slice(-1)==="Z"?o.fill:"none",className:l,d:p}))};function P_(){return P_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},P_.apply(this,arguments)}var wg=function(t){var r=t.cx,a=t.cy,s=t.r,i=t.className,o=ar("recharts-dot",i);return r===+r&&a===+a&&s===+s?g.createElement("circle",P_({},Rt(t,!1),oy(t),{className:o,cx:r,cy:a,r:s})):null};function X0(e){"@babel/helpers - typeof";return X0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},X0(e)}var tpe=["x","y","top","left","width","height","className"];function D_(){return D_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},D_.apply(this,arguments)}function M$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function rpe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?M$(Object(r),!0).forEach(function(a){npe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M$(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function npe(e,t,r){return t=ape(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ape(e){var t=spe(e,"string");return X0(t)=="symbol"?t:t+""}function spe(e,t){if(X0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(X0(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ipe(e,t){if(e==null)return{};var r=ope(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function ope(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var lpe=function(t,r,a,s,i,o){return"M".concat(t,",").concat(i,"v").concat(s,"M").concat(o,",").concat(r,"h").concat(a)},cpe=function(t){var r=t.x,a=r===void 0?0:r,s=t.y,i=s===void 0?0:s,o=t.top,l=o===void 0?0:o,d=t.left,u=d===void 0?0:d,p=t.width,m=p===void 0?0:p,h=t.height,x=h===void 0?0:h,y=t.className,N=ipe(t,tpe),v=rpe({x:a,y:i,top:l,left:u,width:m,height:x},N);return!et(a)||!et(i)||!et(m)||!et(x)||!et(l)||!et(u)?null:Y.createElement("path",D_({},Rt(v,!0),{className:ar("recharts-cross",y),d:lpe(a,i,m,x,l,u)}))},eE,L$;function dpe(){if(L$)return eE;L$=1;var e=y1(),t=L9(),r=Ml();function a(s,i){return s&&s.length?e(s,r(i,2),t):void 0}return eE=a,eE}var upe=dpe();const fpe=Vr(upe);var tE,$$;function mpe(){if($$)return tE;$$=1;var e=y1(),t=Ml(),r=$9();function a(s,i){return s&&s.length?e(s,t(i,2),r):void 0}return tE=a,tE}var ppe=mpe();const hpe=Vr(ppe);var gpe=["cx","cy","angle","ticks","axisLine"],xpe=["ticks","tick","angle","tickFormatter","stroke"];function Ym(e){"@babel/helpers - typeof";return Ym=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ym(e)}function g0(){return g0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},g0.apply(this,arguments)}function F$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Au(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?F$(Object(r),!0).forEach(function(a){w1(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F$(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function B$(e,t){if(e==null)return{};var r=bpe(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function bpe(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function ype(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U$(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,AH(a.key),a)}}function vpe(e,t,r){return t&&U$(e.prototype,t),r&&U$(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Npe(e,t,r){return t=Hy(t),Spe(e,EH()?Reflect.construct(t,r||[],Hy(e).constructor):t.apply(e,r))}function Spe(e,t){if(t&&(Ym(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jpe(e)}function jpe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(EH=function(){return!!e})()}function Hy(e){return Hy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Hy(e)}function wpe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I_(e,t)}function I_(e,t){return I_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},I_(e,t)}function w1(e,t,r){return t=AH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AH(e){var t=Epe(e,"string");return Ym(t)=="symbol"?t:t+""}function Epe(e,t){if(Ym(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Ym(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var E1=(function(e){function t(){return ype(this,t),Npe(this,t,arguments)}return wpe(t,e),vpe(t,[{key:"getTickValueCoord",value:function(a){var s=a.coordinate,i=this.props,o=i.angle,l=i.cx,d=i.cy;return bn(l,d,s,o)}},{key:"getTickTextAnchor",value:function(){var a=this.props.orientation,s;switch(a){case"left":s="end";break;case"right":s="start";break;default:s="middle";break}return s}},{key:"getViewBox",value:function(){var a=this.props,s=a.cx,i=a.cy,o=a.angle,l=a.ticks,d=fpe(l,function(p){return p.coordinate||0}),u=hpe(l,function(p){return p.coordinate||0});return{cx:s,cy:i,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:d.coordinate||0}}},{key:"renderAxisLine",value:function(){var a=this.props,s=a.cx,i=a.cy,o=a.angle,l=a.ticks,d=a.axisLine,u=B$(a,gpe),p=l.reduce(function(y,N){return[Math.min(y[0],N.coordinate),Math.max(y[1],N.coordinate)]},[1/0,-1/0]),m=bn(s,i,p[0],o),h=bn(s,i,p[1],o),x=Au(Au(Au({},Rt(u,!1)),{},{fill:"none"},Rt(d,!1)),{},{x1:m.x,y1:m.y,x2:h.x,y2:h.y});return Y.createElement("line",g0({className:"recharts-polar-radius-axis-line"},x))}},{key:"renderTicks",value:function(){var a=this,s=this.props,i=s.ticks,o=s.tick,l=s.angle,d=s.tickFormatter,u=s.stroke,p=B$(s,xpe),m=this.getTickTextAnchor(),h=Rt(p,!1),x=Rt(o,!1),y=i.map(function(N,v){var j=a.getTickValueCoord(N),E=Au(Au(Au(Au({textAnchor:m,transform:"rotate(".concat(90-l,", ").concat(j.x,", ").concat(j.y,")")},h),{},{stroke:"none",fill:u},x),{},{index:v},j),{},{payload:N});return Y.createElement(cr,g0({className:ar("recharts-polar-radius-axis-tick",fH(o)),key:"tick-".concat(N.coordinate)},Ud(a.props,N,v)),t.renderTickItem(o,E,d?d(N.value,v):N.value))});return Y.createElement(cr,{className:"recharts-polar-radius-axis-ticks"},y)}},{key:"render",value:function(){var a=this.props,s=a.ticks,i=a.axisLine,o=a.tick;return!s||!s.length?null:Y.createElement(cr,{className:ar("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),Ma.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(a,s,i){var o;return Y.isValidElement(a)?o=Y.cloneElement(a,s):Gt(a)?o=a(s):o=Y.createElement(Ju,g0({},s,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])})(g.PureComponent);w1(E1,"displayName","PolarRadiusAxis");w1(E1,"axisType","radiusAxis");w1(E1,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Xm(e){"@babel/helpers - typeof";return Xm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xm(e)}function Pu(){return Pu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Pu.apply(this,arguments)}function H$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Cu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?H$(Object(r),!0).forEach(function(a){A1(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H$(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Ape(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G$(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,_H(a.key),a)}}function Cpe(e,t,r){return t&&G$(e.prototype,t),r&&G$(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _pe(e,t,r){return t=Gy(t),Tpe(e,CH()?Reflect.construct(t,r||[],Gy(e).constructor):t.apply(e,r))}function Tpe(e,t){if(t&&(Xm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ope(e)}function Ope(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CH=function(){return!!e})()}function Gy(e){return Gy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Gy(e)}function kpe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M_(e,t)}function M_(e,t){return M_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},M_(e,t)}function A1(e,t,r){return t=_H(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _H(e){var t=Rpe(e,"string");return Xm(t)=="symbol"?t:t+""}function Rpe(e,t){if(Xm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Xm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ppe=Math.PI/180,K$=1e-5,C1=(function(e){function t(){return Ape(this,t),_pe(this,t,arguments)}return kpe(t,e),Cpe(t,[{key:"getTickLineCoord",value:function(a){var s=this.props,i=s.cx,o=s.cy,l=s.radius,d=s.orientation,u=s.tickSize,p=u||8,m=bn(i,o,l,a.coordinate),h=bn(i,o,l+(d==="inner"?-1:1)*p,a.coordinate);return{x1:m.x,y1:m.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(a){var s=this.props.orientation,i=Math.cos(-a.coordinate*Ppe),o;return i>K$?o=s==="outer"?"start":"end":i<-K$?o=s==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var a=this.props,s=a.cx,i=a.cy,o=a.radius,l=a.axisLine,d=a.axisLineType,u=Cu(Cu({},Rt(this.props,!1)),{},{fill:"none"},Rt(l,!1));if(d==="circle")return Y.createElement(wg,Pu({className:"recharts-polar-angle-axis-line"},u,{cx:s,cy:i,r:o}));var p=this.props.ticks,m=p.map(function(h){return bn(s,i,o,h.coordinate)});return Y.createElement(wH,Pu({className:"recharts-polar-angle-axis-line"},u,{points:m}))}},{key:"renderTicks",value:function(){var a=this,s=this.props,i=s.ticks,o=s.tick,l=s.tickLine,d=s.tickFormatter,u=s.stroke,p=Rt(this.props,!1),m=Rt(o,!1),h=Cu(Cu({},p),{},{fill:"none"},Rt(l,!1)),x=i.map(function(y,N){var v=a.getTickLineCoord(y),j=a.getTickTextAnchor(y),E=Cu(Cu(Cu({textAnchor:j},p),{},{stroke:"none",fill:u},m),{},{index:N,payload:y,x:v.x2,y:v.y2});return Y.createElement(cr,Pu({className:ar("recharts-polar-angle-axis-tick",fH(o)),key:"tick-".concat(y.coordinate)},Ud(a.props,y,N)),l&&Y.createElement("line",Pu({className:"recharts-polar-angle-axis-tick-line"},h,v)),o&&t.renderTickItem(o,E,d?d(y.value,N):y.value))});return Y.createElement(cr,{className:"recharts-polar-angle-axis-ticks"},x)}},{key:"render",value:function(){var a=this.props,s=a.ticks,i=a.radius,o=a.axisLine;return i<=0||!s||!s.length?null:Y.createElement(cr,{className:ar("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(a,s,i){var o;return Y.isValidElement(a)?o=Y.cloneElement(a,s):Gt(a)?o=a(s):o=Y.createElement(Ju,Pu({},s,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])})(g.PureComponent);A1(C1,"displayName","PolarAngleAxis");A1(C1,"axisType","angleAxis");A1(C1,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var rE,z$;function Ik(){if(z$)return rE;z$=1;var e=DU(),t=e(Object.getPrototypeOf,Object);return rE=t,rE}var nE,q$;function TH(){if(q$)return nE;q$=1;var e=Mc(),t=Ik(),r=Uo(),a="[object Object]",s=Function.prototype,i=Object.prototype,o=s.toString,l=i.hasOwnProperty,d=o.call(Object);function u(p){if(!r(p)||e(p)!=a)return!1;var m=t(p);if(m===null)return!0;var h=l.call(m,"constructor")&&m.constructor;return typeof h=="function"&&h instanceof h&&o.call(h)==d}return nE=u,nE}var Dpe=TH();const Ipe=Vr(Dpe);var aE,W$;function Mpe(){if(W$)return aE;W$=1;var e=Mc(),t=Uo(),r="[object Boolean]";function a(s){return s===!0||s===!1||t(s)&&e(s)==r}return aE=a,aE}var Lpe=Mpe();const $pe=Vr(Lpe);function Q0(e){"@babel/helpers - typeof";return Q0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q0(e)}function Ky(){return Ky=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ky.apply(this,arguments)}function Fpe(e,t){return Gpe(e)||Hpe(e,t)||Upe(e,t)||Bpe()}function Bpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Upe(e,t){if(e){if(typeof e=="string")return V$(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return V$(e,t)}}function V$(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Hpe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(p){u=!0,s=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Gpe(e){if(Array.isArray(e))return e}function Y$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function X$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Y$(Object(r),!0).forEach(function(a){Kpe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y$(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Kpe(e,t,r){return t=zpe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zpe(e){var t=qpe(e,"string");return Q0(t)=="symbol"?t:t+""}function qpe(e,t){if(Q0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Q0(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Q$=function(t,r,a,s,i){var o=a-s,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+a,",").concat(r),l+="L ".concat(t+a-o/2,",").concat(r+i),l+="L ".concat(t+a-o/2-s,",").concat(r+i),l+="L ".concat(t,",").concat(r," Z"),l},Wpe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Vpe=function(t){var r=X$(X$({},Wpe),t),a=g.useRef(),s=g.useState(-1),i=Fpe(s,2),o=i[0],l=i[1];g.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var C=a.current.getTotalLength();C&&l(C)}catch{}},[]);var d=r.x,u=r.y,p=r.upperWidth,m=r.lowerWidth,h=r.height,x=r.className,y=r.animationEasing,N=r.animationDuration,v=r.animationBegin,j=r.isUpdateAnimationActive;if(d!==+d||u!==+u||p!==+p||m!==+m||h!==+h||p===0&&m===0||h===0)return null;var E=ar("recharts-trapezoid",x);return j?Y.createElement(ti,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:h,x:d,y:u},to:{upperWidth:p,lowerWidth:m,height:h,x:d,y:u},duration:N,animationEasing:y,isActive:j},function(C){var A=C.upperWidth,S=C.lowerWidth,_=C.height,O=C.x,D=C.y;return Y.createElement(ti,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:N,easing:y},Y.createElement("path",Ky({},Rt(r,!0),{className:E,d:Q$(O,D,A,S,_),ref:a})))}):Y.createElement("g",null,Y.createElement("path",Ky({},Rt(r,!0),{className:E,d:Q$(d,u,p,m,h)})))},Ype=["option","shapeType","propTransformer","activeClassName","isActive"];function Z0(e){"@babel/helpers - typeof";return Z0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Z0(e)}function Xpe(e,t){if(e==null)return{};var r=Qpe(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Qpe(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Z$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function zy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Z$(Object(r),!0).forEach(function(a){Zpe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z$(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Zpe(e,t,r){return t=Jpe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jpe(e){var t=ehe(e,"string");return Z0(t)=="symbol"?t:t+""}function ehe(e,t){if(Z0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Z0(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function the(e,t){return zy(zy({},t),e)}function rhe(e,t){return e==="symbols"}function J$(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return Y.createElement(j1,r);case"trapezoid":return Y.createElement(Vpe,r);case"sector":return Y.createElement(gH,r);case"symbols":if(rhe(t))return Y.createElement(l1,r);break;default:return null}}function nhe(e){return g.isValidElement(e)?e.props:e}function qy(e){var t=e.option,r=e.shapeType,a=e.propTransformer,s=a===void 0?the:a,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,d=Xpe(e,Ype),u;if(g.isValidElement(t))u=g.cloneElement(t,zy(zy({},d),nhe(t)));else if(Gt(t))u=t(d);else if(Ipe(t)&&!$pe(t)){var p=s(t,d);u=Y.createElement(J$,{shapeType:r,elementProps:p})}else{var m=d;u=Y.createElement(J$,{shapeType:r,elementProps:m})}return l?Y.createElement(cr,{className:o},u):u}function _1(e,t){return t!=null&&"trapezoids"in e.props}function T1(e,t){return t!=null&&"sectors"in e.props}function J0(e,t){return t!=null&&"points"in e.props}function ahe(e,t){var r,a,s=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(a=t.labelViewBox)===null||a===void 0?void 0:a.y)||e.y===t.y;return s&&i}function she(e,t){var r=e.endAngle===t.endAngle,a=e.startAngle===t.startAngle;return r&&a}function ihe(e,t){var r=e.x===t.x,a=e.y===t.y,s=e.z===t.z;return r&&a&&s}function ohe(e,t){var r;return _1(e,t)?r=ahe:T1(e,t)?r=she:J0(e,t)&&(r=ihe),r}function lhe(e,t){var r;return _1(e,t)?r="trapezoids":T1(e,t)?r="sectors":J0(e,t)&&(r="points"),r}function che(e,t){if(_1(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(T1(e,t)){var a;return(a=t.tooltipPayload)===null||a===void 0||(a=a[0])===null||a===void 0||(a=a.payload)===null||a===void 0?void 0:a.payload}return J0(e,t)?t.payload:{}}function dhe(e){var t=e.activeTooltipItem,r=e.graphicalItem,a=e.itemData,s=lhe(r,t),i=che(r,t),o=a.filter(function(d,u){var p=Hd(i,d),m=r.props[s].filter(function(y){var N=ohe(r,t);return N(y,t)}),h=r.props[s].indexOf(m[m.length-1]),x=u===h;return p&&x}),l=a.indexOf(o[o.length-1]);return l}var Rb;function Qm(e){"@babel/helpers - typeof";return Qm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qm(e)}function lm(){return lm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},lm.apply(this,arguments)}function e4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function gn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e4(Object(r),!0).forEach(function(a){Xi(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e4(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function uhe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t4(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,kH(a.key),a)}}function fhe(e,t,r){return t&&t4(e.prototype,t),r&&t4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function mhe(e,t,r){return t=Wy(t),phe(e,OH()?Reflect.construct(t,r||[],Wy(e).constructor):t.apply(e,r))}function phe(e,t){if(t&&(Qm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hhe(e)}function hhe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function OH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OH=function(){return!!e})()}function Wy(e){return Wy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Wy(e)}function ghe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L_(e,t)}function L_(e,t){return L_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},L_(e,t)}function Xi(e,t,r){return t=kH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kH(e){var t=xhe(e,"string");return Qm(t)=="symbol"?t:t+""}function xhe(e,t){if(Qm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Qm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ll=(function(e){function t(r){var a;return uhe(this,t),a=mhe(this,t,[r]),Xi(a,"pieRef",null),Xi(a,"sectorRefs",[]),Xi(a,"id",Lc("recharts-pie-")),Xi(a,"handleAnimationEnd",function(){var s=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),Gt(s)&&s()}),Xi(a,"handleAnimationStart",function(){var s=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),Gt(s)&&s()}),a.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},a}return ghe(t,e),fhe(t,[{key:"isActiveIndex",value:function(a){var s=this.props.activeIndex;return Array.isArray(s)?s.indexOf(a)!==-1:a===s}},{key:"hasActiveIndex",value:function(){var a=this.props.activeIndex;return Array.isArray(a)?a.length!==0:a||a===0}},{key:"renderLabels",value:function(a){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.label,l=i.labelLine,d=i.dataKey,u=i.valueKey,p=Rt(this.props,!1),m=Rt(o,!1),h=Rt(l,!1),x=o&&o.offsetRadius||20,y=a.map(function(N,v){var j=(N.startAngle+N.endAngle)/2,E=bn(N.cx,N.cy,N.outerRadius+x,j),C=gn(gn(gn(gn({},p),N),{},{stroke:"none"},m),{},{index:v,textAnchor:t.getTextAnchor(E.x,N.cx)},E),A=gn(gn(gn(gn({},p),N),{},{fill:"none",stroke:N.fill},h),{},{index:v,points:[bn(N.cx,N.cy,N.outerRadius,j),E]}),S=d;return Qt(d)&&Qt(u)?S="value":Qt(d)&&(S=u),Y.createElement(cr,{key:"label-".concat(N.startAngle,"-").concat(N.endAngle,"-").concat(N.midAngle,"-").concat(v)},l&&t.renderLabelLineItem(l,A,"line"),t.renderLabelItem(o,C,dn(N,S)))});return Y.createElement(cr,{className:"recharts-pie-labels"},y)}},{key:"renderSectorsStatically",value:function(a){var s=this,i=this.props,o=i.activeShape,l=i.blendStroke,d=i.inactiveShape;return a.map(function(u,p){if(u?.startAngle===0&&u?.endAngle===0&&a.length!==1)return null;var m=s.isActiveIndex(p),h=d&&s.hasActiveIndex()?d:null,x=m?o:h,y=gn(gn({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return Y.createElement(cr,lm({ref:function(v){v&&!s.sectorRefs.includes(v)&&s.sectorRefs.push(v)},tabIndex:-1,className:"recharts-pie-sector"},Ud(s.props,u,p),{key:"sector-".concat(u?.startAngle,"-").concat(u?.endAngle,"-").concat(u.midAngle,"-").concat(p)}),Y.createElement(qy,lm({option:x,isActive:m,shapeType:"sector"},y)))})}},{key:"renderSectorsWithAnimation",value:function(){var a=this,s=this.props,i=s.sectors,o=s.isAnimationActive,l=s.animationBegin,d=s.animationDuration,u=s.animationEasing,p=s.animationId,m=this.state,h=m.prevSectors,x=m.prevIsAnimationActive;return Y.createElement(ti,{begin:l,duration:d,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(p,"-").concat(x),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(y){var N=y.t,v=[],j=i&&i[0],E=j.startAngle;return i.forEach(function(C,A){var S=h&&h[A],_=A>0?Js(C,"paddingAngle",0):0;if(S){var O=kn(S.endAngle-S.startAngle,C.endAngle-C.startAngle),D=gn(gn({},C),{},{startAngle:E+_,endAngle:E+O(N)+_});v.push(D),E=D.endAngle}else{var k=C.endAngle,M=C.startAngle,F=kn(0,k-M),$=F(N),B=gn(gn({},C),{},{startAngle:E+_,endAngle:E+$+_});v.push(B),E=B.endAngle}}),Y.createElement(cr,null,a.renderSectorsStatically(v))})}},{key:"attachKeyboardHandlers",value:function(a){var s=this;a.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var o=++s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[o].focus(),s.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--s.state.sectorToFocus<0?s.sectorRefs.length-1:s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[l].focus(),s.setState({sectorToFocus:l});break}case"Escape":{s.sectorRefs[s.state.sectorToFocus].blur(),s.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var a=this.props,s=a.sectors,i=a.isAnimationActive,o=this.state.prevSectors;return i&&s&&s.length&&(!o||!Hd(o,s))?this.renderSectorsWithAnimation():this.renderSectorsStatically(s)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var a=this,s=this.props,i=s.hide,o=s.sectors,l=s.className,d=s.label,u=s.cx,p=s.cy,m=s.innerRadius,h=s.outerRadius,x=s.isAnimationActive,y=this.state.isAnimationFinished;if(i||!o||!o.length||!et(u)||!et(p)||!et(m)||!et(h))return null;var N=ar("recharts-pie",l);return Y.createElement(cr,{tabIndex:this.props.rootTabIndex,className:N,ref:function(j){a.pieRef=j}},this.renderSectors(),d&&this.renderLabels(o),Ma.renderCallByParent(this.props,null,!1),(!x||y)&&hs.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return s.prevIsAnimationActive!==a.isAnimationActive?{prevIsAnimationActive:a.isAnimationActive,prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:[],isAnimationFinished:!0}:a.isAnimationActive&&a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:s.curSectors,isAnimationFinished:!0}:a.sectors!==s.curSectors?{curSectors:a.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(a,s){return a>s?"start":a<s?"end":"middle"}},{key:"renderLabelLineItem",value:function(a,s,i){if(Y.isValidElement(a))return Y.cloneElement(a,s);if(Gt(a))return a(s);var o=ar("recharts-pie-label-line",typeof a!="boolean"?a.className:"");return Y.createElement(Fd,lm({},s,{key:i,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(a,s,i){if(Y.isValidElement(a))return Y.cloneElement(a,s);var o=i;if(Gt(a)&&(o=a(s),Y.isValidElement(o)))return o;var l=ar("recharts-pie-label-text",typeof a!="boolean"&&!Gt(a)?a.className:"");return Y.createElement(Ju,lm({},s,{alignmentBaseline:"middle",className:l}),o)}}])})(g.PureComponent);Rb=Ll;Xi(Ll,"displayName","Pie");Xi(Ll,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Mo.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Xi(Ll,"parseDeltaAngle",function(e,t){var r=Os(t-e),a=Math.min(Math.abs(t-e),360);return r*a});Xi(Ll,"getRealPieData",function(e){var t=e.data,r=e.children,a=Rt(e,!1),s=Ds(r,Ji);return t&&t.length?t.map(function(i,o){return gn(gn(gn({payload:i},a),i),s&&s[o]&&s[o].props)}):s&&s.length?s.map(function(i){return gn(gn({},a),i.props)}):[]});Xi(Ll,"parseCoordinateOfPie",function(e,t){var r=t.top,a=t.left,s=t.width,i=t.height,o=uH(s,i),l=a+ks(e.cx,s,s/2),d=r+ks(e.cy,i,i/2),u=ks(e.innerRadius,o,0),p=ks(e.outerRadius,o,o*.8),m=e.maxRadius||Math.sqrt(s*s+i*i)/2;return{cx:l,cy:d,innerRadius:u,outerRadius:p,maxRadius:m}});Xi(Ll,"getComposedData",function(e){var t=e.item,r=e.offset,a=t.type.defaultProps!==void 0?gn(gn({},t.type.defaultProps),t.props):t.props,s=Rb.getRealPieData(a);if(!s||!s.length)return null;var i=a.cornerRadius,o=a.startAngle,l=a.endAngle,d=a.paddingAngle,u=a.dataKey,p=a.nameKey,m=a.valueKey,h=a.tooltipType,x=Math.abs(a.minAngle),y=Rb.parseCoordinateOfPie(a,r),N=Rb.parseDeltaAngle(o,l),v=Math.abs(N),j=u;Qt(u)&&Qt(m)?(Io(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),j="value"):Qt(u)&&(Io(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),j=m);var E=s.filter(function(D){return dn(D,j,0)!==0}).length,C=(v>=360?E:E-1)*d,A=v-E*x-C,S=s.reduce(function(D,k){var M=dn(k,j,0);return D+(et(M)?M:0)},0),_;if(S>0){var O;_=s.map(function(D,k){var M=dn(D,j,0),F=dn(D,p,k),$=(et(M)?M:0)/S,B;k?B=O.endAngle+Os(N)*d*(M!==0?1:0):B=o;var P=B+Os(N)*((M!==0?x:0)+$*A),W=(B+P)/2,K=(y.innerRadius+y.outerRadius)/2,G=[{name:F,value:M,payload:D,dataKey:j,type:h}],U=bn(y.cx,y.cy,K,W);return O=gn(gn(gn({percent:$,cornerRadius:i,name:F,tooltipPayload:G,midAngle:W,middleRadius:K,tooltipPosition:U},D),y),{},{value:dn(D,j),startAngle:B,endAngle:P,payload:D,paddingAngle:Os(N)*d}),O})}return gn(gn({},y),{},{sectors:_,data:s})});var sE,r4;function bhe(){if(r4)return sE;r4=1;var e=Math.ceil,t=Math.max;function r(a,s,i,o){for(var l=-1,d=t(e((s-a)/(i||1)),0),u=Array(d);d--;)u[o?d:++l]=a,a+=i;return u}return sE=r,sE}var iE,n4;function RH(){if(n4)return iE;n4=1;var e=ZU(),t=1/0,r=17976931348623157e292;function a(s){if(!s)return s===0?s:0;if(s=e(s),s===t||s===-t){var i=s<0?-1:1;return i*r}return s===s?s:0}return iE=a,iE}var oE,a4;function yhe(){if(a4)return oE;a4=1;var e=bhe(),t=f1(),r=RH();function a(s){return function(i,o,l){return l&&typeof l!="number"&&t(i,o,l)&&(o=l=void 0),i=r(i),o===void 0?(o=i,i=0):o=r(o),l=l===void 0?i<o?1:-1:r(l),e(i,o,l,s)}}return oE=a,oE}var lE,s4;function vhe(){if(s4)return lE;s4=1;var e=yhe(),t=e();return lE=t,lE}var Nhe=vhe();const Vy=Vr(Nhe);function eg(e){"@babel/helpers - typeof";return eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eg(e)}function i4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function o4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i4(Object(r),!0).forEach(function(a){PH(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i4(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function PH(e,t,r){return t=She(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function She(e){var t=jhe(e,"string");return eg(t)=="symbol"?t:t+""}function jhe(e,t){if(eg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(eg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var whe=["Webkit","Moz","O","ms"],Ehe=function(t,r){var a=t.replace(/(\w)/,function(i){return i.toUpperCase()}),s=whe.reduce(function(i,o){return o4(o4({},i),{},PH({},o+a,r))},{});return s[t]=r,s};function Zm(e){"@babel/helpers - typeof";return Zm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zm(e)}function Yy(){return Yy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Yy.apply(this,arguments)}function l4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function cE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?l4(Object(r),!0).forEach(function(a){bi(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l4(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Ahe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c4(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,IH(a.key),a)}}function Che(e,t,r){return t&&c4(e.prototype,t),r&&c4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _he(e,t,r){return t=Xy(t),The(e,DH()?Reflect.construct(t,r||[],Xy(e).constructor):t.apply(e,r))}function The(e,t){if(t&&(Zm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ohe(e)}function Ohe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DH=function(){return!!e})()}function Xy(e){return Xy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Xy(e)}function khe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$_(e,t)}function $_(e,t){return $_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},$_(e,t)}function bi(e,t,r){return t=IH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IH(e){var t=Rhe(e,"string");return Zm(t)=="symbol"?t:t+""}function Rhe(e,t){if(Zm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Zm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Phe=function(t){var r=t.data,a=t.startIndex,s=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var d=r.length,u=f0().domain(Vy(0,d)).range([i,i+o-l]),p=u.domain().map(function(m){return u(m)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(a),endX:u(s),scale:u,scaleValues:p}},d4=function(t){return t.changedTouches&&!!t.changedTouches.length},Jm=(function(e){function t(r){var a;return Ahe(this,t),a=_he(this,t,[r]),bi(a,"handleDrag",function(s){a.leaveTimer&&(clearTimeout(a.leaveTimer),a.leaveTimer=null),a.state.isTravellerMoving?a.handleTravellerMove(s):a.state.isSlideMoving&&a.handleSlideDrag(s)}),bi(a,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&a.handleDrag(s.changedTouches[0])}),bi(a,"handleDragEnd",function(){a.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=a.props,i=s.endIndex,o=s.onDragEnd,l=s.startIndex;o?.({endIndex:i,startIndex:l})}),a.detachDragEndListener()}),bi(a,"handleLeaveWrapper",function(){(a.state.isTravellerMoving||a.state.isSlideMoving)&&(a.leaveTimer=window.setTimeout(a.handleDragEnd,a.props.leaveTimeOut))}),bi(a,"handleEnterSlideOrTraveller",function(){a.setState({isTextActive:!0})}),bi(a,"handleLeaveSlideOrTraveller",function(){a.setState({isTextActive:!1})}),bi(a,"handleSlideDragStart",function(s){var i=d4(s)?s.changedTouches[0]:s;a.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),a.attachDragEndListener()}),a.travellerDragStartHandlers={startX:a.handleTravellerDragStart.bind(a,"startX"),endX:a.handleTravellerDragStart.bind(a,"endX")},a.state={},a}return khe(t,e),Che(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(a){var s=a.startX,i=a.endX,o=this.state.scaleValues,l=this.props,d=l.gap,u=l.data,p=u.length-1,m=Math.min(s,i),h=Math.max(s,i),x=t.getIndexInRange(o,m),y=t.getIndexInRange(o,h);return{startIndex:x-x%d,endIndex:y===p?p:y-y%d}}},{key:"getTextOfTick",value:function(a){var s=this.props,i=s.data,o=s.tickFormatter,l=s.dataKey,d=dn(i[a],l,a);return Gt(o)?o(d,a):d}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(a){var s=this.state,i=s.slideMoveStartX,o=s.startX,l=s.endX,d=this.props,u=d.x,p=d.width,m=d.travellerWidth,h=d.startIndex,x=d.endIndex,y=d.onChange,N=a.pageX-i;N>0?N=Math.min(N,u+p-m-l,u+p-m-o):N<0&&(N=Math.max(N,u-o,u-l));var v=this.getIndex({startX:o+N,endX:l+N});(v.startIndex!==h||v.endIndex!==x)&&y&&y(v),this.setState({startX:o+N,endX:l+N,slideMoveStartX:a.pageX})}},{key:"handleTravellerDragStart",value:function(a,s){var i=d4(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:a,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(a){var s=this.state,i=s.brushMoveStartX,o=s.movingTravellerId,l=s.endX,d=s.startX,u=this.state[o],p=this.props,m=p.x,h=p.width,x=p.travellerWidth,y=p.onChange,N=p.gap,v=p.data,j={startX:this.state.startX,endX:this.state.endX},E=a.pageX-i;E>0?E=Math.min(E,m+h-x-u):E<0&&(E=Math.max(E,m-u)),j[o]=u+E;var C=this.getIndex(j),A=C.startIndex,S=C.endIndex,_=function(){var D=v.length-1;return o==="startX"&&(l>d?A%N===0:S%N===0)||l<d&&S===D||o==="endX"&&(l>d?S%N===0:A%N===0)||l>d&&S===D};this.setState(bi(bi({},o,u+E),"brushMoveStartX",a.pageX),function(){y&&_()&&y(C)})}},{key:"handleTravellerMoveKeyboard",value:function(a,s){var i=this,o=this.state,l=o.scaleValues,d=o.startX,u=o.endX,p=this.state[s],m=l.indexOf(p);if(m!==-1){var h=m+a;if(!(h===-1||h>=l.length)){var x=l[h];s==="startX"&&x>=u||s==="endX"&&x<=d||this.setState(bi({},s,x),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var a=this.props,s=a.x,i=a.y,o=a.width,l=a.height,d=a.fill,u=a.stroke;return Y.createElement("rect",{stroke:u,fill:d,x:s,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var a=this.props,s=a.x,i=a.y,o=a.width,l=a.height,d=a.data,u=a.children,p=a.padding,m=g.Children.only(u);return m?Y.cloneElement(m,{x:s,y:i,width:o,height:l,margin:p,compact:!0,data:d}):null}},{key:"renderTravellerLayer",value:function(a,s){var i,o,l=this,d=this.props,u=d.y,p=d.travellerWidth,m=d.height,h=d.traveller,x=d.ariaLabel,y=d.data,N=d.startIndex,v=d.endIndex,j=Math.max(a,this.props.x),E=cE(cE({},Rt(this.props,!1)),{},{x:j,y:u,width:p,height:m}),C=x||"Min value: ".concat((i=y[N])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=y[v])===null||o===void 0?void 0:o.name);return Y.createElement(cr,{tabIndex:0,role:"slider","aria-label":C,"aria-valuenow":a,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(S){["ArrowLeft","ArrowRight"].includes(S.key)&&(S.preventDefault(),S.stopPropagation(),l.handleTravellerMoveKeyboard(S.key==="ArrowRight"?1:-1,s))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(h,E))}},{key:"renderSlide",value:function(a,s){var i=this.props,o=i.y,l=i.height,d=i.stroke,u=i.travellerWidth,p=Math.min(a,s)+u,m=Math.max(Math.abs(s-a)-u,0);return Y.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:d,fillOpacity:.2,x:p,y:o,width:m,height:l})}},{key:"renderText",value:function(){var a=this.props,s=a.startIndex,i=a.endIndex,o=a.y,l=a.height,d=a.travellerWidth,u=a.stroke,p=this.state,m=p.startX,h=p.endX,x=5,y={pointerEvents:"none",fill:u};return Y.createElement(cr,{className:"recharts-brush-texts"},Y.createElement(Ju,Yy({textAnchor:"end",verticalAnchor:"middle",x:Math.min(m,h)-x,y:o+l/2},y),this.getTextOfTick(s)),Y.createElement(Ju,Yy({textAnchor:"start",verticalAnchor:"middle",x:Math.max(m,h)+d+x,y:o+l/2},y),this.getTextOfTick(i)))}},{key:"render",value:function(){var a=this.props,s=a.data,i=a.className,o=a.children,l=a.x,d=a.y,u=a.width,p=a.height,m=a.alwaysShowText,h=this.state,x=h.startX,y=h.endX,N=h.isTextActive,v=h.isSlideMoving,j=h.isTravellerMoving,E=h.isTravellerFocused;if(!s||!s.length||!et(l)||!et(d)||!et(u)||!et(p)||u<=0||p<=0)return null;var C=ar("recharts-brush",i),A=Y.Children.count(o)===1,S=Ehe("userSelect","none");return Y.createElement(cr,{className:C,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:S},this.renderBackground(),A&&this.renderPanorama(),this.renderSlide(x,y),this.renderTravellerLayer(x,"startX"),this.renderTravellerLayer(y,"endX"),(N||v||j||E||m)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(a){var s=a.x,i=a.y,o=a.width,l=a.height,d=a.stroke,u=Math.floor(i+l/2)-1;return Y.createElement(Y.Fragment,null,Y.createElement("rect",{x:s,y:i,width:o,height:l,fill:d,stroke:"none"}),Y.createElement("line",{x1:s+1,y1:u,x2:s+o-1,y2:u,fill:"none",stroke:"#fff"}),Y.createElement("line",{x1:s+1,y1:u+2,x2:s+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(a,s){var i;return Y.isValidElement(a)?i=Y.cloneElement(a,s):Gt(a)?i=a(s):i=t.renderDefaultTraveller(s),i}},{key:"getDerivedStateFromProps",value:function(a,s){var i=a.data,o=a.width,l=a.x,d=a.travellerWidth,u=a.updateId,p=a.startIndex,m=a.endIndex;if(i!==s.prevData||u!==s.prevUpdateId)return cE({prevData:i,prevTravellerWidth:d,prevUpdateId:u,prevX:l,prevWidth:o},i&&i.length?Phe({data:i,width:o,x:l,travellerWidth:d,startIndex:p,endIndex:m}):{scale:null,scaleValues:null});if(s.scale&&(o!==s.prevWidth||l!==s.prevX||d!==s.prevTravellerWidth)){s.scale.range([l,l+o-d]);var h=s.scale.domain().map(function(x){return s.scale(x)});return{prevData:i,prevTravellerWidth:d,prevUpdateId:u,prevX:l,prevWidth:o,startX:s.scale(a.startIndex),endX:s.scale(a.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(a,s){for(var i=a.length,o=0,l=i-1;l-o>1;){var d=Math.floor((o+l)/2);a[d]>s?l=d:o=d}return s>=a[l]?l:o}}])})(g.PureComponent);bi(Jm,"displayName","Brush");bi(Jm,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var dE,u4;function Dhe(){if(u4)return dE;u4=1;var e=sk();function t(r,a){var s;return e(r,function(i,o,l){return s=a(i,o,l),!s}),!!s}return dE=t,dE}var uE,f4;function Ihe(){if(f4)return uE;f4=1;var e=AU(),t=Ml(),r=Dhe(),a=Ms(),s=f1();function i(o,l,d){var u=a(o)?e:r;return d&&s(o,l,d)&&(l=void 0),u(o,t(l,3))}return uE=i,uE}var Mhe=Ihe();const Lhe=Vr(Mhe);var Cl=function(t,r){var a=t.alwaysShow,s=t.ifOverflow;return a&&(s="extendDomain"),s===r},fE,m4;function Mk(){if(m4)return fE;m4=1;var e=qU();function t(r,a,s){a=="__proto__"&&e?e(r,a,{configurable:!0,enumerable:!0,value:s,writable:!0}):r[a]=s}return fE=t,fE}var mE,p4;function $he(){if(p4)return mE;p4=1;var e=Mk(),t=GU(),r=Ml();function a(s,i){var o={};return i=r(i,3),t(s,function(l,d,u){e(o,d,i(l,d,u))}),o}return mE=a,mE}var Fhe=$he();const Bhe=Vr(Fhe);var pE,h4;function Uhe(){if(h4)return pE;h4=1;function e(t,r){for(var a=-1,s=t==null?0:t.length;++a<s;)if(!r(t[a],a,t))return!1;return!0}return pE=e,pE}var hE,g4;function Hhe(){if(g4)return hE;g4=1;var e=sk();function t(r,a){var s=!0;return e(r,function(i,o,l){return s=!!a(i,o,l),s}),s}return hE=t,hE}var gE,x4;function Ghe(){if(x4)return gE;x4=1;var e=Uhe(),t=Hhe(),r=Ml(),a=Ms(),s=f1();function i(o,l,d){var u=a(o)?e:t;return d&&s(o,l,d)&&(l=void 0),u(o,r(l,3))}return gE=i,gE}var Khe=Ghe();const MH=Vr(Khe);var zhe=["x","y"];function tg(e){"@babel/helpers - typeof";return tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tg(e)}function F_(){return F_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},F_.apply(this,arguments)}function b4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Th(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?b4(Object(r),!0).forEach(function(a){qhe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b4(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function qhe(e,t,r){return t=Whe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Whe(e){var t=Vhe(e,"string");return tg(t)=="symbol"?t:t+""}function Vhe(e,t){if(tg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(tg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yhe(e,t){if(e==null)return{};var r=Xhe(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Xhe(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Qhe(e,t){var r=e.x,a=e.y,s=Yhe(e,zhe),i="".concat(r),o=parseInt(i,10),l="".concat(a),d=parseInt(l,10),u="".concat(t.height||s.height),p=parseInt(u,10),m="".concat(t.width||s.width),h=parseInt(m,10);return Th(Th(Th(Th(Th({},t),s),o?{x:o}:{}),d?{y:d}:{}),{},{height:p,width:h,name:t.name,radius:t.radius})}function y4(e){return Y.createElement(qy,F_({shapeType:"rectangle",propTransformer:Qhe,activeClassName:"recharts-active-bar"},e))}var Zhe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(a,s){if(typeof t=="number")return t;var i=et(a)||Sre(a);return i?t(a,s):(i||rf(),r)}},Jhe=["value","background"],LH;function ep(e){"@babel/helpers - typeof";return ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ep(e)}function e0e(e,t){if(e==null)return{};var r=t0e(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function t0e(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Qy(){return Qy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Qy.apply(this,arguments)}function v4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function ea(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?v4(Object(r),!0).forEach(function(a){kd(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v4(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function r0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N4(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,FH(a.key),a)}}function n0e(e,t,r){return t&&N4(e.prototype,t),r&&N4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function a0e(e,t,r){return t=Zy(t),s0e(e,$H()?Reflect.construct(t,r||[],Zy(e).constructor):t.apply(e,r))}function s0e(e,t){if(t&&(ep(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return i0e(e)}function i0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $H(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($H=function(){return!!e})()}function Zy(e){return Zy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Zy(e)}function o0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B_(e,t)}function B_(e,t){return B_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},B_(e,t)}function kd(e,t,r){return t=FH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FH(e){var t=l0e(e,"string");return ep(t)=="symbol"?t:t+""}function l0e(e,t){if(ep(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(ep(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Xa=(function(e){function t(){var r;r0e(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=a0e(this,t,[].concat(s)),kd(r,"state",{isAnimationFinished:!1}),kd(r,"id",Lc("recharts-bar-")),kd(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),kd(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return o0e(t,e),n0e(t,[{key:"renderRectanglesStatically",value:function(a){var s=this,i=this.props,o=i.shape,l=i.dataKey,d=i.activeIndex,u=i.activeBar,p=Rt(this.props,!1);return a&&a.map(function(m,h){var x=h===d,y=x?u:o,N=ea(ea(ea({},p),m),{},{isActive:x,option:y,index:h,dataKey:l,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return Y.createElement(cr,Qy({className:"recharts-bar-rectangle"},Ud(s.props,m,h),{key:"rectangle-".concat(m?.x,"-").concat(m?.y,"-").concat(m?.value,"-").concat(h)}),Y.createElement(y4,N))})}},{key:"renderRectanglesWithAnimation",value:function(){var a=this,s=this.props,i=s.data,o=s.layout,l=s.isAnimationActive,d=s.animationBegin,u=s.animationDuration,p=s.animationEasing,m=s.animationId,h=this.state.prevData;return Y.createElement(ti,{begin:d,duration:u,isActive:l,easing:p,from:{t:0},to:{t:1},key:"bar-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var y=x.t,N=i.map(function(v,j){var E=h&&h[j];if(E){var C=kn(E.x,v.x),A=kn(E.y,v.y),S=kn(E.width,v.width),_=kn(E.height,v.height);return ea(ea({},v),{},{x:C(y),y:A(y),width:S(y),height:_(y)})}if(o==="horizontal"){var O=kn(0,v.height),D=O(y);return ea(ea({},v),{},{y:v.y+v.height-D,height:D})}var k=kn(0,v.width),M=k(y);return ea(ea({},v),{},{width:M})});return Y.createElement(cr,null,a.renderRectanglesStatically(N))})}},{key:"renderRectangles",value:function(){var a=this.props,s=a.data,i=a.isAnimationActive,o=this.state.prevData;return i&&s&&s.length&&(!o||!Hd(o,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var a=this,s=this.props,i=s.data,o=s.dataKey,l=s.activeIndex,d=Rt(this.props.background,!1);return i.map(function(u,p){u.value;var m=u.background,h=e0e(u,Jhe);if(!m)return null;var x=ea(ea(ea(ea(ea({},h),{},{fill:"#eee"},m),d),Ud(a.props,u,p)),{},{onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd,dataKey:o,index:p,className:"recharts-bar-background-rectangle"});return Y.createElement(y4,Qy({key:"background-bar-".concat(p),option:a.props.background,isActive:p===l},x))})}},{key:"renderErrorBar",value:function(a,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,d=i.yAxis,u=i.layout,p=i.children,m=Ds(p,Lp);if(!m)return null;var h=u==="vertical"?o[0].height/2:o[0].width/2,x=function(v,j){var E=Array.isArray(v.value)?v.value[1]:v.value;return{x:v.x,y:v.y,value:E,errorVal:dn(v,j)}},y={clipPath:a?"url(#clipPath-".concat(s,")"):null};return Y.createElement(cr,y,m.map(function(N){return Y.cloneElement(N,{key:"error-bar-".concat(s,"-").concat(N.props.dataKey),data:o,xAxis:l,yAxis:d,layout:u,offset:h,dataPointFormatter:x})}))}},{key:"render",value:function(){var a=this.props,s=a.hide,i=a.data,o=a.className,l=a.xAxis,d=a.yAxis,u=a.left,p=a.top,m=a.width,h=a.height,x=a.isAnimationActive,y=a.background,N=a.id;if(s||!i||!i.length)return null;var v=this.state.isAnimationFinished,j=ar("recharts-bar",o),E=l&&l.allowDataOverflow,C=d&&d.allowDataOverflow,A=E||C,S=Qt(N)?this.id:N;return Y.createElement(cr,{className:j},E||C?Y.createElement("defs",null,Y.createElement("clipPath",{id:"clipPath-".concat(S)},Y.createElement("rect",{x:E?u:u-m/2,y:C?p:p-h/2,width:E?m:m*2,height:C?h:h*2}))):null,Y.createElement(cr,{className:"recharts-bar-rectangles",clipPath:A?"url(#clipPath-".concat(S,")"):null},y?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(A,S),(!x||v)&&hs.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curData:a.data,prevData:s.curData}:a.data!==s.curData?{curData:a.data}:null}}])})(g.PureComponent);LH=Xa;kd(Xa,"displayName","Bar");kd(Xa,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Mo.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});kd(Xa,"getComposedData",function(e){var t=e.props,r=e.item,a=e.barPosition,s=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,d=e.yAxisTicks,u=e.stackedData,p=e.dataStartIndex,m=e.displayedData,h=e.offset,x=$de(a,r);if(!x)return null;var y=t.layout,N=r.type.defaultProps,v=N!==void 0?ea(ea({},N),r.props):r.props,j=v.dataKey,E=v.children,C=v.minPointSize,A=y==="horizontal"?o:i,S=u?A.scale.domain():null,_=zde({numericAxis:A}),O=Ds(E,Ji),D=m.map(function(k,M){var F,$,B,P,W,K;u?F=Fde(u[p+M],S):(F=dn(k,j),Array.isArray(F)||(F=[_,F]));var G=Zhe(C,LH.defaultProps.minPointSize)(F[1],M);if(y==="horizontal"){var U,te=[o.scale(F[0]),o.scale(F[1])],re=te[0],q=te[1];$=YL({axis:i,ticks:l,bandSize:s,offset:x.offset,entry:k,index:M}),B=(U=q??re)!==null&&U!==void 0?U:void 0,P=x.size;var L=re-q;if(W=Number.isNaN(L)?0:L,K={x:$,y:o.y,width:P,height:o.height},Math.abs(G)>0&&Math.abs(W)<Math.abs(G)){var H=Os(W||G)*(Math.abs(G)-Math.abs(W));B-=H,W+=H}}else{var ae=[i.scale(F[0]),i.scale(F[1])],oe=ae[0],ve=ae[1];if($=oe,B=YL({axis:o,ticks:d,bandSize:s,offset:x.offset,entry:k,index:M}),P=ve-oe,W=x.size,K={x:i.x,y:B,width:i.width,height:W},Math.abs(G)>0&&Math.abs(P)<Math.abs(G)){var ce=Os(P||G)*(Math.abs(G)-Math.abs(P));P+=ce}}return ea(ea(ea({},k),{},{x:$,y:B,width:P,height:W,value:u?F:F[1],payload:k,background:K},O&&O[M]&&O[M].props),{},{tooltipPayload:[cH(r,k)],tooltipPosition:{x:$+P/2,y:B+W/2}})});return ea({data:D,layout:y},h)});function rg(e){"@babel/helpers - typeof";return rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rg(e)}function c0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S4(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,BH(a.key),a)}}function d0e(e,t,r){return t&&S4(e.prototype,t),r&&S4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function j4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Ao(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?j4(Object(r),!0).forEach(function(a){O1(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j4(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function O1(e,t,r){return t=BH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BH(e){var t=u0e(e,"string");return rg(t)=="symbol"?t:t+""}function u0e(e,t){if(rg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(rg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var k1=function(t,r,a,s,i){var o=t.width,l=t.height,d=t.layout,u=t.children,p=Object.keys(r),m={left:a.left,leftMirror:a.left,right:o-a.right,rightMirror:o-a.right,top:a.top,topMirror:a.top,bottom:l-a.bottom,bottomMirror:l-a.bottom},h=!!us(u,Xa);return p.reduce(function(x,y){var N=r[y],v=N.orientation,j=N.domain,E=N.padding,C=E===void 0?{}:E,A=N.mirror,S=N.reversed,_="".concat(v).concat(A?"Mirror":""),O,D,k,M,F;if(N.type==="number"&&(N.padding==="gap"||N.padding==="no-gap")){var $=j[1]-j[0],B=1/0,P=N.categoricalDomain.sort(Are);if(P.forEach(function(ae,oe){oe>0&&(B=Math.min((ae||0)-(P[oe-1]||0),B))}),Number.isFinite(B)){var W=B/$,K=N.layout==="vertical"?a.height:a.width;if(N.padding==="gap"&&(O=W*K/2),N.padding==="no-gap"){var G=ks(t.barCategoryGap,W*K),U=W*K/2;O=U-G-(U-G)/K*G}}}s==="xAxis"?D=[a.left+(C.left||0)+(O||0),a.left+a.width-(C.right||0)-(O||0)]:s==="yAxis"?D=d==="horizontal"?[a.top+a.height-(C.bottom||0),a.top+(C.top||0)]:[a.top+(C.top||0)+(O||0),a.top+a.height-(C.bottom||0)-(O||0)]:D=N.range,S&&(D=[D[1],D[0]]);var te=sH(N,i,h),re=te.scale,q=te.realScaleType;re.domain(j).range(D),iH(re);var L=oH(re,Ao(Ao({},N),{},{realScaleType:q}));s==="xAxis"?(F=v==="top"&&!A||v==="bottom"&&A,k=a.left,M=m[_]-F*N.height):s==="yAxis"&&(F=v==="left"&&!A||v==="right"&&A,k=m[_]-F*N.width,M=a.top);var H=Ao(Ao(Ao({},N),L),{},{realScaleType:q,x:k,y:M,scale:re,width:s==="xAxis"?a.width:N.width,height:s==="yAxis"?a.height:N.height});return H.bandSize=Dy(H,L),!N.hide&&s==="xAxis"?m[_]+=(F?-1:1)*H.height:N.hide||(m[_]+=(F?-1:1)*H.width),Ao(Ao({},x),{},O1({},y,H))},{})},UH=function(t,r){var a=t.x,s=t.y,i=r.x,o=r.y;return{x:Math.min(a,i),y:Math.min(s,o),width:Math.abs(i-a),height:Math.abs(o-s)}},f0e=function(t){var r=t.x1,a=t.y1,s=t.x2,i=t.y2;return UH({x:r,y:a},{x:s,y:i})},HH=(function(){function e(t){c0e(this,e),this.scale=t}return d0e(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.bandAware,i=a.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(s){var d=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+d}return this.scale(r)}}},{key:"isInRange",value:function(r){var a=this.range(),s=a[0],i=a[a.length-1];return s<=i?r>=s&&r<=i:r>=i&&r<=s}}],[{key:"create",value:function(r){return new e(r)}}])})();O1(HH,"EPS",1e-4);var Lk=function(t){var r=Object.keys(t).reduce(function(a,s){return Ao(Ao({},a),{},O1({},s,HH.create(t[s])))},{});return Ao(Ao({},r),{},{apply:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return Bhe(s,function(d,u){return r[u].apply(d,{bandAware:o,position:l})})},isInRange:function(s){return MH(s,function(i,o){return r[o].isInRange(i)})}})};function m0e(e){return(e%180+180)%180}var p0e=function(t){var r=t.width,a=t.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=m0e(s),o=i*Math.PI/180,l=Math.atan(a/r),d=o>l&&o<Math.PI-l?a/Math.sin(o):r/Math.cos(o);return Math.abs(d)},xE,w4;function h0e(){if(w4)return xE;w4=1;var e=Ml(),t=kp(),r=Rp();function a(s){return function(i,o,l){var d=Object(i);if(!t(i)){var u=e(o,3);i=r(i),o=function(m){return u(d[m],m,d)}}var p=s(i,o,l);return p>-1?d[u?i[p]:p]:void 0}}return xE=a,xE}var bE,E4;function g0e(){if(E4)return bE;E4=1;var e=RH();function t(r){var a=e(r),s=a%1;return a===a?s?a-s:a:0}return bE=t,bE}var yE,A4;function x0e(){if(A4)return yE;A4=1;var e=FU(),t=Ml(),r=g0e(),a=Math.max;function s(i,o,l){var d=i==null?0:i.length;if(!d)return-1;var u=l==null?0:r(l);return u<0&&(u=a(d+u,0)),e(i,t(o,3),u)}return yE=s,yE}var vE,C4;function b0e(){if(C4)return vE;C4=1;var e=h0e(),t=x0e(),r=e(t);return vE=r,vE}var y0e=b0e();const v0e=Vr(y0e);var N0e=ZB();const S0e=Vr(N0e);var j0e=S0e(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),$k=g.createContext(void 0),Fk=g.createContext(void 0),GH=g.createContext(void 0),KH=g.createContext({}),zH=g.createContext(void 0),qH=g.createContext(0),WH=g.createContext(0),_4=function(t){var r=t.state,a=r.xAxisMap,s=r.yAxisMap,i=r.offset,o=t.clipPathId,l=t.children,d=t.width,u=t.height,p=j0e(i);return Y.createElement($k.Provider,{value:a},Y.createElement(Fk.Provider,{value:s},Y.createElement(KH.Provider,{value:i},Y.createElement(GH.Provider,{value:p},Y.createElement(zH.Provider,{value:o},Y.createElement(qH.Provider,{value:u},Y.createElement(WH.Provider,{value:d},l)))))))},w0e=function(){return g.useContext(zH)},VH=function(t){var r=g.useContext($k);r==null&&rf();var a=r[t];return a==null&&rf(),a},E0e=function(){var t=g.useContext($k);return _d(t)},A0e=function(){var t=g.useContext(Fk),r=v0e(t,function(a){return MH(a.domain,Number.isFinite)});return r||_d(t)},YH=function(t){var r=g.useContext(Fk);r==null&&rf();var a=r[t];return a==null&&rf(),a},C0e=function(){var t=g.useContext(GH);return t},_0e=function(){return g.useContext(KH)},Bk=function(){return g.useContext(WH)},Uk=function(){return g.useContext(qH)};function tp(e){"@babel/helpers - typeof";return tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tp(e)}function T0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O0e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,QH(a.key),a)}}function k0e(e,t,r){return t&&O0e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function R0e(e,t,r){return t=Jy(t),P0e(e,XH()?Reflect.construct(t,r||[],Jy(e).constructor):t.apply(e,r))}function P0e(e,t){if(t&&(tp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return D0e(e)}function D0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XH=function(){return!!e})()}function Jy(e){return Jy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Jy(e)}function I0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U_(e,t)}function U_(e,t){return U_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},U_(e,t)}function T4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function O4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?T4(Object(r),!0).forEach(function(a){Hk(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T4(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Hk(e,t,r){return t=QH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QH(e){var t=M0e(e,"string");return tp(t)=="symbol"?t:t+""}function M0e(e,t){if(tp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(tp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function L0e(e,t){return U0e(e)||B0e(e,t)||F0e(e,t)||$0e()}function $0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F0e(e,t){if(e){if(typeof e=="string")return k4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k4(e,t)}}function k4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function B0e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(p){u=!0,s=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function U0e(e){if(Array.isArray(e))return e}function H_(){return H_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},H_.apply(this,arguments)}var H0e=function(t,r){var a;return Y.isValidElement(t)?a=Y.cloneElement(t,r):Gt(t)?a=t(r):a=Y.createElement("line",H_({},r,{className:"recharts-reference-line-line"})),a},G0e=function(t,r,a,s,i,o,l,d,u){var p=i.x,m=i.y,h=i.width,x=i.height;if(a){var y=u.y,N=t.y.apply(y,{position:o});if(Cl(u,"discard")&&!t.y.isInRange(N))return null;var v=[{x:p+h,y:N},{x:p,y:N}];return d==="left"?v.reverse():v}if(r){var j=u.x,E=t.x.apply(j,{position:o});if(Cl(u,"discard")&&!t.x.isInRange(E))return null;var C=[{x:E,y:m+x},{x:E,y:m}];return l==="top"?C.reverse():C}if(s){var A=u.segment,S=A.map(function(_){return t.apply(_,{position:o})});return Cl(u,"discard")&&Lhe(S,function(_){return!t.isInRange(_)})?null:S}return null};function K0e(e){var t=e.x,r=e.y,a=e.segment,s=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,d=e.alwaysShow,u=w0e(),p=VH(s),m=YH(i),h=C0e();if(!u||!h)return null;Io(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var x=Lk({x:p.scale,y:m.scale}),y=va(t),N=va(r),v=a&&a.length===2,j=G0e(x,y,N,v,h,e.position,p.orientation,m.orientation,e);if(!j)return null;var E=L0e(j,2),C=E[0],A=C.x,S=C.y,_=E[1],O=_.x,D=_.y,k=Cl(e,"hidden")?"url(#".concat(u,")"):void 0,M=O4(O4({clipPath:k},Rt(e,!0)),{},{x1:A,y1:S,x2:O,y2:D});return Y.createElement(cr,{className:ar("recharts-reference-line",l)},H0e(o,M),Ma.renderCallByParent(e,f0e({x1:A,y1:S,x2:O,y2:D})))}var _l=(function(e){function t(){return T0e(this,t),R0e(this,t,arguments)}return I0e(t,e),k0e(t,[{key:"render",value:function(){return Y.createElement(K0e,this.props)}}])})(Y.Component);Hk(_l,"displayName","ReferenceLine");Hk(_l,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function G_(){return G_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},G_.apply(this,arguments)}function rp(e){"@babel/helpers - typeof";return rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rp(e)}function R4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function P4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?R4(Object(r),!0).forEach(function(a){R1(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R4(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function z0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q0e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,JH(a.key),a)}}function W0e(e,t,r){return t&&q0e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function V0e(e,t,r){return t=ev(t),Y0e(e,ZH()?Reflect.construct(t,r||[],ev(e).constructor):t.apply(e,r))}function Y0e(e,t){if(t&&(rp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return X0e(e)}function X0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZH=function(){return!!e})()}function ev(e){return ev=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ev(e)}function Q0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&K_(e,t)}function K_(e,t){return K_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},K_(e,t)}function R1(e,t,r){return t=JH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JH(e){var t=Z0e(e,"string");return rp(t)=="symbol"?t:t+""}function Z0e(e,t){if(rp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(rp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var J0e=function(t){var r=t.x,a=t.y,s=t.xAxis,i=t.yAxis,o=Lk({x:s.scale,y:i.scale}),l=o.apply({x:r,y:a},{bandAware:!0});return Cl(t,"discard")&&!o.isInRange(l)?null:l},Eg=(function(e){function t(){return z0e(this,t),V0e(this,t,arguments)}return Q0e(t,e),W0e(t,[{key:"render",value:function(){var a=this.props,s=a.x,i=a.y,o=a.r,l=a.alwaysShow,d=a.clipPathId,u=va(s),p=va(i);if(Io(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!p)return null;var m=J0e(this.props);if(!m)return null;var h=m.x,x=m.y,y=this.props,N=y.shape,v=y.className,j=Cl(this.props,"hidden")?"url(#".concat(d,")"):void 0,E=P4(P4({clipPath:j},Rt(this.props,!0)),{},{cx:h,cy:x});return Y.createElement(cr,{className:ar("recharts-reference-dot",v)},t.renderDot(N,E),Ma.renderCallByParent(this.props,{x:h-o,y:x-o,width:2*o,height:2*o}))}}])})(Y.Component);R1(Eg,"displayName","ReferenceDot");R1(Eg,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});R1(Eg,"renderDot",function(e,t){var r;return Y.isValidElement(e)?r=Y.cloneElement(e,t):Gt(e)?r=e(t):r=Y.createElement(wg,G_({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function z_(){return z_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},z_.apply(this,arguments)}function np(e){"@babel/helpers - typeof";return np=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},np(e)}function D4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function I4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?D4(Object(r),!0).forEach(function(a){P1(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D4(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function ege(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tge(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,tG(a.key),a)}}function rge(e,t,r){return t&&tge(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function nge(e,t,r){return t=tv(t),age(e,eG()?Reflect.construct(t,r||[],tv(e).constructor):t.apply(e,r))}function age(e,t){if(t&&(np(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sge(e)}function sge(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eG=function(){return!!e})()}function tv(e){return tv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},tv(e)}function ige(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q_(e,t)}function q_(e,t){return q_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},q_(e,t)}function P1(e,t,r){return t=tG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tG(e){var t=oge(e,"string");return np(t)=="symbol"?t:t+""}function oge(e,t){if(np(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(np(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var lge=function(t,r,a,s,i){var o=i.x1,l=i.x2,d=i.y1,u=i.y2,p=i.xAxis,m=i.yAxis;if(!p||!m)return null;var h=Lk({x:p.scale,y:m.scale}),x={x:t?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:a?h.y.apply(d,{position:"start"}):h.y.rangeMin},y={x:r?h.x.apply(l,{position:"end"}):h.x.rangeMax,y:s?h.y.apply(u,{position:"end"}):h.y.rangeMax};return Cl(i,"discard")&&(!h.isInRange(x)||!h.isInRange(y))?null:UH(x,y)},D1=(function(e){function t(){return ege(this,t),nge(this,t,arguments)}return ige(t,e),rge(t,[{key:"render",value:function(){var a=this.props,s=a.x1,i=a.x2,o=a.y1,l=a.y2,d=a.className,u=a.alwaysShow,p=a.clipPathId;Io(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=va(s),h=va(i),x=va(o),y=va(l),N=this.props.shape;if(!m&&!h&&!x&&!y&&!N)return null;var v=lge(m,h,x,y,this.props);if(!v&&!N)return null;var j=Cl(this.props,"hidden")?"url(#".concat(p,")"):void 0;return Y.createElement(cr,{className:ar("recharts-reference-area",d)},t.renderRect(N,I4(I4({clipPath:j},Rt(this.props,!0)),v)),Ma.renderCallByParent(this.props,v))}}])})(Y.Component);P1(D1,"displayName","ReferenceArea");P1(D1,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});P1(D1,"renderRect",function(e,t){var r;return Y.isValidElement(e)?r=Y.cloneElement(e,t):Gt(e)?r=e(t):r=Y.createElement(j1,z_({},t,{className:"recharts-reference-area-rect"})),r});function rG(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var a=[],s=0;s<e.length;s+=t)a.push(e[s]);return a}function cge(e,t,r){var a={width:e.width+t.width,height:e.height+t.height};return p0e(a,r)}function dge(e,t,r){var a=r==="width",s=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:a?s:i,end:a?s+o:i+l}:{start:a?s+o:i+l,end:a?s:i}}function rv(e,t,r,a,s){if(e*t<e*a||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-a)>=0&&e*(t+e*i/2-s)<=0}function uge(e,t){return rG(e,t+1)}function fge(e,t,r,a,s){for(var i=(a||[]).slice(),o=t.start,l=t.end,d=0,u=1,p=o,m=function(){var y=a?.[d];if(y===void 0)return{v:rG(a,u)};var N=d,v,j=function(){return v===void 0&&(v=r(y,N)),v},E=y.coordinate,C=d===0||rv(e,E,j,p,l);C||(d=0,p=o,u+=1),C&&(p=E+e*(j()/2+s),d+=u)},h;u<=i.length;)if(h=m(),h)return h.v;return[]}function ng(e){"@babel/helpers - typeof";return ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ng(e)}function M4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function cs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?M4(Object(r),!0).forEach(function(a){mge(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M4(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function mge(e,t,r){return t=pge(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pge(e){var t=hge(e,"string");return ng(t)=="symbol"?t:t+""}function hge(e,t){if(ng(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(ng(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gge(e,t,r,a,s){for(var i=(a||[]).slice(),o=i.length,l=t.start,d=t.end,u=function(h){var x=i[h],y,N=function(){return y===void 0&&(y=r(x,h)),y};if(h===o-1){var v=e*(x.coordinate+e*N()/2-d);i[h]=x=cs(cs({},x),{},{tickCoord:v>0?x.coordinate-v*e:x.coordinate})}else i[h]=x=cs(cs({},x),{},{tickCoord:x.coordinate});var j=rv(e,x.tickCoord,N,l,d);j&&(d=x.tickCoord-e*(N()/2+s),i[h]=cs(cs({},x),{},{isShow:!0}))},p=o-1;p>=0;p--)u(p);return i}function xge(e,t,r,a,s,i){var o=(a||[]).slice(),l=o.length,d=t.start,u=t.end;if(i){var p=a[l-1],m=r(p,l-1),h=e*(p.coordinate+e*m/2-u);o[l-1]=p=cs(cs({},p),{},{tickCoord:h>0?p.coordinate-h*e:p.coordinate});var x=rv(e,p.tickCoord,function(){return m},d,u);x&&(u=p.tickCoord-e*(m/2+s),o[l-1]=cs(cs({},p),{},{isShow:!0}))}for(var y=i?l-1:l,N=function(E){var C=o[E],A,S=function(){return A===void 0&&(A=r(C,E)),A};if(E===0){var _=e*(C.coordinate-e*S()/2-d);o[E]=C=cs(cs({},C),{},{tickCoord:_<0?C.coordinate-_*e:C.coordinate})}else o[E]=C=cs(cs({},C),{},{tickCoord:C.coordinate});var O=rv(e,C.tickCoord,S,d,u);O&&(d=C.tickCoord+e*(S()/2+s),o[E]=cs(cs({},C),{},{isShow:!0}))},v=0;v<y;v++)N(v);return o}function Gk(e,t,r){var a=e.tick,s=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,d=e.interval,u=e.tickFormatter,p=e.unit,m=e.angle;if(!s||!s.length||!a)return[];if(et(d)||Mo.isSsr)return uge(s,typeof d=="number"&&et(d)?d:0);var h=[],x=l==="top"||l==="bottom"?"width":"height",y=p&&x==="width"?vm(p,{fontSize:t,letterSpacing:r}):{width:0,height:0},N=function(C,A){var S=Gt(u)?u(C.value,A):C.value;return x==="width"?cge(vm(S,{fontSize:t,letterSpacing:r}),y,m):vm(S,{fontSize:t,letterSpacing:r})[x]},v=s.length>=2?Os(s[1].coordinate-s[0].coordinate):1,j=dge(i,v,x);return d==="equidistantPreserveStart"?fge(v,j,N,s,o):(d==="preserveStart"||d==="preserveStartEnd"?h=xge(v,j,N,s,o,d==="preserveStartEnd"):h=gge(v,j,N,s,o),h.filter(function(E){return E.isShow}))}var bge=["viewBox"],yge=["viewBox"],vge=["ticks"];function ap(e){"@babel/helpers - typeof";return ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ap(e)}function cm(){return cm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},cm.apply(this,arguments)}function L4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function ma(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?L4(Object(r),!0).forEach(function(a){Kk(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L4(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function NE(e,t){if(e==null)return{};var r=Nge(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Nge(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Sge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $4(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,aG(a.key),a)}}function jge(e,t,r){return t&&$4(e.prototype,t),r&&$4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function wge(e,t,r){return t=nv(t),Ege(e,nG()?Reflect.construct(t,r||[],nv(e).constructor):t.apply(e,r))}function Ege(e,t){if(t&&(ap(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Age(e)}function Age(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nG=function(){return!!e})()}function nv(e){return nv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},nv(e)}function Cge(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&W_(e,t)}function W_(e,t){return W_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},W_(e,t)}function Kk(e,t,r){return t=aG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aG(e){var t=_ge(e,"string");return ap(t)=="symbol"?t:t+""}function _ge(e,t){if(ap(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(ap(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var $p=(function(e){function t(r){var a;return Sge(this,t),a=wge(this,t,[r]),a.state={fontSize:"",letterSpacing:""},a}return Cge(t,e),jge(t,[{key:"shouldComponentUpdate",value:function(a,s){var i=a.viewBox,o=NE(a,bge),l=this.props,d=l.viewBox,u=NE(l,yge);return!ym(i,d)||!ym(o,u)||!ym(s,this.state)}},{key:"componentDidMount",value:function(){var a=this.layerReference;if(a){var s=a.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(a){var s=this.props,i=s.x,o=s.y,l=s.width,d=s.height,u=s.orientation,p=s.tickSize,m=s.mirror,h=s.tickMargin,x,y,N,v,j,E,C=m?-1:1,A=a.tickSize||p,S=et(a.tickCoord)?a.tickCoord:a.coordinate;switch(u){case"top":x=y=a.coordinate,v=o+ +!m*d,N=v-C*A,E=N-C*h,j=S;break;case"left":N=v=a.coordinate,y=i+ +!m*l,x=y-C*A,j=x-C*h,E=S;break;case"right":N=v=a.coordinate,y=i+ +m*l,x=y+C*A,j=x+C*h,E=S;break;default:x=y=a.coordinate,v=o+ +m*d,N=v+C*A,E=N+C*h,j=S;break}return{line:{x1:x,y1:N,x2:y,y2:v},tick:{x:j,y:E}}}},{key:"getTickTextAnchor",value:function(){var a=this.props,s=a.orientation,i=a.mirror,o;switch(s){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var a=this.props,s=a.orientation,i=a.mirror,o="end";switch(s){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var a=this.props,s=a.x,i=a.y,o=a.width,l=a.height,d=a.orientation,u=a.mirror,p=a.axisLine,m=ma(ma(ma({},Rt(this.props,!1)),Rt(p,!1)),{},{fill:"none"});if(d==="top"||d==="bottom"){var h=+(d==="top"&&!u||d==="bottom"&&u);m=ma(ma({},m),{},{x1:s,y1:i+h*l,x2:s+o,y2:i+h*l})}else{var x=+(d==="left"&&!u||d==="right"&&u);m=ma(ma({},m),{},{x1:s+x*o,y1:i,x2:s+x*o,y2:i+l})}return Y.createElement("line",cm({},m,{className:ar("recharts-cartesian-axis-line",Js(p,"className"))}))}},{key:"renderTicks",value:function(a,s,i){var o=this,l=this.props,d=l.tickLine,u=l.stroke,p=l.tick,m=l.tickFormatter,h=l.unit,x=Gk(ma(ma({},this.props),{},{ticks:a}),s,i),y=this.getTickTextAnchor(),N=this.getTickVerticalAnchor(),v=Rt(this.props,!1),j=Rt(p,!1),E=ma(ma({},v),{},{fill:"none"},Rt(d,!1)),C=x.map(function(A,S){var _=o.getTickLineCoord(A),O=_.line,D=_.tick,k=ma(ma(ma(ma({textAnchor:y,verticalAnchor:N},v),{},{stroke:"none",fill:u},j),D),{},{index:S,payload:A,visibleTicksCount:x.length,tickFormatter:m});return Y.createElement(cr,cm({className:"recharts-cartesian-axis-tick",key:"tick-".concat(A.value,"-").concat(A.coordinate,"-").concat(A.tickCoord)},Ud(o.props,A,S)),d&&Y.createElement("line",cm({},E,O,{className:ar("recharts-cartesian-axis-tick-line",Js(d,"className"))})),p&&t.renderTickItem(p,k,"".concat(Gt(m)?m(A.value,S):A.value).concat(h||"")))});return Y.createElement("g",{className:"recharts-cartesian-axis-ticks"},C)}},{key:"render",value:function(){var a=this,s=this.props,i=s.axisLine,o=s.width,l=s.height,d=s.ticksGenerator,u=s.className,p=s.hide;if(p)return null;var m=this.props,h=m.ticks,x=NE(m,vge),y=h;return Gt(d)&&(y=h&&h.length>0?d(this.props):d(x)),o<=0||l<=0||!y||!y.length?null:Y.createElement(cr,{className:ar("recharts-cartesian-axis",u),ref:function(v){a.layerReference=v}},i&&this.renderAxisLine(),this.renderTicks(y,this.state.fontSize,this.state.letterSpacing),Ma.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(a,s,i){var o,l=ar(s.className,"recharts-cartesian-axis-tick-value");return Y.isValidElement(a)?o=Y.cloneElement(a,ma(ma({},s),{},{className:l})):Gt(a)?o=a(ma(ma({},s),{},{className:l})):o=Y.createElement(Ju,cm({},s,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])})(g.Component);Kk($p,"displayName","CartesianAxis");Kk($p,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Tge=["x1","y1","x2","y2","key"],Oge=["offset"];function nf(e){"@babel/helpers - typeof";return nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nf(e)}function F4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function fs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?F4(Object(r),!0).forEach(function(a){kge(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F4(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function kge(e,t,r){return t=Rge(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rge(e){var t=Pge(e,"string");return nf(t)=="symbol"?t:t+""}function Pge(e,t){if(nf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(nf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bu(){return Bu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Bu.apply(this,arguments)}function B4(e,t){if(e==null)return{};var r=Dge(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Dge(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var Ige=function(t){var r=t.fill;if(!r||r==="none")return null;var a=t.fillOpacity,s=t.x,i=t.y,o=t.width,l=t.height,d=t.ry;return Y.createElement("rect",{x:s,y:i,ry:d,width:o,height:l,stroke:"none",fill:r,fillOpacity:a,className:"recharts-cartesian-grid-bg"})};function sG(e,t){var r;if(Y.isValidElement(e))r=Y.cloneElement(e,t);else if(Gt(e))r=e(t);else{var a=t.x1,s=t.y1,i=t.x2,o=t.y2,l=t.key,d=B4(t,Tge),u=Rt(d,!1);u.offset;var p=B4(u,Oge);r=Y.createElement("line",Bu({},p,{x1:a,y1:s,x2:i,y2:o,fill:"none",key:l}))}return r}function Mge(e){var t=e.x,r=e.width,a=e.horizontal,s=a===void 0?!0:a,i=e.horizontalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,d){var u=fs(fs({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(d),index:d});return sG(s,u)});return Y.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function Lge(e){var t=e.y,r=e.height,a=e.vertical,s=a===void 0?!0:a,i=e.verticalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,d){var u=fs(fs({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(d),index:d});return sG(s,u)});return Y.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function $ge(e){var t=e.horizontalFill,r=e.fillOpacity,a=e.x,s=e.y,i=e.width,o=e.height,l=e.horizontalPoints,d=e.horizontal,u=d===void 0?!0:d;if(!u||!t||!t.length)return null;var p=l.map(function(h){return Math.round(h+s-s)}).sort(function(h,x){return h-x});s!==p[0]&&p.unshift(0);var m=p.map(function(h,x){var y=!p[x+1],N=y?s+o-h:p[x+1]-h;if(N<=0)return null;var v=x%t.length;return Y.createElement("rect",{key:"react-".concat(x),y:h,x:a,height:N,width:i,stroke:"none",fill:t[v],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return Y.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function Fge(e){var t=e.vertical,r=t===void 0?!0:t,a=e.verticalFill,s=e.fillOpacity,i=e.x,o=e.y,l=e.width,d=e.height,u=e.verticalPoints;if(!r||!a||!a.length)return null;var p=u.map(function(h){return Math.round(h+i-i)}).sort(function(h,x){return h-x});i!==p[0]&&p.unshift(0);var m=p.map(function(h,x){var y=!p[x+1],N=y?i+l-h:p[x+1]-h;if(N<=0)return null;var v=x%a.length;return Y.createElement("rect",{key:"react-".concat(x),x:h,y:o,width:N,height:d,stroke:"none",fill:a[v],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return Y.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var Bge=function(t,r){var a=t.xAxis,s=t.width,i=t.height,o=t.offset;return aH(Gk(fs(fs(fs({},$p.defaultProps),a),{},{ticks:vc(a,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.left,o.left+o.width,r)},Uge=function(t,r){var a=t.yAxis,s=t.width,i=t.height,o=t.offset;return aH(Gk(fs(fs(fs({},$p.defaultProps),a),{},{ticks:vc(a,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.top,o.top+o.height,r)},Gf={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function ms(e){var t,r,a,s,i,o,l=Bk(),d=Uk(),u=_0e(),p=fs(fs({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Gf.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:Gf.fill,horizontal:(a=e.horizontal)!==null&&a!==void 0?a:Gf.horizontal,horizontalFill:(s=e.horizontalFill)!==null&&s!==void 0?s:Gf.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:Gf.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:Gf.verticalFill,x:et(e.x)?e.x:u.left,y:et(e.y)?e.y:u.top,width:et(e.width)?e.width:u.width,height:et(e.height)?e.height:u.height}),m=p.x,h=p.y,x=p.width,y=p.height,N=p.syncWithTicks,v=p.horizontalValues,j=p.verticalValues,E=E0e(),C=A0e();if(!et(x)||x<=0||!et(y)||y<=0||!et(m)||m!==+m||!et(h)||h!==+h)return null;var A=p.verticalCoordinatesGenerator||Bge,S=p.horizontalCoordinatesGenerator||Uge,_=p.horizontalPoints,O=p.verticalPoints;if((!_||!_.length)&&Gt(S)){var D=v&&v.length,k=S({yAxis:C?fs(fs({},C),{},{ticks:D?v:C.ticks}):void 0,width:l,height:d,offset:u},D?!0:N);Io(Array.isArray(k),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(nf(k),"]")),Array.isArray(k)&&(_=k)}if((!O||!O.length)&&Gt(A)){var M=j&&j.length,F=A({xAxis:E?fs(fs({},E),{},{ticks:M?j:E.ticks}):void 0,width:l,height:d,offset:u},M?!0:N);Io(Array.isArray(F),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(nf(F),"]")),Array.isArray(F)&&(O=F)}return Y.createElement("g",{className:"recharts-cartesian-grid"},Y.createElement(Ige,{fill:p.fill,fillOpacity:p.fillOpacity,x:p.x,y:p.y,width:p.width,height:p.height,ry:p.ry}),Y.createElement(Mge,Bu({},p,{offset:u,horizontalPoints:_,xAxis:E,yAxis:C})),Y.createElement(Lge,Bu({},p,{offset:u,verticalPoints:O,xAxis:E,yAxis:C})),Y.createElement($ge,Bu({},p,{horizontalPoints:_})),Y.createElement(Fge,Bu({},p,{verticalPoints:O})))}ms.displayName="CartesianGrid";var Hge=["type","layout","connectNulls","ref"],Gge=["key"];function sp(e){"@babel/helpers - typeof";return sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sp(e)}function U4(e,t){if(e==null)return{};var r=Kge(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Kge(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function x0(){return x0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},x0.apply(this,arguments)}function H4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function gi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?H4(Object(r),!0).forEach(function(a){Co(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H4(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Kf(e){return Vge(e)||Wge(e)||qge(e)||zge()}function zge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qge(e,t){if(e){if(typeof e=="string")return V_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return V_(e,t)}}function Wge(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Vge(e){if(Array.isArray(e))return V_(e)}function V_(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Yge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G4(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,oG(a.key),a)}}function Xge(e,t,r){return t&&G4(e.prototype,t),r&&G4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Qge(e,t,r){return t=av(t),Zge(e,iG()?Reflect.construct(t,r||[],av(e).constructor):t.apply(e,r))}function Zge(e,t){if(t&&(sp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jge(e)}function Jge(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iG=function(){return!!e})()}function av(e){return av=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},av(e)}function exe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Y_(e,t)}function Y_(e,t){return Y_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Y_(e,t)}function Co(e,t,r){return t=oG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oG(e){var t=txe(e,"string");return sp(t)=="symbol"?t:t+""}function txe(e,t){if(sp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(sp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var $a=(function(e){function t(){var r;Yge(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=Qge(this,t,[].concat(s)),Co(r,"state",{isAnimationFinished:!0,totalLength:0}),Co(r,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),Co(r,"getStrokeDasharray",function(o,l,d){var u=d.reduce(function(j,E){return j+E});if(!u)return r.generateSimpleStrokeDasharray(l,o);for(var p=Math.floor(o/u),m=o%u,h=l-o,x=[],y=0,N=0;y<d.length;N+=d[y],++y)if(N+d[y]>m){x=[].concat(Kf(d.slice(0,y)),[m-N]);break}var v=x.length%2===0?[0,h]:[h];return[].concat(Kf(t.repeat(d,p)),Kf(x),v).map(function(j){return"".concat(j,"px")}).join(", ")}),Co(r,"id",Lc("recharts-line-")),Co(r,"pathRef",function(o){r.mainCurve=o}),Co(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),Co(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return exe(t,e),Xge(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();this.setState({totalLength:a})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();a!==this.state.totalLength&&this.setState({totalLength:a})}}},{key:"getTotalLength",value:function(){var a=this.mainCurve;try{return a&&a.getTotalLength&&a.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(a,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,l=i.xAxis,d=i.yAxis,u=i.layout,p=i.children,m=Ds(p,Lp);if(!m)return null;var h=function(N,v){return{x:N.x,y:N.y,value:N.value,errorVal:dn(N.payload,v)}},x={clipPath:a?"url(#clipPath-".concat(s,")"):null};return Y.createElement(cr,x,m.map(function(y){return Y.cloneElement(y,{key:"bar-".concat(y.props.dataKey),data:o,xAxis:l,yAxis:d,layout:u,dataPointFormatter:h})}))}},{key:"renderDots",value:function(a,s,i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,d=l.dot,u=l.points,p=l.dataKey,m=Rt(this.props,!1),h=Rt(d,!0),x=u.map(function(N,v){var j=gi(gi(gi({key:"dot-".concat(v),r:3},m),h),{},{index:v,cx:N.x,cy:N.y,value:N.value,dataKey:p,payload:N.payload,points:u});return t.renderDotItem(d,j)}),y={clipPath:a?"url(#clipPath-".concat(s?"":"dots-").concat(i,")"):null};return Y.createElement(cr,x0({className:"recharts-line-dots",key:"dots"},y),x)}},{key:"renderCurveStatically",value:function(a,s,i,o){var l=this.props,d=l.type,u=l.layout,p=l.connectNulls;l.ref;var m=U4(l,Hge),h=gi(gi(gi({},Rt(m,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:s?"url(#clipPath-".concat(i,")"):null,points:a},o),{},{type:d,layout:u,connectNulls:p});return Y.createElement(Fd,x0({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(a,s){var i=this,o=this.props,l=o.points,d=o.strokeDasharray,u=o.isAnimationActive,p=o.animationBegin,m=o.animationDuration,h=o.animationEasing,x=o.animationId,y=o.animateNewValues,N=o.width,v=o.height,j=this.state,E=j.prevPoints,C=j.totalLength;return Y.createElement(ti,{begin:p,duration:m,isActive:u,easing:h,from:{t:0},to:{t:1},key:"line-".concat(x),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(A){var S=A.t;if(E){var _=E.length/l.length,O=l.map(function($,B){var P=Math.floor(B*_);if(E[P]){var W=E[P],K=kn(W.x,$.x),G=kn(W.y,$.y);return gi(gi({},$),{},{x:K(S),y:G(S)})}if(y){var U=kn(N*2,$.x),te=kn(v/2,$.y);return gi(gi({},$),{},{x:U(S),y:te(S)})}return gi(gi({},$),{},{x:$.x,y:$.y})});return i.renderCurveStatically(O,a,s)}var D=kn(0,C),k=D(S),M;if(d){var F="".concat(d).split(/[,\s]+/gim).map(function($){return parseFloat($)});M=i.getStrokeDasharray(k,C,F)}else M=i.generateSimpleStrokeDasharray(C,k);return i.renderCurveStatically(l,a,s,{strokeDasharray:M})})}},{key:"renderCurve",value:function(a,s){var i=this.props,o=i.points,l=i.isAnimationActive,d=this.state,u=d.prevPoints,p=d.totalLength;return l&&o&&o.length&&(!u&&p>0||!Hd(u,o))?this.renderCurveWithAnimation(a,s):this.renderCurveStatically(o,a,s)}},{key:"render",value:function(){var a,s=this.props,i=s.hide,o=s.dot,l=s.points,d=s.className,u=s.xAxis,p=s.yAxis,m=s.top,h=s.left,x=s.width,y=s.height,N=s.isAnimationActive,v=s.id;if(i||!l||!l.length)return null;var j=this.state.isAnimationFinished,E=l.length===1,C=ar("recharts-line",d),A=u&&u.allowDataOverflow,S=p&&p.allowDataOverflow,_=A||S,O=Qt(v)?this.id:v,D=(a=Rt(o,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},k=D.r,M=k===void 0?3:k,F=D.strokeWidth,$=F===void 0?2:F,B=nU(o)?o:{},P=B.clipDot,W=P===void 0?!0:P,K=M*2+$;return Y.createElement(cr,{className:C},A||S?Y.createElement("defs",null,Y.createElement("clipPath",{id:"clipPath-".concat(O)},Y.createElement("rect",{x:A?h:h-x/2,y:S?m:m-y/2,width:A?x:x*2,height:S?y:y*2})),!W&&Y.createElement("clipPath",{id:"clipPath-dots-".concat(O)},Y.createElement("rect",{x:h-K/2,y:m-K/2,width:x+K,height:y+K}))):null,!E&&this.renderCurve(_,O),this.renderErrorBar(_,O),(E||o)&&this.renderDots(_,W,O),(!N||j)&&hs.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,prevPoints:s.curPoints}:a.points!==s.curPoints?{curPoints:a.points}:null}},{key:"repeat",value:function(a,s){for(var i=a.length%2!==0?[].concat(Kf(a),[0]):a,o=[],l=0;l<s;++l)o=[].concat(Kf(o),Kf(i));return o}},{key:"renderDotItem",value:function(a,s){var i;if(Y.isValidElement(a))i=Y.cloneElement(a,s);else if(Gt(a))i=a(s);else{var o=s.key,l=U4(s,Gge),d=ar("recharts-line-dot",typeof a!="boolean"?a.className:"");i=Y.createElement(wg,x0({key:o},l,{className:d}))}return i}}])})(g.PureComponent);Co($a,"displayName","Line");Co($a,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Mo.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Co($a,"getComposedData",function(e){var t=e.props,r=e.xAxis,a=e.yAxis,s=e.xAxisTicks,i=e.yAxisTicks,o=e.dataKey,l=e.bandSize,d=e.displayedData,u=e.offset,p=t.layout,m=d.map(function(h,x){var y=dn(h,o);return p==="horizontal"?{x:Wm({axis:r,ticks:s,bandSize:l,entry:h,index:x}),y:Qt(y)?null:a.scale(y),value:y,payload:h}:{x:Qt(y)?null:r.scale(y),y:Wm({axis:a,ticks:i,bandSize:l,entry:h,index:x}),value:y,payload:h}});return gi({points:m,layout:p},u)});var rxe=["layout","type","stroke","connectNulls","isRange","ref"],nxe=["key"],lG;function ip(e){"@babel/helpers - typeof";return ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ip(e)}function cG(e,t){if(e==null)return{};var r=axe(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function axe(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Uu(){return Uu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Uu.apply(this,arguments)}function K4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Nd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?K4(Object(r),!0).forEach(function(a){bl(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K4(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function sxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z4(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,uG(a.key),a)}}function ixe(e,t,r){return t&&z4(e.prototype,t),r&&z4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function oxe(e,t,r){return t=sv(t),lxe(e,dG()?Reflect.construct(t,r||[],sv(e).constructor):t.apply(e,r))}function lxe(e,t){if(t&&(ip(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cxe(e)}function cxe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dG=function(){return!!e})()}function sv(e){return sv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},sv(e)}function dxe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X_(e,t)}function X_(e,t){return X_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},X_(e,t)}function bl(e,t,r){return t=uG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uG(e){var t=uxe(e,"string");return ip(t)=="symbol"?t:t+""}function uxe(e,t){if(ip(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(ip(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var $l=(function(e){function t(){var r;sxe(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=oxe(this,t,[].concat(s)),bl(r,"state",{isAnimationFinished:!0}),bl(r,"id",Lc("recharts-area-")),bl(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Gt(o)&&o()}),bl(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Gt(o)&&o()}),r}return dxe(t,e),ixe(t,[{key:"renderDots",value:function(a,s,i){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var d=this.props,u=d.dot,p=d.points,m=d.dataKey,h=Rt(this.props,!1),x=Rt(u,!0),y=p.map(function(v,j){var E=Nd(Nd(Nd({key:"dot-".concat(j),r:3},h),x),{},{index:j,cx:v.x,cy:v.y,dataKey:m,value:v.value,payload:v.payload,points:p});return t.renderDotItem(u,E)}),N={clipPath:a?"url(#clipPath-".concat(s?"":"dots-").concat(i,")"):null};return Y.createElement(cr,Uu({className:"recharts-area-dots"},N),y)}},{key:"renderHorizontalRect",value:function(a){var s=this.props,i=s.baseLine,o=s.points,l=s.strokeWidth,d=o[0].x,u=o[o.length-1].x,p=a*Math.abs(d-u),m=Od(o.map(function(h){return h.y||0}));return et(i)&&typeof i=="number"?m=Math.max(i,m):i&&Array.isArray(i)&&i.length&&(m=Math.max(Od(i.map(function(h){return h.y||0})),m)),et(m)?Y.createElement("rect",{x:d<u?d:d-p,y:0,width:p,height:Math.floor(m+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(a){var s=this.props,i=s.baseLine,o=s.points,l=s.strokeWidth,d=o[0].y,u=o[o.length-1].y,p=a*Math.abs(d-u),m=Od(o.map(function(h){return h.x||0}));return et(i)&&typeof i=="number"?m=Math.max(i,m):i&&Array.isArray(i)&&i.length&&(m=Math.max(Od(i.map(function(h){return h.x||0})),m)),et(m)?Y.createElement("rect",{x:0,y:d<u?d:d-p,width:m+(l?parseInt("".concat(l),10):1),height:Math.floor(p)}):null}},{key:"renderClipRect",value:function(a){var s=this.props.layout;return s==="vertical"?this.renderVerticalRect(a):this.renderHorizontalRect(a)}},{key:"renderAreaStatically",value:function(a,s,i,o){var l=this.props,d=l.layout,u=l.type,p=l.stroke,m=l.connectNulls,h=l.isRange;l.ref;var x=cG(l,rxe);return Y.createElement(cr,{clipPath:i?"url(#clipPath-".concat(o,")"):null},Y.createElement(Fd,Uu({},Rt(x,!0),{points:a,connectNulls:m,type:u,baseLine:s,layout:d,stroke:"none",className:"recharts-area-area"})),p!=="none"&&Y.createElement(Fd,Uu({},Rt(this.props,!1),{className:"recharts-area-curve",layout:d,type:u,connectNulls:m,fill:"none",points:a})),p!=="none"&&h&&Y.createElement(Fd,Uu({},Rt(this.props,!1),{className:"recharts-area-curve",layout:d,type:u,connectNulls:m,fill:"none",points:s})))}},{key:"renderAreaWithAnimation",value:function(a,s){var i=this,o=this.props,l=o.points,d=o.baseLine,u=o.isAnimationActive,p=o.animationBegin,m=o.animationDuration,h=o.animationEasing,x=o.animationId,y=this.state,N=y.prevPoints,v=y.prevBaseLine;return Y.createElement(ti,{begin:p,duration:m,isActive:u,easing:h,from:{t:0},to:{t:1},key:"area-".concat(x),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(j){var E=j.t;if(N){var C=N.length/l.length,A=l.map(function(D,k){var M=Math.floor(k*C);if(N[M]){var F=N[M],$=kn(F.x,D.x),B=kn(F.y,D.y);return Nd(Nd({},D),{},{x:$(E),y:B(E)})}return D}),S;if(et(d)&&typeof d=="number"){var _=kn(v,d);S=_(E)}else if(Qt(d)||Wd(d)){var O=kn(v,0);S=O(E)}else S=d.map(function(D,k){var M=Math.floor(k*C);if(v[M]){var F=v[M],$=kn(F.x,D.x),B=kn(F.y,D.y);return Nd(Nd({},D),{},{x:$(E),y:B(E)})}return D});return i.renderAreaStatically(A,S,a,s)}return Y.createElement(cr,null,Y.createElement("defs",null,Y.createElement("clipPath",{id:"animationClipPath-".concat(s)},i.renderClipRect(E))),Y.createElement(cr,{clipPath:"url(#animationClipPath-".concat(s,")")},i.renderAreaStatically(l,d,a,s)))})}},{key:"renderArea",value:function(a,s){var i=this.props,o=i.points,l=i.baseLine,d=i.isAnimationActive,u=this.state,p=u.prevPoints,m=u.prevBaseLine,h=u.totalLength;return d&&o&&o.length&&(!p&&h>0||!Hd(p,o)||!Hd(m,l))?this.renderAreaWithAnimation(a,s):this.renderAreaStatically(o,l,a,s)}},{key:"render",value:function(){var a,s=this.props,i=s.hide,o=s.dot,l=s.points,d=s.className,u=s.top,p=s.left,m=s.xAxis,h=s.yAxis,x=s.width,y=s.height,N=s.isAnimationActive,v=s.id;if(i||!l||!l.length)return null;var j=this.state.isAnimationFinished,E=l.length===1,C=ar("recharts-area",d),A=m&&m.allowDataOverflow,S=h&&h.allowDataOverflow,_=A||S,O=Qt(v)?this.id:v,D=(a=Rt(o,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},k=D.r,M=k===void 0?3:k,F=D.strokeWidth,$=F===void 0?2:F,B=nU(o)?o:{},P=B.clipDot,W=P===void 0?!0:P,K=M*2+$;return Y.createElement(cr,{className:C},A||S?Y.createElement("defs",null,Y.createElement("clipPath",{id:"clipPath-".concat(O)},Y.createElement("rect",{x:A?p:p-x/2,y:S?u:u-y/2,width:A?x:x*2,height:S?y:y*2})),!W&&Y.createElement("clipPath",{id:"clipPath-dots-".concat(O)},Y.createElement("rect",{x:p-K/2,y:u-K/2,width:x+K,height:y+K}))):null,E?null:this.renderArea(_,O),(o||E)&&this.renderDots(_,W,O),(!N||j)&&hs.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,curBaseLine:a.baseLine,prevPoints:s.curPoints,prevBaseLine:s.curBaseLine}:a.points!==s.curPoints||a.baseLine!==s.curBaseLine?{curPoints:a.points,curBaseLine:a.baseLine}:null}}])})(g.PureComponent);lG=$l;bl($l,"displayName","Area");bl($l,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Mo.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});bl($l,"getBaseValue",function(e,t,r,a){var s=e.layout,i=e.baseValue,o=t.props.baseValue,l=o??i;if(et(l)&&typeof l=="number")return l;var d=s==="horizontal"?a:r,u=d.scale.domain();if(d.type==="number"){var p=Math.max(u[0],u[1]),m=Math.min(u[0],u[1]);return l==="dataMin"?m:l==="dataMax"||p<0?p:Math.max(Math.min(u[0],u[1]),0)}return l==="dataMin"?u[0]:l==="dataMax"?u[1]:u[0]});bl($l,"getComposedData",function(e){var t=e.props,r=e.item,a=e.xAxis,s=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,l=e.bandSize,d=e.dataKey,u=e.stackedData,p=e.dataStartIndex,m=e.displayedData,h=e.offset,x=t.layout,y=u&&u.length,N=lG.getBaseValue(t,r,a,s),v=x==="horizontal",j=!1,E=m.map(function(A,S){var _;y?_=u[p+S]:(_=dn(A,d),Array.isArray(_)?j=!0:_=[N,_]);var O=_[1]==null||y&&dn(A,d)==null;return v?{x:Wm({axis:a,ticks:i,bandSize:l,entry:A,index:S}),y:O?null:s.scale(_[1]),value:_,payload:A}:{x:O?null:a.scale(_[1]),y:Wm({axis:s,ticks:o,bandSize:l,entry:A,index:S}),value:_,payload:A}}),C;return y||j?C=E.map(function(A){var S=Array.isArray(A.value)?A.value[0]:null;return v?{x:A.x,y:S!=null&&A.y!=null?s.scale(S):null}:{x:S!=null?a.scale(S):null,y:A.y}}):C=v?s.scale(N):a.scale(N),Nd({points:E,baseLine:C,layout:x,isRange:j},h)});bl($l,"renderDotItem",function(e,t){var r;if(Y.isValidElement(e))r=Y.cloneElement(e,t);else if(Gt(e))r=e(t);else{var a=ar("recharts-area-dot",typeof e!="boolean"?e.className:""),s=t.key,i=cG(t,nxe);r=Y.createElement(wg,Uu({},i,{key:s,className:a}))}return r});function op(e){"@babel/helpers - typeof";return op=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},op(e)}function fxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mxe(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,pG(a.key),a)}}function pxe(e,t,r){return t&&mxe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function hxe(e,t,r){return t=iv(t),gxe(e,fG()?Reflect.construct(t,r||[],iv(e).constructor):t.apply(e,r))}function gxe(e,t){if(t&&(op(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xxe(e)}function xxe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fG=function(){return!!e})()}function iv(e){return iv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},iv(e)}function bxe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Q_(e,t)}function Q_(e,t){return Q_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Q_(e,t)}function mG(e,t,r){return t=pG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pG(e){var t=yxe(e,"string");return op(t)=="symbol"?t:t+""}function yxe(e,t){if(op(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(op(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Fp=(function(e){function t(){return fxe(this,t),hxe(this,t,arguments)}return bxe(t,e),pxe(t,[{key:"render",value:function(){return null}}])})(g.Component);mG(Fp,"displayName","ZAxis");mG(Fp,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var vxe=["option","isActive"];function b0(){return b0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},b0.apply(this,arguments)}function Nxe(e,t){if(e==null)return{};var r=Sxe(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Sxe(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function jxe(e){var t=e.option,r=e.isActive,a=Nxe(e,vxe);return typeof t=="string"?g.createElement(qy,b0({option:g.createElement(l1,b0({type:t},a)),isActive:r,shapeType:"symbols"},a)):g.createElement(qy,b0({option:t,isActive:r,shapeType:"symbols"},a))}function lp(e){"@babel/helpers - typeof";return lp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lp(e)}function y0(){return y0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},y0.apply(this,arguments)}function q4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Vi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?q4(Object(r),!0).forEach(function(a){Rd(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q4(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function wxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W4(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,gG(a.key),a)}}function Exe(e,t,r){return t&&W4(e.prototype,t),r&&W4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Axe(e,t,r){return t=ov(t),Cxe(e,hG()?Reflect.construct(t,r||[],ov(e).constructor):t.apply(e,r))}function Cxe(e,t){if(t&&(lp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _xe(e)}function _xe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hG=function(){return!!e})()}function ov(e){return ov=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ov(e)}function Txe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z_(e,t)}function Z_(e,t){return Z_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Z_(e,t)}function Rd(e,t,r){return t=gG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gG(e){var t=Oxe(e,"string");return lp(t)=="symbol"?t:t+""}function Oxe(e,t){if(lp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(lp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Bp=(function(e){function t(){var r;wxe(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=Axe(this,t,[].concat(s)),Rd(r,"state",{isAnimationFinished:!1}),Rd(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0})}),Rd(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1})}),Rd(r,"id",Lc("recharts-scatter-")),r}return Txe(t,e),Exe(t,[{key:"renderSymbolsStatically",value:function(a){var s=this,i=this.props,o=i.shape,l=i.activeShape,d=i.activeIndex,u=Rt(this.props,!1);return a.map(function(p,m){var h=d===m,x=h?l:o,y=Vi(Vi({},u),p);return Y.createElement(cr,y0({className:"recharts-scatter-symbol",key:"symbol-".concat(p?.cx,"-").concat(p?.cy,"-").concat(p?.size,"-").concat(m)},Ud(s.props,p,m),{role:"img"}),Y.createElement(jxe,y0({option:x,isActive:h,key:"symbol-".concat(m)},y)))})}},{key:"renderSymbolsWithAnimation",value:function(){var a=this,s=this.props,i=s.points,o=s.isAnimationActive,l=s.animationBegin,d=s.animationDuration,u=s.animationEasing,p=s.animationId,m=this.state.prevPoints;return Y.createElement(ti,{begin:l,duration:d,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(h){var x=h.t,y=i.map(function(N,v){var j=m&&m[v];if(j){var E=kn(j.cx,N.cx),C=kn(j.cy,N.cy),A=kn(j.size,N.size);return Vi(Vi({},N),{},{cx:E(x),cy:C(x),size:A(x)})}var S=kn(0,N.size);return Vi(Vi({},N),{},{size:S(x)})});return Y.createElement(cr,null,a.renderSymbolsStatically(y))})}},{key:"renderSymbols",value:function(){var a=this.props,s=a.points,i=a.isAnimationActive,o=this.state.prevPoints;return i&&s&&s.length&&(!o||!Hd(o,s))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(s)}},{key:"renderErrorBar",value:function(){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var s=this.props,i=s.points,o=s.xAxis,l=s.yAxis,d=s.children,u=Ds(d,Lp);return u?u.map(function(p,m){var h=p.props,x=h.direction,y=h.dataKey;return Y.cloneElement(p,{key:"".concat(x,"-").concat(y,"-").concat(i[m]),data:i,xAxis:o,yAxis:l,layout:x==="x"?"vertical":"horizontal",dataPointFormatter:function(v,j){return{x:v.cx,y:v.cy,value:x==="x"?+v.node.x:+v.node.y,errorVal:dn(v,j)}}})}):null}},{key:"renderLine",value:function(){var a=this.props,s=a.points,i=a.line,o=a.lineType,l=a.lineJointType,d=Rt(this.props,!1),u=Rt(i,!1),p,m;if(o==="joint")p=s.map(function(C){return{x:C.cx,y:C.cy}});else if(o==="fitting"){var h=Ere(s),x=h.xmin,y=h.xmax,N=h.a,v=h.b,j=function(A){return N*A+v};p=[{x,y:j(x)},{x:y,y:j(y)}]}var E=Vi(Vi(Vi({},d),{},{fill:"none",stroke:d&&d.fill},u),{},{points:p});return Y.isValidElement(i)?m=Y.cloneElement(i,E):Gt(i)?m=i(E):m=Y.createElement(Fd,y0({},E,{type:l})),Y.createElement(cr,{className:"recharts-scatter-line",key:"recharts-scatter-line"},m)}},{key:"render",value:function(){var a=this.props,s=a.hide,i=a.points,o=a.line,l=a.className,d=a.xAxis,u=a.yAxis,p=a.left,m=a.top,h=a.width,x=a.height,y=a.id,N=a.isAnimationActive;if(s||!i||!i.length)return null;var v=this.state.isAnimationFinished,j=ar("recharts-scatter",l),E=d&&d.allowDataOverflow,C=u&&u.allowDataOverflow,A=E||C,S=Qt(y)?this.id:y;return Y.createElement(cr,{className:j,clipPath:A?"url(#clipPath-".concat(S,")"):null},E||C?Y.createElement("defs",null,Y.createElement("clipPath",{id:"clipPath-".concat(S)},Y.createElement("rect",{x:E?p:p-h/2,y:C?m:m-x/2,width:E?h:h*2,height:C?x:x*2}))):null,o&&this.renderLine(),this.renderErrorBar(),Y.createElement(cr,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!N||v)&&hs.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,prevPoints:s.curPoints}:a.points!==s.curPoints?{curPoints:a.points}:null}}])})(g.PureComponent);Rd(Bp,"displayName","Scatter");Rd(Bp,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!Mo.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});Rd(Bp,"getComposedData",function(e){var t=e.xAxis,r=e.yAxis,a=e.zAxis,s=e.item,i=e.displayedData,o=e.xAxisTicks,l=e.yAxisTicks,d=e.offset,u=s.props.tooltipType,p=Ds(s.props.children,Ji),m=Qt(t.dataKey)?s.props.dataKey:t.dataKey,h=Qt(r.dataKey)?s.props.dataKey:r.dataKey,x=a&&a.dataKey,y=a?a.range:Fp.defaultProps.range,N=y&&y[0],v=t.scale.bandwidth?t.scale.bandwidth():0,j=r.scale.bandwidth?r.scale.bandwidth():0,E=i.map(function(C,A){var S=dn(C,m),_=dn(C,h),O=!Qt(x)&&dn(C,x)||"-",D=[{name:Qt(t.dataKey)?s.props.name:t.name||t.dataKey,unit:t.unit||"",value:S,payload:C,dataKey:m,type:u},{name:Qt(r.dataKey)?s.props.name:r.name||r.dataKey,unit:r.unit||"",value:_,payload:C,dataKey:h,type:u}];O!=="-"&&D.push({name:a.name||a.dataKey,unit:a.unit||"",value:O,payload:C,dataKey:x,type:u});var k=Wm({axis:t,ticks:o,bandSize:v,entry:C,index:A,dataKey:m}),M=Wm({axis:r,ticks:l,bandSize:j,entry:C,index:A,dataKey:h}),F=O!=="-"?a.scale(O):N,$=Math.sqrt(Math.max(F,0)/Math.PI);return Vi(Vi({},C),{},{cx:k,cy:M,x:k-$,y:M-$,xAxis:t,yAxis:r,zAxis:a,width:2*$,height:2*$,size:F,node:{x:S,y:_,z:O},tooltipPayload:D,tooltipPosition:{x:k,y:M},payload:C},p&&p[A]&&p[A].props)});return Vi({points:E},d)});function cp(e){"@babel/helpers - typeof";return cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cp(e)}function kxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rxe(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,yG(a.key),a)}}function Pxe(e,t,r){return t&&Rxe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Dxe(e,t,r){return t=lv(t),Ixe(e,xG()?Reflect.construct(t,r||[],lv(e).constructor):t.apply(e,r))}function Ixe(e,t){if(t&&(cp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mxe(e)}function Mxe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xG=function(){return!!e})()}function lv(e){return lv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},lv(e)}function Lxe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&J_(e,t)}function J_(e,t){return J_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},J_(e,t)}function bG(e,t,r){return t=yG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yG(e){var t=$xe(e,"string");return cp(t)=="symbol"?t:t+""}function $xe(e,t){if(cp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(cp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function eT(){return eT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},eT.apply(this,arguments)}function Fxe(e){var t=e.xAxisId,r=Bk(),a=Uk(),s=VH(t);return s==null?null:g.createElement($p,eT({},s,{className:ar("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:a},ticksGenerator:function(o){return vc(o,!0)}}))}var Vn=(function(e){function t(){return kxe(this,t),Dxe(this,t,arguments)}return Lxe(t,e),Pxe(t,[{key:"render",value:function(){return g.createElement(Fxe,this.props)}}])})(g.Component);bG(Vn,"displayName","XAxis");bG(Vn,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function dp(e){"@babel/helpers - typeof";return dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dp(e)}function Bxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Uxe(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,SG(a.key),a)}}function Hxe(e,t,r){return t&&Uxe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Gxe(e,t,r){return t=cv(t),Kxe(e,vG()?Reflect.construct(t,r||[],cv(e).constructor):t.apply(e,r))}function Kxe(e,t){if(t&&(dp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zxe(e)}function zxe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vG=function(){return!!e})()}function cv(e){return cv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},cv(e)}function qxe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tT(e,t)}function tT(e,t){return tT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},tT(e,t)}function NG(e,t,r){return t=SG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SG(e){var t=Wxe(e,"string");return dp(t)=="symbol"?t:t+""}function Wxe(e,t){if(dp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(dp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function rT(){return rT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},rT.apply(this,arguments)}var Vxe=function(t){var r=t.yAxisId,a=Bk(),s=Uk(),i=YH(r);return i==null?null:g.createElement($p,rT({},i,{className:ar("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:a,height:s},ticksGenerator:function(l){return vc(l,!0)}}))},Hn=(function(e){function t(){return Bxe(this,t),Gxe(this,t,arguments)}return qxe(t,e),Hxe(t,[{key:"render",value:function(){return g.createElement(Vxe,this.props)}}])})(g.Component);NG(Hn,"displayName","YAxis");NG(Hn,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function V4(e){return Zxe(e)||Qxe(e)||Xxe(e)||Yxe()}function Yxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xxe(e,t){if(e){if(typeof e=="string")return nT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nT(e,t)}}function Qxe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Zxe(e){if(Array.isArray(e))return nT(e)}function nT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var aT=function(t,r,a,s,i){var o=Ds(t,_l),l=Ds(t,Eg),d=[].concat(V4(o),V4(l)),u=Ds(t,D1),p="".concat(s,"Id"),m=s[0],h=r;if(d.length&&(h=d.reduce(function(N,v){if(v.props[p]===a&&Cl(v.props,"extendDomain")&&et(v.props[m])){var j=v.props[m];return[Math.min(N[0],j),Math.max(N[1],j)]}return N},h)),u.length){var x="".concat(m,"1"),y="".concat(m,"2");h=u.reduce(function(N,v){if(v.props[p]===a&&Cl(v.props,"extendDomain")&&et(v.props[x])&&et(v.props[y])){var j=v.props[x],E=v.props[y];return[Math.min(N[0],j,E),Math.max(N[1],j,E)]}return N},h)}return i&&i.length&&(h=i.reduce(function(N,v){return et(v)?[Math.min(N[0],v),Math.max(N[1],v)]:N},h)),h},SE={exports:{}},Y4;function Jxe(){return Y4||(Y4=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(r=!1));function s(d,u,p){this.fn=d,this.context=u,this.once=p||!1}function i(d,u,p,m,h){if(typeof p!="function")throw new TypeError("The listener must be a function");var x=new s(p,m||d,h),y=r?r+u:u;return d._events[y]?d._events[y].fn?d._events[y]=[d._events[y],x]:d._events[y].push(x):(d._events[y]=x,d._eventsCount++),d}function o(d,u){--d._eventsCount===0?d._events=new a:delete d._events[u]}function l(){this._events=new a,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],p,m;if(this._eventsCount===0)return u;for(m in p=this._events)t.call(p,m)&&u.push(r?m.slice(1):m);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(p)):u},l.prototype.listeners=function(u){var p=r?r+u:u,m=this._events[p];if(!m)return[];if(m.fn)return[m.fn];for(var h=0,x=m.length,y=new Array(x);h<x;h++)y[h]=m[h].fn;return y},l.prototype.listenerCount=function(u){var p=r?r+u:u,m=this._events[p];return m?m.fn?1:m.length:0},l.prototype.emit=function(u,p,m,h,x,y){var N=r?r+u:u;if(!this._events[N])return!1;var v=this._events[N],j=arguments.length,E,C;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),j){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,p),!0;case 3:return v.fn.call(v.context,p,m),!0;case 4:return v.fn.call(v.context,p,m,h),!0;case 5:return v.fn.call(v.context,p,m,h,x),!0;case 6:return v.fn.call(v.context,p,m,h,x,y),!0}for(C=1,E=new Array(j-1);C<j;C++)E[C-1]=arguments[C];v.fn.apply(v.context,E)}else{var A=v.length,S;for(C=0;C<A;C++)switch(v[C].once&&this.removeListener(u,v[C].fn,void 0,!0),j){case 1:v[C].fn.call(v[C].context);break;case 2:v[C].fn.call(v[C].context,p);break;case 3:v[C].fn.call(v[C].context,p,m);break;case 4:v[C].fn.call(v[C].context,p,m,h);break;default:if(!E)for(S=1,E=new Array(j-1);S<j;S++)E[S-1]=arguments[S];v[C].fn.apply(v[C].context,E)}}return!0},l.prototype.on=function(u,p,m){return i(this,u,p,m,!1)},l.prototype.once=function(u,p,m){return i(this,u,p,m,!0)},l.prototype.removeListener=function(u,p,m,h){var x=r?r+u:u;if(!this._events[x])return this;if(!p)return o(this,x),this;var y=this._events[x];if(y.fn)y.fn===p&&(!h||y.once)&&(!m||y.context===m)&&o(this,x);else{for(var N=0,v=[],j=y.length;N<j;N++)(y[N].fn!==p||h&&!y[N].once||m&&y[N].context!==m)&&v.push(y[N]);v.length?this._events[x]=v.length===1?v[0]:v:o(this,x)}return this},l.prototype.removeAllListeners=function(u){var p;return u?(p=r?r+u:u,this._events[p]&&o(this,p)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(SE)),SE.exports}var ebe=Jxe();const tbe=Vr(ebe);var jE=new tbe,wE="recharts.syncMouseEvents";function ag(e){"@babel/helpers - typeof";return ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ag(e)}function rbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nbe(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,jG(a.key),a)}}function abe(e,t,r){return t&&nbe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function EE(e,t,r){return t=jG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jG(e){var t=sbe(e,"string");return ag(t)=="symbol"?t:t+""}function sbe(e,t){if(ag(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(ag(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ibe=(function(){function e(){rbe(this,e),EE(this,"activeIndex",0),EE(this,"coordinateList",[]),EE(this,"layout","horizontal")}return abe(e,[{key:"setDetails",value:function(r){var a,s=r.coordinateList,i=s===void 0?null:s,o=r.container,l=o===void 0?null:o,d=r.layout,u=d===void 0?null:d,p=r.offset,m=p===void 0?null:p,h=r.mouseHandlerCallback,x=h===void 0?null:h;this.coordinateList=(a=i??this.coordinateList)!==null&&a!==void 0?a:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=m??this.offset,this.mouseHandlerCallback=x??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,a;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),i=s.x,o=s.y,l=s.height,d=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,p=((a=window)===null||a===void 0?void 0:a.scrollY)||0,m=i+d+u,h=o+this.offset.top+l/2+p;this.mouseHandlerCallback({pageX:m,pageY:h})}}}])})();function obe(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var a=e?.[0],s=e?.[1];if(a&&s&&et(a)&&et(s))return!0}return!1}function lbe(e,t,r,a){var s=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?a:r.width-1,height:e==="horizontal"?r.height-1:a}}function wG(e){var t=e.cx,r=e.cy,a=e.radius,s=e.startAngle,i=e.endAngle,o=bn(t,r,a,s),l=bn(t,r,a,i);return{points:[o,l],cx:t,cy:r,radius:a,startAngle:s,endAngle:i}}function cbe(e,t,r){var a,s,i,o;if(e==="horizontal")a=t.x,i=a,s=r.top,o=r.top+r.height;else if(e==="vertical")s=t.y,o=s,a=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,d=t.cy,u=t.innerRadius,p=t.outerRadius,m=t.angle,h=bn(l,d,u,m),x=bn(l,d,p,m);a=h.x,s=h.y,i=x.x,o=x.y}else return wG(t);return[{x:a,y:s},{x:i,y:o}]}function sg(e){"@babel/helpers - typeof";return sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sg(e)}function X4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function eb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?X4(Object(r),!0).forEach(function(a){dbe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X4(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function dbe(e,t,r){return t=ube(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ube(e){var t=fbe(e,"string");return sg(t)=="symbol"?t:t+""}function fbe(e,t){if(sg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(sg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mbe(e){var t,r,a=e.element,s=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,d=e.offset,u=e.activeTooltipIndex,p=e.tooltipAxisBandSize,m=e.layout,h=e.chartName,x=(t=a.props.cursor)!==null&&t!==void 0?t:(r=a.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!a||!x||!i||!o||h!=="ScatterChart"&&s!=="axis")return null;var y,N=Fd;if(h==="ScatterChart")y=o,N=cpe;else if(h==="BarChart")y=lbe(m,o,d,p),N=j1;else if(m==="radial"){var v=wG(o),j=v.cx,E=v.cy,C=v.radius,A=v.startAngle,S=v.endAngle;y={cx:j,cy:E,startAngle:A,endAngle:S,innerRadius:C,outerRadius:C},N=gH}else y={points:cbe(m,o,d)},N=Fd;var _=eb(eb(eb(eb({stroke:"#ccc",pointerEvents:"none"},d),y),Rt(x,!1)),{},{payload:l,payloadIndex:u,className:ar("recharts-tooltip-cursor",x.className)});return g.isValidElement(x)?g.cloneElement(x,_):g.createElement(N,_)}var pbe=["item"],hbe=["children","className","width","height","style","compact","title","desc"];function up(e){"@babel/helpers - typeof";return up=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},up(e)}function dm(){return dm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},dm.apply(this,arguments)}function Q4(e,t){return bbe(e)||xbe(e,t)||AG(e,t)||gbe()}function gbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xbe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(p){u=!0,s=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function bbe(e){if(Array.isArray(e))return e}function Z4(e,t){if(e==null)return{};var r=ybe(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function ybe(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function vbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nbe(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,CG(a.key),a)}}function Sbe(e,t,r){return t&&Nbe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function jbe(e,t,r){return t=dv(t),wbe(e,EG()?Reflect.construct(t,r||[],dv(e).constructor):t.apply(e,r))}function wbe(e,t){if(t&&(up(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ebe(e)}function Ebe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(EG=function(){return!!e})()}function dv(e){return dv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},dv(e)}function Abe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sT(e,t)}function sT(e,t){return sT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},sT(e,t)}function fp(e){return Tbe(e)||_be(e)||AG(e)||Cbe()}function Cbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AG(e,t){if(e){if(typeof e=="string")return iT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iT(e,t)}}function _be(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Tbe(e){if(Array.isArray(e))return iT(e)}function iT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function J4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Ie(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?J4(Object(r),!0).forEach(function(a){Jt(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J4(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Jt(e,t,r){return t=CG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CG(e){var t=Obe(e,"string");return up(t)=="symbol"?t:t+""}function Obe(e,t){if(up(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(up(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kbe={xAxis:["bottom","top"],yAxis:["left","right"]},Rbe={width:"100%",height:"100%"},_G={x:0,y:0};function tb(e){return e}var Pbe=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},Dbe=function(t,r,a,s){var i=r.find(function(p){return p&&p.index===a});if(i){if(t==="horizontal")return{x:i.coordinate,y:s.y};if(t==="vertical")return{x:s.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=s.radius;return Ie(Ie(Ie({},s),bn(s.cx,s.cy,l,o)),{},{angle:o,radius:l})}var d=i.coordinate,u=s.angle;return Ie(Ie(Ie({},s),bn(s.cx,s.cy,d,u)),{},{angle:u,radius:d})}return _G},I1=function(t,r){var a=r.graphicalItems,s=r.dataStartIndex,i=r.dataEndIndex,o=(a??[]).reduce(function(l,d){var u=d.props.data;return u&&u.length?[].concat(fp(l),fp(u)):l},[]);return o.length>0?o:t&&t.length&&et(s)&&et(i)?t.slice(s,i+1):[]};function TG(e){return e==="number"?[0,"auto"]:void 0}var oT=function(t,r,a,s){var i=t.graphicalItems,o=t.tooltipAxis,l=I1(r,t);return a<0||!i||!i.length||a>=l.length?null:i.reduce(function(d,u){var p,m=(p=u.props.data)!==null&&p!==void 0?p:r;m&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=a&&(m=m.slice(t.dataStartIndex,t.dataEndIndex+1));var h;if(o.dataKey&&!o.allowDuplicatedCategory){var x=m===void 0?l:m;h=iy(x,o.dataKey,s)}else h=m&&m[a]||l[a];return h?[].concat(fp(d),[cH(u,h)]):d},[])},e6=function(t,r,a,s){var i=s||{x:t.chartX,y:t.chartY},o=Pbe(i,a),l=t.orderedTooltipTicks,d=t.tooltipAxis,u=t.tooltipTicks,p=Rde(o,l,u,d);if(p>=0&&u){var m=u[p]&&u[p].value,h=oT(t,r,p,m),x=Dbe(a,l,p,i);return{activeTooltipIndex:p,activeLabel:m,activePayload:h,activeCoordinate:x}}return null},Ibe=function(t,r){var a=r.axes,s=r.graphicalItems,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,d=r.dataStartIndex,u=r.dataEndIndex,p=t.layout,m=t.children,h=t.stackOffset,x=nH(p,i);return a.reduce(function(y,N){var v,j=N.type.defaultProps!==void 0?Ie(Ie({},N.type.defaultProps),N.props):N.props,E=j.type,C=j.dataKey,A=j.allowDataOverflow,S=j.allowDuplicatedCategory,_=j.scale,O=j.ticks,D=j.includeHidden,k=j[o];if(y[k])return y;var M=I1(t.data,{graphicalItems:s.filter(function(L){var H,ae=o in L.props?L.props[o]:(H=L.type.defaultProps)===null||H===void 0?void 0:H[o];return ae===k}),dataStartIndex:d,dataEndIndex:u}),F=M.length,$,B,P;obe(j.domain,A,E)&&($=b_(j.domain,null,A),x&&(E==="number"||_!=="auto")&&(P=m0(M,C,"category")));var W=TG(E);if(!$||$.length===0){var K,G=(K=j.domain)!==null&&K!==void 0?K:W;if(C){if($=m0(M,C,E),E==="category"&&x){var U=wre($);S&&U?(B=$,$=Vy(0,F)):S||($=ZL(G,$,N).reduce(function(L,H){return L.indexOf(H)>=0?L:[].concat(fp(L),[H])},[]))}else if(E==="category")S?$=$.filter(function(L){return L!==""&&!Qt(L)}):$=ZL(G,$,N).reduce(function(L,H){return L.indexOf(H)>=0||H===""||Qt(H)?L:[].concat(fp(L),[H])},[]);else if(E==="number"){var te=Lde(M,s.filter(function(L){var H,ae,oe=o in L.props?L.props[o]:(H=L.type.defaultProps)===null||H===void 0?void 0:H[o],ve="hide"in L.props?L.props.hide:(ae=L.type.defaultProps)===null||ae===void 0?void 0:ae.hide;return oe===k&&(D||!ve)}),C,i,p);te&&($=te)}x&&(E==="number"||_!=="auto")&&(P=m0(M,C,"category"))}else x?$=Vy(0,F):l&&l[k]&&l[k].hasStack&&E==="number"?$=h==="expand"?[0,1]:lH(l[k].stackGroups,d,u):$=rH(M,s.filter(function(L){var H=o in L.props?L.props[o]:L.type.defaultProps[o],ae="hide"in L.props?L.props.hide:L.type.defaultProps.hide;return H===k&&(D||!ae)}),E,p,!0);if(E==="number")$=aT(m,$,k,i,O),G&&($=b_(G,$,A));else if(E==="category"&&G){var re=G,q=$.every(function(L){return re.indexOf(L)>=0});q&&($=re)}}return Ie(Ie({},y),{},Jt({},k,Ie(Ie({},j),{},{axisType:i,domain:$,categoricalDomain:P,duplicateDomain:B,originalDomain:(v=j.domain)!==null&&v!==void 0?v:W,isCategorical:x,layout:p})))},{})},Mbe=function(t,r){var a=r.graphicalItems,s=r.Axis,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,d=r.dataStartIndex,u=r.dataEndIndex,p=t.layout,m=t.children,h=I1(t.data,{graphicalItems:a,dataStartIndex:d,dataEndIndex:u}),x=h.length,y=nH(p,i),N=-1;return a.reduce(function(v,j){var E=j.type.defaultProps!==void 0?Ie(Ie({},j.type.defaultProps),j.props):j.props,C=E[o],A=TG("number");if(!v[C]){N++;var S;return y?S=Vy(0,x):l&&l[C]&&l[C].hasStack?(S=lH(l[C].stackGroups,d,u),S=aT(m,S,C,i)):(S=b_(A,rH(h,a.filter(function(_){var O,D,k=o in _.props?_.props[o]:(O=_.type.defaultProps)===null||O===void 0?void 0:O[o],M="hide"in _.props?_.props.hide:(D=_.type.defaultProps)===null||D===void 0?void 0:D.hide;return k===C&&!M}),"number",p),s.defaultProps.allowDataOverflow),S=aT(m,S,C,i)),Ie(Ie({},v),{},Jt({},C,Ie(Ie({axisType:i},s.defaultProps),{},{hide:!0,orientation:Js(kbe,"".concat(i,".").concat(N%2),null),domain:S,originalDomain:A,isCategorical:y,layout:p})))}return v},{})},Lbe=function(t,r){var a=r.axisType,s=a===void 0?"xAxis":a,i=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,d=r.dataStartIndex,u=r.dataEndIndex,p=t.children,m="".concat(s,"Id"),h=Ds(p,i),x={};return h&&h.length?x=Ibe(t,{axes:h,graphicalItems:o,axisType:s,axisIdKey:m,stackGroups:l,dataStartIndex:d,dataEndIndex:u}):o&&o.length&&(x=Mbe(t,{Axis:i,graphicalItems:o,axisType:s,axisIdKey:m,stackGroups:l,dataStartIndex:d,dataEndIndex:u})),x},$be=function(t){var r=_d(t),a=vc(r,!1,!0);return{tooltipTicks:a,orderedTooltipTicks:ik(a,function(s){return s.coordinate}),tooltipAxis:r,tooltipAxisBandSize:Dy(r,a)}},t6=function(t){var r=t.children,a=t.defaultShowTooltip,s=us(r,Jm),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(i=s.props.startIndex),s.props.endIndex>=0&&(o=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!a}},Fbe=function(t){return!t||!t.length?!1:t.some(function(r){var a=Sc(r&&r.type);return a&&a.indexOf("Bar")>=0})},r6=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Bbe=function(t,r){var a=t.props,s=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,d=l===void 0?{}:l,u=a.width,p=a.height,m=a.children,h=a.margin||{},x=us(m,Jm),y=us(m,El),N=Object.keys(d).reduce(function(S,_){var O=d[_],D=O.orientation;return!O.mirror&&!O.hide?Ie(Ie({},S),{},Jt({},D,S[D]+O.width)):S},{left:h.left||0,right:h.right||0}),v=Object.keys(o).reduce(function(S,_){var O=o[_],D=O.orientation;return!O.mirror&&!O.hide?Ie(Ie({},S),{},Jt({},D,Js(S,"".concat(D))+O.height)):S},{top:h.top||0,bottom:h.bottom||0}),j=Ie(Ie({},v),N),E=j.bottom;x&&(j.bottom+=x.props.height||Jm.defaultProps.height),y&&r&&(j=Ide(j,s,a,r));var C=u-j.left-j.right,A=p-j.top-j.bottom;return Ie(Ie({brushBottom:E},j),{},{width:Math.max(C,0),height:Math.max(A,0)})},Ube=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},Ag=function(t){var r=t.chartName,a=t.GraphicalChild,s=t.defaultTooltipEventType,i=s===void 0?"axis":s,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,d=t.axisComponents,u=t.legendContent,p=t.formatAxisMap,m=t.defaultProps,h=function(j,E){var C=E.graphicalItems,A=E.stackGroups,S=E.offset,_=E.updateId,O=E.dataStartIndex,D=E.dataEndIndex,k=j.barSize,M=j.layout,F=j.barGap,$=j.barCategoryGap,B=j.maxBarSize,P=r6(M),W=P.numericAxisName,K=P.cateAxisName,G=Fbe(C),U=[];return C.forEach(function(te,re){var q=I1(j.data,{graphicalItems:[te],dataStartIndex:O,dataEndIndex:D}),L=te.type.defaultProps!==void 0?Ie(Ie({},te.type.defaultProps),te.props):te.props,H=L.dataKey,ae=L.maxBarSize,oe=L["".concat(W,"Id")],ve=L["".concat(K,"Id")],ce={},Ee=d.reduce(function(it,Fe){var Et=E["".concat(Fe.axisType,"Map")],Mt=L["".concat(Fe.axisType,"Id")];Et&&Et[Mt]||Fe.axisType==="zAxis"||rf();var Be=Et[Mt];return Ie(Ie({},it),{},Jt(Jt({},Fe.axisType,Be),"".concat(Fe.axisType,"Ticks"),vc(Be)))},ce),xe=Ee[K],Te=Ee["".concat(K,"Ticks")],ye=A&&A[oe]&&A[oe].hasStack&&qde(te,A[oe].stackGroups),se=Sc(te.type).indexOf("Bar")>=0,ct=Dy(xe,Te),Q=[],he=G&&Pde({barSize:k,stackGroups:A,totalSize:Ube(Ee,K)});if(se){var $e,Z,je=Qt(ae)?B:ae,ge=($e=(Z=Dy(xe,Te,!0))!==null&&Z!==void 0?Z:je)!==null&&$e!==void 0?$e:0;Q=Dde({barGap:F,barCategoryGap:$,bandSize:ge!==ct?ge:ct,sizeList:he[ve],maxBarSize:je}),ge!==ct&&(Q=Q.map(function(it){return Ie(Ie({},it),{},{position:Ie(Ie({},it.position),{},{offset:it.position.offset-ge/2})})}))}var be=te&&te.type&&te.type.getComposedData;be&&U.push({props:Ie(Ie({},be(Ie(Ie({},Ee),{},{displayedData:q,props:j,dataKey:H,item:te,bandSize:ct,barPosition:Q,offset:S,stackedData:ye,layout:M,dataStartIndex:O,dataEndIndex:D}))),{},Jt(Jt(Jt({key:te.key||"item-".concat(re)},W,Ee[W]),K,Ee[K]),"animationId",_)),childIndex:Lre(te,j.children),item:te})}),U},x=function(j,E){var C=j.props,A=j.dataStartIndex,S=j.dataEndIndex,_=j.updateId;if(!BC({props:C}))return null;var O=C.children,D=C.layout,k=C.stackOffset,M=C.data,F=C.reverseStackOrder,$=r6(D),B=$.numericAxisName,P=$.cateAxisName,W=Ds(O,a),K=Kde(M,W,"".concat(B,"Id"),"".concat(P,"Id"),k,F),G=d.reduce(function(L,H){var ae="".concat(H.axisType,"Map");return Ie(Ie({},L),{},Jt({},ae,Lbe(C,Ie(Ie({},H),{},{graphicalItems:W,stackGroups:H.axisType===B&&K,dataStartIndex:A,dataEndIndex:S}))))},{}),U=Bbe(Ie(Ie({},G),{},{props:C,graphicalItems:W}),E?.legendBBox);Object.keys(G).forEach(function(L){G[L]=p(C,G[L],U,L.replace("Map",""),r)});var te=G["".concat(P,"Map")],re=$be(te),q=h(C,Ie(Ie({},G),{},{dataStartIndex:A,dataEndIndex:S,updateId:_,graphicalItems:W,stackGroups:K,offset:U}));return Ie(Ie({formattedGraphicalItems:q,graphicalItems:W,offset:U,stackGroups:K},re),G)},y=(function(v){function j(E){var C,A,S;return vbe(this,j),S=jbe(this,j,[E]),Jt(S,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Jt(S,"accessibilityManager",new ibe),Jt(S,"handleLegendBBoxUpdate",function(_){if(_){var O=S.state,D=O.dataStartIndex,k=O.dataEndIndex,M=O.updateId;S.setState(Ie({legendBBox:_},x({props:S.props,dataStartIndex:D,dataEndIndex:k,updateId:M},Ie(Ie({},S.state),{},{legendBBox:_}))))}}),Jt(S,"handleReceiveSyncEvent",function(_,O,D){if(S.props.syncId===_){if(D===S.eventEmitterSymbol&&typeof S.props.syncMethod!="function")return;S.applySyncEvent(O)}}),Jt(S,"handleBrushChange",function(_){var O=_.startIndex,D=_.endIndex;if(O!==S.state.dataStartIndex||D!==S.state.dataEndIndex){var k=S.state.updateId;S.setState(function(){return Ie({dataStartIndex:O,dataEndIndex:D},x({props:S.props,dataStartIndex:O,dataEndIndex:D,updateId:k},S.state))}),S.triggerSyncEvent({dataStartIndex:O,dataEndIndex:D})}}),Jt(S,"handleMouseEnter",function(_){var O=S.getMouseInfo(_);if(O){var D=Ie(Ie({},O),{},{isTooltipActive:!0});S.setState(D),S.triggerSyncEvent(D);var k=S.props.onMouseEnter;Gt(k)&&k(D,_)}}),Jt(S,"triggeredAfterMouseMove",function(_){var O=S.getMouseInfo(_),D=O?Ie(Ie({},O),{},{isTooltipActive:!0}):{isTooltipActive:!1};S.setState(D),S.triggerSyncEvent(D);var k=S.props.onMouseMove;Gt(k)&&k(D,_)}),Jt(S,"handleItemMouseEnter",function(_){S.setState(function(){return{isTooltipActive:!0,activeItem:_,activePayload:_.tooltipPayload,activeCoordinate:_.tooltipPosition||{x:_.cx,y:_.cy}}})}),Jt(S,"handleItemMouseLeave",function(){S.setState(function(){return{isTooltipActive:!1}})}),Jt(S,"handleMouseMove",function(_){_.persist(),S.throttleTriggeredAfterMouseMove(_)}),Jt(S,"handleMouseLeave",function(_){S.throttleTriggeredAfterMouseMove.cancel();var O={isTooltipActive:!1};S.setState(O),S.triggerSyncEvent(O);var D=S.props.onMouseLeave;Gt(D)&&D(O,_)}),Jt(S,"handleOuterEvent",function(_){var O=Mre(_),D=Js(S.props,"".concat(O));if(O&&Gt(D)){var k,M;/.*touch.*/i.test(O)?M=S.getMouseInfo(_.changedTouches[0]):M=S.getMouseInfo(_),D((k=M)!==null&&k!==void 0?k:{},_)}}),Jt(S,"handleClick",function(_){var O=S.getMouseInfo(_);if(O){var D=Ie(Ie({},O),{},{isTooltipActive:!0});S.setState(D),S.triggerSyncEvent(D);var k=S.props.onClick;Gt(k)&&k(D,_)}}),Jt(S,"handleMouseDown",function(_){var O=S.props.onMouseDown;if(Gt(O)){var D=S.getMouseInfo(_);O(D,_)}}),Jt(S,"handleMouseUp",function(_){var O=S.props.onMouseUp;if(Gt(O)){var D=S.getMouseInfo(_);O(D,_)}}),Jt(S,"handleTouchMove",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&S.throttleTriggeredAfterMouseMove(_.changedTouches[0])}),Jt(S,"handleTouchStart",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&S.handleMouseDown(_.changedTouches[0])}),Jt(S,"handleTouchEnd",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&S.handleMouseUp(_.changedTouches[0])}),Jt(S,"handleDoubleClick",function(_){var O=S.props.onDoubleClick;if(Gt(O)){var D=S.getMouseInfo(_);O(D,_)}}),Jt(S,"handleContextMenu",function(_){var O=S.props.onContextMenu;if(Gt(O)){var D=S.getMouseInfo(_);O(D,_)}}),Jt(S,"triggerSyncEvent",function(_){S.props.syncId!==void 0&&jE.emit(wE,S.props.syncId,_,S.eventEmitterSymbol)}),Jt(S,"applySyncEvent",function(_){var O=S.props,D=O.layout,k=O.syncMethod,M=S.state.updateId,F=_.dataStartIndex,$=_.dataEndIndex;if(_.dataStartIndex!==void 0||_.dataEndIndex!==void 0)S.setState(Ie({dataStartIndex:F,dataEndIndex:$},x({props:S.props,dataStartIndex:F,dataEndIndex:$,updateId:M},S.state)));else if(_.activeTooltipIndex!==void 0){var B=_.chartX,P=_.chartY,W=_.activeTooltipIndex,K=S.state,G=K.offset,U=K.tooltipTicks;if(!G)return;if(typeof k=="function")W=k(U,_);else if(k==="value"){W=-1;for(var te=0;te<U.length;te++)if(U[te].value===_.activeLabel){W=te;break}}var re=Ie(Ie({},G),{},{x:G.left,y:G.top}),q=Math.min(B,re.x+re.width),L=Math.min(P,re.y+re.height),H=U[W]&&U[W].value,ae=oT(S.state,S.props.data,W),oe=U[W]?{x:D==="horizontal"?U[W].coordinate:q,y:D==="horizontal"?L:U[W].coordinate}:_G;S.setState(Ie(Ie({},_),{},{activeLabel:H,activeCoordinate:oe,activePayload:ae,activeTooltipIndex:W}))}else S.setState(_)}),Jt(S,"renderCursor",function(_){var O,D=S.state,k=D.isTooltipActive,M=D.activeCoordinate,F=D.activePayload,$=D.offset,B=D.activeTooltipIndex,P=D.tooltipAxisBandSize,W=S.getTooltipEventType(),K=(O=_.props.active)!==null&&O!==void 0?O:k,G=S.props.layout,U=_.key||"_recharts-cursor";return Y.createElement(mbe,{key:U,activeCoordinate:M,activePayload:F,activeTooltipIndex:B,chartName:r,element:_,isActive:K,layout:G,offset:$,tooltipAxisBandSize:P,tooltipEventType:W})}),Jt(S,"renderPolarAxis",function(_,O,D){var k=Js(_,"type.axisType"),M=Js(S.state,"".concat(k,"Map")),F=_.type.defaultProps,$=F!==void 0?Ie(Ie({},F),_.props):_.props,B=M&&M[$["".concat(k,"Id")]];return g.cloneElement(_,Ie(Ie({},B),{},{className:ar(k,B.className),key:_.key||"".concat(O,"-").concat(D),ticks:vc(B,!0)}))}),Jt(S,"renderPolarGrid",function(_){var O=_.props,D=O.radialLines,k=O.polarAngles,M=O.polarRadius,F=S.state,$=F.radiusAxisMap,B=F.angleAxisMap,P=_d($),W=_d(B),K=W.cx,G=W.cy,U=W.innerRadius,te=W.outerRadius;return g.cloneElement(_,{polarAngles:Array.isArray(k)?k:vc(W,!0).map(function(re){return re.coordinate}),polarRadius:Array.isArray(M)?M:vc(P,!0).map(function(re){return re.coordinate}),cx:K,cy:G,innerRadius:U,outerRadius:te,key:_.key||"polar-grid",radialLines:D})}),Jt(S,"renderLegend",function(){var _=S.state.formattedGraphicalItems,O=S.props,D=O.children,k=O.width,M=O.height,F=S.props.margin||{},$=k-(F.left||0)-(F.right||0),B=eH({children:D,formattedGraphicalItems:_,legendWidth:$,legendContent:u});if(!B)return null;var P=B.item,W=Z4(B,pbe);return g.cloneElement(P,Ie(Ie({},W),{},{chartWidth:k,chartHeight:M,margin:F,onBBoxUpdate:S.handleLegendBBoxUpdate}))}),Jt(S,"renderTooltip",function(){var _,O=S.props,D=O.children,k=O.accessibilityLayer,M=us(D,en);if(!M)return null;var F=S.state,$=F.isTooltipActive,B=F.activeCoordinate,P=F.activePayload,W=F.activeLabel,K=F.offset,G=(_=M.props.active)!==null&&_!==void 0?_:$;return g.cloneElement(M,{viewBox:Ie(Ie({},K),{},{x:K.left,y:K.top}),active:G,label:W,payload:G?P:[],coordinate:B,accessibilityLayer:k})}),Jt(S,"renderBrush",function(_){var O=S.props,D=O.margin,k=O.data,M=S.state,F=M.offset,$=M.dataStartIndex,B=M.dataEndIndex,P=M.updateId;return g.cloneElement(_,{key:_.key||"_recharts-brush",onChange:Xx(S.handleBrushChange,_.props.onChange),data:k,x:et(_.props.x)?_.props.x:F.left,y:et(_.props.y)?_.props.y:F.top+F.height+F.brushBottom-(D.bottom||0),width:et(_.props.width)?_.props.width:F.width,startIndex:$,endIndex:B,updateId:"brush-".concat(P)})}),Jt(S,"renderReferenceElement",function(_,O,D){if(!_)return null;var k=S,M=k.clipPathId,F=S.state,$=F.xAxisMap,B=F.yAxisMap,P=F.offset,W=_.type.defaultProps||{},K=_.props,G=K.xAxisId,U=G===void 0?W.xAxisId:G,te=K.yAxisId,re=te===void 0?W.yAxisId:te;return g.cloneElement(_,{key:_.key||"".concat(O,"-").concat(D),xAxis:$[U],yAxis:B[re],viewBox:{x:P.left,y:P.top,width:P.width,height:P.height},clipPathId:M})}),Jt(S,"renderActivePoints",function(_){var O=_.item,D=_.activePoint,k=_.basePoint,M=_.childIndex,F=_.isRange,$=[],B=O.props.key,P=O.item.type.defaultProps!==void 0?Ie(Ie({},O.item.type.defaultProps),O.item.props):O.item.props,W=P.activeDot,K=P.dataKey,G=Ie(Ie({index:M,dataKey:K,cx:D.x,cy:D.y,r:4,fill:Dk(O.item),strokeWidth:2,stroke:"#fff",payload:D.payload,value:D.value},Rt(W,!1)),oy(W));return $.push(j.renderActiveDot(W,G,"".concat(B,"-activePoint-").concat(M))),k?$.push(j.renderActiveDot(W,Ie(Ie({},G),{},{cx:k.x,cy:k.y}),"".concat(B,"-basePoint-").concat(M))):F&&$.push(null),$}),Jt(S,"renderGraphicChild",function(_,O,D){var k=S.filterFormatItem(_,O,D);if(!k)return null;var M=S.getTooltipEventType(),F=S.state,$=F.isTooltipActive,B=F.tooltipAxis,P=F.activeTooltipIndex,W=F.activeLabel,K=S.props.children,G=us(K,en),U=k.props,te=U.points,re=U.isRange,q=U.baseLine,L=k.item.type.defaultProps!==void 0?Ie(Ie({},k.item.type.defaultProps),k.item.props):k.item.props,H=L.activeDot,ae=L.hide,oe=L.activeBar,ve=L.activeShape,ce=!!(!ae&&$&&G&&(H||oe||ve)),Ee={};M!=="axis"&&G&&G.props.trigger==="click"?Ee={onClick:Xx(S.handleItemMouseEnter,_.props.onClick)}:M!=="axis"&&(Ee={onMouseLeave:Xx(S.handleItemMouseLeave,_.props.onMouseLeave),onMouseEnter:Xx(S.handleItemMouseEnter,_.props.onMouseEnter)});var xe=g.cloneElement(_,Ie(Ie({},k.props),Ee));function Te(Fe){return typeof B.dataKey=="function"?B.dataKey(Fe.payload):null}if(ce)if(P>=0){var ye,se;if(B.dataKey&&!B.allowDuplicatedCategory){var ct=typeof B.dataKey=="function"?Te:"payload.".concat(B.dataKey.toString());ye=iy(te,ct,W),se=re&&q&&iy(q,ct,W)}else ye=te?.[P],se=re&&q&&q[P];if(ve||oe){var Q=_.props.activeIndex!==void 0?_.props.activeIndex:P;return[g.cloneElement(_,Ie(Ie(Ie({},k.props),Ee),{},{activeIndex:Q})),null,null]}if(!Qt(ye))return[xe].concat(fp(S.renderActivePoints({item:k,activePoint:ye,basePoint:se,childIndex:P,isRange:re})))}else{var he,$e=(he=S.getItemByXY(S.state.activeCoordinate))!==null&&he!==void 0?he:{graphicalItem:xe},Z=$e.graphicalItem,je=Z.item,ge=je===void 0?_:je,be=Z.childIndex,it=Ie(Ie(Ie({},k.props),Ee),{},{activeIndex:be});return[g.cloneElement(ge,it),null,null]}return re?[xe,null,null]:[xe,null]}),Jt(S,"renderCustomized",function(_,O,D){return g.cloneElement(_,Ie(Ie({key:"recharts-customized-".concat(D)},S.props),S.state))}),Jt(S,"renderMap",{CartesianGrid:{handler:tb,once:!0},ReferenceArea:{handler:S.renderReferenceElement},ReferenceLine:{handler:tb},ReferenceDot:{handler:S.renderReferenceElement},XAxis:{handler:tb},YAxis:{handler:tb},Brush:{handler:S.renderBrush,once:!0},Bar:{handler:S.renderGraphicChild},Line:{handler:S.renderGraphicChild},Area:{handler:S.renderGraphicChild},Radar:{handler:S.renderGraphicChild},RadialBar:{handler:S.renderGraphicChild},Scatter:{handler:S.renderGraphicChild},Pie:{handler:S.renderGraphicChild},Funnel:{handler:S.renderGraphicChild},Tooltip:{handler:S.renderCursor,once:!0},PolarGrid:{handler:S.renderPolarGrid,once:!0},PolarAngleAxis:{handler:S.renderPolarAxis},PolarRadiusAxis:{handler:S.renderPolarAxis},Customized:{handler:S.renderCustomized}}),S.clipPathId="".concat((C=E.id)!==null&&C!==void 0?C:Lc("recharts"),"-clip"),S.throttleTriggeredAfterMouseMove=JU(S.triggeredAfterMouseMove,(A=E.throttleDelay)!==null&&A!==void 0?A:1e3/60),S.state={},S}return Abe(j,v),Sbe(j,[{key:"componentDidMount",value:function(){var C,A;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(C=this.props.margin.left)!==null&&C!==void 0?C:0,top:(A=this.props.margin.top)!==null&&A!==void 0?A:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var C=this.props,A=C.children,S=C.data,_=C.height,O=C.layout,D=us(A,en);if(D){var k=D.props.defaultIndex;if(!(typeof k!="number"||k<0||k>this.state.tooltipTicks.length-1)){var M=this.state.tooltipTicks[k]&&this.state.tooltipTicks[k].value,F=oT(this.state,S,k,M),$=this.state.tooltipTicks[k].coordinate,B=(this.state.offset.top+_)/2,P=O==="horizontal",W=P?{x:$,y:B}:{y:$,x:B},K=this.state.formattedGraphicalItems.find(function(U){var te=U.item;return te.type.name==="Scatter"});K&&(W=Ie(Ie({},W),K.props.points[k].tooltipPosition),F=K.props.points[k].tooltipPayload);var G={activeTooltipIndex:k,isTooltipActive:!0,activeLabel:M,activePayload:F,activeCoordinate:W};this.setState(G),this.renderCursor(D),this.accessibilityManager.setIndex(k)}}}},{key:"getSnapshotBeforeUpdate",value:function(C,A){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==A.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==C.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==C.margin){var S,_;this.accessibilityManager.setDetails({offset:{left:(S=this.props.margin.left)!==null&&S!==void 0?S:0,top:(_=this.props.margin.top)!==null&&_!==void 0?_:0}})}return null}},{key:"componentDidUpdate",value:function(C){UC([us(C.children,en)],[us(this.props.children,en)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var C=us(this.props.children,en);if(C&&typeof C.props.shared=="boolean"){var A=C.props.shared?"axis":"item";return l.indexOf(A)>=0?A:i}return i}},{key:"getMouseInfo",value:function(C){if(!this.container)return null;var A=this.container,S=A.getBoundingClientRect(),_=uie(S),O={chartX:Math.round(C.pageX-_.left),chartY:Math.round(C.pageY-_.top)},D=S.width/A.offsetWidth||1,k=this.inRange(O.chartX,O.chartY,D);if(!k)return null;var M=this.state,F=M.xAxisMap,$=M.yAxisMap,B=this.getTooltipEventType(),P=e6(this.state,this.props.data,this.props.layout,k);if(B!=="axis"&&F&&$){var W=_d(F).scale,K=_d($).scale,G=W&&W.invert?W.invert(O.chartX):null,U=K&&K.invert?K.invert(O.chartY):null;return Ie(Ie({},O),{},{xValue:G,yValue:U},P)}return P?Ie(Ie({},O),P):null}},{key:"inRange",value:function(C,A){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,_=this.props.layout,O=C/S,D=A/S;if(_==="horizontal"||_==="vertical"){var k=this.state.offset,M=O>=k.left&&O<=k.left+k.width&&D>=k.top&&D<=k.top+k.height;return M?{x:O,y:D}:null}var F=this.state,$=F.angleAxisMap,B=F.radiusAxisMap;if($&&B){var P=_d($);return t$({x:O,y:D},P)}return null}},{key:"parseEventsOfWrapper",value:function(){var C=this.props.children,A=this.getTooltipEventType(),S=us(C,en),_={};S&&A==="axis"&&(S.props.trigger==="click"?_={onClick:this.handleClick}:_={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var O=oy(this.props,this.handleOuterEvent);return Ie(Ie({},O),_)}},{key:"addListener",value:function(){jE.on(wE,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){jE.removeListener(wE,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(C,A,S){for(var _=this.state.formattedGraphicalItems,O=0,D=_.length;O<D;O++){var k=_[O];if(k.item===C||k.props.key===C.key||A===Sc(k.item.type)&&S===k.childIndex)return k}return null}},{key:"renderClipPath",value:function(){var C=this.clipPathId,A=this.state.offset,S=A.left,_=A.top,O=A.height,D=A.width;return Y.createElement("defs",null,Y.createElement("clipPath",{id:C},Y.createElement("rect",{x:S,y:_,height:O,width:D})))}},{key:"getXScales",value:function(){var C=this.state.xAxisMap;return C?Object.entries(C).reduce(function(A,S){var _=Q4(S,2),O=_[0],D=_[1];return Ie(Ie({},A),{},Jt({},O,D.scale))},{}):null}},{key:"getYScales",value:function(){var C=this.state.yAxisMap;return C?Object.entries(C).reduce(function(A,S){var _=Q4(S,2),O=_[0],D=_[1];return Ie(Ie({},A),{},Jt({},O,D.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(C){var A;return(A=this.state.xAxisMap)===null||A===void 0||(A=A[C])===null||A===void 0?void 0:A.scale}},{key:"getYScaleByAxisId",value:function(C){var A;return(A=this.state.yAxisMap)===null||A===void 0||(A=A[C])===null||A===void 0?void 0:A.scale}},{key:"getItemByXY",value:function(C){var A=this.state,S=A.formattedGraphicalItems,_=A.activeItem;if(S&&S.length)for(var O=0,D=S.length;O<D;O++){var k=S[O],M=k.props,F=k.item,$=F.type.defaultProps!==void 0?Ie(Ie({},F.type.defaultProps),F.props):F.props,B=Sc(F.type);if(B==="Bar"){var P=(M.data||[]).find(function(U){return Kme(C,U)});if(P)return{graphicalItem:k,payload:P}}else if(B==="RadialBar"){var W=(M.data||[]).find(function(U){return t$(C,U)});if(W)return{graphicalItem:k,payload:W}}else if(_1(k,_)||T1(k,_)||J0(k,_)){var K=dhe({graphicalItem:k,activeTooltipItem:_,itemData:$.data}),G=$.activeIndex===void 0?K:$.activeIndex;return{graphicalItem:Ie(Ie({},k),{},{childIndex:G}),payload:J0(k,_)?$.data[K]:k.props.data[K]}}}return null}},{key:"render",value:function(){var C=this;if(!BC(this))return null;var A=this.props,S=A.children,_=A.className,O=A.width,D=A.height,k=A.style,M=A.compact,F=A.title,$=A.desc,B=Z4(A,hbe),P=Rt(B,!1);if(M)return Y.createElement(_4,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Y.createElement(ly,dm({},P,{width:O,height:D,title:F,desc:$}),this.renderClipPath(),pD(S,this.renderMap)));if(this.props.accessibilityLayer){var W,K;P.tabIndex=(W=this.props.tabIndex)!==null&&W!==void 0?W:0,P.role=(K=this.props.role)!==null&&K!==void 0?K:"application",P.onKeyDown=function(U){C.accessibilityManager.keyboardEvent(U)},P.onFocus=function(){C.accessibilityManager.focus()}}var G=this.parseEventsOfWrapper();return Y.createElement(_4,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Y.createElement("div",dm({className:ar("recharts-wrapper",_),style:Ie({position:"relative",cursor:"default",width:O,height:D},k)},G,{ref:function(te){C.container=te}}),Y.createElement(ly,dm({},P,{width:O,height:D,title:F,desc:$,style:Rbe}),this.renderClipPath(),pD(S,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(g.Component);Jt(y,"displayName",r),Jt(y,"defaultProps",Ie({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},m)),Jt(y,"getDerivedStateFromProps",function(v,j){var E=v.dataKey,C=v.data,A=v.children,S=v.width,_=v.height,O=v.layout,D=v.stackOffset,k=v.margin,M=j.dataStartIndex,F=j.dataEndIndex;if(j.updateId===void 0){var $=t6(v);return Ie(Ie(Ie({},$),{},{updateId:0},x(Ie(Ie({props:v},$),{},{updateId:0}),j)),{},{prevDataKey:E,prevData:C,prevWidth:S,prevHeight:_,prevLayout:O,prevStackOffset:D,prevMargin:k,prevChildren:A})}if(E!==j.prevDataKey||C!==j.prevData||S!==j.prevWidth||_!==j.prevHeight||O!==j.prevLayout||D!==j.prevStackOffset||!ym(k,j.prevMargin)){var B=t6(v),P={chartX:j.chartX,chartY:j.chartY,isTooltipActive:j.isTooltipActive},W=Ie(Ie({},e6(j,C,O)),{},{updateId:j.updateId+1}),K=Ie(Ie(Ie({},B),P),W);return Ie(Ie(Ie({},K),x(Ie({props:v},K),j)),{},{prevDataKey:E,prevData:C,prevWidth:S,prevHeight:_,prevLayout:O,prevStackOffset:D,prevMargin:k,prevChildren:A})}if(!UC(A,j.prevChildren)){var G,U,te,re,q=us(A,Jm),L=q&&(G=(U=q.props)===null||U===void 0?void 0:U.startIndex)!==null&&G!==void 0?G:M,H=q&&(te=(re=q.props)===null||re===void 0?void 0:re.endIndex)!==null&&te!==void 0?te:F,ae=L!==M||H!==F,oe=!Qt(C),ve=oe&&!ae?j.updateId:j.updateId+1;return Ie(Ie({updateId:ve},x(Ie(Ie({props:v},j),{},{updateId:ve,dataStartIndex:L,dataEndIndex:H}),j)),{},{prevChildren:A,dataStartIndex:L,dataEndIndex:H})}return null}),Jt(y,"renderActiveDot",function(v,j,E){var C;return g.isValidElement(v)?C=g.cloneElement(v,j):Gt(v)?C=v(j):C=Y.createElement(wg,j),Y.createElement(cr,{className:"recharts-active-dot",key:E},C)});var N=g.forwardRef(function(j,E){return Y.createElement(y,dm({},j,{ref:E}))});return N.displayName=y.displayName,N},M1=Ag({chartName:"LineChart",GraphicalChild:$a,axisComponents:[{axisType:"xAxis",AxisComp:Vn},{axisType:"yAxis",AxisComp:Hn}],formatAxisMap:k1}),Hu=Ag({chartName:"BarChart",GraphicalChild:Xa,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Vn},{axisType:"yAxis",AxisComp:Hn}],formatAxisMap:k1}),OG=Ag({chartName:"PieChart",GraphicalChild:Ll,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:C1},{axisType:"radiusAxis",AxisComp:E1}],formatAxisMap:rue,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),AE,n6;function Hbe(){if(n6)return AE;n6=1;function e(t,r){for(var a=-1,s=t==null?0:t.length;++a<s&&r(t[a],a,t)!==!1;);return t}return AE=e,AE}var CE,a6;function kG(){if(a6)return CE;a6=1;var e=Mk(),t=Xv(),r=Object.prototype,a=r.hasOwnProperty;function s(i,o,l){var d=i[o];(!(a.call(i,o)&&t(d,l))||l===void 0&&!(o in i))&&e(i,o,l)}return CE=s,CE}var _E,s6;function Cg(){if(s6)return _E;s6=1;var e=kG(),t=Mk();function r(a,s,i,o){var l=!i;i||(i={});for(var d=-1,u=s.length;++d<u;){var p=s[d],m=o?o(i[p],a[p],p,i,a):void 0;m===void 0&&(m=a[p]),l?t(i,p,m):e(i,p,m)}return i}return _E=r,_E}var TE,i6;function Gbe(){if(i6)return TE;i6=1;var e=Cg(),t=Rp();function r(a,s){return a&&e(s,t(s),a)}return TE=r,TE}var OE,o6;function Kbe(){if(o6)return OE;o6=1;function e(t){var r=[];if(t!=null)for(var a in Object(t))r.push(a);return r}return OE=e,OE}var kE,l6;function zbe(){if(l6)return kE;l6=1;var e=Ho(),t=rk(),r=Kbe(),a=Object.prototype,s=a.hasOwnProperty;function i(o){if(!e(o))return r(o);var l=t(o),d=[];for(var u in o)u=="constructor"&&(l||!s.call(o,u))||d.push(u);return d}return kE=i,kE}var RE,c6;function zk(){if(c6)return RE;c6=1;var e=PU(),t=zbe(),r=kp();function a(s){return r(s)?e(s,!0):t(s)}return RE=a,RE}var PE,d6;function qbe(){if(d6)return PE;d6=1;var e=Cg(),t=zk();function r(a,s){return a&&e(s,t(s),a)}return PE=r,PE}var Yh={exports:{}};Yh.exports;var u6;function Wbe(){return u6||(u6=1,(function(e,t){var r=Bo(),a=t&&!t.nodeType&&t,s=a&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===a,o=i?r.Buffer:void 0,l=o?o.allocUnsafe:void 0;function d(u,p){if(p)return u.slice();var m=u.length,h=l?l(m):new u.constructor(m);return u.copy(h),h}e.exports=d})(Yh,Yh.exports)),Yh.exports}var DE,f6;function Vbe(){if(f6)return DE;f6=1;function e(t,r){var a=-1,s=t.length;for(r||(r=Array(s));++a<s;)r[a]=t[a];return r}return DE=e,DE}var IE,m6;function Ybe(){if(m6)return IE;m6=1;var e=Cg(),t=XO();function r(a,s){return e(a,t(a),s)}return IE=r,IE}var ME,p6;function RG(){if(p6)return ME;p6=1;var e=YO(),t=Ik(),r=XO(),a=kU(),s=Object.getOwnPropertySymbols,i=s?function(o){for(var l=[];o;)e(l,r(o)),o=t(o);return l}:a;return ME=i,ME}var LE,h6;function Xbe(){if(h6)return LE;h6=1;var e=Cg(),t=RG();function r(a,s){return e(a,t(a),s)}return LE=r,LE}var $E,g6;function PG(){if(g6)return $E;g6=1;var e=OU(),t=RG(),r=zk();function a(s){return e(s,r,t)}return $E=a,$E}var FE,x6;function Qbe(){if(x6)return FE;x6=1;var e=Object.prototype,t=e.hasOwnProperty;function r(a){var s=a.length,i=new a.constructor(s);return s&&typeof a[0]=="string"&&t.call(a,"index")&&(i.index=a.index,i.input=a.input),i}return FE=r,FE}var BE,b6;function qk(){if(b6)return BE;b6=1;var e=TU();function t(r){var a=new r.constructor(r.byteLength);return new e(a).set(new e(r)),a}return BE=t,BE}var UE,y6;function Zbe(){if(y6)return UE;y6=1;var e=qk();function t(r,a){var s=a?e(r.buffer):r.buffer;return new r.constructor(s,r.byteOffset,r.byteLength)}return UE=t,UE}var HE,v6;function Jbe(){if(v6)return HE;v6=1;var e=/\w*$/;function t(r){var a=new r.constructor(r.source,e.exec(r));return a.lastIndex=r.lastIndex,a}return HE=t,HE}var GE,N6;function eye(){if(N6)return GE;N6=1;var e=_p(),t=e?e.prototype:void 0,r=t?t.valueOf:void 0;function a(s){return r?Object(r.call(s)):{}}return GE=a,GE}var KE,S6;function tye(){if(S6)return KE;S6=1;var e=qk();function t(r,a){var s=a?e(r.buffer):r.buffer;return new r.constructor(s,r.byteOffset,r.length)}return KE=t,KE}var zE,j6;function rye(){if(j6)return zE;j6=1;var e=qk(),t=Zbe(),r=Jbe(),a=eye(),s=tye(),i="[object Boolean]",o="[object Date]",l="[object Map]",d="[object Number]",u="[object RegExp]",p="[object Set]",m="[object String]",h="[object Symbol]",x="[object ArrayBuffer]",y="[object DataView]",N="[object Float32Array]",v="[object Float64Array]",j="[object Int8Array]",E="[object Int16Array]",C="[object Int32Array]",A="[object Uint8Array]",S="[object Uint8ClampedArray]",_="[object Uint16Array]",O="[object Uint32Array]";function D(k,M,F){var $=k.constructor;switch(M){case x:return e(k);case i:case o:return new $(+k);case y:return t(k,F);case N:case v:case j:case E:case C:case A:case S:case _:case O:return s(k,F);case l:return new $;case d:case m:return new $(k);case u:return r(k);case p:return new $;case h:return a(k)}}return zE=D,zE}var qE,w6;function nye(){if(w6)return qE;w6=1;var e=Ho(),t=Object.create,r=(function(){function a(){}return function(s){if(!e(s))return{};if(t)return t(s);a.prototype=s;var i=new a;return a.prototype=void 0,i}})();return qE=r,qE}var WE,E6;function aye(){if(E6)return WE;E6=1;var e=nye(),t=Ik(),r=rk();function a(s){return typeof s.constructor=="function"&&!r(s)?e(t(s)):{}}return WE=a,WE}var VE,A6;function sye(){if(A6)return VE;A6=1;var e=d1(),t=Uo(),r="[object Map]";function a(s){return t(s)&&e(s)==r}return VE=a,VE}var YE,C6;function iye(){if(C6)return YE;C6=1;var e=sye(),t=c1(),r=tk(),a=r&&r.isMap,s=a?t(a):e;return YE=s,YE}var XE,_6;function oye(){if(_6)return XE;_6=1;var e=d1(),t=Uo(),r="[object Set]";function a(s){return t(s)&&e(s)==r}return XE=a,XE}var QE,T6;function lye(){if(T6)return QE;T6=1;var e=oye(),t=c1(),r=tk(),a=r&&r.isSet,s=a?t(a):e;return QE=s,QE}var ZE,O6;function cye(){if(O6)return ZE;O6=1;var e=WO(),t=Hbe(),r=kG(),a=Gbe(),s=qbe(),i=Wbe(),o=Vbe(),l=Ybe(),d=Xbe(),u=IU(),p=PG(),m=d1(),h=Qbe(),x=rye(),y=aye(),N=Ms(),v=ZO(),j=iye(),E=Ho(),C=lye(),A=Rp(),S=zk(),_=1,O=2,D=4,k="[object Arguments]",M="[object Array]",F="[object Boolean]",$="[object Date]",B="[object Error]",P="[object Function]",W="[object GeneratorFunction]",K="[object Map]",G="[object Number]",U="[object Object]",te="[object RegExp]",re="[object Set]",q="[object String]",L="[object Symbol]",H="[object WeakMap]",ae="[object ArrayBuffer]",oe="[object DataView]",ve="[object Float32Array]",ce="[object Float64Array]",Ee="[object Int8Array]",xe="[object Int16Array]",Te="[object Int32Array]",ye="[object Uint8Array]",se="[object Uint8ClampedArray]",ct="[object Uint16Array]",Q="[object Uint32Array]",he={};he[k]=he[M]=he[ae]=he[oe]=he[F]=he[$]=he[ve]=he[ce]=he[Ee]=he[xe]=he[Te]=he[K]=he[G]=he[U]=he[te]=he[re]=he[q]=he[L]=he[ye]=he[se]=he[ct]=he[Q]=!0,he[B]=he[P]=he[H]=!1;function $e(Z,je,ge,be,it,Fe){var Et,Mt=je&_,Be=je&O,tr=je&D;if(ge&&(Et=it?ge(Z,be,it,Fe):ge(Z)),Et!==void 0)return Et;if(!E(Z))return Z;var br=N(Z);if(br){if(Et=h(Z),!Mt)return o(Z,Et)}else{var Er=m(Z),yr=Er==P||Er==W;if(v(Z))return i(Z,Mt);if(Er==U||Er==k||yr&&!it){if(Et=Be||yr?{}:y(Z),!Mt)return Be?d(Z,s(Et,Z)):l(Z,a(Et,Z))}else{if(!he[Er])return it?Z:{};Et=x(Z,Er,Mt)}}Fe||(Fe=new e);var Rr=Fe.get(Z);if(Rr)return Rr;Fe.set(Z,Et),C(Z)?Z.forEach(function(hr){Et.add($e(hr,je,ge,hr,Z,Fe))}):j(Z)&&Z.forEach(function(hr,Tr){Et.set(Tr,$e(hr,je,ge,Tr,Z,Fe))});var zr=tr?Be?p:u:Be?S:A,pr=br?void 0:zr(Z);return t(pr||Z,function(hr,Tr){pr&&(Tr=hr,hr=Z[Tr]),r(Et,Tr,$e(hr,je,ge,Tr,Z,Fe))}),Et}return ZE=$e,ZE}var JE,k6;function dye(){if(k6)return JE;k6=1;var e=r1(),t=aU();function r(a,s){return s.length<2?a:e(a,t(s,0,-1))}return JE=r,JE}var eA,R6;function uye(){if(R6)return eA;R6=1;var e=t1(),t=pH(),r=dye(),a=yg(),s=Object.prototype,i=s.hasOwnProperty;function o(l,d){d=e(d,l);var u=-1,p=d.length;if(!p)return!0;for(var m=l==null||typeof l!="object"&&typeof l!="function";++u<p;){var h=d[u];if(typeof h=="string"){if(h==="__proto__"&&!i.call(l,"__proto__"))return!1;if(h==="constructor"&&u+1<p&&typeof d[u+1]=="string"&&d[u+1]==="prototype"){if(m&&u===0)continue;return!1}}}var x=r(l,d);return x==null||delete x[a(t(d))]}return eA=o,eA}var tA,P6;function fye(){if(P6)return tA;P6=1;var e=TH();function t(r){return e(r)?void 0:r}return tA=t,tA}var rA,D6;function mye(){if(D6)return rA;D6=1;var e=ak();function t(r){var a=r==null?0:r.length;return a?e(r,1):[]}return rA=t,rA}var nA,I6;function pye(){if(I6)return nA;I6=1;var e=mye(),t=zU(),r=WU();function a(s){return r(t(s,void 0,e),s+"")}return nA=a,nA}var aA,M6;function hye(){if(M6)return aA;M6=1;var e=e1(),t=cye(),r=uye(),a=t1(),s=Cg(),i=fye(),o=pye(),l=PG(),d=1,u=2,p=4,m=o(function(h,x){var y={};if(h==null)return y;var N=!1;x=e(x,function(j){return j=a(j,h),N||(N=j.length>1),j}),s(h,l(h),y),N&&(y=t(y,d|u|p,i));for(var v=x.length;v--;)r(y,x[v]);return y});return aA=m,aA}var gye=hye();const xye=Vr(gye);var bye=["#1890FF","#66B5FF","#41D9C7","#2FC25B","#6EDB8F","#9AE65C","#FACC14","#E6965C","#57AD71","#223273","#738AE6","#7564CC","#8543E0","#A877ED","#5C8EE6","#13C2C2","#70E0E0","#5CA3E6","#3436C7","#8082FF","#DD81E6","#F04864","#FA7D92","#D598D9"],yye=["width","height","className","style","children","type"];function mp(e){"@babel/helpers - typeof";return mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mp(e)}function uv(){return uv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},uv.apply(this,arguments)}function vye(e,t){if(e==null)return{};var r=Nye(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Nye(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Sye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L6(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,IG(a.key),a)}}function jye(e,t,r){return t&&L6(e.prototype,t),r&&L6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function wye(e,t,r){return t=fv(t),Eye(e,DG()?Reflect.construct(t,r||[],fv(e).constructor):t.apply(e,r))}function Eye(e,t){if(t&&(mp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Aye(e)}function Aye(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DG=function(){return!!e})()}function fv(e){return fv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},fv(e)}function Cye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lT(e,t)}function lT(e,t){return lT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},lT(e,t)}function $6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function hn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$6(Object(r),!0).forEach(function(a){wc(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function wc(e,t,r){return t=IG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IG(e){var t=_ye(e,"string");return mp(t)=="symbol"?t:t+""}function _ye(e,t){if(mp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(mp(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ig="value",sA=function e(t){var r=t.depth,a=t.node,s=t.index,i=t.valueKey,o=a.children,l=r+1,d=o&&o.length?o.map(function(p,m){return e({depth:l,node:p,index:m,valueKey:i})}):null,u;return o&&o.length?u=d.reduce(function(p,m){return p+m[ig]},0):u=Wd(a[i])||a[i]<=0?0:a[i],hn(hn({},a),{},wc(wc(wc({children:d},ig,u),"depth",r),"index",s))},Tye=function(t){return{x:t.x,y:t.y,width:t.width,height:t.height}},Oye=function(t,r){var a=r<0?0:r;return t.map(function(s){var i=s[ig]*a;return hn(hn({},s),{},{area:Wd(i)||i<=0?0:i})})},kye=function(t,r,a){var s=r*r,i=t.area*t.area,o=t.reduce(function(u,p){return{min:Math.min(u.min,p.area),max:Math.max(u.max,p.area)}},{min:1/0,max:0}),l=o.min,d=o.max;return i?Math.max(s*d*a/i,i/(s*l*a)):1/0},Rye=function(t,r,a,s){var i=r?Math.round(t.area/r):0;(s||i>a.height)&&(i=a.height);for(var o=a.x,l,d=0,u=t.length;d<u;d++)l=t[d],l.x=o,l.y=a.y,l.height=i,l.width=Math.min(i?Math.round(l.area/i):0,a.x+a.width-o),o+=l.width;return l.width+=a.x+a.width-o,hn(hn({},a),{},{y:a.y+i,height:a.height-i})},Pye=function(t,r,a,s){var i=r?Math.round(t.area/r):0;(s||i>a.width)&&(i=a.width);for(var o=a.y,l,d=0,u=t.length;d<u;d++)l=t[d],l.x=a.x,l.y=o,l.width=i,l.height=Math.min(i?Math.round(l.area/i):0,a.y+a.height-o),o+=l.height;return l&&(l.height+=a.y+a.height-o),hn(hn({},a),{},{x:a.x+i,width:a.width-i})},F6=function(t,r,a,s){return r===a.width?Rye(t,r,a,s):Pye(t,r,a,s)},iA=function e(t,r){var a=t.children;if(a&&a.length){var s=Tye(t),i=[],o=1/0,l,d,u=Math.min(s.width,s.height),p=Oye(a,s.width*s.height/t[ig]),m=p.slice();for(i.area=0;m.length>0;)i.push(l=m[0]),i.area+=l.area,d=kye(i,u,r),d<=o?(m.shift(),o=d):(i.area-=i.pop().area,s=F6(i,u,s,!1),u=Math.min(s.width,s.height),i.length=i.area=0,o=1/0);return i.length&&(s=F6(i,u,s,!0),i.length=i.area=0),hn(hn({},t),{},{children:p.map(function(h){return e(h,r)})})}return t},Dye={isTooltipActive:!1,isAnimationFinished:!1,activeNode:null,formatRoot:null,currentRoot:null,nestIndex:[]},mv=(function(e){function t(){var r;Sye(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=wye(this,t,[].concat(s)),wc(r,"state",hn({},Dye)),wc(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Gt(o)&&o()}),wc(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Gt(o)&&o()}),r}return Cye(t,e),jye(t,[{key:"handleMouseEnter",value:function(a,s){s.persist();var i=this.props,o=i.onMouseEnter,l=i.children,d=us(l,en);d?this.setState({isTooltipActive:!0,activeNode:a},function(){o&&o(a,s)}):o&&o(a,s)}},{key:"handleMouseLeave",value:function(a,s){s.persist();var i=this.props,o=i.onMouseLeave,l=i.children,d=us(l,en);d?this.setState({isTooltipActive:!1,activeNode:null},function(){o&&o(a,s)}):o&&o(a,s)}},{key:"handleClick",value:function(a){var s=this.props,i=s.onClick,o=s.type;if(o==="nest"&&a.children){var l=this.props,d=l.width,u=l.height,p=l.dataKey,m=l.aspectRatio,h=sA({depth:0,node:hn(hn({},a),{},{x:0,y:0,width:d,height:u}),index:0,valueKey:p}),x=iA(h,m),y=this.state.nestIndex;y.push(a),this.setState({formatRoot:x,currentRoot:h,nestIndex:y})}i&&i(a)}},{key:"handleNestIndex",value:function(a,s){var i=this.state.nestIndex,o=this.props,l=o.width,d=o.height,u=o.dataKey,p=o.aspectRatio,m=sA({depth:0,node:hn(hn({},a),{},{x:0,y:0,width:l,height:d}),index:0,valueKey:u}),h=iA(m,p);i=i.slice(0,s+1),this.setState({formatRoot:h,currentRoot:a,nestIndex:i})}},{key:"renderItem",value:function(a,s,i){var o=this,l=this.props,d=l.isAnimationActive,u=l.animationBegin,p=l.animationDuration,m=l.animationEasing,h=l.isUpdateAnimationActive,x=l.type,y=l.animationId,N=l.colorPanel,v=this.state.isAnimationFinished,j=s.width,E=s.height,C=s.x,A=s.y,S=s.depth,_=parseInt("".concat((Math.random()*2-1)*j),10),O={};return(i||x==="nest")&&(O={onMouseEnter:this.handleMouseEnter.bind(this,s),onMouseLeave:this.handleMouseLeave.bind(this,s),onClick:this.handleClick.bind(this,s)}),d?Y.createElement(ti,{begin:u,duration:p,isActive:d,easing:m,key:"treemap-".concat(y),from:{x:C,y:A,width:j,height:E},to:{x:C,y:A,width:j,height:E},onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(D){var k=D.x,M=D.y,F=D.width,$=D.height;return Y.createElement(ti,{from:"translate(".concat(_,"px, ").concat(_,"px)"),to:"translate(0, 0)",attributeName:"transform",begin:u,easing:m,isActive:d,duration:p},Y.createElement(cr,O,(function(){return S>2&&!v?null:o.constructor.renderContentItem(a,hn(hn({},s),{},{isAnimationActive:d,isUpdateAnimationActive:!h,width:F,height:$,x:k,y:M}),x,N)})()))}):Y.createElement(cr,O,this.constructor.renderContentItem(a,hn(hn({},s),{},{isAnimationActive:!1,isUpdateAnimationActive:!1,width:j,height:E,x:C,y:A}),x,N))}},{key:"renderNode",value:function(a,s){var i=this,o=this.props,l=o.content,d=o.type,u=hn(hn(hn({},Rt(this.props,!1)),s),{},{root:a}),p=!s.children||!s.children.length,m=this.state.currentRoot,h=(m.children||[]).filter(function(x){return x.depth===s.depth&&x.name===s.name});return!h.length&&a.depth&&d==="nest"?null:Y.createElement(cr,{key:"recharts-treemap-node-".concat(u.x,"-").concat(u.y,"-").concat(u.name),className:"recharts-treemap-depth-".concat(s.depth)},this.renderItem(l,u,p),s.children&&s.children.length?s.children.map(function(x){return i.renderNode(s,x)}):null)}},{key:"renderAllNodes",value:function(){var a=this.state.formatRoot;return a?this.renderNode(a,a):null}},{key:"renderTooltip",value:function(){var a=this.props,s=a.children,i=a.nameKey,o=us(s,en);if(!o)return null;var l=this.props,d=l.width,u=l.height,p=this.state,m=p.isTooltipActive,h=p.activeNode,x={x:0,y:0,width:d,height:u},y=h?{x:h.x+h.width/2,y:h.y+h.height/2}:null,N=m&&h?[{payload:h,name:dn(h,i,""),value:dn(h,ig)}]:[];return Y.cloneElement(o,{viewBox:x,active:m,coordinate:y,label:"",payload:N})}},{key:"renderNestIndex",value:function(){var a=this,s=this.props,i=s.nameKey,o=s.nestIndexContent,l=this.state.nestIndex;return Y.createElement("div",{className:"recharts-treemap-nest-index-wrapper",style:{marginTop:"8px",textAlign:"center"}},l.map(function(d,u){var p=Js(d,i,"root"),m=null;return Y.isValidElement(o)&&(m=Y.cloneElement(o,d,u)),Gt(o)?m=o(d,u):m=p,Y.createElement("div",{onClick:a.handleNestIndex.bind(a,d,u),key:"nest-index-".concat(Lc()),className:"recharts-treemap-nest-index-box",style:{cursor:"pointer",display:"inline-block",padding:"0 7px",background:"#000",color:"#fff",marginRight:"3px"}},m)}))}},{key:"render",value:function(){if(!BC(this))return null;var a=this.props,s=a.width,i=a.height,o=a.className,l=a.style,d=a.children,u=a.type,p=vye(a,yye),m=Rt(p,!1);return Y.createElement("div",{className:ar("recharts-wrapper",o),style:hn(hn({},l),{},{position:"relative",cursor:"default",width:s,height:i}),role:"region"},Y.createElement(ly,uv({},m,{width:s,height:u==="nest"?i-30:i}),this.renderAllNodes(),Ire(d)),this.renderTooltip(),u==="nest"&&this.renderNestIndex())}}],[{key:"getDerivedStateFromProps",value:function(a,s){if(a.data!==s.prevData||a.type!==s.prevType||a.width!==s.prevWidth||a.height!==s.prevHeight||a.dataKey!==s.prevDataKey||a.aspectRatio!==s.prevAspectRatio){var i=sA({depth:0,node:{children:a.data,x:0,y:0,width:a.width,height:a.height},index:0,valueKey:a.dataKey}),o=iA(i,a.aspectRatio);return hn(hn({},s),{},{formatRoot:o,currentRoot:i,nestIndex:[i],prevAspectRatio:a.aspectRatio,prevData:a.data,prevWidth:a.width,prevHeight:a.height,prevDataKey:a.dataKey,prevType:a.type})}return null}},{key:"renderContentItem",value:function(a,s,i,o){if(Y.isValidElement(a))return Y.cloneElement(a,s);if(Gt(a))return a(s);var l=s.x,d=s.y,u=s.width,p=s.height,m=s.index,h=null;u>10&&p>10&&s.children&&i==="nest"&&(h=Y.createElement(wH,{points:[{x:l+2,y:d+p/2},{x:l+6,y:d+p/2+3},{x:l+2,y:d+p/2+6}]}));var x=null,y=vm(s.name);u>20&&p>20&&y.width<u&&y.height<p&&(x=Y.createElement("text",{x:l+8,y:d+p/2+7,fontSize:14},s.name));var N=o||bye;return Y.createElement("g",null,Y.createElement(j1,uv({fill:s.depth<2?N[m%N.length]:"rgba(255,255,255,0)",stroke:"#fff"},xye(s,"children"),{role:"img"})),h,x)}}])})(g.PureComponent);wc(mv,"displayName","Treemap");wc(mv,"defaultProps",{aspectRatio:.5*(1+Math.sqrt(5)),dataKey:"value",type:"flat",isAnimationActive:!Mo.isSsr,isUpdateAnimationActive:!Mo.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"linear"});var Iye=Ag({chartName:"ScatterChart",GraphicalChild:Bp,defaultTooltipEventType:"item",validateTooltipEventTypes:["item"],axisComponents:[{axisType:"xAxis",AxisComp:Vn},{axisType:"yAxis",AxisComp:Hn},{axisType:"zAxis",AxisComp:Fp}],formatAxisMap:k1}),Wk=Ag({chartName:"ComposedChart",GraphicalChild:[$a,$l,Xa,Bp],axisComponents:[{axisType:"xAxis",AxisComp:Vn},{axisType:"yAxis",AxisComp:Hn},{axisType:"zAxis",AxisComp:Fp}],formatAxisMap:k1}),Mye={value:()=>{}};function Vk(){for(var e=0,t=arguments.length,r={},a;e<t;++e){if(!(a=arguments[e]+"")||a in r||/[\s.]/.test(a))throw new Error("illegal type: "+a);r[a]=[]}return new Pb(r)}function Pb(e){this._=e}function Lye(e,t){return e.trim().split(/^|\s+/).map(function(r){var a="",s=r.indexOf(".");if(s>=0&&(a=r.slice(s+1),r=r.slice(0,s)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:a}})}Pb.prototype=Vk.prototype={constructor:Pb,on:function(e,t){var r=this._,a=Lye(e+"",r),s,i=-1,o=a.length;if(arguments.length<2){for(;++i<o;)if((s=(e=a[i]).type)&&(s=$ye(r[s],e.name)))return s;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<o;)if(s=(e=a[i]).type)r[s]=B6(r[s],e.name,t);else if(t==null)for(s in r)r[s]=B6(r[s],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new Pb(e)},call:function(e,t){if((s=arguments.length-2)>0)for(var r=new Array(s),a=0,s,i;a<s;++a)r[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],a=0,s=i.length;a<s;++a)i[a].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var a=this._[e],s=0,i=a.length;s<i;++s)a[s].value.apply(t,r)}};function $ye(e,t){for(var r=0,a=e.length,s;r<a;++r)if((s=e[r]).name===t)return s.value}function B6(e,t,r){for(var a=0,s=e.length;a<s;++a)if(e[a].name===t){e[a]=Mye,e=e.slice(0,a).concat(e.slice(a+1));break}return r!=null&&e.push({name:t,value:r}),e}var cT="http://www.w3.org/1999/xhtml";const U6={svg:"http://www.w3.org/2000/svg",xhtml:cT,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function L1(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),U6.hasOwnProperty(t)?{space:U6[t],local:e}:e}function Fye(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===cT&&t.documentElement.namespaceURI===cT?t.createElement(e):t.createElementNS(r,e)}}function Bye(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function MG(e){var t=L1(e);return(t.local?Bye:Fye)(t)}function Uye(){}function Yk(e){return e==null?Uye:function(){return this.querySelector(e)}}function Hye(e){typeof e!="function"&&(e=Yk(e));for(var t=this._groups,r=t.length,a=new Array(r),s=0;s<r;++s)for(var i=t[s],o=i.length,l=a[s]=new Array(o),d,u,p=0;p<o;++p)(d=i[p])&&(u=e.call(d,d.__data__,p,i))&&("__data__"in d&&(u.__data__=d.__data__),l[p]=u);return new Si(a,this._parents)}function Gye(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Kye(){return[]}function LG(e){return e==null?Kye:function(){return this.querySelectorAll(e)}}function zye(e){return function(){return Gye(e.apply(this,arguments))}}function qye(e){typeof e=="function"?e=zye(e):e=LG(e);for(var t=this._groups,r=t.length,a=[],s=[],i=0;i<r;++i)for(var o=t[i],l=o.length,d,u=0;u<l;++u)(d=o[u])&&(a.push(e.call(d,d.__data__,u,o)),s.push(d));return new Si(a,s)}function $G(e){return function(){return this.matches(e)}}function FG(e){return function(t){return t.matches(e)}}var Wye=Array.prototype.find;function Vye(e){return function(){return Wye.call(this.children,e)}}function Yye(){return this.firstElementChild}function Xye(e){return this.select(e==null?Yye:Vye(typeof e=="function"?e:FG(e)))}var Qye=Array.prototype.filter;function Zye(){return Array.from(this.children)}function Jye(e){return function(){return Qye.call(this.children,e)}}function eve(e){return this.selectAll(e==null?Zye:Jye(typeof e=="function"?e:FG(e)))}function tve(e){typeof e!="function"&&(e=$G(e));for(var t=this._groups,r=t.length,a=new Array(r),s=0;s<r;++s)for(var i=t[s],o=i.length,l=a[s]=[],d,u=0;u<o;++u)(d=i[u])&&e.call(d,d.__data__,u,i)&&l.push(d);return new Si(a,this._parents)}function BG(e){return new Array(e.length)}function rve(){return new Si(this._enter||this._groups.map(BG),this._parents)}function pv(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}pv.prototype={constructor:pv,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function nve(e){return function(){return e}}function ave(e,t,r,a,s,i){for(var o=0,l,d=t.length,u=i.length;o<u;++o)(l=t[o])?(l.__data__=i[o],a[o]=l):r[o]=new pv(e,i[o]);for(;o<d;++o)(l=t[o])&&(s[o]=l)}function sve(e,t,r,a,s,i,o){var l,d,u=new Map,p=t.length,m=i.length,h=new Array(p),x;for(l=0;l<p;++l)(d=t[l])&&(h[l]=x=o.call(d,d.__data__,l,t)+"",u.has(x)?s[l]=d:u.set(x,d));for(l=0;l<m;++l)x=o.call(e,i[l],l,i)+"",(d=u.get(x))?(a[l]=d,d.__data__=i[l],u.delete(x)):r[l]=new pv(e,i[l]);for(l=0;l<p;++l)(d=t[l])&&u.get(h[l])===d&&(s[l]=d)}function ive(e){return e.__data__}function ove(e,t){if(!arguments.length)return Array.from(this,ive);var r=t?sve:ave,a=this._parents,s=this._groups;typeof e!="function"&&(e=nve(e));for(var i=s.length,o=new Array(i),l=new Array(i),d=new Array(i),u=0;u<i;++u){var p=a[u],m=s[u],h=m.length,x=lve(e.call(p,p&&p.__data__,u,a)),y=x.length,N=l[u]=new Array(y),v=o[u]=new Array(y),j=d[u]=new Array(h);r(p,m,N,v,j,x,t);for(var E=0,C=0,A,S;E<y;++E)if(A=N[E]){for(E>=C&&(C=E+1);!(S=v[C])&&++C<y;);A._next=S||null}}return o=new Si(o,a),o._enter=l,o._exit=d,o}function lve(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function cve(){return new Si(this._exit||this._groups.map(BG),this._parents)}function dve(e,t,r){var a=this.enter(),s=this,i=this.exit();return typeof e=="function"?(a=e(a),a&&(a=a.selection())):a=a.append(e+""),t!=null&&(s=t(s),s&&(s=s.selection())),r==null?i.remove():r(i),a&&s?a.merge(s).order():s}function uve(e){for(var t=e.selection?e.selection():e,r=this._groups,a=t._groups,s=r.length,i=a.length,o=Math.min(s,i),l=new Array(s),d=0;d<o;++d)for(var u=r[d],p=a[d],m=u.length,h=l[d]=new Array(m),x,y=0;y<m;++y)(x=u[y]||p[y])&&(h[y]=x);for(;d<s;++d)l[d]=r[d];return new Si(l,this._parents)}function fve(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var a=e[t],s=a.length-1,i=a[s],o;--s>=0;)(o=a[s])&&(i&&o.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(o,i),i=o);return this}function mve(e){e||(e=pve);function t(m,h){return m&&h?e(m.__data__,h.__data__):!m-!h}for(var r=this._groups,a=r.length,s=new Array(a),i=0;i<a;++i){for(var o=r[i],l=o.length,d=s[i]=new Array(l),u,p=0;p<l;++p)(u=o[p])&&(d[p]=u);d.sort(t)}return new Si(s,this._parents).order()}function pve(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function hve(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function gve(){return Array.from(this)}function xve(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var a=e[t],s=0,i=a.length;s<i;++s){var o=a[s];if(o)return o}return null}function bve(){let e=0;for(const t of this)++e;return e}function yve(){return!this.node()}function vve(e){for(var t=this._groups,r=0,a=t.length;r<a;++r)for(var s=t[r],i=0,o=s.length,l;i<o;++i)(l=s[i])&&e.call(l,l.__data__,i,s);return this}function Nve(e){return function(){this.removeAttribute(e)}}function Sve(e){return function(){this.removeAttributeNS(e.space,e.local)}}function jve(e,t){return function(){this.setAttribute(e,t)}}function wve(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Eve(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function Ave(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function Cve(e,t){var r=L1(e);if(arguments.length<2){var a=this.node();return r.local?a.getAttributeNS(r.space,r.local):a.getAttribute(r)}return this.each((t==null?r.local?Sve:Nve:typeof t=="function"?r.local?Ave:Eve:r.local?wve:jve)(r,t))}function UG(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function _ve(e){return function(){this.style.removeProperty(e)}}function Tve(e,t,r){return function(){this.style.setProperty(e,t,r)}}function Ove(e,t,r){return function(){var a=t.apply(this,arguments);a==null?this.style.removeProperty(e):this.style.setProperty(e,a,r)}}function kve(e,t,r){return arguments.length>1?this.each((t==null?_ve:typeof t=="function"?Ove:Tve)(e,t,r??"")):pp(this.node(),e)}function pp(e,t){return e.style.getPropertyValue(t)||UG(e).getComputedStyle(e,null).getPropertyValue(t)}function Rve(e){return function(){delete this[e]}}function Pve(e,t){return function(){this[e]=t}}function Dve(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function Ive(e,t){return arguments.length>1?this.each((t==null?Rve:typeof t=="function"?Dve:Pve)(e,t)):this.node()[e]}function HG(e){return e.trim().split(/^|\s+/)}function Xk(e){return e.classList||new GG(e)}function GG(e){this._node=e,this._names=HG(e.getAttribute("class")||"")}GG.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function KG(e,t){for(var r=Xk(e),a=-1,s=t.length;++a<s;)r.add(t[a])}function zG(e,t){for(var r=Xk(e),a=-1,s=t.length;++a<s;)r.remove(t[a])}function Mve(e){return function(){KG(this,e)}}function Lve(e){return function(){zG(this,e)}}function $ve(e,t){return function(){(t.apply(this,arguments)?KG:zG)(this,e)}}function Fve(e,t){var r=HG(e+"");if(arguments.length<2){for(var a=Xk(this.node()),s=-1,i=r.length;++s<i;)if(!a.contains(r[s]))return!1;return!0}return this.each((typeof t=="function"?$ve:t?Mve:Lve)(r,t))}function Bve(){this.textContent=""}function Uve(e){return function(){this.textContent=e}}function Hve(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Gve(e){return arguments.length?this.each(e==null?Bve:(typeof e=="function"?Hve:Uve)(e)):this.node().textContent}function Kve(){this.innerHTML=""}function zve(e){return function(){this.innerHTML=e}}function qve(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Wve(e){return arguments.length?this.each(e==null?Kve:(typeof e=="function"?qve:zve)(e)):this.node().innerHTML}function Vve(){this.nextSibling&&this.parentNode.appendChild(this)}function Yve(){return this.each(Vve)}function Xve(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Qve(){return this.each(Xve)}function Zve(e){var t=typeof e=="function"?e:MG(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Jve(){return null}function e1e(e,t){var r=typeof e=="function"?e:MG(e),a=t==null?Jve:typeof t=="function"?t:Yk(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),a.apply(this,arguments)||null)})}function t1e(){var e=this.parentNode;e&&e.removeChild(this)}function r1e(){return this.each(t1e)}function n1e(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function a1e(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function s1e(e){return this.select(e?a1e:n1e)}function i1e(e){return arguments.length?this.property("__data__",e):this.node().__data__}function o1e(e){return function(t){e.call(this,t,this.__data__)}}function l1e(e){return e.trim().split(/^|\s+/).map(function(t){var r="",a=t.indexOf(".");return a>=0&&(r=t.slice(a+1),t=t.slice(0,a)),{type:t,name:r}})}function c1e(e){return function(){var t=this.__on;if(t){for(var r=0,a=-1,s=t.length,i;r<s;++r)i=t[r],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++a]=i;++a?t.length=a:delete this.__on}}}function d1e(e,t,r){return function(){var a=this.__on,s,i=o1e(t);if(a){for(var o=0,l=a.length;o<l;++o)if((s=a[o]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=i,s.options=r),s.value=t;return}}this.addEventListener(e.type,i,r),s={type:e.type,name:e.name,value:t,listener:i,options:r},a?a.push(s):this.__on=[s]}}function u1e(e,t,r){var a=l1e(e+""),s,i=a.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var d=0,u=l.length,p;d<u;++d)for(s=0,p=l[d];s<i;++s)if((o=a[s]).type===p.type&&o.name===p.name)return p.value}return}for(l=t?d1e:c1e,s=0;s<i;++s)this.each(l(a[s],t,r));return this}function qG(e,t,r){var a=UG(e),s=a.CustomEvent;typeof s=="function"?s=new s(t,r):(s=a.document.createEvent("Event"),r?(s.initEvent(t,r.bubbles,r.cancelable),s.detail=r.detail):s.initEvent(t,!1,!1)),e.dispatchEvent(s)}function f1e(e,t){return function(){return qG(this,e,t)}}function m1e(e,t){return function(){return qG(this,e,t.apply(this,arguments))}}function p1e(e,t){return this.each((typeof t=="function"?m1e:f1e)(e,t))}function*h1e(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var a=e[t],s=0,i=a.length,o;s<i;++s)(o=a[s])&&(yield o)}var WG=[null];function Si(e,t){this._groups=e,this._parents=t}function _g(){return new Si([[document.documentElement]],WG)}function g1e(){return this}Si.prototype=_g.prototype={constructor:Si,select:Hye,selectAll:qye,selectChild:Xye,selectChildren:eve,filter:tve,data:ove,enter:rve,exit:cve,join:dve,merge:uve,selection:g1e,order:fve,sort:mve,call:hve,nodes:gve,node:xve,size:bve,empty:yve,each:vve,attr:Cve,style:kve,property:Ive,classed:Fve,text:Gve,html:Wve,raise:Yve,lower:Qve,append:Zve,insert:e1e,remove:r1e,clone:s1e,datum:i1e,on:u1e,dispatch:p1e,[Symbol.iterator]:h1e};function pc(e){return typeof e=="string"?new Si([[document.querySelector(e)]],[document.documentElement]):new Si([[e]],WG)}function x1e(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Sd(e,t){if(e=x1e(e),t===void 0&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var a=r.createSVGPoint();return a.x=e.clientX,a.y=e.clientY,a=a.matrixTransform(t.getScreenCTM().inverse()),[a.x,a.y]}if(t.getBoundingClientRect){var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}}return[e.pageX,e.pageY]}const dT={capture:!0,passive:!1};function uT(e){e.preventDefault(),e.stopImmediatePropagation()}function b1e(e){var t=e.document.documentElement,r=pc(e).on("dragstart.drag",uT,dT);"onselectstart"in t?r.on("selectstart.drag",uT,dT):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function y1e(e,t){var r=e.document.documentElement,a=pc(e).on("dragstart.drag",null);t&&(a.on("click.drag",uT,dT),setTimeout(function(){a.on("click.drag",null)},0)),"onselectstart"in r?a.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}var hp=0,Xh=0,Oh=0,VG=1e3,hv,Qh,gv=0,af=0,$1=0,og=typeof performance=="object"&&performance.now?performance:Date,YG=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Qk(){return af||(YG(v1e),af=og.now()+$1)}function v1e(){af=0}function xv(){this._call=this._time=this._next=null}xv.prototype=XG.prototype={constructor:xv,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?Qk():+r)+(t==null?0:+t),!this._next&&Qh!==this&&(Qh?Qh._next=this:hv=this,Qh=this),this._call=e,this._time=r,fT()},stop:function(){this._call&&(this._call=null,this._time=1/0,fT())}};function XG(e,t,r){var a=new xv;return a.restart(e,t,r),a}function N1e(){Qk(),++hp;for(var e=hv,t;e;)(t=af-e._time)>=0&&e._call.call(void 0,t),e=e._next;--hp}function H6(){af=(gv=og.now())+$1,hp=Xh=0;try{N1e()}finally{hp=0,j1e(),af=0}}function S1e(){var e=og.now(),t=e-gv;t>VG&&($1-=t,gv=e)}function j1e(){for(var e,t=hv,r,a=1/0;t;)t._call?(a>t._time&&(a=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:hv=r);Qh=e,fT(a)}function fT(e){if(!hp){Xh&&(Xh=clearTimeout(Xh));var t=e-af;t>24?(e<1/0&&(Xh=setTimeout(H6,e-og.now()-$1)),Oh&&(Oh=clearInterval(Oh))):(Oh||(gv=og.now(),Oh=setInterval(S1e,VG)),hp=1,YG(H6))}}function G6(e,t,r){var a=new xv;return t=t==null?0:+t,a.restart(s=>{a.stop(),e(s+t)},t,r),a}var w1e=Vk("start","end","cancel","interrupt"),E1e=[],QG=0,K6=1,mT=2,Db=3,z6=4,pT=5,Ib=6;function F1(e,t,r,a,s,i){var o=e.__transition;if(!o)e.__transition={};else if(r in o)return;A1e(e,r,{name:t,index:a,group:s,on:w1e,tween:E1e,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:QG})}function Zk(e,t){var r=Ko(e,t);if(r.state>QG)throw new Error("too late; already scheduled");return r}function Fl(e,t){var r=Ko(e,t);if(r.state>Db)throw new Error("too late; already running");return r}function Ko(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function A1e(e,t,r){var a=e.__transition,s;a[t]=r,r.timer=XG(i,0,r.time);function i(u){r.state=K6,r.timer.restart(o,r.delay,r.time),r.delay<=u&&o(u-r.delay)}function o(u){var p,m,h,x;if(r.state!==K6)return d();for(p in a)if(x=a[p],x.name===r.name){if(x.state===Db)return G6(o);x.state===z6?(x.state=Ib,x.timer.stop(),x.on.call("interrupt",e,e.__data__,x.index,x.group),delete a[p]):+p<t&&(x.state=Ib,x.timer.stop(),x.on.call("cancel",e,e.__data__,x.index,x.group),delete a[p])}if(G6(function(){r.state===Db&&(r.state=z6,r.timer.restart(l,r.delay,r.time),l(u))}),r.state=mT,r.on.call("start",e,e.__data__,r.index,r.group),r.state===mT){for(r.state=Db,s=new Array(h=r.tween.length),p=0,m=-1;p<h;++p)(x=r.tween[p].value.call(e,e.__data__,r.index,r.group))&&(s[++m]=x);s.length=m+1}}function l(u){for(var p=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(d),r.state=pT,1),m=-1,h=s.length;++m<h;)s[m].call(e,p);r.state===pT&&(r.on.call("end",e,e.__data__,r.index,r.group),d())}function d(){r.state=Ib,r.timer.stop(),delete a[t];for(var u in a)return;delete e.__transition}}function Mb(e,t){var r=e.__transition,a,s,i=!0,o;if(r){t=t==null?null:t+"";for(o in r){if((a=r[o]).name!==t){i=!1;continue}s=a.state>mT&&a.state<pT,a.state=Ib,a.timer.stop(),a.on.call(s?"interrupt":"cancel",e,e.__data__,a.index,a.group),delete r[o]}i&&delete e.__transition}}function C1e(e){return this.each(function(){Mb(this,e)})}function _1e(e,t){var r,a;return function(){var s=Fl(this,e),i=s.tween;if(i!==r){a=r=i;for(var o=0,l=a.length;o<l;++o)if(a[o].name===t){a=a.slice(),a.splice(o,1);break}}s.tween=a}}function T1e(e,t,r){var a,s;if(typeof r!="function")throw new Error;return function(){var i=Fl(this,e),o=i.tween;if(o!==a){s=(a=o).slice();for(var l={name:t,value:r},d=0,u=s.length;d<u;++d)if(s[d].name===t){s[d]=l;break}d===u&&s.push(l)}i.tween=s}}function O1e(e,t){var r=this._id;if(e+="",arguments.length<2){for(var a=Ko(this.node(),r).tween,s=0,i=a.length,o;s<i;++s)if((o=a[s]).name===e)return o.value;return null}return this.each((t==null?_1e:T1e)(r,e,t))}function Jk(e,t,r){var a=e._id;return e.each(function(){var s=Fl(this,a);(s.value||(s.value={}))[t]=r.apply(this,arguments)}),function(s){return Ko(s,a).value[t]}}function ZG(e,t){var r;return(typeof t=="number"?To:t instanceof ef?jy:(r=ef(t))?(t=r,jy):u9)(e,t)}function k1e(e){return function(){this.removeAttribute(e)}}function R1e(e){return function(){this.removeAttributeNS(e.space,e.local)}}function P1e(e,t,r){var a,s=r+"",i;return function(){var o=this.getAttribute(e);return o===s?null:o===a?i:i=t(a=o,r)}}function D1e(e,t,r){var a,s=r+"",i;return function(){var o=this.getAttributeNS(e.space,e.local);return o===s?null:o===a?i:i=t(a=o,r)}}function I1e(e,t,r){var a,s,i;return function(){var o,l=r(this),d;return l==null?void this.removeAttribute(e):(o=this.getAttribute(e),d=l+"",o===d?null:o===a&&d===s?i:(s=d,i=t(a=o,l)))}}function M1e(e,t,r){var a,s,i;return function(){var o,l=r(this),d;return l==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),d=l+"",o===d?null:o===a&&d===s?i:(s=d,i=t(a=o,l)))}}function L1e(e,t){var r=L1(e),a=r==="transform"?Coe:ZG;return this.attrTween(e,typeof t=="function"?(r.local?M1e:I1e)(r,a,Jk(this,"attr."+e,t)):t==null?(r.local?R1e:k1e)(r):(r.local?D1e:P1e)(r,a,t))}function $1e(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function F1e(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function B1e(e,t){var r,a;function s(){var i=t.apply(this,arguments);return i!==a&&(r=(a=i)&&F1e(e,i)),r}return s._value=t,s}function U1e(e,t){var r,a;function s(){var i=t.apply(this,arguments);return i!==a&&(r=(a=i)&&$1e(e,i)),r}return s._value=t,s}function H1e(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var a=L1(e);return this.tween(r,(a.local?B1e:U1e)(a,t))}function G1e(e,t){return function(){Zk(this,e).delay=+t.apply(this,arguments)}}function K1e(e,t){return t=+t,function(){Zk(this,e).delay=t}}function z1e(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?G1e:K1e)(t,e)):Ko(this.node(),t).delay}function q1e(e,t){return function(){Fl(this,e).duration=+t.apply(this,arguments)}}function W1e(e,t){return t=+t,function(){Fl(this,e).duration=t}}function V1e(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?q1e:W1e)(t,e)):Ko(this.node(),t).duration}function Y1e(e,t){if(typeof t!="function")throw new Error;return function(){Fl(this,e).ease=t}}function X1e(e){var t=this._id;return arguments.length?this.each(Y1e(t,e)):Ko(this.node(),t).ease}function Q1e(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;Fl(this,e).ease=r}}function Z1e(e){if(typeof e!="function")throw new Error;return this.each(Q1e(this._id,e))}function J1e(e){typeof e!="function"&&(e=$G(e));for(var t=this._groups,r=t.length,a=new Array(r),s=0;s<r;++s)for(var i=t[s],o=i.length,l=a[s]=[],d,u=0;u<o;++u)(d=i[u])&&e.call(d,d.__data__,u,i)&&l.push(d);return new kc(a,this._parents,this._name,this._id)}function eNe(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,a=t.length,s=r.length,i=Math.min(a,s),o=new Array(a),l=0;l<i;++l)for(var d=t[l],u=r[l],p=d.length,m=o[l]=new Array(p),h,x=0;x<p;++x)(h=d[x]||u[x])&&(m[x]=h);for(;l<a;++l)o[l]=t[l];return new kc(o,this._parents,this._name,this._id)}function tNe(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function rNe(e,t,r){var a,s,i=tNe(t)?Zk:Fl;return function(){var o=i(this,e),l=o.on;l!==a&&(s=(a=l).copy()).on(t,r),o.on=s}}function nNe(e,t){var r=this._id;return arguments.length<2?Ko(this.node(),r).on.on(e):this.each(rNe(r,e,t))}function aNe(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function sNe(){return this.on("end.remove",aNe(this._id))}function iNe(e){var t=this._name,r=this._id;typeof e!="function"&&(e=Yk(e));for(var a=this._groups,s=a.length,i=new Array(s),o=0;o<s;++o)for(var l=a[o],d=l.length,u=i[o]=new Array(d),p,m,h=0;h<d;++h)(p=l[h])&&(m=e.call(p,p.__data__,h,l))&&("__data__"in p&&(m.__data__=p.__data__),u[h]=m,F1(u[h],t,r,h,u,Ko(p,r)));return new kc(i,this._parents,t,r)}function oNe(e){var t=this._name,r=this._id;typeof e!="function"&&(e=LG(e));for(var a=this._groups,s=a.length,i=[],o=[],l=0;l<s;++l)for(var d=a[l],u=d.length,p,m=0;m<u;++m)if(p=d[m]){for(var h=e.call(p,p.__data__,m,d),x,y=Ko(p,r),N=0,v=h.length;N<v;++N)(x=h[N])&&F1(x,t,r,N,h,y);i.push(h),o.push(p)}return new kc(i,o,t,r)}var lNe=_g.prototype.constructor;function cNe(){return new lNe(this._groups,this._parents)}function dNe(e,t){var r,a,s;return function(){var i=pp(this,e),o=(this.style.removeProperty(e),pp(this,e));return i===o?null:i===r&&o===a?s:s=t(r=i,a=o)}}function JG(e){return function(){this.style.removeProperty(e)}}function uNe(e,t,r){var a,s=r+"",i;return function(){var o=pp(this,e);return o===s?null:o===a?i:i=t(a=o,r)}}function fNe(e,t,r){var a,s,i;return function(){var o=pp(this,e),l=r(this),d=l+"";return l==null&&(d=l=(this.style.removeProperty(e),pp(this,e))),o===d?null:o===a&&d===s?i:(s=d,i=t(a=o,l))}}function mNe(e,t){var r,a,s,i="style."+t,o="end."+i,l;return function(){var d=Fl(this,e),u=d.on,p=d.value[i]==null?l||(l=JG(t)):void 0;(u!==r||s!==p)&&(a=(r=u).copy()).on(o,s=p),d.on=a}}function pNe(e,t,r){var a=(e+="")=="transform"?Aoe:ZG;return t==null?this.styleTween(e,dNe(e,a)).on("end.style."+e,JG(e)):typeof t=="function"?this.styleTween(e,fNe(e,a,Jk(this,"style."+e,t))).each(mNe(this._id,e)):this.styleTween(e,uNe(e,a,t),r).on("end.style."+e,null)}function hNe(e,t,r){return function(a){this.style.setProperty(e,t.call(this,a),r)}}function gNe(e,t,r){var a,s;function i(){var o=t.apply(this,arguments);return o!==s&&(a=(s=o)&&hNe(e,o,r)),a}return i._value=t,i}function xNe(e,t,r){var a="style."+(e+="");if(arguments.length<2)return(a=this.tween(a))&&a._value;if(t==null)return this.tween(a,null);if(typeof t!="function")throw new Error;return this.tween(a,gNe(e,t,r??""))}function bNe(e){return function(){this.textContent=e}}function yNe(e){return function(){var t=e(this);this.textContent=t??""}}function vNe(e){return this.tween("text",typeof e=="function"?yNe(Jk(this,"text",e)):bNe(e==null?"":e+""))}function NNe(e){return function(t){this.textContent=e.call(this,t)}}function SNe(e){var t,r;function a(){var s=e.apply(this,arguments);return s!==r&&(t=(r=s)&&NNe(s)),t}return a._value=e,a}function jNe(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,SNe(e))}function wNe(){for(var e=this._name,t=this._id,r=eK(),a=this._groups,s=a.length,i=0;i<s;++i)for(var o=a[i],l=o.length,d,u=0;u<l;++u)if(d=o[u]){var p=Ko(d,t);F1(d,e,r,u,o,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new kc(a,this._parents,e,r)}function ENe(){var e,t,r=this,a=r._id,s=r.size();return new Promise(function(i,o){var l={value:o},d={value:function(){--s===0&&i()}};r.each(function(){var u=Fl(this,a),p=u.on;p!==e&&(t=(e=p).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(d)),u.on=t}),s===0&&i()})}var ANe=0;function kc(e,t,r,a){this._groups=e,this._parents=t,this._name=r,this._id=a}function eK(){return++ANe}var ac=_g.prototype;kc.prototype={constructor:kc,select:iNe,selectAll:oNe,selectChild:ac.selectChild,selectChildren:ac.selectChildren,filter:J1e,merge:eNe,selection:cNe,transition:wNe,call:ac.call,nodes:ac.nodes,node:ac.node,size:ac.size,empty:ac.empty,each:ac.each,on:nNe,attr:L1e,attrTween:H1e,style:pNe,styleTween:xNe,text:vNe,textTween:jNe,remove:sNe,tween:O1e,delay:z1e,duration:V1e,ease:X1e,easeVarying:Z1e,end:ENe,[Symbol.iterator]:ac[Symbol.iterator]};function CNe(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var _Ne={time:null,delay:0,duration:250,ease:CNe};function TNe(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function ONe(e){var t,r;e instanceof kc?(t=e._id,e=e._name):(t=eK(),(r=_Ne).time=Qk(),e=e==null?null:e+"");for(var a=this._groups,s=a.length,i=0;i<s;++i)for(var o=a[i],l=o.length,d,u=0;u<l;++u)(d=o[u])&&F1(d,e,t,u,o,r||TNe(d,t));return new kc(a,this._parents,e,t)}_g.prototype.interrupt=C1e;_g.prototype.transition=ONe;var jm=1e-6,e5=Math.PI,kNe=e5*2,RNe=180/e5,PNe=e5/180,wm=Math.abs,DNe=Math.cos,INe=Math.sin,t5=Math.sqrt;function to(){}function bv(e,t){e&&W6.hasOwnProperty(e.type)&&W6[e.type](e,t)}var q6={Feature:function(e,t){bv(e.geometry,t)},FeatureCollection:function(e,t){for(var r=e.features,a=-1,s=r.length;++a<s;)bv(r[a].geometry,t)}},W6={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var r=e.coordinates,a=-1,s=r.length;++a<s;)e=r[a],t.point(e[0],e[1],e[2])},LineString:function(e,t){hT(e.coordinates,t,0)},MultiLineString:function(e,t){for(var r=e.coordinates,a=-1,s=r.length;++a<s;)hT(r[a],t,0)},Polygon:function(e,t){V6(e.coordinates,t)},MultiPolygon:function(e,t){for(var r=e.coordinates,a=-1,s=r.length;++a<s;)V6(r[a],t)},GeometryCollection:function(e,t){for(var r=e.geometries,a=-1,s=r.length;++a<s;)bv(r[a],t)}};function hT(e,t,r){var a=-1,s=e.length-r,i;for(t.lineStart();++a<s;)i=e[a],t.point(i[0],i[1],i[2]);t.lineEnd()}function V6(e,t){var r=-1,a=e.length;for(t.polygonStart();++r<a;)hT(e[r],t,1);t.polygonEnd()}function tm(e,t){e&&q6.hasOwnProperty(e.type)?q6[e.type](e,t):bv(e,t)}function MNe(){var e=[],t;return{point:function(r,a,s){t.push([r,a,s])},lineStart:function(){e.push(t=[])},lineEnd:to,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var r=e;return e=[],t=null,r}}}function LNe(e,t){return wm(e[0]-t[0])<jm&&wm(e[1]-t[1])<jm}function rb(e,t,r,a){this.x=e,this.z=t,this.o=r,this.e=a,this.v=!1,this.n=this.p=null}function $Ne(e,t,r,a,s){var i=[],o=[],l,d;if(e.forEach(function(y){if(!((N=y.length-1)<=0)){var N,v=y[0],j=y[N],E;if(LNe(v,j)){if(!v[2]&&!j[2]){for(s.lineStart(),l=0;l<N;++l)s.point((v=y[l])[0],v[1]);s.lineEnd();return}j[0]+=2*jm}i.push(E=new rb(v,y,null,!0)),o.push(E.o=new rb(v,null,E,!1)),i.push(E=new rb(j,y,null,!1)),o.push(E.o=new rb(j,null,E,!0))}}),!!i.length){for(o.sort(t),Y6(i),Y6(o),l=0,d=o.length;l<d;++l)o[l].e=r=!r;for(var u=i[0],p,m;;){for(var h=u,x=!0;h.v;)if((h=h.n)===u)return;p=h.z,s.lineStart();do{if(h.v=h.o.v=!0,h.e){if(x)for(l=0,d=p.length;l<d;++l)s.point((m=p[l])[0],m[1]);else a(h.x,h.n.x,1,s);h=h.n}else{if(x)for(p=h.p.z,l=p.length-1;l>=0;--l)s.point((m=p[l])[0],m[1]);else a(h.x,h.p.x,-1,s);h=h.p}h=h.o,p=h.z,x=!x}while(!h.v);s.lineEnd()}}}function Y6(e){if(t=e.length){for(var t,r=0,a=e[0],s;++r<t;)a.n=s=e[r],s.p=a,a=s;a.n=s=e[0],s.p=a}}function FNe(e,t,r,a,s,i){var o=e[0],l=e[1],d=t[0],u=t[1],p=0,m=1,h=d-o,x=u-l,y;if(y=r-o,!(!h&&y>0)){if(y/=h,h<0){if(y<p)return;y<m&&(m=y)}else if(h>0){if(y>m)return;y>p&&(p=y)}if(y=s-o,!(!h&&y<0)){if(y/=h,h<0){if(y>m)return;y>p&&(p=y)}else if(h>0){if(y<p)return;y<m&&(m=y)}if(y=a-l,!(!x&&y>0)){if(y/=x,x<0){if(y<p)return;y<m&&(m=y)}else if(x>0){if(y>m)return;y>p&&(p=y)}if(y=i-l,!(!x&&y<0)){if(y/=x,x<0){if(y>m)return;y>p&&(p=y)}else if(x>0){if(y<p)return;y<m&&(m=y)}return p>0&&(e[0]=o+p*h,e[1]=l+p*x),m<1&&(t[0]=o+m*h,t[1]=l+m*x),!0}}}}}var Zh=1e9,nb=-Zh;function BNe(e,t,r,a){function s(u,p){return e<=u&&u<=r&&t<=p&&p<=a}function i(u,p,m,h){var x=0,y=0;if(u==null||(x=o(u,m))!==(y=o(p,m))||d(u,p)<0^m>0)do h.point(x===0||x===3?e:r,x>1?a:t);while((x=(x+m+4)%4)!==y);else h.point(p[0],p[1])}function o(u,p){return wm(u[0]-e)<jm?p>0?0:3:wm(u[0]-r)<jm?p>0?2:1:wm(u[1]-t)<jm?p>0?1:0:p>0?3:2}function l(u,p){return d(u.x,p.x)}function d(u,p){var m=o(u,1),h=o(p,1);return m!==h?m-h:m===0?p[1]-u[1]:m===1?u[0]-p[0]:m===2?u[1]-p[1]:p[0]-u[0]}return function(u){var p=u,m=MNe(),h,x,y,N,v,j,E,C,A,S,_,O={point:D,lineStart:$,lineEnd:B,polygonStart:M,polygonEnd:F};function D(W,K){s(W,K)&&p.point(W,K)}function k(){for(var W=0,K=0,G=x.length;K<G;++K)for(var U=x[K],te=1,re=U.length,q=U[0],L,H,ae=q[0],oe=q[1];te<re;++te)L=ae,H=oe,q=U[te],ae=q[0],oe=q[1],H<=a?oe>a&&(ae-L)*(a-H)>(oe-H)*(e-L)&&++W:oe<=a&&(ae-L)*(a-H)<(oe-H)*(e-L)&&--W;return W}function M(){p=m,h=[],x=[],_=!0}function F(){var W=k(),K=_&&W,G=(h=Xie(h)).length;(K||G)&&(u.polygonStart(),K&&(u.lineStart(),i(null,null,1,u),u.lineEnd()),G&&$Ne(h,l,W,i,u),u.polygonEnd()),p=u,h=x=y=null}function $(){O.point=P,x&&x.push(y=[]),S=!0,A=!1,E=C=NaN}function B(){h&&(P(N,v),j&&A&&m.rejoin(),h.push(m.result())),O.point=D,A&&p.lineEnd()}function P(W,K){var G=s(W,K);if(x&&y.push([W,K]),S)N=W,v=K,j=G,S=!1,G&&(p.lineStart(),p.point(W,K));else if(G&&A)p.point(W,K);else{var U=[E=Math.max(nb,Math.min(Zh,E)),C=Math.max(nb,Math.min(Zh,C))],te=[W=Math.max(nb,Math.min(Zh,W)),K=Math.max(nb,Math.min(Zh,K))];FNe(U,te,e,t,r,a)?(A||(p.lineStart(),p.point(U[0],U[1])),p.point(te[0],te[1]),G||p.lineEnd(),_=!1):G&&(p.lineStart(),p.point(W,K),_=!1)}E=W,C=K,A=G}return O}}const gT=e=>e;var oA=new Hm,xT=new Hm,tK,rK,bT,yT,hc={point:to,lineStart:to,lineEnd:to,polygonStart:function(){hc.lineStart=UNe,hc.lineEnd=GNe},polygonEnd:function(){hc.lineStart=hc.lineEnd=hc.point=to,oA.add(wm(xT)),xT=new Hm},result:function(){var e=oA/2;return oA=new Hm,e}};function UNe(){hc.point=HNe}function HNe(e,t){hc.point=nK,tK=bT=e,rK=yT=t}function nK(e,t){xT.add(yT*e-bT*t),bT=e,yT=t}function GNe(){nK(tK,rK)}var gp=1/0,yv=gp,lg=-gp,vv=lg,Nv={point:KNe,lineStart:to,lineEnd:to,polygonStart:to,polygonEnd:to,result:function(){var e=[[gp,yv],[lg,vv]];return lg=vv=-(yv=gp=1/0),e}};function KNe(e,t){e<gp&&(gp=e),e>lg&&(lg=e),t<yv&&(yv=t),t>vv&&(vv=t)}var vT=0,NT=0,Jh=0,Sv=0,jv=0,um=0,ST=0,jT=0,e0=0,aK,sK,pl,hl,Qi={point:sf,lineStart:X6,lineEnd:Q6,polygonStart:function(){Qi.lineStart=WNe,Qi.lineEnd=VNe},polygonEnd:function(){Qi.point=sf,Qi.lineStart=X6,Qi.lineEnd=Q6},result:function(){var e=e0?[ST/e0,jT/e0]:um?[Sv/um,jv/um]:Jh?[vT/Jh,NT/Jh]:[NaN,NaN];return vT=NT=Jh=Sv=jv=um=ST=jT=e0=0,e}};function sf(e,t){vT+=e,NT+=t,++Jh}function X6(){Qi.point=zNe}function zNe(e,t){Qi.point=qNe,sf(pl=e,hl=t)}function qNe(e,t){var r=e-pl,a=t-hl,s=t5(r*r+a*a);Sv+=s*(pl+e)/2,jv+=s*(hl+t)/2,um+=s,sf(pl=e,hl=t)}function Q6(){Qi.point=sf}function WNe(){Qi.point=YNe}function VNe(){iK(aK,sK)}function YNe(e,t){Qi.point=iK,sf(aK=pl=e,sK=hl=t)}function iK(e,t){var r=e-pl,a=t-hl,s=t5(r*r+a*a);Sv+=s*(pl+e)/2,jv+=s*(hl+t)/2,um+=s,s=hl*e-pl*t,ST+=s*(pl+e),jT+=s*(hl+t),e0+=s*3,sf(pl=e,hl=t)}function oK(e){this._context=e}oK.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,kNe);break}}},result:to};var wT=new Hm,lA,lK,cK,t0,r0,cg={point:to,lineStart:function(){cg.point=XNe},lineEnd:function(){lA&&dK(lK,cK),cg.point=to},polygonStart:function(){lA=!0},polygonEnd:function(){lA=null},result:function(){var e=+wT;return wT=new Hm,e}};function XNe(e,t){cg.point=dK,lK=t0=e,cK=r0=t}function dK(e,t){t0-=e,r0-=t,wT.add(t5(t0*t0+r0*r0)),t0=e,r0=t}let Z6,wv,J6,e7;class t7{constructor(t){this._append=t==null?uK:QNe(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,r){switch(this._point){case 0:{this._append`M${t},${r}`,this._point=1;break}case 1:{this._append`L${t},${r}`;break}default:{if(this._append`M${t},${r}`,this._radius!==J6||this._append!==wv){const a=this._radius,s=this._;this._="",this._append`m0,${a}a${a},${a} 0 1,1 0,${-2*a}a${a},${a} 0 1,1 0,${2*a}z`,J6=a,wv=this._append,e7=this._,this._=s}this._+=e7;break}}}result(){const t=this._;return this._="",t.length?t:null}}function uK(e){let t=1;this._+=e[0];for(const r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function QNe(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return uK;if(t!==Z6){const r=10**t;Z6=t,wv=function(s){let i=1;this._+=s[0];for(const o=s.length;i<o;++i)this._+=Math.round(arguments[i]*r)/r+s[i]}}return wv}function ZNe(e,t){let r=3,a=4.5,s,i;function o(l){return l&&(typeof a=="function"&&i.pointRadius(+a.apply(this,arguments)),tm(l,s(i))),i.result()}return o.area=function(l){return tm(l,s(hc)),hc.result()},o.measure=function(l){return tm(l,s(cg)),cg.result()},o.bounds=function(l){return tm(l,s(Nv)),Nv.result()},o.centroid=function(l){return tm(l,s(Qi)),Qi.result()},o.projection=function(l){return arguments.length?(s=l==null?(e=null,gT):(e=l).stream,o):e},o.context=function(l){return arguments.length?(i=l==null?(t=null,new t7(r)):new oK(t=l),typeof a!="function"&&i.pointRadius(a),o):t},o.pointRadius=function(l){return arguments.length?(a=typeof l=="function"?l:(i.pointRadius(+l),+l),o):a},o.digits=function(l){if(!arguments.length)return r;if(l==null)r=null;else{const d=Math.floor(l);if(!(d>=0))throw new RangeError(`invalid digits: ${l}`);r=d}return t===null&&(i=new t7(r)),o},o.projection(e).digits(r).context(t)}function JNe(e){return function(t){var r=new ET;for(var a in e)r[a]=e[a];return r.stream=t,r}}function ET(){}ET.prototype={constructor:ET,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function r5(e,t,r){var a=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),a!=null&&e.clipExtent(null),tm(r,e.stream(Nv)),t(Nv.result()),a!=null&&e.clipExtent(a),e}function fK(e,t,r){return r5(e,function(a){var s=t[1][0]-t[0][0],i=t[1][1]-t[0][1],o=Math.min(s/(a[1][0]-a[0][0]),i/(a[1][1]-a[0][1])),l=+t[0][0]+(s-o*(a[1][0]+a[0][0]))/2,d=+t[0][1]+(i-o*(a[1][1]+a[0][1]))/2;e.scale(150*o).translate([l,d])},r)}function e2e(e,t,r){return fK(e,[[0,0],t],r)}function t2e(e,t,r){return r5(e,function(a){var s=+t,i=s/(a[1][0]-a[0][0]),o=(s-i*(a[1][0]+a[0][0]))/2,l=-i*a[0][1];e.scale(150*i).translate([o,l])},r)}function r2e(e,t,r){return r5(e,function(a){var s=+t,i=s/(a[1][1]-a[0][1]),o=-i*a[0][0],l=(s-i*(a[1][1]+a[0][1]))/2;e.scale(150*i).translate([o,l])},r)}function n2e(){var e=1,t=0,r=0,a=1,s=1,i=0,o,l,d=null,u,p,m,h=1,x=1,y=JNe({point:function(A,S){var _=C([A,S]);this.stream.point(_[0],_[1])}}),N=gT,v,j;function E(){return h=e*a,x=e*s,v=j=null,C}function C(A){var S=A[0]*h,_=A[1]*x;if(i){var O=_*o-S*l;S=S*o+_*l,_=O}return[S+t,_+r]}return C.invert=function(A){var S=A[0]-t,_=A[1]-r;if(i){var O=_*o+S*l;S=S*o-_*l,_=O}return[S/h,_/x]},C.stream=function(A){return v&&j===A?v:v=y(N(j=A))},C.postclip=function(A){return arguments.length?(N=A,d=u=p=m=null,E()):N},C.clipExtent=function(A){return arguments.length?(N=A==null?(d=u=p=m=null,gT):BNe(d=+A[0][0],u=+A[0][1],p=+A[1][0],m=+A[1][1]),E()):d==null?null:[[d,u],[p,m]]},C.scale=function(A){return arguments.length?(e=+A,E()):e},C.translate=function(A){return arguments.length?(t=+A[0],r=+A[1],E()):[t,r]},C.angle=function(A){return arguments.length?(i=A%360*PNe,l=INe(i),o=DNe(i),E()):i*RNe},C.reflectX=function(A){return arguments.length?(a=A?-1:1,E()):a<0},C.reflectY=function(A){return arguments.length?(s=A?-1:1,E()):s<0},C.fitExtent=function(A,S){return fK(C,A,S)},C.fitSize=function(A,S){return e2e(C,A,S)},C.fitWidth=function(A,S){return t2e(C,A,S)},C.fitHeight=function(A,S){return r2e(C,A,S)},C}function a2e(e){for(var t=e.length/6|0,r=new Array(t),a=0;a<t;)r[a]="#"+e.slice(a*6,++a*6);return r}const s2e=e=>goe(e[e.length-1]);var i2e=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(a2e);const o2e=s2e(i2e),ab=e=>()=>e;function l2e(e,{sourceEvent:t,target:r,transform:a,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:a,enumerable:!0,configurable:!0},_:{value:s}})}function Nc(e,t,r){this.k=e,this.x=t,this.y=r}Nc.prototype={constructor:Nc,scale:function(e){return e===1?this:new Nc(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Nc(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ev=new Nc(1,0,0);Nc.prototype;function cA(e){e.stopImmediatePropagation()}function kh(e){e.preventDefault(),e.stopImmediatePropagation()}function c2e(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function d2e(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function r7(){return this.__zoom||Ev}function u2e(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function f2e(){return navigator.maxTouchPoints||"ontouchstart"in this}function m2e(e,t,r){var a=e.invertX(t[0][0])-r[0][0],s=e.invertX(t[1][0])-r[1][0],i=e.invertY(t[0][1])-r[0][1],o=e.invertY(t[1][1])-r[1][1];return e.translate(s>a?(a+s)/2:Math.min(0,a)||Math.max(0,s),o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o))}function p2e(){var e=c2e,t=d2e,r=m2e,a=u2e,s=f2e,i=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,d=koe,u=Vk("start","zoom","end"),p,m,h,x=500,y=150,N=0,v=10;function j(P){P.property("__zoom",r7).on("wheel.zoom",D,{passive:!1}).on("mousedown.zoom",k).on("dblclick.zoom",M).filter(s).on("touchstart.zoom",F).on("touchmove.zoom",$).on("touchend.zoom touchcancel.zoom",B).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}j.transform=function(P,W,K,G){var U=P.selection?P.selection():P;U.property("__zoom",r7),P!==U?S(P,W,K,G):U.interrupt().each(function(){_(this,arguments).event(G).start().zoom(null,typeof W=="function"?W.apply(this,arguments):W).end()})},j.scaleBy=function(P,W,K,G){j.scaleTo(P,function(){var U=this.__zoom.k,te=typeof W=="function"?W.apply(this,arguments):W;return U*te},K,G)},j.scaleTo=function(P,W,K,G){j.transform(P,function(){var U=t.apply(this,arguments),te=this.__zoom,re=K==null?A(U):typeof K=="function"?K.apply(this,arguments):K,q=te.invert(re),L=typeof W=="function"?W.apply(this,arguments):W;return r(C(E(te,L),re,q),U,o)},K,G)},j.translateBy=function(P,W,K,G){j.transform(P,function(){return r(this.__zoom.translate(typeof W=="function"?W.apply(this,arguments):W,typeof K=="function"?K.apply(this,arguments):K),t.apply(this,arguments),o)},null,G)},j.translateTo=function(P,W,K,G,U){j.transform(P,function(){var te=t.apply(this,arguments),re=this.__zoom,q=G==null?A(te):typeof G=="function"?G.apply(this,arguments):G;return r(Ev.translate(q[0],q[1]).scale(re.k).translate(typeof W=="function"?-W.apply(this,arguments):-W,typeof K=="function"?-K.apply(this,arguments):-K),te,o)},G,U)};function E(P,W){return W=Math.max(i[0],Math.min(i[1],W)),W===P.k?P:new Nc(W,P.x,P.y)}function C(P,W,K){var G=W[0]-K[0]*P.k,U=W[1]-K[1]*P.k;return G===P.x&&U===P.y?P:new Nc(P.k,G,U)}function A(P){return[(+P[0][0]+ +P[1][0])/2,(+P[0][1]+ +P[1][1])/2]}function S(P,W,K,G){P.on("start.zoom",function(){_(this,arguments).event(G).start()}).on("interrupt.zoom end.zoom",function(){_(this,arguments).event(G).end()}).tween("zoom",function(){var U=this,te=arguments,re=_(U,te).event(G),q=t.apply(U,te),L=K==null?A(q):typeof K=="function"?K.apply(U,te):K,H=Math.max(q[1][0]-q[0][0],q[1][1]-q[0][1]),ae=U.__zoom,oe=typeof W=="function"?W.apply(U,te):W,ve=d(ae.invert(L).concat(H/ae.k),oe.invert(L).concat(H/oe.k));return function(ce){if(ce===1)ce=oe;else{var Ee=ve(ce),xe=H/Ee[2];ce=new Nc(xe,L[0]-Ee[0]*xe,L[1]-Ee[1]*xe)}re.zoom(null,ce)}})}function _(P,W,K){return!K&&P.__zooming||new O(P,W)}function O(P,W){this.that=P,this.args=W,this.active=0,this.sourceEvent=null,this.extent=t.apply(P,W),this.taps=0}O.prototype={event:function(P){return P&&(this.sourceEvent=P),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(P,W){return this.mouse&&P!=="mouse"&&(this.mouse[1]=W.invert(this.mouse[0])),this.touch0&&P!=="touch"&&(this.touch0[1]=W.invert(this.touch0[0])),this.touch1&&P!=="touch"&&(this.touch1[1]=W.invert(this.touch1[0])),this.that.__zoom=W,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(P){var W=pc(this.that).datum();u.call(P,this.that,new l2e(P,{sourceEvent:this.sourceEvent,target:j,transform:this.that.__zoom,dispatch:u}),W)}};function D(P,...W){if(!e.apply(this,arguments))return;var K=_(this,W).event(P),G=this.__zoom,U=Math.max(i[0],Math.min(i[1],G.k*Math.pow(2,a.apply(this,arguments)))),te=Sd(P);if(K.wheel)(K.mouse[0][0]!==te[0]||K.mouse[0][1]!==te[1])&&(K.mouse[1]=G.invert(K.mouse[0]=te)),clearTimeout(K.wheel);else{if(G.k===U)return;K.mouse=[te,G.invert(te)],Mb(this),K.start()}kh(P),K.wheel=setTimeout(re,y),K.zoom("mouse",r(C(E(G,U),K.mouse[0],K.mouse[1]),K.extent,o));function re(){K.wheel=null,K.end()}}function k(P,...W){if(h||!e.apply(this,arguments))return;var K=P.currentTarget,G=_(this,W,!0).event(P),U=pc(P.view).on("mousemove.zoom",L,!0).on("mouseup.zoom",H,!0),te=Sd(P,K),re=P.clientX,q=P.clientY;b1e(P.view),cA(P),G.mouse=[te,this.__zoom.invert(te)],Mb(this),G.start();function L(ae){if(kh(ae),!G.moved){var oe=ae.clientX-re,ve=ae.clientY-q;G.moved=oe*oe+ve*ve>N}G.event(ae).zoom("mouse",r(C(G.that.__zoom,G.mouse[0]=Sd(ae,K),G.mouse[1]),G.extent,o))}function H(ae){U.on("mousemove.zoom mouseup.zoom",null),y1e(ae.view,G.moved),kh(ae),G.event(ae).end()}}function M(P,...W){if(e.apply(this,arguments)){var K=this.__zoom,G=Sd(P.changedTouches?P.changedTouches[0]:P,this),U=K.invert(G),te=K.k*(P.shiftKey?.5:2),re=r(C(E(K,te),G,U),t.apply(this,W),o);kh(P),l>0?pc(this).transition().duration(l).call(S,re,G,P):pc(this).call(j.transform,re,G,P)}}function F(P,...W){if(e.apply(this,arguments)){var K=P.touches,G=K.length,U=_(this,W,P.changedTouches.length===G).event(P),te,re,q,L;for(cA(P),re=0;re<G;++re)q=K[re],L=Sd(q,this),L=[L,this.__zoom.invert(L),q.identifier],U.touch0?!U.touch1&&U.touch0[2]!==L[2]&&(U.touch1=L,U.taps=0):(U.touch0=L,te=!0,U.taps=1+!!p);p&&(p=clearTimeout(p)),te&&(U.taps<2&&(m=L[0],p=setTimeout(function(){p=null},x)),Mb(this),U.start())}}function $(P,...W){if(this.__zooming){var K=_(this,W).event(P),G=P.changedTouches,U=G.length,te,re,q,L;for(kh(P),te=0;te<U;++te)re=G[te],q=Sd(re,this),K.touch0&&K.touch0[2]===re.identifier?K.touch0[0]=q:K.touch1&&K.touch1[2]===re.identifier&&(K.touch1[0]=q);if(re=K.that.__zoom,K.touch1){var H=K.touch0[0],ae=K.touch0[1],oe=K.touch1[0],ve=K.touch1[1],ce=(ce=oe[0]-H[0])*ce+(ce=oe[1]-H[1])*ce,Ee=(Ee=ve[0]-ae[0])*Ee+(Ee=ve[1]-ae[1])*Ee;re=E(re,Math.sqrt(ce/Ee)),q=[(H[0]+oe[0])/2,(H[1]+oe[1])/2],L=[(ae[0]+ve[0])/2,(ae[1]+ve[1])/2]}else if(K.touch0)q=K.touch0[0],L=K.touch0[1];else return;K.zoom("touch",r(C(re,q,L),K.extent,o))}}function B(P,...W){if(this.__zooming){var K=_(this,W).event(P),G=P.changedTouches,U=G.length,te,re;for(cA(P),h&&clearTimeout(h),h=setTimeout(function(){h=null},x),te=0;te<U;++te)re=G[te],K.touch0&&K.touch0[2]===re.identifier?delete K.touch0:K.touch1&&K.touch1[2]===re.identifier&&delete K.touch1;if(K.touch1&&!K.touch0&&(K.touch0=K.touch1,delete K.touch1),K.touch0)K.touch0[1]=this.__zoom.invert(K.touch0[0]);else if(K.end(),K.taps===2&&(re=Sd(re,this),Math.hypot(m[0]-re[0],m[1]-re[1])<v)){var q=pc(this).on("dblclick.zoom");q&&q.apply(this,arguments)}}}return j.wheelDelta=function(P){return arguments.length?(a=typeof P=="function"?P:ab(+P),j):a},j.filter=function(P){return arguments.length?(e=typeof P=="function"?P:ab(!!P),j):e},j.touchable=function(P){return arguments.length?(s=typeof P=="function"?P:ab(!!P),j):s},j.extent=function(P){return arguments.length?(t=typeof P=="function"?P:ab([[+P[0][0],+P[0][1]],[+P[1][0],+P[1][1]]]),j):t},j.scaleExtent=function(P){return arguments.length?(i[0]=+P[0],i[1]=+P[1],j):[i[0],i[1]]},j.translateExtent=function(P){return arguments.length?(o[0][0]=+P[0][0],o[1][0]=+P[1][0],o[0][1]=+P[0][1],o[1][1]=+P[1][1],j):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},j.constrain=function(P){return arguments.length?(r=P,j):r},j.duration=function(P){return arguments.length?(l=+P,j):l},j.interpolate=function(P){return arguments.length?(d=P,j):d},j.on=function(){var P=u.on.apply(u,arguments);return P===u?j:P},j.clickDistance=function(P){return arguments.length?(N=(P=+P)*P,j):Math.sqrt(N)},j.tapDistance=function(P){return arguments.length?(v=+P,j):v},j}function h2e(){const e=g.useRef(null),[t,r]=g.useState({width:0,height:0});return g.useEffect(()=>{if(!e.current)return;const a=e.current,s=a.getBoundingClientRect();s.width>0&&s.height>0&&r({width:s.width,height:s.height});const i=new ResizeObserver(o=>{const l=o[0];if(!l)return;const{width:d,height:u}=l.contentRect;r({width:d,height:u})});return i.observe(a),()=>i.disconnect()},[]),{ref:e,width:t.width,height:t.height}}const _s=e=>`${e.level}:${e.code}`,Fn=e=>String(e??"").trim(),n7=e=>e==="ctprvn"?"REGION":e==="sig"?"SIGUNGU":"EUPMYEONDONG",sc=e=>{if(!e)return null;const t=e.split(":");return t.length>=2?t.slice(1).join(":").trim()||null:Fn(e)||null},sb=50;function dA(e){return Fn(e?.properties?.code??e?.properties?.adm_cd??e?.properties?.ADM_CD??e?.properties?.sggnm_cd??e?.properties?.SGGNM_CD??e?.properties?.sigungu_cd??e?.properties?.SIGUNGU_CD??e?.properties?.emd_cd??e?.properties?.EMD_CD??e?.properties?.CTPRVN_CD??e?.properties?.SIG_CD??e?.properties?.EMD_CD??"")}function a7(e){return String(e?.properties?.name??e?.properties?.CTP_KOR_NM??e?.properties?.SIG_KOR_NM??e?.properties?.EMD_KOR_NM??"-")}function g2e({level:e,features:t,stats:r,onSelect:a,indicatorLabel:s="",unit:i="",year:o,valueFormatter:l,colorPalette:d,getTooltipExtraLines:u}){const{ref:p,width:m,height:h}=h2e(),[x,y]=g.useState(null),[N,v]=g.useState(null),j=g.useRef(null),E=g.useRef(null),C=g.useRef(null),A=g.useRef(null),[S,_]=g.useState(Ev),O=12,D=8,k=g.useMemo(()=>new Map(r.map(G=>[G.code,G.value])),[r]),M=g.useMemo(()=>({type:"FeatureCollection",features:t}),[t]),F=g.useMemo(()=>{const G=r.map(q=>q.value),U=G.length?Math.min(...G):0,te=G.length?Math.max(...G):100,re=U===te?[U-1,te+1]:[U,te];return d&&d.length>0?vk().domain(re).range(d):Tk(q=>o2e(.15+.85*q)).domain(re)},[r,d]),$=g.useMemo(()=>m<sb||h<sb||!t.length?null:n2e().reflectY(!0).fitSize([m,h],M),[m,h,M,t.length]),B=g.useMemo(()=>$?ZNe($):null,[$]),P=g.useMemo(()=>B?t.map(G=>{const U=dA(G),te=a7(G),[re,q]=B.centroid(G);return{code:U,name:te,x:re,y:q}}):[],[t,B]),W=G=>{C.current&&pc(C.current).attr("transform",G.toString()),_(G)};g.useEffect(()=>{if(!E.current)return;const G=p2e().scaleExtent([1,5]).on("zoom",te=>{W(te.transform)});pc(E.current).call(G),A.current=G},[m,h]);const K=G=>{const U=dA(G);U&&(e==="ctprvn"?a("sig",U):e==="sig"&&a("emd",U))};return n.jsxs("div",{ref:p,className:"relative w-full h-full",children:[m<sb||h<sb||!B?n.jsx("div",{className:"p-3 text-sm text-gray-500",children:t.length===0?"  .":"    ."}):n.jsxs("svg",{ref:E,width:m,height:h,className:"block",style:{touchAction:"none",cursor:"grab"},onWheel:G=>{G.preventDefault();const U=G.deltaY>0?.9:1.1,te=Math.max(1,Math.min(5,S.k*U)),re=Sd(G,E.current),q=re[0]-(re[0]-S.x)/S.k*te,L=re[1]-(re[1]-S.y)/S.k*te;W(Ev.translate(q,L).scale(te))},children:[n.jsx("rect",{width:m,height:h,fill:"transparent",style:{pointerEvents:"all"}}),n.jsxs("g",{ref:C,transform:`translate(${S.x}, ${S.y}) scale(${S.k})`,children:[t.map(G=>{const U=dA(G),te=k.get(U)??0,re=F(te),q=B(G)||void 0,L=N===U;return n.jsx("path",{d:q,fill:re,stroke:L?"#0b1020":"#111827",strokeWidth:L?2.2:.9,fillOpacity:N&&!L?.65:.95,style:{cursor:e==="emd"?"default":"pointer",...L?{filter:"drop-shadow(0 3px 6px rgba(15, 23, 42, 0.35))"}:{}},onMouseMove:H=>{const ae=p.current?.getBoundingClientRect();if(!ae)return;const oe=H.clientX-ae.left,ve=H.clientY-ae.top,ce=j.current?.offsetWidth??240,Ee=j.current?.offsetHeight??120;let xe=oe+O,Te=ve+O;xe+ce+D>m&&(xe=oe-ce-O),Te+Ee+D>h&&(Te=ve-Ee-O),xe<D&&(xe=D),Te<D&&(Te=D),y({x:xe,y:Te,name:a7(G),value:te,code:U}),v(U)},onMouseLeave:()=>{y(null),v(null)},onClick:()=>K(G)},U)}),P.map(G=>n.jsx("text",{x:G.x,y:G.y,fontSize:e==="ctprvn"?12:10,fill:"#1e3a8a",textAnchor:"middle",pointerEvents:"none",style:{paintOrder:"stroke",stroke:"#fff",strokeWidth:3},children:G.name},`label-${G.code}`))]})]}),x&&n.jsxs("div",{ref:j,className:"pointer-events-none absolute z-[80] max-w-[260px] rounded-lg border border-slate-200 bg-white px-3 py-2 text-xs text-slate-900 shadow-2xl",style:{left:x.x,top:x.y},children:[n.jsx("div",{className:"text-sm font-semibold mb-1",children:x.name}),n.jsxs("div",{className:"flex items-baseline gap-2",children:[n.jsx("span",{className:"text-[11px] text-slate-500",children:s}),n.jsxs("span",{className:"text-base font-bold",children:[l?l(x.value):x.value,!l&&i?n.jsxs("span",{className:"text-xs ml-1",children:["(",i,")"]}):null]})]}),typeof o=="number"&&n.jsxs("div",{className:"mt-1 text-[11px] text-slate-500",children:[": ",o,""]}),u?.({level:e,code:x.code,name:x.name,value:x.value}).slice(0,3).map((G,U)=>n.jsx("div",{className:"mt-1 text-[11px] text-slate-500",children:G},U))]})]})}const s7=[{id:"total_cases",label:"  ",unit:"",scale:[120,2200]},{id:"completion",label:" ",unit:"%",scale:[60,98]},{id:"referral",label:"SLA ",unit:"%",scale:[85,99]},{id:"consultation_time",label:"SLA ",unit:"%",scale:[1,15]},{id:"wait_time",label:" ",unit:"",scale:[6,40]},{id:"recontact",label:" ",unit:"%",scale:[80,99]},{id:"followup_dropout",label:" ",unit:"%",scale:[1,20]},{id:"high_risk_rate",label:" ",unit:"%",scale:[5,35]},{id:"screening_coverage",label:"1  ",unit:"%",scale:[50,95]},{id:"dropout",label:"  ",unit:"%",scale:[3,25]},{id:"waitlist_pressure",label:"/ ",unit:"",scale:[30,95]},{id:"accessibility_score",label:" ",unit:"",scale:[40,98]},{id:"regional_sla_violation",label:" SLA ",unit:"%",scale:[2,34]},{id:"regional_queue_risk",label:"  ",unit:"",scale:[15,95]},{id:"regional_recontact_rate",label:"  ",unit:"%",scale:[4,38]},{id:"regional_data_readiness",label:"  ",unit:"%",scale:[62,99]},{id:"regional_governance_missing",label:"  ",unit:"%",scale:[1,28]},{id:"regional_ad_transition_hotspot",label:" AD   ",unit:"",scale:[18,92]},{id:"regional_dx_delay_hotspot",label:"   ",unit:"",scale:[9,68]},{id:"regional_screen_to_dx_rate",label:"  ",unit:"%",scale:[34,91]}];function x2e(e){return s7.find(t=>t.id===e)??s7[0]}function Ki(e,t){return t.unit==="%"?`${e.toFixed(1)}%`:t.unit===""?`${Math.round(e)}`:t.unit===""?`${Math.round(e)}`:t.unit===""?`${Math.round(e)}`:`${Math.round(e)}${t.unit}`}const mK=e=>{let t=0;for(let r=0;r<e.length;r+=1)t=t*31+e.charCodeAt(r)>>>0;return t},b2e=(e,t,r)=>Math.min(r,Math.max(t,e)),y2e=e=>mK(e)%1e4/1e4,ic=(e,t,r)=>t+y2e(e)*(r-t),pK=(e,t,r)=>{if(!r.length)return[];const[a,s]=t.scale,i=s-a,o=r.length,l=Math.max(1,o-1),d=`${e}-${t.id}`,u=ic(`${d}-base`,a+i*.2,s-i*.2),p=ic(`${d}-slope`,-i*.045,i*.045),m=ic(`${d}-amp`,i*.04,i*.14),h=ic(`${d}-phase`,0,Math.PI*2),x=i*.03,y=Math.round(ic(`${d}-shock-index`,1,Math.max(1,o-2))),N=ic(`${d}-shock-sign`,-1,1)>=0?1:-1,v=ic(`${d}-shock-amp`,i*.06,i*.18)*N,j=ic(`${d}-shock-rec`,.38,.72);return r.map((E,C)=>{const A=(C-l/2)*p,S=Math.sin(C/l*Math.PI*2+h)*m,_=Math.sin(C/l*Math.PI+h*.35)*m*.35,O=ic(`${d}-noise-${E}`,-x,x);let D=0;C===y&&(D+=v),C===y-1&&(D+=v*.22),C===y+1&&(D-=v*j),C===y+2&&(D-=v*j*.35);const k=b2e(u+A+S+_+O+D,a,s);return{year:E,value:Number(k.toFixed(1))}})},v2e=e=>Fn(e?.properties?.code??e?.properties?.adm_cd??e?.properties?.ADM_CD??e?.properties?.sggnm_cd??e?.properties?.SGGNM_CD??e?.properties?.sigungu_cd??e?.properties?.SIGUNGU_CD??e?.properties?.emd_cd??e?.properties?.EMD_CD??e?.properties?.CTPRVN_CD??e?.properties?.SIG_CD??e?.properties?.EMD_CD??""),N2e=e=>String(e?.properties?.name??e?.properties?.CTP_KOR_NM??e?.properties?.SIG_KOR_NM??e?.properties?.EMD_KOR_NM??"-"),S2e=(e,t,r)=>{const a=e.map(i=>{const o=v2e(i),l=N2e(i),d=pK(o,t,[r-1,r]),u=d[0]?.value??t.scale[0],p=d[1]?.value??u,m=p-u;return{code:o,name:l,value:p,yoy:m,rank:0}});return[...a].sort((i,o)=>o.value-i.value).forEach((i,o)=>{i.rank=o+1}),a},j2e=(e,t,r)=>pK(e,t,r),w2e=e=>{const r=40+mK(e)%40,a=100-r;return[{name:"",value:r},{name:"",value:a}]},Ed={blue:["#eff6ff","#bfdbfe","#93c5fd","#60a5fa","#3b82f6","#2563eb","#1d4ed8"],red:["#fef2f2","#fecaca","#fca5a5","#f87171","#ef4444","#dc2626","#b91c1c"],green:["#f0fdf4","#bbf7d0","#86efac","#4ade80","#22c55e","#16a34a","#15803d"],teal:["#f0fdfa","#ccfbf1","#99f6e4","#5eead4","#2dd4bf","#14b8a6","#0f766e"],orange:["#fff7ed","#fed7aa","#fdba74","#fb923c","#f97316","#ea580c","#c2410c"],purple:["#faf5ff","#e9d5ff","#d8b4fe","#c084fc","#a855f7","#9333ea","#7e22ce"],heat:["#fef3c7","#fde68a","#fcd34d","#fbbf24","#f59e0b","#d97706","#b45309"],risk:["#ecfdf3","#bbf7d0","#86efac","#fde68a","#fbbf24","#f97316","#dc2626"]};class E2e{values;mode;steps;colors;bins;constructor(t,r="quantile",a=6,s="blue"){this.values=t.filter(i=>i!=null&&!isNaN(i)).sort((i,o)=>i-o),this.mode=r,this.steps=Math.min(a,this.values.length),this.colors=Ed[s].slice(0,this.steps),this.bins=this.buildBins()}buildBins(){if(this.values.length===0)return[];const t=[],r=Math.min(...this.values),a=Math.max(...this.values);if(this.mode==="quantile")for(let s=0;s<this.steps;s++){const i=Math.floor(s/this.steps*this.values.length),o=Math.floor((s+1)/this.steps*this.values.length)-1,l=this.values[i],d=this.values[Math.min(o,this.values.length-1)];this.values.filter(u=>u>=l&&(s===this.steps-1?u<=d:u<(t[s-1]?.max??l))).length,t.push({min:l,max:d,color:this.colors[s],count:Math.max(1,Math.floor(this.values.length/this.steps))})}else{const s=(a-r)/this.steps;for(let i=0;i<this.steps;i++){const o=r+s*i,l=i===this.steps-1?a:r+s*(i+1),d=this.values.filter(u=>u>=o&&u<=l).length;t.push({min:Math.round(o),max:Math.round(l),color:this.colors[i],count:d})}}return t}getColor(t){if(t==null||isNaN(t))return"#e5e7eb";for(let r=0;r<this.bins.length;r++){const a=this.bins[r];if(t>=a.min&&(r===this.bins.length-1?t<=a.max:t<this.bins[r+1]?.min))return a.color}return t<this.bins[0]?.min?this.colors[0]:this.colors[this.colors.length-1]}getLegendBins(){return this.bins}getStats(){if(this.values.length===0)return{min:0,max:0,avg:0,median:0,total:0};const t=this.values.reduce((a,s)=>a+s,0),r=Math.floor(this.values.length/2);return{min:Math.min(...this.values),max:Math.max(...this.values),avg:Math.round(t/this.values.length),median:this.values.length%2?this.values[r]:Math.round((this.values[r-1]+this.values[r])/2),total:t}}}function ib(e,t){if(e==null||isNaN(e))return"-";const r=e>=1e4?`${(e/1e4).toFixed(1)}`:e>=1e3?`${(e/1e3).toFixed(1)}`:e.toLocaleString();return t?`${r}${t}`:r}const A2e={blue:" (Blue)",green:" (Green)",teal:" (Teal)",purple:" (Purple)",orange:" (Orange)",red:" (Red)",heat:" (Heat)",risk:" ()"},i7=e=>Ed[e],uA={ctprvn:"https://raw.githubusercontent.com/southkorea/southkorea-maps/master/kostat/2018/json/skorea-provinces-2018-geo.json",sig:"https://raw.githubusercontent.com/southkorea/southkorea-maps/master/kostat/2018/json/skorea-municipalities-2018-geo.json",emd:"https://raw.githubusercontent.com/southkorea/southkorea-maps/master/kostat/2018/json/skorea-submunicipalities-2018-geo.json"},o7={ctprvn:"",sig:"//",emd:"//"};function xi(e){return Fn(e?.properties?.code??e?.properties?.adm_cd??e?.properties?.ADM_CD??e?.properties?.sggnm_cd??e?.properties?.SGGNM_CD??e?.properties?.sigungu_cd??e?.properties?.SIGUNGU_CD??e?.properties?.emd_cd??e?.properties?.EMD_CD??e?.properties?.CTPRVN_CD??e?.properties?.SIG_CD??e?.properties?.EMD_CD??"")}function jo(e){return String(e?.properties?.name??e?.properties?.CTP_KOR_NM??e?.properties?.SIG_KOR_NM??e?.properties?.EMD_KOR_NM??"-")}function fA(e,t){return e.map(r=>{const a=xi(r),s=jo(r),i={level:t,code:a};return{...r,id:_s(i),properties:{...r.properties,code:a,name:s,level:t,regionId:_s(i)}}})}function mA(e,t=[]){return t.length?e.filter(r=>{const a=xi(r);return t.some(s=>a.startsWith(s))}):e}function n5({title:e,indicatorId:t,year:r=2026,scope:a={mode:"national"},fixedLevel:s,lockedSigCode:i,lockedSigName:o,hideBreadcrumb:l=!1,hintText:d,variant:u="default",mapHeight:p=420,className:m,externalLevel:h,externalSelectedCode:x,onRegionSelect:y,onGoBack:N,externalColorScheme:v,hideLegendPanel:j=!1,onSubRegionsChange:E,getTooltipExtraLines:C}){const A=x2e(t),S=JSON.stringify(a),_=a.mode==="regional",O=u==="portal",[D,k]=g.useState(null),[M,F]=g.useState(null),[$,B]=g.useState(null),[P,W]=g.useState(!0),[K,G]=g.useState(null),U=g.useMemo(()=>{const Re=a.ctprvnCodes?.[0];if(!D||Re&&D.some(Ve=>xi(Ve)===Re)||!a.label)return Re;const _e=D.find(Ve=>{const At=jo(Ve);return At===a.label||At.includes(a.label)||a.label.includes(At)});return _e?xi(_e):Re},[D,a.ctprvnCodes,a.label]),te=U?[U]:a.ctprvnCodes,re=te?.[0],q=_&&te?.length===1?"sig":"ctprvn",[L,H]=g.useState(q),[ae,oe]=g.useState({ctprvn:re}),[ve,ce]=g.useState({}),[Ee,xe]=g.useState("blue"),[Te,ye]=g.useState(!0),[se,ct]=g.useState(!0),[Q,he]=g.useState(!1),$e=g.useRef(""),Z=v??Ee;g.useEffect(()=>{let Re=!0;return(async()=>{W(!0),G(null);try{const[Ve,At,Dt]=await Promise.all([fetch(uA.ctprvn),fetch(uA.sig),fetch(uA.emd)]),[ir,St,nn]=await Promise.all([Ve.json(),At.json(),Dt.json()]);if(!Re)return;k(fA(ir?.features??[],"REGION")),F(fA(St?.features??[],"SIGUNGU")),B(fA(nn?.features??[],"EUPMYEONDONG"))}catch{if(!Re)return;G("    .")}finally{Re&&W(!1)}})(),()=>{Re=!1}},[]),g.useEffect(()=>{H(s??q),oe({ctprvn:te?.[0]}),ce(a.label?{ctprvn:a.label}:{})},[S,a.label,q,te?.[0],s]),g.useEffect(()=>{s&&L!==s&&H(s)},[s,L]),g.useEffect(()=>{i&&(oe(Re=>({...Re,sig:i})),o&&ce(Re=>({...Re,sig:o})))},[i,o]),g.useEffect(()=>{if(_&&te?.length){const Re=te[0];ae.ctprvn!==Re&&oe({ctprvn:Re})}},[_,ae.ctprvn,te]),g.useEffect(()=>{_&&a.label&&!ve.ctprvn&&ce(Re=>({...Re,ctprvn:a.label}))},[_,a.label,ve.ctprvn]),g.useEffect(()=>{_&&te?.length&&L==="ctprvn"&&H("sig")},[_,te,L]),g.useEffect(()=>{if(h){if(h==="ctprvn"){H("ctprvn"),oe({}),ce({});return}if(h==="sig"&&x){const Re=x.slice(0,2),_e=x.length>2?x.slice(0,5):void 0;H("sig"),oe({ctprvn:Re,..._e?{sig:_e}:{}});const Ve=D?.find(Dt=>xi(Dt).startsWith(Re)),At=_e?M?.find(Dt=>xi(Dt)===_e):void 0;Ve&&ce({ctprvn:jo(Ve),...At?{sig:jo(At)}:{}});return}if(h==="emd"&&x){const Re=x.slice(0,2),_e=x.slice(0,5),Ve=x.length>5?x:void 0;H("emd"),oe({ctprvn:Re,sig:_e,...Ve?{emd:Ve}:{}});const At=D?.find(St=>xi(St).startsWith(Re)),Dt=M?.find(St=>xi(St)===_e),ir=Ve?$?.find(St=>xi(St)===Ve):void 0;ce({ctprvn:At?jo(At):void 0,sig:Dt?jo(Dt):void 0,...ir?{emd:jo(ir)}:{}});return}}},[h,x,D,M,$]);const je=g.useMemo(()=>D?mA(D,te):[],[D,te]),ge=g.useMemo(()=>{if(!M)return[];const Re=_?te?.[0]:ae.ctprvn;return Re?mA(M,[Re]):[]},[M,ae.ctprvn,te,_]),be=g.useMemo(()=>{const Re=i??ae.sig;return!$||!Re?[]:mA($,[Re])},[$,ae.sig,i]);g.useEffect(()=>{if(L!=="sig"||ae.sig||!ge.length)return;const Re=ge[0],_e=xi(Re);_e&&(oe(Ve=>({ctprvn:Ve.ctprvn,sig:_e})),ce(Ve=>({ctprvn:Ve.ctprvn,sig:jo(Re)})))},[L,ge,ae.sig]),g.useEffect(()=>{if(L!=="emd"||ae.emd||!be.length)return;const Re=be[0],_e=xi(Re);_e&&(oe(Ve=>({...Ve,emd:_e})),ce(Ve=>({...Ve,emd:jo(Re)})))},[L,be,ae.emd]);const it=g.useMemo(()=>L==="ctprvn"?je:L==="sig"?ge:be,[L,je,ge,be]);g.useEffect(()=>{if(!E||!it.length)return;const Re=n7(L),_e=new Set,Ve=it.map(Dt=>{const ir=xi(Dt),St=jo(Dt);return{code:ir,name:St,regionKey:{level:Re,code:ir,name:St},regionId:_s({level:Re,code:ir})}}).filter(Dt=>!Dt.code||_e.has(Dt.code)?!1:(_e.add(Dt.code),!0));if(!Ve.length)return;const At=`${Re}|${Ve.slice().sort((Dt,ir)=>Dt.code.localeCompare(ir.code,"ko-KR")).map(Dt=>`${Dt.code}:${Dt.name}`).join("|")}`;$e.current!==At&&($e.current=At,E(Ve))},[it,L,E]);const Fe=g.useMemo(()=>it.length?S2e(it,A,r):[],[it,A,r]),Et=g.useMemo(()=>Fe.map(Re=>({code:Re.code,value:Re.value})),[Fe]),Mt=(Re,_e)=>{const Ve=it.find(St=>xi(St)===_e),At=Ve?jo(Ve):_e,Dt={level:n7(L),code:_e,name:At},ir=_s(Dt);if(s){s==="ctprvn"?(oe({ctprvn:_e}),ce({ctprvn:At}),y?.({level:"sig",code:_e,name:At,regionKey:Dt,regionId:ir})):s==="sig"?(oe(St=>({ctprvn:St.ctprvn,sig:_e})),ce(St=>({ctprvn:St.ctprvn,sig:At})),y?.({level:"emd",code:_e,name:At,regionKey:Dt,regionId:ir})):(oe(St=>({...St,emd:_e})),ce(St=>({...St,emd:At})),y?.({level:"emd",code:_e,name:At,regionKey:Dt,regionId:ir}));return}if(h){L==="ctprvn"?(oe({ctprvn:_e}),ce({ctprvn:At})):L==="sig"?(oe(St=>({ctprvn:St.ctprvn,sig:_e})),ce(St=>({ctprvn:St.ctprvn,sig:At}))):(oe(St=>({...St,emd:_e})),ce(St=>({...St,emd:At}))),y?.({level:Re,code:_e,name:At,regionKey:Dt,regionId:ir});return}if(L==="ctprvn"){oe({ctprvn:_e}),ce({ctprvn:At}),H(Re),y?.({level:Re,code:_e,name:At,regionKey:Dt,regionId:ir});return}if(L==="sig"){oe(St=>({ctprvn:St.ctprvn,sig:_e})),ce(St=>({ctprvn:St.ctprvn,sig:At})),H(Re),y?.({level:Re,code:_e,name:At,regionKey:Dt,regionId:ir});return}L==="emd"&&(oe(St=>({...St,emd:_e})),ce(St=>({...St,emd:At})),y?.({level:"emd",code:_e,name:At,regionKey:Dt,regionId:ir}))},Be=()=>{s||_||(H("ctprvn"),oe({}),ce({}),N?.())},tr=()=>{if(!s&&!(_&&L==="sig")){if(L==="emd"){H("sig"),oe(Re=>({ctprvn:Re.ctprvn,sig:Re.sig})),ce(Re=>({ctprvn:Re.ctprvn,sig:Re.sig})),N?.();return}L==="sig"&&(H("ctprvn"),oe({ctprvn:ae.ctprvn}),ce({ctprvn:ve.ctprvn}),N?.())}},br=[{label:"",disabled:_,onClick:Be},...ve.ctprvn?[{label:ve.ctprvn,disabled:L==="ctprvn",onClick:()=>H("sig")}]:[],...ve.sig?[{label:ve.sig,disabled:L==="sig",onClick:()=>H("sig")}]:[],...ve.emd?[{label:ve.emd,disabled:!0}]:[]],Er=g.useMemo(()=>[...Fe].sort((Re,_e)=>_e.value-Re.value),[Fe]),yr=Fe.length?Fe.reduce((Re,_e)=>Re+_e.value,0)/Fe.length:null,Rr=Er[0]??null,zr=Er.length?Er[Er.length-1]:null,pr=Er.slice(0,5),hr=[...Er].reverse().slice(0,5),Tr=Er.length?Er[Math.floor(Er.length/2)]?.value:null,Mr=L==="ctprvn"?ae.ctprvn:L==="sig"?ae.sig:ae.emd,rt=(Mr?Fe.find(Re=>Re.code===Mr):null)??Er[0]??null,Pe=rt?.name??" ",Kt=rt?.rank??0,Pr=Fe.length,vr=Pr>1&&Kt?Math.round((1-(Kt-1)/(Pr-1))*100):Pr===1?100:0,Cn=g.useMemo(()=>Array.from({length:7}).map((Re,_e)=>r-6+_e),[r]),Ae=g.useMemo(()=>rt?j2e(rt.code,A,Cn):[],[rt,A,Cn]),Ge=g.useMemo(()=>{if(Ae.length<2)return"";const Re=Ae.map(ir=>ir.value),_e=Math.min(...Re),Ve=Math.max(...Re),At=220,Dt=70;return Ae.map((ir,St)=>{const nn=St/(Ae.length-1)*At,an=Ve===_e?.5:(ir.value-_e)/(Ve-_e),bt=Dt-an*(Dt-10)-5;return`${nn},${bt}`}).join(" ")},[Ae]),ut=g.useMemo(()=>rt?w2e(rt.code):[],[rt]),er=g.useMemo(()=>{if(!Fe.length)return[];const Re=new Array(12).fill(0),_e=Fe.map(ir=>ir.value),Ve=Math.min(..._e),At=Math.max(..._e);Fe.forEach(ir=>{const St=At===Ve?.5:(ir.value-Ve)/(At-Ve),nn=Math.min(Re.length-1,Math.floor(St*Re.length));Re[nn]+=1});const Dt=Math.max(...Re,1);return Re.map(ir=>ir/Dt)},[Fe]),mr=g.useMemo(()=>{const Re=Fe.map(_e=>_e.value);return Re.length===0?null:new E2e(Re,"quantile",7,Z)},[Fe,Z]),Or=g.useMemo(()=>i7(Z),[Z]),ft=g.useMemo(()=>mr?.getLegendBins()??[],[mr]),Le=g.useMemo(()=>mr?.getStats()??{min:0,max:0,avg:0,total:0},[mr]),We=Re=>{const _e=Re>=0?"+":"";return A.unit==="%"?`${_e}${Re.toFixed(1)}%p`:`${_e}${Ki(Math.abs(Re),A)}`},$t=g.useMemo(()=>!rt||!C?[]:C({level:L,code:rt.code,name:rt.name,value:rt.value}),[rt,C,L]);return n.jsxs("div",{className:`${O?"border border-gray-200":"border-2 border-gray-300"} bg-white ${m||""}`,children:[n.jsx("div",{className:`${O?"border-b border-gray-200":"border-b-2 border-gray-300"} px-4 py-3`,children:n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-sm font-semibold text-gray-900",children:e}),n.jsxs("p",{className:"text-xs text-gray-500",children:[A.label,"  ",o7[L]]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[_&&a.label&&n.jsxs("span",{className:"rounded-full bg-blue-50 px-2 py-1 text-blue-700",children:[a.label," "]}),n.jsxs("span",{className:"rounded-full bg-gray-100 px-2 py-1",children:[" ",r]})]})]})}),!l&&n.jsx("div",{className:"px-4 py-3",children:n.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs text-gray-500",children:[br.map((Re,_e)=>n.jsxs(Y.Fragment,{children:[n.jsx("button",{type:"button",disabled:Re.disabled,onClick:Re.onClick,className:`font-medium ${Re.disabled?"text-gray-400":"text-blue-600 hover:underline"}`,children:Re.label}),_e<br.length-1&&n.jsx("span",{children:"/"})]},`${Re.label}-${_e}`)),L!=="ctprvn"&&!(_&&L==="sig")&&n.jsx("button",{type:"button",onClick:tr,className:"ml-2 rounded-full border border-gray-200 px-2 py-0.5 text-gray-600",children:""})]})}),n.jsxs("div",{className:"px-4 pb-8",children:[!O&&Fe.length>0&&n.jsxs("div",{className:"mb-4 grid grid-cols-2 lg:grid-cols-4 gap-3 text-xs",children:[n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-3",children:[n.jsx("div",{className:"text-gray-500",children:" "}),n.jsx("div",{className:"text-base font-semibold text-gray-900",children:yr!==null?Ki(yr,A):"-"})]}),n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-3",children:[n.jsx("div",{className:"text-gray-500",children:" "}),n.jsx("div",{className:"text-sm font-semibold text-gray-900",children:Rr?.name??"-"}),n.jsx("div",{className:"text-xs text-gray-500",children:Rr?Ki(Rr.value,A):"-"})]}),n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-3",children:[n.jsx("div",{className:"text-gray-500",children:" "}),n.jsx("div",{className:"text-sm font-semibold text-gray-900",children:zr?.name??"-"}),n.jsx("div",{className:"text-xs text-gray-500",children:zr?Ki(zr.value,A):"-"})]}),n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-3",children:[n.jsx("div",{className:"text-gray-500",children:" "}),n.jsx("div",{className:"text-sm font-semibold text-gray-900",children:Pe}),n.jsx("div",{className:"text-xs text-gray-500",children:rt?Ki(rt.value,A):"-"}),$t.length>0&&n.jsx("div",{className:"mt-2 space-y-1",children:$t.slice(0,3).map((Re,_e)=>n.jsx("div",{className:"text-[11px] text-gray-500",children:Re},_e))})]})]}),(()=>{const Re=n.jsxs("div",{children:[n.jsxs("div",{className:`${O?"rounded-sm":"rounded-lg"} border border-gray-200 bg-gray-50`,style:{height:p,minHeight:p},children:[P&&n.jsx("div",{className:"flex h-full items-center justify-center text-sm text-gray-500",children:"  ..."}),K&&n.jsx("div",{className:"flex h-full items-center justify-center text-sm text-red-600",children:K}),!P&&!K&&n.jsx(g2e,{level:L,features:it,stats:Et,onSelect:Mt,indicatorLabel:A.label,unit:A.unit,year:r,valueFormatter:_e=>Ki(_e,A),colorPalette:Or,getTooltipExtraLines:C})]}),!j&&n.jsx(n.Fragment,{children:n.jsx("div",{className:"mt-3 relative rounded-xl border border-gray-200 bg-white/95 px-4 py-3",children:n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[Te&&n.jsxs("div",{className:"flex-1",children:[n.jsxs("button",{onClick:()=>ct(!se),className:"flex items-center gap-1.5 text-xs text-gray-700 hover:text-gray-900 mb-1.5 font-semibold",children:[se?n.jsx(gs,{className:"h-4 w-4"}):n.jsx(Ac,{className:"h-4 w-4"}),n.jsxs("span",{children:[A.label,"  ()"]})]}),!se&&n.jsxs("div",{className:"space-y-1.5 pl-4 border-l-2 border-gray-200",children:[ft.length>0?ft.map((_e,Ve)=>n.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[n.jsx("div",{className:"w-5 h-3.5 rounded-sm border border-gray-300",style:{backgroundColor:_e.color}}),n.jsxs("span",{className:"text-gray-700",children:[ib(_e.min)," ~ ",ib(_e.max)]}),_e.count!==void 0&&n.jsxs("span",{className:"text-gray-400",children:["(",_e.count,")"]})]},Ve)):Or.slice(0,7).map((_e,Ve)=>{const At=Fe.map(ja=>ja.value),Dt=Math.min(...At,A.scale[0]),ir=Math.max(...At,A.scale[1]),nn=(ir-Dt)/7,an=Dt+Ve*nn,bt=Ve===6?ir:Dt+(Ve+1)*nn;return n.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[n.jsx("div",{className:"w-5 h-3.5 rounded-sm border border-gray-300",style:{backgroundColor:_e}}),n.jsxs("span",{className:"text-gray-700",children:[Ki(an,A)," ~ ",Ki(bt,A)]})]},Ve)}),Le.total>0&&n.jsxs("div",{className:"mt-1.5 pt-1.5 border-t border-gray-200 text-[11px] text-gray-500",children:[n.jsxs("span",{children:[" : ",n.jsx("strong",{children:Le.total.toLocaleString()})]}),n.jsxs("span",{className:"ml-3",children:[": ",n.jsx("strong",{children:Le.avg.toLocaleString()})]})]})]}),se&&n.jsxs("div",{className:"flex items-center gap-1 pl-4",children:[Or.slice(0,7).map((_e,Ve)=>n.jsx("div",{className:"w-5 h-3 rounded-sm",style:{backgroundColor:_e}},Ve)),n.jsxs("span",{className:"ml-3 text-xs text-gray-600",children:[ib(Le.min)," ~ ",ib(Le.max)]})]})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>he(!Q),className:"flex items-center gap-1.5 h-9 px-3 text-xs text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors font-medium shadow-sm",children:[n.jsx(C8,{className:"h-4 w-4"}),n.jsx("span",{children:" "}),n.jsx(gs,{className:`h-4 w-4 transition-transform ${Q?"rotate-180":""}`})]}),Q&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>he(!1)}),n.jsxs("div",{className:"absolute right-0 top-full mt-1 w-56 bg-white border border-gray-200 rounded-xl shadow-lg z-50 p-3",children:[n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"text-xs font-semibold text-gray-700 mb-1.5 block",children:[n.jsx(iQ,{className:"h-3.5 w-3.5 inline mr-1"})," "]}),n.jsx("select",{value:Ee,onChange:_e=>xe(_e.target.value),className:"w-full px-2.5 py-1.5 text-xs border border-gray-300 rounded-lg bg-white focus:outline-none focus:ring-1 focus:ring-blue-500",children:Object.entries(A2e).map(([_e,Ve])=>n.jsx("option",{value:_e,children:Ve},_e))}),n.jsx("div",{className:"flex gap-1 mt-1.5",children:i7(Ee).slice(0,7).map((_e,Ve)=>n.jsx("div",{className:"flex-1 h-3 rounded-sm",style:{backgroundColor:_e}},Ve))})]}),n.jsx("div",{className:"border-t border-gray-200 pt-2",children:n.jsxs("button",{onClick:()=>ye(!Te),className:"flex items-center gap-2 w-full px-2.5 py-1.5 text-xs text-gray-700 hover:bg-gray-100 rounded-lg transition-colors font-medium",children:[Te?n.jsx(Rm,{className:"h-4 w-4"}):n.jsx(AC,{className:"h-4 w-4"}),n.jsx("span",{children:Te?" ":" "})]})}),n.jsx("div",{className:"border-t border-gray-200 pt-2 mt-2 text-[11px] text-gray-400",children:d??"     "})]})]})]})]})})})]});return O?Re:n.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-[minmax(0,1.6fr)_minmax(0,1fr)] gap-4",children:[Re,Fe.length>0&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-4",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-gray-500",children:" "}),n.jsx("div",{className:"text-base font-semibold text-gray-900",children:Pe})]}),n.jsx("span",{className:"rounded-full bg-slate-100 px-2 py-1 text-xs text-gray-600",children:o7[L]})]}),n.jsxs("div",{className:"mt-3 grid grid-cols-3 gap-3 text-sm",children:[n.jsxs("div",{className:"rounded-md bg-slate-50 p-2",children:[n.jsx("div",{className:"text-xs text-gray-500",children:""}),n.jsx("div",{className:"font-semibold text-gray-900",children:rt?Ki(rt.value,A):"-"})]}),n.jsxs("div",{className:"rounded-md bg-slate-50 p-2",children:[n.jsx("div",{className:"text-xs text-gray-500",children:" "}),n.jsx("div",{className:`font-semibold ${rt&&rt.yoy>=0?"text-emerald-600":"text-red-600"}`,children:rt?We(rt.yoy):"-"})]}),n.jsxs("div",{className:"rounded-md bg-slate-50 p-2",children:[n.jsx("div",{className:"text-xs text-gray-500",children:""}),n.jsx("div",{className:"font-semibold text-gray-900",children:Kt?`${Kt} / ${Pr}`:"-"})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("div",{className:"text-xs text-gray-500 mb-2",children:" 7 "}),n.jsx("svg",{width:"220",height:"70",className:"block",children:n.jsx("polyline",{points:Ge,fill:"none",stroke:"#2563eb",strokeWidth:"2"})}),n.jsxs("div",{className:"mt-1 text-[11px] text-gray-500",children:[" ",vr,"% "]})]}),n.jsxs("div",{className:"mt-4 space-y-2",children:[n.jsx("div",{className:"text-xs text-gray-500",children:" "}),ut.map(_e=>n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[n.jsx("span",{children:_e.name}),n.jsxs("span",{children:[_e.value,"%"]})]}),n.jsx("div",{className:"h-2 rounded-full bg-gray-100",children:n.jsx("div",{className:"h-2 rounded-full bg-blue-500",style:{width:`${_e.value}%`}})})]},_e.name))]})]}),n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-4",children:[n.jsx("div",{className:"text-sm font-semibold text-gray-900 mb-3",children:" "}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-gray-500 mb-2",children:" 5"}),n.jsx("div",{className:"space-y-2",children:pr.map((_e,Ve)=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("span",{className:"text-gray-700",children:[Ve+1,". ",_e.name]}),n.jsx("span",{className:"font-semibold text-gray-900",children:Ki(_e.value,A)})]},_e.code))})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-gray-500 mb-2",children:" 5"}),n.jsx("div",{className:"space-y-2",children:hr.map((_e,Ve)=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("span",{className:"text-gray-700",children:[Pr-hr.length+Ve+1,". ",_e.name]}),n.jsx("span",{className:"font-semibold text-gray-900",children:Ki(_e.value,A)})]},_e.code))})]})]})]}),n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-4",children:[n.jsx("div",{className:"text-sm font-semibold text-gray-900 mb-3",children:" "}),n.jsx("div",{className:"flex items-end gap-1 h-20",children:er.map((_e,Ve)=>n.jsx("div",{className:"w-2 rounded-sm bg-blue-200",style:{height:`${Math.round(_e*100)}%`}},`bucket-${Ve}`))}),n.jsxs("div",{className:"mt-3 text-xs text-gray-500",children:[" ",Pr,"    ",Tr?Ki(Tr,A):"-"]}),n.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["   ",vr,"% "]})]})]})]})})()]})]})}const Ec=[{id:"seoul",name:"",label:"",ctprvnCode:"11"},{id:"busan",name:"",label:"",ctprvnCode:"21"},{id:"daegu",name:"",label:"",ctprvnCode:"22"},{id:"incheon",name:"",label:"",ctprvnCode:"23"},{id:"gwangju",name:"",label:"",ctprvnCode:"24"},{id:"daejeon",name:"",label:"",ctprvnCode:"25"},{id:"ulsan",name:"",label:"",ctprvnCode:"26"},{id:"sejong",name:"",label:"",ctprvnCode:"29"},{id:"gyeonggi",name:"",label:"",ctprvnCode:"31"},{id:"gangwon",name:"",label:"",ctprvnCode:"32"},{id:"chungbuk",name:"",label:"",ctprvnCode:"33"},{id:"chungnam",name:"",label:"",ctprvnCode:"34"},{id:"jeonbuk",name:"",label:"",ctprvnCode:"35"},{id:"jeonnam",name:"",label:"",ctprvnCode:"36"},{id:"gyeongbuk",name:"",label:"",ctprvnCode:"37"},{id:"gyeongnam",name:"",label:"",ctprvnCode:"38"},{id:"jeju",name:"",label:"",ctprvnCode:"39"}];function C2e(e){return e?Ec.find(r=>e.includes(r.name)||e.includes(r.label))??Ec[0]:Ec[0]}const Lb=["","SLA "," ","MCI "," "," ","High MCI"],AT=[{level:"L0",label:"( )",tone:"text-gray-700 bg-gray-100 border-gray-200",purpose:"    ",whenToUse:"      ",actions:["    ","  ","/   "]},{level:"L1",label:"(/)",tone:"text-blue-700 bg-blue-50 border-blue-200",purpose:"    ",whenToUse:"     ",actions:["    ","  / "," (:  7) "]},{level:"L2",label:"(  )",tone:"text-orange-700 bg-orange-50 border-orange-200",purpose:"       ",whenToUse:"SLA ,  ,    ",actions:["      ","     ","2    "]},{level:"L3",label:" (2  )",tone:"text-purple-700 bg-purple-50 border-purple-200",purpose:"Stage 1     ",whenToUse:"   SLA/   ",actions:["2   ","/ ","       "]}],a5=[{id:"CASE-2026-001",stage:"Stage 1",risk:"",path:"  ",status:"",manager:"",action:"1  ",updated:"2026-02-11 09:30",quality:"",profile:{name:"",age:78,phone:"010-2481-9320",guardianPhone:"010-8821-1209"},alertTags:["SLA "," "]},{id:"CASE-2026-002",stage:"Stage 2",risk:"",path:" ",status:"",manager:"",action:" ",updated:"2026-02-11 10:15",quality:"",profile:{name:"",age:73,phone:"010-3841-5520"},alertTags:[" "]},{id:"CASE-2026-003",stage:"Stage 3",risk:"",path:" ",status:"",manager:"",action:"  ",updated:"2026-02-10 16:45",quality:"",profile:{name:"",age:81,phone:"010-5510-2840"},alertTags:[" "," "]},{id:"CASE-2026-004",stage:"Stage 1",risk:"",path:"  ",status:"",manager:"",action:"",updated:"2026-02-11 11:00",quality:"",profile:{name:"",age:66,phone:"010-7652-9213",guardianPhone:"010-4312-5591"},alertTags:[]},{id:"CASE-2026-005",stage:"Stage 2",risk:"",path:"High MCI ",status:"",manager:"",action:" ",updated:"2026-02-11 11:20",quality:"",profile:{name:"",age:75,phone:"010-4288-7712"},alertTags:["SLA ","High MCI","MCI "]},{id:"CASE-2026-006",stage:"Stage 1",risk:"",path:"  ",status:"",manager:"",action:"  ",updated:"2026-02-11 11:45",quality:"",profile:{name:"",age:69,phone:"010-6721-2098"},alertTags:[]},{id:"CASE-2026-007",stage:"Stage 3",risk:"",path:" ",status:"",manager:"",action:" ",updated:"2026-02-09 14:00",quality:"",profile:{name:"",age:84,phone:"010-9191-2504"},alertTags:["SLA "," "]},{id:"CASE-2026-008",stage:"Stage 2",risk:"",path:"MCI ",status:"",manager:"",action:"MCI  ",updated:"2026-02-10 09:50",quality:"",profile:{name:"",age:72,phone:"010-2351-9801"},alertTags:["MCI "," "]},{id:"CASE-2026-009",stage:"Stage 3",risk:"",path:"3  ",status:"",manager:"",action:"3  ",updated:"2026-02-11 08:35",quality:"",profile:{name:"",age:79,phone:"010-4089-1302"},alertTags:["SLA "," "]},{id:"CASE-2026-010",stage:"Stage 1",risk:"",path:" ",status:"",manager:"",action:" ",updated:"2026-02-10 13:20",quality:"",profile:{name:"",age:64,phone:"010-7413-8267",guardianPhone:"010-3755-6401"},alertTags:[" "]},{id:"CASE-2026-011",stage:"Stage 1",risk:"",path:"  ",status:"",manager:"",action:"  ",updated:"2026-02-11 12:05",quality:"",profile:{name:"",age:83,phone:"010-6671-2104",guardianPhone:"010-7201-5543"},alertTags:["SLA "]},{id:"CASE-2026-012",stage:"Stage 2",risk:"",path:"  ",status:"",manager:"",action:" ",updated:"2026-02-08 10:10",quality:"",profile:{name:"",age:71,phone:"010-5870-3370"},alertTags:[]},{id:"CASE-2026-013",stage:"Stage 3",risk:"",path:" ",status:"",manager:"",action:" ",updated:"2026-02-07 17:40",quality:"",profile:{name:"",age:68,phone:"010-8901-0061"},alertTags:[]},{id:"CASE-2026-014",stage:"Stage 2",risk:"",path:"  ",status:"",manager:"",action:" ",updated:"2026-02-11 07:55",quality:"",profile:{name:"",age:70,phone:"010-3520-9912"},alertTags:[" "]},{id:"CASE-2026-015",stage:"Stage 1",risk:"",path:" ",status:"",manager:"",action:" ",updated:"2026-02-09 11:25",quality:"",profile:{name:"",age:76,phone:"010-1002-4451",guardianPhone:"010-9001-1112"},alertTags:[" ","SLA "]},{id:"CASE-2026-016",stage:"Stage 2",risk:"",path:"  ",status:"",manager:"",action:" ",updated:"2026-02-09 08:10",quality:"",profile:{name:"",age:82,phone:"010-4721-2004"},alertTags:["High MCI","SLA "," "]},{id:"CASE-2026-017",stage:"Stage 3",risk:"",path:" ",status:"",manager:"",action:" ",updated:"2026-02-06 15:25",quality:"",profile:{name:"",age:74,phone:"010-7790-6631"},alertTags:[]},{id:"CASE-2026-018",stage:"Stage 1",risk:"",path:" ",status:"",manager:"",action:" ",updated:"2026-02-10 15:50",quality:"",profile:{name:"",age:63,phone:"010-8101-3321",guardianPhone:"010-7750-4012"},alertTags:[]},{id:"CASE-2026-019",stage:"Stage 2",risk:"",path:"  ",status:"",manager:"",action:"  ",updated:"2026-02-11 06:50",quality:"",profile:{name:"",age:77,phone:"010-3124-8823"},alertTags:["SLA "," "]},{id:"CASE-2026-020",stage:"Stage 3",risk:"",path:" ",status:"",manager:"",action:"  ",updated:"2026-02-08 17:05",quality:"",profile:{name:"",age:80,phone:"010-8823-2240"},alertTags:[" "," "]},{id:"CASE-2026-021",stage:"Stage 1",risk:"",path:"MCI  ",status:"",manager:"",action:" ",updated:"2026-02-10 08:45",quality:"",profile:{name:"",age:85,phone:"010-6012-5566",guardianPhone:"010-2201-8890"},alertTags:["MCI "," "]},{id:"CASE-2026-022",stage:"Stage 2",risk:"",path:" ",status:"",manager:"",action:" ",updated:"2026-02-07 13:15",quality:"",profile:{name:"",age:67,phone:"010-4781-0190"},alertTags:[]},{id:"CASE-2026-023",stage:"Stage 3",risk:"",path:"  ",status:"",manager:"",action:" ",updated:"2026-02-09 19:20",quality:"",profile:{name:"",age:72,phone:"010-2441-5567"},alertTags:[" "]},{id:"CASE-2026-024",stage:"Stage 1",risk:"",path:"  ",status:"",manager:"",action:" ",updated:"2026-02-05 16:20",quality:"",profile:{name:"",age:62,phone:"010-7140-0013"},alertTags:[]}],_2e={"1 ":"Stage 1","1":"Stage 1","Stage 1":"Stage 1","2 ":"Stage 2","2 ":"Stage 2","2":"Stage 2","Stage 2":"Stage 2",MCI:"Stage 2","High MCI":"Stage 2","3 ":"Stage 3","3":"Stage 3","3 ":"Stage 3","Stage 3":"Stage 3"};function T2e(e){if(!e)return{alertFilter:"",stageFilter:"all"};const t=e.trim();if(Lb.includes(t))return{alertFilter:t,stageFilter:"all"};const r=_2e[t];return r?{alertFilter:"",stageFilter:r}:{alertFilter:"",stageFilter:"all"}}function l7(e,t){return t===""?!0:e.alertTags.includes(t)}function B1(e){return a5.find(t=>t.id===e)}function hK(e){return!e||e.stage!=="Stage 1"?{label:"",tone:"text-blue-700 bg-blue-50 border-blue-200"}:e.status===""||e.status===""||e.alertTags.includes("SLA ")?{label:"",tone:"text-red-700 bg-red-50 border-red-200"}:e.status===""||e.alertTags.includes(" ")||e.alertTags.includes(" ")||e.alertTags.includes("MCI ")?{label:"",tone:"text-orange-700 bg-orange-50 border-orange-200"}:e.status===""?{label:"",tone:"text-blue-700 bg-blue-50 border-blue-200"}:{label:"",tone:"text-emerald-700 bg-emerald-50 border-emerald-200"}}function O2e(){return AT}function k2e(e){const t=AT[1];if(!e||e.stage!=="Stage 1")return{level:t.level,guide:t,exceptionState:null};const r=e.status===""||e.status===""||e.alertTags.includes("SLA ")||e.alertTags.includes(" "),a=e.risk===""||e.alertTags.includes(" ")||e.alertTags.includes("MCI "),s=e.status===""||e.alertTags.includes(" ");let i="L0",o=null,l;e.quality===""?(i="L0",o="",l="      "):a&&(r||s)?i="L3":r||a?i="L2":(s||e.quality==="")&&(i="L1"),!o&&e.status===""&&!r&&!a&&(o="",l="7   ");const d=AT.find(u=>u.level===i)??t;return{level:i,guide:d,exceptionState:o,exceptionReason:l}}function dg(e){return e<70?"60":e<80?"70":"80"}function R2e(e){return e?e.length===1?`${e}*`:e.length===2?`${e[0]}*`:`${e[0]}${"*".repeat(e.length-2)}${e[e.length-1]}`:"-"}function yl(e){const t=e.match(/^(\d{3})-(\d{3,4})-(\d{4})$/);if(!t)return e;const[,r,a,s]=t;return`${r}-${"*".repeat(a.length)}-${s}`}function nr(e){let t=0;for(let r=0;r<e.length;r++)t=Math.imul(31,t)+e.charCodeAt(r)|0;return(t>>>0)%1e4/1e4}function zf(e,t){return e[Math.floor(nr(t)*e.length)]}function ds(e,t,r){return new Date(e,t-1,1+r).toISOString().split("T")[0]}const P2e=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],D2e=["","","",""],I2e=["MRI","PET","BLOOD","ETC"],M2e=["CENTER_SCREEN","PUBLIC_HEALTH","HOSPITAL_REFERRAL"],L2e=["  ,  ","    ","1   ,  ","MMSE   ","   ","  ,  ","  ,  ","    "],$2e=[" "," "," ",""," "," ","",""];function F2e(e,t){const r=[],a=ds(2026,1,Math.floor(nr(`${t}-reg`)*20)+5);if(r.push(` : ${a}`),e.smsHistory.length>0&&e.smsHistory.forEach((s,i)=>{r.push(` (${s.templateId}): ${s.sentAt}  ${s.result==="SUCCESS"?"":""}`)}),e.contactStatus==="REACHED"){const s=ds(2026,1,Math.floor(nr(`${t}-cont`)*25)+10);r.push(` : ${s} ${String(9+Math.floor(nr(`${t}-ch`)*8)).padStart(2,"0")}:${String(Math.floor(nr(`${t}-cm`)*60)).padStart(2,"0")}`)}if(e.consultStatus==="IN_PROGRESS"?r.push(` : ${ds(2026,1,Math.floor(nr(`${t}-cip`)*25)+15)} (1)`):e.consultStatus==="DONE"&&r.push(` : ${ds(2026,1,Math.floor(nr(`${t}-cd`)*20)+18)} (1)`),e.reservation){const s=e.reservation.type==="CENTER_SCREEN"?" ":e.reservation.type==="PUBLIC_HEALTH"?" ":" ";r.push(` : ${e.reservation.date} ${e.reservation.time} ${s} / : ${e.reservation.reasonText.slice(0,20)}`)}return e.secondExamStatus==="SCHEDULED"?r.push(`2  : ${ds(2026,2,Math.floor(nr(`${t}-se`)*20)+5)} (${e.secondExamType||"MRI"})`):e.secondExamStatus==="DONE"?r.push(`2  : ${ds(2026,2,Math.floor(nr(`${t}-sed`)*15)+1)}`):e.secondExamStatus==="RESULT_CONFIRMED"&&(r.push(`2  : ${ds(2026,1,Math.floor(nr(`${t}-sedc`)*15)+20)}`),r.push(`2    : ${ds(2026,2,Math.floor(nr(`${t}-serc`)*10)+1)}`)),nr(`${t}-churn`)<.12&&(r.push("  (3):    "),r.push(`   1: ${ds(2026,1,Math.floor(nr(`${t}-ns`)*20)+10)}`)),r}function gK(){return P2e.map((e,t)=>{const r=`CASE-2026-${String(t+1).padStart(3,"0")}`,a=`${r}-seed`,s=nr(a),i=s<.25?"high":s<.7?"medium":"low",o=nr(`${a}-cs`)<.28?"UNREACHED":"REACHED";let l="NOT_STARTED";if(o==="REACHED"){const A=nr(`${a}-cons`);l=A<.15?"NOT_STARTED":A<.45?"IN_PROGRESS":"DONE"}let d="not_contacted";o==="REACHED"&&(l==="DONE"?d=nr(`${a}-apt`)<.55?"appointment_scheduled":"consultation_complete":d="contacted");let u="NONE";const p=nr(`${a}-se`);l==="DONE"?u=p<.35?"NONE":p<.6?"SCHEDULED":p<.82?"DONE":"RESULT_CONFIRMED":l==="IN_PROGRESS"&&p>.85&&(u="SCHEDULED");const m=u!=="NONE"?zf(I2e,`${a}-set`):void 0;let h=null;nr(`${a}-res`)<.35&&o==="REACHED"&&(h={type:zf(M2e,`${a}-rt`),date:ds(2026,2,Math.floor(nr(`${a}-rd`)*25)+3),time:`${String(9+Math.floor(nr(`${a}-rh`)*8)).padStart(2,"0")}:${nr(`${a}-rm`)<.5?"00":"30"}`,reasonText:zf(L2e,`${a}-rr`),locationText:zf($2e,`${a}-rl`)});const x=[],y=Math.floor(nr(`${a}-sms`)*4);for(let A=0;A<y;A++){const _=zf([" "," ","  ","  "],`${a}-sms-${A}`);x.push({sentAt:`${ds(2026,1,Math.floor(nr(`${a}-smsd-${A}`)*30)+1)} ${String(9+Math.floor(nr(`${a}-smsh-${A}`)*9)).padStart(2,"0")}:${String(Math.floor(nr(`${a}-smsm-${A}`)*60)).padStart(2,"0")}`,templateId:_,previewText:`[] ${_}  .`,to:`010-****-${String(1e3+t*100+A).slice(-4)}`,result:nr(`${a}-smsr-${A}`)<.85?"SUCCESS":"FAIL"})}const N=60+Math.floor(nr(`${a}-age`)*25),v=nr(`${a}-gen`)<.55?"":"",j=o==="REACHED"?ds(2026,1,Math.floor(nr(`${a}-lc`)*30)+1):null,C=F2e({contactStatus:o,consultStatus:l,secondExamStatus:u,secondExamType:m,reservation:h,smsHistory:x},a);return{id:r,patientName:e,age:N,gender:v,riskLevel:i,riskScore:i==="high"?65+Math.floor(nr(`${a}-rs`)*30):i==="medium"?35+Math.floor(nr(`${a}-rs`)*30):5+Math.floor(nr(`${a}-rs`)*30),lastContact:j,status:d,counselor:zf(D2e,`${a}-coun`),isFavorite:nr(`${a}-fav`)<.15,phone:`010-${String(1e3+Math.floor(nr(`${a}-p1`)*9e3)).padStart(4,"0")}-${String(1e3+Math.floor(nr(`${a}-p2`)*9e3)).padStart(4,"0")}`,registeredDate:ds(2026,1,Math.floor(nr(`${a}-reg`)*20)+1),secondExamStatus:u,secondExamType:m,contactStatus:o,consultStatus:l,reservation:h,autoMemo:{lastUpdatedAt:C.length>0?ds(2026,2,Math.floor(nr(`${a}-mu`)*5)+1):ds(2026,1,15),lines:C},smsHistory:x,guardianPhone:nr(`${a}-gp`)<.3?`010-${String(2e3+Math.floor(nr(`${a}-gp1`)*8e3)).padStart(4,"0")}-${String(1e3+Math.floor(nr(`${a}-gp2`)*9e3)).padStart(4,"0")}`:void 0}})}function B2e(e){const t=[];let r=0;return e.forEach(a=>{if(!a.reservation)return;r++;const s=a.reservation.type==="CENTER_SCREEN"?" ":a.reservation.type==="PUBLIC_HEALTH"?" ":" ";t.push({id:`APT-${String(r).padStart(3,"0")}`,caseId:a.id,patientName:a.patientName,patientAge:a.age,date:a.reservation.date,time:a.reservation.time,type:s,reservationType:a.reservation.type,reasonText:a.reservation.reasonText,status:nr(`${a.id}-aptst`)<.3?"confirmed":nr(`${a.id}-aptst`)<.55?"reminder_sent":nr(`${a.id}-aptst`)<.75?"pending":"completed",riskLevel:a.riskLevel,counselor:a.counselor,phone:a.phone,reminderSent:nr(`${a.id}-rem`)<.6,notes:a.reservation.reasonText,caseContactStatus:a.contactStatus,caseConsultStatus:a.consultStatus,caseSecondExamStatus:a.secondExamStatus,autoMemoRecent:a.autoMemo.lines.slice(-3)})}),e.forEach(a=>{a.secondExamStatus==="SCHEDULED"&&(r++,t.push({id:`APT-${String(r).padStart(3,"0")}`,caseId:a.id,patientName:a.patientName,patientAge:a.age,date:ds(2026,2,Math.floor(nr(`${a.id}-se-apt`)*20)+5),time:`${String(9+Math.floor(nr(`${a.id}-se-h`)*8)).padStart(2,"0")}:00`,type:`2  (${a.secondExamType||"MRI"})`,status:"confirmed",riskLevel:a.riskLevel,counselor:a.counselor,phone:a.phone,reminderSent:!1,notes:`2  (${a.secondExamType}) `,caseContactStatus:a.contactStatus,caseConsultStatus:a.consultStatus,caseSecondExamStatus:a.secondExamStatus,autoMemoRecent:a.autoMemo.lines.slice(-3)}))}),t}const pA={NONE:"",SCHEDULED:"",DONE:"",RESULT_CONFIRMED:""},hA={UNREACHED:"",REACHED:""},gA={NOT_STARTED:"",IN_PROGRESS:"",DONE:""},xA={CENTER_SCREEN:" ",PUBLIC_HEALTH:" ",HOSPITAL_REFERRAL:" "};function c7(e){return e.replace(/(\d{3})-(\d{4})-(\d{4})/,"$1-****-$3")}const xK="stage2-gate-v2",U2e="stage3-gate-v2",Pl=new Map,CT=new Map,_T=new Set;let bK=0,Av={stage:"ALL",status:"ALL",keyword:""};function s5(){bK+=1,_T.forEach(e=>e())}function i5(e){return _T.add(e),()=>_T.delete(e)}function Bd(){return bK}function Up(){return new Date().toISOString()}function gc(e){let t=0;for(let r=0;r<e.length;r+=1)t=Math.imul(31,t)+e.charCodeAt(r)|0;return(t>>>0)%1e4/1e4}function ol(e){return Number.isNaN(e)?0:Math.max(0,Math.min(1,e))}function $b(e){const t=Math.max(0,e.NORMAL),r=Math.max(0,e.MCI),a=Math.max(0,e.AD),s=t+r+a;return s<=0?{NORMAL:.33,MCI:.34,AD:.33}:{NORMAL:Number((t/s).toFixed(4)),MCI:Number((r/s).toFixed(4)),AD:Number((a/s).toFixed(4))}}function H2e(e){const r=[{key:"NORMAL",value:e.NORMAL},{key:"MCI",value:e.MCI},{key:"AD",value:e.AD}].sort((a,s)=>s.value-a.value)[0]?.key;return r==="NORMAL"?"":r==="AD"?"":"MCI"}function yK(e){return e>=70?"":e>=40?"":""}function G2e(e){const t=new Date(e);return Number.isNaN(t.getTime())?e:`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")} ${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`}function Fb(e){const t=new Date(e.includes("T")?e:e.replace(" ","T"));return Number.isNaN(t.getTime())?Up():t.toISOString()}function K2e(e){return e==="Stage 1"?1:e==="Stage 2"?2:3}function vK(e){return e===1?"Stage 1":e===2?"Stage 2":"Stage 3"}function z2e(e){return e===""?"CLOSED":e===""?"ON_HOLD":e===""||e===""?"WAITING_RESULTS":"IN_PROGRESS"}function q2e(e){return e==="CLOSED"?"":e==="ON_HOLD"?"":e==="WAITING_RESULTS"?"":e==="READY_TO_CLASSIFY"?"":e==="CLASS_CONFIRMED"||e==="NEXT_STEP_SET"?"":e==="EXCLUDED"?"":""}function W2e(e){return e>=90?"":e>=75?"":""}function V2e(e){return e.path.includes("")||e.path.includes("")?"HOSPITAL":"CENTER"}function Y2e(e,t){const r=[];return e.specialist||r.push(" "),e.cdrOrGds==null&&r.push("CDR  GDS"),e.neuroType||r.push(" "),t==="HOSPITAL"&&e.mmse==null&&r.push("MMSE"),{completed:r.length===0,missing:r}}function X2e(e){const t=[];return e.biomarker?e.biomarkerResult||t.push("  "):t.push("  "),e.imaging?e.imagingResult||t.push("  "):t.push("  "),e.performedAt||t.push("  "),{completed:t.length===0,missing:t}}function Q2e(e,t,r){const a=gc(`${e.caseId}-model2`),s=e.computed.evidence.stage2.required,i=e.legacyRisk===""?.72:e.legacyRisk===""?.5:.28,o=s.cdrOrGds==null?.35:ol(s.cdrOrGds/3),l=s.mmse==null?.35:ol((30-s.mmse)/30),d=s.neuroScore==null?.45:ol((100-s.neuroScore)/100),u=ol(i*.42+o*.31+l*.17+d*.1),p=ol(u+(a-.5)*.12),m=ol((.72-p)*1.6),h=ol(1-Math.abs(p-.5)*2.2),x=ol((p-.33)*1.7);let y=$b({NORMAL:.12+m,MCI:.16+h,AD:.1+x});const N=t??H2e(y),v=Math.round(y.MCI*100+y.AD*30+a*12),j=Math.max(0,Math.min(100,v)),E=r??yK(j);return{available:!0,probs:y,predictedLabel:N,mciScore:j,mciBand:E,modelVersion:xK,updatedAt:Up()}}function NK(e){const t=gc(`${e.caseId}-model3`),r=e.computed.model2.predictedLabel,a=e.computed.evidence.stage3.required;let s=r===""?.7:r==="MCI"?.52:.28;a.biomarkerResult==="POS"&&(s+=.14),a.biomarkerResult==="NEG"&&(s-=.08),a.biomarkerResult==="UNK"&&(s+=.03),a.imagingResult==="POS"&&(s+=.14),a.imagingResult==="NEG"&&(s-=.07),a.imagingResult==="UNK"&&(s+=.03),e.status==="ON_HOLD"&&(s+=.06),e.status==="CLOSED"&&(s-=.05);const i=ol(s+(t-.5)*.08),o=ol(i+.08+(t-.5)*.05),l=i>=.7?"HIGH":i>=.45?"MID":"LOW";let d="HIGH";return(a.biomarkerResult==="UNK"||a.imagingResult==="UNK")&&(d="MID"),a.performedAt||(d="LOW"),{available:!0,risk2yNow:i,risk2yAt2y:o,label:l,confidence:d,modelVersion:U2e,updatedAt:Up()}}function SK(e){return JSON.parse(JSON.stringify(e))}function jK(e){const t=SK(e),r=Y2e(t.computed.evidence.stage2.required,t.stage2Route),a=X2e(t.computed.evidence.stage3.required);t.computed.evidence.stage2.completed=r.completed,t.computed.evidence.stage2.missing=r.missing,t.computed.evidence.stage3.completed=a.completed,t.computed.evidence.stage3.missing=a.missing,r.completed?(!t.computed.model2.available||!t.computed.model2.probs)&&(t.computed.model2=Q2e(t)):t.computed.model2={available:!1},a.completed?(!t.computed.model3.available||t.computed.model3.risk2yNow==null)&&(t.computed.model3=NK(t)):t.computed.model3={available:!1};const s=r.missing.length+a.missing.length,i=t.legacyQuality===""?95:t.legacyQuality===""?82:64,o=t.status==="WAITING_RESULTS"||t.status==="READY_TO_CLASSIFY"?1:0,l=t.status==="IN_PROGRESS"&&t.stage>=2?1:0;return t.computed.ops={...t.computed.ops,dataQualityScore:Math.max(40,Math.min(100,i-s*4)),missingFieldCount:s,bookingPendingCount:t.computed.ops.bookingPendingCount??o,approvalsPendingCount:t.computed.ops.approvalsPendingCount??l},t}function Z2e(e,t){const r=gc(`${e.id}-stage2-required`),a=e.stage!=="Stage 1",s=a&&e.status!=="",i=a&&r>.18?Number((.5+gc(`${e.id}-cdr`)*1.8).toFixed(1)):null,o=a&&r>.22?["CERAD-K","SNSB-II","SNSB-C","LICA"][Math.floor(gc(`${e.id}-neuro`)*4)]:null,l=t==="HOSPITAL"&&a&&r>.32?Math.round(18+gc(`${e.id}-mmse`)*10):null,d=a&&r>.27?Math.round(45+gc(`${e.id}-neuro-score`)*40):null;return{specialist:s,mmse:l,cdrOrGds:i,neuroType:o,neuroScore:d}}function J2e(e){const t=gc(`${e.id}-stage3-required`);if(!(e.stage==="Stage 3"))return{biomarker:!1,imaging:!1,biomarkerResult:null,imagingResult:null,performedAt:null};const a=t>.18,s=t>.2,i=t>.45&&a&&s,o=gc(`${e.id}-stage3-result`),l=d=>d>=.66?"POS":d>=.33?"UNK":"NEG";return{biomarker:a,imaging:s,biomarkerResult:i?l(o):null,imagingResult:i?l(1-o):null,performedAt:i?Fb(e.updated):null}}function eSe(e){const t=K2e(e.stage),r=V2e(e),a=Fb(e.updated),s={caseId:e.id,stage:t,assigneeId:e.manager,region:{sido:"",sigungu:"",center:" "},patient:{name:e.profile.name,age:e.profile.age,phone:e.profile.phone,caregiverPhone:e.profile.guardianPhone},status:z2e(e.status),createdAt:a,updatedAt:Fb(e.updated),stage2Route:r,legacyRisk:e.risk,legacyQuality:e.quality,legacyTags:[...e.alertTags],computed:{evidence:{stage2:{required:Z2e(e,r),completed:!1,missing:[]},stage3:{required:J2e(e),completed:!1,missing:[]}},model2:{available:!1},model3:{available:!1},ops:{contactMode:e.path.includes("")?"AGENT":"HUMAN",lastContactAt:Fb(e.updated),bookingPendingCount:e.alertTags.includes(" ")?1:0,approvalsPendingCount:e.status===""?1:0}}};return jK(s)}function tSe(e){return e==="high"?"":e==="medium"?"":""}function rSe(e){return e.secondExamStatus==="DONE"||e.secondExamStatus==="RESULT_CONFIRMED"?"Stage 3":e.consultStatus==="DONE"||e.reservation||e.secondExamStatus==="SCHEDULED"?"Stage 2":"Stage 1"}function nSe(e,t){return e.contactStatus==="UNREACHED"?"":t==="Stage 3"?e.secondExamStatus==="RESULT_CONFIRMED"?"":e.riskLevel==="high"?"":"":t==="Stage 2"?e.consultStatus==="DONE"&&e.secondExamStatus!=="NONE"?"":"":e.consultStatus==="DONE"?"":""}function aSe(e){return e.riskScore>=70?"":e.riskScore>=45?"":""}function sSe(e,t){return t==="Stage 1"?e.contactStatus==="UNREACHED"?" ":"  ":t==="Stage 2"?e.secondExamStatus==="NONE"?"  ":e.riskLevel==="high"?"High MCI ":"MCI ":e.secondExamStatus==="RESULT_CONFIRMED"?" ":" "}function iSe(e,t,r){return t==="Stage 1"?r===""?" ":" ":t==="Stage 2"?e.secondExamStatus==="NONE"?"  ":" ":e.secondExamStatus==="RESULT_CONFIRMED"?"  ":"  "}function oSe(e,t,r){const a=new Set;return(r===""||r===""||r==="")&&a.add("SLA "),t!=="Stage 1"&&!e.reservation&&a.add(" "),t==="Stage 2"&&e.secondExamStatus==="NONE"&&a.add("MCI "),t==="Stage 3"&&e.secondExamStatus!=="RESULT_CONFIRMED"&&a.add(" "),t==="Stage 3"&&e.riskLevel==="high"&&a.add(" "),t==="Stage 2"&&e.riskLevel==="high"&&e.secondExamStatus!=="NONE"&&a.add("High MCI"),[...a]}function lSe(e,t){const r=rSe(e),a=nSe(e,r),s=`CASE-2026-${String(101+t).padStart(3,"0")}`,i=String(9+t%9).padStart(2,"0"),o=t%2===0?"00":"30";return{id:s,stage:r,risk:tSe(e.riskLevel),path:sSe(e,r),status:a,manager:e.counselor,action:iSe(e,r,a),updated:`${e.registeredDate} ${i}:${o}`,quality:aSe(e),profile:{name:e.patientName,age:e.age,phone:e.phone,guardianPhone:e.guardianPhone},alertTags:oSe(e,r,a)}}function cSe(){const e=[...a5],t=gK().slice(0,36).map((a,s)=>lSe(a,s)),r=new Set(e.map(a=>a.id));for(const a of t)r.has(a.id)||e.push(a);return e}function Qd(){if(!(Pl.size>0))for(const e of cSe()){const t=eSe(e);Pl.set(t.caseId,t),CT.set(t.caseId,[{eventId:`evt-${t.caseId}-init`,caseId:t.caseId,at:t.updatedAt,actorId:t.assigneeId??"system",type:"DATA_SYNCED",payload:{reason:"INITIALIZE_FROM_CASE_RECORDS"}}])}}function Hp(e,t){Qd();const r=Pl.get(e);if(!r)return;const a=SK(r);t(a),a.updatedAt=Up();const s=jK(a);Pl.set(e,s),s5()}function dSe(e,t,r,a){return{eventId:`evt-${e}-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,caseId:e,at:Up(),actorId:a,type:t,payload:r}}function Rc(e,t,r={},a="system"){Qd();const s=dSe(e,t,r,a),i=CT.get(e)??[];return CT.set(e,[s,...i]),s5(),s}function uSe(e,t,r){Hp(e,a=>{a.stage=2,r?.route&&(a.stage2Route=r.route),a.status="WAITING_RESULTS",a.computed.evidence.stage2.required={...a.computed.evidence.stage2.required,...t}}),Rc(e,"STAGE2_RESULTS_RECORDED",{route:r?.route,required:t},r?.actorId??"system")}function fSe(e){return $b(e===""?{NORMAL:.78,MCI:.17,AD:.05}:e==="MCI"?{NORMAL:.13,MCI:.71,AD:.16}:{NORMAL:.08,MCI:.2,AD:.72})}function mSe(e,t,r){Qd();const a=Pl.get(e);return!a||!a.computed.evidence.stage2.completed?!1:(Hp(e,s=>{const i=fSe(t),o=Math.round((i.MCI+i.AD*.3)*100);s.status="CLASS_CONFIRMED",s.computed.model2={available:!0,probs:i,predictedLabel:t,mciScore:o,mciBand:r?.mciBand??yK(o),modelVersion:xK,updatedAt:Up()}}),Rc(e,"STAGE2_CLASS_CONFIRMED",{label:t,rationale:r?.rationale},r?.actorId??"system"),!0)}function pSe(e,t,r){Hp(e,a=>{a.status="NEXT_STEP_SET",t==="STAGE3"&&(a.stage=3,a.status="IN_PROGRESS"),t==="FOLLOWUP_2Y"&&(a.status="CLOSED")}),t==="STAGE3"&&Rc(e,"STAGE_CHANGE",{from:2,to:3,reason:"MCI_CONFIRMED"},r?.actorId??"system"),Rc(e,"STAGE2_NEXT_STEP_SET",{nextStep:t,summary:r?.summary},r?.actorId??"system")}function d7(e,t,r="system"){Hp(e,a=>{a.computed.ops.bookingPendingCount=Math.max(0,t),a.status==="WAITING_RESULTS"&&(a.status="IN_PROGRESS")}),Rc(e,"BOOKING_CONFIRMED",{pendingCount:t},r)}function hSe(e,t,r="system"){Hp(e,a=>{a.stage=3,a.status="WAITING_RESULTS",a.computed.evidence.stage3.required={...a.computed.evidence.stage3.required,...t}}),Rc(e,"STAGE3_RESULTS_RECORDED",{required:t},r)}function gSe(e,t="system"){Qd();const r=Pl.get(e);return!r||!r.computed.evidence.stage3.completed?!1:(Hp(e,a=>{a.computed.model3=NK(a),a.status="IN_PROGRESS"}),Rc(e,"STAGE3_RISK_UPDATED",{},t),!0)}function xSe(e){Qd();const t=Pl.get(e);if(!t)return null;const{legacyQuality:r,legacyRisk:a,legacyTags:s,...i}=t;return i}function wK(e,t){if(t.stage&&t.stage!=="ALL"&&e.stage!==t.stage||t.status&&t.status!=="ALL"&&e.status!==t.status||t.sido&&e.region.sido!==t.sido||t.sigungu&&e.region.sigungu!==t.sigungu||t.center&&e.region.center!==t.center||t.assigneeId&&e.assigneeId!==t.assigneeId)return!1;const r=(t.keyword??"").trim().toLowerCase();return!(r.length>0&&![e.caseId,e.patient.name,e.patient.phone,e.assigneeId,e.status,e.stage].filter(Boolean).join(" ").toLowerCase().includes(r))}function EK(e){return{...Av,...e??{}}}function bSe(e){Qd();const t=EK(e);return[...Pl.values()].filter(r=>wK(r,t)).sort((r,a)=>a.updatedAt.localeCompare(r.updatedAt)).map(r=>{const{legacyQuality:a,legacyRisk:s,legacyTags:i,...o}=r;return o})}function ySe(e){return e.computed.model3.available?e.computed.model3.label==="HIGH"?"":e.computed.model3.label==="MID"?"":"":e.computed.model2.available?e.computed.model2.predictedLabel===""||e.computed.model2.mciBand===""?"":e.computed.model2.predictedLabel==="MCI"?"":"":e.legacyRisk}function vSe(e){return e.stage===1?e.computed.ops.contactMode==="AGENT"?"  ":"  ":e.stage===2?e.computed.model2.available?e.computed.model2.predictedLabel===""?"  ":e.computed.model2.predictedLabel==="MCI"?e.computed.model2.mciBand===""?"High MCI ":"MCI ":"  ":"  ":e.computed.model3.available?e.computed.model3.label==="HIGH"?" ":e.computed.model3.label==="MID"?" ":" ":" "}function NSe(e){return e.status==="WAITING_RESULTS"?"  ":e.status==="READY_TO_CLASSIFY"?"  ":e.status==="CLASS_CONFIRMED"?"  ":e.status==="NEXT_STEP_SET"?e.stage===3?"  ":"  ":e.status==="CLOSED"?"":e.status==="ON_HOLD"?" ":e.stage===3?"  ":" "}function SSe(e){const t=new Set;e.computed.ops.bookingPendingCount&&e.computed.ops.bookingPendingCount>0&&t.add(" "),e.stage===2&&!e.computed.model2.available&&t.add("MCI "),e.stage===2&&e.computed.model2.available&&e.computed.model2.predictedLabel==="MCI"&&e.computed.model2.mciBand===""&&t.add("High MCI"),e.stage===3&&!e.computed.evidence.stage3.completed&&t.add(" "),e.stage===3&&(e.computed.model3.label==="HIGH"||!e.computed.model3.available)&&t.add(" "),(e.status==="WAITING_RESULTS"||e.status==="ON_HOLD")&&t.add("SLA ");for(const r of e.legacyTags)t.add(r);return[...t]}function jSe(e){Qd();const t=Pl.get(e.caseId);if(!t)return a5[0];const r=t.computed.ops.dataQualityScore??80;return{id:t.caseId,stage:vK(t.stage),risk:ySe(t),path:vSe(t),status:q2e(t.status),manager:t.assigneeId??" ",action:NSe(t),updated:G2e(t.updatedAt),quality:W2e(r),profile:{name:t.patient.name,age:t.patient.age,phone:t.patient.phone??"010-0000-0000",guardianPhone:t.patient.caregiverPhone},alertTags:SSe(t),computed:{stage2:{modelAvailable:t.computed.model2.available,predictedLabel:t.computed.model2.predictedLabel,mciBand:t.computed.model2.mciBand,completed:t.computed.evidence.stage2.completed,missing:t.computed.evidence.stage2.missing},stage3:{modelAvailable:t.computed.model3.available,label:t.computed.model3.label,completed:t.computed.evidence.stage3.completed,missing:t.computed.evidence.stage3.missing},ops:{bookingPendingCount:t.computed.ops.bookingPendingCount,approvalsPendingCount:t.computed.ops.approvalsPendingCount,dataQualityScore:t.computed.ops.dataQualityScore}}}}function AK(e){return bSe(e).map(t=>jSe(t))}function wSe(e){const t={1:0,2:0,3:0},r=e.filter(O=>O.stage===2),a=e.filter(O=>O.stage===3);for(const O of e)t[O.stage]+=1;const s=e.filter(O=>O.stage===1&&(O.status==="OPEN"||O.status==="IN_PROGRESS"||O.status==="WAITING_RESULTS")).length,i=r.filter(O=>!O.computed.evidence.stage2.completed).length,o=r.filter(O=>O.computed.model2.available&&O.computed.model2.predictedLabel==="MCI"&&O.computed.model2.mciBand===""),l=a.filter(O=>!O.computed.evidence.stage3.completed).length,d=a.filter(O=>O.computed.model3.available&&O.computed.model3.label==="HIGH").length,u=r.filter(O=>O.computed.model2.available&&O.computed.model2.predictedLabel==="MCI").length,p=r.filter(O=>O.computed.model2.available&&O.computed.model2.predictedLabel==="MCI"&&O.computed.model2.mciBand==="").length,m=r.filter(O=>O.computed.model2.available&&O.computed.model2.predictedLabel==="MCI"&&O.computed.model2.mciBand==="").length,h=o.length,x=p+m+h,y=O=>x===0?0:Math.round(O/x*100),N=o.slice(0,3).map(O=>({id:O.caseId,age:O.patient.age,probability:`${Math.round((O.computed.model2.probs?.AD??0)*100)}%`,period:O.computed.ops.bookingPendingCount?"3":"6",nextAction:"Stage3  "})),v=[...e].sort((O,D)=>{const k=(O.computed.ops.missingFieldCount??0)+(O.computed.ops.bookingPendingCount??0)*2,M=(D.computed.ops.missingFieldCount??0)+(D.computed.ops.bookingPendingCount??0)*2;return M!==k?M-k:D.updatedAt.localeCompare(O.updatedAt)}).slice(0,4).map(O=>({id:O.caseId,name:O.patient.name,age:O.patient.age,stage:vK(O.stage),reason:O.stage===2&&!O.computed.evidence.stage2.completed?"   ":O.stage===3&&!O.computed.evidence.stage3.completed?"   ":"/   ",action:O.stage>=2?"":"",sla:O.status==="ON_HOLD"||O.status==="WAITING_RESULTS"?"":"1h "})),j=Math.max(t[1],1),E=Math.round(t[2]/j*100),C=Math.round(u/j*100),A=Math.round(o.length/j*100),S=Math.round(t[3]/j*100),_=[{name:"1 ",count:t[1],rate:100,drop:0,wait:1.2},{name:"2 ",count:t[2],rate:E,drop:Math.max(0,100-E),wait:4.2},{name:"MCI",count:u,rate:C,drop:Math.max(0,E-C),wait:6.4},{name:"High MCI",count:o.length,rate:A,drop:Math.max(0,C-A),wait:9.1},{name:"3 ",count:t[3],rate:S,drop:Math.max(0,A-S),wait:12.5}];return{contactNeeded:s,stage2Waiting:i,highRiskMci:o.length,stage3Waiting:l,churnRisk:d,stageCounts:t,pipelineData:_,mciDistribution:[{name:"Low",value:y(p),color:"#059669"},{name:"Moderate",value:y(m),color:"#d97706"},{name:"High",value:y(h),color:"#dc2626"}],highRiskMciList:N,priorityTasks:v}}function ESe(e){Qd();const t=EK(e),r=[...Pl.values()].filter(a=>wK(a,t));return wSe(r)}function ASe(){return{...Av}}function rm(e){Av={...Av,...e},s5()}function CK(e){const t=e.trim();if(t==="Stage 1"||t==="1 "){rm({stage:1});return}if(t==="Stage 2"||t==="2 "||t==="MCI"||t==="High MCI"){rm({stage:2});return}if(t==="Stage 3"||t==="3 "){rm({stage:3});return}if(t==="SLA "){rm({status:"WAITING_RESULTS"});return}rm({stage:"ALL",status:"ALL"})}function _K(){return g.useSyncExternalStore(i5,Bd,Bd)}function CSe(e){return g.useSyncExternalStore(i5,Bd,Bd),g.useMemo(()=>e?xSe(e):null,[e,Bd()])}function TK(){return g.useSyncExternalStore(i5,Bd,Bd),g.useMemo(()=>ASe(),[Bd()])}function OK(e){return{periodFrom:e?.periodFrom,periodTo:e?.periodTo,sido:e?.sido,sigungu:e?.sigungu,center:e?.center,stage:e?.stage,status:e?.status,assigneeId:e?.assigneeId,keyword:e?.keyword}}function kK(){return new Date().toISOString()}function _Se(e=180){return new Promise(t=>setTimeout(t,e))}async function RK(e,t="demo"){return await _Se(120+Math.floor(Math.random()*140)),{payload:e(),source:t}}async function TSe(e){OK(e);const t=await RK(()=>({stats:ESe(e),totalCases:AK(e).length,fetchedAt:kK()}));return{...t.payload,source:t.source}}async function OSe(e){OK(e);const t=await RK(()=>{const r=AK(e);return{items:r,total:r.length,fetchedAt:kK()}});return{...t.payload,source:t.source}}const PK=15e3,DK=30*6e4;function IK(e,t){return{...e}}function kSe(e){const t=TK(),r=_K(),a=g.useMemo(()=>IK(t),[t,e]);return xc({queryKey:["local-center","dashboard-stats",a,r],queryFn:()=>TSe(a),placeholderData:d0,staleTime:PK,gcTime:DK,refetchOnWindowFocus:!1})}function RSe(e){const t=TK(),r=_K(),a=g.useMemo(()=>IK(t),[t,e]);return xc({queryKey:["local-center","cases",a,r],queryFn:()=>OSe(a),placeholderData:d0,staleTime:PK,gcTime:DK,refetchOnWindowFocus:!1})}const Rh=({label:e,value:t,change:r,isUp:a,color:s,onClick:i})=>n.jsxs("div",{onClick:i,className:"bg-white p-5 rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-all cursor-pointer flex flex-col gap-2 group",children:[n.jsx("span",{className:"text-gray-500 text-xs font-semibold group-hover:text-blue-600 transition-colors",children:e}),n.jsxs("div",{className:"flex items-baseline justify-between",children:[n.jsx("span",{className:"text-2xl font-bold text-gray-900",children:t}),n.jsxs("div",{className:de("flex items-center text-[10px] font-bold px-1.5 py-0.5 rounded",a?"text-emerald-600 bg-emerald-50":"text-red-600 bg-red-50"),children:[a?n.jsx(S8,{size:12}):n.jsx(N8,{size:12}),r]})]}),n.jsx("div",{className:"mt-2 h-1 w-full bg-gray-100 rounded-full overflow-hidden",children:n.jsx("div",{className:de("h-full",s),style:{width:"65%"}})})]}),PSe={:"11010",:"11020",:"11030",:"11040",:"11050",:"11060",:"11070",:"11080",:"11090",:"11100",:"11110",:"11120",:"11130",:"11140",:"11150",:"11160",:"11170",:"11180",:"11190",:"11200",:"11210",:"11220",:"11230",:"11240",:"11250"};function DSe(e){const t=Ec.find(l=>e?.includes(l.name)||e?.includes(l.label))??Ec[0],r=Object.entries(PSe).find(([l])=>e?.includes(l)),a=r?.[1]??"11230",s=r?.[0]??"",i=a.slice(0,2)||t.ctprvnCode,o=Ec.find(l=>l.ctprvnCode===i)?.label??t.label;return{ctprvnCode:i,ctprvnLabel:o,sigCode:a,sigLabel:s}}const ISe={contactNeeded:0,stage2Waiting:0,highRiskMci:0,stage3Waiting:0,churnRisk:0,pipelineData:[{name:"1 ",count:0,rate:0,drop:0,wait:0},{name:"2 ",count:0,rate:0,drop:0,wait:0},{name:"MCI",count:0,rate:0,drop:0,wait:0},{name:"High MCI",count:0,rate:0,drop:0,wait:0},{name:"3 ",count:0,rate:0,drop:0,wait:0}],mciDistribution:[{name:"Low",value:0,color:"#059669"},{name:"Moderate",value:0,color:"#d97706"},{name:"High",value:0,color:"#dc2626"}],highRiskMciList:[],priorityTasks:[]};function u7({onNavigateToCases:e,onSelectCase:t,centerName:r}){const{data:a}=kSe(),s=a?.stats??ISe,i=DSe(r),[o,l]=g.useState(null),d=g.useMemo(()=>s.mciDistribution.length>0?s.mciDistribution:[{name:"Low",value:0,color:"#059669"},{name:"Moderate",value:0,color:"#d97706"},{name:"High",value:0,color:"#dc2626"}],[s.mciDistribution]),u=s.highRiskMciList,p=s.pipelineData,m=s.priorityTasks,h=x=>{CK(x),e(x)};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[n.jsx(Rh,{label:"  ",value:s.contactNeeded.toLocaleString(),change:"",isUp:!0,color:"bg-blue-600",onClick:()=>h("SLA ")}),n.jsx(Rh,{label:"2 ",value:s.stage2Waiting.toLocaleString(),change:"",isUp:!1,color:"bg-orange-500",onClick:()=>h(" ")}),n.jsx(Rh,{label:" MCI",value:s.highRiskMci.toLocaleString(),change:"",isUp:!0,color:"bg-red-600",onClick:()=>h("High MCI")}),n.jsx(Rh,{label:"3 ",value:s.stage3Waiting.toLocaleString(),change:"",isUp:!0,color:"bg-purple-600",onClick:()=>h("3 ")}),n.jsx(Rh,{label:"",value:s.churnRisk.toLocaleString(),change:"",isUp:!1,color:"bg-gray-500",onClick:()=>h(" ")})]}),n.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-gray-200 bg-gradient-to-b from-white to-slate-50/80 p-6 shadow-sm",children:[n.jsx("div",{className:"pointer-events-none absolute -right-14 -top-14 h-40 w-40 rounded-full bg-blue-100/60 blur-3xl"}),n.jsx("div",{className:"pointer-events-none absolute -left-20 bottom-0 h-28 w-52 rounded-full bg-indigo-100/40 blur-3xl"}),n.jsxs("div",{className:"relative z-10 mb-5 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-gray-900",children:"  "}),n.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:"       ."})]}),n.jsxs("div",{className:"hidden md:flex items-center gap-2 text-[10px]",children:[n.jsx("span",{className:"rounded-full border border-blue-200 bg-blue-50 px-2 py-1 font-semibold text-blue-700",children:" "}),n.jsx("span",{className:"rounded-full border border-rose-200 bg-rose-50 px-2 py-1 font-semibold text-rose-700",children:" "})]})]}),n.jsx("div",{className:"relative z-10 overflow-x-auto pb-1",children:n.jsx("div",{className:"grid min-w-[980px] grid-cols-5 gap-5",children:p.map((x,y)=>{const N=y===0?"from-blue-600 to-cyan-500":y===1?"from-indigo-600 to-blue-500":y===2?"from-sky-600 to-blue-500":y===3?"from-violet-600 to-indigo-500":"from-blue-700 to-indigo-700",v=Math.max(8,Math.min(x.rate,100)),j=o===x.name;return n.jsxs("button",{onClick:()=>h(x.name),onPointerEnter:E=>{E.pointerType!=="touch"&&l(x.name)},onPointerMove:E=>{E.pointerType!=="touch"&&l(x.name)},onPointerLeave:()=>l(E=>E===x.name?null:E),onMouseEnter:()=>l(x.name),onMouseLeave:()=>l(E=>E===x.name?null:E),onFocus:()=>l(x.name),onBlur:()=>l(E=>E===x.name?null:E),className:de("relative text-left rounded-2xl border border-slate-200 bg-white transition-all duration-200",j?"-translate-y-1 shadow-[0_18px_34px_rgba(37,99,235,0.22)]":"shadow-[0_14px_28px_rgba(15,23,42,0.08)]"),children:[n.jsx("div",{className:de("pointer-events-none absolute inset-x-4 -bottom-2 h-3 rounded-xl blur-sm transition-colors",j?"bg-blue-300/60":"bg-slate-300/60")}),n.jsxs("div",{className:"relative rounded-2xl",children:[n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"text-[11px] font-semibold tracking-wide text-slate-700",children:x.name}),n.jsxs("span",{className:"rounded-full bg-slate-100 px-2 py-0.5 text-[10px] font-semibold text-slate-500",children:["Stage ",y+1]})]}),n.jsxs("div",{className:"mt-2 flex items-end justify-between",children:[n.jsx("p",{className:"text-2xl font-bold text-slate-900 leading-none",children:x.count.toLocaleString()}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-[10px] text-slate-400",children:""}),n.jsxs("p",{className:"text-sm font-bold text-blue-700",children:[x.rate,"%"]})]})]}),n.jsx("div",{className:"mt-3",children:n.jsx("div",{className:"h-2 overflow-hidden rounded-full bg-slate-100",children:n.jsx("div",{className:de("h-full rounded-full bg-gradient-to-r",N),style:{width:`${v}%`}})})}),n.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[n.jsxs("div",{className:"rounded-lg border border-rose-100 bg-rose-50 px-2 py-1.5",children:[n.jsx("p",{className:"text-[10px] font-semibold text-rose-500",children:""}),n.jsxs("p",{className:"text-xs font-bold text-rose-700",children:[x.drop,"%"]})]}),n.jsxs("div",{className:"rounded-lg border border-amber-100 bg-amber-50 px-2 py-1.5",children:[n.jsx("p",{className:"text-[10px] font-semibold text-amber-600",children:" "}),n.jsxs("p",{className:"text-xs font-bold text-amber-700",children:[x.wait,""]})]})]})]}),y<4&&n.jsxs("div",{className:"pointer-events-none absolute top-1/2 -right-2 hidden -translate-y-1/2 md:flex items-center",children:[n.jsx("span",{className:"h-px w-3 bg-slate-200"}),n.jsx(ei,{size:12,className:"text-slate-300"})]})]})]},x.name)})})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[n.jsxs("div",{className:"lg:col-span-8 bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"p-5 border-b border-gray-100 flex items-center justify-between",children:[n.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(Qa,{className:"text-amber-500",size:18}),"  "]}),n.jsxs("button",{onClick:()=>h("SLA "),className:"text-xs font-semibold text-blue-600 hover:underline flex items-center gap-1",children:["  ",n.jsx(ei,{size:14})]})]}),n.jsx("div",{className:"flex-1 overflow-auto",children:n.jsxs("table",{className:"w-full text-left border-collapse",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-gray-50 text-[11px] font-bold text-gray-500 uppercase tracking-wider",children:[n.jsx("th",{className:"px-5 py-3 border-b border-gray-100",children:"ID"}),n.jsx("th",{className:"px-5 py-3 border-b border-gray-100",children:""}),n.jsx("th",{className:"px-5 py-3 border-b border-gray-100",children:" Stage"}),n.jsx("th",{className:"px-5 py-3 border-b border-gray-100",children:" "}),n.jsx("th",{className:"px-5 py-3 border-b border-gray-100",children:"SLA"}),n.jsx("th",{className:"px-5 py-3 border-b border-gray-100 text-right",children:" "})]})}),n.jsx("tbody",{className:"text-sm",children:m.map(x=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors group",children:[n.jsx("td",{className:"px-5 py-4 text-gray-900 group-hover:text-blue-600 cursor-pointer",onClick:()=>t(x.id,x.stage),children:x.stage==="Stage 2"||x.stage==="Stage 3"?n.jsxs("div",{className:"leading-tight",children:[n.jsx("div",{className:"font-semibold",children:x.name}),n.jsx("div",{className:"font-mono text-[11px] text-gray-500",children:x.id})]}):n.jsx("span",{className:"font-mono font-medium",children:x.id})}),n.jsxs("td",{className:"px-5 py-4 text-gray-600",children:[x.age,""]}),n.jsx("td",{className:"px-5 py-4",children:n.jsx("span",{className:de("px-2 py-0.5 rounded text-[10px] font-bold border",x.stage==="Stage 1"?"bg-emerald-50 text-emerald-700 border-emerald-100":x.stage==="Stage 2"?"bg-blue-50 text-blue-700 border-blue-100":"bg-purple-50 text-purple-700 border-purple-100"),children:x.stage})}),n.jsx("td",{className:"px-5 py-4 text-gray-600 max-w-[200px] truncate",children:x.reason}),n.jsx("td",{className:"px-5 py-4",children:n.jsx("span",{className:de("px-2 py-0.5 rounded text-[10px] font-bold",x.sla===""?"bg-red-50 text-red-700":"bg-orange-50 text-orange-700"),children:x.sla})}),n.jsx("td",{className:"px-5 py-4 text-right",children:n.jsxs("div",{className:"flex items-center justify-end gap-2",children:[n.jsx("button",{className:"p-1.5 hover:bg-gray-200 rounded text-gray-600",title:"",children:n.jsx(Ps,{size:14})}),n.jsx("button",{className:"p-1.5 hover:bg-gray-200 rounded text-gray-600",title:"",children:n.jsx(Ro,{size:14})}),n.jsx("button",{className:"p-1.5 hover:bg-gray-200 rounded text-gray-600",title:"",children:n.jsx(CC,{size:14})})]})})]},x.id))})]})}),n.jsx("div",{className:"p-3 bg-gray-50 text-[10px] text-gray-500 italic text-center",children:"*  : SLA            ."})]}),n.jsxs("div",{className:"lg:col-span-4 bg-white rounded-xl border border-gray-200 shadow-sm p-5 flex flex-col",children:[n.jsx("h3",{className:"font-bold text-gray-800 mb-4",children:"MCI  "}),n.jsxs("div",{className:"flex gap-4 items-center mb-6",children:[n.jsx("div",{className:"h-32 w-32 shrink-0",children:n.jsx(xa,{width:"100%",height:"100%",children:n.jsxs(OG,{children:[n.jsx(Ll,{data:d,cx:"50%",cy:"50%",innerRadius:30,outerRadius:45,paddingAngle:5,dataKey:"value",children:d.map((x,y)=>n.jsx(Ji,{fill:x.color},`cell-${y}`))}),n.jsx(en,{})]})})}),n.jsx("div",{className:"space-y-1.5 flex-1",children:d.map(x=>n.jsxs("div",{className:"flex items-center justify-between text-[10px] font-bold",children:[n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full",style:{backgroundColor:x.color}}),n.jsxs("span",{className:"text-gray-500",children:[x.name," MCI"]})]}),n.jsxs("span",{children:[x.value,"%"]})]},x.name))})]}),n.jsxs("div",{className:"flex-1 space-y-3",children:[n.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" MCI  (High)"}),u.length===0?n.jsx("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-3 text-[11px] text-gray-600",children:"  MCI  ."}):u.map(x=>n.jsxs("div",{className:"p-2.5 bg-gray-50 rounded-lg border border-gray-100 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"text-[11px] font-bold text-blue-600",children:[x.id," ",n.jsxs("span",{className:"text-gray-400 text-[10px]",children:["(",x.age,")"]})]}),n.jsxs("p",{className:"text-[9px] text-red-600 font-bold",children:["  ",x.probability," | ",x.period]})]}),n.jsx("button",{onClick:()=>t(x.id,"Stage 2"),className:"px-2 py-1 bg-white border border-gray-200 rounded text-[9px] font-bold text-gray-600 hover:bg-gray-100",children:x.nextAction})]},x.id))]}),n.jsx("button",{className:"mt-4 w-full py-2 bg-red-50 text-red-700 text-xs font-bold rounded-lg hover:bg-red-100 transition-colors",children:"3    "})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"relative bg-white rounded-xl border border-gray-200 shadow-sm p-5",children:[n.jsxs("h3",{className:"font-bold text-gray-800 mb-4 flex items-center justify-between",children:["   (//)",n.jsxs("div",{className:"flex gap-2",children:[n.jsx("span",{className:"text-[10px] px-2 py-0.5 bg-blue-50 rounded text-blue-700",children:i.sigLabel}),n.jsx("span",{className:"text-[10px] px-2 py-0.5 bg-gray-100 rounded text-gray-500",children:"emd "})]})]}),n.jsx(n5,{title:`${i.sigLabel} // `,indicatorId:"total_cases",year:2026,scope:{mode:"regional",ctprvnCodes:[i.ctprvnCode],label:i.ctprvnLabel},fixedLevel:"emd",lockedSigCode:i.sigCode,lockedSigName:i.sigLabel,hideBreadcrumb:!0,variant:"portal",mapHeight:320,externalColorScheme:"risk",hideLegendPanel:!0,hintText:"//     .",className:"rounded-lg overflow-hidden"}),n.jsxs("div",{className:"pointer-events-none absolute left-8 top-[92px] z-10 rounded-md border border-slate-200 bg-white/95 px-4 py-3 shadow-md backdrop-blur-sm",children:[n.jsx("p",{className:"text-[11px] font-bold text-slate-700",children:"  "}),n.jsxs("div",{className:"mt-2 space-y-1.5 text-[10px] font-semibold text-slate-600",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-[#ef4444]"}),n.jsx("span",{children:" ( )"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-[#f59e0b]"}),n.jsx("span",{children:" ( )"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-[#10b981]"}),n.jsx("span",{children:"/"})]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-5",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"font-bold text-gray-800",children:"   "}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"flex items-center gap-1.5 text-[9px] font-bold text-gray-600",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600"})," "]}),n.jsxs("div",{className:"flex items-center gap-1.5 text-[9px] font-bold text-gray-600",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-[#d97706]"})," "]}),n.jsxs("div",{className:"flex items-center gap-1.5 text-[9px] font-bold text-gray-600",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-[#059669]"})," "]})]})]}),n.jsx("div",{className:"h-64",children:n.jsx(xa,{width:"100%",height:"100%",children:n.jsxs(M1,{data:[{date:"02/05",screen:72,evaluation:65,completed:58},{date:"02/06",screen:75,evaluation:68,completed:55},{date:"02/07",screen:82,evaluation:62,completed:62},{date:"02/08",screen:80,evaluation:70,completed:65},{date:"02/09",screen:88,evaluation:74,completed:68},{date:"02/10",screen:92,evaluation:81,completed:72},{date:"02/11",screen:89,evaluation:85,completed:75}],children:[n.jsx(ms,{strokeDasharray:"3 3",vertical:!1,stroke:"#f1f5f9"}),n.jsx(Vn,{dataKey:"date",fontSize:9,axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8"}}),n.jsx(Hn,{fontSize:9,axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8"},unit:"%"}),n.jsx(en,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"},labelStyle:{fontWeight:"bold",marginBottom:"4px"}}),n.jsx($a,{type:"monotone",dataKey:"screen",stroke:"#2563eb",strokeWidth:2.5,dot:{r:3}}),n.jsx($a,{type:"monotone",dataKey:"evaluation",stroke:"#d97706",strokeWidth:2.5,dot:{r:3}}),n.jsx($a,{type:"monotone",dataKey:"completed",stroke:"#059669",strokeWidth:2.5,dot:{r:3}})]})})}),n.jsxs("div",{className:"mt-4 flex items-center justify-around border-t border-gray-50 pt-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase",children:"  "}),n.jsx("p",{className:"text-sm font-bold text-emerald-600",children:"+4.2%"})]}),n.jsx("div",{className:"w-px h-6 bg-gray-100"}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase",children:"  "}),n.jsx("p",{className:"text-sm font-bold text-red-600",children:"115%"})]})]})]})]}),n.jsx("div",{className:"p-3 bg-gray-50 text-[10px] text-gray-500 italic text-center rounded-lg",children:"*  :         100%  .      ."})]})}const MSe=[{label:"Stage 1",value:"Stage 1"},{label:"Stage 2",value:"Stage 2"},{label:"Stage 3",value:"Stage 3"}],LSe=[{label:"",value:"ALL"},{label:"Agent",value:"AGENT"},{label:"",value:"HUMAN"},{label:"",value:"UNASSIGNED"}],$Se=[{label:"",value:"ALL"},{label:"L3",value:"L3_ONLY"},{label:"L2~L3",value:"L2_L3"},{label:"L0~L1",value:"L0_L1"}],FSe=[{label:"",value:"ALL"},{label:"",value:"NOT_TRIED"},{label:" ",value:"RETRY_NEEDED"},{label:"",value:"IN_PROGRESS"},{label:"",value:"SUCCESS"}];function MK(e){const t=new Date(e.replace(" ","T"));return Number.isNaN(t.getTime())?0:t.getTime()}function BSe(e){return e.length>16?e.slice(0,16):e}function USe(e,t){const r=new Date(e.replace(" ","T"));return Number.isNaN(r.getTime())?e.slice(0,10):(r.setDate(r.getDate()+t),`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`)}function gd(e){return Math.max(0,Math.min(1,e))}function HSe(e){return Math.max(0,Math.min(100,e))}function GSe(e){return e>=85?"L3":e>=70?"L2":e>=50?"L1":"L0"}function KSe(e){return e==="L3"?"bg-red-50 text-red-700 border-red-200":e==="L2"?"bg-orange-50 text-orange-700 border-orange-200":e==="L1"?"bg-blue-50 text-blue-700 border-blue-200":"bg-gray-100 text-gray-700 border-gray-200"}function f7(e){return e==="L3"?" ":e==="L2"?"":e==="L1"?"":""}function zSe(e){return e==="L3"?"2   ":e==="L2"?"   ":e==="L1"?"/  ":"/ "}function qSe(e){return e==="AGENT"?"bg-indigo-50 text-indigo-700 border-indigo-200":e==="HUMAN"?"bg-emerald-50 text-emerald-700 border-emerald-200":"bg-gray-100 text-gray-700 border-gray-200"}function TT(e){return e==="AGENT"?"Agent":e==="HUMAN"?"":""}function WSe(e){return[...e.priorityFactors].sort((t,r)=>r.contribution-t.contribution).slice(0,3)}function VSe(e,t){return t==="ALL"?!0:t==="NOT_TRIED"?e==="":t==="RETRY_NEEDED"?e===" "||e==="":t==="IN_PROGRESS"?e==="":e===""}function YSe(e,t){return t==="ALL"?!0:t==="L3_ONLY"?e==="L3":t==="L2_L3"?e==="L3"||e==="L2":e==="L1"||e==="L0"}function XSe(e,t,r){return e.quality===""||e.profile.phone.trim().length===0?{ownerType:"UNASSIGNED",ownerName:void 0,ownerReason:"         ."}:e.path.includes("")||e.action.includes("")?{ownerType:"AGENT",ownerName:"  Agent",ownerReason:"     /   ."}:e.risk===""||e.alertTags.includes(" ")||r===""&&(t===" "||t==="")?{ownerType:"HUMAN",ownerName:e.manager,ownerReason:"         ."}:{ownerType:"HUMAN",ownerName:e.manager,ownerReason:"       ."}}function QSe(e,t,r,a){const s=e.alertTags.includes("SLA "),i=e.status===""||e.status===""||s?1:e.status===""?.5:e.status===""?.35:e.status===""?.2:0,o=a>0?(Date.now()-a)/(1e3*60*60):0,l=t===""?.6:o>=48?1:o>=24?.85:o>=12?.55:o>=6?.3:o>=3?.2:.1,d=e.risk===""?1:e.risk===""?.6:.25,u=e.alertTags.includes("High MCI")||e.alertTags.includes(" ")?.2:0,p=gd(d+u),m=t===" "||t===""?1:t===""?.6:t===""?.2:0,h=e.quality===""?.65:e.quality===""?.35:.1,x=gd(h+(r===""?.2:0)+(!e.profile.guardianPhone&&(t===""||t===" ")?.2:0)),y=[{key:"SLA_URGENCY",label:"SLA ",weight:40,value:gd(i),contribution:0},{key:"CONTACT_STALENESS",label:" ",weight:25,value:gd(l),contribution:0},{key:"RISK_LEVEL",label:" ",weight:20,value:gd(p),contribution:0},{key:"RETRY_NEEDED",label:" ",weight:10,value:gd(m),contribution:0},{key:"CHANNEL_FRICTION",label:" ",weight:5,value:gd(x),contribution:0}].map(v=>({...v,contribution:Number((v.weight*v.value).toFixed(1))})),N=Math.round(HSe(y.reduce((v,j)=>v+j.contribution,0)));return{priorityScore:N,priorityTier:GSe(N),priorityFactors:y,slaUrgencyScore:gd(i)}}function ZSe(e){return e===" "?"bg-red-50 text-red-700 border-red-200":e===""?"bg-orange-50 text-orange-700 border-orange-200":e===""?"bg-blue-50 text-blue-700 border-blue-200":e===""?"bg-emerald-50 text-emerald-700 border-emerald-200":"bg-gray-100 text-gray-700 border-gray-200"}function JSe(e){return e===""?"bg-violet-50 text-violet-700 border-violet-200":e===""?"bg-blue-50 text-blue-700 border-blue-200":"bg-emerald-50 text-emerald-700 border-emerald-200"}function eje(e){return e===" "?"bg-gray-100 text-gray-700 border-gray-200":e===" "||e==="Stage2 "?"bg-indigo-50 text-indigo-700 border-indigo-200":e===" "?"bg-violet-50 text-violet-700 border-violet-200":e===" "?"bg-blue-50 text-blue-700 border-blue-200":"bg-orange-50 text-orange-700 border-orange-200"}function tje(e){return e==="AD"?"bg-red-50 text-red-700 border-red-200":e==="MCI"?"bg-orange-50 text-orange-700 border-orange-200":e===""?"bg-emerald-50 text-emerald-700 border-emerald-200":"bg-gray-100 text-gray-700 border-gray-200"}function rje(e){return e===""?"bg-blue-50 text-blue-700 border-blue-200":"bg-amber-50 text-amber-700 border-amber-200"}function nje(e){return e==="Stage3"?"bg-violet-50 text-violet-700 border-violet-200":e===""?"bg-emerald-50 text-emerald-700 border-emerald-200":"bg-orange-50 text-orange-700 border-orange-200"}function aje(e){return e===" "?"bg-red-50 text-red-700 border-red-200":e===""?"bg-orange-50 text-orange-700 border-orange-200":"bg-emerald-50 text-emerald-700 border-emerald-200"}function sje(e){return e===""?"bg-red-50 text-red-700 border-red-200":e===""?"bg-orange-50 text-orange-700 border-orange-200":"bg-blue-50 text-blue-700 border-blue-200"}function ije(e){const t=e.status===""?"":e.status===""?"":e.status===""?"":e.status===""?" ":"",r=e.action.includes("")?"":e.action.includes("")||(t===""||t===" ")&&e.profile.guardianPhone?"":"",a=t===""&&(e.risk===""||e.alertTags.includes(" "))?"Stage2 ":t===""||t===""?" ":r!==""&&e.profile.guardianPhone?" ":"",s={" ":5,:4,:3,:2,:1},i=MK(e.updated),o=XSe(e,t,r),l=QSe(e,t,r,i),d=o.ownerType==="UNASSIGNED"?" ":o.ownerType==="AGENT"&&(l.priorityTier==="L3"||l.priorityTier==="L2")?" ":a;return{kind:"Stage 1",stage:"Stage 1",caseId:e.id,manager:e.manager,updated:e.updated,source:e,contactStatus:t,lastContactAttemptAt:BSe(e.updated),channel:r,nextAction:d,ownerType:o.ownerType,ownerName:o.ownerName,ownerReason:o.ownerReason,priorityScore:l.priorityScore,priorityTier:l.priorityTier,priorityFactors:l.priorityFactors,statusRank:s[t],lastContactMs:i,slaUrgencyScore:l.slaUrgencyScore,slaHint:e.status===""||e.status===""?e.status:void 0}}function oje(e){const t=e.computed?.stage2,r=t?.predictedLabel,a=t?.modelAvailable&&r?r===""?"AD":r===""?"":"MCI":"",s=t?.modelAvailable?"":"",i=t?.modelAvailable?a===""?"":"Stage3":" ",o=[e.path];t?.missing&&t.missing.length>0&&o.push(` ${t.missing.slice(0,2).join(", ")}`),e.alertTags.length>0&&o.push(` ${e.alertTags.slice(0,2).join(", ")}`),e.quality!==""&&o.push(` ${e.quality}`);const l={AD:4,MCI:3,:2,:1};return{kind:"Stage 2",stage:"Stage 2",caseId:e.id,manager:e.manager,updated:e.updated,source:e,classification:a,rationale:o.join("  "),confirmation:s,nextPath:i,confirmationRank:s===""?2:1,classificationRank:l[a],updatedMs:MK(e.updated)}}function lje(e){const t=e.computed?.stage3,r=t?.modelAvailable?t.label==="HIGH"?" ":t.label==="MID"?"":"":e.alertTags.includes(" ")||e.status===""?" ":"",a=r===" "?"":r===""?"":"",s=USe(e.updated,r===""?30:r===""?14:7),i=new Date(`${s}T09:00:00`).getTime();return{kind:"Stage 3",stage:"Stage 3",caseId:e.id,manager:e.manager,updated:e.updated,source:e,trackingStatus:r,recentEvent:e.action,nextEvalDate:s,intensity:a,intensityRank:a===""?3:a===""?2:1,nextEvalMs:i}}const cje={"Stage 1":{operationQuestion:"   ?  ?   ?",operationHint:"Stage 1 /   .",sortLabel:"  ",defaultSortDescending:!0,mapRow:e=>ije(e),compare:(e,t)=>{const r=e,a=t;return a.priorityScore!==r.priorityScore?a.priorityScore-r.priorityScore:a.slaUrgencyScore!==r.slaUrgencyScore?a.slaUrgencyScore-r.slaUrgencyScore:r.lastContactMs!==a.lastContactMs?r.lastContactMs-a.lastContactMs:a.statusRank-r.statusRank},searchBlob:e=>{const t=e;return[t.caseId,t.contactStatus,t.channel,t.nextAction,t.manager,TT(t.ownerType),t.ownerName??"",t.priorityTier,String(t.priorityScore)].join(" ")},summary:e=>{const t=e;return[{label:" ",value:t.length.toLocaleString(),color:"text-slate-900",icon:jl},{label:" ",value:t.filter(r=>r.contactStatus!=="").length.toLocaleString(),color:"text-blue-600",icon:Ps},{label:" ",value:t.filter(r=>r.contactStatus===" "||r.contactStatus==="").length.toLocaleString(),color:"text-red-600",icon:Gn},{label:"  ",value:t.filter(r=>r.nextAction===" ").length.toLocaleString(),color:"text-indigo-600",icon:Ro},{label:"Stage2  ",value:t.filter(r=>r.nextAction==="Stage2 ").length.toLocaleString(),color:"text-violet-600",icon:Na}]},quickActions:e=>{const t=e;return t.ownerType==="UNASSIGNED"?[{key:"precheck",label:" ",icon:Pm,tone:"text-gray-700 bg-gray-100 border-gray-200 hover:bg-gray-200"},{key:"verify-channel",label:" ",icon:ro,tone:"text-blue-700 bg-blue-50 border-blue-100 hover:bg-blue-100"}]:t.ownerType==="AGENT"?[{key:"agent-run",label:t.priorityTier==="L3"||t.priorityTier==="L2"?" Agent ":"Agent  ",icon:ro,tone:"text-indigo-700 bg-indigo-50 border-indigo-100 hover:bg-indigo-100"},{key:"agent-status",label:" ",icon:ta,tone:"text-blue-700 bg-blue-50 border-blue-100 hover:bg-blue-100"}]:[{key:"call",label:"",icon:Ps,tone:"text-emerald-700 bg-emerald-50 border-emerald-100 hover:bg-emerald-100"},{key:"guardian",label:" ",icon:zh,tone:t.source.profile.guardianPhone?"text-violet-700 bg-violet-50 border-violet-100 hover:bg-violet-100":"text-gray-400 bg-gray-100 border-gray-200",disabled:!t.source.profile.guardianPhone},{key:"reserve",label:" ",icon:Ro,tone:"text-blue-700 bg-blue-50 border-blue-100 hover:bg-blue-100"}]}},"Stage 2":{operationQuestion:"    ,  ?",operationHint:"Stage 2    .",sortLabel:"  ",defaultSortDescending:!0,mapRow:e=>oje(e),compare:(e,t)=>{const r=e,a=t;return a.confirmationRank!==r.confirmationRank?a.confirmationRank-r.confirmationRank:a.classificationRank!==r.classificationRank?a.classificationRank-r.classificationRank:a.updatedMs-r.updatedMs},searchBlob:e=>{const t=e;return[t.source.profile.name,t.caseId,t.classification,t.confirmation,t.nextPath,t.rationale,t.manager].join(" ")},summary:e=>{const t=e;return[{label:" ",value:t.length.toLocaleString(),color:"text-slate-900",icon:jl},{label:" ",value:t.filter(r=>r.confirmation==="").length.toLocaleString(),color:"text-amber-600",icon:Gn},{label:" ",value:t.filter(r=>r.confirmation==="").length.toLocaleString(),color:"text-blue-600",icon:zh},{label:"Stage3 ",value:t.filter(r=>r.nextPath==="Stage3").length.toLocaleString(),color:"text-violet-600",icon:Na},{label:"  ",value:t.filter(r=>r.nextPath===" ").length.toLocaleString(),color:"text-orange-600",icon:ta}]},quickActions:()=>[{key:"edit-classification",label:" ",icon:Pm,tone:"text-indigo-700 bg-indigo-50 border-indigo-100 hover:bg-indigo-100"},{key:"review-rationale",label:" ",icon:ta,tone:"text-blue-700 bg-blue-50 border-blue-100 hover:bg-blue-100"},{key:"move-stage3",label:"Stage3 ",icon:Na,tone:"text-violet-700 bg-violet-50 border-violet-100 hover:bg-violet-100"}]},"Stage 3":{operationQuestion:" , ,   ?",operationHint:"Stage 3 /  .",sortLabel:"  ",defaultSortDescending:!0,mapRow:e=>lje(e),compare:(e,t)=>{const r=e,a=t;return a.intensityRank!==r.intensityRank?a.intensityRank-r.intensityRank:r.nextEvalMs-a.nextEvalMs},searchBlob:e=>{const t=e;return[t.source.profile.name,t.caseId,t.trackingStatus,t.intensity,t.recentEvent,t.nextEvalDate,t.manager].join(" ")},summary:e=>{const t=e;return[{label:" ",value:t.length.toLocaleString(),color:"text-slate-900",icon:jl},{label:" ",value:t.filter(r=>r.trackingStatus===" ").length.toLocaleString(),color:"text-red-600",icon:Gn},{label:"",value:t.filter(r=>r.trackingStatus==="").length.toLocaleString(),color:"text-orange-600",icon:ta},{label:" ",value:t.filter(r=>r.intensity==="").length.toLocaleString(),color:"text-red-600",icon:zh},{label:"7  ",value:t.filter(r=>r.nextEvalMs-Date.now()<=10080*60*1e3).length.toLocaleString(),color:"text-blue-600",icon:Ro}]},quickActions:()=>[{key:"add-tracking",label:"  ",icon:ta,tone:"text-blue-700 bg-blue-50 border-blue-100 hover:bg-blue-100"},{key:"book-recheck",label:" ",icon:Ro,tone:"text-orange-700 bg-orange-50 border-orange-100 hover:bg-orange-100"},{key:"adjust-intensity",label:"  ",icon:zh,tone:"text-violet-700 bg-violet-50 border-violet-100 hover:bg-violet-100"}]}};function dje({onSelectCase:e,initialFilter:t}){const{data:r}=RSe(),a=r?.items??[],[s,i]=g.useState(""),[o,l]=g.useState("Stage 1"),[d,u]=g.useState(""),[p,m]=g.useState("ALL"),[h,x]=g.useState("ALL"),[y,N]=g.useState("ALL"),[v,j]=g.useState(!1),[E,C]=g.useState(!0),[A,S]=g.useState(null),_=g.useRef(null),O=g.useRef(null);g.useEffect(()=>{const H=T2e(t);i(H.alertFilter),l(H.stageFilter==="all"?"Stage 1":H.stageFilter)},[t]);const D=g.useMemo(()=>cje[o],[o]);g.useEffect(()=>{C(D.defaultSortDescending)},[D.defaultSortDescending,o]),g.useEffect(()=>{o!=="Stage 1"&&j(!1)},[o]),g.useEffect(()=>{if(!v)return;const H=ae=>{O.current&&(O.current.contains(ae.target)||j(!1))};return window.addEventListener("pointerdown",H),()=>window.removeEventListener("pointerdown",H)},[v]);const k=g.useMemo(()=>{const H=d.trim().toLowerCase();return a.filter(ae=>ae.stage===o).map(ae=>{const oe=D.mapRow(ae);return{item:ae,row:oe,searchBlob:D.searchBlob(oe).toLowerCase()}}).filter(ae=>H?ae.searchBlob.includes(H):!0)},[D,a,d,o]),M=g.useMemo(()=>{const H=Object.fromEntries(Lb.map(ae=>[ae,0]));H.=k.length;for(const ae of Lb)ae!==""&&(H[ae]=k.reduce((oe,ve)=>oe+(l7(ve.item,ae)?1:0),0));return H},[k]),F=g.useMemo(()=>{const H={"Stage 1":0,"Stage 2":0,"Stage 3":0};for(const ae of a)(ae.stage==="Stage 1"||ae.stage==="Stage 2"||ae.stage==="Stage 3")&&(H[ae.stage]+=1);return H},[a]),$=g.useMemo(()=>{const H=k.filter(ve=>l7(ve.item,s)).map(ve=>ve.row),oe=[...o==="Stage 1"?H.filter(ve=>{const ce=p==="ALL"?!0:ve.ownerType===p,Ee=YSe(ve.priorityTier,h),xe=VSe(ve.contactStatus,y);return ce&&Ee&&xe}):H].sort(D.compare);return E||oe.reverse(),oe},[s,D,p,h,k,E,o,y]),B=g.useMemo(()=>D.summary($),[D,$]),P=g.useMemo(()=>$.find(H=>H.caseId===A)??null,[A,$]),W=p!=="ALL"||h!=="ALL"||y!=="ALL",K=+(p!=="ALL")+ +(h!=="ALL")+ +(y!=="ALL"),G=s!==""||d.trim().length>0||o==="Stage 1"&&W,U=()=>{m("ALL"),x("ALL"),N("ALL")},te=()=>{i(""),u(""),U()},re=()=>{_.current&&(clearTimeout(_.current),_.current=null)},q=(H,ae=0)=>{if(re(),ae<=0){S(H);return}_.current=setTimeout(()=>{S(H),_.current=null},ae)},L=(H=140)=>{re(),A&&(_.current=setTimeout(()=>{S(null),_.current=null},H))};return g.useEffect(()=>()=>re(),[]),n.jsxs("div",{className:"h-full flex flex-col gap-6",children:[n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:B.map((H,ae)=>n.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:H.label}),n.jsx("p",{className:de("text-xl font-bold mt-1",H.color),children:H.value})]}),n.jsx("div",{className:de("p-2 rounded-lg bg-gray-50",H.color),children:n.jsx(H.icon,{size:20,className:"opacity-20"})})]},ae))}),n.jsx("div",{className:"flex-1 flex flex-col min-h-0",children:n.jsxs("div",{className:"flex-1 bg-white rounded-xl border border-gray-200 shadow-sm flex flex-col overflow-hidden",children:[n.jsxs("div",{className:"p-4 border-b border-gray-100 bg-gray-50/30 space-y-3",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[n.jsx("div",{className:"flex gap-2 overflow-x-auto pb-1 md:pb-0 scrollbar-hide",children:Lb.map(H=>n.jsxs("button",{onClick:()=>i(H),className:de("group whitespace-nowrap rounded-xl border px-4 py-2 text-[12px] font-bold transition-all duration-200 ease-out active:scale-[0.98]",s===H?"border-blue-600 bg-gradient-to-b from-blue-500 to-blue-700 text-white shadow-[0_10px_20px_-12px_rgba(37,99,235,0.9)]":"border-gray-200 bg-white text-gray-600 shadow-[0_2px_8px_rgba(15,23,42,0.08)] hover:-translate-y-0.5 hover:scale-[1.03] hover:border-blue-200 hover:text-blue-700 hover:shadow-[0_12px_24px_-16px_rgba(37,99,235,0.75)]"),children:[H,n.jsxs("span",{className:de("ml-1 text-[10px] font-semibold",s===H?"text-blue-100":"text-gray-400 transition-colors group-hover:text-blue-500"),children:["(",M[H].toLocaleString(),")"]})]},H))}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("button",{onClick:()=>C(H=>!H),className:"flex items-center gap-1 text-[10px] font-bold text-gray-600 bg-white px-2 py-1 border border-gray-200 rounded",children:[D.sortLabel,n.jsx(SY,{size:10})]}),n.jsx("button",{className:"p-2 text-gray-500 hover:bg-gray-100 rounded-lg border border-gray-200",title:"",children:n.jsx(hm,{size:16})})]})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsxs("span",{className:"inline-flex items-center gap-1 text-[10px] font-bold text-gray-500 bg-white border border-gray-200 rounded px-2 py-1",children:[n.jsx(Pm,{size:10}),"Stage "]}),MSe.map(H=>n.jsxs("button",{onClick:()=>l(H.value),className:de("group rounded-lg border px-3.5 py-1.5 text-[12px] font-semibold transition-all duration-200 ease-out active:scale-[0.98]",o===H.value?"border-[#163b6f] bg-gradient-to-b from-[#244f87] to-[#163b6f] text-white shadow-[0_8px_18px_-12px_rgba(22,59,111,0.9)]":"border-gray-200 bg-white text-gray-600 shadow-[0_1px_6px_rgba(15,23,42,0.06)] hover:-translate-y-0.5 hover:scale-[1.03] hover:border-[#9eb5d8] hover:text-[#163b6f] hover:shadow-[0_10px_20px_-14px_rgba(30,64,175,0.6)]"),children:[H.label,n.jsxs("span",{className:de("ml-1 text-[10px] font-semibold",o===H.value?"text-blue-100":"text-gray-400 transition-colors group-hover:text-[#295a9d]"),children:["(",F[H.value].toLocaleString(),")"]})]},H.value)),o==="Stage 1"&&n.jsxs("div",{ref:O,className:"relative",children:[n.jsxs("button",{type:"button",onClick:()=>j(H=>!H),"aria-expanded":v,className:de("inline-flex items-center gap-2 rounded-lg border px-3 py-1.5 text-[11px] font-semibold transition-colors",W?"border-blue-200 bg-blue-50 text-blue-700":"border-gray-200 bg-white text-gray-600 hover:bg-gray-50"),children:[n.jsx(Pm,{size:12})," ",K>0&&n.jsx("span",{className:"rounded bg-blue-600 px-1.5 py-0.5 text-[10px] font-bold text-white",children:K})]}),v&&n.jsx("div",{className:"absolute left-0 top-[calc(100%+8px)] z-40 w-[360px] rounded-xl border border-gray-200 bg-white p-3 shadow-xl",children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"mb-1 text-[11px] font-bold text-gray-600",children:""}),n.jsx("div",{className:"flex flex-wrap gap-1",children:LSe.map(H=>n.jsx("button",{onClick:()=>m(H.value),className:de("rounded-md border px-2 py-1 text-[11px] font-semibold transition-colors",p===H.value?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-gray-200 text-gray-600 hover:bg-gray-50"),children:H.label},H.value))})]}),n.jsxs("div",{children:[n.jsx("p",{className:"mb-1 text-[11px] font-bold text-gray-600",children:" "}),n.jsx("div",{className:"flex flex-wrap gap-1",children:$Se.map(H=>n.jsx("button",{onClick:()=>x(H.value),className:de("rounded-md border px-2 py-1 text-[11px] font-semibold transition-colors",h===H.value?"border-orange-200 bg-orange-50 text-orange-700":"border-gray-200 text-gray-600 hover:bg-gray-50"),children:H.label},H.value))})]}),n.jsxs("div",{children:[n.jsx("p",{className:"mb-1 text-[11px] font-bold text-gray-600",children:""}),n.jsx("div",{className:"flex flex-wrap gap-1",children:FSe.map(H=>n.jsx("button",{onClick:()=>N(H.value),className:de("rounded-md border px-2 py-1 text-[11px] font-semibold transition-colors",y===H.value?"border-blue-200 bg-blue-50 text-blue-700":"border-gray-200 text-gray-600 hover:bg-gray-50"),children:H.label},H.value))})]}),n.jsxs("div",{className:"flex items-center justify-between border-t border-gray-100 pt-2",children:[n.jsx("span",{className:"text-[10px] text-gray-500",children:"   ."}),n.jsx("button",{type:"button",onClick:U,className:"text-[11px] font-semibold text-blue-600 hover:text-blue-700",children:"  "})]})]})})]}),o==="Stage 1"&&n.jsx("span",{className:"text-[10px] text-gray-500",children:" //   "}),n.jsxs("div",{className:"group relative",children:[n.jsx("span",{className:"inline-flex h-7 w-7 cursor-help items-center justify-center rounded-lg border border-blue-100 bg-blue-50 text-blue-700 shadow-sm transition-colors hover:bg-blue-100",children:n.jsx(Dm,{size:13})}),n.jsxs("div",{className:"pointer-events-none invisible absolute left-0 top-full z-30 mt-2 w-[320px] rounded-lg border border-blue-100 bg-white p-3 opacity-0 shadow-xl transition-all duration-150 group-hover:visible group-hover:opacity-100",children:[n.jsx("p",{className:"text-[11px] font-bold text-blue-800",children:" "}),n.jsx("p",{className:"mt-1 text-xs text-gray-800",children:D.operationQuestion}),n.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:D.operationHint})]})]}),n.jsxs("div",{className:"ml-auto flex w-full md:w-[280px] items-center gap-2 rounded-lg border border-gray-200 bg-white px-3 py-1.5",children:[n.jsx(pg,{size:14,className:"text-gray-400"}),n.jsx("input",{value:d,onChange:H=>u(H.target.value),placeholder:"/ID///  ",className:"w-full bg-transparent text-xs text-gray-700 outline-none placeholder:text-gray-400"})]}),G&&n.jsx("button",{onClick:te,className:"text-[11px] font-semibold text-blue-600 hover:text-blue-700",children:" "})]})]}),n.jsxs("div",{className:"flex-1 overflow-auto",children:[n.jsxs("table",{className:"w-full text-left border-collapse",children:[o==="Stage 1"&&n.jsxs(n.Fragment,{children:[n.jsx("thead",{className:"sticky top-0 bg-white z-20 shadow-sm",children:n.jsxs("tr",{className:"bg-gray-50/80 text-[11px] font-bold text-gray-500 uppercase tracking-wider",children:[n.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:" "}),n.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:""}),n.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:" "}),n.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:" "}),n.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:"  "}),n.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:" "}),n.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:" "})]})}),n.jsxs("tbody",{className:"text-sm",children:[$.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"px-4 py-16 text-center text-xs text-gray-400",children:"   ."})}),$.map(H=>n.jsxs("tr",{"data-case-id":H.caseId,className:de("cursor-pointer transition-colors border-b border-gray-50 last:border-0",A===H.caseId?"bg-blue-50/60":"hover:bg-gray-50/70"),onClick:()=>e(H.caseId,H.stage),onMouseEnter:()=>q(H.caseId,30),onMouseLeave:()=>L(150),children:[n.jsxs("td",{className:"px-4 py-3.5",children:[n.jsx("p",{className:"font-mono font-medium text-gray-900",children:H.caseId}),n.jsxs("p",{className:"text-[10px] text-gray-400",children:[" ",H.manager]})]}),n.jsx("td",{className:"px-4 py-3.5",children:n.jsxs("div",{className:"group relative inline-flex flex-col",children:[n.jsx("span",{className:de("inline-flex w-fit rounded border px-2 py-0.5 text-[10px] font-semibold",qSe(H.ownerType)),children:TT(H.ownerType)}),n.jsx("p",{className:"mt-1 text-[10px] text-gray-500",children:H.ownerName??" "}),n.jsx("div",{className:"pointer-events-none invisible absolute left-0 top-[calc(100%+6px)] z-20 w-56 rounded-lg border border-gray-200 bg-white p-2 text-[11px] text-gray-700 opacity-0 shadow-xl transition-all duration-150 group-hover:visible group-hover:opacity-100",children:H.ownerReason})]})}),n.jsx("td",{className:"px-4 py-3.5",children:n.jsxs("div",{className:"group relative inline-flex flex-col",children:[n.jsxs("span",{className:de("inline-flex w-fit rounded border px-2 py-0.5 text-[10px] font-semibold",KSe(H.priorityTier)),children:[H.priorityTier,"  ",f7(H.priorityTier)]}),n.jsxs("p",{className:"mt-1 text-[10px] text-gray-500",children:[zSe(H.priorityTier),"   ",H.priorityScore]}),n.jsxs("div",{className:"pointer-events-none invisible absolute left-0 top-[calc(100%+6px)] z-20 w-60 rounded-lg border border-gray-200 bg-white p-2 text-[11px] text-gray-700 opacity-0 shadow-xl transition-all duration-150 group-hover:visible group-hover:opacity-100",children:[n.jsx("p",{className:"font-semibold text-gray-800",children:"  "}),WSe(H).map(ae=>n.jsxs("p",{className:"mt-1",children:[" ",ae.label," ",ae.contribution.toFixed(1),""]},`${H.caseId}-${ae.key}`))]})]})}),n.jsxs("td",{className:"px-4 py-3.5",children:[n.jsx("span",{className:de("rounded border px-2 py-0.5 text-[10px] font-semibold",ZSe(H.contactStatus)),children:H.contactStatus}),H.slaHint?n.jsxs("p",{className:"mt-1 text-[10px] text-gray-500",children:["SLA  : ",H.slaHint]}):null]}),n.jsx("td",{className:"px-4 py-3.5 text-xs text-gray-700",children:H.lastContactAttemptAt}),n.jsx("td",{className:"px-4 py-3.5",children:n.jsx("span",{className:de("rounded border px-2 py-0.5 text-[10px] font-semibold",JSe(H.channel)),children:H.channel})}),n.jsx("td",{className:"px-4 py-3.5",children:n.jsx("span",{className:de("rounded border px-2 py-0.5 text-[10px] font-semibold",eje(H.nextAction)),children:H.nextAction})})]},H.caseId))]})]}),o==="Stage 2"&&n.jsxs(n.Fragment,{children:[n.jsx("thead",{className:"sticky top-0 bg-white z-20 shadow-sm",children:n.jsxs("tr",{className:"bg-gray-50/80 text-[11px] font-bold text-gray-500 uppercase tracking-wider",children:[n.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:" "}),n.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:" "}),n.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:"  "}),n.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:"  "}),n.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:" "})]})}),n.jsxs("tbody",{className:"text-sm",children:[$.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"px-4 py-16 text-center text-xs text-gray-400",children:"   ."})}),$.map(H=>n.jsxs("tr",{"data-case-id":H.caseId,className:de("cursor-pointer transition-colors border-b border-gray-50 last:border-0",A===H.caseId?"bg-blue-50/60":"hover:bg-gray-50/70"),onClick:()=>e(H.caseId,H.stage),onMouseEnter:()=>q(H.caseId,30),onMouseLeave:()=>L(150),children:[n.jsxs("td",{className:"px-4 py-3.5",children:[n.jsx("p",{className:"font-medium text-gray-900",children:H.source.profile.name}),n.jsxs("p",{className:"text-[10px] text-gray-400",children:[" ",H.manager]})]}),n.jsx("td",{className:"px-4 py-3.5",children:n.jsx("span",{className:de("rounded border px-2 py-0.5 text-[10px] font-semibold",tje(H.classification)),children:H.classification})}),n.jsx("td",{className:"px-4 py-3.5 text-xs text-gray-700",children:H.rationale}),n.jsx("td",{className:"px-4 py-3.5",children:n.jsx("span",{className:de("rounded border px-2 py-0.5 text-[10px] font-semibold",rje(H.confirmation)),children:H.confirmation})}),n.jsx("td",{className:"px-4 py-3.5",children:n.jsx("span",{className:de("rounded border px-2 py-0.5 text-[10px] font-semibold",nje(H.nextPath)),children:H.nextPath})})]},H.caseId))]})]}),o==="Stage 3"&&n.jsxs(n.Fragment,{children:[n.jsx("thead",{className:"sticky top-0 bg-white z-20 shadow-sm",children:n.jsxs("tr",{className:"bg-gray-50/80 text-[11px] font-bold text-gray-500 uppercase tracking-wider",children:[n.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:" "}),n.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:" "}),n.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:"  "}),n.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:"  "}),n.jsx("th",{className:"px-4 py-3 border-b border-gray-100",children:" "})]})}),n.jsxs("tbody",{className:"text-sm",children:[$.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"px-4 py-16 text-center text-xs text-gray-400",children:"   ."})}),$.map(H=>n.jsxs("tr",{"data-case-id":H.caseId,className:de("cursor-pointer transition-colors border-b border-gray-50 last:border-0",A===H.caseId?"bg-blue-50/60":"hover:bg-gray-50/70"),onClick:()=>e(H.caseId,H.stage),onMouseEnter:()=>q(H.caseId,30),onMouseLeave:()=>L(150),children:[n.jsxs("td",{className:"px-4 py-3.5",children:[n.jsx("p",{className:"font-medium text-gray-900",children:H.source.profile.name}),n.jsxs("p",{className:"text-[10px] text-gray-400",children:[" ",H.manager]})]}),n.jsx("td",{className:"px-4 py-3.5",children:n.jsx("span",{className:de("rounded border px-2 py-0.5 text-[10px] font-semibold",aje(H.trackingStatus)),children:H.trackingStatus})}),n.jsx("td",{className:"px-4 py-3.5 text-xs text-gray-700",children:H.recentEvent}),n.jsx("td",{className:"px-4 py-3.5 text-xs font-semibold text-gray-700",children:H.nextEvalDate}),n.jsx("td",{className:"px-4 py-3.5",children:n.jsx("span",{className:de("rounded border px-2 py-0.5 text-[10px] font-semibold",sje(H.intensity)),children:H.intensity})})]},H.caseId))]})]})]}),P&&n.jsxs("div",{className:"fixed z-50 w-64 rounded-xl border border-gray-200 bg-white p-4 shadow-2xl",style:{top:(()=>{const H=document.querySelector(`tr[data-case-id="${P.caseId}"]`);if(!H)return 180;const ae=H.getBoundingClientRect(),oe=250,ve=ae.top+ae.height/2-oe/2;return Math.max(80,Math.min(ve,window.innerHeight-oe-20))})(),right:24},onMouseEnter:()=>re(),onMouseLeave:()=>L(120),children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wide text-gray-400",children:" "}),n.jsx("p",{className:de("mt-0.5 text-sm font-bold text-blue-700",P.kind==="Stage 1"?"font-mono":"font-sans"),children:P.kind==="Stage 1"?P.caseId:P.source.profile.name}),n.jsxs("p",{className:"mt-0.5 text-[11px] text-gray-500",children:[" ",P.manager]})]}),n.jsxs("div",{className:"mb-3 rounded-lg border border-gray-100 bg-gray-50 p-2 text-[11px] text-gray-700",children:[P.kind==="Stage 1"&&n.jsxs("p",{children:[TT(P.ownerType),"  ",P.priorityTier," ",f7(P.priorityTier),"(",P.priorityScore,")   ",P.contactStatus,"   ",P.nextAction]}),P.kind==="Stage 2"&&n.jsxs("p",{children:[" ",P.classification,"  ",P.confirmation,"   ",P.nextPath]}),P.kind==="Stage 3"&&n.jsxs("p",{children:[" ",P.trackingStatus,"   ",P.intensity,"   ",P.nextEvalDate]})]}),n.jsx("div",{className:"mb-3 grid grid-cols-2 gap-1.5",children:D.quickActions(P).map(H=>n.jsxs("button",{onClick:ae=>ae.stopPropagation(),disabled:H.disabled,className:de("inline-flex items-center gap-1 rounded-lg border px-2 py-2 text-[11px] font-semibold",H.tone,H.disabled?"cursor-not-allowed opacity-70":"cursor-pointer"),children:[n.jsx(H.icon,{size:12}),H.label]},`${P.caseId}-${H.key}`))}),n.jsx("button",{className:"w-full rounded-lg bg-blue-600 py-2 text-[11px] font-bold text-white hover:bg-blue-700",onClick:()=>e(P.caseId,P.stage),children:" "})]})]}),n.jsxs("div",{className:"p-3 bg-gray-50 text-[10px] text-gray-500 border-t border-gray-100 flex items-center justify-between",children:[n.jsxs("span",{children:[o,"  : 1 - ",$.length," of ",a.filter(H=>H.stage===o).length]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:"italic",children:"Stage  ///  ."}),n.jsxs("span",{className:"inline-flex items-center gap-1",children:[n.jsx(ta,{size:10}),"   "]})]})]})]})})]})}function dl(e){return String(e).padStart(2,"0")}function Td(e){return`${e.getFullYear()}-${dl(e.getMonth()+1)}-${dl(e.getDate())}`}function ob(e){const[t,r,a]=e.split("-").map(Number);return new Date(t,(r||1)-1,a||1)}function Bb(e,t){const r=new Date(e);return r.setDate(e.getDate()+t),r}function uje(e,t){const r=new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime(),a=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime();return Math.round((a-r)/(1440*60*1e3))}function fje(e){return e==="pending"?"":e==="completed"?"":e==="cancelled"?"":""}function mje(e){return e.includes("2 ")?"":e.includes("")?"":e.includes("")?"":e.includes("")?"":""}function bA(e,t){return t===""||e==="high"?"":e==="medium"?"":""}function m7(e){return e===""?{icon:Ps,chip:"bg-blue-500 text-white"}:e===""?{icon:Ro,chip:"bg-emerald-500 text-white"}:e===""?{icon:wp,chip:"bg-violet-500 text-white"}:e===""?{icon:DQ,chip:"bg-indigo-600 text-white"}:{icon:Na,chip:"bg-cyan-600 text-white"}}function p7(e){return e===""?"text-red-700 bg-red-50 border-red-100":e===""?"text-amber-700 bg-amber-50 border-amber-100":e===""?"text-gray-600 bg-gray-50 border-gray-200":e===""?"text-slate-600 bg-slate-100 border-slate-200":"text-emerald-700 bg-emerald-50 border-emerald-100"}function h7(e){return e===""?"text-red-700 bg-red-50 border-red-100":e===""?"text-orange-700 bg-orange-50 border-orange-100":"text-blue-700 bg-blue-50 border-blue-100"}function yA(e){return e==="high"?{label:"",tone:"text-red-700 bg-red-50 border-red-100"}:e==="medium"?{label:"",tone:"text-amber-700 bg-amber-50 border-amber-100"}:{label:"",tone:"text-emerald-700 bg-emerald-50 border-emerald-100"}}function g7(e){return{title:"",caseId:"",patientName:"",patientAge:"70",date:e,time:"09:00",durationMinutes:"30",type:"",status:"",priority:"",riskLevel:"medium",assignee:"",location:"",reservationType:"",contactStatus:"",consultStatus:"",secondExamStatus:"",phone:"",guardianPhone:"",reminderSent:!1,reminderChannel:"SMS",followUpRequired:!1,reasonText:"",notes:""}}function pje(e){return{title:e.title,caseId:e.caseId,patientName:e.patientName,patientAge:String(e.patientAge||70),date:e.date,time:e.time,durationMinutes:String(e.durationMinutes||30),type:e.type,status:e.status,priority:e.priority,riskLevel:e.riskLevel,assignee:e.assignee,location:e.location??"",reservationType:e.reservationType??"",contactStatus:e.contactStatus??"",consultStatus:e.consultStatus??"",secondExamStatus:e.secondExamStatus??"",phone:e.phone??"",guardianPhone:e.guardianPhone??"",reminderSent:e.reminderSent,reminderChannel:e.reminderChannel,followUpRequired:e.followUpRequired,reasonText:e.reasonText??"",notes:e.notes??""}}function hje(e){const t=gK(),r=B2e(t).slice(0,24),a=new Map(t.map(l=>[l.id,l])),s=r.map((l,d)=>{const u=fje(l.status),p=mje(l.type),m=Td(Bb(e,d%17-6)),h=d%2===0?"00":"30",x=a.get(l.caseId);return{id:`SCH-APT-${dl(d+1)}`,caseId:l.caseId,patientName:l.patientName,patientAge:l.patientAge||0,date:m,time:l.time||`${dl(9+d%8)}:${h}`,durationMinutes:p===""?60:30,type:p,status:u,priority:bA(l.riskLevel,u),riskLevel:l.riskLevel,title:l.type,assignee:l.counselor,location:x?.reservation?.locationText,reservationType:l.reservationType,contactStatus:l.caseContactStatus,consultStatus:l.caseConsultStatus,secondExamStatus:l.caseSecondExamStatus,phone:l.phone,guardianPhone:x?.guardianPhone,reminderSent:l.status==="reminder_sent"||!!l.reminderSent,reminderChannel:"SMS",followUpRequired:u===""||l.riskLevel==="high",reasonText:l.reasonText,notes:l.notes,autoMemoRecent:l.autoMemoRecent}}),i=t.filter(l=>l.contactStatus==="UNREACHED").slice(0,8).map((l,d)=>{const u=d%4===0?"":d%3===0?"":"";return{id:`SCH-CALL-${dl(d+1)}`,caseId:l.id,patientName:l.patientName,patientAge:l.age,date:Td(Bb(e,d%9-2)),time:`${dl(10+d%6)}:${d%2===0?"00":"30"}`,durationMinutes:20,type:"",status:u,priority:bA(l.riskLevel,u),riskLevel:l.riskLevel,title:"  ",assignee:l.counselor,contactStatus:l.contactStatus,consultStatus:l.consultStatus,secondExamStatus:l.secondExamStatus,phone:l.phone,guardianPhone:l.guardianPhone,reminderSent:!1,reminderChannel:"",followUpRequired:!0,reasonText:"    ",notes:"3      ",autoMemoRecent:l.autoMemo.lines.slice(-3)}}),o=t.filter(l=>l.consultStatus!=="NOT_STARTED").slice(0,8).map((l,d)=>{const u=d%2===0,p=d%5===0?"":"";return{id:`SCH-SVC-${dl(d+1)}`,caseId:l.id,patientName:l.patientName,patientAge:l.age,date:Td(Bb(e,d+1)),time:`${dl(9+d%7)}:${d%3===0?"00":"30"}`,durationMinutes:u?50:40,type:u?"":"",status:p,priority:bA(l.riskLevel,p),riskLevel:l.riskLevel,title:u?"  ":"   ",assignee:l.counselor,location:u?l.reservation?.locationText??"    ":" /",reservationType:l.reservation?.type,contactStatus:l.contactStatus,consultStatus:l.consultStatus,secondExamStatus:l.secondExamStatus,phone:l.phone,guardianPhone:l.guardianPhone,reminderSent:d%3===0,reminderChannel:u?"":"SMS",followUpRequired:l.secondExamStatus==="SCHEDULED"||p==="",reasonText:l.reservation?.reasonText??"   ",notes:l.autoMemo.lines.slice(-2).join(" / "),autoMemoRecent:l.autoMemo.lines.slice(-3)}});return[...s,...i,...o].sort((l,d)=>`${l.date} ${l.time}`.localeCompare(`${d.date} ${d.time}`))}function gje(){const[e,t]=g.useState("month"),[r,a]=g.useState(()=>{const Q=new Date;return new Date(Q.getFullYear(),Q.getMonth(),1)}),[s,i]=g.useState(()=>Td(new Date)),[o,l]=g.useState(!1),[d,u]=g.useState(null),[p,m]=g.useState(!1),[h,x]=g.useState("create"),[y,N]=g.useState(null),[v,j]=g.useState(()=>g7(Td(new Date))),[E,C]=g.useState(""),[A,S]=g.useState(""),[_,O]=g.useState(""),[D,k]=g.useState(""),M=new Date,F=Td(M),[$,B]=g.useState(()=>hje(M)),P=g.useMemo(()=>$.find(Q=>Q.id===d)??null,[$,d]),W=g.useMemo(()=>Array.from(new Set($.map(Q=>Q.assignee))).sort((Q,he)=>Q.localeCompare(he,"ko")),[$]),K=g.useMemo(()=>{const Q=E.trim().toLowerCase();return $.filter(he=>A!==""&&he.status!==A||_!==""&&he.type!==_||D!==""&&he.assignee!==D?!1:Q?[he.caseId,he.patientName,he.title,he.assignee,he.location,he.reasonText].filter(Boolean).join(" ").toLowerCase().includes(Q):!0)},[$,E,A,_,D]),G=g.useMemo(()=>{const Q=r.getFullYear(),he=r.getMonth(),$e=new Date(Q,he,1).getDay(),Z=new Date(Q,he+1,0).getDate(),je=[];for(let ge=0;ge<$e;ge+=1)je.push(null);for(let ge=1;ge<=Z;ge+=1)je.push(ge);for(;je.length%7!==0;)je.push(null);return je},[r]),U=g.useMemo(()=>{const Q=new Map;for(const he of K){const $e=Q.get(he.date)??[];$e.push(he),Q.set(he.date,$e)}for(const he of Q.values())he.sort(($e,Z)=>$e.time.localeCompare(Z.time));return Q},[K]),te=g.useMemo(()=>K.filter(Q=>{if(Q.status!==""&&Q.status!==""||Q.reminderSent)return!1;const he=uje(M,ob(Q.date));return he>=0&&he<=3}),[K,M]),re=K.filter(Q=>Q.status===""),q=K.filter(Q=>Q.riskLevel==="high"),L=U.get(F)??[],H=U.get(s)??[],ae=g.useMemo(()=>{if(e==="month")return[];if(e==="day")return[s];const Q=ob(s),he=new Date(Q);return he.setDate(Q.getDate()-Q.getDay()),Array.from({length:7}).map(($e,Z)=>Td(Bb(he,Z)))},[e,s]),oe=`${r.getFullYear()} ${r.getMonth()+1}`,ve=Q=>{a(he=>new Date(he.getFullYear(),he.getMonth()+Q,1))},ce=()=>{C(""),S(""),O(""),k("")},Ee=()=>{x("create"),N(null),j(g7(s)),m(!0)},xe=Q=>{u(Q),l(!0)},Te=()=>{P&&(x("edit"),N(P.id),j(pje(P)),l(!1),m(!0))},ye=(Q,he)=>{j($e=>({...$e,[Q]:he}))},se=()=>{if(!v.title.trim()||!v.caseId.trim()||!v.patientName.trim()||!v.date||!v.time||!v.assignee.trim()){window.alert(" (,  ID, , , , ) .");return}const Q=Number(v.patientAge),he=Number(v.durationMinutes),$e=v.notes.trim(),Z=h==="create"?`SCH-${Date.now()}`:y??`SCH-${Date.now()}`,je={id:Z,caseId:v.caseId.trim(),patientName:v.patientName.trim(),patientAge:Number.isFinite(Q)&&Q>0?Math.round(Q):0,date:v.date,time:v.time,durationMinutes:Number.isFinite(he)&&he>0?Math.round(he):30,type:v.type,status:v.status,priority:v.priority,riskLevel:v.riskLevel,title:v.title.trim(),assignee:v.assignee.trim(),location:v.location.trim()||void 0,reservationType:v.reservationType||void 0,contactStatus:v.contactStatus||void 0,consultStatus:v.consultStatus||void 0,secondExamStatus:v.secondExamStatus||void 0,phone:v.phone.trim()||void 0,guardianPhone:v.guardianPhone.trim()||void 0,reminderSent:v.reminderSent,reminderChannel:v.reminderChannel,followUpRequired:v.followUpRequired,reasonText:v.reasonText.trim()||void 0,notes:$e||void 0,autoMemoRecent:$e?$e.split(`
`).map(be=>be.trim()).filter(Boolean).slice(0,3).map(be=>`: ${be}`):void 0};h==="create"?B(be=>[je,...be]):(B(be=>be.map(it=>it.id===Z?je:it)),u(Z),l(!0));const ge=ob(je.date);i(je.date),a(new Date(ge.getFullYear(),ge.getMonth(),1)),m(!1),N(null)},ct=()=>{!P||!window.confirm("  ?")||(B(he=>he.filter($e=>$e.id!==P.id)),u(null),l(!1))};return n.jsxs("div",{className:"space-y-5",children:[te.length>0&&n.jsx("section",{className:"rounded-xl border border-amber-200 bg-amber-50 px-4 py-3",children:n.jsxs("div",{className:"flex items-center justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(_Y,{size:16,className:"text-amber-700"}),n.jsxs("p",{className:"text-sm font-semibold text-amber-900",children:["   ",te.length,""]})]}),n.jsx("span",{className:"rounded-md border border-amber-300 bg-white px-2.5 py-1 text-[11px] font-semibold text-amber-800",children:"3  / "})]})}),n.jsxs("section",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2 xl:grid-cols-4",children:[n.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[n.jsx("p",{className:"text-[11px] font-semibold text-gray-500",children:"  "}),n.jsx("p",{className:"mt-1 text-2xl font-bold text-gray-900",children:K.length}),n.jsxs("p",{className:"mt-1 text-[11px] text-gray-500",children:[" ",$.length," "]})]}),n.jsxs("div",{className:"rounded-xl border border-blue-200 bg-blue-50 p-4",children:[n.jsx("p",{className:"text-[11px] font-semibold text-blue-700",children:" "}),n.jsx("p",{className:"mt-1 text-2xl font-bold text-blue-900",children:L.length}),n.jsx("p",{className:"mt-1 text-[11px] text-blue-700",children:"   "})]}),n.jsxs("div",{className:"rounded-xl border border-red-200 bg-red-50 p-4",children:[n.jsx("p",{className:"text-[11px] font-semibold text-red-700",children:" "}),n.jsx("p",{className:"mt-1 text-2xl font-bold text-red-900",children:re.length}),n.jsx("p",{className:"mt-1 text-[11px] text-red-700",children:"SLA  "})]}),n.jsxs("div",{className:"rounded-xl border border-orange-200 bg-orange-50 p-4",children:[n.jsx("p",{className:"text-[11px] font-semibold text-orange-700",children:" "}),n.jsx("p",{className:"mt-1 text-2xl font-bold text-orange-900",children:q.length}),n.jsx("p",{className:"mt-1 text-[11px] text-orange-700",children:"  "})]})]}),n.jsx("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:n.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[n.jsxs("div",{className:"min-w-[220px] flex-1",children:[n.jsx(It,{className:"text-xs text-gray-600",children:""}),n.jsxs("div",{className:"relative mt-1.5",children:[n.jsx(pg,{size:14,className:"pointer-events-none absolute left-2.5 top-1/2 -translate-y-1/2 text-gray-400"}),n.jsx(Ir,{value:E,onChange:Q=>C(Q.target.value),className:"pl-8",placeholder:" ID, , , "})]})]}),n.jsxs("div",{className:"w-[150px]",children:[n.jsx(It,{className:"text-xs text-gray-600",children:""}),n.jsx("select",{value:A,onChange:Q=>S(Q.target.value),className:"mt-1.5 h-9 w-full rounded-md border border-gray-200 bg-white px-3 text-sm outline-none focus:ring-2 focus:ring-blue-200",children:["","","","","",""].map(Q=>n.jsx("option",{value:Q,children:Q},Q))})]}),n.jsxs("div",{className:"w-[150px]",children:[n.jsx(It,{className:"text-xs text-gray-600",children:""}),n.jsx("select",{value:_,onChange:Q=>O(Q.target.value),className:"mt-1.5 h-9 w-full rounded-md border border-gray-200 bg-white px-3 text-sm outline-none focus:ring-2 focus:ring-blue-200",children:["","","","","",""].map(Q=>n.jsx("option",{value:Q,children:Q},Q))})]}),n.jsxs("div",{className:"w-[150px]",children:[n.jsx(It,{className:"text-xs text-gray-600",children:""}),n.jsxs("select",{value:D,onChange:Q=>k(Q.target.value),className:"mt-1.5 h-9 w-full rounded-md border border-gray-200 bg-white px-3 text-sm outline-none focus:ring-2 focus:ring-blue-200",children:[n.jsx("option",{value:"",children:""}),W.map(Q=>n.jsx("option",{value:Q,children:Q},Q))]})]}),n.jsxs(Nt,{variant:"outline",onClick:ce,className:"h-9",children:[n.jsx(Pm,{size:14,className:"mr-1"})," "]})]})}),n.jsxs("div",{className:"grid grid-cols-1 gap-5 xl:grid-cols-12",children:[n.jsxs("section",{className:"xl:col-span-8 rounded-xl border border-gray-200 bg-white shadow-sm",children:[n.jsx("header",{className:"border-b border-gray-100 px-4 py-3",children:n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900",children:oe}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("button",{onClick:()=>ve(-1),className:"rounded border border-gray-200 p-1 text-gray-600 hover:bg-gray-50",children:n.jsx(Tm,{size:15})}),n.jsx("button",{onClick:()=>ve(1),className:"rounded border border-gray-200 p-1 text-gray-600 hover:bg-gray-50",children:n.jsx(ei,{size:15})})]}),n.jsx("button",{onClick:()=>{const Q=new Date;a(new Date(Q.getFullYear(),Q.getMonth(),1)),i(Td(Q))},className:"text-xs font-semibold text-gray-500 hover:text-gray-800",children:""})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-1 text-[11px] font-semibold",children:["month","week","day"].map(Q=>n.jsx("button",{onClick:()=>t(Q),className:de("rounded-md px-2.5 py-1",e===Q?"bg-white text-gray-900 shadow-sm":"text-gray-500"),children:Q==="month"?"":Q==="week"?"":""},Q))}),n.jsxs("button",{onClick:Ee,className:"inline-flex items-center gap-1 rounded-md bg-[#163b6f] px-3 py-1.5 text-xs font-semibold text-white",children:[n.jsx(A8,{size:13})," "]})]})]})}),n.jsx("div",{className:"px-3 pb-3 pt-2",children:e==="month"?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"grid grid-cols-7 border-b border-gray-100 pb-2 text-center text-[10px] font-bold uppercase tracking-wider text-gray-400",children:["","","","","","",""].map(Q=>n.jsx("div",{children:Q},Q))}),n.jsx("div",{className:"grid grid-cols-7 gap-1 pt-2",children:G.map((Q,he)=>{if(!Q)return n.jsx("div",{className:"min-h-[92px] rounded-lg border border-transparent bg-gray-50/40"},`empty-${he}`);const $e=`${r.getFullYear()}-${dl(r.getMonth()+1)}-${dl(Q)}`,Z=U.get($e)??[],je=$e===F,ge=$e===s;return n.jsxs("button",{onClick:()=>i($e),className:de("min-h-[92px] rounded-lg border p-2 text-left transition-colors",ge?"border-blue-300 bg-blue-50":"border-gray-100 bg-white hover:border-gray-200 hover:bg-gray-50",je&&!ge?"border-emerald-300":""),children:[n.jsxs("div",{className:"mb-1 flex items-center justify-between",children:[n.jsx("span",{className:de("inline-flex h-5 w-5 items-center justify-center rounded-full text-[10px] font-bold",je?"bg-emerald-500 text-white":"text-gray-600"),children:Q}),n.jsx("span",{className:"text-[10px] text-gray-400",children:Z.length?`${Z.length}`:""})]}),n.jsxs("div",{className:"space-y-1",children:[Z.slice(0,3).map(be=>{const it=m7(be.type),Fe=it.icon;return n.jsxs("button",{onClick:Et=>{Et.stopPropagation(),xe(be.id)},className:de("flex w-full items-center gap-1 rounded px-1 py-0.5 text-[10px] font-semibold transition-opacity hover:opacity-90",it.chip,be.riskLevel==="high"?"ring-1 ring-red-300":""),children:[n.jsx(Fe,{size:9}),n.jsxs("span",{className:"truncate",children:[be.time," ",be.patientName]})]},be.id)}),Z.length>3?n.jsxs("p",{className:"text-[10px] text-gray-500",children:["+",Z.length-3,""]}):null]})]},$e)})}),n.jsx("div",{className:"mt-3 grid grid-cols-2 gap-2 border-t border-gray-100 pt-3 text-[11px] md:grid-cols-5",children:["","","","",""].map(Q=>{const $e=m7(Q).icon;return n.jsxs("div",{className:"inline-flex items-center gap-1 rounded border border-gray-100 bg-gray-50 px-2 py-1 text-gray-600",children:[n.jsx($e,{size:11}),Q]},Q)})})]}):n.jsx("div",{className:"space-y-3 pt-2",children:ae.map(Q=>{const he=U.get(Q)??[],$e=ob(Q).toLocaleDateString("ko-KR",{month:"long",day:"numeric",weekday:"short"});return n.jsxs("section",{className:"rounded-lg border border-gray-200",children:[n.jsxs("header",{className:"flex items-center justify-between border-b border-gray-100 px-3 py-2",children:[n.jsx("button",{onClick:()=>i(Q),className:de("text-sm font-semibold",Q===s?"text-blue-700":"text-gray-800"),children:$e}),n.jsxs("span",{className:"text-[11px] text-gray-500",children:[he.length,""]})]}),n.jsx("div",{className:"space-y-2 p-2",children:he.length===0?n.jsx("p",{className:"rounded-md border border-gray-100 bg-gray-50 px-3 py-2 text-xs text-gray-500",children:"  ."}):he.map(Z=>n.jsxs("button",{onClick:()=>xe(Z.id),className:"w-full rounded-md border border-gray-100 bg-white px-3 py-2 text-left text-xs transition-colors hover:border-blue-200 hover:bg-blue-50/30",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsxs("p",{className:"font-semibold text-gray-900",children:[Z.time,"  ",Z.title]}),n.jsx("span",{className:de("rounded border px-1.5 py-0.5 text-[10px] font-semibold",p7(Z.status)),children:Z.status})]}),n.jsxs("p",{className:"mt-1 text-[11px] text-gray-600",children:[Z.caseId,"  ",Z.patientName,"   ",Z.assignee]})]},Z.id))})]},Q)})})})]}),n.jsxs("aside",{className:"space-y-4 xl:col-span-4 xl:sticky xl:top-4 xl:self-start xl:max-h-[calc(100vh-132px)] xl:overflow-y-auto xl:pr-1",children:[n.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[n.jsxs("h3",{className:"flex items-center gap-2 text-sm font-bold text-gray-900",children:[n.jsx(Bv,{size:14,className:"text-blue-600"})," "]}),n.jsx("div",{className:"mt-3 space-y-2",children:L.length===0?n.jsx("p",{className:"rounded-md border border-gray-100 bg-gray-50 px-3 py-2 text-xs text-gray-500",children:"  ."}):L.map(Q=>n.jsxs("button",{onClick:()=>xe(Q.id),className:"w-full rounded-md border border-gray-100 bg-gray-50 px-3 py-2 text-left text-xs transition-colors hover:border-blue-200 hover:bg-blue-50/40",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsxs("p",{className:"font-semibold text-gray-800",children:[Q.time,"  ",Q.title]}),n.jsx("span",{className:de("rounded border px-1.5 py-0.5 text-[10px] font-semibold",h7(Q.priority)),children:Q.priority})]}),n.jsxs("p",{className:"mt-1 text-[11px] text-gray-500",children:[Q.caseId,"  ",Q.patientName]})]},Q.id))})]}),n.jsxs("section",{className:"rounded-xl border border-red-200 bg-red-50 p-4",children:[n.jsxs("h3",{className:"flex items-center gap-2 text-sm font-bold text-red-800",children:[n.jsx(Gn,{size:14})," "]}),n.jsx("div",{className:"mt-3 space-y-2",children:re.length===0?n.jsx("p",{className:"rounded-md border border-red-100 bg-white px-3 py-2 text-xs text-red-700",children:"  ."}):re.slice(0,8).map(Q=>n.jsxs("button",{onClick:()=>xe(Q.id),className:"w-full rounded-md border border-red-100 bg-white px-3 py-2 text-left text-xs transition-colors hover:border-red-200 hover:bg-red-50",children:[n.jsxs("p",{className:"font-semibold text-gray-900",children:[Q.caseId,"  ",Q.patientName]}),n.jsx("p",{className:"mt-0.5 text-red-700",children:Q.title}),n.jsxs("p",{className:"mt-1 text-[11px] text-gray-500",children:[Q.date," ",Q.time]})]},Q.id))})]}),n.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[n.jsx("h3",{className:"text-sm font-bold text-gray-900",children:"  "}),n.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:s}),n.jsx("div",{className:"mt-3 space-y-2",children:H.length===0?n.jsx("p",{className:"rounded-md border border-gray-100 bg-gray-50 px-3 py-2 text-xs text-gray-500",children:"   ."}):H.map(Q=>{const he=yA(Q.riskLevel);return n.jsxs("button",{onClick:()=>xe(Q.id),className:"w-full rounded-md border border-gray-100 bg-gray-50 px-3 py-2 text-left text-xs transition-colors hover:border-gray-200 hover:bg-white",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsxs("p",{className:"font-semibold text-gray-900",children:[Q.time,"  ",Q.type]}),n.jsx("span",{className:de("rounded border px-1.5 py-0.5 text-[10px] font-semibold",he.tone),children:he.label})]}),n.jsx("p",{className:"mt-1 text-gray-700",children:Q.title}),n.jsxs("p",{className:"mt-1 text-[11px] text-gray-500",children:[Q.caseId,"   ",Q.assignee]})]},Q.id)})})]})]})]}),n.jsx(Gu,{open:p,onOpenChange:m,children:n.jsxs(Ku,{className:"max-h-[85vh] max-w-3xl overflow-y-auto",children:[n.jsxs(ry,{children:[n.jsx(ny,{children:h==="create"?" ":" "}),n.jsx(DC,{children:"v1         ."})]}),n.jsxs("div",{className:"space-y-4 py-2",children:[n.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(It,{children:" *"}),n.jsx(Ir,{value:v.title,onChange:Q=>ye("title",Q.target.value),className:"mt-1.5"})]}),n.jsxs("div",{children:[n.jsx(It,{children:" ID *"}),n.jsx(Ir,{value:v.caseId,onChange:Q=>ye("caseId",Q.target.value),className:"mt-1.5"})]}),n.jsxs("div",{children:[n.jsx(It,{children:" *"}),n.jsx(Ir,{value:v.patientName,onChange:Q=>ye("patientName",Q.target.value),className:"mt-1.5"})]}),n.jsxs("div",{children:[n.jsx(It,{children:""}),n.jsx(Ir,{type:"number",min:0,value:v.patientAge,onChange:Q=>ye("patientAge",Q.target.value),className:"mt-1.5"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-4",children:[n.jsxs("div",{children:[n.jsx(It,{children:" *"}),n.jsx(Ir,{type:"date",value:v.date,onChange:Q=>ye("date",Q.target.value),className:"mt-1.5"})]}),n.jsxs("div",{children:[n.jsx(It,{children:" *"}),n.jsx(Ir,{type:"time",value:v.time,onChange:Q=>ye("time",Q.target.value),className:"mt-1.5"})]}),n.jsxs("div",{children:[n.jsx(It,{children:"()"}),n.jsx(Ir,{type:"number",min:10,step:10,value:v.durationMinutes,onChange:Q=>ye("durationMinutes",Q.target.value),className:"mt-1.5"})]}),n.jsxs("div",{children:[n.jsx(It,{children:" *"}),n.jsx(Ir,{value:v.assignee,onChange:Q=>ye("assignee",Q.target.value),className:"mt-1.5"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-4",children:[n.jsxs("div",{children:[n.jsx(It,{children:" "}),n.jsx("select",{value:v.type,onChange:Q=>ye("type",Q.target.value),className:"mt-1.5 h-9 w-full rounded-md border border-gray-200 bg-white px-3 text-sm outline-none focus:ring-2 focus:ring-blue-200",children:["","","","",""].map(Q=>n.jsx("option",{value:Q,children:Q},Q))})]}),n.jsxs("div",{children:[n.jsx(It,{children:""}),n.jsx("select",{value:v.status,onChange:Q=>ye("status",Q.target.value),className:"mt-1.5 h-9 w-full rounded-md border border-gray-200 bg-white px-3 text-sm outline-none focus:ring-2 focus:ring-blue-200",children:["","","","",""].map(Q=>n.jsx("option",{value:Q,children:Q},Q))})]}),n.jsxs("div",{children:[n.jsx(It,{children:""}),n.jsx("select",{value:v.priority,onChange:Q=>ye("priority",Q.target.value),className:"mt-1.5 h-9 w-full rounded-md border border-gray-200 bg-white px-3 text-sm outline-none focus:ring-2 focus:ring-blue-200",children:["","",""].map(Q=>n.jsx("option",{value:Q,children:Q},Q))})]}),n.jsxs("div",{children:[n.jsx(It,{children:""}),n.jsxs("select",{value:v.riskLevel,onChange:Q=>ye("riskLevel",Q.target.value),className:"mt-1.5 h-9 w-full rounded-md border border-gray-200 bg-white px-3 text-sm outline-none focus:ring-2 focus:ring-blue-200",children:[n.jsx("option",{value:"high",children:""}),n.jsx("option",{value:"medium",children:""}),n.jsx("option",{value:"low",children:""})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(It,{children:" (v1 )"}),n.jsxs("select",{value:v.reservationType,onChange:Q=>ye("reservationType",Q.target.value),className:"mt-1.5 h-9 w-full rounded-md border border-gray-200 bg-white px-3 text-sm outline-none focus:ring-2 focus:ring-blue-200",children:[n.jsx("option",{value:"",children:" "}),Object.keys(xA).map(Q=>n.jsx("option",{value:Q,children:xA[Q]},Q))]})]}),n.jsxs("div",{children:[n.jsx(It,{children:""}),n.jsx(Ir,{value:v.location,onChange:Q=>ye("location",Q.target.value),className:"mt-1.5"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(It,{children:""}),n.jsx(Ir,{value:v.phone,onChange:Q=>ye("phone",Q.target.value),className:"mt-1.5",placeholder:"010-1234-5678"})]}),n.jsxs("div",{children:[n.jsx(It,{children:" "}),n.jsx(Ir,{value:v.guardianPhone,onChange:Q=>ye("guardianPhone",Q.target.value),className:"mt-1.5",placeholder:"010-8765-4321"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx(It,{children:" (v1)"}),n.jsxs("select",{value:v.contactStatus,onChange:Q=>ye("contactStatus",Q.target.value),className:"mt-1.5 h-9 w-full rounded-md border border-gray-200 bg-white px-3 text-sm outline-none focus:ring-2 focus:ring-blue-200",children:[n.jsx("option",{value:"",children:" "}),Object.keys(hA).map(Q=>n.jsx("option",{value:Q,children:hA[Q]},Q))]})]}),n.jsxs("div",{children:[n.jsx(It,{children:" (v1)"}),n.jsxs("select",{value:v.consultStatus,onChange:Q=>ye("consultStatus",Q.target.value),className:"mt-1.5 h-9 w-full rounded-md border border-gray-200 bg-white px-3 text-sm outline-none focus:ring-2 focus:ring-blue-200",children:[n.jsx("option",{value:"",children:" "}),Object.keys(gA).map(Q=>n.jsx("option",{value:Q,children:gA[Q]},Q))]})]}),n.jsxs("div",{children:[n.jsx(It,{children:"2 (v1)"}),n.jsxs("select",{value:v.secondExamStatus,onChange:Q=>ye("secondExamStatus",Q.target.value),className:"mt-1.5 h-9 w-full rounded-md border border-gray-200 bg-white px-3 text-sm outline-none focus:ring-2 focus:ring-blue-200",children:[n.jsx("option",{value:"",children:" "}),Object.keys(pA).map(Q=>n.jsx("option",{value:Q,children:pA[Q]},Q))]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(It,{children:" "}),n.jsx("select",{value:v.reminderChannel,onChange:Q=>ye("reminderChannel",Q.target.value),className:"mt-1.5 h-9 w-full rounded-md border border-gray-200 bg-white px-3 text-sm outline-none focus:ring-2 focus:ring-blue-200",children:["SMS","",""].map(Q=>n.jsx("option",{value:Q,children:Q},Q))})]}),n.jsxs("div",{className:"flex items-center gap-6 pt-7",children:[n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-gray-700",children:[n.jsx("input",{type:"checkbox",checked:v.reminderSent,onChange:Q=>ye("reminderSent",Q.target.checked),className:"h-4 w-4 rounded border-gray-300"}),"  "]}),n.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-gray-700",children:[n.jsx("input",{type:"checkbox",checked:v.followUpRequired,onChange:Q=>ye("followUpRequired",Q.target.checked),className:"h-4 w-4 rounded border-gray-300"})," "]})]})]}),n.jsxs("div",{children:[n.jsx(It,{children:"/ "}),n.jsx(Oo,{value:v.reasonText,onChange:Q=>ye("reasonText",Q.target.value),className:"mt-1.5",rows:2})]}),n.jsxs("div",{children:[n.jsx(It,{children:" "}),n.jsx(Oo,{value:v.notes,onChange:Q=>ye("notes",Q.target.value),className:"mt-1.5",rows:3})]})]}),n.jsxs(PC,{className:"gap-2 sm:gap-0",children:[n.jsx(Nt,{variant:"outline",onClick:()=>m(!1),children:""}),n.jsx(Nt,{onClick:se,children:h==="create"?"":" "})]})]})}),n.jsx(Gu,{open:o,onOpenChange:l,children:n.jsxs(Ku,{className:"max-w-2xl",children:[n.jsxs(ry,{children:[n.jsx(ny,{children:" "}),n.jsx(DC,{children:"    /"})]}),P?n.jsxs("div",{className:"space-y-4 py-2",children:[n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-3",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[n.jsx("p",{className:"text-base font-bold text-gray-900",children:P.title}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("span",{className:de("rounded border px-2 py-0.5 text-[10px] font-semibold",p7(P.status)),children:P.status}),n.jsx("span",{className:de("rounded border px-2 py-0.5 text-[10px] font-semibold",h7(P.priority)),children:P.priority}),n.jsx("span",{className:de("rounded border px-2 py-0.5 text-[10px] font-semibold",yA(P.riskLevel).tone),children:yA(P.riskLevel).label})]})]}),n.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[P.caseId,"  ",P.patientName]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[n.jsxs("div",{className:"rounded-lg border border-gray-200 p-3",children:[n.jsx("p",{className:"text-xs text-gray-500",children:" "}),n.jsxs("p",{className:"mt-1 font-semibold text-gray-900",children:[P.date," ",P.time," (",P.durationMinutes,")"]})]}),n.jsxs("div",{className:"rounded-lg border border-gray-200 p-3",children:[n.jsx("p",{className:"text-xs text-gray-500",children:" "}),n.jsx("p",{className:"mt-1 font-semibold text-gray-900",children:P.type})]}),n.jsxs("div",{className:"rounded-lg border border-gray-200 p-3",children:[n.jsx("p",{className:"text-xs text-gray-500",children:""}),n.jsxs("p",{className:"mt-1 flex items-center gap-1 font-semibold text-gray-900",children:[n.jsx(kl,{size:13,className:"text-gray-400"}),P.assignee]})]}),n.jsxs("div",{className:"rounded-lg border border-gray-200 p-3",children:[n.jsx("p",{className:"text-xs text-gray-500",children:""}),n.jsxs("p",{className:"mt-1 font-semibold text-gray-900",children:[P.reminderChannel,"  ",P.reminderSent?" ":""]})]}),n.jsxs("div",{className:"rounded-lg border border-gray-200 p-3",children:[n.jsx("p",{className:"text-xs text-gray-500",children:""}),n.jsx("p",{className:"mt-1 font-semibold text-gray-900",children:P.phone?c7(P.phone):"-"})]}),n.jsxs("div",{className:"rounded-lg border border-gray-200 p-3",children:[n.jsx("p",{className:"text-xs text-gray-500",children:" "}),n.jsx("p",{className:"mt-1 font-semibold text-gray-900",children:P.guardianPhone?c7(P.guardianPhone):"-"})]})]}),P.location?n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-3",children:[n.jsx("p",{className:"text-xs text-gray-500",children:""}),n.jsx("p",{className:"mt-1 text-sm font-medium text-gray-900",children:P.location})]}):null,(P.contactStatus||P.consultStatus||P.secondExamStatus)&&n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[n.jsxs("p",{className:"mb-2 flex items-center gap-1 text-xs font-semibold text-slate-700",children:[n.jsx(_8,{size:13}),"  (v1 )"]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-gray-700",children:[P.contactStatus?n.jsxs("span",{children:[": ",n.jsx("strong",{children:hA[P.contactStatus]})]}):null,P.consultStatus?n.jsxs("span",{children:[": ",n.jsx("strong",{children:gA[P.consultStatus]})]}):null,P.secondExamStatus?n.jsxs("span",{children:["2: ",n.jsx("strong",{children:pA[P.secondExamStatus]})]}):null,P.reservationType?n.jsxs("span",{children:[": ",n.jsx("strong",{children:xA[P.reservationType]})]}):null]})]}),P.reasonText?n.jsxs("div",{className:"rounded-lg border border-purple-100 bg-purple-50 p-3",children:[n.jsx("p",{className:"text-xs font-semibold text-purple-700",children:"/ "}),n.jsx("p",{className:"mt-1 text-sm text-purple-900",children:P.reasonText})]}):null,P.autoMemoRecent&&P.autoMemoRecent.length>0?n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-3",children:[n.jsxs("p",{className:"mb-2 flex items-center gap-1 text-xs font-semibold text-gray-700",children:[n.jsx(ro,{size:13}),"  "]}),n.jsx("ul",{className:"space-y-1",children:P.autoMemoRecent.map((Q,he)=>n.jsxs("li",{className:"text-xs text-gray-700",children:[" ",Q]},`${Q}-${he}`))})]}):null,P.notes?n.jsxs("div",{className:"rounded-lg border border-blue-100 bg-blue-50 p-3",children:[n.jsx("p",{className:"text-xs font-semibold text-blue-700",children:""}),n.jsx("p",{className:"mt-1 text-sm text-blue-900",children:P.notes})]}):null,n.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-gray-200 bg-white px-3 py-2",children:[n.jsx("span",{className:"text-xs text-gray-600",children:P.followUpRequired?"  .":"   ."}),n.jsxs("span",{className:"inline-flex items-center gap-1 text-xs font-semibold text-emerald-700",children:[n.jsx(Zs,{size:13}),"  "]})]}),n.jsxs(PC,{className:"gap-2 sm:gap-0",children:[n.jsx(Nt,{variant:"outline",onClick:()=>l(!1),children:""}),n.jsxs(Nt,{variant:"outline",onClick:Te,children:[n.jsx(lQ,{size:14,className:"mr-1"}),""]}),n.jsxs(Nt,{variant:"destructive",onClick:ct,children:[n.jsx(LQ,{size:14,className:"mr-1"}),""]})]})]}):null]})})]})}function xje(){const e=[{name:"   ",type:"PDF",lastRun:"2026-02-01",status:""},{name:"Stage   ",type:"XLSX",lastRun:"2026-02-10",status:""},{name:"   ( )",type:"CSV",lastRun:"2026-02-11",status:""},{name:"  ",type:"PDF",lastRun:"2026-01-31",status:""}];return n.jsxs("div",{className:"space-y-6 pb-12",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg px-3 py-2 flex items-center gap-2 text-xs font-semibold shadow-sm",children:[n.jsx(Pm,{size:14,className:"text-gray-400"}),": 2026-01-01 ~ 2026-01-31"]}),n.jsx("div",{className:"bg-white border border-gray-200 rounded-lg px-3 py-2 flex items-center gap-2 text-xs font-semibold shadow-sm text-gray-400",children:": "})]}),n.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white text-xs font-bold rounded-lg shadow-sm",children:[n.jsx(hm,{size:16}),"    "]})]}),n.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[n.jsxs("div",{className:"col-span-8 space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:[n.jsx("div",{className:"p-5 border-b border-gray-100 flex items-center justify-between",children:n.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(Xu,{size:18,className:"text-blue-600"})," "]})}),n.jsx("div",{className:"divide-y divide-gray-50",children:e.map((t,r)=>n.jsxs("div",{className:"p-4 hover:bg-gray-50 flex items-center justify-between group cursor-pointer transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:de("w-10 h-10 rounded-lg flex items-center justify-center",t.type==="PDF"?"bg-red-50 text-red-600":t.type==="XLSX"?"bg-emerald-50 text-emerald-600":"bg-blue-50 text-blue-600"),children:t.type==="PDF"?n.jsx(Xu,{size:20}):n.jsx(CX,{size:20})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-gray-900",children:t.name}),n.jsxs("p",{className:"text-[10px] text-gray-500",children:[" : ",t.lastRun," | ",n.jsx("span",{className:"text-blue-600 font-bold",children:t.status})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[n.jsx("button",{className:"px-3 py-1.5 border border-gray-200 rounded text-[10px] font-bold text-gray-600 hover:bg-white",children:""}),n.jsx("button",{className:"px-3 py-1.5 bg-gray-900 text-white rounded text-[10px] font-bold hover:bg-black",children:""})]})]},r))}),n.jsx("div",{className:"p-4 bg-gray-50 flex items-center justify-center border-t border-gray-100",children:n.jsxs("button",{className:"text-xs font-bold text-gray-500 hover:text-blue-600 flex items-center gap-1",children:["    ",n.jsx(ei,{size:14})]})})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[n.jsxs("h3",{className:"font-bold text-gray-800 mb-6 flex items-center justify-between",children:["   ",n.jsx("span",{className:"text-[10px] text-emerald-600 font-bold",children:"   12% "})]}),n.jsx("div",{className:"h-64",children:n.jsx(xa,{width:"100%",height:"100%",children:n.jsxs(Hu,{data:[{name:"",target:2,actual:1.2},{name:"",target:5,actual:4.5},{name:"",target:14,actual:15.4},{name:"",target:7,actual:5.2},{name:"",target:180,actual:192}],children:[n.jsx(ms,{strokeDasharray:"3 3",vertical:!1}),n.jsx(Vn,{dataKey:"name",fontSize:10,axisLine:!1,tickLine:!1}),n.jsx(Hn,{fontSize:10,axisLine:!1,tickLine:!1}),n.jsx(en,{}),n.jsx(Xa,{dataKey:"target",fill:"#e2e8f0",radius:[4,4,0,0],barSize:20}),n.jsx(Xa,{dataKey:"actual",fill:"#2563eb",radius:[4,4,0,0],barSize:20})]})})})]})]}),n.jsxs("div",{className:"col-span-4 space-y-6",children:[n.jsxs("div",{className:"bg-blue-600 text-white rounded-xl p-6 shadow-md",children:[n.jsxs("h3",{className:"font-bold mb-4 flex items-center gap-2",children:[n.jsx(k8,{size:18}),"  (AI )"]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"p-3 bg-white/10 rounded-lg border border-white/10",children:[n.jsx("p",{className:"text-[10px] font-bold text-white/60 uppercase",children:" "}),n.jsx("p",{className:"text-sm font-medium mt-1",children:"2      15% , 3      ."})]}),n.jsxs("div",{className:"p-3 bg-white/10 rounded-lg border border-white/10",children:[n.jsx("p",{className:"text-[10px] font-bold text-white/60 uppercase",children:" "}),n.jsx("p",{className:"text-sm font-medium mt-1",children:"        8% .     ."})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-5",children:[n.jsx("h3",{className:"font-bold text-gray-800 mb-4 text-sm",children:"  "}),n.jsx("div",{className:"space-y-4",children:[{label:"   ",value:"+4.2%",color:"text-emerald-600"},{label:" ",value:"92%",color:"text-blue-600"},{label:"  ",value:"115%",color:"text-red-600"}].map((t,r)=>n.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-50 last:border-0",children:[n.jsx("span",{className:"text-xs text-gray-500 font-medium",children:t.label}),n.jsx("span",{className:de("text-sm font-bold",t.color),children:t.value})]},r))})]})]})]}),n.jsx("div",{className:"p-3 bg-gray-50 text-[10px] text-gray-500 italic text-center rounded-lg border border-gray-200",children:"*  :      ,           ."})]})}function bje(){const[e,t]=g.useState(""),r=[{title:"  ( )",id:"",icon:Sl,items:[{label:"   (Stage 1)",value:"3",type:"number",desc:"  2        "},{label:"SLA   (/)",value:"24",type:"number",desc:"   SLA   "},{label:"  ( )",value:"10%",type:"number",desc:"        "},{label:"   ()",value:"3",type:"number",desc:"    "}]},{title:"   ",id:"",icon:jp,items:[{label:"   ",value:"On",type:"toggle"},{label:"    ",value:"On",type:"toggle"},{label:"   ",value:"Off",type:"toggle"},{label:"    ",value:"On",type:"toggle"}]}];return n.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 pb-12",children:[n.jsx("div",{className:"flex gap-1 border-b border-gray-200",children:["","","/",""].map(a=>n.jsx("button",{onClick:()=>t(a),className:de("px-6 py-3 text-sm font-bold border-b-2 transition-all",e===a?"border-blue-600 text-blue-600":"border-transparent text-gray-400 hover:text-gray-600"),children:a},a))}),n.jsxs("div",{className:"grid grid-cols-12 gap-8",children:[n.jsx("div",{className:"col-span-8 space-y-8",children:r.map((a,s)=>n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:[n.jsxs("div",{className:"p-5 border-b border-gray-100 flex items-center gap-3 bg-gray-50/50",children:[n.jsx(a.icon,{className:"text-blue-600",size:20}),n.jsx("h3",{className:"font-bold text-gray-800",children:a.title})]}),n.jsx("div",{className:"p-0",children:a.items.map((i,o)=>n.jsxs("div",{className:"p-5 flex items-start justify-between border-b border-gray-50 last:border-0 hover:bg-gray-50/50 transition-colors",children:[n.jsxs("div",{className:"max-w-[70%]",children:[n.jsx("p",{className:"text-sm font-bold text-gray-700",children:i.label}),n.jsx("p",{className:"text-[11px] text-gray-400 mt-0.5",children:i.desc})]}),n.jsx("div",{className:"flex flex-col items-end gap-2",children:i.type==="number"?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"text",value:i.value,readOnly:!0,className:"w-16 text-right px-2 py-1.5 bg-gray-100 border border-gray-200 rounded-lg text-xs font-bold text-blue-600"}),n.jsx("button",{className:"text-[10px] font-bold text-blue-600 hover:underline",children:""})]}):n.jsx("div",{className:de("w-10 h-5 rounded-full relative cursor-pointer transition-colors shadow-inner",i.value==="On"?"bg-emerald-500":"bg-gray-200"),children:n.jsx("div",{className:de("absolute top-0.5 w-4 h-4 bg-white rounded-full shadow-md transition-transform",i.value==="On"?"translate-x-5.5":"translate-x-0.5")})})})]},o))})]},s))}),n.jsxs("div",{className:"col-span-4 space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[n.jsxs("h3",{className:"font-bold text-gray-800 mb-6 flex items-center gap-2",children:[n.jsx(_8,{className:"text-orange-500",size:20}),"  "]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"p-4 border border-gray-100 rounded-xl bg-gray-50/50",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Md,{size:14,className:"text-gray-400"}),n.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "})]}),n.jsx("p",{className:"text-sm font-bold text-gray-900 leading-tight",children:",  (L2 )"}),n.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[n.jsx("span",{className:"text-[9px] text-emerald-600 font-bold bg-emerald-50 px-1.5 py-0.5 rounded",children:"2FA "}),n.jsx("button",{className:"text-[10px] font-bold text-blue-600 hover:underline",children:" "})]})]}),n.jsxs("div",{className:"p-4 border border-gray-100 rounded-xl bg-gray-50/50",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Ic,{size:14,className:"text-gray-400"}),n.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"   "})]}),n.jsx("p",{className:"text-sm font-bold text-gray-900",children:"  5 ( )"}),n.jsx("p",{className:"text-[9px] text-gray-400 mt-2",children:"  : 2026-12-31"})]})]})]}),n.jsxs("div",{className:"bg-blue-600 text-white rounded-2xl p-6 shadow-xl relative overflow-hidden",children:[n.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:n.jsx(ta,{size:120})}),n.jsxs("div",{className:"relative z-10",children:[n.jsxs("h3",{className:"font-bold mb-4 flex items-center gap-2",children:[n.jsx(ta,{className:"text-blue-400",size:20}),"  "]}),n.jsxs("div",{className:"space-y-4 text-xs leading-relaxed text-white/70",children:[n.jsx("p",{children:"  , ,    ID, IP ,      ."}),n.jsxs("div",{className:"p-3 bg-white/10 rounded-xl border border-white/10",children:[n.jsxs("p",{className:"text-[10px] font-bold text-blue-400 uppercase mb-1 flex items-center gap-1",children:[n.jsx(Rm,{size:10}),"   "]}),n.jsx("p",{className:"text-white/80",children:" (Stage 2)       ."})]}),n.jsx("p",{children:"        ."})]}),n.jsx("button",{className:"mt-6 w-full py-3 bg-white/10 hover:bg-white/20 border border-white/20 rounded-xl text-xs font-bold transition-all",children:"    "})]})]})]})]}),n.jsxs("div",{className:"p-4 bg-white border border-gray-200 rounded-xl flex items-center gap-4 shadow-sm",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-50 flex items-center justify-center text-orange-600 shrink-0",children:n.jsx(Gn,{size:24})}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-bold text-gray-900",children:"   "}),n.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"     ,        . (  )"})]})]})]})}function yje({activeTab:e,setActiveTab:t,userName:r,centerName:a,userRole:s,onLogout:i}){const[o,l]=g.useState(!0),d=[{id:"main",label:"  ",icon:mg},{id:"cases",label:" ",icon:jl},{id:"calendar",label:"",icon:Ro},{id:"reports",label:"",icon:_m},{id:"settings",label:"",icon:hg}];return n.jsxs("aside",{className:`${o?"w-64":"w-20"} bg-slate-800 border-r border-slate-700 text-white flex flex-col shrink-0 transition-all duration-300`,children:[n.jsx("div",{className:"h-16 flex items-center justify-between px-4 border-b border-slate-700",children:o?n.jsxs(n.Fragment,{children:[n.jsx(wO,{size:36,showText:!0,subtitle:" ",variant:"dark"}),n.jsx("button",{type:"button",onClick:()=>l(!1),className:"h-8 w-8 p-0 rounded-md inline-flex items-center justify-center text-slate-400 hover:text-white hover:bg-slate-700 shrink-0","aria-label":" ",children:n.jsx(qd,{className:"h-4 w-4"})})]}):n.jsx("button",{type:"button",onClick:()=>l(!0),className:"h-8 w-8 p-0 mx-auto rounded-md inline-flex items-center justify-center text-slate-400 hover:text-white hover:bg-slate-700","aria-label":" ",children:n.jsx(vO,{className:"h-4 w-4"})})}),n.jsx("nav",{className:"flex-1 py-4 px-3 space-y-1",children:d.map(u=>n.jsxs("button",{onClick:()=>t(u.id),className:de("w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium transition-colors",e===u.id?"bg-blue-600 text-white shadow-sm":"text-slate-300 hover:bg-slate-700 hover:text-white"),title:o?void 0:u.label,children:[n.jsx(u.icon,{size:20,className:o?void 0:"mx-auto"}),o&&u.label]},u.id))}),n.jsxs("div",{className:"p-4 border-t border-slate-700",children:[o?n.jsxs("div",{className:"flex items-center gap-3 p-2 bg-slate-700 rounded-lg",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-100 text-slate-700 flex items-center justify-center text-xs font-bold",children:r.slice(0,1)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-semibold truncate",children:r}),n.jsxs("p",{className:"text-[10px] text-slate-300 truncate",children:[a," / ",s==="center_manager"?"":""]})]})]}):null,n.jsxs("button",{onClick:i,className:"mt-3 w-full flex items-center justify-center gap-2 rounded-lg border border-red-400/40 px-3 py-2 text-xs font-semibold text-red-200 hover:bg-red-500/10 hover:text-red-100 transition-colors",title:o?void 0:"",children:[n.jsx(yO,{size:14}),o?"":null]})]})]})}const o5={"national-dashboard":{title:"  ",subtitle:"Neuro-Shield  "},"model-apply":{title:"  ",subtitle:"Neuro-Shield  "},"model-governance":{title:"/  ",subtitle:"Neuro-Shield  "},"quality-monitoring":{title:"& ",subtitle:"Neuro-Shield  "},"compliance-audit":{title:"   ",subtitle:"Neuro-Shield  "},"kpi-dictionary":{title:"KPI ",subtitle:"Neuro-Shield  "},settings:{title:"",subtitle:"Neuro-Shield  "},overview:{title:"  ",subtitle:"Neuro-Shield   "},cause:{title:" ",subtitle:"Neuro-Shield   "},interventions:{title:" ",subtitle:"Neuro-Shield   "},reports:{title:"",subtitle:"Neuro-Shield   "},"regional-settings":{title:"",subtitle:"Neuro-Shield   "},dashboard:{title:" ",subtitle:"Neuro-Shield   "},calendar:{title:" ",subtitle:"Neuro-Shield   "},"audit-log":{title:" ",subtitle:"Neuro-Shield   "},main:{title:"  ",subtitle:"Neuro-Shield   "},cases:{title:" ",subtitle:"Neuro-Shield   "}};function l5({title:e,subtitle:t,icon:r,iconBg:a="from-blue-600 to-blue-700"}){return n.jsxs("div",{className:"flex items-center gap-2.5 min-w-0",children:[n.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-lg bg-gradient-to-br ${a} shadow-sm shrink-0`,"aria-hidden":"true",children:r??n.jsx(wp,{className:"h-4 w-4 text-white"})}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("h2",{className:"text-[15px] font-bold text-slate-800 leading-[1.1] whitespace-nowrap overflow-hidden text-ellipsis",children:e}),n.jsx("p",{className:"text-[10px] font-medium text-slate-400 leading-[1.1] mt-[2px] whitespace-nowrap overflow-hidden text-ellipsis",children:t})]})]})}const vje={main:mg,cases:jl,calendar:Ro,reports:_m,settings:hg};function Nje({activeTab:e}){const t=vje[e]||mg,r=o5[e];return n.jsxs("header",{className:"h-14 bg-white border-b border-gray-200 flex items-center justify-between px-6 shrink-0 z-10",children:[n.jsx("div",{className:"flex items-center gap-6",children:n.jsx(l5,{title:r?.title??e,subtitle:r?.subtitle??"Neuro-Shield   ",icon:n.jsx(t,{className:"h-4 w-4 text-white"})})}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"relative group",children:[n.jsx("div",{className:"absolute inset-y-0 left-3 flex items-center pointer-events-none",children:n.jsx(pg,{size:16,className:"text-gray-400"})}),n.jsx("input",{type:"text",placeholder:" ID,  ...",className:"bg-gray-100 border-none rounded-full pl-10 pr-4 py-2 text-sm focus:ring-2 focus:ring-blue-500 w-64 transition-all focus:w-80 outline-none"})]}),n.jsxs("button",{className:"relative p-2 text-gray-500 hover:bg-gray-100 rounded-full transition-colors",children:[n.jsx(jp,{size:20}),n.jsx("span",{className:"absolute top-1.5 right-1.5 w-2 h-2 bg-red-500 rounded-full border-2 border-white"})]}),n.jsx("div",{className:"w-px h-8 bg-gray-200 mx-1"}),n.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx("span",{className:"w-8 h-8 rounded-full bg-emerald-100 text-emerald-700 flex items-center justify-center border border-emerald-200",children:n.jsx(Zs,{size:16})}),n.jsx("span",{children:" "})]})]})]})}const x7=new Map;let b7=1,y7=1;function Sje(){return new Date().toISOString()}function v7(e){return new Date(Date.now()+e*60*60*1e3).toISOString()}function LK(){return globalThis?.__NEURO_SHIELD_USE_REAL_API__===!0}function jje(){return globalThis?.__NEURO_SHIELD_FORCE_CALENDAR_ERROR__===!0}async function $K(e=160){await new Promise(t=>setTimeout(t,e))}async function FK(e,t){const r=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",...t.headers??{}},...t});if(!r.ok)throw new Error(`HTTP ${r.status}`);return await r.json()}function wje(e){return e?{R1_SELF_REJECT:" ",R2_GUARDIAN_REJECT:" ",R3_OTHER_INSTITUTION:"  ",R4_ALREADY_DIAGNOSED:" / ",R5_CONTACT_INVALID:" ",R6_EMOTIONAL_BACKLASH:"  ",R7_OTHER:""}[e]:"  "}function Eje(e){return{CALL_RETRY:" ",SMS_RETRY:" ",TIME_CHANGE:"   ",PROTECTOR_CONTACT:"  ",AGENT_SMS:"  "}[e]}function BK(e){const t=[];if(e.outcomeType==="NO_RESPONSE"&&e.noResponse?.nextContactAt&&t.push({caseId:e.caseId,type:"RECONTACT",title:`${Eje(e.noResponse.strategy)} `,startAt:e.noResponse.nextContactAt,durationMin:20,priority:e.noResponse.escalateLevel==="L3"?"HIGH":"NORMAL",payload:{strategy:e.noResponse.strategy,escalateLevel:e.noResponse.escalateLevel}}),e.outcomeType==="LATER"){const r=e.noResponse?.nextContactAt??v7(72);t.push({caseId:e.caseId,type:"RECONTACT",title:"  ",startAt:r,durationMin:20,priority:"NORMAL",payload:{memo:e.memo}})}return e.outcomeType==="REJECT"&&(e.reject?.followup?.createFollowupEvent||e.reject?.followup?.followupAt)&&t.push({caseId:e.caseId,type:"FOLLOWUP",title:`   (${wje(e.reject?.code)})`,startAt:e.reject?.followup?.followupAt??v7(168),durationMin:20,priority:e.reject?.level==="FINAL"?"HIGH":"NORMAL",payload:{rejectCode:e.reject?.code,rejectLevel:e.reject?.level}}),t}async function Aje(e,t){if(await $K(),LK())return FK(`/api/cases/${e}/outcomes`,{body:JSON.stringify(t)});const r=`OUT-${e}-${String(b7).padStart(5,"0")}`;b7+=1;const a=BK({caseId:e,outcomeType:t.outcomeType,memo:t.memo,reject:t.reject,noResponse:t.noResponse});return{ok:!0,outcomeId:r,timelinePatch:{at:Sje(),outcomeType:t.outcomeType},nextAction:a.length?{type:"CREATE_CALENDAR_EVENT",events:a}:void 0}}async function N7(e){if(await $K(),LK())return FK("/api/calendar/events",{body:JSON.stringify(e)});if(jje())throw new Error("CALENDAR_FORCED_FAILURE");const t=x7.get(e.idempotencyKey);if(t)return t;const r={ok:!0,eventId:`CAL-${String(y7).padStart(6,"0")}`};return y7+=1,x7.set(e.idempotencyKey,r),r}function Cje(){return new Date().toISOString()}function vA(e){return e instanceof Error?e.message:typeof e=="string"?e:"    ."}function S7(e){return{idempotencyKey:e.idempotencyKey,caseId:e.caseId,outcomeId:e.outcomeId,event:e.event,eventType:e.event.type,title:e.event.title,scheduledAt:e.event.startAt,errorMessage:e.errorMessage,retryCount:e.retryCount,recordedAt:Cje()}}function _je(){const[e,t]=g.useState(!1),[r,a]=g.useState(null),[s,i]=g.useState([]),[o,l]=g.useState({}),d=g.useCallback(async({caseId:h,payload:x})=>{if(e)return null;t(!0),a(null);try{const y=await Aje(h,x),N=y.nextAction?.events??BK({caseId:h,outcomeType:x.outcomeType,memo:x.memo,reject:x.reject,noResponse:x.noResponse}),v=[],j=[];for(let E=0;E<N.length;E+=1){const C=N[E],A=`${h}:${y.outcomeId}:${C.type}:${E}`;try{const S=await N7({idempotencyKey:A,event:C});v.push({idempotencyKey:A,eventId:S.eventId,event:C})}catch(S){j.push(S7({idempotencyKey:A,caseId:h,outcomeId:y.outcomeId,event:C,errorMessage:vA(S),retryCount:0}))}}return i(E=>{const C=E.filter(A=>!j.some(S=>S.idempotencyKey===A.idempotencyKey));return[...j,...C]}),{outcome:y,calendar:{created:v,failed:j}}}catch(y){return a(vA(y)),null}finally{t(!1)}},[e]),u=g.useCallback(async h=>{const x=s.find(y=>y.idempotencyKey===h);if(!x)return{ok:!1};l(y=>({...y,[h]:!0}));try{const y=await N7({idempotencyKey:x.idempotencyKey,event:x.event});return i(N=>N.filter(v=>v.idempotencyKey!==h)),{ok:!0,eventId:y.eventId}}catch(y){const N=S7({idempotencyKey:x.idempotencyKey,caseId:x.caseId,outcomeId:x.outcomeId,event:x.event,errorMessage:vA(y),retryCount:x.retryCount+1});return i(v=>v.map(j=>j.idempotencyKey===h?N:j)),{ok:!1,failure:N}}finally{l(y=>{const N={...y};return delete N[h],N})}},[s]),p=g.useMemo(()=>Object.values(o).some(Boolean),[o]),m=g.useCallback(()=>a(null),[]);return{isSaving:e,submitError:r,calendarFailures:s,retryingKeys:o,isRetrying:p,submit:d,retryCalendarFailure:u,clearSubmitError:m}}const UK="080-000-0000",Tje=` ${UK}`,HK="",GK="  ",Oje=[{id:"S1_SENT_BASE",stage:"STAGE1",situation:"DELIVERED",channel:"SMS",tone:"government",type:"CONTACT",label:"1  ",template:"[{{CENTER_NAME}}]   . ({{CASE_ALIAS}})        . {{LINK}}  {{CALLBACK_PHONE}} {{OPT_OUT}}"},{id:"S1_NO_RESPONSE",stage:"STAGE1",situation:"NO_RESPONSE",channel:"SMS",tone:"government",type:"REMINDER",label:"1  ",template:"[{{CENTER_NAME}}]    ,   /  . {{LINK}}  {{CALLBACK_PHONE}} {{OPT_OUT}}"},{id:"S1_FAILED",stage:"STAGE1",situation:"FAILED",channel:"SMS",tone:"government",type:"CONTACT",label:"1   ",template:"[{{CENTER_NAME}}]     .    {{CALLBACK_PHONE}}  . {{OPT_OUT}}"},{id:"S2_SENT_BASE",stage:"STAGE2",situation:"DELIVERED",channel:"SMS",tone:"government",type:"BOOKING",label:"2    ",template:"[{{CENTER_NAME}}] /     .          . {{LINK}}  {{CALLBACK_PHONE}} {{OPT_OUT}}"},{id:"S2_CLICKED_INCOMPLETE",stage:"STAGE2",situation:"CLICKED",channel:"SMS",tone:"government",type:"REMINDER",label:"2   ",template:"[{{CENTER_NAME}}]    .    ,     . {{LINK}}  {{CALLBACK_PHONE}} {{OPT_OUT}}"},{id:"S2_NO_RESPONSE",stage:"STAGE2",situation:"NO_RESPONSE",channel:"SMS",tone:"government",type:"REMINDER",label:"2  ",template:"[{{CENTER_NAME}}] /  .      . {{LINK}}  {{CALLBACK_PHONE}} {{OPT_OUT}}"},{id:"S3_SENT_BASE",stage:"STAGE3",situation:"DELIVERED",channel:"SMS",tone:"government",type:"CONTACT",label:"3   ",template:"[{{CENTER_NAME}}]     .  /     . {{LINK}}  {{CALLBACK_PHONE}} {{OPT_OUT}}"},{id:"S3_ACTION_COMPLETED",stage:"STAGE3",situation:"ACTION_COMPLETED",channel:"SMS",tone:"government",type:"REMINDER",label:"3   ",template:"[{{CENTER_NAME}}]    .    {{CALLBACK_PHONE}}  . {{OPT_OUT}}"},{id:"S3_NO_RESPONSE",stage:"STAGE3",situation:"NO_RESPONSE",channel:"SMS",tone:"government",type:"REMINDER",label:"3   ",template:"[{{CENTER_NAME}}]        . {{CALLBACK_PHONE}}  ,    . {{LINK}} {{OPT_OUT}}"}],j7={DRAFT:{label:"",tone:"border-slate-300 bg-slate-50 text-slate-700"},SCHEDULED:{label:"",tone:"border-blue-300 bg-blue-50 text-blue-700"},SENT:{label:"",tone:"border-indigo-300 bg-indigo-50 text-indigo-700"},DELIVERED:{label:"",tone:"border-emerald-300 bg-emerald-50 text-emerald-700"},FAILED:{label:"",tone:"border-red-300 bg-red-50 text-red-700"},CLICKED:{label:" ",tone:"border-cyan-300 bg-cyan-50 text-cyan-700"},ACTION_COMPLETED:{label:" ",tone:"border-green-300 bg-green-50 text-green-700"},NO_RESPONSE:{label:"",tone:"border-amber-300 bg-amber-50 text-amber-700"},OPTOUT:{label:"",tone:"border-zinc-300 bg-zinc-100 text-zinc-700"}},kje={DRAFT:[{id:"MARK_COMPLETED",label:" ",nextStatus:"ACTION_COMPLETED"},{id:"MARK_OPTOUT",label:" ",nextStatus:"OPTOUT"}],SCHEDULED:[{id:"MARK_NO_RESPONSE",label:" ",nextStatus:"NO_RESPONSE"},{id:"SWITCH_TO_CALL",label:" "}],SENT:[{id:"SEND_REMINDER",label:" ",nextStatus:"CLICKED"},{id:"MARK_NO_RESPONSE",label:" ",nextStatus:"NO_RESPONSE"}],DELIVERED:[{id:"SEND_REMINDER",label:" ",nextStatus:"CLICKED"},{id:"MARK_COMPLETED",label:" ",nextStatus:"ACTION_COMPLETED"}],FAILED:[{id:"VERIFY_PHONE",label:" "},{id:"SWITCH_TO_CALL",label:" "}],CLICKED:[{id:"SEND_REMINDER",label:" "},{id:"MARK_COMPLETED",label:" ",nextStatus:"ACTION_COMPLETED"}],ACTION_COMPLETED:[{id:"CREATE_RECONTACT_TASK",label:"  "},{id:"MARK_OPTOUT",label:" ",nextStatus:"OPTOUT"}],NO_RESPONSE:[{id:"RETRY_WITH_ALT_TEMPLATE",label:"( )"},{id:"SWITCH_TO_CALL",label:" "}],OPTOUT:[{id:"SWITCH_TO_CALL",label:"  "},{id:"CREATE_RECONTACT_TASK",label:"   "}]};function Rje(e={}){const t=e.OPTOUT_NUMBER?.trim()||UK;return{CENTER_NAME:e.CENTER_NAME||" ",CALLBACK_PHONE:e.CALLBACK_PHONE||"02-555-0199",LINK:e.LINK||"",OPT_OUT:e.OPT_OUT||` ${t}`,CASE_ALIAS:e.CASE_ALIAS||HK,DUE_DATE:e.DUE_DATE||GK,OPTOUT_NUMBER:t}}function Pje(e,t={}){const r=Rje(t),a=/\{\{\s*([A-Z0-9_]+)\s*\}\}/g,s=i=>i.replace(a,(o,l)=>r[l]??"");return s(s(e)).replace(/\s{2,}/g," ").trim()}function Dje(e){return Oje.filter(t=>t.stage===e)}function Ije(e){return Dje(e).map(t=>({id:t.id,type:t.type,label:t.label,body:r=>Pje(t.template,{CENTER_NAME:r.centerName,CALLBACK_PHONE:r.centerPhone,LINK:r.guideLink,CASE_ALIAS:r.caseAlias||HK,DUE_DATE:r.dueDate||GK,OPT_OUT:r.optOut||Tje})}))}function Mje(e){return e.includes("3")?"STAGE3":e.includes("2")?"STAGE2":"STAGE1"}const Lje={VITE_BASE_PATH:"/neuro-shield/"},v0="/api/sms/messages",Ub="/api/outreach/send-sms";function $je(e){if(!e.trim())return"/neuro-shield/";let t=e.trim();return t.startsWith("/")||(t=`/${t}`),t.endsWith("/")||(t=`${t}/`),t}function Fje(){const e=Lje,t=e.VITE_PUBLIC_BASE_URL||e.DEPLOY_BASE_URL;if(t&&t.trim())return t.replace(/\/$/,"");if(typeof window<"u"){const r=$je(e.VITE_BASE_PATH);return`${window.location.origin}${r.replace(/\/$/,"")}`}return"http://146.56.162.226/neuro-shield"}function c5(e){return`${Fje()}/p/sms?t=${encodeURIComponent(e)}`}function d5(e){return`tmp-${(e||"case").replace(/[^a-zA-Z0-9_-]/g,"").slice(-18)||"case"}-${Date.now().toString(36)}`}function KK(e,t="SENT"){if(!e)return t;const r=e.toUpperCase();return r.includes("FAIL")?"FAILED":r.includes("DELIVER")?"DELIVERED":r.includes("SCHEDULE")?"SCHEDULED":r.includes("CLICK")?"CLICKED":r.includes("OPT")?"OPTOUT":t}function Bje(e,t){return{case_id:e.caseId,center_id:e.centerId,citizen_phone:e.citizenPhone,template_id:e.templateId,variables:{template:e.renderedMessage,link_url:t,guideLink:t,...e.variables||{}},dedupe_key:e.dedupeKey||`${e.caseId}-${Date.now()}`,guardian_phone:e.guardianPhone}}function Uje(e,t,r){return{caseId:e.caseId,centerId:e.centerId,citizenPhone:e.citizenPhone,stage:e.stage||"STAGE1",templateId:e.templateId,variables:{LINK:t,...e.variables||{}},sendPolicy:e.sendPolicy==="SCHEDULE"?"SCHEDULED":"IMMEDIATE",scheduledAt:e.scheduledAt,channel:e.channel||"SMS",renderedText:e.renderedMessage,dedupeKey:e.dedupeKey||`${e.caseId}-${Date.now()}`,guardianPhone:e.guardianPhone,token:r,statusHint:e.statusHint}}function w7(e,t){return e.includes(t)?e:`${e} ${t}`.trim()}async function Hje(e,t,r){const a=await fetch(v0,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Uje(e,t,r))});if(!a.ok){const o=await a.text();return{success:!1,endpoint:v0,error:`  (${a.status}): ${o}`}}const s=await a.json(),i=KK(s.status,e.sendPolicy==="SCHEDULE"?"SCHEDULED":"SENT");return{success:!0,endpoint:v0,providerMessageId:s.providerMessageId||s.messageId,status:s.status||i,lifecycleStatus:i,renderedText:s.renderedText||s.renderedMessage||e.renderedMessage,renderedMessage:s.renderedMessage||s.renderedText||e.renderedMessage,token:s.token||r,linkUrl:s.linkUrl||t,actualTo:s.actualTo,intendedTo:s.intendedTo}}async function Gje(e,t){const r=await fetch(Ub,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Bje(e,t))});if(!r.ok){const i=await r.text();return{success:!1,endpoint:Ub,error:`  (${r.status}): ${i}`}}const a=await r.json(),s=KK(a.status,e.sendPolicy==="SCHEDULE"?"SCHEDULED":"SENT");return{success:!0,endpoint:Ub,providerMessageId:a.provider_message_id,status:a.status||s,lifecycleStatus:s,actualTo:a.actual_to,intendedTo:a.intended_to,renderedMessage:a.rendered_message||w7(e.renderedMessage,t),renderedText:a.rendered_message||w7(e.renderedMessage,t),token:e.linkToken,linkUrl:t}}function Kje(e,t){return e?t==="SCHEDULE"?"SCHEDULED":"SENT":"FAILED"}function zje(e){return e==="SCHEDULED"?"SCHEDULED":e==="FAILED"?"FAILED":e==="DELIVERED"?"DELIVERED":e==="CLICKED"?"CLICKED":e==="ACTION_COMPLETED"?"ACTION_COMPLETED":e==="NO_RESPONSE"?"NO_RESPONSE":e==="OPTOUT"?"OPTOUT":"SENT"}function qje(){return c5(d5("preview"))}async function zK(e){const t=e.linkToken||d5(e.caseId),r=e.linkUrl||c5(t);try{const a=await Hje(e,r,t);if(a.success)return a;console.warn(`[SMS] ${v0} , legacy fallback :`,a.error);const s=await Gje(e,r);return s.success?s:{success:!1,endpoint:s.endpoint,error:s.error||a.error||"  ",token:t,linkUrl:r}}catch(a){return console.warn(`[SMS] ${v0}/${Ub}  :`,a),{success:!1,token:t,linkUrl:r,error:"SMS    .  ."}}}function OT(){const e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")} ${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`}const NA={CONTACT:"",BOOKING:"",REMINDER:""},Wje={CONTACT:"bg-blue-100 text-blue-800",BOOKING:"bg-emerald-100 text-emerald-800",REMINDER:"bg-amber-100 text-amber-800"},Vje={SENT:"",SCHEDULED:"",FAILED:"",DELIVERED:"",CLICKED:" ",ACTION_COMPLETED:" ",NO_RESPONSE:"",OPTOUT:""},Yje={SENT:"text-indigo-700 border-indigo-300",SCHEDULED:"text-blue-700 border-blue-300",FAILED:"text-red-700 border-red-300",DELIVERED:"text-emerald-700 border-emerald-300",CLICKED:"text-cyan-700 border-cyan-300",ACTION_COMPLETED:"text-green-700 border-green-300",NO_RESPONSE:"text-amber-700 border-amber-300",OPTOUT:"text-zinc-700 border-zinc-400"},Xje=[{step:"greeting",title:"1:    ",content:".   .   ?       .",tips:["  ","    ","   "],checkpoints:["  ","/ ","   "]},{step:"purpose",title:"2:   ",content:"       .     , /    .",tips:["  ","   ","   "],checkpoints:["   ","   ","  "]},{step:"assessment",title:"3:   ",content:"   ,   , /    .",tips:["  ","  ","   "],checkpoints:["  ","   ","    "]},{step:"scheduling",title:"4:   ",content:"     , / ,   .",tips:["  1 ","   ","  "],checkpoints:["  ","   ","  "]}],Qje={centerName:" ",centerPhone:"02-555-0199",guideLink:qje(),bookingLink:"(  )",caseAlias:"",dueDate:"  ",optOut:" 080-000-0000"};function SA(e,t,r){e(a=>[{id:`TL-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,at:OT(),status:t,note:r},...a])}function jA(e,t){return e.find(r=>r.type===t)}function E7({stageLabel:e,stageCode:t,templates:r,defaultVars:a,caseId:s,centerId:i="center-001",citizenPhone:o="010-****-1234",guardianPhone:l,onSmsSent:d,onConsultation:u,callScripts:p,onNavigateLink:m,showLinkageTab:h=!1,compact:x=!1}){const y=t??Mje(e),N=g.useMemo(()=>Ije(y),[y]),v=g.useMemo(()=>r.length>0?r:N,[N,r]),j={...Qje,...a},E=p??Xje,[C,A]=g.useState("CALL"),[S,_]=g.useState("citizen"),[O,D]=g.useState(0),[k,M]=g.useState({}),[F,$]=g.useState(!1),[B,P]=g.useState(0),[W,K]=g.useState("SUCCESS"),[G,U]=g.useState("");g.useEffect(()=>{if(!F)return;const Ae=setInterval(()=>P(Ge=>Ge+1),1e3);return()=>clearInterval(Ae)},[F]);const te=`${String(Math.floor(B/60)).padStart(2,"0")}:${String(B%60).padStart(2,"0")}`,re=E[O]??E[0],q=()=>{u?.(`[] : ${S==="citizen"?"":""} / : ${W} / : ${te}
${G}`,"CONTACT",` (${e})`),U(""),$(!1),P(0),M({}),D(0)},L=v[0]?.type??"CONTACT",[H,ae]=g.useState(L),[oe,ve]=g.useState(v[0]?.id??""),[ce,Ee]=g.useState(""),[xe,Te]=g.useState("NOW"),[ye,se]=g.useState(""),[ct,Q]=g.useState(""),[he,$e]=g.useState(j),[Z,je]=g.useState(!1),[ge,be]=g.useState(!0),[it,Fe]=g.useState(!1),[Et,Mt]=g.useState(null),[Be,tr]=g.useState([]),[br,Er]=g.useState(!1),[yr,Rr]=g.useState("DRAFT"),[zr,pr]=g.useState([{id:"TL-INIT",at:OT(),status:"DRAFT",note:"  "}]),hr=g.useMemo(()=>{const Ae=new Set,Ge=[];for(const ut of v)Ae.has(ut.type)||(Ae.add(ut.type),Ge.push(ut.type));return Ge},[v]);g.useEffect(()=>{hr.includes(H)||ae(hr[0]??"CONTACT")},[hr,H]);const Tr=g.useMemo(()=>v.filter(Ae=>Ae.type===H),[v,H]),Mr=g.useMemo(()=>v.find(Ae=>Ae.id===oe)??Tr[0]??v[0],[v,oe,Tr]);g.useEffect(()=>{Tr.some(Ae=>Ae.id===oe)||ve(Tr[0]?.id??v[0]?.id??"")},[Tr,oe,v]);const jn=g.useMemo(()=>{if(!Mr||typeof Mr.body!="function")return"";const Ae=Mr.body(he);if(!ge)return Ae;const Ge=he.guideLink?.trim();return!Ge||Ae.includes(Ge)?Ae:`${Ae} ${Ge}`.trim()},[Mr,he,ge]),rt=j7[yr],Pe=(kje[yr]??[]).slice(0,2),Kt=Ae=>{ae(Ae);const Ge=jA(v,Ae);Ge&&ve(Ge.id)},Pr=Ae=>{const Ge=(ut,er)=>{Rr(ut),SA(pr,ut,er)};if(Ae.id==="RETRY_WITH_ALT_TEMPLATE"){Ge("DRAFT","   ");const ut=jA(v,"REMINDER")??v[0];ut&&(ae(ut.type),ve(ut.id)),Me.info("    .");return}if(Ae.id==="SWITCH_TO_CALL"){Ge("NO_RESPONSE","   "),A("CALL"),m?.("call");return}if(Ae.id==="VERIFY_PHONE"){Q(ut=>ut?`${ut}
  `:"  "),Ge("FAILED","    ");return}if(Ae.id==="CREATE_RECONTACT_TASK"){Me.success(" ()  "),SA(pr,yr,"  ");return}if(Ae.id==="SEND_REMINDER"){const ut=jA(v,"REMINDER");ut&&(ae("REMINDER"),ve(ut.id)),Ge("CLICKED","     ");return}if(Ae.id==="MARK_NO_RESPONSE"){Ge("NO_RESPONSE","   ");return}if(Ae.id==="MARK_COMPLETED"){Ge("ACTION_COMPLETED","  ");return}Ae.id==="MARK_OPTOUT"&&Ge("OPTOUT"," ")},vr=async()=>{if(!Mr){Mt({success:!1,error:"   ."});return}if(yr==="OPTOUT"){Mt({success:!1,error:"  SMS   ."});return}if(xe==="SCHEDULE"&&!ye.trim()){Mt({success:!1,error:"   ."});return}const Ae=d5(s),Ge=c5(Ae),ut={...he,guideLink:ge?Ge:he.guideLink},er=Mr.body(ut),mr=ge&&ut.guideLink&&!er.includes(ut.guideLink)?`${er} ${ut.guideLink}`.trim():er;Fe(!0),Mt(null);const Or=await zK({caseId:s,centerId:i,citizenPhone:ce===""&&l?l:o,templateId:Mr.id,renderedMessage:mr,guardianPhone:ce===""?l:void 0,stage:y,sendPolicy:xe,scheduledAt:xe==="SCHEDULE"?ye:void 0,channel:"SMS",linkToken:Ae,linkUrl:Ge,statusHint:yr,variables:{CENTER_NAME:ut.centerName,CALLBACK_PHONE:ut.centerPhone,CASE_ALIAS:ut.caseAlias||"",DUE_DATE:ut.dueDate||"  ",OPT_OUT:ut.optOut||" 080-000-0000"}});Fe(!1),Mt(Or);const ft=Or.lifecycleStatus||Kje(Or.success,xe),Le=zje(ft);Rr(ft),SA(pr,ft,`${xe==="NOW"?"":""}   ${Mr.label}`);const We={id:`SMS-${Date.now()}`,at:xe==="SCHEDULE"?ye.replace("T"," "):OT(),templateLabel:Mr.label,type:Mr.type,mode:xe,recipient:ce,status:Le,preview:mr,note:ct.trim(),providerMessageId:Or.providerMessageId,lifecycleStatus:ft,token:Or.token||Ae,linkUrl:Or.linkUrl||Ge};tr($t=>[We,...$t]),d?.(We),Or.success&&(Q(""),$e($t=>({...$t,guideLink:Or.linkUrl||Ge})))},Cn=()=>{Mr&&(u?.(ct.trim(),H,Mr.label),Q(""))};return n.jsxs("div",{className:"bg-white rounded-xl overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 px-6 py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-base font-bold text-white flex items-center gap-2",children:[n.jsx(_C,{className:"h-4 w-4 text-blue-300"})," ",n.jsx(Qr,{className:"ml-1 bg-blue-500/20 text-blue-200 border-blue-400/30 text-[10px]",children:e})]}),n.jsxs("p",{className:"text-[11px] text-slate-300 mt-1",children:["  ",h?"  ":"","   "]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qr,{className:de("text-xs px-2.5 py-1 border",rt.tone),children:rt.label}),Be.length>0&&n.jsxs(Qr,{className:"bg-white/10 text-white border-white/20 text-xs px-2.5 py-1",children:[Be.length," "]})]})]})}),n.jsx("div",{className:"border-b border-slate-200 bg-slate-50",children:n.jsx("div",{className:"flex",children:[{key:"CALL",icon:_C,label:""},{key:"SMS",icon:ro,label:""},...h?[{key:"LINK",icon:Im,label:""}]:[]].map(({key:Ae,icon:Ge,label:ut})=>n.jsxs("button",{onClick:()=>A(Ae),className:de("flex-1 flex items-center justify-center gap-2 px-4 py-3 text-sm font-semibold transition-all border-b-2",C===Ae?"border-blue-600 text-blue-700 bg-white":"border-transparent text-slate-500 hover:text-slate-700 hover:bg-white/50"),children:[n.jsx(Ge,{className:"h-4 w-4"}),ut]},Ae))})}),C==="CALL"&&n.jsxs("div",{className:de("space-y-4",x?"px-4 py-4":"px-6 py-5"),children:[n.jsxs("div",{className:"rounded-lg border border-amber-200 bg-amber-50/80 px-4 py-2.5 text-xs text-amber-800 flex items-start gap-2",children:[n.jsx(Gn,{className:"h-3.5 w-3.5 mt-0.5 shrink-0"}),n.jsxs("span",{children:[n.jsx("strong",{children:" :"})," /AI   .   .   ."]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-semibold text-slate-600 mb-2 block",children:" "}),n.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{key:"citizen",label:" ",sub:"  ",icon:kl},{key:"guardian",label:"",sub:l?"  ":"  ",icon:jl}].map(({key:Ae,label:Ge,sub:ut,icon:er})=>n.jsxs("button",{onClick:()=>{_(Ae),D(0),M({})},disabled:Ae==="guardian"&&!l,className:de("flex items-center gap-3 rounded-xl border-2 px-4 py-3 text-left transition-all",S===Ae?"border-blue-500 bg-blue-50 ring-1 ring-blue-200":"border-slate-200 bg-white hover:border-slate-300",Ae==="guardian"&&!l&&"opacity-40 cursor-not-allowed"),children:[n.jsx("div",{className:de("h-8 w-8 rounded-full flex items-center justify-center",S===Ae?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-500"),children:n.jsx(er,{className:"h-4 w-4"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:Ge}),n.jsx("p",{className:"text-[11px] text-slate-500",children:ut})]}),S===Ae&&n.jsx(Yu,{className:"h-4 w-4 text-blue-600 ml-auto"})]},Ae))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-semibold text-slate-600 mb-2 block",children:" "}),n.jsx("div",{className:"grid grid-cols-4 gap-1 rounded-xl border border-slate-200 bg-slate-50 p-1",children:E.map((Ae,Ge)=>n.jsxs("button",{onClick:()=>D(Ge),className:de("rounded-lg px-2 py-2 text-xs font-semibold transition-all",O===Ge?"bg-white text-slate-900 shadow-sm ring-1 ring-slate-200":"text-slate-500 hover:text-slate-700 hover:bg-white/50"),children:[Ge+1,""]},Ae.step))}),n.jsxs("div",{className:"mt-3 rounded-xl border border-blue-200 bg-gradient-to-br from-blue-50 to-indigo-50/50 p-4",children:[n.jsx("p",{className:"text-sm font-bold text-blue-900 mb-2",children:re.title}),n.jsx("p",{className:"text-xs leading-relaxed text-blue-800/90",children:re.content})]}),n.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3",children:[n.jsxs("div",{className:"rounded-lg border border-slate-100 bg-slate-50/80 p-3",children:[n.jsx("p",{className:"text-[11px] font-bold text-slate-700 mb-2",children:" "}),n.jsx("ul",{className:"space-y-1",children:re.tips.map(Ae=>n.jsxs("li",{className:"text-[11px] text-slate-600 flex items-start gap-1.5",children:[n.jsx("span",{className:"text-blue-400 mt-0.5",children:""})," ",Ae]},Ae))})]}),n.jsxs("div",{className:"rounded-lg border border-slate-100 bg-slate-50/80 p-3",children:[n.jsx("p",{className:"text-[11px] font-bold text-slate-700 mb-2",children:""}),n.jsx("div",{className:"space-y-1.5",children:re.checkpoints.map(Ae=>n.jsxs("label",{className:"flex items-center gap-2 text-[11px] text-slate-600 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:!!k[Ae],onChange:Ge=>M(ut=>({...ut,[Ae]:Ge.target.checked})),className:"h-3.5 w-3.5 rounded border-slate-300 text-blue-600"}),n.jsx("span",{className:k[Ae]?"line-through text-slate-400":"",children:Ae})]},Ae))})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-semibold text-slate-600 mb-2 block",children:" "}),n.jsx("div",{className:"grid grid-cols-4 gap-2",children:[{value:"SUCCESS",label:"",icon:Zs,ac:"border-emerald-500 bg-emerald-50 text-emerald-700"},{value:"NO_ANSWER",label:"",icon:Bv,ac:"border-amber-500 bg-amber-50 text-amber-700"},{value:"REJECTED",label:"",icon:km,ac:"border-red-500 bg-red-50 text-red-700"},{value:"WRONG_NUMBER",label:"",icon:qd,ac:"border-slate-500 bg-slate-50 text-slate-700"}].map(({value:Ae,label:Ge,icon:ut,ac:er})=>n.jsxs("button",{onClick:()=>K(Ae),className:de("flex flex-col items-center gap-1.5 rounded-xl border-2 px-3 py-3 text-xs font-semibold transition-all",W===Ae?er:"border-slate-200 bg-white text-slate-500 hover:border-slate-300"),children:[n.jsx(ut,{className:"h-4 w-4"}),Ge]},Ae))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-semibold text-slate-600 mb-1.5 block",children:" "}),n.jsx(Oo,{value:G,onChange:Ae=>U(Ae.target.value),className:"min-h-[80px] text-xs rounded-lg border-slate-200",placeholder:"    "})]}),n.jsxs("div",{className:"flex items-center justify-between pt-1",children:[n.jsxs("div",{className:de("inline-flex items-center gap-2 rounded-lg px-3 py-2 text-sm font-bold",F?"bg-red-50 text-red-700 border border-red-200":"bg-slate-100 text-slate-600"),children:[n.jsx(O8,{className:"h-4 w-4"}),F?`  ${te}`:""]}),n.jsxs("div",{className:"flex gap-2",children:[F?n.jsxs(Nt,{onClick:()=>$(!1),variant:"outline",className:"h-10 border-red-300 text-red-700 hover:bg-red-50 text-sm font-semibold gap-2 rounded-xl",children:[n.jsx(Zs,{className:"h-4 w-4"})," "]}):n.jsxs(Nt,{onClick:()=>{$(!0),P(0)},className:"h-10 bg-blue-600 text-sm font-semibold text-white hover:bg-blue-700 gap-2 px-5 rounded-xl",children:[n.jsx(Ps,{className:"h-4 w-4"}),""]}),n.jsxs(Nt,{onClick:q,className:"h-10 bg-slate-800 text-sm font-semibold text-white hover:bg-slate-900 gap-2 px-5 rounded-xl",children:[n.jsx(Yu,{className:"h-4 w-4"}),"  "]})]})]})]}),C==="SMS"&&n.jsxs("div",{className:de("space-y-4",x?"px-4 py-4":"px-6 py-5"),children:[n.jsxs("div",{className:"rounded-lg border border-amber-200 bg-amber-50/80 px-4 py-2.5 text-xs text-amber-800 flex items-start gap-2",children:[n.jsx(Gn,{className:"h-3.5 w-3.5 mt-0.5 shrink-0"}),n.jsxs("span",{children:[n.jsx("strong",{children:" :"}),"  /AI   .  .    ."]})]}),n.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-3",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qr,{className:"bg-slate-800 text-white border-slate-700 text-[10px]",children:y}),n.jsx(Qr,{className:de("text-[10px] border",rt.tone),children:rt.label})]}),n.jsx("span",{className:"text-[11px] text-slate-500",children:"   1~2"})]}),n.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:Pe.map(Ae=>n.jsx(Nt,{type:"button",variant:"outline",size:"sm",onClick:()=>Pr(Ae),className:"h-8 rounded-lg text-xs",children:Ae.label},Ae.id))})]}),n.jsx("div",{className:"grid grid-cols-3 gap-1.5 rounded-xl border border-slate-200 bg-slate-50 p-1.5",children:["CONTACT","BOOKING","REMINDER"].map(Ae=>{const Ge=!hr.includes(Ae);return n.jsx("button",{onClick:()=>Kt(Ae),disabled:Ge,className:de("rounded-lg px-3 py-2.5 text-xs font-semibold transition-all",H===Ae?"bg-white text-slate-900 shadow-sm ring-1 ring-slate-200":"text-slate-500 hover:text-slate-700 hover:bg-white/50",Ge&&"opacity-40 cursor-not-allowed"),children:NA[Ae]},Ae)})}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("select",{value:oe,onChange:Ae=>ve(Ae.target.value),className:"w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm outline-none focus:border-blue-400 focus:ring-2 focus:ring-blue-100",children:Tr.map(Ae=>n.jsx("option",{value:Ae.id,children:Ae.label},Ae.id))}),n.jsxs("label",{className:"inline-flex items-center gap-2 text-xs text-slate-700 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:ge,onChange:Ae=>be(Ae.target.checked),className:"h-3.5 w-3.5 rounded border-slate-300"}),"   "]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-semibold text-slate-600 mb-2 block",children:""}),n.jsx("div",{className:"flex gap-2",children:["",""].map(Ae=>n.jsxs("button",{onClick:()=>Ee(Ae),disabled:Ae===""&&!l,className:de("flex-1 flex items-center justify-center gap-2 rounded-xl border-2 px-3 py-2.5 text-xs font-semibold transition-all",ce===Ae?"border-blue-500 bg-blue-50 text-blue-800 ring-1 ring-blue-200":"border-slate-200 bg-white text-slate-500 hover:border-slate-300",Ae===""&&!l&&"opacity-40 cursor-not-allowed"),children:[Ae===""?n.jsx(kl,{className:"h-3.5 w-3.5"}):n.jsx(jl,{className:"h-3.5 w-3.5"}),Ae]},Ae))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-semibold text-slate-600 mb-2 block",children:" "}),n.jsx("div",{className:"grid grid-cols-2 gap-1.5 rounded-xl border border-slate-200 bg-slate-50 p-1.5",children:[{key:"NOW",icon:E0,label:""},{key:"SCHEDULE",icon:gO,label:""}].map(({key:Ae,icon:Ge,label:ut})=>n.jsxs("button",{onClick:()=>Te(Ae),className:de("flex items-center justify-center gap-1.5 rounded-lg px-3 py-2.5 text-xs font-semibold transition-all",xe===Ae?"bg-white text-slate-900 shadow-sm ring-1 ring-slate-200":"text-slate-500"),children:[n.jsx(Ge,{className:"h-3.5 w-3.5"})," ",ut]},Ae))})]})]}),n.jsxs("div",{className:"flex items-center gap-3 rounded-xl border border-slate-100 bg-slate-50/50 px-4 py-2.5",children:[n.jsx("span",{className:"text-xs text-slate-500",children:":"}),n.jsx("span",{className:"text-xs font-medium text-slate-700",children:ce===""&&l?` ${l}`:` ${o}`}),n.jsx("span",{className:"text-[10px] text-slate-400 ml-auto",children:"(: TEST_SMS_TO  )"})]}),xe==="SCHEDULE"&&n.jsx("input",{type:"datetime-local",value:ye,onChange:Ae=>se(Ae.target.value),className:"w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm outline-none focus:border-blue-400 focus:ring-2 focus:ring-blue-100"}),n.jsxs("button",{onClick:()=>je(!Z),className:"flex items-center gap-1.5 text-xs text-blue-600 hover:text-blue-800 font-medium",children:[Z?n.jsx(Ac,{className:"h-3.5 w-3.5"}):n.jsx(gs,{className:"h-3.5 w-3.5"}),"  ",Z?"":""]}),Z&&n.jsx("div",{className:"grid grid-cols-2 gap-3 rounded-xl border border-slate-200 bg-slate-50/50 p-4",children:[["centerName",""],["centerPhone"," "],["guideLink"," "],["bookingLink"," "],["caseAlias"," "],["optOut"," "]].map(([Ae,Ge])=>n.jsxs("div",{children:[n.jsx("label",{className:"text-[11px] font-semibold text-slate-500",children:Ge}),n.jsx("input",{type:"text",value:he[Ae]??"",onChange:ut=>$e(er=>({...er,[Ae]:ut.target.value})),className:"mt-1 w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-xs outline-none focus:border-blue-400"})]},Ae))}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 px-4 py-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-[11px] font-bold text-slate-600",children:""}),n.jsx(Qr,{variant:"outline",className:de("text-[10px]",Wje[H]),children:NA[H]})]}),n.jsx("p",{className:"whitespace-pre-wrap text-xs leading-relaxed text-slate-700 min-h-[80px]",children:jn}),n.jsxs("div",{className:"mt-2 flex items-center justify-between text-[10px] text-slate-400 border-t border-slate-200 pt-2",children:[n.jsxs("span",{children:[jn.length,"  ",jn.length>90?"LMS":"SMS"]}),n.jsxs("span",{children:[": ",ce]})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-[11px] font-bold text-slate-600 mb-1.5",children:"/ "}),n.jsx(Oo,{value:ct,onChange:Ae=>Q(Ae.target.value),className:"flex-1 min-h-[120px] text-xs rounded-lg border-slate-200",placeholder:"    ()"})]})]}),Et&&n.jsx("div",{className:de("rounded-xl border px-4 py-3 text-xs flex items-center gap-2",Et.success?"border-emerald-200 bg-emerald-50 text-emerald-800":"border-red-200 bg-red-50 text-red-800"),children:Et.success?n.jsxs(n.Fragment,{children:[n.jsx(Zs,{className:"h-4 w-4 shrink-0"}),n.jsxs("span",{children:["  ",Et.actualTo&&`(: ${Et.actualTo})`,Et.endpoint&&`  ${Et.endpoint}`]})]}):n.jsxs(n.Fragment,{children:[n.jsx(km,{className:"h-4 w-4 shrink-0"}),n.jsx("span",{children:Et.error??" "})]})}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-1",children:[n.jsxs(Nt,{variant:"outline",className:"h-11 text-sm font-semibold gap-2 rounded-xl border-slate-300",onClick:Cn,children:[n.jsx(Ps,{className:"h-4 w-4"})," "]}),n.jsxs(Nt,{className:"h-11 bg-blue-600 text-sm font-semibold text-white hover:bg-blue-700 gap-2 rounded-xl",onClick:vr,disabled:it||yr==="OPTOUT"||!Mr,children:[n.jsx(ro,{className:"h-4 w-4"}),it?" ...":xe==="NOW"?" ":" "]})]}),yr==="OPTOUT"&&n.jsx("div",{className:"rounded-lg border border-zinc-300 bg-zinc-100 px-3 py-2 text-xs text-zinc-700",children:" .   ,      ."}),n.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"text-xs font-semibold text-slate-700",children:" "}),(yr==="FAILED"||yr==="NO_RESPONSE"||yr==="CLICKED")&&n.jsx(Nt,{size:"sm",variant:"outline",className:"h-7 text-[11px]",onClick:()=>Pr({id:"CREATE_RECONTACT_TASK"}),children:"  "})]}),n.jsx("div",{className:"mt-2 space-y-1.5 max-h-[180px] overflow-y-auto",children:zr.map(Ae=>{const Ge=j7[Ae.status];return n.jsxs("div",{className:"rounded-lg border border-slate-100 bg-slate-50 px-3 py-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:de("inline-flex rounded-full border px-2 py-0.5 text-[10px] font-semibold",Ge.tone),children:Ge.label}),n.jsx("span",{className:"text-[10px] text-slate-500",children:Ae.at})]}),Ae.note&&n.jsx("p",{className:"mt-1 text-[11px] text-slate-600",children:Ae.note})]},Ae.id)})})]}),Be.length>0&&n.jsxs("div",{className:"border-t border-slate-100 pt-4",children:[n.jsxs("button",{onClick:()=>Er(!br),className:"flex items-center gap-1.5 text-xs font-semibold text-slate-600",children:[br?n.jsx(Ac,{className:"h-3.5 w-3.5"}):n.jsx(gs,{className:"h-3.5 w-3.5"}),"  (",Be.length,")"]}),br&&n.jsx("div",{className:"mt-3 space-y-2 max-h-[240px] overflow-y-auto",children:Be.map(Ae=>n.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 text-xs bg-white",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"font-semibold text-slate-800",children:Ae.templateLabel}),n.jsx(Qr,{variant:"outline",className:de("text-[10px]",Yje[Ae.status]),children:Vje[Ae.status]})]}),n.jsxs("p",{className:"mt-1 text-[11px] text-slate-500",children:[Ae.at,"  ",Ae.recipient,"  ",NA[Ae.type]]}),Ae.note&&n.jsxs("p",{className:"mt-1 text-[11px] text-slate-600 italic",children:[": ",Ae.note]}),Ae.linkUrl&&n.jsxs("p",{className:"mt-1 text-[10px] text-slate-500",children:[": ",Ae.linkUrl]})]},Ae.id))})]})]}),C==="LINK"&&h&&n.jsxs("div",{className:de("space-y-4",x?"px-4 py-4":"px-6 py-5"),children:[n.jsx("p",{className:"text-xs text-slate-500",children:" ,  ,      ."}),n.jsx("div",{className:"space-y-2",children:[{entry:"program",icon:Im,bg:"bg-blue-100 text-blue-700",label:" ",sub:"    "},{entry:"call",icon:Ps,bg:"bg-emerald-100 text-emerald-700",label:"  ",sub:"v1    "},{entry:"sms",icon:ro,bg:"bg-amber-100 text-amber-700",label:"/ ",sub:"v1  /  "}].map(({entry:Ae,icon:Ge,bg:ut,label:er,sub:mr})=>n.jsxs("button",{onClick:()=>m?.(Ae),className:"w-full flex items-center justify-between rounded-xl border-2 border-slate-200 bg-white px-4 py-3.5 text-left hover:border-blue-300 hover:bg-blue-50/30 transition-all",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:de("h-9 w-9 rounded-lg flex items-center justify-center",ut),children:n.jsx(Ge,{className:"h-4 w-4"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:er}),n.jsx("p",{className:"text-[11px] text-slate-500",children:mr})]})]}),n.jsx(Om,{className:"h-5 w-5 text-slate-400"})]},Ae))})]})]})}const qK=["","","",""],Gd=[{top:"",mid:"",sub:" ",code:"H-PH-001",label:"  ",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["","",""],dementiaFit:!0},{top:"",mid:"",sub:" ",code:"H-PH-002",label:"  ( 3 )",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["",""],dementiaFit:!1},{top:"",mid:"",sub:" ",code:"H-PH-003",label:"   ",keywords:["","","",""],stageFit:[2],mciSeverityFit:[""],dementiaFit:!1},{top:"",mid:"",sub:" ",code:"H-PH-004",label:"    ",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["","",""],dementiaFit:!0},{top:"",mid:"",sub:" ",code:"H-PH-005",label:" ( )",keywords:["","",""],stageFit:[3],mciSeverityFit:[""],dementiaFit:!0},{top:"",mid:"",sub:"",code:"H-CG-001",label:"  (8)",keywords:["","","","8"],stageFit:[2,3],mciSeverityFit:["",""],dementiaFit:!1},{top:"",mid:"",sub:"",code:"H-CG-002",label:"   ",keywords:["","","",""],stageFit:[2],mciSeverityFit:[""],dementiaFit:!1},{top:"",mid:"",sub:"",code:"H-CG-003",label:"  (1:1)",keywords:["","","","1:1"],stageFit:[2,3],mciSeverityFit:["",""],dementiaFit:!0},{top:"",mid:"",sub:" ",code:"H-CG-004",label:"    ",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["","",""],dementiaFit:!0},{top:"",mid:"",sub:" ",code:"H-CG-005",label:"/  ",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["",""],dementiaFit:!0},{top:"",mid:"",sub:"",code:"H-PR-001",label:"   ",keywords:["","",""],stageFit:[3],dementiaFit:!0},{top:"",mid:"",sub:"",code:"H-PR-002",label:" MRI/PET  ",keywords:["MRI","PET",""],stageFit:[3],dementiaFit:!0},{top:"",mid:"",sub:" ",code:"H-PR-003",label:"    ",keywords:["","","",""],stageFit:[2,3],dementiaFit:!0},{top:"",mid:" ",sub:" ",code:"L-DA-001",label:"   ",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["",""],dementiaFit:!0},{top:"",mid:" ",sub:" ",code:"L-DA-002",label:"  ()",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["",""],dementiaFit:!0},{top:"",mid:" ",sub:" ",code:"L-DA-003",label:" /   ",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["","",""],dementiaFit:!0},{top:"",mid:"",sub:"",code:"L-AD-001",label:"  (/)",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["",""],dementiaFit:!1},{top:"",mid:"",sub:"",code:"L-AD-002",label:"  /",keywords:["","",""],stageFit:[3],mciSeverityFit:[""],dementiaFit:!0},{top:"",mid:"",sub:" ",code:"L-EN-001",label:"   ",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["",""],dementiaFit:!0},{top:"",mid:"",sub:" ",code:"L-EN-002",label:"   ",keywords:["","",""],stageFit:[3],mciSeverityFit:[""],dementiaFit:!0},{top:"",mid:"",sub:"",code:"L-SP-001",label:"  ",keywords:["","",""],stageFit:[2,3],mciSeverityFit:["",""],dementiaFit:!0},{top:"",mid:"",sub:"",code:"L-SP-002",label:"   ",keywords:["","",""],stageFit:[2],mciSeverityFit:["",""],dementiaFit:!1},{top:"",mid:"",sub:"",code:"S-FA-001",label:"   ",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["","",""],dementiaFit:!0},{top:"",mid:"",sub:"",code:"S-FA-002",label:"    ",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["",""],dementiaFit:!0},{top:"",mid:"",sub:"",code:"S-WA-001",label:" /",keywords:["","","GPS",""],stageFit:[3],mciSeverityFit:[""],dementiaFit:!0},{top:"",mid:"",sub:"",code:"S-WA-002",label:"   ",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:[""],dementiaFit:!0},{top:"",mid:"",sub:"119",code:"S-EM-001",label:"119  ",keywords:["119","","",""],stageFit:[2,3],mciSeverityFit:["","",""],dementiaFit:!0},{top:"",mid:"",sub:"",code:"S-EM-002",label:"    ",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["",""],dementiaFit:!0},{top:"",mid:"",sub:"",code:"S-ME-001",label:"  (/)",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["","",""],dementiaFit:!0},{top:"",mid:"",sub:"",code:"S-ME-002",label:"    ",keywords:["","",""],stageFit:[2,3],mciSeverityFit:["",""],dementiaFit:!0},{top:"",mid:" ",sub:" ",code:"F-ED-001",label:"   (1)",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["","",""],dementiaFit:!0},{top:"",mid:" ",sub:" ",code:"F-ED-002",label:"   (2)",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["",""],dementiaFit:!0},{top:"",mid:" ",sub:" ",code:"F-ED-003",label:"    ",keywords:["","",""],stageFit:[2,3],mciSeverityFit:["",""],dementiaFit:!1},{top:"",mid:" ",sub:" ",code:"F-RC-001",label:"  ()",keywords:["","","",""],stageFit:[2,3],mciSeverityFit:["",""],dementiaFit:!0},{top:"",mid:" ",sub:" ",code:"F-RC-002",label:"  ",keywords:["","",""],stageFit:[2,3],mciSeverityFit:["","",""],dementiaFit:!0},{top:"",mid:"",sub:"",code:"F-CO-001",label:"  ",keywords:["","",""],stageFit:[2,3],mciSeverityFit:["","",""],dementiaFit:!0},{top:"",mid:"",sub:"",code:"F-CO-002",label:"/  ",keywords:["","","",""],stageFit:[3],mciSeverityFit:[""],dementiaFit:!0},{top:"",mid:"",sub:"",code:"F-DS-001",label:"  /",keywords:["","",""],stageFit:[3],dementiaFit:!0},{top:"",mid:"",sub:"",code:"F-DS-002",label:"  ",keywords:["","",""],stageFit:[2,3],dementiaFit:!0},{top:"",mid:"",sub:"",code:"F-DS-003",label:"   ",keywords:["","",""],stageFit:[3],dementiaFit:!0}];function Zje(e){const t=new Set;for(const r of Gd)r.top===e&&t.add(r.mid);return Array.from(t)}function Jje(e,t){return Gd.filter(r=>r.top===e&&r.mid===t)}function ewe(e){if(!e.trim())return Gd;const t=e.toLowerCase().trim();return Gd.filter(r=>r.label.toLowerCase().includes(t)||r.code.toLowerCase().includes(t)||r.keywords.some(a=>a.toLowerCase().includes(t))||r.mid.toLowerCase().includes(t)||r.sub.toLowerCase().includes(t))}function twe(e){const t=[];e.stage===2&&(e.resultLabel==="MCI"?(e.mciSeverity===""?(pn(t,"H-PH-002","rule","","MCI        "),pn(t,"H-CG-001","rule","","   MCI    "),pn(t,"S-ME-001","rule","","   MCI     ")):e.mciSeverity===""?(pn(t,"H-CG-003","rule","","MCI  :      (  )"),pn(t,"H-PH-004","rule","","        "),pn(t,"F-ED-001","rule","","  MCI    (  )"),pn(t,"L-DA-001","rule","","      ")):e.mciSeverity===""&&(pn(t,"H-CG-003","rule","","MCI :   +     "),pn(t,"H-CG-005","rule","","/     (  )"),pn(t,"F-ED-002","rule","","        "),pn(t,"S-FA-001","rule","","     MCI   "),pn(t,"F-RC-001","rule","","         ")),e.riskTags.includes("")&&pn(t,"S-FA-002","rule","","         "),e.riskTags.includes("")&&pn(t,"S-WA-001","rule","","       "),e.riskTags.includes("")&&pn(t,"F-RC-001","rule","","        ")):e.resultLabel===""&&(pn(t,"H-PR-003","rule","","        "),pn(t,"F-DS-001","rule","","    (  )"),pn(t,"F-ED-002","rule","","     "))),e.stage===3&&(pn(t,"H-PR-001","rule","","Stage3       (  )"),pn(t,"H-PR-002","rule",""," MRI/PET    "),pn(t,"H-CG-003","rule","","       "),e.resultLabel===""&&(pn(t,"F-DS-001","rule","","      "),pn(t,"F-DS-002","rule","","    (  )")),e.riskTags.includes("")&&(pn(t,"S-EM-001","rule","","   119     "),pn(t,"L-DA-003","rule","","      (  )")),e.riskTags.includes("")&&pn(t,"S-ME-002","rule","","         "));const r=new Set;return t.filter(a=>r.has(a.code)?!1:(r.add(a.code),!0)).slice(0,5)}function pn(e,t,r,a,s){const i=Gd.find(o=>o.code===t);i&&e.push({code:i.code,label:i.label,top:i.top,mid:i.mid,reasonSummary:s,evidenceSnippets:[],source:r,confidenceLabel:a})}function rwe(e){const t=[];if(e.stage===2&&e.resultLabel==="MCI"&&e.mciSeverity===""){const r=Gd.find(a=>a.code==="H-CG-004");r&&t.push({code:r.code,label:r.label,top:r.top,mid:r.mid,reasonSummary:"MCI          (  )",evidenceSnippets:["   3.2: MCI      ,     ."," :     ,      ."],source:"rag",confidenceLabel:""})}if(e.stage===3){const r=Gd.find(a=>a.code==="F-CO-002");r&&t.push({code:r.code,label:r.label,top:r.top,mid:r.mid,reasonSummary:"Stage3         (  )",evidenceSnippets:["   :          ."],source:"rag",confidenceLabel:""})}return t.slice(0,3)}function nwe(e){const t=twe(e),r=rwe(e),a=new Set(t.map(i=>i.code)),s=[...t];for(const i of r)a.has(i.code)||(a.add(i.code),s.push(i));return s.slice(0,5)}let A7=0;function awe(e,t,r,a,s,i){return A7+=1,{eventId:`AE-${Date.now()}-${A7}`,caseId:e,actorId:t,actorName:r,at:new Date().toISOString(),type:a,payload:s,sourceMeta:i}}const swe={ADD_SELECTED:"  ",REMOVE_SELECTED:"  ",UPDATE_EXECUTION:"  ",PIN:" ",UNPIN:" ",ADD_FROM_RECO:"  ",HOLD_RECO:"  ",STATUS_CHANGE:" "},iwe=["","","","",""],owe=["","","",""],WK={:"bg-blue-100 text-blue-700",:"bg-amber-100 text-amber-700",:"bg-green-100 text-green-700",:"bg-gray-100 text-gray-500"};function lwe(e){const t=new Date;return t.setDate(t.getDate()+e),`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`}const VK={:n.jsx(IX,{className:"h-4 w-4"}),:n.jsx(wp,{className:"h-4 w-4"}),:n.jsx(Do,{className:"h-4 w-4"}),:n.jsx(jl,{className:"h-4 w-4"})};function cwe({caseId:e,stage:t,resultLabel:r,mciSeverity:a,riskTags:s=[],actorId:i="OP-001",actorName:o="",readOnly:l=!1}){const[d,u]=g.useState([]),[p,m]=g.useState(new Set),[h,x]=g.useState(new Set),[y,N]=g.useState(!1),[v,j]=g.useState(""),[E,C]=g.useState(""),[A,S]=g.useState(new Set),[_,O]=g.useState([]),[D,k]=g.useState(null),[M,F]=g.useState(!1),[$,B]=g.useState(new Set),[P,W]=g.useState("picker"),K=g.useMemo(()=>({stage:t,resultLabel:r,mciSeverity:a,riskTags:s}),[t,r,a,s]),G=g.useMemo(()=>nwe(K),[K]),U=g.useCallback((Q,he,$e)=>{const Z=awe(e,i,o,Q,he,$e);O(je=>[Z,...je])},[e,i,o]),te=g.useCallback(Q=>{m(he=>{const $e=new Set(he);if($e.has(Q))$e.delete(Q),u(Z=>Z.filter(je=>je.code!==Q)),U("REMOVE_SELECTED",{code:Q});else{$e.add(Q);const Z=Gd.find(je=>je.code===Q);if(Z){const je={code:Z.code,label:Z.label,top:Z.top,mid:Z.mid,mode:"",dueDate:"",assigneeId:i,assigneeName:o,notes:"",status:"",addedAt:new Date().toISOString(),addedSource:"manual"};u(ge=>[...ge,je]),U("ADD_SELECTED",{code:Q,label:Z.label})}}return $e})},[i,o,U]),re=g.useCallback(Q=>{if(p.has(Q.code))return;m($e=>new Set($e).add(Q.code));const he={code:Q.code,label:Q.label,top:Q.top,mid:Q.mid,mode:"",dueDate:"",assigneeId:i,assigneeName:o,notes:"",status:"",addedAt:new Date().toISOString(),addedSource:Q.source};u($e=>[...$e,he]),U("ADD_FROM_RECO",{code:Q.code,label:Q.label,source:Q.source},{source:Q.source,code:Q.code})},[p,i,o,U]),q=g.useCallback(Q=>{x(he=>{const $e=new Set(he);return $e.has(Q)?($e.delete(Q),U("UNPIN",{code:Q})):($e.add(Q),U("PIN",{code:Q})),$e})},[U]),L=g.useCallback(()=>{if(l)return;const Q=G.filter(he=>!p.has(he.code)).slice(0,3);if(Q.length!==0)for(const he of Q)re(he)},[re,p,G,l]),H=g.useCallback(()=>{l||(u(Q=>Q.map((he,$e)=>{const Z=t===2?r===""?"":r==="MCI"?$e%2===0?"":"":"":$e%3===0?"":$e%3===1?"":"",je=he.status===""?"":"",ge=he.dueDate||lwe(t===2?3+$e:2+$e);return{...he,mode:Z,status:je,dueDate:ge}})),U("STATUS_CHANGE",{reason:"  ",stage:t,resultLabel:r}))},[U,l,r,t]),ae=g.useMemo(()=>d.filter(Q=>Q.addedSource&&Q.addedSource!=="manual").length,[d]),oe=g.useMemo(()=>d.filter(Q=>Q.status==="").length,[d]),ve=g.useMemo(()=>d.filter(Q=>Q.status==="").length,[d]),ce=g.useMemo(()=>d.filter(Q=>Q.status!==""&&!Q.dueDate).length,[d]),Ee=g.useMemo(()=>{if(G.length===0)return 0;const Q=G.filter(he=>p.has(he.code)).length;return Math.round(Q/G.length*100)},[p,G]),xe=g.useMemo(()=>t===2?["1)      ","2)  // ","3)   "]:["1) /   ","2)   /  ","3)     "],[t]),Te=g.useCallback(Q=>{k({...Q}),F(!0)},[]),ye=g.useCallback(Q=>{u(he=>he.map($e=>$e.code===Q.code?Q:$e)),U("UPDATE_EXECUTION",{code:Q.code,mode:Q.mode,status:Q.status,dueDate:Q.dueDate,assigneeName:Q.assigneeName}),F(!1),k(null)},[U]),se=g.useMemo(()=>{if(!v.trim())return null;let Q=ewe(v);return y&&(Q=Q.filter(he=>h.has(he.code))),Q},[v,y,h]),ct=g.useCallback(Q=>{S(he=>{const $e=new Set(he);return $e.has(Q)?$e.delete(Q):$e.add(Q),$e})},[]);return n.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-12 gap-3",children:[n.jsxs("div",{className:"xl:col-span-8 space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsxs(Qr,{variant:"outline",className:"text-xs",children:["Stage ",t]}),n.jsx(Qr,{variant:"outline",className:"text-xs",children:r}),a&&n.jsxs(Qr,{variant:"outline",className:"text-xs",children:["MCI ",a]}),s.map(Q=>n.jsx(Qr,{variant:"destructive",className:"text-xs",children:Q},Q))]}),n.jsxs("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-4",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[n.jsx("p",{className:"text-[11px] text-slate-500",children:" "}),n.jsxs("p",{className:"mt-1 text-sm font-bold text-slate-900",children:[Ee,"%"]}),n.jsx("div",{className:"mt-1.5 h-1.5 w-full rounded-full bg-gray-200 overflow-hidden",children:n.jsx("div",{className:"h-full rounded-full bg-blue-500 transition-all",style:{width:`${Ee}%`}})}),n.jsxs("p",{className:"mt-1 text-[10px] text-slate-500",children:[" ",G.length,"  ",ae," "]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[n.jsx("p",{className:"text-[11px] text-slate-500",children:" "}),n.jsxs("p",{className:"mt-1 text-sm font-bold text-slate-900",children:[d.length===0?0:Math.round(oe/d.length*100),"%"]}),n.jsx("div",{className:"mt-1.5 h-1.5 w-full rounded-full bg-gray-200 overflow-hidden",children:n.jsx("div",{className:"h-full rounded-full bg-emerald-500 transition-all",style:{width:`${d.length===0?0:Math.round(oe/d.length*100)}%`}})}),n.jsxs("p",{className:"mt-1 text-[10px] text-slate-500",children:[" ",oe," /  ",ve]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[n.jsx("p",{className:"text-[11px] text-slate-500",children:" "}),n.jsxs("p",{className:"mt-1 text-sm font-bold text-slate-900",children:[ce,""]}),n.jsx("p",{className:"text-[10px] text-slate-500",children:"/  "})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[n.jsx("p",{className:"text-[11px] text-slate-500",children:" "}),xe.map(Q=>n.jsx("p",{className:"mt-1 text-[10px] text-slate-600",children:Q},Q))]})]}),!l&&n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsxs(Nt,{size:"sm",variant:"outline",onClick:L,children:[n.jsx(Zb,{className:"mr-1 h-3.5 w-3.5"}),"  3  "]}),n.jsxs(Nt,{size:"sm",variant:"outline",onClick:H,children:[n.jsx(Sl,{className:"mr-1 h-3.5 w-3.5"}),"   "]})]}),n.jsx("div",{className:"flex gap-1 border-b border-gray-200 pb-0",children:["picker","selected","audit"].map(Q=>n.jsxs("button",{onClick:()=>W(Q),className:de("px-3 py-2 text-sm font-medium border-b-2 transition-colors",P===Q?"border-blue-600 text-blue-700":"border-transparent text-gray-500 hover:text-gray-700"),children:[Q==="picker"&&n.jsxs(n.Fragment,{children:[n.jsx(NO,{className:"inline h-3.5 w-3.5 mr-1"})," "]}),Q==="selected"&&n.jsxs(n.Fragment,{children:[n.jsx(Yu,{className:"inline h-3.5 w-3.5 mr-1"})," (",d.length,")"]}),Q==="audit"&&n.jsxs(n.Fragment,{children:[n.jsx(ta,{className:"inline h-3.5 w-3.5 mr-1"}),"  (",_.length,")"]})]},Q))}),P==="picker"&&n.jsx(dwe,{activeTop:E,setActiveTop:C,expandedMids:A,toggleMid:ct,checkedCodes:p,toggleCheck:te,pinnedCodes:h,togglePin:q,showPinnedOnly:y,setShowPinnedOnly:N,searchQuery:v,setSearchQuery:j,searchResults:se,readOnly:l}),P==="selected"&&n.jsx(uwe,{items:d,onOpenDrawer:Te,readOnly:l}),P==="audit"&&n.jsx(pwe,{events:_})]}),n.jsx("div",{className:"xl:col-span-4",children:n.jsx("div",{className:"sticky top-4",children:n.jsx(mwe,{recommendations:G,checkedCodes:p,heldCodes:$,onAdd:re,onHold:Q=>{B(he=>new Set(he).add(Q)),U("HOLD_RECO",{code:Q})},readOnly:l})})}),M&&D&&n.jsx(fwe,{item:D,onSave:ye,onClose:()=>{F(!1),k(null)},readOnly:l})]})}function dwe({activeTop:e,setActiveTop:t,expandedMids:r,toggleMid:a,checkedCodes:s,toggleCheck:i,pinnedCodes:o,togglePin:l,showPinnedOnly:d,setShowPinnedOnly:u,searchQuery:p,setSearchQuery:m,searchResults:h,readOnly:x}){const y=g.useRef(null);return n.jsxs(Cr,{children:[n.jsxs(Nn,{className:"pb-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(Sn,{className:"text-sm flex items-center gap-1.5",children:[n.jsx(NO,{className:"h-4 w-4 text-blue-600"})," "]}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsxs("button",{onClick:()=>u(!d),className:de("flex items-center gap-1 text-xs px-2 py-1 rounded-md transition-colors",d?"bg-amber-100 text-amber-700":"text-gray-500 hover:bg-gray-100"),children:[d?n.jsx(RY,{className:"h-3 w-3"}):n.jsx(DY,{className:"h-3 w-3"})," "]})})]}),n.jsxs("div",{className:"relative mt-2",children:[n.jsx(pg,{className:"absolute left-2.5 top-2.5 h-3.5 w-3.5 text-gray-400"}),n.jsx(Ir,{value:p,onChange:N=>m(N.target.value),placeholder:", ,  ...",className:"pl-8 h-8 text-xs"}),p&&n.jsx("button",{onClick:()=>m(""),className:"absolute right-2 top-2 text-gray-400 hover:text-gray-600",children:n.jsx(qd,{className:"h-3.5 w-3.5"})})]})]}),n.jsx(_r,{className:"pt-0",children:h!==null?n.jsxs("div",{className:"mt-2",children:[n.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:[h.length,"  "]}),n.jsx("div",{ref:y,className:"max-h-[400px] overflow-y-auto space-y-0.5 pr-1",children:h.length===0?n.jsx("div",{className:"text-center text-xs text-gray-400 py-8",children:"  "}):h.map(N=>n.jsx(C7,{item:N,checked:s.has(N.code),pinned:o.has(N.code),onToggle:()=>i(N.code),onPin:()=>l(N.code),readOnly:x,showBreadcrumb:!0},N.code))})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"grid grid-cols-4 gap-1.5 mt-2 mb-3",children:qK.map(N=>{const v=e===N;return n.jsxs("button",{onClick:()=>t(N),className:de("flex flex-col items-center gap-1 py-2.5 rounded-lg text-xs font-medium transition-all border",v?"border-blue-300 bg-blue-50 text-blue-700 shadow-sm":"border-gray-200 bg-white text-gray-600 hover:bg-gray-50"),children:[n.jsx("span",{className:de("p-1.5 rounded-md",v?"bg-blue-100":"bg-gray-100"),children:VK[N]}),N]},N)})}),n.jsx("div",{ref:y,className:"max-h-[400px] overflow-y-auto space-y-1 pr-1",children:Zje(e).map(N=>{const v=r.has(N);let j=Jje(e,N);return d&&(j=j.filter(E=>o.has(E.code))),n.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[n.jsxs("button",{onClick:()=>a(N),className:"w-full flex items-center justify-between px-3 py-2 text-xs font-semibold text-gray-700 bg-gray-50 hover:bg-gray-100 transition-colors","aria-expanded":v,children:[n.jsxs("span",{className:"flex items-center gap-1.5",children:[v?n.jsx(gs,{className:"h-3.5 w-3.5"}):n.jsx(ei,{className:"h-3.5 w-3.5"}),N,n.jsx(Qr,{variant:"secondary",className:"text-[10px] ml-1",children:j.length})]}),j.some(E=>s.has(E.code))&&n.jsxs(Qr,{className:"text-[10px] bg-blue-600",children:[j.filter(E=>s.has(E.code)).length," "]})]}),v&&n.jsx("div",{className:"border-t border-gray-100 divide-y divide-gray-50",children:j.length===0?n.jsx("div",{className:"text-xs text-gray-400 text-center py-3",children:d?"   ":" "}):j.map(E=>n.jsx(C7,{item:E,checked:s.has(E.code),pinned:o.has(E.code),onToggle:()=>i(E.code),onPin:()=>l(E.code),readOnly:x},E.code))})]},N)})})]})})]})}function C7({item:e,checked:t,pinned:r,onToggle:a,onPin:s,readOnly:i,showBreadcrumb:o=!1}){return n.jsxs("div",{className:de("flex items-center gap-2 px-3 py-2 text-xs transition-colors group",t?"bg-blue-50/60":"hover:bg-gray-50"),children:[!i&&n.jsx("button",{onClick:a,className:de("w-4 h-4 rounded border flex items-center justify-center shrink-0 transition-colors",t?"bg-blue-600 border-blue-600 text-white":"border-gray-300 hover:border-blue-400"),"aria-label":`${e.label} ${t?" ":""}`,children:t&&n.jsx(Yu,{className:"h-3 w-3"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"font-medium text-gray-800 truncate",children:e.label}),o&&n.jsxs("div",{className:"text-[10px] text-gray-400 truncate mt-0.5",children:[e.top,"  ",e.mid,"  ",e.sub]})]}),n.jsx("span",{className:"text-[10px] text-gray-400 font-mono shrink-0",children:e.code}),n.jsx("button",{onClick:s,className:de("p-0.5 rounded transition-colors shrink-0",r?"text-amber-500":"text-gray-300 opacity-0 group-hover:opacity-100"),"aria-label":`${e.label} ${r?" ":" "}`,children:r?n.jsx(RQ,{className:"h-3 w-3 fill-current"}):n.jsx(OQ,{className:"h-3 w-3"})})]})}function uwe({items:e,onOpenDrawer:t,readOnly:r}){if(e.length===0)return n.jsx(Cr,{children:n.jsxs(_r,{className:"py-8 text-center",children:[n.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-blue-50 flex items-center justify-center mb-3",children:n.jsx(NO,{className:"h-6 w-6 text-blue-400"})}),n.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"   "}),n.jsxs("p",{className:"text-xs text-gray-400 mt-1.5 max-w-[280px] mx-auto",children:['" "    ,',n.jsx("br",{}),"        ."]}),n.jsx("div",{className:"flex items-center justify-center gap-2 mt-4",children:n.jsxs("div",{className:"inline-flex items-center gap-1.5 rounded-md border border-blue-200 bg-blue-50 px-3 py-1.5 text-[11px] text-blue-700",children:[n.jsx(Zb,{className:"h-3.5 w-3.5"}),"       "]})})]})});const a=e.reduce((s,i)=>((s[i.top]??=[]).push(i),s),{});return n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:[n.jsxs("span",{children:[" ",e.length," "]}),n.jsx("span",{children:""}),n.jsxs("span",{className:"text-green-600",children:[e.filter(s=>s.status==="").length," "]}),n.jsxs("span",{className:"text-amber-600",children:[e.filter(s=>s.status==="").length," "]}),n.jsxs("span",{className:"text-blue-600",children:[e.filter(s=>s.status==="").length," "]}),n.jsxs("span",{className:"text-gray-400",children:[e.filter(s=>s.status==="").length," "]})]}),qK.filter(s=>a[s]?.length).map(s=>n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[n.jsx("span",{className:"p-1 rounded bg-gray-100",children:VK[s]}),n.jsx("span",{className:"text-xs font-semibold text-gray-700",children:s}),n.jsx(Qr,{variant:"secondary",className:"text-[10px]",children:a[s].length})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:a[s].map(i=>n.jsxs("button",{onClick:()=>!r&&t(i),className:de("text-left border rounded-lg p-3 transition-all",r?"cursor-default":"hover:shadow-md hover:border-blue-300 cursor-pointer","bg-white border-gray-200"),children:[n.jsxs("div",{className:"flex items-start justify-between mb-1.5",children:[n.jsx("span",{className:"text-xs font-semibold text-gray-800 flex-1 min-w-0 truncate",children:i.label}),n.jsx(Qr,{className:de("text-[10px] shrink-0 ml-2",WK[i.status]),children:i.status})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-[11px] text-gray-500",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Xu,{className:"h-3 w-3"}),i.mode]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(kl,{className:"h-3 w-3"}),i.assigneeName]}),i.dueDate&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(HY,{className:"h-3 w-3"}),i.dueDate]}),i.orgLink?.name&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Qb,{className:"h-3 w-3"}),i.orgLink.name]})]}),i.notes&&n.jsxs("div",{className:"text-[10px] text-gray-400 mt-1.5 truncate",children:[" ",i.notes]}),i.addedSource&&i.addedSource!=="manual"&&n.jsxs("div",{className:"text-[10px] text-purple-500 mt-1",children:[n.jsx(Zb,{className:"inline h-3 w-3 mr-0.5"}),i.addedSource==="rule"?"   ":"   "," "]}),!r&&n.jsxs("div",{className:"text-[10px] mt-2 text-blue-600 font-medium flex items-center gap-1",children:[n.jsx(Na,{className:"h-3 w-3"}),"  "]})]},i.code))})]},s))]})}function fwe({item:e,onSave:t,onClose:r,readOnly:a}){const[s,i]=g.useState({...e}),o=(d,u)=>{i(p=>({...p,[d]:u}))},l=(d,u)=>{i(p=>({...p,orgLink:{...p.orgLink,name:p.orgLink?.name??"",[d]:u}}))};return n.jsxs("div",{className:"fixed inset-0 z-50 flex justify-end",children:[n.jsx("div",{className:"absolute inset-0 bg-black/30",onClick:r}),n.jsxs("div",{className:"relative w-full max-w-md bg-white shadow-xl flex flex-col animate-in slide-in-from-right duration-200",children:[n.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b bg-gray-50",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:"  "}),n.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:s.label})]}),n.jsx("button",{onClick:r,className:"p-1 rounded hover:bg-gray-200 text-gray-500",children:n.jsx(qd,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-3 space-y-4",children:[n.jsxs("div",{children:[n.jsx(xd,{children:" "}),n.jsx("div",{className:"text-xs text-gray-600 bg-gray-50 px-2 py-1.5 rounded font-mono",children:s.code})]}),n.jsxs("div",{children:[n.jsx(xd,{children:""}),n.jsxs("div",{className:"text-xs text-gray-600",children:[s.top,"  ",s.mid]})]}),n.jsxs("div",{children:[n.jsx(xd,{children:" "}),n.jsx("div",{className:"grid grid-cols-5 gap-1 mt-1",children:iwe.map(d=>n.jsx("button",{onClick:()=>!a&&o("mode",d),disabled:a,className:de("text-xs py-1.5 rounded-md border transition-colors text-center",s.mode===d?"bg-blue-600 text-white border-blue-600":"border-gray-200 text-gray-600 hover:bg-gray-50"),children:d},d))})]}),n.jsxs("div",{children:[n.jsx(xd,{children:""}),n.jsx("div",{className:"grid grid-cols-4 gap-1 mt-1",children:owe.map(d=>n.jsx("button",{onClick:()=>!a&&o("status",d),disabled:a,className:de("text-xs py-1.5 rounded-md border transition-colors text-center",s.status===d?WK[d]+" border-transparent font-medium":"border-gray-200 text-gray-600 hover:bg-gray-50"),children:d},d))})]}),n.jsxs("div",{children:[n.jsx(xd,{children:""}),n.jsx(Ir,{value:s.assigneeName,onChange:d=>o("assigneeName",d.target.value),className:"h-8 text-xs mt-1",disabled:a})]}),n.jsxs("div",{children:[n.jsx(xd,{children:""}),n.jsx(Ir,{type:"date",value:s.dueDate,onChange:d=>o("dueDate",d.target.value),className:"h-8 text-xs mt-1",disabled:a})]}),n.jsxs("div",{children:[n.jsx(xd,{children:" "}),n.jsxs("div",{className:"space-y-1.5 mt-1",children:[n.jsx(Ir,{placeholder:"",value:s.orgLink?.name??"",onChange:d=>l("name",d.target.value),className:"h-8 text-xs",disabled:a}),n.jsx(Ir,{placeholder:"",value:s.orgLink?.phone??"",onChange:d=>l("phone",d.target.value),className:"h-8 text-xs",disabled:a}),n.jsx(Ir,{placeholder:"",value:s.orgLink?.note??"",onChange:d=>l("note",d.target.value),className:"h-8 text-xs",disabled:a})]})]}),n.jsxs("div",{children:[n.jsx(xd,{children:" (/)"}),n.jsx(Oo,{value:s.notes,onChange:d=>o("notes",d.target.value),className:"text-xs mt-1 min-h-[60px]",placeholder:" ...",disabled:a})]})]}),!a&&n.jsxs("div",{className:"flex items-center justify-end gap-2 px-4 py-3 border-t bg-gray-50",children:[n.jsx(Nt,{variant:"outline",size:"sm",onClick:r,children:""}),n.jsx(Nt,{size:"sm",onClick:()=>t(s),children:""})]})]})]})}function xd({children:e}){return n.jsx("label",{className:"text-xs font-medium text-gray-700",children:e})}function mwe({recommendations:e,checkedCodes:t,heldCodes:r,onAdd:a,onHold:s,readOnly:i}){const[o,l]=g.useState(new Set),d=u=>{l(p=>{const m=new Set(p);return m.has(u)?m.delete(u):m.add(u),m})};return n.jsxs(Cr,{className:"border-purple-200",children:[n.jsxs(Nn,{className:"pb-2",children:[n.jsxs(Sn,{className:"text-sm flex items-center gap-1.5",children:[n.jsx(Zb,{className:"h-4 w-4 text-purple-600"}),"   "]}),n.jsxs("div",{className:"flex items-start gap-1.5 bg-amber-50 border border-amber-200 rounded-md px-2.5 py-2 mt-2",children:[n.jsx(Dm,{className:"h-3.5 w-3.5 text-amber-600 mt-0.5 shrink-0"}),n.jsx("p",{className:"text-[11px] text-amber-800 leading-relaxed",children:" ,      ."})]})]}),n.jsx(_r,{className:"pt-0 space-y-2",children:e.length===0?n.jsx("div",{className:"text-center text-xs text-gray-400 py-6",children:"      "}):e.map(u=>{const p=t.has(u.code),m=r.has(u.code),h=o.has(u.code);return n.jsxs("div",{className:de("border rounded-lg p-2.5 transition-colors",p?"border-green-300 bg-green-50/50":m?"border-gray-200 bg-gray-50 opacity-60":"border-gray-200 bg-white"),children:[n.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[n.jsx("span",{className:"text-xs font-semibold text-gray-800 flex-1",children:u.label}),n.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[n.jsx(Qr,{variant:"outline",className:de("text-[10px]",u.source==="rule"?"border-blue-300 text-blue-600":"border-purple-300 text-purple-600"),children:u.source==="rule"?"":" "}),n.jsx(Qr,{variant:"outline",className:de("text-[10px]",u.confidenceLabel===""?"border-green-300 text-green-600":u.confidenceLabel===""?"border-amber-300 text-amber-600":"border-gray-300 text-gray-500"),children:u.confidenceLabel})]})]}),n.jsx("p",{className:"text-[11px] text-gray-600 leading-relaxed mb-2",children:u.reasonSummary}),u.evidenceSnippets.length>0&&n.jsxs("div",{className:"mb-2",children:[n.jsxs("button",{onClick:()=>d(u.code),className:"text-[10px] text-purple-600 hover:underline flex items-center gap-0.5",children:[h?n.jsx(Ac,{className:"h-3 w-3"}):n.jsx(gs,{className:"h-3 w-3"}),"  "]}),h&&n.jsx("div",{className:"mt-1.5 space-y-1.5",children:u.evidenceSnippets.map((x,y)=>n.jsx("div",{className:"bg-gray-50 border border-gray-100 rounded px-2 py-1.5 text-[10px] text-gray-600 leading-relaxed",children:x},y))})]}),!i&&!p&&!m&&n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsxs(Nt,{size:"sm",variant:"outline",className:"text-[11px] h-7",onClick:()=>a(u),children:[n.jsx(A8,{className:"h-3 w-3 mr-0.5"}),"  "]}),n.jsx(Nt,{size:"sm",variant:"ghost",className:"text-[11px] h-7 text-gray-400",onClick:()=>s(u.code),children:""})]}),p&&n.jsxs("div",{className:"text-[10px] text-green-600 flex items-center gap-1",children:[n.jsx(Yu,{className:"h-3 w-3"}),"  "]}),m&&!p&&n.jsx("div",{className:"text-[10px] text-gray-400 flex items-center gap-1",children:"  (  )"})]},u.code)})})]})}function pwe({events:e}){return e.length===0?n.jsx(Cr,{children:n.jsxs(_r,{className:"py-8 text-center",children:[n.jsx(ta,{className:"h-8 w-8 text-gray-300 mx-auto mb-2"}),n.jsx("p",{className:"text-sm text-gray-500",children:"  "}),n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:" /   "})]})}):n.jsxs(Cr,{children:[n.jsx(Nn,{className:"pb-2",children:n.jsxs(Sn,{className:"text-sm flex items-center gap-1.5",children:[n.jsx(ta,{className:"h-4 w-4 text-gray-600"}),"  ",n.jsxs(Qr,{variant:"secondary",className:"text-[10px] ml-1",children:[e.length,""]})]})}),n.jsx(_r,{className:"pt-0",children:n.jsx("div",{className:"relative space-y-0 max-h-[400px] overflow-y-auto",children:e.map((t,r)=>n.jsxs("div",{className:"flex gap-3 pb-3",children:[n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx("div",{className:de("w-2 h-2 rounded-full mt-1.5 shrink-0",t.type==="ADD_SELECTED"||t.type==="ADD_FROM_RECO"?"bg-blue-500":t.type==="UPDATE_EXECUTION"?"bg-amber-500":t.type==="REMOVE_SELECTED"?"bg-red-500":"bg-gray-400")}),r<e.length-1&&n.jsx("div",{className:"flex-1 w-px bg-gray-200 mt-1"})]}),n.jsxs("div",{className:"flex-1 min-w-0 pb-1",children:[n.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[n.jsx("span",{className:"font-medium text-gray-800",children:swe[t.type]}),n.jsx("span",{className:"text-gray-400",children:""}),n.jsx("span",{className:"text-gray-400",children:t.actorName})]}),n.jsx("div",{className:"text-[10px] text-gray-400 mt-0.5",children:new Date(t.at).toLocaleString("ko-KR")}),t.payload&&n.jsx("div",{className:"text-[10px] text-gray-500 mt-1 bg-gray-50 rounded px-2 py-1",children:Object.entries(t.payload).map(([a,s])=>n.jsxs("span",{className:"mr-2",children:[a,": ",n.jsx("strong",{children:String(s)})]},a))}),t.sourceMeta&&n.jsxs("div",{className:"text-[10px] text-purple-500 mt-0.5",children:[": ",t.sourceMeta.source==="rule"?" ":" "]})]})]},t.eventId))})})]})}function wA(e){if(e==null||Number.isNaN(e))return 0;const t=e<=1?e*100:e;return Math.max(0,Math.min(100,Math.round(t)))}function hwe(e){const t={NORMAL:wA(e?.NORMAL),MCI:wA(e?.MCI),AD:wA(e?.AD)},r=t.NORMAL+t.MCI+t.AD;return r<=0?{NORMAL:0,MCI:0,AD:0,hasData:!1}:{NORMAL:Math.round(t.NORMAL/r*100),MCI:Math.round(t.MCI/r*100),AD:Math.round(t.AD/r*100),hasData:!0}}function gwe(e){return e<40?"":e<70?"":""}function xwe(e){return e===""?82:e===""?34:58}function bwe(e){return e===""?"":e===""?"":""}function YK({probs:e,predictedLabel:t,mciSeverity:r,mciScore:a}){const s=g.useMemo(()=>hwe(e),[e]),i=[{key:"NORMAL",label:"NORMAL",value:s.NORMAL,tone:"bg-emerald-500",textTone:"text-emerald-700"},{key:"MCI",label:"MCI",value:s.MCI,tone:"bg-blue-500",textTone:"text-blue-700"},{key:"AD",label:"AD",value:s.AD,tone:"bg-rose-500",textTone:"text-rose-700"}],o=i.reduce((h,x)=>x.value>h.value?x:h,i[0]),l=t===""?"NORMAL":t===""?"AD":t==="MCI"?"MCI":void 0,d=Math.max(0,Math.min(100,Math.round(a??xwe(r)))),u=gwe(d),p=bwe(r),m=t==="MCI";return n.jsxs("section",{className:"rounded-xl border border-slate-200 bg-gradient-to-b from-white to-slate-50 p-4 shadow-sm",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsx("h4",{className:"text-sm font-bold text-slate-900",children:"Stage2   "}),n.jsx("span",{className:"rounded-full border border-slate-200 bg-white px-2 py-0.5 text-[11px] font-semibold text-slate-700",title:"   .  .",children:"  ( )"})]}),s.hasData?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"mt-3 overflow-hidden rounded-lg border border-slate-200 bg-white",children:n.jsx("div",{className:"flex h-10 w-full",children:i.map(h=>{const x=`${h.value}%`,y=h.key===o.key,N=l===h.key;return n.jsxs("div",{title:`${h.label}: ${h.value}%`,className:de("relative flex min-w-0 items-center justify-center px-1 text-[11px] font-bold text-white",h.tone,y&&"ring-2 ring-white/80",N&&"outline outline-2 outline-slate-900/60 outline-offset-[-2px]"),style:{width:x},children:[h.value>=9?`${h.label} ${h.value}%`:`${h.value}%`,y?n.jsx("span",{className:"absolute right-1 top-1 rounded bg-white/85 px-1 py-[1px] text-[9px] font-bold text-slate-700",children:" "}):null]},h.key)})})}),n.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:i.map(h=>n.jsxs("span",{className:de("rounded border border-slate-200 bg-white px-2 py-1 text-[11px] font-semibold",h.textTone),children:[h.label," ",h.value,"%"]},`legend-${h.key}`))})]}):n.jsx("p",{className:"mt-3 rounded-md border border-slate-200 bg-white px-3 py-2 text-[11px] text-slate-500",children:"   ."}),m?n.jsxs("div",{className:"mt-4 rounded-lg border border-blue-200 bg-blue-50/60 p-3",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsx("p",{className:"text-xs font-semibold text-blue-900",children:"MCI   (ANN)"}),n.jsxs("span",{className:"rounded-full border border-blue-200 bg-white px-2 py-0.5 text-[10px] font-semibold text-blue-700",title:":  , : /  , :   +  ",children:[" : ",u]})]}),n.jsxs("div",{className:"mt-2",children:[n.jsx("div",{className:"relative h-3 rounded-full bg-gradient-to-r from-emerald-400 via-amber-400 to-rose-500",children:n.jsx("span",{className:"absolute top-1/2 h-4 w-4 -translate-y-1/2 rounded-full border-2 border-white bg-slate-900 shadow",style:{left:`calc(${d}% - 8px)`},"aria-label":`MCI  ${d}`})}),n.jsxs("div",{className:"mt-1 flex items-center justify-between text-[10px] text-slate-500",children:[n.jsx("span",{children:"0 ()"}),n.jsx("span",{children:"40 ()"}),n.jsx("span",{children:"70 ()"}),n.jsx("span",{children:"100"})]}),n.jsxs("p",{className:"mt-1 text-[11px] font-semibold text-slate-700",children:[" ",d,"   ",p]})]})]}):null]})}function Du({stage:e,missing:t,onOpenStep:r,className:a}){const s=t.slice(0,3);return n.jsx("section",{className:de("rounded-xl border border-amber-200 bg-amber-50 p-4",a),children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Gn,{size:16,className:"mt-0.5 text-amber-700"}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsxs("p",{className:"text-sm font-bold text-amber-900",children:["Stage ",e,"  "]}),n.jsx("p",{className:"mt-1 text-xs text-amber-800",children:"       .      ."}),s.length>0?n.jsx("ul",{className:"mt-2 space-y-1 text-[11px] text-amber-800",children:s.map(i=>n.jsxs("li",{children:["- ",i]},i))}):null,n.jsx("div",{className:"mt-3",children:n.jsxs("button",{type:"button",onClick:r,className:"inline-flex items-center gap-1 rounded-md border border-amber-300 bg-white px-2.5 py-1 text-[11px] font-semibold text-amber-800 hover:bg-amber-100",children:["   ",n.jsx(ei,{size:12})]})})]})]})})}const ywe=["AGE_OVER_THRESHOLD","HAS_MCI_HISTORY","HAS_DEMENTIA_HISTORY","HAS_COMPLAINT_HISTORY","HAS_REFUSAL_HISTORY","GUARDIAN_PRIMARY","COMPREHENSION_DIFFICULTY"],XK=new Set(ywe);function vwe(e){const t=[];e.age>=80&&t.push("AGE_OVER_THRESHOLD"),e.dxHistory.hasMCI&&t.push("HAS_MCI_HISTORY"),e.dxHistory.hasDementia&&t.push("HAS_DEMENTIA_HISTORY"),e.contactHistory.hasComplaint&&t.push("HAS_COMPLAINT_HISTORY"),e.contactHistory.hasRefusal&&t.push("HAS_REFUSAL_HISTORY"),e.guardian.isPrimaryContact&&t.push("GUARDIAN_PRIMARY"),e.contactHistory.needsGuardian&&t.push("NEEDS_GUARDIAN_SUPPORT"),e.contactHistory.comprehensionDifficultyFlag&&t.push("COMPREHENSION_DIFFICULTY"),t.length===0&&t.push("STANDARD_CONTACT_PATH");const r=t.some(s=>XK.has(s))?"HUMAN_FIRST":"AI_FIRST";return{strategy:r,triggers:t,policyNote:r==="HUMAN_FIRST"?"       .      .":" ()  /   .        .",confidence:"RULE"}}function u5(e){return e.some(t=>XK.has(t))}function Nwe({outcomeCode:e,execution:t,linkageStatus:r,contactPlan:a}){const s=e==="REQUEST_HUMAN"||e==="REQUEST_GUARDIAN"||e==="CONFUSED"||e==="EMOTIONAL";let i=t.status;e==="CONTINUE_SELF"&&(i="DONE"),e==="SCHEDULE_LATER"&&(i="WAITING_RESPONSE"),e==="NO_RESPONSE"&&(i="RETRY_NEEDED"),e==="REFUSE"&&(i="STOPPED"),s&&(i="HANDOFF_TO_HUMAN");const o=e==="NO_RESPONSE"?t.retryCount+1:t.retryCount;let l=r,d=" ";e==="CONTINUE_SELF"?(l=r==="BOOKING_IN_PROGRESS"?"BOOKING_DONE":"BOOKING_IN_PROGRESS",d=l==="BOOKING_DONE"?"     ":"  "):e==="SCHEDULE_LATER"?(l="BOOKING_IN_PROGRESS",d="  "):s?(l="REFERRAL_CREATED",d="   /  "):e==="REFUSE"?(l="NOT_CREATED",d="   "):e==="NO_RESPONSE"&&(d="  ");let u=a;u&&e==="SCHEDULE_LATER"&&(u={...u});let p=!1;return u&&e==="NO_RESPONSE"&&o>=2&&u.channel!=="HYBRID"&&(u={...u,channel:"HYBRID"},p=!0),{executionStatus:i,retryCount:o,linkageStatus:l,contactPlan:u,requiresHandoffMemo:s,recommendedNextAction:d,recontactAfterHours:e==="SCHEDULE_LATER"?72:e==="NO_RESPONSE"?24:e==="REFUSE"?168:48,switchedToHybrid:p}}function QK(e,t){return{specialist:t.specialist,mmse:t.mmse&&e==="HOSPITAL_REFERRAL",cdrOrGds:t.cdrOrGds,neuroCognitive:t.neuroCognitive}}function ZK(e,t,r){const a=QK(t,r),s=[],i=typeof e.mmse=="number"&&Number.isFinite(e.mmse),o=typeof e.cdr=="number"&&Number.isFinite(e.cdr);return a.mmse&&!i&&s.push("mmse"),a.cdrOrGds&&!o&&s.push("cdr"),a.neuroCognitive&&!e.neuroCognitiveType&&s.push("neuro"),a.specialist&&!e.specialist&&s.push("specialist"),s}function qf(e,t,r,a){const s={},i=ZK(e,t,r);for(const o of i)o==="mmse"&&(s.mmse="MMSE  ."),o==="cdr"&&(s.cdr="CDR  GDS  ."),o==="neuro"&&(s.neuro="  ."),o==="specialist"&&(s.specialist="    .");return typeof e.mmse=="number"&&Number.isFinite(e.mmse)&&(e.mmse<0||e.mmse>30)&&(s.mmse="MMSE  0~30  ."),typeof e.cdr=="number"&&Number.isFinite(e.cdr)&&(e.cdr<0||e.cdr>7)&&(s.cdr="CDR/GDS  0~7  ."),a?.strategyMemo!=null&&a.strategyMemo.trim().length<20&&(s.step1StrategyMemo="  20  ."),a?.consentConfirmed===!1&&(s.step1Consent="Stage1 /   ."),a?.rationale!=null&&a.rationale.trim().length===0&&(s.rationale="  ."),a?.recommendedLabel&&a?.selectedLabel&&a.recommendedLabel!==a.selectedLabel&&(!a.overrideReason||a.overrideReason.trim().length===0)&&(s.overrideReason="     ."),a?.requireNextStep&&!a?.hasNextStep&&(s.nextStep="  1 ."),s}function Swe(e,t,r){return ZK(e,t,r).length}function jwe(e){const t=typeof e.mmse=="number"?e.mmse:null,r=typeof e.cdr=="number"?e.cdr:null;return t!=null&&t<=20||r!=null&&r>=2?"":t!=null&&t<=25||r!=null&&r>=.5?"MCI":""}function wwe(e,t,r){return t?r?e>0?"PARTIAL":"VERIFY_NEEDED":"REQUESTED":"WAITING"}const ul="",EA=" ",il="02-555-0199";function Ewe(){return typeof window<"u"?`${`${window.location.origin}${"/neuro-shield/".replace(/\/$/,"")}`}/p/sms?t=preview`:"http://146.56.162.226/neuro-shield/p/sms?t=preview"}const Awe=Ewe(),JK=" 080-000-0000",f5=[{id:"S1_CONTACT_BASE",messageType:"CONTACT",label:"1 ()",body:({centerName:e,guideLink:t,centerPhone:r})=>`[:${e}]     .  (/)   .      : ${t} / : ${r}`},{id:"S1_CONTACT_GUARDIAN",messageType:"CONTACT",label:"1 ( )",body:({centerName:e,guideLink:t,centerPhone:r})=>`[:${e}]        ()   .  / : ${t} / : ${r}`},{id:"S1_BOOKING_BASE",messageType:"BOOKING",label:"1 (/)",body:({centerName:e,centerPhone:t,reservationLink:r})=>`[:${e}]  . ${r}     ${t}  .`},{id:"S1_BOOKING_CHANNEL",messageType:"BOOKING",label:"1 (/ )",body:({centerName:e,centerPhone:t,reservationLink:r})=>`[:${e}]   . ${r}  /   . : ${t}`},{id:"S1_REMINDER_FIRST",messageType:"REMINDER",label:"1 (1 )",body:({centerName:e,centerPhone:t,unsubscribe:r})=>`[:${e}]       .    . : ${t} / ${r}`},{id:"S1_REMINDER_FINAL",messageType:"REMINDER",label:"1 ()",body:({centerName:e,centerPhone:t})=>`[:${e}]    .      . : ${t}`}],m5=[{id:"S2_CONTACT_BASE",messageType:"CONTACT",label:"2   ",body:({centerName:e,guideLink:t,centerPhone:r})=>`[:${e}] 2 (/)  .        . ${t} / : ${r}`},{id:"S2_CONTACT_RELIEF",messageType:"CONTACT",label:"2   ",body:({centerName:e,guideLink:t,centerPhone:r})=>`[:${e}] 2   .       .  : ${t} / : ${r}`},{id:"S2_BOOKING_NEURO",messageType:"BOOKING",label:"2   ",body:({centerName:e,reservationLink:t})=>`[:${e}] 2       . / : ${t}`},{id:"S2_BOOKING_CLINICAL",messageType:"BOOKING",label:"2   ",body:({centerName:e,reservationLink:t,centerPhone:r})=>`[:${e}] 2 (  )  . /: ${t} / : ${r}`},{id:"S2_REMINDER_BOOKING",messageType:"REMINDER",label:"2  / ",body:({centerName:e,guideLink:t,centerPhone:r})=>`[:${e}]      .         . ${t} / : ${r}`},{id:"S2_REMINDER_NOSHOW",messageType:"REMINDER",label:"2   ",body:({centerName:e,reservationLink:t})=>`[:${e}]      .    . ${t}`}],p5=[{id:"S3_CONTACT_BASE",messageType:"CONTACT",label:"3   ",body:({centerName:e,centerPhone:t})=>`[:${e}]     . /    . : ${t}`},{id:"S3_BOOKING_REEVAL",messageType:"BOOKING",label:"3 /  ",body:({centerName:e,reservationLink:t,centerPhone:r})=>`[:${e}] /  .   : ${t} / : ${r}`},{id:"S3_BOOKING_CONFIRM",messageType:"BOOKING",label:"3  / ",body:({centerName:e,reservationLink:t,centerPhone:r})=>`[:${e}]      .  /: ${t} / : ${r}`},{id:"S3_PROGRAM_GUIDE",messageType:"CONTACT",label:"3 (/) ",body:({centerName:e,guideLink:t,centerPhone:r})=>`[:${e}]  / .        . ${t} / : ${r}`},{id:"S3_REMINDER_TRACK",messageType:"REMINDER",label:"3 ( )",body:({centerName:e,centerPhone:t})=>`[:${e}]     .      . : ${t}`}],Cwe=[{step:"greeting",title:"1:    ",content:".   .   ?       .",tips:["  ","    ","   "],checkpoints:["  ","/ ","   "]},{step:"purpose",title:"2:  ",content:"       . /     .",tips:["   ","   ","   "],checkpoints:["  ","   ","  "]},{step:"assessment",title:"3:   ",content:"   ,  (//), /    .       .",tips:["  ","  ","  "],checkpoints:["  ","  ","    "]},{step:"scheduling",title:"4:   ",content:"     , / ,   .     .",tips:["  1 ","   ","  "],checkpoints:["  ","   ","  "]}],_we=[{step:"greeting",title:"1:   / ",content:".   .   ?       .",tips:["    ","/   ","   "],checkpoints:["  ","/ ","  "]},{step:"purpose",title:"2: 2  ",content:"  2 (/)   .        .",tips:["     ","   ","   "],checkpoints:["2   ","   ","   "]},{step:"assessment",title:"3: /  ",content:"   ,   ,     .       .",tips:["    ","   ","/    "],checkpoints:["/  ","/  ","  "]},{step:"scheduling",title:"4:    ",content:"     , / ,    .     .",tips:["  1 ","   ","  "],checkpoints:["  ","/  ","  "]}];function vt(){return new Date().toISOString()}function mt(e){if(!e)return"-";const t=new Date(e);return Number.isNaN(t.getTime())?e:`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")} ${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`}function dt(e){return new Date(Date.now()+e*60*60*1e3).toISOString()}function fc(e){if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const r=t.getTimezoneOffset();return new Date(t.getTime()-r*60*1e3).toISOString().slice(0,16)}function mc(e){if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toISOString()}function Twe(e,t){const r=e==="stage1"?Cwe:_we;return t?r.map((a,s)=>({...a,content:s===1?`${a.content}

 : ${t.scriptBody}`:a.content,tips:s===0?[...a.tips,` : ${t.useCase}`]:s===2?[...a.tips,...t.evidence.slice(0,2)]:a.tips})):r}function N0(e){if(!e||!e.scheduledAt)return"(  )";const t=e.place?.trim()||"  ",r=e.contactGuide?.trim()||il;return`${e.reservationType} / ${mt(e.scheduledAt)} / ${t} /  ${r}`}function Owe(e){return e===""?10:e===""?7:e===""?6:e===""?3:1}function kwe(e){return e===""?{level:"OVERDUE",dueAt:dt(-4)}:e===""||e===""?{level:"DUE_SOON",dueAt:dt(18)}:{level:"OK",dueAt:dt(72)}}function U1(e){return e===""?{level:"EXCLUDE",score:58,notes:["  ","/  "]}:e===""?{level:"WARN",score:79,notes:["   "]}:{level:"GOOD",score:96,notes:["  "]}}function kT(e){const t={:62,:76,:24,:88,:94},r={:0,:8,:16},a={:0,:6,:18};if(!e)return 60;const s=Math.min(e.alertTags.length*3,12),i=t[e.status]+r[e.risk]+s-a[e.quality];return Math.max(5,Math.min(99,i))}function Rwe(e){return e>=85?{label:"",tone:"border-red-200 bg-red-50 text-red-700",bar:"bg-red-500",guide:"24   "}:e>=65?{label:"",tone:"border-orange-200 bg-orange-50 text-orange-700",bar:"bg-orange-500",guide:" /  "}:e>=45?{label:"",tone:"border-blue-200 bg-blue-50 text-blue-700",bar:"bg-blue-500",guide:"  "}:{label:"",tone:"border-emerald-200 bg-emerald-50 text-emerald-700",bar:"bg-emerald-500",guide:"/ "}}function Pwe(e){return e==="TRACKING"?"":e==="REEVAL_DUE"?" ":e==="REEVAL_PENDING"?" ":e==="LINKAGE_PENDING"?" ":e==="PLAN_NEEDS_UPDATE"?"  ":e==="CHURN_RISK"?" ":""}function Cv(e){return e==="ACTIVE"?"ACTIVE":e==="PAUSED"?"PAUSED":"NEEDS_UPDATE"}function Dwe(e){return e?e.status===""?"CLOSED":e.alertTags.includes(" ")?"CHURN_RISK":e.alertTags.includes(" ")?"LINKAGE_PENDING":e.alertTags.includes(" ")?e.status===""||e.status===""?"REEVAL_DUE":"REEVAL_PENDING":e.status===""?"PLAN_NEEDS_UPDATE":"TRACKING":"TRACKING"}function Iwe(e){return e?e.status===""?"PAUSED":e.status===""||e.alertTags.includes(" ")?"NEEDS_UPDATE":"ACTIVE":"ACTIVE"}function Mwe(e){return e?e.alertTags.includes(" ")||e.status===""?"HIGH":e.risk===""||e.status===""?"MID":"LOW":"MID"}function Lwe(e){const t=Dwe(e),r=Iwe(e),a=Mwe(e),s=e?.risk===""?14:e?.risk===""?21:30,i=dt(e?.status===""?12:e?.status===""?-6:72),o=dt(e?.status===""?8:36),l=dt(e?.risk===""?120:168);return{opsStatus:t,nextReevalAt:i,nextTrackingContactAt:o,nextProgramAt:l,planStatus:r,trackingCycleDays:s,churnRisk:a}}function $we(e,t,r=!1){const a=[],s=e?.alertTags.includes(" ")??!0,i=e?.alertTags.includes(" ")??!1,o=e?.alertTags.includes(" ")??!1,l=U1(e?.quality).level;return(s||t.opsStatus==="REEVAL_DUE"||t.opsStatus==="REEVAL_PENDING")&&a.push({id:"s3-action-reeval",type:"SCHEDULE_REEVAL",title:r?"/  ":"  ",reason:r?"    .":"      .",severity:t.opsStatus==="REEVAL_DUE"?"HIGH":"MID",requiresApproval:!0,decision:"PENDING"}),(i||t.churnRisk==="HIGH")&&a.push({id:"s3-action-reminder",type:"SEND_REMINDER",title:r?" /  ":" / ",reason:r?"/         .":"/      .",severity:"HIGH",requiresApproval:!1,decision:"PENDING"}),t.planStatus==="NEEDS_UPDATE"&&a.push({id:"s3-action-plan",type:"UPDATE_PLAN",title:r?"  ":"  ",reason:r?" /      .":"       .",severity:"MID",requiresApproval:!0,decision:"PENDING"}),(o||t.opsStatus==="LINKAGE_PENDING")&&a.push({id:"s3-action-escalate",type:"ESCALATE_LEVEL",title:r?"  / ":" /  ",reason:r?"      .":"       .",severity:o?"MID":"LOW",requiresApproval:!0,decision:"PENDING"}),l==="EXCLUDE"&&a.unshift({id:"s3-action-quality",type:"SEND_REMINDER",title:"  ",reason:r?"       .":"      .",severity:"HIGH",requiresApproval:!1,decision:"PENDING"}),a.slice(0,3)}function Un(e){return Math.max(0,Math.min(1,e))}function _o(e){return Math.round(Un(e)*100)}function xp(e){const t=Un(e);return t>=.7?"HIGH":t>=.45?"MID":"LOW"}function Fwe(e){return e>=85?"":e>=65?"":e>=45?"":""}function oc(e){if(e==null||Number.isNaN(e))return;const t=e<=1?e*100:e;return Math.max(0,Math.min(100,Math.round(t)))}function Bwe(e){const t=e.header.dataQuality.score;return t>=90?"HIGH":t>=70?"MID":"LOW"}function Uwe(e){if(!e)return;const t=Un(e.risk2y_now),r=e.trend==="UP"?.14:e.trend==="DOWN"?-.1:e.trend==="VOLATILE"?.08:.02;return Un(t+r)}function Hwe(e,t){if(e)return e==="MCI"?t===""?{MCI:.68,AD:.25,NORMAL:.07}:{MCI:.72,AD:.18,NORMAL:.1}:e===""?{AD:.74,MCI:.22,NORMAL:.04}:{NORMAL:.78,MCI:.16,AD:.06}}function RT(e){return e?.risk===""?"":e?.risk===""?"":""}function Gwe(e){return e?e===""?"":e:"-"}function ez(e){return e?e==="NOT_STARTED"?"":e==="IN_PROGRESS"?"":"":"-"}function PT(e){return e?.risk===""?"":e?.risk===""?"MCI":""}function AA(e){return e==="MCI"||e===""}function Kwe(e){return e===""?"FOLLOWUP_2Y":e==="MCI"?"STAGE3":"DIFF_PATH"}function Hb(e,t){return e===""?{NORMAL:.08,MCI:.2,AD:.72}:e==="MCI"?t===""?{NORMAL:.08,MCI:.66,AD:.26}:t===""?{NORMAL:.32,MCI:.56,AD:.12}:{NORMAL:.1,MCI:.72,AD:.18}:{NORMAL:.78,MCI:.17,AD:.05}}function zwe(e){if(e)return e===""?"":e===""?"":"MCI"}function qwe(e){if(e)return e===""?"":e}function Wwe(e){return e===" "?"POS":e===" "?"NEG":"UNK"}function n0(e,t="HOSPITAL"){return+!!e.specialist+ +(t==="CENTER"?!0:typeof e.mmse=="number")+ +(typeof e.cdr=="number")+ +!!e.neuroCognitiveType}function DT(e,t,r="HOSPITAL"){const a=r==="CENTER"?3:4,s=n0(e,r);return t||s>=a?"COMPLETED":s>0?"IN_PROGRESS":"NOT_STARTED"}function _7(e){const t=PT(e),r=t==="MCI"?RT(e):void 0,a=e?.status===""||e?.status===""||e?.status==="",s=e?.path?.includes("")||e?.path?.includes("")?"HOSPITAL":"CENTER",i={specialist:a?e?.risk!=="":!1,mmse:void 0,cdr:void 0,neuroCognitiveType:void 0};return{status:DT(i,!1,s),tests:i,classification:a?{label:t,probs:Hb(t,r),mciStage:r}:void 0,nextStep:void 0}}function Vwe({detail:e,modelPriorityValue:t,stage2ResultLabel:r,stage2MciSeverity:a,stage2TestAt:s,stage2Org:i}){const o=Math.max(0,Math.min(100,t)),l=Math.max(1,100-o),d=e.stage3?.transitionRisk,u=d?.risk2y_now,p=Uwe(d),m=Hwe(r,a),h=Date.now(),x=720*60*60*1e3,y=_=>{const O=new Date(_).getTime();return Number.isNaN(O)?!1:h-O<=x},N=e.timeline.filter(_=>y(_.at)),v=N.filter(_=>_.type==="CALL_ATTEMPT").length,j=N.filter(_=>_.type==="CALL_ATTEMPT"&&_.result==="SUCCESS").length,E=N.filter(_=>_.type==="CALL_ATTEMPT"&&_.result!=="SUCCESS"||_.type==="SMS_SENT"&&_.status==="FAILED").length,C=N.filter(_=>_.type==="REEVAL_SCHEDULED"||_.type==="REEVAL_RESCHEDULED"||_.type==="DIFF_SCHEDULED").length,A=e.stage3?.programs.filter(_=>_.selected&&(_.execution?.status==="PLANNED"||_.execution?.status==="IN_PROGRESS")).length??0,S=e.stage3?.programs.filter(_=>_.selected&&_.execution?.status==="DONE").length??0;return{stage1:{priorityScore:o,priorityBand:Fwe(o),interventionLevel:e.interventionLevel,percentileTop:l,updatedAt:e.scoreSummary[0]?.updatedAt??e.timeline[0]?.at},stage2:{resultLabel:r,mciSeverity:a,probs:m,tests:{neuropsych:e.stage3?"DONE":"MISSING",clinical:e.stage3?"DONE":"MISSING",specialist:e.stage3?"DONE":"MISSING"},testAt:s,org:i},stage3:{risk2yNow:u,risk2yLabel:u==null?void 0:xp(u),confidence:Bwe(e),status:e.stage3?.diffPathStatus==="COMPLETED"||e.stage3?.riskReviewedAt?"RESULT_APPLIED":"RESULT_PENDING",nextReevalAt:e.stage3?.headerMeta.nextReevalAt,nextContactAt:e.stage3?.headerMeta.nextTrackingContactAt,riskAt2y:p},opsCounts:{contactAttempts30d:v,contactSuccess30d:j,contactFail30d:E,bookings:C,programsPlanned:A,programsDone:S},dataQuality:{score:e.header.dataQuality.score,missingCount:e.header.dataQuality.notes?.length??0}}}function Ywe(e){const t=kT(e),r=Un(t/100),a=e?.risk===""?.12:e?.risk===""?.05:0,s=e?.status===""?.1:e?.status===""?.06:e?.status===""?-.08:0,i=Un(r+a+s),l=(e?.status===""?[.18,.14,.1,.06,.03,0]:e?.status===""?[-.1,-.07,-.05,-.03,-.01,0]:[.04,.02,.03,.01,.005,0]).map((h,x)=>{const y=Un(i-h),N=e?.quality===""?.08:e?.quality===""?.06:.04;return{t:dt(-(720*(5-x))),risk2y:y,ciLow:Un(y-N),ciHigh:Un(y+N),source:"model"}}),d=l[0]?.risk2y??i,u=i-d,m=Math.max(...l.map((h,x)=>x===0?0:Math.abs(h.risk2y-(l[x-1]?.risk2y??h.risk2y))))>=.08?"VOLATILE":u>=.04?"UP":u<=-.04?"DOWN":"FLAT";return{risk2y_now:i,risk2y_label:i>=.7?"HIGH":i>=.45?"MID":"LOW",trend:m,variabilityNote:m==="VOLATILE"?"  /     .":void 0,updatedAt:vt(),modelVersion:"stage3-risk-v1.2",series:l}}function Xwe(e){const t=e?.risk===""||e?.status==="";return[{id:"program-precision-diff-neuro",major:" ",middle:" ",leaf:"  ",pinned:t},{id:"program-precision-mri-route",major:" ",middle:" ",leaf:" / ",pinned:t},{id:"program-case-followup-weekly",major:" ",middle:" ",leaf:"     ",pinned:!0},{id:"program-case-caregiver",major:" ",middle:" ",leaf:"  "},{id:"program-support-homevisit",major:"",middle:" ",leaf:" / "},{id:"program-support-education",major:"",middle:"",leaf:"   ",pinned:e?.quality!==""},{id:"program-family-rest",major:"/ ",middle:"",leaf:"    "},{id:"program-family-counseling",major:"/ ",middle:"",leaf:"  "}]}function Qwe(e){const t=new Set(["program-precision-diff-neuro","program-case-followup-weekly","program-support-education"]);return e.filter(r=>t.has(r.id)).map(r=>({...r,selected:!0,execution:{owner:ul,status:"PLANNED",dueDate:dt(72),method:""}}))}function T7(e){return e?e==="CONTINUE_SELF"?"":e==="NO_RESPONSE"||e==="REFUSE"?"":" ":" "}function Zwe(e){const t=U1(e?.quality).level,r=!!e?.profile.guardianPhone;return[{key:"CONSENT_OK",label:" ",status:t==="EXCLUDE"?"FAIL":"PASS",failReason:t==="EXCLUDE"?"   ":void 0,fixAction:t==="EXCLUDE"?{label:" ",action:"REQUEST_CONSENT"}:void 0},{key:"CONTACTABLE_TIME_OK",label:"   ",status:e?.status===""?"UNKNOWN":"PASS",failReason:e?.status===""?"   ":void 0,fixAction:e?.status===""?{label:" ",action:"CONFIRM_CONTACT_TIME"}:void 0},{key:"PHONE_VERIFIED",label:" ",status:t==="GOOD"?"PASS":"FAIL",failReason:t==="GOOD"?void 0:"  ",fixAction:t==="GOOD"?void 0:{label:" ",action:"VERIFY_PHONE"}},{key:"GUARDIAN_OPTIONAL",label:" ",status:r?"PASS":"UNKNOWN",failReason:r?void 0:"   ",fixAction:r?void 0:{label:" ",action:"ADD_GUARDIAN"}}]}function Jwe(e,t="stage1",r=!1){if(t==="stage3"&&!r)return{topFactors:[{title:"  ",description:"       .",recency:dt(-14)},{title:"  ",description:"    /  .",recency:dt(-20),isMissing:e?.quality!==""},{title:"  ",description:"    /  .",recency:dt(-32)}],computedAt:vt(),version:"stage3-risk-v1.2"};if(t==="stage3"&&r)return{topFactors:[{title:"  ",description:"SLA        .",recency:dt(-14)},{title:" ",description:"   /  .",recency:dt(-20),isMissing:e?.quality!==""},{title:"  ",description:"      .",recency:dt(-32)}],computedAt:vt(),version:"stage2-ops-v3.1"};const a=e?.risk??"";return{topFactors:a===""?[{title:"   ",description:" 2       .",recency:dt(-16)},{title:"  ",description:"       .",recency:dt(-30)},{title:"   ",description:"        .",recency:dt(-40),isMissing:e?.quality===""}]:a===""?[{title:"  ",description:"     .",recency:dt(-18)},{title:"   ",description:"     L0/L1   .",recency:dt(-34)},{title:"  ",description:"       .",recency:dt(-45),isMissing:e?.quality!==""}]:[{title:"  ",description:"     .",recency:dt(-20)},{title:"  ",description:"       .",recency:dt(-32)},{title:"  ",description:"      .",recency:dt(-46),isMissing:e?.quality!==""}],computedAt:vt(),version:t==="stage2"?"stage2-risk-v2.4":"stage1-risk-v2.4"}}function eEe(e,t="stage1",r,a=!1){if(t==="stage3"&&r){const l=U1(e?.quality),d=r.recommendedActions.length,u=r.recommendedActions.some(x=>x.severity==="HIGH")?"HIGH":r.recommendedActions.some(x=>x.severity==="MID")?"MID":"LOW",p=e?.status===""?94:e?.status===""?58:e?.status===""?67:76,m=_o(r.transitionRisk.risk2y_now),h=r.reevalStatus==="COMPLETED"?"COMPLETED":r.reevalStatus==="SCHEDULED"?"SCHEDULED":r.reevalStatus==="NOSHOW"?"NOSHOW":"PENDING";if(a){const x=(r.diffPathStatus==="SCHEDULED"||r.diffPathStatus==="COMPLETED"?2:1)+(r.reevalStatus==="SCHEDULED"||r.reevalStatus==="COMPLETED"?1:0)+(r.planProgressPct>=80?1:0),y=Math.max(0,Math.min(100,Math.round(x/4*100))),N=e?.status===""?7:e?.status===""?3:0,v=r.diffPathStatus==="SCHEDULED"||r.diffPathStatus==="COMPLETED"?0:1,j=r.planProgressPct>=80;return[{label:" ",value:y,unit:"%",updatedAt:r.transitionRisk.updatedAt,flags:[y>=100?"DONE":y>=40?"IN_PROGRESS":"BLOCKED"]},{label:"/ ",value:v,unit:"",updatedAt:r.headerMeta.nextReevalAt??vt(),flags:[v===0?"CONFIRMED":"WAITING"]},{label:"  ",value:N,unit:"",updatedAt:r.headerMeta.nextTrackingContactAt??vt(),flags:N>0?["DELAYED"]:["NORMAL"]},{label:"  ",value:j?1:0,unit:"",updatedAt:vt(),flags:[j?"CONFIRMED":"UNCONFIRMED"]},{label:" ",value:l.score,unit:"%",updatedAt:vt(),flags:l.level==="GOOD"?["OK"]:["MISSING_IMPACT"]}]}return[{label:"2  ( )",value:m,unit:"%",updatedAt:r.transitionRisk.updatedAt,flags:[xp(r.transitionRisk.risk2y_now),r.transitionRisk.trend]},{label:" ",value:d,unit:"",updatedAt:r.headerMeta.nextReevalAt??vt(),flags:[` ${u}`,h]},{label:" ",value:p,unit:"%",updatedAt:r.headerMeta.nextTrackingContactAt??vt(),flags:p<70?[" "]:void 0},{label:" ",value:r.planProgressPct,unit:"%",updatedAt:vt(),flags:[Cv(r.headerMeta.planStatus)]},{label:" ",value:l.score,unit:"%",updatedAt:vt(),flags:l.level==="GOOD"?["  "]:["  "]}]}const s=e?.risk??"",i=Number(e?.id.slice(-2)??0)%5,o=s===""?[41,53,47,44]:s===""?[79,83,86,82]:[61,68,65,66];return[{label:"CIST ",value:Math.max(0,Math.min(100,o[0]-i)),unit:"",updatedAt:dt(-12),flags:s===""?[" "]:void 0},{label:"  ",value:Math.max(0,Math.min(100,o[1]-i)),unit:"",updatedAt:dt(-14),flags:s!==""?[""]:void 0},{label:"  ",value:Math.max(0,Math.min(100,o[2]+i)),unit:"",updatedAt:dt(-26),flags:e?.quality!==""?[" "]:void 0},{label:"  ",value:Math.max(0,Math.min(100,o[3])),unit:"",updatedAt:dt(-8),flags:e?.status===""||e?.status===""?[" "]:void 0}]}function IT(e,t){const r={L0:[{id:"todo-L0-1",title:"    ",priority:1,status:"OPEN",suggestedAction:"VERIFY"},{id:"todo-L0-2",title:"   ",priority:2,status:"OPEN",suggestedAction:"SCHEDULE"},{id:"todo-L0-3",title:"  ",priority:2,status:"OPEN",suggestedAction:"VERIFY"}],L1:[{id:"todo-L1-1",title:"  ",priority:1,status:"OPEN",suggestedAction:"SMS"},{id:"todo-L1-2",title:"  ",priority:2,status:"OPEN",suggestedAction:"VERIFY"},{id:"todo-L1-3",title:"   ",priority:3,status:"OPEN",suggestedAction:"HOLD"}],L2:[{id:"todo-L2-1",title:"1  1 ",priority:1,status:"OPEN",suggestedAction:"CALL"},{id:"todo-L2-2",title:"    ",priority:1,status:"OPEN",suggestedAction:"SCHEDULE"},{id:"todo-L2-3",title:"2   ",priority:2,status:"OPEN",suggestedAction:"SMS"}],L3:[{id:"todo-L3-1",title:"2     ",priority:1,status:"OPEN",suggestedAction:"VERIFY"},{id:"todo-L3-2",title:"   ",priority:1,status:"OPEN",suggestedAction:"SMS"},{id:"todo-L3-3",title:"    ",priority:2,status:"OPEN",suggestedAction:"SCHEDULE"}]};return t==="EXCLUDE"?[{id:"todo-q-1",title:"   ",priority:1,status:"OPEN",suggestedAction:"VERIFY"},{id:"todo-q-2",title:"   ",priority:2,status:"OPEN",suggestedAction:"EXCLUDE"},{id:"todo-q-3",title:"   ",priority:3,status:"CANCELED",suggestedAction:"HOLD"}]:t==="WARN"?r[e].map((a,s)=>s===0?{...a,priority:2}:a):r[e]}function tEe(e,t,r="stage1"){const a=e?.status??"",s=e?.manager??ul,i=r==="stage2"?"Stage2":r==="stage3"?"Stage3":"Stage1",o=r==="stage2"?"S2_CONTACT_BASE":r==="stage3"?"S3_CONTACT_BASE":"S1_CONTACT_BASE",l=[{type:"STATUS_CHANGE",at:dt(-72),from:"",to:a,reason:`${i}  `,by:s},{type:"LEVEL_CHANGE",at:dt(-48),from:"L0",to:t,reason:"   SLA  ",by:s}];return a!==""&&l.unshift({type:"CALL_ATTEMPT",at:dt(-18),result:"NO_ANSWER",note:"  ",by:s}),e?.alertTags.includes(" ")&&l.unshift({type:"SMS_SENT",at:dt(-14),templateId:o,status:"PENDING",by:s}),r==="stage3"&&(l.unshift({type:"RISK_SERIES_UPDATED",at:dt(-12),by:s,summary:"2    "}),l.unshift({type:"RISK_REVIEWED",at:dt(-11),by:s,summary:"    "}),l.unshift({type:"DIFF_RECO_CREATED",at:dt(-9),by:s,summary:"  "}),l.unshift({type:"PLAN_UPDATED",at:dt(-10),by:s,summary:"     "}),l.unshift({type:"REEVAL_SCHEDULED",at:dt(-8),scheduledAt:dt(72),by:s,reason:"   "})),l}function CA(e,t="stage1",r=!1){const a=k2e(e),s=U1(e?.quality),i=AEe(e),o=CEe(i),l=lz(o.strategy,e,t),d=_Ee(),u="NOT_CREATED",p=t==="stage3"?Lwe(e):void 0,m=t==="stage3"?Ywe(e):void 0,h=t==="stage3"&&p?$we(e,p,r):[],x=t==="stage3"?Xwe(e):[],y=t==="stage3"?Qwe(x):[],N=h.length>0?"RECOMMENDED":"NONE",v=p?.opsStatus==="REEVAL_DUE"||p?.opsStatus==="REEVAL_PENDING"?"PENDING":"SCHEDULED",j=t==="stage3"?p?.planStatus==="ACTIVE"?72:p?.planStatus==="NEEDS_UPDATE"?48:91:void 0,E=[];return u5(o.triggers)&&E.push("  :   "),o.triggers.includes("GUARDIAN_PRIMARY")&&E.push("  "),o.triggers.includes("HAS_COMPLAINT_HISTORY")&&E.push("   "),o.triggers.includes("HAS_REFUSAL_HISTORY")&&E.push("   "),t==="stage3"&&E.push(r?" :  /     // ":" :       "),{header:{caseId:e?.id??"CASE-UNKNOWN",stage:t==="stage2"?"STAGE2":t==="stage3"?"STAGE3":"STAGE1",assigneeName:e?.manager??ul,statusLabel:t==="stage3"&&p?r?"":Pwe(p.opsStatus):e?.status===""?"":e?.status===""?"":e?.status??"",waitDays:Owe(e?.status),sla:kwe(e?.status),dataQuality:s,contactStrategy:o.strategy,effectiveStrategy:o.strategy,riskGuardrails:E.length>0?E:void 0},policyGates:Zwe(e),interventionLevel:a.level,riskEvidence:Jwe(e,t,r),scoreSummary:eEe(e,t,t==="stage3"&&p&&m&&j!=null?{headerMeta:p,transitionRisk:m,recommendedActions:h,planProgressPct:j,reevalStatus:v,diffPathStatus:N}:void 0,r),todos:IT(a.level,s.level),timeline:tEe(e,a.level,t),preTriageInput:i,preTriageResult:o,contactPlan:l,contactExecution:d,contactFlowSteps:zi(d,o,u,t),linkageStatus:u,contactExecutor:o.strategy==="AI_FIRST"?"AGENT_SEND_ONLY":"HUMAN",agentExecutionLogs:[],stage3:t==="stage3"&&p&&m&&j!=null?{headerMeta:p,transitionRisk:m,reevalStatus:v,riskReviewedAt:void 0,diffPathStatus:N,triggersReviewedAt:void 0,planProgressPct:j,planUpdatedAt:p.planStatus==="NEEDS_UPDATE"?void 0:dt(-10),recommendedActions:h,programs:y}:void 0}}function O7(e,t,r="stage1",a=!1){const s=e?.manager??ul,i=r==="stage2"?"Stage2":r==="stage3"?"Stage3":"Stage1";return[{id:`audit-${t.header.caseId}-1`,at:mt(dt(-72)),actor:s,message:"  :   "},{id:`audit-${t.header.caseId}-2`,at:mt(dt(-48)),actor:s,message:r==="stage3"?a?`  :  ${t.stage3?.headerMeta.trackingCycleDays??21} /  ${Cv(t.stage3?.headerMeta.planStatus??"ACTIVE")}`:`  : ${t.stage3?.headerMeta.trackingCycleDays??21}  /  ${Cv(t.stage3?.headerMeta.planStatus??"ACTIVE")}`:`${r==="stage2"?" ":" "} : ${t.preTriageResult?.strategy==="HUMAN_FIRST"?" ":" "}`},{id:`audit-${t.header.caseId}-3`,at:mt(dt(-32)),actor:s,message:`  : ${t.interventionLevel}`},{id:`audit-${t.header.caseId}-4`,at:mt(dt(-18)),actor:s,message:`${i}   : `}]}function rEe(e,t="stage1"){const r=e.riskEvidence.topFactors.map(u=>u.title).slice(0,2),a=u5(e.preTriageResult?.triggers??[]),s=e.preTriageInput?.contactHistory.hasComplaint??!1,i=e.preTriageInput?.contactHistory.hasRefusal??!1,o=e.header.sla.level!=="OK",l=e.contactExecutor==="AGENT_SEND_ONLY";return t==="stage3"?[{id:"RAG-S3-01",title:"  ",useCase:"    Stage3 ",evidence:[` : ${r.join(", ")||" "}`,"      .","        ."],scriptBody:"      ,     ."},{id:"RAG-S3-02",title:" /",useCase:"      ",evidence:["        .",o?"     .":"    .","    /   ."],scriptBody:"          ."},{id:"RAG-S3-03",title:" /",useCase:"      ",evidence:[" /       .",l?"Agent      .":"     .","/     ."],scriptBody:"/     .     ."}]:t==="stage2"?[{id:"RAG-S2-01",title:"2  ",useCase:"2 1/2    ",evidence:[` : ${r.join(", ")||"  "}`,"          .","      ."],scriptBody:"  2     .    ,      ."},{id:"RAG-S2-02",title:s||i?"  ":"  ",useCase:s||i?"/      ":"  /   ",evidence:[s?"       .":"       .",i?"        .":"       .","   /   ."],scriptBody:"         ,   ."},{id:"RAG-S2-03",title:o?"  ":" ",useCase:o?"SLA /    ":"      ",evidence:[o?"SLA    /   .":"   //   .",l?"Agent       .":"/     .","        ."],scriptBody:o?"       ,    .":"        ."}]:[{id:"RAG-GUIDE-01",title:a?"  ":" ",useCase:a?"   /  ":" ,   ",evidence:[` : ${r.join(", ")||"  "}`,a?"       .":"       .","     /  ."],scriptBody:a?"      .       .":"        .      ."},{id:"RAG-GUIDE-02",title:s||i?"  ":" ",useCase:s||i?"/   ":"     ",evidence:[s?"         .":"        .",i?"         .":"   /   .","        ."],scriptBody:"     .        ."},{id:"RAG-GUIDE-03",title:l?"Agent  ":"SLA  ",useCase:l?"      ":"SLA /  ",evidence:[o?"SLA /     .":" SLA       .",l?"Agent     Step3/4    .":"/        .","     ."],scriptBody:l?"   .     .":"          ."}].slice(0,3)}function nEe(e){return e.type==="CALL_ATTEMPT"?"CALL":e.type==="MESSAGE_SENT"?e.summary.includes("STAGE1_RESPONSE_RECORDED")||e.summary.includes("STAGE2_RESPONSE_RECORDED")?"STATUS":"SMS":e.type==="SMS_SENT"||e.type==="AGENT_SMS_SENT"?"SMS":"STATUS"}function Gb(e){return e.type==="CALL_ATTEMPT"?e.result==="SUCCESS"?" ":e.result==="NO_ANSWER"?"":e.result==="REJECTED"?" ":" ":e.type==="SMS_SENT"?`  (${uEe(e.templateId)})`:e.type==="MESSAGE_SENT"?e.summary.includes("STAGE1_RESPONSE_RECORDED")||e.summary.includes("STAGE2_RESPONSE_RECORDED")?"  ":"   ":e.type==="LEVEL_CHANGE"?`   ${e.from}  ${e.to}`:e.type==="POLICY_GATE_UPDATE"?`   (${e.key})`:e.type==="OUTCOME_RECORDED"?`   (${vl[e.outcomeCode].label})`:e.type==="CALENDAR_SYNC"?e.status==="SUCCESS"?"  ":"   ":e.type==="CAL_EVENT_CREATED"?"  ":e.type==="STRATEGY_CHANGE"?`   ${Ad[e.from]}  ${Ad[e.to]}`:e.type==="AGENT_JOB_QUEUED"?"Agent   ":e.type==="AGENT_JOB_STARTED"?"Agent   ":e.type==="AGENT_SMS_SENT"?"Agent  ":e.type==="AGENT_JOB_SUCCEEDED"?"Agent   ":e.type==="AGENT_JOB_FAILED"?"Agent   ":e.type==="AGENT_JOB_CANCELED"?"Agent   ":e.type==="CONTACT_STRATEGY_CHANGED"?"  ":e.type==="OPERATOR_OVERRIDE_TO_HUMAN"?"  ":e.type==="REEVAL_SCHEDULED"?"/  ":e.type==="REEVAL_RESCHEDULED"?"/  ":e.type==="REEVAL_COMPLETED"?"/ ":e.type==="REEVAL_NOSHOW"?"/ ":e.type==="PLAN_CREATED"?" ":e.type==="PLAN_UPDATED"?" ":e.type==="PROGRAM_STARTED"?" ":e.type==="PROGRAM_COMPLETED"?" ":e.type==="PROGRAM_STOPPED"?" ":e.type==="LINKAGE_CREATED"?" ":e.type==="LINKAGE_APPROVED"?" ":e.type==="LINKAGE_COMPLETED"?" ":e.type==="STAGE3_ACTION_DECISION"?"  ":e.type==="RISK_SERIES_UPDATED"?"   ":e.type==="RISK_REVIEWED"?"  ":e.type==="DIFF_RECO_CREATED"?"   ":e.type==="DIFF_REFER_CREATED"?"  ":e.type==="DIFF_SCHEDULED"?"  ":e.type==="DIFF_COMPLETED"?"  ":e.type==="DIFF_RESULT_APPLIED"?"  ":e.type==="PROGRAM_SELECTED"?" ":e.type==="PROGRAM_EXEC_UPDATED"?"  ":e.type==="PROGRAM_EXEC_COMPLETED"?"  ":e.type==="NEXT_TRACKING_SET"?"   ":e.type==="STAGE2_PLAN_CONFIRMED"?"Stage2   ":e.type==="STAGE2_RESULTS_RECORDED"?"Stage2    ":e.type==="STAGE2_CLASS_CONFIRMED"?"Stage2  ":e.type==="STAGE2_NEXT_STEP_SET"?"Stage2   ":`  ${e.from}  ${e.to}`}function tz(e){if(e.type==="CALL_ATTEMPT")return e.note??"  ";if(e.type==="SMS_SENT")return` : ${e.status}`;if(e.type==="MESSAGE_SENT")return e.summary;if(e.type==="LEVEL_CHANGE")return e.reason;if(e.type==="POLICY_GATE_UPDATE")return`: ${e.status}`;if(e.type==="OUTCOME_RECORDED"){const t=[];return e.reasonTags&&e.reasonTags.length>0&&t.push(` ${e.reasonTags.map(r=>_v[r].label).join(", ")}`),e.rejectCode&&t.push(` ${e.rejectCode}`),e.rejectLevel&&t.push(` ${e.rejectLevel}`),e.recontactStrategy&&t.push(`  ${e.recontactStrategy}`),e.nextContactAt&&t.push(`  ${mt(e.nextContactAt)}`),e.note&&t.push(e.note),t.length>0?t.join("  "):"  "}if(e.type==="CALENDAR_SYNC"){const t=`${e.title}  ${mt(e.scheduledAt)}`;return e.status==="FAILED"?`${t}  ${e.error??" "}`:t}return e.type==="CAL_EVENT_CREATED"?`${mt(e.scheduledAt)}  ${e.summary}`:e.type==="AGENT_SMS_SENT"?`${e.summary}   ${LT[e.channelResult]}${e.detail?`  ${e.detail}`:""}`:e.type==="AGENT_JOB_QUEUED"||e.type==="AGENT_JOB_STARTED"||e.type==="AGENT_JOB_SUCCEEDED"||e.type==="AGENT_JOB_FAILED"||e.type==="AGENT_JOB_CANCELED"||e.type==="CONTACT_STRATEGY_CHANGED"||e.type==="OPERATOR_OVERRIDE_TO_HUMAN"?[e.summary,e.detail].filter(Boolean).join("  "):e.type==="REEVAL_SCHEDULED"?`${mt(e.scheduledAt)}  ${e.reason??"  "}`:e.type==="REEVAL_RESCHEDULED"?`${mt(e.from)}  ${mt(e.to)}${e.reason?`  ${e.reason}`:""}`:e.type==="REEVAL_COMPLETED"||e.type==="REEVAL_NOSHOW"?e.note??"   ":e.type==="PLAN_CREATED"||e.type==="PLAN_UPDATED"||e.type==="PROGRAM_STARTED"||e.type==="PROGRAM_COMPLETED"||e.type==="PROGRAM_STOPPED"?e.summary:e.type==="LINKAGE_CREATED"||e.type==="LINKAGE_APPROVED"||e.type==="LINKAGE_COMPLETED"?`${e.linkageType}  ${e.summary??"  "}`:e.type==="STAGE3_ACTION_DECISION"?`${e.actionId}  ${e.decision}${e.note?`  ${e.note}`:""}`:e.type==="RISK_SERIES_UPDATED"||e.type==="RISK_REVIEWED"||e.type==="DIFF_RECO_CREATED"||e.type==="DIFF_REFER_CREATED"||e.type==="DIFF_SCHEDULED"||e.type==="DIFF_COMPLETED"||e.type==="DIFF_RESULT_APPLIED"||e.type==="PROGRAM_SELECTED"||e.type==="PROGRAM_EXEC_UPDATED"||e.type==="PROGRAM_EXEC_COMPLETED"||e.type==="STAGE2_PLAN_CONFIRMED"||e.type==="STAGE2_RESULTS_RECORDED"||e.type==="STAGE2_CLASS_CONFIRMED"||e.type==="STAGE2_NEXT_STEP_SET"?e.summary:e.type==="NEXT_TRACKING_SET"?`${mt(e.nextAt)}${e.summary?`  ${e.summary}`:""}`:e.reason}function aEe(e){return e==="PASS"?"border-emerald-200 bg-emerald-50 text-emerald-700":e==="FAIL"?"border-red-200 bg-red-50 text-red-700":"border-gray-200 bg-gray-50 text-gray-600"}function k7(e){return e==="OK"?"border-emerald-200 bg-emerald-50 text-emerald-700":e==="RESTRICTED"?"border-red-200 bg-red-50 text-red-700":"border-gray-200 bg-gray-50 text-gray-600"}function R7(e){return e==="OK"?"":e==="RESTRICTED"?"":" "}function _u(e){return e==="OK"?" ":e==="RESTRICTED"?"/ ":"  "}function P7(e){return e?/|||/.test(e):!1}function sEe(e){const t=["CONSENT_OK","CONTACTABLE_TIME_OK","PHONE_VERIFIED"],r=e.filter(a=>t.includes(a.key));return r.some(a=>a.status==="FAIL")?"BLOCKED":r.some(a=>a.status!=="PASS")?"NEEDS_CHECK":"PASS"}function iEe(e,t,r,a){return`${e}:${t}:${r}:${a}`}function oEe(e){return e==="AUTO_ON_ENTER"?"   ":e==="AUTO_ON_STRATEGY"?"    ":e==="AUTO_ON_RETRY_DUE"?"   ":e==="MANUAL_RETRY_NOW"?"  ":"  "}function lEe({caseRecord:e,gates:t,attemptNo:r}){const a=t.find(i=>i.key==="PHONE_VERIFIED"),s=e?.profile.phone;return a?.status!=="PASS"||!s?{success:!1,channelResult:"FAILED",errorCode:"PHONE_INVALID",errorMessage:"      ."}:(e?.alertTags??[]).includes(" ")&&r===1?{success:!1,channelResult:"FAILED",errorCode:"CHANNEL_TEMP_ERROR",errorMessage:"     ."}:{success:!0,channelResult:"SENT"}}const D7={queueSms({caseId:e,idempotencyKey:t}){return{ok:!0,jobId:`agent-job:${e}:${t}`,queuedAt:vt()}},cancelJob(e){return e?{ok:!0}:{ok:!1}}};function I7(e,t){const r=e.find(a=>t.includes(a.key)&&a.status!=="PASS");return r?.failReason??(r?`${r.label}  `:void 0)}function cEe(e){return e==="SUCCESS"?" ":e==="NO_ANSWER"?"":e==="REJECTED"?"":" "}function dEe(e){return e==="CONTACT"?"":e==="BOOKING"?"":""}function uEe(e){const t=e.split("(")[0],r=[...f5,...m5,...p5].find(a=>a.id===t);return r?`${dEe(r.messageType)}  ${r.label}`:e}const Ad={HUMAN_FIRST:" ",AI_FIRST:" ",MANUAL_OVERRIDE:" "},M7={HUMAN_FIRST:"border-red-200 bg-red-50 text-red-700",AI_FIRST:"border-blue-200 bg-blue-50 text-blue-700",MANUAL_OVERRIDE:"border-amber-200 bg-amber-50 text-amber-700"},fEe="   ()  ,  /  .",mEe={AGE_OVER_THRESHOLD:"      .",HAS_MCI_HISTORY:"      .",HAS_DEMENTIA_HISTORY:"       .",HAS_COMPLAINT_HISTORY:"       .",HAS_REFUSAL_HISTORY:"       .",GUARDIAN_PRIMARY:"       .",NEEDS_GUARDIAN_SUPPORT:"        .",COMPREHENSION_DIFFICULTY:"       .",STANDARD_CONTACT_PATH:"      .",CALL_RESPONSE_POOR:"       .",SMS_RESPONSE_POOR:"       ."};function L7(e){return e.startsWith(" :")?`   : ${e.replace(" :","").trim()}`:mEe[e]??e}const vl={CONTINUE_SELF:{label:" ",tone:"border-emerald-200 bg-emerald-50 text-emerald-700"},SCHEDULE_LATER:{label:"",tone:"border-blue-200 bg-blue-50 text-blue-700"},REQUEST_GUARDIAN:{label:" ",tone:"border-violet-200 bg-violet-50 text-violet-700"},REQUEST_HUMAN:{label:" ",tone:"border-orange-200 bg-orange-50 text-orange-700"},REFUSE:{label:"/",tone:"border-red-200 bg-red-50 text-red-700"},NO_RESPONSE:{label:" ",tone:"border-gray-200 bg-gray-50 text-gray-600"},CONFUSED:{label:" ",tone:"border-amber-200 bg-amber-50 text-amber-700"},EMOTIONAL:{label:" ",tone:"border-yellow-200 bg-yellow-50 text-yellow-700"}},pEe=["CONTINUE_SELF","SCHEDULE_LATER","REQUEST_GUARDIAN","REQUEST_HUMAN","NO_RESPONSE","REFUSE"],_v={CONFUSION:{label:" ",hint:"     ",tone:"border-amber-200 bg-amber-50 text-amber-700"},EMOTIONAL:{label:" ",hint:"/    ",tone:"border-yellow-200 bg-yellow-50 text-yellow-700"}},rz={CALL:"CALL_RETRY",SMS:"SMS_RETRY"},$7={CALL:"",SMS:""},hEe={CONTINUE_SELF:"PROCEED",SCHEDULE_LATER:"LATER",REQUEST_GUARDIAN:"PROTECTOR_LINK",REQUEST_HUMAN:"COUNSELOR_LINK",REFUSE:"REJECT",NO_RESPONSE:"NO_RESPONSE",CONFUSED:"HARD_TO_UNDERSTAND",EMOTIONAL:"EMOTIONAL"},Zi={HUMAN:"  ",AGENT_SEND_ONLY:"Agent ( )"},MT={HUMAN:"border-blue-200 bg-blue-50 text-blue-700",AGENT_SEND_ONLY:"border-violet-200 bg-violet-50 text-violet-700"},h5={SENT_SUCCESS:" ",SENT_FAILED:" ",NO_RESPONSE:" ",WAITING:" "},nz={IDLE:"",QUEUED:"",RUNNING:"",SUCCEEDED:"",FAILED:"",CANCELED:""},LT={SENT:"",DELIVERED:" ",FAILED:"",UNKNOWN:" "},lb={RECOMMEND_DIFF:"  ",HOLD:"  ",UPDATE_PLAN:"  "},Em={CENTER_VISIT_BOOKING:{label:"  ",description:"    / ",linkageStatus:"BOOKING_IN_PROGRESS",reservationType:" ",defaultPlace:" "},HOSPITAL_REFERRAL_BOOKING:{label:" /",description:"     ",linkageStatus:"REFERRAL_CREATED",reservationType:" /",defaultPlace:" "},COUNSELING_CENTER_BOOKING:{label:" ",description:"   ",linkageStatus:"BOOKING_DONE",reservationType:" ",defaultPlace:" "},HOLD_TRACKING:{label:"/",description:"   ",linkageStatus:"NOT_CREATED",reservationType:" ",defaultPlace:"/ "}},gEe=[{code:"R1_SELF_REJECT",label:" "},{code:"R2_GUARDIAN_REJECT",label:" "},{code:"R3_OTHER_INSTITUTION",label:"  "},{code:"R4_ALREADY_DIAGNOSED",label:" / "},{code:"R5_CONTACT_INVALID",label:" "},{code:"R6_EMOTIONAL_BACKLASH",label:"  "},{code:"R7_OTHER",label:""}],xEe=[{value:"TEMP",label:" "},{value:"FINAL",label:" "}],az=[{step:"PRE_TRIAGE",label:"A.  ",description:"   "},{step:"STRATEGY",label:"B.  ",description:" /  "},{step:"COMPOSE",label:"C.  ",description:"/  "},{step:"SEND",label:"D.  ",description:"   "},{step:"RESPONSE",label:"E.  ",description:"/// "},{step:"OUTCOME",label:"F.  ",description:"// "}],sz=[{step:"PRE_TRIAGE",label:"A.  ",description:"2     "},{step:"STRATEGY",label:"B.  ",description:"     "},{step:"COMPOSE",label:"C.  ",description:"/MCI/AD     "},{step:"SEND",label:"D.  ",description:" // "},{step:"RESPONSE",label:"E.  ",description:"/    "},{step:"OUTCOME",label:"F. /",description:"    "}],iz=[{step:"PRE_TRIAGE",label:"A.   ",description:" /  "},{step:"STRATEGY",label:"A-2.  ",description:"/// "},{step:"COMPOSE",label:"B.  ",description:"/  "},{step:"SEND",label:"B-2. /",description:"/   "},{step:"RESPONSE",label:"C.  ",description:"    "},{step:"OUTCOME",label:"D.  ()",description:"  /  "}],bEe=[{step:"PRE_TRIAGE",label:"A.   ",description:"//   "},{step:"STRATEGY",label:"A-2.  ",description:"  / "},{step:"COMPOSE",label:"B.   ",description:"//  "},{step:"SEND",label:"B-2.  ",description:"// "},{step:"RESPONSE",label:"C.  ",description:"/MCI/    "},{step:"OUTCOME",label:"D.   ",description:" /MCI Stage3/  "}],yEe=[{id:"PRECHECK",title:"  ",description:"/   ",relatedSteps:["PRE_TRIAGE","STRATEGY"],action:"OPEN_PRECHECK"},{id:"CONTACT_EXECUTION",title:" ",description:"   ",relatedSteps:["COMPOSE","SEND"],action:"OPEN_CONTACT_EXECUTION"},{id:"RESPONSE_HANDLING",title:" ",description:" //  ",relatedSteps:["RESPONSE"],action:"OPEN_RESPONSE_HANDLING"},{id:"FOLLOW_UP",title:" ",description:"   ",relatedSteps:["OUTCOME"],action:"OPEN_FOLLOW_UP"}],vEe=[{id:"PRECHECK",title:"  ",description:" /     ",relatedSteps:["PRE_TRIAGE","STRATEGY"],action:"OPEN_PRECHECK"},{id:"CONTACT_EXECUTION",title:"  ",description:"MMSE/CDR//  ",relatedSteps:["COMPOSE","SEND"],action:"OPEN_CONTACT_EXECUTION"},{id:"RESPONSE_HANDLING",title:" ",description:"/MCI/  ",relatedSteps:["RESPONSE"],action:"OPEN_RESPONSE_HANDLING"},{id:"FOLLOW_UP",title:"  ",description:"2 /Stage3/ ",relatedSteps:["OUTCOME"],action:"OPEN_FOLLOW_UP"}],NEe=[{id:"PRECHECK",title:"  ()",description:" /  ",relatedSteps:["PRE_TRIAGE","STRATEGY"],action:"OPEN_PRECHECK"},{id:"CONTACT_EXECUTION",title:" ",description:"// ",relatedSteps:["COMPOSE","SEND"],action:"OPEN_CONTACT_EXECUTION"},{id:"RESPONSE_HANDLING",title:" ",description:" /  ",relatedSteps:["RESPONSE"],action:"OPEN_RESPONSE_HANDLING"},{id:"FOLLOW_UP",title:" ()",description:"  /  ",relatedSteps:["OUTCOME"],action:"OPEN_FOLLOW_UP"}],SEe=[{id:"PRECHECK",title:"  ",description:"//    ",relatedSteps:["PRE_TRIAGE","STRATEGY"],action:"OPEN_PRECHECK"},{id:"CONTACT_EXECUTION",title:"  ",description:" /  /  ",relatedSteps:["COMPOSE","SEND"],action:"OPEN_CONTACT_EXECUTION"},{id:"RESPONSE_HANDLING",title:" ",description:"/MCI/  ",relatedSteps:["RESPONSE"],action:"OPEN_RESPONSE_HANDLING"},{id:"FOLLOW_UP",title:"  ",description:" /MCI Stage3/  ",relatedSteps:["OUTCOME"],action:"OPEN_FOLLOW_UP"}],jEe={OPEN_PRECHECK:"PRECHECK",OPEN_CONTACT_EXECUTION:"CONTACT_EXECUTION",OPEN_RESPONSE_HANDLING:"RESPONSE_HANDLING",OPEN_FOLLOW_UP:"FOLLOW_UP"};function nm(e,t){const r=e.findIndex(i=>i.id===t);if(r<=0)return null;const a=e.slice(0,r).find(i=>i.status!=="COMPLETED");if(!a)return null;const s=e[r]?.title??"";return`${a.title}    ${s}    .`}const wEe={COMPLETED:{label:"",icon:Zs,cardTone:"border-emerald-200 bg-emerald-50/70 text-emerald-900 shadow-sm hover:shadow-emerald-200/70",chipTone:"border border-emerald-200 bg-emerald-100 text-emerald-700",reasonTone:"border-emerald-200 bg-white/70 text-emerald-800"},PENDING:{label:"",icon:Bv,cardTone:"border-sky-200 bg-sky-50/70 text-slate-900 shadow-sm hover:shadow-sky-200/60",chipTone:"border border-sky-200 bg-sky-100 text-sky-700",reasonTone:"border-sky-200 bg-white/70 text-slate-700"},BLOCKED:{label:"",icon:Gn,cardTone:"border-rose-200 bg-rose-50/80 text-rose-900 shadow-inner hover:shadow-rose-200/50",chipTone:"border border-rose-200 bg-rose-100 text-rose-700",reasonTone:"border-rose-200 bg-white/70 text-rose-800"}},oz={NOT_STARTED:"",SENT:" ",WAITING_RESPONSE:" ",RETRY_NEEDED:" ",HANDOFF_TO_HUMAN:" ",PAUSED:"",STOPPED:"",DONE:""},Pd={NOT_CREATED:"",BOOKING_IN_PROGRESS:"",BOOKING_DONE:"",REFERRAL_CREATED:""},$T={CENTER_LINKAGE:{title:" ",description:"  / ",nextStatus:"BOOKING_IN_PROGRESS",note:"    ."},HOSPITAL_LINKAGE:{title:" ",description:"     ",nextStatus:"REFERRAL_CREATED",note:"    ."},COUNSELING_LINKAGE:{title:" ",description:"     ",nextStatus:"BOOKING_DONE",note:"      ."}};function EEe(e,t,r=!1){return g.useMemo(()=>{const a=t==="stage2",s=t==="stage3",i=s?r?SEe:NEe:a?vEe:yEe,o=s?r?bEe:iz:a?sz:az,l=e.policyGates.filter(C=>C.status==="FAIL").length,d=!!e.preTriageInput&&e.header.dataQuality.level!=="EXCLUDE",u=!!e.preTriageResult?.strategy,p=e.contactExecution.status!=="NOT_STARTED",m=!!(e.contactExecution.lastOutcomeCode||e.contactExecution.lastResponseAt),h=e.linkageStatus!=="NOT_CREATED"||e.contactExecution.status==="DONE"||e.contactExecution.status==="STOPPED",x=new Map(e.contactFlowSteps.map(C=>[C.step,C.status])),y=new Map(o.map(C=>[C.step,C.label])),N=C=>C.map(A=>`${y.get(A)??A}:${x.get(A)??"WAITING"}`).join(" / ");if(s){const C=e.stage3,A=d&&u,S=C?.recommendedActions.filter(G=>G.requiresApproval&&G.decision==="PENDING").length??0,_=!!C?.riskReviewedAt,O=C?.diffPathStatus??"NONE",D=O==="SCHEDULED"||O==="COMPLETED",k=O==="COMPLETED",M=C?.programs.some(G=>{const U=G.execution?.status;return U==="PLANNED"||U==="IN_PROGRESS"||U==="DONE"})??!1,F=!!C?.planUpdatedAt||e.linkageStatus!=="NOT_CREATED",$=!!C?.headerMeta.nextTrackingContactAt,P=i.map(G=>{const U=N(G.relatedSteps);return G.id==="PRECHECK"?r?A?_?{...G,status:"COMPLETED",reason:"    .",nextActionHint:"STEP2    .",metricLabel:`     ${U}`,isCurrent:!1}:{...G,status:"PENDING",reason:"STEP1      .",nextActionHint:"    STEP2(  )  .",metricLabel:`      ${U}`,isCurrent:!1}:{...G,status:"PENDING",reason:"        .",nextActionHint:"STEP1        .",metricLabel:`     ${U}`,isCurrent:!1}:A?_?{...G,status:"COMPLETED",reason:"       .",nextActionHint:"/     .",metricLabel:`    ${U}`,isCurrent:!1}:{...G,status:"PENDING",reason:"2       .",nextActionHint:"   '   '  .",metricLabel:`    ${U}`,isCurrent:!1}:{...G,status:"PENDING",reason:" (//)    .",nextActionHint:"        .",metricLabel:`   ${U}`,isCurrent:!1}:G.id==="CONTACT_EXECUTION"?r?!A||!_?{...G,status:"BLOCKED",reason:"STEP1        .",nextActionHint:"STEP1(  )  .",metricLabel:`     ${U}`,isCurrent:!1}:D?{...G,status:"COMPLETED",reason:"   .",nextActionHint:"STEP3 /MCI/  .",metricLabel:`     ${U}`,isCurrent:!1}:{...G,status:"PENDING",reason:"  (/ )   .",nextActionHint:"STEP2 MMSE/CDR/  .",metricLabel:`     ${U}`,isCurrent:!1}:!A||!_?{...G,status:"BLOCKED",reason:"STEP1(   )       .",nextActionHint:"STEP1      .",metricLabel:`   ${U}`,isCurrent:!1}:S>0?{...G,status:"PENDING",reason:`   ${S}  .`,nextActionHint:"    / .",metricLabel:`   ${S}  ${U}`,isCurrent:!1}:D?k?{...G,status:"COMPLETED",reason:"/   .",nextActionHint:"     .",metricLabel:` ${O}  ${U}`,isCurrent:!1}:{...G,status:"PENDING",reason:"   /   .",nextActionHint:"STEP2  /   .",metricLabel:` ${O}      ${U}`,isCurrent:!1}:{...G,status:"PENDING",reason:"/      .",nextActionHint:"   /  .",metricLabel:` ${O}  ${U}`,isCurrent:!1}:G.id==="RESPONSE_HANDLING"?r?D?C?.reevalStatus==="SCHEDULED"||C?.reevalStatus==="COMPLETED"?{...G,status:"COMPLETED",reason:"  .",nextActionHint:"STEP4   .",metricLabel:`    ${U}`,isCurrent:!1}:{...G,status:"PENDING",reason:"/MCI/     .",nextActionHint:"STEP3    .",metricLabel:`    ${U}`,isCurrent:!1}:{...G,status:"BLOCKED",reason:"STEP2       .",nextActionHint:"    .",metricLabel:`    ${U}`,isCurrent:!1}:!k||S>0?{...G,status:"BLOCKED",reason:"           .",nextActionHint:"STEP2     / .",metricLabel:`   ${U}`,isCurrent:!1}:M?{...G,status:"COMPLETED",reason:"    .",nextActionHint:" ()    .",metricLabel:`     ${U}`,isCurrent:!1}:{...G,status:"PENDING",reason:"   (////)   .",nextActionHint:"       .",metricLabel:`    ${U}`,isCurrent:!1}:r?C?.planUpdatedAt?{...G,status:"COMPLETED",reason:"   .",nextActionHint:"/    .",metricLabel:`     ${U}`,isCurrent:!1}:{...G,status:"PENDING",reason:"  ( /MCI Stage3/ )  .",nextActionHint:"STEP4   .",metricLabel:`     ${U}`,isCurrent:!1}:M?F&&$?{...G,status:"COMPLETED",reason:"/        .",nextActionHint:"/    .",metricLabel:` +     ${U}`,isCurrent:!1}:{...G,status:"PENDING",reason:" / /      .",nextActionHint:"      .",metricLabel:`    ${U}`,isCurrent:!1}:{...G,status:"BLOCKED",reason:"    1   ()    .",nextActionHint:"STEP3     .",metricLabel:`    ${U}`,isCurrent:!1}}).reduce((G,U,te)=>{if(te===0||G[te-1].status==="COMPLETED")return G.push(U),G;const q=te;return G.push({...U,status:"BLOCKED",reason:`STEP ${q}   ${U.title}    .`,nextActionHint:`STEP ${q}   .`,metricLabel:`    ${N(U.relatedSteps)}`,isCurrent:!1}),G},[]),W=P.findIndex(G=>G.status!=="COMPLETED"),K=W===-1?P.length-1:W;return P.map((G,U)=>({...G,isCurrent:U===K}))}const v=i.map(C=>{const A=N(C.relatedSteps);if(C.id==="PRECHECK")return l>0||!d?{...C,status:"BLOCKED",reason:l>0?a?`  ${l}   .`:`  ${l}   .`:a?"      .":"       .",nextActionHint:a?"/      .":" /     .",metricLabel:l>0?`${a?" ":""} FAIL ${l}  ${A}`:`${a?"  ":"  "}  ${A}`,isCurrent:!1}:u?{...C,status:"COMPLETED",reason:a?"2     .":"    .",nextActionHint:a?"/      .":"    / .",metricLabel:`${a?" ":""} ${e.preTriageResult?.strategy??""}  ${A}`,isCurrent:!1}:{...C,status:"PENDING",reason:a?"     .":"      .",nextActionHint:a?" /     .":"       .",metricLabel:`${a?" ":" "}   ${A}`,isCurrent:!1};if(C.id==="CONTACT_EXECUTION"){const _=(e.header.effectiveStrategy??e.preTriageResult?.strategy)==="AI_FIRST"&&e.contactExecutor==="AGENT_SEND_ONLY"?a?"Agent      ":"Agent      ":C.description;return!d||!u?{...C,description:_,status:"BLOCKED",reason:a?"    /  .":"      .",nextActionHint:a?"      .":"       .",metricLabel:`${a?" ":""}   ${A}`,isCurrent:!1}:p?{...C,description:_,status:"COMPLETED",reason:e.contactExecutor==="AGENT_SEND_ONLY"?a?"Agent    /   .":"Agent   .":a?"/   .":"   .",nextActionHint:a?"/      .":"      .",metricLabel:`${oz[e.contactExecution.status]}  ${Zi[e.contactExecutor]}  ${A}`,isCurrent:!1}:{...C,description:_,status:"PENDING",reason:e.contactExecutor==="AGENT_SEND_ONLY"?a?"Agent     .":"Agent      .":a?" /   .":" /   .",nextActionHint:e.contactExecutor==="AGENT_SEND_ONLY"?a?"/   Agent     .":"   Agent     .":a?"/      .":"/    1  .",metricLabel:`${a?" ":""}  ${Zi[e.contactExecutor]}  ${A}`,isCurrent:!1}}return C.id==="RESPONSE_HANDLING"?p?m?{...C,status:"COMPLETED",reason:a?"/   .":"     .",nextActionHint:a?"/      .":"   // .",metricLabel:e.contactExecution.lastOutcomeCode?`${vl[e.contactExecution.lastOutcomeCode].label}  ${A}`:`${a?"  ":"  "}  ${A}`,isCurrent:!1}:{...C,status:"PENDING",reason:a?"     .":"     .",nextActionHint:a?"       .":"       .",metricLabel:`${a?"   ":"  "}  ${A}`,isCurrent:!1}:{...C,status:"BLOCKED",reason:a?"/   /   .":"       .",nextActionHint:a?"/     .":"    / .",metricLabel:`${a?"  ":" "}  ${A}`,isCurrent:!1}:m?h?{...C,status:"COMPLETED",reason:a?"     .":"    .",nextActionHint:a?"       .":"      .",metricLabel:`${Pd[e.linkageStatus]}  ${A}`,isCurrent:!1}:{...C,status:"PENDING",reason:a?"      .":"      .",nextActionHint:a?"       .":"   // .",metricLabel:`${Pd[e.linkageStatus]}  ${A}`,isCurrent:!1}:{...C,status:"BLOCKED",reason:a?"/    /   .":"       .",nextActionHint:a?"/     .":"   Outcome  .",metricLabel:`${Pd[e.linkageStatus]}  ${A}`,isCurrent:!1}}),j=v.findIndex(C=>C.status!=="COMPLETED"),E=j===-1?v.length-1:j;return v.map((C,A)=>({...C,isCurrent:A===E}))},[e,t,r])}function AEe(e){const t=e?.profile.age??70,r=!!e?.profile.guardianPhone,a=e?.quality===""||!!e?.alertTags.includes(" "),s=e?.status===""||!!e?.alertTags.includes(" "),i=!r&&t>=75,o=t>=80||e?.risk==="",l=!!(e?.alertTags.includes("High MCI")||e?.alertTags.includes(" ")),d=e?.risk===""&&t>=80;return{age:t,dxHistory:{hasMCI:l,hasDementia:d},contactHistory:{hasComplaint:a,hasRefusal:s,needsGuardian:i,comprehensionDifficultyFlag:o},guardian:{exists:r,isPrimaryContact:r&&(i||o)},responseHistory:{smsResponseGood:e?.risk!=="",callResponseGood:e?.status!=="",lastOutcome:e?.status===""?"NO_RESPONSE":void 0}}}function CEe(e){return vwe(e)}function lz(e,t,r="stage1"){const a=r==="stage2",s=r==="stage3",i=a?t?.profile.guardianPhone?"S2_CONTACT_RELIEF":"S2_CONTACT_BASE":s?"S3_CONTACT_BASE":t?.profile.guardianPhone?"S1_CONTACT_GUARDIAN":"S1_CONTACT_BASE",o=a?"S2_CONTACT_BASE":s?"S3_CONTACT_BASE":"S1_CONTACT_BASE";return e==="HUMAN_FIRST"?{channel:"HYBRID",templateId:i,maxRetryPolicy:{maxRetries:3,intervalHours:24}}:{channel:"SMS",templateId:o,maxRetryPolicy:{maxRetries:2,intervalHours:24}}}function _Ee(){return{status:"NOT_STARTED",retryCount:0}}function zi(e,t,r="NOT_CREATED",a="stage1"){const s=!!t,i=!!t?.strategy,o=e.status!=="NOT_STARTED",l=!!(e.lastOutcomeCode||e.lastResponseAt),d=e.status==="HANDOFF_TO_HUMAN"||e.status==="STOPPED"||e.status==="RETRY_NEEDED";return(a==="stage2"?sz:a==="stage3"?iz:az).map(({step:p,label:m,description:h})=>{let x="WAITING";return p==="PRE_TRIAGE"?x=s?"DONE":"MISSING":p==="STRATEGY"?x=i?"DONE":"MISSING":p==="COMPOSE"?x=i?o||a==="stage3"?"DONE":"WAITING":"MISSING":p==="SEND"?x=o||a==="stage3"?l?"DONE":"WAITING":"MISSING":p==="RESPONSE"?x=l?d?"WARNING":"DONE":o||a==="stage3"?"WAITING":"MISSING":p==="OUTCOME"&&(l?r==="NOT_CREATED"?x="WAITING":x="DONE":x="MISSING"),{step:p,label:m,status:x,description:h}})}function g5(e){return e.map(t=>({id:t.id,type:t.messageType,label:t.label,body:r=>t.body({caseId:r.caseAlias??"CASE",centerName:r.centerName,centerPhone:r.centerPhone,guideLink:r.guideLink,reservationLink:r.bookingLink,unsubscribe:r.optOut??JK})}))}const TEe=g5(f5),OEe=g5(m5),kEe=g5(p5);function cz({caseRecord:e,onHeaderSummaryChange:t,onPrimaryActionChange:r,mode:a="stage1",surfaceStage:s}){const i=a==="stage2",o=a==="stage3",l=o&&s==="Stage 2",d=i||l?"2":o?"3":"1",u=CSe(e?.id),p=u?.computed.evidence.stage2,m=u?.computed.evidence.stage3,h=u?.computed.model2,x=u?.computed.model3,y=!!(p?.completed&&h?.available),N=!!(m?.completed&&x?.available),v=p?.missing??[],j=m?.missing??[],E=i?m5:o?p5:f5,C=i?OEe:o?kEe:TEe,A=E[0]?.id??"",[S,_]=g.useState(()=>CA(e,a,l)),[O,D]=g.useState(()=>O7(e,CA(e,a,l),a,l)),[k,M]=g.useState("ALL"),[F,$]=g.useState(null),[B,P]=g.useState("citizen"),[W,K]=g.useState(!1),[G,U]=g.useState(0),[te,re]=g.useState(""),[q,L]=g.useState("SUCCESS"),[H,ae]=g.useState({citizen:!0,guardian:!1}),[oe,ve]=g.useState(A),[ce,Ee]=g.useState("NOW"),[xe,Te]=g.useState(""),[ye,se]=g.useState(!0),[ct,Q]=g.useState(null),[he,$e]=g.useState(null),[Z,je]=g.useState(!1),[ge,be]=g.useState(Date.now()),[it,Fe]=g.useState(dt(24)),[Et,Mt]=g.useState(!1),[Be,tr]=g.useState(""),[br,Er]=g.useState("HUMAN_FIRST"),[yr,Rr]=g.useState(null),[zr,pr]=g.useState(""),[hr,Tr]=g.useState(!0),[Mr,jn]=g.useState(!1),[rt,Pe]=g.useState(null),[Kt,Pr]=g.useState(""),[vr,Cn]=g.useState("ALL"),[Ae,Ge]=g.useState(!1),[ut,er]=g.useState(null),[mr,Or]=g.useState({owner:e?.manager??ul,status:"PLANNED",method:""}),[ft,Le]=g.useState({diffNeeded:!0,diffDecisionSet:!1,diffDecisionReason:"",priority:"HIGH",caregiverNeeded:!1,sensitiveHistory:!1,resultLinkedChecked:!1,consentConfirmed:!1,strategyMemo:""}),[We,$t]=g.useState({orgName:" ",orgPhone:"02-555-0199",preferredHospital:" ",preferredTimeWindow:"  14:00~16:00",caregiverCompanion:!1,mobilityIssue:!1,testBiomarker:!0,testBrainImaging:!0,testOther:!1,bookingAt:dt(72),bookingAltAt:dt(96),bookingConfirmed:!1,prepGuide:"/ /   ",note:"",resultSummary:"",resultLabel:"",riskReady:!1,resultPerformedAt:"",biomarkerResultText:"",imagingResultText:"",abeta:"",tau:""}),[Re,_e]=g.useState({consultStarted:!1,infoCollected:!1,ragGenerated:!1,bookingConfirmed:!1,messageSent:!1,calendarSynced:!1}),[Ve,At]=g.useState(null),[Dt,ir]=g.useState({memo:"",nextAction:"RECOMMEND_DIFF"}),[St,nn]=g.useState({nextTrackingAt:dt(504),reminderDaysBefore:2,reminderTime:"09:00",retryCount:2}),[an,bt]=g.useState(null),[ja,oo]=g.useState(!1),[ji,ri]=g.useState(!1),[Nr,Kn]=g.useState({}),Ut=g.useRef({}),[fr,Sr]=g.useState({code:null,level:"TEMP",detail:"",createFollowupEvent:!1,followupAt:dt(168)}),[Ba,yn]=g.useState({strategy:null,channel:"CALL",assigneeId:e?.manager??ul,nextContactAt:dt(24),applyL3:!1}),[sn,Ua]=g.useState([]),[wi,Lr]=g.useState(null),[xs,_n]=g.useState(!1),[Ul,Zr]=g.useState(null),[aa,Ls]=g.useState([]),[lo,wa]=g.useState(!1),[sa,bs]=g.useState(null),[Rn,Za]=g.useState(""),[Pn,Ja]=g.useState({route:"CENTER_VISIT_BOOKING",scheduledAt:dt(72),place:Em.CENTER_VISIT_BOOKING.defaultPlace,contactGuide:il,note:""}),[ht,Jr]=g.useState(()=>_7(e)),[Ur,Ei]=g.useState(()=>PT(e)),[ys,Wt]=g.useState(""),[zo,qo]=g.useState(!1),[Ea,X]=g.useState(""),[ie,De]=g.useState(" "),[Ye,Ze]=g.useState(dt(72)),[Ke,Zt]=g.useState("HOSPITAL_REFERRAL"),[kt,Ar]=g.useState({specialist:!0,mmse:!0,cdrOrGds:!0,neuroCognitive:!0}),[jr,fn]=g.useState({gdsk:!1,adl:!1,bpsd:!1}),[ia,es]=g.useState(!1),[Dn,tu]=g.useState(""),[Hr,ts]=g.useState({}),Hl=g.useRef({}),Wo=g.useRef({}),[oa,Aa]=g.useState({sourceOrg:" "}),[mn,ni]=g.useState({status:"PENDING"}),[Wp,hf]=g.useState(!1),$s=g.useRef(null),[Fs]=g.useState(()=>e?.created??dt(-96)),[Vo]=g.useState(()=>dt(240)),[vs,Ha]=g.useState(void 0),J=["step1Consent","step1Plan","step1StrategyMemo","manualEditReason","mmse","cdr","neuro","specialist","classification","rationale","overrideReason","nextStep"],fe=g.useCallback(I=>V=>{Hl.current[I]=V},[]),Oe=g.useCallback(I=>{ts(I);const V=J.find(me=>!!I[me]);if(!V)return!1;const ee=Hl.current[V];return ee&&(ee.scrollIntoView({behavior:"smooth",block:"center"}),"focus"in ee&&typeof ee.focus=="function"&&ee.focus()),!0},[J]),Ue=g.useCallback(I=>{ts(V=>{if(!V[I])return V;const ee={...V};return delete ee[I],ee})},[]),nt=g.useCallback(I=>{const V=Hl.current[I];if(!V){(I==="mmse"||I==="cdr"||I==="neuro"||I==="specialist"||I==="manualEditReason")&&Pe("CONTACT_EXECUTION");return}V.scrollIntoView({behavior:"smooth",block:"center"}),"focus"in V&&typeof V.focus=="function"&&V.focus()},[]),ot=g.useMemo(()=>J.filter(I=>!!Hr[I]).map(I=>({key:I,message:Hr[I]})),[J,Hr]),lt=g.useCallback((I,V)=>de(V,Hr[I]?"border-rose-400 bg-rose-50 text-rose-900 placeholder:text-rose-400 focus:border-rose-500":""),[Hr]),Ft=g.useCallback(I=>V=>{Wo.current[I]=V},[]),dr={PRECHECK:["step1DiffDecision","step1Consent","step1DiffReason","step1StrategyMemo"],CONTACT_EXECUTION:["step2CallRecord","step2Hospital","step2TestSelection","step2BookingAt","step2PerformedAt","step2BiomarkerResult","step2ImagingResult","step2ResultSummary"],RESPONSE_HANDLING:[],FOLLOW_UP:[]},kr=g.useCallback(I=>V=>{Ut.current[I]=V},[]),qr=g.useCallback((I,V)=>{Kn(ee=>{const me=ee[I];if(!me?.[V])return ee;const le={...me};return delete le[V],{...ee,[I]:le}})},[]),$r=g.useCallback((I,V,ee)=>de(ee,Nr[I]?.[V]?"border-rose-400 bg-rose-50 text-rose-900 placeholder:text-rose-400 focus:border-rose-500":""),[Nr]),Ca=g.useCallback((I,V)=>{Kn(le=>({...le,[I]:V}));const ee=dr[I].find(le=>!!V[le]);if(!ee)return!1;const me=Ut.current[ee];return me&&(me.scrollIntoView({behavior:"smooth",block:"center"}),"focus"in me&&typeof me.focus=="function"&&me.focus()),!0},[dr]),Ns=g.useCallback(I=>{const V=Ut.current[I];V&&(V.scrollIntoView({behavior:"smooth",block:"center"}),"focus"in V&&typeof V.focus=="function"&&V.focus())},[]),[ai,la]=g.useState(!1),[Ht,ca]=g.useState(""),[ur,Ai]=g.useState({status:"IDLE",attemptNo:0}),Ci=g.useRef(0),_i=g.useRef(new Set),co=g.useRef(new Set),uo=g.useRef(!1),{isSaving:Ti,submitError:Fc,calendarFailures:Gl,retryingKeys:Dg,submit:aN,retryCalendarFailure:Ig,clearSubmitError:si}=_je();g.useEffect(()=>{const I=CA(e,a,l);_(I),D(O7(e,I,a,l)),M("ALL"),$(null),P("citizen"),K(!1),U(0),re(""),L("SUCCESS"),ae({citizen:!0,guardian:!1}),ve(A),Ee("NOW"),Te(""),se(!0),Q(null),$e(null),je(!1),Fe(dt(24)),Tr(!0),jn(!1),Pe(null),Pr(""),Cn("ALL"),Ge(!1),er(null),Or({owner:e?.manager??ul,status:"PLANNED",method:""}),Le({diffNeeded:!0,diffDecisionSet:!1,diffDecisionReason:"",priority:e?.risk===""?"HIGH":e?.risk===""?"MID":"LOW",caregiverNeeded:!!e?.profile.guardianPhone,sensitiveHistory:!!e?.alertTags.includes(" "),resultLinkedChecked:!1,consentConfirmed:!1,strategyMemo:""}),$t({orgName:" ",orgPhone:il,preferredHospital:" ",preferredTimeWindow:"  14:00~16:00",caregiverCompanion:!1,mobilityIssue:!1,testBiomarker:!0,testBrainImaging:!0,testOther:!1,bookingAt:dt(72),bookingAltAt:dt(96),bookingConfirmed:!1,prepGuide:"/ /   ",note:"",resultSummary:"",resultLabel:"",riskReady:!1,resultPerformedAt:"",biomarkerResultText:"",imagingResultText:"",abeta:"",tau:""}),_e({consultStarted:!1,infoCollected:!1,ragGenerated:!1,bookingConfirmed:!1,messageSent:!1,calendarSynced:!1}),At(null),ir({memo:"",nextAction:"RECOMMEND_DIFF"}),nn({nextTrackingAt:dt((I.stage3?.headerMeta.trackingCycleDays??21)*24),reminderDaysBefore:2,reminderTime:"09:00",retryCount:2}),bt(null),oo(!1),ri(!1),Kn({}),Rr(null),pr(""),Sr({code:null,level:"TEMP",detail:"",createFollowupEvent:!1,followupAt:dt(168)}),yn({strategy:null,channel:"CALL",assigneeId:e?.manager??ul,nextContactAt:dt(24),applyL3:!1}),Ua([]),Lr(null),_n(!1),Zr(null),Ls([]),wa(!1),bs(null),Za(""),Ja({route:"CENTER_VISIT_BOOKING",scheduledAt:dt(72),place:Em.CENTER_VISIT_BOOKING.defaultPlace,contactGuide:il,note:""});const V=_7(e);Jr(V),Ei(V.classification?.label??PT(e)),Wt(""),qo(!1),X(""),De(" "),Ze(dt(72)),Zt("HOSPITAL_REFERRAL"),Ar({specialist:!0,mmse:!0,cdrOrGds:!0,neuroCognitive:!0}),fn({gdsk:!1,adl:!1,bpsd:!1}),es(!1),tu(""),ts({}),Aa({sourceOrg:" "}),ni({status:"PENDING"}),hf(!1),Ha(void 0),Ai({status:"IDLE",attemptNo:0}),Ci.current=0,_i.current=new Set,co.current=new Set,uo.current=!1,si()},[e?.id,si,A,l,a]),g.useEffect(()=>()=>{$s.current!=null&&window.clearTimeout($s.current)},[]),g.useEffect(()=>{const I=window.setInterval(()=>be(Date.now()),1e3);return()=>window.clearInterval(I)},[]),g.useEffect(()=>{if(!W)return;const I=window.setInterval(()=>{U(V=>V+1)},1e3);return()=>window.clearInterval(I)},[W]),g.useEffect(()=>{if(!(F==="CONTACT_EXECUTION"||o&&rt==="CONTACT_EXECUTION"))return;wa(!0);const V=window.setTimeout(()=>{const ee=rEe(S,a);Ls(ee);const me=ee[0];bs(me?.id??null),Za(me?.scriptBody??""),wa(!1)},180);return()=>window.clearTimeout(V)},[F,S,o,a,rt]);const Vp=g.useMemo(()=>O2e(),[]),sN=g.useMemo(()=>S.todos.find(I=>I.status==="OPEN"),[S.todos]),Yp=g.useMemo(()=>k==="ALL"?S.timeline:S.timeline.filter(I=>nEe(I)===k),[S.timeline,k]),gf=g.useMemo(()=>E.find(I=>I.id===oe)??E[0],[E,oe]),iN=g.useMemo(()=>gf.body({caseId:S.header.caseId,centerName:EA,centerPhone:il,guideLink:Awe,reservationLink:N0(S.reservationInfo),unsubscribe:JK}),[S.header.caseId,S.reservationInfo,gf]),ii=g.useMemo(()=>aa.find(I=>I.id===sa)??null,[aa,sa]),Mg=g.useMemo(()=>Twe(a,ii??void 0),[a,ii]),Lg=g.useMemo(()=>S.contactExecutor==="AGENT_SEND_ONLY"?C.filter(I=>I.type!=="BOOKING"):S.reservationInfo?C:C.filter(I=>I.type!=="BOOKING"),[S.contactExecutor,S.reservationInfo,C]),$g=!!e?.profile.guardianPhone,oN=I7(S.policyGates,["CONSENT_OK","CONTACTABLE_TIME_OK","PHONE_VERIFIED"]),lN=I7(S.policyGates,["CONSENT_OK","CONTACTABLE_TIME_OK","PHONE_VERIFIED"]),Xp=oN??(B==="guardian"&&!$g?"  ":void 0);lN??((H.guardian&&!$g||!H.citizen&&!H.guardian)&&!H.citizen&&H.guardian);const Bc=[S.preTriageInput?.contactHistory.hasComplaint?" ":null,S.preTriageInput?.contactHistory.hasRefusal?" ":null].filter(Boolean);new Date(ge).getHours();const Je=I=>{const V={id:`audit-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,at:mt(vt()),actor:S.header.assigneeName||ul,message:I};D(ee=>[V,...ee])},Fg=I=>I.type==="CALL_ATTEMPT"?"CONTACT_RESULT":I.type==="SMS_SENT"||I.type==="MESSAGE_SENT"||I.type==="AGENT_SMS_SENT"?"CONTACT_SENT":I.type==="LINKAGE_CREATED"?"BOOKING_CREATED":I.type==="LINKAGE_APPROVED"||I.type==="LINKAGE_COMPLETED"?"BOOKING_CONFIRMED":I.type==="DIFF_SCHEDULED"?"STAGE3_DIFF_SCHEDULED":I.type==="DIFF_RESULT_APPLIED"?"STAGE3_RESULTS_RECORDED":I.type==="RISK_SERIES_UPDATED"||I.type==="RISK_REVIEWED"?"STAGE3_RISK_UPDATED":I.type==="STAGE2_RESULTS_RECORDED"?"STAGE2_RESULTS_RECORDED":I.type==="STAGE2_CLASS_CONFIRMED"?"STAGE2_CLASS_CONFIRMED":I.type==="STAGE2_NEXT_STEP_SET"?"STAGE2_NEXT_STEP_SET":I.type==="STATUS_CHANGE"&&(I.from.includes("Stage")||I.to.includes("Stage"))?"STAGE_CHANGE":"DATA_SYNCED",st=I=>{_(V=>({...V,timeline:[I,...V.timeline]})),e?.id&&Rc(e.id,Fg(I),{timelineType:I.type,at:I.at},S.header.assigneeName)},ru=()=>{const I=qf(ht.tests,Ke,kt);if(ia&&Dn.trim().length<5&&(I.manualEditReason="   5  ."),Oe(I)){Me.error(" /    .");return}ts({});const V=!!ht.classification?.label,ee=DT(ht.tests,V,ki),me=computeStage2MissingFields(ht.tests,Ke,kt);Jr(le=>({...le,status:ee})),Aa(le=>({...le,receivedAt:me.length===0?vt():le.receivedAt,lastSyncedAt:vt(),sourceOrg:ie||le.sourceOrg})),e?.id&&uSe(e.id,{specialist:!!ht.tests.specialist,mmse:typeof ht.tests.mmse=="number"?ht.tests.mmse:null,cdrOrGds:typeof ht.tests.cdr=="number"?ht.tests.cdr:null,neuroType:ht.tests.neuroCognitiveType??null},{route:Ke==="HOSPITAL_REFERRAL"?"HOSPITAL":"CENTER",actorId:S.header.assigneeName}),me.length===0?(ni({status:"RUNNING",updatedAt:vt()}),$s.current!=null&&window.clearTimeout($s.current),$s.current=window.setTimeout(()=>{const le=jwe(ht.tests);ni({status:"DONE",updatedAt:vt(),recommendedLabel:le}),st({type:"STAGE2_RESULTS_RECORDED",at:vt(),by:S.header.assigneeName,summary:`  :  ${le} ( )`}),Je(`Stage2   :  ${le}`)},700)):ni({status:"PENDING",updatedAt:vt()}),st({type:"STATUS_CHANGE",at:vt(),from:"",to:"",reason:`Stage2    (${n0(ht.tests,ki)}/${Yn})`,by:S.header.assigneeName}),ia&&Dn.trim()&&Je(`Stage2  : ${Dn.trim()}`),Je(`Stage2    : ${n0(ht.tests,ki)}/${Yn}`),Me.success("   .")},nu=()=>{const I=qf(ht.tests,Ke,kt,{rationale:Ea,recommendedLabel:li,selectedLabel:Ur,overrideReason:ys});if(Oe(I)){Me.error("      .");return}if(!ci){Me.error("   .");return}const V=Ur,ee=V==="MCI"?RT(e):void 0,me=Hb(V,ee),le=Kwe(V),tt=vt(),Xe=DT(ht.tests,!0,ki);Jr(Se=>({...Se,status:Xe,classification:{label:V,probs:me,mciStage:ee},nextStep:le})),Ha(tt),qo(!1),ts({}),e?.id&&mSe(e.id,V,{mciBand:ee===""?"":ee,rationale:`${Ea.trim()}${Cf&&ys.trim()?` (override: ${ys.trim()})`:""}`,actorId:S.header.assigneeName}),st({type:"STATUS_CHANGE",at:tt,from:"",to:`(${V}${ee?`-${ee}`:""})`,reason:Ea.trim()||"   ",by:S.header.assigneeName}),Je(`Stage2  : ${V}${ee?`(${ee})`:""}`),Me.success(" .")},Kl=(I,V)=>{Jr(ee=>({...ee,nextStep:I})),e?.id&&I&&pSe(e.id,I,{actorId:S.header.assigneeName,summary:V}),st({type:"PLAN_UPDATED",at:vt(),by:S.header.assigneeName,summary:V}),Je(`Stage2   : ${V}`),Me.success("  .")},Uc=()=>{_(I=>({...I,linkageStatus:"BOOKING_DONE",reservationInfo:{route:"HOSPITAL_REFERRAL_BOOKING",reservationType:"2  ",scheduledAt:Ye,place:ie,contactGuide:il,note:"Stage2   "}})),e?.id&&d7(e.id,0,S.header.assigneeName),st({type:"LINKAGE_CREATED",at:vt(),by:S.header.assigneeName,linkageType:"HOSPITAL",summary:`   (${ie})`}),Je(`   : ${ie} / ${mt(Ye)}`),Me.success("  .")},Bg=I=>{const V={...I,id:`agent-log-${Date.now()}-${Math.random().toString(36).slice(2,7)}`};_(ee=>({...ee,agentExecutionLogs:[V,...ee.agentExecutionLogs]}))},xf=(I,V,ee)=>{_(me=>({...me,policyGates:me.policyGates.map(le=>le.key===I?{...le,status:V,failReason:void 0}:le)})),st({type:"POLICY_GATE_UPDATE",at:vt(),key:I,status:V,by:S.header.assigneeName}),Je(`   (${ee})`)},Ug=(I,V)=>{_(ee=>{const me=new Set(ee.todos.filter(tt=>tt.status==="DONE").map(tt=>tt.title)),le=IT(I,V).map(tt=>me.has(tt.title)?{...tt,status:"DONE"}:tt);return{...ee,todos:le}})},Hg=(I,V)=>{_(me=>({...me,todos:me.todos.map(le=>le.id===I?{...le,status:V}:le)}));const ee=S.todos.find(me=>me.id===I);ee&&(st({type:"STATUS_CHANGE",at:vt(),from:ee.status,to:V,reason:`To-Do : ${ee.title}`,by:S.header.assigneeName}),Je(`To-Do : ${ee.title}`),Me.success(" ( )"))},au=I=>{const V=S.todos.find(ee=>ee.status==="OPEN"&&ee.suggestedAction===I);V&&Hg(V.id,"DONE")},su=I=>{const V=I.fixAction?.action;if(V){if(V==="CONFIRM_CONTACT_TIME"){xf("CONTACTABLE_TIME_OK","PASS","   "),Me.success(" ( )"),Je("   ");return}if(V==="REQUEST_CONSENT"){xf("CONSENT_OK","PASS","  "),Me.success(" ( )");return}if(V==="VERIFY_PHONE"){xf("PHONE_VERIFIED","PASS"," "),Me.success(" ( )");return}V==="ADD_GUARDIAN"&&(xf("GUARDIAN_OPTIONAL","PASS","  "),Me.success(" ( )"))}},zl=I=>{I!==S.interventionLevel&&Q({mode:"LEVEL",title:`   (${S.interventionLevel}  ${I})`,confirmLabel:" ",nextLevel:I,reason:""})},Hc=I=>{Q({mode:"STATUS",title:`${I}   `,confirmLabel:`${I} `,nextStatus:I,reason:""})},iu=I=>{const V=$T[I],ee=S.linkageStatus,me=V.nextStatus;_(le=>{const tt={...le.contactExecution,status:le.contactExecution.status==="STOPPED"?"STOPPED":le.contactExecution.status==="DONE"?"DONE":"HANDOFF_TO_HUMAN"};return{...le,linkageStatus:me,contactExecution:tt,contactFlowSteps:zi(tt,le.preTriageResult,me,a)}}),st({type:"STATUS_CHANGE",at:vt(),from:Pd[ee],to:Pd[me],reason:`${V.title} `,by:S.header.assigneeName}),Je(` : ${V.title}`),Me.success(`${V.title} .`)},bf=(I,V)=>{if(!o)return;const ee=S.stage3?.recommendedActions.find(le=>le.id===I);if(!ee)return;const me=vt();_(le=>{if(!le.stage3)return le;const tt=le.stage3.recommendedActions.map(zn=>zn.id===I?{...zn,decision:V}:zn),Xe=tt.filter(zn=>zn.requiresApproval&&zn.decision==="PENDING").length;let Se=le.stage3.reevalStatus,pt=le.stage3.headerMeta.planStatus,or=le.stage3.planUpdatedAt,gt=le.linkageStatus;V==="APPROVED"&&(ee.type==="SCHEDULE_REEVAL"&&(Se="SCHEDULED"),ee.type==="UPDATE_PLAN"&&(pt="ACTIVE",or=me),ee.type==="ESCALATE_LEVEL"&&(gt="BOOKING_IN_PROGRESS"));const lr={...le.stage3,reevalStatus:Se,planUpdatedAt:or,triggersReviewedAt:Xe===0?me:le.stage3.triggersReviewedAt,recommendedActions:tt,headerMeta:{...le.stage3.headerMeta,planStatus:pt,opsStatus:pt==="NEEDS_UPDATE"?"PLAN_NEEDS_UPDATE":Se==="PENDING"?"REEVAL_PENDING":gt!=="NOT_CREATED"?"LINKAGE_PENDING":"TRACKING"}};return{...le,linkageStatus:gt,stage3:lr,contactFlowSteps:zi(le.contactExecution,le.preTriageResult,gt,a)}}),st({type:"STAGE3_ACTION_DECISION",at:me,by:S.header.assigneeName,actionId:I,decision:V,note:ee.title}),V==="APPROVED"&&(ee.type==="SCHEDULE_REEVAL"?st({type:"REEVAL_SCHEDULED",at:me,scheduledAt:S.stage3?.headerMeta.nextReevalAt??dt(72),by:S.header.assigneeName,reason:"  "}):ee.type==="UPDATE_PLAN"?st({type:"PLAN_UPDATED",at:me,by:S.header.assigneeName,summary:"    "}):ee.type==="ESCALATE_LEVEL"?st({type:"LINKAGE_CREATED",at:me,by:S.header.assigneeName,linkageType:"CENTER",summary:"   "}):ee.type==="SEND_REMINDER"&&st({type:"SMS_SENT",at:me,templateId:"S3_REMINDER_TRACK",status:"PENDING",by:S.header.assigneeName})),Je(`Stage3  ${V==="APPROVED"?"":""}: ${ee.title}`),Me.success(` (  ): ${ee.title}`)},Qp=I=>{if(!o)return;const V=vt(),ee=S.stage3?.headerMeta.nextReevalAt??dt(72),me=I==="RESCHEDULE"?dt(120):I==="COMPLETE"?dt(336):ee;_(le=>{if(!le.stage3)return le;const tt=I==="COMPLETE"?"COMPLETED":I==="NOSHOW"?"NOSHOW":"SCHEDULED",Xe=I==="COMPLETE"?le.stage3.headerMeta.planStatus==="NEEDS_UPDATE"?"PLAN_NEEDS_UPDATE":"TRACKING":I==="NOSHOW"?"CHURN_RISK":"REEVAL_PENDING";return{...le,stage3:{...le.stage3,reevalStatus:tt,headerMeta:{...le.stage3.headerMeta,nextReevalAt:me,opsStatus:Xe}},contactFlowSteps:zi(le.contactExecution,le.preTriageResult,le.linkageStatus,a)}}),I==="SCHEDULE"?(st({type:"REEVAL_SCHEDULED",at:V,scheduledAt:ee,by:S.header.assigneeName,reason:"  "}),Je(`  : ${mt(ee)}`)):I==="RESCHEDULE"?(st({type:"REEVAL_RESCHEDULED",at:V,from:ee,to:me,by:S.header.assigneeName,reason:" "}),Je(`  : ${mt(ee)}  ${mt(me)}`)):I==="COMPLETE"?(st({type:"REEVAL_COMPLETED",at:V,by:S.header.assigneeName,note:"  "}),Je("  ")):(st({type:"REEVAL_NOSHOW",at:V,by:S.header.assigneeName,note:" "}),Je("  ")),Me.success(" ( )")},fo=I=>{if(!o)return;const V=vt(),ee=I?.summary??(l?"   ":"    ");_(me=>{if(!me.stage3)return me;const le=[...me.stage3.transitionRisk.series],tt=le[le.length-1],Xe=tt?{t:V,risk2y:tt.risk2y,ciLow:tt.ciLow,ciHigh:tt.ciHigh,source:"manual",event:"REEVAL"}:{t:V,risk2y:me.stage3.transitionRisk.risk2y_now,source:"manual",event:"REEVAL"},Se=[...le.slice(-11),Xe];return{...me,stage3:{...me.stage3,riskReviewedAt:V,transitionRisk:{...me.stage3.transitionRisk,updatedAt:V,series:Se}}}}),st({type:"RISK_REVIEWED",at:V,by:S.header.assigneeName,summary:ee}),st({type:"RISK_SERIES_UPDATED",at:V,by:S.header.assigneeName,summary:l?"     ":"     "}),Je(`${l?"Stage2   ":"Stage3   "} : ${ee}`),I?.nextAction&&bt({at:V,memo:ee,nextAction:I.nextAction}),I?.silentToast||Me.success(l?"   .":"   .")},mo=I=>{if(!o)return;const V=vt();if(I==="APPLY_RESULT"&&$t(ee=>({...ee,riskReady:!0,resultPerformedAt:ee.resultPerformedAt||V})),_(ee=>{if(!ee.stage3)return ee;let me=ee.stage3.diffPathStatus,le=ee.stage3.reevalStatus,tt=ee.stage3.headerMeta.planStatus,Xe=ee.stage3.planUpdatedAt,Se=ee.stage3.headerMeta.nextReevalAt,pt=ee.stage3.transitionRisk;if(I==="CREATE_RECO")me="RECOMMENDED";else if(I==="CREATE_REFER")me="REFERRED";else if(I==="SCHEDULE"){me="SCHEDULED",le="SCHEDULED",Se=dt(72);const gt=ee.stage3.transitionRisk.series[ee.stage3.transitionRisk.series.length-1];pt={...ee.stage3.transitionRisk,updatedAt:V,series:[...ee.stage3.transitionRisk.series.slice(-11),{t:V,risk2y:gt?.risk2y??ee.stage3.transitionRisk.risk2y_now,ciLow:gt?.ciLow,ciHigh:gt?.ciHigh,source:"manual",event:"REEVAL"}]}}else if(I==="COMPLETE"){me="COMPLETED",le="COMPLETED";const gt=ee.stage3.transitionRisk.series[ee.stage3.transitionRisk.series.length-1],lr=Un((gt?.risk2y??ee.stage3.transitionRisk.risk2y_now)-.03);pt={...ee.stage3.transitionRisk,risk2y_now:lr,risk2y_label:lr>=.7?"HIGH":lr>=.45?"MID":"LOW",updatedAt:V,series:[...ee.stage3.transitionRisk.series.slice(-11),{t:V,risk2y:lr,ciLow:Un(lr-.04),ciHigh:Un(lr+.04),source:"manual",event:"REEVAL"}]}}else if(I==="APPLY_RESULT"){me="COMPLETED",tt="NEEDS_UPDATE",Xe=V;const gt=ee.stage3.transitionRisk.series[ee.stage3.transitionRisk.series.length-1],lr=Un((gt?.risk2y??ee.stage3.transitionRisk.risk2y_now)+.04);pt={...ee.stage3.transitionRisk,risk2y_now:lr,risk2y_label:lr>=.7?"HIGH":lr>=.45?"MID":"LOW",updatedAt:V,series:[...ee.stage3.transitionRisk.series.slice(-11),{t:V,risk2y:lr,ciLow:Un(lr-.05),ciHigh:Un(lr+.05),source:"manual",event:"DIFF_RESULT_APPLIED"}]}}const or=tt==="NEEDS_UPDATE"?"PLAN_NEEDS_UPDATE":me==="REFERRED"||me==="SCHEDULED"?"LINKAGE_PENDING":le==="PENDING"?"REEVAL_PENDING":"TRACKING";return{...ee,stage3:{...ee.stage3,diffPathStatus:me,reevalStatus:le,planUpdatedAt:Xe,transitionRisk:pt,headerMeta:{...ee.stage3.headerMeta,planStatus:tt,nextReevalAt:Se,opsStatus:or}},linkageStatus:I==="CREATE_REFER"||I==="SCHEDULE"?"REFERRAL_CREATED":ee.linkageStatus}}),I==="CREATE_RECO")st({type:"DIFF_RECO_CREATED",at:V,by:S.header.assigneeName,summary:l?"   ":"/  "}),Je(l?"   ":"  ");else if(I==="CREATE_REFER")st({type:"DIFF_REFER_CREATED",at:V,by:S.header.assigneeName,summary:l?"/  ":"  "}),st({type:"LINKAGE_CREATED",at:V,by:S.header.assigneeName,linkageType:"HOSPITAL",summary:l?"    ":"   "}),Je(l?"  ":"  ");else if(I==="SCHEDULE"){const ee=dt(72);st({type:"DIFF_SCHEDULED",at:V,by:S.header.assigneeName,summary:l?"  ":"  "}),st({type:"REEVAL_SCHEDULED",at:V,by:S.header.assigneeName,scheduledAt:ee,reason:l?"  ":"  "}),Je(l?"  ":"  ")}else I==="COMPLETE"?(st({type:"DIFF_COMPLETED",at:V,by:S.header.assigneeName,summary:l?"   ":"  "}),st({type:"REEVAL_COMPLETED",at:V,by:S.header.assigneeName,note:l?" ":" "}),Je(l?"  ":"  ")):(st({type:"DIFF_RESULT_APPLIED",at:V,by:S.header.assigneeName,summary:l?"      ":"       "}),Je(l?"  ":"  "));if(e?.id&&I==="APPLY_RESULT"){const ee=Wwe(We.resultLabel);hSe(e.id,{biomarker:We.testBiomarker,imaging:We.testBrainImaging,biomarkerResult:We.testBiomarker?ee:null,imagingResult:We.testBrainImaging?ee:null,performedAt:V},S.header.assigneeName),gSe(e.id,S.header.assigneeName)}e?.id&&I==="SCHEDULE"&&Rc(e.id,"STAGE3_DIFF_SCHEDULED",{scheduledAt:dt(72)},S.header.assigneeName),Me.success(" (  )")},Gg=g.useCallback((I,V,ee)=>{if(!o)return;const me=vt(),le=I.trim();_e(tt=>({...tt,consultStarted:!0,infoCollected:!0})),le.length>0&&$t(tt=>({...tt,note:le})),st({type:"CALL_ATTEMPT",at:me,result:"SUCCESS",note:le||`${V}  `,by:S.header.assigneeName}),Je(`Stage3  : ${ee}${le?` (${le.slice(0,80)})`:""}`)},[Je,S.header.assigneeName,o]),Kg=g.useCallback(I=>{if(!o)return;const V=vt();st({type:"SMS_SENT",at:V,templateId:I.templateLabel,status:I.status==="SENT"?"DELIVERED":I.status==="SCHEDULED"?"PENDING":"FAILED",by:S.header.assigneeName}),st({type:"MESSAGE_SENT",at:V,by:S.header.assigneeName,summary:`   ${I.mode==="NOW"?"":""}: ${I.templateLabel}`}),_e(ee=>({...ee,messageSent:I.status!=="FAILED"})),Je(`Stage3  ${I.mode==="NOW"?"":""}: ${I.templateLabel} (${I.status})`)},[Je,S.header.assigneeName,o]),zg=g.useCallback(()=>{if(!o)return;const I=vt(),V=[We.note,te,Rn,ii?.scriptBody].filter(Boolean).join(" "),ee=V.length>=180?"":V.length>=80?"":"",me={preferredHospital:We.preferredHospital||We.orgName||" ",preferredTimeWindow:V.includes("")||V.includes("")?"  10:00~12:00":V.includes("")?"  09:00~11:00":"  14:00~16:00",caregiverCompanion:V.includes("")||ft.caregiverNeeded,mobilityIssue:V.includes("")||V.includes(""),testBiomarker:!0,testBrainImaging:!0,prepGuide:" : / /  ,      ",orgName:We.orgName||" ",orgPhone:We.orgPhone||il},le=Object.keys(me).filter(Xe=>{const Se=me[Xe],pt=We[Xe];return Se!==pt}),tt=[ii?.title?` : ${ii.title}`:"    ",V.length>0?`   : ${V.slice(0,60)}${V.length>60?"...":""}`:"      ",`     ${ee}`];At({generatedAt:I,confidenceLabel:ee,reasonSnippets:tt,patch:me,changedFields:le,applied:!1,ignored:!1}),_e(Xe=>({...Xe,ragGenerated:!0})),Je(`Stage3 RAG    (${ee})`),Me.success("RAG   .    .")},[Je,te,o,Rn,ii?.scriptBody,ii?.title,We,ft.caregiverNeeded]),cN=g.useCallback(()=>{if(!Ve)return;const I=vt();$t(V=>({...V,...Ve.patch})),At(V=>V&&{...V,applied:!0,ignored:!1}),_e(V=>({...V,infoCollected:!0,ragGenerated:!0})),st({type:"STAGE3_ACTION_DECISION",at:I,by:S.header.assigneeName,actionId:"RAG_AUTOFILL",decision:"APPROVED",note:`  (${Ve.changedFields.length} )`}),Je(`Stage3 RAG  : ${Ve.changedFields.join(", ")||" "}`)},[Je,S.header.assigneeName,Ve]),dN=g.useCallback(()=>{if(!Ve)return;const I=vt();At(V=>V&&{...V,ignored:!0,applied:!1}),st({type:"STAGE3_ACTION_DECISION",at:I,by:S.header.assigneeName,actionId:"RAG_AUTOFILL",decision:"HOLD",note:"  "}),Je("Stage3 RAG  ")},[Je,S.header.assigneeName,Ve]),uN=g.useCallback(()=>{if(!o)return;const I={};if(!te.trim()&&!Re.consultStarted&&(I.step2CallRecord="  (   ) ."),We.preferredHospital.trim()||(I.step2Hospital=" / ."),!We.testBiomarker&&!We.testBrainImaging&&!We.testOther&&(I.step2TestSelection="   1 ."),We.bookingAt||(I.step2BookingAt="    ."),Object.keys(I).length>0){Ca("CONTACT_EXECUTION",I),Me.error("      .");return}Kn(me=>({...me,CONTACT_EXECUTION:{}}));const V=vt();mo("SCHEDULE"),$t(me=>({...me,bookingConfirmed:!0})),_e(me=>({...me,bookingConfirmed:!0,messageSent:!0,calendarSynced:!0})),e?.id&&d7(e.id,0,S.header.assigneeName),st({type:"SMS_SENT",at:V,templateId:"S3_BOOKING_CONFIRM",status:"DELIVERED",by:S.header.assigneeName}),st({type:"MESSAGE_SENT",at:V,by:S.header.assigneeName,summary:`     ${mt(We.bookingAt)}`});const ee=`S3-CAL-${Date.now()}`;st({type:"CALENDAR_SYNC",at:V,status:"SUCCESS",eventType:"FOLLOWUP",title:`Stage3   (${S.header.caseId})`,scheduledAt:We.bookingAt,idempotencyKey:ee,by:S.header.assigneeName}),st({type:"CAL_EVENT_CREATED",at:V,by:S.header.assigneeName,scheduledAt:We.bookingAt,summary:`${We.preferredHospital||We.orgName}  ${mt(We.bookingAt)}`}),Je(`Stage3    : ${We.preferredHospital||We.orgName}  ${mt(We.bookingAt)}  /  `),Me.success("//  .")},[Ca,Je,e?.id,te,S.header.assigneeName,S.header.caseId,mo,o,We.bookingAt,We.orgName,We.preferredHospital,We.testBiomarker,We.testBrainImaging,We.testOther,Re.consultStarted]),qg=(I,V)=>{if(!o)return;const ee=vt();_(me=>{if(!me.stage3)return me;const le=me.stage3.programs.map(tt=>{if(tt.id!==I)return tt;const Xe=V??!tt.selected;return{...tt,selected:Xe,execution:Xe?tt.execution??{owner:me.header.assigneeName,dueDate:dt(72),status:"PLANNED",method:""}:void 0}});return{...me,stage3:{...me.stage3,programs:le}}}),st({type:"PROGRAM_SELECTED",at:ee,by:S.header.assigneeName,summary:`  : ${I}`}),Je(`  : ${I}`)},Zp=(I,V)=>{if(!o)return;const ee=vt();_(me=>{if(!me.stage3)return me;const le=me.stage3.programs.map(tt=>tt.id!==I?tt:{...tt,selected:!0,execution:{owner:me.header.assigneeName,...tt.execution,...V}});return{...me,stage3:{...me.stage3,programs:le}}}),st({type:V.status==="DONE"?"PROGRAM_EXEC_COMPLETED":"PROGRAM_EXEC_UPDATED",at:ee,by:S.header.assigneeName,summary:`  : ${I}`}),Je(`  : ${I}`),Me.success("   .")},Bs=()=>{if(!o)return;const I=vt();_(V=>{if(!V.stage3)return V;const ee=V.stage3.transitionRisk.series[V.stage3.transitionRisk.series.length-1],me=ee?.risk2y??V.stage3.transitionRisk.risk2y_now;return{...V,stage3:{...V.stage3,planUpdatedAt:I,transitionRisk:{...V.stage3.transitionRisk,updatedAt:I,series:[...V.stage3.transitionRisk.series.slice(-11),{t:I,risk2y:me,ciLow:ee?.ciLow,ciHigh:ee?.ciHigh,source:"manual",event:"PLAN_UPDATED"}]},headerMeta:{...V.stage3.headerMeta,planStatus:"ACTIVE",opsStatus:"TRACKING"}}}}),st({type:"PLAN_UPDATED",at:I,by:S.header.assigneeName,summary:"   "}),Je("  "),Me.success("  .")},Gc=()=>{if(!o)return;const I=vt(),V=dt((S.stage3?.headerMeta.trackingCycleDays??21)*24);_(ee=>ee.stage3?{...ee,stage3:{...ee.stage3,headerMeta:{...ee.stage3.headerMeta,nextTrackingContactAt:V}}}:ee),st({type:"NEXT_TRACKING_SET",at:I,by:S.header.assigneeName,nextAt:V,summary:"   "}),Je(`   : ${mt(V)}`),Me.success("   .")},Jp=g.useCallback(()=>{if(!o)return;if(l){if(!S.stage3?.riskReviewedAt){fo({summary:"STEP1  "});return}if(S.stage3.diffPathStatus==="NONE"||S.stage3.diffPathStatus==="RECOMMENDED"){mo("SCHEDULE");return}if(S.stage3.reevalStatus!=="SCHEDULED"&&S.stage3.reevalStatus!=="COMPLETED"){Qp("SCHEDULE");return}Pe("FOLLOW_UP");return}const I=S.stage3?.recommendedActions.find(ee=>ee.decision==="PENDING");if(I){bf(I.id,"APPROVED");return}if(!S.stage3?.riskReviewedAt){fo();return}if(S.stage3.diffPathStatus==="NONE"){mo("CREATE_RECO");return}if(!S.stage3.programs.some(ee=>ee.selected&&(ee.execution?.status==="PLANNED"||ee.execution?.status==="IN_PROGRESS"||ee.execution?.status==="DONE"))){const ee=S.stage3.programs[0];if(ee){qg(ee.id,!0),Zp(ee.id,{status:"PLANNED",method:"",dueDate:dt(72)});return}}if(S.stage3.headerMeta.planStatus==="NEEDS_UPDATE"){Bs();return}Gc()},[bf,Bs,S.stage3,mo,fo,Qp,o,l,Gc,Pe,qg,Zp]),yf=I=>{if(I===S.contactExecutor)return;const V=S.contactExecutor,ee=vt(),me=Hs==="AI_FIRST"&&I==="HUMAN";me&&Es({actor:"operator",summary:"     .",detailMessage:"    ",moveToHuman:!0}),_(le=>({...le,contactExecutor:I})),st({type:"STATUS_CHANGE",at:ee,from:Zi[V],to:Zi[I],reason:"  ",by:S.header.assigneeName}),me&&(st({type:"OPERATOR_OVERRIDE_TO_HUMAN",at:ee,actor:"operator",caseId:S.header.caseId,summary:"  ",detail:"      ",by:S.header.assigneeName}),Je("  :     ")),Je(`  : ${Zi[V]}  ${Zi[I]}`),Me.success("  .")},eh=I=>{bs(I.id),Za(I.scriptBody)},vf=()=>{const I=Em[Pn.route];if(Pn.route!=="HOLD_TRACKING"&&!Pn.scheduledAt)return Me.error("/  ."),!1;const V=Pn.route==="HOLD_TRACKING"?void 0:{route:Pn.route,reservationType:I.reservationType,scheduledAt:Pn.scheduledAt,place:Pn.place||I.defaultPlace,contactGuide:Pn.contactGuide||il,note:Pn.note||void 0},ee=S.linkageStatus,me=I.linkageStatus;return _(le=>({...le,linkageStatus:me,reservationInfo:V,contactFlowSteps:zi(le.contactExecution,le.preTriageResult,me,a)})),V?.scheduledAt&&Fe(V.scheduledAt),st({type:"STATUS_CHANGE",at:vt(),from:Pd[ee],to:Pd[me],reason:`${I.label} `,by:S.header.assigneeName}),Je(`  : ${I.label}`),Me.success("  ."),!0},th=()=>{if(!ct||!ct.reason.trim())return;if(ct.mode==="LEVEL"){const ee=ct.nextLevel,me=S.interventionLevel,le=S.header.dataQuality.level;_(tt=>({...tt,interventionLevel:ee})),Ug(ee,le),st({type:"LEVEL_CHANGE",at:vt(),from:me,to:ee,reason:ct.reason,by:S.header.assigneeName}),Je(`  : ${me}  ${ee} (${ct.reason})`),Me.success(" ( )"),Q(null);return}const I=S.header.statusLabel,V=ct.nextStatus;_(ee=>{const me=V===" "?{level:"EXCLUDE",score:Math.min(ee.header.dataQuality.score,60),notes:["  ","    "]}:ee.header.dataQuality;return{...ee,header:{...ee.header,statusLabel:V,dataQuality:me},todos:V===" "?IT(ee.interventionLevel,"EXCLUDE"):ee.todos}}),st({type:"STATUS_CHANGE",at:vt(),from:I,to:V,reason:ct.reason,by:S.header.assigneeName}),Je(` : ${I}  ${V} (${ct.reason})`),Me.success(" ( )"),Q(null)},fN=()=>{Xp||(K(!0),U(0),Je(`   (${B==="citizen"?"":""})`))},mN=async()=>{if(!he)return;if(je(!0),he.mode==="CALL"){const Xe=vt(),Se=he.result,pt=he.note.trim();st({type:"CALL_ATTEMPT",at:Xe,result:Se,note:pt||void 0,by:S.header.assigneeName}),Je(`  : ${cEe(Se)}${pt?` (${pt})`:""}`),_(or=>({...or,header:{...or.header,waitDays:Se==="SUCCESS"?0:or.header.waitDays+1,statusLabel:Se==="SUCCESS"?"":or.header.statusLabel}})),Se==="SUCCESS"?(au("CALL"),Fe(dt(72))):Fe(dt(Se==="NO_ANSWER"?6:24)),re(""),U(0),je(!1),$e(null),Me.success(" ( )");return}const I=he.result,V=iN,ee=[{key:"citizen",label:"",phone:e?.profile.phone},{key:"guardian",label:"",phone:e?.profile.guardianPhone}].filter(Xe=>H[Xe.key]),me=he.scheduled&&xe?new Date(xe).toISOString():vt();let le=0,tt=0;for(const Xe of ee){let Se=I;!he.scheduled&&Xe.phone&&I!=="FAILED"&&((await zK({caseId:S.header.caseId,citizenPhone:Xe.phone,templateId:oe,renderedMessage:V,dedupeKey:`${S.header.caseId}-${oe}-${Xe.label}-${Date.now()}`})).success||(Se="FAILED")),(Se==="DELIVERED"||Se==="PENDING")&&(le+=1),Se==="FAILED"&&(tt+=1),st({type:"SMS_SENT",at:me,templateId:`${oe}(${Xe.label})`,status:Se,by:S.header.assigneeName})}Je(` ${he.scheduled?"":""}: ${gf.label} (${ee.length}, / ${le},  ${tt})`),le>0&&(au("SMS"),Fe(dt(48))),je(!1),$e(null),Me.success(" ( )")};`${String(Math.floor(G/60)).padStart(2,"0")}${String(G%60).padStart(2,"0")}`;const Kc=()=>{if(!Be.trim())return;const I=S.header.effectiveStrategy??S.preTriageResult?.strategy??"AI_FIRST",V=br,ee=u5(S.preTriageResult?.triggers??[]);if(V==="AI_FIRST"&&ee&&Be.trim().length<12){Me.error("        12   .");return}_(me=>{const le={strategy:V,triggers:[...me.preTriageResult?.triggers??[],` : ${Be}`],policyNote:`    (${Ad[V]}). : ${Be}`,confidence:"RULE"};return{...me,header:{...me.header,contactStrategy:"MANUAL_OVERRIDE",effectiveStrategy:V},contactExecutor:V==="AI_FIRST"?"AGENT_SEND_ONLY":"HUMAN",preTriageResult:le,contactPlan:lz(V,e,a),contactFlowSteps:zi(me.contactExecution,le,me.linkageStatus,a)}}),st({type:"STRATEGY_CHANGE",at:vt(),from:I,to:V,reason:Be,by:S.header.assigneeName}),st({type:"CONTACT_STRATEGY_CHANGED",at:vt(),actor:"operator",caseId:S.header.caseId,summary:`  : ${Ad[I]}  ${Ad[V]}`,detail:Be,by:S.header.assigneeName}),V==="HUMAN_FIRST"&&Es({actor:"operator",summary:"     .",detailMessage:Be,moveToHuman:!0}),Je(`   : ${Ad[I]}  ${Ad[V]} (${Be})`),Me.success("  ."),Mt(!1),tr("")},Us=g.useCallback(()=>{_n(!0),wi&&Lr(null),si()},[si,wi]),ql=g.useCallback(I=>{Us(),Rr(I)},[Us]),ou=g.useCallback(I=>{Us(),pr(I)},[Us]),Nf=g.useCallback(I=>{Us(),Sr(I)},[Us]),zc=g.useCallback(I=>{Us(),yn(I)},[Us]),Yo=g.useCallback(I=>{Us(),Ua(V=>V.includes(I)?V.filter(ee=>ee!==I):[...V,I])},[Us]),qc=g.useCallback(()=>{const I=S.header.sla.level!=="OK"||S.contactExecution.retryCount>=2||kT(e)>=85;Rr(null),pr(""),Sr({code:null,level:"TEMP",detail:"",createFollowupEvent:!1,followupAt:dt(168)}),yn({strategy:null,channel:"CALL",assigneeId:S.header.assigneeName||ul,nextContactAt:dt(24),applyL3:I}),Ua([]),Lr(null),si(),_n(!1)},[e,si,S.contactExecution.retryCount,S.header.assigneeName,S.header.sla.level]),Sf=async({code:I,note:V,reject:ee,noResponse:me,reasonTags:le=[]})=>{const tt=V.trim(),Xe=me?.nextContactAt,Se={outcomeType:hEe[I],memo:tt||void 0,reasonTags:le.length>0?le:void 0};I==="REFUSE"&&ee?.code&&(Se.reject={code:ee.code,level:ee.level,detail:ee.detail.trim()||void 0,followup:{createFollowupEvent:ee.createFollowupEvent,followupAt:ee.createFollowupEvent?ee.followupAt:void 0}}),I==="NO_RESPONSE"&&me?.strategy&&Xe&&(Se.noResponse={strategy:me.strategy,nextContactAt:Xe,escalateLevel:me.applyL3?"L3":void 0,channel:me.channel,assigneeId:me.assigneeId||void 0});const pt=await aN({caseId:S.header.caseId,payload:Se});if(!pt)return Me.error("   .   ."),!1;const or=vt();let gt=null,lr="",zn=!1;_(Vt=>{const qn=Nwe({outcomeCode:I,execution:Vt.contactExecution,linkageStatus:Vt.linkageStatus,contactPlan:Vt.contactPlan});lr=qn.recommendedNextAction,zn=qn.switchedToHybrid;let za=qn.contactPlan;za&&I==="SCHEDULE_LATER"&&(za={...za,scheduledAt:dt(qn.recontactAfterHours)}),za&&I==="NO_RESPONSE"&&Xe&&(za={...za,scheduledAt:Xe}),qn.requiresHandoffMemo&&(gt={triggers:Vt.preTriageResult?.triggers??[],lastContactSummary:` : ${mt(Vt.contactExecution.lastSentAt??or)}`,currentOutcome:I,recommendedNextAction:lr,generatedAt:or});const Tf={...Vt.contactExecution,status:qn.executionStatus,lastOutcomeCode:I,lastResponseAt:or,retryCount:qn.retryCount,handoffMemo:gt??Vt.contactExecution.handoffMemo};return{...Vt,linkageStatus:qn.linkageStatus,contactPlan:za,contactExecution:Tf,contactFlowSteps:zi(Tf,Vt.preTriageResult,qn.linkageStatus,a)}}),st({type:"OUTCOME_RECORDED",at:or,outcomeCode:I,reasonTags:le.length>0?le:void 0,note:tt||void 0,rejectCode:Se.reject?.code,rejectLevel:Se.reject?.level,recontactStrategy:Se.noResponse?.strategy,nextContactAt:Se.noResponse?.nextContactAt??Se.reject?.followup?.followupAt,outcomeId:pt.outcome.outcomeId,by:S.header.assigneeName});const cn=le.length>0?`  : ${le.map(Vt=>_v[Vt].label).join(", ")}`:"";Je(`  : ${vl[I].label}${cn}${tt?` (${tt.slice(0,60)})`:""}`),st({type:"MESSAGE_SENT",at:or,summary:`${i?"STAGE2_RESPONSE_RECORDED":"STAGE1_RESPONSE_RECORDED"}  ${vl[I].label}`,by:S.header.assigneeName});const zs=pt.outcome.nextAction?.events?.[0]?.startAt??Se.noResponse?.nextContactAt??Se.reject?.followup?.followupAt;if(Fe(zs??dt(I==="SCHEDULE_LATER"?72:I==="NO_RESPONSE"?24:I==="REFUSE"?168:48)),zn&&Je("     : HYBRID"),Se.noResponse?.escalateLevel==="L3"&&S.interventionLevel!=="L3"){const Vt=S.interventionLevel;_(qn=>({...qn,interventionLevel:"L3"})),Ug("L3",S.header.dataQuality.level),st({type:"LEVEL_CHANGE",at:or,from:Vt,to:"L3",reason:"       ",by:S.header.assigneeName}),Je(`  : ${Vt}  L3 (   )`)}return pt.calendar.created.forEach(Vt=>{st({type:"CALENDAR_SYNC",at:vt(),status:"SUCCESS",eventType:Vt.event.type,title:Vt.event.title,scheduledAt:Vt.event.startAt,idempotencyKey:Vt.idempotencyKey,by:S.header.assigneeName})}),pt.calendar.failed.forEach(Vt=>{st({type:"CALENDAR_SYNC",at:vt(),status:"FAILED",eventType:Vt.eventType,title:Vt.title,scheduledAt:Vt.scheduledAt,idempotencyKey:Vt.idempotencyKey,error:Vt.errorMessage,by:S.header.assigneeName})}),pt.calendar.failed.length>0?(Je(`  : ${pt.calendar.failed.length} ( )`),Me.error("      .  .")):pt.calendar.created.length>0?(Je(`  : ${pt.calendar.created.length}`),Me.success("   .")):Me.success("  ."),gt&&(ca(`[ ]
 ( ): ${S.header.effectiveStrategy??S.preTriageResult?.strategy??"AI_FIRST"}
: ${gt.triggers.join(", ")}
${gt.lastContactSummary}
 : ${vl[I].label}
  : ${gt.recommendedNextAction}`),la(!0)),!o&&F==="RESPONSE_HANDLING"?($("FOLLOW_UP"),la(!0)):$(null),qc(),Zr(or),!0},Wc=async()=>{if(!Ti){if(!yr){const I="  .";Lr(I),Me.error(I);return}if(yr==="REFUSE"){if(!fr.code){const I="     .";Lr(I),Me.error(I);return}if(fr.code==="R7_OTHER"&&!fr.detail.trim()){const I="     .";Lr(I),Me.error(I);return}if(fr.createFollowupEvent&&!fr.followupAt){const I="   .";Lr(I),Me.error(I);return}Lr(null),await Sf({code:"REFUSE",note:zr,reject:fr,reasonTags:sn});return}if(yr==="NO_RESPONSE"){const I=Ba.strategy??rz[Ba.channel];if(!I){const V="       .";Lr(V),Me.error(V);return}if(!Ba.nextContactAt){const V="       .";Lr(V),Me.error(V);return}if(!Ba.assigneeId.trim()){const V="      .";Lr(V),Me.error(V);return}Lr(null),await Sf({code:"NO_RESPONSE",note:zr,noResponse:{...Ba,strategy:I},reasonTags:sn});return}Lr(null),await Sf({code:yr,note:zr,reasonTags:sn})}},Wl=g.useMemo(()=>kT(e),[e]),jf=g.useMemo(()=>Rwe(Wl),[Wl]),Wg=g.useMemo(()=>hK(e),[e]),Hs=S.header.effectiveStrategy??S.preTriageResult?.strategy??"AI_FIRST",wf=S.header.contactStrategy??Hs,rh=S.contactFlowSteps.filter(I=>I.status==="MISSING").length,po=S.contactFlowSteps.filter(I=>I.status==="WARNING").length,nh=!!S.preTriageInput&&S.header.dataQuality.level!=="EXCLUDE",In=EEe(S,a,l),pN=S.stage3?.transitionRisk,Xo=S.stage3?.programs??[],Vc=g.useMemo(()=>Xo.filter(I=>{if(vr!=="ALL"&&I.major!==vr||Ae&&!I.pinned)return!1;if(!Kt.trim())return!0;const V=Kt.trim().toLowerCase();return`${I.major} ${I.middle} ${I.leaf}`.toLowerCase().includes(V)}),[vr,Ae,Kt,Xo]);g.useMemo(()=>Vc.slice(0,24),[Vc]),g.useMemo(()=>Xo.filter(I=>I.selected),[Xo]);const Vg=g.useMemo(()=>Xo.some(I=>I.selected&&(I.execution?.status==="PLANNED"||I.execution?.status==="IN_PROGRESS"||I.execution?.status==="DONE")),[Xo]),lu=g.useMemo(()=>S.stage3?.recommendedActions.filter(I=>I.requiresApproval&&I.decision==="PENDING").length??0,[S.stage3?.recommendedActions]),Yg=S.stage3?.diffPathStatus==="SCHEDULED"||S.stage3?.diffPathStatus==="COMPLETED",tn=!!m?.completed||!!(We.resultPerformedAt&&We.resultSummary.trim()&&We.biomarkerResultText?.trim()&&We.imagingResultText?.trim()),Yc=Yg&&tn,Ga=g.useMemo(()=>Xo.find(I=>I.id===ut)??null,[ut,Xo]),Gs=["PRECHECK","CONTACT_EXECUTION","RESPONSE_HANDLING","FOLLOW_UP"],Qo=Gs,Xc=F?Qo.indexOf(F):-1,cu=F?In.find(I=>I.id===F)??null:null,Vl=rt?Gs.indexOf(rt):-1,Qc=rt?In.find(I=>I.id===rt)??null:null,Xg=In.find(I=>I.id==="FOLLOW_UP")?.status==="BLOCKED",Qg=o?Xg:!i,rs=g.useMemo(()=>sEe(S.policyGates),[S.policyGates]),Oi=Hs==="AI_FIRST"&&S.contactExecutor==="AGENT_SEND_ONLY",oi=S.contactPlan?.maxRetryPolicy.intervalHours??24,Zc=S.contactPlan?.maxRetryPolicy.maxRetries??2,Jc=S.contactPlan?.templateId??(i?"S2_CONTACT_BASE":o?"S3_CONTACT_BASE":"S1_CONTACT_BASE"),ki=u?.stage2Route??(Ke==="HOSPITAL_REFERRAL"?"HOSPITAL":"CENTER"),Ss=WEe({routeType:Ke,hospitalName:ie,dueAt:Ye,tests:ht.tests,optionalTests:jr,integrationReceivedAt:oa.receivedAt,integrationUpdatedAt:oa.lastSyncedAt,manualEditEnabled:ia}),du=!!S.stage3?.riskReviewedAt,ed=g.useMemo(()=>Ss.filter(I=>I.requiredLevel==="REQUIRED"&&(I.status==="MISSING"||I.status==="NEEDS_REVIEW"||I.status==="PENDING")),[Ss]),ah=g.useMemo(()=>{const I=Ss.filter(V=>V.status==="DONE"||V.status==="RECEIVED").length;return Ss.length?Math.round(I/Ss.length*100):0},[Ss]),Zg=g.useMemo(()=>{const I=Ss.filter(ee=>ee.requiredLevel==="REQUIRED"),V=I.filter(ee=>FEe.has(ee.status)).length;return I.length?Math.round(V/I.length*100):0},[Ss]),uu=g.useMemo(()=>S.timeline.some(I=>I.type==="DIFF_REFER_CREATED"||I.type==="DIFF_SCHEDULED"||I.type==="LINKAGE_CREATED"),[S.timeline]),sh=g.useMemo(()=>({routeType:Ke,orgName:ie,dueAt:Ye,lastSyncAt:oa.lastSyncedAt??oa.receivedAt??S.stage3?.riskReviewedAt,needsReasonOnChange:uu}),[S.stage3?.riskReviewedAt,ie,oa.lastSyncedAt,oa.receivedAt,uu,Ke,Ye]),js=g.useMemo(()=>{const I=Ss.some(ee=>ee.requiredLevel==="REQUIRED"&&(ee.status==="REFERRED"||ee.status==="SCHEDULED"||ee.status==="DONE"||ee.status==="RECEIVED"));return{status:ed.length>0?"BLOCKED":du?"READY":I?"IN_PROGRESS":"PAUSED",completionRate:ah,requiredSatisfaction:Zg,missingCount:ed.length,qualityScore:S.header.dataQuality.score,step1Reviewed:du,locks:{step2:In.find(ee=>ee.id==="CONTACT_EXECUTION")?.status==="BLOCKED",step3:In.find(ee=>ee.id==="RESPONSE_HANDLING")?.status==="BLOCKED",step4:In.find(ee=>ee.id==="FOLLOW_UP")?.status==="BLOCKED"}}},[S.header.dataQuality.score,In,ah,Ss,ed.length,Zg,du]),Jg=g.useCallback(I=>{if(I===Ke)return;let V="";if(uu&&typeof window<"u"&&(V=window.prompt(" /  .    .")?.trim()??"",!V)){Me.error("    .");return}const ee=Ke==="HOSPITAL_REFERRAL"?" ":"  ",me=I==="HOSPITAL_REFERRAL"?" ":"  ";Zt(I),Ue("step1Plan"),st({type:"STATUS_CHANGE",at:vt(),from:ee,to:me,reason:V||"Stage2   ",by:S.header.assigneeName}),Je(`Stage2   : ${ee}  ${me}${V?` (${V})`:""}`)},[Je,Ue,S.header.assigneeName,uu,Ke]),td=g.useCallback(()=>{const I=vt();if(Ke==="HOSPITAL_REFERRAL"){st({type:"DIFF_REFER_CREATED",at:I,by:S.header.assigneeName,summary:` /: ${ie||""}   ${mt(Ye)}`}),Je(`Stage2  /: ${ie||""}`),_(V=>V.stage3?{...V,stage3:{...V.stage3,diffPathStatus:V.stage3.diffPathStatus==="NONE"?"REFERRED":V.stage3.diffPathStatus}}:V),Me.success(" / .");return}st({type:"DIFF_SCHEDULED",at:I,by:S.header.assigneeName,summary:`  : ${mt(Ye)}`}),Je(`Stage2   : ${mt(Ye)}`),_(V=>V.stage3?{...V,stage3:{...V.stage3,diffPathStatus:V.stage3.diffPathStatus==="NONE"?"SCHEDULED":V.stage3.diffPathStatus}}:V),Me.success("   .")},[Je,S.header.assigneeName,ie,Ke,Ye]),Ri=g.useCallback((I,V)=>{const ee=vt();if(V.key==="OPEN_PIPELINE"){Pe("CONTACT_EXECUTION");return}if(V.key==="VIEW_RESULT"){Pe("CONTACT_EXECUTION"),typeof window<"u"&&window.setTimeout(()=>{(document.getElementById("stage2-modal-step2-input")??document.getElementById("stage2-step2-input"))?.scrollIntoView({behavior:"smooth",block:"start"})},20);return}if(V.key==="REQUEST_RESULT"){st({type:"MESSAGE_SENT",at:ee,by:S.header.assigneeName,summary:`${I.label}  `}),Je(`Stage2  : ${I.label}`),Me.success(`${I.label}   .`);return}if(V.key==="MANUAL_EXCEPTION"){es(!0),Pe("CONTACT_EXECUTION"),Je(`Stage2  () : ${I.label}`),Me("STEP2      .");return}st({type:"STAGE2_RESULTS_RECORDED",at:ee,by:S.header.assigneeName,summary:`${I.label}  `}),Je(`Stage2  : ${I.label}`),Me.success(`${I.label}   .`)},[Je,S.header.assigneeName]),Zo=g.useMemo(()=>QK(Ke,kt),[kt,Ke]),Yn=ki==="HOSPITAL"?4:3,Pi=p?Yn-p.missing.length:n0(ht.tests),Ef=Math.round(Math.max(0,Pi)/Yn*100),rd=y?zwe(h?.predictedLabel):void 0,Di=y?qwe(h?.mciBand):void 0,nd=rd??"MCI",Yl=e?.risk===""?"":e?.risk===""?"":"",Xn=rd??Ur,ad=Di,Xl=y?AA(Xn):!1,ho=Math.max(0,Math.floor((Date.now()-new Date(Vo).getTime())/(1e3*60*60*24))),on=Swe(ht.tests,Ke,kt),Fr=[...Zo.mmse&&!(typeof ht.tests.mmse=="number"&&Number.isFinite(ht.tests.mmse))?["MMSE  "]:[],...Zo.cdrOrGds&&!(typeof ht.tests.cdr=="number"&&Number.isFinite(ht.tests.cdr))?["CDR/GDS  "]:[],...Zo.neuroCognitive&&!ht.tests.neuroCognitiveType?["  "]:[],...Zo.specialist&&!ht.tests.specialist?["  "]:[],...v,Ea.trim().length>0?null:"  1 "].filter(Boolean),Qn=Math.max(on,v.length),_a=+(S.linkageStatus!=="BOOKING_DONE")+ +(ht.status!=="COMPLETED"),ns=!!(vs||u?.status==="CLASS_CONFIRMED"||u?.status==="NEXT_STEP_SET"||u?.stage===3),Ii=y||mn.status==="DONE",Ql=Math.max(0,Math.round((Yn+1-Fr.length)/(Yn+1)*100)),as=g.useMemo(()=>{const I=S.linkageStatus!=="NOT_CREATED",V=!!(oa.receivedAt||p?.updatedAt||ht.status!=="NOT_STARTED");return wwe(Qn,I,V)},[S.linkageStatus,ht.status,p?.updatedAt,oa.receivedAt,Qn]),Af=mn.status==="DONE"&&Qn===0?"READY":as,li=y?rd:mn.status==="DONE"?mn.recommendedLabel:void 0,Cf=!!li&&Ur!==li,fu=Cf&&ys.trim().length===0,ci=Ii&&Fr.length===0&&!fu,di=ht.status==="NOT_STARTED"?"  ":ht.status==="IN_PROGRESS"?"  ":ci?" ":"  ",Ks=Ur==="MCI"?RT(e):void 0,Jo=Ii?Hb(Ur,Ks):void 0,mu=rd??Ur,sd=Di??(mu==="MCI"?Ks:void 0),ui=Ii?h?.probs??Hb(mu,sd):void 0,Dr=rt?Nr[rt]??{}:{},go=g.useMemo(()=>rt?dr[rt].filter(I=>!!Dr[I]).map(I=>({key:I,message:Dr[I]})):[],[Dr,dr,rt]),xo=g.useCallback(()=>{if(typeof window>"u")return;(document.getElementById("stage2-modal-step2-input")??document.getElementById("stage2-step2-input"))?.scrollIntoView({behavior:"smooth",block:"start"})},[]),pu=g.useCallback(()=>{Pe("CONTACT_EXECUTION"),ri(!0),!(typeof window>"u")&&window.setTimeout(()=>{document.getElementById("stage3-step2-input")?.scrollIntoView({behavior:"smooth",block:"start"}),Ns("step2PerformedAt")},30)},[Ns]),Ka=g.useCallback(()=>Ti?!1:F!=="RESPONSE_HANDLING"||!xs?!0:window.confirm("     . ?"),[F,Ti,xs]),Ta=g.useCallback(I=>Ti||F==="RESPONSE_HANDLING"&&I!=="RESPONSE_HANDLING"&&!Ka()?!1:($(I),I==="FOLLOW_UP"&&la(!0),!0),[F,Ka,Ti]),fi=g.useCallback(()=>{Ka()&&$(null)},[Ka]),ws=g.useCallback(()=>{Pe(null)},[]),Es=g.useCallback(({actor:I,summary:V,detailMessage:ee,moveToHuman:me=!1})=>{if(ur.status!=="QUEUED"&&ur.status!=="RUNNING")return;const le=vt(),tt=Ci.current+1;Ci.current=tt,ur.idempotencyKey&&_i.current.delete(ur.idempotencyKey),D7.cancelJob(ur.jobId),Ai(Xe=>({...Xe,status:"CANCELED",finishedAt:le,summary:V,lastError:ee})),me&&_(Xe=>{const Se={...Xe.contactExecution,status:"HANDOFF_TO_HUMAN"};return{...Xe,contactExecution:Se,contactFlowSteps:zi(Se,Xe.preTriageResult,Xe.linkageStatus,a)}}),st({type:"AGENT_JOB_CANCELED",at:le,actor:I,caseId:S.header.caseId,attemptNo:ur.attemptNo,idempotencyKey:ur.idempotencyKey??`${S.header.caseId}:0:SMS:${Jc}`,summary:V,detail:ee,by:I}),Je(`Agent   : ${V}${ee?` (${ee})`:""}`)},[ur.attemptNo,ur.idempotencyKey,ur.status,Jc,Je,S.header.caseId]),Oa=g.useCallback(({trigger:I,runAfterMs:V=250,force:ee=!1})=>{if(Hs!=="AI_FIRST"||S.contactExecutor!=="AGENT_SEND_ONLY"||rs!=="PASS"||!ee&&!["NOT_STARTED","RETRY_NEEDED"].includes(S.contactExecution.status)||!ee&&["QUEUED","RUNNING"].includes(ur.status))return!1;const me=S.contactExecution.retryCount+1;if(me>Zc)return Je(`Agent   :   ${Zc} .`),!1;if(!ee&&S.contactExecution.status==="RETRY_NEEDED"&&S.contactExecution.lastSentAt&&Date.now()-new Date(S.contactExecution.lastSentAt).getTime()<oi*60*60*1e3)return!1;const le=iEe(S.header.caseId,me,"SMS",Jc);if(_i.current.has(le))return!1;const tt=D7.queueSms({caseId:S.header.caseId,idempotencyKey:le}),Xe=tt.queuedAt,Se=`${oEe(I)}    `;Ai({status:"QUEUED",attemptNo:me,jobId:tt.jobId,idempotencyKey:le,queuedAt:Xe,startedAt:void 0,finishedAt:void 0,nextRetryAt:V>5e3?new Date(Date.now()+V).toISOString():void 0,channelResult:void 0,lastError:void 0,summary:Se}),_i.current.add(le),st({type:"AGENT_JOB_QUEUED",at:Xe,actor:"system",caseId:S.header.caseId,attemptNo:me,idempotencyKey:le,summary:Se,detail:`trigger=${I}`,by:"system"}),Je(`Agent   : attempt ${me} (${le})`);const pt=Ci.current+1;return Ci.current=pt,window.setTimeout(()=>{if(Ci.current!==pt)return;const or=vt();Ai(gt=>gt.idempotencyKey!==le||gt.status!=="QUEUED"?gt:{...gt,status:"RUNNING",startedAt:or,summary:"Agent    "}),st({type:"AGENT_JOB_STARTED",at:or,actor:"agent",caseId:S.header.caseId,attemptNo:me,idempotencyKey:le,summary:"Agent    ",detail:`attempt ${me}`,by:"agent"}),Je(`Agent   : attempt ${me}`),window.setTimeout(()=>{if(Ci.current!==pt)return;const gt=vt(),lr=lEe({caseRecord:e,gates:S.policyGates,attemptNo:me});if(lr.success){Ai(cn=>({...cn,status:"SUCCEEDED",attemptNo:me,idempotencyKey:le,finishedAt:gt,channelResult:lr.channelResult,lastError:void 0,nextRetryAt:void 0,summary:"Agent    "})),_(cn=>{const zs={...cn.contactExecution,status:"SENT",lastSentAt:gt,retryCount:Math.max(cn.contactExecution.retryCount,me)};return{...cn,contactExecution:zs,contactFlowSteps:zi(zs,cn.preTriageResult,cn.linkageStatus,a)}}),Fe(dt(48)),st({type:"AGENT_SMS_SENT",at:gt,actor:"agent",caseId:S.header.caseId,attemptNo:me,idempotencyKey:le,channelResult:lr.channelResult,summary:"Agent    ",detail:LT[lr.channelResult],by:"agent"}),st({type:"AGENT_JOB_SUCCEEDED",at:gt,actor:"agent",caseId:S.header.caseId,attemptNo:me,idempotencyKey:le,summary:"Agent   ",detail:LT[lr.channelResult],by:"agent"}),Bg({at:gt,result:"SENT_SUCCESS",summary:"Agent    ",recommendationId:sa??void 0,recommendationTitle:aa.find(cn=>cn.id===sa)?.title,actor:"agent"}),Je(`Agent   : attempt ${me} (${le})`);return}const zn=new Date(Date.now()+oi*60*60*1e3).toISOString();Ai(cn=>({...cn,status:"FAILED",attemptNo:me,idempotencyKey:le,finishedAt:gt,channelResult:lr.channelResult,lastError:lr.errorMessage,nextRetryAt:zn,summary:"Agent    "})),_(cn=>{const zs={...cn.contactExecution,status:"RETRY_NEEDED",lastSentAt:gt,retryCount:Math.max(cn.contactExecution.retryCount,me)};return{...cn,contactExecution:zs,contactFlowSteps:zi(zs,cn.preTriageResult,cn.linkageStatus,a)}}),Fe(zn),st({type:"AGENT_JOB_FAILED",at:gt,actor:"agent",caseId:S.header.caseId,attemptNo:me,idempotencyKey:le,summary:"Agent   ",detail:lr.errorMessage,errorCode:lr.errorCode,by:"agent"}),Bg({at:gt,result:"SENT_FAILED",summary:lr.errorMessage??"Agent    ",recommendationId:sa??void 0,recommendationTitle:aa.find(cn=>cn.id===sa)?.title,actor:"agent"}),Je(`Agent   : ${lr.errorMessage??lr.errorCode??"unknown"}`)},1e3)},V),!0},[rs,ur.status,Zc,oi,Jc,Je,e,S.contactExecution.lastSentAt,S.contactExecution.retryCount,S.contactExecution.status,S.contactExecutor,S.header.caseId,S.policyGates,Hs,aa,sa]),_f=g.useCallback(()=>{if(!Oa({trigger:"MANUAL_RETRY_NOW",runAfterMs:200,force:!0})){Me.error("    .");return}Me.success("Agent   .")},[Oa]),hu=g.useCallback(()=>{if(!Oa({trigger:"MANUAL_RETRY_SCHEDULE",runAfterMs:oi*60*60*1e3,force:!0})){Me.error("    .");return}Me.success(` ${oi}  .`)},[oi,Oa]);g.useEffect(()=>{if(!Oi||rs!=="PASS"||S.contactExecution.status!=="NOT_STARTED"&&S.contactExecution.status!=="RETRY_NEEDED")return;const I=S.header.caseId;co.current.has(I)||(co.current.add(I),Oa({trigger:"AUTO_ON_ENTER",runAfterMs:250}))},[rs,S.contactExecution.status,S.header.caseId,Oi,Oa]),g.useEffect(()=>{!uo.current&&Oi&&rs==="PASS"&&Oa({trigger:"AUTO_ON_STRATEGY",runAfterMs:250}),uo.current=Oi},[rs,Oi,Oa]),g.useEffect(()=>{!Oi||rs!=="PASS"||S.contactExecution.status!=="RETRY_NEEDED"||!S.contactExecution.lastSentAt||Date.now()-new Date(S.contactExecution.lastSentAt).getTime()<oi*60*60*1e3||Oa({trigger:"AUTO_ON_RETRY_DUE",runAfterMs:200})},[rs,oi,S.contactExecution.lastSentAt,S.contactExecution.status,Oi,ge,Oa]),g.useEffect(()=>{Oi||ur.status!=="QUEUED"&&ur.status!=="RUNNING"||Es({actor:"system",summary:"     .",moveToHuman:!0})},[ur.status,Es,Oi]);const Mi=g.useCallback(I=>{const V=nm(In,I);if(V){Me.error(V);return}if(o){Pe(I);return}Ta(I)},[o,Ta,In]),wn=g.useCallback(I=>{if(!rt)return;const V=Gs.indexOf(rt),ee=Gs[V+I];if(!ee)return;const me=nm(In,ee);if(me){Me.error(me);return}Pe(ee)},[In,rt,Gs]),Zn=g.useCallback(I=>{if(!F)return;const V=Qo.indexOf(F),ee=Qo[V+I];if(!ee)return;const me=nm(In,ee);if(me){Me.error(me);return}Ta(ee)},[F,Ta,In,Qo]),ln=g.useCallback(()=>{if(!rt||!S.stage3)return;const I=vt();if(rt==="PRECHECK"){if(l){const le=ed,tt=qf(ht.tests,Ke,kt,{strategyMemo:ft.strategyMemo,consentConfirmed:ft.consentConfirmed});if(le.length>0&&(tt.step1Plan=`   : ${le.map(Se=>Se.label).join(", ")}`),Oe(tt)){le.length>0&&TA(le.map(Se=>Se.id),Wo),Me.error("STEP1  /    .");return}_(Se=>{if(!Se.stage3)return Se;const pt=Se.header.effectiveStrategy??Se.preTriageResult?.strategy??"HUMAN_FIRST";return{...Se,preTriageResult:Se.preTriageResult??{strategy:pt,triggers:["STAGE2_PLAN_BASELINE_CONFIRMED"],policyNote:"Stage2      .",confidence:"RULE"},policyGates:Se.policyGates.map(or=>or.key==="CONSENT_OK"||or.key==="PHONE_VERIFIED"||or.key==="CONTACTABLE_TIME_OK"?{...or,status:"PASS",failReason:void 0}:or),stage3:{...Se.stage3,riskReviewedAt:I}}});const Xe=` ${Ke==="HOSPITAL_REFERRAL"?" ":"  "}   ${ie}   ${mt(Ye)}`;st({type:"STAGE2_PLAN_CONFIRMED",at:I,by:S.header.assigneeName,summary:Xe}),Je(`STAGE2_PLAN_CONFIRMED: ${Xe}`),ts({}),Me.success("STEP1   ."),wn(1);return}const V={};if(ft.diffDecisionSet||(V.step1DiffDecision=l?"Stage2     .":"    ."),ft.consentConfirmed||(V.step1Consent="   ."),ft.strategyMemo.trim().length<20&&(V.step1StrategyMemo="  20   ."),Ca("PRECHECK",V)){Me.error("STEP1     .");return}Kn(le=>({...le,PRECHECK:{}})),_(le=>{if(!le.stage3)return le;const tt=[...le.stage3.transitionRisk.series],Xe=tt[tt.length-1],Se={t:I,risk2y:Xe?.risk2y??le.stage3.transitionRisk.risk2y_now,ciLow:Xe?.ciLow,ciHigh:Xe?.ciHigh,source:"manual",event:"REEVAL"},pt=[...tt.slice(-11),Se],or=le.header.effectiveStrategy??le.preTriageResult?.strategy??"HUMAN_FIRST";return{...le,preTriageResult:le.preTriageResult??{strategy:or,triggers:["STAGE3_REVIEW_BASELINE_CONFIRMED"],policyNote:"Stage3      .",confidence:"RULE"},policyGates:le.policyGates.map(gt=>gt.key==="CONSENT_OK"||gt.key==="PHONE_VERIFIED"||gt.key==="CONTACTABLE_TIME_OK"?{...gt,status:"PASS",failReason:void 0}:gt),stage3:{...le.stage3,riskReviewedAt:I,transitionRisk:{...le.stage3.transitionRisk,updatedAt:I,series:pt}}}});const ee=[ft.diffNeeded?l?"Stage2  ":" ":l?"Stage2  ":" ",ft.caregiverNeeded?"  ":null,ft.consentConfirmed?"  ":null,ft.diffDecisionReason.trim()?`:${ft.diffDecisionReason.trim()}`:null].filter(Boolean).join(", "),me=`      ${ft.priority}${ee?`   ${ee}`:""}  : ${ft.strategyMemo.slice(0,80)}`;st({type:"RISK_REVIEWED",at:I,by:S.header.assigneeName,summary:me}),Je(`${l?"Stage2   ":"Stage3  "} : ${ee||" "}  ${ft.strategyMemo}`),bt({at:I,memo:ft.strategyMemo,nextAction:l?"UPDATE_PLAN":"RECOMMEND_DIFF"}),Me.success(l?"STEP1   .":"STEP1  ."),wn(1);return}if(rt==="CONTACT_EXECUTION"){if(l){const ee=qf(ht.tests,Ke,kt);if(ia&&Dn.trim().length<5&&(ee.manualEditReason="   5  ."),Oe(ee)){Me.error("STEP2 /    .");return}_(le=>le.stage3?{...le,stage3:{...le.stage3,diffPathStatus:"SCHEDULED"}}:le),ru();const me=`    (${n0(ht.tests,ki)}/${Yn})`;st({type:"STAGE2_RESULTS_RECORDED",at:I,by:S.header.assigneeName,summary:me}),Je(`STAGE2_RESULTS_RECORDED: ${me}`),ts({}),Me.success("STEP2    ."),wn(1);return}if(lu>0){Me.error("     .");return}const V={};if(!te.trim()&&!Re.consultStarted&&(V.step2CallRecord="  (   ) ."),We.preferredHospital.trim()||(V.step2Hospital="/   ."),ft.diffNeeded&&!We.testBiomarker&&!We.testBrainImaging&&!We.testOther&&(V.step2TestSelection="   1  ."),We.bookingAt||(V.step2BookingAt="   ."),Re.bookingConfirmed||(V.step2BookingAt="     ."),ft.diffNeeded&&(We.resultPerformedAt||(V.step2PerformedAt="    ."),We.biomarkerResultText?.trim()||(V.step2BiomarkerResult="   ."),We.imagingResultText?.trim()||(V.step2ImagingResult="   ."),We.resultSummary.trim()||(V.step2ResultSummary="   .")),Object.keys(V).length>0){ft.diffNeeded&&(V.step2PerformedAt||V.step2BiomarkerResult||V.step2ImagingResult||V.step2ResultSummary)&&ri(!0),Ca("CONTACT_EXECUTION",V),Me.error("STEP2     .");return}if(Kn(ee=>({...ee,CONTACT_EXECUTION:{}})),!Yc){Me.error(l?"       STEP3   .":"    STEP3( /)   .");return}Je(`${l?"":""}   : ${S.stage3.diffPathStatus}`),Me.success(l?"STEP2    .":"STEP2  ."),wn(1);return}if(rt==="RESPONSE_HANDLING"){if(l){const ee=qf(ht.tests,Ke,kt,{rationale:Ea,recommendedLabel:li,selectedLabel:Ur,overrideReason:ys});if(Oe(ee)){Me.error("STEP3     .");return}if(!ci){Me.error("   .");return}_(le=>le.stage3?{...le,stage3:{...le.stage3,reevalStatus:"SCHEDULED"}}:le),nu();const me=`  ${Ur}${Ur==="MCI"?`(${Ks??"-"})`:""}`;st({type:"STAGE2_CLASS_CONFIRMED",at:I,by:S.header.assigneeName,summary:me}),Je(`STAGE2_CLASS_CONFIRMED: ${me}`),ts({}),Me.success("STEP3   ."),wn(1);return}if(!Yc){Me.error(l?"STEP2      .":" /      .");return}if(!Dt.memo.trim()){Me.error(l?"(MMSE/CDR)      .":"      .");return}const V=l?`  : ${Dt.memo.slice(0,120)}`:`  : ${Dt.memo.slice(0,120)}   : ${lb[Dt.nextAction]}`;fo({summary:V,nextAction:l?"UPDATE_PLAN":Dt.nextAction,silentToast:!0}),Me.success(l?"STEP3   .":"STEP3    ."),wn(1);return}if(l){const V=qf(ht.tests,Ke,kt,{requireNextStep:!0,hasNextStep:!!ht.nextStep});if(Oe(V)){Me.error("STEP4    .");return}_(me=>me.stage3?{...me,stage3:{...me.stage3,planUpdatedAt:I,headerMeta:{...me.stage3.headerMeta,planStatus:"ACTIVE",opsStatus:ht.nextStep==="FOLLOWUP_2Y"?"TRACKING":"LINKAGE_PENDING",nextTrackingContactAt:St.nextTrackingAt??me.stage3.headerMeta.nextTrackingContactAt}}}:me);const ee=ht.nextStep==="FOLLOWUP_2Y"?" (2  )":ht.nextStep==="STAGE3"?"MCI  Stage3 ":"  ";st({type:"STAGE2_NEXT_STEP_SET",at:I,by:S.header.assigneeName,summary:ee}),Je(`STAGE2_NEXT_STEP_SET: ${ee}`),ts({}),Me.success("STEP4    ."),ws();return}if(!Vg){Me.error("   1     .");return}if(!St.nextTrackingAt){Me.error("      .");return}_(V=>V.stage3?{...V,stage3:{...V.stage3,planUpdatedAt:I,headerMeta:{...V.stage3.headerMeta,planStatus:"ACTIVE",opsStatus:"TRACKING",nextTrackingContactAt:St.nextTrackingAt}}}:V),st({type:"PLAN_UPDATED",at:I,by:S.header.assigneeName,summary:"    ."}),st({type:"NEXT_TRACKING_SET",at:I,by:S.header.assigneeName,nextAt:St.nextTrackingAt,summary:` D-${St.reminderDaysBefore} / ${St.reminderTime}   ${St.retryCount}`}),Je(`Stage3  () :   ${mt(St.nextTrackingAt)}   D-${St.reminderDaysBefore}`),Me.success("STEP4  () ."),ws()},[ws,S.header.assigneeName,S.stage3,fo,wn,Yc,Vg,lu,ft.caregiverNeeded,ft.consentConfirmed,ft.diffDecisionSet,ft.diffNeeded,ft.priority,ft.resultLinkedChecked,ft.sensitiveHistory,ft.strategyMemo,ft.diffDecisionReason,Dt.memo,Dt.nextAction,rt,St.nextTrackingAt,St.reminderDaysBefore,St.reminderTime,St.retryCount,We.bookingAt,We.preferredHospital,We.testBiomarker,We.testBrainImaging,We.testOther,We.resultPerformedAt,We.resultSummary,We.biomarkerResultText,We.imagingResultText,Re.bookingConfirmed,Re.consultStarted,ci,Ur,ys,ht,Ks,ie,ia,Dn,li,kt,Ke,Qn,Ye,Oe,Ca,nu,l,ru,te]),mi=g.useCallback(async()=>{if(!F)return;const I=vt();if(F==="PRECHECK"){if(S.policyGates.filter(me=>me.key!=="GUARDIAN_OPTIONAL"&&me.status!=="PASS").length>0){Me.error("        .");return}st({type:"MESSAGE_SENT",at:I,summary:"STAGE1_GATE_DONE     ",by:S.header.assigneeName}),Je("STAGE1_GATE_DONE:    "),Me.success("STEP1  ."),Zn(1);return}if(F==="CONTACT_EXECUTION"){if(S.contactExecution.status==="NOT_STARTED"){Me.error("       .");return}st({type:"MESSAGE_SENT",at:I,summary:"STAGE1_CONTACT_ATTEMPT    ",by:S.header.assigneeName}),Je("STAGE1_CONTACT_ATTEMPT:   "),Me.success("STEP2  ."),Zn(1);return}if(F==="RESPONSE_HANDLING"){if(!!!(S.contactExecution.lastOutcomeCode||S.contactExecution.lastResponseAt)){Me.error("       .");return}st({type:"MESSAGE_SENT",at:I,summary:`STAGE1_RESPONSE_RECORDED  ${S.contactExecution.lastOutcomeCode?vl[S.contactExecution.lastOutcomeCode].label:" "} `,by:S.header.assigneeName}),Je("STAGE1_RESPONSE_RECORDED:    "),Me.success("STEP3  ."),Zn(1);return}vf()&&(st({type:"MESSAGE_SENT",at:I,summary:"STAGE1_DECISION_DONE    ",by:S.header.assigneeName}),Je("STAGE1_DECISION_DONE:   "),Me.success("STEP4  ."),fi())},[F,Je,fi,S.contactExecution.lastOutcomeCode,S.contactExecution.lastResponseAt,S.contactExecution.status,S.header.assigneeName,S.policyGates,vf,Zn]),ex=g.useCallback(I=>{const V=jEe[I];Mi(V)},[Mi]),tx=g.useCallback(async I=>{if(!(await Ig(I)).ok){Me.error("   .");return}const ee=Gl.find(me=>me.idempotencyKey===I);ee&&(st({type:"CALENDAR_SYNC",at:vt(),status:"SUCCESS",eventType:ee.eventType,title:ee.title,scheduledAt:ee.scheduledAt,idempotencyKey:ee.idempotencyKey,by:S.header.assigneeName}),Je(`   : ${ee.title}`)),Me.success("  .")},[Je,Gl,S.header.assigneeName,Ig]);if(g.useEffect(()=>{const I=a==="stage2"?Fr.length:rh,V=a==="stage2"?Math.max(0,4-Pi):po,ee=a==="stage3"&&l?Math.max(0,Math.min(100,Math.round(S.header.sla.level==="OVERDUE"?76:S.header.sla.level==="DUE_SOON"?58:32+Math.max(0,I*4+V*3)))):void 0,me=ee==null?"MID":ee>=70?"HIGH":ee>=45?"MID":"LOW",le=ee==null?"FLAT":ee>=70?"UP":ee>=45?"VOLATILE":"DOWN";t?.({contactMode:wf,effectiveMode:Hs,slaLevel:S.header.sla.level,qualityScore:S.header.dataQuality.score,missingCount:I,warningCount:V,lastUpdatedAt:S.timeline[0]?.at,nextActionLabel:a==="stage2"?di:void 0,stage2Meta:a==="stage2"||l?{diagnosisStatus:ht.status,completionPct:Ef,requiredDataPct:Ql,completedCount:Pi,classificationLabel:y?Xn:"",modelAvailable:y,missingEvidence:v,mciStage:y&&Xn==="MCI"?sd:void 0,stage3EntryNeeded:Xl,enteredAt:Fs,targetAt:Vo,delayDays:ho,nextActionLabel:di}:void 0,stage3Meta:a==="stage3"&&S.stage3?{opsStatus:S.stage3.headerMeta.opsStatus,risk2yNowPct:l?ee??0:N?_o(S.stage3.transitionRisk.risk2y_now):void 0,risk2yLabel:l?me:N?xp(S.stage3.transitionRisk.risk2y_now):void 0,modelAvailable:l?y:N,missingEvidence:l?v:j,trend:l?le:S.stage3.transitionRisk.trend,modelVersion:l?"stage2-ops-v1.0":S.stage3.transitionRisk.modelVersion,riskUpdatedAt:S.stage3.transitionRisk.updatedAt,nextReevalAt:S.stage3.headerMeta.nextReevalAt,nextTrackingContactAt:S.stage3.headerMeta.nextTrackingContactAt,nextProgramAt:S.stage3.headerMeta.nextProgramAt,diffPathStatus:S.stage3.diffPathStatus,planStatus:S.stage3.headerMeta.planStatus,trackingCycleDays:S.stage3.headerMeta.trackingCycleDays,churnRisk:l?S.header.sla.level==="OVERDUE"?"HIGH":S.header.sla.level==="DUE_SOON"?"MID":"LOW":S.stage3.headerMeta.churnRisk}:void 0})},[S.header.sla.level,S.header.dataQuality.score,S.stage3,S.timeline,Hs,rh,a,t,Pi,Ef,Xn,sd,ht.status,Fs,Fr.length,di,Xl,Vo,ho,y,N,v,j,wf,po,l]),g.useEffect(()=>{if(r){if(a!=="stage3"){r(null);return}r(()=>Jp())}},[a,r,Jp]),g.useEffect(()=>{Ga&&Or({owner:Ga.execution?.owner??S.header.assigneeName,dueDate:Ga.execution?.dueDate,institution:Ga.execution?.institution,method:Ga.execution?.method??"",status:Ga.execution?.status??"PLANNED",note:Ga.execution?.note??""})},[Ga,S.header.assigneeName]),i){const I=[{key:"STEP 1",title:"  ",status:S.reservationInfo?.scheduledAt?"DONE":S.linkageStatus!=="NOT_CREATED"?"IN_PROGRESS":"PENDING",reason:S.reservationInfo?.scheduledAt?` ${mt(S.reservationInfo.scheduledAt)}`:"/   "},{key:"STEP 2",title:"  ",status:Pi>=Yn?"DONE":Pi>0?"IN_PROGRESS":"PENDING",reason:` ${Yn}  ${Pi} `},{key:"STEP 3",title:" ",status:vs?"DONE":ci?"IN_PROGRESS":"BLOCKED",reason:vs?"  ":ci?" ":" "},{key:"STEP 4",title:"  ",status:ht.nextStep?"DONE":vs?"IN_PROGRESS":"PENDING",reason:ht.nextStep?` ${ht.nextStep}`:"   "}],V=[{label:" ",done:!!ht.tests.specialist,sub:ht.tests.specialist?"  ":"  "},{label:"MMSE",done:ki==="CENTER"?!0:typeof ht.tests.mmse=="number",sub:ki==="CENTER"&&typeof ht.tests.mmse!="number"?"   :  ":typeof ht.tests.mmse=="number"?` ${ht.tests.mmse}`:""},{label:"CDR or GDS",done:typeof ht.tests.cdr=="number",sub:typeof ht.tests.cdr=="number"?` ${ht.tests.cdr}`:""},{label:"",done:!!ht.tests.neuroCognitiveType,sub:ht.tests.neuroCognitiveType??" "}];return n.jsxs("div",{className:"space-y-5",children:[n.jsxs("div",{className:"grid grid-cols-1 gap-4 xl:grid-cols-12",children:[n.jsxs("aside",{className:"space-y-4 xl:col-span-3",children:[n.jsxs("section",{className:"rounded-xl border border-slate-200 bg-white p-4 shadow-sm",children:[n.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"Stage1  "}),n.jsxs("div",{className:"mt-3 space-y-2 text-xs",children:[n.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 px-3 py-2",children:[n.jsx("p",{className:"text-[11px] text-slate-500",children:" "}),n.jsx("p",{className:"mt-1 font-semibold text-slate-900",children:S.riskEvidence.topFactors[0]?.title??"   "})]}),n.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 px-3 py-2",children:[n.jsx("p",{className:"text-[11px] text-slate-500",children:" "}),n.jsxs("p",{className:"mt-1 font-semibold text-slate-900",children:[Wl,""]})]}),n.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 px-3 py-2",children:[n.jsx("p",{className:"text-[11px] text-slate-500",children:" "}),n.jsx("p",{className:"mt-1 font-semibold text-slate-900",children:Xn===""?"":""})]})]})]}),n.jsxs("section",{className:"rounded-xl border border-slate-200 bg-white p-4 shadow-sm",children:[n.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"Stage2   Scorecard"}),n.jsxs("div",{className:"mt-3 space-y-2 text-xs",children:[V.map(ee=>n.jsxs("article",{className:"rounded-md border border-slate-200 bg-slate-50 px-3 py-2",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsx("p",{className:"font-semibold text-slate-900",children:ee.label}),n.jsx("span",{className:de("rounded-md border px-2 py-0.5 text-[10px] font-semibold",ee.done?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-amber-200 bg-amber-50 text-amber-700"),children:ee.done?"DONE":"MISSING"})]}),n.jsx("p",{className:"mt-1 text-[11px] text-slate-600",children:ee.sub})]},ee.label)),n.jsxs("p",{className:"rounded-md border border-slate-200 bg-white px-2 py-1 text-[11px] text-slate-700",children:[" ",Pi,"/",Yn," (",Ef,"%)"]})]})]}),n.jsxs("section",{className:"rounded-xl border border-slate-200 bg-white p-4 shadow-sm",children:[n.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"Stage2   "}),y?n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"mt-3 text-xs text-slate-500",children:" "}),n.jsxs("p",{className:"mt-1 text-lg font-bold text-slate-900",children:[rd??"",rd==="MCI"&&Di?` (${Di})`:""]}),n.jsx("div",{className:"mt-3 space-y-2 text-xs",children:[{key:"NORMAL",label:"NORMAL",pct:oc(ui?.NORMAL)??0,tone:"bg-emerald-500"},{key:"MCI",label:"MCI",pct:oc(ui?.MCI)??0,tone:"bg-blue-500"},{key:"AD",label:"AD",pct:oc(ui?.AD)??0,tone:"bg-rose-500"}].map(ee=>n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-[11px] font-semibold text-slate-700",children:ee.label}),n.jsxs("span",{className:"text-[11px] text-slate-600",children:[ee.pct,"%"]})]}),n.jsx("div",{className:"mt-1 h-2 rounded-full bg-slate-100",children:n.jsx("div",{className:de("h-2 rounded-full",ee.tone),style:{width:`${ee.pct}%`}})})]},ee.key))}),n.jsxs("div",{className:"mt-3 rounded-md border border-slate-200 bg-slate-50 px-2 py-2 text-[11px] text-slate-700",children:[n.jsx("p",{children:"    "}),n.jsx("p",{children:"  ANN   "})]})]}):n.jsx("div",{className:"mt-3",children:n.jsx(Du,{stage:2,missing:v,onOpenStep:xo})})]})]}),n.jsxs("section",{className:"space-y-4 xl:col-span-6",children:[n.jsxs("section",{className:"rounded-xl border border-slate-200 bg-white p-4 shadow-sm",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"Stage2 Step Workflow"}),n.jsxs("span",{className:"text-[11px] text-slate-500",children:[" ",I.filter(ee=>ee.status==="DONE").length,"/4"]})]}),n.jsx("div",{className:"mt-3 grid grid-cols-1 gap-2 md:grid-cols-2",children:I.map(ee=>n.jsxs("article",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsx("p",{className:"text-[11px] font-semibold text-slate-500",children:ee.key}),n.jsx("span",{className:de("rounded-md border px-2 py-0.5 text-[10px] font-semibold",ee.status==="DONE"?"border-emerald-200 bg-emerald-50 text-emerald-700":ee.status==="IN_PROGRESS"?"border-blue-200 bg-blue-50 text-blue-700":ee.status==="BLOCKED"?"border-rose-200 bg-rose-50 text-rose-700":"border-slate-200 bg-white text-slate-600"),children:ee.status})]}),n.jsx("p",{className:"mt-1 text-sm font-bold text-slate-900",children:ee.title}),n.jsx("p",{className:"mt-1 text-[11px] text-slate-600",children:ee.reason})]},ee.key))})]}),n.jsxs("section",{id:"stage2-step2-input",className:"rounded-xl border border-slate-200 bg-white p-4 shadow-sm",children:[n.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"STEP 2.   "}),n.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-2 md:grid-cols-2",children:[n.jsxs("label",{className:"text-[11px] text-slate-600",children:["MMSE ",n.jsx("input",{value:ht.tests.mmse??"",onChange:ee=>Jr(me=>({...me,tests:{...me.tests,mmse:ee.target.value===""?void 0:Number(ee.target.value)}})),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-xs outline-none focus:border-blue-300"})]}),n.jsxs("label",{className:"text-[11px] text-slate-600",children:["CDR ",n.jsx("input",{value:ht.tests.cdr??"",onChange:ee=>Jr(me=>({...me,tests:{...me.tests,cdr:ee.target.value===""?void 0:Number(ee.target.value)}})),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-xs outline-none focus:border-blue-300"})]}),n.jsxs("label",{className:"text-[11px] text-slate-600",children:["",n.jsxs("select",{value:ht.tests.neuroCognitiveType??"",onChange:ee=>Jr(me=>({...me,tests:{...me.tests,neuroCognitiveType:ee.target.value||void 0}})),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-xs outline-none focus:border-blue-300",children:[n.jsx("option",{value:"",children:""}),n.jsx("option",{value:"CERAD-K",children:"CERAD-K"}),n.jsx("option",{value:"SNSB-II",children:"SNSB-II"}),n.jsx("option",{value:"SNSB-C",children:"SNSB-C"}),n.jsx("option",{value:"LICA",children:"LICA"})]})]}),n.jsxs("label",{className:"text-[11px] text-slate-600",children:[" ",n.jsxs("select",{value:ht.tests.specialist?"DONE":"MISSING",onChange:ee=>Jr(me=>({...me,tests:{...me.tests,specialist:ee.target.value==="DONE"}})),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-xs outline-none focus:border-blue-300",children:[n.jsx("option",{value:"MISSING",children:"MISSING"}),n.jsx("option",{value:"DONE",children:"DONE"})]})]})]}),n.jsxs("button",{onClick:ru,className:"mt-3 inline-flex items-center gap-1 rounded-md bg-[#163b6f] px-3 py-1.5 text-xs font-semibold text-white hover:bg-[#112f5a]",children:[n.jsx(Zs,{size:13}),"   "]})]}),n.jsxs("section",{className:"rounded-xl border border-slate-200 bg-white p-4 shadow-sm",children:[n.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"STEP 3.  "}),n.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-2 md:grid-cols-2",children:[n.jsxs("label",{className:"text-[11px] text-slate-600",children:["  ",n.jsxs("select",{value:Ur,onChange:ee=>Ei(ee.target.value),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-xs outline-none focus:border-blue-300",children:[n.jsx("option",{value:"",children:""}),n.jsx("option",{value:"MCI",children:"MCI"}),n.jsx("option",{value:"",children:""})]})]}),n.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 px-3 py-2 text-[11px] text-slate-700",children:[n.jsx("p",{className:"font-semibold",children:"MCI (ANN)"}),n.jsx("p",{className:"mt-1",children:Ur==="MCI"?Ks??" ":"-"})]})]}),y&&Jo?n.jsx("div",{className:"mt-2 space-y-2 text-xs",children:[{key:"NORMAL",label:"NORMAL",pct:oc(Jo.NORMAL)??0,tone:"bg-emerald-500"},{key:"MCI",label:"MCI",pct:oc(Jo.MCI)??0,tone:"bg-blue-500"},{key:"AD",label:"AD",pct:oc(Jo.AD)??0,tone:"bg-rose-500"}].map(ee=>n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-[11px] font-semibold text-slate-700",children:ee.label}),n.jsxs("span",{className:"text-[11px] text-slate-600",children:[ee.pct,"%"]})]}),n.jsx("div",{className:"mt-1 h-2 rounded-full bg-slate-100",children:n.jsx("div",{className:de("h-2 rounded-full",ee.tone),style:{width:`${ee.pct}%`}})})]},ee.key))}):n.jsx("div",{className:"mt-3",children:n.jsx(Du,{stage:2,missing:v,onOpenStep:xo})}),n.jsxs("label",{className:"mt-3 block text-[11px] text-slate-600",children:["  1()",n.jsx("textarea",{value:Ea,onChange:ee=>X(ee.target.value),className:"mt-1 h-20 w-full rounded-md border border-gray-200 px-2 py-1 text-xs outline-none focus:border-blue-300"})]}),n.jsxs("button",{onClick:nu,disabled:!ci,className:"mt-3 inline-flex items-center gap-1 rounded-md bg-[#163b6f] px-3 py-1.5 text-xs font-semibold text-white hover:bg-[#112f5a] disabled:opacity-50",children:[n.jsx(Ol,{size:13}),"  "]}),ci?null:n.jsx("div",{className:"mt-2 rounded-md border border-amber-200 bg-amber-50 px-3 py-2 text-[11px] text-amber-800",children:Fr.map(ee=>n.jsxs("p",{children:["- ",ee]},ee))})]}),n.jsxs("section",{className:"rounded-xl border border-slate-200 bg-white p-4 shadow-sm",children:[n.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"STEP 4.   "}),n.jsxs("p",{className:"mt-2 text-[11px] text-slate-600",children:["    .  : ",y?Xn:"",y&&Xn==="MCI"&&ad?` (${ad})`:""]}),n.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-2 md:grid-cols-3",children:[n.jsx("button",{onClick:()=>Kl("FOLLOWUP_2Y","  2    "),disabled:!vs||Xn!=="",className:"rounded-md border border-slate-200 bg-slate-50 px-2 py-1.5 text-[11px] font-semibold text-slate-700 hover:bg-white disabled:opacity-50",children:"  2  "}),n.jsx("button",{onClick:()=>Kl("STAGE3","MCI/  Stage3  "),disabled:!vs||!AA(Xn),className:"rounded-md border border-blue-200 bg-blue-50 px-2 py-1.5 text-[11px] font-semibold text-blue-700 hover:bg-blue-100 disabled:opacity-50",children:"Stage3 "}),n.jsx("button",{onClick:()=>Kl("DIFF_PATH","    "),disabled:!vs||Xn!=="",className:"rounded-md border border-rose-200 bg-rose-50 px-2 py-1.5 text-[11px] font-semibold text-rose-700 hover:bg-rose-100 disabled:opacity-50",children:" "})]})]})]}),n.jsxs("aside",{className:"space-y-4 xl:col-span-3",children:[n.jsxs("section",{className:"rounded-xl border border-slate-200 bg-white p-4 shadow-sm",children:[n.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"  "}),n.jsxs("div",{className:"mt-3 space-y-2",children:[n.jsxs("label",{className:"text-[11px] text-slate-600",children:[" ",n.jsxs("select",{value:ie,onChange:ee=>De(ee.target.value),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-xs outline-none focus:border-blue-300",children:[n.jsx("option",{value:" ",children:" "}),n.jsx("option",{value:"",children:""}),n.jsx("option",{value:" ",children:" "}),n.jsx("option",{value:" ",children:" "})]})]}),n.jsxs("label",{className:"text-[11px] text-slate-600",children:[" ",n.jsx("input",{type:"datetime-local",value:fc(Ye),onChange:ee=>Ze(mc(ee.target.value)||Ye),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-xs outline-none focus:border-blue-300"})]}),n.jsxs("button",{onClick:Uc,className:"inline-flex w-full items-center justify-center gap-1 rounded-md bg-[#163b6f] px-3 py-1.5 text-xs font-semibold text-white hover:bg-[#112f5a]",children:[n.jsx(_C,{size:13}),"  "]}),n.jsxs("button",{onClick:()=>{st({type:"CAL_EVENT_CREATED",at:vt(),scheduledAt:Ye,summary:"Stage2    ",by:S.header.assigneeName}),Je(` : ${mt(Ye)}`),Me.success("   .")},className:"inline-flex w-full items-center justify-center gap-1 rounded-md border border-slate-200 bg-slate-50 px-3 py-1.5 text-xs font-semibold text-slate-700 hover:bg-white",children:[n.jsx(O8,{size:13}),"  "]})]})]}),n.jsxs("section",{className:"rounded-xl border border-slate-200 bg-white p-4 shadow-sm",children:[n.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"  "}),n.jsxs("div",{className:"mt-2 space-y-1 text-[11px] text-slate-600",children:[n.jsx("p",{children:"MMSE:  24     ."}),n.jsx("p",{children:"CDR: 0(), 0.5(MCI ), 1 ( )  ."})]})]}),n.jsxs("section",{className:"rounded-xl border border-slate-200 bg-white p-4 shadow-sm",children:[n.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"ANN   "}),n.jsxs("div",{className:"mt-2 space-y-1 text-[11px] text-slate-600",children:[n.jsx("p",{children:"      ."}),n.jsx("p",{children:" 10%       ."}),n.jsx("p",{children:" /       ."})]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-[minmax(0,1.4fr)_minmax(0,1fr)]",children:[n.jsx(OA,{timeline:Yp,filter:k,onFilterChange:M,listClassName:"max-h-[360px] overflow-y-auto pr-1",mode:a,stage2OpsView:l}),n.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[n.jsx("h3",{className:"text-sm font-bold text-slate-900",children:" "}),n.jsx("div",{className:"mt-3 max-h-[360px] space-y-2 overflow-y-auto pr-1",children:O.length===0?n.jsx("p",{className:"rounded-md border border-slate-200 bg-slate-50 px-3 py-2 text-[11px] text-slate-500",children:"  ."}):O.map(ee=>n.jsxs("article",{className:"rounded-md border border-slate-200 bg-slate-50 px-3 py-2",children:[n.jsx("p",{className:"text-[11px] text-slate-500",children:ee.at}),n.jsx("p",{className:"text-xs font-semibold text-slate-800",children:ee.actor}),n.jsx("p",{className:"text-[11px] text-slate-700",children:ee.message})]},ee.id))})]})]})]})}return n.jsxs("div",{className:"space-y-5",children:[n.jsxs("div",{className:"grid grid-cols-1 gap-4 xl:grid-cols-12",children:[n.jsxs("section",{className:"space-y-4 xl:col-span-8",children:[n.jsx(JEe,{scoreSummary:S.scoreSummary,modelPriorityValue:Wl,modelPriorityMeta:jf,contactPriority:Wg,interventionLevel:S.interventionLevel,stage3Risk:pN,stage3DiffPathStatus:S.stage3?.diffPathStatus,stage3RiskReviewedAt:S.stage3?.riskReviewedAt,onStage3MarkRiskReviewed:fo,mode:a,stage2OpsView:l,stage2ResultLabel:mu,stage2MciStage:sd,stage2Probs:ui,stage2DiagnosisStatus:ht.status,stage2CompletionPct:Ef,stage2RequiredDataPct:Ql,stage2NextDiagnosisAt:S.stage3?.headerMeta.nextReevalAt,stage2QualityScore:S.header.dataQuality.score,stage2WaitingCount:_a,stage2ResultMissingCount:Qn,stage2ClassificationConfirmed:ns,stage2ModelAvailable:y,stage3ModelAvailable:N,stage2MissingEvidence:v,stage3MissingEvidence:j,onOpenStage2Input:xo,onOpenStage3Input:pu}),n.jsx(MEe,{flowCards:In,onAction:ex,mode:a,stage2OpsView:l}),o?null:n.jsx(REe,{strategy:Hs,strategyBadge:wf,contactExecutor:S.contactExecutor,executionStatus:S.contactExecution.status,lastSentAt:S.contactExecution.lastSentAt,lastOutcome:S.contactExecution.lastOutcomeCode,retryCount:S.contactExecution.retryCount,linkageStatus:S.linkageStatus,memoCount:O.length,lastContactAt:S.contactExecution.lastResponseAt??S.contactExecution.lastSentAt,timelineCount:S.timeline.length,preTriage:S.preTriageResult,riskGuardrails:S.header.riskGuardrails,onOpenStrategyOverride:()=>Mt(!0),mode:a}),o?n.jsxs(n.Fragment,{children:[n.jsxs("section",{className:"rounded-xl border border-indigo-200 bg-indigo-50 p-4 shadow-sm",children:[n.jsx("h3",{className:"text-sm font-bold text-indigo-900",children:" "}),n.jsx("p",{className:"mt-1 text-[11px] text-indigo-800",children:l?"Step    ///   .":"Step    //   .      ."}),n.jsxs("div",{className:"mt-3 flex flex-wrap gap-2 text-[11px]",children:[n.jsxs("span",{className:"rounded-md border border-indigo-300 bg-white px-2 py-1",children:[l?"  ":" "," ",mt(S.stage3?.headerMeta.nextReevalAt)]}),n.jsxs("span",{className:"rounded-md border border-indigo-300 bg-white px-2 py-1",children:[l?" ":""," ",Cv(S.stage3?.headerMeta.planStatus??"ACTIVE")]}),n.jsxs("span",{className:"rounded-md border border-indigo-300 bg-white px-2 py-1",children:[l?"  ":" "," ",S.stage3?.headerMeta.trackingCycleDays??21,""]})]})]}),n.jsx(kA,{level:S.interventionLevel,statusLabel:S.header.statusLabel,guides:Vp,onChangeLevel:zl,onHold:()=>Hc(""),onExclude:()=>Hc(" "),mode:a})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[n.jsx(F7,{mode:a,stage2OpsView:l,contactExecutor:S.contactExecutor,executionStatus:S.contactExecution.status,strategy:Hs,lastSentAt:S.contactExecution.lastSentAt,sensitivityFlags:Bc,latestAgentLog:S.agentExecutionLogs[0],selectedRecommendation:ii,agentJob:ur,gateStatus:rs,onSwitchExecutor:yf,onOpen:()=>Mi("CONTACT_EXECUTION"),onRetryNow:_f,onScheduleRetry:hu}),n.jsx(B7,{linkageStatus:S.linkageStatus,reservationInfo:S.reservationInfo,locked:Qg,lockReason:Qg?"STEP4    /  .":void 0,onOpenStep4:()=>Mi("FOLLOW_UP"),onAction:iu})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[n.jsx(_A,{expanded:hr,onToggle:()=>Tr(I=>!I),executionStatus:S.contactExecution.status,lastSentAt:S.contactExecution.lastSentAt,assigneeName:S.header.assigneeName,selectedOutcomeCode:yr,onSelectOutcomeCode:ql,reasonTags:sn,onToggleReasonTag:Yo,rejectReasonDraft:fr,onRejectReasonDraftChange:Nf,noResponsePlanDraft:Ba,onNoResponsePlanDraftChange:zc,outcomeNote:zr,onOutcomeNoteChange:ou,isSaving:Ti,submitError:Fc,validationError:wi,onClearError:si,onReset:qc,onConfirm:Wc,hasUnsavedChanges:xs,lastSavedAt:Ul,onOpenHandoffMemo:()=>la(!0),mode:a}),n.jsx(U7,{expanded:ai||!!S.contactExecution.handoffMemo,onToggle:()=>la(I=>!I),memoText:Ht,onMemoChange:ca,onSave:()=>{Je(`  : ${Ht.slice(0,80)}...`),Me.success("  ."),la(!1)},mode:a})]}),n.jsx(kA,{level:S.interventionLevel,statusLabel:S.header.statusLabel,guides:Vp,onChangeLevel:zl,onHold:()=>Hc(""),onExclude:()=>Hc(" "),mode:a})]})]}),n.jsxs("aside",{className:"space-y-4 xl:col-span-4 xl:sticky xl:top-0 self-start",children:[o?n.jsxs(n.Fragment,{children:[n.jsxs("section",{className:"rounded-xl border border-indigo-200 bg-white p-4 shadow-sm",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsx("h3",{className:"text-sm font-bold text-slate-900",children:l?"   ":"  "}),n.jsx("button",{onClick:()=>Mi("CONTACT_EXECUTION"),className:"rounded-md border border-indigo-200 bg-indigo-50 px-2 py-1 text-[11px] font-semibold text-indigo-700 hover:bg-indigo-100",children:"STEP2  "})]}),n.jsxs("p",{className:"mt-1 text-[11px] text-gray-500",children:[l?"STEP2/3 ":""," ",S.stage3?.diffPathStatus??"NONE","    ",lu," "," ",l?"":" "," ",mt(S.stage3?.headerMeta.nextReevalAt)]}),n.jsx("p",{className:"mt-2 text-[10px] text-indigo-700",children:l?" :    /        .":" :   /        ."})]}),n.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[n.jsxs("button",{onClick:()=>jn(I=>!I),className:"flex w-full items-center justify-between text-left",children:[n.jsxs("span",{className:"text-sm font-bold text-slate-900",children:["/  (",l?"/":"/",")"]}),n.jsx("span",{className:"text-[11px] font-semibold text-slate-500",children:Mr?"":""})]}),n.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:l?" / /   .":"      ."}),Mr?n.jsxs("div",{className:"mt-3",children:[n.jsx(F7,{mode:a,stage2OpsView:l,contactExecutor:S.contactExecutor,executionStatus:S.contactExecution.status,strategy:Hs,lastSentAt:S.contactExecution.lastSentAt,sensitivityFlags:Bc,latestAgentLog:S.agentExecutionLogs[0],selectedRecommendation:ii,agentJob:ur,gateStatus:rs,onSwitchExecutor:yf,onOpen:()=>Mi("CONTACT_EXECUTION"),onRetryNow:_f,onScheduleRetry:hu}),n.jsx("div",{className:"mt-3",children:n.jsx(_A,{expanded:hr,onToggle:()=>Tr(I=>!I),executionStatus:S.contactExecution.status,lastSentAt:S.contactExecution.lastSentAt,assigneeName:S.header.assigneeName,selectedOutcomeCode:yr,onSelectOutcomeCode:ql,reasonTags:sn,onToggleReasonTag:Yo,rejectReasonDraft:fr,onRejectReasonDraftChange:Nf,noResponsePlanDraft:Ba,onNoResponsePlanDraftChange:zc,outcomeNote:zr,onOutcomeNoteChange:ou,isSaving:Ti,submitError:Fc,validationError:wi,onClearError:si,onReset:qc,onConfirm:Wc,hasUnsavedChanges:xs,lastSavedAt:Ul,onOpenHandoffMemo:()=>la(!0),mode:a})})]}):null]}),an?n.jsxs("section",{className:"rounded-xl border border-indigo-200 bg-indigo-50 p-4 shadow-sm",children:[n.jsx("h3",{className:"text-sm font-bold text-indigo-900",children:l?"   ":"   "}),n.jsx("p",{className:"mt-1 text-[11px] text-indigo-800",children:an.memo}),n.jsxs("p",{className:"mt-1 text-[10px] text-indigo-700",children:[mt(an.at),"  ",l?" ":" "," ",lb[an.nextAction]]})]}):null,n.jsx(H7,{evidence:S.riskEvidence,quality:S.header.dataQuality,mode:a,stage2OpsView:l}),n.jsx(OA,{timeline:Yp,filter:k,onFilterChange:M,listClassName:"max-h-[300px] overflow-y-auto pr-1",mode:a,stage2OpsView:l})]}):n.jsxs(n.Fragment,{children:[n.jsx(H7,{evidence:S.riskEvidence,quality:S.header.dataQuality,mode:a,stage2OpsView:l}),n.jsx(OA,{timeline:Yp,filter:k,onFilterChange:M,listClassName:"max-h-[340px] overflow-y-auto pr-1",mode:a,stage2OpsView:l}),n.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[n.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"  ( )"}),n.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:"    : Step   ."}),n.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3 text-xs",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[n.jsx("p",{className:"text-slate-500",children:"  "}),n.jsxs("p",{className:"mt-1 text-lg font-bold text-slate-900",children:[S.todos.filter(I=>I.status==="OPEN").length,""]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[n.jsx("p",{className:"text-slate-500",children:"  "}),n.jsx("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:mt(it)}),Gl.length>0?n.jsxs("div",{className:"mt-2 space-y-1",children:[n.jsxs("p",{className:"text-[11px] font-semibold text-red-600",children:["   ",Gl.length,""]}),Gl.slice(0,2).map(I=>n.jsxs("div",{className:"rounded-md border border-red-200 bg-red-50 px-2 py-1.5",children:[n.jsx("p",{className:"text-[10px] font-semibold text-red-700",children:I.title}),n.jsx("p",{className:"text-[10px] text-red-600",children:mt(I.scheduledAt)}),n.jsx("button",{onClick:()=>tx(I.idempotencyKey),disabled:!!Dg[I.idempotencyKey],className:"mt-1 inline-flex items-center rounded-md border border-red-300 px-2 py-0.5 text-[10px] font-semibold text-red-700 hover:bg-red-100 disabled:opacity-50",children:Dg[I.idempotencyKey]?" ...":""})]},I.idempotencyKey))]}):null]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[n.jsx("p",{className:"text-slate-500",children:"  "}),n.jsx("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:sN?.title??"   ."})]})]})]})]}),n.jsx(IEe,{logs:S.agentExecutionLogs})]})]}),n.jsx(Gu,{open:!!ut,onOpenChange:I=>{I||er(null)},children:n.jsxs(Ku,{className:"max-w-2xl p-4",children:[n.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"ProgramExecutionDrawer"}),n.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:"     Stage3 Step3  ."}),Ga?n.jsxs("div",{className:"mt-3 space-y-3",children:[n.jsx("div",{className:"rounded-md border border-slate-200 bg-slate-50 px-3 py-2",children:n.jsxs("p",{className:"text-xs font-semibold text-slate-900",children:[Ga.major," / ",Ga.middle," / ",Ga.leaf]})}),n.jsxs("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-2",children:[n.jsxs("label",{className:"text-[11px] text-slate-600",children:["",n.jsx("input",{value:mr.owner,onChange:I=>Or(V=>({...V,owner:I.target.value})),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-blue-300"})]}),n.jsxs("label",{className:"text-[11px] text-slate-600",children:["Due Date",n.jsx("input",{type:"datetime-local",value:fc(mr.dueDate),onChange:I=>Or(V=>({...V,dueDate:mc(I.target.value)||void 0})),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-blue-300"})]}),n.jsxs("label",{className:"text-[11px] text-slate-600",children:[" ",n.jsxs("select",{value:mr.method??"",onChange:I=>Or(V=>({...V,method:I.target.value})),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-blue-300",children:[n.jsx("option",{value:"",children:""}),n.jsx("option",{value:"",children:""}),n.jsx("option",{value:"",children:""}),n.jsx("option",{value:"",children:""}),n.jsx("option",{value:"",children:""})]})]}),n.jsxs("label",{className:"text-[11px] text-slate-600",children:["",n.jsxs("select",{value:mr.status??"PLANNED",onChange:I=>Or(V=>({...V,status:I.target.value})),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-blue-300",children:[n.jsx("option",{value:"PLANNED",children:""}),n.jsx("option",{value:"IN_PROGRESS",children:""}),n.jsx("option",{value:"DONE",children:""}),n.jsx("option",{value:"HOLD",children:""})]})]}),n.jsxs("label",{className:"text-[11px] text-slate-600 md:col-span-2",children:["",n.jsx("input",{value:mr.institution??"",onChange:I=>Or(V=>({...V,institution:I.target.value})),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-blue-300"})]}),n.jsxs("label",{className:"text-[11px] text-slate-600 md:col-span-2",children:["",n.jsx("textarea",{value:mr.note??"",onChange:I=>Or(V=>({...V,note:I.target.value})),className:"mt-1 h-20 w-full rounded-md border border-gray-200 px-2 py-1 text-[11px] outline-none focus:border-blue-300"})]})]}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx("button",{onClick:()=>er(null),className:"rounded-md border border-gray-200 px-3 py-1.5 text-xs font-semibold text-gray-700",children:""}),n.jsx("button",{onClick:()=>{ut&&(Zp(ut,mr),er(null))},className:"rounded-md bg-[#163b6f] px-3 py-1.5 text-xs font-semibold text-white",children:""})]})]}):null]})}),n.jsx(Gu,{open:o&&!!rt,onOpenChange:I=>{I||ws()},children:n.jsx(Ku,{className:"w-[96vw] max-w-[96vw] sm:max-w-[1460px] max-h-[92vh] overflow-y-auto p-4",children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"rounded-lg border border-indigo-200 bg-indigo-50 p-3",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-bold text-indigo-900",children:[l?"Stage2 ":"Stage3 ","  ",Qc?.title??" "]}),n.jsx("p",{className:"text-[11px] text-indigo-700",children:l?"/   .      .":"   .      ."})]}),n.jsxs("span",{className:"rounded-md border border-indigo-300 bg-white px-2 py-1 text-[11px] font-semibold text-indigo-700",children:[" ",Vl+1,"/",Gs.length]})]}),n.jsx("div",{className:"mt-2 grid grid-cols-2 gap-1.5 md:grid-cols-4",children:Gs.map((I,V)=>{const ee=In.find(tt=>tt.id===I),me=rt===I,le=Object.keys(Nr[I]??{}).length;return n.jsxs("button",{type:"button",onClick:()=>{const tt=nm(In,I);if(tt){Me.error(tt);return}Pe(I)},className:de("rounded-md border px-2 py-1.5 text-left text-[11px]",me?"border-indigo-300 bg-white text-indigo-800":"border-indigo-100 bg-indigo-50/60 text-indigo-700"),children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsxs("p",{className:"font-semibold",children:["STEP ",V+1]}),le>0?n.jsxs("span",{className:"rounded-full border border-rose-200 bg-rose-50 px-1.5 py-0.5 text-[10px] font-semibold text-rose-700",children:[" ",le]}):null]}),n.jsx("p",{className:"mt-0.5 truncate",children:ee?.title??I})]},I)})})]}),rt==="PRECHECK"?(()=>{const I=Vwe({detail:S,modelPriorityValue:Wl,stage2ResultLabel:y?nd:void 0,stage2MciSeverity:y?Yl:void 0,stage2TestAt:e?.updated,stage2Org:"  "}),V=[{key:"AD",label:"AD"},{key:"MCI",label:"MCI"},{key:"NORMAL",label:""}],ee=y&&V.some(Xe=>I.stage2.probs?.[Xe.key]!=null),me=N?oc(I.stage3.risk2yNow):void 0,le=N?oc(I.stage3.riskAt2y):void 0,tt=N?I.stage3.status==="RESULT_APPLIED"?l?" ":" ":l?" ":" ":" ";if(l){const Xe=S.timeline.filter(gt=>gt.type==="DIFF_REFER_CREATED"||gt.type==="DIFF_SCHEDULED"||gt.type==="LINKAGE_CREATED").length,Se=S.timeline.filter(gt=>gt.type==="CALL_ATTEMPT"||gt.type==="SMS_SENT"||gt.type==="MESSAGE_SENT").length,pt=S.timeline.filter(gt=>gt.type==="STAGE2_RESULTS_RECORDED"||gt.type==="DIFF_RESULT_APPLIED").length,or=ot.filter(gt=>gt.key==="step1Plan"||gt.key==="step1StrategyMemo"||gt.key==="step1Consent");return n.jsxs("section",{className:"rounded-lg border border-gray-200 bg-white p-4",children:[n.jsx("h4",{className:"text-sm font-bold text-slate-900",children:"Stage2   &   "}),n.jsx("p",{className:"mt-1 text-[11px] text-gray-600",children:"STEP1    ,   / /    ."}),n.jsx("div",{className:"mt-3",children:n.jsx(db,{items:cb.PRECHECK})}),or.length>0?n.jsxs("div",{className:"mt-3 rounded-md border border-rose-200 bg-rose-50 p-2",children:[n.jsx("p",{className:"text-[11px] font-semibold text-rose-700",children:"/ "}),n.jsx("ul",{className:"mt-1 space-y-1",children:or.map(gt=>n.jsx("li",{children:n.jsxs("button",{type:"button",onClick:()=>{if(gt.key==="step1Plan"){TA(ed.map(lr=>lr.id),Wo);return}nt(gt.key)},className:"text-[11px] text-rose-700 underline decoration-dotted underline-offset-2",children:["- ",gt.message]})},gt.key))})]}):null,n.jsx("div",{className:"mt-3",children:n.jsx(VEe,{summary:js,route:sh,onOpenMissing:()=>TA(ed.map(gt=>gt.id),Wo),onPrimaryAction:td,onReviewComplete:ln})}),n.jsx("div",{className:"mt-2 flex justify-end",children:n.jsx("button",{type:"button",onClick:()=>Pe("CONTACT_EXECUTION"),className:"rounded-md border border-slate-200 bg-slate-50 px-3 py-1.5 text-[11px] font-semibold text-slate-700",children:"/  "})}),n.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3 xl:grid-cols-[1fr_1.2fr]",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 p-3",children:[n.jsx("p",{className:"text-xs font-semibold text-slate-800",children:"Stage1Stage2  Scorecard"}),n.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-[11px]",children:[n.jsxs("div",{className:"rounded border border-slate-200 bg-white px-2 py-1.5",children:[n.jsx("p",{className:"text-slate-500",children:"Stage1 "}),n.jsxs("p",{className:"font-semibold text-slate-900",children:[I.stage1.priorityScore??"-"," / ",I.stage1.priorityBand??" "]})]}),n.jsxs("div",{className:"rounded border border-slate-200 bg-white px-2 py-1.5",children:[n.jsx("p",{className:"text-slate-500",children:" "}),n.jsx("p",{className:"font-semibold text-slate-900",children:I.stage1.interventionLevel??"-"})]}),n.jsxs("div",{className:"rounded border border-slate-200 bg-white px-2 py-1.5",children:[n.jsx("p",{className:"text-slate-500",children:"Stage2 "}),n.jsx("p",{className:"font-semibold text-slate-900",children:mt(Fs)})]}),n.jsxs("div",{className:"rounded border border-slate-200 bg-white px-2 py-1.5",children:[n.jsx("p",{className:"text-slate-500",children:"Stage2 "}),n.jsx("p",{className:"font-semibold text-slate-900",children:ez(ht.status)})]}),n.jsxs("div",{className:"col-span-2 rounded border border-slate-200 bg-white px-2 py-1.5",children:[n.jsx("p",{className:"text-slate-500",children:"Stage2   "}),n.jsx("p",{className:"font-semibold text-slate-900",children:"Stage1   /   Stage2    ."})]})]})]}),n.jsxs("details",{className:"rounded-md border border-slate-200 bg-slate-50 p-3",children:[n.jsx("summary",{className:"cursor-pointer text-xs font-semibold text-slate-800",children:"  ()"}),n.jsxs("div",{className:"mt-2 grid grid-cols-3 gap-2 text-[11px]",children:[n.jsxs("div",{className:"rounded border border-slate-200 bg-white px-2 py-1.5",children:[n.jsx("p",{className:"text-slate-500",children:"/ "}),n.jsx("p",{className:"font-semibold text-slate-900",children:Xe})]}),n.jsxs("div",{className:"rounded border border-slate-200 bg-white px-2 py-1.5",children:[n.jsx("p",{className:"text-slate-500",children:"/ "}),n.jsx("p",{className:"font-semibold text-slate-900",children:Se})]}),n.jsxs("div",{className:"rounded border border-slate-200 bg-white px-2 py-1.5",children:[n.jsx("p",{className:"text-slate-500",children:"  "}),n.jsx("p",{className:"font-semibold text-slate-900",children:pt})]})]})]}),n.jsxs("label",{className:"text-[11px] text-slate-600",children:[" (, 20 )",n.jsx("textarea",{ref:fe("step1StrategyMemo"),value:ft.strategyMemo,onChange:gt=>{Ue("step1StrategyMemo"),Le(lr=>({...lr,strategyMemo:gt.target.value}))},className:lt("step1StrategyMemo","mt-1 h-24 w-full rounded-md border border-gray-200 px-2 py-1 text-[11px] outline-none focus:border-indigo-300"),placeholder:"Stage1  , Stage2  ,    ."})]}),Hr.step1StrategyMemo?n.jsx("p",{className:"-mt-2 text-[10px] font-semibold text-rose-600",children:Hr.step1StrategyMemo}):null,n.jsxs("label",{className:"flex items-center gap-1 text-[11px] text-slate-700",children:[n.jsx("input",{ref:fe("step1Consent"),type:"checkbox",checked:ft.consentConfirmed,onChange:gt=>{Ue("step1Consent"),Le(lr=>({...lr,consentConfirmed:gt.target.checked}))}}),"Stage1 /   "]}),Hr.step1Consent?n.jsx("p",{className:"-mt-2 text-[10px] font-semibold text-rose-600",children:Hr.step1Consent}):null]}),n.jsxs("div",{className:"space-y-3 rounded-md border border-slate-200 bg-slate-50 p-3",children:[n.jsxs("div",{ref:fe("step1Plan"),children:[n.jsx("p",{className:"text-xs font-semibold text-slate-800",children:"  "}),n.jsx("div",{className:"mt-2",children:n.jsx(YEe,{routeType:Ke,orgName:ie,dueAt:Ye,needsReasonOnChange:uu,onSelectRoute:Jg})})]}),Hr.step1Plan?n.jsx("p",{className:"text-[10px] font-semibold text-rose-600",children:Hr.step1Plan}):null,n.jsxs("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-2",children:[n.jsxs("label",{className:"text-[11px] text-slate-600",children:["",n.jsx("input",{value:ie,onChange:gt=>De(gt.target.value),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-indigo-300"})]}),n.jsxs("label",{className:"text-[11px] text-slate-600",children:["",n.jsx("input",{type:"datetime-local",value:fc(Ye),onChange:gt=>Ze(mc(gt.target.value)||Ye),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-indigo-300"})]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-semibold text-slate-800",children:"   "}),n.jsx("p",{className:"mt-1 text-[10px] text-slate-500",children:"  /   STEP2 .    /  ."}),n.jsx("div",{className:"mt-2",children:n.jsx(QEe,{items:Ss,onAction:Ri,registerRef:Ft})})]}),n.jsxs("div",{className:"rounded-md border border-slate-200 bg-white p-2 text-[10px] text-slate-600",children:[n.jsxs("p",{children:["STEP  : STEP2 ",js.locks.step2?"":"","  STEP3 ",js.locks.step3?"":"","  STEP4 ",js.locks.step4?"":""]}),n.jsxs("p",{className:"mt-1",children:["  : ",js.step1Reviewed?"":"","   ",js.completionRate,"%"]})]})]})]})]})}return n.jsxs("section",{className:"rounded-lg border border-gray-200 bg-white p-4",children:[n.jsx("h4",{className:"text-sm font-bold text-slate-900",children:l?"Stage1 / ":"   &  "}),n.jsx("p",{className:"mt-1 text-[11px] text-gray-600",children:l?"Step1 Stage1  Stage2       .":"Step1       .       ."}),n.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 rounded-lg border border-indigo-200 bg-indigo-50 p-2 md:grid-cols-3 xl:grid-cols-6",children:[n.jsxs("div",{title:"       .",className:"rounded-md border border-indigo-100 bg-white p-2 shadow-sm transition-all duration-150 hover:-translate-y-0.5 hover:shadow-md",children:[n.jsx("p",{className:"text-[10px] font-semibold text-indigo-600",children:" "}),n.jsxs("p",{className:"mt-1 text-xs font-bold text-slate-900",children:[I.stage1.priorityBand??" ","  ",I.stage1.priorityScore??"-",""]}),n.jsxs("p",{className:"mt-1 text-[10px] text-slate-500",children:[" ",I.stage1.interventionLevel??"-"]})]}),n.jsxs("div",{title:"Stage2  ( ).",className:"rounded-md border border-indigo-100 bg-white p-2 shadow-sm transition-all duration-150 hover:-translate-y-0.5 hover:shadow-md",children:[n.jsx("p",{className:"text-[10px] font-semibold text-indigo-600",children:"Stage2 "}),n.jsxs("p",{className:"mt-1 text-xs font-bold text-slate-900",children:[y?I.stage2.resultLabel??"":"",y&&I.stage2.mciSeverity?`(${I.stage2.mciSeverity})`:""]}),n.jsx("p",{className:"mt-1 text-[10px] text-slate-500",children:mt(I.stage2.testAt)})]}),n.jsxs("div",{title:"/AD/MCI  .      .",className:"rounded-md border border-indigo-100 bg-white p-2 shadow-sm transition-all duration-150 hover:-translate-y-0.5 hover:shadow-md",children:[n.jsx("p",{className:"text-[10px] font-semibold text-indigo-600",children:"Stage2  "}),n.jsx("p",{className:"mt-1 text-xs font-bold text-slate-900",children:ee?" ( )":" ()"}),ee?n.jsx("div",{className:"mt-1 space-y-1",children:V.map(Xe=>{const Se=oc(I.stage2.probs?.[Xe.key])??0;return n.jsxs("div",{className:"space-y-0.5",children:[n.jsxs("div",{className:"flex items-center justify-between text-[10px] text-slate-500",children:[n.jsx("span",{children:Xe.label}),n.jsxs("span",{children:[Se,"%"]})]}),n.jsx("div",{className:"h-1.5 rounded bg-slate-100",children:n.jsx("div",{className:"h-full rounded bg-indigo-400",style:{width:`${Se}%`}})})]},Xe.key)})}):n.jsx("p",{className:"mt-1 text-[10px] text-slate-500",children:"   "})]}),n.jsxs("div",{title:l?"  ( ).":"2  .     .",className:"rounded-md border border-indigo-100 bg-white p-2 shadow-sm transition-all duration-150 hover:-translate-y-0.5 hover:shadow-md",children:[n.jsx("p",{className:"text-[10px] font-semibold text-indigo-600",children:l?"  ()":"Stage3 ()"}),n.jsx("p",{className:"mt-1 text-xs font-bold text-slate-900",children:me==null?" ( )":`${me}%`}),n.jsxs("p",{className:"mt-1 text-[10px] text-slate-500",children:[l?" ":""," ",N?I.stage3.risk2yLabel??"-":""]})]}),n.jsxs("div",{title:l?"   .":"   2  .",className:"rounded-md border border-indigo-100 bg-white p-2 shadow-sm transition-all duration-150 hover:-translate-y-0.5 hover:shadow-md",children:[n.jsx("p",{className:"text-[10px] font-semibold text-indigo-600",children:l?"  ":"Stage3 2  "}),n.jsx("p",{className:"mt-1 text-xs font-bold text-slate-900",children:le==null?" ( )":`${le}%`}),n.jsxs("p",{className:"mt-1 text-[10px] text-slate-500",children:[" ",I.stage3.confidence??"-"]})]}),n.jsxs("div",{title:"   .",className:"rounded-md border border-indigo-100 bg-white p-2 shadow-sm transition-all duration-150 hover:-translate-y-0.5 hover:shadow-md",children:[n.jsx("p",{className:"text-[10px] font-semibold text-indigo-600",children:" "}),n.jsxs("p",{className:"mt-1 text-xs font-bold text-slate-900",children:[I.dataQuality?.score??"-","%"]}),n.jsxs("p",{className:"mt-1 text-[10px] text-slate-500",children:[" ",I.dataQuality?.missingCount??0,""]})]})]}),n.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3 xl:grid-cols-[1.6fr_1fr]",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"grid grid-cols-1 gap-2 lg:grid-cols-3",children:[n.jsxs("article",{className:"rounded-md border border-slate-200 bg-slate-50 p-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"text-[10px] font-semibold text-slate-700",children:"Stage1  "}),n.jsx("button",{type:"button",onClick:()=>Me(jf.guide),className:"rounded border border-slate-300 bg-white px-1.5 py-0.5 text-[10px] font-semibold text-slate-700",children:" "})]}),n.jsxs("p",{className:"mt-1 text-[11px] text-slate-700",children:[" : ",n.jsx("strong",{children:I.stage1.priorityBand??" "})," (",I.stage1.priorityScore??"-"," /"," ",I.stage1.interventionLevel??"-",")"]}),n.jsxs("p",{className:"mt-1 text-[10px] text-slate-500",children:[" ",I.stage1.percentileTop??"-","%   ",mt(I.stage1.updatedAt)]})]}),n.jsxs("article",{className:"rounded-md border border-slate-200 bg-slate-50 p-3",children:[n.jsx("p",{className:"text-[10px] font-semibold text-slate-700",children:"Stage2  ( )"}),n.jsxs("p",{className:"mt-1 text-[11px] text-slate-700",children:[" :"," ",n.jsxs("strong",{children:[y?I.stage2.resultLabel??"":"",y&&I.stage2.mciSeverity?`(${I.stage2.mciSeverity})`:""]})]}),n.jsxs("p",{className:"mt-1 text-[10px] text-slate-500",children:[" : ",ee?" ( )":" ()"]}),n.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:[["",I.stage2.tests?.neuropsych],["",I.stage2.tests?.clinical],["",I.stage2.tests?.specialist]].map(([Xe,Se])=>n.jsxs("span",{className:de("rounded px-1.5 py-0.5 text-[10px] font-semibold",Se==="DONE"?"bg-emerald-100 text-emerald-700":"bg-slate-200 text-slate-600"),children:[Xe," ",Se==="DONE"?"":""]},Xe))}),n.jsxs("p",{className:"mt-1 text-[10px] text-slate-500",children:[" ",mt(I.stage2.testAt),"  ",I.stage2.org]})]}),n.jsxs("article",{className:"rounded-md border border-slate-200 bg-slate-50 p-3",children:[n.jsx("p",{className:"text-[10px] font-semibold text-slate-700",children:"Stage3 /"}),n.jsxs("p",{className:"mt-1 text-[11px] text-slate-700",children:[":"," ",n.jsxs("strong",{children:[N?I.stage3.risk2yLabel??"":""," (",me==null?"-":`${me}%`,")"]})]}),n.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-1",children:[n.jsxs("span",{className:de("rounded px-1.5 py-0.5 text-[10px] font-semibold",I.stage3.status==="RESULT_APPLIED"?"bg-emerald-100 text-emerald-700":"bg-amber-100 text-amber-700"),children:[": ",tt]}),I.stage3.status==="RESULT_PENDING"?n.jsx("span",{className:"rounded bg-amber-100 px-1.5 py-0.5 text-[10px] font-semibold text-amber-700",children:" "}):null]}),n.jsxs("p",{className:"mt-1 text-[10px] text-slate-500",children:[" ",N?I.stage3.confidence??"-":"","   ",mt(I.stage3.nextReevalAt)]}),n.jsxs("p",{className:"mt-1 text-[10px] text-slate-500",children:["  ",mt(I.stage3.nextContactAt),"  2   ",le??"-","%"]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 md:grid-cols-5",children:[n.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 p-2",children:[n.jsx("p",{className:"text-[10px] font-semibold text-slate-700",children:" (30)"}),n.jsx("p",{className:"mt-1 text-sm font-bold text-slate-900",children:I.opsCounts?.contactAttempts30d??0})]}),n.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 p-2",children:[n.jsx("p",{className:"text-[10px] font-semibold text-slate-700",children:"(30)"}),n.jsx("p",{className:"mt-1 text-sm font-bold text-emerald-700",children:I.opsCounts?.contactSuccess30d??0})]}),n.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 p-2",children:[n.jsx("p",{className:"text-[10px] font-semibold text-slate-700",children:" (30)"}),n.jsx("p",{className:"mt-1 text-sm font-bold text-rose-700",children:I.opsCounts?.contactFail30d??0})]}),n.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 p-2",children:[n.jsx("p",{className:"text-[10px] font-semibold text-slate-700",children:" "}),n.jsx("p",{className:"mt-1 text-sm font-bold text-slate-900",children:I.opsCounts?.bookings??0})]}),n.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 p-2",children:[n.jsx("p",{className:"text-[10px] font-semibold text-slate-700",children:"(/)"}),n.jsxs("p",{className:"mt-1 text-sm font-bold text-slate-900",children:[(I.opsCounts?.programsPlanned??0)+(I.opsCounts?.programsDone??0)," / ",I.opsCounts?.programsDone??0]})]})]}),n.jsxs("details",{className:"rounded-md border border-slate-200 bg-slate-50 p-3",children:[n.jsx("summary",{className:"cursor-pointer text-xs font-semibold text-slate-800",children:"()"}),n.jsxs("div",{className:"mt-2 space-y-1.5",children:[S.timeline.slice(0,8).map((Xe,Se)=>n.jsxs("div",{className:"rounded border border-slate-200 bg-white px-2 py-1.5",children:[n.jsx("p",{className:"text-[11px] font-semibold text-slate-700",children:Gb(Xe)}),n.jsxs("p",{className:"text-[10px] text-slate-500",children:[mt(Xe.at),"  ",Xe.by]}),n.jsx("p",{className:"text-[10px] text-slate-600",children:tz(Xe)})]},`${Xe.at}-${Se}`)),S.timeline.length===0?n.jsx("p",{className:"rounded border border-slate-200 bg-white px-2 py-1.5 text-[10px] text-slate-500",children:" ."}):null]})]}),n.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 p-3",children:[n.jsx("p",{className:"text-xs font-semibold text-slate-800",children:l?"Stage1Stage2  ( )":"Stage2Stage3  ( )"}),n.jsxs("ul",{className:"mt-1 space-y-1 text-[11px] text-slate-600",children:[n.jsx("li",{children:l?" Stage1    Stage2   .":"        ."}),n.jsx("li",{children:l?" /    .":"  /     ."}),n.jsx("li",{children:l?"     //    .":"     /   ."}),n.jsx("li",{children:"          ."})]})]})]}),n.jsxs("div",{className:"space-y-3",children:[go.length>0?n.jsxs("div",{className:"rounded-md border border-rose-200 bg-rose-50 p-2",children:[n.jsxs("p",{className:"text-[11px] font-semibold text-rose-700",children:["   ",go.length,""]}),n.jsx("ul",{className:"mt-1 space-y-1",children:go.map(Xe=>n.jsx("li",{children:n.jsxs("button",{type:"button",onClick:()=>Ns(Xe.key),className:"text-[11px] text-rose-700 underline decoration-dotted underline-offset-2",children:["- ",Xe.message]})},Xe.key))})]}):null,n.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 p-3",children:[n.jsx("p",{className:"text-xs font-semibold text-slate-800",children:" ()"}),n.jsxs("div",{className:"mt-2 rounded-md border border-slate-200 bg-white p-2",children:[n.jsx("p",{className:"text-[11px] font-semibold text-slate-700",children:"  /"}),n.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:[ft.sensitiveHistory?"  ":null,ft.resultLinkedChecked?"   ":null,S.timeline.some(Xe=>Xe.type==="CALL_ATTEMPT"&&Xe.result==="NO_ANSWER")?"  ":null,e?.profile.guardianPhone?"   ":"  "].filter(Boolean).map(Xe=>n.jsx("span",{className:"rounded-full border border-slate-200 bg-slate-50 px-2 py-0.5 text-[10px] font-semibold text-slate-700",children:Xe},Xe))})]}),n.jsxs("div",{ref:kr("step1DiffDecision"),className:de("mt-2 grid grid-cols-1 gap-2",Dr.step1DiffDecision?"rounded-md border border-rose-200 bg-rose-50 p-1":""),children:[n.jsx("p",{className:"text-[11px] font-semibold text-slate-700",children:"  ()"}),n.jsxs("button",{type:"button",onClick:()=>{qr("PRECHECK","step1DiffDecision"),Le(Xe=>({...Xe,diffNeeded:!0,diffDecisionSet:!0}))},className:de("flex w-full items-center justify-between rounded-md border px-3 py-2 text-left",ft.diffDecisionSet&&ft.diffNeeded?"border-indigo-300 bg-indigo-50 text-indigo-800":"border-slate-200 bg-white text-slate-700"),children:[n.jsx("span",{className:"text-xs font-semibold",children:" ()"}),n.jsx("span",{className:"text-[10px]",children:"    /  "})]}),n.jsxs("button",{type:"button",onClick:()=>{qr("PRECHECK","step1DiffDecision"),Le(Xe=>({...Xe,diffNeeded:!1,diffDecisionSet:!0}))},className:de("flex w-full items-center justify-between rounded-md border px-3 py-2 text-left",ft.diffDecisionSet&&!ft.diffNeeded?"border-slate-400 bg-slate-100 text-slate-800":"border-slate-200 bg-white text-slate-700"),children:[n.jsx("span",{className:"text-xs font-semibold",children:"(/  )"}),n.jsx("span",{className:"text-[10px]",children:"   /  "})]}),Dr.step1DiffDecision?n.jsx("p",{className:"text-[10px] font-semibold text-rose-600",children:Dr.step1DiffDecision}):null]}),ft.diffDecisionSet?n.jsxs("label",{className:"mt-2 block text-[11px] text-slate-600",children:[" ( )",n.jsx("input",{ref:kr("step1DiffReason"),value:ft.diffDecisionReason,onChange:Xe=>{qr("PRECHECK","step1DiffReason"),Le(Se=>({...Se,diffDecisionReason:Xe.target.value}))},className:$r("PRECHECK","step1DiffReason","mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-indigo-300"),placeholder:"   ."})]}):null,n.jsxs("label",{className:"mt-2 flex items-center gap-1 text-[11px] text-slate-700",children:[n.jsx("input",{ref:kr("step1Consent"),type:"checkbox",checked:ft.consentConfirmed,onChange:Xe=>{qr("PRECHECK","step1Consent"),Le(Se=>({...Se,consentConfirmed:Xe.target.checked}))}}),"  ()"]}),Dr.step1Consent?n.jsx("p",{className:"text-[10px] font-semibold text-rose-600",children:Dr.step1Consent}):null,n.jsxs("label",{className:"mt-1 flex items-center gap-1 text-[11px] text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:ft.caregiverNeeded,onChange:Xe=>Le(Se=>({...Se,caregiverNeeded:Xe.target.checked}))}),"  ()"]}),n.jsxs("div",{className:"mt-2",children:[n.jsx("label",{className:"text-[11px] font-semibold text-slate-600",children:" ()"}),n.jsxs("select",{value:ft.priority,onChange:Xe=>Le(Se=>({...Se,priority:Xe.target.value})),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-indigo-300",children:[n.jsx("option",{value:"HIGH",children:"HIGH"}),n.jsx("option",{value:"MID",children:"MID"}),n.jsx("option",{value:"LOW",children:"LOW"})]})]}),n.jsxs("div",{className:"mt-2",children:[n.jsx("label",{className:"text-[11px] font-semibold text-slate-600",children:" ()"}),n.jsx("textarea",{ref:kr("step1StrategyMemo"),value:ft.strategyMemo,onChange:Xe=>{qr("PRECHECK","step1StrategyMemo"),Le(Se=>({...Se,strategyMemo:Xe.target.value}))},className:$r("PRECHECK","step1StrategyMemo","mt-1 h-28 w-full rounded-md border border-gray-200 px-2 py-1 text-[11px] outline-none focus:border-indigo-300"),placeholder:`1) Stage3  
2) / 
3) / `}),Dr.step1StrategyMemo?n.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:Dr.step1StrategyMemo}):null]})]}),n.jsxs("div",{className:"rounded-md border border-indigo-200 bg-indigo-50 p-3",children:[n.jsxs("p",{className:"text-[11px] text-indigo-800",children:["  ",n.jsx("strong",{children:l?"STEP1  ":"STAGE3_REVIEW_DONE"}),"    / ."]}),n.jsx("button",{type:"button",onClick:()=>wn(1),className:"mt-2 w-full rounded-md border border-indigo-300 bg-white px-2 py-1.5 text-[11px] font-semibold text-indigo-700 hover:bg-indigo-100",children:l?"Step2() ":"Step2() "})]})]})]})]})})():null,rt==="CONTACT_EXECUTION"?(()=>{const I=S.stage3?.diffPathStatus??"NONE";if(l){const Se=ot.filter(zt=>zt.key==="manualEditReason"||zt.key==="mmse"||zt.key==="cdr"||zt.key==="neuro"||zt.key==="specialist"),or={WAITING:{label:"",chip:"bg-slate-100 text-slate-700 border-slate-200"},REQUESTED:{label:"",chip:"bg-blue-50 text-blue-700 border-blue-200"},PARTIAL:{label:" ",chip:"bg-amber-50 text-amber-700 border-amber-200"},VERIFY_NEEDED:{label:" ",chip:"bg-rose-50 text-rose-700 border-rose-200"},READY:{label:" ",chip:"bg-emerald-50 text-emerald-700 border-emerald-200"}}[Af],gt=S.timeline.filter(zt=>zt.type==="STAGE2_RESULTS_RECORDED"||zt.type==="DIFF_RESULT_APPLIED"||zt.type==="DIFF_REFER_CREATED"||zt.type==="DIFF_SCHEDULED"||zt.type==="MESSAGE_SENT").slice(0,6),lr=!ia,zn=oa.lastSyncedAt??p?.updatedAt,cn=oa.receivedAt??p?.updatedAt,zs=[{label:"   ",done:!!cn},{label:"/ ",done:Qn===0},{label:"  ",done:!!ht.tests.specialist},{label:"  STEP3   ",done:mn.status==="DONE"}];return n.jsxs("section",{id:"stage2-modal-step2-input",className:"rounded-lg border border-gray-200 bg-white p-4",children:[n.jsx("h4",{className:"text-sm font-bold text-slate-900",children:"  //"}),n.jsx("p",{className:"mt-1 text-[11px] text-gray-600",children:"      .      ."}),n.jsx("div",{className:"mt-3",children:n.jsx(db,{items:cb.CONTACT_EXECUTION})}),n.jsxs("div",{className:"mt-3 rounded-md border border-indigo-200 bg-indigo-50 p-3",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[n.jsx("p",{className:"text-xs font-semibold text-indigo-900",children:" "}),n.jsx("span",{className:de("rounded border px-2 py-0.5 text-[10px] font-semibold",or.chip),children:or.label})]}),n.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-[11px] md:grid-cols-4",children:[n.jsxs("div",{className:"rounded border border-indigo-100 bg-white px-2 py-1.5",children:[n.jsx("p",{className:"text-slate-500",children:" "}),n.jsx("p",{className:"font-semibold text-slate-900",children:mt(zn)})]}),n.jsxs("div",{className:"rounded border border-indigo-100 bg-white px-2 py-1.5",children:[n.jsx("p",{className:"text-slate-500",children:"  "}),n.jsx("p",{className:"font-semibold text-slate-900",children:mt(cn)})]}),n.jsxs("div",{className:"rounded border border-indigo-100 bg-white px-2 py-1.5",children:[n.jsx("p",{className:"text-slate-500",children:" "}),n.jsx("p",{className:"font-semibold text-slate-900",children:oa.sourceOrg??ie})]}),n.jsxs("div",{className:"rounded border border-indigo-100 bg-white px-2 py-1.5",children:[n.jsx("p",{className:"text-slate-500",children:" "}),n.jsxs("p",{className:de("font-semibold",Qn>0?"text-rose-700":"text-emerald-700"),children:[Qn,""]})]})]}),n.jsxs("div",{className:"mt-2 flex flex-wrap gap-1",children:[n.jsx("button",{type:"button",onClick:()=>{const zt=vt();Aa(Vt=>({...Vt,lastSyncedAt:zt})),ni({status:"PENDING",updatedAt:zt}),st({type:"MESSAGE_SENT",at:zt,by:S.header.assigneeName,summary:"  "}),Je("Stage2   "),Me.success("   .")},className:"rounded border border-blue-200 bg-white px-2 py-1 text-[10px] font-semibold text-blue-700",children:" "}),n.jsx("button",{type:"button",onClick:()=>{const zt=vt();Aa(Vt=>({...Vt,lastSyncedAt:zt})),Qn>0&&ni({status:"PENDING",updatedAt:zt}),Je("Stage2  "),Me.success("  .")},className:"rounded border border-indigo-200 bg-white px-2 py-1 text-[10px] font-semibold text-indigo-700",children:""}),n.jsx("button",{type:"button",onClick:()=>hf(zt=>!zt),className:"rounded border border-slate-200 bg-white px-2 py-1 text-[10px] font-semibold text-slate-700",children:"  "})]}),Wp?n.jsx("div",{className:"mt-2 space-y-1 rounded border border-indigo-100 bg-white p-2",children:gt.length>0?gt.map((zt,Vt)=>n.jsxs("div",{className:"rounded border border-slate-200 px-2 py-1 text-[10px] text-slate-600",children:[n.jsx("p",{className:"font-semibold text-slate-700",children:Gb(zt)}),n.jsxs("p",{children:[mt(zt.at),"  ",zt.summary]})]},`${zt.at}-${Vt}`)):n.jsx("p",{className:"text-[10px] text-slate-500",children:"  ."})}):null]}),Se.length>0?n.jsxs("div",{className:"mt-3 rounded-md border border-rose-200 bg-rose-50 p-2",children:[n.jsx("p",{className:"text-[11px] font-semibold text-rose-700",children:"/ "}),n.jsx("ul",{className:"mt-1 space-y-1",children:Se.map(zt=>n.jsx("li",{children:n.jsxs("button",{type:"button",onClick:()=>nt(zt.key),className:"text-[11px] text-rose-700 underline decoration-dotted underline-offset-2",children:["- ",zt.message]})},zt.key))})]}):null,n.jsxs("div",{className:"mt-3 rounded-md border border-slate-200 bg-slate-50 p-3",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[n.jsx("p",{className:"text-xs font-semibold text-slate-800",children:"   "}),n.jsxs("label",{className:"flex items-center gap-1 text-[10px] font-semibold text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:ia,onChange:zt=>{es(zt.target.checked),zt.target.checked||(tu(""),Ue("manualEditReason"))}})," "]})]}),n.jsxs("div",{className:"mt-2 grid grid-cols-1 gap-2 md:grid-cols-2",children:[n.jsxs("label",{className:"text-[11px] text-slate-600",children:[n.jsx(a0,{term:"MMSE"}),"  (0~30)",n.jsx("input",{ref:fe("mmse"),type:"number",inputMode:"decimal",min:0,max:30,step:1,value:ht.tests.mmse??"",disabled:lr,onChange:zt=>{Ue("mmse");const Vt=zt.target.value,qn=Vt===""?void 0:Number(Vt);Jr(za=>({...za,tests:{...za.tests,mmse:Vt===""||Number.isNaN(qn)?void 0:qn}}))},className:lt("mmse","mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-xs outline-none focus:border-blue-300 disabled:cursor-not-allowed disabled:bg-slate-100")}),Hr.mmse?n.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:Hr.mmse}):null]}),n.jsxs("label",{className:"text-[11px] text-slate-600",children:[n.jsx(a0,{term:"CDR"}),"/",n.jsx(a0,{term:"GDS"}),"  (0~7)",n.jsx("input",{ref:fe("cdr"),type:"number",inputMode:"decimal",min:0,max:7,step:.5,value:ht.tests.cdr??"",disabled:lr,onChange:zt=>{Ue("cdr");const Vt=zt.target.value,qn=Vt===""?void 0:Number(Vt);Jr(za=>({...za,tests:{...za.tests,cdr:Vt===""||Number.isNaN(qn)?void 0:qn}}))},className:lt("cdr","mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-xs outline-none focus:border-blue-300 disabled:cursor-not-allowed disabled:bg-slate-100")}),Hr.cdr?n.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:Hr.cdr}):null]}),n.jsxs("label",{className:"text-[11px] text-slate-600",children:[" ",n.jsxs("select",{ref:fe("neuro"),value:ht.tests.neuroCognitiveType??"",disabled:lr,onChange:zt=>{Ue("neuro"),Jr(Vt=>({...Vt,tests:{...Vt.tests,neuroCognitiveType:zt.target.value||void 0}}))},className:lt("neuro","mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-xs outline-none focus:border-blue-300 disabled:cursor-not-allowed disabled:bg-slate-100"),children:[n.jsx("option",{value:"",children:""}),n.jsx("option",{value:"CERAD-K",children:"CERAD-K"}),n.jsx("option",{value:"SNSB-II",children:"SNSB-II"}),n.jsx("option",{value:"SNSB-C",children:"SNSB-C"}),n.jsx("option",{value:"LICA",children:"LICA"})]}),Hr.neuro?n.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:Hr.neuro}):null]}),n.jsxs("label",{className:"text-[11px] text-slate-600",children:["  ",n.jsxs("select",{ref:fe("specialist"),value:ht.tests.specialist?"DONE":"MISSING",disabled:lr,onChange:zt=>{Ue("specialist"),Jr(Vt=>({...Vt,tests:{...Vt.tests,specialist:zt.target.value==="DONE"}}))},className:lt("specialist","mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-xs outline-none focus:border-blue-300 disabled:cursor-not-allowed disabled:bg-slate-100"),children:[n.jsx("option",{value:"MISSING",children:"MISSING"}),n.jsx("option",{value:"DONE",children:"DONE"})]}),Hr.specialist?n.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:Hr.specialist}):null]})]}),ia?n.jsxs("label",{className:"mt-2 block text-[11px] text-slate-600",children:["  ()",n.jsx("textarea",{ref:fe("manualEditReason"),value:Dn,onChange:zt=>{Ue("manualEditReason"),tu(zt.target.value)},className:lt("manualEditReason","mt-1 h-16 w-full rounded-md border border-gray-200 px-2 py-1 text-[11px] outline-none focus:border-blue-300"),placeholder:"    ."}),Hr.manualEditReason?n.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:Hr.manualEditReason}):null]}):null]}),n.jsx("div",{className:"mt-3 grid grid-cols-1 gap-2 md:grid-cols-2",children:zs.map(zt=>n.jsxs("div",{className:de("rounded-md border px-2 py-1.5 text-[11px]",zt.done?"border-emerald-200 bg-emerald-50 text-emerald-800":"border-slate-200 bg-white text-slate-700"),children:[n.jsx("p",{className:"font-semibold",children:zt.done?"":""}),n.jsx("p",{className:"mt-0.5",children:zt.label})]},zt.label))}),Qn>0?n.jsxs("div",{className:"mt-3 rounded-md border border-amber-200 bg-amber-50 px-3 py-2 text-[11px] text-amber-800",children:[" :    ",Qn,"  ."]}):n.jsx("div",{className:"mt-3 rounded-md border border-emerald-200 bg-emerald-50 px-3 py-2 text-[11px] text-emerald-800",children:"    .    STEP3     ."}),n.jsxs("button",{onClick:ru,className:"mt-3 inline-flex items-center gap-1 rounded-md bg-[#163b6f] px-3 py-1.5 text-xs font-semibold text-white hover:bg-[#112f5a]",children:[n.jsx(Zs,{size:13}),"   "]})]})}const V=lu===0,ee=aa.slice(0,3),me=go.filter(Se=>dr.CONTACT_EXECUTION.includes(Se.key)),le=ft.diffNeeded,tt=le?[{label:" ",done:Re.consultStarted||te.trim().length>0},{label:"/  ",done:We.testBiomarker||We.testBrainImaging||We.testOther},{label:" ",done:Re.bookingConfirmed},{label:"/",done:Re.messageSent&&Re.calendarSynced}]:[{label:" ",done:Re.consultStarted||te.trim().length>0},{label:"  ",done:Re.infoCollected},{label:"  ",done:Re.bookingConfirmed},{label:"/",done:Re.messageSent&&Re.calendarSynced}],Xe=[`Stage1  ${jf.bandLabel} (${Math.round(Wl)})`,`Stage2  ${mu}${sd?`(${sd})`:""}`,`   ${I}`];return n.jsxs("section",{id:"stage3-step2-input",className:"rounded-lg border border-gray-200 bg-white p-4",children:[n.jsx("h4",{className:"text-sm font-bold text-slate-900",children:le?"      //   ":"       / "}),n.jsx("p",{className:"mt-1 text-[11px] text-gray-600",children:le?"      / ,     .":"          ."}),n.jsx("div",{className:"mt-3 grid grid-cols-2 gap-2 md:grid-cols-4",children:tt.map(Se=>n.jsxs("div",{className:de("rounded border px-2 py-1.5 text-[11px]",Se.done?"border-emerald-200 bg-emerald-50 text-emerald-800":"border-slate-200 bg-slate-50 text-slate-700"),children:[n.jsx("p",{className:"font-semibold",children:Se.done?"":""}),n.jsx("p",{className:"mt-0.5",children:Se.label})]},Se.label))}),me.length>0?n.jsxs("div",{className:"mt-3 rounded-md border border-rose-200 bg-rose-50 p-2",children:[n.jsxs("p",{className:"text-[11px] font-semibold text-rose-700",children:["   ",me.length,""]}),n.jsx("ul",{className:"mt-1 space-y-1",children:me.map(Se=>n.jsx("li",{children:n.jsxs("button",{type:"button",onClick:()=>Ns(Se.key),className:"text-[11px] text-rose-700 underline decoration-dotted underline-offset-2",children:["- ",Se.message]})},Se.key))})]}):null,n.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3 xl:grid-cols-[1fr_1.1fr]",children:[n.jsxs("div",{className:"space-y-3 rounded-md border border-slate-200 bg-slate-50 p-3",children:[n.jsxs("div",{className:"rounded-md border border-slate-200 bg-white p-2",children:[n.jsx("p",{className:"text-xs font-semibold text-slate-800",children:"  "}),n.jsx("ul",{className:"mt-1 space-y-1 text-[11px] text-slate-600",children:Xe.map(Se=>n.jsxs("li",{children:[" ",Se]},Se))})]}),n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[n.jsx("p",{className:"text-xs font-semibold text-slate-800",children:"  "}),n.jsx("span",{className:"text-[10px] text-slate-500",children:"Stage1 /  "})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[n.jsx("button",{type:"button",onClick:()=>{qr("CONTACT_EXECUTION","step2CallRecord"),_e(Se=>({...Se,consultStarted:!0})),fN()},className:"rounded border border-blue-200 bg-blue-50 px-2 py-1 text-[10px] font-semibold text-blue-700",children:" "}),n.jsx("button",{type:"button",onClick:()=>{const Se=ee[0];Se?(eh(Se),_e(pt=>({...pt,consultStarted:!0})),Me.success("  .")):Me("   .")},className:"rounded border border-indigo-200 bg-indigo-50 px-2 py-1 text-[10px] font-semibold text-indigo-700",children:" "}),n.jsx("button",{type:"button",onClick:()=>{if(!te.trim()){Ca("CONTACT_EXECUTION",{...Nr.CONTACT_EXECUTION,step2CallRecord:"   ."}),Me.error("    .");return}qr("CONTACT_EXECUTION","step2CallRecord"),_e(Se=>({...Se,infoCollected:!0})),$t(Se=>({...Se,note:te.trim()})),Je(`Stage3   : ${te.slice(0,60)}`)},className:"rounded border border-slate-200 bg-white px-2 py-1 text-[10px] font-semibold text-slate-700",children:"  "})]}),n.jsxs("label",{className:"text-[11px] text-slate-600",children:["  ()",n.jsx("textarea",{ref:kr("step2CallRecord"),value:te,onChange:Se=>{qr("CONTACT_EXECUTION","step2CallRecord"),re(Se.target.value)},className:$r("CONTACT_EXECUTION","step2CallRecord","mt-1 h-14 w-full rounded-md border border-gray-200 px-2 py-1 text-[11px] outline-none focus:border-indigo-300"),placeholder:"    ."}),Dr.step2CallRecord?n.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:Dr.step2CallRecord}):null]}),n.jsx(E7,{stageLabel:"3",templates:Lg,defaultVars:{centerName:EA,centerPhone:il,bookingLink:N0(S.reservationInfo)},caseId:S.header.caseId,citizenPhone:e?.profile.phone??"010-0000-0000",guardianPhone:e?.profile.guardianPhone,callScripts:Mg,compact:!0,onConsultation:Gg,onSmsSent:Kg})]}),n.jsxs("div",{className:"space-y-3 rounded-md border border-slate-200 bg-slate-50 p-3",children:[n.jsx("p",{className:"text-xs font-semibold text-slate-800",children:"/ "}),n.jsxs("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-2",children:[n.jsxs("label",{className:"text-[11px] text-slate-600",children:["/()",n.jsx("input",{ref:kr("step2Hospital"),value:We.preferredHospital,onChange:Se=>{qr("CONTACT_EXECUTION","step2Hospital"),$t(pt=>({...pt,preferredHospital:Se.target.value}))},className:$r("CONTACT_EXECUTION","step2Hospital","mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-indigo-300")}),Dr.step2Hospital?n.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:Dr.step2Hospital}):null]}),n.jsxs("label",{className:"text-[11px] text-slate-600",children:[" ()",n.jsx("input",{ref:kr("step2BookingAt"),type:"datetime-local",value:fc(We.bookingAt),onChange:Se=>{qr("CONTACT_EXECUTION","step2BookingAt"),$t(pt=>({...pt,bookingAt:mc(Se.target.value)||pt.bookingAt}))},className:$r("CONTACT_EXECUTION","step2BookingAt","mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-indigo-300")}),Dr.step2BookingAt?n.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:Dr.step2BookingAt}):null]})]}),n.jsxs("div",{ref:kr("step2TestSelection"),className:de("grid grid-cols-3 gap-2 rounded-md border border-slate-200 bg-white p-2 text-[11px] text-slate-700",Dr.step2TestSelection?"border-rose-300 bg-rose-50":""),children:[n.jsxs("label",{className:"flex items-center gap-1",children:[n.jsx("input",{type:"checkbox",checked:We.testBiomarker,onChange:Se=>{qr("CONTACT_EXECUTION","step2TestSelection"),$t(pt=>({...pt,testBiomarker:Se.target.checked}))}}),""]}),n.jsxs("label",{className:"flex items-center gap-1",children:[n.jsx("input",{type:"checkbox",checked:We.testBrainImaging,onChange:Se=>{qr("CONTACT_EXECUTION","step2TestSelection"),$t(pt=>({...pt,testBrainImaging:Se.target.checked}))}}),""]}),n.jsxs("label",{className:"flex items-center gap-1",children:[n.jsx("input",{type:"checkbox",checked:We.testOther,onChange:Se=>{qr("CONTACT_EXECUTION","step2TestSelection"),$t(pt=>({...pt,testOther:Se.target.checked}))}})," "]})]}),Dr.step2TestSelection?n.jsx("p",{className:"text-[10px] font-semibold text-rose-600",children:Dr.step2TestSelection}):null,n.jsxs("details",{open:ja,onToggle:Se=>oo(Se.target.open),className:"rounded-md border border-slate-200 bg-white p-2",children:[n.jsx("summary",{className:"cursor-pointer text-[11px] font-semibold text-slate-700",children:" ()"}),n.jsxs("div",{className:"mt-2 grid grid-cols-1 gap-2 md:grid-cols-2",children:[n.jsxs("label",{className:"text-[11px] text-slate-600",children:["",n.jsx("input",{value:We.orgPhone,onChange:Se=>$t(pt=>({...pt,orgPhone:Se.target.value})),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-indigo-300"})]}),n.jsxs("label",{className:"text-[11px] text-slate-600",children:[" ",n.jsx("input",{type:"datetime-local",value:fc(We.bookingAltAt),onChange:Se=>$t(pt=>({...pt,bookingAltAt:mc(Se.target.value)||pt.bookingAltAt})),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-indigo-300"})]})]}),n.jsxs("label",{className:"mt-2 block text-[11px] text-slate-600",children:["/",n.jsx("textarea",{value:We.prepGuide,onChange:Se=>$t(pt=>({...pt,prepGuide:Se.target.value})),className:"mt-1 h-14 w-full rounded-md border border-gray-200 px-2 py-1 text-[11px] outline-none focus:border-indigo-300"})]}),n.jsxs("label",{className:"mt-2 block text-[11px] text-slate-600",children:[" ",n.jsx("textarea",{value:We.note,onChange:Se=>$t(pt=>({...pt,note:Se.target.value})),className:"mt-1 h-16 w-full rounded-md border border-gray-200 px-2 py-1 text-[11px] outline-none focus:border-indigo-300"})]})]}),n.jsxs("div",{className:"rounded-md border border-indigo-200 bg-white p-2",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-1",children:[n.jsx("button",{type:"button",onClick:zg,className:"rounded border border-indigo-200 bg-indigo-50 px-2 py-1 text-[10px] font-semibold text-indigo-700",children:"RAG  "}),Ve?n.jsxs(n.Fragment,{children:[n.jsx("button",{type:"button",onClick:cN,className:"rounded border border-emerald-200 bg-emerald-50 px-2 py-1 text-[10px] font-semibold text-emerald-700",children:""}),n.jsx("button",{type:"button",onClick:dN,className:"rounded border border-slate-200 bg-white px-2 py-1 text-[10px] font-semibold text-slate-700",children:""})]}):null]}),Ve?n.jsxs("div",{className:"mt-2 rounded border border-slate-200 bg-slate-50 p-2 text-[10px] text-slate-600",children:[n.jsxs("p",{className:"font-semibold text-slate-800",children:[" ( )   ",Ve.confidenceLabel]}),n.jsxs("p",{className:"mt-1",children:[" : ",Ve.changedFields.join(", ")||""]}),Ve.reasonSnippets.map(Se=>n.jsxs("p",{className:"mt-0.5",children:["- ",Se]},Se))]}):null]}),n.jsxs("div",{className:"rounded-md border border-emerald-200 bg-emerald-50 p-2",children:[n.jsx("p",{className:"text-[10px] text-emerald-800",children:le?"  :   +   +   +   ":"  :     +   +   +   "}),n.jsx("button",{type:"button",onClick:uN,disabled:!V,className:"mt-2 w-full rounded-md border border-emerald-300 bg-white px-2 py-1.5 text-[11px] font-semibold text-emerald-700 disabled:cursor-not-allowed disabled:opacity-60",children:le?"   ":"   "}),V?null:n.jsx("p",{className:"mt-1 text-[10px] text-amber-700",children:"    ."})]}),n.jsxs("label",{className:"flex items-center gap-1 text-[11px] font-semibold text-slate-700",children:[n.jsx("input",{type:"checkbox",checked:ji,onChange:Se=>ri(Se.target.checked)})," /    (Step3  )"]}),ji?n.jsxs("div",{className:"rounded-md border border-slate-200 bg-white p-2",children:[n.jsxs("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-2",children:[n.jsxs("label",{className:"text-[11px] text-slate-600",children:[" ()",n.jsx("input",{ref:kr("step2PerformedAt"),type:"datetime-local",value:fc(We.resultPerformedAt),onChange:Se=>{qr("CONTACT_EXECUTION","step2PerformedAt"),$t(pt=>({...pt,resultPerformedAt:mc(Se.target.value)||""}))},className:$r("CONTACT_EXECUTION","step2PerformedAt","mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-indigo-300")}),Dr.step2PerformedAt?n.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:Dr.step2PerformedAt}):null]}),n.jsxs("label",{className:"text-[11px] text-slate-600",children:[" ",n.jsxs("select",{value:We.resultLabel,onChange:Se=>$t(pt=>({...pt,resultLabel:Se.target.value})),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-indigo-300",children:[n.jsx("option",{value:" ",children:" "}),n.jsx("option",{value:" ",children:" "}),n.jsx("option",{value:"",children:""})]})]}),n.jsxs("label",{className:"text-[11px] text-slate-600",children:[" (",le?"":"",")",n.jsx("input",{ref:kr("step2BiomarkerResult"),value:We.biomarkerResultText??"",onChange:Se=>{qr("CONTACT_EXECUTION","step2BiomarkerResult"),$t(pt=>({...pt,biomarkerResultText:Se.target.value}))},className:$r("CONTACT_EXECUTION","step2BiomarkerResult","mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-indigo-300")}),Dr.step2BiomarkerResult?n.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:Dr.step2BiomarkerResult}):null]}),n.jsxs("label",{className:"text-[11px] text-slate-600",children:[" (",le?"":"",")",n.jsx("input",{ref:kr("step2ImagingResult"),value:We.imagingResultText??"",onChange:Se=>{qr("CONTACT_EXECUTION","step2ImagingResult"),$t(pt=>({...pt,imagingResultText:Se.target.value}))},className:$r("CONTACT_EXECUTION","step2ImagingResult","mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-indigo-300")}),Dr.step2ImagingResult?n.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:Dr.step2ImagingResult}):null]})]}),n.jsxs("label",{className:"mt-2 block text-[11px] text-slate-600",children:[" ()",n.jsx("textarea",{ref:kr("step2ResultSummary"),value:We.resultSummary,onChange:Se=>{qr("CONTACT_EXECUTION","step2ResultSummary"),$t(pt=>({...pt,resultSummary:Se.target.value}))},className:$r("CONTACT_EXECUTION","step2ResultSummary","mt-1 h-16 w-full rounded-md border border-gray-200 px-2 py-1 text-[11px] outline-none focus:border-indigo-300"),placeholder:"  ."}),Dr.step2ResultSummary?n.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:Dr.step2ResultSummary}):null]}),n.jsx("button",{type:"button",onClick:()=>{const Se={};if(We.resultPerformedAt||(Se.step2PerformedAt="   ."),le&&!We.biomarkerResultText?.trim()&&(Se.step2BiomarkerResult="  ."),le&&!We.imagingResultText?.trim()&&(Se.step2ImagingResult="  ."),We.resultSummary.trim()||(Se.step2ResultSummary="  ."),Object.keys(Se).length>0){Ca("CONTACT_EXECUTION",{...Nr.CONTACT_EXECUTION,...Se}),Me.error("    .");return}Kn(pt=>{const or={...pt.CONTACT_EXECUTION??{}};return delete or.step2PerformedAt,delete or.step2BiomarkerResult,delete or.step2ImagingResult,delete or.step2ResultSummary,{...pt,CONTACT_EXECUTION:or}}),mo("APPLY_RESULT"),Me.success("  .")},className:"mt-2 rounded border border-indigo-200 bg-indigo-50 px-3 py-1 text-[11px] font-semibold text-indigo-700",children:" / "})]}):null]})]}),n.jsxs("div",{className:"mt-3 rounded-md border border-gray-200 bg-gray-50 p-2",children:[n.jsx("p",{className:"text-[11px] font-semibold text-slate-700",children:"  "}),n.jsxs("div",{className:"mt-1 space-y-1",children:[(S.stage3?.recommendedActions??[]).filter(Se=>Se.requiresApproval).map(Se=>n.jsxs("div",{className:"flex items-center justify-between rounded border border-slate-200 bg-white px-2 py-1",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-[11px] font-semibold text-slate-800",children:Se.title}),n.jsx("p",{className:"text-[10px] text-slate-500",children:Se.reason})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("button",{onClick:()=>bf(Se.id,"APPROVED"),className:"rounded border border-emerald-200 bg-emerald-50 px-1.5 py-0.5 text-[10px] font-semibold text-emerald-700",children:""}),n.jsx("button",{onClick:()=>bf(Se.id,"HOLD"),className:"rounded border border-slate-200 bg-white px-1.5 py-0.5 text-[10px] font-semibold text-slate-700",children:""})]})]},Se.id)),(S.stage3?.recommendedActions??[]).filter(Se=>Se.requiresApproval).length===0?n.jsx("p",{className:"rounded border border-slate-200 bg-white px-2 py-1 text-[10px] text-slate-500",children:"   ."}):null]})]})]})})():null,rt==="RESPONSE_HANDLING"?l?n.jsxs("section",{className:"rounded-lg border border-gray-200 bg-white p-4",children:[n.jsx("h4",{className:"text-sm font-bold text-slate-900",children:" "}),n.jsx("p",{className:"mt-1 text-[11px] text-gray-600",children:"/MCI/    .     ."}),n.jsx("div",{className:"mt-3",children:n.jsx(db,{items:cb.RESPONSE_HANDLING})}),(()=>{const I=ot.filter(le=>le.key==="classification"||le.key==="rationale"||le.key==="overrideReason"||le.key==="mmse"||le.key==="cdr"||le.key==="neuro"||le.key==="specialist"),V=[...S.timeline.filter(le=>le.type==="STAGE2_PLAN_CONFIRMED"||le.type==="STAGE2_RESULTS_RECORDED"||le.type==="DIFF_RESULT_APPLIED"||le.type==="STAGE2_CLASS_CONFIRMED").slice(0,6).map(le=>({at:le.at,label:Gb(le),summary:le.summary})),...mn.updatedAt?[{at:mn.updatedAt,label:mn.status==="RUNNING"?"  ":mn.status==="DONE"?"  ":mn.status==="FAILED"?"  ":"  ",summary:mn.status==="DONE"?`  ${mn.recommendedLabel??"-"}`:"      ."}]:[]].sort((le,tt)=>new Date(le.at).getTime()-new Date(tt.at).getTime()).slice(-6),ee=mn.status==="DONE"?"bg-emerald-50 border-emerald-200 text-emerald-700":mn.status==="RUNNING"?"bg-blue-50 border-blue-200 text-blue-700":mn.status==="FAILED"?"bg-rose-50 border-rose-200 text-rose-700":"bg-slate-100 border-slate-200 text-slate-700",me=Ii&&Jo;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"mt-3 rounded-md border border-slate-200 bg-slate-50 p-3",children:[n.jsx("p",{className:"text-xs font-semibold text-slate-800",children:"Stage2  "}),n.jsx("div",{className:"mt-2 space-y-1.5",children:V.length>0?V.map(le=>n.jsxs("div",{className:"rounded border border-slate-200 bg-white px-2 py-1.5 text-[10px]",children:[n.jsx("p",{className:"font-semibold text-slate-700",children:le.label}),n.jsx("p",{className:"text-slate-500",children:mt(le.at)}),n.jsx("p",{className:"text-slate-600",children:le.summary})]},`${le.at}-${le.label}`)):n.jsx("p",{className:"rounded border border-slate-200 bg-white px-2 py-1 text-[10px] text-slate-500",children:"   ."})})]}),n.jsxs("div",{className:"mt-3 rounded-md border border-indigo-200 bg-indigo-50 p-3",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[n.jsx("p",{className:"text-xs font-semibold text-indigo-900",children:"  "}),n.jsx("span",{className:de("rounded border px-2 py-0.5 text-[10px] font-semibold",ee),children:mn.status})]}),n.jsxs("p",{className:"mt-1 text-[11px] text-indigo-800",children:[" : ",li??"","   ",mt(mn.updatedAt)]}),n.jsx("p",{className:"text-[10px] text-indigo-700",children:"   ,      ."})]}),I.length>0?n.jsxs("div",{className:"mt-3 rounded-md border border-rose-200 bg-rose-50 p-2",children:[n.jsx("p",{className:"text-[11px] font-semibold text-rose-700",children:"/ "}),n.jsx("ul",{className:"mt-1 space-y-1",children:I.map(le=>n.jsx("li",{children:n.jsxs("button",{type:"button",onClick:()=>nt(le.key),className:"text-[11px] text-rose-700 underline decoration-dotted underline-offset-2",children:["- ",le.message]})},le.key))})]}):null,n.jsx("div",{className:"mt-3 rounded-md border border-slate-200 bg-slate-50 p-3",children:me?n.jsx(YK,{probs:Jo,predictedLabel:li??Ur,mciSeverity:Ks,mciScore:(li??Ur)==="MCI"?Ks===""?82:Ks===""?34:58:void 0}):n.jsx(Du,{stage:2,missing:v,onOpenStep:xo})}),n.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-2 md:grid-cols-2",children:[n.jsxs("label",{className:"text-[11px] text-slate-600",children:[" ",n.jsxs("select",{ref:fe("classification"),value:Ur,onChange:le=>{const tt=le.target.value;Ue("classification"),Ue("overrideReason"),qo(!0),Ei(tt),li&&tt===li&&Wt("")},className:lt("classification","mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-xs outline-none focus:border-blue-300"),children:[n.jsx("option",{value:"",children:""}),n.jsx("option",{value:"MCI",children:"MCI"}),n.jsx("option",{value:"",children:""})]}),Hr.classification?n.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:Hr.classification}):null,zo?n.jsx("p",{className:"mt-1 text-[10px] font-semibold text-indigo-700",children:"   ."}):null]}),n.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 px-3 py-2 text-[11px] text-slate-700",children:[n.jsxs("p",{className:"font-semibold",children:[n.jsx(a0,{term:"ANN"})," "]}),n.jsx("p",{className:"mt-1",children:Ur==="MCI"?Ks??" ":"-"})]})]}),Cf?n.jsxs("label",{className:"mt-2 block text-[11px] text-slate-600",children:["    ()",n.jsx("textarea",{ref:fe("overrideReason"),value:ys,onChange:le=>{Ue("overrideReason"),Wt(le.target.value)},className:lt("overrideReason","mt-1 h-16 w-full rounded-md border border-gray-200 px-2 py-1 text-xs outline-none focus:border-blue-300"),placeholder:"      ."}),Hr.overrideReason?n.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:Hr.overrideReason}):null]}):null,n.jsxs("label",{className:"mt-3 block text-[11px] text-slate-600",children:["  1()",n.jsx("textarea",{ref:fe("rationale"),value:Ea,onChange:le=>{Ue("rationale"),X(le.target.value)},className:lt("rationale","mt-1 h-20 w-full rounded-md border border-gray-200 px-2 py-1 text-xs outline-none focus:border-blue-300"),placeholder:": MMSE __, CDR/GDS __,  __   __ ."}),Hr.rationale?n.jsx("p",{className:"mt-1 text-[10px] font-semibold text-rose-600",children:Hr.rationale}):null]}),ci?null:n.jsxs("div",{className:"mt-2 rounded-md border border-amber-200 bg-amber-50 px-3 py-2 text-[11px] text-amber-800",children:[Fr.map(le=>n.jsxs("p",{children:["- ",le]},le)),fu?n.jsx("p",{children:"-      ."}):null,n.jsx("button",{type:"button",onClick:xo,className:"mt-2 rounded border border-amber-300 bg-white px-2 py-1 text-[10px] font-semibold text-amber-700",children:"   "})]}),n.jsxs("button",{onClick:nu,disabled:!ci,className:"mt-3 inline-flex items-center gap-1 rounded-md bg-[#163b6f] px-3 py-1.5 text-xs font-semibold text-white hover:bg-[#112f5a] disabled:opacity-50",children:[n.jsx(Ol,{size:13}),"  "]})]})})()]}):n.jsxs("section",{className:"rounded-lg border border-gray-200 bg-white p-4",children:[n.jsx("h4",{className:"text-sm font-bold text-slate-900",children:"    /"}),n.jsx("p",{className:"mt-1 text-[11px] text-gray-600",children:" /        ."}),tn?N?Yc?n.jsxs("div",{className:"mt-3 space-y-3",children:[n.jsxs("div",{className:"rounded-md border border-indigo-200 bg-indigo-50 p-3",children:[n.jsxs("p",{className:"text-xs font-semibold text-indigo-900",children:["2   ",_o(S.stage3?.transitionRisk.risk2y_now??0),"%"]}),n.jsxs("p",{className:"mt-1 text-[11px] text-indigo-800",children:[" ",xp(S.stage3?.transitionRisk.risk2y_now??0),"   ",S.stage3?.transitionRisk.trend,"  "," ",S.stage3?.transitionRisk.modelVersion]}),S.stage3?n.jsx(dz,{risk:S.stage3.transitionRisk,stage2OpsView:!1}):null]}),n.jsxs("div",{className:"grid grid-cols-1 gap-3 xl:grid-cols-2",children:[n.jsxs("label",{className:"text-[11px] text-slate-600",children:["  ()",n.jsx("textarea",{value:Dt.memo,onChange:I=>ir(V=>({...V,memo:I.target.value})),className:"mt-1 h-24 w-full rounded-md border border-gray-200 px-2 py-1 text-[11px] outline-none focus:border-indigo-300",placeholder:"  /,     ."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[11px] text-slate-600",children:" "}),n.jsx("select",{value:Dt.nextAction,onChange:I=>ir(V=>({...V,nextAction:I.target.value})),className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-indigo-300",children:Object.entries(lb).map(([I,V])=>n.jsx("option",{value:I,children:V},I))}),n.jsx("button",{onClick:()=>fo({summary:` : ${Dt.memo||" "}   : ${lb[Dt.nextAction]}`,nextAction:Dt.nextAction}),className:"mt-3 rounded-md border border-indigo-200 bg-indigo-50 px-3 py-1.5 text-[11px] font-semibold text-indigo-700 hover:bg-indigo-100",children:"  "})]})]})]}):n.jsxs("div",{className:"mt-3 rounded-md border border-amber-200 bg-amber-50 p-3 text-[11px] text-amber-800",children:["  ",S.stage3?.diffPathStatus??"NONE"," . STEP2  /    ."]}):n.jsxs("div",{className:"mt-3 rounded-md border border-blue-200 bg-blue-50 p-3 text-[11px] text-blue-800",children:["     .",n.jsx("button",{type:"button",onClick:()=>mo("APPLY_RESULT"),className:"mt-2 block rounded border border-blue-300 bg-white px-2 py-1 text-[10px] font-semibold text-blue-700",children:"  "})]}):n.jsx("div",{className:"mt-3",children:n.jsx(Du,{stage:3,missing:j.length>0?j:["  "," "," "," "],onOpenStep:pu})})]}):null,rt==="FOLLOW_UP"?l?n.jsxs("section",{className:"space-y-3 rounded-lg border border-gray-200 bg-white p-4",children:[n.jsx("h4",{className:"text-sm font-bold text-slate-900",children:"  "}),n.jsx("p",{className:"text-[11px] text-gray-600",children:"     /Stage3 /   1  ."}),n.jsx(db,{items:cb.FOLLOW_UP}),n.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 p-3",children:[n.jsx("p",{className:"text-xs font-semibold text-slate-800",children:"  "}),n.jsxs("p",{className:"mt-1 text-[11px] text-slate-600",children:[" : ",Xn,Xn==="MCI"&&ad?` (${ad})`:""]}),n.jsxs("div",{className:"mt-2 grid grid-cols-1 gap-2 md:grid-cols-3",children:[n.jsx("button",{onClick:()=>Kl("FOLLOWUP_2Y","  2    "),disabled:!vs||Xn!=="",className:"rounded-md border border-slate-200 bg-white px-2 py-1.5 text-[11px] font-semibold text-slate-700 disabled:opacity-50",children:"  2  "}),n.jsx("button",{onClick:()=>Kl("STAGE3","MCI/  Stage3  "),disabled:!vs||!AA(Xn),className:"rounded-md border border-blue-200 bg-blue-50 px-2 py-1.5 text-[11px] font-semibold text-blue-700 disabled:opacity-50",children:"MCI  Stage3 "}),n.jsx("button",{onClick:()=>Kl("DIFF_PATH","    "),disabled:!vs||Xn!=="",className:"rounded-md border border-rose-200 bg-rose-50 px-2 py-1.5 text-[11px] font-semibold text-rose-700 disabled:opacity-50",children:"   "})]})]}),n.jsxs("div",{className:"rounded-md border border-indigo-200 bg-indigo-50 p-3",children:[n.jsx("p",{className:"text-xs font-semibold text-indigo-900",children:" ()"}),n.jsx("p",{className:"mt-1 text-[11px] text-indigo-800",children:" /     .   /  ."})]})]}):n.jsxs("section",{className:"space-y-3 rounded-lg border border-gray-200 bg-white p-4",children:[n.jsx("h4",{className:"text-sm font-bold text-slate-900",children:" ()"}),n.jsx("p",{className:"text-[11px] text-gray-600",children:"   UI  /    ."}),n.jsxs("div",{className:"rounded-md border border-slate-200 bg-white p-3",children:[n.jsxs("p",{className:"mb-2 text-[11px] text-slate-600",children:["  ,    UI / .",n.jsx("span",{className:"ml-1 font-semibold text-slate-800",children:"  3  "}),"  ."]}),y?n.jsx(cwe,{caseId:S.header.caseId,stage:3,resultLabel:nd,mciSeverity:Yl,riskTags:S.header.riskGuardrails??[],actorName:S.header.assigneeName}):n.jsx(Du,{stage:2,missing:v,onOpenStep:xo})]}),n.jsxs("div",{className:"rounded-md border border-indigo-200 bg-indigo-50 p-3",children:[n.jsx("p",{className:"text-xs font-semibold text-indigo-900",children:"  "}),n.jsxs("div",{className:"mt-2 grid grid-cols-1 gap-2 md:grid-cols-2",children:[n.jsxs("label",{className:"text-[11px] text-indigo-800",children:["  ",n.jsx("input",{type:"datetime-local",value:fc(St.nextTrackingAt),onChange:I=>nn(V=>({...V,nextTrackingAt:mc(I.target.value)||V.nextTrackingAt})),className:"mt-1 h-8 w-full rounded-md border border-indigo-200 px-2 text-[11px] outline-none focus:border-indigo-400"})]}),n.jsxs("label",{className:"text-[11px] text-indigo-800",children:[" ",n.jsx("input",{type:"time",value:St.reminderTime,onChange:I=>nn(V=>({...V,reminderTime:I.target.value})),className:"mt-1 h-8 w-full rounded-md border border-indigo-200 px-2 text-[11px] outline-none focus:border-indigo-400"})]})]})]})]}):null,n.jsxs("div",{className:"sticky bottom-0 z-10 flex flex-wrap items-center justify-end gap-2 rounded-lg border border-slate-200 bg-white/95 p-3 backdrop-blur",children:[n.jsx("button",{onClick:ws,className:"rounded-md border border-gray-200 px-3 py-1.5 text-xs font-semibold text-gray-700",children:""}),n.jsx("button",{onClick:()=>wn(-1),disabled:Vl<=0,className:"rounded-md border border-gray-200 px-3 py-1.5 text-xs font-semibold text-gray-700 disabled:opacity-40",children:""}),n.jsx("button",{onClick:()=>wn(1),disabled:Vl<0||Vl>=Gs.length-1,className:"rounded-md border border-gray-200 px-3 py-1.5 text-xs font-semibold text-gray-700 disabled:opacity-40",children:""}),n.jsx("button",{onClick:ln,className:"rounded-md bg-[#15386a] px-3 py-1.5 text-xs font-semibold text-white",children:" "})]})]})})}),n.jsx(Gu,{open:!o&&!!F,onOpenChange:I=>{I||fi()},children:n.jsx(Ku,{className:"w-[96vw] max-w-[96vw] sm:max-w-[1700px] max-h-[92vh] overflow-y-auto p-4",children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"rounded-lg border border-indigo-200 bg-indigo-50 p-3",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-bold text-indigo-900",children:[i?"Stage2 ":"Stage1 ","  ",cu?.title??" "]}),n.jsx("p",{className:"text-[11px] text-indigo-700",children:i?"        .":"        ."})]}),n.jsxs("span",{className:"rounded-md border border-indigo-300 bg-white px-2 py-1 text-[11px] font-semibold text-indigo-700",children:[" ",Xc+1,"/",Qo.length]})]}),n.jsx("div",{className:"mt-2 grid grid-cols-2 gap-1.5 md:grid-cols-4",children:Qo.map((I,V)=>{const ee=In.find(le=>le.id===I),me=F===I;return n.jsxs("button",{type:"button",onClick:()=>{const le=nm(In,I);if(le){Me.error(le);return}Ta(I)},className:de("rounded-md border px-2 py-1.5 text-left text-[11px]",me?"border-indigo-300 bg-white text-indigo-800":"border-indigo-100 bg-indigo-50/60 text-indigo-700"),children:[n.jsxs("p",{className:"font-semibold",children:["STEP ",V+1]}),n.jsx("p",{className:"mt-0.5 truncate",children:ee?.title??I})]},I)})})]}),F==="PRECHECK"?n.jsxs("section",{className:"rounded-lg border border-gray-200 bg-white p-4",children:[n.jsx("h3",{className:"text-sm font-bold text-slate-900",children:i?"2   ":"  "}),n.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:i?"/  ,      .":"  ,       ."}),n.jsx("div",{className:"mt-3",children:n.jsx($Ee,{gates:S.policyGates,onFix:su,mode:a})})]}):null,F==="CONTACT_EXECUTION"?n.jsxs("section",{className:"space-y-3 rounded-lg border border-gray-200 bg-white p-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:i?"/ ":" "}),n.jsx("p",{className:"text-[11px] text-slate-600",children:i?"       .":"     ."})]}),n.jsx("span",{className:de("rounded-full border px-2.5 py-1 text-[11px] font-semibold",MT[S.contactExecutor]),children:Zi[S.contactExecutor]})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-3 xl:grid-cols-[minmax(340px,0.8fr)_minmax(600px,1.2fr)]",children:[n.jsx(PEe,{loading:lo,recommendations:aa,selectedId:sa,editedScript:Rn,onSelect:eh,onEditScript:Za}),S.contactExecutor==="HUMAN"?n.jsx(E7,{stageLabel:d,templates:Lg,defaultVars:{centerName:EA,centerPhone:il,bookingLink:N0(S.reservationInfo)},caseId:S.header.caseId,citizenPhone:e?.profile.phone?i||o?e.profile.phone:yl(e.profile.phone):"010-****-1234",guardianPhone:e?.profile.guardianPhone?i||o?e.profile.guardianPhone:yl(e.profile.guardianPhone):void 0,callScripts:Mg,onSmsSent:I=>{if(I.type==="BOOKING"&&!S.reservationInfo){Me.error("       ."),Je("  :   ");return}st({type:"SMS_SENT",at:vt(),templateId:I.templateLabel,status:I.status==="SENT"?"DELIVERED":I.status==="SCHEDULED"?"PENDING":"FAILED",by:S.header.assigneeName}),Je(`${d}  ${I.mode==="NOW"?"":""}: ${I.templateLabel} (${I.status})`),I.status==="SENT"&&(au("SMS"),Fe(dt(48)),_(V=>{const ee={...V.contactExecution,status:"SENT",lastSentAt:vt(),retryCount:V.contactExecution.retryCount+1};return{...V,contactExecution:ee,contactFlowSteps:zi(ee,V.preTriageResult,V.linkageStatus,a)}}))},onConsultation:(I,V,ee)=>{st({type:"CALL_ATTEMPT",at:vt(),result:"SUCCESS",note:I||void 0,by:S.header.assigneeName});const me=ii?` /  : ${ii.title}`:"";Je(`${d}  : ${ee}${I?` (${I.slice(0,60)})`:""}${me}`),V==="CONTACT"&&au("CALL"),_(le=>{const tt={...le.contactExecution,status:"WAITING_RESPONSE",lastSentAt:vt(),retryCount:le.contactExecution.retryCount+1};return{...le,contactExecution:tt,contactFlowSteps:zi(tt,le.preTriageResult,le.linkageStatus,a)}}),Me.success("  .")}}):n.jsxs("section",{className:"rounded-xl border border-violet-200 bg-violet-50/70 p-4",children:[n.jsx("h4",{className:"text-sm font-bold text-violet-900",children:"Agent   "}),n.jsx("p",{className:"mt-1 text-[11px] text-violet-700",children:"       .      ."}),n.jsxs("div",{className:"mt-3 rounded-lg border border-violet-200 bg-white p-3 text-xs text-slate-700",children:[n.jsxs("p",{children:[" : ",n.jsx("strong",{children:nz[ur.status]})]}),n.jsxs("p",{className:"mt-1",children:[" : ",n.jsx("strong",{children:rs==="PASS"?"":rs==="NEEDS_CHECK"?" ":""})]}),n.jsxs("p",{className:"mt-1",children:[" : ",n.jsx("strong",{children:ur.attemptNo||S.contactExecution.retryCount+1})]}),n.jsxs("p",{children:[" :"," ",n.jsx("strong",{children:S.agentExecutionLogs[0]?`${mt(S.agentExecutionLogs[0].at)}  ${h5[S.agentExecutionLogs[0].result]}`:" "})]}),ur.idempotencyKey?n.jsxs("p",{className:"mt-1",children:["  : ",n.jsx("strong",{children:ur.idempotencyKey})]}):null,ur.lastError?n.jsxs("p",{className:"mt-1 text-red-700",children:[" : ",n.jsx("strong",{children:ur.lastError})]}):null,ur.nextRetryAt?n.jsxs("p",{className:"mt-1",children:[" : ",n.jsx("strong",{children:mt(ur.nextRetryAt)})]}):null,n.jsx("p",{className:"mt-1",children:"STEP3/STEP4     ."})]}),n.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-2 md:grid-cols-2",children:[n.jsx("button",{onClick:()=>Me(" Agent   ."),className:"rounded-md border border-violet-200 bg-violet-50 px-3 py-2 text-xs font-semibold text-violet-700",children:"Agent   "}),(ur.status==="FAILED"||ur.status==="CANCELED")&&rs==="PASS"?n.jsx("button",{onClick:_f,className:"rounded-md border border-emerald-200 bg-emerald-50 px-3 py-2 text-xs font-semibold text-emerald-700",children:" "}):null,ur.status==="FAILED"&&rs==="PASS"?n.jsx("button",{onClick:hu,className:"rounded-md border border-amber-200 bg-amber-50 px-3 py-2 text-xs font-semibold text-amber-700",children:" "}):null,ur.status==="QUEUED"||ur.status==="RUNNING"?n.jsx("button",{onClick:()=>Es({actor:"operator",summary:"  Agent  .",moveToHuman:!1}),className:"rounded-md border border-rose-200 bg-rose-50 px-3 py-2 text-xs font-semibold text-rose-700",children:" "}):null,n.jsx("button",{onClick:()=>yf("HUMAN"),className:"rounded-md border border-slate-300 bg-white px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-50",children:"   "})]})]})]})]}):null,F==="RESPONSE_HANDLING"?n.jsxs("section",{className:"rounded-lg border border-gray-200 bg-white p-4",children:[n.jsx("h3",{className:"text-sm font-bold text-slate-900",children:" "}),n.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:"     //   ."}),n.jsx("div",{className:"mt-3",children:n.jsx(_A,{expanded:!0,onToggle:fi,executionStatus:S.contactExecution.status,lastSentAt:S.contactExecution.lastSentAt,assigneeName:S.header.assigneeName,selectedOutcomeCode:yr,onSelectOutcomeCode:ql,reasonTags:sn,onToggleReasonTag:Yo,rejectReasonDraft:fr,onRejectReasonDraftChange:Nf,noResponsePlanDraft:Ba,onNoResponsePlanDraftChange:zc,outcomeNote:zr,onOutcomeNoteChange:ou,isSaving:Ti,submitError:Fc,validationError:wi,onClearError:si,onReset:qc,onConfirm:Wc,hasUnsavedChanges:xs,lastSavedAt:Ul,onOpenHandoffMemo:()=>la(!0),mode:a})})]}):null,F==="FOLLOW_UP"?n.jsxs("section",{className:"space-y-3 rounded-lg border border-gray-200 bg-white p-4",children:[n.jsx("h3",{className:"text-sm font-bold text-slate-900",children:i?"/":" "}),n.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:i?"   ,   ,    .":"  ///     ."}),n.jsx(DEe,{draft:Pn,reservationInfo:S.reservationInfo,onChange:Ja,onSave:vf}),n.jsx(B7,{linkageStatus:S.linkageStatus,reservationInfo:S.reservationInfo,onAction:iu,mode:a}),n.jsx(LEe,{mode:a,execution:S.contactExecution,strategy:Hs,preTriageReady:nh,strategyDecided:!!S.preTriageResult?.strategy,hasVulnerableGuardrail:!!S.header.riskGuardrails?.length,linkageStatus:S.linkageStatus,onOpenSmsModal:()=>Mi("CONTACT_EXECUTION"),onOpenOutcomeTriage:()=>Mi("RESPONSE_HANDLING"),onOpenHandoffMemo:()=>la(!0),onOpenStrategyOverride:()=>Mt(!0)}),n.jsx(U7,{expanded:ai||!!S.contactExecution.handoffMemo,onToggle:()=>la(I=>!I),memoText:Ht,onMemoChange:ca,onSave:()=>{Je(`  : ${Ht.slice(0,80)}...`),Me.success("  ."),la(!1)},mode:a}),n.jsx(kA,{level:S.interventionLevel,statusLabel:S.header.statusLabel,guides:Vp,onChangeLevel:zl,onHold:()=>Hc(""),onExclude:()=>Hc(" "),mode:a})]}):null,n.jsxs("div",{className:"sticky bottom-0 z-10 flex flex-wrap items-center justify-end gap-2 rounded-lg border border-slate-200 bg-white/95 p-3 backdrop-blur",children:[n.jsx("button",{onClick:fi,className:"rounded-md border border-gray-200 px-3 py-1.5 text-xs font-semibold text-gray-700",children:""}),n.jsx("button",{onClick:()=>Zn(-1),disabled:Xc<=0,className:"rounded-md border border-gray-200 px-3 py-1.5 text-xs font-semibold text-gray-700 disabled:opacity-40",children:""}),n.jsx("button",{onClick:()=>Zn(1),disabled:Xc<0||Xc>=Qo.length-1,className:"rounded-md border border-gray-200 px-3 py-1.5 text-xs font-semibold text-gray-700 disabled:opacity-40",children:""}),n.jsx("button",{onClick:mi,className:"rounded-md bg-[#15386a] px-3 py-1.5 text-xs font-semibold text-white",children:" "})]})]})})}),n.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[n.jsxs("div",{className:"flex items-center justify-between border-b border-gray-100 pb-2",children:[n.jsxs("h3",{className:"text-sm font-bold text-slate-900 flex items-center gap-2",children:[n.jsx(ta,{size:15,className:"text-slate-500"}),"    "]}),n.jsx("span",{className:"rounded-full border border-emerald-200 bg-emerald-50 px-2 py-0.5 text-[11px] font-semibold text-emerald-700",children:"  "})]}),n.jsx("div",{className:"mt-3 overflow-x-auto",children:n.jsxs("table",{className:"min-w-full border-collapse text-xs",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-gray-50 text-gray-600",children:[n.jsx("th",{className:"border border-gray-200 px-3 py-2 text-left font-semibold",children:""}),n.jsx("th",{className:"border border-gray-200 px-3 py-2 text-left font-semibold",children:""}),n.jsx("th",{className:"border border-gray-200 px-3 py-2 text-left font-semibold",children:""}),n.jsx("th",{className:"border border-gray-200 px-3 py-2 text-left font-semibold",children:""})]})}),n.jsx("tbody",{children:O.map(I=>{const[V,...ee]=I.message.split(":"),me=ee.join(":").trim();return n.jsxs("tr",{className:"odd:bg-white even:bg-gray-50/60",children:[n.jsx("td",{className:"border border-gray-200 px-3 py-2 text-gray-600",children:I.at}),n.jsx("td",{className:"border border-gray-200 px-3 py-2 text-gray-700",children:I.actor}),n.jsx("td",{className:"border border-gray-200 px-3 py-2 font-semibold text-slate-800",children:V.trim()}),n.jsx("td",{className:"border border-gray-200 px-3 py-2 text-gray-600",children:me||"-"})]},I.id)})})]})})]}),n.jsx(eAe,{draft:ct,onClose:()=>Q(null),onChangeReason:I=>Q(V=>V&&{...V,reason:I}),onConfirm:th}),n.jsx(tAe,{draft:he,loading:Z,onClose:()=>{Z||$e(null)},onChangeResult:I=>$e(V=>V&&(V.mode==="CALL"?{...V,result:I}:{...V,result:I})),onChangeNote:I=>$e(V=>V&&{...V,note:I}),onConfirm:mN}),Et&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/35 p-4",children:n.jsxs("div",{className:"w-full max-w-md rounded-xl border border-gray-200 bg-white p-5 shadow-2xl",children:[n.jsxs("h3",{className:"text-sm font-bold text-slate-900 flex items-center gap-2",children:[n.jsx(Do,{size:15,className:"text-amber-600"}),"   "]}),n.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:fEe}),S.header.riskGuardrails&&S.header.riskGuardrails.length>0&&n.jsxs("div",{className:"mt-3 rounded-lg border border-amber-200 bg-amber-50 p-3",children:[n.jsxs("p",{className:"text-[11px] font-semibold text-amber-800 flex items-center gap-1",children:[n.jsx(Qa,{size:12}),"   "]}),n.jsx("ul",{className:"mt-1 space-y-0.5",children:S.header.riskGuardrails.map(I=>n.jsxs("li",{className:"text-[11px] text-amber-700",children:[" ",I]},I))}),br==="AI_FIRST"?n.jsx("p",{className:"mt-2 text-[10px] font-semibold text-amber-900",children:"          ."}):null]}),n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"text-[11px] font-semibold text-gray-600",children:"  "}),n.jsx("div",{className:"mt-1 grid grid-cols-2 gap-2",children:["HUMAN_FIRST","AI_FIRST"].map(I=>n.jsx("button",{onClick:()=>Er(I),className:de("rounded-lg border-2 px-3 py-2 text-xs font-semibold transition-colors",br===I?M7[I].replace("bg-","border-").split(" ")[0]+" "+M7[I]:"border-gray-200 bg-gray-50 text-gray-500"),children:Ad[I]},I))})]}),n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"text-[11px] font-semibold text-gray-600",children:"  ()"}),n.jsx("textarea",{value:Be,onChange:I=>tr(I.target.value),className:"mt-1 h-20 w-full rounded-lg border border-gray-200 px-2 py-1.5 text-xs outline-none focus:border-blue-400",placeholder:"    (  )"})]}),n.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[n.jsx("button",{onClick:()=>Mt(!1),className:"rounded-md border border-gray-200 px-3 py-1.5 text-xs font-semibold text-gray-700",children:""}),n.jsx("button",{onClick:Kc,disabled:!Be.trim(),className:"rounded-md bg-[#163b6f] px-3 py-1.5 text-xs font-semibold text-white disabled:bg-gray-300",children:"  "})]})]})})]})}function REe({strategy:e,strategyBadge:t,contactExecutor:r,executionStatus:a,lastSentAt:s,lastOutcome:i,retryCount:o,linkageStatus:l,memoCount:d,lastContactAt:u,timelineCount:p,preTriage:m,riskGuardrails:h,onOpenStrategyOverride:x,mode:y="stage1",stage2OpsView:N=!1}){const[v,j]=g.useState(null),E=y==="stage3",C=E&&N,A={NOT_STARTED:{label:"",tone:"text-gray-600"},SENT:{label:"",tone:"text-blue-700"},WAITING_RESPONSE:{label:"",tone:"text-amber-700"},RETRY_NEEDED:{label:"",tone:"text-orange-700"},HANDOFF_TO_HUMAN:{label:"",tone:"text-red-700"},PAUSED:{label:"",tone:"text-gray-600"},STOPPED:{label:"",tone:"text-red-700"},DONE:{label:"",tone:"text-emerald-700"}},S={NOT_CREATED:"",BOOKING_IN_PROGRESS:"",BOOKING_DONE:"",REFERRAL_CREATED:""},_=e==="HUMAN_FIRST"?" ":" ",O=t==="MANUAL_OVERRIDE"?"   ":"   ",D=[...(m?.triggers??[]).slice(0,4).map(L7),...(h??[]).slice(0,2)];e==="HUMAN_FIRST"&&D.length===0&&D.push("      .");const k=C?[{title:" ",value:l==="BOOKING_DONE"||l==="REFERRAL_CREATED"?"75%":"50%",sub:`  ${S[l]}   ${p}`,helperTitle:" ",helper:[` : ${mt(u)}`,`/ : ${S[l]}`,"  //    ."],tone:"border-blue-200 bg-blue-50 text-blue-700",icon:Do},{title:"/ ",value:l==="BOOKING_DONE"||l==="REFERRAL_CREATED"?"0":"1",sub:" /  ",helperTitle:" ",helper:[` : ${S[l]}`,"  Step2    .",` : ${o}`],tone:l==="BOOKING_DONE"||l==="REFERRAL_CREATED"?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-amber-200 bg-amber-50 text-amber-700",icon:Gn},{title:"  ",value:o>=3?"":o>=1?"":"",sub:` ${o}  ${T7(i)}`,helperTitle:" ",helper:[` : ${mt(s)}`,`  : ${A[a].label}`,"   /   ."],tone:o>=3?"border-red-200 bg-red-50 text-red-700":"border-slate-200 bg-slate-50 text-slate-700",icon:u0},{title:"  ",value:l==="BOOKING_DONE"?" ":"",sub:`${mt(u)}   ${d}`,helperTitle:" ",helper:["  : // ",` : ${p}`,"   /   ."],tone:l==="BOOKING_DONE"?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-gray-200 bg-gray-50 text-gray-700",icon:ta}]:E?[{title:" ",value:o>=3?"HIGH":o>=1?"MID":"LOW",sub:` ${T7(i)}   ${p}`,helperTitle:" ",helper:[` : ${mt(u)}`,` : ${o}`,"        ."],tone:o>=3?"border-red-200 bg-red-50 text-red-700":"border-amber-200 bg-amber-50 text-amber-700",icon:Do},{title:" ",value:`${(h?.length??0)+(m?.triggers.length??0)}`,sub:"/ ",helperTitle:" ",helper:[...h?.slice(0,2)??[],...(m?.triggers??[]).slice(0,2).map(L7)].slice(0,3),tone:"border-slate-200 bg-slate-50 text-slate-700",icon:Gn},{title:" ",value:A[a].label,sub:l==="NOT_CREATED"?"  ":` ${S[l]}`,helperTitle:" ",helper:[`/ : ${S[l]}`,`  : ${A[a].label}`,l==="NOT_CREATED"?"    Workboard  .":"  ."],tone:l==="NOT_CREATED"?"border-red-200 bg-red-50 text-red-700":"border-emerald-200 bg-emerald-50 text-emerald-700",icon:u0},{title:"/",value:` ${d}`,sub:`${mt(u)}   ${p}`,helperTitle:" ",helper:[` : ${mt(u)}`,` : ${p}`,"     ."],tone:"border-gray-200 bg-gray-50 text-gray-700",icon:ta}]:[{title:" ",value:_,sub:`${O}  ${Zi[r]}`,helperTitle:" ",helper:D.length>0?[...D.slice(0,2),`  : ${Zi[r]}`]:["       .",`  : ${Zi[r]}`,"       ."],tone:e==="HUMAN_FIRST"?"border-red-200 bg-red-50 text-red-700":"border-blue-200 bg-blue-50 text-blue-700",icon:Do},{title:" ",value:A[a].label,sub:i?` : ${vl[i].label}`:` ${o}`,helperTitle:" ",helper:[` /: ${mt(s)}`,`  : ${o}`,s?"    ":"     "],tone:`border-slate-200 bg-slate-50 ${A[a].tone}`,icon:u0},{title:"/",value:S[l],sub:s?` : ${mt(s)}`:" ",helperTitle:" ",helper:[l==="NOT_CREATED"?"  .":` : ${S[l]}`,"       .",l==="NOT_CREATED"?"     ":"    "],tone:"border-emerald-200 bg-emerald-50 text-emerald-700",icon:Zs},{title:" ",value:` ${d}`,sub:`${mt(u)}   ${p}`,helperTitle:" ",helper:[` : ${mt(u)}`,` : ${p}`,p===0?"    ":"    "],tone:"border-gray-200 bg-gray-50 text-gray-700",icon:ta}];return n.jsx("section",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-3",children:k.map((M,F)=>n.jsxs("article",{onMouseEnter:()=>j(F),onMouseLeave:()=>j($=>$===F?null:$),onFocus:()=>j(F),onBlur:()=>j($=>$===F?null:$),className:de("relative rounded-xl border p-3 shadow-sm transition-all duration-200 hover:-translate-y-0.5 hover:shadow-md",M.tone),children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(M.icon,{size:14}),n.jsx("p",{className:"text-[11px] font-semibold opacity-80",children:M.title})]}),F===0&&!E?n.jsx("button",{type:"button",onClick:x,className:"rounded-md border border-current/40 bg-white/70 px-2 py-0.5 text-[10px] font-semibold",children:" "}):null]}),n.jsx("p",{className:"mt-1 text-lg font-bold",children:M.value}),n.jsx("p",{className:"mt-0.5 text-[10px] opacity-70",children:M.sub}),n.jsxs("div",{className:de("pointer-events-none absolute inset-x-2 top-[calc(100%+8px)] z-20 rounded-lg border border-slate-200 bg-white p-3 text-slate-700 shadow-lg transition-all duration-150",v===F?"translate-y-0 opacity-100":"-translate-y-1 opacity-0"),children:[n.jsx("p",{className:"text-[11px] font-semibold text-slate-900",children:M.helperTitle}),n.jsx("div",{className:"mt-1 space-y-0.5 text-[11px] text-slate-600",children:M.helper.map($=>n.jsxs("p",{children:["- ",$]},`${M.title}-${$}`))})]})]},M.title))})}function F7({mode:e="stage1",stage2OpsView:t=!1,contactExecutor:r,executionStatus:a,strategy:s,lastSentAt:i,sensitivityFlags:o,latestAgentLog:l,selectedRecommendation:d,agentJob:u,gateStatus:p,onSwitchExecutor:m,onOpen:h,onRetryNow:x,onScheduleRetry:y}){const N=e==="stage2",v=e==="stage3",j=v&&t,E={NOT_STARTED:"",SENT:"",WAITING_RESPONSE:"",RETRY_NEEDED:"",HANDOFF_TO_HUMAN:"",PAUSED:"",STOPPED:"",DONE:""};return n.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h3",{className:"text-sm font-bold text-slate-900 flex items-center gap-2",children:[n.jsx(ro,{size:15,className:"text-[#15386a]"}),"/  (",j?"/":v?"/":N?"2":"1",")"]}),n.jsx("span",{className:de("rounded-full border px-2 py-0.5 text-[10px] font-semibold",MT[r]),children:Zi[r]})]}),n.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:r==="HUMAN"?v?j?" /     .":"        .":N?" /     .":"/    .":v?j?"Agent   /  .     .":"Agent   /  .   /  .":N?"Agent   /  .    .":"Agent   /  .    ."}),s==="AI_FIRST"?n.jsx("p",{className:"mt-1 text-[11px] text-violet-700",children:"    : Agent        "}):null,n.jsx("div",{className:"mt-3 grid grid-cols-2 gap-2",children:["HUMAN","AGENT_SEND_ONLY"].map(C=>n.jsx("button",{onClick:()=>m(C),className:de("rounded-md border px-2.5 py-1.5 text-[11px] font-semibold transition-colors",r===C?MT[C]:"border-gray-200 bg-gray-50 text-gray-600 hover:bg-gray-100"),children:Zi[C]},C))}),n.jsx("button",{type:"button",onClick:h,className:de("mt-3 h-11 w-full rounded-lg text-sm font-semibold text-white transition-all duration-200 hover:-translate-y-0.5 hover:shadow-md",r==="HUMAN"?"bg-[#15386a] hover:bg-[#102b4e]":"bg-violet-700 hover:bg-violet-800"),children:r==="HUMAN"?v?j?"/   ":"   ":N?" /  ":"/  ":"Agent   "}),n.jsxs("div",{className:"mt-3 rounded-lg border border-slate-200 bg-slate-50 p-3 text-[11px] text-slate-700",children:[n.jsxs("p",{children:[" : ",n.jsx("strong",{children:E[a]})]}),n.jsxs("p",{className:"mt-0.5",children:[v||N?" ":" ",": ",n.jsx("strong",{children:s==="HUMAN_FIRST"?" ":" "})]}),n.jsxs("p",{className:"mt-0.5",children:[" : ",n.jsx("strong",{children:mt(i)})]}),n.jsxs("p",{className:"mt-0.5",children:[" : ",n.jsx("strong",{children:o.length>0?o.join(", "):"  "})]}),r==="AGENT_SEND_ONLY"?n.jsxs(n.Fragment,{children:[n.jsxs("p",{className:"mt-0.5",children:["Agent  : ",n.jsx("strong",{children:nz[u.status]})]}),n.jsxs("p",{className:"mt-0.5",children:[" : ",n.jsx("strong",{children:p==="PASS"?"":p==="NEEDS_CHECK"?" ":""})]}),n.jsxs("p",{className:"mt-0.5",children:[" Agent :"," ",n.jsx("strong",{children:l?`${mt(l.at)}  ${h5[l.result]}`:" "})]}),u.status==="FAILED"?n.jsxs("p",{className:"mt-0.5 text-red-700",children:[" : ",n.jsx("strong",{children:u.lastError??" "})]}):null,u.nextRetryAt?n.jsxs("p",{className:"mt-0.5",children:[" : ",n.jsx("strong",{children:mt(u.nextRetryAt)})]}):null,(u.status==="FAILED"||u.status==="CANCELED")&&p==="PASS"?n.jsxs("div",{className:"mt-2 flex flex-wrap gap-1.5",children:[n.jsx("button",{type:"button",onClick:x,className:"rounded-md border border-violet-200 bg-violet-50 px-2 py-1 text-[10px] font-semibold text-violet-700 hover:bg-violet-100",children:" "}),n.jsx("button",{type:"button",onClick:y,className:"rounded-md border border-slate-200 bg-white px-2 py-1 text-[10px] font-semibold text-slate-700 hover:bg-slate-100",children:" "})]}):null]}):d?n.jsxs("p",{className:"mt-0.5",children:[" : ",n.jsx("strong",{children:d.title})]}):null]})]})}function B7({linkageStatus:e,reservationInfo:t,locked:r=!1,lockReason:a,onOpenStep4:s,onAction:i,mode:o="stage1"}){const l=o==="stage3";return n.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[n.jsxs("h3",{className:"text-sm font-bold text-slate-900 flex items-center gap-2",children:[n.jsx(Na,{size:15,className:"text-[#15386a]"}),l?"/ ":" "]}),n.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:l?" /   ()  .":" /    ."}),r?n.jsxs("div",{className:"mt-3 rounded-lg border border-amber-200 bg-amber-50 p-3",children:[n.jsx("p",{className:"text-[11px] font-semibold text-amber-800",children:a??"    ."}),n.jsx("button",{onClick:s,className:"mt-2 rounded-md border border-amber-300 bg-white px-2.5 py-1 text-[11px] font-semibold text-amber-800 hover:bg-amber-100",children:"STEP4 "})]}):null,n.jsx("div",{className:"mt-3 space-y-2",children:Object.keys($T).map(d=>{const u=$T[d];return n.jsxs("button",{type:"button",disabled:r,onClick:()=>i(d),className:de("w-full rounded-lg border border-slate-200 px-3 py-2 text-left transition-colors",r?"cursor-not-allowed bg-slate-100 text-slate-400":"bg-slate-50 hover:bg-slate-100"),children:[n.jsx("p",{className:"text-xs font-semibold text-slate-900",children:u.title}),n.jsx("p",{className:"mt-0.5 text-[11px] text-slate-600",children:u.description})]},d)})}),n.jsxs("div",{className:"mt-3 rounded-lg border border-emerald-200 bg-emerald-50 p-3 text-[11px] text-emerald-800",children:[n.jsxs("p",{children:[" / : ",n.jsx("strong",{children:Pd[e]})]}),n.jsxs("p",{className:"mt-0.5",children:[" :"," ",n.jsx("strong",{children:t?N0(t):"  ."})]}),n.jsx("p",{className:"mt-0.5",children:"       ."})]})]})}function PEe({loading:e,recommendations:t,selectedId:r,editedScript:a,onSelect:s,onEditScript:i}){return n.jsxs("section",{className:"rounded-xl border border-slate-200 bg-slate-50/70 p-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h4",{className:"text-xs font-bold text-slate-900",children:"RAG / "}),n.jsx("span",{className:"text-[10px] text-slate-500",children:" ,    ."})]}),e?n.jsx("div",{className:"mt-2 rounded-md border border-slate-200 bg-white px-3 py-2 text-[11px] text-slate-500",children:"   ..."}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"mt-2 grid grid-cols-1 gap-2",children:t.map(o=>n.jsxs("button",{onClick:()=>s(o),className:de("rounded-lg border px-3 py-2 text-left transition-colors",r===o.id?"border-blue-300 bg-blue-50":"border-slate-200 bg-white hover:bg-slate-50"),children:[n.jsx("p",{className:"text-xs font-semibold text-slate-900",children:o.title}),n.jsx("p",{className:"mt-0.5 text-[11px] text-slate-600",children:o.useCase}),n.jsx("div",{className:"mt-1 space-y-0.5 text-[10px] text-slate-500",children:o.evidence.slice(0,3).map(l=>n.jsxs("p",{children:["- ",l]},`${o.id}-${l}`))})]},o.id))}),n.jsxs("div",{className:"mt-2",children:[n.jsx("label",{className:"text-[11px] font-semibold text-slate-600",children:"  "}),n.jsx("textarea",{value:a,onChange:o=>i(o.target.value),className:"mt-1 h-20 w-full rounded-md border border-slate-200 bg-white px-2 py-1.5 text-xs outline-none focus:border-blue-400",placeholder:"    "})]})]})]})}function DEe({draft:e,reservationInfo:t,onChange:r,onSave:a}){const s=Em[e.route],i=e.route!=="HOLD_TRACKING";return n.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[n.jsxs("h3",{className:"text-sm font-bold text-slate-900 flex items-center gap-2",children:[n.jsx(Na,{size:15,className:"text-blue-600"}),"STEP4  "]}),n.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:"/    ."}),n.jsx("div",{className:"mt-3 grid grid-cols-1 gap-2 md:grid-cols-2",children:Object.keys(Em).map(o=>{const l=Em[o];return n.jsxs("button",{onClick:()=>r({...e,route:o,place:l.defaultPlace}),className:de("rounded-lg border px-3 py-2 text-left transition-colors",e.route===o?"border-blue-300 bg-blue-50":"border-gray-200 bg-gray-50 hover:bg-gray-100"),children:[n.jsx("p",{className:"text-xs font-semibold text-slate-900",children:l.label}),n.jsx("p",{className:"mt-0.5 text-[11px] text-slate-600",children:l.description})]},o)})}),n.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-2 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-[11px] font-semibold text-gray-600",children:""}),n.jsx("input",{type:"datetime-local",value:fc(e.scheduledAt),onChange:o=>r({...e,scheduledAt:mc(o.target.value)||e.scheduledAt}),disabled:!i,className:"mt-1 w-full rounded-md border border-gray-200 px-2 py-1.5 text-xs outline-none focus:border-blue-400 disabled:bg-gray-100"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[11px] font-semibold text-gray-600",children:""}),n.jsx("input",{value:e.place,onChange:o=>r({...e,place:o.target.value}),disabled:!i,className:"mt-1 w-full rounded-md border border-gray-200 px-2 py-1.5 text-xs outline-none focus:border-blue-400 disabled:bg-gray-100"})]})]}),n.jsxs("div",{className:"mt-2 grid grid-cols-1 gap-2 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-[11px] font-semibold text-gray-600",children:"/ "}),n.jsx("input",{value:e.contactGuide,onChange:o=>r({...e,contactGuide:o.target.value}),disabled:!i,className:"mt-1 w-full rounded-md border border-gray-200 px-2 py-1.5 text-xs outline-none focus:border-blue-400 disabled:bg-gray-100"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[11px] font-semibold text-gray-600",children:""}),n.jsx("input",{value:e.note,onChange:o=>r({...e,note:o.target.value}),className:"mt-1 w-full rounded-md border border-gray-200 px-2 py-1.5 text-xs outline-none focus:border-blue-400"})]})]}),n.jsxs("div",{className:"mt-3 rounded-md border border-slate-200 bg-slate-50 px-3 py-2 text-[11px] text-slate-700",children:[n.jsxs("p",{children:[" : ",n.jsx("strong",{children:s.label})]}),n.jsx("p",{className:"mt-0.5",children:"       ."}),n.jsxs("p",{className:"mt-0.5",children:["  : ",n.jsx("strong",{children:t?N0(t):""})]})]}),n.jsx("div",{className:"mt-3 flex justify-end",children:n.jsx("button",{onClick:a,className:"rounded-md bg-[#163b6f] px-3 py-1.5 text-xs font-semibold text-white",children:"  "})})]})}function IEe({logs:e}){return n.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[n.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"Agent  "}),n.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:"   ( )"}),n.jsx("div",{className:"mt-3 space-y-2",children:e.length===0?n.jsx("p",{className:"rounded-md border border-gray-200 bg-gray-50 px-3 py-2 text-[11px] text-gray-500",children:"           ."}):e.slice(0,4).map(t=>n.jsxs("div",{className:"rounded-md border border-violet-200 bg-violet-50 px-3 py-2",children:[n.jsx("p",{className:"text-[11px] font-semibold text-violet-800",children:h5[t.result]}),n.jsx("p",{className:"mt-0.5 text-[11px] text-violet-700",children:t.summary}),n.jsxs("p",{className:"mt-0.5 text-[10px] text-violet-600",children:[mt(t.at),t.recommendationTitle?`   ${t.recommendationTitle}`:""]})]},t.id))})]})}function MEe({flowCards:e,onAction:t,mode:r="stage1",stage2OpsView:a=!1}){const s=r==="stage2"?"Stage2  ":r==="stage3"?a?"Stage2   ":"Stage3  ":"Stage1  ",i=e.filter(o=>o.status==="COMPLETED").length;return n.jsxs("section",{className:"relative z-10 rounded-2xl border border-gray-200 bg-gradient-to-b from-white to-slate-50 p-5 shadow-sm",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h3",{className:"text-sm font-bold text-slate-900 flex items-center gap-2",children:[n.jsx(u0,{size:15,className:"text-blue-600"}),s]}),n.jsxs("span",{className:"text-[11px] text-gray-500",children:[i,"/",e.length,"  "]})]}),n.jsx("div",{className:"mt-4 overflow-x-auto overflow-y-visible pt-1 pb-3",children:n.jsx("ol",{className:"relative z-10 mx-auto flex w-max items-stretch justify-center gap-3 px-2",children:e.map((o,l)=>{const d=wEe[o.status],u=d.icon,p=nm(e,o.id),m=!!p;return n.jsxs(Y.Fragment,{children:[n.jsx("li",{className:"shrink-0 py-1",children:n.jsxs("button",{type:"button",onClick:()=>{m||t(o.action)},"aria-disabled":m,title:m?p??void 0:void 0,className:de("group relative z-0 w-[230px] transform-gpu rounded-2xl border p-4 text-left transition-all duration-200 ease-out focus-visible:z-20 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-300",d.cardTone,!m&&"hover:z-20 hover:-translate-y-0.5 hover:scale-[1.02]",m&&"cursor-not-allowed opacity-75 saturate-75",!m&&o.isCurrent&&"ring-2 ring-offset-1 ring-blue-300 motion-safe:animate-pulse"),children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("span",{className:"text-[10px] font-semibold tracking-wide text-slate-500",children:["STEP ",l+1]}),n.jsx("span",{className:de("rounded-full px-2 py-0.5 text-[10px] font-semibold",d.chipTone),children:d.label})]}),n.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[n.jsx(u,{size:14,className:"shrink-0"}),n.jsx("p",{className:"text-sm font-bold tracking-tight",children:o.title})]}),n.jsx("p",{className:"mt-1 text-[11px] text-slate-600",children:o.description}),n.jsxs("div",{className:de("mt-2 rounded-lg border px-2.5 py-2 text-[11px] leading-relaxed",d.reasonTone),children:[n.jsx("p",{className:"font-semibold",children:" "}),n.jsx("p",{className:"mt-0.5 text-[10px]",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:o.reason})]}),m?n.jsxs("div",{className:"mt-2 max-h-0 overflow-hidden rounded-lg border border-amber-300 bg-amber-50 px-2.5 py-0 text-[11px] leading-relaxed text-amber-900 opacity-0 transition-all duration-200 group-hover:max-h-24 group-hover:py-2 group-hover:opacity-100 group-focus-visible:max-h-24 group-focus-visible:py-2 group-focus-visible:opacity-100",children:[n.jsx("p",{className:"font-semibold",children:"  "}),n.jsx("p",{className:"mt-0.5 text-[10px]",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:p})]}):n.jsxs("div",{className:"mt-2 max-h-0 overflow-hidden rounded-lg border border-dashed border-slate-300 bg-white/70 px-2.5 py-0 text-[11px] text-slate-700 opacity-0 transition-all duration-200 group-hover:max-h-24 group-hover:py-2 group-hover:opacity-100 group-focus-visible:max-h-24 group-focus-visible:py-2 group-focus-visible:opacity-100",children:[n.jsx("p",{className:"font-semibold text-slate-800",children:" "}),n.jsx("p",{className:"mt-0.5",children:o.nextActionHint})]}),n.jsx("span",{className:"mt-2 inline-flex rounded-md border border-current/40 px-2.5 py-1 text-[11px] font-semibold",children:m?"  ":" "})]})}),l<e.length-1?n.jsx("li",{className:"flex shrink-0 items-center text-slate-300","aria-hidden":"true",children:n.jsx(ei,{size:18})}):null]},o.id)})})}),n.jsx("p",{className:"mt-3 text-[11px] text-gray-500",children:r==="stage3"?a?"      /   .":"         .    .":"       Step1~4    ."})]})}function LEe({mode:e="stage1",execution:t,strategy:r,preTriageReady:a,strategyDecided:s,hasVulnerableGuardrail:i,linkageStatus:o,onOpenSmsModal:l,onOpenOutcomeTriage:d,onOpenHandoffMemo:u,onOpenStrategyOverride:p}){const m=e==="stage2",h=e==="stage3",x=[],y=[];return a||x.push({label:h?"    ":m?"2    ":"    ",action:p,tone:"bg-red-600 text-white hover:bg-red-700"}),(!s||i)&&x.push({label:h?" / ":m?"/ ":"  / ",action:p,tone:"bg-amber-600 text-white hover:bg-amber-700"}),(t.status==="NOT_STARTED"||t.status==="RETRY_NEEDED")&&x.push({label:h?"  /":m?`   (${r==="HUMAN_FIRST"?" ":" "})`:`1   (${r==="HUMAN_FIRST"?" ":" "})`,action:l,tone:"bg-[#15386a] text-white hover:bg-[#102b4e]"}),(t.status==="SENT"||t.status==="WAITING_RESPONSE")&&x.push({label:h?" / ":m?"/  ":"  ",action:d,tone:"bg-blue-600 text-white hover:bg-blue-700"}),(t.status==="HANDOFF_TO_HUMAN"||t.status==="PAUSED")&&x.push({label:h?"  / ":m?" / ":"   /",action:u,tone:"bg-red-600 text-white hover:bg-red-700"}),t.status==="STOPPED"&&y.push({label:h?" (/) ":m?"/  ":"   ",action:u,tone:"border-red-200 bg-red-50 text-red-700 hover:bg-red-100"}),t.status==="RETRY_NEEDED"&&y.push({label:h?" /  ":m?"   ":"    ",action:l,tone:"border-orange-200 bg-orange-50 text-orange-700 hover:bg-orange-100"}),(o==="BOOKING_IN_PROGRESS"||o==="REFERRAL_CREATED")&&y.push({label:h?"/   ":m?"/   ":"/   ",action:u,tone:"border-slate-200 bg-white text-slate-700 hover:bg-slate-50"}),n.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[n.jsxs("h3",{className:"text-sm font-bold text-slate-900 flex items-center gap-2",children:[n.jsx(u0,{size:15,className:"text-orange-600"}),"  "]}),n.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:"     "}),x.length>0&&n.jsxs("div",{className:"mt-3 space-y-2",children:[n.jsx("p",{className:"text-[11px] font-semibold text-red-700",children:"P1   "}),x.map(N=>n.jsx("button",{onClick:N.action,className:de("w-full rounded-lg border px-3 py-2.5 text-xs font-semibold transition-colors",N.tone),children:N.label},N.label))]}),y.length>0&&n.jsxs("div",{className:"mt-3 space-y-2",children:[n.jsx("p",{className:"text-[11px] font-semibold text-blue-700",children:"P2   "}),y.map(N=>n.jsx("button",{onClick:N.action,className:de("w-full rounded-lg border px-3 py-2 text-xs font-semibold transition-colors",N.tone),children:N.label},N.label))]}),t.lastOutcomeCode&&n.jsx("div",{className:"mt-3 rounded-md border border-gray-100 bg-gray-50 px-3 py-2",children:n.jsxs("p",{className:"text-[11px] text-gray-600",children:[" : ",n.jsx("strong",{children:vl[t.lastOutcomeCode].label})]})})]})}function _A({expanded:e,onToggle:t,executionStatus:r,lastSentAt:a,assigneeName:s,selectedOutcomeCode:i,onSelectOutcomeCode:o,reasonTags:l,onToggleReasonTag:d,rejectReasonDraft:u,onRejectReasonDraftChange:p,noResponsePlanDraft:m,onNoResponsePlanDraftChange:h,outcomeNote:x,onOutcomeNoteChange:y,isSaving:N,submitError:v,validationError:j,onClearError:E,onReset:C,onConfirm:A,hasUnsavedChanges:S,lastSavedAt:_,onOpenHandoffMemo:O,mode:D="stage1"}){const k=D==="stage3",M=i?vl[i].label:oz[r];return n.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h3",{className:"text-sm font-bold text-slate-900 flex items-center gap-2",children:[n.jsx(Om,{size:15,className:"text-blue-600"}),k?"   ()":"  "]}),n.jsx("button",{onClick:t,className:"rounded-md border border-gray-200 px-2 py-1 text-[11px] font-semibold text-gray-600 hover:bg-gray-50",children:e?"":""})]}),n.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:k?"/     .":"     "}),e?n.jsxs("div",{className:"mt-3 space-y-3",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[n.jsxs("div",{className:"grid grid-cols-1 gap-2 text-[11px] md:grid-cols-3",children:[n.jsxs("p",{className:"text-slate-600",children:[" : ",n.jsx("strong",{className:"text-slate-900",children:M})]}),n.jsxs("p",{className:"text-slate-600",children:[" : ",n.jsx("strong",{className:"text-slate-900",children:mt(a)})]}),n.jsxs("p",{className:"text-slate-600",children:[": ",n.jsx("strong",{className:"text-slate-900",children:s})]})]}),n.jsx("p",{className:"mt-2 text-[11px] text-slate-600",children:"   ,     ."})]}),n.jsx("div",{className:"rounded-md border border-indigo-200 bg-indigo-50 px-3 py-2 text-[11px] font-semibold text-indigo-800",children:"     "}),j?n.jsx("div",{className:"rounded-md border border-red-200 bg-red-50 px-3 py-2",children:n.jsx("p",{className:"text-[11px] font-semibold text-red-700",children:j})}):null,v?n.jsx("div",{className:"rounded-md border border-red-200 bg-red-50 px-3 py-2",children:n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("p",{className:"text-[11px] font-semibold text-red-700",children:[" : ",v]}),n.jsx("button",{onClick:E,className:"rounded border border-red-200 px-1.5 py-0.5 text-[10px] font-semibold text-red-700 hover:bg-red-100",children:""})]})}):null,n.jsxs("div",{children:[n.jsx("p",{className:"text-[11px] font-semibold text-gray-600",children:"  ( )"}),n.jsx("div",{className:"mt-2 grid grid-cols-1 gap-2 md:grid-cols-2",children:pEe.map(F=>{const $=vl[F],B=i===F;return n.jsxs("button",{type:"button",onClick:()=>{E(),o(F)},className:de("rounded-lg border-2 px-3 py-2 text-left transition-colors",B?`${$.tone} border-current`:"border-gray-200 bg-gray-50 hover:bg-gray-100"),children:[n.jsx("p",{className:"text-xs font-semibold text-slate-900",children:$.label}),n.jsx("p",{className:"mt-1 text-[10px] text-slate-500",children:F==="CONTINUE_SELF"?"     ":F==="SCHEDULE_LATER"?"    ":F==="REQUEST_GUARDIAN"?"  ":F==="REQUEST_HUMAN"?"  ":F==="NO_RESPONSE"?"   ":"/  "})]},F)})})]}),i==="NO_RESPONSE"?n.jsxs("div",{className:"rounded-lg border border-blue-200 bg-blue-50 p-3",children:[n.jsx("p",{className:"text-[11px] font-semibold text-blue-800",children:"   ()"}),n.jsxs("p",{className:"mt-1 text-[10px] text-blue-700",children:["     +1 .  ",m.channel==="CALL"?"":"","   ."]}),n.jsxs("div",{className:"mt-2 grid grid-cols-1 gap-2 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-semibold text-gray-600",children:""}),n.jsx("div",{className:"mt-1 grid grid-cols-2 gap-1",children:Object.keys($7).map(F=>n.jsx("button",{type:"button",onClick:()=>h({...m,channel:F,strategy:rz[F]}),className:de("rounded-md border px-2 py-1 text-[10px] font-semibold",m.channel===F?"border-blue-300 bg-blue-100 text-blue-800":"border-gray-200 bg-white text-gray-600"),children:$7[F]},F))})]}),n.jsxs("label",{className:"text-[10px] font-semibold text-gray-600",children:["  ",n.jsx("input",{type:"datetime-local",value:fc(m.nextContactAt),onChange:F=>{const $=mc(F.target.value);h({...m,nextContactAt:$||m.nextContactAt})},className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-blue-400"})]}),n.jsxs("label",{className:"text-[10px] font-semibold text-gray-600",children:["",n.jsx("input",{type:"text",value:m.assigneeId,onChange:F=>{h({...m,assigneeId:F.target.value})},className:"mt-1 h-8 w-full rounded-md border border-gray-200 px-2 text-[11px] outline-none focus:border-blue-400",placeholder:"   ID"})]})]}),n.jsxs("label",{className:"mt-2 inline-flex items-center gap-2 text-[10px] text-blue-800",children:[n.jsx("input",{type:"checkbox",checked:m.applyL3,onChange:F=>h({...m,applyL3:F.target.checked})}),"    L3 ."]})]}):null,i==="REFUSE"?n.jsxs("div",{className:"rounded-lg border border-red-200 bg-red-50 p-3",children:[n.jsx("p",{className:"text-[11px] font-semibold text-red-800",children:"   ()"}),n.jsx("p",{className:"mt-1 text-[10px] text-red-700",children:"       ."}),n.jsxs("div",{className:"mt-2 grid grid-cols-1 gap-2 md:grid-cols-2",children:[n.jsxs("label",{className:"text-[10px] font-semibold text-gray-600",children:[" ",n.jsxs("select",{value:u.code??"",onChange:F=>{const $=F.target.value||null;p({...u,code:$})},className:"mt-1 h-8 w-full rounded-md border border-gray-200 bg-white px-2 text-[11px] outline-none focus:border-red-300",children:[n.jsx("option",{value:"",children:" "}),gEe.map(F=>n.jsx("option",{value:F.code,children:F.label},F.code))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-semibold text-gray-600",children:" "}),n.jsx("div",{className:"mt-1 grid grid-cols-2 gap-1",children:xEe.map(F=>n.jsx("button",{type:"button",onClick:()=>p({...u,level:F.value}),className:de("h-8 rounded-md border px-2 text-[10px] font-semibold",u.level===F.value?"border-red-300 bg-red-100 text-red-700":"border-gray-200 bg-white text-gray-600"),children:F.label},F.value))})]})]}),u.code==="R7_OTHER"?n.jsxs("label",{className:"mt-2 block text-[10px] font-semibold text-gray-600",children:["  ()",n.jsx("textarea",{value:u.detail,onChange:F=>p({...u,detail:F.target.value}),className:"mt-1 h-14 w-full rounded-md border border-gray-200 px-2 py-1 text-[11px] outline-none focus:border-red-300",placeholder:"   "})]}):null]}):null,i==="REQUEST_GUARDIAN"||i==="REQUEST_HUMAN"?n.jsxs("div",{className:"rounded-lg border border-violet-200 bg-violet-50 p-3",children:[n.jsx("p",{className:"text-[11px] font-semibold text-violet-800",children:"   ()"}),n.jsx("p",{className:"mt-1 text-[10px] text-violet-700",children:"      ."}),n.jsx("button",{type:"button",onClick:O,className:"mt-2 rounded-md border border-violet-300 bg-white px-2.5 py-1 text-[11px] font-semibold text-violet-700 hover:bg-violet-100",children:"  "})]}):null,n.jsxs("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-3",children:[n.jsx("p",{className:"text-[11px] font-semibold text-amber-800",children:"   ( )"}),n.jsx("div",{className:"mt-2 flex flex-wrap gap-1.5",children:Object.keys(_v).map(F=>{const $=_v[F],B=l.includes(F);return n.jsx("button",{type:"button",onClick:()=>d(F),className:de("rounded-full border px-2.5 py-1 text-[10px] font-semibold transition-colors",B?$.tone:"border-gray-200 bg-white text-gray-600"),title:$.hint,children:$.label},F)})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[11px] font-semibold text-gray-600",children:" ()"}),n.jsx("textarea",{value:x,onChange:F=>y(F.target.value),className:"mt-1 h-16 w-full rounded-md border border-gray-200 px-2 py-1 text-xs outline-none focus:border-blue-400",placeholder:"   "})]}),n.jsxs("div",{className:"sticky bottom-0 z-10 flex flex-wrap items-center justify-between gap-2 rounded-lg border border-slate-200 bg-white/95 px-3 py-2 backdrop-blur",children:[n.jsxs("div",{className:"flex items-center gap-2 text-[11px]",children:[n.jsx("span",{className:de("rounded-full border px-2 py-0.5 font-semibold",S?"border-amber-200 bg-amber-50 text-amber-700":"border-emerald-200 bg-emerald-50 text-emerald-700"),children:S?" ":" "}),_?n.jsxs("span",{className:"text-gray-500",children:["  ",mt(_)]}):null]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:t,className:"rounded-md border border-gray-200 px-3 py-1.5 text-xs font-semibold text-gray-700",children:""}),n.jsx("button",{onClick:C,className:"rounded-md border border-gray-200 px-3 py-1.5 text-xs font-semibold text-gray-700",children:""}),n.jsx("button",{onClick:A,disabled:N,className:"rounded-md bg-[#163b6f] px-3 py-1.5 text-xs font-semibold text-white disabled:bg-gray-300",children:N?" ...":""})]})]})]}):null]})}function U7({expanded:e,onToggle:t,memoText:r,onMemoChange:a,onSave:s,mode:i="stage1"}){const o=i==="stage3";return n.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h3",{className:"text-sm font-bold text-slate-900 flex items-center gap-2",children:[n.jsx(jX,{size:15,className:"text-blue-600"}),o?" / ":"  "]}),n.jsx("button",{onClick:t,className:"rounded-md border border-gray-200 px-2 py-1 text-[11px] font-semibold text-gray-600 hover:bg-gray-50",children:e?"":""})]}),n.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:o?" /   .":"     "}),e?n.jsxs("div",{className:"mt-3 space-y-2",children:[n.jsx("textarea",{value:r,onChange:l=>a(l.target.value),className:"h-40 w-full rounded-md border border-gray-200 px-3 py-2 text-xs font-mono outline-none focus:border-blue-400",placeholder:`[ ]
 ( ): ...
: ...
 : ...
 : ...
  : ...`}),n.jsx("div",{className:"flex justify-end",children:n.jsx("button",{onClick:s,disabled:!r.trim(),className:"rounded-md bg-[#163b6f] px-3 py-1.5 text-xs font-semibold text-white disabled:bg-gray-300",children:""})})]}):null]})}function $Ee({gates:e,onFix:t,mode:r="stage1"}){const a=r==="stage3",s=new Map(e.map(E=>[E.key,E])),o=["CONSENT_OK","PHONE_VERIFIED","GUARDIAN_OPTIONAL"].map(E=>s.get(E)).filter(E=>!!E),l=s.get("CONSENT_OK"),d=s.get("PHONE_VERIFIED"),u=s.get("GUARDIAN_OPTIONAL"),p=d?.status==="PASS"?"OK":d?.status==="FAIL"&&P7(d.failReason)?"RESTRICTED":"NEEDS_CHECK",m=l?.status==="FAIL"?"RESTRICTED":d?.status==="PASS"?"OK":d?.status==="FAIL"&&P7(d.failReason)?"RESTRICTED":"NEEDS_CHECK",h=u?.status==="PASS"?"OK":u?.status==="FAIL"?"RESTRICTED":"NEEDS_CHECK",x=p==="OK"?_u(p):d?.failReason??_u(p),y=m==="OK"?_u(m):l?.status==="FAIL"?l.failReason??_u(m):d?.failReason??_u(m),N=h==="OK"?_u(h):u?.failReason??_u(h),v=[{key:"CALL",label:"",state:p,detail:x,actionLabel:p==="NEEDS_CHECK"?" ":p==="RESTRICTED"?"  ":void 0,onAction:p==="NEEDS_CHECK"&&d?.fixAction?.action==="VERIFY_PHONE"?()=>t(d):p==="RESTRICTED"?()=>Me.error(x):void 0},{key:"SMS",label:"",state:m,detail:y,actionLabel:m==="NEEDS_CHECK"?"  ":m==="RESTRICTED"?"  ":void 0,onAction:m==="NEEDS_CHECK"?()=>Me("    ."):m==="RESTRICTED"?()=>Me.error(y):void 0},{key:"GUARDIAN",label:"",state:h,detail:N,actionLabel:h==="RESTRICTED"?"  ":h==="NEEDS_CHECK"&&u?.fixAction?u.fixAction.label:void 0,onAction:h==="RESTRICTED"?()=>Me.error(N):h==="NEEDS_CHECK"&&u?.fixAction?()=>t(u):void 0}],j=v.some(E=>E.state==="RESTRICTED")?"RESTRICTED":v.some(E=>E.state==="NEEDS_CHECK")?"NEEDS_CHECK":"OK";return n.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h3",{className:"text-sm font-bold text-slate-900 flex items-center gap-2",children:[n.jsx(zh,{size:15,className:"text-slate-500"}),a?"  ":"  "]}),n.jsx("span",{className:"text-[11px] text-gray-500",children:a?"   Step2 .":"     "})]}),n.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2",children:[o.map(E=>n.jsxs("div",{className:"rounded-lg border border-gray-100 bg-gray-50 p-3",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsx("p",{className:"text-xs font-semibold text-slate-800",children:E.label}),n.jsx("span",{className:de("rounded px-2 py-0.5 text-[10px] font-semibold",aEe(E.status)),children:E.status==="PASS"?"":E.status==="FAIL"?"":" "})]}),n.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:E.failReason??"  "}),E.fixAction&&E.status!=="PASS"&&n.jsxs("button",{onClick:()=>t(E),className:"mt-2 inline-flex items-center gap-1 rounded-md border border-blue-200 bg-blue-50 px-2 py-1 text-[11px] font-semibold text-blue-700 hover:bg-blue-100",children:[n.jsx(Om,{size:11})," ",E.fixAction.label]})]},E.key)),n.jsxs("div",{className:"rounded-lg border border-gray-100 bg-gray-50 p-3",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsx("p",{className:"text-xs font-semibold text-slate-800",children:"  "}),n.jsx("span",{className:de("rounded px-2 py-0.5 text-[10px] font-semibold",k7(j)),children:R7(j)})]}),n.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:"//   "}),n.jsx("div",{className:"mt-2 space-y-2",children:v.map(E=>n.jsxs("div",{className:"rounded-md border border-gray-100 bg-white px-2.5 py-2",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsx("p",{className:"text-[11px] font-semibold text-slate-700",children:E.label}),n.jsx("span",{className:de("rounded px-2 py-0.5 text-[10px] font-semibold",k7(E.state)),children:R7(E.state)})]}),n.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:E.detail}),E.onAction&&E.actionLabel?n.jsxs("button",{onClick:E.onAction,className:"mt-1.5 inline-flex items-center gap-1 rounded-md border border-blue-200 bg-blue-50 px-2 py-1 text-[11px] font-semibold text-blue-700 hover:bg-blue-100",children:[n.jsx(Om,{size:11})," ",E.actionLabel]}):null]},E.key))})]})]}),n.jsxs("p",{className:"mt-3 text-[11px] text-gray-500",children:["    : ",a?"/     ":"/     "]})]})}function H7({evidence:e,quality:t,mode:r="stage1",stage2OpsView:a=!1}){const s=r==="stage3",i=s&&a;return n.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h3",{className:"text-sm font-bold text-slate-900 flex items-center gap-2",children:[n.jsx(Im,{size:15,className:"text-slate-500"}),i?"  ( )":s?"  ( )":"  "]}),n.jsxs("span",{className:"text-[11px] text-gray-500",children:["  ",mt(e.computedAt),"  ",e.version]})]}),n.jsx("div",{className:"mt-3 space-y-2",children:e.topFactors.slice(0,3).map(o=>n.jsxs("div",{className:"rounded-md border border-gray-100 bg-gray-50 px-3 py-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"text-xs font-semibold text-slate-900",children:o.title}),o.isMissing&&n.jsx("span",{className:"rounded bg-red-100 px-1.5 py-0.5 text-[10px] font-semibold text-red-700",children:" "})]}),n.jsx("p",{className:"mt-1 text-[11px] text-gray-600",children:o.description}),n.jsxs("p",{className:"mt-1 text-[10px] text-gray-400",children:[": ",mt(o.recency)]})]},o.title))}),n.jsxs("div",{className:"mt-3 rounded-md border border-gray-100 bg-white px-3 py-2 text-[11px] text-gray-600",children:[n.jsx("p",{children:" :  48   "}),n.jsxs("p",{title:"   ,  ,    .",children:[" : ",t.score,"% (  )"]}),n.jsxs("p",{children:[" : ",t.notes?.join(", ")??""]}),i?n.jsx("p",{children:" :  //    ."}):null,!i&&s?n.jsx("p",{children:" :       ."}):null]})]})}function dz({risk:e,stageBadge:t,threshold:r=65,stage2OpsView:a=!1}){const s=g.useId().replace(/:/g,""),i=($,B=!1)=>{const P=new Date($);if(Number.isNaN(P.getTime()))return $.slice(5,10);const W=String(P.getFullYear()).slice(2),K=String(P.getFullYear()),G=String(P.getMonth()+1).padStart(2,"0"),U=String(P.getDate()).padStart(2,"0");return B?`${K}.${G}.${U}`:`${W}.${G}.${U}`},o=$=>$==="DIFF_RESULT_APPLIED"?a?" ":" ":$==="PLAN_UPDATED"?a?"/ ":" ":$==="REEVAL"?a?"  ":"":void 0,l=g.useMemo(()=>{const $=e.series.map(B=>{const P=new Date(B.t),W=Number.isNaN(P.getTime())?new Date(e.updatedAt):P,K=Number.isNaN(W.getTime())?new Date:W;return{t:K.toISOString(),date:K,risk01:Un(B.risk2y),ciLow01:B.ciLow==null?void 0:Un(B.ciLow),ciHigh01:B.ciHigh==null?void 0:Un(B.ciHigh),eventLabel:o(B.event??(B.source==="manual"?"REEVAL":void 0))}}).sort((B,P)=>B.date.getTime()-P.date.getTime());if($.length===0){const B=(()=>{const P=new Date(e.updatedAt);return Number.isNaN(P.getTime())?new Date:P})();return[{t:B.toISOString(),date:B,risk01:Un(e.risk2y_now),ciLow01:void 0,ciHigh01:void 0,eventLabel:void 0}]}return $},[e.risk2y_now,e.series,e.updatedAt]),d=l[l.length-1],u=Un(d?.risk01??e.risk2y_now),p=_o(u),m=xp(u),h=e.trend==="UP"?.14:e.trend==="DOWN"?-.1:e.trend==="VOLATILE"?.08:.02,x=Un(u+h),y=_o(x),N=[6,12,18,24],v=N.map(($,B)=>{const P=new Date(d.date);P.setMonth(P.getMonth()+$);const W=(B+1)/N.length,K=Un(u+(x-u)*W);return{t:P.toISOString(),date:P,riskPct:_o(K),axisLabel:i(P.toISOString())}}),j=[...l.map(($,B)=>{const P=_o($.risk01);return{t:$.t,axisLabel:i($.t),pointKind:"HIST",histRiskPct:P,forecastRiskPct:B===l.length-1?P:null,areaRiskPct:P,riskPct:P,ciLowPct:$.ciLow01==null?void 0:_o($.ciLow01),ciHighPct:$.ciHigh01==null?void 0:_o($.ciHigh01),eventLabel:$.eventLabel}}),...v.map($=>({t:$.t,axisLabel:$.axisLabel,pointKind:"FORECAST",histRiskPct:null,forecastRiskPct:$.riskPct,areaRiskPct:$.riskPct,riskPct:$.riskPct,ciLowPct:void 0,ciHighPct:void 0,eventLabel:void 0}))],E=g.useMemo(()=>{const $=new Map;return j.forEach((B,P)=>{const W=new Date(B.t);if(Number.isNaN(W.getTime())){$.set(B.t,B.axisLabel);return}const K=P===0||P===j.length-1,G=P>0?new Date(j[P-1].t):null,U=G?G.getFullYear()!==W.getFullYear():!1;$.set(B.t,i(B.t,K||U))}),$},[j]),C=j.some($=>$.ciLowPct!=null&&$.ciHighPct!=null),A=j.filter($=>$.pointKind==="HIST"&&!!$.eventLabel).slice(-3),S=j.filter($=>$.riskPct>=r),_=S[S.length-1],O=j[j.length-1],D=p>=r?{top:"#ef4444",bottom:"#ef4444"}:{top:"#2563eb",bottom:"#2563eb"},k=(()=>{if(l.length<4)return"      .";const $=l.slice(-4).map(G=>_o(G.risk01)),B=$.slice(1).map((G,U)=>G-$[U]),P=B.filter(G=>G>0).length,W=B.filter(G=>G<0).length;return Math.max(...B.map(G=>Math.abs(G)))>=10?a?" 3  .  /   .":" 3  . /     .":P>=2?" 3    .":W>=2?" 3    .":"     ."})(),M=t==="COMPLETED"?a?" :   ":" :   ":t==="SCHEDULED"?a?" :  ":" :  ":t==="REFERRED"?" :  ":t==="RECOMMENDED"?a?" : / ":" :  ":a?" :   ":" :  ",F=({active:$,payload:B})=>{if(!$||!B||B.length===0)return null;const P=B[0]?.payload;return P?n.jsxs("div",{className:"rounded-md border border-slate-200 bg-white px-2 py-1.5 text-[10px] shadow-sm",children:[n.jsxs("p",{className:"font-semibold text-slate-800",children:[mt(P.t),"  ",P.pointKind==="FORECAST"?" (+2y)":"/"]}),n.jsxs("p",{className:"mt-0.5 text-slate-700",children:[a?" / ":"( )"," ",P.riskPct,"%"]}),P.ciLowPct!=null&&P.ciHighPct!=null?n.jsxs("p",{className:"text-slate-500",children:[" ",P.ciLowPct,"% ~ ",P.ciHighPct,"%"]}):null,P.eventLabel?n.jsxs("p",{className:"text-slate-500",children:[" ",P.eventLabel]}):null,P.riskPct>=r?n.jsx("p",{className:"text-red-600",children:a?`${r}%   `:`${r}%  `}):null]}):null};return n.jsxs("div",{className:"rounded-lg border border-slate-100 bg-slate-50 px-2.5 py-2.5",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-1.5",children:[n.jsxs("span",{className:"rounded-full border border-indigo-200 bg-indigo-50 px-2 py-0.5 text-[10px] font-semibold text-indigo-700",children:[a?" /":" "," ",p,"% (",m,")"]}),n.jsxs("span",{className:"rounded-full border border-sky-200 bg-sky-50 px-2 py-0.5 text-[10px] font-semibold text-sky-700",children:[a?" ":"2  "," ",y,"%"]}),n.jsxs("span",{className:"rounded-full border border-slate-200 bg-white px-2 py-0.5 text-[10px] font-semibold text-slate-700",children:[" ",e.trend]})]}),n.jsxs("div",{className:"mt-2 grid grid-cols-1 gap-2.5 xl:grid-cols-[1fr_220px]",children:[n.jsx("div",{className:"h-56 w-full",children:n.jsx(xa,{width:"100%",height:"100%",children:n.jsxs(M1,{data:j,margin:{top:8,right:24,left:0,bottom:6},children:[n.jsx("defs",{children:n.jsxs("linearGradient",{id:`risk-grad-${s}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:"0%",stopColor:D.top,stopOpacity:.3}),n.jsx("stop",{offset:"100%",stopColor:D.bottom,stopOpacity:.04})]})}),n.jsx(ms,{stroke:"#e5e7eb",strokeDasharray:"4 4"}),n.jsx(Vn,{dataKey:"t",tick:{fontSize:10,fill:"#64748b"},axisLine:!1,tickLine:!1,interval:"preserveStartEnd",minTickGap:16,tickMargin:8,tickFormatter:$=>E.get($)??i($,!0)}),n.jsx(Hn,{domain:[0,100],ticks:[0,25,50,75,100],tickFormatter:$=>`${$}%`,tick:{fontSize:10,fill:"#64748b"},axisLine:!1,tickLine:!1,width:34}),n.jsx(en,{content:n.jsx(F,{})}),n.jsx(_l,{y:r,stroke:"#dc2626",strokeDasharray:"4 3"}),A.map(($,B)=>n.jsx(_l,{x:$.t,stroke:"#94a3b8",strokeDasharray:"3 3"},`event-${$.t}-${B}`)),C?n.jsx($a,{type:"monotone",dataKey:"ciLowPct",stroke:"#94a3b8",strokeDasharray:"4 4",strokeWidth:1,dot:!1,isAnimationActive:!1}):null,C?n.jsx($a,{type:"monotone",dataKey:"ciHighPct",stroke:"#94a3b8",strokeDasharray:"4 4",strokeWidth:1,dot:!1,isAnimationActive:!1}):null,n.jsx($l,{type:"monotone",dataKey:"areaRiskPct",stroke:"none",fill:`url(#risk-grad-${s})`,isAnimationActive:!1}),n.jsx($a,{type:"monotone",dataKey:"histRiskPct",stroke:"#334155",strokeWidth:2.2,isAnimationActive:!1,dot:$=>{if($.cx==null||$.cy==null||!$.payload||$.payload.histRiskPct==null)return null;const B=$.payload.riskPct>=r;return n.jsx("circle",{cx:$.cx,cy:$.cy,r:B?4:3,fill:B?"#dc2626":"#334155",stroke:"#ffffff",strokeWidth:1.2})},activeDot:{r:5}}),n.jsx($a,{type:"monotone",dataKey:"forecastRiskPct",stroke:"#2563eb",strokeDasharray:"6 4",strokeWidth:2,connectNulls:!1,isAnimationActive:!1,dot:$=>{if($.cx==null||$.cy==null||!$.payload||$.payload.forecastRiskPct==null)return null;const B=$.payload.riskPct>=r;return n.jsx("circle",{cx:$.cx,cy:$.cy,r:B?4:3,fill:B?"#dc2626":"#2563eb",stroke:"#ffffff",strokeWidth:1.1})}}),O?n.jsx(Eg,{x:O.t,y:O.riskPct,r:5,fill:O.riskPct>=r?"#dc2626":"#2563eb",stroke:"#fff",strokeWidth:1.4,label:{value:`+2y ${O.riskPct}%`,position:"top",fill:"#1e293b",fontSize:10}}):null]})})}),n.jsxs("div",{className:"space-y-2 rounded-md border border-slate-200 bg-white p-2",children:[n.jsx("p",{className:"text-[10px] font-semibold text-slate-700",children:M}),n.jsxs("p",{className:"text-[10px] text-slate-500",children:[" ",mt(e.updatedAt),"   ",e.modelVersion]}),_?n.jsxs("div",{className:"rounded border border-red-200 bg-red-50 px-2 py-1 text-[10px] text-red-700",children:[n.jsxs("p",{className:"font-semibold",children:[r,"%  "]}),n.jsxs("p",{children:[_.axisLabel,"  ",_.riskPct,"% ( )"]})]}):n.jsxs("div",{className:"rounded border border-emerald-200 bg-emerald-50 px-2 py-1 text-[10px] text-emerald-700",children:[n.jsxs("p",{className:"font-semibold",children:[r,"%   "]}),n.jsx("p",{children:"   ."})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("p",{className:"text-[10px] font-semibold text-slate-700",children:" "}),A.length?A.map($=>n.jsxs("p",{className:"text-[10px] text-slate-600",children:[$.axisLabel,"  ",$.eventLabel]},`${$.t}-${$.eventLabel}`)):n.jsx("p",{className:"text-[10px] text-slate-500",children:"  "})]})]})]}),n.jsx("p",{className:"mt-1 text-[10px] text-slate-500",children:k}),n.jsx("p",{className:"mt-0.5 text-[10px] text-slate-500",children:a?" :   //   .":" :         ."})]})}const FEe=new Set(["REFERRED","SCHEDULED","DONE","RECEIVED","EXCEPTION"]);function BEe(e){return e==="PENDING"?"":e==="REFERRED"?"":e==="SCHEDULED"?"":e==="DONE"?"":e==="RECEIVED"?"":e==="NEEDS_REVIEW"?"":e==="MISSING"?"":"()"}function UEe(e){return e==="REQUIRED"?"":e==="RECOMMENDED"?"":""}function HEe(e){return e==="AUTO"?"AUTO()":e==="MANUAL"?"MANUAL()":e==="OVERRIDE"?"OVERRIDE":" "}function GEe(e){return e==="MISSING"||e==="NEEDS_REVIEW"?"border-rose-200 bg-rose-50 text-rose-700":e==="DONE"||e==="RECEIVED"?"border-emerald-200 bg-emerald-50 text-emerald-700":e==="REFERRED"||e==="SCHEDULED"?"border-amber-200 bg-amber-50 text-amber-700":e==="EXCEPTION"?"border-violet-200 bg-violet-50 text-violet-700":"border-slate-200 bg-slate-100 text-slate-700"}function KEe(e){return e==="PAUSED"?"PAUSED":e==="IN_PROGRESS"?"IN_PROGRESS":e==="READY"?"READY":"BLOCKED"}function zEe(e){return e==="READY"?"border-emerald-200 bg-emerald-50 text-emerald-700":e==="IN_PROGRESS"?"border-blue-200 bg-blue-50 text-blue-700":e==="BLOCKED"?"border-rose-200 bg-rose-50 text-rose-700":"border-slate-200 bg-slate-100 text-slate-700"}function qEe(e){return e.id==="MMSE"?n.jsx(Cd,{term:"MMSE",className:"text-[11px] font-semibold text-slate-900"}):e.id==="CDR_GDS"?n.jsxs("span",{className:"text-[11px] font-semibold text-slate-900",children:[n.jsx(Cd,{term:"CDR"}),"  ",n.jsx(Cd,{term:"GDS"})]}):e.id==="NEURO"?n.jsx("span",{className:"text-[11px] font-semibold text-slate-900",children:""}):e.id==="SPECIALIST"?n.jsx("span",{className:"text-[11px] font-semibold text-slate-900",children:" "}):e.id==="GDS_K"?n.jsx(Cd,{term:"GDS-K",className:"text-[11px] font-semibold text-slate-900"}):e.id==="ADL"?n.jsx(Cd,{term:"ADL",className:"text-[11px] font-semibold text-slate-900"}):n.jsx(Cd,{term:"BPSD",className:"text-[11px] font-semibold text-slate-900"})}function TA(e,t){const r=e[0];if(!r)return;const a=t.current[r];a&&(a.scrollIntoView({behavior:"smooth",block:"center"}),"focus"in a&&typeof a.focus=="function"&&a.focus())}function WEe({routeType:e,hospitalName:t,dueAt:r,tests:a,optionalTests:s,integrationReceivedAt:i,integrationUpdatedAt:o,manualEditEnabled:l}){return g.useMemo(()=>{const d=r||"2026-02-20T09:00:00",u=o||i,p=l?"OVERRIDE":e==="HOSPITAL_REFERRAL"?"AUTO":"MANUAL",m=typeof a.mmse=="number"&&Number.isFinite(a.mmse),h=typeof a.cdr=="number"&&Number.isFinite(a.cdr),x=!!a.neuroCognitiveType,y=!!a.specialist,N=j=>j==="MISSING"?[{key:"OPEN_PIPELINE",label:"  ",enabled:!0,intent:"danger"},{key:"REQUEST_RESULT",label:" ",enabled:!0,intent:"warning"},{key:"MANUAL_EXCEPTION",label:" ()",enabled:!0,intent:"default"}]:j==="NEEDS_REVIEW"?[{key:"VIEW_RESULT",label:" ",enabled:!0,intent:"default"},{key:"MARK_REVIEWED",label:" ",enabled:!0,intent:"success"}]:j==="REFERRED"||j==="SCHEDULED"?[{key:"OPEN_PIPELINE",label:"/ ",enabled:!0,intent:"default"},{key:"REQUEST_RESULT",label:" ",enabled:!0,intent:"warning"}]:j==="DONE"||j==="RECEIVED"||j==="EXCEPTION"?[{key:"VIEW_RESULT",label:" ",enabled:!0,intent:"default"},{key:"MARK_REVIEWED",label:" ",enabled:!0,intent:"success"}]:[{key:"OPEN_PIPELINE",label:" ",enabled:!0,intent:"default"}];return[{id:"MMSE",label:"MMSE",fullName:" ",description:"     .",requiredLevel:e==="HOSPITAL_REFERRAL"?"REQUIRED":"RECOMMENDED",status:m?"RECEIVED":e==="HOSPITAL_REFERRAL"?"REFERRED":"PENDING",source:p,orgName:t,dueAt:d,updatedAt:u,actions:[]},{id:"CDR_GDS",label:"CDR  GDS",fullName:" ",description:"CDR  GDS    1  .",requiredLevel:"REQUIRED",status:h?"RECEIVED":"MISSING",source:p,orgName:t,dueAt:d,updatedAt:u,missingReason:h?void 0:"  ",actions:[]},{id:"NEURO",label:"",fullName:"CERAD-K / SNSB-II / SNSB-C / LICA",description:"   /.",requiredLevel:"REQUIRED",status:x?"RECEIVED":"PENDING",source:p,orgName:t,dueAt:d,updatedAt:u,actions:[]},{id:"SPECIALIST",label:" ",fullName:" / ",description:"      .",requiredLevel:"REQUIRED",status:y?"DONE":e==="HOSPITAL_REFERRAL"?"REFERRED":"PENDING",source:p,orgName:t,dueAt:d,updatedAt:u,actions:[]},{id:"GDS_K",label:"GDS-K",fullName:"()",description:"         .",requiredLevel:"OPTIONAL",status:s.gdsk?"SCHEDULED":"PENDING",source:s.gdsk?"MANUAL":null,orgName:t,dueAt:d,updatedAt:u,actions:[]},{id:"ADL",label:"ADL",fullName:" ",description:"     .",requiredLevel:"OPTIONAL",status:s.adl?"SCHEDULED":"PENDING",source:s.adl?"MANUAL":null,orgName:t,dueAt:d,updatedAt:u,actions:[]},{id:"BPSD",label:"BPSD",fullName:" ",description:"     .",requiredLevel:"OPTIONAL",status:s.bpsd?"SCHEDULED":"PENDING",source:s.bpsd?"MANUAL":null,orgName:t,dueAt:d,updatedAt:u,actions:[]}].map(j=>({...j,actions:N(j.status)}))},[r,t,i,o,l,s.adl,s.bpsd,s.gdsk,e,a.cdr,a.mmse,a.neuroCognitiveType,a.specialist])}function VEe({summary:e,route:t,onOpenMissing:r,onPrimaryAction:a,onReviewComplete:s}){const i=t.routeType==="HOSPITAL_REFERRAL"?" ":"  ";return n.jsxs("div",{className:"rounded-lg border border-indigo-200 bg-indigo-50 p-3",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-2 md:grid-cols-6",children:[n.jsxs("div",{className:"rounded-md border border-indigo-100 bg-white px-2 py-1.5",children:[n.jsx("p",{className:"text-[10px] text-slate-500",children:" "}),n.jsx("p",{className:de("mt-1 inline-flex rounded border px-1.5 py-0.5 text-[10px] font-semibold",zEe(e.status)),children:KEe(e.status)})]}),n.jsxs("div",{className:"rounded-md border border-indigo-100 bg-white px-2 py-1.5",children:[n.jsx("p",{className:"text-[10px] text-slate-500",children:" "}),n.jsx("p",{className:"mt-1 text-[11px] font-semibold text-slate-900",children:i})]}),n.jsxs("div",{className:"rounded-md border border-indigo-100 bg-white px-2 py-1.5",children:[n.jsx("p",{className:"text-[10px] text-slate-500",children:""}),n.jsx("p",{className:"mt-1 text-[11px] font-semibold text-slate-900",children:mt(t.dueAt)})]}),n.jsxs("div",{className:"rounded-md border border-indigo-100 bg-white px-2 py-1.5",children:[n.jsx("p",{className:"text-[10px] text-slate-500",children:" "}),n.jsx("p",{className:"mt-1 text-[11px] font-semibold text-slate-900",children:mt(t.lastSyncAt)})]}),n.jsxs("div",{className:"rounded-md border border-indigo-100 bg-white px-2 py-1.5",children:[n.jsx("p",{className:"text-[10px] text-slate-500",children:" "}),n.jsxs("p",{className:"mt-1 text-[11px] font-semibold text-slate-900",children:[e.requiredSatisfaction,"%"]})]}),n.jsxs("div",{className:"rounded-md border border-indigo-100 bg-white px-2 py-1.5",children:[n.jsxs("button",{type:"button",onClick:r,className:de("inline-flex items-center gap-1 rounded border px-1.5 py-0.5 text-[10px] font-semibold",e.missingCount>0?"border-rose-200 bg-rose-50 text-rose-700":"border-emerald-200 bg-emerald-50 text-emerald-700"),children:[n.jsx(Qa,{size:12})," ",e.missingCount,""]}),n.jsxs("p",{className:"mt-1 text-[10px] text-slate-500",children:[" ",e.qualityScore,"%"]})]})]}),n.jsxs("div",{className:"mt-3 flex flex-wrap items-center justify-end gap-2",children:[n.jsx("button",{type:"button",onClick:a,className:"rounded-md border border-indigo-200 bg-white px-3 py-1.5 text-[11px] font-semibold text-indigo-700",children:t.routeType==="HOSPITAL_REFERRAL"?" /":"  "}),n.jsx("button",{type:"button",onClick:s,className:"rounded-md bg-[#163b6f] px-3 py-1.5 text-[11px] font-semibold text-white",children:" "})]})]})}function YEe({routeType:e,orgName:t,dueAt:r,needsReasonOnChange:a,onSelectRoute:s}){return n.jsxs("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-2",children:[n.jsxs("button",{type:"button",onClick:()=>s("HOSPITAL_REFERRAL"),className:de("rounded-md border px-3 py-2 text-left",e==="HOSPITAL_REFERRAL"?"border-indigo-300 bg-indigo-50 text-indigo-800":"border-slate-200 bg-white text-slate-700"),children:[n.jsx("p",{className:"text-xs font-semibold",children:n.jsx(Cd,{term:" "})}),n.jsxs("p",{className:"mt-1 text-[10px]",children:[": ",t||"-"]}),n.jsxs("p",{className:"text-[10px]",children:[": ",mt(r)]})]}),n.jsxs("button",{type:"button",onClick:()=>s("CENTER_DIRECT"),className:de("rounded-md border px-3 py-2 text-left",e==="CENTER_DIRECT"?"border-indigo-300 bg-indigo-50 text-indigo-800":"border-slate-200 bg-white text-slate-700"),children:[n.jsx("p",{className:"text-xs font-semibold",children:n.jsx(Cd,{term:"  "})}),n.jsx("p",{className:"mt-1 text-[10px]",children:"  /  "}),a?n.jsx("p",{className:"text-[10px] text-amber-700",children:"        ."}):null]})]})}function XEe({item:e,onAction:t,registerRef:r}){const a=e.status==="MISSING"||e.status==="NEEDS_REVIEW";return n.jsxs("div",{ref:r?.(e.id),tabIndex:-1,className:de("rounded-md border bg-white p-3 outline-none",a?"border-rose-300 bg-rose-50/40":"border-slate-200"),children:[n.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2",children:[n.jsxs("div",{children:[qEe(e),n.jsx("p",{className:"mt-0.5 text-[10px] text-slate-500",children:e.fullName})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-1",children:[n.jsx("span",{className:"rounded border border-slate-200 bg-slate-50 px-1.5 py-0.5 text-[10px] font-semibold text-slate-700",children:UEe(e.requiredLevel)}),n.jsx("span",{className:de("rounded border px-1.5 py-0.5 text-[10px] font-semibold",GEe(e.status)),children:BEe(e.status)})]})]}),n.jsx("p",{className:"mt-1 text-[10px] text-slate-600",children:e.description}),n.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-[10px] text-slate-600",children:[n.jsxs("p",{children:[": ",HEe(e.source)]}),n.jsxs("p",{children:[": ",e.orgName||"-"]}),n.jsxs("p",{children:[": ",mt(e.dueAt)]}),n.jsxs("p",{children:[": ",mt(e.updatedAt)]})]}),e.missingReason?n.jsx("p",{className:"mt-1 rounded border border-rose-200 bg-rose-50 px-2 py-1 text-[10px] font-semibold text-rose-700",children:e.missingReason}):null,n.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:e.actions.map(s=>n.jsx("button",{type:"button",disabled:!s.enabled,onClick:()=>t(e,s),className:de("rounded border px-1.5 py-1 text-[10px] font-semibold",s.intent==="danger"?"border-rose-200 bg-rose-50 text-rose-700":s.intent==="warning"?"border-amber-200 bg-amber-50 text-amber-700":s.intent==="success"?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-slate-200 bg-slate-50 text-slate-700",s.enabled?"":"cursor-not-allowed opacity-50"),children:s.label},s.key))})]})}function QEe({items:e,onAction:t,registerRef:r}){return n.jsx("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-2",children:e.map(a=>n.jsx(XEe,{item:a,onAction:t,registerRef:r},a.id))})}const cb={PRECHECK:["Stage1   Stage2   ","  (/MMSE/CDRGDS/)   "," ( /  ) ","// "],CONTACT_EXECUTION:["MMSE  ","CDR  GDS  "," / "," /   "],RESPONSE_HANDLING:[" (/MCI/) ","   ( )","MCI  (//) ","    "],FOLLOW_UP:["/MCI/    1 "," (/)     ","    "]},ZEe={MMSE:" (/ ) .",CDR:"   .",GDS:"   :   CDR      .","GDS-K":"         .",ADL:" (// ) .",BPSD:"   (// ) .",MCI:" .",AD:"    .",ANN:"()   ( )."," ":"        .","  ":"   /    ."};function Cd({term:e,className:t}){return n.jsx(a0,{term:e,className:t})}function a0({term:e,className:t}){const[r,a]=g.useState(!1),s=g.useId(),i=g.useRef(null),o=ZEe[e];return g.useEffect(()=>{if(!r)return;const l=d=>{const u=d.target;i.current?.contains(u)||a(!1)};return window.addEventListener("pointerdown",l),()=>window.removeEventListener("pointerdown",l)},[r]),o?n.jsxs("span",{ref:i,className:de("relative inline-flex items-center",t),children:[n.jsxs("button",{type:"button",className:"inline-flex items-center gap-1 rounded px-0.5 text-inherit underline decoration-dotted underline-offset-2 focus-visible:outline focus-visible:outline-2 focus-visible:outline-indigo-300","aria-describedby":r?s:void 0,"aria-expanded":r,onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),onFocus:()=>a(!0),onBlur:l=>{const d=l.relatedTarget;i.current?.contains(d)||a(!1)},onClick:()=>a(l=>!l),children:[e,n.jsx(Gn,{size:12,className:"text-slate-400"})]}),r?n.jsx("span",{id:s,role:"tooltip",className:"absolute left-0 top-[calc(100%+6px)] z-40 w-64 rounded-md border border-slate-200 bg-white px-2 py-1.5 text-[10px] font-medium text-slate-600 shadow-lg",children:o}):null]}):n.jsx("span",{className:t,children:e})}function db({items:e}){return n.jsxs("div",{className:"rounded-md border border-indigo-200 bg-indigo-50 p-3",children:[n.jsx("p",{className:"text-xs font-semibold text-indigo-900",children:"  "}),n.jsx("ul",{className:"mt-1 space-y-1 text-[11px] text-indigo-800",children:e.map(t=>n.jsxs("li",{children:[" ",t]},t))})]})}function JEe({scoreSummary:e,modelPriorityValue:t,modelPriorityMeta:r,contactPriority:a,interventionLevel:s,stage3Risk:i,stage3DiffPathStatus:o,stage3RiskReviewedAt:l,onStage3MarkRiskReviewed:d,mode:u="stage1",stage2OpsView:p=!1,stage2ResultLabel:m,stage2MciStage:h,stage2Probs:x,stage2DiagnosisStatus:y,stage2CompletionPct:N,stage2RequiredDataPct:v,stage2NextDiagnosisAt:j,stage2QualityScore:E,stage2WaitingCount:C,stage2ResultMissingCount:A,stage2ClassificationConfirmed:S,stage2ModelAvailable:_=!1,stage3ModelAvailable:O=!1,stage2MissingEvidence:D=[],stage3MissingEvidence:k=[],onOpenStage2Input:M,onOpenStage3Input:F}){const $=u==="stage2",B=u==="stage3",P=B&&p,W=h===""?82:h===""?34:58,K=Math.max(0,Math.min(100,t)),G=Math.max(1,100-K),U=K>=85?"":K>=65?"":K>=45?"":"",te=U===""?"text-red-600":U===""?"text-orange-600":U===""?"text-blue-600":"text-emerald-600",re=[{key:"",range:"0-44",tone:"border-emerald-300 bg-emerald-50 text-emerald-700",dot:"bg-emerald-500",guide:"/"},{key:"",range:"45-64",tone:"border-blue-300 bg-blue-50 text-blue-700",dot:"bg-blue-500",guide:"  "},{key:"",range:"65-84",tone:"border-orange-300 bg-orange-50 text-orange-700",dot:"bg-orange-500",guide:"  "},{key:"",range:"85-100",tone:"border-red-300 bg-red-50 text-red-700",dot:"bg-red-500",guide:"24  "}];if(B&&i){if(P){const L=[{label:" ",value:_?m==="MCI"?`${m}(${Gwe(h)})`:m??"":"",hint:"  ( )"},{label:"2  ",value:ez(y),hint:"IN_PROGRESS / COMPLETED"},{label:" ",value:`${N??0}%`,hint:"   "},{label:" ",value:`${v??0}%`,hint:"  "},{label:"  ",value:mt(j),hint:"/ "},{label:" ",value:`${E??0}%`,hint:"/"}];return n.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"Stage2   "}),n.jsx("span",{className:"rounded-full border border-slate-200 bg-slate-50 px-2 py-0.5 text-[11px] font-semibold text-slate-700",children:"  ( )"})]}),n.jsx("div",{className:"mt-3 grid grid-cols-2 gap-2 md:grid-cols-3 xl:grid-cols-6",children:L.map(H=>n.jsxs("article",{title:H.hint,className:"rounded-lg border border-slate-200 bg-gradient-to-b from-white to-slate-50 px-2.5 py-2 shadow-sm transition-all duration-150 hover:-translate-y-0.5 hover:shadow-md",children:[n.jsx("p",{className:"text-[10px] font-semibold text-slate-500",children:H.label}),n.jsx("p",{className:"mt-1 text-xs font-bold text-slate-900",children:H.value})]},H.label))}),n.jsx("div",{className:"mt-4",children:_?n.jsx(YK,{probs:x,predictedLabel:m,mciSeverity:h,mciScore:W}):n.jsx(Du,{stage:2,missing:D,onOpenStep:M})}),n.jsx("div",{className:"mt-4 grid grid-cols-1 gap-2 md:grid-cols-2 xl:grid-cols-5",children:e.map(H=>n.jsxs("article",{className:"rounded-xl border border-gray-200 bg-gradient-to-b from-white to-slate-50 p-3 shadow-sm transition-all duration-150 hover:-translate-y-0.5 hover:shadow-md",title:"Stage2  KPI",children:[n.jsx("p",{className:"text-[11px] font-semibold text-gray-500",children:H.label}),n.jsxs("p",{className:"mt-1 text-lg font-bold text-slate-900",children:[H.value,H.unit?n.jsx("span",{className:"ml-0.5 text-xs text-gray-400",children:H.unit}):null]}),n.jsxs("p",{className:"text-[10px] text-gray-400",children:[" ",mt(H.updatedAt)]}),H.flags?.length?n.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:H.flags.map(ae=>n.jsx("span",{className:"rounded bg-amber-100 px-1.5 py-0.5 text-[10px] font-semibold text-amber-700",children:ae},`${H.label}-${ae}`))}):null]},H.label))}),n.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-2 md:grid-cols-3",children:[n.jsxs("article",{className:"rounded-xl border border-slate-200 bg-slate-50 p-3",children:[n.jsx("p",{className:"text-[11px] font-semibold text-slate-700",children:"/  "}),n.jsxs("p",{className:"mt-1 text-lg font-bold text-slate-900",children:[C??0,""]}),n.jsx("p",{className:"text-[10px] text-slate-500",children:" /   "})]}),n.jsxs("article",{className:"rounded-xl border border-amber-200 bg-amber-50 p-3",children:[n.jsx("p",{className:"text-[11px] font-semibold text-amber-800",children:"   "}),n.jsxs("p",{className:"mt-1 text-lg font-bold text-amber-900",children:[A??0,""]}),n.jsx("p",{className:"text-[10px] text-amber-700",children:"  (MMSE/CDR//) "})]}),n.jsxs("article",{className:"rounded-xl border border-indigo-200 bg-indigo-50 p-3",children:[n.jsx("p",{className:"text-[11px] font-semibold text-indigo-900",children:"  "}),n.jsx("p",{className:"mt-1 text-lg font-bold text-indigo-900",children:S?"CONFIRMED":"UNCONFIRMED"}),n.jsx("p",{className:"text-[10px] text-indigo-700",children:"     "})]})]})]})}if(!O)return n.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"AD  (2)"}),n.jsx("span",{className:"rounded-full border border-slate-200 bg-slate-50 px-2 py-0.5 text-[11px] font-semibold text-slate-700",children:" "})]}),n.jsx("div",{className:"mt-3",children:n.jsx(Du,{stage:3,missing:k,onOpenStep:F})})]});const q=L=>{if(P){if(L.includes(" "))return"Stage2   . //  .";if(L.includes("/ "))return"/    .";if(L.includes("  "))return" /  .";if(L.includes("  "))return"/MCI/   .";if(L.includes(" "))return" //   ."}return L.includes(" ")?"2  AD     .    .":L.includes(" ")?"/    .   .":L.includes(" ")?"    . /    .":L.includes(" ")?"   . /   .":L.includes(" ")?"//    .":"  ."};return n.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[n.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[n.jsx("div",{children:n.jsxs("h3",{className:"group relative inline-flex items-center gap-1 text-sm font-bold text-slate-900",children:[P?"Stage2   ":"AD  (2)",n.jsx(Gn,{size:13,className:"text-slate-400"}),n.jsx("span",{className:"pointer-events-none absolute left-0 top-[calc(100%+8px)] z-20 w-80 rounded-md border border-slate-200 bg-white px-2 py-1.5 text-[10px] font-medium text-slate-600 opacity-0 shadow-md transition-opacity duration-150 group-hover:opacity-100 group-focus-within:opacity-100",children:P?"Stage2  /    . //    .":"/     2  AD     .      ."})]})}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsxs("span",{className:"group relative rounded-full border border-blue-200 bg-blue-50 px-2.5 py-1 text-[11px] font-semibold text-blue-700",children:[P?"  ":"2 "," ",_o(i.risk2y_now),"%",n.jsx("span",{className:"pointer-events-none absolute left-0 top-[calc(100%+6px)] z-20 w-56 rounded-md border border-slate-200 bg-white px-2 py-1 text-[10px] font-medium text-slate-600 opacity-0 shadow-md transition-opacity duration-150 group-hover:opacity-100",children:P?"  :    ":":    "})]}),n.jsxs("span",{className:"group relative rounded-full border border-indigo-200 bg-indigo-50 px-2.5 py-1 text-[11px] font-semibold text-indigo-700",children:[P?" ":""," ",xp(i.risk2y_now),n.jsx("span",{className:"pointer-events-none absolute left-0 top-[calc(100%+6px)] z-20 w-52 rounded-md border border-slate-200 bg-white px-2 py-1 text-[10px] font-medium text-slate-600 opacity-0 shadow-md transition-opacity duration-150 group-hover:opacity-100",children:P?"     ":" /    "})]}),n.jsxs("span",{className:de("group relative rounded-full border px-2.5 py-1 text-[11px] font-semibold",a.tone),children:[P?"  ":" "," ",a.label,n.jsx("span",{className:"pointer-events-none absolute left-0 top-[calc(100%+6px)] z-20 w-52 rounded-md border border-slate-200 bg-white px-2 py-1 text-[10px] font-medium text-slate-600 opacity-0 shadow-md transition-opacity duration-150 group-hover:opacity-100",children:P?"  : // ":" :      "})]})]})]}),n.jsx("div",{className:"mt-3 grid grid-cols-1 gap-2 md:grid-cols-2 xl:grid-cols-5",children:e.map(L=>n.jsxs("article",{className:"group relative rounded-xl border border-gray-200 bg-gradient-to-b from-white to-slate-50 p-3 shadow-sm transition-all duration-150 hover:-translate-y-0.5 hover:shadow-md",children:[n.jsx("p",{className:"text-[11px] font-semibold text-gray-500",children:L.label}),n.jsxs("p",{className:"mt-1 text-lg font-bold text-slate-900",children:[L.value,L.unit?n.jsx("span",{className:"ml-0.5 text-xs text-gray-400",children:L.unit}):null]}),n.jsxs("p",{className:"text-[10px] text-gray-400",children:[" ",mt(L.updatedAt)]}),L.flags?.length?n.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:L.flags.map(H=>n.jsx("span",{className:"rounded bg-amber-100 px-1.5 py-0.5 text-[10px] font-semibold text-amber-700",children:H},`${L.label}-${H}`))}):n.jsx("span",{className:"mt-1 inline-flex rounded bg-emerald-100 px-1.5 py-0.5 text-[10px] font-semibold text-emerald-700",children:""}),n.jsx("span",{className:"pointer-events-none absolute left-3 top-[calc(100%+6px)] z-20 w-56 rounded-md border border-slate-200 bg-white px-2 py-1 text-[10px] font-medium text-slate-600 opacity-0 shadow-md transition-opacity duration-150 group-hover:opacity-100",children:q(L.label)})]},L.label))}),n.jsxs("div",{className:"mt-4 rounded-xl border border-indigo-200 bg-indigo-50 p-3",children:[n.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-semibold text-indigo-900",children:P?" / ":"  ( + 2 )"}),n.jsxs("p",{className:"text-[11px] text-indigo-700",children:[P?" ":""," ",i.trend,"   ",mt(i.updatedAt),"   ",i.modelVersion]})]}),n.jsx("button",{type:"button",onClick:d,className:"rounded-md border border-indigo-300 bg-white px-2.5 py-1 text-[11px] font-semibold text-indigo-700 hover:bg-indigo-100",children:l?P?"   ":"   ":P?"   ":"   "})]}),n.jsx("div",{className:"mt-2",children:n.jsx(dz,{risk:i,stageBadge:o,stage2OpsView:P})}),n.jsx("p",{className:"mt-2 text-[11px] text-indigo-700",children:P?i.variabilityNote??" : //    .":i.variabilityNote??" :     //  ."})]}),n.jsxs("details",{className:"mt-4 rounded-xl border border-slate-200 bg-slate-50 p-3",children:[n.jsx("summary",{className:"cursor-pointer text-[11px] font-semibold text-slate-800",children:" () "}),n.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-4 xl:grid-cols-[210px,1fr]",children:[n.jsxs("div",{className:"rounded-lg border border-white bg-white px-3 py-2",children:[n.jsx("p",{className:"text-[10px] font-semibold text-gray-500",children:"   /  "}),n.jsxs("p",{className:de("mt-1 text-3xl font-black",te),children:[K," ",n.jsxs("span",{className:"text-lg font-bold text-slate-600",children:["/ ",s]})]}),n.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[n.jsx("span",{className:de("rounded-full border px-2 py-0.5 text-[10px] font-semibold",r.tone),children:U}),n.jsxs("span",{className:"text-[10px] font-semibold text-gray-500",children:[" ",G,"% "]})]})]}),n.jsx("div",{className:"rounded-lg border border-white bg-white px-3 py-3",children:n.jsx("div",{className:"grid grid-cols-2 gap-2 lg:grid-cols-4",children:re.map(L=>{const H=L.key===U;return n.jsxs("div",{className:de("rounded-lg border px-2 py-2 transition-colors",H?L.tone:"border-gray-200 bg-gray-50 text-gray-500"),children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"text-[11px] font-bold",children:L.key}),n.jsx("span",{className:de("h-2 w-2 rounded-full",H?L.dot:"bg-gray-300")})]}),n.jsx("p",{className:"mt-0.5 text-[10px] font-semibold",children:L.range}),n.jsx("p",{className:"mt-1 text-[10px]",children:L.guide})]},L.key)})})})]})]})]})}return n.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[n.jsx("h3",{className:"text-sm font-bold text-slate-900",children:$?"2   ":"1  "}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:de("rounded-full border px-2.5 py-1 text-[11px] font-semibold",a.tone),children:[$?" ":" "," ",a.label]}),n.jsxs("span",{className:de("rounded-full border px-2.5 py-1 text-[11px] font-semibold",r.tone),children:[$?"  ":"  "," ",r.label," ",t]})]})]}),n.jsx("div",{className:"mt-3 grid grid-cols-1 gap-2 md:grid-cols-2 xl:grid-cols-4",children:e.map(q=>n.jsxs("article",{className:"rounded-lg border border-gray-100 bg-gray-50 p-3",children:[n.jsx("p",{className:"text-[11px] font-semibold text-gray-500",children:q.label}),n.jsxs("p",{className:"mt-1 text-lg font-bold text-slate-900",children:[q.value,q.unit?n.jsx("span",{className:"ml-0.5 text-xs text-gray-400",children:q.unit}):null]}),n.jsxs("p",{className:"text-[10px] text-gray-400",children:[" ",mt(q.updatedAt)]})]},q.label))}),n.jsxs("div",{className:"mt-4 rounded-xl border border-slate-200 bg-slate-50 p-3",children:[n.jsxs("div",{className:"flex items-center justify-between text-[11px] text-slate-700",children:[n.jsxs("span",{className:"relative inline-flex items-center gap-1 font-semibold group",children:[$?"   Bullet Chart":"  Bullet Chart",n.jsx(Gn,{size:13,className:"text-slate-400"}),n.jsxs("span",{className:"pointer-events-none absolute left-0 top-[calc(100%+8px)] z-30 w-64 rounded-lg border border-slate-200 bg-white p-2 text-[11px] text-slate-600 opacity-0 shadow-md transition-opacity duration-150 group-hover:opacity-100 group-focus-within:opacity-100",children:[n.jsx("span",{className:"block font-semibold text-slate-900",children:"  "}),n.jsx("span",{className:"mt-1 block",children:"- //   ."}),n.jsx("span",{className:"block",children:"-     ."}),n.jsx("span",{className:"block",children:"-  (///)   ."})]})]}),n.jsx("span",{children:r.guide})]}),n.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-4 xl:grid-cols-[210px,1fr]",children:[n.jsxs("div",{className:"rounded-lg border border-white bg-white px-3 py-2",children:[n.jsx("p",{className:"text-[10px] font-semibold text-gray-500",children:"   /  "}),n.jsxs("p",{className:de("mt-1 text-3xl font-black",te),children:[K," ",n.jsxs("span",{className:"text-lg font-bold text-slate-600",children:["/ ",s]})]}),n.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[n.jsx("span",{className:de("rounded-full border px-2 py-0.5 text-[10px] font-semibold",r.tone),children:U}),n.jsxs("span",{className:"text-[10px] font-semibold text-gray-500",children:[" ",G,"% "]})]})]}),n.jsxs("div",{className:"rounded-lg border border-white bg-white px-3 py-3",children:[n.jsx("div",{className:"grid grid-cols-2 gap-2 lg:grid-cols-4",children:re.map(q=>{const L=q.key===U;return n.jsxs("div",{className:de("rounded-lg border px-2 py-2 transition-colors",L?q.tone:"border-gray-200 bg-gray-50 text-gray-500"),children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"text-[11px] font-bold",children:q.key}),n.jsx("span",{className:de("h-2 w-2 rounded-full",L?q.dot:"bg-gray-300")})]}),n.jsx("p",{className:"mt-0.5 text-[10px] font-semibold",children:q.range}),n.jsx("p",{className:"mt-1 text-[10px]",children:q.guide})]},q.key)})}),n.jsxs("div",{className:"mt-2 rounded-md border border-gray-100 bg-gray-50 px-2 py-1.5 text-[11px] text-gray-600",children:[" : ",n.jsx("span",{className:de("font-bold",te),children:U}),"   ",K," / ",s]})]})]})]})]})}function OA({timeline:e,filter:t,onFilterChange:r,listClassName:a,mode:s="stage1",stage2OpsView:i=!1}){const o=s==="stage3",l=o&&i;return n.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h3",{className:"text-sm font-bold text-slate-900 flex items-center gap-2",children:[n.jsx(ta,{size:15,className:"text-slate-500"}),l?"// ":o?"/// ":"// "]}),n.jsx("div",{className:"flex items-center gap-1 rounded-lg border border-gray-200 bg-gray-50 p-1 text-[11px] font-semibold",children:[{key:"ALL",label:""},{key:"CALL",label:""},{key:"SMS",label:""},{key:"STATUS",label:""}].map(d=>n.jsx("button",{onClick:()=>r(d.key),className:de("rounded-md px-2 py-1 transition-colors",t===d.key?"bg-white text-slate-900 shadow-sm":"text-gray-500 hover:bg-white"),children:d.label},d.key))})]}),n.jsx("div",{className:de("mt-3 space-y-2",a),children:e.length===0?n.jsx("p",{className:"rounded-md border border-gray-100 bg-gray-50 px-3 py-2 text-xs text-gray-500",children:l?"    //    .":o?"           .":"   ."}):e.map((d,u)=>n.jsxs("div",{className:"rounded-md border border-gray-100 bg-gray-50 px-3 py-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"text-xs font-semibold text-slate-800",children:Gb(d)}),n.jsx("span",{className:"text-[11px] text-gray-500",children:mt(d.at)})]}),n.jsx("p",{className:"mt-1 text-[11px] text-gray-600",children:tz(d)}),n.jsxs("p",{className:"mt-1 text-[10px] text-gray-400",children:[": ",d.by]})]},`${d.type}-${d.at}-${u}`))}),n.jsx("p",{className:"mt-3 text-[11px] text-gray-500",children:l?"    : //     .":o?"    : ///       ":"    :  3    "})]})}function kA({level:e,statusLabel:t,guides:r,onChangeLevel:a,onHold:s,onExclude:i,mode:o="stage1"}){const l=o==="stage3";return n.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[n.jsxs("h3",{className:"text-sm font-bold text-slate-900 flex items-center gap-2",children:[n.jsx(Im,{size:15,className:"text-slate-500"}),l?"  ( )":"  ( )"]}),n.jsx("div",{className:"mt-3 space-y-2",children:r.map(d=>n.jsxs("button",{onClick:()=>a(d.level),title:`${d.purpose} /  : ${d.whenToUse}`,className:de("w-full rounded-lg border px-3 py-2 text-left transition-colors",d.level===e?d.tone:"border-gray-200 bg-gray-50 hover:bg-gray-100"),children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("p",{className:"text-xs font-semibold",children:[d.level,"  ",d.label]}),d.level===e?n.jsx(Zs,{size:13}):null]}),n.jsx("p",{className:"mt-1 text-[11px] text-gray-600",children:d.purpose})]},d.level))}),n.jsx("div",{className:"mt-3 rounded-md border border-gray-100 bg-gray-50 p-2",children:n.jsxs("p",{className:"text-[11px] text-gray-600",children:[" : ",n.jsx("strong",{children:t})]})}),n.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[n.jsxs("button",{onClick:s,className:"inline-flex items-center justify-center gap-1 rounded-md border border-orange-200 bg-orange-50 px-2 py-1.5 text-[11px] font-semibold text-orange-700",children:[n.jsx(aX,{size:12})," "]}),n.jsxs("button",{onClick:i,className:"inline-flex items-center justify-center gap-1 rounded-md border border-red-200 bg-red-50 px-2 py-1.5 text-[11px] font-semibold text-red-700",children:[n.jsx(EY,{size:12}),"  "]})]})]})}function eAe({draft:e,onClose:t,onChangeReason:r,onConfirm:a}){return e?n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/35 p-4",children:n.jsxs("div",{className:"w-full max-w-md rounded-xl border border-gray-200 bg-white p-4 shadow-2xl",children:[n.jsx("h3",{className:"text-sm font-bold text-slate-900",children:e.title}),n.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"     ."}),n.jsx("textarea",{value:e.reason,onChange:s=>r(s.target.value),className:"mt-3 h-24 w-full rounded-lg border border-gray-200 px-2 py-1.5 text-xs outline-none focus:border-blue-400",placeholder:"  "}),n.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[n.jsx("button",{onClick:t,className:"rounded-md border border-gray-200 px-3 py-1.5 text-xs font-semibold text-gray-700",children:""}),n.jsx("button",{onClick:a,disabled:!e.reason.trim(),className:"rounded-md bg-[#163b6f] px-3 py-1.5 text-xs font-semibold text-white disabled:bg-gray-300",children:e.confirmLabel})]})]})}):null}function tAe({draft:e,loading:t,onClose:r,onChangeResult:a,onChangeNote:s,onConfirm:i}){if(!e)return null;const o=[{value:"SUCCESS",label:" "},{value:"NO_ANSWER",label:""},{value:"REJECTED",label:""},{value:"WRONG_NUMBER",label:" "}],l=[{value:"DELIVERED",label:" "},{value:"FAILED",label:" "},{value:"PENDING",label:" "}];return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/35 p-4",children:n.jsxs("div",{className:"w-full max-w-md rounded-xl border border-gray-200 bg-white p-4 shadow-2xl",children:[n.jsx("h3",{className:"text-sm font-bold text-slate-900",children:e.title}),e.mode==="CALL"?n.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[" : ",String(Math.floor(e.durationSec/60)).padStart(2,"0"),":",String(e.durationSec%60).padStart(2,"0")]}):n.jsx("p",{className:"mt-1 text-xs text-gray-500",children:e.scheduled?"   ":"   "}),n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"text-[11px] font-semibold text-gray-600",children:""}),n.jsx("select",{value:e.result,onChange:d=>a(d.target.value),className:"mt-1 w-full rounded-md border border-gray-200 bg-white px-2 py-2 text-xs outline-none focus:border-blue-400",children:(e.mode==="CALL"?o:l).map(d=>n.jsx("option",{value:d.value,children:d.label},d.value))})]}),n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"text-[11px] font-semibold text-gray-600",children:""}),n.jsx("textarea",{value:e.note,onChange:d=>s(d.target.value),className:"mt-1 h-20 w-full rounded-md border border-gray-200 px-2 py-1.5 text-xs outline-none focus:border-blue-400",placeholder:"  "})]}),n.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[n.jsx("button",{onClick:r,disabled:t,className:"rounded-md border border-gray-200 px-3 py-1.5 text-xs font-semibold text-gray-700 disabled:opacity-50",children:""}),n.jsx("button",{onClick:i,disabled:t,className:"rounded-md bg-[#163b6f] px-3 py-1.5 text-xs font-semibold text-white disabled:bg-gray-300",children:t?" ...":""})]})]})})}function hi(e){if(!e)return"-";const t=new Date(e);return Number.isNaN(t.getTime())?e:`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")} ${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`}function rAe(e){return e?e.contactMode==="MANUAL_OVERRIDE"?`  (${e.effectiveMode==="HUMAN_FIRST"?" ":" "})`:e.effectiveMode==="HUMAN_FIRST"?" ":" ":"-"}function nAe(e){return e?e.slaLevel==="OVERDUE"?"":e.slaLevel==="DUE_SOON"?"":"":"-"}function G7(e){return e?.status??""}function aAe(e){return e?e==="TRACKING"?"":e==="REEVAL_DUE"?" ":e==="REEVAL_PENDING"?" ":e==="LINKAGE_PENDING"?" ":e==="PLAN_NEEDS_UPDATE"?"  ":e==="CHURN_RISK"?" ":"":"-"}function sAe(e){return e?e==="NONE"?"":e==="RECOMMENDED"?"":e==="REFERRED"?"":e==="SCHEDULED"?"":e==="COMPLETED"?"":e:"-"}function iAe(e){return e?e==="TRACKING"?"":e==="REEVAL_DUE"?"":e==="REEVAL_PENDING"?"":e==="LINKAGE_PENDING"?"":e==="PLAN_NEEDS_UPDATE"?"":e==="CHURN_RISK"?"()":"":"-"}function RA(e){return e?e==="NOT_STARTED"?"":e==="IN_PROGRESS"?"":e==="COMPLETED"?"":e:"-"}function PA(e){if(!e||e.length===0)return"  ";const t=e.slice(0,3).join(", ");return e.length<=3?t:`${t}  ${e.length-3}`}function uz({caseId:e,stage:t,onBack:r,forceMode:a}){const s=g.useMemo(()=>B1(e),[e]),[i,o]=g.useState(null),l=t==="Stage 2",d=a??(l?"stage2":"stage3"),u=d==="stage3",p=l&&u,m=s?.profile.phone??"-",h=s?.profile.name??" ",x=s?.profile.age,y=u?h:e,N=s?u?` ${h}   ${x??"-"}   ${m}`:` ${dg(s.profile.age)}   ${l?m:yl(s.profile.phone)}   ${s.id}`:u?"/  ":` ${e}`;return n.jsxs("div",{className:"flex h-full flex-col bg-[#f4f7fb]",children:[n.jsxs("div",{className:"sticky top-0 z-20 border-b border-slate-200 bg-white/95 px-6 py-4 shadow-sm backdrop-blur",children:[n.jsxs("div",{className:"flex items-center justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("button",{onClick:r,className:"rounded-full border border-slate-200 bg-white p-2 transition-colors hover:bg-slate-50",children:n.jsx(Tm,{size:20})}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-900",children:y}),n.jsx("span",{className:"rounded border border-blue-200 bg-blue-50 px-3.5 py-1.5 text-sm font-bold text-blue-700",children:t})]}),n.jsxs("p",{className:"mt-0.5 flex items-center gap-2 text-xs text-gray-500",children:[n.jsxs("span",{className:"font-bold text-gray-700",children:[": ",s?.manager??" "]}),n.jsx("span",{className:"h-2 w-px bg-gray-200"}),n.jsxs("span",{children:[" :"," ",n.jsx("span",{className:"font-bold text-blue-700",children:p?iAe(i?.stage3Meta?.opsStatus):u?i?.stage3Meta?aAe(i.stage3Meta.opsStatus):G7(s):l?RA(i?.stage2Meta?.diagnosisStatus):G7(s)})]}),n.jsx("span",{className:"h-2 w-px bg-gray-200"}),n.jsx("span",{className:"text-gray-600",children:N})]})]})]}),n.jsx("div",{className:"flex items-center gap-3",children:n.jsxs("button",{className:"flex items-center gap-2 rounded-lg border border-slate-200 px-4 py-2 text-xs font-bold text-slate-700 hover:bg-slate-50",children:[n.jsx(Fv,{size:14}),"   "]})})]}),i?n.jsx("div",{className:"mt-3 rounded-xl border border-slate-700 bg-gradient-to-r from-slate-900 to-slate-800 px-3 py-2 text-white",children:p&&i.stage2Meta?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-[11px] font-semibold",children:[n.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",title:"/MCI/   .",children:["  ",i.stage2Meta.classificationLabel,i.stage2Meta.classificationLabel==="MCI"&&i.stage2Meta.mciStage?`(${i.stage2Meta.mciStage===""?"":i.stage2Meta.mciStage})`:""]}),n.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",title:"Stage2   .",children:["2   ",RA(i.stage2Meta.diagnosisStatus)]}),n.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",title:"      .",children:["  ",i.stage2Meta.completionPct,"%"]}),n.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",title:"     .",children:["  ",i.stage2Meta.requiredDataPct,"%"]}),n.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",title:"      .",children:["   ",hi(i.stage2Meta.targetAt)]}),n.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",title:"     .",children:["  ",i.qualityScore,"%   ",i.missingCount,""]}),i.stage2Meta.modelAvailable===!1?n.jsxs("span",{className:"rounded-md bg-amber-100/90 px-2 py-1 text-amber-950",title:"        .",children:["   ",PA(i.stage2Meta.missingEvidence)]}):null]}),n.jsx("p",{className:"mt-1 text-[11px] text-slate-200",children:" :  /    //     ."}),n.jsxs("details",{className:"mt-1 text-[10px] text-slate-300",children:[n.jsx("summary",{className:"cursor-pointer",children:""}),n.jsxs("p",{className:"mt-1",children:["Stage2  ",hi(i.stage2Meta.enteredAt),"    ",hi(i.stage2Meta.targetAt),"   ",i.stage2Meta.delayDays,"    ",i.stage2Meta.nextActionLabel,"    ",hi(i.lastUpdatedAt)]})]})]}):u&&i.stage3Meta?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-[11px] font-semibold",children:[n.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",title:"2  AD     .",children:["2 "," ",i.stage3Meta.modelAvailable&&i.stage3Meta.risk2yNowPct!=null?`${i.stage3Meta.risk2yNowPct}% (${i.stage3Meta.risk2yLabel??"-"})`:""]}),n.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",title:"  .",children:["  ",hi(i.stage3Meta.nextReevalAt)]}),n.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",title:"/  .",children:[" ",sAe(i.stage3Meta.diffPathStatus)]}),n.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",title:"  .",children:[" ",i.stage3Meta.planStatus]}),n.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",title:"   .",children:["  ",i.stage3Meta.churnRisk]}),n.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",title:" / .",children:[" ",i.qualityScore,"%   ",i.missingCount,""]}),i.stage3Meta.modelAvailable===!1?n.jsxs("span",{className:"rounded-md bg-amber-100/90 px-2 py-1 text-amber-950",title:"        .",children:["   ",PA(i.stage3Meta.missingEvidence)]}):null]}),n.jsx("p",{className:"mt-1 text-[11px] text-slate-200",children:" :     //     ."}),n.jsxs("details",{className:"mt-1 text-[10px] text-slate-300",children:[n.jsx("summary",{className:"cursor-pointer",children:""}),i.stage3Meta.modelAvailable?n.jsxs("p",{className:"mt-1",children:["  ",hi(i.lastUpdatedAt),"    ",hi(i.stage3Meta.riskUpdatedAt),"   ",i.stage3Meta.trend,"   ",i.stage3Meta.modelVersion,"   ",i.stage3Meta.trackingCycleDays,"    ",hi(i.stage3Meta.nextTrackingContactAt)]}):n.jsxs("p",{className:"mt-1",children:["  ",hi(i.lastUpdatedAt),"        ."]})]})]}):l&&i.stage2Meta?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-[11px] font-semibold",children:[n.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:["Stage2   ",RA(i.stage2Meta.diagnosisStatus)]}),n.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:["  ",i.stage2Meta.completionPct,"% ( ",i.stage2Meta.completedCount,")"]}),n.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:["  ",i.stage2Meta.classificationLabel,i.stage2Meta.classificationLabel==="MCI"&&i.stage2Meta.mciStage?`(${i.stage2Meta.mciStage})`:""]}),n.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:["MCI  ",i.stage2Meta.mciStage??"-"]}),n.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:["Stage3   ",i.stage2Meta.stage3EntryNeeded?"TRUE":"FALSE"]}),n.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:["  ",i.qualityScore,"%"]}),n.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:[" ",i.missingCount,""]}),n.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:["  ",hi(i.lastUpdatedAt)]}),i.stage2Meta.modelAvailable===!1?n.jsxs("span",{className:"rounded-md bg-amber-100/90 px-2 py-1 text-amber-950",title:"        .",children:["   ",PA(i.stage2Meta.missingEvidence)]}):null]}),n.jsxs("p",{className:"mt-1 text-[11px] text-slate-200",children:["Stage2  ",hi(i.stage2Meta.enteredAt),"    ",hi(i.stage2Meta.targetAt),"   ",i.stage2Meta.delayDays,"    ",i.stage2Meta.nextActionLabel]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-[11px] font-semibold",children:[n.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:[l?"/ ":" "," ",rAe(i)]}),n.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:["SLA ",nAe(i)]}),n.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:[l?" ":" "," ",i.qualityScore,"%"]}),n.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:[" ",i.missingCount,""]}),n.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:[l?" ":""," ",i.warningCount,""]})]}),n.jsxs("p",{className:"mt-1 text-[11px] text-slate-200",children:["  ",hi(i.lastUpdatedAt),"   : ",l?"//     .":"        ."]})]})}):null]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:n.jsx(cz,{caseRecord:s,onHeaderSummaryChange:o,mode:d,surfaceStage:t})})]})}function fz({caseId:e,onBack:t}){return n.jsx(uz,{caseId:e,stage:"Stage 2",forceMode:"stage3",onBack:t})}function mz({caseId:e,onBack:t}){return n.jsx(uz,{caseId:e,stage:"Stage 3",onBack:t})}function oAe(e){if(!e)return"-";const t=new Date(e);return Number.isNaN(t.getTime())?e:`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")} ${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`}function lAe(e){return e?e.contactMode==="MANUAL_OVERRIDE"?`  (${e.effectiveMode==="HUMAN_FIRST"?" ":" "})`:e.effectiveMode==="HUMAN_FIRST"?" ":" ":"-"}function cAe(e){return e?e.slaLevel==="OVERDUE"?"":e.slaLevel==="DUE_SOON"?"":"":"-"}function dAe({caseId:e,stage:t,onBack:r}){const a=g.useMemo(()=>B1(e),[e]),[s,i]=g.useState(null),o=t==="Stage 1",l=o&&a?` ${dg(a.profile.age)}   ${yl(a.profile.phone)}   ${a.id}`:null;return t==="Stage 2"?n.jsx(fz,{caseId:e,onBack:r}):t==="Stage 3"?n.jsx(mz,{caseId:e,onBack:r}):n.jsxs("div",{className:"flex h-full flex-col bg-[#f4f7fb]",children:[n.jsxs("div",{className:"sticky top-0 z-20 border-b border-slate-200 bg-white/95 px-6 py-4 shadow-sm backdrop-blur",children:[n.jsxs("div",{className:"flex items-center justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("button",{onClick:r,className:"rounded-full border border-slate-200 bg-white p-2 transition-colors hover:bg-slate-50",children:n.jsx(Tm,{size:20})}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-900",children:e}),n.jsx("span",{className:"rounded border border-blue-200 bg-blue-50 px-3.5 py-1.5 text-sm font-bold text-blue-700",children:t})]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-0.5 flex items-center gap-2",children:[n.jsxs("span",{className:"font-bold text-gray-700",children:[": ",a?.manager??" "]}),n.jsx("span",{className:"w-px h-2 bg-gray-200"}),n.jsxs("span",{children:[" : ",n.jsx("span",{className:"font-bold text-blue-700",children:a?.status??""})]}),l?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"w-px h-2 bg-gray-200"}),n.jsx("span",{className:"text-gray-600",children:l})]}):null]})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{className:"flex items-center gap-2 rounded-lg border border-slate-200 px-4 py-2 text-xs font-bold text-slate-700 hover:bg-slate-50",children:[n.jsx(Fv,{size:14}),"   "]}),n.jsxs("button",{className:"flex items-center gap-2 rounded-lg bg-[#15386a] px-4 py-2 text-xs font-bold text-white shadow-sm transition-all hover:shadow-md",children:["  1  ",n.jsx(Om,{size:14})]})]})]}),o&&s?n.jsxs("div",{className:"mt-3 rounded-xl border border-slate-700 bg-gradient-to-r from-slate-900 to-slate-800 px-3 py-2 text-white",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-[11px] font-semibold",children:[n.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:["  ",lAe(s)]}),n.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:["SLA ",cAe(s)]}),n.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:["  ",s.qualityScore,"%"]}),n.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:[" ",s.missingCount,""]}),n.jsxs("span",{className:"rounded-md bg-white/15 px-2 py-1",children:[" ",s.warningCount,""]})]}),n.jsxs("p",{className:"mt-1 text-[11px] text-slate-200",children:["  ",oAe(s.lastUpdatedAt),"   :         ."]})]}):null]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:o?n.jsx(n.Fragment,{children:n.jsx(cz,{caseRecord:a,onHeaderSummaryChange:i})}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-5",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(iX,{size:16,className:"text-gray-500"})," "]}),n.jsx("span",{className:"text-[10px] font-semibold text-gray-500 bg-gray-100 px-2 py-1 rounded",children:t==="Stage 1"?"Stage 1: ID  ":"Stage 2+:   "})]}),a?n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-xs",children:[n.jsxs("div",{className:"rounded-lg border border-gray-100 bg-gray-50 px-3 py-2",children:[n.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase",children:" "}),n.jsx("p",{className:"mt-1 font-bold text-gray-800",children:t==="Stage 1"?a.id:`${R2e(a.profile.name)} (${a.id})`})]}),n.jsxs("div",{className:"rounded-lg border border-gray-100 bg-gray-50 px-3 py-2",children:[n.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase",children:""}),n.jsx("p",{className:"mt-1 font-bold text-gray-800",children:t==="Stage 1"?dg(a.profile.age):`${a.profile.age}`})]}),n.jsxs("div",{className:"rounded-lg border border-gray-100 bg-gray-50 px-3 py-2",children:[n.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase",children:""}),n.jsx("p",{className:"mt-1 font-bold text-gray-800",children:yl(a.profile.phone)}),t==="Stage 1"&&a.profile.guardianPhone&&n.jsxs("p",{className:"mt-1 text-[11px] text-gray-500",children:[": ",yl(a.profile.guardianPhone)]})]})]}):n.jsx("p",{className:"text-xs text-gray-500",children:"       ."})]}),t==="Stage 2"&&n.jsx(uAe,{}),t==="Stage 3"&&n.jsx(fAe,{}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-5",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4 pb-2 border-b border-gray-100",children:[n.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(ta,{size:16,className:"text-gray-400"}),"    "]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("span",{className:"text-[10px] font-bold text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded flex items-center gap-1",children:[n.jsx(Ol,{size:10}),"   "]}),n.jsx("button",{className:"text-[10px] font-bold text-gray-400 hover:text-gray-600",children:" "})]})]}),n.jsx("div",{className:"space-y-3",children:[{time:"2026-02-11 11:20",user:"",action:"  ",reason:"   (  15% )",logId:"LOG-9921"},{time:"2026-02-10 14:45",user:"",action:"  ",reason:"    ",logId:"LOG-8842"},{time:"2026-02-09 10:00",user:"System",action:"Stage ",reason:"2       ",logId:"LOG-7710"}].map((d,u)=>n.jsxs("div",{className:"flex gap-4 text-xs group",children:[n.jsx("div",{className:"w-32 shrink-0 font-mono text-gray-400",children:d.time}),n.jsx("div",{className:"shrink-0 font-bold text-gray-700 w-20",children:d.user}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("span",{className:"font-bold text-[#163b6f]",children:[d.action,": "]}),n.jsx("span",{className:"text-gray-600",children:d.reason})]}),n.jsxs("div",{className:"shrink-0 font-mono text-[10px] text-gray-300 opacity-0 group-hover:opacity-100 transition-opacity",children:["#",d.logId]})]},u))})]})]})})]})}function uAe(){const[e,t]=g.useState(!1),r=()=>{t(!0),Me.info("      .",{description:": ,  : 2026-02-11 11:50"})};return n.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[n.jsx("div",{className:"col-span-12",children:n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm px-6 py-4 flex items-center justify-between border-l-8 border-[#163b6f]",children:[n.jsxs("div",{className:"flex items-center gap-12",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),n.jsx("span",{className:"text-xl font-bold text-[#163b6f]",children:"  "})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),n.jsx("span",{className:"text-sm font-bold text-orange-600",children:"2   ()"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),n.jsx("span",{className:"text-sm font-bold text-gray-900",children:"   "})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{className:"p-2 border border-gray-200 rounded-lg hover:bg-gray-50",children:n.jsx(Ps,{size:16})}),n.jsx("button",{className:"p-2 border border-gray-200 rounded-lg hover:bg-gray-50",children:n.jsx(Ro,{size:16})})]})]})}),n.jsxs("div",{className:"col-span-8 space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[n.jsx("h3",{className:"font-bold text-gray-800 mb-6",children:"  "}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl border border-gray-100",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-full bg-white border border-gray-200 flex items-center justify-center font-bold text-[#163b6f] shadow-sm text-lg",children:"1"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-gray-900",children:"1   (CIST)"}),n.jsx("p",{className:"text-[11px] text-gray-500",children:"2026-01-15  |  "})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("span",{className:"text-xl font-bold text-orange-600",children:"18 / 30"}),n.jsx("p",{className:"text-[10px] text-gray-400",children:": "})]})]}),n.jsxs("div",{className:"flex items-center justify-between p-4 bg-[#163b6f]/5 rounded-xl border border-[#163b6f]/20 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-full bg-[#163b6f] flex items-center justify-center font-bold text-white shadow-lg text-lg",children:"2"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-[#163b6f]",children:"2   (SNSB)"}),n.jsx("p",{className:"text-[11px] text-gray-500",children:"2026-02-10  |   "})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("span",{className:"text-xl font-bold text-[#163b6f]",children:"-2.1 SD"}),n.jsx("p",{className:"text-[10px] text-red-600 font-bold",children:" 1 ( )"})]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:[n.jsxs("div",{className:"bg-gray-100/80 px-6 py-3 border-b border-gray-200 flex items-center justify-between",children:[n.jsxs("h3",{className:"text-xs font-bold text-gray-600 uppercase flex items-center gap-2",children:[n.jsx(Md,{size:14,className:"text-orange-500"}),"   (  )"]}),!e&&n.jsxs("button",{onClick:r,className:"flex items-center gap-1.5 px-3 py-1 bg-white border border-[#163b6f] rounded text-[10px] font-bold text-[#163b6f] hover:bg-blue-50 transition-colors shadow-sm",children:[n.jsx(Rm,{size:12}),"   "]})]}),n.jsx("div",{className:"p-8 min-h-[140px] flex items-center justify-center bg-gray-50/30",children:e?n.jsxs("div",{className:"w-full grid grid-cols-2 gap-6 animate-in fade-in zoom-in duration-300",children:[n.jsxs("div",{className:"p-5 border border-red-200 bg-red-50/50 rounded-2xl text-center shadow-sm",children:[n.jsx("p",{className:"text-[10px] font-bold text-gray-400 mb-1 uppercase",children:"  "}),n.jsx("p",{className:"text-2xl font-bold text-red-700",children:"MCI (High)"})]}),n.jsxs("div",{className:"p-5 border border-blue-200 bg-blue-50/50 rounded-2xl text-center shadow-sm",children:[n.jsx("p",{className:"text-[10px] font-bold text-gray-400 mb-1 uppercase",children:"    "}),n.jsx("p",{className:"text-2xl font-bold text-blue-700",children:"82%"})]})]}):n.jsxs("div",{className:"flex flex-col items-center gap-2",children:[n.jsx(Md,{size:24,className:"text-gray-300"}),n.jsx("p",{className:"text-sm text-gray-400 italic",children:"     ."})]})})]})]}),n.jsx("div",{className:"col-span-4 space-y-6",children:n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[n.jsxs("h3",{className:"font-bold text-gray-800 mb-6 flex items-center gap-2",children:[n.jsx(Om,{size:18,className:"text-[#163b6f]"}),"   "]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-[10px] font-bold text-[#163b6f] uppercase border-l-2 border-[#163b6f] pl-2",children:"  "}),n.jsxs("button",{className:"w-full py-3 bg-[#163b6f] text-white text-xs font-bold rounded-xl hover:bg-[#0f2a50] flex items-center justify-center gap-2 shadow-md",children:[n.jsx(Xu,{size:16}),"    "]}),n.jsx("button",{className:"w-full py-2 border border-gray-200 text-gray-700 text-xs font-bold rounded-lg hover:bg-gray-50",children:"   "})]}),n.jsxs("div",{className:"space-y-2 pt-4 border-t border-gray-50",children:[n.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase border-l-2 border-gray-200 pl-2",children:"MCI  "}),n.jsx("button",{className:"w-full py-2 border border-gray-200 text-gray-700 text-xs font-bold rounded-lg hover:bg-gray-50",children:"   (CRF)"}),n.jsx("button",{className:"w-full py-2 border border-gray-200 text-gray-700 text-xs font-bold rounded-lg hover:bg-gray-50",children:"/  "})]}),n.jsxs("div",{className:"space-y-2 pt-4 border-t border-gray-50",children:[n.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase border-l-2 border-gray-200 pl-2",children:"  "}),n.jsx("button",{className:"w-full py-2 border border-gray-200 text-gray-400 text-xs font-bold rounded-lg cursor-not-allowed",disabled:!0,children:"  ( )"})]})]})]})}),n.jsx("div",{className:"col-span-12",children:n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 overflow-x-auto",children:[n.jsxs("h3",{className:"font-bold text-gray-800 mb-8 flex items-center gap-2",children:[n.jsx(ta,{size:16})," --- "]}),n.jsx("div",{className:"flex items-center min-w-[800px]",children:[{step:"",date:"01-15",status:"",color:"bg-emerald-500"},{step:"2",date:"02-10",status:"",color:"bg-emerald-500"},{step:"",date:"",status:"",color:"bg-orange-500"},{step:"",date:"",status:"",color:"bg-gray-200"},{step:"/",date:"",status:"",color:"bg-gray-200"}].map((a,s,i)=>n.jsxs(Y.Fragment,{children:[n.jsxs("div",{className:"flex flex-col items-center relative z-10",children:[n.jsx("div",{className:de("w-10 h-10 rounded-full flex items-center justify-center text-white shadow-lg",a.color),children:a.status===""?n.jsx(Zs,{size:20}):n.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),n.jsx("p",{className:"text-[11px] font-bold text-gray-900 mt-2",children:a.step}),n.jsx("p",{className:"text-[10px] text-gray-400",children:a.date})]}),s<i.length-1&&n.jsx("div",{className:de("flex-1 h-1 mx-2",a.status===""&&i[s+1].status===""?"bg-emerald-500":"bg-gray-100")})]},s))})]})})]})}function fAe(){const e=[{name:"24-Q3",score:85,trigger:!1},{name:"24-Q4",score:82,trigger:!1},{name:"25-Q1",score:75,trigger:!0},{name:"25-Q2",score:72,trigger:!0},{name:"26-Q1",score:68,trigger:!0}];return n.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[n.jsx("div",{className:"col-span-12",children:n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm px-6 py-4 flex items-center justify-between border-l-8 border-red-600",children:[n.jsxs("div",{className:"flex items-center gap-12",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"  "}),n.jsx("span",{className:"text-xl font-bold text-red-600",children:"  (Danger Zone)"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),n.jsx("span",{className:"text-sm font-bold text-[#163b6f]",children:"3  ()"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"w-2 h-2 bg-red-600 rounded-full animate-pulse"}),n.jsx("span",{className:"text-sm font-bold text-red-600",children:"  "})]})]})]}),n.jsx("div",{className:"flex items-center gap-3",children:n.jsx("span",{className:"text-[10px] font-bold text-gray-400 bg-gray-100 px-2 py-1 rounded",children:" : 95%"})})]})}),n.jsxs("div",{className:"col-span-8 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-200 shadow-sm",children:[n.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase mb-2",children:"2  ()"}),n.jsx("p",{className:"text-2xl font-bold text-red-600",children:"-2.4 SD"}),n.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:"  15% "})]}),n.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-200 shadow-sm",children:[n.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase mb-2",children:"MRI "}),n.jsx("p",{className:"text-sm font-bold text-orange-600",children:"  "}),n.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:"MTA Scale 3"})]}),n.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-200 shadow-sm",children:[n.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase mb-2",children:" "}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"33%"}),n.jsx("p",{className:"text-[10px] text-red-600 font-bold mt-1",children:"3  "})]})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h3",{className:"font-bold text-gray-800",children:"  "}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"flex items-center gap-1.5 text-[9px] font-bold text-gray-500",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-red-600"}),"  "]}),n.jsxs("div",{className:"flex items-center gap-1.5 text-[9px] font-bold text-gray-500",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-200"}),"  "]})]})]}),n.jsx("div",{className:"h-64",children:n.jsx(xa,{width:"100%",height:"100%",children:n.jsxs(M1,{data:e,children:[n.jsx(ms,{strokeDasharray:"3 3",vertical:!1,stroke:"#f1f5f9"}),n.jsx(Vn,{dataKey:"name",fontSize:10,axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8"}}),n.jsx(Hn,{fontSize:10,axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8"}}),n.jsx(en,{}),n.jsx($a,{type:"monotone",dataKey:"score",stroke:"#dc2626",strokeWidth:3,dot:{r:4,fill:"#dc2626"}}),n.jsx($a,{type:"monotone",dataKey:"threshold",stroke:"#e2e8f0",strokeDasharray:"5 5",dot:!1,strokeWidth:2})]})})})]})]}),n.jsxs("div",{className:"col-span-4 space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[n.jsxs("h3",{className:"font-bold text-gray-800 mb-6 flex items-center gap-2 text-sm",children:[n.jsx(Qa,{size:16,className:"text-red-600"}),"   "]}),n.jsx("div",{className:"space-y-4",children:[{label:"  (10% )",value:"15% ",status:"",color:"text-red-600 bg-red-50"},{label:"  (2 )",value:"1 ",status:"",color:"text-gray-400 bg-gray-50"},{label:"  (3 )",value:"4 ",status:"",color:"text-red-600 bg-red-50"}].map((t,r)=>n.jsxs("div",{className:"flex flex-col gap-1.5 border-b border-gray-50 pb-3 last:border-0 last:pb-0",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs font-bold text-gray-700",children:t.label}),n.jsx("span",{className:de("text-[9px] font-bold px-1.5 py-0.5 rounded",t.color),children:t.status})]}),n.jsxs("p",{className:"text-[10px] text-gray-500",children:[" : ",t.value]})]},r))})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-5",children:[n.jsx("h3",{className:"font-bold text-gray-800 mb-4",children:" "}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("button",{className:"w-full py-3 bg-red-600 text-white text-xs font-bold rounded-xl flex flex-col items-center gap-1 shadow-lg hover:bg-red-700 transition-all",children:[n.jsx(Ro,{size:18}),n.jsx("span",{children:"  "})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsx("button",{className:"py-2.5 border border-gray-200 rounded-lg text-[10px] font-bold text-gray-700 hover:bg-gray-50",children:"  "}),n.jsx("button",{className:"py-2.5 border border-gray-200 rounded-lg text-[10px] font-bold text-gray-700 hover:bg-gray-50",children:"/ "})]}),n.jsx("button",{className:"w-full py-2.5 border-2 border-orange-500 text-orange-600 text-[10px] font-bold rounded-lg hover:bg-orange-50",children:"  "})]})]})]}),n.jsx("div",{className:"col-span-12",children:n.jsx("div",{className:"bg-red-50 border border-red-100 rounded-xl p-3 text-[10px] text-red-700 font-bold italic text-center",children:"*       : 26-Q1            (  )"})})]})}function K7(e){const t=mAe(e),r=g.forwardRef((a,s)=>{const{children:i,...o}=a,l=g.Children.toArray(i),d=l.find(hAe);if(d){const u=d.props.children,p=l.map(m=>m===d?g.Children.count(u)>1?g.Children.only(null):g.isValidElement(u)?u.props.children:null:m);return n.jsx(t,{...o,ref:s,children:g.isValidElement(u)?g.cloneElement(u,void 0,p):null})}return n.jsx(t,{...o,ref:s,children:i})});return r.displayName=`${e}.Slot`,r}function mAe(e){const t=g.forwardRef((r,a)=>{const{children:s,...i}=r;if(g.isValidElement(s)){const o=xAe(s),l=gAe(i,s.props);return s.type!==g.Fragment&&(l.ref=a?df(a,o):o),g.cloneElement(s,l)}return g.Children.count(s)>1?g.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var pAe=Symbol("radix.slottable");function hAe(e){return g.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===pAe}function gAe(e,t){const r={...t};for(const a in t){const s=e[a],i=t[a];/^on[A-Z]/.test(a)?s&&i?r[a]=(...l)=>{const d=i(...l);return s(...l),d}:s&&(r[a]=s):a==="style"?r[a]={...s,...i}:a==="className"&&(r[a]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function xAe(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function pz(e){const t=e+"CollectionProvider",[r,a]=ao(t),[s,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=N=>{const{scope:v,children:j}=N,E=Y.useRef(null),C=Y.useRef(new Map).current;return n.jsx(s,{scope:v,itemMap:C,collectionRef:E,children:j})};o.displayName=t;const l=e+"CollectionSlot",d=K7(l),u=Y.forwardRef((N,v)=>{const{scope:j,children:E}=N,C=i(l,j),A=wr(v,C.collectionRef);return n.jsx(d,{ref:A,children:E})});u.displayName=l;const p=e+"CollectionItemSlot",m="data-radix-collection-item",h=K7(p),x=Y.forwardRef((N,v)=>{const{scope:j,children:E,...C}=N,A=Y.useRef(null),S=wr(v,A),_=i(p,j);return Y.useEffect(()=>(_.itemMap.set(A,{ref:A,...C}),()=>void _.itemMap.delete(A))),n.jsx(h,{[m]:"",ref:S,children:E})});x.displayName=p;function y(N){const v=i(e+"CollectionConsumer",N);return Y.useCallback(()=>{const E=v.collectionRef.current;if(!E)return[];const C=Array.from(E.querySelectorAll(`[${m}]`));return Array.from(v.itemMap.values()).sort((_,O)=>C.indexOf(_.ref.current)-C.indexOf(O.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:u,ItemSlot:x},y,a]}const bAe=["top","right","bottom","left"],Kd=Math.min,yi=Math.max,Tv=Math.round,ub=Math.floor,Tl=e=>({x:e,y:e}),yAe={left:"right",right:"left",bottom:"top",top:"bottom"},vAe={start:"end",end:"start"};function FT(e,t,r){return yi(e,Kd(t,r))}function Pc(e,t){return typeof e=="function"?e(t):e}function Dc(e){return e.split("-")[0]}function Gp(e){return e.split("-")[1]}function x5(e){return e==="x"?"y":"x"}function b5(e){return e==="y"?"height":"width"}const NAe=new Set(["top","bottom"]);function Nl(e){return NAe.has(Dc(e))?"y":"x"}function y5(e){return x5(Nl(e))}function SAe(e,t,r){r===void 0&&(r=!1);const a=Gp(e),s=y5(e),i=b5(s);let o=s==="x"?a===(r?"end":"start")?"right":"left":a==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=Ov(o)),[o,Ov(o)]}function jAe(e){const t=Ov(e);return[BT(e),t,BT(t)]}function BT(e){return e.replace(/start|end/g,t=>vAe[t])}const z7=["left","right"],q7=["right","left"],wAe=["top","bottom"],EAe=["bottom","top"];function AAe(e,t,r){switch(e){case"top":case"bottom":return r?t?q7:z7:t?z7:q7;case"left":case"right":return t?wAe:EAe;default:return[]}}function CAe(e,t,r,a){const s=Gp(e);let i=AAe(Dc(e),r==="start",a);return s&&(i=i.map(o=>o+"-"+s),t&&(i=i.concat(i.map(BT)))),i}function Ov(e){return e.replace(/left|right|bottom|top/g,t=>yAe[t])}function _Ae(e){return{top:0,right:0,bottom:0,left:0,...e}}function hz(e){return typeof e!="number"?_Ae(e):{top:e,right:e,bottom:e,left:e}}function kv(e){const{x:t,y:r,width:a,height:s}=e;return{width:a,height:s,top:r,left:t,right:t+a,bottom:r+s,x:t,y:r}}function W7(e,t,r){let{reference:a,floating:s}=e;const i=Nl(t),o=y5(t),l=b5(o),d=Dc(t),u=i==="y",p=a.x+a.width/2-s.width/2,m=a.y+a.height/2-s.height/2,h=a[l]/2-s[l]/2;let x;switch(d){case"top":x={x:p,y:a.y-s.height};break;case"bottom":x={x:p,y:a.y+a.height};break;case"right":x={x:a.x+a.width,y:m};break;case"left":x={x:a.x-s.width,y:m};break;default:x={x:a.x,y:a.y}}switch(Gp(t)){case"start":x[o]-=h*(r&&u?-1:1);break;case"end":x[o]+=h*(r&&u?-1:1);break}return x}async function TAe(e,t){var r;t===void 0&&(t={});const{x:a,y:s,platform:i,rects:o,elements:l,strategy:d}=e,{boundary:u="clippingAncestors",rootBoundary:p="viewport",elementContext:m="floating",altBoundary:h=!1,padding:x=0}=Pc(t,e),y=hz(x),v=l[h?m==="floating"?"reference":"floating":m],j=kv(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(v)))==null||r?v:v.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:p,strategy:d})),E=m==="floating"?{x:a,y:s,width:o.floating.width,height:o.floating.height}:o.reference,C=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),A=await(i.isElement==null?void 0:i.isElement(C))?await(i.getScale==null?void 0:i.getScale(C))||{x:1,y:1}:{x:1,y:1},S=kv(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:E,offsetParent:C,strategy:d}):E);return{top:(j.top-S.top+y.top)/A.y,bottom:(S.bottom-j.bottom+y.bottom)/A.y,left:(j.left-S.left+y.left)/A.x,right:(S.right-j.right+y.right)/A.x}}const OAe=async(e,t,r)=>{const{placement:a="bottom",strategy:s="absolute",middleware:i=[],platform:o}=r,l=i.filter(Boolean),d=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:p,y:m}=W7(u,a,d),h=a,x={},y=0;for(let v=0;v<l.length;v++){var N;const{name:j,fn:E}=l[v],{x:C,y:A,data:S,reset:_}=await E({x:p,y:m,initialPlacement:a,placement:h,strategy:s,middlewareData:x,rects:u,platform:{...o,detectOverflow:(N=o.detectOverflow)!=null?N:TAe},elements:{reference:e,floating:t}});p=C??p,m=A??m,x={...x,[j]:{...x[j],...S}},_&&y<=50&&(y++,typeof _=="object"&&(_.placement&&(h=_.placement),_.rects&&(u=_.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):_.rects),{x:p,y:m}=W7(u,h,d)),v=-1)}return{x:p,y:m,placement:h,strategy:s,middlewareData:x}},kAe=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:a,placement:s,rects:i,platform:o,elements:l,middlewareData:d}=t,{element:u,padding:p=0}=Pc(e,t)||{};if(u==null)return{};const m=hz(p),h={x:r,y:a},x=y5(s),y=b5(x),N=await o.getDimensions(u),v=x==="y",j=v?"top":"left",E=v?"bottom":"right",C=v?"clientHeight":"clientWidth",A=i.reference[y]+i.reference[x]-h[x]-i.floating[y],S=h[x]-i.reference[x],_=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let O=_?_[C]:0;(!O||!await(o.isElement==null?void 0:o.isElement(_)))&&(O=l.floating[C]||i.floating[y]);const D=A/2-S/2,k=O/2-N[y]/2-1,M=Kd(m[j],k),F=Kd(m[E],k),$=M,B=O-N[y]-F,P=O/2-N[y]/2+D,W=FT($,P,B),K=!d.arrow&&Gp(s)!=null&&P!==W&&i.reference[y]/2-(P<$?M:F)-N[y]/2<0,G=K?P<$?P-$:P-B:0;return{[x]:h[x]+G,data:{[x]:W,centerOffset:P-W-G,...K&&{alignmentOffset:G}},reset:K}}}),RAe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,a;const{placement:s,middlewareData:i,rects:o,initialPlacement:l,platform:d,elements:u}=t,{mainAxis:p=!0,crossAxis:m=!0,fallbackPlacements:h,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:N=!0,...v}=Pc(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const j=Dc(s),E=Nl(l),C=Dc(l)===l,A=await(d.isRTL==null?void 0:d.isRTL(u.floating)),S=h||(C||!N?[Ov(l)]:jAe(l)),_=y!=="none";!h&&_&&S.push(...CAe(l,N,y,A));const O=[l,...S],D=await d.detectOverflow(t,v),k=[];let M=((a=i.flip)==null?void 0:a.overflows)||[];if(p&&k.push(D[j]),m){const P=SAe(s,o,A);k.push(D[P[0]],D[P[1]])}if(M=[...M,{placement:s,overflows:k}],!k.every(P=>P<=0)){var F,$;const P=(((F=i.flip)==null?void 0:F.index)||0)+1,W=O[P];if(W&&(!(m==="alignment"?E!==Nl(W):!1)||M.every(U=>Nl(U.placement)===E?U.overflows[0]>0:!0)))return{data:{index:P,overflows:M},reset:{placement:W}};let K=($=M.filter(G=>G.overflows[0]<=0).sort((G,U)=>G.overflows[1]-U.overflows[1])[0])==null?void 0:$.placement;if(!K)switch(x){case"bestFit":{var B;const G=(B=M.filter(U=>{if(_){const te=Nl(U.placement);return te===E||te==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(te=>te>0).reduce((te,re)=>te+re,0)]).sort((U,te)=>U[1]-te[1])[0])==null?void 0:B[0];G&&(K=G);break}case"initialPlacement":K=l;break}if(s!==K)return{reset:{placement:K}}}return{}}}};function V7(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Y7(e){return bAe.some(t=>e[t]>=0)}const PAe=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r,platform:a}=t,{strategy:s="referenceHidden",...i}=Pc(e,t);switch(s){case"referenceHidden":{const o=await a.detectOverflow(t,{...i,elementContext:"reference"}),l=V7(o,r.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:Y7(l)}}}case"escaped":{const o=await a.detectOverflow(t,{...i,altBoundary:!0}),l=V7(o,r.floating);return{data:{escapedOffsets:l,escaped:Y7(l)}}}default:return{}}}}},gz=new Set(["left","top"]);async function DAe(e,t){const{placement:r,platform:a,elements:s}=e,i=await(a.isRTL==null?void 0:a.isRTL(s.floating)),o=Dc(r),l=Gp(r),d=Nl(r)==="y",u=gz.has(o)?-1:1,p=i&&d?-1:1,m=Pc(t,e);let{mainAxis:h,crossAxis:x,alignmentAxis:y}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return l&&typeof y=="number"&&(x=l==="end"?y*-1:y),d?{x:x*p,y:h*u}:{x:h*u,y:x*p}}const IAe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,a;const{x:s,y:i,placement:o,middlewareData:l}=t,d=await DAe(t,e);return o===((r=l.offset)==null?void 0:r.placement)&&(a=l.arrow)!=null&&a.alignmentOffset?{}:{x:s+d.x,y:i+d.y,data:{...d,placement:o}}}}},MAe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:a,placement:s,platform:i}=t,{mainAxis:o=!0,crossAxis:l=!1,limiter:d={fn:j=>{let{x:E,y:C}=j;return{x:E,y:C}}},...u}=Pc(e,t),p={x:r,y:a},m=await i.detectOverflow(t,u),h=Nl(Dc(s)),x=x5(h);let y=p[x],N=p[h];if(o){const j=x==="y"?"top":"left",E=x==="y"?"bottom":"right",C=y+m[j],A=y-m[E];y=FT(C,y,A)}if(l){const j=h==="y"?"top":"left",E=h==="y"?"bottom":"right",C=N+m[j],A=N-m[E];N=FT(C,N,A)}const v=d.fn({...t,[x]:y,[h]:N});return{...v,data:{x:v.x-r,y:v.y-a,enabled:{[x]:o,[h]:l}}}}}},LAe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:a,placement:s,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:d=!0,crossAxis:u=!0}=Pc(e,t),p={x:r,y:a},m=Nl(s),h=x5(m);let x=p[h],y=p[m];const N=Pc(l,t),v=typeof N=="number"?{mainAxis:N,crossAxis:0}:{mainAxis:0,crossAxis:0,...N};if(d){const C=h==="y"?"height":"width",A=i.reference[h]-i.floating[C]+v.mainAxis,S=i.reference[h]+i.reference[C]-v.mainAxis;x<A?x=A:x>S&&(x=S)}if(u){var j,E;const C=h==="y"?"width":"height",A=gz.has(Dc(s)),S=i.reference[m]-i.floating[C]+(A&&((j=o.offset)==null?void 0:j[m])||0)+(A?0:v.crossAxis),_=i.reference[m]+i.reference[C]+(A?0:((E=o.offset)==null?void 0:E[m])||0)-(A?v.crossAxis:0);y<S?y=S:y>_&&(y=_)}return{[h]:x,[m]:y}}}},$Ae=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,a;const{placement:s,rects:i,platform:o,elements:l}=t,{apply:d=()=>{},...u}=Pc(e,t),p=await o.detectOverflow(t,u),m=Dc(s),h=Gp(s),x=Nl(s)==="y",{width:y,height:N}=i.floating;let v,j;m==="top"||m==="bottom"?(v=m,j=h===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(j=m,v=h==="end"?"top":"bottom");const E=N-p.top-p.bottom,C=y-p.left-p.right,A=Kd(N-p[v],E),S=Kd(y-p[j],C),_=!t.middlewareData.shift;let O=A,D=S;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(D=C),(a=t.middlewareData.shift)!=null&&a.enabled.y&&(O=E),_&&!h){const M=yi(p.left,0),F=yi(p.right,0),$=yi(p.top,0),B=yi(p.bottom,0);x?D=y-2*(M!==0||F!==0?M+F:yi(p.left,p.right)):O=N-2*($!==0||B!==0?$+B:yi(p.top,p.bottom))}await d({...t,availableWidth:D,availableHeight:O});const k=await o.getDimensions(l.floating);return y!==k.width||N!==k.height?{reset:{rects:!0}}:{}}}};function H1(){return typeof window<"u"}function Kp(e){return xz(e)?(e.nodeName||"").toLowerCase():"#document"}function Ni(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Bl(e){var t;return(t=(xz(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function xz(e){return H1()?e instanceof Node||e instanceof Ni(e).Node:!1}function Lo(e){return H1()?e instanceof Element||e instanceof Ni(e).Element:!1}function Dl(e){return H1()?e instanceof HTMLElement||e instanceof Ni(e).HTMLElement:!1}function X7(e){return!H1()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ni(e).ShadowRoot}const FAe=new Set(["inline","contents"]);function Tg(e){const{overflow:t,overflowX:r,overflowY:a,display:s}=$o(e);return/auto|scroll|overlay|hidden|clip/.test(t+a+r)&&!FAe.has(s)}const BAe=new Set(["table","td","th"]);function UAe(e){return BAe.has(Kp(e))}const HAe=[":popover-open",":modal"];function G1(e){return HAe.some(t=>{try{return e.matches(t)}catch{return!1}})}const GAe=["transform","translate","scale","rotate","perspective"],KAe=["transform","translate","scale","rotate","perspective","filter"],zAe=["paint","layout","strict","content"];function v5(e){const t=N5(),r=Lo(e)?$o(e):e;return GAe.some(a=>r[a]?r[a]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||KAe.some(a=>(r.willChange||"").includes(a))||zAe.some(a=>(r.contain||"").includes(a))}function qAe(e){let t=zd(e);for(;Dl(t)&&!bp(t);){if(v5(t))return t;if(G1(t))return null;t=zd(t)}return null}function N5(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const WAe=new Set(["html","body","#document"]);function bp(e){return WAe.has(Kp(e))}function $o(e){return Ni(e).getComputedStyle(e)}function K1(e){return Lo(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function zd(e){if(Kp(e)==="html")return e;const t=e.assignedSlot||e.parentNode||X7(e)&&e.host||Bl(e);return X7(t)?t.host:t}function bz(e){const t=zd(e);return bp(t)?e.ownerDocument?e.ownerDocument.body:e.body:Dl(t)&&Tg(t)?t:bz(t)}function ug(e,t,r){var a;t===void 0&&(t=[]),r===void 0&&(r=!0);const s=bz(e),i=s===((a=e.ownerDocument)==null?void 0:a.body),o=Ni(s);if(i){const l=UT(o);return t.concat(o,o.visualViewport||[],Tg(s)?s:[],l&&r?ug(l):[])}return t.concat(s,ug(s,[],r))}function UT(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function yz(e){const t=$o(e);let r=parseFloat(t.width)||0,a=parseFloat(t.height)||0;const s=Dl(e),i=s?e.offsetWidth:r,o=s?e.offsetHeight:a,l=Tv(r)!==i||Tv(a)!==o;return l&&(r=i,a=o),{width:r,height:a,$:l}}function S5(e){return Lo(e)?e:e.contextElement}function Am(e){const t=S5(e);if(!Dl(t))return Tl(1);const r=t.getBoundingClientRect(),{width:a,height:s,$:i}=yz(t);let o=(i?Tv(r.width):r.width)/a,l=(i?Tv(r.height):r.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const VAe=Tl(0);function vz(e){const t=Ni(e);return!N5()||!t.visualViewport?VAe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function YAe(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==Ni(e)?!1:t}function of(e,t,r,a){t===void 0&&(t=!1),r===void 0&&(r=!1);const s=e.getBoundingClientRect(),i=S5(e);let o=Tl(1);t&&(a?Lo(a)&&(o=Am(a)):o=Am(e));const l=YAe(i,r,a)?vz(i):Tl(0);let d=(s.left+l.x)/o.x,u=(s.top+l.y)/o.y,p=s.width/o.x,m=s.height/o.y;if(i){const h=Ni(i),x=a&&Lo(a)?Ni(a):a;let y=h,N=UT(y);for(;N&&a&&x!==y;){const v=Am(N),j=N.getBoundingClientRect(),E=$o(N),C=j.left+(N.clientLeft+parseFloat(E.paddingLeft))*v.x,A=j.top+(N.clientTop+parseFloat(E.paddingTop))*v.y;d*=v.x,u*=v.y,p*=v.x,m*=v.y,d+=C,u+=A,y=Ni(N),N=UT(y)}}return kv({width:p,height:m,x:d,y:u})}function z1(e,t){const r=K1(e).scrollLeft;return t?t.left+r:of(Bl(e)).left+r}function Nz(e,t){const r=e.getBoundingClientRect(),a=r.left+t.scrollLeft-z1(e,r),s=r.top+t.scrollTop;return{x:a,y:s}}function XAe(e){let{elements:t,rect:r,offsetParent:a,strategy:s}=e;const i=s==="fixed",o=Bl(a),l=t?G1(t.floating):!1;if(a===o||l&&i)return r;let d={scrollLeft:0,scrollTop:0},u=Tl(1);const p=Tl(0),m=Dl(a);if((m||!m&&!i)&&((Kp(a)!=="body"||Tg(o))&&(d=K1(a)),Dl(a))){const x=of(a);u=Am(a),p.x=x.x+a.clientLeft,p.y=x.y+a.clientTop}const h=o&&!m&&!i?Nz(o,d):Tl(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-d.scrollLeft*u.x+p.x+h.x,y:r.y*u.y-d.scrollTop*u.y+p.y+h.y}}function QAe(e){return Array.from(e.getClientRects())}function ZAe(e){const t=Bl(e),r=K1(e),a=e.ownerDocument.body,s=yi(t.scrollWidth,t.clientWidth,a.scrollWidth,a.clientWidth),i=yi(t.scrollHeight,t.clientHeight,a.scrollHeight,a.clientHeight);let o=-r.scrollLeft+z1(e);const l=-r.scrollTop;return $o(a).direction==="rtl"&&(o+=yi(t.clientWidth,a.clientWidth)-s),{width:s,height:i,x:o,y:l}}const Q7=25;function JAe(e,t){const r=Ni(e),a=Bl(e),s=r.visualViewport;let i=a.clientWidth,o=a.clientHeight,l=0,d=0;if(s){i=s.width,o=s.height;const p=N5();(!p||p&&t==="fixed")&&(l=s.offsetLeft,d=s.offsetTop)}const u=z1(a);if(u<=0){const p=a.ownerDocument,m=p.body,h=getComputedStyle(m),x=p.compatMode==="CSS1Compat"&&parseFloat(h.marginLeft)+parseFloat(h.marginRight)||0,y=Math.abs(a.clientWidth-m.clientWidth-x);y<=Q7&&(i-=y)}else u<=Q7&&(i+=u);return{width:i,height:o,x:l,y:d}}const eCe=new Set(["absolute","fixed"]);function tCe(e,t){const r=of(e,!0,t==="fixed"),a=r.top+e.clientTop,s=r.left+e.clientLeft,i=Dl(e)?Am(e):Tl(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,d=s*i.x,u=a*i.y;return{width:o,height:l,x:d,y:u}}function Z7(e,t,r){let a;if(t==="viewport")a=JAe(e,r);else if(t==="document")a=ZAe(Bl(e));else if(Lo(t))a=tCe(t,r);else{const s=vz(e);a={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return kv(a)}function Sz(e,t){const r=zd(e);return r===t||!Lo(r)||bp(r)?!1:$o(r).position==="fixed"||Sz(r,t)}function rCe(e,t){const r=t.get(e);if(r)return r;let a=ug(e,[],!1).filter(l=>Lo(l)&&Kp(l)!=="body"),s=null;const i=$o(e).position==="fixed";let o=i?zd(e):e;for(;Lo(o)&&!bp(o);){const l=$o(o),d=v5(o);!d&&l.position==="fixed"&&(s=null),(i?!d&&!s:!d&&l.position==="static"&&!!s&&eCe.has(s.position)||Tg(o)&&!d&&Sz(e,o))?a=a.filter(p=>p!==o):s=l,o=zd(o)}return t.set(e,a),a}function nCe(e){let{element:t,boundary:r,rootBoundary:a,strategy:s}=e;const o=[...r==="clippingAncestors"?G1(t)?[]:rCe(t,this._c):[].concat(r),a],l=o[0],d=o.reduce((u,p)=>{const m=Z7(t,p,s);return u.top=yi(m.top,u.top),u.right=Kd(m.right,u.right),u.bottom=Kd(m.bottom,u.bottom),u.left=yi(m.left,u.left),u},Z7(t,l,s));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function aCe(e){const{width:t,height:r}=yz(e);return{width:t,height:r}}function sCe(e,t,r){const a=Dl(t),s=Bl(t),i=r==="fixed",o=of(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const d=Tl(0);function u(){d.x=z1(s)}if(a||!a&&!i)if((Kp(t)!=="body"||Tg(s))&&(l=K1(t)),a){const x=of(t,!0,i,t);d.x=x.x+t.clientLeft,d.y=x.y+t.clientTop}else s&&u();i&&!a&&s&&u();const p=s&&!a&&!i?Nz(s,l):Tl(0),m=o.left+l.scrollLeft-d.x-p.x,h=o.top+l.scrollTop-d.y-p.y;return{x:m,y:h,width:o.width,height:o.height}}function DA(e){return $o(e).position==="static"}function J7(e,t){if(!Dl(e)||$o(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return Bl(e)===r&&(r=r.ownerDocument.body),r}function jz(e,t){const r=Ni(e);if(G1(e))return r;if(!Dl(e)){let s=zd(e);for(;s&&!bp(s);){if(Lo(s)&&!DA(s))return s;s=zd(s)}return r}let a=J7(e,t);for(;a&&UAe(a)&&DA(a);)a=J7(a,t);return a&&bp(a)&&DA(a)&&!v5(a)?r:a||qAe(e)||r}const iCe=async function(e){const t=this.getOffsetParent||jz,r=this.getDimensions,a=await r(e.floating);return{reference:sCe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:a.width,height:a.height}}};function oCe(e){return $o(e).direction==="rtl"}const lCe={convertOffsetParentRelativeRectToViewportRelativeRect:XAe,getDocumentElement:Bl,getClippingRect:nCe,getOffsetParent:jz,getElementRects:iCe,getClientRects:QAe,getDimensions:aCe,getScale:Am,isElement:Lo,isRTL:oCe};function wz(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function cCe(e,t){let r=null,a;const s=Bl(e);function i(){var l;clearTimeout(a),(l=r)==null||l.disconnect(),r=null}function o(l,d){l===void 0&&(l=!1),d===void 0&&(d=1),i();const u=e.getBoundingClientRect(),{left:p,top:m,width:h,height:x}=u;if(l||t(),!h||!x)return;const y=ub(m),N=ub(s.clientWidth-(p+h)),v=ub(s.clientHeight-(m+x)),j=ub(p),C={rootMargin:-y+"px "+-N+"px "+-v+"px "+-j+"px",threshold:yi(0,Kd(1,d))||1};let A=!0;function S(_){const O=_[0].intersectionRatio;if(O!==d){if(!A)return o();O?o(!1,O):a=setTimeout(()=>{o(!1,1e-7)},1e3)}O===1&&!wz(u,e.getBoundingClientRect())&&o(),A=!1}try{r=new IntersectionObserver(S,{...C,root:s.ownerDocument})}catch{r=new IntersectionObserver(S,C)}r.observe(e)}return o(!0),i}function dCe(e,t,r,a){a===void 0&&(a={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:d=!1}=a,u=S5(e),p=s||i?[...u?ug(u):[],...ug(t)]:[];p.forEach(j=>{s&&j.addEventListener("scroll",r,{passive:!0}),i&&j.addEventListener("resize",r)});const m=u&&l?cCe(u,r):null;let h=-1,x=null;o&&(x=new ResizeObserver(j=>{let[E]=j;E&&E.target===u&&x&&(x.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var C;(C=x)==null||C.observe(t)})),r()}),u&&!d&&x.observe(u),x.observe(t));let y,N=d?of(e):null;d&&v();function v(){const j=of(e);N&&!wz(N,j)&&r(),N=j,y=requestAnimationFrame(v)}return r(),()=>{var j;p.forEach(E=>{s&&E.removeEventListener("scroll",r),i&&E.removeEventListener("resize",r)}),m?.(),(j=x)==null||j.disconnect(),x=null,d&&cancelAnimationFrame(y)}}const uCe=IAe,fCe=MAe,mCe=RAe,pCe=$Ae,hCe=PAe,eF=kAe,gCe=LAe,xCe=(e,t,r)=>{const a=new Map,s={platform:lCe,...r},i={...s.platform,_c:a};return OAe(e,t,{...s,platform:i})};var bCe=typeof document<"u",yCe=function(){},Kb=bCe?g.useLayoutEffect:yCe;function Rv(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,a,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(a=r;a--!==0;)if(!Rv(e[a],t[a]))return!1;return!0}if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(a=r;a--!==0;)if(!{}.hasOwnProperty.call(t,s[a]))return!1;for(a=r;a--!==0;){const i=s[a];if(!(i==="_owner"&&e.$$typeof)&&!Rv(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function Ez(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function tF(e,t){const r=Ez(e);return Math.round(t*r)/r}function IA(e){const t=g.useRef(e);return Kb(()=>{t.current=e}),t}function vCe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:a=[],platform:s,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:d,open:u}=e,[p,m]=g.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[h,x]=g.useState(a);Rv(h,a)||x(a);const[y,N]=g.useState(null),[v,j]=g.useState(null),E=g.useCallback(U=>{U!==_.current&&(_.current=U,N(U))},[]),C=g.useCallback(U=>{U!==O.current&&(O.current=U,j(U))},[]),A=i||y,S=o||v,_=g.useRef(null),O=g.useRef(null),D=g.useRef(p),k=d!=null,M=IA(d),F=IA(s),$=IA(u),B=g.useCallback(()=>{if(!_.current||!O.current)return;const U={placement:t,strategy:r,middleware:h};F.current&&(U.platform=F.current),xCe(_.current,O.current,U).then(te=>{const re={...te,isPositioned:$.current!==!1};P.current&&!Rv(D.current,re)&&(D.current=re,Cp.flushSync(()=>{m(re)}))})},[h,t,r,F,$]);Kb(()=>{u===!1&&D.current.isPositioned&&(D.current.isPositioned=!1,m(U=>({...U,isPositioned:!1})))},[u]);const P=g.useRef(!1);Kb(()=>(P.current=!0,()=>{P.current=!1}),[]),Kb(()=>{if(A&&(_.current=A),S&&(O.current=S),A&&S){if(M.current)return M.current(A,S,B);B()}},[A,S,B,M,k]);const W=g.useMemo(()=>({reference:_,floating:O,setReference:E,setFloating:C}),[E,C]),K=g.useMemo(()=>({reference:A,floating:S}),[A,S]),G=g.useMemo(()=>{const U={position:r,left:0,top:0};if(!K.floating)return U;const te=tF(K.floating,p.x),re=tF(K.floating,p.y);return l?{...U,transform:"translate("+te+"px, "+re+"px)",...Ez(K.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:te,top:re}},[r,l,K.floating,p.x,p.y]);return g.useMemo(()=>({...p,update:B,refs:W,elements:K,floatingStyles:G}),[p,B,W,K,G])}const NCe=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:a,padding:s}=typeof e=="function"?e(r):e;return a&&t(a)?a.current!=null?eF({element:a.current,padding:s}).fn(r):{}:a?eF({element:a,padding:s}).fn(r):{}}}},SCe=(e,t)=>({...uCe(e),options:[e,t]}),jCe=(e,t)=>({...fCe(e),options:[e,t]}),wCe=(e,t)=>({...gCe(e),options:[e,t]}),ECe=(e,t)=>({...mCe(e),options:[e,t]}),ACe=(e,t)=>({...pCe(e),options:[e,t]}),CCe=(e,t)=>({...hCe(e),options:[e,t]}),_Ce=(e,t)=>({...NCe(e),options:[e,t]});var TCe="Arrow",Az=g.forwardRef((e,t)=>{const{children:r,width:a=10,height:s=5,...i}=e;return n.jsx(sr.svg,{...i,ref:t,width:a,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:n.jsx("polygon",{points:"0,0 30,0 15,10"})})});Az.displayName=TCe;var OCe=Az,j5="Popper",[Cz,zp]=ao(j5),[kCe,_z]=Cz(j5),Tz=e=>{const{__scopePopper:t,children:r}=e,[a,s]=g.useState(null);return n.jsx(kCe,{scope:t,anchor:a,onAnchorChange:s,children:r})};Tz.displayName=j5;var Oz="PopperAnchor",kz=g.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:a,...s}=e,i=_z(Oz,r),o=g.useRef(null),l=wr(t,o),d=g.useRef(null);return g.useEffect(()=>{const u=d.current;d.current=a?.current||o.current,u!==d.current&&i.onAnchorChange(d.current)}),a?null:n.jsx(sr.div,{...s,ref:l})});kz.displayName=Oz;var w5="PopperContent",[RCe,PCe]=Cz(w5),Rz=g.forwardRef((e,t)=>{const{__scopePopper:r,side:a="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:d=!0,collisionBoundary:u=[],collisionPadding:p=0,sticky:m="partial",hideWhenDetached:h=!1,updatePositionStrategy:x="optimized",onPlaced:y,...N}=e,v=_z(w5,r),[j,E]=g.useState(null),C=wr(t,ce=>E(ce)),[A,S]=g.useState(null),_=_O(A),O=_?.width??0,D=_?.height??0,k=a+(i!=="center"?"-"+i:""),M=typeof p=="number"?p:{top:0,right:0,bottom:0,left:0,...p},F=Array.isArray(u)?u:[u],$=F.length>0,B={padding:M,boundary:F.filter(ICe),altBoundary:$},{refs:P,floatingStyles:W,placement:K,isPositioned:G,middlewareData:U}=vCe({strategy:"fixed",placement:k,whileElementsMounted:(...ce)=>dCe(...ce,{animationFrame:x==="always"}),elements:{reference:v.anchor},middleware:[SCe({mainAxis:s+D,alignmentAxis:o}),d&&jCe({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?wCe():void 0,...B}),d&&ECe({...B}),ACe({...B,apply:({elements:ce,rects:Ee,availableWidth:xe,availableHeight:Te})=>{const{width:ye,height:se}=Ee.reference,ct=ce.floating.style;ct.setProperty("--radix-popper-available-width",`${xe}px`),ct.setProperty("--radix-popper-available-height",`${Te}px`),ct.setProperty("--radix-popper-anchor-width",`${ye}px`),ct.setProperty("--radix-popper-anchor-height",`${se}px`)}}),A&&_Ce({element:A,padding:l}),MCe({arrowWidth:O,arrowHeight:D}),h&&CCe({strategy:"referenceHidden",...B})]}),[te,re]=Iz(K),q=ps(y);na(()=>{G&&q?.()},[G,q]);const L=U.arrow?.x,H=U.arrow?.y,ae=U.arrow?.centerOffset!==0,[oe,ve]=g.useState();return na(()=>{j&&ve(window.getComputedStyle(j).zIndex)},[j]),n.jsx("div",{ref:P.setFloating,"data-radix-popper-content-wrapper":"",style:{...W,transform:G?W.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:oe,"--radix-popper-transform-origin":[U.transformOrigin?.x,U.transformOrigin?.y].join(" "),...U.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:n.jsx(RCe,{scope:r,placedSide:te,onArrowChange:S,arrowX:L,arrowY:H,shouldHideArrow:ae,children:n.jsx(sr.div,{"data-side":te,"data-align":re,...N,ref:C,style:{...N.style,animation:G?void 0:"none"}})})})});Rz.displayName=w5;var Pz="PopperArrow",DCe={top:"bottom",right:"left",bottom:"top",left:"right"},Dz=g.forwardRef(function(t,r){const{__scopePopper:a,...s}=t,i=PCe(Pz,a),o=DCe[i.placedSide];return n.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:n.jsx(OCe,{...s,ref:r,style:{...s.style,display:"block"}})})});Dz.displayName=Pz;function ICe(e){return e!==null}var MCe=e=>({name:"transformOrigin",options:e,fn(t){const{placement:r,rects:a,middlewareData:s}=t,o=s.arrow?.centerOffset!==0,l=o?0:e.arrowWidth,d=o?0:e.arrowHeight,[u,p]=Iz(r),m={start:"0%",center:"50%",end:"100%"}[p],h=(s.arrow?.x??0)+l/2,x=(s.arrow?.y??0)+d/2;let y="",N="";return u==="bottom"?(y=o?m:`${h}px`,N=`${-d}px`):u==="top"?(y=o?m:`${h}px`,N=`${a.floating.height+d}px`):u==="right"?(y=`${-d}px`,N=o?m:`${x}px`):u==="left"&&(y=`${a.floating.width+d}px`,N=o?m:`${x}px`),{data:{x:y,y:N}}}});function Iz(e){const[t,r="center"]=e.split("-");return[t,r]}var E5=Tz,q1=kz,A5=Rz,C5=Dz;function LCe(e){const t=$Ce(e),r=g.forwardRef((a,s)=>{const{children:i,...o}=a,l=g.Children.toArray(i),d=l.find(BCe);if(d){const u=d.props.children,p=l.map(m=>m===d?g.Children.count(u)>1?g.Children.only(null):g.isValidElement(u)?u.props.children:null:m);return n.jsx(t,{...o,ref:s,children:g.isValidElement(u)?g.cloneElement(u,void 0,p):null})}return n.jsx(t,{...o,ref:s,children:i})});return r.displayName=`${e}.Slot`,r}function $Ce(e){const t=g.forwardRef((r,a)=>{const{children:s,...i}=r;if(g.isValidElement(s)){const o=HCe(s),l=UCe(i,s.props);return s.type!==g.Fragment&&(l.ref=a?df(a,o):o),g.cloneElement(s,l)}return g.Children.count(s)>1?g.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var FCe=Symbol("radix.slottable");function BCe(e){return g.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===FCe}function UCe(e,t){const r={...t};for(const a in t){const s=e[a],i=t[a];/^on[A-Z]/.test(a)?s&&i?r[a]=(...l)=>{const d=i(...l);return s(...l),d}:s&&(r[a]=s):a==="style"?r[a]={...s,...i}:a==="className"&&(r[a]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function HCe(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Mz=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),GCe="VisuallyHidden",Lz=g.forwardRef((e,t)=>n.jsx(sr.span,{...e,ref:t,style:{...Mz,...e.style}}));Lz.displayName=GCe;var KCe=Lz,zCe=[" ","Enter","ArrowUp","ArrowDown"],qCe=[" ","Enter"],lf="Select",[W1,V1,WCe]=pz(lf),[qp]=ao(lf,[WCe,zp]),Y1=zp(),[VCe,Zd]=qp(lf),[YCe,XCe]=qp(lf),$z=e=>{const{__scopeSelect:t,children:r,open:a,defaultOpen:s,onOpenChange:i,value:o,defaultValue:l,onValueChange:d,dir:u,name:p,autoComplete:m,disabled:h,required:x,form:y}=e,N=Y1(t),[v,j]=g.useState(null),[E,C]=g.useState(null),[A,S]=g.useState(!1),_=bg(u),[O,D]=Cc({prop:a,defaultProp:s??!1,onChange:i,caller:lf}),[k,M]=Cc({prop:o,defaultProp:l,onChange:d,caller:lf}),F=g.useRef(null),$=v?y||!!v.closest("form"):!0,[B,P]=g.useState(new Set),W=Array.from(B).map(K=>K.props.value).join(";");return n.jsx(E5,{...N,children:n.jsxs(VCe,{required:x,scope:t,trigger:v,onTriggerChange:j,valueNode:E,onValueNodeChange:C,valueNodeHasChildren:A,onValueNodeHasChildrenChange:S,contentId:wl(),value:k,onValueChange:M,open:O,onOpenChange:D,dir:_,triggerPointerDownPosRef:F,disabled:h,children:[n.jsx(W1.Provider,{scope:t,children:n.jsx(YCe,{scope:e.__scopeSelect,onNativeOptionAdd:g.useCallback(K=>{P(G=>new Set(G).add(K))},[]),onNativeOptionRemove:g.useCallback(K=>{P(G=>{const U=new Set(G);return U.delete(K),U})},[]),children:r})}),$?n.jsxs(iq,{"aria-hidden":!0,required:x,tabIndex:-1,name:p,autoComplete:m,value:k,onChange:K=>M(K.target.value),disabled:h,form:y,children:[k===void 0?n.jsx("option",{value:""}):null,Array.from(B)]},W):null]})})};$z.displayName=lf;var Fz="SelectTrigger",Bz=g.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:a=!1,...s}=e,i=Y1(r),o=Zd(Fz,r),l=o.disabled||a,d=wr(t,o.onTriggerChange),u=V1(r),p=g.useRef("touch"),[m,h,x]=lq(N=>{const v=u().filter(C=>!C.disabled),j=v.find(C=>C.value===o.value),E=cq(v,N,j);E!==void 0&&o.onValueChange(E.value)}),y=N=>{l||(o.onOpenChange(!0),x()),N&&(o.triggerPointerDownPosRef.current={x:Math.round(N.pageX),y:Math.round(N.pageY)})};return n.jsx(q1,{asChild:!0,...i,children:n.jsx(sr.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":oq(o.value)?"":void 0,...s,ref:d,onClick:Bt(s.onClick,N=>{N.currentTarget.focus(),p.current!=="mouse"&&y(N)}),onPointerDown:Bt(s.onPointerDown,N=>{p.current=N.pointerType;const v=N.target;v.hasPointerCapture(N.pointerId)&&v.releasePointerCapture(N.pointerId),N.button===0&&N.ctrlKey===!1&&N.pointerType==="mouse"&&(y(N),N.preventDefault())}),onKeyDown:Bt(s.onKeyDown,N=>{const v=m.current!=="";!(N.ctrlKey||N.altKey||N.metaKey)&&N.key.length===1&&h(N.key),!(v&&N.key===" ")&&zCe.includes(N.key)&&(y(),N.preventDefault())})})})});Bz.displayName=Fz;var Uz="SelectValue",Hz=g.forwardRef((e,t)=>{const{__scopeSelect:r,className:a,style:s,children:i,placeholder:o="",...l}=e,d=Zd(Uz,r),{onValueNodeHasChildrenChange:u}=d,p=i!==void 0,m=wr(t,d.onValueNodeChange);return na(()=>{u(p)},[u,p]),n.jsx(sr.span,{...l,ref:m,style:{pointerEvents:"none"},children:oq(d.value)?n.jsx(n.Fragment,{children:o}):i})});Hz.displayName=Uz;var QCe="SelectIcon",Gz=g.forwardRef((e,t)=>{const{__scopeSelect:r,children:a,...s}=e;return n.jsx(sr.span,{"aria-hidden":!0,...s,ref:t,children:a||""})});Gz.displayName=QCe;var ZCe="SelectPortal",Kz=e=>n.jsx(xg,{asChild:!0,...e});Kz.displayName=ZCe;var cf="SelectContent",zz=g.forwardRef((e,t)=>{const r=Zd(cf,e.__scopeSelect),[a,s]=g.useState();if(na(()=>{s(new DocumentFragment)},[]),!r.open){const i=a;return i?Cp.createPortal(n.jsx(qz,{scope:e.__scopeSelect,children:n.jsx(W1.Slot,{scope:e.__scopeSelect,children:n.jsx("div",{children:e.children})})}),i):null}return n.jsx(Wz,{...e,ref:t})});zz.displayName=cf;var Eo=10,[qz,Jd]=qp(cf),JCe="SelectContentImpl",e_e=LCe("SelectContent.RemoveScroll"),Wz=g.forwardRef((e,t)=>{const{__scopeSelect:r,position:a="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:d,align:u,alignOffset:p,arrowPadding:m,collisionBoundary:h,collisionPadding:x,sticky:y,hideWhenDetached:N,avoidCollisions:v,...j}=e,E=Zd(cf,r),[C,A]=g.useState(null),[S,_]=g.useState(null),O=wr(t,ce=>A(ce)),[D,k]=g.useState(null),[M,F]=g.useState(null),$=V1(r),[B,P]=g.useState(!1),W=g.useRef(!1);g.useEffect(()=>{if(C)return kO(C)},[C]),OO();const K=g.useCallback(ce=>{const[Ee,...xe]=$().map(se=>se.ref.current),[Te]=xe.slice(-1),ye=document.activeElement;for(const se of ce)if(se===ye||(se?.scrollIntoView({block:"nearest"}),se===Ee&&S&&(S.scrollTop=0),se===Te&&S&&(S.scrollTop=S.scrollHeight),se?.focus(),document.activeElement!==ye))return},[$,S]),G=g.useCallback(()=>K([D,C]),[K,D,C]);g.useEffect(()=>{B&&G()},[B,G]);const{onOpenChange:U,triggerPointerDownPosRef:te}=E;g.useEffect(()=>{if(C){let ce={x:0,y:0};const Ee=Te=>{ce={x:Math.abs(Math.round(Te.pageX)-(te.current?.x??0)),y:Math.abs(Math.round(Te.pageY)-(te.current?.y??0))}},xe=Te=>{ce.x<=10&&ce.y<=10?Te.preventDefault():C.contains(Te.target)||U(!1),document.removeEventListener("pointermove",Ee),te.current=null};return te.current!==null&&(document.addEventListener("pointermove",Ee),document.addEventListener("pointerup",xe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ee),document.removeEventListener("pointerup",xe,{capture:!0})}}},[C,U,te]),g.useEffect(()=>{const ce=()=>U(!1);return window.addEventListener("blur",ce),window.addEventListener("resize",ce),()=>{window.removeEventListener("blur",ce),window.removeEventListener("resize",ce)}},[U]);const[re,q]=lq(ce=>{const Ee=$().filter(ye=>!ye.disabled),xe=Ee.find(ye=>ye.ref.current===document.activeElement),Te=cq(Ee,ce,xe);Te&&setTimeout(()=>Te.ref.current.focus())}),L=g.useCallback((ce,Ee,xe)=>{const Te=!W.current&&!xe;(E.value!==void 0&&E.value===Ee||Te)&&(k(ce),Te&&(W.current=!0))},[E.value]),H=g.useCallback(()=>C?.focus(),[C]),ae=g.useCallback((ce,Ee,xe)=>{const Te=!W.current&&!xe;(E.value!==void 0&&E.value===Ee||Te)&&F(ce)},[E.value]),oe=a==="popper"?HT:Vz,ve=oe===HT?{side:l,sideOffset:d,align:u,alignOffset:p,arrowPadding:m,collisionBoundary:h,collisionPadding:x,sticky:y,hideWhenDetached:N,avoidCollisions:v}:{};return n.jsx(qz,{scope:r,content:C,viewport:S,onViewportChange:_,itemRefCallback:L,selectedItem:D,onItemLeave:H,itemTextRefCallback:ae,focusSelectedItem:G,selectedItemText:M,position:a,isPositioned:B,searchRef:re,children:n.jsx(zv,{as:e_e,allowPinchZoom:!0,children:n.jsx(Gv,{asChild:!0,trapped:E.open,onMountAutoFocus:ce=>{ce.preventDefault()},onUnmountAutoFocus:Bt(s,ce=>{E.trigger?.focus({preventScroll:!0}),ce.preventDefault()}),children:n.jsx(gg,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:ce=>ce.preventDefault(),onDismiss:()=>E.onOpenChange(!1),children:n.jsx(oe,{role:"listbox",id:E.contentId,"data-state":E.open?"open":"closed",dir:E.dir,onContextMenu:ce=>ce.preventDefault(),...j,...ve,onPlaced:()=>P(!0),ref:O,style:{display:"flex",flexDirection:"column",outline:"none",...j.style},onKeyDown:Bt(j.onKeyDown,ce=>{const Ee=ce.ctrlKey||ce.altKey||ce.metaKey;if(ce.key==="Tab"&&ce.preventDefault(),!Ee&&ce.key.length===1&&q(ce.key),["ArrowUp","ArrowDown","Home","End"].includes(ce.key)){let Te=$().filter(ye=>!ye.disabled).map(ye=>ye.ref.current);if(["ArrowUp","End"].includes(ce.key)&&(Te=Te.slice().reverse()),["ArrowUp","ArrowDown"].includes(ce.key)){const ye=ce.target,se=Te.indexOf(ye);Te=Te.slice(se+1)}setTimeout(()=>K(Te)),ce.preventDefault()}})})})})})})});Wz.displayName=JCe;var t_e="SelectItemAlignedPosition",Vz=g.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:a,...s}=e,i=Zd(cf,r),o=Jd(cf,r),[l,d]=g.useState(null),[u,p]=g.useState(null),m=wr(t,O=>p(O)),h=V1(r),x=g.useRef(!1),y=g.useRef(!0),{viewport:N,selectedItem:v,selectedItemText:j,focusSelectedItem:E}=o,C=g.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&N&&v&&j){const O=i.trigger.getBoundingClientRect(),D=u.getBoundingClientRect(),k=i.valueNode.getBoundingClientRect(),M=j.getBoundingClientRect();if(i.dir!=="rtl"){const ye=M.left-D.left,se=k.left-ye,ct=O.left-se,Q=O.width+ct,he=Math.max(Q,D.width),$e=window.innerWidth-Eo,Z=IC(se,[Eo,Math.max(Eo,$e-he)]);l.style.minWidth=Q+"px",l.style.left=Z+"px"}else{const ye=D.right-M.right,se=window.innerWidth-k.right-ye,ct=window.innerWidth-O.right-se,Q=O.width+ct,he=Math.max(Q,D.width),$e=window.innerWidth-Eo,Z=IC(se,[Eo,Math.max(Eo,$e-he)]);l.style.minWidth=Q+"px",l.style.right=Z+"px"}const F=h(),$=window.innerHeight-Eo*2,B=N.scrollHeight,P=window.getComputedStyle(u),W=parseInt(P.borderTopWidth,10),K=parseInt(P.paddingTop,10),G=parseInt(P.borderBottomWidth,10),U=parseInt(P.paddingBottom,10),te=W+K+B+U+G,re=Math.min(v.offsetHeight*5,te),q=window.getComputedStyle(N),L=parseInt(q.paddingTop,10),H=parseInt(q.paddingBottom,10),ae=O.top+O.height/2-Eo,oe=$-ae,ve=v.offsetHeight/2,ce=v.offsetTop+ve,Ee=W+K+ce,xe=te-Ee;if(Ee<=ae){const ye=F.length>0&&v===F[F.length-1].ref.current;l.style.bottom="0px";const se=u.clientHeight-N.offsetTop-N.offsetHeight,ct=Math.max(oe,ve+(ye?H:0)+se+G),Q=Ee+ct;l.style.height=Q+"px"}else{const ye=F.length>0&&v===F[0].ref.current;l.style.top="0px";const ct=Math.max(ae,W+N.offsetTop+(ye?L:0)+ve)+xe;l.style.height=ct+"px",N.scrollTop=Ee-ae+N.offsetTop}l.style.margin=`${Eo}px 0`,l.style.minHeight=re+"px",l.style.maxHeight=$+"px",a?.(),requestAnimationFrame(()=>x.current=!0)}},[h,i.trigger,i.valueNode,l,u,N,v,j,i.dir,a]);na(()=>C(),[C]);const[A,S]=g.useState();na(()=>{u&&S(window.getComputedStyle(u).zIndex)},[u]);const _=g.useCallback(O=>{O&&y.current===!0&&(C(),E?.(),y.current=!1)},[C,E]);return n.jsx(n_e,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:x,onScrollButtonChange:_,children:n.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:A},children:n.jsx(sr.div,{...s,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});Vz.displayName=t_e;var r_e="SelectPopperPosition",HT=g.forwardRef((e,t)=>{const{__scopeSelect:r,align:a="start",collisionPadding:s=Eo,...i}=e,o=Y1(r);return n.jsx(A5,{...o,...i,ref:t,align:a,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});HT.displayName=r_e;var[n_e,_5]=qp(cf,{}),GT="SelectViewport",Yz=g.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:a,...s}=e,i=Jd(GT,r),o=_5(GT,r),l=wr(t,i.onViewportChange),d=g.useRef(0);return n.jsxs(n.Fragment,{children:[n.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),n.jsx(W1.Slot,{scope:r,children:n.jsx(sr.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Bt(s.onScroll,u=>{const p=u.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:h}=o;if(h?.current&&m){const x=Math.abs(d.current-p.scrollTop);if(x>0){const y=window.innerHeight-Eo*2,N=parseFloat(m.style.minHeight),v=parseFloat(m.style.height),j=Math.max(N,v);if(j<y){const E=j+x,C=Math.min(y,E),A=E-C;m.style.height=C+"px",m.style.bottom==="0px"&&(p.scrollTop=A>0?A:0,m.style.justifyContent="flex-end")}}}d.current=p.scrollTop})})})]})});Yz.displayName=GT;var Xz="SelectGroup",[a_e,s_e]=qp(Xz),i_e=g.forwardRef((e,t)=>{const{__scopeSelect:r,...a}=e,s=wl();return n.jsx(a_e,{scope:r,id:s,children:n.jsx(sr.div,{role:"group","aria-labelledby":s,...a,ref:t})})});i_e.displayName=Xz;var Qz="SelectLabel",o_e=g.forwardRef((e,t)=>{const{__scopeSelect:r,...a}=e,s=s_e(Qz,r);return n.jsx(sr.div,{id:s.id,...a,ref:t})});o_e.displayName=Qz;var Pv="SelectItem",[l_e,Zz]=qp(Pv),Jz=g.forwardRef((e,t)=>{const{__scopeSelect:r,value:a,disabled:s=!1,textValue:i,...o}=e,l=Zd(Pv,r),d=Jd(Pv,r),u=l.value===a,[p,m]=g.useState(i??""),[h,x]=g.useState(!1),y=wr(t,E=>d.itemRefCallback?.(E,a,s)),N=wl(),v=g.useRef("touch"),j=()=>{s||(l.onValueChange(a),l.onOpenChange(!1))};if(a==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return n.jsx(l_e,{scope:r,value:a,disabled:s,textId:N,isSelected:u,onItemTextChange:g.useCallback(E=>{m(C=>C||(E?.textContent??"").trim())},[]),children:n.jsx(W1.ItemSlot,{scope:r,value:a,disabled:s,textValue:p,children:n.jsx(sr.div,{role:"option","aria-labelledby":N,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:y,onFocus:Bt(o.onFocus,()=>x(!0)),onBlur:Bt(o.onBlur,()=>x(!1)),onClick:Bt(o.onClick,()=>{v.current!=="mouse"&&j()}),onPointerUp:Bt(o.onPointerUp,()=>{v.current==="mouse"&&j()}),onPointerDown:Bt(o.onPointerDown,E=>{v.current=E.pointerType}),onPointerMove:Bt(o.onPointerMove,E=>{v.current=E.pointerType,s?d.onItemLeave?.():v.current==="mouse"&&E.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Bt(o.onPointerLeave,E=>{E.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:Bt(o.onKeyDown,E=>{d.searchRef?.current!==""&&E.key===" "||(qCe.includes(E.key)&&j(),E.key===" "&&E.preventDefault())})})})})});Jz.displayName=Pv;var s0="SelectItemText",eq=g.forwardRef((e,t)=>{const{__scopeSelect:r,className:a,style:s,...i}=e,o=Zd(s0,r),l=Jd(s0,r),d=Zz(s0,r),u=XCe(s0,r),[p,m]=g.useState(null),h=wr(t,j=>m(j),d.onItemTextChange,j=>l.itemTextRefCallback?.(j,d.value,d.disabled)),x=p?.textContent,y=g.useMemo(()=>n.jsx("option",{value:d.value,disabled:d.disabled,children:x},d.value),[d.disabled,d.value,x]),{onNativeOptionAdd:N,onNativeOptionRemove:v}=u;return na(()=>(N(y),()=>v(y)),[N,v,y]),n.jsxs(n.Fragment,{children:[n.jsx(sr.span,{id:d.textId,...i,ref:h}),d.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Cp.createPortal(i.children,o.valueNode):null]})});eq.displayName=s0;var tq="SelectItemIndicator",rq=g.forwardRef((e,t)=>{const{__scopeSelect:r,...a}=e;return Zz(tq,r).isSelected?n.jsx(sr.span,{"aria-hidden":!0,...a,ref:t}):null});rq.displayName=tq;var KT="SelectScrollUpButton",nq=g.forwardRef((e,t)=>{const r=Jd(KT,e.__scopeSelect),a=_5(KT,e.__scopeSelect),[s,i]=g.useState(!1),o=wr(t,a.onScrollButtonChange);return na(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=d.scrollTop>0;i(u)};const d=r.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?n.jsx(sq,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=r;l&&d&&(l.scrollTop=l.scrollTop-d.offsetHeight)}}):null});nq.displayName=KT;var zT="SelectScrollDownButton",aq=g.forwardRef((e,t)=>{const r=Jd(zT,e.__scopeSelect),a=_5(zT,e.__scopeSelect),[s,i]=g.useState(!1),o=wr(t,a.onScrollButtonChange);return na(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=d.scrollHeight-d.clientHeight,p=Math.ceil(d.scrollTop)<u;i(p)};const d=r.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?n.jsx(sq,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=r;l&&d&&(l.scrollTop=l.scrollTop+d.offsetHeight)}}):null});aq.displayName=zT;var sq=g.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:a,...s}=e,i=Jd("SelectScrollButton",r),o=g.useRef(null),l=V1(r),d=g.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return g.useEffect(()=>()=>d(),[d]),na(()=>{l().find(p=>p.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[l]),n.jsx(sr.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:Bt(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(a,50))}),onPointerMove:Bt(s.onPointerMove,()=>{i.onItemLeave?.(),o.current===null&&(o.current=window.setInterval(a,50))}),onPointerLeave:Bt(s.onPointerLeave,()=>{d()})})}),c_e="SelectSeparator",d_e=g.forwardRef((e,t)=>{const{__scopeSelect:r,...a}=e;return n.jsx(sr.div,{"aria-hidden":!0,...a,ref:t})});d_e.displayName=c_e;var qT="SelectArrow",u_e=g.forwardRef((e,t)=>{const{__scopeSelect:r,...a}=e,s=Y1(r),i=Zd(qT,r),o=Jd(qT,r);return i.open&&o.position==="popper"?n.jsx(C5,{...s,...a,ref:t}):null});u_e.displayName=qT;var f_e="SelectBubbleInput",iq=g.forwardRef(({__scopeSelect:e,value:t,...r},a)=>{const s=g.useRef(null),i=wr(a,s),o=CO(t);return g.useEffect(()=>{const l=s.current;if(!l)return;const d=window.HTMLSelectElement.prototype,p=Object.getOwnPropertyDescriptor(d,"value").set;if(o!==t&&p){const m=new Event("change",{bubbles:!0});p.call(l,t),l.dispatchEvent(m)}},[o,t]),n.jsx(sr.select,{...r,style:{...Mz,...r.style},ref:i,defaultValue:t})});iq.displayName=f_e;function oq(e){return e===""||e===void 0}function lq(e){const t=ps(e),r=g.useRef(""),a=g.useRef(0),s=g.useCallback(o=>{const l=r.current+o;t(l),(function d(u){r.current=u,window.clearTimeout(a.current),u!==""&&(a.current=window.setTimeout(()=>d(""),1e3))})(l)},[t]),i=g.useCallback(()=>{r.current="",window.clearTimeout(a.current)},[]);return g.useEffect(()=>()=>window.clearTimeout(a.current),[]),[r,s,i]}function cq(e,t,r){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=m_e(e,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==r));const d=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return d!==r?d:void 0}function m_e(e,t){return e.map((r,a)=>e[(t+a)%e.length])}var p_e=$z,h_e=Bz,g_e=Hz,x_e=Gz,b_e=Kz,y_e=zz,v_e=Yz,N_e=Jz,S_e=eq,j_e=rq,w_e=nq,E_e=aq;function MA({...e}){return n.jsx(p_e,{"data-slot":"select",...e})}function LA({...e}){return n.jsx(g_e,{"data-slot":"select-value",...e})}function $A({className:e,size:t="default",children:r,...a}){return n.jsxs(h_e,{"data-slot":"select-trigger","data-size":t,className:de("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...a,children:[r,n.jsx(x_e,{asChild:!0,children:n.jsx(gs,{className:"size-4 opacity-50"})})]})}function FA({className:e,children:t,position:r="popper",...a}){return n.jsx(b_e,{children:n.jsxs(y_e,{"data-slot":"select-content",className:de("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...a,children:[n.jsx(A_e,{}),n.jsx(v_e,{className:de("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),n.jsx(C_e,{})]})})}function Ln({className:e,children:t,...r}){return n.jsxs(N_e,{"data-slot":"select-item",className:de("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...r,children:[n.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:n.jsx(j_e,{children:n.jsx(Yu,{className:"size-4"})})}),n.jsx(S_e,{children:t})]})}function A_e({className:e,...t}){return n.jsx(w_e,{"data-slot":"select-scroll-up-button",className:de("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(Ac,{className:"size-4"})})}function C_e({className:e,...t}){return n.jsx(E_e,{"data-slot":"select-scroll-down-button",className:de("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(gs,{className:"size-4"})})}var BA="rovingFocusGroup.onEntryFocus",__e={bubbles:!1,cancelable:!0},Og="RovingFocusGroup",[WT,dq,T_e]=pz(Og),[O_e,X1]=ao(Og,[T_e]),[k_e,R_e]=O_e(Og),uq=g.forwardRef((e,t)=>n.jsx(WT.Provider,{scope:e.__scopeRovingFocusGroup,children:n.jsx(WT.Slot,{scope:e.__scopeRovingFocusGroup,children:n.jsx(P_e,{...e,ref:t})})}));uq.displayName=Og;var P_e=g.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:a,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:d,onEntryFocus:u,preventScrollOnEntryFocus:p=!1,...m}=e,h=g.useRef(null),x=wr(t,h),y=bg(i),[N,v]=Cc({prop:o,defaultProp:l??null,onChange:d,caller:Og}),[j,E]=g.useState(!1),C=ps(u),A=dq(r),S=g.useRef(!1),[_,O]=g.useState(0);return g.useEffect(()=>{const D=h.current;if(D)return D.addEventListener(BA,C),()=>D.removeEventListener(BA,C)},[C]),n.jsx(k_e,{scope:r,orientation:a,dir:y,loop:s,currentTabStopId:N,onItemFocus:g.useCallback(D=>v(D),[v]),onItemShiftTab:g.useCallback(()=>E(!0),[]),onFocusableItemAdd:g.useCallback(()=>O(D=>D+1),[]),onFocusableItemRemove:g.useCallback(()=>O(D=>D-1),[]),children:n.jsx(sr.div,{tabIndex:j||_===0?-1:0,"data-orientation":a,...m,ref:x,style:{outline:"none",...e.style},onMouseDown:Bt(e.onMouseDown,()=>{S.current=!0}),onFocus:Bt(e.onFocus,D=>{const k=!S.current;if(D.target===D.currentTarget&&k&&!j){const M=new CustomEvent(BA,__e);if(D.currentTarget.dispatchEvent(M),!M.defaultPrevented){const F=A().filter(K=>K.focusable),$=F.find(K=>K.active),B=F.find(K=>K.id===N),W=[$,B,...F].filter(Boolean).map(K=>K.ref.current);pq(W,p)}}S.current=!1}),onBlur:Bt(e.onBlur,()=>E(!1))})})}),fq="RovingFocusGroupItem",mq=g.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:a=!0,active:s=!1,tabStopId:i,children:o,...l}=e,d=wl(),u=i||d,p=R_e(fq,r),m=p.currentTabStopId===u,h=dq(r),{onFocusableItemAdd:x,onFocusableItemRemove:y,currentTabStopId:N}=p;return g.useEffect(()=>{if(a)return x(),()=>y()},[a,x,y]),n.jsx(WT.ItemSlot,{scope:r,id:u,focusable:a,active:s,children:n.jsx(sr.span,{tabIndex:m?0:-1,"data-orientation":p.orientation,...l,ref:t,onMouseDown:Bt(e.onMouseDown,v=>{a?p.onItemFocus(u):v.preventDefault()}),onFocus:Bt(e.onFocus,()=>p.onItemFocus(u)),onKeyDown:Bt(e.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){p.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const j=M_e(v,p.orientation,p.dir);if(j!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let C=h().filter(A=>A.focusable).map(A=>A.ref.current);if(j==="last")C.reverse();else if(j==="prev"||j==="next"){j==="prev"&&C.reverse();const A=C.indexOf(v.currentTarget);C=p.loop?L_e(C,A+1):C.slice(A+1)}setTimeout(()=>pq(C))}}),children:typeof o=="function"?o({isCurrentTabStop:m,hasTabStop:N!=null}):o})})});mq.displayName=fq;var D_e={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function I_e(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function M_e(e,t,r){const a=I_e(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(a))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(a)))return D_e[a]}function pq(e,t=!1){const r=document.activeElement;for(const a of e)if(a===r||(a.focus({preventScroll:t}),document.activeElement!==r))return}function L_e(e,t){return e.map((r,a)=>e[(t+a)%e.length])}var hq=uq,gq=mq,T5="Radio",[$_e,xq]=ao(T5),[F_e,B_e]=$_e(T5),bq=g.forwardRef((e,t)=>{const{__scopeRadio:r,name:a,checked:s=!1,required:i,disabled:o,value:l="on",onCheck:d,form:u,...p}=e,[m,h]=g.useState(null),x=wr(t,v=>h(v)),y=g.useRef(!1),N=m?u||!!m.closest("form"):!0;return n.jsxs(F_e,{scope:r,checked:s,disabled:o,children:[n.jsx(sr.button,{type:"button",role:"radio","aria-checked":s,"data-state":Sq(s),"data-disabled":o?"":void 0,disabled:o,value:l,...p,ref:x,onClick:Bt(e.onClick,v=>{s||d?.(),N&&(y.current=v.isPropagationStopped(),y.current||v.stopPropagation())})}),N&&n.jsx(Nq,{control:m,bubbles:!y.current,name:a,value:l,checked:s,required:i,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});bq.displayName=T5;var yq="RadioIndicator",vq=g.forwardRef((e,t)=>{const{__scopeRadio:r,forceMount:a,...s}=e,i=B_e(yq,r);return n.jsx(Is,{present:a||i.checked,children:n.jsx(sr.span,{"data-state":Sq(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:t})})});vq.displayName=yq;var U_e="RadioBubbleInput",Nq=g.forwardRef(({__scopeRadio:e,control:t,checked:r,bubbles:a=!0,...s},i)=>{const o=g.useRef(null),l=wr(o,i),d=CO(r),u=_O(t);return g.useEffect(()=>{const p=o.current;if(!p)return;const m=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(m,"checked").set;if(d!==r&&x){const y=new Event("click",{bubbles:a});x.call(p,r),p.dispatchEvent(y)}},[d,r,a]),n.jsx(sr.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Nq.displayName=U_e;function Sq(e){return e?"checked":"unchecked"}var H_e=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Q1="RadioGroup",[G_e]=ao(Q1,[X1,xq]),jq=X1(),wq=xq(),[K_e,z_e]=G_e(Q1),Eq=g.forwardRef((e,t)=>{const{__scopeRadioGroup:r,name:a,defaultValue:s,value:i,required:o=!1,disabled:l=!1,orientation:d,dir:u,loop:p=!0,onValueChange:m,...h}=e,x=jq(r),y=bg(u),[N,v]=Cc({prop:i,defaultProp:s??null,onChange:m,caller:Q1});return n.jsx(K_e,{scope:r,name:a,required:o,disabled:l,value:N,onValueChange:v,children:n.jsx(hq,{asChild:!0,...x,orientation:d,dir:y,loop:p,children:n.jsx(sr.div,{role:"radiogroup","aria-required":o,"aria-orientation":d,"data-disabled":l?"":void 0,dir:y,...h,ref:t})})})});Eq.displayName=Q1;var Aq="RadioGroupItem",Cq=g.forwardRef((e,t)=>{const{__scopeRadioGroup:r,disabled:a,...s}=e,i=z_e(Aq,r),o=i.disabled||a,l=jq(r),d=wq(r),u=g.useRef(null),p=wr(t,u),m=i.value===s.value,h=g.useRef(!1);return g.useEffect(()=>{const x=N=>{H_e.includes(N.key)&&(h.current=!0)},y=()=>h.current=!1;return document.addEventListener("keydown",x),document.addEventListener("keyup",y),()=>{document.removeEventListener("keydown",x),document.removeEventListener("keyup",y)}},[]),n.jsx(gq,{asChild:!0,...l,focusable:!o,active:m,children:n.jsx(bq,{disabled:o,required:i.required,checked:m,...d,...s,name:i.name,ref:p,onCheck:()=>i.onValueChange(s.value),onKeyDown:Bt(x=>{x.key==="Enter"&&x.preventDefault()}),onFocus:Bt(s.onFocus,()=>{h.current&&u.current?.click()})})})});Cq.displayName=Aq;var q_e="RadioGroupIndicator",_q=g.forwardRef((e,t)=>{const{__scopeRadioGroup:r,...a}=e,s=wq(r);return n.jsx(vq,{...s,...a,ref:t})});_q.displayName=q_e;var W_e=Eq,V_e=Cq,Y_e=_q;function rF({className:e,...t}){return n.jsx(W_e,{"data-slot":"radio-group",className:de("grid gap-3",e),...t})}function Wf({className:e,...t}){return n.jsx(V_e,{"data-slot":"radio-group-item",className:de("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:n.jsx(Y_e,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:n.jsx(cX,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}var X_e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Q_e=X_e.reduce((e,t)=>{const r=Uv(`Primitive.${t}`),a=g.forwardRef((s,i)=>{const{asChild:o,...l}=s,d=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(d,{...l,ref:i})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{}),Z_e="Separator",nF="horizontal",J_e=["horizontal","vertical"],Tq=g.forwardRef((e,t)=>{const{decorative:r,orientation:a=nF,...s}=e,i=eTe(a)?a:nF,l=r?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return n.jsx(Q_e.div,{"data-orientation":i,...l,...s,ref:t})});Tq.displayName=Z_e;function eTe(e){return J_e.includes(e)}var tTe=Tq;function Ph({className:e,orientation:t="horizontal",decorative:r=!0,...a}){return n.jsx(tTe,{"data-slot":"separator-root",decorative:r,orientation:t,className:de("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...a})}var Z1="Tabs",[rTe]=ao(Z1,[X1]),Oq=X1(),[nTe,O5]=rTe(Z1),kq=g.forwardRef((e,t)=>{const{__scopeTabs:r,value:a,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:d="automatic",...u}=e,p=bg(l),[m,h]=Cc({prop:a,onChange:s,defaultProp:i??"",caller:Z1});return n.jsx(nTe,{scope:r,baseId:wl(),value:m,onValueChange:h,orientation:o,dir:p,activationMode:d,children:n.jsx(sr.div,{dir:p,"data-orientation":o,...u,ref:t})})});kq.displayName=Z1;var Rq="TabsList",Pq=g.forwardRef((e,t)=>{const{__scopeTabs:r,loop:a=!0,...s}=e,i=O5(Rq,r),o=Oq(r);return n.jsx(hq,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:a,children:n.jsx(sr.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:t})})});Pq.displayName=Rq;var Dq="TabsTrigger",Iq=g.forwardRef((e,t)=>{const{__scopeTabs:r,value:a,disabled:s=!1,...i}=e,o=O5(Dq,r),l=Oq(r),d=$q(o.baseId,a),u=Fq(o.baseId,a),p=a===o.value;return n.jsx(gq,{asChild:!0,...l,focusable:!s,active:p,children:n.jsx(sr.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":u,"data-state":p?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:d,...i,ref:t,onMouseDown:Bt(e.onMouseDown,m=>{!s&&m.button===0&&m.ctrlKey===!1?o.onValueChange(a):m.preventDefault()}),onKeyDown:Bt(e.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&o.onValueChange(a)}),onFocus:Bt(e.onFocus,()=>{const m=o.activationMode!=="manual";!p&&!s&&m&&o.onValueChange(a)})})})});Iq.displayName=Dq;var Mq="TabsContent",Lq=g.forwardRef((e,t)=>{const{__scopeTabs:r,value:a,forceMount:s,children:i,...o}=e,l=O5(Mq,r),d=$q(l.baseId,a),u=Fq(l.baseId,a),p=a===l.value,m=g.useRef(p);return g.useEffect(()=>{const h=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(h)},[]),n.jsx(Is,{present:s||p,children:({present:h})=>n.jsx(sr.div,{"data-state":p?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":d,hidden:!h,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:m.current?"0s":void 0},children:h&&i})})});Lq.displayName=Mq;function $q(e,t){return`${e}-trigger-${t}`}function Fq(e,t){return`${e}-content-${t}`}var aTe=kq,sTe=Pq,iTe=Iq,oTe=Lq;function lTe({className:e,...t}){return n.jsx(aTe,{"data-slot":"tabs",className:de("flex flex-col gap-2",e),...t})}function cTe({className:e,...t}){return n.jsx(sTe,{"data-slot":"tabs-list",className:de("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",e),...t})}function fb({className:e,...t}){return n.jsx(iTe,{"data-slot":"tabs-trigger",className:de("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function mb({className:e,...t}){return n.jsx(oTe,{"data-slot":"tabs-content",className:de("flex-1 outline-none",e),...t})}function dTe(e){return e===""?"reconsultation":e===""||e===""?"dropout_recontact":e===""||e===""?"contacted":"new"}function uTe(e,t){return Math.max(1,Math.min(99,(t===""?92:t===""?78:t===""?58:38)+(e===""?6:e===""?-6:0)))}function fTe({caseId:e,patientName:t,initialTab:r="consultation",showReferralTab:a=!0,onComplete:s,onCancel:i,onBack:o}){const l=g.useMemo(()=>B1(e),[e]),d=g.useMemo(()=>hK(l),[l]),[u,p]=g.useState(r),[m,h]=g.useState("new"),[x,y]=g.useState(null),[N,v]=g.useState(!0),[j,E]=g.useState("greeting"),[C,A]=g.useState(""),[S,_]=g.useState(""),[O,D]=g.useState(""),[k,M]=g.useState(""),[F,$]=g.useState(""),[B,P]=g.useState(""),[W,K]=g.useState(""),[G,U]=g.useState(""),[te,re]=g.useState(""),[q,L]=g.useState(""),[H,ae]=g.useState(""),[oe,ve]=g.useState(""),[ce,Ee]=g.useState(""),[xe,Te]=g.useState({}),[ye,se]=g.useState(!1),[ct,Q]=g.useState(""),[he,$e]=g.useState([]),[Z,je]=g.useState("citizen"),ge=g.useMemo(()=>l?{id:l.id,patientId:l.id,patientName:l.profile.name,ageGroup:dg(l.profile.age),gender:"",phone:l.profile.phone,guardianPhone:l.profile.guardianPhone??"",address:"    ",riskLevel:l.risk===""?"high":l.risk===""?"medium":"low",riskScore:uTe(l.risk,d.label),contactPriorityLabel:d.label,status:dTe(l.status),counselor:l.manager,registeredDate:l.updated.split(" ")[0],lastContact:l.updated.split(" ")[0]}:{id:e,patientId:e,patientName:t??"  ",ageGroup:" ",gender:"",phone:"010-0000-0000",guardianPhone:"",address:"  ",riskLevel:"medium",riskScore:60,contactPriorityLabel:"",status:"new",counselor:" ",registeredDate:new Date().toISOString().split("T")[0],lastContact:new Date().toISOString().split("T")[0]},[e,l,d.label,t]),[be]=g.useState([{id:"CONS-001",date:"2026-02-01",time:"10:30",counselor:"",duration:15,result:"completed",summary:"  .    .",actions:["   (2026-02-10)"]}]),it={new:{greeting:{step:"greeting",title:"1:    ",content:`,    ${ge.counselor} .   ?

       ?`,tips:["   ","    ","    "],checkpoints:["  ","  ","  "]},purpose:{step:"purpose",title:"2:   ",content:`          .

             .    ,   .`,tips:["   ","    ","   "],checkpoints:["  "," ","  "]},assessment:{step:"assessment",title:"3:   ",content:`   ?

 :
-     ?
-   ?
-       ?
-    ?`,tips:["   ","  ","  "],checkpoints:["  ","  ","   "]},scheduling:{step:"scheduling",title:"4:     ",content:`      .  30  ,     .

  ${ge.address} ,     .

    .   ?`,tips:["   ","   ","(,  ) "],checkpoints:["  ","  "," "]}},contacted:{greeting:{step:"greeting",title:"1:  ",content:`,   ${ge.counselor} .     ?`,tips:[" ","   "],checkpoints:[" ","   "]},purpose:{step:"purpose",title:"2:  ",content:"     .     ?",tips:["  ","   "],checkpoints:["  ","  "]},assessment:{step:"assessment",title:"3:   ",content:"     ?    .",tips:["  ","  "],checkpoints:["  ","  "]},scheduling:{step:"scheduling",title:"4:  ",content:"     .       .",tips:["  "," "],checkpoints:[" ","SMS  "]}},reconsultation:{greeting:{step:"greeting",title:"1:   ",content:`, ${ge.counselor} .      .`,tips:["   ","  "],checkpoints:[" ","   "]},purpose:{step:"purpose",title:"2:  ",content:"  ,      .",tips:["  "," "],checkpoints:["  "," "]},assessment:{step:"assessment",title:"3:    ",content:"          .  .",tips:["   "," "],checkpoints:["  "," "]},scheduling:{step:"scheduling",title:"4:   ",content:"    .  ?",tips:[" ","   "],checkpoints:[" ","  "]}},dropout_recontact:{greeting:{step:"greeting",title:"1:  ",content:",  .  .   ?",tips:["  ","   "],checkpoints:[" ","  "]},purpose:{step:"purpose",title:"2:  ",content:"      .",tips:["  ","  "],checkpoints:[" "," "]},assessment:{step:"assessment",title:"3:   ",content:"  ?    .",tips:["  ","  "],checkpoints:["  ","  "]},scheduling:{step:"scheduling",title:"4:  ",content:"     ?      .",tips:["  ","  "],checkpoints:["  ","  "]}}};g.useEffect(()=>{if(N&&C.trim()){const Pe=setInterval(()=>{Et()},3e4);return()=>clearInterval(Pe)}},[C,N]),g.useEffect(()=>{h(ge.status)},[ge.status]),g.useEffect(()=>{p(r)},[r]),g.useEffect(()=>{!a&&u==="referral"&&p("consultation")},[a,u]),g.useEffect(()=>{se(!1)},[j,m]),g.useEffect(()=>{if(F&&B&&W){const vr=`[ ] ${new Date(B).toLocaleDateString("ko-KR",{month:"long",day:"numeric",weekday:"short"})} ${W} ${F==="screening"?"":F==="health_center"?" ":" "}  .

:    123-45
: 02-1234-5678

${G?": "+G:""}`;re(vr)}else re("")},[F,B,W,G]);const Fe=()=>{y(new Date),console.log("[AUDIT] Consultation Started:",{action:"CONSULTATION_START",caseId:ge.id,counselor:ge.counselor,timestamp:new Date().toISOString()})},Et=()=>{console.log("[AUTO-SAVE] Consultation Draft Saved:",{caseId:ge.id,notes:C,timestamp:new Date().toISOString()})},Mt=()=>{const Pe=`${m}-${j}`,Kt=it[m][j].content;Q(xe[Pe]??Kt),se(!0)},Be=()=>{const Pe=`${m}-${j}`,Kt=it[m][j].content,Pr=xe[Pe]??Kt;Te(vr=>({...vr,[Pe]:ct})),$e(vr=>[{id:`EDIT-${Date.now()}`,step:j,title:it[m][j].title,before:Pr,after:ct,ts:new Date().toISOString()},...vr]),A(vr=>vr+(vr?`

`:"")+`[${it[m][j].title} - ]
${ct}`),se(!1)},tr=()=>{se(!1)},br=()=>{console.log("[AUDIT] Temporary Save:",{action:"CONSULTATION_TEMP_SAVE",caseId:ge.id,notes:C,result:S,timestamp:new Date().toISOString()}),alert(" .")},Er=()=>{if(!S){alert("  .");return}if((S==="postponed"||S==="refused")&&!k){alert("  .");return}const Pe=x?Math.floor((new Date().getTime()-x.getTime())/6e4):0;console.log("[AUDIT] Consultation Completed:",{action:"CONSULTATION_COMPLETE",caseId:ge.id,counselor:ge.counselor,result:S,reasonCode:k,reason:O,notes:C,duration:Pe,referral:F?{type:F,date:B,time:W}:null,dropout:q?{reason:q,details:H}:null,timestamp:new Date().toISOString()}),alert(` !

 : ${Pe}
: ${S==="completed"?"":S==="postponed"?"":""}

  .`),s&&s()},yr=()=>{if(!F||!B||!W){alert("   .");return}console.log("[AUDIT] Appointment Confirmed & SMS Sent:",{action:"APPOINTMENT_CREATE",caseId:ge.id,counselor:ge.counselor,referralType:F,appointmentDate:B,appointmentTime:W,preVisitNotes:G,smsContent:te,recipientPhone:ge.phone,timestamp:new Date().toISOString()}),alert(`  !

SMS ${ge.phone} .

 :
${te}`);const Pe=`

[/ ]
: ${F==="screening"?" ":F==="health_center"?" ":" "}
: ${B} ${W}
SMS : `;A(C+Pe),p("consultation")},Rr=()=>{if(!q||!H.trim()){alert("     .");return}console.log("[AUDIT] Case Dropout:",{action:"CASE_DROPOUT",caseId:ge.id,counselor:ge.counselor,dropoutReason:q,dropoutDetails:H,recontactDate:oe,recontactPlan:ce,timestamp:new Date().toISOString()}),alert(`   .

  '' .${oe?`

 : ${oe}`:""}`);const Pe=`

[  ]
: ${q}
: ${H}
${oe?" : "+oe:""}`;A(C+Pe),p("consultation")},zr=it[m],pr=`${m}-${j}`,hr=zr[j],Tr={greeting:{content:`,    ${ge.counselor} . ?

   .   ?`,tips:[" (,  ) ","   ","   "]},purpose:{content:`           .

    1    .      .`,tips:["   ","    "," "]},assessment:{content:`    ?

     ?     ,      ?`,tips:["     ","    ","  "]},scheduling:{content:`      .

     .     .

      .`,tips:["   ","   ","   "]}},Mr=Z==="guardian"&&!!ge.guardianPhone,jn=(()=>{const Pe={...hr,content:xe[pr]??hr.content};if(Mr&&!xe[pr]){const Kt=Tr[j];return{...Pe,content:Kt.content,tips:Kt.tips}}return Pe})(),rt=()=>{if(!x)return"00:00";const Pe=Math.floor((new Date().getTime()-x.getTime())/1e3),Kt=Math.floor(Pe/60),Pr=Pe%60;return`${String(Kt).padStart(2,"0")}:${String(Pr).padStart(2,"0")}`};return n.jsxs("div",{className:"h-screen flex flex-col bg-gray-50",children:[n.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4 sticky top-0 z-10",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs(Nt,{variant:"ghost",onClick:o||i,size:"sm",children:[n.jsx(cl,{className:"h-4 w-4 mr-2"}),""]}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-bold text-gray-900",children:" "}),n.jsxs("p",{className:"text-sm text-gray-500",children:[" ID: ",ge.patientId]})]})]}),n.jsx("div",{className:"flex items-center gap-3",children:x?n.jsxs(Qr,{variant:"destructive",className:"text-base px-4 py-2",children:[n.jsx(Sl,{className:"h-4 w-4 mr-2"}),"  ",rt()]}):n.jsxs(Nt,{onClick:Fe,variant:"default",children:[n.jsx(ro,{className:"h-4 w-4 mr-2"})," "]})})]}),n.jsxs("div",{className:"mt-4 grid grid-cols-6 gap-4 bg-gray-50 p-4 rounded-lg border border-gray-200",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),n.jsx("p",{className:"font-semibold text-sm",children:ge.patientName}),n.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[ge.ageGroup," / ",ge.gender]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),n.jsxs("p",{className:"font-semibold text-sm flex items-center gap-1",children:[n.jsx(Ps,{className:"h-3 w-3 text-gray-400"}),ge.phone]}),ge.guardianPhone&&n.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1 mt-0.5",children:[n.jsx(kl,{className:"h-3 w-3 text-blue-400"}),n.jsx("span",{className:"text-blue-600",children:""})," ",ge.guardianPhone]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),n.jsxs("p",{className:"font-semibold text-sm flex items-center gap-1",children:[n.jsx(Qb,{className:"h-3 w-3 text-gray-400"}),ge.address]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),n.jsxs(Qr,{className:`text-xs ${ge.contactPriorityLabel===""?"bg-red-50 text-red-700 border border-red-200":ge.contactPriorityLabel===""?"bg-orange-50 text-orange-700 border border-orange-200":ge.contactPriorityLabel===""?"bg-blue-50 text-blue-700 border border-blue-200":"bg-emerald-50 text-emerald-700 border border-emerald-200"}`,children:[ge.contactPriorityLabel," (",ge.riskScore,")"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),n.jsx(Qr,{variant:"outline",className:"text-xs",children:ge.status==="contacted"?"":""})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:" "}),n.jsxs("p",{className:"font-semibold text-sm flex items-center gap-1",children:[n.jsx(kl,{className:"h-3 w-3 text-gray-400"}),ge.counselor]})]})]})]}),n.jsx("div",{className:"flex-1 overflow-hidden",children:n.jsxs(lTe,{value:u,onValueChange:Pe=>p(Pe),className:"h-full flex flex-col",children:[n.jsx("div",{className:"bg-white border-b border-gray-200 px-6",children:n.jsxs(cTe,{className:"w-full justify-start bg-transparent",children:[n.jsxs(fb,{value:"consultation",className:"data-[state=active]:bg-blue-50 data-[state=active]:text-blue-900",children:[n.jsx(ro,{className:"h-4 w-4 mr-2"})," "]}),a&&n.jsxs(fb,{value:"referral",className:"data-[state=active]:bg-purple-50 data-[state=active]:text-purple-900",children:[n.jsx(CC,{className:"h-4 w-4 mr-2"}),"/"]}),n.jsxs(fb,{value:"dropout",className:"data-[state=active]:bg-orange-50 data-[state=active]:text-orange-900",children:[n.jsx(m2,{className:"h-4 w-4 mr-2"})," "]}),n.jsxs(fb,{value:"history",className:"data-[state=active]:bg-gray-50",children:[n.jsx(ta,{className:"h-4 w-4 mr-2"})," "]})]})}),n.jsxs("div",{className:"flex-1 overflow-auto",children:[n.jsx(mb,{value:"consultation",className:"h-full m-0 p-6",children:n.jsx("div",{className:"max-w-[1400px] mx-auto",children:n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs(Cr,{className:"h-fit",children:[n.jsxs(Nn,{className:"bg-gradient-to-r from-blue-50 to-purple-50 border-b",children:[n.jsxs(Sn,{className:"flex items-center gap-2 text-blue-900",children:[n.jsx(w0,{className:"h-5 w-5"}),"AI   "]}),n.jsxs(fl,{children:[" : ",n.jsx(Qr,{variant:"outline",className:"ml-2",children:m==="new"?"":m==="contacted"?"":m==="reconsultation"?"":"  "})]})]}),n.jsxs(_r,{className:"p-4 space-y-4",children:[n.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-white",children:[n.jsx("p",{className:"text-[10px] font-semibold text-gray-500 mb-2",children:" "}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>je("citizen"),className:`flex-1 flex items-center gap-2 px-3 py-2.5 rounded-lg border-2 transition-all text-left ${Z==="citizen"?"border-blue-500 bg-blue-50":"border-gray-200 bg-gray-50 hover:border-gray-300"}`,children:[n.jsx("div",{className:`w-3 h-3 rounded-full border-2 flex items-center justify-center ${Z==="citizen"?"border-blue-500":"border-gray-300"}`,children:Z==="citizen"&&n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"})}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs font-semibold text-gray-900",children:" "}),n.jsxs("div",{className:"text-[10px] text-gray-500 flex items-center gap-1",children:[n.jsx(Ps,{className:"h-2.5 w-2.5"}),ge.phone]})]})]}),ge.guardianPhone?n.jsxs("button",{onClick:()=>je("guardian"),className:`flex-1 flex items-center gap-2 px-3 py-2.5 rounded-lg border-2 transition-all text-left ${Z==="guardian"?"border-violet-500 bg-violet-50":"border-gray-200 bg-gray-50 hover:border-gray-300"}`,children:[n.jsx("div",{className:`w-3 h-3 rounded-full border-2 flex items-center justify-center ${Z==="guardian"?"border-violet-500":"border-gray-300"}`,children:Z==="guardian"&&n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-violet-500"})}),n.jsxs("div",{children:[n.jsxs("div",{className:"text-xs font-semibold text-gray-900 flex items-center gap-1",children:["",n.jsx("span",{className:"inline-flex px-1 py-0 rounded text-[8px] font-medium bg-blue-100 text-blue-700",children:""})]}),n.jsxs("div",{className:"text-[10px] text-gray-500 flex items-center gap-1",children:[n.jsx(Ps,{className:"h-2.5 w-2.5"}),ge.guardianPhone]})]})]}):n.jsxs("div",{className:"flex-1 flex items-center gap-2 px-3 py-2.5 rounded-lg border-2 border-dashed border-gray-200 bg-gray-50 opacity-50",children:[n.jsx("div",{className:"w-3 h-3"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs font-medium text-gray-400",children:""}),n.jsx("div",{className:"text-[10px] text-gray-400",children:"  "})]})]})]})]}),n.jsx("div",{className:"grid grid-cols-4 gap-2",children:["greeting","purpose","assessment","scheduling"].map((Pe,Kt)=>n.jsxs(Nt,{variant:j===Pe?"default":"outline",size:"sm",onClick:()=>E(Pe),children:[Kt+1,""]},Pe))}),n.jsx(Ph,{}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:jn.title}),n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:ye?n.jsxs("div",{className:"space-y-3",children:[n.jsx(Oo,{value:ct,onChange:Pe=>Q(Pe.target.value),rows:6,className:"bg-white"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Nt,{size:"sm",onClick:Be,children:""}),n.jsx(Nt,{variant:"outline",size:"sm",onClick:tr,children:""})]})]}):n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"text-sm text-blue-900 whitespace-pre-line leading-relaxed",children:jn.content}),n.jsxs(Nt,{variant:"ghost",size:"sm",className:"mt-3 text-blue-600 hover:text-blue-700 hover:bg-blue-100",onClick:Mt,children:[n.jsx(hX,{className:"h-4 w-4 mr-2"})," "]})]})}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[n.jsx(Gn,{className:"h-4 w-4 text-orange-500"})," "]}),n.jsx("ul",{className:"space-y-1",children:jn.tips.map((Pe,Kt)=>n.jsxs("li",{className:"text-xs text-gray-600 flex items-start gap-2",children:[n.jsx("span",{className:"text-orange-500 font-bold",children:""}),n.jsx("span",{children:Pe})]},Kt))})]}),n.jsxs("div",{children:[n.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[n.jsx(Po,{className:"h-4 w-4 text-green-500"}),""]}),n.jsx("div",{className:"space-y-1",children:jn.checkpoints.map((Pe,Kt)=>n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",className:"rounded"}),n.jsx("span",{className:"text-xs text-gray-600",children:Pe})]},Kt))})]})]}),he.length>0&&n.jsxs("div",{className:"mt-4 border-t pt-3",children:[n.jsx("h4",{className:"text-xs font-semibold text-gray-600 mb-2",children:"  "}),n.jsx("div",{className:"space-y-2",children:he.slice(0,3).map(Pe=>n.jsxs("div",{className:"rounded-md border border-gray-200 bg-white p-2",children:[n.jsxs("div",{className:"flex items-center justify-between text-[11px] text-gray-500",children:[n.jsx("span",{children:Pe.title}),n.jsx("span",{children:new Date(Pe.ts).toLocaleString("ko-KR")})]}),n.jsx("p",{className:"mt-1 text-xs text-gray-700 line-clamp-2",children:Pe.after})]},Pe.id))})]})]})]})]}),n.jsxs(Cr,{className:"h-fit",children:[n.jsxs(Nn,{className:"bg-gradient-to-r from-green-50 to-blue-50 border-b",children:[n.jsxs(Sn,{className:"flex items-center gap-2 text-green-900",children:[n.jsx(Xu,{className:"h-5 w-5"}),"    "]}),n.jsx(fl,{className:"flex items-center gap-4",children:x&&n.jsxs(n.Fragment,{children:[n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(Sl,{className:"h-3 w-3"}),": ",x.toLocaleTimeString("ko-KR")]}),n.jsxs("span",{className:"flex items-center gap-1",children:[" : ",rt()]})]})})]}),n.jsxs(_r,{className:"p-4 space-y-4",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx(It,{htmlFor:"consultation-notes",children:" "}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",id:"auto-save",checked:N,onChange:Pe=>v(Pe.target.checked),className:"rounded"}),n.jsx("label",{htmlFor:"auto-save",className:"text-xs text-gray-500",children:"30 "})]})]}),n.jsx(Oo,{id:"consultation-notes",value:C,onChange:Pe=>A(Pe.target.value),placeholder:" ,  ,    ...",rows:12,className:"font-mono text-sm"}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[C.length,"  / : ",N?"":""]})]}),n.jsx(Ph,{}),n.jsxs("div",{children:[n.jsx(It,{children:"  *"}),n.jsxs(rF,{value:S,onValueChange:Pe=>_(Pe),className:"mt-2",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Wf,{value:"completed",id:"completed"}),n.jsxs(It,{htmlFor:"completed",className:"font-normal flex items-center gap-2",children:[n.jsx(Po,{className:"h-4 w-4 text-green-600"})," "]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Wf,{value:"postponed",id:"postponed"}),n.jsxs(It,{htmlFor:"postponed",className:"font-normal flex items-center gap-2",children:[n.jsx(Gn,{className:"h-4 w-4 text-yellow-600"}),""]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Wf,{value:"refused",id:"refused"}),n.jsxs(It,{htmlFor:"refused",className:"font-normal flex items-center gap-2",children:[n.jsx(km,{className:"h-4 w-4 text-red-600"}),""]})]})]})]}),(S==="postponed"||S==="refused")&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx(It,{htmlFor:"result-reason-code",children:"  *"}),n.jsxs(MA,{value:k,onValueChange:M,children:[n.jsx($A,{id:"result-reason-code",className:"mt-2",children:n.jsx(LA,{placeholder:"  "})}),n.jsx(FA,{children:S==="postponed"?n.jsxs(n.Fragment,{children:[n.jsx(Ln,{value:"P001",children:"P001 -  "}),n.jsx(Ln,{value:"P002",children:"P002 -   "}),n.jsx(Ln,{value:"P003",children:"P003 -   "}),n.jsx(Ln,{value:"P999",children:"P999 - "})]}):n.jsxs(n.Fragment,{children:[n.jsx(Ln,{value:"R001",children:"R001 -   ( )"}),n.jsx(Ln,{value:"R002",children:"R002 -  "}),n.jsx(Ln,{value:"R003",children:"R003 -  "}),n.jsx(Ln,{value:"R004",children:"R004 -  "}),n.jsx(Ln,{value:"R999",children:"R999 - "})]})})]})]}),n.jsxs("div",{children:[n.jsx(It,{htmlFor:"result-reason",children:" "}),n.jsx(Ir,{id:"result-reason",value:O,onChange:Pe=>D(Pe.target.value),placeholder:"  ",className:"mt-2"})]})]}),n.jsx(Ph,{}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a?n.jsxs(Nt,{variant:"outline",onClick:()=>p("referral"),className:"w-full",children:[n.jsx(CC,{className:"h-4 w-4 mr-2"}),"/"]}):n.jsx("div",{className:"w-full rounded-md border border-gray-200 bg-gray-50 px-3 py-2 text-center text-xs text-gray-500",children:"/   "}),n.jsxs(Nt,{variant:"outline",onClick:()=>p("dropout"),className:"w-full",children:[n.jsx(m2,{className:"h-4 w-4 mr-2"})," "]})]}),n.jsx(Ph,{}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Nt,{variant:"outline",onClick:br,className:"flex-1",children:[n.jsx(SO,{className:"h-4 w-4 mr-2"})," "]}),n.jsxs(Nt,{onClick:Er,className:"flex-1",disabled:!S,children:[n.jsx(Po,{className:"h-4 w-4 mr-2"})," "]})]})]})]})]})})}),a&&n.jsx(mb,{value:"referral",className:"h-full m-0 p-6",children:n.jsx("div",{className:"max-w-[1200px] mx-auto",children:n.jsxs(Cr,{children:[n.jsxs(Nn,{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-b",children:[n.jsxs(Sn,{className:"flex items-center gap-2 text-purple-900",children:[n.jsx(Ro,{className:"h-5 w-5"}),"  "]}),n.jsx(fl,{children:"  ,  ,    -      "})]}),n.jsx(_r,{className:"p-6",children:n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(It,{children:"  *"}),n.jsxs(rF,{value:F,onValueChange:Pe=>$(Pe),className:"mt-2 space-y-2",children:[n.jsxs("div",{className:"flex items-center space-x-2 border border-gray-200 rounded-lg p-3 hover:bg-gray-50",children:[n.jsx(Wf,{value:"screening",id:"screening"}),n.jsxs(It,{htmlFor:"screening",className:"font-normal flex items-center gap-2 cursor-pointer flex-1",children:[n.jsx(w0,{className:"h-4 w-4 text-purple-600"}),"  "]})]}),n.jsxs("div",{className:"flex items-center space-x-2 border border-gray-200 rounded-lg p-3 hover:bg-gray-50",children:[n.jsx(Wf,{value:"health_center",id:"health_center"}),n.jsxs(It,{htmlFor:"health_center",className:"font-normal flex items-center gap-2 cursor-pointer flex-1",children:[n.jsx(pm,{className:"h-4 w-4 text-blue-600"})," "]})]}),n.jsxs("div",{className:"flex items-center space-x-2 border border-gray-200 rounded-lg p-3 hover:bg-gray-50",children:[n.jsx(Wf,{value:"medical",id:"medical"}),n.jsxs(It,{htmlFor:"medical",className:"font-normal flex items-center gap-2 cursor-pointer flex-1",children:[n.jsx($X,{className:"h-4 w-4 text-red-600"})," "]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(It,{htmlFor:"appointment-date",children:"  *"}),n.jsx(Ir,{id:"appointment-date",type:"date",value:B,onChange:Pe=>P(Pe.target.value),className:"mt-2",min:new Date().toISOString().split("T")[0]})]}),n.jsxs("div",{children:[n.jsx(It,{htmlFor:"appointment-time",children:"  *"}),n.jsxs(MA,{value:W,onValueChange:K,children:[n.jsx($A,{id:"appointment-time",className:"mt-2",children:n.jsx(LA,{placeholder:" "})}),n.jsxs(FA,{children:[n.jsx(Ln,{value:"09:00",children:" 09:00"}),n.jsx(Ln,{value:"10:00",children:" 10:00"}),n.jsx(Ln,{value:"11:00",children:" 11:00"}),n.jsx(Ln,{value:"14:00",children:" 02:00"}),n.jsx(Ln,{value:"15:00",children:" 03:00"}),n.jsx(Ln,{value:"16:00",children:" 04:00"})]})]})]})]}),n.jsxs("div",{children:[n.jsx(It,{htmlFor:"pre-visit",children:"  "}),n.jsx(Oo,{id:"pre-visit",value:G,onChange:Pe=>U(Pe.target.value),placeholder:":  ,   ,  ",rows:3,className:"mt-2"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(It,{children:"SMS  "}),n.jsx("div",{className:"mt-2 bg-gray-900 text-white p-4 rounded-lg min-h-[200px] font-mono text-sm whitespace-pre-line",children:te||"      SMS "})]}),n.jsxs(gm,{children:[n.jsx(E0,{className:"h-4 w-4"}),n.jsxs(xm,{className:"text-sm",children:[n.jsx("strong",{children:":"})," ",ge.phone,n.jsx("br",{}),"    SMS ,    ."]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Nt,{variant:"outline",onClick:()=>p("consultation"),className:"flex-1",children:" "}),n.jsxs(Nt,{onClick:yr,className:"flex-1",disabled:!F||!B||!W,children:[n.jsx(E0,{className:"h-4 w-4 mr-2"})," "]})]})]})]})})]})})}),n.jsx(mb,{value:"dropout",className:"h-full m-0 p-6",children:n.jsx("div",{className:"max-w-[1200px] mx-auto",children:n.jsxs(Cr,{className:"border-orange-200",children:[n.jsxs(Nn,{className:"bg-gradient-to-r from-orange-50 to-red-50 border-b border-orange-200",children:[n.jsxs(Sn,{className:"flex items-center gap-2 text-orange-900",children:[n.jsx(m2,{className:"h-5 w-5"}),"   "]}),n.jsx(fl,{children:"       -      "})]}),n.jsxs(_r,{className:"p-6",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[n.jsx(Qa,{className:"h-4 w-4 text-orange-600"})," "]}),n.jsxs("div",{children:[n.jsx(It,{htmlFor:"dropout-reason",children:"  *"}),n.jsxs(MA,{value:q,onValueChange:L,children:[n.jsx($A,{id:"dropout-reason",className:"mt-2",children:n.jsx(LA,{placeholder:" "})}),n.jsxs(FA,{children:[n.jsx(Ln,{value:"no_response",children:"D001 -   (3  )"}),n.jsx(Ln,{value:"refused",children:"D002 -   "}),n.jsx(Ln,{value:"family_refused",children:"D003 -  "}),n.jsx(Ln,{value:"relocated",children:"D004 -  / "}),n.jsx(Ln,{value:"deceased",children:"D005 - "}),n.jsx(Ln,{value:"other_service",children:"D006 -   "}),n.jsx(Ln,{value:"other",children:"D999 - "})]})]})]}),n.jsxs("div",{children:[n.jsx(It,{htmlFor:"dropout-details",children:"  *"}),n.jsx(Oo,{id:"dropout-details",value:H,onChange:Pe=>ae(Pe.target.value),placeholder:" ,   ,    ",rows:6,className:"mt-2"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[n.jsx(IR,{className:"h-4 w-4 text-blue-600"})," "]}),n.jsxs("div",{children:[n.jsx(It,{htmlFor:"recontact-date",children:" "}),n.jsx(Ir,{id:"recontact-date",type:"date",value:oe,onChange:Pe=>ve(Pe.target.value),className:"mt-2",min:new Date().toISOString().split("T")[0]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:oe&&" 1    "})]}),n.jsxs("div",{children:[n.jsx(It,{htmlFor:"recontact-plan",children:"   "}),n.jsx(Oo,{id:"recontact-plan",value:ce,onChange:Pe=>Ee(Pe.target.value),placeholder:": 1     ,    ",rows:6,className:"mt-2"})]}),n.jsxs(gm,{className:"border-blue-200 bg-blue-50",children:[n.jsx(IR,{className:"h-4 w-4 text-blue-600"}),n.jsx(xm,{className:"text-sm text-blue-900",children:"       ,   ."})]})]})]}),n.jsx(Ph,{className:"my-6"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Nt,{variant:"outline",onClick:()=>p("consultation"),className:"flex-1",children:" "}),n.jsxs(Nt,{variant:"destructive",onClick:Rr,disabled:!q||!H.trim(),className:"flex-1",children:[n.jsx(km,{className:"h-4 w-4 mr-2"}),"  "]})]})]})]})})}),n.jsx(mb,{value:"history",className:"h-full m-0 p-6",children:n.jsx("div",{className:"max-w-[1200px] mx-auto",children:n.jsxs(Cr,{children:[n.jsxs(Nn,{children:[n.jsxs(Sn,{className:"flex items-center gap-2",children:[n.jsx(Sl,{className:"h-5 w-5"}),"  "]}),n.jsx(fl,{children:"      "})]}),n.jsx(_r,{className:"p-6",children:n.jsx("div",{className:"space-y-4",children:be.map((Pe,Kt)=>n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 border-2 border-blue-600 flex items-center justify-center",children:n.jsx(ro,{className:"h-4 w-4 text-blue-600"})}),Kt<be.length-1&&n.jsx("div",{className:"w-0.5 h-full bg-gray-300 mt-2"})]}),n.jsxs("div",{className:"flex-1 pb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{children:[n.jsxs("h4",{className:"font-semibold text-gray-900",children:[" #",be.length-Kt]}),n.jsxs("p",{className:"text-sm text-gray-500",children:[Pe.date," ",Pe.time,"  ",Pe.counselor,"  ",Pe.duration,""]})]}),n.jsx(Qr,{variant:Pe.result==="completed"?"default":Pe.result==="postponed"?"secondary":"destructive",children:Pe.result==="completed"?"":Pe.result==="postponed"?"":""})]}),n.jsx("p",{className:"text-sm text-gray-700 mb-2",children:Pe.summary}),Pe.actions.length>0&&n.jsx("div",{className:"space-y-1",children:Pe.actions.map((Pr,vr)=>n.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[n.jsx(Po,{className:"h-3 w-3 text-green-600"}),Pr]},vr))})]})]},Pe.id))})})]})})})]})]})})]})}const UA=[{id:"CONTACT_PRIMARY",category:"CONTACT",label:"1  ",hint:"  ",build:({centerName:e,link:t,centerPhone:r})=>`[:${e}]    .      (/)   .      : ${t} / : ${r}`},{id:"CONTACT_GUARDIAN_OPTION",category:"CONTACT",label:"1   ( )",hint:"    ",build:({centerName:e,link:t,centerPhone:r})=>`[:${e}]        ()   .  / : ${t} / : ${r}`},{id:"BOOKING_PRIMARY",category:"BOOKING",label:"1 ",hint:"/  ",build:({centerName:e,bookingLink:t,centerPhone:r})=>`[:${e}]  /  .   . /: ${t} / : ${r}`},{id:"BOOKING_CHANNEL_OPTION",category:"BOOKING",label:"1  (/ )",hint:"   ",build:({centerName:e,bookingLink:t})=>`[:${e}] /      .    . ${t}`},{id:"REMINDER_FIRST",category:"REMINDER",label:"1 ",hint:"/ 1 ",build:({centerName:e,link:t,centerPhone:r})=>`[:${e}]        .    ,    . ${t} / : ${r}`},{id:"REMINDER_FINAL",category:"REMINDER",label:" ",hint:" ",build:({centerName:e,link:t,centerPhone:r})=>`[:${e}]    .     /  . ${t} / : ${r}`}],HA={CONTACT:{label:"1 ",tone:"border-blue-200 bg-blue-50 text-blue-800"},BOOKING:{label:"",tone:"border-emerald-200 bg-emerald-50 text-emerald-800"},REMINDER:{label:"",tone:"border-amber-200 bg-amber-50 text-amber-800"}};function mTe(e){if(!e)return"-";const t=new Date(e);return Number.isNaN(t.getTime())?e:`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")} ${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`}async function pTe(e){const t=["/api/outreach/send-sms","http://localhost:4120/api/outreach/send-sms"];for(const r of t)try{if((await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)return!0}catch{}return!1}function hTe({caseId:e,onBack:t}){const r=g.useMemo(()=>B1(e),[e]),[a,s]=g.useState("CONTACT_PRIMARY"),[i,o]=g.useState("citizen"),[l,d]=g.useState("NOW"),[u,p]=g.useState(""),[m,h]=g.useState(" "),[x,y]=g.useState("02-1234-5678"),[N,v]=g.useState("https://neuro-shield.local/check"),[j,E]=g.useState("https://neuro-shield.local/booking"),[C,A]=g.useState([]),[S,_]=g.useState(!1),O=UA.find(P=>P.id===a)??UA[0],D=O.build({centerName:m,link:N,bookingLink:j,centerPhone:x}),k=g.useMemo(()=>{const P={CONTACT:[],BOOKING:[],REMINDER:[]};for(const W of UA)P[W.category].push(W);return P},[]),M=i==="guardian"?r?.profile.guardianPhone:r?.profile.phone,F=i==="guardian"&&!r?.profile.guardianPhone,$=S||!M||l==="SCHEDULE"&&!u,B=async()=>{if(!M)return;_(!0);const P=new Date().toISOString();let W=l==="NOW"?"SENT":"SCHEDULED";l==="NOW"&&(W=await pTe({case_id:e,template_id:O.id,citizen_phone:M,message:D,channel:"sms",dedupe_key:`${e}-${O.id}-${i}-${Date.now()}`})?"SENT":"FAILED"),A(K=>[{id:`${Date.now()}`,at:l==="SCHEDULE"?new Date(u).toISOString():P,recipient:i,templateLabel:O.label,status:W},...K]),_(!1)};return n.jsxs("div",{className:"h-full flex flex-col bg-gray-50",children:[n.jsx("div",{className:"sticky top-0 z-10 border-b border-gray-200 bg-white px-6 py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("button",{onClick:t,className:"inline-flex items-center gap-1 rounded-md border border-gray-200 px-3 py-1.5 text-xs font-semibold text-gray-700 hover:bg-gray-50",children:[n.jsx(cl,{size:14})," "]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"/ "}),n.jsxs("p",{className:"text-xs text-gray-500",children:["CASE ID: ",e]})]})]}),n.jsx("span",{className:"rounded-full border border-blue-200 bg-blue-50 px-3 py-1 text-[11px] font-semibold text-blue-700",children:"Stage1   "})]})}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[n.jsx("section",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:n.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-4",children:[n.jsxs("div",{className:"rounded-lg border border-gray-100 bg-gray-50 p-3",children:[n.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),n.jsx("p",{className:"mt-1 text-sm font-bold text-gray-900",children:r?.id??e})]}),n.jsxs("div",{className:"rounded-lg border border-gray-100 bg-gray-50 p-3",children:[n.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase",children:""}),n.jsx("p",{className:"mt-1 text-sm font-bold text-gray-900",children:r?dg(r.profile.age):"-"})]}),n.jsxs("div",{className:"rounded-lg border border-gray-100 bg-gray-50 p-3",children:[n.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),n.jsx("p",{className:"mt-1 text-sm font-bold text-gray-900",children:r?yl(r.profile.phone):"-"})]}),n.jsxs("div",{className:"rounded-lg border border-gray-100 bg-gray-50 p-3",children:[n.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),n.jsx("p",{className:"mt-1 text-sm font-bold text-gray-900",children:r?.profile.guardianPhone?yl(r.profile.guardianPhone):""})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 gap-6 xl:grid-cols-12",children:[n.jsxs("section",{className:"xl:col-span-8 space-y-4",children:[n.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[n.jsxs("h3",{className:"text-sm font-bold text-gray-900 flex items-center gap-2",children:[n.jsx(ro,{size:15,className:"text-gray-500"})," "]}),n.jsx("div",{className:"mt-3 space-y-3",children:Object.keys(k).map(P=>n.jsxs("div",{className:"rounded-lg border border-gray-100 bg-gray-50 p-3",children:[n.jsx("p",{className:"mb-2 text-xs font-bold text-gray-700",children:HA[P].label}),n.jsx("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-2",children:k[P].map(W=>n.jsxs("button",{onClick:()=>s(W.id),className:`rounded-lg border px-3 py-2 text-left transition-colors ${a===W.id?"border-blue-300 bg-blue-50":"border-gray-200 bg-white hover:bg-gray-50"}`,children:[n.jsx("p",{className:"text-xs font-semibold text-gray-900",children:W.label}),n.jsx("p",{className:"mt-0.5 text-[11px] text-gray-500",children:W.hint})]},W.id))})]},P))})]}),n.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[n.jsxs("h3",{className:"text-sm font-bold text-gray-900 flex items-center gap-2",children:[n.jsx(E8,{size:15,className:"text-gray-500"})," "]}),n.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3 md:grid-cols-2",children:[n.jsxs("label",{className:"text-xs",children:[n.jsx("span",{className:"text-gray-500",children:""}),n.jsx("input",{value:m,onChange:P=>h(P.target.value),className:"mt-1 w-full rounded-md border border-gray-200 px-2 py-2 text-xs outline-none focus:border-blue-400"})]}),n.jsxs("label",{className:"text-xs",children:[n.jsx("span",{className:"text-gray-500",children:" "}),n.jsx("input",{value:x,onChange:P=>y(P.target.value),className:"mt-1 w-full rounded-md border border-gray-200 px-2 py-2 text-xs outline-none focus:border-blue-400"})]}),n.jsxs("label",{className:"text-xs",children:[n.jsx("span",{className:"text-gray-500",children:" "}),n.jsx("input",{value:N,onChange:P=>v(P.target.value),className:"mt-1 w-full rounded-md border border-gray-200 px-2 py-2 text-xs outline-none focus:border-blue-400"})]}),n.jsxs("label",{className:"text-xs",children:[n.jsx("span",{className:"text-gray-500",children:" "}),n.jsx("input",{value:j,onChange:P=>E(P.target.value),className:"mt-1 w-full rounded-md border border-gray-200 px-2 py-2 text-xs outline-none focus:border-blue-400"})]})]})]}),n.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-sm font-bold text-gray-900",children:" "}),n.jsx("span",{className:`rounded-full border px-2 py-0.5 text-[10px] font-semibold ${HA[O.category].tone}`,children:HA[O.category].label})]}),n.jsx("p",{className:"mt-3 whitespace-pre-wrap rounded-lg border border-gray-100 bg-gray-50 p-3 text-sm leading-relaxed text-gray-800",children:D}),n.jsxs("p",{className:"mt-2 text-[11px] text-gray-500",children:[" : ",D.length,""]})]})]}),n.jsxs("aside",{className:"xl:col-span-4 space-y-4",children:[n.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[n.jsxs("h3",{className:"text-sm font-bold text-gray-900 flex items-center gap-2",children:[n.jsx(E0,{size:15,className:"text-gray-500"})," "]}),n.jsxs("div",{className:"mt-3 space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 rounded-lg border border-gray-200 bg-gray-50 px-3 py-2 text-xs",children:[n.jsx("input",{type:"radio",checked:i==="citizen",onChange:()=>o("citizen")}),n.jsx(kl,{size:12,className:"text-gray-500"})," (",r?yl(r.profile.phone):"-",")"]}),n.jsxs("label",{className:`flex items-center gap-2 rounded-lg border px-3 py-2 text-xs ${F?"border-dashed border-gray-200 bg-gray-50 text-gray-400":"border-gray-200 bg-gray-50"}`,children:[n.jsx("input",{type:"radio",checked:i==="guardian",onChange:()=>o("guardian"),disabled:F}),n.jsx(HQ,{size:12,className:"text-gray-500"})," (",r?.profile.guardianPhone?yl(r.profile.guardianPhone):"",")"]})]}),n.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-1 rounded-lg border border-gray-200 bg-gray-50 p-1 text-[11px] font-semibold",children:[n.jsx("button",{onClick:()=>d("NOW"),className:`rounded-md px-2 py-1 ${l==="NOW"?"bg-white text-gray-900 shadow-sm":"text-gray-500"}`,children:" "}),n.jsx("button",{onClick:()=>d("SCHEDULE"),className:`rounded-md px-2 py-1 ${l==="SCHEDULE"?"bg-white text-gray-900 shadow-sm":"text-gray-500"}`,children:" "})]}),l==="SCHEDULE"?n.jsxs("label",{className:"mt-3 block text-xs text-gray-500",children:[" ",n.jsx("input",{type:"datetime-local",value:u,onChange:P=>p(P.target.value),className:"mt-1 w-full rounded-md border border-gray-200 px-2 py-2 text-xs outline-none focus:border-blue-400"})]}):null,n.jsx("button",{onClick:B,disabled:$,className:"mt-3 inline-flex w-full items-center justify-center gap-2 rounded-md bg-[#163b6f] px-3 py-2 text-xs font-semibold text-white disabled:cursor-not-allowed disabled:bg-gray-300",children:S?" ...":l==="NOW"?" ":" "}),M?null:n.jsx("p",{className:"mt-2 text-[11px] text-red-600",children:"   ."})]}),n.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[n.jsxs("h3",{className:"text-sm font-bold text-gray-900 flex items-center gap-2",children:[n.jsx(ta,{size:15,className:"text-gray-500"})," "]}),n.jsx("div",{className:"mt-3 space-y-2",children:C.length===0?n.jsx("p",{className:"rounded-md border border-gray-100 bg-gray-50 px-3 py-2 text-xs text-gray-500",children:"  ."}):C.map(P=>n.jsxs("div",{className:"rounded-md border border-gray-100 bg-gray-50 px-3 py-2 text-xs",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"font-semibold text-gray-800",children:P.templateLabel}),n.jsx("span",{className:`rounded px-1.5 py-0.5 text-[10px] font-semibold ${P.status==="SENT"?"bg-emerald-100 text-emerald-700":P.status==="SCHEDULED"?"bg-blue-100 text-blue-700":"bg-red-100 text-red-700"}`,children:P.status==="SENT"?"":P.status==="SCHEDULED"?"":""})]}),n.jsxs("p",{className:"mt-1 text-[11px] text-gray-500",children:[P.recipient==="citizen"?"":"","  ",mTe(P.at)]})]},P.id))})]}),n.jsxs("div",{className:"rounded-xl border border-blue-100 bg-blue-50 p-4",children:[n.jsxs("h4",{className:"text-xs font-bold text-blue-900 flex items-center gap-1",children:[n.jsx(gO,{size:13})," "]}),n.jsxs("ul",{className:"mt-2 space-y-1 text-[11px] text-blue-800",children:[n.jsx("li",{children:"1 :      "}),n.jsx("li",{children:": /  "}),n.jsx("li",{children:":  "})]})]})]})]})]})]})}function gTe({userRole:e="counselor",userName:t="",centerName:r="  ",onLogout:a}){const[s,i]=g.useState("main"),[o,l]=g.useState(null),[d,u]=g.useState("Stage 1"),[p,m]=g.useState(null),[h,x]=g.useState("detail"),y=(C,A)=>{l(C),u(A),x("detail"),i("cases")},N=C=>{CK(C),m(C),l(null),x("detail"),i("cases")},v=()=>{l(null),x("detail")},j=()=>{if(o&&s==="cases")return h==="consultation"?n.jsx(fTe,{caseId:o,showReferralTab:!1,onComplete:v,onCancel:()=>x("detail"),onBack:()=>x("detail")}):h==="sms"?n.jsx(hTe,{caseId:o,onBack:()=>x("detail")}):h==="stage-workflow"&&d==="Stage 2"?n.jsx(fz,{caseId:o,onBack:v}):h==="stage-workflow"&&d==="Stage 3"?n.jsx(mz,{caseId:o,onBack:v}):n.jsx(dAe,{caseId:o,stage:d,onBack:v});switch(s){case"main":return n.jsx(u7,{onNavigateToCases:N,onSelectCase:y,centerName:r});case"cases":return n.jsx(dje,{onSelectCase:y,initialFilter:p});case"calendar":return n.jsx(gje,{});case"reports":return n.jsx(xje,{});case"settings":return n.jsx(bje,{});default:return n.jsx(u7,{onNavigateToCases:N,onSelectCase:y,centerName:r})}},E=s==="cases"&&o!==null;return n.jsxs("div",{className:"flex h-screen w-full bg-gray-50 overflow-hidden text-slate-900 font-sans",children:[n.jsx(yje,{activeTab:s,setActiveTab:C=>{C!=="cases"&&rm({stage:"ALL",status:"ALL",keyword:""}),i(C),l(null),m(null),x("detail")},userName:t,centerName:r,userRole:e,onLogout:a}),n.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[!E&&n.jsx(Nje,{activeTab:s}),n.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:j()})]})]})}const xTe=["","","","","",""],bTe={:" ",:" ",:" ",:"  ",:"",:" "};function yTe(e){let t=e;return xTe.forEach(r=>{t=t.split(r).join(bTe[r])}),t}function xt(e){return yTe(e)}const Bq={11:[{code:"11010",label:""},{code:"11020",label:""},{code:"11030",label:""},{code:"11040",label:""}],26:[{code:"26010",label:""},{code:"26020",label:""},{code:"26030",label:""},{code:"26040",label:""}],27:[{code:"27010",label:""},{code:"27020",label:""},{code:"27030",label:""},{code:"27040",label:""}],29:[{code:"29010",label:""},{code:"29020",label:""},{code:"29030",label:""}],31:[{code:"31010",label:""},{code:"31020",label:""},{code:"31030",label:""},{code:"31040",label:""}],41:[{code:"41010",label:""},{code:"41020",label:""},{code:"41030",label:""},{code:"41040",label:""}],44:[{code:"44010",label:""},{code:"44020",label:""},{code:"44030",label:""},{code:"44040",label:""}],46:[{code:"46010",label:""},{code:"46020",label:""},{code:"46030",label:""},{code:"46040",label:""}],47:[{code:"47010",label:""},{code:"47020",label:""},{code:"47030",label:""},{code:"47040",label:""}],48:[{code:"48010",label:""},{code:"48020",label:""},{code:"48030",label:""},{code:"48040",label:""}],50:[{code:"50010",label:""},{code:"50020",label:""}]},vTe={slaBreachRate:.35,notReachedRate:.3,avgWaitTimeNorm:.2,longWaitRate:.15},aF={kpi:.6,volume:.4},Uq=e=>Math.max(0,Math.min(1,e));function NTe(e,t,r,a){if(r<=t)return .5;const s=Uq((e-t)/(r-t));return a==="higherWorse"?s:1-s}function STe(e,t,r){return r<=t?.5:Uq((e-t)/(r-t))}function jTe(e){const t=NTe(e.kpiValue,e.kpiMin,e.kpiMax,e.direction),r=STe(e.volume,e.volumeMin,e.volumeMax);return Number((t*aF.kpi+r*aF.volume).toFixed(3))}const i0={thresholds:{longWaitDays:7,slaNearDays:3},weights:{...vTe},notifications:{slaBreachAlert:!0,slaImminentAlert:!0,longWaitSurge:!1,riskIncrease:!1}};function Hq(e){try{const t=localStorage.getItem(`regional.settings.${e}.thresholds`),r=localStorage.getItem(`regional.settings.${e}.weights`),a=localStorage.getItem(`regional.settings.${e}.notifications`);return{thresholds:t?JSON.parse(t):i0.thresholds,weights:r?JSON.parse(r):i0.weights,notifications:a?JSON.parse(a):i0.notifications}}catch{return{...i0}}}function wTe(e,t){localStorage.setItem(`regional.settings.${e}.thresholds`,JSON.stringify(t.thresholds)),localStorage.setItem(`regional.settings.${e}.weights`,JSON.stringify(t.weights)),localStorage.setItem(`regional.settings.${e}.notifications`,JSON.stringify(t.notifications))}const ETe={regionalSla:"regional_sla_violation",regionalQueueRisk:"regional_queue_risk",regionalRecontact:"regional_recontact_rate",regionalDataReadiness:"regional_data_readiness",regionalGovernance:"regional_governance_missing",regionalAdTransitionHotspot:"regional_ad_transition_hotspot",regionalDxDelayHotspot:"regional_dx_delay_hotspot",regionalScreenToDxRate:"regional_screen_to_dx_rate"},sF={regionalSla:"blue",regionalQueueRisk:"orange",regionalRecontact:"red",regionalDataReadiness:"orange",regionalGovernance:"purple",regionalAdTransitionHotspot:"red",regionalDxDelayHotspot:"orange",regionalScreenToDxRate:"teal"},bd="    ",VT=[{key:"regionalSla",label:" (/24h)",shortLabel:" ",unit:"",direction:"higherWorse",tooltip:"     ",scopeLine:bd,clickAction:"   .",drilldownKind:"inflow",mapMetricLabel:"  ",trendGoal:280,color:"#2563eb",iconBg:"bg-blue-100 text-blue-700"},{key:"regionalQueueRisk",label:" ( )",shortLabel:" ",unit:"",direction:"higherWorse",tooltip:"  /   ",scopeLine:bd,clickAction:"    .",drilldownKind:"queue",mapMetricLabel:"  ",trendGoal:160,color:"#ea580c",iconBg:"bg-orange-100 text-orange-700"},{key:"regionalRecontact",label:"SLA (/)",shortLabel:"SLA ",unit:"%",direction:"higherWorse",tooltip:" /     ",scopeLine:bd,clickAction:"   .",drilldownKind:"sla",mapMetricLabel:" SLA  ",trendGoal:6,color:"#ef4444",iconBg:"bg-red-100 text-red-700"},{key:"regionalDataReadiness",label:" ",shortLabel:"",unit:"%",direction:"higherWorse",tooltip:"     ",scopeLine:bd,clickAction:"   .",drilldownKind:"recontact",mapMetricLabel:"   ",trendGoal:9,color:"#d97706",iconBg:"bg-amber-100 text-amber-700"},{key:"regionalGovernance",label:" ( )",shortLabel:" ",unit:"",direction:"higherWorse",tooltip:"  SLA    ",scopeLine:bd,clickAction:"   .",drilldownKind:"centerRisk",mapMetricLabel:"   ",trendGoal:40,color:"#7c3aed",iconBg:"bg-violet-100 text-violet-700"},{key:"regionalAdTransitionHotspot",label:"AD    ",shortLabel:" ",unit:"",direction:"higherWorse",tooltip:"      ",scopeLine:bd,clickAction:"      .",drilldownKind:"centerRisk",mapMetricLabel:" AD   ",trendGoal:42,color:"#dc2626",iconBg:"bg-rose-100 text-rose-700"},{key:"regionalDxDelayHotspot",label:"  ",shortLabel:" ",unit:"",direction:"higherWorse",tooltip:"       ",scopeLine:bd,clickAction:"      .",drilldownKind:"queue",mapMetricLabel:"   ",trendGoal:24,color:"#f97316",iconBg:"bg-orange-100 text-orange-700"},{key:"regionalScreenToDxRate",label:"  ",shortLabel:"",unit:"%",direction:"higherBetter",tooltip:"      ",scopeLine:bd,clickAction:"      .",drilldownKind:"sla",mapMetricLabel:"  ",trendGoal:68,color:"#0f766e",iconBg:"bg-teal-100 text-teal-700"}],Cm=VT.reduce((e,t)=>(e[t.key]=t,e),{}),ATe="drill",CTe="kpi",_Te="range",TTe="view",yp={REGION:0,SIGUNGU:1,EUPMYEONDONG:2,CUSTOM:3};function OTe(e){return e==="REGION"||e==="SIGUNGU"||e==="EUPMYEONDONG"||e==="CUSTOM"?e:null}function kTe(e){if(!e||typeof e!="object")return null;const t=e,r=OTe(t.l??t.level),a=t.i??t.id;if(!r||typeof a!="string"&&typeof a!="number")return null;const s=String(a),i=t.n??t.label??s,o=typeof i=="string"&&i.trim()?i:s;return{l:r,i:s,n:o}}function J1(e){const t=e.filter(Boolean).map(a=>({l:a.l,i:String(a.i),n:a.n})),r=[];return t.forEach(a=>{const s=yp[a.l];for(;r.length>0;){const i=r[r.length-1];if(yp[i.l]<s)break;r.pop()}r.push(a)}),r}function YT(e){const t=J1(e);return JSON.stringify(t.map(r=>({l:r.l,i:String(r.i),n:r.n})))}function iF(e){try{const t=JSON.parse(e);return Array.isArray(t)?J1(t.map(r=>kTe(r)).filter(r=>!!r)):[]}catch{return[]}}function Gq(e){if(!e)return[];const t=iF(e);if(t.length>0)return t;try{const r=decodeURIComponent(e);if(r!==e)return iF(r)}catch{return[]}return[]}function XT(e){return e.map(t=>({l:t.level,i:String(t.id),n:t.label}))}function oF(e){const t=[];return e.forEach(r=>{const a=yp[r.level];for(;t.length>0;){const s=t[t.length-1];if(yp[s.level]<a)break;t.pop()}t.push({...r,id:String(r.id)})}),t}function Dh(e,t){return{level:e.level,id:String(e.id),label:e.label,filters:{...t},timestamp:Date.now()}}function Kq(e,t){return e==="geomap"||e==="heatmap"?e:t}function zq(e,t){return e==="24h"||e==="7d"||e==="30d"||e==="90d"?e:e==="weekly"?"7d":e==="monthly"?"30d":e==="quarterly"?"90d":t}function GA(e,t,r,a,s){if(typeof window>"u")return[e];const i=new URLSearchParams(window.location.search),o=Gq(i.get(t)),l={kpi:i.get(r)??e.filters.kpi,range:zq(i.get(a)??e.filters.range,e.filters.range),view:Kq(i.get(s),e.filters.view)};if(!o.length)return[{...e,filters:{...l}}];const d={l:e.level,i:String(e.id),n:e.label};return J1([d,...o.filter(p=>!(p.l===d.l&&p.i===d.i))]).map((p,m)=>({level:p.l,id:p.i,label:m===0?e.label:p.n,filters:{...l},timestamp:Date.now()+m}))}function RTe(e,t){return e.kpi===t.kpi&&e.range===t.range&&e.view===t.view&&(e.overlay??"")===(t.overlay??"")}function Vf(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r+=1)if(e[r].level!==t[r].level||String(e[r].id)!==String(t[r].id)||e[r].label!==t[r].label||!RTe(e[r].filters,t[r].filters))return!1;return!0}function QT(e,t){return`${e}|${t.kpi}|${t.range}|${t.view}`}function lF(e){const{stack:t,mode:r,queryKey:a,kpiKey:s,rangeKey:i,viewKey:o,defaultFilters:l,lastAppliedQueryRef:d}=e;if(typeof window>"u"||!t.length)return!1;const u=new URL(window.location.href),p=new URL(window.location.href),m=t[t.length-1],h=YT(XT(t)),y=J1(XT(t)).length<=1,N=m.filters.kpi===l.kpi&&m.filters.range===l.range&&m.filters.view===l.view;if(y?p.searchParams.delete(a):p.searchParams.set(a,h),y&&N?(p.searchParams.delete(o),p.searchParams.delete(s),p.searchParams.delete(i)):(m.filters.view===l.view?p.searchParams.delete(o):p.searchParams.set(o,m.filters.view),m.filters.kpi===l.kpi?p.searchParams.delete(s):p.searchParams.set(s,m.filters.kpi),m.filters.range===l.range?p.searchParams.delete(i):p.searchParams.set(i,m.filters.range)),p.search===u.search)return!1;r==="replace"?window.history.replaceState({},"",p.toString()):window.history.pushState({},"",p.toString());const v=y?"":h;return d.current=QT(v,m.filters),!0}function PTe({root:e,initialFilters:t,queryKey:r=ATe,kpiKey:a=CTe,rangeKey:s=_Te,viewKey:i=TTe}){const o=g.useRef(t),l=g.useRef("");g.useEffect(()=>{o.current=t},[t.kpi,t.overlay,t.range,t.view]);const d=g.useMemo(()=>`${e.level}:${String(e.id)}:${e.label}`,[e.id,e.label,e.level]),u=g.useMemo(()=>Dh(e,t),[t.kpi,t.overlay,t.range,t.view,e.id,e.label,e.level,d]),[p,m]=g.useState(()=>GA(u,r,a,s,i)),h=p[p.length-1]??u,x=p.length>1,y=x;g.useEffect(()=>{l.current=QT(YT(XT(p)),h.filters)},[h.filters.kpi,h.filters.range,h.filters.view,p]);const N=g.useCallback((S,_)=>{const O=S.length?oF(S):[Dh({level:e.level,id:String(e.id),label:e.label},o.current)];return lF({stack:O,mode:_,queryKey:r,kpiKey:a,rangeKey:s,viewKey:i,defaultFilters:o.current,lastAppliedQueryRef:l}),O},[a,r,s,e.id,e.label,e.level,i]);g.useEffect(()=>{const S=Dh(e,o.current),_=GA(S,r,a,s,i);m(O=>Vf(O,_)?O:_),lF({stack:_,mode:"replace",queryKey:r,kpiKey:a,rangeKey:s,viewKey:i,defaultFilters:o.current,lastAppliedQueryRef:l})},[a,r,s,e.id,e.label,e.level,d,i]),g.useEffect(()=>{const S=()=>{const _=new URLSearchParams(window.location.search),O=YT(Gq(_.get(r)));if(QT(O,{kpi:_.get(a)??o.current.kpi,range:zq(_.get(s)??o.current.range,o.current.range),view:Kq(_.get(i),o.current.view)})===l.current)return;const k=Dh(e,o.current),M=GA(k,r,a,s,i);m(F=>Vf(F,M)?F:M)};return window.addEventListener("popstate",S),()=>window.removeEventListener("popstate",S)},[a,r,s,e.id,e.label,e.level,d,i]);const v=g.useCallback((S,_="replace")=>{m(O=>{const D=O.length?O:[u],k=D.map(M=>({...M,filters:{...M.filters,...S}}));return Vf(D,k)?D:N(k,_)})},[N,u]),j=g.useCallback((S,_="push")=>{m(O=>{const D=oF(O.length?O:[u]),k=D[D.length-1],M={...S,id:String(S.id),filters:{...k.filters,...S.filters},timestamp:Date.now()},F=yp[M.level],$=[...D.filter(B=>yp[B.level]<F),M];return Vf(D,$)?D:N($,_)})},[N,u]),E=g.useCallback(()=>{m(S=>{if(S.length<=1)return S;const _=S.slice(0,-1);return N(_,"push")})},[N]),C=g.useCallback(S=>{m(_=>{if(S<0||S>=_.length)return _;const O=_.slice(0,S+1);return Vf(_,O)?_:N(O,"push")})},[N]),A=g.useCallback(()=>{const S=[Dh({level:e.level,id:String(e.id),label:e.label},o.current)];m(_=>Vf(_,S)?_:N(S,"push"))},[N,e.id,e.label,e.level]);return{stack:p,current:h,canBack:y,canGoBack:x,push:j,back:E,jumpTo:C,reset:A,syncFilters:v}}const DTe={nation:"sido",sido:"sigungu",sigungu:"eupmyeondong",center:"case"};function cF(e,t,r){return r?e==="nation"?r.length===2:e==="sido"||e==="sigungu"?t?r.startsWith(t)&&r.length>t.length:!1:!0:!1}function qq({level:e,parentRegionCode:t,candidates:r}){const a=DTe[e],s=new Set,i=[];for(const d of r){const u=String(d.code??"").trim();u&&(s.has(u)||(s.add(u),i.push({code:u,name:String(d.name??"").trim()})))}let o=[];if(e==="nation")o=i.filter(d=>cF(e,t,d.code));else if(t){const d=i.filter(u=>u.code===t?!1:cF(e,t,u.code));d.length>0?o=d:(o=i.filter(u=>u.code!==t),o.length>0&&console.warn("[ChildrenScope] parent-child code prefix mismatch, fallback to candidate children",{level:e,parentRegionCode:t,sampleChildCode:o[0]?.code}))}else o=i;const l=o.reduce((d,u)=>(u.name&&(d[u.code]=u.name),d),{});return{childrenType:a,childrenCodes:o.map(d=>d.code),childrenNameMap:l,children:o}}function dF({height:e=220}){return n.jsx("div",{className:"animate-pulse rounded-lg bg-gray-200",style:{height:e}})}var ITe=Symbol("radix.slottable");function MTe(e){const t=({children:r})=>n.jsx(n.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=ITe,t}var[eN]=ao("Tooltip",[zp]),tN=zp(),Wq="TooltipProvider",LTe=700,ZT="tooltip.open",[$Te,k5]=eN(Wq),Vq=e=>{const{__scopeTooltip:t,delayDuration:r=LTe,skipDelayDuration:a=300,disableHoverableContent:s=!1,children:i}=e,o=g.useRef(!0),l=g.useRef(!1),d=g.useRef(0);return g.useEffect(()=>{const u=d.current;return()=>window.clearTimeout(u)},[]),n.jsx($Te,{scope:t,isOpenDelayedRef:o,delayDuration:r,onOpen:g.useCallback(()=>{window.clearTimeout(d.current),o.current=!1},[]),onClose:g.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>o.current=!0,a)},[a]),isPointerInTransitRef:l,onPointerInTransitChange:g.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:i})};Vq.displayName=Wq;var fg="Tooltip",[FTe,kg]=eN(fg),Yq=e=>{const{__scopeTooltip:t,children:r,open:a,defaultOpen:s,onOpenChange:i,disableHoverableContent:o,delayDuration:l}=e,d=k5(fg,e.__scopeTooltip),u=tN(t),[p,m]=g.useState(null),h=wl(),x=g.useRef(0),y=o??d.disableHoverableContent,N=l??d.delayDuration,v=g.useRef(!1),[j,E]=Cc({prop:a,defaultProp:s??!1,onChange:O=>{O?(d.onOpen(),document.dispatchEvent(new CustomEvent(ZT))):d.onClose(),i?.(O)},caller:fg}),C=g.useMemo(()=>j?v.current?"delayed-open":"instant-open":"closed",[j]),A=g.useCallback(()=>{window.clearTimeout(x.current),x.current=0,v.current=!1,E(!0)},[E]),S=g.useCallback(()=>{window.clearTimeout(x.current),x.current=0,E(!1)},[E]),_=g.useCallback(()=>{window.clearTimeout(x.current),x.current=window.setTimeout(()=>{v.current=!0,E(!0),x.current=0},N)},[N,E]);return g.useEffect(()=>()=>{x.current&&(window.clearTimeout(x.current),x.current=0)},[]),n.jsx(E5,{...u,children:n.jsx(FTe,{scope:t,contentId:h,open:j,stateAttribute:C,trigger:p,onTriggerChange:m,onTriggerEnter:g.useCallback(()=>{d.isOpenDelayedRef.current?_():A()},[d.isOpenDelayedRef,_,A]),onTriggerLeave:g.useCallback(()=>{y?S():(window.clearTimeout(x.current),x.current=0)},[S,y]),onOpen:A,onClose:S,disableHoverableContent:y,children:r})})};Yq.displayName=fg;var JT="TooltipTrigger",Xq=g.forwardRef((e,t)=>{const{__scopeTooltip:r,...a}=e,s=kg(JT,r),i=k5(JT,r),o=tN(r),l=g.useRef(null),d=wr(t,l,s.onTriggerChange),u=g.useRef(!1),p=g.useRef(!1),m=g.useCallback(()=>u.current=!1,[]);return g.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),n.jsx(q1,{asChild:!0,...o,children:n.jsx(sr.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...a,ref:d,onPointerMove:Bt(e.onPointerMove,h=>{h.pointerType!=="touch"&&!p.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),p.current=!0)}),onPointerLeave:Bt(e.onPointerLeave,()=>{s.onTriggerLeave(),p.current=!1}),onPointerDown:Bt(e.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:Bt(e.onFocus,()=>{u.current||s.onOpen()}),onBlur:Bt(e.onBlur,s.onClose),onClick:Bt(e.onClick,s.onClose)})})});Xq.displayName=JT;var R5="TooltipPortal",[BTe,UTe]=eN(R5,{forceMount:void 0}),Qq=e=>{const{__scopeTooltip:t,forceMount:r,children:a,container:s}=e,i=kg(R5,t);return n.jsx(BTe,{scope:t,forceMount:r,children:n.jsx(Is,{present:r||i.open,children:n.jsx(xg,{asChild:!0,container:s,children:a})})})};Qq.displayName=R5;var vp="TooltipContent",Zq=g.forwardRef((e,t)=>{const r=UTe(vp,e.__scopeTooltip),{forceMount:a=r.forceMount,side:s="top",...i}=e,o=kg(vp,e.__scopeTooltip);return n.jsx(Is,{present:a||o.open,children:o.disableHoverableContent?n.jsx(Jq,{side:s,...i,ref:t}):n.jsx(HTe,{side:s,...i,ref:t})})}),HTe=g.forwardRef((e,t)=>{const r=kg(vp,e.__scopeTooltip),a=k5(vp,e.__scopeTooltip),s=g.useRef(null),i=wr(t,s),[o,l]=g.useState(null),{trigger:d,onClose:u}=r,p=s.current,{onPointerInTransitChange:m}=a,h=g.useCallback(()=>{l(null),m(!1)},[m]),x=g.useCallback((y,N)=>{const v=y.currentTarget,j={x:y.clientX,y:y.clientY},E=qTe(j,v.getBoundingClientRect()),C=WTe(j,E),A=VTe(N.getBoundingClientRect()),S=XTe([...C,...A]);l(S),m(!0)},[m]);return g.useEffect(()=>()=>h(),[h]),g.useEffect(()=>{if(d&&p){const y=v=>x(v,p),N=v=>x(v,d);return d.addEventListener("pointerleave",y),p.addEventListener("pointerleave",N),()=>{d.removeEventListener("pointerleave",y),p.removeEventListener("pointerleave",N)}}},[d,p,x,h]),g.useEffect(()=>{if(o){const y=N=>{const v=N.target,j={x:N.clientX,y:N.clientY},E=d?.contains(v)||p?.contains(v),C=!YTe(j,o);E?h():C&&(h(),u())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[d,p,o,u,h]),n.jsx(Jq,{...e,ref:i})}),[GTe,KTe]=eN(fg,{isInside:!1}),zTe=MTe("TooltipContent"),Jq=g.forwardRef((e,t)=>{const{__scopeTooltip:r,children:a,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=e,d=kg(vp,r),u=tN(r),{onClose:p}=d;return g.useEffect(()=>(document.addEventListener(ZT,p),()=>document.removeEventListener(ZT,p)),[p]),g.useEffect(()=>{if(d.trigger){const m=h=>{h.target?.contains(d.trigger)&&p()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[d.trigger,p]),n.jsx(gg,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:m=>m.preventDefault(),onDismiss:p,children:n.jsxs(A5,{"data-state":d.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[n.jsx(zTe,{children:a}),n.jsx(GTe,{scope:r,isInside:!0,children:n.jsx(KCe,{id:d.contentId,role:"tooltip",children:s||a})})]})})});Zq.displayName=vp;var eW="TooltipArrow",tW=g.forwardRef((e,t)=>{const{__scopeTooltip:r,...a}=e,s=tN(r);return KTe(eW,r).isInside?null:n.jsx(C5,{...s,...a,ref:t})});tW.displayName=eW;function qTe(e,t){const r=Math.abs(t.top-e.y),a=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(r,a,s,i)){case i:return"left";case s:return"right";case r:return"top";case a:return"bottom";default:throw new Error("unreachable")}}function WTe(e,t,r=5){const a=[];switch(t){case"top":a.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":a.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":a.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":a.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return a}function VTe(e){const{top:t,right:r,bottom:a,left:s}=e;return[{x:s,y:t},{x:r,y:t},{x:r,y:a},{x:s,y:a}]}function YTe(e,t){const{x:r,y:a}=e;let s=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],d=t[o],u=l.x,p=l.y,m=d.x,h=d.y;p>a!=h>a&&r<(m-u)*(a-p)/(h-p)+u&&(s=!s)}return s}function XTe(e){const t=e.slice();return t.sort((r,a)=>r.x<a.x?-1:r.x>a.x?1:r.y<a.y?-1:r.y>a.y?1:0),QTe(t)}function QTe(e){if(e.length<=1)return e.slice();const t=[];for(let a=0;a<e.length;a++){const s=e[a];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))t.pop();else break}t.push(s)}t.pop();const r=[];for(let a=e.length-1;a>=0;a--){const s=e[a];for(;r.length>=2;){const i=r[r.length-1],o=r[r.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))r.pop();else break}r.push(s)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var P5=Vq,D5=Yq,I5=Xq,M5=Qq,L5=Zq,$5=tW;function ZTe({delayDuration:e=0,...t}){return n.jsx(P5,{"data-slot":"tooltip-provider",delayDuration:e,...t})}function JTe({...e}){return n.jsx(ZTe,{children:n.jsx(D5,{"data-slot":"tooltip",...e})})}function eOe({...e}){return n.jsx(I5,{"data-slot":"tooltip-trigger",...e})}function tOe({className:e,sideOffset:t=0,children:r,...a}){return n.jsx(M5,{children:n.jsxs(L5,{"data-slot":"tooltip-content",sideOffset:t,className:de("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...a,children:[r,n.jsx($5,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}function Ru({help:e,onActionClick:t,actionLabel:r="  "}){return n.jsxs(JTe,{children:[n.jsx(eOe,{asChild:!0,children:n.jsx("button",{type:"button",className:"inline-flex h-4 w-4 items-center justify-center rounded-full border border-gray-300 bg-white text-gray-500 hover:text-gray-700","aria-label":"  ",children:n.jsx(Dm,{className:"h-3 w-3"})})}),n.jsx(tOe,{sideOffset:8,className:"max-w-[300px] rounded-lg border border-gray-200 bg-white px-3 py-2 text-gray-800 shadow-lg",children:n.jsxs("div",{className:"space-y-1.5 text-[11px] leading-relaxed",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:":"})," ",e.definition]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:" :"})," ",e.scope]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:":"})," ",e.period]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:":"})," ",e.threshold]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:":"})," ",e.interpretation]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:" :"})," ",e.nextAction]}),t?n.jsx("button",{type:"button",onClick:t,className:"mt-1 inline-flex h-6 items-center rounded border border-blue-200 bg-blue-50 px-2 text-[10px] font-medium text-blue-700 hover:bg-blue-100",children:r}):null]})})]})}function rOe({label:e,help:t,onActionClick:r,className:a}){return n.jsxs("span",{className:`inline-flex items-center gap-1.5 ${a??""}`,children:[n.jsx("span",{children:e}),n.jsx(Ru,{help:t,onActionClick:r})]})}function nOe(e,t){const r={scope:`${t.scopeLabel}  `,period:`${t.rangeLabel} `};switch(e){case"slaRisk":return{definition:"     ",scope:r.scope,period:r.period,threshold:` ${t.longWaitDays}   `,interpretation:"   ",nextAction:"      ",actionTab:"bottleneck"};case"unprocessedWork":return{definition:"     ",scope:r.scope,period:`${t.rangeLabel} `,threshold:` ${t.longWaitDays}   `,interpretation:"       ",nextAction:"/    ",actionTab:"actions"};case"examDelay":return{definition:"     ",scope:r.scope,period:r.period,threshold:`  ${t.longWaitDays}`,interpretation:"  ",nextAction:"      ",actionTab:"bottleneck"};case"followupDelay":return{definition:"    ",scope:r.scope,period:r.period,threshold:` ${t.longWaitDays}    `,interpretation:"    ",nextAction:"/    ",actionTab:"actions"};case"conversionGap":return{definition:"    (-)",scope:r.scope,period:r.period,threshold:"    ",interpretation:"    ",nextAction:"    ",actionTab:"reports"};case"top5Share":return{definition:" 5    ",scope:r.scope,period:r.period,threshold:"       ",interpretation:"     ",nextAction:"/     ",actionTab:"actions"};case"insightHeadline":default:return{definition:"      ",scope:r.scope,period:r.period,threshold:` ${t.longWaitDays}  `,interpretation:"      ",nextAction:"      ",actionTab:"bottleneck"}}}const dc={unprocessedWork:{user:" ( )",technical:"Queue backlog /    "},workQueue:{user:" ",technical:" Queue"},queuePressure:{user:"  ",technical:"Queue pressure"},deadlineOverdue:{user:"  ",technical:"Long-wait backlog"},sla:{user:" ( )",technical:"SLA (  )"},examDelay:{user:"  ()",technical:"Differential exam delay hotspot"},conversionGap:{user:"   ",technical:"Screening-to-diagnostic conversion gap"},followupDelay:{user:"  ",technical:"Recontact delay"},contactUnsuccessful:{user:" ",technical:"Contact failure"}},aOe=[[/ \( \)/g,dc.unprocessedWork.user],[//g,dc.workQueue.user],[/ /g," "],[/ /g,dc.queuePressure.user],[//g,dc.deadlineOverdue.user],[/\( \)/g,dc.examDelay.user],[/\(\)/g,dc.conversionGap.user],[/ /g,dc.followupDelay.user],[/ /g,dc.contactUnsuccessful.user]];function KA(e){return dc[e]}function zA(e){return aOe.reduce((t,[r,a])=>t.replace(r,a),e)}const sOe=[{causeKey:"staff_shortage",ownerOrg:"center",actionable:!0,regionalNeed:"high",escalationPath:[{toOrgRole:"centerLead",channel:"internal",slaHours:12},{toOrgRole:"regionalDutyOfficer",channel:"email",slaHours:24}],defaultActions:[{title:"   ",steps:[" 2    ","48  "],expectedEffectTags:["SLA "," "]}]},{causeKey:"contact_failure",ownerOrg:"center",actionable:!0,regionalNeed:"high",escalationPath:[{toOrgRole:"centerLead",channel:"internal",slaHours:12},{toOrgRole:"regionalCallOps",channel:"sms",slaHours:24}],defaultActions:[{title:"  ",steps:["  ","   "],expectedEffectTags:["SLA "," "]}]},{causeKey:"hospital_slot_delay",ownerOrg:"hospital",actionable:!1,regionalNeed:"high",escalationPath:[{toOrgRole:"hospitalLead",channel:"email",slaHours:12},{toOrgRole:"regionalPartnershipManager",channel:"internal",slaHours:24}],defaultActions:[{title:"   ",steps:["    ","   "],expectedEffectTags:["  ","SLA "]}]},{causeKey:"data_gap",ownerOrg:"system",actionable:!0,regionalNeed:"medium",escalationPath:[{toOrgRole:"systemOps",channel:"internal",slaHours:24},{toOrgRole:"regionalDataSteward",channel:"email",slaHours:48}],defaultActions:[{title:"   ",steps:["  ","   "],expectedEffectTags:[" "]}]},{causeKey:"external_dependency",ownerOrg:"external",actionable:!1,regionalNeed:"medium",escalationPath:[{toOrgRole:"externalPartner",channel:"email",slaHours:24},{toOrgRole:"regionalDutyOfficer",channel:"internal",slaHours:48}],defaultActions:[{title:"    ",steps:["    ","   "],expectedEffectTags:[" "]}]}],iOe=[{kpiKey:"regionalSla",thresholds:{watch:12,critical:18},trendRules:[{type:"increasing_streak",metric:"ratio",days:3,deltaMin:1.5},{type:"no_decrease",metric:"ratio",days:5}]},{kpiKey:"regionalDxDelayHotspot",thresholds:{watch:30,critical:45},trendRules:[{type:"increasing_streak",metric:"count",days:3,deltaMin:5},{type:"rebound",metric:"count",days:4}]},{kpiKey:"regionalQueueRisk",thresholds:{watch:180,critical:260},trendRules:[{type:"increasing_streak",metric:"count",days:3,deltaMin:20},{type:"no_decrease",metric:"count",days:5}]},{kpiKey:"regionalRecontact",thresholds:{watch:14,critical:20},trendRules:[{type:"increasing_streak",metric:"ratio",days:4,deltaMin:1.2},{type:"rebound",metric:"ratio",days:4}]}],uF=[{regionKey:"seoul",ownerOrg:"center",assigneeId:"center-lead-seoul",assigneeRole:" ",defaultDueSlaHours:48},{regionKey:"seoul",ownerOrg:"hospital",assigneeId:"hospital-partner-seoul",assigneeRole:"  ",defaultDueSlaHours:72},{regionKey:"seoul",ownerOrg:"system",assigneeId:"system-ops-core",assigneeRole:" ",defaultDueSlaHours:72},{regionKey:"seoul",ownerOrg:"external",assigneeId:"external-link-manager",assigneeRole:"  ",defaultDueSlaHours:96}];function F5(e){return sOe.find(t=>t.causeKey===e)}function B5(e){const t=uF.find(r=>r.regionKey===e.regionKey&&r.ownerOrg===e.ownerOrg&&(r.areaKey==null||r.areaKey===e.areaKey)&&(r.causeKey==null||r.causeKey===e.causeKey))??uF.find(r=>r.regionKey===e.regionKey&&r.ownerOrg===e.ownerOrg);return t||{regionKey:e.regionKey,ownerOrg:e.ownerOrg,assigneeId:"regional-duty-officer",assigneeRole:"  ",defaultDueSlaHours:72}}function oOe(e){return iOe.find(t=>t.kpiKey===e)}function fF(e){return`${e.kpiKey}|${e.areaLabel}|${e.causeKey}|${e.stageKey}|${e.period}`}function lOe(e,t="open"){const r=e.selectedRegionSgg??`${e.regionLabel} `;return[{id:"todo-sla-risk",title:"SLA    ",reason:`   ${e.alertSummary.slaAtRiskRegions}  `,target:`${r}   `,recommendedAction:" 2    ",dueSlaHours:24,status:t,relatedQueryState:{regionKey:e.regionKey,period:e.selectedRange,kpiKey:"regionalSla",areaKey:e.selectedRegionSgg,layer:"RISK"}},{id:"todo-dx-delay",title:"    ",reason:`  ${Math.round(e.avgExamDelayDays)},  ${e.longWaitDays} `,target:`${r}   `,recommendedAction:"       ",dueSlaHours:24,status:t,relatedQueryState:{regionKey:e.regionKey,period:e.selectedRange,kpiKey:"regionalDxDelayHotspot",areaKey:e.selectedRegionSgg,layer:"BOTTLENECK"}},{id:"todo-followup",title:"   ",reason:`   ${e.overdueFollowups.toLocaleString()}`,target:`${r}    `,recommendedAction:"     ",dueSlaHours:48,status:t,relatedQueryState:{regionKey:e.regionKey,period:e.selectedRange,kpiKey:"regionalRecontact",areaKey:e.selectedRegionSgg,layer:"BOTTLENECK"}}]}function cOe(e){const t=e.selectedRegionSgg?[e.selectedRegionSgg]:e.districtOptions.slice(0,Math.min(4,Math.max(1,e.districtOptions.length))),r=[{kpiKey:"regionalSla",stageKey:"Stage1",causeKey:"staff_shortage",ruleId:"RULE-SLA-15",ruleLabel:"SLA  15% "},{kpiKey:"regionalDxDelayHotspot",stageKey:"Stage2",causeKey:"hospital_slot_delay",ruleId:"RULE-DX-7D",ruleLabel:"  7 "},{kpiKey:"regionalAdTransitionHotspot",stageKey:"Stage3",causeKey:"contact_failure",ruleId:"RULE-AD-HR-5",ruleLabel:"AD    5 "}],a=new Set(e.existingOpenInterventions.filter(i=>i.status==="TODO"||i.status==="IN_PROGRESS").map(i=>fF({kpiKey:i.kpiKey,areaLabel:i.areaLabel,causeKey:i.causeKey,stageKey:i.stageKey,period:i.period}))),s=[];return t.forEach((i,o)=>{r.forEach((l,d)=>{const u=F5(l.causeKey),p=B5({regionKey:e.regionKey,areaKey:i,causeKey:l.causeKey,ownerOrg:u?.ownerOrg??"regional"}),m=oOe(l.kpiKey),h=fF({kpiKey:l.kpiKey,areaLabel:i,causeKey:l.causeKey,stageKey:l.stageKey,period:e.selectedRange}),x=a.has(h);s.push({previewId:`preview-${o}-${d}`,dedupeKey:h,regionLabel:i,kpiKey:l.kpiKey,stageKey:l.stageKey,causeKey:l.causeKey,ownerOrg:u?.ownerOrg??"regional",assigneeId:p.assigneeId,assigneeRole:p.assigneeRole,dueSlaHours:m?.thresholds.critical?Math.max(24,Math.round(p.defaultDueSlaHours)):p.defaultDueSlaHours,blockedByDuplicate:x,blockedReason:x?" open  ":void 0,ruleId:l.ruleId,ruleLabel:l.ruleLabel})})}),s}const dOe={regionalSla:"LOAD",regionalQueueRisk:"BOTTLENECK",regionalRecontact:"BOTTLENECK",regionalDataReadiness:"LOAD",regionalGovernance:"LOAD",regionalAdTransitionHotspot:"RISK",regionalDxDelayHotspot:"BOTTLENECK",regionalScreenToDxRate:"GAP"},pb={RISK:"regionalAdTransitionHotspot",BOTTLENECK:"regionalDxDelayHotspot",GAP:"regionalScreenToDxRate",LOAD:"regionalQueueRisk"},uOe={regionalSla:" ( )",regionalQueueRisk:" ( )",regionalRecontact:"  ",regionalDataReadiness:"  ",regionalGovernance:" ",regionalAdTransitionHotspot:"  ",regionalDxDelayHotspot:"  ()",regionalScreenToDxRate:"   "},fOe={regionalSla:"slaRisk",regionalQueueRisk:"unprocessedWork",regionalRecontact:"followupDelay",regionalDataReadiness:"unprocessedWork",regionalGovernance:"unprocessedWork",regionalAdTransitionHotspot:"slaRisk",regionalDxDelayHotspot:"examDelay",regionalScreenToDxRate:"conversionGap"};function mOe(){const e=g.useRef(null),[t,r]=g.useState({width:typeof window<"u"?window.innerWidth:1920,height:typeof window<"u"?window.innerHeight:1080}),a=g.useRef(null);return g.useEffect(()=>{const s=e.current;if(!s)return;const i=()=>{a.current&&cancelAnimationFrame(a.current),a.current=requestAnimationFrame(()=>{const l=s.getBoundingClientRect();r(d=>d.width===l.width&&d.height===l.height?d:{width:l.width,height:l.height})})},o=new ResizeObserver(i);return o.observe(s),window.addEventListener("resize",i,{passive:!0}),i(),()=>{o.disconnect(),window.removeEventListener("resize",i),a.current&&cancelAnimationFrame(a.current)}},[]),[e,t]}const pOe=e=>{let t=0;for(let r=0;r<e.length;r+=1)t=t*31+e.charCodeAt(r)>>>0;return t},Ot=(e,t,r)=>t+(r-t)*(pOe(e)%1e3/1e3),eO={week:1,month:1.1,quarter:1.25},hOe={"24h":"week","7d":"week","30d":"month","90d":"quarter"},Yf={"24h":"24h","7d":"7","30d":"30","90d":"90"},rW={"24h":.35,"7d":1,"30d":2.8,"90d":6.8},nW={"24h":.85,"7d":1,"30d":1.25,"90d":1.45},aW={"24h":-.4,"7d":0,"30d":.5,"90d":.8},Wr={regionalSla:[35,260],regionalQueueRisk:[40,320],regionalRecontact:[3,21],regionalDataReadiness:[4,24],regionalGovernance:[22,78],regionalAdTransitionHotspot:[18,92],regionalDxDelayHotspot:[8,68],regionalScreenToDxRate:[34,91]},gOe={regionalSla:n.jsx(Qa,{className:"h-4 w-4"}),regionalQueueRisk:n.jsx(_m,{className:"h-4 w-4"}),regionalRecontact:n.jsx(Ps,{className:"h-4 w-4"}),regionalDataReadiness:n.jsx(Ic,{className:"h-4 w-4"}),regionalGovernance:n.jsx(Do,{className:"h-4 w-4"}),regionalAdTransitionHotspot:n.jsx(w0,{className:"h-4 w-4"}),regionalDxDelayHotspot:n.jsx(Bv,{className:"h-4 w-4"}),regionalScreenToDxRate:n.jsx(k8,{className:"h-4 w-4"})},qA={density:.45,transition:.35,delta:.2},WA={wait:.45,delayed:.3,backlog:.25},VA={gapRate:.45,deltaGap:.35,support:.2},mF={seoul:["","","","","","","","","","","","","","","","","","","","","","","","",""],busan:["","","","","","","","","","","","","","","",""],daegu:["","","","","","","",""],incheon:["","","","","","","","","",""],gwangju:["","","","",""],daejeon:["","","","",""],ulsan:["","","","",""],sejong:[""],gyeonggi:["","","","","","","","","","","","","","","","","","","",""],gangwon:["","","","","","","","","",""],chungbuk:["","","","","","","","","",""],chungnam:["","","","","","","","","",""],jeonbuk:["","","","","","","","","",""],jeonnam:["","","","","","","","","",""],gyeongbuk:["","","","","","","","","",""],gyeongnam:["","","","","","","","","",""],jeju:["",""]},xOe=["08-10","10-12","12-14","14-16","16-18","18-20"];function al(e){return String(e??"").trim().replace(/\s+/g,"").replace(/[()]/g,"")}function Ih(e){return e==="REGION"?"SIGUNGU":"EUPMYEONDONG"}function hb(e,t){const r=Cm[e];return r.unit===""?`${Math.round(t).toLocaleString()}`:r.unit===""?`${Math.round(t)}`:r.unit===""?`${Math.round(t)}`:`${t.toFixed(1)}%`}function qi(e){const t=new Map;return e.forEach(r=>{r.forEach(a=>{t.set(a.name,(t.get(a.name)??0)+a.value)})}),[...t.entries()].map(([r,a])=>({name:r,value:Number(a.toFixed(1))})).sort((r,a)=>a.value-r.value)}function lc(e,t,r){if(!Number.isFinite(e)||!Number.isFinite(t)||!Number.isFinite(r)||r<=t)return .5;const a=(e-t)/(r-t);return Math.max(0,Math.min(1,a))}function am(e,t,r,a,s){const i=`${t}-${r}-${e}`,o=eO[r],l=rW[a]*o,d=nW[a]*o,u=aW[a],p=Math.round(Ot(`${i}-volume`,120,1100)*l),m=Math.round(Ot(`${i}-inflow`,Wr.regionalSla[0],Wr.regionalSla[1])*l),h=Math.round(Ot(`${i}-queue`,Wr.regionalQueueRisk[0],Wr.regionalQueueRisk[1])*d),x=Number(Math.max(Wr.regionalRecontact[0],Math.min(Wr.regionalRecontact[1],Ot(`${i}-sla-risk`,Wr.regionalRecontact[0],Wr.regionalRecontact[1])+u)).toFixed(1)),y=Number(Math.max(Wr.regionalDataReadiness[0],Math.min(Wr.regionalDataReadiness[1],Ot(`${i}-recontact-need`,Wr.regionalDataReadiness[0],Wr.regionalDataReadiness[1])+u)).toFixed(1)),N=Number(Math.max(Wr.regionalGovernance[0],Math.min(Wr.regionalGovernance[1],Ot(`${i}-center-risk`,Wr.regionalGovernance[0],Wr.regionalGovernance[1])+u*4)).toFixed(1)),v=Number(Math.max(Wr.regionalAdTransitionHotspot[0],Math.min(Wr.regionalAdTransitionHotspot[1],Ot(`${i}-ad-density`,Wr.regionalAdTransitionHotspot[0],Wr.regionalAdTransitionHotspot[1])+u*3)).toFixed(1)),j=Math.round(Ot(`${i}-ad-highrisk`,28,240)*l),E=Math.round(Ot(`${i}-ad-tr30`,8,88)*l),C=Math.round(Ot(`${i}-ad-tr90`,22,210)*l),A=Number(Math.max(Wr.regionalDxDelayHotspot[0],Math.min(Wr.regionalDxDelayHotspot[1],Ot(`${i}-dx-wait`,Wr.regionalDxDelayHotspot[0],Wr.regionalDxDelayHotspot[1])+u*2.5)).toFixed(1)),S=Number(Math.max(.04,Math.min(.42,Ot(`${i}-dx-delayed-ratio`,.08,.36)+u*.01)).toFixed(3)),_=Math.round(Ot(`${i}-dx-backlog`,20,210)*d),O=Number(Math.max(Wr.regionalScreenToDxRate[0],Math.min(Wr.regionalScreenToDxRate[1],Ot(`${i}-screen-dx-rate`,Wr.regionalScreenToDxRate[0],Wr.regionalScreenToDxRate[1])-u)).toFixed(1)),D=Number(Ot(`${i}-screen-dx-recontact`,6,24).toFixed(1)),k=Number(Ot(`${i}-screen-dx-delay`,8,46).toFixed(1)),M={:Ot(`${i}-sla-contact`,12,34),:Ot(`${i}-sla-recontact`,10,26),L2:Ot(`${i}-sla-l2`,8,20),"2":Ot(`${i}-sla-s2`,10,24),"3":Ot(`${i}-sla-s3`,8,20)},F=Object.values(M).reduce((ve,ce)=>ve+ce,0),$=Object.entries(M).map(([ve,ce])=>({name:ve,value:Number((ce/F*100).toFixed(1))})),B=[{name:" ",value:Math.round(Ot(`${i}-qt-recontact`,18,165)*d)},{name:"L2 ",value:Math.round(Ot(`${i}-qt-l2`,14,132)*d)},{name:"2 ",value:Math.round(Ot(`${i}-qt-s2`,10,120)*d)},{name:"3 ",value:Math.round(Ot(`${i}-qt-s3`,8,95)*d)}],P=[{name:" ",value:Math.round(Ot(`${i}-cause-contact`,10,65)*d)},{name:"  ",value:Math.round(Ot(`${i}-cause-staff`,8,52)*d)},{name:" ",value:Math.round(Ot(`${i}-cause-data`,6,44)*d)},{name:"2/3 ",value:Math.round(Ot(`${i}-cause-stage`,7,48)*d)},{name:" ",value:Math.round(Ot(`${i}-cause-booking`,5,36)*d)}].sort((ve,ce)=>ce.value-ve.value),W=[{name:" ",value:Math.round(Ot(`${i}-rr-contact`,12,58)*d)},{name:"",value:Math.round(Ot(`${i}-rr-noanswer`,18,82)*d)},{name:" ",value:Math.round(Ot(`${i}-rr-time`,10,52)*d)}].sort((ve,ce)=>ce.value-ve.value),K=["D-6","D-5","D-4","D-3","D-2","D-1","D0"].map((ve,ce)=>({day:ve,value:Number(Ot(`${i}-rt-${ce}`,6,40).toFixed(1))})),G=xOe.map((ve,ce)=>({slot:ve,successRate:Number(Ot(`${i}-slot-rate-${ce}`,42,88).toFixed(1)),attempts:Math.round(Ot(`${i}-slot-attempt-${ce}`,18,120)*d)})),U=[{name:" ",value:Math.round(Ot(`${i}-mf-phone`,10,64)*d)},{name:" ",value:Math.round(Ot(`${i}-mf-guardian`,8,44)*d)},{name:" ",value:Math.round(Ot(`${i}-mf-condition`,7,40)*d)},{name:"  ",value:Math.round(Ot(`${i}-mf-history`,6,36)*d)}].sort((ve,ce)=>ce.value-ve.value),te=[{name:"0-1",value:Math.round(Ot(`${i}-lead-0`,22,96)*d)},{name:"2-3",value:Math.round(Ot(`${i}-lead-1`,16,76)*d)},{name:"4-7",value:Math.round(Ot(`${i}-lead-2`,10,58)*d)},{name:"8+",value:Math.round(Ot(`${i}-lead-3`,6,42)*d)}],re=[{name:" ",value:Math.round(Ot(`${i}-gov-owner`,5,32)*d)},{name:"  ",value:Math.round(Ot(`${i}-gov-proof`,6,36)*d)},{name:"  ",value:Math.round(Ot(`${i}-gov-log`,7,40)*d)}].sort((ve,ce)=>ce.value-ve.value),q=[{status:"",value:Math.round(Ot(`${i}-gact-open`,8,48)*d)},{status:"",value:Math.round(Ot(`${i}-gact-progress`,6,36)*d)},{status:"",value:Math.round(Ot(`${i}-gact-done`,4,30)*d)}],L=[{name:" ",value:j},{name:" 30  ",value:E},{name:"   ",value:Number((v-45).toFixed(1))}],H=[{name:" ",value:A},{name:" ",value:Number((S*100).toFixed(1))},{name:" ",value:_}],ae=[{name:" ",value:Number((100-O).toFixed(1))},{name:" ",value:D},{name:" ",value:k}],oe={stage1SignalDelta:Number(Ot(`${i}-s1-signal`,-18,24).toFixed(1)),stage1QueueDelta:Math.round(Ot(`${i}-s1-queue`,-14,36)*d),stage2SignalDelta:Number(Ot(`${i}-s2-signal`,-16,22).toFixed(1)),stage2QueueDelta:Math.round(Ot(`${i}-s2-queue`,-12,32)*d),stage3SignalDelta:Number(Ot(`${i}-s3-signal`,-12,18).toFixed(1)),stage3QueueDelta:Math.round(Ot(`${i}-s3-queue`,-10,26)*d)};return{regionId:s??e,name:e,volume:p,kpi:{regionalSla:m,regionalQueueRisk:h,regionalRecontact:x,regionalDataReadiness:y,regionalGovernance:N,regionalAdTransitionHotspot:v,regionalDxDelayHotspot:A,regionalScreenToDxRate:O},mapMetric:{regionalSla:m,regionalQueueRisk:h,regionalRecontact:x,regionalDataReadiness:y,regionalGovernance:N,regionalAdTransitionHotspot:v,regionalDxDelayHotspot:A,regionalScreenToDxRate:O},adTransitionSignal:{regionId:`${t}-${e}`,regionName:e,highRiskCount:j,transition30d:E,transition90d:C,densityScore:v,deltaFromAvg:Number((v-45).toFixed(1))},differentialDelay:{regionId:`${t}-${e}`,regionName:e,avgWaitDays:A,delayedRatio:S,backlogCount:_,deltaFromAvg:Number((A-24).toFixed(1))},stageConversionRate:{regionId:`${t}-${e}`,regionName:e,conversionRate:Number((O/100).toFixed(3)),deltaFromRegional:Number((O-64).toFixed(1))},adTransitionDrivers:L,dxDelayDrivers:H,screenToDxDrivers:ae,policyImpactLocal:Number(Ot(`${i}-policy-impact`,42,88).toFixed(1)),slaStageContribution:$,queueTypeBacklog:B,queueCauseTop:P,recontactReasons:W,recontactTrend:K,recontactSlots:G,missingFields:U,collectionLeadtime:te,governanceMissingTypes:re,governanceActionStatus:q,stageImpact:oe}}function bOe(e){if(!e.length)return am("","empty","week","7d","empty");const t=e.reduce((x,y)=>x+y.volume,0),r=x=>t>0?x.volume/t:1/e.length,a=x=>Number(e.reduce((y,N)=>y+N.kpi[x]*r(N),0).toFixed(1)),s=x=>Number(e.reduce((y,N)=>y+N.mapMetric[x]*r(N),0).toFixed(1)),i=new Map;e.forEach(x=>{x.recontactSlots.forEach(y=>{const N=i.get(y.slot)??{attempts:0,weightedSuccess:0};i.set(y.slot,{attempts:N.attempts+y.attempts,weightedSuccess:N.weightedSuccess+y.successRate*y.attempts})})});const o=[...i.entries()].map(([x,y])=>({slot:x,attempts:y.attempts,successRate:y.attempts>0?Number((y.weightedSuccess/y.attempts).toFixed(1)):0})),l=e[0].recontactTrend.length,d=Array.from({length:l},(x,y)=>{const N=e[0].recontactTrend[y].day,v=Number(e.reduce((j,E)=>j+E.recontactTrend[y].value*r(E),0).toFixed(1));return{day:N,value:v}}),u={stage1SignalDelta:Number(e.reduce((x,y)=>x+y.stageImpact.stage1SignalDelta*r(y),0).toFixed(1)),stage1QueueDelta:Math.round(e.reduce((x,y)=>x+y.stageImpact.stage1QueueDelta*r(y),0)),stage2SignalDelta:Number(e.reduce((x,y)=>x+y.stageImpact.stage2SignalDelta*r(y),0).toFixed(1)),stage2QueueDelta:Math.round(e.reduce((x,y)=>x+y.stageImpact.stage2QueueDelta*r(y),0)),stage3SignalDelta:Number(e.reduce((x,y)=>x+y.stageImpact.stage3SignalDelta*r(y),0).toFixed(1)),stage3QueueDelta:Math.round(e.reduce((x,y)=>x+y.stageImpact.stage3QueueDelta*r(y),0))},p=Number(e.reduce((x,y)=>x+y.adTransitionSignal.densityScore*r(y),0).toFixed(1)),m=Number(e.reduce((x,y)=>x+y.differentialDelay.avgWaitDays*r(y),0).toFixed(1)),h=Number(e.reduce((x,y)=>x+y.stageConversionRate.conversionRate*r(y),0).toFixed(3));return{regionId:"regional-avg",name:" ",volume:t,kpi:{regionalSla:a("regionalSla"),regionalQueueRisk:a("regionalQueueRisk"),regionalRecontact:a("regionalRecontact"),regionalDataReadiness:a("regionalDataReadiness"),regionalGovernance:a("regionalGovernance"),regionalAdTransitionHotspot:a("regionalAdTransitionHotspot"),regionalDxDelayHotspot:a("regionalDxDelayHotspot"),regionalScreenToDxRate:a("regionalScreenToDxRate")},mapMetric:{regionalSla:s("regionalSla"),regionalQueueRisk:s("regionalQueueRisk"),regionalRecontact:s("regionalRecontact"),regionalDataReadiness:s("regionalDataReadiness"),regionalGovernance:s("regionalGovernance"),regionalAdTransitionHotspot:s("regionalAdTransitionHotspot"),regionalDxDelayHotspot:s("regionalDxDelayHotspot"),regionalScreenToDxRate:s("regionalScreenToDxRate")},adTransitionSignal:{regionId:"regional-avg",regionName:" ",highRiskCount:Math.round(e.reduce((x,y)=>x+y.adTransitionSignal.highRiskCount,0)),transition30d:Math.round(e.reduce((x,y)=>x+y.adTransitionSignal.transition30d,0)),transition90d:Math.round(e.reduce((x,y)=>x+(y.adTransitionSignal.transition90d??0),0)),densityScore:p,deltaFromAvg:0},differentialDelay:{regionId:"regional-avg",regionName:" ",avgWaitDays:m,delayedRatio:Number(e.reduce((x,y)=>x+y.differentialDelay.delayedRatio*r(y),0).toFixed(3)),backlogCount:Math.round(e.reduce((x,y)=>x+y.differentialDelay.backlogCount,0)),deltaFromAvg:0},stageConversionRate:{regionId:"regional-avg",regionName:" ",conversionRate:h,bestRate:Number(Math.max(...e.map(x=>x.stageConversionRate.conversionRate)).toFixed(3)),worstRate:Number(Math.min(...e.map(x=>x.stageConversionRate.conversionRate)).toFixed(3)),deltaFromRegional:0},adTransitionDrivers:qi(e.map(x=>x.adTransitionDrivers)),dxDelayDrivers:qi(e.map(x=>x.dxDelayDrivers)),screenToDxDrivers:qi(e.map(x=>x.screenToDxDrivers)),policyImpactLocal:Number(e.reduce((x,y)=>x+y.policyImpactLocal*r(y),0).toFixed(1)),slaStageContribution:qi(e.map(x=>x.slaStageContribution)),queueTypeBacklog:qi(e.map(x=>x.queueTypeBacklog)),queueCauseTop:qi(e.map(x=>x.queueCauseTop)),recontactReasons:qi(e.map(x=>x.recontactReasons)),recontactTrend:d,recontactSlots:o,missingFields:qi(e.map(x=>x.missingFields)),collectionLeadtime:qi(e.map(x=>x.collectionLeadtime)),governanceMissingTypes:qi(e.map(x=>x.governanceMissingTypes)),governanceActionStatus:qi(e.map(x=>x.governanceActionStatus.map(y=>({name:y.status,value:y.value})))).map(x=>({status:x.name,value:x.value})),stageImpact:u}}function tO(e){return Cm[e]?.direction??"higherWorse"}function yOe(e){return e==="REGION"?"sido":e==="SIGUNGU"?"sigungu":"center"}function YA(e,t){const r=Cm[e];return r?.unit===""?`${t>0?"+":""}${Math.round(t)}`:r?.unit===""?`${t>0?"+":""}${Math.round(t)}`:r?.unit===""?`${t>0?"+":""}${Math.round(t)}`:`${t>0?"+":""}${t.toFixed(1)}%p`}function vOe(e,t){return t===""?`${Math.round(e).toLocaleString()}`:t===""?`${Math.round(e)}`:`${Math.round(e).toLocaleString()}`}function NOe(e,t){const r=e>0?"+":"";return t===""?`${r}${Math.round(e)}`:t===""?`${r}${Math.round(e)}`:`${r}${Math.round(e)}`}function SOe(e,t,r){if(!e.length)return[];const a=Math.min(...e),s=Math.max(...e),i=Math.max(1,e.length-1);return e.map((o,l)=>{const d=l/i*t,u=s===a?.5:(o-a)/(s-a),p=r-u*(r-6)-3;return{x:d,y:p}})}function jOe(e,t,r){if(!r)return"normal";const s=tO(e)==="higherBetter"?r-t:t-r;return s>=8?"warning":s>=3?"attention":"normal"}function wOe(e,t,r,a){return[`${e}: ${t}`,` : ${r}`,a]}function EOe({region:e,selectedKpiKey:t,selectedRegionSgg:r,selectedRange:a,onSelectedKpiKeyChange:s,onSelectedRegionSggChange:i,onSelectedRangeChange:o,onCreateIntervention:l,onNavigateModule:d}){const[u,p]=g.useState("week"),[m,h]=g.useState("7d"),[x,y]=g.useState("regionalSla"),[N,v]=g.useState("geomap"),[j,E]=mOe(),[C,A]=g.useState(null),[S,_]=g.useState(null),[O,D]=g.useState(void 0),[k,M]=g.useState(void 0),[F,$]=g.useState({}),[B,P]=g.useState(!1),[W,K]=g.useState(!1),[G,U]=g.useState(null),[te,re]=g.useState(!1),[q,L]=g.useState("STAFFING"),[H,ae]=g.useState(!1),[oe,ve]=g.useState({}),[ce,Ee]=g.useState("Initial"),xe=g.useRef(""),Te=g.useRef(null),ye=g.useRef(""),se=g.useRef(void 0),ct=g.useRef(r),Q=g.useRef(i),he=g.useRef({}),$e=ce==="RegionChange";g.useEffect(()=>{ct.current=r,Q.current=i},[i,r]);const Z=g.useMemo(()=>Hq(e.id),[e.id]),je=a??u,ge=je==="month"?"30d":je==="quarter"?"90d":m,be=t??x,it=r??C,Fe=S,Et=PTe({root:{level:"REGION",id:e.ctprvnCode,label:e.label},initialFilters:{kpi:be,range:ge,view:N}}),{stack:Mt,current:Be,canGoBack:tr,push:br,back:Er,jumpTo:yr,reset:Rr,syncFilters:zr}=Et,pr=g.useMemo(()=>Mt.map(J=>`${J.level}:${J.id}`).join(">"),[Mt]),hr=g.useMemo(()=>{const J=F[pr],fe=J?.length?void 0:Object.entries(F).filter(([nt,ot])=>ot.length>0&&pr.startsWith(nt)).sort((nt,ot)=>ot[0].length-nt[0].length)[0]?.[1],Oe=J?.length?J:fe??[];if(!Oe.length)return[];const Ue=new Map;return Oe.forEach(nt=>{const ot=Fn(nt.code)||Fn(sc(nt.regionId)),lt=String(nt.name??"").trim();!ot||!lt||Ue.has(ot)||Ue.set(ot,{...nt,code:ot,name:lt,regionKey:{...nt.regionKey,code:ot,name:lt},regionId:nt.regionId||_s({level:nt.regionKey.level,code:ot})})}),[...Ue.values()]},[F,pr]),Tr=g.useCallback(J=>{t==null&&y(J),s?.(J)},[s,t]),Mr=g.useCallback(J=>{a==null&&p(J),o?.(J)},[o,a]),jn=g.useCallback(J=>{h(J),Mr(hOe[J])},[Mr]),rt=g.useCallback(J=>{A(Oe=>Oe===J?Oe:J),(ct.current??null)!==J&&Q.current?.(J)},[]),Pe=g.useCallback(J=>{_(J)},[]);g.useEffect(()=>{A(null),Pe(null),D(void 0),M(void 0),$({}),he.current={},K(!1),re(!1),ve({})},[e.id,Pe]),g.useEffect(()=>{je==="month"&&m!=="30d"&&h("30d"),je==="quarter"&&m!=="90d"&&h("90d")},[je,m]),g.useEffect(()=>{U(null)},[be,it]),g.useEffect(()=>{ae(!1),re(!1)},[it,be]),g.useEffect(()=>{const J=`${be}|${ge}|${N}`;if(J!==xe.current)return Te.current&&window.clearTimeout(Te.current),Te.current=window.setTimeout(()=>{zr({kpi:be,range:ge,view:N},"replace"),xe.current=J},180),()=>{Te.current&&window.clearTimeout(Te.current)}},[ge,be,zr,N]),g.useEffect(()=>{Be.filters.view!==N&&v(Be.filters.view)},[Be.filters.view,N]);const Kt=g.useMemo(()=>{const J=E.width||(typeof window<"u"?window.innerWidth:1920);return J>=1024?"desktop":J>=768?"tablet":"mobile"},[E.width]),Pr=g.useMemo(()=>{const J=E.height||(typeof window<"u"?window.innerHeight:900);return Math.max(360,Math.min(680,Math.round(J-(Kt==="desktop"?320:260))))},[E.height,Kt]),vr=g.useMemo(()=>mF[e.id]??mF.seoul,[e.id]),Cn=g.useMemo(()=>{const J=new Map;return vr.forEach(fe=>J.set(al(fe),fe)),J},[vr]),Ae=g.useMemo(()=>hr.filter(J=>J.regionKey.level==="SIGUNGU"),[hr]),Ge=g.useMemo(()=>{const J=new Map;return Ae.forEach(fe=>J.set(al(fe.name),fe)),J},[Ae]),ut=g.useMemo(()=>vr.map(J=>{const fe=al(J),Oe=Ge.get(fe);return{name:J,code:Oe?.code??""}}).filter(J=>J.code),[vr,Ge]),er=g.useMemo(()=>hr.filter(J=>J.regionKey.level==="EUPMYEONDONG"),[hr]),mr=g.useMemo(()=>{const J=new Map;return Ae.forEach(fe=>J.set(String(fe.code),fe.name)),J},[Ae]),Or=g.useMemo(()=>{const J=new Map;return er.forEach(fe=>J.set(String(fe.code),{code:String(fe.code),name:fe.name})),J},[er]),ft=g.useMemo(()=>{for(let J=Mt.length-1;J>=0;J-=1){const fe=Mt[J];if(fe.level==="SIGUNGU")return mr.get(String(fe.id))??fe.label;if(fe.level==="EUPMYEONDONG"){const Oe=String(fe.id).slice(0,5),Ue=mr.get(Oe);if(Ue)return Ue}}return null},[Mt,mr]);g.useEffect(()=>{if(Be.level==="REGION"){it!==null&&rt(null),Fe!==null&&Pe(null),D("sig"),M(e.ctprvnCode);return}if(ft&&it!==ft&&rt(ft),Be.level==="SIGUNGU"){const fe=_s({level:"SIGUNGU",code:String(Be.id),name:Be.label});Fe!==fe&&Pe(fe),D("emd"),M(Be.id);return}const J=_s({level:"EUPMYEONDONG",code:String(Be.id),name:Be.label});Fe!==J&&Pe(J),D("emd"),M(Be.id)},[ft,Be.id,Be.label,Be.level,e.ctprvnCode,it,Fe,rt,Pe]),g.useEffect(()=>{const J=se.current!==r;if(se.current=r,!J||!r||Be.level!=="REGION"||Mt.some(nt=>nt.level==="SIGUNGU"&&al(nt.label)===al(r)))return;const Oe=Ge.get(al(r));if(!Oe?.code)return;const Ue=Cn.get(al(r))??r;Pe(_s({level:"SIGUNGU",code:Oe.code})),g.startTransition(()=>{br({level:"SIGUNGU",id:Oe.code,label:Ue,filters:{kpi:be,range:ge,view:N}},"replace")})},[Be.level,Mt,Cn,br,ge,be,r,Ge,Pe,N]);const Le=g.useMemo(()=>({level:Be.level==="REGION"||Be.level==="SIGUNGU"||Be.level==="EUPMYEONDONG"?Be.level:"REGION",id:String(Be.id),name:Be.label}),[Be.id,Be.label,Be.level]),We=g.useMemo(()=>Ih(Le.level),[Le.level]),$t=g.useMemo(()=>hr.filter(J=>J.regionKey.level===We),[We,hr]),Re=g.useMemo(()=>{if(Ae.length>=3)return Ae.map(fe=>({code:String(fe.code),name:fe.name}));const J=Bq[e.ctprvnCode]??[];return J.length?J.map(fe=>({code:String(fe.code),name:fe.label})):ut.map(fe=>({code:String(fe.code),name:fe.name}))},[ut,e.ctprvnCode,Ae]),_e=g.useMemo(()=>Re.map(J=>am(J.name,`${e.id}-${ge}`,je,ge,J.code)),[Re,e.id,je,ge]),Ve=g.useMemo(()=>er.length?er.map(J=>am(J.name,`${e.id}-${Be.level}-${Be.id}-${ge}`,je,ge,J.code)):[],[je,Be.id,Be.level,er,ge,e.id]),At=g.useMemo(()=>{if(Be.level!=="SIGUNGU")return[];if(!$t.length)return[];const J=$t.filter(Oe=>{const Ue=String(Oe.code);return Ue.startsWith(String(Be.id))&&Ue.length>String(Be.id).length});return(J.length>0?J:$t.filter(Oe=>String(Oe.code)!==String(Be.id))).map(Oe=>am(Oe.name,`${e.id}-${Be.level}-${Be.id}-${ge}-map-fallback`,je,ge,Oe.code))},[je,Be.id,Be.level,ge,e.id,$t]),Dt=g.useMemo(()=>{if(Le.level==="REGION")return $t.length>0?$t.map(J=>({code:String(J.code),name:J.name})):_e.map(J=>({code:String(J.regionId),name:J.name}));if(Le.level==="SIGUNGU"){const J=$t.filter(Oe=>{const Ue=String(Oe.code);return Ue.startsWith(String(Le.id))&&Ue.length>String(Le.id).length}).map(Oe=>({code:String(Oe.code),name:Oe.name})),fe=J.length>0?J:$t.filter(Oe=>String(Oe.code)!==String(Le.id)).map(Oe=>({code:String(Oe.code),name:Oe.name}));return fe.length>0?fe:Ve.map(Oe=>({code:String(Oe.regionId),name:Oe.name}))}return[]},[Le.id,Le.level,_e,Ve,$t]),ir=g.useMemo(()=>qq({level:yOe(Le.level),parentRegionCode:String(Le.id),candidates:Dt}),[Dt,Le.id,Le.level]),St=g.useMemo(()=>{const J=new Map;return[..._e,...Ve,...At].forEach(fe=>{J.set(String(fe.regionId),fe)}),ir.children.map(fe=>{const Oe=J.get(fe.code);return Oe||am(fe.name,`${e.id}-${Le.level}-${Le.id}-${ge}-scope-fill`,je,ge,fe.code)})},[je,ir.children,Le.id,Le.level,_e,Ve,ge,e.id,At]),nn=g.useMemo(()=>{if(Le.level==="EUPMYEONDONG"){const J=Ve.find(fe=>String(fe.regionId)===String(Le.id))??At.find(fe=>String(fe.regionId)===String(Le.id));return J?[J]:[am(Le.name,`${e.id}-${Le.level}-${Le.id}-${ge}-leaf`,je,ge,Le.id)]}return St.length>0?St:Le.level==="REGION"?_e:Le.level==="SIGUNGU"?At.length>0?At:Ve.length>0?Ve:[]:[]},[je,Le.id,Le.level,Le.name,_e,Ve,ge,e.id,St,At]),an=g.useRef({});g.useEffect(()=>{nn.length&&(an.current[pr]=nn)},[nn,pr]);const bt=g.useMemo(()=>{if(nn.length)return nn;const J=an.current[pr];return J?.length?J:Le.level==="REGION"?_e:Le.level==="SIGUNGU"&&At.length?At:Le.level==="SIGUNGU"&&Ve.length?Ve:[]},[nn,Le.level,_e,Ve,pr,At]),ja=bt.length>0,oo=`${pr}|${be}|${ge}|${N}`;g.useEffect(()=>{oo!==ye.current&&(ye.current=oo,ce!=="Initial"&&Ee("RegionChange"))},[ce,oo]),g.useEffect(()=>{if(ce!=="RegionChange")return;const J=window.setTimeout(()=>{Ee(ja?"Ready":"PartialData")},140);return()=>window.clearTimeout(J)},[ja,ce]),g.useEffect(()=>{ce==="Initial"&&Ee(ja?"Ready":"Empty")},[ja,ce]),g.useEffect(()=>{ja&&(ce==="Ready"||ce==="RegionChange"||Ee("Ready"))},[ja,ce]);const ji=ce==="RegionChange"?"transition-[opacity,transform] duration-200 ease-out opacity-60 translate-y-[2px] pointer-events-none":"transition-[opacity,transform] duration-200 ease-out opacity-100 translate-y-0",ri=g.useMemo(()=>Be.level==="SIGUNGU"?String(Be.id):Be.level==="EUPMYEONDONG"?String(Be.id).slice(0,5):null,[Be.id,Be.level]),Nr=g.useMemo(()=>{if(ri){const J=_e.find(fe=>String(fe.regionId)===ri);if(J)return J}return it?_e.find(J=>al(J.name)===al(it))??null:null},[_e,it,ri]),Kn=g.useMemo(()=>bOe(bt.length?bt:_e),[_e,bt]),Ut=g.useMemo(()=>Be.level==="REGION"?Nr??Kn:Be.level==="SIGUNGU"?Kn:Be.level==="EUPMYEONDONG"?bt[0]??Kn:Nr??Kn,[Kn,Be.level,bt,Nr]),fr=g.useMemo(()=>Cm[be]??VT[0],[be]),Sr=dOe[be],Ba=g.useMemo(()=>[{key:"RISK",label:"",kpi:pb.RISK},{key:"BOTTLENECK",label:"",kpi:pb.BOTTLENECK},{key:"GAP",label:"",kpi:pb.GAP},{key:"LOAD",label:"",kpi:pb.LOAD}],[]),yn=g.useMemo(()=>VT.map(J=>{const fe=J.key;return{...J,key:fe,value:Kn.kpi[fe],mapColorScheme:sF[fe]??"blue",tooltipLines:wOe(J.label,J.tooltip,J.scopeLine,J.clickAction)}}),[Kn]),sn=ETe[be]??"regional_sla_violation",Ua=sF[be]??"blue";g.useMemo(()=>Ed[Ua]??Ed.blue,[Ua]);const wi=Mt,Lr=Be.level==="REGION"?e.label:Be.label,xs=g.useCallback(J=>{d&&(J==="bottleneck"&&d("cause"),J==="actions"&&d("interventions"),J==="reports"&&d("reports"),J==="settings"&&d("settings"))},[d]),_n=g.useCallback((J,fe,Oe)=>{const Ue=nOe(fe,{scopeLabel:Lr,rangeLabel:Yf[ge],longWaitDays:Z.thresholds.longWaitDays});return n.jsx(rOe,{label:J,help:Ue,className:Oe,onActionClick:()=>xs(Ue.actionTab)})},[Lr,xs,ge,Z.thresholds.longWaitDays]),Ul=`${Yf[ge]}  ${e.label}  ${zA(fr.shortLabel)}  `,Zr=g.useMemo(()=>bt.map(J=>J.mapMetric[be]),[bt,be]),aa=g.useMemo(()=>Zr.length?Math.min(...Zr):0,[Zr]),Ls=g.useMemo(()=>Zr.length?Math.max(...Zr):0,[Zr]),lo=g.useMemo(()=>Zr.length?Number((Zr.reduce((J,fe)=>J+fe,0)/Zr.length).toFixed(1)):0,[Zr]);g.useMemo(()=>{const J=Ed[Ua]??Ed.blue,fe=Ls-aa||1;return bt.map(Oe=>{const Ue=Oe.mapMetric[be],nt=(Ue-aa)/fe,ot=Math.max(0,Math.min(J.length-1,Math.floor(nt*J.length))),lt=String(Oe.regionId);return{code:lt,name:Oe.name,regionId:_s({level:Ih(Le.level),code:lt,name:Oe.name}),size:Math.max(1,Ue),value:Ue,fill:J[ot]}})},[Le.level,bt,be,aa,Ls,Ua]);const wa=Kn.kpi[be],sa=g.useMemo(()=>{const J=tO(be),fe=bt.map(Ht=>Ht.kpi[be]),Oe=bt.map(Ht=>Ht.volume),Ue=Math.min(...fe),nt=Math.max(...fe),ot=Math.min(...Oe),lt=Math.max(...Oe),Ft=bt.map(Ht=>Ht.adTransitionSignal.densityScore),dr=bt.map(Ht=>Ht.adTransitionSignal.transition30d),kr=bt.map(Ht=>Ht.adTransitionSignal.deltaFromAvg),qr=bt.map(Ht=>Ht.differentialDelay.avgWaitDays),$r=bt.map(Ht=>Ht.differentialDelay.delayedRatio),Ca=bt.map(Ht=>Ht.differentialDelay.backlogCount),Ns=bt.map(Ht=>1-Ht.stageConversionRate.conversionRate),ai=bt.map(Ht=>-Ht.stageConversionRate.deltaFromRegional),la=bt.map(Ht=>Ht.screenToDxDrivers.reduce((ca,ur)=>ca+ur.value,0)/Math.max(1,Ht.screenToDxDrivers.length));return bt.map(Ht=>{const ca=Ht.kpi[be];let ur=jTe({kpiValue:ca,kpiMin:Ue,kpiMax:nt,volume:Ht.volume,volumeMin:ot,volumeMax:lt,direction:J});if(be==="regionalAdTransitionHotspot"){const _i=lc(Ht.adTransitionSignal.densityScore,Math.min(...Ft),Math.max(...Ft)),co=lc(Ht.adTransitionSignal.transition30d,Math.min(...dr),Math.max(...dr)),uo=lc(Ht.adTransitionSignal.deltaFromAvg,Math.min(...kr),Math.max(...kr));ur=Number((_i*qA.density+co*qA.transition+uo*qA.delta).toFixed(3))}else if(be==="regionalDxDelayHotspot"){const _i=lc(Ht.differentialDelay.avgWaitDays,Math.min(...qr),Math.max(...qr)),co=lc(Ht.differentialDelay.delayedRatio,Math.min(...$r),Math.max(...$r)),uo=lc(Ht.differentialDelay.backlogCount,Math.min(...Ca),Math.max(...Ca));ur=Number((_i*WA.wait+co*WA.delayed+uo*WA.backlog).toFixed(3))}else if(be==="regionalScreenToDxRate"){const _i=lc(1-Ht.stageConversionRate.conversionRate,Math.min(...Ns),Math.max(...Ns)),co=lc(-Ht.stageConversionRate.deltaFromRegional,Math.min(...ai),Math.max(...ai)),uo=Ht.screenToDxDrivers.reduce((Fc,Gl)=>Fc+Gl.value,0)/Math.max(1,Ht.screenToDxDrivers.length),Ti=lc(uo,Math.min(...la),Math.max(...la));ur=Number((_i*VA.gapRate+co*VA.deltaGap+Ti*VA.support).toFixed(3))}const Ai=Number(Ot(`national-${be}-${ge}-${je}-${Be.level}-${Be.id}-${Ht.name}`,Wr[be][0],Wr[be][1]).toFixed(1)),Ci=Fn(sc(Ht.regionId))||Fn(Ht.regionId);return{code:Ci,regionId:_s({level:Ih(Le.level),code:Ci,name:Ht.name}),name:Ht.name,kpiValue:ca,volume:Ht.volume,priorityScore:ur,nationalDelta:Number((ca-Ai).toFixed(1))}}).sort((Ht,ca)=>{if(ca.priorityScore!==Ht.priorityScore)return ca.priorityScore-Ht.priorityScore;const ur=Ht.name.localeCompare(ca.name,"ko-KR");return ur!==0?ur:Ht.code.localeCompare(ca.code)})},[je,Le.level,Be.id,Be.level,ge,bt,be]),bs=g.useMemo(()=>new Set(ir.childrenCodes.map(J=>Fn(J)).filter(Boolean)),[ir.childrenCodes]),Rn=g.useMemo(()=>{const J=Ih(Le.level),fe=sa.filter(nt=>{const ot=Fn(nt.code)||Fn(sc(nt.code));return ot?bs.size?bs.has(ot):!0:!1}),Oe=(fe.length>0?fe:sa).slice(0,5),Ue=[];return Oe.forEach(nt=>{const ot=Fn(nt.code)||Fn(sc(nt.regionId));ot&&Ue.push({...nt,code:ot,regionKey:{level:J,code:ot,name:nt.name},regionId:_s({level:J,code:ot,name:nt.name})})}),Ue},[bs,Le.level,sa]),Za=g.useMemo(()=>bt.reduce((J,fe)=>J+fe.volume,0),[bt]),Pn=g.useMemo(()=>{if(!Rn.length||Za<=0)return null;const J=Rn.reduce((fe,Oe)=>fe+Oe.volume,0);return Number((J/Za*100).toFixed(1))},[Rn,Za]),Ja=Pn==null?"":`${Pn.toFixed(1)}%`,ht=g.useMemo(()=>{const J=Rn.slice(0,2).map(fe=>fe.name);return J.length?J.join("/"):`${e.label} `},[e.label,Rn]),Jr=uOe[be]??zA(fr.shortLabel),Ur=g.useMemo(()=>{const J=Ba.find(Oe=>Oe.key===Sr)?.label??Sr,fe=fr.direction==="higherWorse"?`${Jr} `:`${Jr}  `;return xt(`${Yf[ge]}  ${J}  ${fe}   : ${ht}`)},[Sr,Ba,ge,fr.direction,Jr,ht]),Ei=g.useMemo(()=>{const J=ge==="7d"?["D-6","D-5","D-4","D-3","D-2","D-1","D0"]:["T-7","T-6","T-5","T-4","T-3","T-2","T-1","T0"],fe=bt.filter(ot=>ot.kpi.regionalRecontact>=10).length,Oe=bt.reduce((ot,lt)=>ot+(lt.recontactReasons.find(Ft=>Ft.name==="")?.value??0),0),Ue=bt.length>0?Number((bt.reduce((ot,lt)=>ot+lt.differentialDelay.avgWaitDays,0)/bt.length).toFixed(1)):0,nt=(ot,lt,Ft,dr)=>{const kr=Ot(`${e.id}-${ot}-${ge}-drift`,-1.2,1.2),qr=Ft===""?Math.max(6,dr*.08):Ft===""?1.5:1,$r=J.map((ai,la)=>{const Ht=la-(J.length-1),ca=dr+Ht*kr+Ot(`${e.id}-${ot}-${ge}-${ai}`,-qr,qr),ur=Math.max(0,Ft===""?Number(ca.toFixed(1)):Math.round(ca));return{t:ai,v:ur}});$r.length&&($r[$r.length-1]={...$r[$r.length-1],v:Ft===""?Number(dr.toFixed(1)):Math.round(dr)});const Ca=$r[$r.length-1]?.v??0,Ns=$r[Math.max(0,$r.length-2)]?.v??Ca;return{key:ot,label:lt,unit:Ft,points:$r,value:Ca,delta:Number((Ca-Ns).toFixed(1))}};return[nt("slaRisk","SLA  ","",fe),nt("bottleneck"," ","",Ue),nt("overdueFollowup"," ","",Oe)]},[ge,bt,e.id]),ys=g.useMemo(()=>{const J=Math.round(Cm.regionalDxDelayHotspot.target??24),fe=Math.round(Cm.regionalRecontact.target??12);return[{label:`SLA   ${Z.thresholds.longWaitDays} `,tooltip:`SLA  : ${Z.thresholds.longWaitDays}    `},{label:`   ${J}`,tooltip:`   : ${J}`},{label:`  ${fe}%`,tooltip:`   : ${fe}%`}]},[Z.thresholds.longWaitDays]),Wt=g.useMemo(()=>{const J=bt.filter(nt=>nt.kpi.regionalRecontact>=10).length,fe=bt.filter(nt=>nt.differentialDelay.avgWaitDays>=Z.thresholds.longWaitDays).length,Oe=bt.reduce((nt,ot)=>nt+(ot.recontactReasons.find(lt=>lt.name==="")?.value??0),0),Ue=bt.filter(nt=>nt.stageImpact.stage1QueueDelta>=12).length;return{slaAtRiskRegions:J,examDelayRegions:fe,overdueFollowups:Math.round(Oe),surgeRegions:Ue}},[bt,Z.thresholds.longWaitDays]),zo=g.useMemo(()=>{const J=bt.filter(Ft=>Ft.adTransitionSignal.densityScore>=70).length,fe=bt.reduce((Ft,dr)=>Ft+dr.adTransitionSignal.highRiskCount,0),Oe=bt.length>0?Number((bt.reduce((Ft,dr)=>Ft+dr.differentialDelay.avgWaitDays,0)/bt.length).toFixed(1)):0,Ue=Math.round(bt.reduce((Ft,dr)=>Ft+(dr.queueTypeBacklog.find(kr=>kr.name==="2 ")?.value??0),0)),nt=bt.map(Ft=>Ft.stageConversionRate.conversionRate*100),ot=nt.length>1?Number((Math.max(...nt)-Math.min(...nt)).toFixed(1)):0,lt=bt.length>1?Number((Math.max(...bt.map(Ft=>Ft.differentialDelay.avgWaitDays))-Math.min(...bt.map(Ft=>Ft.differentialDelay.avgWaitDays))).toFixed(1)):0;return[{id:"risk",title:"Risk",value:J,unit:"",delta:{value:Wt.slaAtRiskRegions,unit:"",direction:Wt.slaAtRiskRegions>0?"up":"flat"},severity:Wt.slaAtRiskRegions>4?"critical":Wt.slaAtRiskRegions>2?"warn":"normal",bindLayer:"RISK"},{id:"bottleneck",title:"Bottleneck",value:Oe,unit:"",delta:{value:Ue,unit:"",direction:Ue>0?"up":"flat"},severity:Oe>Z.thresholds.longWaitDays?"critical":Oe>Z.thresholds.longWaitDays-1?"warn":"normal",bindLayer:"BOTTLENECK"},{id:"gap",title:"Gap",value:ot,unit:"%p",delta:{value:lt,unit:"",direction:lt>0?"up":"flat"},severity:ot>18?"critical":ot>10?"warn":"normal",bindLayer:"GAP"},{id:"load",title:"Load",value:fe,unit:"",delta:{value:Wt.surgeRegions,unit:"",direction:Wt.surgeRegions>0?"up":"flat"},severity:Wt.surgeRegions>3?"warn":"normal",bindLayer:"LOAD"}]},[Wt,bt,Z.thresholds.longWaitDays]),qo=g.useMemo(()=>{const J=zo.find(Oe=>Oe.id==="bottleneck"),fe=zo.find(Oe=>Oe.id==="gap");return[{id:"sla-risk",label:`${KA("sla").user}  `,helpKey:"slaRisk",value:`${Wt.slaAtRiskRegions.toLocaleString()}`,tone:Wt.slaAtRiskRegions>3?"text-red-700 bg-red-50 border-red-100":"text-emerald-700 bg-emerald-50 border-emerald-100"},{id:"bottleneck",label:KA("examDelay").user,helpKey:"examDelay",value:`${Math.round(J?.value??0)}`,tone:(J?.severity??"normal")==="critical"?"text-red-700 bg-red-50 border-red-100":"text-amber-700 bg-amber-50 border-amber-100"},{id:"gap",label:KA("conversionGap").user,helpKey:"conversionGap",value:`${(fe?.value??0).toFixed(1)}%p`,tone:(fe?.severity??"normal")==="critical"?"text-red-700 bg-red-50 border-red-100":"text-indigo-700 bg-indigo-50 border-indigo-100"}]},[Wt.slaAtRiskRegions,zo]),Ea=g.useMemo(()=>Nr?Number((Nr.kpi[be]-wa).toFixed(1)):null,[wa,Nr,be]),X=g.useMemo(()=>{const J=new Map;return bt.forEach(fe=>{const Oe=String(fe.regionId),Ue=Fn(sc(Oe));J.set(Oe,fe),Ue&&J.set(Ue,fe)}),J},[bt]),ie=g.useCallback(({code:J,name:fe})=>{const Oe=Fn(J)||Fn(sc(J)),Ue=(Oe?X.get(Oe):void 0)??X.get(String(J));if(!Ue)return[];const nt=Number(Ot(`${e.id}-${fe}-${be}-delta7-${ge}-${je}`,-12,12).toFixed(1)),ot=fr.unit===""?"":fr.unit===""?"":fr.unit===""?"":"%p";return[`: ${Ue.volume.toLocaleString()}`,` 7 : ${nt>0?"+":""}${fr.unit===""||fr.unit===""?Math.round(nt):nt}${ot}`]},[je,X,ge,e.id,fr.unit,be]),De=g.useCallback(()=>{rt(null),Pe(null),Rr(),K(!1)},[Rr,rt,Pe]),Ye=g.useCallback(()=>{tr&&(Mt.length<=2&&(rt(null),Pe(null)),Er(),K(!1))},[Er,tr,Mt.length,rt,Pe]),Ze=g.useCallback(({level:J,code:fe,name:Oe,regionId:Ue})=>{if(J==="ctprvn"){De();return}const nt=Fn(fe)||Fn(sc(Ue)),ot=J==="sig"||J==="emd"&&nt.length===5,lt=al(Oe);if(ot&&nt){const Ft=mr.get(nt)??Cn.get(lt)??Oe,dr=Ue??_s({level:"SIGUNGU",code:nt});Pe(dr),rt(Ft),g.startTransition(()=>{br({level:"SIGUNGU",id:nt,label:Ft,filters:{kpi:be,range:ge,view:N}})});return}if(J==="emd"){if(!nt)return;const Ft=Or.get(nt)?.name??Oe,dr=Ue??_s({level:"EUPMYEONDONG",code:nt});Pe(dr),g.startTransition(()=>{br({level:"EUPMYEONDONG",id:nt,label:Ft,filters:{kpi:be,range:ge,view:N}})})}},[Or,De,Cn,br,ge,be,mr,rt,Pe,N]),Ke=g.useCallback(J=>{const fe=Ih(Le.level),Ue=J.map(lt=>{const Ft=Fn(lt.code)||Fn(sc(lt.regionId)),dr=String(lt.name??"").trim();return!Ft||!dr?null:{...lt,code:Ft,name:dr,regionKey:{...lt.regionKey,level:lt.regionKey.level,code:Ft,name:dr},regionId:lt.regionId||_s({level:lt.regionKey.level,code:Ft})}}).filter(lt=>!!lt).filter((lt,Ft,dr)=>dr.findIndex(kr=>kr.code===lt.code)===Ft).filter(lt=>lt.regionKey.level===fe).sort((lt,Ft)=>lt.code.localeCompare(Ft.code,"ko-KR"));if(!Ue.length)return;const nt=`${fe}|${Ue.map(lt=>`${lt.code}:${lt.name}`).join("|")}`;he.current[pr]!==nt&&(he.current[pr]=nt,$(lt=>{const Ft=lt[pr]??[];return Ft.length===Ue.length&&Ft.every((dr,kr)=>dr.code===Ue[kr]?.code&&dr.name===Ue[kr]?.name&&dr.regionKey.level===Ue[kr]?.regionKey.level)?lt:{...lt,[pr]:Ue}}))},[Le.level,pr]),Zt=g.useCallback((J,fe,Oe)=>{const Ue=Fn(J)||Fn(sc(Oe));if(!Ue)return;const nt=Oe?.startsWith("EUPMYEONDONG:")?"EUPMYEONDONG":Oe?.startsWith("SIGUNGU:")||Be.level==="REGION"?"SIGUNGU":"EUPMYEONDONG",ot=_s({level:nt,code:Ue});if(Pe(ot),ot!==Fe){if(nt==="SIGUNGU"){rt(fe),g.startTransition(()=>{br({level:"SIGUNGU",id:Ue,label:fe,filters:{kpi:be,range:ge,view:N}})});return}g.startTransition(()=>{br({level:"EUPMYEONDONG",id:Ue,label:fe,filters:{kpi:be,range:ge,view:N}},Be.level==="EUPMYEONDONG"?"replace":"push")})}},[Be.level,br,ge,Fe,be,rt,Pe,N]),kt=g.useMemo(()=>{const J=je==="week"?7:4,fe=je==="week"?["","","","","","",""]:je==="month"?["1","2","3","4"]:["Q1","Q2","Q3","Q4"],[Oe,Ue]=Wr[be],nt=be==="regionalSla"?rW[ge]*eO[je]:nW[ge]*eO[je],ot=aW[ge],lt=Ft=>fr.unit===""?Number((Ft*nt).toFixed(1)):fr.unit===""?Number(Math.max(Oe,Math.min(Ue,Ft+ot*4)).toFixed(1)):fr.unit===""?Number(Math.max(Oe,Math.min(Ue,Ft+ot*2)).toFixed(1)):Number(Math.max(Oe,Math.min(Ue,Ft+ot)).toFixed(1));return Array.from({length:J},(Ft,dr)=>{const kr=lt(Ot(`${e.id}-${be}-${je}-reg-${dr}`,Oe,Ue)),qr=lt(Ot(`national-${be}-${ge}-${je}-tr-${dr}`,Oe,Ue)),$r=it?lt(Ot(`${e.id}-${it}-${be}-${ge}-${je}-dist-${dr}`,Oe,Ue)):void 0;return{label:fe[dr],regional:kr,national:qr,district:$r}})},[je,ge,e.id,it,fr.unit,be]);g.useMemo(()=>{const J=Number((_e.reduce((fe,Oe)=>fe+Oe.mapMetric.regionalSla,0)/Math.max(1,_e.length)).toFixed(1));return _e.map(fe=>({name:fe.name,value:fe.mapMetric.regionalSla,delta:Number((fe.mapMetric.regionalSla-J).toFixed(1))})).sort((fe,Oe)=>Oe.value-fe.value).slice(0,8)},[_e]),g.useMemo(()=>_e.map(fe=>({name:fe.name,missing:fe.mapMetric.regionalGovernance,statuses:fe.governanceActionStatus})).sort((fe,Oe)=>Oe.missing-fe.missing).slice(0,5).map(fe=>{const Oe=fe.statuses.find(ot=>ot.status==="")?.value??0,Ue=fe.statuses.find(ot=>ot.status==="")?.value??0,nt=fe.statuses.find(ot=>ot.status==="")?.value??0;return{name:fe.name,:Oe,:Ue,:nt}}),[_e]),g.useMemo(()=>{const J=Ut.stageImpact;return[{stage:"Stage1 (ML)",signal:J.stage1SignalDelta,queue:J.stage1QueueDelta,desc:"       "},{stage:"Stage2 (ANN)",signal:J.stage2SignalDelta,queue:J.stage2QueueDelta,desc:"2    2   "},{stage:"Stage3 (CNN)",signal:J.stage3SignalDelta,queue:J.stage3QueueDelta,desc:"3    3    "}]},[Ut.stageImpact]);const Ar=g.useMemo(()=>be==="regionalSla"?[xt("Stage        "),xt("          ")]:be==="regionalQueueRisk"?[xt("        "),xt("       ")]:be==="regionalRecontact"?[xt("SLA      "),xt("SLA       ")]:be==="regionalDataReadiness"?[xt("       "),xt("       ")]:be==="regionalAdTransitionHotspot"?[xt("     Stage3     "),xt("        ")]:be==="regionalDxDelayHotspot"?[xt("        "),xt("       ")]:be==="regionalScreenToDxRate"?[xt("         "),xt("       ")]:[xt("       "),xt("       ")],[be]),jr=g.useMemo(()=>be==="regionalSla"?Ut.queueTypeBacklog.slice(0,3):be==="regionalQueueRisk"?Ut.queueCauseTop.slice(0,3):be==="regionalRecontact"?Ut.slaStageContribution.slice(0,3):be==="regionalDataReadiness"?Ut.recontactReasons.slice(0,3):be==="regionalAdTransitionHotspot"?Ut.adTransitionDrivers.slice(0,3):be==="regionalDxDelayHotspot"?Ut.dxDelayDrivers.slice(0,3):be==="regionalScreenToDxRate"?Ut.screenToDxDrivers.slice(0,3):Ut.governanceMissingTypes.slice(0,3),[Ut,be]),fn=g.useCallback(J=>be==="regionalRecontact"?`${J.value.toFixed(1)}%`:be==="regionalAdTransitionHotspot"?J.name.includes("")?`${J.value.toFixed(1)}`:`${Math.round(J.value).toLocaleString()}`:be==="regionalDxDelayHotspot"?J.name.includes("")?`${J.value.toFixed(1)}%`:J.name.includes("")?`${Math.round(J.value)}`:`${Math.round(J.value).toLocaleString()}`:be==="regionalScreenToDxRate"?J.name.includes("")?`${J.value.toFixed(1)}%p`:`${J.value.toFixed(1)}`:`${Math.round(J.value).toLocaleString()}`,[be]);g.useMemo(()=>qi([Ut.missingFields]),[Ut.missingFields]);const ia=g.useMemo(()=>{if(be==="regionalSla"){const fe=[...Ut.queueTypeBacklog].sort((Oe,Ue)=>Ue.value-Oe.value)[0];return{stage:fe?.name??" ",valueLabel:fe?`${Math.round(fe.value)}`:"",basis:xt("    ")}}if(be==="regionalQueueRisk"){const fe=Ut.queueCauseTop[0];return{stage:fe?.name??" ",valueLabel:fe?`${Math.round(fe.value)}`:"",basis:xt("      ")}}if(be==="regionalRecontact"){const fe=Ut.slaStageContribution[0];return{stage:fe?.name??"SLA ",valueLabel:fe?`${fe.value.toFixed(1)}%`:"",basis:xt("SLA     ")}}if(be==="regionalDataReadiness"){const fe=Ut.recontactReasons[0];return{stage:fe?.name??"",valueLabel:fe?`${Math.round(fe.value)}`:"",basis:xt("      ")}}if(be==="regionalAdTransitionHotspot")return{stage:" ",valueLabel:`${Math.round(Ut.adTransitionSignal.highRiskCount)}  ${Math.round(Ut.adTransitionSignal.densityScore)}`,basis:xt("     ")};if(be==="regionalDxDelayHotspot")return{stage:" ",valueLabel:`${Math.round(Ut.differentialDelay.avgWaitDays)}  ${(Ut.differentialDelay.delayedRatio*100).toFixed(1)}%`,basis:xt("      ")};if(be==="regionalScreenToDxRate")return{stage:" ",valueLabel:`${(Ut.stageConversionRate.conversionRate*100).toFixed(1)}%`,basis:xt("      ")};const J=Ut.governanceMissingTypes[0];return{stage:J?.name??" ",valueLabel:J?`${Math.round(J.value)}`:"",basis:xt("     ")}},[Ut.adTransitionSignal.densityScore,Ut.adTransitionSignal.highRiskCount,Ut.differentialDelay.avgWaitDays,Ut.differentialDelay.delayedRatio,Ut.governanceMissingTypes,Ut.queueCauseTop,Ut.queueTypeBacklog,Ut.recontactReasons,Ut.slaStageContribution,Ut.stageConversionRate.conversionRate,be]),es=g.useMemo(()=>({primaryDriverStage:ia.stage,alertLevel:jOe(be,wa,fr.trendGoal)}),[ia.stage,wa,fr.trendGoal,be]);g.useMemo(()=>xt(be==="regionalSla"?`${es.primaryDriverStage}          `:be==="regionalQueueRisk"?`${es.primaryDriverStage}         `:be==="regionalRecontact"?"SLA /       ":be==="regionalDataReadiness"?"        ":be==="regionalAdTransitionHotspot"?"          ":be==="regionalDxDelayHotspot"?"         ":be==="regionalScreenToDxRate"?"          ":"        "),[be,es.primaryDriverStage]);const Dn=g.useMemo(()=>{const J=Rn.slice(0,2).map(fe=>fe.name);return J.length?J.join(", "):`${e.label}  `},[e.label,Rn]),tu=g.useMemo(()=>xt(`${e.label}() ${Jr} ${hb(be,wa)} (  ${hb(be,lo)},  ${YA(be,Number((wa-lo).toFixed(1)))})`),[lo,e.label,wa,be,Jr]),Hr=g.useMemo(()=>xt(`    ${Z.thresholds.longWaitDays}    `),[Z.thresholds.longWaitDays]),ts=g.useMemo(()=>xt(be==="regionalQueueRisk"?`   : ${Dn}     `:be==="regionalRecontact"?`   : ${Dn} SLA    `:be==="regionalDataReadiness"?`   : ${Dn}     `:be==="regionalGovernance"?`   : ${Dn}     `:be==="regionalAdTransitionHotspot"?`   : ${Dn}      `:be==="regionalDxDelayHotspot"?`   : ${Dn}       `:be==="regionalScreenToDxRate"?`   : ${Dn}       `:`   : ${Dn}     `),[be,Dn]),Hl=g.useMemo(()=>lOe({regionKey:e.id,regionLabel:e.label,selectedRegionSgg:it,selectedRange:je,alertSummary:Wt,avgExamDelayDays:Ut.differentialDelay.avgWaitDays,overdueFollowups:Wt.overdueFollowups,longWaitDays:Z.thresholds.longWaitDays}),[Sr,Wt,je,Ut.differentialDelay.avgWaitDays,e.id,e.label,it,be,Z.thresholds.longWaitDays]),Wo=g.useMemo(()=>Hl.map(J=>{const fe=oe[J.id];return{...J,status:fe?.status??J.status,dismissReason:fe?.dismissReason??J.dismissReason}}),[Hl,oe]),oa=g.useMemo(()=>Wo.filter(J=>J.status==="open"||J.status==="acknowledged").length,[Wo]),Aa=g.useCallback((J,fe,Oe)=>{ve(Ue=>({...Ue,[J]:{status:fe,dismissReason:Oe??Ue[J]?.dismissReason}}))},[]),mn=g.useCallback(J=>{const fe=J.relatedQueryState.kpiKey;Tr(fe),J.relatedQueryState.areaKey&&rt(J.relatedQueryState.areaKey),Mr(J.relatedQueryState.period),Aa(J.id,"acknowledged"),d?.("cause")},[d,Aa,rt,Tr,Mr]),ni=g.useCallback(J=>{const fe=J.relatedQueryState.kpiKey;l?.({kpi:fe,sgg:J.relatedQueryState.areaKey??it??null,range:J.relatedQueryState.period,source:"overview",primaryDriverStage:es.primaryDriverStage}),Aa(J.id,"converted_to_intervention")},[l,it,Aa,es.primaryDriverStage]),Wp=g.useCallback(J=>{const fe=window.prompt("To-Do   .");if(fe==null)return;const Oe=fe.trim();Aa(J.id,"dismissed",Oe||" ")},[Aa]),hf=g.useMemo(()=>{const J=Ut.queueTypeBacklog.reduce((Ue,nt)=>Ue+nt.value,0),fe=Ut.recontactReasons.reduce((Ue,nt)=>Ue+nt.value,0),Oe=Math.max(0,Math.round(Ut.volume-J));return[{label:"Stage  ",value:`${ia.stage}  ${ia.valueLabel}`},{label:"  ",value:` ${Math.round(Ut.differentialDelay.avgWaitDays)}   ${(Ut.differentialDelay.delayedRatio*100).toFixed(1)}%`},{label:"  ",value:`${Math.round(fe).toLocaleString()}`},{label:"  ",value:`${Oe.toLocaleString()}`}]},[Ut.differentialDelay.avgWaitDays,Ut.differentialDelay.delayedRatio,Ut.queueTypeBacklog,Ut.recontactReasons,Ut.volume,ia.stage,ia.valueLabel]),$s=g.useMemo(()=>{const J=Nr?.name??`${e.label} `,Oe=Math.max(.8,Math.min(5.8,(Pn??20)/8));return[{id:"STAFFING",title:"   ",detail:xt(`${J} /    `),expected:`SLA   +${(Oe*1.05).toFixed(1)}%p`,stage:""},{id:"EXAM_SLOT",title:"   ",detail:xt(`${J}      `),expected:`SLA   +${(Oe*.85).toFixed(1)}%p`,stage:"2"},{id:"FOLLOWUP_AUTOMATION",title:"  ",detail:xt(`${J} /    `),expected:`SLA   +${(Oe*.72).toFixed(1)}%p`,stage:""},{id:"HOSPITAL_LINK",title:"  ",detail:xt(`${J}        `),expected:`SLA   +${(Oe*.66).toFixed(1)}%p`,stage:"3"}]},[e.label,Nr?.name,Pn]),Fs=g.useMemo(()=>$s.find(J=>J.id===q)??$s[0]??null,[$s,q]);g.useEffect(()=>{Fs&&Fs.id!==q&&L(Fs.id)},[Fs,q]);const Vo=g.useMemo(()=>Nr?be==="regionalSla"?Nr.queueTypeBacklog[0]?.name??" ":be==="regionalQueueRisk"?Nr.queueCauseTop[0]?.name??" ":be==="regionalRecontact"?Nr.slaStageContribution[0]?.name??"SLA ":be==="regionalDataReadiness"?Nr.recontactReasons[0]?.name??"":be==="regionalAdTransitionHotspot"?Nr.adTransitionDrivers[0]?.name??" ":be==="regionalDxDelayHotspot"?Nr.dxDelayDrivers[0]?.name??" ":be==="regionalScreenToDxRate"?Nr.screenToDxDrivers[0]?.name??" ":Nr.governanceMissingTypes[0]?.name??" ":null,[Nr,be]),vs=g.useMemo(()=>Nr&&Ea!=null?xt(`${Nr.name}:    ${YA(be,Ea)}   1: ${Vo??""}`):xt("       "),[Nr,Ea,be,Vo]);g.useMemo(()=>{const J=Nr?Nr.name:`${e.label} `,fe=Rn[0]?.name??J,Oe=jr.slice(0,2).map(Ue=>fr.unit==="%"?`${Ue.name} ${Ue.value.toFixed(1)}%`:fr.unit===""?`${Ue.name} ${Math.round(Ue.value)}`:fr.unit===""?`${Ue.name} ${Math.round(Ue.value)}`:`${Ue.name} ${Math.round(Ue.value)}`);return[{id:"scenario-a",target:J,action:Ar[0]??xt("   "),effect:"  ",risk:xt("    "),evidence:Oe[0]??xt("  ")},{id:"scenario-b",target:fe,action:Ar[1]??xt("   "),effect:"  ",risk:xt("   "),evidence:Oe[1]??xt("  ")}]},[Ar,jr,e.label,Nr,fr.unit,Rn]);const Ha=g.useMemo(()=>kt.length<3?null:Math.max(1,Math.floor(kt.length/2)),[kt]);return g.useMemo(()=>{if(!kt.length)return xt("  ");const J=Math.max(1,Math.floor(kt.length/2)),fe=kt.slice(0,J).reduce((qr,$r)=>qr+$r.regional,0)/J,Oe=kt.slice(J),Ue=Oe.reduce((qr,$r)=>qr+$r.regional,0)/Math.max(1,Oe.length),nt=Number((Ue-fe).toFixed(1)),ot=tO(be),lt=ot==="higherBetter"&&nt>.4||ot==="higherWorse"&&nt<-.4,Ft=ot==="higherBetter"&&nt<-.4||ot==="higherWorse"&&nt>.4,dr=lt?" ":Ft?"/ ":" ",kr=ge==="24h"?" 24":`${Yf[ge]} `;return xt(`${kr}:    ${dr} (    )`)},[ge,be,kt]),g.useMemo(()=>{if(Ha==null||Ha>=kt.length)return"";const J=kt.slice(0,Ha).map(ot=>ot.regional),fe=kt.slice(Ha).map(ot=>ot.regional);if(!J.length||!fe.length)return"";const Oe=J.reduce((ot,lt)=>ot+lt,0)/J.length,Ue=fe.reduce((ot,lt)=>ot+lt,0)/fe.length,nt=Number((Ue-Oe).toFixed(1));return YA(be,nt)},[be,kt,Ha]),n.jsxs("div",{ref:j,className:"flex h-full min-h-0 flex-col overflow-hidden bg-gray-50",children:[n.jsxs("div",{className:"bg-white border-b border-gray-200 px-4 py-2 shrink-0",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-1.5 flex-1 min-w-0",children:qo.map(J=>n.jsxs("div",{role:"status",className:`rounded-md border px-2.5 py-2 ${J.tone}`,children:[_n(J.label,J.helpKey,"text-[10px] font-semibold"),n.jsx("div",{className:"text-[14px] font-bold mt-0.5",children:J.value})]},J.id))}),n.jsxs("button",{onClick:()=>P(J=>!J),className:"h-8 px-2.5 rounded-md border border-gray-200 text-xs text-gray-600 hover:bg-gray-50 shrink-0",children:["  ",B?"":""]})]}),B&&n.jsx("div",{className:"mt-2 grid grid-cols-2 lg:grid-cols-4 gap-1.5",children:yn.map(J=>{const fe=be===J.key;return n.jsxs("div",{className:`rounded-md border px-2.5 py-2 ${fe?"border-blue-200 bg-blue-50":"border-gray-200 bg-gray-50"}`,children:[n.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] font-semibold text-gray-600",children:[n.jsx("span",{className:`p-1 rounded ${J.iconBg}`,children:gOe[J.key]}),n.jsx("span",{className:"truncate",children:zA(J.shortLabel)})]}),n.jsx("div",{className:"text-[13px] font-bold text-gray-800 mt-1",children:hb(J.key,J.value)})]},J.key)})})]}),n.jsx("div",{className:"flex-1 overflow-hidden min-h-0",children:n.jsxs("div",{className:`p-2 gap-2 h-full min-h-0 ${Kt==="desktop"?"grid overflow-hidden":"flex flex-col overflow-y-auto"}`,style:Kt==="desktop"?{gridTemplateColumns:"3fr 6fr 3fr",minHeight:0,alignItems:"stretch"}:void 0,children:[n.jsxs("div",{className:`${Kt==="desktop"?"min-w-0 min-h-0 overflow-hidden":Kt==="tablet"?"hidden":"w-full shrink-0"} flex flex-col gap-2`,children:[n.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-2 text-center",children:[n.jsx("span",{className:"text-xs text-indigo-700 font-medium",children:it?` ${it}`:` ${e.label}`}),n.jsxs("span",{className:"ml-2 text-[12px] text-indigo-500",children:["   ",Yf[ge]]})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"  To-Do"}),n.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded border border-blue-200 bg-blue-50 text-blue-700",children:[" ",oa,""]})]}),n.jsx("div",{className:"space-y-1.5",children:Wo.map((J,fe)=>{const Oe=J.status==="converted_to_intervention"?"border-emerald-200 bg-emerald-50 text-emerald-700":J.status==="dismissed"?"border-slate-200 bg-slate-100 text-slate-600":J.status==="acknowledged"?"border-blue-200 bg-blue-50 text-blue-700":"border-amber-200 bg-amber-50 text-amber-700",Ue=J.status==="converted_to_intervention"?" ":J.status==="dismissed"?"":J.status==="acknowledged"?"":"";return n.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-2 py-2",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("div",{className:"min-w-0",children:[n.jsxs("div",{className:"text-[11px] font-semibold text-gray-800 truncate",children:[fe+1,". ",J.title]}),n.jsx("div",{className:"text-[10px] text-gray-600 mt-0.5",children:J.reason}),n.jsxs("div",{className:"text-[10px] text-gray-500 mt-0.5",children:[" ",J.target,"  SLA ",J.dueSlaHours,"h"]})]}),n.jsx("span",{className:`shrink-0 rounded border px-1.5 py-0.5 text-[10px] font-semibold ${Oe}`,children:Ue})]}),J.status==="dismissed"&&J.dismissReason?n.jsxs("div",{className:"mt-1 rounded border border-slate-200 bg-white px-1.5 py-1 text-[10px] text-slate-600",children:[" : ",J.dismissReason]}):null,n.jsxs("div",{className:"mt-1.5 flex items-center gap-1",children:[n.jsx("button",{type:"button",onClick:()=>mn(J),className:"rounded border border-blue-200 bg-blue-50 px-1.5 py-1 text-[10px] font-medium text-blue-700 hover:bg-blue-100",children:" "}),n.jsx("button",{type:"button",onClick:()=>ni(J),className:"rounded border border-emerald-200 bg-emerald-50 px-1.5 py-1 text-[10px] font-medium text-emerald-700 hover:bg-emerald-100",children:" "}),n.jsx("button",{type:"button",onClick:()=>Aa(J.id,"acknowledged"),className:"rounded border border-gray-200 bg-white px-1.5 py-1 text-[10px] text-gray-600 hover:bg-gray-100",children:""}),n.jsx("button",{type:"button",onClick:()=>Wp(J),className:"rounded border border-gray-200 bg-white px-1.5 py-1 text-[10px] text-gray-500 hover:bg-gray-100",children:""})]})]},J.id)})})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"1.  (  )"}),n.jsx("span",{className:"text-[11px] px-1.5 py-0.5 rounded bg-blue-50 text-blue-700",children:_n(Jr,fOe[be])})]}),n.jsx("div",{className:"mb-2 text-[11px] text-gray-500",children:"    "}),n.jsxs("div",{className:"space-y-1.5 text-[12px] leading-relaxed",children:[n.jsx("div",{className:"p-2 rounded border border-gray-100 bg-gray-50 text-gray-800",children:tu}),n.jsx("div",{className:"p-2 rounded border border-amber-100 bg-amber-50 text-amber-900",children:Hr}),n.jsx("div",{className:"p-2 rounded border border-blue-100 bg-blue-50 text-blue-900",children:ts})]})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3 min-h-0 overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[_n("Top  ","top5Share","text-sm font-semibold text-gray-700"),n.jsx("span",{className:"text-[11px] px-1.5 py-0.5 rounded bg-rose-50 text-rose-700 border border-rose-200",children:" 5"})]}),n.jsx("div",{className:"mb-2 rounded border border-blue-100 bg-blue-50 px-2 py-1.5 text-[11px] text-blue-800",children:_n(`Top5  ${Jr}  ${Ja} `,"top5Share","text-[11px] text-blue-800")}),n.jsxs("div",{className:"space-y-1.5 overflow-y-auto pr-1",children:[Rn.map((J,fe)=>n.jsx("button",{onClick:()=>Zt(J.code,J.name,J.regionId),className:`w-full rounded-md border px-2 py-2 text-left ${Fe===J.regionId?"border-blue-300 bg-blue-50":"border-gray-200 bg-white hover:bg-gray-50"}`,children:n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsxs("div",{className:"flex items-center gap-1.5 min-w-0",children:[n.jsx("span",{className:"w-5 h-5 shrink-0 rounded-full bg-gray-100 text-gray-700 text-[11px] font-semibold flex items-center justify-center",children:fe+1}),n.jsx("span",{className:"text-[12px] font-medium text-gray-800 truncate",children:J.name})]}),n.jsx("span",{className:"text-[12px] font-semibold text-gray-900",children:hb(be,J.kpiValue)})]})},J.regionId)),Rn.length===0&&n.jsx("div",{className:"rounded border border-dashed border-gray-200 bg-gray-50 px-2 py-3 text-[11px] text-gray-500",children:"     "})]})]})]}),n.jsx("div",{className:`${Kt==="desktop"?"min-w-0 min-h-0 flex flex-col overflow-hidden":"w-full shrink-0"} ${ji}`,children:n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden flex flex-col flex-1",children:[n.jsx("div",{className:"px-4 py-3 border-b border-gray-200 bg-white rounded-t-lg",children:n.jsxs("div",{className:"flex items-center justify-between gap-2 flex-wrap",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("button",{onClick:Ye,disabled:!tr,className:`flex items-center gap-1 h-8 px-3 text-sm rounded-lg transition-colors font-medium ${tr?"text-blue-600 bg-blue-50 hover:bg-blue-100":"text-gray-400 bg-gray-100 cursor-not-allowed"}`,children:[n.jsx(Tm,{className:"h-4 w-4"}),n.jsx("span",{children:""})]}),n.jsx("button",{onClick:De,className:"h-8 px-3 text-xs rounded-lg border border-gray-200 text-gray-600 hover:bg-gray-50",children:""}),n.jsx("span",{className:"text-sm font-semibold text-gray-800",children:Ul})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"rounded-md border border-blue-200 bg-blue-50 px-3 py-1.5 text-xs font-semibold text-blue-700",children:""}),n.jsx("div",{className:"flex rounded-md border border-gray-200 overflow-hidden",children:Ba.map(J=>n.jsx("button",{onClick:()=>Tr(J.kpi),className:`px-2.5 py-1.5 text-[11px] font-medium transition border-l first:border-l-0 ${Sr===J.key?"bg-slate-700 text-white border-slate-700":"bg-white text-gray-600 border-gray-200 hover:bg-gray-100"}`,title:`${J.label}  `,children:J.label},J.key))}),n.jsx("div",{className:"flex items-center gap-0.5",children:["7d","30d","90d"].map(J=>n.jsx("button",{onClick:()=>jn(J),className:`rounded-md px-3 py-1.5 text-xs font-medium transition ${ge===J?"bg-blue-600 text-white":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,children:Yf[J]},J))})]})]})}),n.jsx("div",{className:"px-4 py-2 border-b border-gray-100 bg-gray-50",children:n.jsx("div",{className:"flex items-center gap-1.5 overflow-x-auto",children:wi.map((J,fe)=>n.jsxs(Y.Fragment,{children:[fe>0&&n.jsx(ei,{className:"h-3.5 w-3.5 text-gray-400 shrink-0"}),n.jsx("button",{onClick:()=>yr(fe),className:`text-[11px] whitespace-nowrap ${fe===wi.length-1?"font-semibold text-blue-700":"text-gray-600 hover:text-blue-700"}`,children:J.label})]},`${J.level}-${J.id}-${fe}`))})}),n.jsxs("div",{className:"px-4 py-2 border-b border-gray-100 bg-white",children:[n.jsx("div",{className:"text-[12px] font-medium text-gray-700 truncate",children:_n(Ur,"insightHeadline")}),n.jsx("div",{className:"mt-1.5 flex flex-wrap gap-1.5",children:ys.map(J=>n.jsx("span",{title:J.tooltip,className:"rounded-full border border-gray-200 bg-gray-50 px-2 py-0.5 text-[10px] text-gray-600",children:J.label},J.label))}),n.jsx("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-3 gap-2",children:Ei.map(J=>{const fe=SOe(J.points.map(ot=>ot.v),124,28),Oe=fe.map((ot,lt)=>`${lt===0?"M":"L"} ${ot.x} ${ot.y}`).join(" "),Ue=fe[fe.length-1],nt=J.delta>0?"text-red-600":J.delta<0?"text-blue-600":"text-gray-500";return n.jsxs("div",{className:"rounded-md border border-gray-200 bg-gray-50 px-2 py-1.5",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsx("span",{className:"text-[10px] text-gray-500",children:J.label}),n.jsx("span",{className:`text-[10px] font-semibold ${nt}`,children:NOe(J.delta,J.unit)})]}),n.jsxs("div",{className:"flex items-end justify-between gap-2 mt-0.5",children:[n.jsx("span",{className:"text-[12px] font-semibold text-gray-800",children:vOe(J.value,J.unit)}),n.jsxs("svg",{viewBox:"0 0 124 28",className:"h-7 w-[124px] shrink-0",children:[n.jsx("path",{d:Oe,fill:"none",stroke:fr.color,strokeWidth:"1.8",strokeLinecap:"round"}),Ue?n.jsx("circle",{cx:Ue.x,cy:Ue.y,r:"2.5",fill:fr.color}):null]})]})]},J.key)})})]}),n.jsxs("div",{className:"relative p-2 min-h-0",children:[n.jsxs("div",{className:"absolute left-4 top-4 z-20 w-[min(420px,calc(100%-2rem))] rounded-lg border border-blue-200 bg-white/95 backdrop-blur px-3 py-2 shadow-sm",children:[n.jsx("div",{className:"text-[12px] font-semibold text-blue-800",children:" "}),n.jsx("div",{className:"text-[12px] text-gray-700 mt-1 leading-relaxed",children:vs})]}),n.jsx(n5,{title:"",indicatorId:sn,year:2026,scope:{mode:"regional",ctprvnCodes:[e.ctprvnCode],label:e.label},variant:"portal",mapHeight:Pr,hideBreadcrumb:!0,onRegionSelect:Ze,externalColorScheme:Ua,hideLegendPanel:!0,externalLevel:O,externalSelectedCode:k,onSubRegionsChange:Ke,getTooltipExtraLines:ie})]}),n.jsxs("div",{className:"mx-2 mb-2 px-3 py-2 rounded-lg bg-gradient-to-r from-gray-50 to-gray-100/80 border border-gray-200/60 shrink-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full",style:{backgroundColor:fr.color}}),n.jsxs("span",{className:"text-[12px] font-bold text-gray-600 tracking-wide",children:[Jr,"  "]}),n.jsx("span",{className:"text-[11px] text-gray-400",children:":  "})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-[12px] font-semibold text-gray-500 tabular-nums min-w-[42px] text-right",children:fr.unit===""?`${Math.round(aa)}`:fr.unit===""?`${Math.round(aa)}`:fr.unit===""?`${Math.round(aa)}`:`${aa.toFixed(1)}%`}),n.jsx("div",{className:"flex-1 h-3 rounded-md overflow-hidden flex shadow-inner",children:(Ed[Ua]||Ed.blue).map((J,fe)=>n.jsx("div",{className:"flex-1",style:{backgroundColor:J}},fe))}),n.jsx("span",{className:"text-[12px] font-semibold text-gray-500 tabular-nums min-w-[42px]",children:fr.unit===""?`${Math.round(Ls)}`:fr.unit===""?`${Math.round(Ls)}`:fr.unit===""?`${Math.round(Ls)}`:`${Ls.toFixed(1)}%`})]})]})]})}),n.jsxs("div",{className:`${Kt==="desktop"?"min-w-0 min-h-0 overflow-hidden":Kt==="tablet"?"hidden":"w-full shrink-0"} flex flex-col gap-2 ${ji}`,children:[n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3 shrink-0",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"2.  ( )"}),n.jsx("span",{className:"text-[11px] px-1.5 py-0.5 bg-indigo-50 text-indigo-600 rounded border border-indigo-200",children:Lr})]}),n.jsx("div",{className:"text-[11px] text-gray-500 mb-1",children:"  /  3 "}),n.jsxs("div",{className:"text-[12px] text-gray-500",children:[" : ",n.jsx("span",{className:"font-medium text-gray-700",children:Jr}),"  :  "]}),d?n.jsx("button",{type:"button",onClick:()=>d("cause"),className:"mt-2 text-[11px] text-blue-700 hover:text-blue-800 underline underline-offset-2",children:"     "}):null]}),n.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto overscroll-contain pr-1 space-y-2",children:$e?n.jsxs("div",{className:"space-y-2",children:[n.jsx(dF,{height:176}),n.jsx(dF,{height:176})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[n.jsx("div",{className:"grid grid-cols-1 gap-1.5",children:hf.map(J=>n.jsxs("div",{className:"rounded border border-gray-100 bg-gray-50 px-2 py-1.5",children:[n.jsx("div",{className:"text-[10px] text-gray-500",children:J.label}),n.jsx("div",{className:"text-[12px] font-medium text-gray-800 mt-0.5",children:J.value})]},J.label))}),n.jsxs("div",{className:"mt-2 rounded border border-gray-100 bg-gray-50 px-2 py-2",children:[n.jsx("div",{className:"text-[11px] font-semibold text-gray-700 mb-1",children:" Top3"}),n.jsx("div",{className:"space-y-1",children:jr.slice(0,3).map((J,fe)=>n.jsxs("div",{className:"flex items-center justify-between text-[11px]",children:[n.jsxs("span",{className:"text-gray-700",children:[fe+1,". ",J.name]}),n.jsx("span",{className:"font-semibold text-gray-900",children:fn(J)})]},`${J.name}-${fe}`))})]})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"3.  ( )"}),n.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded border border-emerald-200 bg-emerald-50 text-emerald-700",children:" "})]}),n.jsx("div",{className:"text-[11px] text-gray-500 mb-1.5",children:"    "}),d?n.jsx("button",{type:"button",onClick:()=>d("interventions"),className:"mb-2 text-[11px] text-blue-700 hover:text-blue-800 underline underline-offset-2",children:"/   "}):null,n.jsx("div",{className:"space-y-1.5",children:$s.map(J=>n.jsxs("button",{onClick:()=>L(J.id),className:`w-full rounded border px-2 py-2 text-left ${q===J.id?"border-blue-300 bg-blue-50":"border-gray-200 bg-white hover:bg-gray-50"}`,children:[n.jsx("div",{className:"text-[12px] font-medium text-gray-800",children:J.title}),n.jsx("div",{className:"text-[11px] text-gray-600 mt-0.5",children:J.detail}),n.jsx("div",{className:"text-[11px] text-blue-700 mt-1",children:J.expected})]},J.id))}),n.jsx("button",{onClick:()=>l?.({kpi:be,sgg:it,range:je,source:"overview",primaryDriverStage:Fs?.stage??es.primaryDriverStage}),className:"mt-2.5 w-full h-9 rounded-md text-[12px] font-semibold text-white bg-blue-600 hover:bg-blue-700",children:" "})]})]})})]})]})})]})}function AOe({regionCode:e,regionLabel:t,userRole:r="center_director"}){const a=r==="center_director",[s,i]=g.useState(!1),[o,l]=g.useState(()=>Hq(e)),d=g.useCallback((y,N)=>{l(v=>({...v,thresholds:{...v.thresholds,[y]:N}})),i(!1)},[]),u=g.useCallback((y,N)=>{l(v=>({...v,weights:{...v.weights,[y]:N}})),i(!1)},[]),p=g.useCallback(y=>{l(N=>({...N,notifications:{...N.notifications,[y]:!N.notifications[y]}})),i(!1)},[]),m=g.useCallback(()=>{wTe(e,o),i(!0),setTimeout(()=>i(!1),3e3)},[e,o]),h=g.useCallback(()=>{l({...i0}),i(!1)},[]),x=g.useMemo(()=>{const y=o.weights;return Number((y.slaBreachRate+y.notReachedRate+y.avgWaitTimeNorm+y.longWaitRate).toFixed(2))},[o.weights]);return n.jsxs("div",{className:"p-6 max-w-4xl mx-auto space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-bold text-gray-800",children:""}),n.jsxs("p",{className:"text-sm text-gray-500 mt-0.5",children:[t,"     "]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[s&&n.jsxs("span",{className:"flex items-center gap-1 text-green-600 text-sm font-medium animate-pulse",children:[n.jsx(Po,{className:"h-4 w-4"}),"  "]}),n.jsx("button",{onClick:h,disabled:!a,className:"px-3 py-1.5 text-xs border border-gray-300 rounded-lg text-gray-600 hover:bg-gray-50 disabled:opacity-40 disabled:cursor-not-allowed",children:" "}),n.jsxs("button",{onClick:m,disabled:!a,className:"flex items-center gap-1.5 px-4 py-1.5 text-xs font-semibold bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-40 disabled:cursor-not-allowed shadow-sm",children:[n.jsx(SO,{className:"h-3.5 w-3.5"}),""]})]})]}),n.jsxs("section",{className:"bg-white border border-gray-200 rounded-xl p-5",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(OY,{className:"h-4.5 w-4.5 text-indigo-600"}),n.jsx("h3",{className:"text-sm font-bold text-gray-800",children:" "}),n.jsx("span",{className:"text-[10px] bg-gray-100 text-gray-500 px-2 py-0.5 rounded-full",children:" "})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-3",children:[n.jsx("div",{className:"text-[10px] text-indigo-500 font-medium mb-1",children:" "}),n.jsx("div",{className:"text-sm font-semibold text-indigo-800",children:"case_id ( )"}),n.jsx("div",{className:"text-[10px] text-indigo-400 mt-1",children:"     1 "})]}),n.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-3",children:[n.jsx("div",{className:"text-[10px] text-indigo-500 font-medium mb-1",children:" "}),n.jsx("div",{className:"text-sm font-semibold text-indigo-800",children:"event_id/signal_id  "}),n.jsx("div",{className:"text-[10px] text-indigo-400 mt-1",children:"  signal   "})]}),n.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-3",children:[n.jsx("div",{className:"text-[10px] text-indigo-500 font-medium mb-1",children:"  "}),n.jsx("div",{className:"text-sm font-semibold text-indigo-800",children:"   "}),n.jsx("div",{className:"text-[10px] text-indigo-400 mt-1",children:" KPI       "})]})]})]}),n.jsxs("section",{className:"bg-white border border-gray-200 rounded-xl p-5",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(T8,{className:"h-4.5 w-4.5 text-orange-600"}),n.jsx("h3",{className:"text-sm font-bold text-gray-800",children:" / "}),!a&&n.jsx(Md,{className:"h-3.5 w-3.5 text-gray-400"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"   (thresholdDays)"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"number",min:1,max:90,value:o.thresholds.longWaitDays,onChange:y=>d("longWaitDays",Number(y.target.value)),disabled:!a,className:"w-24 px-3 py-1.5 border border-gray-300 rounded-lg text-sm disabled:bg-gray-100 disabled:cursor-not-allowed focus:ring-1 focus:ring-blue-500 focus:outline-none"}),n.jsx("span",{className:"text-xs text-gray-500",children:""}),n.jsxs("span",{className:"text-[10px] text-gray-400 ml-2",children:["  ",o.thresholds.longWaitDays,'    " "']})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"SLA   (slaNearDays)"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"number",min:1,max:30,value:o.thresholds.slaNearDays,onChange:y=>d("slaNearDays",Number(y.target.value)),disabled:!a,className:"w-24 px-3 py-1.5 border border-gray-300 rounded-lg text-sm disabled:bg-gray-100 disabled:cursor-not-allowed focus:ring-1 focus:ring-blue-500 focus:outline-none"}),n.jsx("span",{className:"text-xs text-gray-500",children:""}),n.jsxs("span",{className:"text-[10px] text-gray-400 ml-2",children:["SLA  ",o.thresholds.slaNearDays,'  ""']})]})]})]}),n.jsxs("div",{className:"border-t border-gray-100 pt-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("span",{className:"text-xs font-semibold text-gray-700",children:"Top5   (w1~w4)"}),n.jsxs("span",{className:`text-[10px] font-medium px-2 py-0.5 rounded-full ${x===1?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:[": ",x," ",x===1?"":" 1.00"]})]}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{key:"slaBreachRate",label:"w1  SLA ",color:"text-red-600"},{key:"notReachedRate",label:"w2  ",color:"text-orange-600"},{key:"avgWaitTimeNorm",label:"w3  ",color:"text-purple-600"},{key:"longWaitRate",label:"w4  ",color:"text-blue-600"}].map(({key:y,label:N,color:v})=>n.jsxs("div",{children:[n.jsx("label",{className:`text-[10px] font-medium ${v} block mb-1`,children:N}),n.jsx("input",{type:"number",min:0,max:1,step:.05,value:o.weights[y],onChange:j=>u(y,Number(j.target.value)),disabled:!a,className:"w-full px-3 py-1.5 border border-gray-300 rounded-lg text-sm disabled:bg-gray-100 disabled:cursor-not-allowed focus:ring-1 focus:ring-blue-500 focus:outline-none"})]},y))}),n.jsx("div",{className:"mt-2 text-[10px] text-gray-400",children:"risk_score = w1SLA + w2 + w3() + w4"})]})]}),n.jsxs("section",{className:"bg-white border border-gray-200 rounded-xl p-5",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(jp,{className:"h-4.5 w-4.5 text-yellow-600"}),n.jsx("h3",{className:"text-sm font-bold text-gray-800",children:" "}),!a&&n.jsx(Md,{className:"h-3.5 w-3.5 text-gray-400"})]}),n.jsx("div",{className:"space-y-3",children:[{key:"slaBreachAlert",label:"SLA  ",desc:"SLA     ",ready:!0},{key:"slaImminentAlert",label:"SLA  ",desc:"SLA  N  ",ready:!0},{key:"longWaitSurge",label:"  ",desc:"    30%   ",ready:!1},{key:"riskIncrease",label:"  ",desc:"     ",ready:!1}].map(({key:y,label:N,desc:v,ready:j})=>n.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-100 hover:bg-gray-50 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Qa,{className:`h-4 w-4 ${o.notifications[y]?"text-yellow-500":"text-gray-300"}`}),n.jsxs("div",{children:[n.jsxs("div",{className:"text-xs font-medium text-gray-800 flex items-center gap-1.5",children:[N,!j&&n.jsx("span",{className:"text-[9px] bg-gray-100 text-gray-400 px-1.5 py-0.5 rounded-full",children:""})]}),n.jsx("div",{className:"text-[10px] text-gray-500",children:v})]})]}),n.jsx("button",{onClick:()=>p(y),disabled:!a,className:`relative w-10 h-5.5 rounded-full transition-colors disabled:opacity-40 disabled:cursor-not-allowed ${o.notifications[y]?"bg-blue-500":"bg-gray-300"}`,style:{height:"22px"},children:n.jsx("span",{className:"absolute top-0.5 w-4 h-4 rounded-full bg-white shadow transition-transform",style:{left:o.notifications[y]?"22px":"2px"}})})]},y))})]}),n.jsxs("section",{className:"bg-white border border-gray-200 rounded-xl p-5",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(Ol,{className:"h-4.5 w-4.5 text-green-600"}),n.jsx("h3",{className:"text-sm font-bold text-gray-800",children:" / "})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-green-50 border border-green-200",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"w-6 h-6 rounded-full bg-green-500 text-white flex items-center justify-center text-[10px] font-bold",children:""}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs font-medium text-green-800",children:""}),n.jsx("div",{className:"text-[10px] text-green-600",children:"   "})]})]}),n.jsx("span",{className:`text-[10px] font-semibold px-2 py-0.5 rounded-full ${a?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:a?" ":""})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-100",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"w-6 h-6 rounded-full bg-gray-400 text-white flex items-center justify-center text-[10px] font-bold",children:""}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs font-medium text-gray-700",children:" "}),n.jsx("div",{className:"text-[10px] text-gray-500",children:"     "})]})]}),n.jsx("span",{className:`text-[10px] font-semibold px-2 py-0.5 rounded-full ${a?"":"bg-gray-100 text-gray-600"}`,children:a?"":" "})]})]}),n.jsxs("div",{className:"mt-3 text-[10px] text-gray-400",children:[" : localStorage  regional.settings.",e,".*    "]})]})]})}const rO={regionalSla:" SLA",regionalQueueRisk:" ( )",regionalRecontact:"  ",regionalDataReadiness:"  ",regionalGovernance:"  ",regionalAdTransitionHotspot:"AD  ",regionalDxDelayHotspot:" ",regionalScreenToDxRate:" "},U5={contact:"",recontact:"",L2:"L2","3rd":"3"},COe=["contact","recontact","L2","3rd"],pF={week:"",month:"",quarter:""},gb={center:"",hospital:"",system:"",external:""},hF={high:"High",medium:"Med",low:"Low"},_Oe={watch:"bg-amber-50 text-amber-700 border-amber-200",critical:"bg-red-50 text-red-700 border-red-200"},o0={count:"",ratio:""},gF={call_log:"",appointment:"",integration:"",manual:""},xF={high:"High",med:"Med",low:"Low"},TOe={high:"border-emerald-200 bg-emerald-50 text-emerald-700",med:"border-amber-200 bg-amber-50 text-amber-700",low:"border-rose-200 bg-rose-50 text-rose-700"},XA={backlogType:{snapshot_waiting:" ",period_accumulated:" "},denominator:{overall:" ",stage:"Stage ",cause:" "},areaOwnership:{resident:" ",center:" ",hospital:"  "}},OOe={none:"bg-gray-50 text-gray-600 border-gray-200",watch:"bg-amber-50 text-amber-700 border-amber-200",critical:"bg-red-50 text-red-700 border-red-200"},sW=[{causeKey:"staff_shortage",causeLabel:"  ",owner:"center",actionable:!0,regionalNeed:"high"},{causeKey:"contact_failure",causeLabel:" ",owner:"center",actionable:!0,regionalNeed:"high"},{causeKey:"data_gap",causeLabel:" ",owner:"system",actionable:!0,regionalNeed:"medium"},{causeKey:"hospital_slot_delay",causeLabel:"  ",owner:"hospital",actionable:!1,regionalNeed:"high"},{causeKey:"external_dependency",causeLabel:"  ",owner:"external",actionable:!1,regionalNeed:"medium"}],kOe={contact:["contact_failure","staff_shortage","data_gap"],recontact:["contact_failure","staff_shortage","external_dependency"],L2:["data_gap","hospital_slot_delay","staff_shortage"],"3rd":["hospital_slot_delay","external_dependency","data_gap"]},ROe={staff_shortage:{contact:1.2,recontact:1.15,L2:.95,"3rd":.9},contact_failure:{contact:1.28,recontact:1.35,L2:.8,"3rd":.78},data_gap:{contact:.84,recontact:.88,L2:1.2,"3rd":1.16},hospital_slot_delay:{contact:.7,recontact:.76,L2:1.22,"3rd":1.32},external_dependency:{contact:.75,recontact:.83,L2:1.06,"3rd":1.24}},POe={staff_shortage:["    "," 2    ","48   "],contact_failure:["     ","   ","    "],data_gap:["     ","     ","24   "],hospital_slot_delay:["     ","     ","    "],external_dependency:["    ","    ","     "]};function La(e){let t=0;for(let r=0;r<e.length;r+=1)t=t*31+e.charCodeAt(r)>>>0;return t}function ya(e,t,r){return t+(r-t)*(La(e)%1e3/1e3)}function iW(e,t,r){return Math.max(t,Math.min(r,e))}function bF(e){return e==="contact"||e==="recontact"||e==="L2"||e==="3rd"?e:null}function DOe(e){return e==="week"||e==="month"||e==="quarter"?e:null}function IOe(e){return e?e in rO:!1}function Wi(e){return`${Math.round(e).toLocaleString()}`}function wo(e){return`${e.toFixed(1)}%`}function yF(e,t){return e==="count"?Wi(t):wo(t)}function MOe(e){const t=COe.map((a,s)=>{const i=Math.round(ya(`${e}-${a}-count`,82+s*12,360+s*20)),o=Math.round(ya(`${e}-${a}-dwell`,48+s*28,420+s*35)),l=Number(ya(`${e}-${a}-delta`,-18,22).toFixed(1)),d=kOe[a].slice(0,2).map((u,p)=>({causeKey:u,ratio:Number(ya(`${e}-${a}-${u}-top-${p}`,14,44-p*6).toFixed(1))}));return{stageKey:a,stageLabel:U5[a],count:i,avgDwellMinutes:o,deltaVsRegionalAvg:l,topCauses:d}}),r=t.reduce((a,s)=>a+s.count,0);return t.map(a=>({...a,ratio:r>0?Number((a.count/r*100).toFixed(1)):0}))}function LOe(e,t,r){const a=sW.map(i=>{const o=t?ROe[i.causeKey]?.[t]??1:1,l=r?1+(La(`${r}-${i.causeKey}`)%120-60)/700:1,d=Math.max(8,Math.round(ya(`${e}-${i.causeKey}-count`,42,260)*o*l)),u=["call_log","appointment","integration","manual"],p=u[La(`${e}-${i.causeKey}-evidence-type`)%u.length],m=["high","med","low"],h=m[La(`${e}-${i.causeKey}-evidence-confidence`)%m.length],x=La(`${e}-${i.causeKey}-evidence-link`)%100>=23,y=["  "," ","  ","   "],N=y[La(`${e}-${i.causeKey}-missing`)%y.length];return{...i,count:d,evidence:{type:p,link:x?`/regional/bottleneck?cause=${i.causeKey}`:null,confidence:h,...x?{}:{missingReason:N}}}}).sort((i,o)=>o.count-i.count),s=a.reduce((i,o)=>i+o.count,0);return a.map(i=>({causeKey:i.causeKey,causeLabel:i.causeLabel,ratio:s>0?Number((i.count/s*100).toFixed(1)):0,count:i.count,meta:{owner:i.owner,actionable:i.actionable,regionalNeed:i.regionalNeed},evidence:i.evidence}))}function $Oe(e,t,r,a){const s=t.slice(0,Math.min(10,t.length));if(!s.length)return[];const i=r?1+La(`${r}-weight`)%90/200:1,o=a?1+La(`${a}-weight`)%70/220:1,l=s.map(m=>{const h=Math.round(ya(`${e}-area-${m}-count`,36,220)*i*o);return{areaKey:m,areaLabel:m,count:h}}),d=l.reduce((m,h)=>m+h.count,0),u=l.map(m=>({...m,ratio:d>0?Number((m.count/d*100).toFixed(1)):0})),p=u.reduce((m,h)=>m+h.ratio,0)/Math.max(1,u.length);return u.map(m=>{const h=Number((m.ratio-p).toFixed(1)),x=Math.abs(h),y=x>=8?"critical":x>=4?"watch":"none";return{...m,deltaVsAvg:h,highlightLevel:y}}).sort((m,h)=>h.ratio-m.ratio)}function FOe(e,t,r,a,s){const i=t==="week"?7:t==="month"?8:12,o=Array.from({length:i},(y,N)=>t==="week"?`D-${i-1-N}`:t==="month"?`W-${i-1-N}`:`M-${i-1-N}`),l=s?La(`${s}-trend-bias`)%90/18:0,d=a?La(`${a}-trend-bias`)%60/20:0,u=r?La(`${r}-trend-bias`)%70/18:0,p=ya(`${e}-trend-base-count`,80,220)+l+d+u,m=ya(`${e}-trend-slope-count`,-6,9),h=ya(`${e}-trend-base-ratio`,10,36)+u/3,x=ya(`${e}-trend-slope-ratio`,-1.2,1.8);return o.map((y,N)=>{const v=ya(`${e}-${y}-count-noise`,-14,14),j=ya(`${e}-${y}-ratio-noise`,-1.8,1.8),E=Math.max(1,Math.round(p+m*N+v)),C=Number(iW(h+x*N+j,0,100).toFixed(1));return{dateKey:y,count:E,ratio:C}})}function oW(e){const t=La(`${e}-backlog-type`)%100<82?"snapshot_waiting":"period_accumulated",r=["overall","stage","cause"],a=r[La(`${e}-denominator`)%r.length],s=["center","resident","hospital"],i=s[La(`${e}-area-ownership`)%s.length];return{backlogType:t,denominator:a,areaOwnership:i}}function H5(e,t,r){const a=t?La(`${t}-coverage`)%16-8:0,s=r?La(`${r}-coverage`)%14-7:0,i=iW(Number((ya(`${e}-classified`,64,94)+a+s).toFixed(1)),28,98),o=Number((100-i).toFixed(1)),l=["system","center","hospital","external"],d=l[La(`${e}-unclassified-owner`)%l.length];return{classifiedRatio:i,unclassifiedRatio:o,unclassifiedOwner:d}}function BOe(e,t){if(e.length<3)return[];const r=[],a=e.map(u=>t==="count"?u.count:u.ratio);let s=1;for(let u=a.length-1;u>0&&a[u]>a[u-1];u-=1)s+=1;if(s>=3){const u=Number((a[a.length-1]-a[Math.max(0,a.length-s)]).toFixed(1));r.push({type:"increasing_streak",metric:t,days:s,severity:s>=5?"critical":"watch",delta:u})}const i=a.slice(-Math.min(5,a.length));if(!i.some((u,p)=>p>0&&u<i[p-1])&&i.length>=4&&i[i.length-1]>=i[0]){const u=Number((i[i.length-1]-i[0]).toFixed(1));r.push({type:"no_decrease",metric:t,days:i.length,severity:i.length>=5?"critical":"watch",delta:u})}const l=Math.max(1,a.length-4),d=a.slice(l-1);if(d.length>=4&&d[1]<d[0]&&d[2]>d[1]&&d[3]>d[2]){const u=Number((d[3]-d[1]).toFixed(1));r.push({type:"rebound",metric:t,days:2,severity:"watch",delta:u})}return r}function UOe(e){return[{stage:"Stage1 (ML)",signal:Number(ya(`${e}-stage1-signal`,-16,20).toFixed(1)),queue:Math.round(ya(`${e}-stage1-queue`,-20,48)),desc:"       "},{stage:"Stage2 (ANN)",signal:Number(ya(`${e}-stage2-signal`,-14,18).toFixed(1)),queue:Math.round(ya(`${e}-stage2-queue`,-18,42)),desc:"   2    "},{stage:"Stage3 (CNN)",signal:Number(ya(`${e}-stage3-signal`,-12,16).toFixed(1)),queue:Math.round(ya(`${e}-stage3-queue`,-16,38)),desc:"   3     "}]}function HOe(e,t,r){return{stageBacklogBreakdown:MOe(`${e}-stage`),kpiDefinition:oW(`${e}-definition`),classificationCoverage:H5(`${e}-coverage`,t,r)}}function GOe(e,t,r){return{causes:LOe(`${e}-causes`,t,r),coverage:H5(`${e}-coverage`,t,null)}}function KOe(e,t,r,a,s,i){const o=FOe(e,t,r,a,s),l=BOe(o,i);return{metric:i,points:o.map(d=>({dateKey:d.dateKey,value:i==="count"?d.count:d.ratio,count:d.count,ratio:d.ratio})),alerts:l}}function zOe(e,t,r,a){const s=t.reduce((l,d)=>l+d.count,0),i=t.reduce((l,d)=>l+d.avgDwellMinutes*d.count,0)/Math.max(1,s);return{kpiValue:(()=>{if(e==="regionalQueueRisk")return s;if(e==="regionalDxDelayHotspot")return Number((i/60).toFixed(1));if(e==="regionalSla"){const l=t.find(d=>d.stageKey==="recontact")?.ratio??t[0]?.ratio??0;return Number((100-l).toFixed(1))}return Number(e==="regionalRecontact"?(r.find(l=>l.causeKey==="contact_failure")?.ratio??r[0]?.ratio??0).toFixed(1):e==="regionalDataReadiness"?(100-(r.find(l=>l.causeKey==="data_gap")?.ratio??0)).toFixed(1):e==="regionalGovernance"?(100-a.unclassifiedRatio).toFixed(1):e==="regionalAdTransitionHotspot"?(r[0]?.ratio??0).toFixed(1):e==="regionalScreenToDxRate"?(100-(r.find(l=>l.causeKey==="hospital_slot_delay")?.ratio??0)).toFixed(1):(r[0]?.ratio??0).toFixed(1))})(),backlogCount:s,avgDwellMin:Number(i.toFixed(1)),stageBreakdown:t,causeBreakdownTop5:r.slice(0,5),coverage:a}}async function qOe(e){const t="regional_bottleneck_intervention_snapshots_v1",r=window.localStorage.getItem(t),a=r?JSON.parse(r):[],s=`INT-${Date.now()}`,i=`SNAP-${Date.now()}`;return a.unshift({snapshotId:i,interventionId:s,createdAt:new Date().toISOString(),payload:e}),window.localStorage.setItem(t,JSON.stringify(a.slice(0,200))),{interventionId:s,snapshotId:i,redirectUrl:`/regional/interventions/new?interventionId=${s}&snapshotId=${i}`}}function WOe(e,t,r,a,s,i,o){const l=s?r.find(m=>m.stageKey===s)??r[0]:r[0],d=o?a.find(m=>m.areaKey===o)??a[0]:a[0];return(i?t.filter(m=>m.causeKey===i):t.slice(0,3)).filter(m=>!!(m&&typeof m.ratio=="number"&&typeof m.count=="number")).slice(0,3).map((m,h)=>{const x=Number((m.ratio*.62+(l?.ratio??0)*.22+Math.max(0,d?.deltaVsAvg??0)*.16).toFixed(1)),y=m.meta.owner,N=POe[m.causeKey]??["    ","    ","   "];return{recId:`REC-${h+1}-${La(`${e}-${m.causeKey}`)}`,evidence:{causeKey:m.causeKey,causeLabel:m.causeLabel,stageKey:l?.stageKey??"contact",stageLabel:l?.stageLabel??U5.contact,areaKey:d?.areaKey??null,areaLabel:d?.areaLabel??" "},action:{title:xt(`${m.causeLabel}    `),steps:N,ownerSuggested:y},expectedEffect:{qualitative:xt("       ")},priorityScore:x}})}function VOe(e){return e>=8?"text-red-700":e>=4?"text-amber-700":e<=-6?"text-blue-700":"text-gray-700"}function YOe(e,t=""){return`${e>0?"+":""}${e.toFixed(1)}${t}`}function XOe(e){const t=o0[e.metric],r=e.metric==="ratio"?`${e.delta>0?"+":""}${e.delta.toFixed(1)}%p`:`${e.delta>0?"+":""}${Math.round(e.delta)}`;return e.type==="increasing_streak"?`${t} ${e.days}  (${r})`:e.type==="no_decrease"?`${t} ${e.days}  (${r})`:`${t}   (${r})`}function Mh(){return n.jsxs("div",{className:"animate-pulse space-y-2",children:[n.jsx("div",{className:"h-4 w-1/3 rounded bg-gray-200"}),n.jsx("div",{className:"h-40 rounded bg-gray-100"}),n.jsx("div",{className:"h-4 w-2/3 rounded bg-gray-200"})]})}function QOe({region:e,districtOptions:t,selectedKpiKey:r,selectedRegionSgg:a,selectedRange:s,onSelectedKpiKeyChange:i,onSelectedRegionSggChange:o,onSelectedRangeChange:l,onCreateIntervention:d}){const u=g.useMemo(()=>new URLSearchParams(window.location.search),[]),[p,m]=g.useState(u.get("stageImpact")!=="0"),[h,x]=g.useState(bF(u.get("stage"))),[y,N]=g.useState(u.get("cause")||null),[v,j]=g.useState(u.get("trendMetric")==="count"?"count":"ratio"),[E,C]=g.useState(u.get("compareArea")||u.get("area")||null),A=g.useRef(null),S=g.useRef(null),_=g.useCallback(()=>{const Z=new URLSearchParams(window.location.search),je=Z.get("kpi"),ge=Z.get("sigungu"),be=DOe(Z.get("period"));IOe(je)&&je!==r&&i(je),ge!==null&&ge!==(a??"")&&o(ge||null),be&&be!==s&&l(be);const it=Z.get("stageImpact")!=="0",Fe=bF(Z.get("stage")),Et=Z.get("cause")||null,Mt=Z.get("compareArea")||Z.get("area")||null,Be=Z.get("trendMetric")==="count"?"count":"ratio";m(tr=>tr===it?tr:it),x(tr=>tr===Fe?tr:Fe),N(tr=>tr===Et?tr:Et),C(tr=>tr===Mt?tr:Mt),j(tr=>tr===Be?tr:Be)},[i,l,o,r,s,a]);g.useEffect(()=>{_()},[_]),g.useEffect(()=>{const Z=()=>_();return window.addEventListener("popstate",Z),()=>window.removeEventListener("popstate",Z)},[_]),g.useEffect(()=>{E&&!t.includes(E)&&C(null)},[t,E]),g.useEffect(()=>(A.current&&window.clearTimeout(A.current),A.current=window.setTimeout(()=>{const Z=new URL(window.location.href),je=Z.searchParams;je.set("kpi",r),je.set("period",s),a?je.set("sigungu",a):je.delete("sigungu"),je.set("stageImpact",p?"1":"0"),h?je.set("stage",h):je.delete("stage"),y?je.set("cause",y):je.delete("cause"),E?je.set("area",E):je.delete("area"),E?je.set("compareArea",E):je.delete("compareArea"),je.set("trendMetric",v);const ge=je.toString();`?${ge}`!==Z.search&&window.history.replaceState({},"",`${Z.pathname}?${ge}${Z.hash}`)},180),()=>{A.current&&window.clearTimeout(A.current)}),[E,y,r,s,a,h,p,v]);const O=g.useMemo(()=>({kpiKey:r,sigungu:a??"",period:s,stageImpactOn:p,selectedStage:h,selectedCauseKey:y,selectedCompareAreaKey:E,trendMetric:v}),[E,y,r,s,a,h,p,v]),D=g.useMemo(()=>`${e.id}-${O.sigungu||"all"}-${O.kpiKey}-${O.period}`,[O.kpiKey,O.period,O.sigungu,e.id]),k=xc({queryKey:["regional-cause","summary",O.kpiKey,O.sigungu,O.period,O.selectedStage??"all",O.selectedCauseKey??"all",O.stageImpactOn?"impact-on":"impact-off"],queryFn:async()=>HOe(`${D}-summary`,O.selectedStage,O.selectedCauseKey),staleTime:3e4,placeholderData:Z=>Z}),M=xc({queryKey:["regional-cause","causes",O.kpiKey,O.sigungu,O.period,O.selectedStage??"all",O.selectedCompareAreaKey??"all"],queryFn:async()=>GOe(`${D}-causes`,O.selectedStage,O.selectedCompareAreaKey),staleTime:3e4,placeholderData:Z=>Z}),F=xc({queryKey:["regional-cause","area-comparison",O.kpiKey,O.sigungu,O.period,O.selectedStage??"all",O.selectedCauseKey??"all",O.selectedCompareAreaKey??"all"],queryFn:async()=>$Oe(`${D}-area-${O.selectedCauseKey??"all"}`,t,O.selectedCauseKey,O.selectedStage),staleTime:3e4,placeholderData:Z=>Z}),$=xc({queryKey:["regional-cause","trend",O.kpiKey,O.sigungu,O.period,O.selectedStage??"all",O.selectedCauseKey??"all",O.selectedCompareAreaKey??"all",O.trendMetric],queryFn:async()=>KOe(`${D}-trend`,O.period,O.selectedCauseKey,O.selectedStage,O.selectedCompareAreaKey,O.trendMetric),staleTime:3e4,placeholderData:Z=>Z}),B=g.useMemo(()=>UOe(`${D}-impact`),[D]),P=k.data?.stageBacklogBreakdown??[],W=k.data?.kpiDefinition??oW(`${D}-fallback-definition`),K=k.data?.classificationCoverage??H5(`${D}-fallback-summary-cov`,h,y),G=M.data?.causes??[],U=M.data?.coverage??K,te=F.data??[],re=$.data,q=re?.points??[],L=re?.alerts??[],H=g.useMemo(()=>WOe(`${D}-rec`,G,P,te,h,y,E),[te,D,G,E,y,h,P]),ae=k.isPending||M.isPending||F.isPending;g.useEffect(()=>{G.length&&(y&&G.some(Z=>Z.causeKey===y)||N(G[0].causeKey))},[G,y]),g.useEffect(()=>{!te.length||!E||te.some(Z=>Z.areaKey===E)||C(null)},[te,E]);const oe=g.useMemo(()=>G.find(Z=>Z.causeKey===y)??null,[G,y]),ve=g.useMemo(()=>te.find(Z=>Z.areaKey===E)??null,[te,E]),ce=g.useMemo(()=>P.reduce((Z,je)=>Z+je.count,0),[P]),Ee=g.useMemo(()=>P.length?[...P].sort((Z,je)=>je.count-Z.count)[0]:null,[P]),xe=g.useMemo(()=>G.length?G[0]:null,[G]),Te=g.useMemo(()=>te.filter(Z=>Z.highlightLevel==="critical").length,[te]),ye=g.useCallback(Z=>{const{x:je=0,y:ge=0,width:be=0,payload:it,index:Fe,value:Et}=Z??{},Mt=it??(typeof Fe=="number"?P[Fe]:void 0),Be=Mt?.ratio,tr=Mt?.count??Et;return typeof Be!="number"||typeof tr!="number"?null:n.jsxs("text",{x:je+be+8,y:ge+13,fill:"#374151",fontSize:11,children:[wo(Be),"  ",Wi(tr)]})},[P]),se=g.useCallback(Z=>{const{x:je=0,y:ge=0,width:be=0,payload:it,index:Fe,value:Et}=Z??{},Mt=it??(typeof Fe=="number"?G[Fe]:void 0),Be=Mt?.ratio,tr=Mt?.count??Et;return typeof Be!="number"||typeof tr!="number"?null:n.jsxs("text",{x:je+be+8,y:ge+13,fill:"#1f2937",fontSize:11,children:[wo(Be),"  ",Wi(tr)]})},[G]),ct=g.useMemo(()=>{if(!q.length)return xt("  ");const Z=q[q.length-1],je=o0[v];return xt(`${Z.dateKey}  ${je} ${yF(v,Z.value)} (  )`)},[v,q]),Q=sY({mutationFn:qOe}),he=g.useCallback(Z=>{const je=Z?.stage??h,ge=Z?.causeKey??y,be=Z?.area??E??a,it=zOe(r,P,G,U),Fe={...O,selectedStage:je,selectedCauseKey:ge,selectedCompareAreaKey:be};Q.mutate({from:"bottleneck",queryState:Fe,beforeSnapshot:it},{onSuccess:({snapshotId:Et})=>{const Mt=je?U5[je]:null;d?.({region:be??null,kpiKey:r,range:s,source:"cause",primaryDriverStage:Mt??void 0,selectedStage:je??null,selectedCauseKey:ge??null,selectedArea:be??null,snapshotId:Et})}})},[U,G,Q,O,d,y,r,s,a,h,E,P]),$e=g.useCallback(Z=>{x(Z.evidence.stageKey),N(Z.evidence.causeKey),C(Z.evidence.areaKey),S.current?.scrollIntoView({behavior:"smooth",block:"start"})},[]);return n.jsxs("div",{className:"h-full overflow-auto bg-slate-50 px-4 py-3 space-y-3",children:[n.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-4 shadow-sm",children:[n.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-semibold text-slate-900",children:" "}),n.jsx("div",{className:"text-[12px] text-slate-500",children:"()  ()  () 2  "})]}),n.jsx("button",{onClick:()=>he(),disabled:Q.isPending,className:"px-3 py-1.5 rounded-md bg-blue-600 text-white text-sm font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:Q.isPending?" ...":" "})]}),n.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-5 gap-2.5",children:[n.jsx("select",{value:r,onChange:Z=>i(Z.target.value),className:"px-2.5 py-2 border border-slate-300 rounded-lg text-sm text-slate-700 bg-white",children:Object.entries(rO).map(([Z,je])=>n.jsx("option",{value:Z,children:je},Z))}),n.jsxs("select",{value:a??"",onChange:Z=>o(Z.target.value||null),className:"px-2.5 py-2 border border-slate-300 rounded-lg text-sm text-slate-700 bg-white",children:[n.jsxs("option",{value:"",children:[e.label," "]}),t.map(Z=>n.jsx("option",{value:Z,children:Z},Z))]}),n.jsxs("select",{value:s,onChange:Z=>l(Z.target.value),className:"px-2.5 py-2 border border-slate-300 rounded-lg text-sm text-slate-700 bg-white",children:[n.jsx("option",{value:"week",children:""}),n.jsx("option",{value:"month",children:""}),n.jsx("option",{value:"quarter",children:""})]}),n.jsxs("button",{onClick:()=>m(Z=>!Z),className:`px-2.5 py-2 border rounded-lg text-sm flex items-center justify-center gap-1 ${p?"border-indigo-300 bg-indigo-50 text-indigo-700":"border-slate-300 text-slate-700 hover:bg-slate-50"}`,children:["Stage  ",p?"ON":"OFF"," ",p?n.jsx(Ac,{className:"h-4 w-4"}):n.jsx(gs,{className:"h-4 w-4"})]}),n.jsxs("div",{className:"px-2.5 py-2 border border-slate-200 rounded-lg text-xs text-slate-600 flex items-center bg-slate-50",children:["URL sync: ",a??" ","  ",pF[s]]})]}),n.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2 text-[11px]",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-2.5 py-1 text-slate-700",children:[" : ",XA.backlogType[W.backlogType],"  : ",XA.denominator[W.denominator],"  : ",XA.areaOwnership[W.areaOwnership]]}),n.jsxs("div",{className:"rounded-lg border border-indigo-200 bg-indigo-50 px-2.5 py-1 text-indigo-700",children:["   ",K.classifiedRatio.toFixed(1),"% /  ",K.unclassifiedRatio.toFixed(1),"%"]}),n.jsxs("div",{className:"rounded-lg border border-amber-200 bg-amber-50 px-2.5 py-1 text-amber-700",children:[" : ",gb[K.unclassifiedOwner]]})]}),n.jsxs("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-2",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white px-3 py-2",children:[n.jsx("div",{className:"text-[11px] text-slate-500",children:"  "}),n.jsx("div",{className:"text-[16px] font-semibold text-slate-900",children:Wi(ce)}),n.jsx("div",{className:"text-[11px] text-slate-500",children:" KPI    "})]}),n.jsxs("div",{className:"rounded-lg border border-red-200 bg-red-50 px-3 py-2",children:[n.jsx("div",{className:"text-[11px] text-red-600",children:" "}),n.jsx("div",{className:"text-[16px] font-semibold text-red-700",children:Ee?`${Ee.stageLabel} ${wo(Ee.ratio)}`:"-"}),n.jsx("div",{className:"text-[11px] text-red-600",children:Ee?`${Wi(Ee.count)}   ${YOe(Ee.deltaVsRegionalAvg,"%p")}`:"  "})]}),n.jsxs("div",{className:"rounded-lg border border-amber-200 bg-amber-50 px-3 py-2",children:[n.jsx("div",{className:"text-[11px] text-amber-700",children:" "}),n.jsx("div",{className:"text-[16px] font-semibold text-amber-800",children:xe?xe.causeLabel:"-"}),n.jsx("div",{className:"text-[11px] text-amber-700",children:xe?`${wo(xe.ratio)}  ${Wi(xe.count)}`:"  "})]}),n.jsxs("div",{className:"rounded-lg border border-blue-200 bg-blue-50 px-3 py-2",children:[n.jsx("div",{className:"text-[11px] text-blue-700",children:" "}),n.jsxs("div",{className:"text-[16px] font-semibold text-blue-800",children:[Te,""]}),n.jsx("div",{className:"text-[11px] text-blue-700",children:"      "})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-12 gap-3",children:[n.jsxs("div",{className:"xl:col-span-5 bg-white border border-slate-200 rounded-xl p-3.5 relative shadow-sm",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("div",{className:"text-sm font-semibold text-slate-700",children:"  "}),n.jsx("div",{className:"text-[11px] text-slate-500",children:"Stage   /  "})]}),!P.length&&k.isPending?n.jsx(Mh,{}):n.jsx("div",{className:"rounded-lg border border-slate-100 bg-slate-50/60 p-2",style:{height:312},children:n.jsx(xa,{width:"100%",height:"100%",children:n.jsxs(Hu,{data:P,margin:{top:12,right:104,left:-4,bottom:10},children:[n.jsx(ms,{strokeDasharray:"2 3",vertical:!1,stroke:"#e2e8f0"}),n.jsx(Vn,{dataKey:"stageLabel",tick:{fontSize:12,fill:"#64748b"},axisLine:!1,tickLine:!1}),n.jsx(Hn,{tick:{fontSize:11,fill:"#64748b"},axisLine:!1,tickLine:!1,width:26}),n.jsx(en,{cursor:{fill:"#eff6ff"},content:({active:Z,payload:je})=>{if(!Z||!je?.length)return null;const ge=je[0].payload;return n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white px-2.5 py-2 text-[11px] shadow-md",children:[n.jsx("div",{className:"font-semibold text-slate-800",children:ge.stageLabel}),n.jsxs("div",{className:"text-slate-700",children:[" ",wo(ge.ratio),"   ",Wi(ge.count)]}),n.jsxs("div",{className:"text-slate-600",children:[" : ",Math.round(ge.avgDwellMinutes),""]}),n.jsxs("div",{className:VOe(ge.deltaVsRegionalAvg),children:["    ",ge.deltaVsRegionalAvg>0?"+":"",ge.deltaVsRegionalAvg.toFixed(1),"%p"]}),n.jsxs("div",{className:"text-slate-600",children:[" Top2:"," ",ge.topCauses.map(be=>`${sW.find(Fe=>Fe.causeKey===be.causeKey)?.causeLabel??be.causeKey} ${wo(be.ratio)}`).join("  ")]})]})}}),n.jsx("defs",{children:n.jsxs("linearGradient",{id:"stageBarFill",x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:"0%",stopColor:"#fb923c"}),n.jsx("stop",{offset:"100%",stopColor:"#f97316"})]})}),n.jsxs(Xa,{dataKey:"count",radius:[5,5,0,0],onClick:Z=>{x(je=>je===Z.stageKey?null:Z.stageKey)},children:[P.map(Z=>n.jsx(Ji,{fill:h===Z.stageKey?"#dc2626":"url(#stageBarFill)",stroke:h===Z.stageKey?"#991b1b":"#fb923c",strokeWidth:h===Z.stageKey?1.2:0},Z.stageKey)),n.jsx(hs,{content:ye})]})]})})}),n.jsx("div",{className:"mt-2 flex flex-wrap gap-1.5",children:P.map(Z=>n.jsxs("button",{onClick:()=>x(je=>je===Z.stageKey?null:Z.stageKey),className:`px-2 py-1 rounded-md border text-[11px] transition-colors ${h===Z.stageKey?"border-red-300 bg-red-50 text-red-700":"border-slate-200 text-slate-600 hover:bg-slate-50"}`,children:[Z.stageLabel," ",wo(Z.ratio),"  ",Wi(Z.count)]},Z.stageKey))}),k.isFetching&&P.length?n.jsx("div",{className:"absolute inset-0 rounded-xl bg-white/50 backdrop-blur-[1px] pointer-events-none"}):null]}),n.jsxs("div",{className:"xl:col-span-7 bg-white border border-slate-200 rounded-xl p-3.5 relative shadow-sm",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("div",{className:"text-sm font-semibold text-slate-700",children:"  TopN"}),n.jsx("div",{className:"text-[11px] text-slate-500",children:"   //  "})]}),n.jsxs("div",{className:"mb-2 flex flex-wrap gap-1.5",children:[n.jsxs("span",{className:"rounded border border-indigo-200 bg-indigo-50 px-2 py-0.5 text-[11px] text-indigo-700",children:["  ",U.classifiedRatio.toFixed(1),"%"]}),n.jsxs("span",{className:"rounded border border-amber-200 bg-amber-50 px-2 py-0.5 text-[11px] text-amber-700",children:[" ",U.unclassifiedRatio.toFixed(1),"%   ",gb[U.unclassifiedOwner]]})]}),!G.length&&M.isPending?n.jsx(Mh,{}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"rounded-lg border border-slate-100 bg-slate-50/60 p-2",style:{height:312},children:n.jsx(xa,{width:"100%",height:"100%",children:n.jsxs(Hu,{data:G,layout:"vertical",margin:{top:10,right:114,left:16,bottom:10},children:[n.jsx(ms,{strokeDasharray:"2 3",horizontal:!1,stroke:"#e2e8f0"}),n.jsx(Vn,{type:"number",tick:{fontSize:11,fill:"#64748b"},axisLine:!1,tickLine:!1}),n.jsx(Hn,{dataKey:"causeLabel",type:"category",width:120,tick:{fontSize:11,fill:"#64748b"},axisLine:!1,tickLine:!1}),n.jsx(en,{cursor:{fill:"#fff7ed"},content:({active:Z,payload:je})=>{if(!Z||!je?.length)return null;const ge=je[0].payload,be=ge.meta.actionable?"   ":"   (/  )";return n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white px-2.5 py-2 text-[11px] shadow-md",children:[n.jsx("div",{className:"font-semibold text-slate-800",children:ge.causeLabel}),n.jsxs("div",{className:"text-slate-700",children:[" ",wo(ge.ratio),"   ",Wi(ge.count)]}),n.jsxs("div",{className:"text-slate-600",children:[" : ",gb[ge.meta.owner]]}),n.jsxs("div",{className:"text-slate-600",children:["  : ",hF[ge.meta.regionalNeed]]}),n.jsxs("div",{className:"text-slate-600",children:[": ",gF[ge.evidence.type],"   ",xF[ge.evidence.confidence]]}),ge.evidence.link?n.jsx("div",{className:"text-blue-700",children:"  "}):n.jsxs("div",{className:"text-amber-700",children:[" : ",ge.evidence.missingReason??"  "]}),n.jsx("div",{className:ge.meta.actionable?"text-blue-700":"text-amber-700",children:be})]})}}),n.jsxs(Xa,{dataKey:"count",radius:[0,6,6,0],onClick:Z=>N(Z.causeKey),children:[G.map(Z=>n.jsx(Ji,{fill:y===Z.causeKey?"#ea580c":"#f59e0b"},Z.causeKey)),n.jsx(hs,{content:se})]})]})})}),n.jsx("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-1.5",children:G.map(Z=>n.jsxs("div",{onClick:()=>N(Z.causeKey),onKeyDown:je=>{(je.key==="Enter"||je.key===" ")&&(je.preventDefault(),N(Z.causeKey))},role:"button",tabIndex:0,className:`w-full rounded-lg border px-2 py-1.5 text-left transition-colors ${y===Z.causeKey?"border-orange-300 bg-orange-50":"border-slate-200 bg-white hover:bg-slate-50"}`,children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsx("div",{className:"text-[12px] font-medium text-gray-800",children:Z.causeLabel}),n.jsxs("div",{className:"text-[11px] text-gray-600",children:[wo(Z.ratio),"  ",Wi(Z.count)]})]}),n.jsxs("div",{className:"mt-1 flex flex-wrap gap-1",children:[n.jsxs("span",{className:"rounded border border-gray-200 bg-gray-50 px-1.5 py-0.5 text-[10px] text-gray-600",children:[": ",gb[Z.meta.owner]]}),n.jsxs("span",{className:`rounded border px-1.5 py-0.5 text-[10px] ${Z.meta.actionable?"border-blue-200 bg-blue-50 text-blue-700":"border-amber-200 bg-amber-50 text-amber-700"}`,children:[" : ",Z.meta.actionable?"Yes":"No"]}),n.jsxs("span",{className:`rounded border px-1.5 py-0.5 text-[10px] ${Z.meta.regionalNeed==="high"?"border-red-200 bg-red-50 text-red-700":Z.meta.regionalNeed==="medium"?"border-amber-200 bg-amber-50 text-amber-700":"border-emerald-200 bg-emerald-50 text-emerald-700"}`,children:[" : ",hF[Z.meta.regionalNeed]]}),n.jsxs("span",{className:"rounded border border-blue-200 bg-blue-50 px-1.5 py-0.5 text-[10px] text-blue-700",children:[": ",gF[Z.evidence.type]]}),n.jsxs("span",{className:`rounded border px-1.5 py-0.5 text-[10px] ${TOe[Z.evidence.confidence]}`,children:[": ",xF[Z.evidence.confidence]]})]}),n.jsx("div",{className:"mt-1 text-[10px]",children:Z.evidence.link?n.jsx("button",{type:"button",onClick:je=>{je.stopPropagation(),window.open(Z.evidence.link,"_blank","noopener,noreferrer")},className:"rounded border border-blue-200 bg-white px-1.5 py-0.5 text-blue-700 hover:bg-blue-50",children:" "}):n.jsxs("span",{className:"text-amber-700",children:[" : ",Z.evidence.missingReason??"  "]})})]},Z.causeKey))})]}),M.isFetching&&G.length?n.jsx("div",{className:"absolute inset-0 rounded-xl bg-white/50 backdrop-blur-[1px] pointer-events-none"}):null]})]}),n.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-12 gap-3",children:[n.jsxs("div",{className:"xl:col-span-7 bg-white border border-slate-200 rounded-xl p-3.5 relative shadow-sm",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("div",{className:"text-sm font-semibold text-slate-700",children:"  (   )"}),n.jsx("div",{className:"text-[11px] text-slate-500",children:"      "})]}),!te.length&&F.isPending?n.jsx(Mh,{}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"rounded-lg border border-slate-100 bg-slate-50/60 p-2",style:{height:320},children:n.jsx(xa,{width:"100%",height:"100%",children:n.jsxs(Wk,{data:te,margin:{top:10,right:8,left:-8,bottom:64},children:[n.jsx(ms,{strokeDasharray:"2 3",vertical:!1,stroke:"#e2e8f0"}),n.jsx(Vn,{dataKey:"areaLabel",tick:{fontSize:11,fill:"#64748b"},tickMargin:8,interval:0,angle:-30,textAnchor:"end",height:64,axisLine:!1,tickLine:!1}),n.jsx(Hn,{yAxisId:"left",tick:{fontSize:11,fill:"#64748b"},axisLine:!1,tickLine:!1}),n.jsx(Hn,{yAxisId:"right",orientation:"right",tick:{fontSize:11,fill:"#64748b"},axisLine:!1,tickLine:!1}),n.jsx(en,{formatter:(Z,je)=>je==="deltaVsAvg"?`${Z>0?"+":""}${Number(Z).toFixed(1)}%p`:`${Math.round(Number(Z)).toLocaleString()}`}),n.jsx(El,{wrapperStyle:{fontSize:"12px"},formatter:Z=>Z==="count"?"":"   "}),n.jsxs(Xa,{yAxisId:"left",dataKey:"count",radius:[5,5,0,0],onClick:Z=>C(je=>je===Z.areaKey?null:Z.areaKey),children:[te.map(Z=>n.jsx(Ji,{fill:E===Z.areaKey?"#1d4ed8":Z.highlightLevel==="critical"?"#ef4444":Z.highlightLevel==="watch"?"#f59e0b":"#93c5fd"},Z.areaKey)),n.jsx(hs,{dataKey:"count",position:"top",formatter:Z=>`${Math.round(Z)}`})]}),n.jsx($a,{yAxisId:"right",dataKey:"deltaVsAvg",stroke:"#1d4ed8",strokeWidth:2.2,dot:{r:3.2},children:n.jsx(hs,{dataKey:"deltaVsAvg",position:"top",formatter:Z=>`${Z>0?"+":""}${Number(Z).toFixed(1)}`})})]})})}),n.jsx("div",{className:"mt-2 flex flex-wrap gap-1.5",children:te.slice(0,8).map(Z=>n.jsxs("button",{onClick:()=>C(je=>je===Z.areaKey?null:Z.areaKey),className:`rounded-md border px-2 py-1 text-[11px] ${E===Z.areaKey?"border-blue-300 bg-blue-50 text-blue-700":OOe[Z.highlightLevel]}`,children:[Z.areaLabel,"   ",Z.deltaVsAvg>0?"+":"",Z.deltaVsAvg.toFixed(1),"%p  ",Wi(Z.count)]},Z.areaKey))}),E?n.jsx("div",{className:"mt-2",children:n.jsx("button",{onClick:()=>he(),className:"h-8 rounded-md border border-blue-200 bg-blue-50 px-3 text-[12px] font-medium text-blue-700 hover:bg-blue-100",children:"  "})}):null]}),F.isFetching&&te.length?n.jsx("div",{className:"absolute inset-0 rounded-xl bg-white/50 backdrop-blur-[1px] pointer-events-none"}):null]}),n.jsxs("div",{ref:S,className:"xl:col-span-5 bg-white border border-slate-200 rounded-xl p-3.5 relative shadow-sm",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("div",{className:"text-sm font-semibold text-slate-700",children:"  "}),n.jsx("div",{className:"text-[11px] text-slate-500",children:ct})]}),n.jsx("div",{className:"mb-2 inline-flex rounded-md border border-gray-200 bg-white p-0.5",children:["ratio","count"].map(Z=>n.jsx("button",{onClick:()=>j(Z),className:`px-2 py-1 text-[11px] rounded ${v===Z?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"}`,children:o0[Z]},Z))}),n.jsx("div",{className:"mb-2 flex flex-wrap gap-1.5",children:L.length?L.map(Z=>n.jsx("span",{className:`rounded border px-2 py-0.5 text-[11px] ${_Oe[Z.severity]}`,children:XOe(Z)},`${Z.type}-${Z.days}`)):n.jsx("span",{className:"rounded border border-gray-200 bg-gray-50 px-2 py-0.5 text-[11px] text-gray-600",children:"   "})}),!q.length&&$.isPending?n.jsx(Mh,{}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"rounded-lg border border-slate-100 bg-slate-50/60 p-2",style:{height:320},children:n.jsx(xa,{width:"100%",height:"100%",children:n.jsxs(M1,{data:q,margin:{top:8,right:12,left:0,bottom:8},children:[n.jsx(ms,{strokeDasharray:"2 3",vertical:!1,stroke:"#e2e8f0"}),n.jsx(Vn,{dataKey:"dateKey",tick:{fontSize:11,fill:"#64748b"},axisLine:!1,tickLine:!1}),n.jsx(Hn,{tick:{fontSize:11,fill:"#64748b"},domain:v==="ratio"?[0,100]:["auto","auto"],axisLine:!1,tickLine:!1}),n.jsx(en,{content:({active:Z,payload:je,label:ge})=>{if(!Z||!je?.length)return null;const be=je[0].payload;if(!be)return null;const it=L.some(Et=>Et.type==="increasing_streak"&&Et.metric===v),Fe=o0[v];return n.jsxs("div",{className:"rounded border border-gray-200 bg-white px-2 py-1.5 text-[11px] shadow-sm",children:[n.jsx("div",{className:"font-semibold text-gray-800",children:ge}),n.jsxs("div",{className:"text-gray-700",children:[Fe," ",yF(v,be.value)]}),n.jsxs("div",{className:"text-gray-600",children:[" ",Wi(be.count),"   ",wo(be.ratio)]}),it?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"text-red-700",children:"n   "}),n.jsx("div",{className:"text-red-700",children:"   SLA   "})]}):null]})}}),n.jsx(El,{wrapperStyle:{fontSize:"12px"},formatter:()=>o0[v]}),n.jsx($a,{type:"monotone",dataKey:"value",stroke:"#ef4444",strokeWidth:2.3,dot:{r:3.2},children:n.jsx(hs,{dataKey:"value",position:"top",formatter:Z=>v==="count"?`${Math.round(Number(Z)).toLocaleString()}`:`${Number(Z).toFixed(1)}%`})})]})})}),n.jsx("div",{className:"mt-2 text-[11px] text-gray-600",children:L.some(Z=>Z.type==="increasing_streak"&&Z.metric===v)?"   SLA   ":"       "})]}),$.isFetching&&q.length?n.jsx("div",{className:"absolute inset-0 rounded-xl bg-white/50 backdrop-blur-[1px] pointer-events-none"}):null]})]}),n.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-3.5 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[n.jsx(Qa,{className:"h-4 w-4 text-orange-500"}),n.jsx("span",{className:"text-sm font-semibold text-slate-700",children:" "})]}),!H.length&&ae?n.jsx(Mh,{}):n.jsx("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-2.5",children:H.map(Z=>n.jsxs("div",{className:"p-3 rounded-lg border border-orange-100 bg-gradient-to-br from-orange-50 to-amber-50",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsx("div",{className:"text-[13px] font-medium text-orange-900",children:Z.action.title}),n.jsxs("div",{className:"text-[11px] text-orange-700",children:[" ",Z.priorityScore]})]}),n.jsxs("div",{className:"mt-1 text-[12px] text-orange-800",children:[" : ",Z.evidence.causeLabel,"   Stage: ",Z.evidence.stageLabel,"   : ",Z.evidence.areaLabel]}),n.jsxs("div",{className:"mt-1 text-[12px] text-orange-900",children:[" : ",Z.action.steps.join("  ")]}),n.jsxs("div",{className:"mt-1 text-[12px] text-orange-800",children:[" : ",Z.expectedEffect.qualitative]}),n.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[n.jsx("button",{onClick:()=>he({stage:Z.evidence.stageKey,causeKey:Z.evidence.causeKey,area:Z.evidence.areaKey}),className:"h-8 rounded-md bg-blue-600 px-3 text-[12px] font-medium text-white hover:bg-blue-700",children:"  "}),n.jsx("button",{onClick:()=>$e(Z),className:"h-8 rounded-md border border-orange-200 bg-white px-3 text-[12px] font-medium text-orange-700 hover:bg-orange-100",children:"  "})]})]},Z.recId))})]}),p&&n.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-3.5 shadow-sm",children:[n.jsx("div",{className:"text-sm font-semibold text-slate-700 mb-2",children:"Stage  ( )"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:B.map(Z=>n.jsxs("div",{className:"p-2.5 rounded-lg border border-slate-100 bg-slate-50",children:[n.jsx("div",{className:"text-[13px] font-medium text-slate-800",children:Z.stage}),n.jsxs("div",{className:"text-[12px] text-slate-600",children:["  ",Z.signal>0?"":""," (",Z.signal>0?"+":"",Z.signal,"%)   ",Z.queue>0?"":""," (",Z.queue>0?"+":"",Z.queue,")"]}),n.jsx("div",{className:"text-[11px] text-slate-500",children:Z.desc})]},Z.stage))})]}),n.jsxs("div",{className:"text-[12px] text-slate-500 pb-2",children:[": ",e.label,"  ",a??" ","  ",rO[r],"  ",pF[s],oe?`   : ${oe.causeLabel}`:"",ve?`   : ${ve.areaLabel}`:""]})]})}const Dv=1440*60*1e3,Iv=48,ZOe=3,Xf={regionalSla:" SLA",regionalQueueRisk:" ",regionalRecontact:" ",regionalDataReadiness:" ",regionalGovernance:"/ ",regionalAdTransitionHotspot:"AD  ",regionalDxDelayHotspot:" ",regionalScreenToDxRate:" "},Iu={regionalSla:"%",regionalQueueRisk:"",regionalRecontact:"%",regionalDataReadiness:"%",regionalGovernance:"%",regionalAdTransitionHotspot:"",regionalDxDelayHotspot:"",regionalScreenToDxRate:"%"},nO={regionalSla:!0,regionalQueueRisk:!1,regionalRecontact:!1,regionalDataReadiness:!0,regionalGovernance:!0,regionalAdTransitionHotspot:!1,regionalDxDelayHotspot:!1,regionalScreenToDxRate:!0},aO={STAFFING:" ",RECONTACT_PUSH:" ",DATA_FIX:" ",PATHWAY_TUNE:" ",GOVERNANCE_FIX:" "},Lh={TODO:"",IN_PROGRESS:"",DONE:"",BLOCKED:""},vF={TODO:"bg-gray-100 text-gray-700 border-gray-200",IN_PROGRESS:"bg-blue-100 text-blue-700 border-blue-200",DONE:"bg-green-100 text-green-700 border-green-200",BLOCKED:"bg-amber-100 text-amber-700 border-amber-200"},JOe={instruction:"",adjustment:"",confirmation:"",completion:" ",escalation:""},zb={Stage1:"Stage1",Stage2:"Stage2",Stage3:"Stage3"},NF={contact:"Stage1",recontact:"Stage1",L2:"Stage2","3rd":"Stage3"},qb={staff_shortage:"  ",contact_failure:" ",data_gap:" ",hospital_slot_delay:"  ",governance_gap:"  ",external_dependency:"  "},Dd=["","","",""],eke="regional_bottleneck_intervention_snapshots_v1",$h={regional:"",center:"",hospital:"",system:"",external:""},sO=e=>{let t=0;for(let r=0;r<e.length;r+=1)t=t*31+e.charCodeAt(r)>>>0;return t},ll=(e,t,r)=>t+(r-t)*(sO(e)%1e3/1e3),Tu=e=>new Date(e).toLocaleString("ko-KR",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}),tke=e=>new Date(e).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"}),rke=e=>Math.max(0,Math.floor((Date.now()-Date.parse(e))/Dv));function SF(e){return{regionalSla:Number(ll(`${e}-sla`,72,96).toFixed(1)),regionalQueueRisk:Math.round(ll(`${e}-queue`,110,540)),regionalRecontact:Number(ll(`${e}-recontact`,7,26).toFixed(1)),regionalDataReadiness:Number(ll(`${e}-readiness`,58,92).toFixed(1)),regionalGovernance:Number(ll(`${e}-gov`,68,98).toFixed(1)),regionalAdTransitionHotspot:Number(ll(`${e}-ad-risk`,22,81).toFixed(1)),regionalDxDelayHotspot:Number(ll(`${e}-dx-delay`,9,52).toFixed(1)),regionalScreenToDxRate:Number(ll(`${e}-conv`,34,84).toFixed(1))}}function jF(e,t){return e[t]}function Wb(e,t){return t===""?`${Math.round(e).toLocaleString()}`:t===""?`${e.toFixed(1)}`:t===""?`${e.toFixed(1)}`:`${e.toFixed(1)}%`}function nke(e){return e==="regionalAdTransitionHotspot"?"RISK":e==="regionalScreenToDxRate"?"GAP":e==="regionalDxDelayHotspot"||e==="regionalRecontact"?"BOTTLENECK":"LOAD"}function QA(e){return Iu[e]===""?"count":"ratio"}function ake(e){if(!e)return null;try{const t=window.localStorage.getItem(eke);return t?JSON.parse(t).find(s=>s.snapshotId===e)?.payload?.beforeSnapshot??null:null}catch{return null}}function wF(e){return e==="regionalGovernance"?"GOVERNANCE_FIX":e==="regionalDxDelayHotspot"?"STAFFING":e==="regionalAdTransitionHotspot"||e==="regionalScreenToDxRate"?"PATHWAY_TUNE":e==="regionalDataReadiness"?"DATA_FIX":e==="regionalQueueRisk"?"STAFFING":"RECONTACT_PUSH"}function ske(e){if(e.selectedStage&&NF[e.selectedStage])return NF[e.selectedStage];const t=e.primaryDriverStage??"";return/3/.test(t)?"Stage3":/2|L2/i.test(t)?"Stage2":"Stage1"}function ike(e){return e==="regionalDxDelayHotspot"?"hospital_slot_delay":e==="regionalGovernance"?"governance_gap":e==="regionalDataReadiness"?"data_gap":e==="regionalQueueRisk"?"staff_shortage":"contact_failure"}function oke(e){return e==="regionalSla"?["SLA "," "]:e==="regionalQueueRisk"?[" ","SLA "]:e==="regionalDxDelayHotspot"?["  "," "]:e==="regionalAdTransitionHotspot"?["AD    ","SLA "]:e==="regionalScreenToDxRate"?["AD    ","SLA "]:e==="regionalDataReadiness"?[" ","SLA "]:["SLA "," "]}function lke(e,t,r){const a=jF(t,e),s=t.regionalQueueRisk;if(!r)return{before:{value:a,backlog:s},after:void 0,delta:void 0};const i=jF(r,e),o=r.regionalQueueRisk;return{before:{value:a,backlog:s},after:{value:i,backlog:o},delta:{value:Number((i-a).toFixed(1)),backlog:Number((o-s).toFixed(1))}}}function cke(e,t,r,a,s){const i=Date.parse(s),o=new Date(i).toISOString(),l=new Date(i+600*60*1e3).toISOString(),d=new Date(i+1320*60*1e3).toISOString(),u=new Date(i+2400*60*1e3).toISOString(),p=[{id:`${e}-log-instruction`,type:"instruction",actor:t,actorOrg:r,timestamp:o,referenceLink:"/regional/bottleneck",requiresFollowup:!0,followupDueAt:new Date(Date.parse(o)+Iv*60*60*1e3).toISOString(),note:xt("       ")}];return a!=="TODO"&&p.push({id:`${e}-log-adjustment`,type:"adjustment",actor:Dd[(sO(e)+1)%Dd.length],actorOrg:r,timestamp:l,referenceLink:"/regional/ops",requiresFollowup:!0,followedUpAt:a==="BLOCKED"?void 0:d,followupDueAt:new Date(Date.parse(l)+Iv*60*60*1e3).toISOString(),note:xt("      ")}),(a==="IN_PROGRESS"||a==="DONE")&&p.push({id:`${e}-log-confirm`,type:"confirmation",actor:Dd[(sO(e)+2)%Dd.length],actorOrg:r,timestamp:d,referenceLink:"https://hospital.example.local/sync",requiresFollowup:!1,note:xt("      ")}),a==="DONE"&&p.push({id:`${e}-log-complete`,type:"completion",actor:t,actorOrg:r,timestamp:u,referenceLink:"/regional/reports",requiresFollowup:!1,note:xt("      ")}),p}function ZA(e){const t=rke(e.createdAt),r=e.status!=="DONE"&&t>ZOe,a=e.kpiComparison,s=!!a.after,i=a.before.value,o=a.after?.value,l=nO[e.kpiKey];let d=!1,u=!1,p=!1;if(s&&o!=null){const x=o-i;Math.abs(x)<.01?p=!0:l?(d=x>0,u=x<0):(d=x<0,u=x>0)}const m=!s&&e.status!=="DONE";return{elapsedDays:t,delayed:r,improved:d,worsened:u,noImprovement:p,missingAfter:m,needsAttention:r||p||u||m}}function dke(e){return!e.requiresFollowup||e.followedUpAt?!1:Date.now()-Date.parse(e.timestamp)>Iv*60*60*1e3}function iO(e){const t=SF(`${e.seed}-before`);e.beforeSnapshot&&(t[e.kpiKey]=Number(e.beforeSnapshot.kpiValue),t.regionalQueueRisk=Number(e.beforeSnapshot.backlogCount));const r=e.includeAfter?SF(`${e.seed}-after`):void 0,a=lke(e.kpiKey,t,r),i=`[${qb[e.causeKey]??e.causeKey}] ${e.areaLabel} ${zb[e.stageKey]} `,o=F5(e.causeKey),l=e.ownerOrg??o?.ownerOrg??"regional",d=e.assignmentOverride?{assigneeId:e.assignmentOverride.assigneeId,assigneeRole:e.assignmentOverride.assigneeRole,defaultDueSlaHours:e.assignmentOverride.dueSlaHours}:B5({regionKey:e.regionId,areaKey:e.areaLabel,causeKey:e.causeKey,ownerOrg:l}),u=e.dueAt??new Date(Date.parse(e.createdAt)+d.defaultDueSlaHours*60*60*1e3).toISOString(),p={regionKey:e.regionId,period:e.period,kpiKey:e.kpiKey,areaKey:e.areaLabel,layer:nke(e.kpiKey),selectedStage:e.stageKey==="Stage3"?"3rd":e.stageKey==="Stage2"?"L2":"contact",selectedCauseKey:e.causeKey,trendMetric:QA(e.kpiKey)},m={kpiKey:e.kpiKey,metricType:QA(e.kpiKey),targetDelta:QA(e.kpiKey)==="count"?-12:-2.5,evaluationWindowDays:7};return{id:e.id,title:i,stageKey:e.stageKey,areaKey:`${e.regionId}:${e.areaLabel}`,areaLabel:e.areaLabel,region:e.areaLabel,kpiKey:e.kpiKey,type:e.type,status:e.status,owner:e.owner,ownerOrg:l,createdAt:e.createdAt,dueAt:u,ruleId:e.ruleId,context:p,assignment:{ownerOrg:l,assigneeId:d.assigneeId,assigneeName:d.assigneeRole,dueAt:u,slaHours:d.defaultDueSlaHours,escalationPolicyId:`ESC-${e.causeKey.toUpperCase()}`},successMetric:{...m},createdFrom:{causeKey:e.causeKey,kpiKey:e.kpiKey,queryState:p,snapshot:{kpiValue:a.before.value,backlogCount:a.before.backlog,avgDwell:e.beforeSnapshot?Number((e.beforeSnapshot.avgDwellMin/60).toFixed(1)):Number(ll(`${e.seed}-dwell`,24,96).toFixed(1)),deltaVsRegional:e.beforeSnapshot?Number((e.beforeSnapshot.stageBreakdown?.[0]?.deltaVsRegionalAvg??0).toFixed(1)):Number(ll(`${e.seed}-delta`,-12,24).toFixed(1)),unit:Iu[e.kpiKey]}},expectedEffectTags:oke(e.kpiKey),logs:cke(e.seed,e.owner,l,e.status,e.createdAt),kpiComparison:a,notes:e.notes??xt(`${e.areaLabel}  ${aO[e.type]}  `),evidenceLinks:["/regional/bottleneck","https://hospital.example.local/sync"],beforeMetrics:t,afterMetrics:r,timeline:[{id:`${e.id}-timeline-created`,at:e.createdAt,actor:"",message:xt("  ")}]}}function EF(e,t,r){const a=t.length?t:[" "],s=Date.now();return[{kpiKey:"regionalQueueRisk",status:"IN_PROGRESS",stageKey:"Stage2",causeKey:"staff_shortage",type:"STAFFING",includeAfter:!0},{kpiKey:"regionalDxDelayHotspot",status:"TODO",stageKey:"Stage2",causeKey:"hospital_slot_delay",type:"PATHWAY_TUNE",includeAfter:!1},{kpiKey:"regionalRecontact",status:"DONE",stageKey:"Stage1",causeKey:"contact_failure",type:"RECONTACT_PUSH",includeAfter:!0},{kpiKey:"regionalDataReadiness",status:"BLOCKED",stageKey:"Stage1",causeKey:"data_gap",type:"DATA_FIX",includeAfter:!1},{kpiKey:"regionalAdTransitionHotspot",status:"IN_PROGRESS",stageKey:"Stage3",causeKey:"external_dependency",type:"PATHWAY_TUNE",includeAfter:!0}].map((o,l)=>{const d=new Date(s-Dv*(l+1.4)).toISOString(),u=new Date(Date.parse(d)+Dv*(2+l%3)).toISOString(),p=a[l%a.length];return iO({id:`INT-${l+1}`,regionId:e,areaLabel:p,period:r,kpiKey:o.kpiKey,type:o.type,status:o.status,owner:Dd[l%Dd.length],stageKey:o.stageKey,causeKey:o.causeKey,createdAt:d,dueAt:u,includeAfter:o.includeAfter,seed:`${e}-${p}-${o.kpiKey}-${l}`})})}function AF({value:e,unit:t,className:r}){const[a,s]=g.useState(e);return g.useEffect(()=>{const i=a,o=e,l=performance.now(),d=260;let u=0;const p=m=>{const h=Math.min(1,(m-l)/d),x=1-Math.pow(1-h,3);s(i+(o-i)*x),h<1&&(u=window.requestAnimationFrame(p))};return u=window.requestAnimationFrame(p),()=>window.cancelAnimationFrame(u)},[e]),n.jsx("span",{className:r,children:Wb(a,t)})}function uke({region:e,districtOptions:t,selectedKpiKey:r,selectedRegionSgg:a,selectedRange:s,onSelectedKpiKeyChange:i,onSelectedRegionSggChange:o,onSelectedRangeChange:l,pendingDraft:d,onPendingDraftConsumed:u}){const[p,m]=g.useState(()=>EF(e.id,t,s)),[h,x]=g.useState(null),[y,N]=g.useState("ALL"),[v,j]=g.useState("ALL"),[E,C]=g.useState("ALL"),[A,S]=g.useState(!1),_=g.useRef(!1);g.useEffect(()=>{m(EF(e.id,t,s)),x(null)},[t,e.id]);const O=g.useCallback((L,H="manual")=>{const ae=new Date().toISOString(),oe=L.region??a??t[0]??`${e.label} `,ve=L.kpiKey,ce=L.type??wF(ve),Ee=ske(L),xe=L.selectedCauseKey??ike(ve),Te=`${e.id}-${oe}-${ve}-${ae}`,ye=ake(L.snapshotId),se=xt(H==="url"?"      ":"   "),ct=iO({id:`INT-${Date.now()}`,regionId:e.id,areaLabel:oe,period:L.range??s,kpiKey:ve,type:ce,status:"TODO",owner:Dd[0],stageKey:Ee,causeKey:xe,createdAt:ae,dueAt:new Date(Date.parse(ae)+Dv*3).toISOString(),includeAfter:!1,seed:Te,beforeSnapshot:ye,notes:xt(`${se}
[] ${qb[xe]??xe}
[] ${zb[Ee]}
[] ${L.selectedArea??oe}${L.snapshotId?`
[] ${L.snapshotId}`:""}`)});m(Q=>[ct,...Q]),x(ct.id)},[t,e.id,e.label,s,a]);g.useEffect(()=>{d&&(O(d,"manual"),u?.())},[O,u,d]),g.useEffect(()=>{if(d||_.current)return;const L=new URLSearchParams(window.location.search);if(L.get("create")!=="1"||L.get("source")!=="cause")return;const H=L.get("kpi");if(!H)return;const ae=L.get("range"),oe=ae==="monthly"?"month":ae==="quarterly"?"quarter":"week",ve={region:L.get("area")??a??null,kpiKey:H,range:oe,source:"cause",selectedStage:L.get("stage")??null,selectedCauseKey:L.get("cause"),selectedArea:L.get("area"),primaryDriverStage:L.get("stage")??void 0,snapshotId:L.get("snapshotId")};O(ve,"url"),_.current=!0},[O,d,a]);const D=g.useMemo(()=>p.filter(L=>!(a&&L.areaLabel!==a||r&&L.kpiKey!==r||y!=="ALL"&&L.status!==y||v!=="ALL"&&L.type!==v||E!=="ALL"&&L.owner!==E)),[p,E,r,a,y,v]),k=g.useMemo(()=>Array.from(new Set([...Dd,...p.map(L=>L.owner)])),[p]),M=g.useMemo(()=>D.length?h?D.find(L=>L.id===h)??D[0]:D[0]:null,[D,h]),F=g.useMemo(()=>D.filter(L=>ZA(L).needsAttention).length,[D]),$=g.useMemo(()=>cOe({regionKey:e.id,selectedRange:s,selectedRegionSgg:a,districtOptions:t,existingOpenInterventions:p.map(L=>({kpiKey:L.kpiKey,areaLabel:L.areaLabel,causeKey:L.createdFrom.causeKey,stageKey:L.stageKey,period:L.context?.period??s,status:L.status}))}),[t,p,e.id,s,a]),B=g.useMemo(()=>$.filter(L=>!L.blockedByDuplicate).length,[$]),P=g.useMemo(()=>Array.from(new Map($.map(L=>[L.ruleId,L.ruleLabel])).entries()).map(([L,H])=>({ruleId:L,ruleLabel:H})),[$]),W=g.useMemo(()=>Array.from(new Map($.map(L=>[`${L.ownerOrg}-${L.assigneeId}`,`${$h[L.ownerOrg]}  ${L.assigneeRole}`])).values()),[$]),K=L=>{M&&m(H=>H.map(ae=>{if(ae.id!==M.id)return ae;const oe=new Date().toISOString(),ve={id:`${ae.id}-status-${Date.now()}`,type:L==="DONE"?"completion":L==="IN_PROGRESS"?"adjustment":"confirmation",actor:" ",actorOrg:"regional",timestamp:oe,referenceLink:"/regional/actions",requiresFollowup:L!=="DONE",followupDueAt:L!=="DONE"?new Date(Date.parse(oe)+Iv*60*60*1e3).toISOString():void 0,note:xt(` ${Lh[L]} `)};return{...ae,status:L,logs:[...ae.logs,ve],timeline:[...ae.timeline,{id:`${ae.id}-timeline-${Date.now()}`,at:oe,actor:" ",message:xt(` : ${Lh[L]}`)}]}}))},G=()=>{const L=Date.now(),H=$.filter(oe=>!oe.blockedByDuplicate);if(!H.length){window.alert("    .   .");return}const ae=H.map((oe,ve)=>{const ce=B5({regionKey:e.id,areaKey:oe.regionLabel,causeKey:oe.causeKey,ownerOrg:oe.ownerOrg});return iO({id:`INT-AUTO-${L+ve}`,regionId:e.id,areaLabel:oe.regionLabel,period:s,kpiKey:oe.kpiKey,type:wF(oe.kpiKey),status:"TODO",owner:ce.assigneeRole,ownerOrg:oe.ownerOrg,stageKey:oe.stageKey,causeKey:oe.causeKey,createdAt:new Date(L).toISOString(),dueAt:new Date(L+oe.dueSlaHours*60*60*1e3).toISOString(),includeAfter:!1,ruleId:oe.ruleId,seed:`${e.id}-${oe.regionLabel}-auto-${ve}`,assignmentOverride:{assigneeId:oe.assigneeId,assigneeRole:oe.assigneeRole,dueSlaHours:oe.dueSlaHours},notes:xt(`    : ${oe.ruleLabel}
 : ${oe.dedupeKey}`)})});m(oe=>[...ae,...oe]),x(ae[0]?.id??null),S(!1)},U=()=>{if(!M)return;const H=F5(M.createdFrom.causeKey)?.escalationPath?.[0];if(!H){window.alert("   .");return}const ae=new Date().toISOString(),oe=new Date(Date.parse(ae)+H.slaHours*60*60*1e3).toISOString();m(ve=>ve.map(ce=>{if(ce.id!==M.id)return ce;const Ee={id:`${ce.id}-escalation-${Date.now()}`,type:"escalation",actor:" ",actorOrg:"regional",timestamp:ae,referenceLink:"/regional/actions",requiresFollowup:!0,followupDueAt:oe,note:xt(`: ${H.toOrgRole}(${H.channel})   SLA ${H.slaHours}h`)};return{...ce,logs:[...ce.logs,Ee],timeline:[...ce.timeline,{id:`${ce.id}-timeline-escalation-${Date.now()}`,at:ae,actor:" ",message:xt(" ")}]}}))},te=M?ZA(M):null,re=M?qb[M.createdFrom.causeKey]??M.createdFrom.causeKey:"-",q=g.useMemo(()=>{if(!M)return[];const L=M.logs.find(oe=>oe.type==="instruction"),H=M.logs.find(oe=>oe.type==="adjustment"),ae=M.logs.find(oe=>oe.type==="completion");return[{key:"created",label:"",at:M.createdAt,actor:"",done:!0},{key:"instruction",label:" ",at:L?.timestamp,actor:L?.actor,done:!!L},{key:"progress",label:"",at:H?.timestamp,actor:H?.actor,done:M.status==="IN_PROGRESS"||M.status==="DONE"||M.status==="BLOCKED"},{key:"done",label:"",at:ae?.timestamp,actor:ae?.actor,done:M.status==="DONE"},{key:"blocked",label:"/",at:M.status==="BLOCKED"?M.logs[M.logs.length-1]?.timestamp:void 0,actor:M.status==="BLOCKED"?M.logs[M.logs.length-1]?.actor:void 0,done:M.status==="BLOCKED"||(te?.delayed??!1)}]},[M,te?.delayed]);return n.jsxs("div",{className:"h-full overflow-auto bg-gray-50 p-4 space-y-3",children:[n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[n.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-semibold text-gray-800",children:" "}),n.jsx("div",{className:"text-[12px] text-gray-500",children:"         "})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"px-2.5 py-1 rounded border border-amber-200 bg-amber-50 text-amber-700 text-xs font-semibold",children:["  ",F,""]}),n.jsx("button",{type:"button",onClick:()=>S(!0),className:"px-3 py-1.5 rounded-md border border-purple-200 bg-purple-50 text-purple-700 text-sm font-medium hover:bg-purple-100",children:"    "})]})]}),n.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-6 gap-2",children:[n.jsxs("select",{value:s,onChange:L=>l(L.target.value),className:"px-2 py-1.5 border border-gray-300 rounded text-sm",children:[n.jsx("option",{value:"week",children:""}),n.jsx("option",{value:"month",children:""}),n.jsx("option",{value:"quarter",children:""})]}),n.jsxs("select",{value:a??"",onChange:L=>o(L.target.value||null),className:"px-2 py-1.5 border border-gray-300 rounded text-sm",children:[n.jsxs("option",{value:"",children:[e.label," "]}),t.map(L=>n.jsx("option",{value:L,children:L},L))]}),n.jsx("select",{value:r,onChange:L=>i(L.target.value),className:"px-2 py-1.5 border border-gray-300 rounded text-sm",children:Object.entries(Xf).map(([L,H])=>n.jsx("option",{value:L,children:H},L))}),n.jsxs("select",{value:y,onChange:L=>N(L.target.value),className:"px-2 py-1.5 border border-gray-300 rounded text-sm",children:[n.jsx("option",{value:"ALL",children:" "}),Object.entries(Lh).map(([L,H])=>n.jsx("option",{value:L,children:H},L))]}),n.jsxs("select",{value:v,onChange:L=>j(L.target.value),className:"px-2 py-1.5 border border-gray-300 rounded text-sm",children:[n.jsx("option",{value:"ALL",children:" "}),Object.entries(aO).map(([L,H])=>n.jsx("option",{value:L,children:H},L))]}),n.jsxs("select",{value:E,onChange:L=>C(L.target.value),className:"px-2 py-1.5 border border-gray-300 rounded text-sm",children:[n.jsx("option",{value:"ALL",children:" "}),k.map(L=>n.jsx("option",{value:L,children:L},L))]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-[420px_1fr] gap-3 min-h-[700px]",children:[n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3 overflow-y-auto",children:[n.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:" "}),n.jsxs("div",{className:"space-y-2",children:[D.map(L=>{const H=ZA(L),ae=qb[L.createdFrom.causeKey]??L.createdFrom.causeKey,oe=L.dueAt?Date.now()>Date.parse(L.dueAt)&&L.status!=="DONE":!1;return n.jsxs("button",{type:"button",onClick:()=>x(L.id),className:`w-full text-left rounded-lg border p-2.5 transition ${M?.id===L.id?"border-blue-300 bg-blue-50":H.needsAttention?"border-rose-300 bg-rose-50 hover:bg-rose-100":"border-gray-200 bg-white hover:bg-gray-50"}`,children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("div",{className:"min-w-0",children:[n.jsx("div",{className:"text-[13px] font-semibold text-gray-900 truncate",children:L.title}),n.jsxs("div",{className:"mt-0.5 text-[11px] text-gray-600",children:[L.areaLabel,"  ",zb[L.stageKey],"  ",aO[L.type]]})]}),n.jsxs("div",{className:"flex flex-col items-end gap-1 shrink-0",children:[n.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${vF[L.status]}`,children:Lh[L.status]}),(H.delayed||oe)&&n.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded border border-rose-300 bg-rose-100 text-rose-700",children:" "})]})]}),n.jsxs("div",{className:"mt-2 rounded border border-gray-200 bg-white px-2 py-1.5",children:[n.jsx("div",{className:"text-[10px] text-gray-500",children:" "}),n.jsxs("div",{className:"text-[11px] text-gray-700 mt-0.5",children:[ae,"  ",Xf[L.createdFrom.kpiKey]]}),n.jsxs("div",{className:"text-[11px] text-gray-700",children:["  ",Wb(L.createdFrom.snapshot.kpiValue,L.createdFrom.snapshot.unit??Iu[L.kpiKey])]})]}),n.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:L.expectedEffectTags.map(ve=>n.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded border border-emerald-200 bg-emerald-50 text-emerald-700",children:ve},`${L.id}-${ve}`))}),n.jsxs("div",{className:"mt-2 flex items-center justify-between text-[11px]",children:[n.jsxs("span",{className:"text-gray-500",children:["T+",H.elapsedDays,""]}),L.ruleId?n.jsx("span",{className:"text-violet-600 font-medium",children:L.ruleId}):n.jsx("span",{className:"text-gray-500",children:" "})]})]},L.id)}),!D.length&&n.jsx("div",{className:"rounded border border-dashed border-gray-300 bg-gray-50 px-3 py-4 text-sm text-gray-500",children:"    ."})]})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3 overflow-y-auto",children:[!M&&n.jsx("div",{className:"text-sm text-gray-500",children:"   ."}),M&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2 flex-wrap",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-semibold text-gray-800",children:M.title}),n.jsxs("div",{className:"text-[12px] text-gray-500",children:[" ",M.areaLabel,"   ",M.owner,"   ",tke(M.createdAt)]}),n.jsxs("div",{className:"text-[11px] text-gray-500",children:["  ",$h[M.ownerOrg??"regional"],"  "," ",M.assignment?.dueAt?Tu(M.assignment.dueAt):M.dueAt?Tu(M.dueAt):""]})]}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[["TODO","IN_PROGRESS","DONE","BLOCKED"].map(L=>n.jsx("button",{type:"button",onClick:()=>K(L),className:`px-2 py-1 rounded border text-[11px] font-medium ${M.status===L?vF[L]:"border-gray-200 text-gray-600 hover:bg-gray-50"}`,children:Lh[L]},L)),n.jsx("button",{type:"button",onClick:U,className:"px-2 py-1 rounded border border-rose-200 bg-rose-50 text-[11px] font-medium text-rose-700 hover:bg-rose-100",children:""})]})]}),n.jsxs("section",{className:"rounded-lg border border-gray-200 p-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("div",{className:"text-[13px] font-semibold text-gray-800",children:"1)  "}),(te?.delayed??!1)&&n.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded border border-rose-300 bg-rose-100 text-rose-700",children:" 3  "})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2",children:q.map(L=>n.jsxs("div",{className:`rounded border px-2 py-2 ${L.done?"border-blue-200 bg-blue-50":"border-gray-200 bg-gray-50"}`,children:[n.jsx("div",{className:"text-[11px] font-semibold text-gray-700",children:L.label}),n.jsx("div",{className:"text-[10px] text-gray-500 mt-1",children:L.at?Tu(L.at):""}),n.jsx("div",{className:"text-[10px] text-gray-500",children:L.actor??"-"})]},L.key))})]}),n.jsxs("section",{className:"rounded-lg border border-gray-200 p-3",children:[n.jsx("div",{className:"text-[13px] font-semibold text-gray-800 mb-2",children:"2)  "}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-[12px]",children:[n.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-2 py-2",children:[n.jsx("div",{className:"text-gray-500",children:" "}),n.jsx("div",{className:"mt-1 font-medium text-gray-800",children:re})]}),n.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-2 py-2",children:[n.jsx("div",{className:"text-gray-500",children:" Stage"}),n.jsx("div",{className:"mt-1 font-medium text-gray-800",children:zb[M.stageKey]})]}),n.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-2 py-2",children:[n.jsx("div",{className:"text-gray-500",children:" "}),n.jsx("div",{className:"mt-1 font-medium text-gray-800",children:M.areaLabel})]}),n.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-2 py-2",children:[n.jsx("div",{className:"text-gray-500",children:"  KPI Snapshot"}),n.jsxs("div",{className:"mt-1 font-medium text-gray-800",children:[Xf[M.createdFrom.kpiKey]," ",Wb(M.createdFrom.snapshot.kpiValue,M.createdFrom.snapshot.unit??Iu[M.kpiKey])]}),n.jsxs("div",{className:"text-gray-600 mt-0.5",children:[" ",Math.round(M.createdFrom.snapshot.backlogCount).toLocaleString(),"    ",M.createdFrom.snapshot.avgDwell.toFixed(1),""]}),n.jsxs("div",{className:"text-gray-600",children:["   ",M.createdFrom.snapshot.deltaVsRegional!=null?`${M.createdFrom.snapshot.deltaVsRegional>0?"+":""}${M.createdFrom.snapshot.deltaVsRegional.toFixed(1)}`:"-"]})]}),n.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-2 py-2",children:[n.jsx("div",{className:"text-gray-500",children:"/"}),n.jsxs("div",{className:"mt-1 font-medium text-gray-800",children:[$h[M.assignment?.ownerOrg??M.ownerOrg??"regional"],"  ",M.assignment?.assigneeName??M.owner]}),n.jsxs("div",{className:"text-gray-600 mt-0.5",children:["SLA ",M.assignment?.slaHours??"-","h  "," ",M.assignment?.dueAt?Tu(M.assignment.dueAt):M.dueAt?Tu(M.dueAt):""]})]}),n.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-2 py-2",children:[n.jsx("div",{className:"text-gray-500",children:" "}),n.jsxs("div",{className:"mt-1 font-medium text-gray-800",children:[Xf[M.successMetric?.kpiKey??M.kpiKey],"  ",M.successMetric?.metricType==="count"?"":""]}),n.jsxs("div",{className:"text-gray-600 mt-0.5",children:["  ",M.successMetric?.targetDelta!=null?`${M.successMetric.targetDelta>0?"+":""}${M.successMetric.targetDelta}`:"-","   ",M.successMetric?.evaluationWindowDays??7,""]})]})]})]}),n.jsxs("section",{className:"rounded-lg border border-gray-200 p-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("div",{className:"text-[13px] font-semibold text-gray-800",children:"3) KPI Before / After "}),n.jsx("span",{className:"text-[11px] text-gray-500",children:Xf[M.kpiKey]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[n.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-2 py-2",children:[n.jsx("div",{className:"text-[11px] text-gray-500",children:"Before (  )"}),n.jsx("div",{className:"mt-1 text-[14px] font-semibold text-gray-900",children:n.jsx(AF,{value:M.kpiComparison.before.value,unit:Iu[M.kpiKey]})}),n.jsxs("div",{className:"text-[11px] text-gray-600 mt-0.5",children:[" ",Math.round(M.kpiComparison.before.backlog).toLocaleString(),""]})]}),n.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-2 py-2",children:[n.jsx("div",{className:"text-[11px] text-gray-500",children:"After ()"}),M.kpiComparison.after?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"mt-1 text-[14px] font-semibold text-gray-900",children:n.jsx(AF,{value:M.kpiComparison.after.value,unit:Iu[M.kpiKey]})}),n.jsxs("div",{className:"text-[11px] text-gray-600 mt-0.5",children:[" ",Math.round(M.kpiComparison.after.backlog).toLocaleString(),""]})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"mt-1 text-[13px] font-semibold text-amber-700",children:" "}),n.jsxs("div",{className:"text-[11px] text-gray-600 mt-0.5",children:[" : ",M.owner," (  )"]})]})]})]}),M.kpiComparison.delta&&n.jsxs("div",{className:"mt-2 rounded border border-gray-200 bg-white px-2 py-2 text-[12px]",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"  "}),n.jsxs("span",{className:`font-semibold ${M.kpiComparison.delta.value===0?"text-gray-700":M.kpiComparison.delta.value>0?nO[M.kpiKey]?"text-emerald-700":"text-rose-700":nO[M.kpiKey]?"text-rose-700":"text-emerald-700"}`,children:[M.kpiComparison.delta.value>0?"+":"",Wb(M.kpiComparison.delta.value,Iu[M.kpiKey])]})]}),n.jsxs("div",{className:"flex items-center justify-between mt-1",children:[n.jsx("span",{className:"text-gray-600",children:"  "}),n.jsxs("span",{className:`font-semibold ${M.kpiComparison.delta.backlog>0?"text-rose-700":"text-emerald-700"}`,children:[M.kpiComparison.delta.backlog>0?"+":"",Math.round(M.kpiComparison.delta.backlog).toLocaleString(),""]})]})]})]}),n.jsxs("section",{className:"rounded-lg border border-gray-200 p-3",children:[n.jsx("div",{className:"text-[13px] font-semibold text-gray-800 mb-2",children:"4)   &  "}),n.jsx("div",{className:"space-y-2",children:M.logs.map(L=>{const H=dke(L);return n.jsxs("div",{className:`rounded border px-2 py-2 ${H?"border-rose-300 bg-rose-50":"border-gray-200 bg-gray-50"}`,children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsxs("div",{className:"text-[12px] font-medium text-gray-800",children:[JOe[L.type],"  ",L.actor,L.actorOrg?` (${$h[L.actorOrg]})`:""]}),n.jsxs("div",{className:"flex items-center gap-1",children:[L.requiresFollowup&&n.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${L.followedUpAt?"border-emerald-300 bg-emerald-100 text-emerald-700":"border-amber-300 bg-amber-100 text-amber-700"}`,children:L.followedUpAt?" ":" "}),H&&n.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded border border-rose-300 bg-rose-100 text-rose-700",children:" 48 "})]})]}),n.jsx("div",{className:"text-[11px] text-gray-500 mt-0.5",children:Tu(L.timestamp)}),n.jsx("div",{className:"text-[12px] text-gray-700 mt-1",children:L.note}),L.followupDueAt?n.jsxs("div",{className:"mt-1 text-[11px] text-gray-600",children:[" : ",Tu(L.followupDueAt)]}):null,n.jsx("div",{className:"mt-1 text-[11px]",children:L.referenceLink?n.jsx("a",{href:L.referenceLink,target:"_blank",rel:"noreferrer",className:"text-blue-700 underline underline-offset-2",children:" "}):n.jsx("span",{className:"text-gray-500",children:"  "})})]},L.id)})})]})]})]})]}),A&&n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[n.jsx("div",{className:"absolute inset-0 bg-black/35",onClick:()=>S(!1)}),n.jsxs("div",{className:"relative w-full max-w-xl rounded-lg border border-gray-200 bg-white p-4 shadow-xl",children:[n.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"    "}),n.jsx("div",{className:"text-[12px] text-gray-500 mt-1",children:"       ."}),n.jsxs("div",{className:"mt-3 rounded border border-gray-200 bg-gray-50 p-3",children:[n.jsx("div",{className:"text-[12px] font-semibold text-gray-700 mb-1.5",children:"  "}),n.jsx("div",{className:"space-y-1 text-[12px] text-gray-700",children:P.map(L=>n.jsxs("div",{children:["- ",L.ruleLabel]},L.ruleId))})]}),n.jsx("div",{className:"mt-2 rounded border border-violet-200 bg-violet-50 p-3",children:n.jsxs("div",{className:"text-[12px] font-semibold text-violet-800",children:["  : ",B," /   ",$.length,""]})}),n.jsxs("div",{className:"mt-2 rounded border border-gray-200 bg-gray-50 p-3",children:[n.jsx("div",{className:"text-[12px] font-semibold text-gray-700 mb-1.5",children:"   "}),n.jsx("div",{className:"space-y-1 text-[12px] text-gray-700",children:W.map(L=>n.jsxs("div",{children:["- ",L]},L))})]}),n.jsxs("div",{className:"mt-2 rounded border border-gray-200 bg-white p-3 max-h-56 overflow-y-auto",children:[n.jsx("div",{className:"text-[12px] font-semibold text-gray-700 mb-1.5",children:"  "}),n.jsx("div",{className:"space-y-1.5",children:$.map(L=>n.jsxs("div",{className:`rounded border px-2 py-1.5 text-[11px] ${L.blockedByDuplicate?"border-rose-200 bg-rose-50 text-rose-700":"border-emerald-200 bg-emerald-50 text-emerald-700"}`,children:[n.jsxs("div",{className:"font-semibold",children:[L.regionLabel,"  ",Xf[L.kpiKey],"  ",L.stageKey]}),n.jsxs("div",{className:"mt-0.5",children:[L.ruleLabel,"  ",$h[L.ownerOrg],"  ",L.assigneeRole,"  SLA ",L.dueSlaHours,"h"]}),L.blockedByDuplicate?n.jsxs("div",{className:"mt-0.5",children:[" : ",L.blockedReason]}):null]},L.previewId))})]}),n.jsxs("div",{className:"mt-4 flex items-center justify-end gap-2",children:[n.jsx("button",{type:"button",onClick:()=>S(!1),className:"px-3 py-1.5 rounded border border-gray-300 text-sm text-gray-700 hover:bg-gray-50",children:""}),n.jsx("button",{type:"button",onClick:G,disabled:B===0,className:`px-3 py-1.5 rounded text-sm font-semibold text-white ${B===0?"bg-gray-300 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700"}`,children:"  "})]})]})]})]})}const CF={regionalSla:" SLA",regionalQueueRisk:" ",regionalRecontact:" ",regionalDataReadiness:" ",regionalGovernance:"/ ",regionalAdTransitionHotspot:"AD  ",regionalDxDelayHotspot:" ",regionalScreenToDxRate:" "},fke={week:"",month:"",quarter:""},Qf={queue:"  ",actions:"  ",pending:" ",bottleneckRelief:" ",effectRate:"   ",slaDelta:"SLA   "},mke=e=>{let t=0;for(let r=0;r<e.length;r+=1)t=t*31+e.charCodeAt(r)>>>0;return t},ls=(e,t,r)=>t+(r-t)*(mke(e)%1e3/1e3);function JA(e){return`${e.toFixed(1)}%`}function xb(e){return`${Math.round(e).toLocaleString()}`}function pke(e,t){return`${e>0?"+":""}${e.toFixed(1)}%p`}function eC(e,t){return t==="%"?`${e.toFixed(1)}%`:`${Math.round(e).toLocaleString()}`}function hke(){const t=window.location.pathname.indexOf("/regional/");return t<0?"":window.location.pathname.slice(0,t)}function bb(e,t){const r=new URLSearchParams(t).toString();return`${hke()}${e}${r?`?${r}`:""}`}function Zf(e,t,r){const a={scope:`${e} `,period:`${t} `},s={queue:{definition:"         ",threshold:" 7   ",interpretation:"    ",nextAction:"      "},actions:{definition:"      ",threshold:" 80%     ",interpretation:"    ",nextAction:"    "},pending:{definition:"       ",threshold:"T+3    ",interpretation:"    ",nextAction:"    "},bottleneckRelief:{definition:"     ",threshold:"(  -  )/   100",interpretation:"    ",nextAction:"     "},effectRate:{definition:"After         ",threshold:"   48  After ",interpretation:"    ",nextAction:"     "},slaDelta:{definition:"  SLA  (  )",threshold:"  ",interpretation:"   ,  ",nextAction:"     "}};return{definition:s[r].definition,scope:a.scope,period:a.period,threshold:s[r].threshold,interpretation:s[r].interpretation,nextAction:s[r].nextAction,actionTab:"reports"}}function gke({region:e,districtOptions:t,selectedKpiKey:r,selectedRegionSgg:a,selectedRange:s}){const[i,o]=g.useState(a?"sigungu":"regional"),[l,d]=g.useState(a??t[0]??""),[u,p]=g.useState(r),[m,h]=g.useState(s),[x,y]=g.useState("pdf"),N=i==="sigungu"?l||t[0]||e.label:"",v=i==="sigungu"?N:`${e.label}  `,j=fke[m],E=`${e.id}-${i}-${N||"all"}-${u}-${m}`,C=g.useMemo(()=>{const B=Math.round(ls(`${E}-queue-before`,250,760)),P=Math.round(ls(`${E}-queue-after`,140,620)),W=Math.round(ls(`${E}-actions`,14,64)),K=Math.round(ls(`${E}-pending`,4,28)),G=Math.max(0,Math.min(W,Math.round(W*ls(`${E}-effect-ratio`,.42,.89)))),U=(B-P)/Math.max(B,1)*100,te=Number(ls(`${E}-sla-prev`,11,24).toFixed(1)),re=Number((te+ls(`${E}-sla-delta`,-6.4,4.2)).toFixed(1)),q=Number((re-te).toFixed(1));return{queueBefore:B,queueAfter:P,queue:P,actions:W,pending:K,bottleneckRelief:Number(Math.max(-20,Math.min(95,U)).toFixed(1)),effectRate:Number((G/Math.max(W,1)*100).toFixed(1)),slaPrev:te,slaNow:re,slaDelta:q}},[E]),A=g.useMemo(()=>{const B=[{key:"contact_failure",label:" ",count:Math.round(ls(`${E}-cause-contact`,80,280))},{key:"staff_shortage",label:"  ",count:Math.round(ls(`${E}-cause-staff`,60,260))},{key:"hospital_slot_delay",label:"  ",count:Math.round(ls(`${E}-cause-hospital`,50,220))},{key:"data_gap",label:" ",count:Math.round(ls(`${E}-cause-data`,40,170))},{key:"external_dependency",label:"  ",count:Math.round(ls(`${E}-cause-external`,20,130))}],P=B.reduce((W,K)=>W+K.count,0);return B.sort((W,K)=>K.count-W.count).slice(0,3).map(W=>({...W,ratio:Number((W.count/Math.max(P,1)*100).toFixed(1))}))},[E]),S=g.useMemo(()=>[{title:"  ",owner:" ",stage:"Stage1",count:Math.round(ls(`${E}-itv-1`,2,8)),status:""},{title:"   ",owner:"  ",stage:"Stage2",count:Math.round(ls(`${E}-itv-2`,1,6)),status:""},{title:"   ",owner:" ",stage:"Stage3",count:Math.round(ls(`${E}-itv-3`,1,5)),status:""}],[E]),_=g.useMemo(()=>[{label:"SLA ",before:C.slaPrev,after:C.slaNow,unit:"%",higherBetter:!1},{label:"  ",before:C.queueBefore,after:C.queueAfter,unit:"",higherBetter:!1},{label:"   ",before:Number(Math.max(15,C.effectRate-ls(`${E}-effect-before`,6,18)).toFixed(1)),after:C.effectRate,unit:"%",higherBetter:!0}].map(P=>({...P,delta:Number((P.after-P.before).toFixed(1))})),[C.effectRate,C.queueAfter,C.queueBefore,C.slaNow,C.slaPrev,E]),O=g.useMemo(()=>[{title:"Stage2      ",risk:"",recommendation:"    "},{title:"After     ",risk:"",recommendation:"     "},{title:"    ",risk:"",recommendation:"   "}],[]),D=g.useMemo(()=>{const B={kpi:u==="all"?r:u,range:m==="week"?"weekly":m==="month"?"monthly":"quarterly",...i==="sigungu"?{sgg:N}:{}};return{bottleneck:bb("/regional/bottleneck",B),actions:bb("/regional/actions",B),ops:bb("/regional/ops",B),reports:bb("/regional/reports",B)}},[N,u,m,i,r]),k=g.useMemo(()=>{const B=A[0],P=S.reduce((te,re)=>te+re.count,0),W=C.slaDelta>0?`${C.slaDelta.toFixed(1)}%p `:`${Math.abs(C.slaDelta).toFixed(1)}%p `,K=`${j} ${v} ${B?.label??" "}    ,    ${A.map(te=>te.label).join(", ")}  .`,G=`   ${P} ,  ${S[0].title}  .`,U=`SLA     ${W},   ${O.length}     .`;return{line1:K,line2:G,line3:U}},[A,S,C.slaDelta,j,v,O.length]),M=g.useMemo(()=>[{id:1,title:" ",evidence:D.ops},{id:2,title:"   Top3",evidence:D.bottleneck},{id:3,title:"   ",evidence:D.actions},{id:4,title:" / KPI ",evidence:D.actions},{id:5,title:"     ",evidence:D.reports}],[D.actions,D.bottleneck,D.ops,D.reports]),F={pdf:"PDF",ppt:"PPT",csv:"CSV"},$=`${F[x]}   ${v}  ${u==="all"?"KPI ":CF[u]}  ${j}`;return n.jsxs("div",{className:"h-full overflow-auto bg-gray-50 p-4 space-y-3",children:[n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-start justify-between gap-3 flex-wrap",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-semibold text-gray-800",children:""}),n.jsx("div",{className:"text-[12px] text-gray-500 mt-0.5",children:"  +      "})]}),n.jsx("div",{className:"flex items-center gap-2",children:["pdf","ppt","csv"].map(B=>n.jsx("button",{type:"button",onClick:()=>y(B),className:`px-3 py-1.5 rounded border text-sm ${x===B?"border-blue-600 bg-blue-600 text-white":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:F[B]},B))})]}),n.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-4 gap-2",children:[n.jsxs("select",{value:i,onChange:B=>o(B.target.value),className:"px-2 py-1.5 border border-gray-300 rounded text-sm",children:[n.jsx("option",{value:"regional",children:" "}),n.jsx("option",{value:"sigungu",children:" "})]}),n.jsx("select",{value:N,onChange:B=>d(B.target.value),disabled:i!=="sigungu",className:"px-2 py-1.5 border border-gray-300 rounded text-sm disabled:bg-gray-100 disabled:text-gray-400",children:t.map(B=>n.jsx("option",{value:B,children:B},B))}),n.jsxs("select",{value:u,onChange:B=>p(B.target.value),className:"px-2 py-1.5 border border-gray-300 rounded text-sm",children:[n.jsx("option",{value:"all",children:"KPI "}),Object.entries(CF).map(([B,P])=>n.jsx("option",{value:B,children:P},B))]}),n.jsxs("select",{value:m,onChange:B=>h(B.target.value),className:"px-2 py-1.5 border border-gray-300 rounded text-sm",children:[n.jsx("option",{value:"week",children:""}),n.jsx("option",{value:"month",children:""}),n.jsx("option",{value:"quarter",children:""})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-3",children:[n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"text-[12px] text-gray-500",children:Qf.queue}),n.jsx(Ru,{help:Zf(v,j,"queue")})]}),n.jsx("div",{className:"text-xl font-bold text-gray-900 mt-1",children:xb(C.queue)}),n.jsx("a",{className:"text-[11px] text-blue-700 underline underline-offset-2",href:D.bottleneck,children:"  "})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"text-[12px] text-gray-500",children:Qf.actions}),n.jsx(Ru,{help:Zf(v,j,"actions")})]}),n.jsx("div",{className:"text-xl font-bold text-gray-900 mt-1",children:xb(C.actions)}),n.jsx("a",{className:"text-[11px] text-blue-700 underline underline-offset-2",href:D.actions,children:"  "})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"text-[12px] text-gray-500",children:Qf.pending}),n.jsx(Ru,{help:Zf(v,j,"pending")})]}),n.jsx("div",{className:"text-xl font-bold text-gray-900 mt-1",children:xb(C.pending)}),n.jsx("a",{className:"text-[11px] text-blue-700 underline underline-offset-2",href:D.actions,children:"  "})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"text-[12px] text-gray-500",children:Qf.bottleneckRelief}),n.jsx(Ru,{help:Zf(v,j,"bottleneckRelief")})]}),n.jsx("div",{className:`text-xl font-bold mt-1 ${C.bottleneckRelief>=0?"text-emerald-700":"text-rose-700"}`,children:JA(C.bottleneckRelief)}),n.jsx("a",{className:"text-[11px] text-blue-700 underline underline-offset-2",href:D.bottleneck,children:"  "})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"text-[12px] text-gray-500",children:Qf.effectRate}),n.jsx(Ru,{help:Zf(v,j,"effectRate")})]}),n.jsx("div",{className:"text-xl font-bold text-gray-900 mt-1",children:JA(C.effectRate)}),n.jsx("a",{className:"text-[11px] text-blue-700 underline underline-offset-2",href:D.actions,children:"  "})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"text-[12px] text-gray-500",children:Qf.slaDelta}),n.jsx(Ru,{help:Zf(v,j,"slaDelta")})]}),n.jsx("div",{className:`text-xl font-bold mt-1 ${C.slaDelta<=0?"text-emerald-700":"text-rose-700"}`,children:pke(C.slaDelta)}),n.jsx("a",{className:"text-[11px] text-blue-700 underline underline-offset-2",href:D.ops,children:"  "})]})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[n.jsx("div",{className:"text-sm font-semibold text-gray-700",children:"  "}),n.jsxs("div",{className:"mt-2 space-y-2",children:[n.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-3 py-2 text-[13px] text-gray-800",children:[k.line1,n.jsx("a",{className:"ml-2 text-blue-700 underline underline-offset-2 text-[12px]",href:D.bottleneck,children:"[]"})]}),n.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-3 py-2 text-[13px] text-gray-800",children:[k.line2,n.jsx("a",{className:"ml-2 text-blue-700 underline underline-offset-2 text-[12px]",href:D.actions,children:"[]"})]}),n.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-3 py-2 text-[13px] text-gray-800",children:[k.line3,n.jsx("a",{className:"ml-2 text-blue-700 underline underline-offset-2 text-[12px]",href:D.reports,children:"[]"})]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[n.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:$}),n.jsx("div",{className:"space-y-2",children:M.map(B=>n.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-3 py-2 flex items-center justify-between gap-2",children:[n.jsxs("div",{className:"text-[13px] text-gray-800",children:[B.id,". ",B.title]}),n.jsx("a",{href:B.evidence,className:"text-[11px] text-blue-700 underline underline-offset-2",children:" "})]},B.id))})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:[n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[n.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"   Top3"}),n.jsx("div",{className:"space-y-2",children:A.map((B,P)=>n.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-3 py-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"text-[13px] font-medium text-gray-800",children:[P+1,". ",B.label]}),n.jsxs("div",{className:"text-[12px] font-semibold text-gray-900",children:[xb(B.count),"  ",JA(B.ratio)]})]}),n.jsx("a",{href:D.bottleneck,className:"text-[11px] text-blue-700 underline underline-offset-2",children:"  "})]},B.key))})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[n.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"   "}),n.jsx("div",{className:"space-y-2",children:S.map(B=>n.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-3 py-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"text-[13px] font-medium text-gray-800",children:B.title}),n.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${B.status===""?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-blue-200 bg-blue-50 text-blue-700"}`,children:B.status})]}),n.jsxs("div",{className:"text-[12px] text-gray-600 mt-1",children:[B.stage,"  ",B.owner,"  ",B.count,""]}),n.jsx("a",{href:D.actions,className:"text-[11px] text-blue-700 underline underline-offset-2",children:"  "})]},B.title))})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:[n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[n.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:" / KPI "}),n.jsxs("table",{className:"w-full text-[12px]",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-gray-200",children:[n.jsx("th",{className:"text-left py-1",children:""}),n.jsx("th",{className:"text-right py-1",children:"Before"}),n.jsx("th",{className:"text-right py-1",children:"After"}),n.jsx("th",{className:"text-right py-1",children:""}),n.jsx("th",{className:"text-right py-1",children:""})]})}),n.jsx("tbody",{children:_.map(B=>{const P=B.higherBetter?B.delta>0:B.delta<0;return n.jsxs("tr",{className:"border-b border-gray-100 last:border-b-0",children:[n.jsx("td",{className:"py-1 text-gray-700",children:B.label}),n.jsx("td",{className:"py-1 text-right text-gray-600",children:eC(B.before,B.unit)}),n.jsx("td",{className:"py-1 text-right text-gray-600",children:eC(B.after,B.unit)}),n.jsxs("td",{className:`py-1 text-right font-semibold ${P?"text-emerald-700":B.delta===0?"text-gray-700":"text-rose-700"}`,children:[B.delta>0?"+":"",eC(B.delta,B.unit)]}),n.jsx("td",{className:"py-1 text-right",children:n.jsx("a",{href:D.actions,className:"text-blue-700 underline underline-offset-2",children:""})})]},B.label)})})]})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[n.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"     "}),n.jsx("div",{className:"space-y-2",children:O.map(B=>n.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 px-3 py-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"text-[13px] font-medium text-gray-800",children:B.title}),n.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${B.risk===""?"border-rose-300 bg-rose-100 text-rose-700":"border-amber-300 bg-amber-100 text-amber-700"}`,children:B.risk})]}),n.jsxs("div",{className:"text-[12px] text-gray-600 mt-1",children:[": ",B.recommendation]}),n.jsx("a",{href:D.actions,className:"text-[11px] text-blue-700 underline underline-offset-2",children:"  "})]},B.title))}),n.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[n.jsxs("button",{className:"px-3 py-1.5 rounded border border-gray-300 text-sm text-gray-700 hover:bg-gray-50",children:[j,"  PDF"]}),n.jsxs("button",{className:"px-3 py-1.5 rounded border border-gray-300 text-sm text-gray-700 hover:bg-gray-50",children:[j,"  PPT"]}),n.jsx("button",{className:"px-3 py-1.5 rounded border border-gray-300 text-sm text-gray-700 hover:bg-gray-50",children:"KPI CSV"})]})]})]})]})}const xke={overview:"/regional/ops",cause:"/regional/bottleneck",interventions:"/regional/actions",reports:"/regional/reports",settings:"/regional/settings"};function bke(e){if(!e.trim())return"/";let t=e.trim();return t.startsWith("/")||(t=`/${t}`),t.endsWith("/")||(t=`${t}/`),t}const fm=bke("/neuro-shield/");function lW(e){if(fm==="/")return e;if(e===fm.slice(0,-1))return"/";if(!e.startsWith(fm))return e;const t=e.slice(fm.length);return t.startsWith("/")?t:`/${t}`}function yke(e){if(fm==="/")return e;const t=e.startsWith("/")?e.slice(1):e;return`${fm}${t}`}const vke={week:"weekly",month:"monthly",quarter:"quarterly"},_F={weekly:"week",monthly:"month",quarterly:"quarter"};function Nke(e){return vke[e]}function Ske(e){return e&&e in _F?_F[e]:"week"}function jke(e){const t=lW(e);if(t==="/"||t==="/regional/overview"||t==="/regional/ops")return"overview";const a=t.match(/^\/regional\/([^/?#]+)/)?.[1];return a?a==="bottleneck"||a==="cause"?"cause":a==="actions"||a==="interventions"?"interventions":a==="reports"?"reports":a==="settings"?"settings":"overview":"overview"}function wke(e){const t=lW(e);return t==="/"||t.startsWith("/regional/")}function yb(e,t,r){const a=new URLSearchParams,s=yke(xke[e]);t.selectedKpiKey!=="regionalSla"&&a.set("kpi",t.selectedKpiKey),t.selectedRange!=="week"&&a.set("range",Nke(t.selectedRange)),t.selectedRegionSgg&&a.set("sgg",t.selectedRegionSgg),r&&Object.entries(r).forEach(([d,u])=>{u==null||u===""||a.set(d,u)});const i=!!(r&&Object.values(r).some(d=>d!=null&&d!==""));if(e==="overview"&&t.selectedKpiKey==="regionalSla"&&t.selectedRange==="week"&&!t.selectedRegionSgg&&!i)return s;const l=a.toString();return l?`${s}?${l}`:s}function Eke(e,t){const r=new URLSearchParams(e),a=r.get("kpi")??t;return{selectedKpiKey:a==="regionalSla"||a==="regionalQueueRisk"||a==="regionalRecontact"||a==="regionalDataReadiness"||a==="regionalGovernance"||a==="regionalAdTransitionHotspot"||a==="regionalDxDelayHotspot"||a==="regionalScreenToDxRate"?a:t,selectedRange:Ske(r.get("range")),selectedRegionSgg:r.get("sgg")}}const tC="regionalSla",TF=[{id:"overview",label:" ",icon:mg},{id:"cause",label:"  ",icon:Qa},{id:"interventions",label:" ",icon:bO},{id:"reports",label:"",icon:Xu},{id:"settings",label:"",icon:hg}],OF={seoul:["","","","","","","","","","","","","","","","","","","","","","","","",""],busan:["","","","","","","","","","","","","","","",""],daegu:["","","","","","","",""],incheon:["","","","","","","","","",""],gwangju:["","","","",""],daejeon:["","","","",""],ulsan:["","","","",""],sejong:[""],gyeonggi:["","","","","","","","","","","","","","","","","","","",""],gangwon:["","","","","","","","","",""],chungbuk:["","","","","","","","","",""],chungnam:["","","","","","","","","",""],jeonbuk:["","","","","","","","","",""],jeonnam:["","","","","","","","","",""],gyeongbuk:["","","","","","","","","",""],gyeongnam:["","","","","","","","","",""],jeju:["",""]};function Ake(e){return e==="month"?"month":e==="quarter"?"quarter":"week"}function kF(e,t){return e.selectedKpiKey===t.selectedKpiKey&&e.selectedRegionSgg===t.selectedRegionSgg&&e.selectedRange===t.selectedRange}function rC(e){const t=jke(window.location.pathname),r=Eke(window.location.search,e);return{page:t,selection:r}}function Cke({userName:e="",centerName:t=" ",onLogout:r}){const a=C2e(t),[s,i]=g.useState(a.id),[o,l]=g.useState(!0),[d,u]=g.useState(!1),p=g.useMemo(()=>rC(tC),[]),[m,h]=g.useState(p.page),[x,y]=g.useState(p.selection),[N,v]=g.useState(null),j=Ec.find(k=>k.id===s)??Ec[0],E=OF[s]??OF.seoul,C=g.useCallback((k,M,F="push",$)=>{const B=yb(k,M,$),P=new URL(B,window.location.origin),W=new URL(window.location.href);k==="overview"&&["drill","view"].forEach(G=>{if(!P.searchParams.has(G)&&W.searchParams.has(G)){const U=W.searchParams.get(G);U&&P.searchParams.set(G,U)}}),k==="cause"&&["stageImpact","stage","cause","area","period"].forEach(G=>{if(!P.searchParams.has(G)&&W.searchParams.has(G)){const U=W.searchParams.get(G);U&&P.searchParams.set(G,U)}}),!(P.pathname===W.pathname&&P.search===W.search&&P.hash===W.hash)&&(F==="replace"?window.history.replaceState({},"",`${P.pathname}${P.search}${P.hash}`):window.history.pushState({},"",`${P.pathname}${P.search}${P.hash}`))},[]);g.useEffect(()=>{const{page:k,selection:M}=rC(tC),F=window.location.pathname.replace(/\/+$/,""),$=/\/regional\/overview$/i.test(F);if(!wke(window.location.pathname)){const P={selectedKpiKey:M.selectedKpiKey,selectedRegionSgg:M.selectedRegionSgg,selectedRange:M.selectedRange};h("overview"),y(P),C("overview",P,"replace");return}if(k==="overview"&&$){const P=yb("overview",M);window.history.replaceState({},"",P)}h(k),y(M);const B=()=>{const P=rC(tC),W=window.location.pathname.replace(/\/+$/,""),K=/\/regional\/overview$/i.test(W);if(P.page==="overview"&&K){const G=yb("overview",P.selection);window.history.replaceState({},"",G)}h(P.page),y(P.selection)};return window.addEventListener("popstate",B),()=>window.removeEventListener("popstate",B)},[C]),g.useEffect(()=>{if(x.selectedRegionSgg&&!E.includes(x.selectedRegionSgg)){const k={...x,selectedRegionSgg:null};y(k),C(m,k,"replace")}},[m,E,x,C]);const A=g.useCallback((k,M,F)=>{h(k),y($=>{const B={...$,...M};return kF($,B)?(C(k,B,"replace",F),$):(C(k,B,"push",F),B)})},[C]),S=g.useCallback(k=>{y(M=>{const F={...M,...k};return kF(M,F)?M:(C(m,F,"replace"),F)})},[m,C]),_=g.useCallback(k=>{if(v(k),k.source==="top5")return;const M={selectedKpiKey:k.kpiKey,selectedRegionSgg:k.region,selectedRange:k.range},F={create:"1",source:k.source??"overview"};if(k.primaryDriverStage&&(F.primaryDriverStage=k.primaryDriverStage),k.selectedStage&&(F.stage=k.selectedStage),k.selectedCauseKey&&(F.cause=k.selectedCauseKey),k.selectedArea&&(F.area=k.selectedArea),k.snapshotId&&(F.snapshotId=k.snapshotId),k.source==="cause"){h("interventions"),y(M);const $=yb("interventions",M,F),B=new URL($,window.location.origin);B.pathname=B.pathname.replace(/\/regional\/(?:actions|interventions)$/i,"/regional/interventions/new");const P=new URL(window.location.href);(B.pathname!==P.pathname||B.search!==P.search||B.hash!==P.hash)&&window.history.pushState({},"",`${B.pathname}${B.search}${B.hash}`);return}A("interventions",M,F)},[A]),O=()=>{switch(m){case"overview":return n.jsx(EOe,{region:j,selectedKpiKey:x.selectedKpiKey,selectedRegionSgg:x.selectedRegionSgg,selectedRange:Ake(x.selectedRange),onSelectedKpiKeyChange:k=>S({selectedKpiKey:k}),onSelectedRegionSggChange:k=>S({selectedRegionSgg:k}),onSelectedRangeChange:k=>S({selectedRange:k}),onCreateIntervention:({kpi:k,sgg:M,range:F,source:$,primaryDriverStage:B})=>_({kpiKey:k,region:M,range:F,source:$,primaryDriverStage:B}),onNavigateModule:k=>A(k)});case"cause":return n.jsx(QOe,{region:j,districtOptions:E,selectedKpiKey:x.selectedKpiKey,selectedRegionSgg:x.selectedRegionSgg,selectedRange:x.selectedRange,onSelectedKpiKeyChange:k=>S({selectedKpiKey:k}),onSelectedRegionSggChange:k=>S({selectedRegionSgg:k}),onSelectedRangeChange:k=>S({selectedRange:k}),onCreateIntervention:k=>_(k)});case"interventions":return n.jsx(uke,{region:j,districtOptions:E,selectedKpiKey:x.selectedKpiKey,selectedRegionSgg:x.selectedRegionSgg,selectedRange:x.selectedRange,onSelectedKpiKeyChange:k=>S({selectedKpiKey:k}),onSelectedRegionSggChange:k=>S({selectedRegionSgg:k}),onSelectedRangeChange:k=>S({selectedRange:k}),pendingDraft:N,onPendingDraftConsumed:()=>v(null)});case"reports":return n.jsx(gke,{region:j,districtOptions:E,selectedKpiKey:x.selectedKpiKey,selectedRegionSgg:x.selectedRegionSgg,selectedRange:x.selectedRange});case"settings":return n.jsx(AOe,{regionCode:j.id,regionLabel:j.label});default:return null}},D=()=>{window.confirm(" ?")&&r&&r()};return n.jsxs("div",{className:"flex h-[100dvh] min-h-0 overflow-hidden bg-gray-50",children:[n.jsxs("aside",{className:`${o?"w-64":"w-20"} bg-slate-800 border-r border-slate-700 transition-all duration-300 flex flex-col shrink-0`,children:[n.jsx("div",{className:"h-16 flex items-center justify-between px-4 border-b border-slate-700",children:o?n.jsxs(n.Fragment,{children:[n.jsx(wO,{size:36,showText:!0,subtitle:`${j.label}  `,variant:"dark"}),n.jsx(Nt,{variant:"ghost",size:"sm",onClick:()=>l(!1),className:"h-8 w-8 p-0 text-slate-400 hover:text-white hover:bg-slate-700 shrink-0",children:n.jsx(qd,{className:"h-4 w-4"})})]}):n.jsx(Nt,{variant:"ghost",size:"sm",onClick:()=>l(!0),className:"h-8 w-8 p-0 mx-auto text-slate-400 hover:text-white hover:bg-slate-700",children:n.jsx(vO,{className:"h-4 w-4"})})}),o&&n.jsxs("div",{className:"px-4 py-3 border-b border-slate-700",children:[n.jsx("label",{className:"text-[10px] text-slate-400 block mb-1",children:" "}),n.jsx("select",{value:s,onChange:k=>{i(k.target.value),S({selectedRegionSgg:null})},className:"w-full bg-slate-700 border border-slate-600 text-slate-200 rounded px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500",children:Ec.map(k=>n.jsx("option",{value:k.id,children:k.label},k.id))})]}),n.jsx("nav",{className:"flex-1 p-4 space-y-1",children:TF.map(k=>{const M=k.icon,F=m===k.id;return n.jsxs("button",{onClick:()=>A(k.id),className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${F?"bg-blue-600 text-white":"text-slate-300 hover:bg-slate-700 hover:text-white"}`,title:o?void 0:k.label,children:[n.jsx(M,{className:`h-5 w-5 ${o?"":"mx-auto"}`}),o&&n.jsx("span",{className:"text-sm font-medium",children:k.label})]},k.id)})}),o&&n.jsxs("div",{className:"p-4 border-t border-slate-700",children:[n.jsxs("div",{className:"text-xs text-slate-400 mb-1",children:[j.label," "]}),n.jsx("div",{className:"text-sm font-medium text-white",children:e}),n.jsx("div",{className:"text-xs text-slate-400",children:" "})]})]}),n.jsxs("div",{className:"flex-1 flex min-h-0 flex-col overflow-hidden min-w-0",children:[n.jsxs("header",{className:"h-14 bg-white border-b border-gray-200 flex items-center justify-between px-6 shrink-0",children:[n.jsx("div",{className:"flex items-center gap-4",children:(()=>{const k=TF.find($=>$.id===m),M=k?.icon||mg,F=o5[m];return n.jsx(l5,{title:F?.title??k?.label??"  ",subtitle:F?.subtitle??"Neuro-Shield   ",icon:n.jsx(M,{className:"h-4 w-4 text-white"})})})()}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs(Nt,{variant:"ghost",size:"sm",className:"relative",children:[n.jsx(jp,{className:"h-5 w-5"}),n.jsx(Qr,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs",children:"3"})]}),n.jsxs("div",{className:"relative",children:[n.jsxs(Nt,{variant:"ghost",className:"flex items-center gap-2",onClick:()=>u(!d),children:[n.jsx("div",{className:"h-8 w-8 rounded-full bg-slate-100 flex items-center justify-center text-slate-600 font-semibold text-sm",children:e.charAt(0)}),n.jsx("span",{className:"text-sm font-medium",children:e}),n.jsx(gs,{className:"h-4 w-4 text-gray-400"})]}),d&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>u(!1)}),n.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-md shadow-lg border border-gray-200 z-50",children:[n.jsxs("div",{className:"px-3 py-2 border-b border-gray-200",children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:e}),n.jsx("div",{className:"text-xs text-gray-500",children:" "})]}),n.jsx("div",{className:"border-t border-gray-200 py-1",children:n.jsxs("button",{onClick:()=>{u(!1),D()},className:"w-full flex items-center px-3 py-2 text-sm text-red-600 hover:bg-red-50",children:[n.jsx(yO,{className:"mr-2 h-4 w-4"}),""]})})]})]})]})]})]}),n.jsx("main",{className:"relative flex-1 min-h-0 w-full overflow-hidden",children:O()})]})]})}function _ke(e,t=[]){let r=[];function a(i,o){const l=g.createContext(o);l.displayName=i+"Context";const d=r.length;r=[...r,o];const u=m=>{const{scope:h,children:x,...y}=m,N=h?.[e]?.[d]||l,v=g.useMemo(()=>y,Object.values(y));return n.jsx(N.Provider,{value:v,children:x})};u.displayName=i+"Provider";function p(m,h){const x=h?.[e]?.[d]||l,y=g.useContext(x);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${i}\``)}return[u,p]}const s=()=>{const i=r.map(o=>g.createContext(o));return function(l){const d=l?.[e]||i;return g.useMemo(()=>({[`__scope${e}`]:{...l,[e]:d}}),[l,d])}};return s.scopeName=e,[a,Tke(s,...t)]}function Tke(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const a=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=a.reduce((l,{useScope:d,scopeName:u})=>{const m=d(i)[`__scope${u}`];return{...l,...m}},{});return g.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}var Oke=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],G5=Oke.reduce((e,t)=>{const r=Uv(`Primitive.${t}`),a=g.forwardRef((s,i)=>{const{asChild:o,...l}=s,d=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(d,{...l,ref:i})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{}),nC={exports:{}},aC={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RF;function kke(){if(RF)return aC;RF=1;var e=$v();function t(m,h){return m===h&&(m!==0||1/m===1/h)||m!==m&&h!==h}var r=typeof Object.is=="function"?Object.is:t,a=e.useState,s=e.useEffect,i=e.useLayoutEffect,o=e.useDebugValue;function l(m,h){var x=h(),y=a({inst:{value:x,getSnapshot:h}}),N=y[0].inst,v=y[1];return i(function(){N.value=x,N.getSnapshot=h,d(N)&&v({inst:N})},[m,x,h]),s(function(){return d(N)&&v({inst:N}),m(function(){d(N)&&v({inst:N})})},[m]),o(x),x}function d(m){var h=m.getSnapshot;m=m.value;try{var x=h();return!r(m,x)}catch{return!0}}function u(m,h){return h()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:l;return aC.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:p,aC}var PF;function Rke(){return PF||(PF=1,nC.exports=kke()),nC.exports}var Pke=Rke();function Dke(){return Pke.useSyncExternalStore(Ike,()=>!0,()=>!1)}function Ike(){return()=>{}}var K5="Avatar",[Mke]=_ke(K5),[Lke,cW]=Mke(K5),dW=g.forwardRef((e,t)=>{const{__scopeAvatar:r,...a}=e,[s,i]=g.useState("idle");return n.jsx(Lke,{scope:r,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:n.jsx(G5.span,{...a,ref:t})})});dW.displayName=K5;var uW="AvatarImage",$ke=g.forwardRef((e,t)=>{const{__scopeAvatar:r,src:a,onLoadingStatusChange:s=()=>{},...i}=e,o=cW(uW,r),l=Fke(a,i),d=ps(u=>{s(u),o.onImageLoadingStatusChange(u)});return na(()=>{l!=="idle"&&d(l)},[l,d]),l==="loaded"?n.jsx(G5.img,{...i,ref:t,src:a}):null});$ke.displayName=uW;var fW="AvatarFallback",mW=g.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:a,...s}=e,i=cW(fW,r),[o,l]=g.useState(a===void 0);return g.useEffect(()=>{if(a!==void 0){const d=window.setTimeout(()=>l(!0),a);return()=>window.clearTimeout(d)}},[a]),o&&i.imageLoadingStatus!=="loaded"?n.jsx(G5.span,{...s,ref:t}):null});mW.displayName=fW;function DF(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Fke(e,{referrerPolicy:t,crossOrigin:r}){const a=Dke(),s=g.useRef(null),i=a?(s.current||(s.current=new window.Image),s.current):null,[o,l]=g.useState(()=>DF(i,e));return na(()=>{l(DF(i,e))},[i,e]),na(()=>{const d=m=>()=>{l(m)};if(!i)return;const u=d("loaded"),p=d("error");return i.addEventListener("load",u),i.addEventListener("error",p),t&&(i.referrerPolicy=t),typeof r=="string"&&(i.crossOrigin=r),()=>{i.removeEventListener("load",u),i.removeEventListener("error",p)}},[i,r,t]),o}var Bke=dW,Uke=mW;function Hke({className:e,...t}){return n.jsx(Bke,{"data-slot":"avatar",className:de("relative flex size-10 shrink-0 overflow-hidden rounded-full",e),...t})}function Gke({className:e,...t}){return n.jsx(Uke,{"data-slot":"avatar-fallback",className:de("bg-muted flex size-full items-center justify-center rounded-full",e),...t})}const IF=[{id:"national-dashboard",label:"  ",icon:wp,roles:["central_admin","policy_maker"]},{id:"model-apply",label:"  ",icon:w0,roles:["central_admin","policy_maker"]},{id:"model-governance",label:"/  ",icon:Do,roles:["central_admin"]},{id:"quality-monitoring",label:"& ",icon:Ic,roles:["central_admin","policy_maker"]},{id:"compliance-audit",label:"   ",icon:xO,roles:["central_admin"]},{id:"kpi-dictionary",label:"KPI ",icon:_m,roles:["central_admin","policy_maker"]},{id:"settings",label:"",icon:hg,roles:["central_admin","policy_maker"]}];function Kke({children:e,currentPage:t,userRole:r,userName:a,onPageChange:s,onLogout:i}){const[o,l]=g.useState(!0),[d]=g.useState(5),[u,p]=g.useState(!1),m=IF.filter(y=>y.roles.includes(r)),h=y=>{switch(y){case"central_admin":return" ";case"policy_maker":return" ";default:return""}},x=()=>{window.confirm(" ?")&&i()};return n.jsxs("div",{className:"flex h-screen bg-gray-50",children:[n.jsxs("aside",{className:`${o?"w-64":"w-20"} bg-slate-800 border-r border-slate-700 transition-all duration-300 flex flex-col`,children:[n.jsx("div",{className:"h-16 flex items-center justify-between px-4 border-b border-slate-700",children:o?n.jsxs(n.Fragment,{children:[n.jsx(wO,{size:36,showText:!0,subtitle:" ",variant:"dark"}),n.jsx(Nt,{variant:"ghost",size:"sm",onClick:()=>l(!1),className:"h-8 w-8 p-0 text-slate-400 hover:text-white hover:bg-slate-700",children:n.jsx(qd,{className:"h-4 w-4"})})]}):n.jsx(Nt,{variant:"ghost",size:"sm",onClick:()=>l(!0),className:"h-8 w-8 p-0 mx-auto text-slate-400 hover:text-white hover:bg-slate-700",children:n.jsx(vO,{className:"h-4 w-4"})})}),n.jsx("nav",{className:"flex-1 p-4 space-y-1",children:m.map(y=>{const N=y.icon,v=t===y.id;return n.jsxs("button",{onClick:()=>s(y.id),className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${v?"bg-blue-600 text-white":"text-slate-300 hover:bg-slate-700 hover:text-white"}`,children:[n.jsx(N,{className:`h-5 w-5 ${!o&&"mx-auto"}`}),o&&n.jsx("span",{className:"text-sm font-medium",children:y.label})]},y.id)})}),o&&n.jsxs("div",{className:"p-4 border-t border-slate-700",children:[n.jsx("div",{className:"text-xs text-slate-400 mb-1",children:""}),n.jsx("div",{className:"text-sm font-medium text-white",children:a}),n.jsx("div",{className:"text-xs text-slate-400",children:h(r)})]})]}),n.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[n.jsxs("header",{className:"h-14 bg-white border-b border-gray-200 flex items-center justify-between px-6",children:[n.jsx("div",{className:"flex items-center gap-3",children:(()=>{const y=IF.find(j=>j.id===t),N=y?.icon||wp,v=o5[t];return n.jsx(l5,{title:v?.title??y?.label??"  ",subtitle:v?.subtitle??"Neuro-Shield  ",icon:n.jsx(N,{className:"h-4 w-4 text-white"})})})()}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs(Nt,{variant:"ghost",size:"sm",className:"relative",children:[n.jsx(jp,{className:"h-5 w-5"}),d>0&&n.jsx(Qr,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs",children:d})]}),n.jsxs("div",{className:"relative",children:[n.jsxs(Nt,{variant:"ghost",className:"flex items-center gap-2",onClick:()=>p(!u),children:[n.jsx(Hke,{className:"h-8 w-8",children:n.jsx(Gke,{className:"bg-slate-100 text-slate-600",children:a.charAt(0)})}),n.jsx("span",{className:"text-sm font-medium",children:a}),n.jsx(gs,{className:"h-4 w-4 text-gray-400"})]}),u&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>p(!1)}),n.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-md shadow-lg border border-gray-200 z-50",children:[n.jsxs("div",{className:"px-3 py-2 border-b border-gray-200",children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:a}),n.jsx("div",{className:"text-xs text-gray-500",children:h(r)})]}),n.jsx("div",{className:"py-1",children:n.jsxs("button",{onClick:()=>{p(!1),s("settings")},className:"w-full flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[n.jsx(hg,{className:"mr-2 h-4 w-4"}),""]})}),n.jsx("div",{className:"border-t border-gray-200 py-1",children:n.jsxs("button",{onClick:()=>{p(!1),x()},className:"w-full flex items-center px-3 py-2 text-sm text-red-600 hover:bg-red-50",children:[n.jsx(yO,{className:"mr-2 h-4 w-4"}),""]})})]})]})]})]})]}),n.jsx("main",{className:"flex-1 w-full overflow-auto relative",children:e})]})]})}const sC={drillLevel:"nation",drillPath:[{level:"nation",code:"KR",name:""}],selectedRegion:null};function zke(){const[e,t]=g.useState(sC),r=g.useCallback((d,u={})=>{const p=u.replace??!0;t(m=>{if(d.level==="nation")return Fh("nation","KR",p),sC;const h=m.drillPath[m.drillPath.length-1],x=m.drillPath.findIndex(N=>N.level===d.level&&N.code===d.code);let y;return x>=0?(y=m.drillPath.slice(0,x+1),y[y.length-1]={level:d.level,code:d.code,name:d.name}):h?.level===d.level?y=[...m.drillPath.slice(0,-1),d]:y=[...m.drillPath,d],Fh(d.level,d.code,p),{drillLevel:d.level,drillPath:y,selectedRegion:d}})},[]),a=g.useCallback(d=>{r(d,{replace:!0})},[r]),s=g.useCallback(()=>{t(d=>{if(d.drillPath.length<=1)return d;const u=d.drillPath.slice(0,-1),p=u[u.length-1];return Fh(p.level,p.code,!0),{drillLevel:p.level,drillPath:u,selectedRegion:p.level==="nation"?null:{code:p.code,name:p.name,level:p.level}}})},[]),i=g.useCallback(d=>{t(u=>{if(d<0||d>=u.drillPath.length)return u;const p=u.drillPath.slice(0,d+1),m=p[p.length-1];return Fh(m.level,m.code,!0),{drillLevel:m.level,drillPath:p,selectedRegion:m.level==="nation"?null:{code:m.code,name:m.name,level:m.level}}})},[]),o=g.useCallback(()=>{t(sC),Fh("nation","KR",!0)},[]),l=g.useCallback(d=>{t(u=>({...u,selectedRegion:d}))},[]);return{...e,drillDown:a,drillUp:s,drillTo:i,resetDrill:o,setSelectedRegion:l,setScope:r}}function Fh(e,t,r=!0){if(typeof window>"u")return;const a=new URL(window.location.href);if(a.searchParams.set("level",e),a.searchParams.set("region",t),r){window.history.replaceState({},"",a.toString());return}window.history.pushState({},"",a.toString())}function iC(e){return{nation:"",sido:"",sigungu:"",center:""}[e]||e}const rN=[{id:"sla-status",name:"SLA ",description:"SLA / ",domain:"sla",metric:{numerator:"sla_compliant_count",denominator:"total_count",aggregation:"rate",unit:"%"},visualization:{chartType:"donut",breakdown:"status",colorScheme:"sla",format:{decimals:2,suffix:"%"}},filters:{allowedLevels:["nation","sido","sigungu","center"],defaultTimeRange:"week"},priority:1,isActive:!0},{id:"data-status",name:" ",description:" / ",domain:"data",metric:{numerator:"data_sufficient_count",denominator:"total_count",aggregation:"rate",unit:"%"},visualization:{chartType:"donut",breakdown:"status",colorScheme:"data",format:{decimals:2,suffix:"%"}},filters:{allowedLevels:["nation","sido","sigungu","center"],defaultTimeRange:"week"},priority:2,isActive:!0},{id:"case-distribution",name:" ",description:"/  ",domain:"case",metric:{valueField:"case_count",aggregation:"sum",unit:""},visualization:{chartType:"bar",breakdown:"ageGroup",colorScheme:"age",format:{decimals:0}},filters:{allowedLevels:["nation","sido","sigungu","center"],defaultTimeRange:"week"},priority:3,isActive:!0},{id:"center-load",name:"  ",description:"   ",domain:"case",metric:{valueField:"transfer_count",aggregation:"sum",unit:""},visualization:{chartType:"bar",breakdown:"centerType",colorScheme:"blue",format:{decimals:0}},filters:{allowedLevels:["nation","sido"],defaultTimeRange:"week"},priority:4,isActive:!0},{id:"trend-timeseries",name:"  ",description:"    ",domain:"case",metric:{valueField:"processed_count",aggregation:"sum",unit:""},visualization:{chartType:"line",breakdown:"month",colorScheme:"green",format:{decimals:0}},filters:{allowedLevels:["nation","sido","sigungu"],defaultTimeRange:"year"},priority:10,isActive:!0},{id:"kpi-summary-table",name:"KPI ",description:"KPI // ",domain:"case",metric:{valueField:"kpi_value",aggregation:"avg",unit:"%"},visualization:{chartType:"table",format:{decimals:1}},filters:{allowedLevels:["nation","sido"],defaultTimeRange:"week"},priority:5,isActive:!0,chartEnabled:!1},{id:"kpi-sla-rate",name:"SLA ",description:"   SLA   ",domain:"sla",metric:{numerator:"sla_compliant_count",denominator:"total_count",aggregation:"rate",unit:"%",baseline:92,target:95,higherBetter:!0},visualization:{chartType:"bullet",format:{decimals:1,suffix:"%"}},filters:{allowedLevels:["nation","sido","sigungu","center"],defaultTimeRange:"week"},priority:100,isActive:!0,chartEnabled:!0},{id:"kpi-data-rate",name:" ",description:"      ",domain:"data",metric:{numerator:"data_sufficient_count",denominator:"total_count",aggregation:"rate",unit:"%",baseline:88,target:90,higherBetter:!0},visualization:{chartType:"bullet",format:{decimals:1,suffix:"%"}},filters:{allowedLevels:["nation","sido","sigungu","center"],defaultTimeRange:"week"},priority:101,isActive:!0,chartEnabled:!0},{id:"kpi-completion-rate",name:" ",description:"      ",domain:"case",metric:{numerator:"completed_count",denominator:"total_count",aggregation:"rate",unit:"%",baseline:88,target:90,higherBetter:!0},visualization:{chartType:"bullet",format:{decimals:1,suffix:"%"}},filters:{allowedLevels:["nation","sido","sigungu","center"],defaultTimeRange:"week"},priority:102,isActive:!0,chartEnabled:!0},{id:"kpi-response-rate",name:" ",description:"     ",domain:"response",metric:{numerator:"timely_response_count",denominator:"total_count",aggregation:"rate",unit:"%",baseline:82,target:85,higherBetter:!0},visualization:{chartType:"bullet",format:{decimals:1,suffix:"%"}},filters:{allowedLevels:["nation","sido","sigungu","center"],defaultTimeRange:"week"},priority:103,isActive:!0,chartEnabled:!0},{id:"kpi-quality-score",name:" ",description:"    ",domain:"quality",metric:{valueField:"quality_score",aggregation:"avg",unit:"",baseline:85,target:88,higherBetter:!0},visualization:{chartType:"bullet",format:{decimals:1,suffix:""}},filters:{allowedLevels:["nation","sido","sigungu","center"],defaultTimeRange:"week"},priority:104,isActive:!0,chartEnabled:!0},{id:"kpi-avg-processing-time",name:" ",description:"     ()",domain:"time",metric:{valueField:"processing_time_days",aggregation:"avg",unit:"",baseline:3,target:2.5,higherBetter:!1},visualization:{chartType:"bullet",format:{decimals:1,suffix:""}},filters:{allowedLevels:["nation","sido","sigungu","center"],defaultTimeRange:"week"},priority:105,isActive:!0,chartEnabled:!0},{id:"total-cases",name:" ",description:"   ",domain:"case",metric:{valueField:"total_case_count",aggregation:"sum",unit:""},visualization:{chartType:"treemap",breakdown:"region",colorScheme:"blue",format:{decimals:0}},filters:{allowedLevels:["nation","sido","sigungu","center"],defaultTimeRange:"week"},priority:0,isActive:!0}];function MF(e){const t=rN.filter(r=>r.isActive);switch(e){case"left":return t.filter(r=>r.visualization.chartType==="treemap"||r.id==="total-cases").sort((r,a)=>r.priority-a.priority);case"right":return t.filter(r=>["donut","bar","table"].includes(r.visualization.chartType)&&r.id!=="total-cases").sort((r,a)=>r.priority-a.priority);case"bottom":return t.filter(r=>r.visualization.chartType==="line").sort((r,a)=>r.priority-a.priority);default:return[]}}function qke(e){return rN.find(t=>t.id===e)}function Wke(e){return rN.filter(t=>t.isActive&&t.filters.allowedLevels.includes(e)).sort((t,r)=>t.priority-r.priority)}function Vke(e){return rN.filter(t=>t.isActive&&t.chartEnabled===!0&&(!e||t.filters.allowedLevels.includes(e))).sort((t,r)=>t.priority-r.priority)}function Yke(e){let t=0;for(let r=0;r<e.length;r++)t=t*31+e.charCodeAt(r)>>>0;return t}function $n(e,t,r){const a=Yke(e)%1e3/1e3;return t+(r-t)*a}function Xke(e,t,r,a){const s=qke(e);if(!s)return null;const i=`${e}-${t}-${r}`;switch(s.visualization.chartType){case"donut":{if(e==="sla-status"){const o=100-$n(`${i}-sla`,2,6);return[{name:"",value:Number(o.toFixed(2)),color:"#3b82f6"},{name:"",value:Number((100-o).toFixed(2)),color:"#ef4444"}]}if(e==="data-status"){const o=100-$n(`${i}-data`,3,8);return[{name:"",value:Number(o.toFixed(2)),color:"#3b82f6"},{name:"",value:Number((100-o).toFixed(2)),color:"#f59e0b"}]}return[{name:"1",value:Math.round($n(`${i}-1`,40,60)),color:"#3b82f6"},{name:"2",value:Math.round($n(`${i}-2`,20,40)),color:"#22c55e"},{name:"3",value:Math.round($n(`${i}-3`,10,20)),color:"#f59e0b"}]}case"bar":{if(e==="case-distribution"){const o=["20~24","25~29","30~34","35~39","40~44","45~49","50~54","55~59","60~64","65~69","70~74","75~79","80~84","85~"],l=[1200,1800,2200,2300,2700,3400,3600,3300,3900,3800,4400,4200,4100,3500,2300,1700,1300,1e3];return o.map((d,u)=>({label:d,value:Math.round(l[u]*(.9+$n(`${i}-age-${u}`,0,.2)))}))}return e==="center-load"?[{label:"",value:Math.round($n(`${i}-load-1`,35e3,45e3))},{label:" ",value:Math.round($n(`${i}-load-2`,4e3,6e3))},{label:" ",value:Math.round($n(`${i}-load-3`,1500,2500))},{label:" ",value:Math.round($n(`${i}-load-4`,1200,2e3))},{label:"",value:Math.round($n(`${i}-load-5`,1e3,1800))}]:[{label:"A",value:Math.round($n(`${i}-a`,1e3,5e3))},{label:"B",value:Math.round($n(`${i}-b`,1e3,5e3))},{label:"C",value:Math.round($n(`${i}-c`,1e3,5e3))}]}case"table":return{columns:[{key:"kpi",label:"KPI ",align:"left"},{key:"avg",label:"",align:"right",format:"percent"},{key:"min",label:"()",align:"right"},{key:"max",label:"()",align:"right"}],rows:[{kpi:"SLA ",avg:96.2,min:"91.3% ()",max:"99.1% ()"},{kpi:" ",avg:94.8,min:"88.5% ()",max:"98.2% ()"},{kpi:" ",avg:2.3,min:"1.8 ()",max:"3.5 ()"}]};case"line":return["2018","2019","2020","2021","2022","2023","2024","2025","2026"].map((l,d)=>({x:l,value:Math.round($n(`${i}-ts-${d}`,12e3,18e3))}));case"treemap":return[{name:"",value:Math.round($n(`${i}-tree-`,2500,3500))},{name:"",value:Math.round($n(`${i}-tree-`,1800,2500))},{name:"",value:Math.round($n(`${i}-tree-`,1500,2200))},{name:"",value:Math.round($n(`${i}-tree-`,1200,1800))},{name:"",value:Math.round($n(`${i}-tree-`,1e3,1500))}];case"bullet":{const o=s.metric,l=o.baseline??85,d=o.target??90,u=o.higherBetter!==!1,p=o.unit||"%",m=[],h=(y,N)=>{const v=N.match(/\d+/),j=v?Number(v[0]):0,E=$n(`${i}-phase`,0,6.28),C=Math.sin(j*.9+E),A=$n(`${i}-${y}-${N}`,-1,1);return y==="kpi-sla-rate"?92+C*4+A*2:y==="kpi-data-rate"?91+C*5+A*2:y==="kpi-completion-rate"?90+C*4.5+A*2:y==="kpi-response-rate"?85+C*5+A*3:y==="kpi-quality-score"?88+C*4+A*2:y==="kpi-avg-processing-time"?2.8+C*.8+A*.3:l+C*5+A*3};if(a==="week"){const y=new Date(2026,1,5);for(let N=6;N>=0;N--){const v=new Date(y);v.setDate(v.getDate()-N);const j=`${v.getMonth()+1}/${v.getDate()}`;m.push({date:j,value:Number(h(e,`d${N}`).toFixed(1))})}}else if(a==="month"){const y=["1","2","3","4","5","6","7","8","9","10","11","12"];for(let N=0;N<12;N++)m.push({date:y[N],value:Number(h(e,`m${N}`).toFixed(1))})}else{const y=["1","2","3","4"];for(let N=0;N<4;N++)m.push({date:y[N],value:Number(h(e,`q${N}`).toFixed(1))})}const x=m[m.length-1].value;return{dailyData:m,current:x,baseline:l,target:d,unit:p,higherBetter:u}}default:return null}}const l0=[{id:"chg_20260124",title:"L2  6560  ",type:"rule_threshold",version:"v2.3.2 (draft)",deployedAt:"2026-01-24T14:00:00+09:00",deployedBy:"-",status:"reviewing",description:"   L2   . 60~64   24%     .",before:{slaRate:89.8,responseTimeliness:85.1,completionRate:92.7,dataFulfillment:94.3},after:{slaRate:89.8,responseTimeliness:85.1,completionRate:92.7,dataFulfillment:94.3},impactSummary:[{kpi:"SLA",label:"SLA ",changePp:0,verdict:"insignificant"},{kpi:"RESP",label:" ",changePp:0,verdict:"insignificant"},{kpi:"COMP",label:" ",changePp:0,verdict:"insignificant"},{kpi:"DATA",label:" ",changePp:0,verdict:"insignificant"}],affectedRegions:[""],riskLevel:"medium",requestedBy:" ()",approvedBy:null,currentRule:"  65  L2",proposedRule:"  60  L2",reason:" 3   , 60~64   ( 24%).      15%     ."},{id:"chg_20260120",title:"L2  6065  ",type:"rule_threshold",version:"v2.3.1",deployedAt:"2026-01-20T09:00:00+09:00",deployedBy:" ()",status:"deployed",description:"L2    60 65 .         .",before:{slaRate:87.2,responseTimeliness:82.5,completionRate:91.3,dataFulfillment:94.1},after:{slaRate:89.8,responseTimeliness:85.1,completionRate:92.7,dataFulfillment:94.3},impactSummary:[{kpi:"SLA",label:"SLA ",changePp:2.6,verdict:"improved"},{kpi:"RESP",label:" ",changePp:2.6,verdict:"improved"},{kpi:"COMP",label:" ",changePp:1.4,verdict:"improved"},{kpi:"DATA",label:" ",changePp:.2,verdict:"insignificant"}],affectedRegions:[""],riskLevel:"medium",requestedBy:" ()",approvedBy:" ()"},{id:"chg_20260115",title:"  75 ",type:"contact_rule",version:"v2.3.0",deployedAt:"2026-01-15T14:30:00+09:00",deployedBy:" ()",status:"deployed",description:"L3    7 5 .    .",before:{slaRate:85.8,responseTimeliness:80.1,completionRate:89.5,dataFulfillment:93.8},after:{slaRate:87.2,responseTimeliness:82.5,completionRate:91.3,dataFulfillment:94.1},impactSummary:[{kpi:"SLA",label:"SLA ",changePp:1.4,verdict:"improved"},{kpi:"RESP",label:" ",changePp:2.4,verdict:"improved"},{kpi:"COMP",label:" ",changePp:1.8,verdict:"improved"},{kpi:"DATA",label:" ",changePp:.3,verdict:"insignificant"}],affectedRegions:[""],riskLevel:"low",requestedBy:" ( )",approvedBy:" ()"},{id:"chg_20260110",title:"  v3.2 ",type:"model_version",version:"v3.2.0",deployedAt:"2026-01-10T11:00:00+09:00",deployedBy:" ()",status:"deployed",description:"   v3.2  .  +3.2%p,  +1.8%p .",before:{slaRate:84.1,responseTimeliness:78.9,completionRate:88.2,dataFulfillment:93.2},after:{slaRate:85.8,responseTimeliness:80.1,completionRate:89.5,dataFulfillment:93.8},impactSummary:[{kpi:"SLA",label:"SLA ",changePp:1.7,verdict:"improved"},{kpi:"RESP",label:" ",changePp:1.2,verdict:"improved"},{kpi:"COMP",label:" ",changePp:1.3,verdict:"improved"},{kpi:"DATA",label:" ",changePp:.6,verdict:"insignificant"}],affectedRegions:[""],riskLevel:"low",requestedBy:" ()",approvedBy:" ()"},{id:"chg_20260105",title:"  1.21.35 ",type:"ruleset",version:"v2.2.5",deployedAt:"2026-01-05T10:00:00+09:00",deployedBy:" ()",status:"rollback",description:"   1.2 1.35 .   1  .",before:{slaRate:84.5,responseTimeliness:79.2,completionRate:88.8,dataFulfillment:93.5},after:{slaRate:82.3,responseTimeliness:76.8,completionRate:86.1,dataFulfillment:93.4},impactSummary:[{kpi:"SLA",label:"SLA ",changePp:-2.2,verdict:"worsened"},{kpi:"RESP",label:" ",changePp:-2.4,verdict:"worsened"},{kpi:"COMP",label:" ",changePp:-2.7,verdict:"worsened"},{kpi:"DATA",label:" ",changePp:-.1,verdict:"insignificant"}],affectedRegions:[""],riskLevel:"high",requestedBy:" ()",approvedBy:" ()"}],Qke=[{key:"ops_bottleneck",label:" ",icon:"",description:" , SLA ,        ",severity:"critical",score:38,contributionPct:35,topRegions:[{code:"26",name:"",score:22,detail:"SLA 78.2%,  42"},{code:"27",name:"",score:35,detail:"SLA 82.5%,  "},{code:"31",name:"",score:41,detail:"  SLA 84%"}],indicators:[{label:" SLA ",value:89.8,unit:"%",threshold:90,status:"yellow"},{label:"  ",value:156,unit:"",threshold:100,status:"red"},{label:"  ",value:4.2,unit:"",threshold:3,status:"red"},{label:"   ",value:28.5,unit:"/",threshold:25,status:"yellow"}]},{key:"data_quality",label:" ",icon:"",description:" ,  ,      ",severity:"warning",score:62,contributionPct:28,topRegions:[{code:"26",name:"",score:48,detail:"  8.2%"},{code:"27",name:"",score:55,detail:"   48"},{code:"28",name:"",score:61,detail:"  12"}],indicators:[{label:" ",value:95.5,unit:"%",threshold:95,status:"green"},{label:" ",value:96.8,unit:"%",threshold:95,status:"green"},{label:" ",value:93.8,unit:"%",threshold:95,status:"yellow"},{label:"  ",value:4.5,unit:"%",threshold:5,status:"yellow"}]},{key:"contact_strategy",label:" ",icon:"",description:" ,  ,       ",severity:"good",score:75,contributionPct:22,topRegions:[{code:"30",name:"",score:58,detail:"  62%"},{code:"29",name:"",score:65,detail:"  68%"},{code:"31",name:"",score:70,detail:"  "}],indicators:[{label:" ",value:78.5,unit:"%",threshold:80,status:"yellow"},{label:" ",value:72.3,unit:"%",threshold:70,status:"green"},{label:"  ",value:2.8,unit:"",threshold:3,status:"green"},{label:" ",value:85.1,unit:"%",threshold:85,status:"green"}]},{key:"model_fitness",label:" ",icon:"",description:"  ,  ,      ",severity:"good",score:82,contributionPct:15,topRegions:[{code:"27",name:"",score:68,detail:"F1 89.2%,  "},{code:"26",name:"",score:72,detail:"Precision  "},{code:"28",name:"",score:78,detail:" "}],indicators:[{label:" F1 ",value:91.6,unit:"%",threshold:90,status:"green"},{label:"  ",value:.12,unit:"",threshold:.15,status:"green"},{label:" ",value:90.5,unit:"%",threshold:90,status:"green"},{label:"",value:92.8,unit:"%",threshold:90,status:"green"}]}],Vb=[{id:"qa_001",type:"sla_breach",severity:"critical",title:" SLA  ",description:"SLA  78.2% (85%) .  42 .",region:"",detectedAt:"2026-01-24T08:00:00+09:00",resolved:!1,relatedDriver:"ops_bottleneck"},{id:"qa_002",type:"update_delay",severity:"warning",title:"   ",description:"   48. (24) .",region:"",detectedAt:"2026-01-23T10:00:00+09:00",resolved:!1,relatedDriver:"data_quality"},{id:"qa_003",type:"model_drift",severity:"warning",title:"L3     ",description:"F1 89.2%    -2.4%p.  .",region:"",detectedAt:"2026-01-22T15:00:00+09:00",resolved:!1,relatedDriver:"model_fitness"},{id:"qa_004",type:"data_missing",severity:"info",title:"   ",description:"  12 .    .",region:"",detectedAt:"2026-01-21T09:00:00+09:00",resolved:!0,relatedDriver:"data_quality"}],Zke=[{id:"ua_001",timestamp:"2026-01-24T09:15:00+09:00",type:"violation",severity:"high",status:"reviewing",title:"  PII  ",actor:" (CS-1042)",actorRole:"",center:" ",target:"  DB",violationType:"  ",violatedRegulation:" 29,  SEC-003",cause:"      . IP     .",requestor:" (CS-1042)",executor:" (CS-1042)",policyRef:" 29",internalStandardId:"SEC-003",approvalComment:"     .    .",rationale:"  PII    .    .",kpiSnapshot:{slaRate:89.8,riskTop3:[" "," "," "],regionContext:""}},{id:"ua_002",timestamp:"2026-01-22T14:20:00+09:00",type:"violation",severity:"medium",status:"resolved",title:"   ",actor:"",actorRole:"  ",center:" ",target:"   #2847",violationType:"   ",violatedRegulation:" ACC-007 (   )",cause:"      .  .",relatedChangeId:"chg_20260120",requestor:"",approver:" ()",executor:"  ",policyRef:"     v2.1",internalStandardId:"ACC-007",approvalComment:"    .  .",rationale:"     .       .",kpiSnapshot:{slaRate:88.5,riskTop3:[" "," "," "],regionContext:""}},{id:"ua_003",timestamp:"2026-01-20T16:00:00+09:00",type:"violation",severity:"low",status:"resolved",title:"SLA   (3)",actor:" ",actorRole:" ",center:" ",target:"SLA  (48   )",violationType:"SLA  ",violatedRegulation:" SLA-001 (  48)",cause:"     (+15).   .",requestor:" ",executor:"  ",approvalComment:"  1  . 3  72   .",policyRef:" SLA-001",internalStandardId:"SLA-001",rationale:"   48 SLA .     .",kpiSnapshot:{slaRate:87.2,riskTop3:[" "," "," "],regionContext:""}},{id:"ua_004",timestamp:"2026-01-20T09:00:00+09:00",type:"policy_change",severity:"medium",status:"resolved",title:"L2  6065  ",actor:"",actorRole:" ",target:"L2   ()",cause:"        .",relatedChangeId:"chg_20260120",requestor:" ()",approver:" ()",executor:" ()",policyRef:"    v4.2",internalStandardId:"RULE-L2-001",approvalComment:"  . SLA +2.6%p  .   .",rationale:"       .   .",kpiSnapshot:{slaRate:87.2,riskTop3:[" "," "," "],regionContext:""}},{id:"ua_005",timestamp:"2026-01-15T14:30:00+09:00",type:"policy_change",severity:"low",status:"resolved",title:"  75  ()",actor:"",actorRole:" ",target:"L3   ()",cause:"L3  7    2 . 5  .",relatedChangeId:"chg_20260115",requestor:" ()",approver:" ()",executor:"  ",policyRef:"   v3.0",internalStandardId:"RULE-CT-002",approvalComment:"   . 2    .",rationale:"L3  7    2 . 5     .",kpiSnapshot:{slaRate:86.1,riskTop3:[" "," "," "],regionContext:""}},{id:"ua_006",timestamp:"2026-01-10T11:00:00+09:00",type:"model_deploy",severity:"medium",status:"resolved",title:"   v3.2  ",actor:"",actorRole:" ",target:"    ",cause:"v3.1   +3.2%p . A/B  2 .",relatedChangeId:"chg_20260110",requestor:" ()",approver:" ()",executor:" ()",policyRef:"    v1.3",internalStandardId:"MDL-DEP-001",approvalComment:"A/B   .  +3.2%p,  +1.8%p.   .",rationale:"v3.1   +3.2%p. A/B  2    .",kpiSnapshot:{slaRate:85.8,riskTop3:[" "," "," "],regionContext:""}},{id:"ua_007",timestamp:"2026-01-24T17:00:00+09:00",type:"resolution",severity:"high",status:"resolved",title:"     ",actor:"",actorRole:" ",target:"  5 ",cause:"SLA  78.2%  .  42   .",requestor:" ",approver:" ()",executor:"",policyRef:"    v2.0",internalStandardId:"OPS-EMG-001",approvalComment:"5   2 10  . 48    50% .",rationale:"SLA  78.2%  .   42 .    .",kpiSnapshot:{slaRate:78.2,riskTop3:[" "," "," "],regionContext:""}},{id:"ua_008",timestamp:"2026-01-18T11:30:00+09:00",type:"resolution",severity:"medium",status:"resolved",title:"    ",actor:"",actorRole:" ",target:"   ",cause:"        .",requestor:"  ",approver:" ()",executor:"  ",policyRef:"     v1.5",internalStandardId:"SEC-POST-001",approvalComment:"     .   .",rationale:"   48    .      .",kpiSnapshot:{slaRate:88.5,riskTop3:[" "," "," "],regionContext:""}},{id:"ua_009",timestamp:"2026-01-05T10:00:00+09:00",type:"policy_change",severity:"high",status:"resolved",title:"  1.21.35  ( )",actor:"",actorRole:" ",target:"   ",cause:"    .   .",relatedChangeId:"chg_20260105",requestor:" ()",approver:"",executor:"  ",policyRef:"   v2.0",internalStandardId:"RULE-WT-001",approvalComment:" +22%  1   . SLA -2.2%p  .",rationale:"     1  . SLA  .",kpiSnapshot:{slaRate:82.3,riskTop3:[" "," "," "],regionContext:""}}];function Jke(e){let t=0;for(let r=0;r<e.length;r++)t=t*31+e.charCodeAt(r)>>>0;return t}function ke(e,t,r){return t+Jke(e)%1e4/1e4*(r-t)}function ga(e,t,r){return Math.min(r,Math.max(t,e))}function sm(e,t,r){const a=Math.max(.1,r.spread),s=ga(r.volatility??.28,.12,.6),i=ga(r.trendBias??0,-1,1),o=ke(`${e}-slope`,-a*.24,a*.24)+i*a*.14,l=ke(`${e}-cycle`,a*.12,a*.42),d=ke(`${e}-phase`,0,Math.PI*2),u=a*s,p=Math.round(ke(`${e}-shock-day`,1,Math.max(1,t-2))),m=ke(`${e}-shock-amp`,a*.25,a*.85),h=ke(`${e}-shock-recovery`,.35,.72),x=ke(`${e}-pre-shock`,.15,.35);let y=ke(`${e}-shock-sign`,-1,1)>=0?1:-1;r.shockDirection==="up"&&(y=1),r.shockDirection==="down"&&(y=-1);const N=m*y,v=[],j=Math.max(1,t-1);for(let E=0;E<t;E+=1){const C=(E-j/2)*o,A=Math.sin(E/j*Math.PI*2+d)*l,S=Math.sin(E/j*Math.PI+d*.5)*(l*.35),_=ke(`${e}-noise-${E}`,-u,u);let O=0;E===p&&(O+=N),E===p-1&&(O+=N*x),E===p+1&&(O-=N*h),E===p+2&&(O-=N*h*.35);const D=r.base+C+A+S+_+O;v.push(Number(ga(D,r.min,r.max).toFixed(1)))}return v}function gl(e,t=9){if(!e.length)return 0;const r=Math.max(0,e.length-3),a=e[e.length-1]-e[r];return Number(ga(a,-t,t).toFixed(1))}const pW=[{code:"11",name:""},{code:"26",name:""},{code:"27",name:""},{code:"28",name:""},{code:"29",name:""},{code:"30",name:""},{code:"31",name:""},{code:"36",name:""},{code:"41",name:""},{code:"43",name:""},{code:"44",name:""},{code:"45",name:""},{code:"46",name:""},{code:"47",name:""},{code:"48",name:""},{code:"50",name:""},{code:"51",name:""}],Rg=e=>new Promise(t=>setTimeout(t,e));async function e5e(e="LAST_7D",t="default"){await Rg(200);const r=`central-kpis-${e}-${t}`,a=sm(`${r}-sq-sp`,7,{base:92.2,spread:3.4,min:84,max:99,volatility:.24,trendBias:.12,shockDirection:"down"}),s=sm(`${r}-pi-sp`,7,{base:27.5,spread:9.2,min:8,max:48,volatility:.34,trendBias:.08,shockDirection:"both"}),i=sm(`${r}-br-sp`,7,{base:38.5,spread:8.5,min:15,max:58,volatility:.33,trendBias:.16,shockDirection:"up"}),o=sm(`${r}-dr-sp`,7,{base:90.8,spread:4.8,min:78,max:99,volatility:.26,trendBias:.1,shockDirection:"down"}),l=sm(`${r}-gs-sp`,7,{base:95.1,spread:2.8,min:88,max:99,volatility:.2,trendBias:.06,shockDirection:"down"}),d=Number(ga(a[a.length-1]+ke(`${r}-sq-adjust`,-.6,.6),85,97).toFixed(1)),u=Number(ga(s[s.length-1]+ke(`${r}-pi-adjust`,-1.2,1.2),12,42).toFixed(1)),p=Number(ga(i[i.length-1]+ke(`${r}-br-adjust`,-1.5,1.5),18,55).toFixed(1)),m=Number(ga(o[o.length-1]+ke(`${r}-dr-adjust`,-.8,.8),80,98).toFixed(1)),h=Number(ga(l[l.length-1]+ke(`${r}-gs-adjust`,-.5,.5),88,99).toFixed(1)),x=Math.round(ke(`${r}-sq-d`,1e4,18e3)),y=Math.round(ke(`${r}-dr-d`,8e3,17e3)),N=Math.round(ke(`${r}-gs-d`,900,2e3)),v=[{kpiId:"SIGNAL_QUALITY",window:e,numerator:Math.round(ga(x*d/100+ke(`${r}-sq-n-jitter`,-120,120),0,x)),denominator:x,value:d,delta7d:gl(a,3.5),sparkline:a},{kpiId:"POLICY_IMPACT",window:e,numerator:Math.round(ga(u+ke(`${r}-pi-n-jitter`,-2.5,2.5),0,100)),denominator:100,value:u,delta7d:gl(s,8),auxiliary:{rollbackCount:Math.round(ke(`${r}-pi-rb`,0,3)),warningRegions:Math.round(ke(`${r}-pi-wr`,1,5))},sparkline:s},{kpiId:"BOTTLENECK_RISK",window:e,numerator:Math.round(ga(p+ke(`${r}-br-n-jitter`,-3,3),0,100)),denominator:100,value:p,delta7d:gl(i,7),auxiliary:{slaViolationRate:Number(ke(`${r}-br-sla`,5,25).toFixed(1)),l2BacklogCount:Math.round(ke(`${r}-br-bc`,30,200))},sparkline:i},{kpiId:"DATA_READINESS",window:e,numerator:Math.round(ga(y*m/100+ke(`${r}-dr-n-jitter`,-140,140),0,y)),denominator:y,value:m,delta7d:gl(o,4.5),auxiliary:{missingFieldRate:Number(ke(`${r}-dr-mf`,1,12).toFixed(1)),linkagePendingRate:Number(ke(`${r}-dr-lp`,2,15).toFixed(1))},sparkline:o},{kpiId:"GOVERNANCE_SAFETY",window:e,numerator:Math.round(ga(N*h/100+ke(`${r}-gs-n-jitter`,-20,20),0,N)),denominator:N,value:h,delta7d:gl(l,3),auxiliary:{missingResponsible:Math.round(ke(`${r}-gs-mr`,0,8)),missingExplanation:Math.round(ke(`${r}-gs-me`,0,6))},sparkline:l}];return{window:e,timestamp:new Date().toISOString(),kpis:v}}async function t5e(e="LAST_7D",t="default"){await Rg(150);const r=`central-funnel-${e}-${t}`,a=Math.round(ke(`${r}-reach`,5e4,12e4)),s=Math.round(a*ke(`${r}-s0r`,.25,.4)),i=Math.round(s*ke(`${r}-s1r`,.1,.2)),o=Math.round(i*ke(`${r}-cnr`,.5,.72)),l=Math.round(o*ke(`${r}-l0r`,.3,.45)),d=Math.round(o*ke(`${r}-l1r`,.25,.38)),u=Math.round(o*ke(`${r}-l2r`,.12,.25)),p=Math.round((d+u)*ke(`${r}-s2r`,.35,.55)),m=Math.round(p*ke(`${r}-s3r`,.15,.35)),h=[{stage:"Reach",label:"(Reach)",count:a},{stage:"Stage0",label:"0 ",count:s},{stage:"Stage1",label:"1  ",count:i},{stage:"Consent",label:" ",count:o},{stage:"L0",label:"L0 ",count:l},{stage:"L1",label:"L1 ",count:d},{stage:"L2",label:"L2 ",count:u},{stage:"Stage2",label:"2 ",count:p},{stage:"Stage3",label:"3 ",count:m}],x=h.map((y,N)=>({...y,conversionRate:N===0?100:Number((y.count/h[N-1].count*100).toFixed(1))}));return{window:e,stages:x}}async function r5e(e="LAST_7D",t="default"){await Rg(150);const r=`central-bn-${e}-${t}`,a=[{key:"consent_pending_rate",label:" ",value:Number(ke(`${r}-cp`,15,45).toFixed(1)),unit:"%",threshold:30,status:ke(`${r}-cp`,15,45)>30?"red":ke(`${r}-cp`,15,45)>20?"yellow":"green",category:"consent"},{key:"consent_median_days",label:"  ",value:Number(ke(`${r}-cd`,1.5,6).toFixed(1)),unit:"",threshold:3,status:ke(`${r}-cd`,1.5,6)>3?"red":ke(`${r}-cd`,1.5,6)>2?"yellow":"green",category:"consent"},{key:"input_readiness_rate",label:" ",value:Number(ke(`${r}-ir`,70,98).toFixed(1)),unit:"%",threshold:90,status:ke(`${r}-ir`,70,98)<90?"red":"green",category:"readiness"},{key:"data_completeness",label:" ",value:Number(ke(`${r}-dc`,82,99).toFixed(1)),unit:"%",threshold:95,status:ke(`${r}-dc`,82,99)<95?"yellow":"green",category:"readiness"},{key:"stage2_blocked_rate",label:"2 ",value:Number(ke(`${r}-s2b`,5,25).toFixed(1)),unit:"%",threshold:15,status:ke(`${r}-s2b`,5,25)>15?"red":ke(`${r}-s2b`,5,25)>10?"yellow":"green",category:"blocked"},{key:"stage3_blocked_rate",label:"3 ",value:Number(ke(`${r}-s3b`,3,20).toFixed(1)),unit:"%",threshold:12,status:ke(`${r}-s3b`,3,20)>12?"red":ke(`${r}-s3b`,3,20)>8?"yellow":"green",category:"blocked"},{key:"api_p95_latency",label:"API P95 ",value:Math.round(ke(`${r}-api`,120,800)),unit:"ms",threshold:500,status:ke(`${r}-api`,120,800)>500?"red":ke(`${r}-api`,120,800)>300?"yellow":"green",category:"system"},{key:"queue_depth",label:"  ",value:Math.round(ke(`${r}-qd`,0,500)),unit:"",threshold:200,status:ke(`${r}-qd`,0,500)>200?"red":ke(`${r}-qd`,0,500)>100?"yellow":"green",category:"system"}];return{window:e,metrics:a}}async function n5e(e="LAST_7D",t="default"){await Rg(150);const r=`central-link-${e}-${t}`,a=[{stage:"stage2",linkageRate:Number(ke(`${r}-s2lr`,55,82).toFixed(1)),medianLeadTimeDays:Number(ke(`${r}-s2lt`,3,12).toFixed(1)),blockedCount:Math.round(ke(`${r}-s2bc`,15,90)),blockedReasons:[{reason:" ",count:Math.round(ke(`${r}-s2r1`,5,30))},{reason:" ",count:Math.round(ke(`${r}-s2r2`,3,20))},{reason:" ",count:Math.round(ke(`${r}-s2r3`,2,15))},{reason:" ",count:Math.round(ke(`${r}-s2r4`,1,10))}]},{stage:"stage3",linkageRate:Number(ke(`${r}-s3lr`,40,70).toFixed(1)),medianLeadTimeDays:Number(ke(`${r}-s3lt`,7,28).toFixed(1)),blockedCount:Math.round(ke(`${r}-s3bc`,5,40)),blockedReasons:[{reason:"(dropout)",count:Math.round(ke(`${r}-s3r1`,3,15))},{reason:" ",count:Math.round(ke(`${r}-s3r2`,2,10))},{reason:" ",count:Math.round(ke(`${r}-s3r3`,1,8))}]}];return{window:e,metrics:a}}async function a5e(e="LAST_7D",t="default"){await Rg(200);const r=`central-reg-${e}-${t}`,a=pW.map(s=>{const i=`${r}-${s.code}`;return{regionCode:s.code,regionName:s.name,signalQuality:Number(ke(`${i}-sq`,80,98).toFixed(1)),policyImpact:Number(ke(`${i}-pi`,10,45).toFixed(1)),bottleneckRisk:Number(ke(`${i}-br`,15,55).toFixed(1)),dataReadiness:Number(ke(`${i}-dr`,78,99).toFixed(1)),governanceSafety:Number(ke(`${i}-gs`,85,99).toFixed(1)),blockedPct:Number(ke(`${i}-blk`,5,30).toFixed(1)),consentPct:Number(ke(`${i}-cnp`,40,80).toFixed(1)),backlogCount:Math.round(ke(`${i}-bc`,5,120))}});return a.sort((s,i)=>i.blockedPct-s.blockedPct),{window:e,rows:a}}async function s5e(e="LAST_7D",t,r,a,s="default"){const i=a?`${r}-${a}`:"nation",o=`bundle-${e}-${s}-${i}`,l=t&&t.length>0?t:pW,d=(re,q,L)=>l.map(H=>({regionCode:H.code,regionName:H.name,value:Number(ke(`${o}-${re}-${H.code}`,q,L).toFixed(1))})),u=(re,q)=>{const L=q.length??7,H=sm(`${o}-${re}-tr`,L,{base:q.base,spread:q.spread,min:q.min,max:q.max,volatility:q.volatility,trendBias:q.trendBias,shockDirection:q.shockDirection});return{values:H,points:H.map((ae,oe)=>({period:`D${oe+1}`,value:ae}))}},p=(re,q)=>{const L=[...re].sort((H,ae)=>q?H.value-ae.value:ae.value-H.value);return{worst:L.slice(0,5),best:L.slice(-5).reverse()}},m=d("sq",80,98),h=p(m,!0),x=u("sq",{base:92,spread:3.2,min:84,max:99,volatility:.24,trendBias:.1,shockDirection:"down"}),N={national:{value:Number(ga(x.values[x.values.length-1]+ke(`${o}-sq-nat-j`,-.6,.6),85,97).toFixed(1)),deltaPP:gl(x.values,3.5),target:95},regions:m,breakdown:[{name:" ",value:Math.round(ke(`${o}-sq-b1`,8500,16e3)),color:"#2563eb"},{name:"",value:Math.round(ke(`${o}-sq-b2`,200,800)),color:"#f59e0b"},{name:"",value:Math.round(ke(`${o}-sq-b3`,100,400)),color:"#ef4444"},{name:"",value:Math.round(ke(`${o}-sq-b4`,50,200)),color:"#6b7280"}],breakdownType:"donut",cause:[{name:" ",value:Math.round(ke(`${o}-sq-c1`,120,350))},{name:" ",value:Math.round(ke(`${o}-sq-c2`,80,250))},{name:" ",value:Math.round(ke(`${o}-sq-c3`,50,180))},{name:" ",value:Math.round(ke(`${o}-sq-c4`,30,120))},{name:"",value:Math.round(ke(`${o}-sq-c5`,10,60))}],causeType:"bar",trend:x.points,worstRegions:h.worst,bestRegions:h.best},v=d("pi",10,50),j=p(v,!1),E=u("pi",{base:27.8,spread:9.4,min:8,max:48,volatility:.34,trendBias:.08,shockDirection:"both"}),A={national:{value:Number(ga(E.values[E.values.length-1]+ke(`${o}-pi-nat-j`,-1.4,1.4),12,42).toFixed(1)),deltaPP:gl(E.values,8),target:20},regions:v,breakdown:[{name:" ",value:Math.round(ke(`${o}-pi-b1`,3,12)),color:"#7c3aed"},{name:" ",value:Math.round(ke(`${o}-pi-b2`,1,5)),color:"#a855f7"},{name:" ",value:Math.round(ke(`${o}-pi-b3`,2,8)),color:"#c084fc"},{name:"",value:Math.round(ke(`${o}-pi-b4`,1,4)),color:"#e9d5ff"}],breakdownType:"bar",cause:[{name:"SLA ",value:Number(ke(`${o}-pi-c1`,1,8).toFixed(1))},{name:"  ",value:Number(ke(`${o}-pi-c2`,.5,5).toFixed(1))},{name:" ",value:Number(ke(`${o}-pi-c3`,.3,4).toFixed(1))},{name:"  ",value:Number(ke(`${o}-pi-c4`,.1,2).toFixed(1))}],causeType:"bar",trend:E.points,worstRegions:j.worst,bestRegions:j.best},S=d("br",15,60),_=p(S,!1),O=u("br",{base:38.6,spread:8.9,min:15,max:60,volatility:.35,trendBias:.16,shockDirection:"up"}),k={national:{value:Number(ga(O.values[O.values.length-1]+ke(`${o}-br-nat-j`,-1.8,1.8),18,55).toFixed(1)),deltaPP:gl(O.values,7),target:30},regions:S,breakdown:[{name:"SLA ",value:Number(ke(`${o}-br-b1`,5,25).toFixed(1)),color:"#dc2626"},{name:"L2 ",value:Number(ke(`${o}-br-b2`,8,30).toFixed(1)),color:"#f87171"},{name:" ",value:Number(ke(`${o}-br-b3`,3,18).toFixed(1)),color:"#fca5a5"}],breakdownType:"stacked",cause:[{name:" ",value:Math.round(ke(`${o}-br-c1`,20,80))},{name:" ",value:Math.round(ke(`${o}-br-c2`,10,45))},{name:" ",value:Math.round(ke(`${o}-br-c3`,8,35))},{name:" ",value:Math.round(ke(`${o}-br-c4`,5,20))},{name:"",value:Math.round(ke(`${o}-br-c5`,3,15))}],causeType:"bar",trend:O.points,worstRegions:_.worst,bestRegions:_.best},M=d("dr",78,99),F=p(M,!0),$=u("dr",{base:90.8,spread:4.6,min:78,max:99,volatility:.26,trendBias:.1,shockDirection:"down"}),P={national:{value:Number(ga($.values[$.values.length-1]+ke(`${o}-dr-nat-j`,-.9,.9),80,98).toFixed(1)),deltaPP:gl($.values,4.5),target:95},regions:M,breakdown:[{name:" ",value:Math.round(ke(`${o}-dr-b1`,7e3,15e3)),color:"#059669"},{name:" ",value:Math.round(ke(`${o}-dr-b2`,200,900)),color:"#f59e0b"},{name:" ",value:Math.round(ke(`${o}-dr-b3`,100,500)),color:"#ef4444"}],breakdownType:"donut",cause:[{name:" ",value:Math.round(ke(`${o}-dr-c1`,80,300))},{name:" ",value:Math.round(ke(`${o}-dr-c2`,60,250))},{name:" ",value:Math.round(ke(`${o}-dr-c3`,40,180))},{name:" ",value:Math.round(ke(`${o}-dr-c4`,20,120))}],causeType:"donut",trend:$.points,worstRegions:F.worst,bestRegions:F.best},W=d("gs",85,99),K=p(W,!0),G=u("gs",{base:95.1,spread:2.6,min:88,max:99,volatility:.2,trendBias:.06,shockDirection:"down"}),te={national:{value:Number(ga(G.values[G.values.length-1]+ke(`${o}-gs-nat-j`,-.5,.5),88,99).toFixed(1)),deltaPP:gl(G.values,3),target:98},regions:W,breakdown:[{name:" ",value:Math.round(ke(`${o}-gs-b1`,30,150)),color:"#d97706"},{name:" ",value:Math.round(ke(`${o}-gs-b2`,20,100)),color:"#f59e0b"},{name:" ",value:Math.round(ke(`${o}-gs-b3`,10,60)),color:"#fbbf24"},{name:" ",value:Math.round(ke(`${o}-gs-b4`,5,40)),color:"#fcd34d"}],breakdownType:"donut",cause:[{name:"",value:Math.round(ke(`${o}-gs-c1`,8,25))},{name:"",value:Math.round(ke(`${o}-gs-c2`,6,20))},{name:"",value:Math.round(ke(`${o}-gs-c3`,4,18))},{name:"",value:Math.round(ke(`${o}-gs-c4`,3,15))},{name:"",value:Math.round(ke(`${o}-gs-c5`,2,12))}],causeType:"lineRank",trend:G.points,worstRegions:K.worst,bestRegions:K.best};return{signalQuality:N,policyImpact:A,bottleneckRisk:k,dataReadiness:P,governanceSafety:te}}const i5e={SIGNAL_QUALITY:{id:"SIGNAL_QUALITY",name:" ",shortName:" ",description:"  :      ( )",formula:"ValidSignals / TotalSignals  100",numeratorField:"validSignals",denominatorField:"totalSignals",unit:"%",higherBetter:!0,baseline:88,target:95,drillToken:"VALID_SIGNALS"},POLICY_IMPACT:{id:"POLICY_IMPACT",name:" ",shortName:" ",description:"/   KPI  (  0-100)",formula:"PolicyChangeImpactScore ()",numeratorField:"impactScore",denominatorField:"maxScore",unit:"%",higherBetter:!1,baseline:35,target:20,drillToken:"POLICY_IMPACT_SCORE",auxiliaryKeys:["rollbackCount","warningRegions"]},BOTTLENECK_RISK:{id:"BOTTLENECK_RISK",name:" ",shortName:" ",description:"SLA    (0-100 )",formula:"(SLAViolation0.4 + L2Backlog0.35 + RecontactNeed0.25)",numeratorField:"weightedRisk",denominatorField:"maxRisk",unit:"%",higherBetter:!1,baseline:45,target:30,drillToken:"BOTTLENECK_SCORE",auxiliaryKeys:["slaViolationRate","l2BacklogCount"]},DATA_READINESS:{id:"DATA_READINESS",name:" ",shortName:" ",description:"     ",formula:"ReadyCases / TotalCases  100",numeratorField:"readyCases",denominatorField:"totalCases",unit:"%",higherBetter:!0,baseline:85,target:95,drillToken:"DATA_READY_CASES",auxiliaryKeys:["missingFieldRate","linkagePendingRate"]},GOVERNANCE_SAFETY:{id:"GOVERNANCE_SAFETY",name:" ",shortName:"",description:"       ()",formula:"AuditReady / TotalAuditable  100",numeratorField:"auditReady",denominatorField:"totalAuditable",unit:"%",higherBetter:!0,baseline:90,target:98,drillToken:"AUDIT_READY",auxiliaryKeys:["missingResponsible","missingExplanation"]}};function hW(){return Object.values(i5e)}const o5e={SIGNAL_QUALITY:{bg:"bg-blue-50",text:"text-blue-700",border:"border-blue-300",icon:"",hex:"#2563eb"},POLICY_IMPACT:{bg:"bg-violet-50",text:"text-violet-700",border:"border-violet-300",icon:"",hex:"#7c3aed"},BOTTLENECK_RISK:{bg:"bg-red-50",text:"text-red-700",border:"border-red-300",icon:"",hex:"#dc2626"},DATA_READINESS:{bg:"bg-emerald-50",text:"text-emerald-700",border:"border-emerald-300",icon:"",hex:"#059669"},GOVERNANCE_SAFETY:{bg:"bg-amber-50",text:"text-amber-700",border:"border-amber-300",icon:"",hex:"#d97706"}},Jf=e=>`${e.toFixed(1)}%`,vb=e=>e.toFixed(1),oC={signalQuality:{key:"signalQuality",label:" ",shortLabel:"",unit:"%",description:"  :     ",tooltipLines:["       ",": ()  {period}"," ,  //  "],primaryColor:"#2563eb",softBg:"#dbeafe",palette:["#eff6ff","#bfdbfe","#93c5fd","#60a5fa","#3b82f6","#2563eb","#1d4ed8"],valueFormatter:Jf,target:95,warnBelow:90,riskBelow:85,legend:{ticks:[0,20,40,60,80,100],format:Jf,direction:"higherBetter"},analysisSummary:" , /    "},policyImpact:{key:"policyImpact",label:" ",shortLabel:"",unit:"",description:"/   KPI (  0-100)",tooltipLines:["/      ",": ()  {period}","  ,      "],primaryColor:"#7c3aed",softBg:"#ede9fe",palette:["#faf5ff","#e9d5ff","#d8b4fe","#c084fc","#a855f7","#7c3aed","#6d28d9"],valueFormatter:vb,higherIsWorse:!0,legend:{ticks:[0,20,40,60,80,100],format:vb,direction:"higherWorse"},analysisSummary:"/      "},bottleneckRisk:{key:"bottleneckRisk",label:" ",shortLabel:"",unit:"",description:"SLA    (0-100 )",tooltipLines:["    ",": ()  {period}"," ,  //  "],primaryColor:"#dc2626",softBg:"#fee2e2",palette:["#fef2f2","#fecaca","#fca5a5","#f87171","#ef4444","#dc2626","#b91c1c"],valueFormatter:vb,higherIsWorse:!0,warnBelow:void 0,legend:{ticks:[0,20,40,60,80,100],format:vb,direction:"higherWorse"},analysisSummary:"SLA //    "},dataReadiness:{key:"dataReadiness",label:" ",shortLabel:"",unit:"%",description:"    ",tooltipLines:["   /   ",": ()  {period}"," ,   /  "],primaryColor:"#059669",softBg:"#d1fae5",palette:["#ecfdf5","#d1fae5","#a7f3d0","#6ee7b7","#34d399","#059669","#047857"],valueFormatter:Jf,target:95,warnBelow:90,riskBelow:85,legend:{ticks:[0,20,40,60,80,100],format:Jf,direction:"higherBetter"},analysisSummary:"  /    "},governanceSafety:{key:"governanceSafety",label:" ",shortLabel:"",unit:"%",description:" /    ",tooltipLines:["    ",": ()  {period}"," ,   /  "],primaryColor:"#d97706",softBg:"#fef3c7",palette:["#fffbeb","#fef3c7","#fde68a","#fcd34d","#fbbf24","#d97706","#b45309"],valueFormatter:Jf,target:98,warnBelow:95,riskBelow:90,legend:{ticks:[0,20,40,60,80,100],format:Jf,direction:"higherBetter"},analysisSummary:"/  /  "}},lC={SIGNAL_QUALITY:"signalQuality",POLICY_IMPACT:"policyImpact",BOTTLENECK_RISK:"bottleneckRisk",DATA_READINESS:"dataReadiness",GOVERNANCE_SAFETY:"governanceSafety"},cC={signalQuality:"SIGNAL_QUALITY",policyImpact:"POLICY_IMPACT",bottleneckRisk:"BOTTLENECK_RISK",dataReadiness:"DATA_READINESS",governanceSafety:"GOVERNANCE_SAFETY"},l5e={neutral:"text-slate-600",good:"text-emerald-600",warn:"text-amber-600",bad:"text-rose-600"};function oO(e){return typeof e=="number"&&Number.isFinite(e)?e.toLocaleString("ko-KR"):String(e??"-")}function Mv(e){return typeof e!="number"||!Number.isFinite(e)?null:`${Math.max(0,Math.min(100,e)).toFixed(1)}%`}function LF(e,t){const r=[`${t+1}`,e.title,` ${oO(e.value)}`],a=Mv(e.percentOfTotal);a&&r.push(`  ${a}`);const s=Mv(e.conversionFromPrev);return s&&r.push(` ${s}`),e.helperText&&r.push(e.helperText),r.join(", ")}function c5e({steps:e,ariaLabel:t="  ",density:r="comfortable",layout:a="scroll"}){const s=r==="compact",i=a==="scroll";return!e||e.length===0?n.jsx("div",{className:"rounded-xl border border-slate-200 bg-slate-50 px-3 py-4 text-center text-xs text-slate-500",children:"   ."}):n.jsx("div",{className:de("rounded-2xl border border-slate-200 bg-white p-3 shadow-sm",s?"p-2.5":"p-3"),children:n.jsx("div",{className:de(i?"overflow-x-auto pb-1":"overflow-visible"),children:n.jsx("ol",{className:de("items-stretch",i?"flex min-w-max gap-2":"flex flex-wrap gap-2"),"aria-label":t,children:e.map((o,l)=>{const d=Mv(o.percentOfTotal),u=Mv(o.conversionFromPrev),p=l5e[o.status??"neutral"],m=typeof o.onClick=="function";return n.jsxs(Y.Fragment,{children:[n.jsx("li",{className:de("rounded-xl border border-slate-200 bg-slate-50/70 transition-all",i?"w-[198px] shrink-0":"min-w-[180px] grow basis-[180px]",m&&"hover:border-slate-300 hover:shadow-md"),children:m?n.jsxs("button",{type:"button",onClick:o.onClick,className:de("h-full w-full rounded-xl px-4 py-3 text-left outline-none focus-visible:ring-2 focus-visible:ring-blue-300",s?"px-3 py-2.5":"px-4 py-3"),"aria-label":LF(o,l),title:o.helperText,children:[n.jsx("p",{className:de("font-semibold text-slate-800",s?"text-[11px]":"text-xs"),children:o.title}),n.jsx("p",{className:de("mt-1.5 font-bold leading-none text-slate-900",s?"text-2xl":"text-[30px]"),children:oO(o.value)}),n.jsxs("div",{className:"mt-2 flex items-center justify-between text-[11px]",children:[n.jsx("span",{className:"text-slate-500",children:o.subLabel??" "}),d?n.jsx("span",{className:de("font-semibold",p),children:d}):null]}),u?n.jsxs("div",{className:"mt-2 border-t border-slate-200 pt-1.5 text-[11px]",children:[n.jsx("span",{className:"text-slate-500",children:": "}),n.jsx("span",{className:de("font-semibold",p),children:u})]}):null]}):n.jsxs("div",{className:de("h-full rounded-xl px-4 py-3 text-left outline-none focus-visible:ring-2 focus-visible:ring-blue-300",s?"px-3 py-2.5":"px-4 py-3"),tabIndex:0,"aria-label":LF(o,l),title:o.helperText,children:[n.jsx("p",{className:de("font-semibold text-slate-800",s?"text-[11px]":"text-xs"),children:o.title}),n.jsx("p",{className:de("mt-1.5 font-bold leading-none text-slate-900",s?"text-2xl":"text-[30px]"),children:oO(o.value)}),n.jsxs("div",{className:"mt-2 flex items-center justify-between text-[11px]",children:[n.jsx("span",{className:"text-slate-500",children:o.subLabel??" "}),d?n.jsx("span",{className:de("font-semibold",p),children:d}):null]}),u?n.jsxs("div",{className:"mt-2 border-t border-slate-200 pt-1.5 text-[11px]",children:[n.jsx("span",{className:"text-slate-500",children:": "}),n.jsx("span",{className:de("font-semibold",p),children:u})]}):null]})}),l<e.length-1?n.jsx("li",{"aria-hidden":"true",className:"flex shrink-0 items-center justify-center px-0.5 text-slate-300",children:n.jsx(ei,{size:18})}):null]},o.id)})})})})}async function gW(e="LAST_7D",t="default"){return e5e(e,t)}async function d5e(e="LAST_7D",t="default"){return t5e(e,t)}async function u5e(e="LAST_7D",t="default"){return r5e(e,t)}async function f5e(e="LAST_7D",t="default"){return n5e(e,t)}async function m5e(e="LAST_7D",t="default"){return a5e(e,t)}async function $F(e="LAST_7D",t,r,a,s="default"){return s5e(e,t,r,a,s)}async function xW(e={}){return l0}async function p5e(e={}){return Qke}async function h5e(e={}){return Vb}async function g5e(e={}){return Zke}const Nb=6e4,Sb=30*6e4,x5e={funnelData:[],bottleneckData:[],linkageData:[],regionData:[]};function FF(e){if(e.level!=="nation"&&e.subRegions?.length)return e.subRegions.map(t=>({code:t.id,name:t.name}))}function BF(e,t,r,a){const s=e.subRegions?.length?e.subRegions.map(i=>i.id).join("|"):"none";return["dashboard",e.level,e.regionCode??"KR",s,t,a??"default",r]}function b5e(e,t,r,a={}){const s=hO(),i=g.useMemo(()=>FF(e),[e]),o=a.loadDrilldown??!1,l=a.periodVariant,d=g.useMemo(()=>BF(e,t,r,l),[e,t,l,r]),u=xc({queryKey:[...d,"kpis"],queryFn:async()=>(await gW(t,l)).kpis,placeholderData:d0,staleTime:Nb,gcTime:Sb,refetchOnWindowFocus:!1}),p=xc({queryKey:[...d,"bundle"],queryFn:()=>$F(t,i,e.level,e.regionCode,l),placeholderData:d0,staleTime:Nb,gcTime:Sb,refetchOnWindowFocus:!1}),m=xc({queryKey:[...d,"drilldown"],queryFn:async()=>{const[j,E,C,A]=await Promise.all([d5e(t,l),u5e(t,l),f5e(t,l),m5e(t,l)]);return{funnelData:j.stages,bottleneckData:E.metrics,linkageData:C.metrics,regionData:A.rows}},enabled:o,placeholderData:d0,staleTime:Nb,gcTime:Sb,refetchOnWindowFocus:!1}),h=g.useCallback(j=>{const E=FF(j),C=BF(j,t,r,l);s.prefetchQuery({queryKey:[...C,"bundle"],queryFn:()=>$F(t,E,j.level,j.regionCode,l),staleTime:Nb,gcTime:Sb})},[t,l,s,r]),x=!!(p.data&&u.data),y=x&&(p.isFetching||o&&m.isFetching),N=x&&!y&&u.isFetching,v=x?y?"loadingScopeChange":N?"refreshing":"ready":"loadingInitial";return{centralKpis:u.data??[],dashData:p.data??null,drilldownData:m.data??x5e,loadingStage:v,isInitialLoading:v==="loadingInitial",isScopeChangeLoading:v==="loadingScopeChange",isRefreshing:v==="refreshing",prefetchScope:h}}function y5e({visible:e,stage:t="scopeChange",label:r,className:a}){if(!e)return null;const s=r??(t==="refreshing"?"   ":"  ");return n.jsxs("div",{className:de("pointer-events-none absolute inset-0 z-30",a),children:[n.jsx("div",{className:de("absolute inset-0 transition-opacity duration-300",t==="scopeChange"?"bg-white/35 backdrop-blur-[1px]":"bg-white/18")}),n.jsx("div",{className:"absolute inset-x-0 top-0 h-0.5 overflow-hidden bg-blue-100/90",children:n.jsx("div",{className:"ns-loading-overlay-bar h-full w-1/3 bg-blue-600"})}),n.jsx("div",{className:"absolute right-3 top-3 rounded-md border border-blue-100 bg-white/90 px-2 py-1 text-[11px] font-medium text-blue-700 shadow-sm",children:s})]})}function bW({value:e,className:t,decimals:r=0,duration:a=420,locale:s="ko-KR",formatter:i,prefix:o="",suffix:l=""}){const[d,u]=g.useState(e),p=g.useRef(e),m=g.useRef(null);g.useEffect(()=>{if(!Number.isFinite(e)){u(e),p.current=e;return}const x=performance.now(),y=p.current,N=e;if(!Number.isFinite(y)||a<=0){u(N),p.current=N;return}m.current&&cancelAnimationFrame(m.current);const v=j=>{const E=Math.min(1,(j-x)/a),C=1-Math.pow(1-E,3),A=y+(N-y)*C;u(A),E<1?m.current=requestAnimationFrame(v):(p.current=N,m.current=null)};return m.current=requestAnimationFrame(v),()=>{m.current&&cancelAnimationFrame(m.current),m.current=null}},[a,e]);const h=i?i(d):new Intl.NumberFormat(s,{minimumFractionDigits:r,maximumFractionDigits:r}).format(d);return n.jsx("span",{className:de("tabular-nums",t),children:`${o}${h}${l}`})}function v5e({top5:e,childrenCodes:t,parentRegionCode:r}){const a=new Set(t),s=e.some(l=>!a.has(l.code)),i=r!=null&&e.some(l=>l.code===r),o=!s&&!i;return console.assert(o,"[Top5] invalid candidate detected",{top5Codes:e.map(l=>l.code),parentRegionCode:r,childrenCodes:t}),o}const z5="central.settings.v1",dC=(e,t,r)=>Math.min(r,Math.max(t,e)),ha={matrixThresholds:{slaCut:86,dataCut:86},headline:{maxItems:3,includePartialBadge:!0},drilldown:{keepPreviousData:!0,prefetchEnabled:!0,useScopeOverlay:!0},notifications:{batchDelayed:!0,qualityRisk:!0,governanceGap:!0,policyImpactSpike:!1},reports:{defaultPeriod:"weekly",includeFilterContext:!0}};function N5e(e){return e==="weekly"||e==="monthly"||e==="quarterly"||e==="yearly_cum"}function yW(e){return{matrixThresholds:{slaCut:dC(Number(e?.matrixThresholds?.slaCut??ha.matrixThresholds.slaCut),70,99),dataCut:dC(Number(e?.matrixThresholds?.dataCut??ha.matrixThresholds.dataCut),70,99)},headline:{maxItems:dC(Number(e?.headline?.maxItems??ha.headline.maxItems),1,5),includePartialBadge:!!(e?.headline?.includePartialBadge??ha.headline.includePartialBadge)},drilldown:{keepPreviousData:!!(e?.drilldown?.keepPreviousData??ha.drilldown.keepPreviousData),prefetchEnabled:!!(e?.drilldown?.prefetchEnabled??ha.drilldown.prefetchEnabled),useScopeOverlay:!!(e?.drilldown?.useScopeOverlay??ha.drilldown.useScopeOverlay)},notifications:{batchDelayed:!!(e?.notifications?.batchDelayed??ha.notifications.batchDelayed),qualityRisk:!!(e?.notifications?.qualityRisk??ha.notifications.qualityRisk),governanceGap:!!(e?.notifications?.governanceGap??ha.notifications.governanceGap),policyImpactSpike:!!(e?.notifications?.policyImpactSpike??ha.notifications.policyImpactSpike)},reports:{defaultPeriod:N5e(e?.reports?.defaultPeriod)?e.reports.defaultPeriod:ha.reports.defaultPeriod,includeFilterContext:!!(e?.reports?.includeFilterContext??ha.reports.includeFilterContext)}}}function vW(){try{if(typeof window>"u")return{...ha};const e=localStorage.getItem(z5);if(!e)return{...ha};const t=JSON.parse(e);return yW(t)}catch{return{...ha}}}function S5e(e){const t=yW(e);typeof window>"u"||localStorage.setItem(z5,JSON.stringify(t))}function j5e(){return typeof window<"u"&&localStorage.removeItem(z5),{...ha}}function w5e(){const e=g.useRef(null),[t,r]=g.useState({width:typeof window<"u"?window.innerWidth:1920,height:typeof window<"u"?window.innerHeight:1080}),a=g.useRef(null);return g.useEffect(()=>{const s=e.current;if(!s)return;const i=()=>{a.current&&cancelAnimationFrame(a.current),a.current=requestAnimationFrame(()=>{const d=s.getBoundingClientRect();r(u=>u.width===d.width&&u.height===d.height?u:{width:d.width,height:d.height})})},o=new ResizeObserver(i);o.observe(s);const l=()=>i();return window.addEventListener("resize",l,{passive:!0}),i(),()=>{o.disconnect(),window.removeEventListener("resize",l),a.current&&cancelAnimationFrame(a.current)}},[]),[e,t]}const Bh={blue:"#3b82f6",red:"#ef4444",green:"#22c55e",orange:"#f59e0b",cyan:"#06b6d4"},UF=[{id:"total_cases",label:" ",unit:"",color:"blue",iconBg:"bg-blue-100 text-blue-600",getValue:e=>Math.round(En(`${e}-new`,1200,2800))},{id:"completion",label:" ",unit:"",color:"green",iconBg:"bg-green-100 text-green-600",getValue:e=>Math.round(En(`${e}-progress`,800,1500))},{id:"consultation_time",label:"SLA ",unit:"%",color:"red",iconBg:"bg-red-100 text-red-600",getValue:e=>Number(En(`${e}-sla`,2.5,8.5).toFixed(1))},{id:"followup_dropout",label:" ",unit:"%",color:"orange",iconBg:"bg-amber-100 text-amber-600",getValue:e=>Number(En(`${e}-data`,3,12).toFixed(1))},{id:"dropout",label:" ",unit:"%",color:"purple",iconBg:"bg-purple-100 text-purple-600",getValue:e=>Number(En(`${e}-recontact`,5,15).toFixed(1))}],E5e=e=>{const{cx:t,cy:r,midAngle:a,innerRadius:s,outerRadius:i,percent:o,name:l}=e;if(o*100<5)return null;const d=Math.PI/180,u=s+(i-s)*.5,p=t+u*Math.cos(-a*d),m=r+u*Math.sin(-a*d);return n.jsx("text",{x:p,y:m,fill:"#fff",textAnchor:"middle",dominantBaseline:"central",fontSize:10,fontWeight:600,style:{textShadow:"0 1px 2px rgba(0,0,0,0.3)"},children:`${(o*100).toFixed(1)}%`})},A5e=e=>{let t=0;for(let r=0;r<e.length;r++)t=t*31+e.charCodeAt(r)>>>0;return t},En=(e,t,r)=>{const a=A5e(e)%1e3/1e3;return t+(r-t)*a},HF=["#3b82f6","#22c55e","#f59e0b","#8b5cf6","#ec4899","#06b6d4"];function C5e({kpiDef:e,data:t,colorIndex:r,analyticsPeriod:a}){if(!t)return n.jsx("div",{className:"bg-gray-50 rounded-lg p-2 h-[80px] flex items-center justify-center border border-gray-200 shadow-sm",children:n.jsx("div",{className:"w-full h-10 bg-gray-100 rounded animate-pulse"})});const{dailyData:s,current:i,baseline:o,target:l,unit:d,higherBetter:u}=t,p=HF[r%HF.length],m=u?i>=l:i<=l,h=a==="week"?0:a==="month"?2:a==="year"?3:0,x=["bg-blue-50/50","bg-green-50/50","bg-amber-50/50","bg-purple-50/50","bg-pink-50/50","bg-cyan-50/50"],y=x[r%x.length];return n.jsxs("div",{className:`${y} rounded-lg p-2 border border-gray-200 shadow-sm`,children:[n.jsxs("div",{className:"flex items-center justify-between mb-1 pb-1 border-b border-gray-200/60",children:[n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("span",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:p}}),n.jsx("span",{className:"text-[12px] font-semibold text-gray-700 truncate",children:e.name})]}),n.jsxs("span",{className:`text-[13px] font-bold flex-shrink-0 ${m?"text-green-600":"text-amber-600"}`,children:[i,d]})]}),n.jsx("div",{style:{height:"90px"},children:n.jsx(xa,{width:"100%",height:"100%",children:n.jsxs(Wk,{data:s,margin:{top:5,right:8,left:8,bottom:2},children:[n.jsx("defs",{children:n.jsxs("linearGradient",{id:`kpiGrad-${e.id}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:"0%",stopColor:p,stopOpacity:.35}),n.jsx("stop",{offset:"100%",stopColor:p,stopOpacity:.05})]})}),n.jsx(ms,{strokeDasharray:"3 3",vertical:!1,stroke:"#e5e7eb"}),n.jsx(Vn,{dataKey:"date",tick:{fontSize:14,fill:"#374151",fontWeight:500},tickLine:!1,axisLine:{stroke:"#d1d5db"},interval:h}),n.jsx(Hn,{tick:{fontSize:13,fill:"#6b7280"},tickLine:!1,axisLine:!1,domain:["auto","auto"],width:44}),n.jsx(en,{contentStyle:{fontSize:"14px",padding:"6px 10px",borderRadius:"6px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)"},formatter:N=>[`${N}${d}`,e.name],labelFormatter:N=>`${N}`}),n.jsx(_l,{y:l,stroke:"#ef4444",strokeDasharray:"4 2",strokeWidth:1.5,label:{value:"",fontSize:12,fill:"#ef4444",position:"right"}}),n.jsx(_l,{y:o,stroke:"#9ca3af",strokeDasharray:"3 3",strokeWidth:1}),n.jsx($l,{type:"monotone",dataKey:"value",fill:`url(#kpiGrad-${e.id})`,stroke:"none",isAnimationActive:!0,animationDuration:500,animationEasing:"ease-out"}),n.jsx($a,{type:"monotone",dataKey:"value",stroke:p,strokeWidth:2,dot:!1,isAnimationActive:!0,animationDuration:500,animationEasing:"ease-out",activeDot:{r:4,fill:p,stroke:"#fff",strokeWidth:2}})]})})})]})}function Uh({title:e,isOpen:t,onToggle:r,summary:a,children:s,className:i=""}){return n.jsxs("div",{className:`bg-white border border-gray-200 rounded-lg overflow-hidden ${i}`,children:[n.jsxs("button",{onClick:r,className:"w-full flex items-center justify-between px-3 py-2 hover:bg-gray-50 transition-colors",children:[n.jsx("span",{className:"text-[12px] font-semibold text-gray-700",children:e}),n.jsxs("div",{className:"flex items-center gap-2",children:[!t&&a&&n.jsx("span",{className:"text-[11px] text-gray-400 truncate max-w-[120px]",children:a}),t?n.jsx(Ac,{className:"h-3.5 w-3.5 text-gray-400 shrink-0"}):n.jsx(gs,{className:"h-3.5 w-3.5 text-gray-400 shrink-0"})]})]}),t&&n.jsx("div",{className:"border-t border-gray-100 px-3 py-2",children:s})]})}function GF({title:e,badge:t,height:r=280,children:a,className:s=""}){return n.jsxs("div",{className:`bg-white border border-gray-200 rounded-lg overflow-hidden flex flex-col ${s}`,style:{height:`${r}px`},children:[n.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-gray-100 shrink-0",children:[n.jsx("span",{className:"text-[12px] font-semibold text-gray-700",children:e}),t]}),n.jsx("div",{className:"flex-1 overflow-y-auto px-3 py-2 min-h-0",children:a})]})}const _5e={SIGNAL_QUALITY:n.jsx(Qa,{className:"h-4 w-4"}),POLICY_IMPACT:n.jsx(bO,{className:"h-4 w-4"}),BOTTLENECK_RISK:n.jsx(Sl,{className:"h-4 w-4"}),DATA_READINESS:n.jsx(E8,{className:"h-4 w-4"}),GOVERNANCE_SAFETY:n.jsx(jl,{className:"h-4 w-4"})},KF=["dualRisk","dataRisk","slaRisk","good"],zF={SIGNAL_QUALITY:"     ",POLICY_IMPACT:"/      ",BOTTLENECK_RISK:"SLA     ",DATA_READINESS:"      ",GOVERNANCE_SAFETY:"     "},T5e={SIGNAL_QUALITY:"         .",POLICY_IMPACT:"          .",BOTTLENECK_RISK:"          .",DATA_READINESS:"          .",GOVERNANCE_SAFETY:"            ."},qF={SIGNAL_QUALITY:"    /  .",POLICY_IMPACT:"         .",BOTTLENECK_RISK:"SLA ,  ,      .",DATA_READINESS:"         .",GOVERNANCE_SAFETY:"//      ."},O5e={SIGNAL_QUALITY:":   (   )",POLICY_IMPACT:":   (100  )",BOTTLENECK_RISK:":   (100  )",DATA_READINESS:":      ",GOVERNANCE_SAFETY:":     "},Hh={ok:"",warn:"",risk:" "},uC={ok:"bg-green-50 text-green-700 border-green-200",warn:"bg-amber-50 text-amber-700 border-amber-200",risk:"bg-red-50 text-red-700 border-red-200"},cc={good:{label:"",guideLabel:"",description:" SLA   ",badgeClass:"bg-green-50 text-green-700 border-green-200",dotClass:"bg-green-500"},dataRisk:{label:"  ",guideLabel:" ",description:" SLA   ",badgeClass:"bg-amber-50 text-amber-700 border-amber-200",dotClass:"bg-amber-400"},slaRisk:{label:"  ",guideLabel:" ",description:" SLA   ",badgeClass:"bg-orange-50 text-orange-700 border-orange-200",dotClass:"bg-orange-500"},dualRisk:{label:"  ",guideLabel:" ",description:" SLA   ",badgeClass:"bg-red-50 text-red-700 border-red-200",dotClass:"bg-red-500"}};function k5e(e){return KF.reduce((t,r)=>e[r]>e[t]?r:t,KF[0])}function WF(e,t){const r=Number(e);return Number.isFinite(r)?Math.min(99,Math.max(70,r)):t}const VF=[" "," "," "," "];function sl(e){return`${e>=0?"+":""}${e.toFixed(1)}pp`}function YF(e,t){return Number((t-e.target).toFixed(1))}function R5e(e,t){const r=e.higherBetter?-t:t;return Number(r.toFixed(1))}function P5e(e,t,r){const a=e+Math.max(0,t*.8)+(r?2.5:0);return a>=7?"risk":a>=3?"warn":"ok"}function Gh(e,t,r,a){const s=e>=r,i=t>=a;return s&&i?"good":s&&!i?"dataRisk":!s&&i?"slaRisk":"dualRisk"}const D5e={weekly:"LAST_7D",monthly:"LAST_30D",quarterly:"LAST_90D",yearly_cum:"LAST_90D"},I5e={weekly:"",monthly:"",quarterly:"",yearly_cum:"()"},XF=260,fC=420;function M5e({title:e,lines:t,color:r,anchorRef:a,visible:s}){const i=g.useRef(null),[o,l]=g.useState(null);return g.useEffect(()=>{if(!s||!a.current){l(null);return}const d=a.current.getBoundingClientRect(),u=340,p=34+t.length*19;let m=d.bottom+6,h=d.left+d.width/2-u/2;h<8&&(h=8),h+u>window.innerWidth-8&&(h=window.innerWidth-u-8),m+p>window.innerHeight-8&&(m=d.top-p-6),l({top:m,left:h})},[s,a,t.length]),!s||!o?null:Cp.createPortal(n.jsxs("div",{ref:i,role:"tooltip",className:"fixed z-[9999] rounded-lg shadow-lg border border-gray-200 bg-white text-left pointer-events-none",style:{top:o.top,left:o.left,maxWidth:360,minWidth:300},children:[n.jsx("div",{className:"h-[3px] rounded-t-lg",style:{backgroundColor:r}}),n.jsxs("div",{className:"px-3 py-2.5 space-y-1",children:[n.jsx("p",{className:"text-[11px] leading-[1.45] font-semibold text-gray-800",children:e}),t.map((d,u)=>n.jsx("p",{className:`text-[11px] leading-[1.45] ${u===t.length-1?"text-gray-500":"text-gray-600"}`,children:d},u))]})]}),document.body)}function L5e({kpi:e,def:t,isActive:r,onClick:a,plainLine:s,tooltipTitle:i,tooltipLines:o,tooltipColor:l,severityLabel:d,severityClass:u}){const p=o5e[t.id],m=t.higherBetter?e.delta7d>=0?"text-green-600":"text-red-600":e.delta7d<=0?"text-green-600":"text-red-600",h=t.higherBetter?e.value>=t.target:e.value<=t.target,x=g.useRef(null),[y,N]=g.useState(!1),v=g.useRef(),j=g.useCallback(()=>{v.current=setTimeout(()=>N(!0),200)},[]),E=g.useCallback(()=>{clearTimeout(v.current),N(!1)},[]);return g.useEffect(()=>()=>clearTimeout(v.current),[]),n.jsxs(n.Fragment,{children:[n.jsxs("button",{ref:x,onClick:a,onMouseEnter:j,onMouseLeave:E,onFocus:j,onBlur:E,onKeyDown:C=>{C.key==="Escape"&&E()},"aria-describedby":y?`kpi-tip-${t.id}`:void 0,className:`relative flex flex-col gap-2 px-3.5 py-3 rounded-xl border-2 transition-all min-w-[196px] text-left ${r?`${p.border} ${p.bg} shadow-md ring-2 ring-offset-1 ring-${p.border.replace("border-","")}/30`:"border-gray-200 bg-white hover:border-gray-300 hover:shadow-sm"}`,children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:`p-1 rounded-md ${r?p.bg:"bg-gray-100"} ${r?p.text:"text-gray-500"}`,children:_5e[t.id]}),n.jsx("span",{className:`text-[11px] font-semibold truncate ${r?p.text:"text-gray-600"}`,children:t.shortName})]}),n.jsx("p",{className:"text-[10px] text-gray-500 leading-[1.4]",children:s}),n.jsx("span",{className:`inline-flex w-fit items-center rounded-full border px-1.5 py-0.5 text-[10px] font-semibold ${u}`,children:d}),n.jsxs("div",{className:"flex items-end gap-1.5",children:[n.jsxs("span",{className:`text-lg font-bold tabular-nums ${r?p.text:"text-gray-800"}`,children:[n.jsx(bW,{value:e.value,decimals:t.unit==="%"?1:0}),t.unit]}),n.jsxs("span",{className:`text-[11px] font-medium ${m}`,children:[e.delta7d>0?"+":"",e.delta7d,"pp"]})]}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("div",{className:"flex-1 h-1.5 rounded-full bg-gray-200 overflow-hidden",children:n.jsx("div",{className:`h-full rounded-full transition-all ${h?"bg-green-500":"bg-amber-400"}`,style:{width:`${Math.min(100,e.value/t.target*100)}%`}})}),n.jsxs("span",{className:"text-[10px] text-gray-400",children:[" ",t.target,t.unit]})]}),n.jsxs("div",{className:"text-[10px] text-gray-400",children:[e.numerator.toLocaleString()," / ",e.denominator.toLocaleString()]})]}),n.jsx(M5e,{title:i,lines:o,color:l,anchorRef:x,visible:y})]})}function $5e({stages:e}){const t=e[0]?.count??0,r=e.map((a,s)=>{const i=t>0?Number((a.count/t*100).toFixed(1)):0,o=s===0?void 0:a.conversionRate,l=o==null?"neutral":o>=80?"good":o>=55?"warn":"bad";return{id:`funnel-${a.stage}-${s}`,title:a.label,value:a.count,subLabel:" ",percentOfTotal:i,conversionFromPrev:o,status:l}});return n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[n.jsx("div",{className:"text-xs font-semibold text-gray-700 mb-3",children:"  "}),n.jsx(c5e,{steps:r,ariaLabel:"    ",density:"compact",layout:"scroll"})]})}function F5e({metrics:e}){const t=[{key:"consent",label:"",color:"#8b5cf6"},{key:"readiness",label:" Readiness",color:"#3b82f6"},{key:"blocked",label:" ",color:"#ef4444"},{key:"system",label:" ",color:"#06b6d4"}];return n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[n.jsx("div",{className:"text-xs font-semibold text-gray-700 mb-3",children:" "}),n.jsx("div",{className:"space-y-3",children:t.map(r=>{const a=e.filter(s=>s.category===r.key);return a.length===0?null:n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-1.5 mb-1.5",children:[n.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:r.color}}),n.jsx("span",{className:"text-[11px] font-semibold text-gray-600",children:r.label})]}),n.jsx("div",{className:"space-y-1",children:a.map(s=>n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"flex-1 text-[11px] text-gray-600 truncate",children:s.label}),n.jsxs("span",{className:`text-[11px] font-bold ${s.status==="red"?"text-red-600":s.status==="yellow"?"text-amber-600":"text-green-600"}`,children:[s.value,s.unit]}),n.jsx("span",{className:`w-2 h-2 rounded-full ${s.status==="red"?"bg-red-500":s.status==="yellow"?"bg-amber-400":"bg-green-500"}`})]},s.key))})]},r.key)})})]})}function B5e({metrics:e}){return n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[n.jsx("div",{className:"text-xs font-semibold text-gray-700 mb-3",children:" & "}),n.jsx("div",{className:"space-y-3",children:e.map(t=>n.jsxs("div",{className:"border border-gray-100 rounded-lg p-2.5",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-[12px] font-semibold text-gray-700",children:t.stage==="stage2"?"2 ":"3 "}),n.jsxs("span",{className:`text-sm font-bold ${t.linkageRate>=60?"text-green-600":t.linkageRate>=40?"text-amber-600":"text-red-600"}`,children:[t.linkageRate,"%"]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-[11px] mb-2",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"median "}),n.jsxs("div",{className:"font-semibold text-gray-800",children:[t.medianLeadTimeDays,""]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:" "}),n.jsxs("div",{className:"font-semibold text-red-600",children:[t.blockedCount,""]})]})]}),t.blockedReasons.length>0&&n.jsxs("div",{className:"space-y-0.5",children:[n.jsx("span",{className:"text-[10px] text-gray-400",children:" "}),t.blockedReasons.map(r=>n.jsxs("div",{className:"flex items-center justify-between text-[11px]",children:[n.jsx("span",{className:"text-gray-600",children:r.reason}),n.jsxs("span",{className:"font-medium text-gray-800",children:[r.count,""]})]},r.reason))]})]},t.stage))})]})}function U5e({rows:e}){const t=r=>r.replace(/||||$/g,"").trim()||r.slice(0,2);return n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[n.jsxs("div",{className:"text-xs font-semibold text-gray-700 mb-2",children:["   ",n.jsx("span",{className:"text-[10px] text-gray-400 ml-1",children:"(worst-first)"})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-[11px]",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[n.jsx("th",{className:"px-1.5 py-1 text-left font-medium text-gray-600 sticky left-0 bg-gray-50 z-10",children:""}),n.jsx("th",{className:"px-1.5 py-1 text-right font-medium text-gray-600",children:""}),n.jsx("th",{className:"px-1.5 py-1 text-right font-medium text-gray-600",children:""}),n.jsx("th",{className:"px-1.5 py-1 text-right font-medium text-gray-600",children:""}),n.jsx("th",{className:"px-1.5 py-1 text-right font-medium text-gray-600",children:""}),n.jsx("th",{className:"px-1.5 py-1 text-right font-medium text-gray-600",children:""}),n.jsx("th",{className:"px-1.5 py-1 text-right font-medium text-gray-600",children:"%"}),n.jsx("th",{className:"px-1.5 py-1 text-right font-medium text-gray-600",children:""})]})}),n.jsx("tbody",{children:e.map((r,a)=>n.jsxs("tr",{className:`border-b border-gray-100 hover:bg-amber-50/30 ${a<3?"bg-red-50/30":""}`,children:[n.jsx("td",{className:"px-1.5 py-1 font-medium text-gray-800 sticky left-0 bg-inherit z-10",children:t(r.regionName)}),n.jsxs("td",{className:"px-1.5 py-1 text-right tabular-nums",children:[r.signalQuality,"%"]}),n.jsxs("td",{className:"px-1.5 py-1 text-right tabular-nums",children:[r.policyImpact,"%"]}),n.jsxs("td",{className:`px-1.5 py-1 text-right tabular-nums font-medium ${r.bottleneckRisk>40?"text-red-600":""}`,children:[r.bottleneckRisk,"%"]}),n.jsxs("td",{className:"px-1.5 py-1 text-right tabular-nums",children:[r.dataReadiness,"%"]}),n.jsxs("td",{className:"px-1.5 py-1 text-right tabular-nums",children:[r.governanceSafety,"%"]}),n.jsxs("td",{className:`px-1.5 py-1 text-right tabular-nums font-medium ${r.blockedPct>20?"text-red-600":r.blockedPct>15?"text-amber-600":"text-green-600"}`,children:[r.blockedPct,"%"]}),n.jsx("td",{className:"px-1.5 py-1 text-right tabular-nums",children:r.backlogCount})]},r.regionCode))})]})})]})}function QF({onNavigate:e}){const t="total_cases",[r,a]=g.useState("weekly"),s=g.useMemo(()=>D5e[r],[r]),i=I5e[r],o=g.useMemo(()=>({weekly:"week",monthly:"month",quarterly:"quarter",yearly_cum:"year"})[r],[r]),[l,d]=g.useState("geomap"),[u,p]=g.useState(null),[m,h]=g.useState(!1),[x,y]=g.useState({opsSummary:!1,ageRisk:!1,kpiTable:!1}),N=g.useCallback(X=>{y(ie=>({...ie,[X]:!ie[X]}))},[]),[v,j]=g.useState(!1),[E,C]=g.useState(!1),[A,S]=g.useState({type:"none"}),[_,O]=g.useState(null),[D,k]=g.useState(null),[M,F]=g.useState({slaMatrix:!1,stageDistribution:!1}),$=g.useCallback(X=>{F(ie=>({...ie,[X]:!ie[X]}))},[]),B=t,[P,W]=w5e(),[K,G]=g.useState(null),[U,te]=g.useState([]),re=g.useCallback(X=>{te(X.map(ie=>({id:ie.code,name:ie.name})))},[]),[q,L]=g.useState("SIGNAL_QUALITY"),[H,ae]=g.useState(!1),[oe,ve]=g.useState(fC),[ce,Ee]=g.useState(!1),xe=g.useRef({startY:0,startHeight:fC}),Te=g.useMemo(()=>hW(),[]),ye=g.useMemo(()=>lC[q],[q]),se=g.useMemo(()=>oC[ye],[ye]),ct=g.useMemo(()=>Te.find(X=>X.id===q)??Te[0],[Te,q]),Q=g.useMemo(()=>({SIGNAL_QUALITY:"blue",POLICY_IMPACT:"purple",BOTTLENECK_RISK:"red",DATA_READINESS:"green",GOVERNANCE_SAFETY:"orange"})[q],[q]),{drillLevel:he,drillPath:$e,selectedRegion:Z,drillUp:je,drillTo:ge,resetDrill:be,setScope:it}=zke(),[Fe,Et]=g.useState(null),Mt=Fe?.code??Z?.code??"national",Be=g.useMemo(()=>{const X=W.width||(typeof window<"u"?window.innerWidth:1920);return X>=1024?"desktop":X>=768?"tablet":"mobile"},[W.width]),tr=g.useMemo(()=>{const X=W.height||(typeof window<"u"?window.innerHeight:900),ie=Be==="mobile"?.55:.72;return Math.max(XF+40,Math.floor(X*ie))},[W.height,Be]),br=g.useCallback(X=>Math.min(tr,Math.max(XF,X)),[tr]);g.useEffect(()=>{ve(X=>br(X))},[br]);const Er=g.useCallback(X=>{Be!=="mobile"&&(X.preventDefault(),xe.current={startY:X.clientY,startHeight:oe},Ee(!0))},[Be,oe]),yr=g.useCallback(()=>{ve(br(fC))},[br]);g.useEffect(()=>{if(!ce)return;const X=De=>{const Ye=De.clientY-xe.current.startY,Ze=br(xe.current.startHeight+Ye);ve(Ze)},ie=()=>{Ee(!1)};return window.addEventListener("mousemove",X),window.addEventListener("mouseup",ie),document.body.style.userSelect="none",document.body.style.cursor="ns-resize",()=>{window.removeEventListener("mousemove",X),window.removeEventListener("mouseup",ie),document.body.style.userSelect="",document.body.style.cursor=""}},[ce,br]),g.useMemo(()=>{const X=W.width;return X<768?{left:1,center:1,right:1}:X<1024?{left:1,center:1,right:1}:{left:1.35,center:2.35,right:2.3}},[W.width]);const Rr=g.useMemo(()=>MF("left"),[]),zr=g.useMemo(()=>Wke(he).filter(X=>["donut","bar","table"].includes(X.visualization.chartType)&&X.id!=="total-cases"&&X.id!=="center-load"&&X.id!=="case-distribution"&&X.id!=="kpi-summary-table"),[he]),pr=g.useMemo(()=>MF("bottom"),[]),hr=g.useMemo(()=>Vke(he),[he]),Tr=g.useMemo(()=>{const X={};return[...Rr,...zr,...pr,...hr].forEach(ie=>{X[ie.id]=Xke(ie.id,Z?.code||"KR",he,r)}),X},[Rr,zr,pr,hr,Z,he,r]),Mr=[{id:"11",name:""},{id:"21",name:""},{id:"22",name:""},{id:"23",name:""},{id:"24",name:""},{id:"25",name:""},{id:"26",name:""},{id:"29",name:""},{id:"31",name:""},{id:"33",name:""},{id:"34",name:""},{id:"35",name:""},{id:"36",name:""},{id:"37",name:""},{id:"38",name:""},{id:"39",name:""},{id:"32",name:""}],jn=g.useMemo(()=>{if(he==="nation")return Mr.map(X=>({code:X.id,name:X.name}));if(U.length>0)return U.map(X=>({code:X.id,name:X.name}));if(he==="sido"&&Z?.code){const X=Bq[Z.code]??[];if(X.length>0)return X.map(ie=>({code:ie.code,name:ie.label}))}return[]},[he,U,Z?.code]),rt=g.useMemo(()=>qq({level:he,parentRegionCode:Z?.code,candidates:jn}),[he,Z?.code,jn]),Pe=g.useMemo(()=>rt.children.map(X=>({id:X.code,name:X.name})),[rt]);g.useEffect(()=>{Et(null)},[he,Z?.code]),g.useEffect(()=>{Fe&&(rt.childrenCodes.includes(Fe.code)||Et(null))},[Fe,rt.childrenCodes]);const Kt=g.useMemo(()=>({level:he,regionCode:Z?.code,regionName:Z?.name,subRegions:Pe}),[he,Z,Pe]),{centralKpis:Pr,dashData:vr,drilldownData:Cn,loadingStage:Ae,isScopeChangeLoading:Ge,prefetchScope:ut}=b5e(Kt,s,q,{loadDrilldown:H,periodVariant:r}),{funnelData:er,bottleneckData:mr,linkageData:Or,regionData:ft}=Cn,Le=g.useMemo(()=>vr?vr[ye]:null,[vr,ye]),We=g.useMemo(()=>vW(),[]),$t=g.useMemo(()=>Math.min(5,Math.max(1,We.headline.maxItems)),[We.headline.maxItems]),Re=g.useMemo(()=>Pr.find(X=>X.kpiId==="DATA_READINESS")?.value??null,[Pr]),_e=g.useMemo(()=>{const X=new Map(Te.map(ie=>[ie.id,ie]));return Pr.map(ie=>{const De=X.get(ie.kpiId);if(!De)return null;const Ye=De.target,Ze=YF(De,ie.value),Ke=Math.max(0,De.higherBetter?Ye-ie.value:ie.value-Ye),Zt=R5e(De,ie.delta7d),kt=ie.kpiId==="DATA_READINESS"?ie.value<Math.max(88,Ye-3):Re!=null&&Re<90,Ar=P5e(Ke,Zt,kt),jr=Number((Ke+Math.max(0,Zt*.8)+(kt?2.5:0)).toFixed(2));return{kpiKey:lC[ie.kpiId],actual:ie.value,target:Ye,deltaPp:Ze,trendWorseningPp:Zt,severity:Ar,partialPossible:kt,score:jr}}).filter(ie=>ie!=null)},[Pr,Te,Re]),Ve=g.useMemo(()=>_e.reduce((X,ie)=>(X[cC[ie.kpiKey]]=ie,X),{SIGNAL_QUALITY:void 0,POLICY_IMPACT:void 0,BOTTLENECK_RISK:void 0,DATA_READINESS:void 0,GOVERNANCE_SAFETY:void 0}),[_e]),At=g.useMemo(()=>{const X={risk:3,warn:2,ok:1};return[..._e].filter(ie=>ie.severity!=="ok"||ie.partialPossible).sort((ie,De)=>{const Ye=X[De.severity]-X[ie.severity];if(Ye!==0)return Ye;const Ze=De.score-ie.score;return Ze!==0?Ze:De.actual-ie.actual}).slice(0,$t)},[_e,$t]),Dt=g.useMemo(()=>[...l0].filter(X=>X.status==="deployed"||X.status==="reviewing").sort((X,ie)=>new Date(ie.deployedAt).getTime()-new Date(X.deployedAt).getTime()).slice(0,3).map(X=>({policyId:X.id,title:X.title,effectiveAt:X.deployedAt.slice(0,10),impactedKpis:X.impactSummary.map(ie=>({kpiKey:ie.label,deltaPp:ie.changePp})),impactedRegions:X.affectedRegions.includes("")?Math.max(Pe.length,17):X.affectedRegions.length,notes:`/   SLA ${X.before.slaRate}%${X.after.slaRate}%   ${X.before.responseTimeliness}%${X.after.responseTimeliness}%`})),[Pe.length]),ir=g.useCallback((X,ie)=>{const De=ie||Fe?.name||Z?.name||"";return Array.from({length:4},(Ye,Ze)=>{const Ke=Ze+1;return{orgName:`${De.replace(/|||/g,"").trim()} ${Ke}`,regionName:De,count:Math.round(En(`${X}-${De}-owner-count-${Ze}`,8,46)),lastOccurredAt:`2026-02-${String(Math.round(En(`${X}-${De}-owner-day-${Ze}`,4,12))).padStart(2,"0")}`,ownerRole:VF[Ze%VF.length]}})},[Fe?.name,Z?.name]),St=g.useCallback(X=>X.includes("")?"       .":X.includes("")?"      .":X.includes("")?"      .":X.includes("")||X.includes("")?"       .":"       .",[]),nn=g.useCallback(X=>{if(X==="POLICY_IMPACT"){S({type:"policy",items:Dt});return}const ie=Ve[X];ie&&S({type:"kpi",kpiId:X,severity:ie.severity,deltaPp:ie.deltaPp,trendWorseningPp:ie.trendWorseningPp,partialPossible:ie.partialPossible})},[Ve,Dt]),an=g.useMemo(()=>{if(!Le)return[];const X=new Map(Le.regions.map(Ke=>[Ke.regionCode,Ke])),ie=Le.national.target??Le.national.value,De=se.target??ie,Ye=new Set(Z?.code?[Z.code]:[]);return rt.childrenCodes.filter(Ke=>!Ye.has(Ke)).map(Ke=>{const Zt=X.get(Ke),kt=Zt?.value;if(kt==null||!Number.isFinite(kt))return null;const Ar=Zt?.regionName,jr=rt.childrenNameMap[Ke]||Ar;jr||console.warn(`[Top5] missing nameMap for code: ${Ke}`);const fn=Number(En(`${Ke}-${ye}-wdelta`,-3.8,3.8).toFixed(1)),ia=Number((se.higherIsWorse?fn:-fn).toFixed(1)),es=Number((kt-De).toFixed(1));return{code:Ke,name:jr||`: ${Ke}`,value:kt,targetGapPp:es,gapAbs:Math.abs(es),weeklyDeltaPp:fn,worseningPp:ia}}).filter(Ke=>Ke!=null).sort((Ke,Zt)=>{const kt=Zt.gapAbs-Ke.gapAbs;if(kt!==0)return kt;const Ar=Zt.worseningPp-Ke.worseningPp;if(Ar!==0)return Ar;const jr=Zt.value-Ke.value;return jr!==0?jr:Ke.name.localeCompare(Zt.name,"ko-KR")}).slice(0,5).map((Ke,Zt)=>({...Ke,rank:Zt+1}))},[Le,se.target,se.higherIsWorse,ye,rt.childrenCodes,rt.childrenNameMap,Z?.code]),bt=g.useMemo(()=>Le?Fe?.code?Le.cause.map((X,ie)=>({...X,value:Math.max(1,Math.round(X.value+En(`${Fe.code}-${ye}-cause-${ie}`,-12,14)))})):Le.cause:[],[Le,Fe?.code,ye]),ja=g.useMemo(()=>bt[0]?.name??" ",[bt]),oo=g.useCallback(X=>{Et({code:X.code,name:X.name}),S({type:"top5",row:X,causeName:ja,owners:ir(ja,X.name),actionText:St(ja)})},[St,ir,ja]),ji=g.useMemo(()=>!Fe||!Le?null:Le.regions.find(X=>X.regionCode===Fe.code)??null,[Le,Fe]),ri=g.useMemo(()=>Le?Fe?.code?Le.trend.map((X,ie)=>({...X,value:Number((X.value+En(`${Fe.code}-${ye}-trend-${ie}`,-2.8,2.8)).toFixed(1))})):Le.trend:[],[Le,Fe?.code,ye]);g.useEffect(()=>{he==="sido"&&console.assert(rt.childrenType==="sigungu","[Top5] expected childrenType=sigungu when level=sido",{childrenType:rt.childrenType})},[he,rt.childrenType]),g.useEffect(()=>{an.length&&v5e({top5:an,childrenCodes:rt.childrenCodes,parentRegionCode:Z?.code})},[an,rt.childrenCodes,Z?.code]),g.useEffect(()=>{A.type==="none"&&Pr.length&&nn(q)},[A.type,Pr.length,nn,q]);const Nr=g.useMemo(()=>{const X=o==="week"?1:o==="month"?4.2:o==="year"?52:13,ie=`${Mt}-${o}`,De=Pe.map(kt=>({name:kt.name,size:Math.round(En(`${ie}-tree-${kt.id}`,250,3500)*X)})),Ye=Math.max(...De.map(kt=>kt.size)),Ze=Math.min(...De.map(kt=>kt.size)),Ke=se.palette,Zt=kt=>{const Ar=(kt-Ze)/(Ye-Ze||1);return Ar<.14?Ke[0]:Ar<.28?Ke[1]:Ar<.42?Ke[2]:Ar<.57?Ke[3]:Ar<.71?Ke[4]:Ar<.85?Ke[5]:Ke[6]};return De.map(kt=>({...kt,fill:Zt(kt.size)}))},[Mt,o,se.palette,Pe]),Kn=g.useMemo(()=>Nr.reduce((X,ie)=>X+ie.size,0),[Nr]),Ut=o==="week"?"":o==="month"?"":o==="year"?"()":"",fr=g.useMemo(()=>UF.find(X=>X.id===B)??UF[0],[B]),Sr=g.useMemo(()=>{const ie={total_cases:{min:300,max:2200},completion:{min:60,max:98},consultation_time:{min:1,max:15},followup_dropout:{min:2,max:20},dropout:{min:3,max:25}}[B]??{min:10,max:100},De=`${Mt}-${B}-heat`,Ye=Pe.map(jr=>({name:jr.name,value:En(`${De}-${jr.id}`,ie.min,ie.max)})),Ze=Math.max(...Ye.map(jr=>jr.value)),Ke=Math.min(...Ye.map(jr=>jr.value)),Zt=se.palette,kt=jr=>{const fn=(jr-Ke)/(Ze-Ke||1);return fn<.14?Zt[0]:fn<.28?Zt[1]:fn<.42?Zt[2]:fn<.57?Zt[3]:fn<.71?Zt[4]:fn<.85?Zt[5]:Zt[6]},Ar=new Set([Zt[0],Zt[1]]);return Ye.map(jr=>{const fn=kt(jr.value);return{name:jr.name,size:Math.round(jr.value),fill:fn,textColor:Ar.has(fn)?"#1e293b":"#ffffff"}})},[Mt,B,se.palette,Pe]),Ba=g.useMemo(()=>({slaCut:WF(void 0,We.matrixThresholds.slaCut),dataCut:WF(void 0,We.matrixThresholds.dataCut)}),[We.matrixThresholds.dataCut,We.matrixThresholds.slaCut]),yn=Ba.slaCut,sn=Ba.dataCut,Ua={:[{id:"11010",name:""},{id:"11020",name:""},{id:"11030",name:""},{id:"11040",name:""},{id:"11050",name:""},{id:"11060",name:""},{id:"11070",name:""},{id:"11080",name:""},{id:"11090",name:""},{id:"11100",name:""},{id:"11110",name:""},{id:"11120",name:""},{id:"11130",name:""},{id:"11140",name:""},{id:"11150",name:""},{id:"11160",name:""},{id:"11170",name:""},{id:"11180",name:""},{id:"11190",name:""},{id:"11200",name:""},{id:"11210",name:""},{id:"11220",name:""},{id:"11230",name:""},{id:"11240",name:""},{id:"11250",name:""}],:[{id:"21010",name:""},{id:"21020",name:""},{id:"21030",name:""},{id:"21040",name:""},{id:"21050",name:""},{id:"21060",name:""},{id:"21070",name:""},{id:"21080",name:""},{id:"21090",name:""},{id:"21100",name:""},{id:"21110",name:""},{id:"21120",name:""},{id:"21130",name:""},{id:"21140",name:""},{id:"21150",name:""},{id:"21310",name:""}],:[{id:"22010",name:""},{id:"22020",name:""},{id:"22030",name:""},{id:"22040",name:""},{id:"22050",name:""},{id:"22060",name:""},{id:"22070",name:""},{id:"22310",name:""}],:[{id:"23010",name:""},{id:"23020",name:""},{id:"23030",name:""},{id:"23040",name:""},{id:"23050",name:""},{id:"23060",name:""},{id:"23070",name:""},{id:"23080",name:""},{id:"23310",name:""},{id:"23320",name:""}],:[{id:"24010",name:""},{id:"24020",name:""},{id:"24030",name:""},{id:"24040",name:""},{id:"24050",name:""}],:[{id:"25010",name:""},{id:"25020",name:""},{id:"25030",name:""},{id:"25040",name:""},{id:"25050",name:""}],:[{id:"26010",name:""},{id:"26020",name:""},{id:"26030",name:""},{id:"26040",name:""},{id:"26310",name:""}],:[{id:"29010",name:""}],:[{id:"31011",name:""},{id:"31021",name:""},{id:"31030",name:""},{id:"31041",name:""},{id:"31050",name:""},{id:"31060",name:""},{id:"31070",name:""},{id:"31080",name:""},{id:"31091",name:""},{id:"31101",name:""},{id:"31110",name:""},{id:"31120",name:""},{id:"31130",name:""},{id:"31140",name:""},{id:"31150",name:""},{id:"31160",name:""},{id:"31170",name:""},{id:"31180",name:""},{id:"31191",name:""},{id:"31200",name:""},{id:"31210",name:""},{id:"31220",name:""},{id:"31230",name:""},{id:"31240",name:""},{id:"31250",name:""},{id:"31260",name:""},{id:"31270",name:""},{id:"31280",name:""},{id:"31350",name:""},{id:"31370",name:""},{id:"31380",name:""}],:[{id:"33041",name:""},{id:"33020",name:""},{id:"33030",name:""},{id:"33320",name:""},{id:"33330",name:""},{id:"33340",name:""},{id:"33390",name:""},{id:"33350",name:""},{id:"33360",name:""},{id:"33370",name:""},{id:"33380",name:""}],:[{id:"34011",name:""},{id:"34020",name:""},{id:"34030",name:""},{id:"34040",name:""},{id:"34050",name:""},{id:"34060",name:""},{id:"34070",name:""},{id:"34080",name:""},{id:"34310",name:""},{id:"34330",name:""},{id:"34340",name:""},{id:"34350",name:""},{id:"34360",name:""},{id:"34370",name:""},{id:"34380",name:""}],:[{id:"35011",name:""},{id:"35020",name:""},{id:"35030",name:""},{id:"35040",name:""},{id:"35050",name:""},{id:"35060",name:""},{id:"35310",name:""},{id:"35320",name:""},{id:"35330",name:""},{id:"35340",name:""},{id:"35350",name:""},{id:"35360",name:""},{id:"35370",name:""},{id:"35380",name:""}],:[{id:"36010",name:""},{id:"36020",name:""},{id:"36030",name:""},{id:"36040",name:""},{id:"36060",name:""},{id:"36310",name:""},{id:"36320",name:""},{id:"36330",name:""},{id:"36350",name:""},{id:"36360",name:""},{id:"36370",name:""},{id:"36380",name:""},{id:"36390",name:""},{id:"36400",name:""},{id:"36410",name:""},{id:"36420",name:""},{id:"36430",name:""},{id:"36440",name:""},{id:"36450",name:""},{id:"36460",name:""},{id:"36470",name:""},{id:"36480",name:""}],:[{id:"37011",name:""},{id:"37020",name:""},{id:"37030",name:""},{id:"37040",name:""},{id:"37050",name:""},{id:"37060",name:""},{id:"37070",name:""},{id:"37080",name:""},{id:"37090",name:""},{id:"37100",name:""},{id:"37310",name:""},{id:"37320",name:""},{id:"37330",name:""},{id:"37340",name:""},{id:"37350",name:""},{id:"37360",name:""},{id:"37370",name:""},{id:"37380",name:""},{id:"37390",name:""},{id:"37400",name:""},{id:"37410",name:""},{id:"37420",name:""},{id:"37430",name:""}],:[{id:"38111",name:""},{id:"38030",name:""},{id:"38050",name:""},{id:"38060",name:""},{id:"38070",name:""},{id:"38080",name:""},{id:"38090",name:""},{id:"38100",name:""},{id:"38310",name:""},{id:"38320",name:""},{id:"38330",name:""},{id:"38340",name:""},{id:"38350",name:""},{id:"38360",name:""},{id:"38370",name:""},{id:"38380",name:""},{id:"38390",name:""},{id:"38400",name:""}],:[{id:"39010",name:""},{id:"39020",name:""}],:[{id:"32010",name:""},{id:"32020",name:""},{id:"32030",name:""},{id:"32040",name:""},{id:"32050",name:""},{id:"32060",name:""},{id:"32070",name:""},{id:"32310",name:""},{id:"32320",name:""},{id:"32330",name:""},{id:"32340",name:""},{id:"32350",name:""},{id:"32360",name:""},{id:"32370",name:""},{id:"32380",name:""},{id:"32390",name:""},{id:"32400",name:""},{id:"32410",name:""}]},wi={11010:[{id:"1111051",name:""},{id:"1111053",name:""},{id:"1111055",name:""},{id:"1111057",name:""},{id:"1111060",name:""},{id:"1111064",name:""},{id:"1111068",name:""},{id:"1111070",name:""}],11020:[{id:"1114051",name:""},{id:"1114053",name:""},{id:"1114055",name:""},{id:"1114057",name:""},{id:"1114060",name:""},{id:"1114062",name:""},{id:"1114065",name:""},{id:"1114067",name:""}],11030:[{id:"1117051",name:""},{id:"1117053",name:"2"},{id:"1117055",name:""},{id:"1117057",name:""},{id:"1117060",name:"1"},{id:"1117062",name:"2"},{id:"1117065",name:"1"},{id:"1117067",name:"2"},{id:"1117070",name:""},{id:"1117072",name:""}],11040:[{id:"1120051",name:"2"},{id:"1120053",name:""},{id:"1120055",name:""},{id:"1120057",name:""},{id:"1120060",name:"1"},{id:"1120062",name:"2"},{id:"1120065",name:""},{id:"1120067",name:"1"},{id:"1120070",name:""},{id:"1120072",name:"11"},{id:"1120074",name:"12"},{id:"1120076",name:"21"},{id:"1120078",name:"23"},{id:"1120080",name:""}],11140:[{id:"1144051",name:""},{id:"1144053",name:""},{id:"1144055",name:""},{id:"1144057",name:""},{id:"1144060",name:""},{id:"1144062",name:""},{id:"1144065",name:""},{id:"1144067",name:"1"},{id:"1144070",name:"2"},{id:"1144072",name:""},{id:"1144074",name:"1"},{id:"1144076",name:"2"},{id:"1144078",name:""}],11190:[{id:"1156051",name:""},{id:"1156053",name:"1"},{id:"1156055",name:"2"},{id:"1156057",name:""},{id:"1156060",name:""},{id:"1156062",name:""},{id:"1156065",name:""},{id:"1156067",name:"1"},{id:"1156070",name:"3"},{id:"1156072",name:"4"},{id:"1156074",name:"5"},{id:"1156076",name:"1"},{id:"1156078",name:"2"},{id:"1156080",name:"3"}],11220:[{id:"1165051",name:"1"},{id:"1165053",name:"2"},{id:"1165055",name:"3"},{id:"1165057",name:"4"},{id:"1165060",name:""},{id:"1165062",name:"1"},{id:"1165065",name:"2"},{id:"1165067",name:"3"},{id:"1165070",name:"4"},{id:"1165072",name:""},{id:"1165074",name:"1"},{id:"1165076",name:"2"},{id:"1165078",name:"3"},{id:"1165080",name:"4"},{id:"1165082",name:""}],11230:[{id:"1168051",name:""},{id:"1168053",name:"1"},{id:"1168055",name:"2"},{id:"1168057",name:""},{id:"1168060",name:""},{id:"1168062",name:"1"},{id:"1168064",name:"2"},{id:"1168066",name:"1"},{id:"1168068",name:"2"},{id:"1168070",name:"4"},{id:"1168072",name:"1"},{id:"1168074",name:"2"},{id:"1168076",name:"1"},{id:"1168078",name:"2"},{id:"1168080",name:"1"},{id:"1168082",name:"4"},{id:"1168084",name:""},{id:"1168086",name:"1"},{id:"1168088",name:""},{id:"1168090",name:""}],11240:[{id:"1171051",name:""},{id:"1171053",name:"2"},{id:"1171055",name:"3"},{id:"1171057",name:"4"},{id:"1171060",name:"6"},{id:"1171062",name:"7"},{id:"1171064",name:"1"},{id:"1171066",name:"2"},{id:"1171068",name:""},{id:"1171070",name:"1"},{id:"1171072",name:"2"},{id:"1171074",name:"1"},{id:"1171076",name:"2"},{id:"1171078",name:"1"},{id:"1171080",name:"2"},{id:"1171082",name:"1"},{id:"1171084",name:"2"},{id:"1171086",name:""},{id:"1171088",name:"1"},{id:"1171090",name:"2"},{id:"1171092",name:""},{id:"1171094",name:""}],11250:[{id:"1174051",name:""},{id:"1174053",name:"1"},{id:"1174055",name:"2"},{id:"1174057",name:"1"},{id:"1174060",name:"2"},{id:"1174062",name:"1"},{id:"1174064",name:"2"},{id:"1174066",name:"1"},{id:"1174068",name:"2"},{id:"1174070",name:"3"},{id:"1174072",name:"1"},{id:"1174074",name:"2"},{id:"1174076",name:"3"},{id:"1174078",name:"1"},{id:"1174080",name:"2"},{id:"1174082",name:"3"},{id:"1174084",name:"1"},{id:"1174086",name:"2"}],21010:[{id:"2611051",name:""},{id:"2611053",name:""},{id:"2611055",name:""},{id:"2611057",name:""},{id:"2611060",name:""},{id:"2611062",name:""},{id:"2611064",name:""},{id:"2611066",name:""}],21050:[{id:"2623051",name:"1"},{id:"2623053",name:"2"},{id:"2623055",name:""},{id:"2623057",name:""},{id:"2623060",name:"1"},{id:"2623062",name:"2"},{id:"2623064",name:"1"},{id:"2623066",name:"2"},{id:"2623068",name:"1"},{id:"2623070",name:"3"},{id:"2623072",name:"1"},{id:"2623074",name:"4"},{id:"2623076",name:"1"},{id:"2623078",name:"2"},{id:"2623080",name:"1"},{id:"2623082",name:"2"},{id:"2623084",name:"3"},{id:"2623086",name:"1"},{id:"2623088",name:"2"}],21090:[{id:"2635051",name:"1"},{id:"2635053",name:"2"},{id:"2635055",name:"3"},{id:"2635057",name:"1"},{id:"2635060",name:"2"},{id:"2635062",name:"1"},{id:"2635064",name:"2"},{id:"2635066",name:"3"},{id:"2635068",name:"4"},{id:"2635070",name:""},{id:"2635072",name:"1"},{id:"2635074",name:"2"},{id:"2635076",name:"3"},{id:"2635078",name:"4"},{id:"2635080",name:"1"},{id:"2635082",name:"2"},{id:"2635084",name:"1"},{id:"2635086",name:"2"}],22010:[{id:"2711051",name:""},{id:"2711053",name:""},{id:"2711055",name:"1"},{id:"2711057",name:"2"},{id:"2711060",name:"3"},{id:"2711062",name:""},{id:"2711064",name:"1"},{id:"2711066",name:"2"},{id:"2711068",name:"3"},{id:"2711070",name:"4"},{id:"2711072",name:"1"},{id:"2711074",name:"2"}],22060:[{id:"2726051",name:"1"},{id:"2726053",name:"2"},{id:"2726055",name:"3"},{id:"2726057",name:"4"},{id:"2726060",name:"1"},{id:"2726062",name:"2"},{id:"2726064",name:"3"},{id:"2726066",name:"1"},{id:"2726068",name:"23"},{id:"2726070",name:"4"},{id:"2726072",name:"1"},{id:"2726074",name:"2"},{id:"2726076",name:""},{id:"2726078",name:""},{id:"2726080",name:""},{id:"2726082",name:""},{id:"2726084",name:""},{id:"2726086",name:"1"},{id:"2726088",name:"2"},{id:"2726090",name:"1"},{id:"2726092",name:"2"},{id:"2726094",name:"3"}],23040:[{id:"2818551",name:"1"},{id:"2818553",name:"2"},{id:"2818555",name:""},{id:"2818557",name:"1"},{id:"2818560",name:"2"},{id:"2818562",name:"3"},{id:"2818564",name:""},{id:"2818566",name:"1"},{id:"2818568",name:"2"},{id:"2818570",name:"3"},{id:"2818572",name:"1"},{id:"2818574",name:"2"},{id:"2818576",name:"3"}],23050:[{id:"2820051",name:"1"},{id:"2820053",name:"2"},{id:"2820055",name:"3"},{id:"2820057",name:"4"},{id:"2820060",name:"1"},{id:"2820062",name:"2"},{id:"2820064",name:"3"},{id:"2820066",name:"4"},{id:"2820068",name:"1"},{id:"2820070",name:"2"},{id:"2820072",name:"3"},{id:"2820074",name:"4"},{id:"2820076",name:"5"},{id:"2820078",name:"6"},{id:"2820080",name:""},{id:"2820082",name:"2"},{id:"2820084",name:""},{id:"2820086",name:"1"},{id:"2820088",name:"2"},{id:"2820090",name:""},{id:"2820092",name:"1"}],24010:[{id:"2911051",name:""},{id:"2911053",name:""},{id:"2911055",name:"1"},{id:"2911057",name:"2"},{id:"2911060",name:"1"},{id:"2911062",name:"2"},{id:"2911064",name:"1"},{id:"2911066",name:"2"},{id:"2911068",name:""},{id:"2911070",name:""}],24020:[{id:"2914051",name:""},{id:"2914053",name:"1"},{id:"2914055",name:"2"},{id:"2914057",name:""},{id:"2914060",name:""},{id:"2914062",name:""},{id:"2914064",name:"1"},{id:"2914066",name:"2"},{id:"2914068",name:"1"},{id:"2914070",name:"2"},{id:"2914072",name:""},{id:"2914074",name:"1"},{id:"2914076",name:"2"},{id:"2914078",name:""},{id:"2914080",name:""}],25030:[{id:"3017051",name:""},{id:"3017053",name:"1"},{id:"3017055",name:"2"},{id:"3017057",name:""},{id:"3017060",name:""},{id:"3017062",name:""},{id:"3017064",name:""},{id:"3017066",name:"1"},{id:"3017068",name:"2"},{id:"3017070",name:"3"},{id:"3017072",name:""},{id:"3017074",name:"1"},{id:"3017076",name:"2"},{id:"3017078",name:"1"},{id:"3017080",name:"2"},{id:"3017082",name:"3"},{id:"3017084",name:""},{id:"3017086",name:""},{id:"3017088",name:""},{id:"3017090",name:"1"},{id:"3017092",name:"2"}],25040:[{id:"3020051",name:""},{id:"3020053",name:""},{id:"3020055",name:"1"},{id:"3020057",name:"2"},{id:"3020060",name:"1"},{id:"3020062",name:"2"},{id:"3020064",name:"3"},{id:"3020066",name:""},{id:"3020068",name:""},{id:"3020070",name:""},{id:"3020072",name:""},{id:"3020074",name:""}],26010:[{id:"3111051",name:""},{id:"3111053",name:""},{id:"3111055",name:""},{id:"3111057",name:""},{id:"3111060",name:"1"},{id:"3111062",name:"2"},{id:"3111064",name:""},{id:"3111066",name:""},{id:"3111068",name:""},{id:"3111070",name:""},{id:"3111072",name:"1"},{id:"3111074",name:"2"},{id:"3111076",name:"3"},{id:"3111078",name:"4"},{id:"3111080",name:"5"}],26020:[{id:"3114051",name:""},{id:"3114053",name:""},{id:"3114055",name:""},{id:"3114057",name:""},{id:"3114060",name:""},{id:"3114062",name:""},{id:"3114064",name:""},{id:"3114066",name:""}],29010:[{id:"3611051",name:""},{id:"3611053",name:""},{id:"3611055",name:""},{id:"3611057",name:""},{id:"3611060",name:""},{id:"3611062",name:""},{id:"3611064",name:""},{id:"3611066",name:""},{id:"3611068",name:""},{id:"3611070",name:""},{id:"3611072",name:""},{id:"3611074",name:""},{id:"3611076",name:""},{id:"3611078",name:""},{id:"3611080",name:""},{id:"3611082",name:""}],31011:[{id:"4111051",name:""},{id:"4111053",name:""},{id:"4111055",name:""},{id:"4111057",name:""}],31021:[{id:"4113051",name:""},{id:"4113053",name:""},{id:"4113055",name:""}],31101:[{id:"4128051",name:""},{id:"4128053",name:""},{id:"4128055",name:""}],31191:[{id:"4146051",name:""},{id:"4146053",name:""},{id:"4146055",name:""}],33041:[{id:"4311051",name:""},{id:"4311053",name:""},{id:"4311055",name:""},{id:"4311057",name:""}],33020:[{id:"4313051",name:""},{id:"4313053",name:""},{id:"4313055",name:""},{id:"4313057",name:""},{id:"4313060",name:""},{id:"4313062",name:""},{id:"4313064",name:""},{id:"4313066",name:""},{id:"4313068",name:""},{id:"4313070",name:""},{id:"4313072",name:""},{id:"4313074",name:""},{id:"4313076",name:""},{id:"4313078",name:""}],33030:[{id:"4315051",name:""},{id:"4315053",name:""},{id:"4315055",name:""},{id:"4315057",name:""},{id:"4315060",name:""},{id:"4315062",name:""},{id:"4315064",name:""},{id:"4315066",name:""},{id:"4315068",name:""},{id:"4315070",name:""},{id:"4315072",name:""},{id:"4315074",name:""}],34011:[{id:"4413051",name:""},{id:"4413053",name:""}],34040:[{id:"4420051",name:"1"},{id:"4420053",name:"2"},{id:"4420055",name:"3"},{id:"4420057",name:"4"},{id:"4420060",name:"5"},{id:"4420062",name:"6"},{id:"4420064",name:""},{id:"4420066",name:""},{id:"4420068",name:""},{id:"4420070",name:""},{id:"4420072",name:""},{id:"4420074",name:""},{id:"4420076",name:""},{id:"4420078",name:""},{id:"4420080",name:""},{id:"4420082",name:""}],35011:[{id:"4511051",name:""},{id:"4511053",name:""}],35020:[{id:"4513051",name:""},{id:"4513053",name:""},{id:"4513055",name:""},{id:"4513057",name:"1"},{id:"4513060",name:"2"},{id:"4513062",name:""},{id:"4513064",name:""},{id:"4513066",name:""},{id:"4513068",name:""},{id:"4513070",name:""},{id:"4513072",name:""},{id:"4513074",name:""},{id:"4513076",name:""},{id:"4513078",name:""},{id:"4513080",name:""},{id:"4513082",name:""},{id:"4513084",name:""}],36010:[{id:"4611051",name:"1"},{id:"4611053",name:"2"},{id:"4611055",name:""},{id:"4611057",name:""},{id:"4611060",name:""},{id:"4611062",name:""},{id:"4611064",name:""},{id:"4611066",name:""},{id:"4611068",name:""},{id:"4611070",name:""},{id:"4611072",name:""},{id:"4611074",name:""},{id:"4611076",name:""},{id:"4611078",name:""},{id:"4611080",name:""},{id:"4611082",name:""}],36020:[{id:"4613051",name:""},{id:"4613053",name:""},{id:"4613055",name:""},{id:"4613057",name:""},{id:"4613060",name:""},{id:"4613062",name:""},{id:"4613064",name:""},{id:"4613066",name:""},{id:"4613068",name:""},{id:"4613070",name:""},{id:"4613072",name:""},{id:"4613074",name:""},{id:"4613076",name:""},{id:"4613078",name:""},{id:"4613080",name:""},{id:"4613082",name:""}],37011:[{id:"4711151",name:""},{id:"4711153",name:""},{id:"4711155",name:""},{id:"4711157",name:""},{id:"4711160",name:""},{id:"4711162",name:""},{id:"4711164",name:""},{id:"4711166",name:""}],37020:[{id:"4713051",name:""},{id:"4713053",name:""},{id:"4713055",name:""},{id:"4713057",name:""},{id:"4713060",name:""},{id:"4713062",name:""},{id:"4713064",name:""},{id:"4713066",name:""},{id:"4713068",name:""},{id:"4713070",name:""},{id:"4713072",name:""},{id:"4713074",name:""},{id:"4713076",name:""},{id:"4713078",name:""},{id:"4713080",name:""}],38111:[{id:"4812151",name:""},{id:"4812153",name:""},{id:"4812155",name:""},{id:"4812157",name:""},{id:"4812160",name:""}],38070:[{id:"4825051",name:""},{id:"4825053",name:""},{id:"4825055",name:""},{id:"4825057",name:""},{id:"4825060",name:""},{id:"4825062",name:""},{id:"4825064",name:""},{id:"4825066",name:""},{id:"4825068",name:"1"},{id:"4825070",name:"2"},{id:"4825072",name:"3"},{id:"4825074",name:""},{id:"4825076",name:""},{id:"4825078",name:""},{id:"4825080",name:""},{id:"4825082",name:""},{id:"4825084",name:""}],39010:[{id:"5011051",name:"1"},{id:"5011053",name:"2"},{id:"5011055",name:"1"},{id:"5011057",name:"2"},{id:"5011060",name:"1"},{id:"5011062",name:"2"},{id:"5011064",name:"1"},{id:"5011066",name:"2"},{id:"5011068",name:""},{id:"5011070",name:""},{id:"5011072",name:""},{id:"5011074",name:""},{id:"5011076",name:""},{id:"5011078",name:""},{id:"5011080",name:""},{id:"5011082",name:""},{id:"5011084",name:""},{id:"5011086",name:""},{id:"5011088",name:""},{id:"5011090",name:""},{id:"5011092",name:""},{id:"5011094",name:""},{id:"5011096",name:""},{id:"5011098",name:""},{id:"5011100",name:""}],39020:[{id:"5013051",name:""},{id:"5013053",name:""},{id:"5013055",name:""},{id:"5013057",name:""},{id:"5013060",name:""},{id:"5013062",name:""},{id:"5013064",name:""},{id:"5013066",name:""},{id:"5013068",name:""},{id:"5013070",name:""},{id:"5013072",name:""},{id:"5013074",name:""},{id:"5013076",name:""},{id:"5013078",name:""},{id:"5013080",name:""},{id:"5013082",name:""}],32010:[{id:"5111051",name:""},{id:"5111053",name:""},{id:"5111055",name:""},{id:"5111057",name:""},{id:"5111060",name:""},{id:"5111062",name:"1"},{id:"5111064",name:"2"},{id:"5111066",name:"3"},{id:"5111068",name:""},{id:"5111070",name:""},{id:"5111072",name:""},{id:"5111074",name:""},{id:"5111076",name:""},{id:"5111078",name:""},{id:"5111080",name:""},{id:"5111082",name:""},{id:"5111084",name:""},{id:"5111086",name:""},{id:"5111088",name:""}],32020:[{id:"5113051",name:""},{id:"5113053",name:""},{id:"5113055",name:""},{id:"5113057",name:"1"},{id:"5113060",name:"2"},{id:"5113062",name:""},{id:"5113064",name:""},{id:"5113066",name:""},{id:"5113068",name:""},{id:"5113070",name:""},{id:"5113072",name:"1"},{id:"5113074",name:"2"},{id:"5113076",name:""},{id:"5113078",name:""},{id:"5113080",name:""},{id:"5113082",name:""},{id:"5113084",name:""},{id:"5113086",name:""},{id:"5113088",name:""},{id:"5113090",name:""}],32030:[{id:"5115051",name:"1"},{id:"5115053",name:"2"},{id:"5115055",name:"1"},{id:"5115057",name:"2"},{id:"5115060",name:""},{id:"5115062",name:""},{id:"5115064",name:""},{id:"5115066",name:""},{id:"5115068",name:""},{id:"5115070",name:""},{id:"5115072",name:""},{id:"5115074",name:""},{id:"5115076",name:""},{id:"5115078",name:""},{id:"5115080",name:""},{id:"5115082",name:""}]},Lr=g.useMemo(()=>{const X=[{id:"11",name:""},{id:"21",name:""},{id:"22",name:""},{id:"23",name:""},{id:"24",name:""},{id:"25",name:""},{id:"26",name:""},{id:"29",name:""},{id:"31",name:""},{id:"33",name:""},{id:"34",name:""},{id:"35",name:""},{id:"36",name:""},{id:"37",name:""},{id:"38",name:""},{id:"39",name:""},{id:"32",name:""}];let ie;if(he==="nation")ie=X;else if(U.length>0)ie=U;else if(he==="sido"){const De={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Ye=Z?.name||"",Ze=De[Ye]||Ye.replace(/||||$/g,"").trim()||Ye;ie=Ua[Ze]||X}else{const De=Z?.code||"00",Ye=wi[De];if(Ye)ie=Ye;else{const Ze=Z?.name||"";if(Ze.endsWith("")){const Ke=Ze.slice(0,-1);ie=[{id:`${De}-E1`,name:`${Ke}`},{id:`${De}-E2`,name:""},{id:`${De}-E3`,name:""},{id:`${De}-E4`,name:""},{id:`${De}-E5`,name:""},{id:`${De}-E6`,name:""},{id:`${De}-E7`,name:""},{id:`${De}-E8`,name:""},{id:`${De}-E9`,name:""}]}else ie=[{id:`${De}-E1`,name:""},{id:`${De}-E2`,name:""},{id:`${De}-E3`,name:""},{id:`${De}-E4`,name:""},{id:`${De}-E5`,name:""},{id:`${De}-E6`,name:""},{id:`${De}-E7`,name:""},{id:`${De}-E8`,name:""}]}}return ie.map(De=>{const Ye=`${Mt}-${o}-risk-${De.id}`,Ze=Number(En(`${Ye}-sla`,78,100).toFixed(1)),Ke=Number(En(`${Ye}-data`,75,100).toFixed(1)),Zt=Math.round(En(`${Ye}-cases`,200,3e3));return{regionId:De.id,regionName:De.name,slaRate:Ze,dataRate:Ke,totalCases:Zt}})},[Mt,o,he,Z,U]),xs=["incoming","inProgress","needRecontact","slaBreach","completed"],_n={incoming:"",inProgress:"",needRecontact:" ",slaBreach:"SLA ",completed:""},Ul={incoming:Bh.blue,inProgress:Bh.cyan,needRecontact:Bh.orange,slaBreach:Bh.red,completed:Bh.green},Zr=g.useMemo(()=>Pe.map(X=>{const ie=`${Mt}-${o}-stage-${X.id}`,De=X.name.length>3?X.name.replace(/||||$/g,"").trim()||X.name.slice(0,2):X.name;return{regionName:De.length>4?De.slice(0,4):De,incoming:Math.round(En(`${ie}-inc`,50,300)),inProgress:Math.round(En(`${ie}-inp`,100,500)),needRecontact:Math.round(En(`${ie}-nrc`,20,150)),slaBreach:Math.round(En(`${ie}-sla`,5,80)),completed:Math.round(En(`${ie}-cmp`,200,800))}}),[Mt,o,Pe]),aa=g.useMemo(()=>{const X=["20-39","40-59","60-69","70-79","80+"],ie=`${Mt}-${o}-agestat`;return X.map(De=>{const Ye=`${ie}-${De}`;return{age:De,normal:Math.round(En(`${Ye}-n`,120,450)),caution:Math.round(En(`${Ye}-c`,40,180)),highRisk:Math.round(En(`${Ye}-h`,15,90)),slaViolation:Math.round(En(`${Ye}-s`,5,40))}})},[Mt,o]),Ls=X=>{const{x:ie,y:De,width:Ye,height:Ze,name:Ke,fill:Zt,textColor:kt}=X;if(!Ke||Ye<25||Ze<18)return null;const Ar=Ke.length>5?Ke.replace(/|||/g,"").trim()||Ke.slice(0,4):Ke,jr=kt||"#fff";return n.jsxs("g",{children:[n.jsx("rect",{x:ie,y:De,width:Ye,height:Ze,fill:Zt,stroke:"#fff",strokeWidth:1.5,rx:2,style:{filter:"brightness(1.0)",transition:"filter 0.2s"}}),Ye>35&&Ze>25&&n.jsx("text",{x:ie+Ye/2,y:De+Ze/2,textAnchor:"middle",dominantBaseline:"middle",fill:jr,fontSize:Ye>70?10:8,fontWeight:"600",style:{textShadow:jr==="#ffffff"?"0 1px 2px rgba(0,0,0,0.4)":"none"},children:Ar})]})},lo=g.useCallback(X=>X==="nation"?"sido":"sigungu",[]),wa=g.useCallback(({level:X,code:ie,name:De})=>{const Ze={sig:"sido",emd:"sigungu"}[X];Ze&&(ut({level:Ze,regionCode:ie,regionName:De}),it({code:ie,name:De,level:Ze},{replace:!0}))},[ut,it]);g.useEffect(()=>{if(!Le?.worstRegions?.length)return;const X=lo(he);Le.worstRegions.slice(0,3).forEach(ie=>{ut({level:X,regionCode:ie.regionCode,regionName:ie.regionName})})},[Le,he,lo,ut]);const sa=g.useMemo(()=>_e.some(X=>X.partialPossible),[_e]),bs=g.useCallback((X,ie)=>{const De=Ve[X.id],Ye=Hh[De?.severity??"ok"],Ze=De?.deltaPp??YF(X,ie.value);return[`: ${zF[X.id]}`,`: ${T5e[X.id]}`,` : ${Ye}   (${i}) ${ie.value.toFixed(1)}${X.unit} (  ${sl(Ze)})`,` : ${qF[X.id]}`,`/: ${X.target}${X.unit}    ${sl(ie.delta7d)}`,`${O5e[X.id]}  ${ie.numerator.toLocaleString()} / ${ie.denominator.toLocaleString()}`]},[Ve,i]),Rn=g.useCallback(X=>{const ie=cC[X.kpiKey];L(ie),nn(ie)},[nn]),Za=g.useMemo(()=>Lr.reduce((X,ie)=>{const De=Gh(ie.slaRate,ie.dataRate,yn,sn);return X[De]+=1,X},{good:0,dataRisk:0,slaRisk:0,dualRisk:0}),[Lr,yn,sn]),Pn=g.useMemo(()=>{const X={good:[],dataRisk:[],slaRisk:[],dualRisk:[]};return Lr.forEach(ie=>{const De=Gh(ie.slaRate,ie.dataRate,yn,sn);X[De].push(ie)}),Object.keys(X).forEach(ie=>{X[ie].sort((De,Ye)=>Ye.totalCases-De.totalCases)}),X},[Lr,yn,sn]),Ja=g.useMemo(()=>k5e(Za),[Za]),ht=_??Ja,Jr=g.useCallback(X=>Pn[X].slice(0,8).map(ie=>({regionName:ie.regionName,slaRate:ie.slaRate,dataRate:ie.dataRate,totalCases:ie.totalCases})),[Pn]),Ur=g.useCallback((X,ie)=>{const De=Jr(X);S({type:"matrix",quadrant:X,selectedRegionName:ie??De[0]?.regionName??" ",items:De})},[Jr]),Ei=g.useCallback(X=>{const ie=_===X?null:X;O(ie),k(null),Ur(ie??Ja)},[_,Ja,Ur]),ys=g.useCallback(X=>{if(!X?.regionId)return;const ie=Gh(X.slaRate,X.dataRate,yn,sn);Et({code:X.regionId,name:X.regionName}),O(ie),k(null),Ur(ie,X.regionName)},[yn,sn,Ur]),Wt=g.useMemo(()=>_?Pn[_]:Lr,[_,Lr,Pn]),zo=g.useMemo(()=>{const X=Math.min(96,Math.max(4,(sn-70)/30*100)),ie=Math.min(96,Math.max(4,(1-(yn-70)/30)*100));return{good:{left:(X+100)/2,top:ie/2},dataRisk:{left:X/2,top:ie/2},slaRisk:{left:(X+100)/2,top:(ie+100)/2},dualRisk:{left:X/2,top:(ie+100)/2}}},[yn,sn]);g.useEffect(()=>{!M.slaMatrix||Lr.length===0||A.type!=="matrix"&&Ur(ht)},[M.slaMatrix,Lr.length,A.type,ht,Ur]),g.useEffect(()=>{if(D===null)return;const X=De=>{De.target?.closest("[data-matrix-help-popover]")||k(null)},ie=De=>{De.key==="Escape"&&k(null)};return document.addEventListener("mousedown",X),document.addEventListener("keydown",ie),()=>{document.removeEventListener("mousedown",X),document.removeEventListener("keydown",ie)}},[D]);const qo=g.useCallback(()=>{if(!Wt.length)return;const De=["period,kpi,scope,quadrant,quadrantFilter,region,slaRate,dataRate,slaCut,dataCut,totalCases",...Wt.map(Ar=>{const jr=Gh(Ar.slaRate,Ar.dataRate,yn,sn);return[i,se.shortLabel,Z?.name??"",cc[jr].label,_?cc[_].label:"",Ar.regionName,Ar.slaRate.toFixed(1),Ar.dataRate.toFixed(1),`${yn.toFixed(1)}%`,`${sn.toFixed(1)}%`,String(Ar.totalCases)].join(",")})].join(`
`),Ye=new Blob([`\uFEFF${De}`],{type:"text/csv;charset=utf-8;"}),Ze=URL.createObjectURL(Ye),Ke=document.createElement("a"),Zt=(Z?.name??"").replace(/\s+/g,""),kt=_?cc[_].guideLabel:"all";Ke.href=Ze,Ke.download=`sla-data-matrix_${i}_${Zt}_${kt}.csv`,document.body.appendChild(Ke),Ke.click(),document.body.removeChild(Ke),URL.revokeObjectURL(Ze)},[Wt,i,se.shortLabel,Z?.name,yn,sn,_]),Ea=Ae==="loadingScopeChange"||Ae==="refreshing";return n.jsxs("div",{ref:P,className:"flex flex-col bg-gray-50 h-full min-h-0",children:[n.jsxs("div",{className:"bg-white border-b border-gray-200 px-4 py-2 shrink-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"flex items-center gap-2 overflow-x-auto flex-1 min-w-0 pb-0.5",children:Te.map(X=>{const ie=Pr.find(Ze=>Ze.kpiId===X.id);if(!ie)return n.jsx("div",{className:"min-w-[196px] h-[124px] rounded-xl border border-gray-200 bg-gray-50 animate-pulse"},X.id);const Ye=Ve[X.id]?.severity??"ok";return n.jsx(L5e,{kpi:ie,def:X,isActive:q===X.id,onClick:()=>{L(X.id),nn(X.id)},plainLine:zF[X.id],tooltipTitle:`${X.shortName}  ${Hh[Ye]}`,tooltipLines:bs(X,ie),tooltipColor:oC[lC[X.id]].primaryColor,severityLabel:Hh[Ye],severityClass:uC[Ye]},X.id)})}),n.jsx("div",{className:"w-px h-10 bg-gray-200 shrink-0"}),n.jsxs("button",{onClick:()=>{const X=!H;ae(X),F({slaMatrix:X,stageDistribution:X}),y(ie=>({...ie,opsSummary:X,ageRisk:X,kpiTable:X}))},className:`px-3 py-1.5 text-[11px] font-medium rounded-md transition flex items-center gap-1.5 shrink-0 ${H?"bg-violet-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[n.jsx(_m,{className:"h-3.5 w-3.5"}),H?" ":""]}),n.jsx("div",{className:"w-px h-8 bg-gray-200 shrink-0"}),n.jsxs("div",{className:"flex items-center gap-1.5 shrink-0",children:[$e.length>1&&n.jsxs("button",{onClick:je,className:"flex items-center gap-1 px-2 py-1 text-xs text-blue-600 bg-blue-50 rounded hover:bg-blue-100 transition-colors",children:[n.jsx(Tm,{className:"h-3 w-3"}),n.jsx("span",{children:""})]}),n.jsx("div",{className:"flex items-center gap-1 text-xs text-gray-600",children:$e.map((X,ie)=>n.jsxs(Y.Fragment,{children:[n.jsx("button",{onClick:()=>ge(ie),className:`px-1.5 py-0.5 rounded transition-colors ${ie===$e.length-1?"bg-blue-500 text-white font-medium":"hover:bg-gray-200 text-gray-600"}`,children:X.name}),ie<$e.length-1&&n.jsx(ei,{className:"h-3 w-3 text-gray-400"})]},`${X.level}-${X.code}`))}),$e.length>1&&n.jsx("button",{onClick:be,className:"p-1 text-gray-500 hover:text-blue-600 hover:bg-gray-100 rounded transition-colors",title:" ",children:n.jsx(wp,{className:"h-3.5 w-3.5"})})]}),n.jsx("div",{className:"w-px h-8 bg-gray-200 shrink-0"}),n.jsxs("div",{className:"flex items-center gap-1 text-gray-500 shrink-0",children:[n.jsx("button",{className:"p-1.5 hover:bg-gray-100 rounded",title:"",children:n.jsx(EC,{className:"h-4 w-4"})}),n.jsx("button",{className:"p-1.5 hover:bg-gray-100 rounded",title:" ",children:n.jsx(_m,{className:"h-4 w-4"})}),n.jsx("button",{className:"p-1.5 hover:bg-gray-100 rounded",title:"",children:n.jsx(hm,{className:"h-4 w-4"})})]})]}),n.jsx("div",{className:"mt-2 border-t border-gray-100 pt-2",children:n.jsxs("div",{className:"flex flex-wrap items-center gap-1.5",children:[n.jsx("span",{className:"inline-flex items-center rounded-md bg-slate-100 px-2 py-1 text-[11px] font-semibold text-slate-700",children:"   "}),At.length>0?At.map(X=>{const ie=cC[X.kpiKey],De=oC[X.kpiKey];return n.jsxs("button",{onClick:()=>Rn(X),className:"inline-flex items-center gap-1 rounded-md border border-slate-200 bg-white px-2 py-1 text-[11px] text-slate-700 hover:bg-slate-50",children:[n.jsx("span",{className:`inline-flex rounded-full border px-1.5 py-0.5 font-semibold ${uC[X.severity]}`,children:Hh[X.severity]}),n.jsx("span",{className:"font-semibold",children:De.shortLabel}),n.jsxs("span",{className:"text-slate-500",children:["(  ",sl(X.deltaPp),")"]}),q===ie&&n.jsx("span",{className:"text-blue-600",children:""})]},X.kpiKey)}):n.jsx("span",{className:"text-[11px] text-slate-500",children:"     ."}),sa&&n.jsx("span",{className:"inline-flex items-center rounded-md border border-amber-200 bg-amber-50 px-2 py-1 text-[11px] font-medium text-amber-700",children:"  "})]})})]}),H&&n.jsxs("div",{className:"bg-gradient-to-b from-slate-50 to-white border-b border-gray-200 px-4 py-3 shrink-0",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm font-bold text-gray-800",children:" "}),n.jsx("span",{className:"text-[11px] text-gray-400 bg-gray-100 px-2 py-0.5 rounded-full",children:i}),q&&n.jsxs("span",{className:"text-[11px] px-2 py-0.5 rounded-full font-medium",style:{backgroundColor:`${se.primaryColor}15`,color:se.primaryColor},children:[se.shortLabel," "]})]}),n.jsx("button",{onClick:()=>ae(!1),className:"text-[11px] text-gray-500 hover:text-gray-700 px-2 py-1 rounded hover:bg-gray-100",children:" "})]}),n.jsxs("div",{className:"overflow-y-auto pr-1",style:{height:`${oe}px`},children:[n.jsx($5e,{stages:er}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-3 mt-3",children:[n.jsx(F5e,{metrics:mr}),n.jsx(B5e,{metrics:Or}),n.jsx(U5e,{rows:ft})]})]}),Be!=="mobile"&&n.jsx("button",{type:"button",onMouseDown:Er,onDoubleClick:yr,"aria-label":"   ",title:"  ,   ",className:`mt-2 flex w-full cursor-ns-resize items-center justify-center rounded-md border py-1 transition-colors ${ce?"border-blue-300 bg-blue-50/70":"border-gray-200 bg-white/70 hover:bg-gray-50"}`,children:n.jsx("span",{className:`h-1.5 w-16 rounded-full ${ce?"bg-blue-400":"bg-gray-300"}`})})]}),n.jsxs("div",{className:"relative flex-1 overflow-y-auto min-h-0",children:[n.jsx("div",{className:`transition-opacity duration-300 ${Ea?"opacity-60":"opacity-100"}`,children:n.jsxs("div",{className:`p-2 gap-2 ${Be==="desktop"?"grid":"flex flex-col"}`,style:Be==="desktop"?{gridTemplateColumns:"1.2fr 2.2fr 2.6fr",minHeight:"calc(100vh - 140px)",alignItems:"stretch"}:void 0,children:[n.jsxs("div",{className:`flex flex-col gap-2 ${Be==="desktop"?"min-w-0":Be==="tablet"?"hidden":"w-full shrink-0"}`,children:[n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-1.5 text-center",children:[n.jsxs("span",{className:"text-[11px] text-blue-700 font-medium",children:[iC(he)," "]}),Z&&n.jsxs("span",{className:"ml-1.5 text-[11px] text-blue-600",children:["(",Z.name,")"]})]}),n.jsxs("div",{className:"bg-slate-50/70 border border-slate-200 rounded-lg p-3 shadow-[inset_0_1px_0_rgba(255,255,255,0.7)]",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm font-semibold text-gray-700",children:" KPI "}),n.jsx("span",{className:"text-[11px] px-1.5 py-0.5 rounded font-medium",style:{backgroundColor:`${se.primaryColor}15`,color:se.primaryColor},children:se.shortLabel})]}),Le?(()=>{const{national:X,worstRegions:ie,bestRegions:De}=Le,Ye=ji?.value??X.value,Ze=ji?`${(Fe?.name||ji.regionName).replace(/|||/g,"").trim()} `:he==="nation"?" ":`${Z?.name?.replace(/|||/g,"").trim()||""} `,Ke=se.higherIsWorse?X.deltaPP<=0?"text-green-600":"text-red-600":X.deltaPP>=0?"text-green-600":"text-red-600";return n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-[12px] text-gray-500",children:Ze}),n.jsx("span",{className:"text-sm font-bold",style:{color:se.primaryColor},children:n.jsx(bW,{value:Ye,formatter:Zt=>se.valueFormatter(Zt)})})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-[12px] text-gray-500",children:" "}),n.jsxs("span",{className:`text-sm font-bold ${Ke}`,children:[X.deltaPP>0?"+":"",X.deltaPP,"pp"]})]}),X.target!=null&&n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-[12px] text-gray-500",children:""}),n.jsx("span",{className:"text-xs font-semibold text-gray-600",children:se.valueFormatter(X.target)})]}),De[0]&&n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("span",{className:"text-[12px] text-gray-500",children:[" (",De[0].regionName.replace(/|||/g,"").trim(),")"]}),n.jsx("span",{className:"text-xs font-semibold text-green-600",children:se.valueFormatter(De[0].value)})]}),ie[0]&&n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("span",{className:"text-[12px] text-gray-500",children:[" (",ie[0].regionName.replace(/|||/g,"").trim(),")"]}),n.jsx("span",{className:"text-xs font-semibold text-red-600",children:se.valueFormatter(ie[0].value)})]})]})})():n.jsx("div",{className:"h-24 flex items-center justify-center text-xs text-gray-400 animate-pulse",children:" "})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("span",{className:"text-sm font-semibold text-gray-700",children:[se.legend.direction==="higherWorse"?"":""," Top 5"]}),n.jsx("span",{className:"text-[11px] px-1.5 py-0.5 rounded font-medium",style:{backgroundColor:`${se.primaryColor}15`,color:se.primaryColor},children:se.shortLabel})]}),n.jsx("p",{className:"text-[10px] text-gray-500 mb-1",children:" :         "}),n.jsxs("div",{className:"space-y-0.5",children:[(()=>{if(!an.length)return null;const X=an.map(Ze=>Ze.gapAbs),ie=Math.min(...X),Ye=Math.max(...X)-ie||1;return an.map((Ze,Ke)=>n.jsxs("div",{role:"button",tabIndex:0,onMouseEnter:()=>{ut({level:lo(he),regionCode:Ze.code,regionName:Ze.name})},onClick:()=>{oo(Ze)},onKeyDown:Zt=>{(Zt.key==="Enter"||Zt.key===" ")&&(Zt.preventDefault(),oo(Ze))},className:`w-full flex items-center gap-2 px-2 py-1.5 rounded transition-colors cursor-pointer select-none ${Fe?.code===Ze.code?"bg-blue-50 ring-1 ring-blue-200":"hover:bg-gray-50"} ${Ge?"animate-pulse":""}`,children:[n.jsx("span",{className:"w-5 h-5 rounded-full flex items-center justify-center text-[11px] font-bold text-white shrink-0",style:{backgroundColor:Ke===0?se.primaryColor:Ke===1?`${se.primaryColor}cc`:`${se.primaryColor}88`},children:Ze.rank}),n.jsx("div",{className:"min-w-[54px] shrink-0",children:n.jsx("span",{className:"text-[12px] text-gray-800 truncate block",children:Ze.name.replace(/|||/g,"").trim()})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"h-[6px] bg-gray-100 rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full rounded-full transition-all",style:{width:`${Math.max(10,(Ze.gapAbs-ie)/Ye*100)}%`,backgroundColor:se.primaryColor,opacity:.55+.35*(1-Ke/5)}})}),n.jsxs("div",{className:"mt-0.5 text-[10px] text-gray-500 tabular-nums",children:[" ",sl(Ze.targetGapPp),"   ",sl(Ze.weeklyDeltaPp)]})]}),n.jsx("span",{className:"text-[12px] font-bold tabular-nums text-right min-w-[58px] shrink-0",style:{color:se.primaryColor},children:se.valueFormatter(Ze.value)})]},Ze.code))})(),Le&&an.length===0&&n.jsx("div",{className:"text-xs text-gray-400 text-center py-4",children:"   ."}),!Le&&n.jsx("div",{className:"text-xs text-gray-400 text-center py-4 animate-pulse",children:" "})]})]}),n.jsx(Uh,{title:" ",isOpen:x.opsSummary,onToggle:()=>N("opsSummary"),summary:`${l0.filter(X=>X.status==="deployed").length} `,children:n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("button",{onClick:()=>e?.("model-governance",{}),className:"w-full flex items-center gap-2 p-2 rounded-md hover:bg-blue-50 transition-colors text-left",children:[n.jsx(Fv,{className:"h-4 w-4 text-blue-500 shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"text-[12px] font-medium text-gray-900",children:"  "}),n.jsxs("div",{className:"text-[11px] text-gray-500 truncate",children:[l0.filter(X=>X.status==="deployed").length,"   ",l0.filter(X=>X.status==="pending").length," "]})]}),n.jsx(Na,{className:"h-3 w-3 text-gray-400 shrink-0"})]}),n.jsxs("button",{onClick:()=>e?.("compliance-audit",{}),className:"w-full flex items-center gap-2 p-2 rounded-md hover:bg-orange-50 transition-colors text-left",children:[n.jsx(Do,{className:"h-4 w-4 text-orange-500 shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"text-[12px] font-medium text-gray-900",children:"  "}),n.jsx("div",{className:"text-[11px] text-gray-500",children:" 0   4/4 "})]}),n.jsx(Na,{className:"h-3 w-3 text-gray-400 shrink-0"})]}),n.jsxs("button",{onClick:()=>e?.("quality-monitoring",{}),className:"w-full flex items-center gap-2 p-2 rounded-md hover:bg-purple-50 transition-colors text-left",children:[n.jsx(Ic,{className:"h-4 w-4 text-purple-500 shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"text-[12px] font-medium text-gray-900",children:" &  "}),n.jsxs("div",{className:"text-[11px] text-gray-500",children:[" ",Vb.filter(X=>X.severity!=="info").length,"",Vb.filter(X=>X.severity==="critical").length>0&&n.jsxs("span",{className:"ml-1 text-red-600 font-medium",children:["  ",Vb.filter(X=>X.severity==="critical").length,""]})]})]}),n.jsx(Na,{className:"h-3 w-3 text-gray-400 shrink-0"})]})]})}),n.jsx(Uh,{title:" / ",isOpen:x.ageRisk,onToggle:()=>N("ageRisk"),summary:"5  2",children:n.jsx("div",{style:{height:"190px"},children:n.jsx(xa,{width:"100%",height:"100%",children:n.jsxs(Hu,{data:aa.map(X=>{const ie=X.normal+X.caution+X.highRisk+X.slaViolation;return{age:X.age,slaViolation:ie>0?Number((X.slaViolation/ie*100).toFixed(1)):0,recontactNeed:ie>0?Number(((X.highRisk+X.caution)/ie*100).toFixed(1)):0}}),margin:{top:8,right:6,left:6,bottom:4},children:[n.jsx(ms,{strokeDasharray:"3 3",vertical:!1,stroke:"#e5e7eb"}),n.jsx(Vn,{dataKey:"age",tick:{fontSize:14,fill:"#4b5563"},tickLine:!1}),n.jsx(Hn,{tick:{fontSize:13,fill:"#6b7280"},tickLine:!1,axisLine:!1,width:44,tickFormatter:X=>`${X}%`}),n.jsx(en,{content:({active:X,payload:ie,label:De})=>!X||!ie?.length?null:n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-2 shadow-lg text-xs",children:[n.jsxs("div",{className:"font-semibold text-gray-800 mb-1",children:[De,""]}),ie.map((Ye,Ze)=>n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:Ye.color}}),n.jsxs("span",{children:[Ye.dataKey==="slaViolation"?"SLA ":" ",": ",Number(Ye.value).toFixed(1),"%"]})]},Ze))]})}),n.jsx(El,{formatter:X=>X==="slaViolation"?"SLA ":" ",wrapperStyle:{fontSize:"13px"}}),n.jsx(Xa,{dataKey:"slaViolation",fill:"#ef4444",radius:[3,3,0,0],isAnimationActive:!0,animationDuration:460,animationEasing:"ease-out"}),n.jsx(Xa,{dataKey:"recontactNeed",fill:"#f59e0b",radius:[3,3,0,0],isAnimationActive:!0,animationDuration:460,animationEasing:"ease-out"})]})})})}),n.jsx(Uh,{title:"KPI  ",isOpen:x.kpiTable,onToggle:()=>N("kpiTable"),summary:`${hr.length} `,children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-[12px]",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[n.jsx("th",{className:"px-1.5 py-1 text-left font-medium text-gray-600",children:"KPI"}),n.jsx("th",{className:"px-1.5 py-1 text-right font-medium text-gray-600",children:""}),n.jsx("th",{className:"px-1.5 py-1 text-right font-medium text-gray-600",children:""}),n.jsx("th",{className:"px-1.5 py-1 text-right font-medium text-gray-600",children:""})]})}),n.jsx("tbody",{children:hr.map(X=>{const ie=Tr[X.id];return ie?n.jsxs("tr",{className:"border-b border-gray-100 hover:bg-blue-50/30",children:[n.jsx("td",{className:"px-1.5 py-1 truncate max-w-[80px]",children:X.name}),n.jsxs("td",{className:"px-1.5 py-1 text-right whitespace-nowrap",children:[ie.current,ie.unit]}),n.jsxs("td",{className:"px-1.5 py-1 text-right text-red-600 whitespace-nowrap",children:[(ie.current*.95).toFixed(1),ie.unit]}),n.jsxs("td",{className:"px-1.5 py-1 text-right text-blue-600 whitespace-nowrap",children:[(ie.current*1.03).toFixed(1),ie.unit]})]},X.id):null})})]})})})]}),n.jsx("div",{className:`${Be==="desktop"?"min-w-0 flex flex-col":"w-full shrink-0"}`,children:n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden flex flex-col flex-1",children:[n.jsxs("div",{className:"px-3 py-2 border-b border-gray-200 bg-white rounded-t-lg space-y-1.5",children:[n.jsxs("div",{className:"flex items-center gap-1.5",children:[he!=="nation"&&n.jsxs("button",{onClick:je,className:"flex items-center gap-0.5 px-2 py-1 text-xs text-blue-600 bg-blue-50 rounded hover:bg-blue-100 transition-colors font-medium shrink-0",children:[n.jsx(Tm,{className:"h-3.5 w-3.5"}),""]}),n.jsxs("span",{className:"text-[12px] text-gray-600",children:[Ut,"  2026  ",n.jsx("span",{className:"font-semibold",style:{color:se.primaryColor},children:se.shortLabel}),"  ",iC(he),Z&&n.jsxs("span",{className:"text-gray-500",children:[" (",Z.name,")"]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsxs("div",{className:"flex rounded-md border border-gray-200 overflow-hidden",children:[n.jsx("button",{onClick:()=>d("geomap"),className:`px-2.5 py-1 text-[11px] font-medium transition ${l==="geomap"?"bg-blue-600 text-white":"bg-white text-gray-500 hover:bg-gray-100"}`,children:""}),n.jsx("button",{onClick:()=>d("heatmap"),className:`px-2.5 py-1 text-[11px] font-medium transition border-l border-gray-200 ${l==="heatmap"?"bg-blue-600 text-white":"bg-white text-gray-500 hover:bg-gray-100"}`,children:""})]}),n.jsx("div",{className:"flex items-center gap-0.5",children:["weekly","monthly","quarterly","yearly_cum"].map(X=>n.jsx("button",{onClick:()=>a(X),className:`rounded-md px-2.5 py-1 text-[11px] font-medium transition ${r===X?"bg-blue-600 text-white":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,children:X==="weekly"?"":X==="monthly"?"":X==="quarterly"?"":"()"},X))}),n.jsx("button",{className:"h-6 w-6 flex items-center justify-center hover:bg-gray-100 rounded transition-colors ml-auto shrink-0",children:n.jsx(hm,{className:"h-3 w-3 text-gray-500"})})]})]}),n.jsx("div",{className:"p-2 min-h-0",children:l==="geomap"?n.jsx(n5,{indicatorId:t,periodType:r,year:2026,scope:{mode:"national"},variant:"portal",mapHeight:670,hideBreadcrumb:!0,externalLevel:he==="nation"?"ctprvn":he==="sido"?"sig":"emd",externalSelectedCode:Fe?.code??Z?.code,onRegionSelect:wa,onGoBack:je,externalColorScheme:Q,hideLegendPanel:!0,onSubRegionsChange:re}):n.jsxs("div",{className:"relative w-full",style:{height:"clamp(320px, 44vh, 480px)"},children:[n.jsx(xa,{width:"100%",height:"100%",children:n.jsx(mv,{data:Sr,dataKey:"size",stroke:"#fff",isAnimationActive:!0,animationDuration:520,animationEasing:"ease-out",content:Ls})}),K&&(()=>{const ie=[...Sr].sort((Ze,Ke)=>Ke.size-Ze.size).findIndex(Ze=>Ze.name===K.name)+1,De=Sr.reduce((Ze,Ke)=>Ze+Ke.size,0),Ye=De>0?(K.size/De*100).toFixed(1):"0";return n.jsxs("div",{className:"absolute z-50 pointer-events-none bg-white border border-gray-200 rounded-lg p-2.5 shadow-xl text-xs min-w-[170px]",style:{left:Math.min(K.x+12,200),top:Math.max(K.y-60,0)},children:[n.jsxs("div",{className:"flex items-center justify-between mb-1 pb-1 border-b border-gray-100",children:[n.jsx("span",{className:"font-semibold text-gray-800",children:K.name}),n.jsx("span",{className:"text-[11px] bg-orange-50 text-orange-600 px-1.5 py-0.5 rounded font-medium",children:r==="weekly"?"":r==="monthly"?"":r==="quarterly"?"":"()"})]}),n.jsxs("div",{className:"flex justify-between py-0.5",children:[n.jsx("span",{className:"text-gray-500",children:t}),n.jsx("span",{className:"font-bold text-blue-600",children:K.size.toLocaleString()})]}),n.jsxs("div",{className:"flex justify-between py-0.5",children:[n.jsx("span",{className:"text-gray-500",children:""}),n.jsxs("span",{className:"font-bold text-gray-700",children:[ie,"/",Sr.length]})]}),n.jsxs("div",{className:"flex justify-between py-0.5",children:[n.jsx("span",{className:"text-gray-500",children:""}),n.jsxs("span",{className:"font-bold text-gray-700",children:[Ye,"%"]})]})]})})()]})}),n.jsxs("div",{className:"mx-2 mb-2 px-3 py-2 rounded-lg bg-gradient-to-r from-gray-50 to-gray-100/80 border border-gray-200/60 shrink-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full",style:{backgroundColor:se.primaryColor}}),n.jsx("span",{className:"text-[12px] font-bold text-gray-600 tracking-wide",children:se.shortLabel}),n.jsx("span",{className:"text-[11px] text-gray-400 ml-auto",children:se.unit})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-[12px] font-semibold text-gray-500 tabular-nums min-w-[36px] text-right",children:se.legend.format(se.legend.ticks[0])}),n.jsx("div",{className:"flex-1 h-3 rounded-md overflow-hidden flex shadow-inner",children:se.palette.map((X,ie)=>n.jsx("div",{className:"flex-1 transition-colors",style:{backgroundColor:X}},ie))}),n.jsx("span",{className:"text-[12px] font-semibold text-gray-500 tabular-nums min-w-[36px]",children:se.legend.format(se.legend.ticks[se.legend.ticks.length-1])})]}),n.jsx("div",{className:"flex items-center justify-center gap-1 mt-1",children:n.jsx("span",{className:"text-[10px] text-gray-400",children:se.legend.direction==="higherBetter"?"  ()   () ":"  ()   () "})})]})]})}),n.jsxs("div",{className:`flex flex-col gap-2 ${Be==="desktop"?"min-w-0":Be==="tablet"?"hidden":"w-full shrink-0"}`,children:[n.jsx("div",{className:"bg-white border border-gray-200 rounded-lg px-3 py-2",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"w-2 h-2 rounded-full shrink-0",style:{backgroundColor:se.primaryColor}}),n.jsx("span",{className:"text-[12px] font-semibold text-gray-700 shrink-0",children:se.shortLabel}),n.jsx("p",{className:"text-[11px] text-gray-500 truncate flex-1",title:se.analysisSummary,children:se.analysisSummary})]})}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg px-3 py-2.5",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[n.jsx("span",{className:"text-[12px] font-semibold text-gray-700",children:" "}),A.type==="kpi"&&n.jsx("span",{className:`inline-flex items-center rounded-full border px-1.5 py-0.5 text-[10px] font-semibold ${uC[A.severity]}`,children:Hh[A.severity]}),A.type==="matrix"&&n.jsx("span",{className:`inline-flex items-center rounded-full border px-1.5 py-0.5 text-[10px] font-semibold ${cc[A.quadrant].badgeClass}`,children:cc[A.quadrant].label})]}),A.type==="none"&&n.jsx("p",{className:"text-[11px] text-gray-500",children:"Top5,  ,      ."}),A.type==="kpi"&&n.jsxs("div",{className:"space-y-1.5 text-[11px] text-gray-600",children:[n.jsxs("p",{className:"font-semibold text-gray-800",children:[ct.shortName,"  "]}),n.jsxs("p",{children:["   ",sl(A.deltaPp),"    ",sl(A.trendWorseningPp)]}),n.jsxs("p",{children:[" : ",qF[A.kpiId]]}),A.partialPossible&&n.jsx("span",{className:"inline-flex items-center rounded-md border border-amber-200 bg-amber-50 px-1.5 py-0.5 text-[10px] font-medium text-amber-700",children:"  "})]}),A.type==="top5"&&n.jsxs("div",{className:"space-y-1.5 text-[11px]",children:[n.jsxs("p",{className:"font-semibold text-gray-800",children:[A.row.name,"  ",se.valueFormatter(A.row.value)]}),n.jsxs("p",{className:"text-gray-600",children:["  ",sl(A.row.targetGapPp),"    ",sl(A.row.weeklyDeltaPp)]}),n.jsxs("p",{className:"text-gray-600",children:[": ",A.causeName]}),n.jsx("p",{className:"text-gray-600",children:A.actionText}),n.jsx("div",{className:"space-y-1 pt-1 border-t border-gray-100",children:A.owners.slice(0,3).map(X=>n.jsxs("div",{className:"flex items-center justify-between text-[10px]",children:[n.jsx("span",{className:"truncate text-gray-600",children:X.orgName}),n.jsxs("span",{className:"font-semibold text-gray-800",children:[X.count,""]})]},`${X.orgName}-${X.lastOccurredAt}`))})]}),A.type==="cause"&&n.jsxs("div",{className:"space-y-1.5 text-[11px]",children:[n.jsxs("p",{className:"font-semibold text-gray-800",children:[": ",A.causeName]}),n.jsx("p",{className:"text-gray-600",children:A.actionText}),n.jsx("div",{className:"space-y-1 pt-1 border-t border-gray-100",children:A.owners.slice(0,4).map(X=>n.jsxs("div",{className:"rounded border border-gray-100 bg-gray-50 px-2 py-1",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-[10px] font-medium text-gray-700",children:X.orgName}),n.jsxs("span",{className:"text-[10px] font-semibold text-gray-800",children:[X.count,""]})]}),n.jsxs("div",{className:"text-[10px] text-gray-500",children:[X.regionName,"  ",X.lastOccurredAt]})]},`${X.orgName}-${X.lastOccurredAt}`))}),n.jsx("button",{onClick:()=>e?.("compliance-audit",{region:Fe?.code??Z?.code??"KR",kpi:q}),className:"text-[10px] text-blue-600 hover:text-blue-700 font-semibold",children:" /   "})]}),A.type==="matrix"&&n.jsxs("div",{className:"space-y-1.5 text-[11px] text-gray-600",children:[n.jsxs("p",{className:"font-semibold text-gray-800",children:[A.selectedRegionName,"   ",cc[A.quadrant].description]}),n.jsx("div",{className:"space-y-1 pt-1 border-t border-gray-100 max-h-[120px] overflow-y-auto",children:A.items.map(X=>n.jsxs("div",{className:"flex items-center justify-between text-[10px]",children:[n.jsx("span",{className:"truncate",children:X.regionName}),n.jsxs("span",{className:"tabular-nums text-gray-800",children:["SLA ",X.slaRate.toFixed(1),"%   ",X.dataRate.toFixed(1),"%"]})]},`${X.regionName}-${X.slaRate}`))})]}),A.type==="policy"&&n.jsxs("div",{className:"space-y-1.5 text-[11px] text-gray-600",children:[n.jsx("p",{className:"font-semibold text-gray-800",children:" /  Top 3"}),n.jsx("div",{className:"space-y-1 max-h-[132px] overflow-y-auto",children:A.items.map(X=>n.jsxs("div",{className:"rounded border border-gray-100 bg-gray-50 px-2 py-1",children:[n.jsx("div",{className:"text-[10px] font-semibold text-gray-800",children:X.title}),n.jsxs("div",{className:"text-[10px] text-gray-500",children:[X.effectiveAt,"    ",X.impactedRegions,""]}),n.jsx("div",{className:"text-[10px] text-gray-600 mt-0.5",children:X.impactedKpis.map(ie=>`${ie.kpiKey} ${sl(ie.deltaPp)}`).join("  ")}),X.notes&&n.jsx("div",{className:"text-[10px] text-gray-500 mt-0.5",children:X.notes})]},X.policyId))})]})]}),Le&&n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs(GF,{title:" ",height:300,badge:n.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded font-medium",style:{backgroundColor:`${se.primaryColor}15`,color:se.primaryColor},children:Le.breakdownType==="donut"?"":""}),children:[Le.breakdownType==="donut"?n.jsxs("div",{className:"relative",style:{height:"160px"},children:[n.jsx(xa,{width:"100%",height:"100%",children:n.jsxs(OG,{children:[n.jsx(Ll,{data:Le.breakdown,cx:"50%",cy:"50%",innerRadius:35,outerRadius:60,dataKey:"value",startAngle:90,endAngle:-270,paddingAngle:2,strokeWidth:0,label:E5e,labelLine:!1,isAnimationActive:!0,animationDuration:460,animationEasing:"ease-out",children:Le.breakdown.map((X,ie)=>n.jsx(Ji,{fill:X.color||se.palette[ie%se.palette.length]},ie))}),n.jsx(en,{formatter:X=>[X.toLocaleString(),""],contentStyle:{fontSize:"11px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.12)"}})]})}),n.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center pointer-events-none",children:[n.jsx("div",{className:"text-[10px] text-gray-500",children:""}),n.jsx("div",{className:"text-[12px] font-bold text-gray-800",children:Le.breakdown.reduce((X,ie)=>X+ie.value,0).toLocaleString()})]})]}):n.jsx("div",{style:{height:"160px"},children:n.jsx(xa,{width:"100%",height:"100%",children:n.jsxs(Hu,{data:Le.breakdown,margin:{top:4,right:8,left:6,bottom:4},children:[n.jsx(ms,{strokeDasharray:"3 3",vertical:!1,stroke:"#e5e7eb"}),n.jsx(Vn,{dataKey:"name",tick:{fontSize:10,fill:"#4b5563"},tickLine:!1}),n.jsx(Hn,{tick:{fontSize:10,fill:"#6b7280"},tickLine:!1,axisLine:!1,width:40}),n.jsx(en,{contentStyle:{fontSize:"11px",borderRadius:"8px"}}),n.jsx(Xa,{dataKey:"value",radius:[3,3,0,0],isAnimationActive:!0,animationDuration:460,animationEasing:"ease-out",children:Le.breakdown.map((X,ie)=>n.jsx(Ji,{fill:X.color||se.palette[ie%se.palette.length]},ie))})]})})}),n.jsxs("div",{className:"space-y-0.5 mt-1 pt-1 border-t border-gray-100",children:[Le.breakdown.slice(0,v?Le.breakdown.length:3).map((X,ie)=>n.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-600",children:[n.jsx("span",{className:"w-2 h-2 rounded-sm shrink-0",style:{backgroundColor:X.color||se.palette[ie%se.palette.length]}}),n.jsx("span",{className:"truncate",children:X.name}),n.jsx("span",{className:"font-semibold text-gray-800 ml-auto tabular-nums",children:X.value.toLocaleString()})]},ie)),Le.breakdown.length>3&&n.jsx("button",{onClick:()=>j(!v),title:v?"  ":` : ${Le.breakdown.slice(3,6).map(X=>X.name).join(", ")}`,className:"text-[10px] text-blue-500 hover:text-blue-700 w-full text-center pt-0.5",children:v?"":`+${Le.breakdown.length-3} `})]})]}),n.jsxs(GF,{title:" ",height:300,children:[n.jsx("div",{style:{height:"180px"},children:n.jsx(xa,{width:"100%",height:"100%",children:n.jsxs(Hu,{data:bt.slice(0,E?bt.length:3),layout:"vertical",margin:{top:4,right:24,left:4,bottom:4},children:[n.jsx(ms,{strokeDasharray:"3 3",horizontal:!1,stroke:"#e5e7eb"}),n.jsx(Vn,{type:"number",tick:{fontSize:10,fill:"#6b7280"}}),n.jsx(Hn,{type:"category",dataKey:"name",tick:{fontSize:10,fill:"#4b5563"},width:60}),n.jsx(en,{contentStyle:{fontSize:"11px",borderRadius:"8px"}}),n.jsx(Xa,{dataKey:"value",radius:[0,3,3,0],fill:se.primaryColor,isAnimationActive:!0,animationDuration:460,animationEasing:"ease-out",onClick:X=>{const De=(X?.payload??X)?.name;De&&S({type:"cause",causeName:De,owners:ir(De),actionText:St(De)})},label:{position:"right",fontSize:10,fill:"#374151",formatter:X=>X.toLocaleString()},children:bt.slice(0,E?bt.length:3).map((X,ie)=>n.jsx(Ji,{fill:se.palette[Math.min(ie+1,se.palette.length-2)]},ie))})]})})}),bt.length>3&&n.jsx("button",{onClick:()=>C(!E),title:E?"  ":` : ${bt.slice(3,6).map(X=>X.name).join(", ")}`,className:"text-[10px] text-blue-500 hover:text-blue-700 w-full text-center pt-1",children:E?"":`+${bt.length-3} `})]})]}),Le&&n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:se.primaryColor}}),n.jsxs("span",{className:"text-[12px] font-semibold text-gray-700",children:[se.shortLabel," ",Fe?.name?` (${Fe.name})`:""]})]}),n.jsx("span",{className:"text-[10px] text-gray-400",children:Ut})]}),n.jsx("div",{style:{height:"160px"},children:n.jsx(xa,{width:"100%",height:"100%",children:n.jsxs(Wk,{data:ri,margin:{top:6,right:10,left:10,bottom:4},children:[n.jsx("defs",{children:n.jsxs("linearGradient",{id:"kpiTrendGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:"0%",stopColor:se.primaryColor,stopOpacity:.25}),n.jsx("stop",{offset:"100%",stopColor:se.primaryColor,stopOpacity:.03})]})}),n.jsx(ms,{strokeDasharray:"3 3",vertical:!1,stroke:"#f3f4f6"}),n.jsx(Vn,{dataKey:"period",tick:{fontSize:10,fill:"#6b7280"},tickLine:!1}),n.jsx(Hn,{tick:{fontSize:10,fill:"#9ca3af"},tickLine:!1,axisLine:!1,tickMargin:4,width:se.unit==="%"?58:46,tickFormatter:X=>se.valueFormatter(X)}),n.jsx(en,{contentStyle:{fontSize:"11px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.12)"},formatter:X=>[se.valueFormatter(X),se.shortLabel]}),se.target!=null&&n.jsx(_l,{y:se.target,stroke:"#ef4444",strokeDasharray:"4 2",strokeWidth:1.5,label:{value:` ${se.valueFormatter(se.target)}`,fontSize:10,fill:"#ef4444",position:"right"}}),n.jsx($l,{type:"monotone",dataKey:"value",fill:"url(#kpiTrendGrad)",stroke:"none",isAnimationActive:!0,animationDuration:500,animationEasing:"ease-out"}),n.jsx($a,{type:"monotone",dataKey:"value",stroke:se.primaryColor,strokeWidth:2,isAnimationActive:!0,animationDuration:500,animationEasing:"ease-out",dot:!1,activeDot:{r:4,fill:se.primaryColor,stroke:"#fff",strokeWidth:2}})]})})})]}),n.jsxs(Uh,{title:"SLA    ",isOpen:M.slaMatrix,onToggle:()=>$("slaMatrix"),summary:` ${Lr.filter(ie=>ie.slaRate<yn&&ie.dataRate<sn).length} `,children:[n.jsxs("div",{className:"flex items-center justify-between gap-2 text-[10px] text-gray-500 mb-1",children:[n.jsx("span",{className:"text-[11px] text-gray-500",children:" (SLA)      "}),n.jsxs("button",{onClick:qo,className:"inline-flex items-center gap-1 rounded border border-gray-200 bg-white px-2 py-0.5 text-[10px] font-medium text-gray-600 hover:bg-gray-50",children:[n.jsx(hm,{className:"h-3 w-3"}),""]})]}),n.jsxs("div",{className:"mb-1 flex items-center justify-between gap-2",children:[n.jsxs("button",{type:"button",onClick:()=>Ei(Ja),className:"inline-flex items-center gap-1 rounded-md border border-blue-200 bg-blue-50/70 px-2 py-0.5 text-[10px] font-semibold text-blue-700 hover:bg-blue-100/80",children:["   :",n.jsx("span",{children:cc[Ja].guideLabel}),n.jsxs("span",{children:["(",Za[Ja]," )"]})]}),n.jsxs("div",{className:"flex items-center justify-end gap-2 text-[10px] text-gray-500",children:[n.jsxs("span",{className:"flex items-center gap-0.5",children:[n.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"}),""]}),n.jsxs("span",{className:"flex items-center gap-0.5",children:[n.jsx("span",{className:"w-2 h-2 rounded-full bg-amber-400"}),""]}),n.jsxs("span",{className:"flex items-center gap-0.5",children:[n.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"}),""]})]})]}),n.jsxs("div",{className:"mb-1 text-[10px] text-gray-500",children:[" : SLA ",yn.toFixed(1),"% /  ",sn.toFixed(1),"%"]}),Lr.length>0?n.jsxs("div",{className:"relative",style:{height:"220px"},children:[n.jsx(xa,{width:"100%",height:"100%",children:n.jsxs(Iye,{margin:{top:8,right:12,left:8,bottom:8},children:[n.jsx(ms,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),n.jsx(Vn,{type:"number",dataKey:"dataRate",name:" ",unit:"%",domain:[70,100],tick:{fontSize:11},label:{value:" (%)",position:"insideBottom",offset:-2,fontSize:11,fill:"#6b7280"}}),n.jsx(Hn,{type:"number",dataKey:"slaRate",name:"SLA ",unit:"%",domain:[70,100],tick:{fontSize:11},width:46,label:{value:"SLA(%)",angle:-90,position:"insideLeft",offset:0,fontSize:11,fill:"#6b7280"}}),n.jsx(Fp,{type:"number",dataKey:"totalCases",range:[30,250],name:" "}),n.jsx(_l,{x:sn,stroke:"#9ca3af",strokeDasharray:"4 2"}),n.jsx(_l,{y:yn,stroke:"#9ca3af",strokeDasharray:"4 2"}),n.jsx(en,{content:({active:X,payload:ie})=>{if(!X||!ie?.[0])return null;const De=ie[0].payload;return n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-2 shadow-lg text-xs",children:[n.jsx("div",{className:"font-semibold text-gray-800 mb-1",children:De.regionName}),n.jsxs("div",{children:["SLA : ",n.jsxs("span",{className:"font-medium",children:[De.slaRate,"%"]})]}),n.jsxs("div",{children:[" : ",n.jsxs("span",{className:"font-medium",children:[De.dataRate,"%"]})]}),n.jsxs("div",{children:[": ",n.jsxs("span",{className:"font-medium",children:[De.totalCases.toLocaleString(),""]})]})]})}}),n.jsx(Bp,{data:Lr,isAnimationActive:!0,animationDuration:480,animationEasing:"ease-out",onClick:ys,children:Lr.map((X,ie)=>{const De=Gh(X.slaRate,X.dataRate,yn,sn),Ye=De==="good"?"#22c55e":De==="dualRisk"?"#ef4444":"#f59e0b",Ze=_!==null&&_!==De;return n.jsx(Ji,{fill:Ye,fillOpacity:Ze?.2:.95,stroke:Ze?"#d1d5db":Ye,strokeWidth:Ze?1:1.5,style:{cursor:"pointer"}},ie)})})]})}),n.jsx("div",{className:"pointer-events-none absolute inset-0",children:["good","dataRisk","slaRisk","dualRisk"].map(X=>{const ie=cc[X],De=zo[X],Ye=ht===X;return n.jsxs("button",{type:"button",onClick:()=>Ei(X),className:`pointer-events-auto absolute -translate-x-1/2 -translate-y-1/2 rounded-md border px-1.5 py-0.5 text-[10px] font-semibold transition-colors ${Ye?"border-blue-200 bg-white/95 text-blue-700 shadow-sm":"border-gray-200 bg-white/70 text-gray-500 hover:bg-white/90"}`,style:{left:`${De.left}%`,top:`${De.top}%`},children:[ie.guideLabel," (",Za[X],")"]},`overlay-${X}`)})})]}):n.jsx("div",{className:"h-[160px] flex items-center justify-center text-xs text-gray-400",children:" "}),n.jsx("div",{className:"mt-2 grid grid-cols-2 gap-1.5",children:["good","dataRisk","slaRisk","dualRisk"].map(X=>{const ie=cc[X],De=_===X,Ye=_===null&&Ja===X;return n.jsxs("div",{role:"button",tabIndex:0,"aria-pressed":De,title:ie.description,onClick:()=>Ei(X),onKeyDown:Ze=>{(Ze.key==="Enter"||Ze.key===" ")&&(Ze.preventDefault(),Ei(X))},className:`rounded-md border px-2 py-1 text-left transition-colors ${De?"ring-1 ring-blue-300 border-blue-200 bg-blue-50/70":Ye?"border-indigo-200 bg-indigo-50/60":"border-gray-200 bg-gray-50/70 hover:bg-gray-100"}`,children:[n.jsxs("div",{className:"flex items-start justify-between gap-1",children:[n.jsx("span",{className:`inline-flex items-center rounded-full border px-1.5 py-0.5 text-[10px] font-semibold ${ie.badgeClass}`,children:ie.guideLabel}),n.jsxs("div",{className:"relative","data-matrix-help-popover":!0,children:[n.jsx("button",{type:"button","aria-label":`${ie.guideLabel}  `,className:"inline-flex items-center justify-center rounded text-gray-400 hover:text-gray-600",onClick:Ze=>{Ze.stopPropagation(),k(Ke=>Ke===X?null:X)},children:n.jsx(EC,{className:"h-3 w-3"})}),D===X&&n.jsx("div",{className:"absolute right-0 top-4 z-20 min-w-[130px] rounded border border-gray-200 bg-white px-2 py-1 text-[10px] text-gray-600 shadow-lg",children:ie.description})]})]}),n.jsxs("p",{className:"mt-1 text-[11px] font-semibold text-gray-700",children:["  ",Za[X],""]})]},X)})})]}),n.jsx(Uh,{title:"   ()",isOpen:M.stageDistribution,onToggle:()=>$("stageDistribution"),summary:`${Zr.length} `,children:Zr.length>0?n.jsx("div",{style:{height:"240px"},children:n.jsx(xa,{width:"100%",height:"100%",children:n.jsxs(Hu,{data:Zr,margin:{top:5,right:8,left:8,bottom:22},children:[n.jsx(ms,{strokeDasharray:"3 3",vertical:!1,stroke:"#e5e7eb"}),n.jsx(Vn,{dataKey:"regionName",tick:{fontSize:11,fill:"#4b5563"},interval:0,angle:-35,textAnchor:"end"}),n.jsx(Hn,{tick:{fontSize:11,fill:"#6b7280"},width:46,tickFormatter:X=>X>=1e3?`${(X/1e3).toFixed(0)}K`:String(X)}),n.jsx(en,{content:({active:X,payload:ie,label:De})=>{if(!X||!ie?.length)return null;const Ye=ie.reduce((Ze,Ke)=>Ze+(Number(Ke.value)||0),0);return n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-2 shadow-lg text-xs",children:[n.jsx("div",{className:"font-semibold text-gray-800 mb-1",children:De}),ie.map((Ze,Ke)=>n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:Ze.color}}),n.jsxs("span",{children:[_n[Ze.dataKey]||Ze.dataKey,": ",Number(Ze.value).toLocaleString()," (",Ye>0?(Number(Ze.value)/Ye*100).toFixed(1):0,"%)"]})]},Ke)),n.jsxs("div",{className:"mt-1 pt-1 border-t border-gray-100 font-medium",children:[": ",Ye.toLocaleString(),""]})]})}}),n.jsx(El,{formatter:X=>_n[X]||X,wrapperStyle:{fontSize:"11px"}}),xs.map(X=>n.jsx(Xa,{dataKey:X,stackId:"stage",fill:Ul[X],isAnimationActive:!0,animationDuration:460,animationEasing:"ease-out"},X))]})})}):n.jsx("div",{className:"h-[180px] flex items-center justify-center text-xs text-gray-400",children:" "})})]}),Be==="tablet"&&n.jsxs("div",{className:"flex gap-2 flex-1 min-h-0",children:[n.jsxs("div",{className:"flex-1 flex flex-col gap-2 overflow-y-auto",children:[n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-2 text-center",children:[n.jsxs("span",{className:"text-xs text-blue-700 font-medium",children:[iC(he)," "]}),Z&&n.jsxs("span",{className:"ml-2 text-xs text-blue-600",children:["(",Z.name,")"]})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3 flex-1",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsxs("div",{className:"text-xs text-gray-500",children:[Ut,"  "]}),n.jsx("div",{className:"text-[11px] text-blue-500 bg-blue-50 px-1.5 py-0.5 rounded",children:Ut})]}),n.jsxs("div",{className:"text-2xl font-bold text-blue-600 mb-2",children:[Kn.toLocaleString()," ",n.jsx("span",{className:"text-sm font-normal text-gray-500",children:""})]}),n.jsxs("div",{className:"text-[12px] text-gray-500 mb-2",children:[fr.label," ()"]}),n.jsx("div",{className:"h-[140px]",children:n.jsx(xa,{width:"100%",height:"100%",children:n.jsx(mv,{data:Sr,dataKey:"size",aspectRatio:4/3,stroke:"#fff",isAnimationActive:!0,animationDuration:520,animationEasing:"ease-out",content:n.jsx(Ls,{})})})})]})]}),n.jsx("div",{className:"flex-1 flex flex-col gap-2 overflow-y-auto",children:n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3 flex-1",children:[n.jsx("div",{className:"text-xs font-medium text-gray-700 mb-2",children:"KPI  "}),n.jsx("div",{className:"grid grid-cols-2 gap-2",children:hr.slice(0,4).map((X,ie)=>n.jsx(C5e,{kpiDef:X,data:Tr[X.id],colorIndex:ie,analyticsPeriod:o},X.id))})]})})]})]})}),n.jsx(y5e,{visible:Ea,stage:Ae==="refreshing"?"refreshing":"scopeChange"})]})]})}const H5e={"national-dashboard":"","model-governance":"/  ","quality-monitoring":"& ","compliance-audit":"   "},G5e=["SIGNAL_QUALITY","POLICY_IMPACT","BOTTLENECK_RISK","DATA_READINESS","GOVERNANCE_SAFETY"],NW={SIGNAL_QUALITY:{id:"SIGNAL_QUALITY",category:"",scope:"",definition:{what:"             .",why:"      ,      ."},calculation:{numeratorLabel:"   (validSignals)",denominatorLabel:"    (totalSignals)",includeRules:["Stage0    +      ","         ","       "],excludeRules:["  ,  ,    ","/   ","       "]},interpretation:{high:"   , Stage0/Stage1   .",low:"             ."},linkedModelStages:["Reach","Stage0","Stage1"],usageScreens:[{page:"national-dashboard",label:"",reason:" KPI    "},{page:"quality-monitoring",label:"& ",reason:"  Driver "},{page:"compliance-audit",label:"   ",reason:" /   "}],linkedTabs:[{page:"model-governance",label:"",reason:" /    "},{page:"quality-monitoring",label:"",reason:"  "},{page:"compliance-audit",label:"",reason:"      "}],changeHistory:[{version:"v2.4",changedAt:"2026-02-03",changedBy:" ",definitionChange:"        ",formulaChange:"          ",impactedScreens:["national-dashboard","quality-monitoring","compliance-audit"]},{version:"v2.3",changedAt:"2026-01-20",changedBy:" ",definitionChange:"       1  ",formulaChange:"   citizenId+eventDate  ",impactedScreens:["national-dashboard","quality-monitoring"]},{version:"v2.1",changedAt:"2025-11-18",changedBy:" TF",definitionChange:"     ",formulaChange:"    ",impactedScreens:["national-dashboard","compliance-audit"]}],whyChecklist:["  (window)  ","(validSignals) (totalSignals)    ","/     ","         "]},POLICY_IMPACT:{id:"POLICY_IMPACT",category:"",scope:"",definition:{what:"     KPI   (0~100) .",why:"    , /     ."},calculation:{numeratorLabel:"    (impactScore)",denominatorLabel:"   (maxScore=100)",includeRules:[" (deployed)  (rollback)   ","SLA,  , ,    ","     KPI  "],excludeRules:[" (reviewing)  (pending)  "," /     ","      "]},interpretation:{high:"      ,     .",low:"      ."},linkedModelStages:["Stage1","L1","L2","Stage2"],usageScreens:[{page:"national-dashboard",label:"",reason:"  KPI / "},{page:"model-governance",label:"/  ",reason:"     "},{page:"compliance-audit",label:"   ",reason:"   "}],linkedTabs:[{page:"model-governance",label:"",reason:"   "},{page:"quality-monitoring",label:"",reason:"   /   "},{page:"compliance-audit",label:"",reason:"       "}],changeHistory:[{version:"v3.0",changedAt:"2026-01-24",changedBy:"",definitionChange:"       ",formulaChange:"     (+0.2) ",impactedScreens:["national-dashboard","model-governance","compliance-audit"]},{version:"v2.6",changedAt:"2026-01-10",changedBy:" ",definitionChange:"  7  (window)   ",formulaChange:"      ",impactedScreens:["model-governance","compliance-audit"]},{version:"v2.2",changedAt:"2025-10-28",changedBy:"",definitionChange:"   ( )  ",formulaChange:"  maxScore 120100 ",impactedScreens:["national-dashboard"]}],whyChecklist:["   /   ","  KPI    ","      ","         "]},BOTTLENECK_RISK:{id:"BOTTLENECK_RISK",category:"",scope:"",definition:{what:"SLA , L2 ,        0~100 .",why:"     /     ."},calculation:{numeratorLabel:"   (weightedRisk)",denominatorLabel:"   (maxRisk=100)",includeRules:["SLA , L2 backlog,       ","       ","     "],excludeRules:["/    ","        ","   1 "]},interpretation:{high:"     (/ )  .",low:"        ."},linkedModelStages:["L1","L2","Stage2","Stage3"],usageScreens:[{page:"national-dashboard",label:"",reason:" Top5    "},{page:"quality-monitoring",label:"& ",reason:"  Driver  "},{page:"model-governance",label:"/  ",reason:"    "}],linkedTabs:[{page:"model-governance",label:"",reason:"L2 /   "},{page:"quality-monitoring",label:"",reason:"  Driver   "},{page:"compliance-audit",label:"",reason:"    "}],changeHistory:[{version:"v2.8",changedAt:"2026-01-22",changedBy:"",definitionChange:"      ",formulaChange:" SLA 0.450.40, L2Backlog 0.300.35 ",impactedScreens:["national-dashboard","quality-monitoring","model-governance"]},{version:"v2.4",changedAt:"2025-12-15",changedBy:" ",definitionChange:"    ",formulaChange:"      ",impactedScreens:["national-dashboard","quality-monitoring"]},{version:"v2.0",changedAt:"2025-09-30",changedBy:"  TF",definitionChange:"  KPI    ",formulaChange:"3    ",impactedScreens:["national-dashboard"]}],whyChecklist:["SLA /L2 /  3  ","       ","     ","   L2   "]},DATA_READINESS:{id:"DATA_READINESS",category:"",scope:"",definition:{what:"        .",why:"      ,      ."},calculation:{numeratorLabel:"    (readyCases)",denominatorLabel:"     (totalCases)",includeRules:[" ( )   ","      ","   /  "],excludeRules:["/  ","/   ","        "]},interpretation:{high:"          .",low:"       ."},linkedModelStages:["Stage0","Consent","L0","L1","L2"],usageScreens:[{page:"national-dashboard",label:"",reason:"  KPI / "},{page:"quality-monitoring",label:"& ",reason:"/   "},{page:"compliance-audit",label:"   ",reason:"    "}],linkedTabs:[{page:"model-governance",label:"",reason:" /    "},{page:"quality-monitoring",label:"",reason:" /  "},{page:"compliance-audit",label:"",reason:"      "}],changeHistory:[{version:"v2.5",changedAt:"2026-01-18",changedBy:"  ",definitionChange:"        ",formulaChange:"  linkagePending   ",impactedScreens:["national-dashboard","quality-monitoring","compliance-audit"]},{version:"v2.2",changedAt:"2025-12-03",changedBy:" ",definitionChange:"     ",formulaChange:"    ",impactedScreens:["national-dashboard","quality-monitoring"]},{version:"v1.9",changedAt:"2025-08-21",changedBy:"",definitionChange:"/     ",formulaChange:" /  ",impactedScreens:["national-dashboard"]}],whyChecklist:["  (readyCases)  (totalCases)   ","        ","//     ","       "]},GOVERNANCE_SAFETY:{id:"GOVERNANCE_SAFETY",category:"",scope:"",definition:{what:"   ()     .",why:"    ,       ."},calculation:{numeratorLabel:"    (auditReady)",denominatorLabel:"    (totalAuditable)",includeRules:[", , ,      "," / /   ","      "],excludeRules:[" heartbeat     ","     ","       "]},interpretation:{high:"      ,    .",low:"  /     ."},linkedModelStages:["Stage2","Stage3","PolicyChange"],usageScreens:[{page:"national-dashboard",label:"",reason:"  KPI  "},{page:"compliance-audit",label:"   ",reason:"//  "},{page:"model-governance",label:"/  ",reason:"/   "}],linkedTabs:[{page:"model-governance",label:"",reason:"    "},{page:"quality-monitoring",label:"",reason:" /   "},{page:"compliance-audit",label:"",reason:"    "}],changeHistory:[{version:"v3.1",changedAt:"2026-01-26",changedBy:" ",definitionChange:"     ",formulaChange:"  missingExplanation=0  ",impactedScreens:["national-dashboard","compliance-audit","model-governance"]},{version:"v2.9",changedAt:"2026-01-09",changedBy:"",definitionChange:"     ",formulaChange:"  missingResponsible>0  ",impactedScreens:["compliance-audit","national-dashboard"]},{version:"v2.4",changedAt:"2025-10-10",changedBy:"",definitionChange:"    30  ",formulaChange:"  30   ",impactedScreens:["national-dashboard","compliance-audit"]}],whyChecklist:["  (auditReady)   (totalAuditable) "," (missingExplanation)  (missingResponsible)  ","/    ","       "]}};function K5e(e){return NW[e]}function z5e(){return G5e.map(e=>NW[e])}const ZF={LAST_24H:" 24",LAST_7D:" 7",LAST_30D:" 30",LAST_90D:" 90"},mC={:"bg-blue-50 text-blue-700 border-blue-200",:"bg-violet-50 text-violet-700 border-violet-200",:"bg-red-50 text-red-700 border-red-200",:"bg-emerald-50 text-emerald-700 border-emerald-200",:"bg-amber-50 text-amber-700 border-amber-200"},q5e={SIGNAL_QUALITY:{kpi:"SIGNAL_QUALITY",auditId:"ua_002",driver:"data_quality"},POLICY_IMPACT:{kpi:"POLICY_IMPACT",changeId:"chg_20260124",auditId:"ua_004",driver:"model_fitness"},BOTTLENECK_RISK:{kpi:"BOTTLENECK_RISK",changeId:"chg_20260120",auditId:"ua_001",driver:"ops_bottleneck"},DATA_READINESS:{kpi:"DATA_READINESS",auditId:"ua_003",driver:"data_quality"},GOVERNANCE_SAFETY:{kpi:"GOVERNANCE_SAFETY",changeId:"chg_20260110",auditId:"ua_001",driver:"contact_strategy"}},W5e=["national-dashboard","model-governance","quality-monitoring","compliance-audit"];function SW(e,t){const r=q5e[e],a={level:"nation",region:"KR",period:"WEEK",kpi:r.kpi};return t==="model-governance"&&r.changeId&&(a.changeId=r.changeId),t==="quality-monitoring"&&r.driver&&(a.driver=r.driver),t==="compliance-audit"&&r.auditId&&(a.auditId=r.auditId),a}function JF({screens:e,onNavigate:t,kpiId:r}){return n.jsx("div",{className:"flex flex-wrap gap-1.5",children:e.map(a=>n.jsx("button",{type:"button",onClick:()=>t?.(a,SW(r,a)),className:"text-[11px] px-2 py-1 rounded border border-gray-200 bg-white hover:bg-gray-50",children:H5e[a]},a))})}function V5e({onNavigate:e}){const t=g.useMemo(()=>hW(),[]),r=g.useMemo(()=>z5e(),[]),a=g.useMemo(()=>Object.fromEntries(t.map(S=>[S.id,S])),[t]),[s,i]=g.useState(""),[o,l]=g.useState(r[0]?.id??"SIGNAL_QUALITY"),[d,u]=g.useState("LAST_7D"),[p,m]=g.useState([]),[h,x]=g.useState(!1);g.useEffect(()=>{let S=!1;return x(!0),gW(d).then(_=>{S||(m(_.kpis),x(!1))}).catch(()=>{S||(m([]),x(!1))}),()=>{S=!0}},[d]);const y=g.useMemo(()=>{const S=s.trim().toLowerCase();return S?r.filter(_=>{const O=a[_.id];return[O?.name,O?.shortName,_.category,_.scope,..._.usageScreens.map(k=>k.label)].join(" ").toLowerCase().includes(S)}):r},[s,r,a]);g.useEffect(()=>{if(y.length===0)return;y.some(_=>_.id===o)||l(y[0].id)},[y,o]);const N=K5e(o),v=a[o],j=p.find(S=>S.kpiId===o),E=g.useMemo(()=>!j||j.denominator===0?null:Number((j.numerator/j.denominator*100).toFixed(1)),[j]),C=g.useMemo(()=>r.flatMap(S=>{const _=a[S.id];return S.changeHistory.map(O=>({...O,id:S.id,kpiName:_?.name??S.id,category:S.category}))}).sort((S,_)=>new Date(_.changedAt).getTime()-new Date(S.changedAt).getTime()),[r,a]),A=(S,_)=>{e?.(S,SW(_,S))};return n.jsxs("div",{className:"space-y-4 p-1",children:[n.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"KPI  (  )"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:" KPI     ."})]}),n.jsx("div",{className:"flex items-center gap-1.5 rounded-lg border border-gray-200 bg-white p-1",children:["LAST_24H","LAST_7D","LAST_30D","LAST_90D"].map(S=>n.jsx("button",{type:"button",onClick:()=>u(S),className:`px-2.5 py-1.5 text-[11px] rounded-md font-medium transition ${d===S?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:ZF[S]},S))})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-4 2xl:grid-cols-12",children:[n.jsxs(Cr,{className:"2xl:col-span-5",children:[n.jsxs(Nn,{className:"pb-3",children:[n.jsx(Sn,{className:"text-base",children:"KPI  "}),n.jsxs("div",{className:"relative",children:[n.jsx(pg,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx(Ir,{value:s,onChange:S=>i(S.target.value),placeholder:"KPI// ",className:"pl-10"})]})]}),n.jsx(_r,{className:"pt-0",children:n.jsx("div",{className:"overflow-auto rounded-md border border-gray-200",children:n.jsxs("table",{className:"w-full min-w-[760px]",children:[n.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-700",children:"KPI"}),n.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-700",children:"KPI "}),n.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-700",children:" "}),n.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-700",children:"  ()"})]})}),n.jsxs("tbody",{children:[y.map(S=>{const _=a[S.id],O=o===S.id;return n.jsxs("tr",{className:`border-b border-gray-100 cursor-pointer ${O?"bg-blue-50/50":"hover:bg-gray-50"}`,onClick:()=>l(S.id),children:[n.jsxs("td",{className:"px-3 py-2 align-top",children:[n.jsx("div",{className:"text-sm font-semibold text-gray-900",children:_?.name}),n.jsx("div",{className:"text-[11px] text-gray-500",children:S.id})]}),n.jsx("td",{className:"px-3 py-2 align-top",children:n.jsx("span",{className:`inline-flex items-center rounded-md border px-2 py-1 text-[11px] font-medium ${mC[S.category]}`,children:S.category})}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-700 align-top",children:S.scope}),n.jsx("td",{className:"px-3 py-2 align-top",children:n.jsx("div",{className:"flex flex-wrap gap-1.5",children:S.usageScreens.map(D=>n.jsxs("button",{type:"button",onClick:k=>{k.stopPropagation(),W5e.includes(D.page)&&A(D.page,S.id)},className:"inline-flex items-center gap-1 rounded-md border border-gray-200 bg-white px-2 py-1 text-[11px] text-gray-700 hover:bg-gray-50",title:D.reason,children:[D.label,n.jsx(Na,{className:"h-3 w-3"})]},`${S.id}-${D.page}`))})})]},S.id)}),y.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:4,className:"px-3 py-10 text-center text-sm text-gray-500",children:"   KPI ."})})]})]})})})]}),n.jsxs(Cr,{className:"2xl:col-span-7",children:[n.jsx(Nn,{children:n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[n.jsxs("div",{children:[n.jsx(Sn,{className:"text-base",children:v?.name}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'KPI   ("  ")    '})]}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(Qr,{variant:"outline",className:mC[N.category],children:N.category}),n.jsx(Qr,{variant:"outline",children:N.scope}),n.jsx(Qr,{variant:"outline",children:o})]})]})}),n.jsxs(_r,{className:"space-y-4",children:[n.jsxs("section",{className:"rounded-lg border border-gray-200 p-3",children:[n.jsx("div",{className:"text-sm font-semibold text-gray-900 mb-2",children:""}),n.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[n.jsxs("div",{className:"rounded-md bg-gray-50 p-3 border border-gray-200",children:[n.jsx("div",{className:"text-[11px] font-medium text-gray-500 mb-1",children:" "}),n.jsx("div",{className:"text-sm text-gray-800 leading-relaxed",children:N.definition.what})]}),n.jsxs("div",{className:"rounded-md bg-gray-50 p-3 border border-gray-200",children:[n.jsx("div",{className:"text-[11px] font-medium text-gray-500 mb-1",children:" "}),n.jsx("div",{className:"text-sm text-gray-800 leading-relaxed",children:N.definition.why})]})]})]}),n.jsxs("section",{className:"rounded-lg border border-gray-200 p-3",children:[n.jsxs("div",{className:"flex items-center gap-1.5 text-sm font-semibold text-gray-900 mb-2",children:[n.jsx(AQ,{className:"h-4 w-4"}),""]}),n.jsx("div",{className:"rounded-md border border-gray-200 bg-gray-50 px-3 py-2 text-[13px] font-mono text-gray-900",children:v?.formula}),n.jsxs("div",{className:"grid grid-cols-1 gap-3 mt-3 md:grid-cols-2",children:[n.jsxs("div",{className:"rounded-md border border-blue-200 bg-blue-50 p-3",children:[n.jsx("div",{className:"text-[11px] font-semibold text-blue-700 mb-1",children:""}),n.jsx("div",{className:"text-sm text-blue-900",children:N.calculation.numeratorLabel}),n.jsxs("div",{className:"text-[11px] text-blue-700 mt-1",children:[": ",v?.numeratorField]})]}),n.jsxs("div",{className:"rounded-md border border-indigo-200 bg-indigo-50 p-3",children:[n.jsx("div",{className:"text-[11px] font-semibold text-indigo-700 mb-1",children:""}),n.jsx("div",{className:"text-sm text-indigo-900",children:N.calculation.denominatorLabel}),n.jsxs("div",{className:"text-[11px] text-indigo-700 mt-1",children:[": ",v?.denominatorField]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-3 mt-3 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-[11px] font-semibold text-gray-700 mb-1.5",children:" "}),n.jsx("ul",{className:"space-y-1",children:N.calculation.includeRules.map((S,_)=>n.jsx("li",{className:"text-xs text-gray-700 leading-relaxed list-disc list-inside",children:S},`${o}-in-${_}`))})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-[11px] font-semibold text-gray-700 mb-1.5",children:" "}),n.jsx("ul",{className:"space-y-1",children:N.calculation.excludeRules.map((S,_)=>n.jsx("li",{className:"text-xs text-gray-700 leading-relaxed list-disc list-inside",children:S},`${o}-out-${_}`))})]})]})]}),n.jsxs("section",{className:"rounded-lg border border-gray-200 p-3",children:[n.jsx("div",{className:"text-sm font-semibold text-gray-900 mb-2",children:" "}),n.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[n.jsxs("div",{className:"rounded-md border border-green-200 bg-green-50 p-3",children:[n.jsx("div",{className:"text-[11px] font-semibold text-green-700 mb-1",children:"   "}),n.jsx("div",{className:"text-sm text-green-900 leading-relaxed",children:N.interpretation.high})]}),n.jsxs("div",{className:"rounded-md border border-orange-200 bg-orange-50 p-3",children:[n.jsx("div",{className:"text-[11px] font-semibold text-orange-700 mb-1",children:"   "}),n.jsx("div",{className:"text-sm text-orange-900 leading-relaxed",children:N.interpretation.low})]})]})]}),n.jsxs("section",{className:"rounded-lg border border-gray-200 p-3",children:[n.jsxs("div",{className:"flex items-center gap-1.5 text-sm font-semibold text-gray-900 mb-2",children:[n.jsx(Im,{className:"h-4 w-4"})," "]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("div",{className:"text-[11px] font-semibold text-gray-600 mb-1.5",children:"   Stage"}),n.jsx("div",{className:"flex flex-wrap gap-1.5",children:N.linkedModelStages.map(S=>n.jsx("span",{className:"text-[11px] px-2 py-1 rounded border border-gray-200 bg-gray-50 text-gray-700",children:S},`${o}-${S}`))})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-[11px] font-semibold text-gray-600 mb-1.5",children:"   (//)"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:N.linkedTabs.map(S=>n.jsxs(Nt,{variant:"outline",size:"sm",onClick:()=>A(S.page,o),className:"h-7 text-[11px]",children:[S.label,n.jsx(Na,{className:"h-3 w-3 ml-1"})]},`${o}-tab-${S.page}`))}),n.jsx("div",{className:"space-y-1 mt-2",children:N.linkedTabs.map(S=>n.jsxs("div",{className:"text-[11px] text-gray-600",children:[n.jsx("span",{className:"font-medium",children:S.label}),": ",S.reason]},`${o}-tab-reason-${S.page}`))})]})]}),n.jsxs("section",{className:"rounded-lg border border-gray-200 p-3",children:[n.jsxs("div",{className:"flex items-center gap-1.5 text-sm font-semibold text-gray-900 mb-2",children:[n.jsx(nQ,{className:"h-4 w-4"}),"  KPI   ( )"]}),n.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:[" : ",ZF[d]]}),h&&n.jsx("div",{className:"text-sm text-gray-500",children:"    ..."}),!h&&!j&&n.jsx("div",{className:"text-sm text-gray-500",children:"    ."}),!h&&j&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-3",children:[n.jsxs("div",{className:"rounded-md border border-gray-200 bg-gray-50 p-2.5",children:[n.jsx("div",{className:"text-[11px] text-gray-500 mb-0.5",children:""}),n.jsx("div",{className:"text-sm font-bold text-gray-900",children:j.numerator.toLocaleString()})]}),n.jsxs("div",{className:"rounded-md border border-gray-200 bg-gray-50 p-2.5",children:[n.jsx("div",{className:"text-[11px] text-gray-500 mb-0.5",children:""}),n.jsx("div",{className:"text-sm font-bold text-gray-900",children:j.denominator.toLocaleString()})]}),n.jsxs("div",{className:"rounded-md border border-gray-200 bg-gray-50 p-2.5",children:[n.jsx("div",{className:"text-[11px] text-gray-500 mb-0.5",children:" KPI "}),n.jsxs("div",{className:"text-sm font-bold text-gray-900",children:[j.value,v?.unit]})]})]}),E!==null&&n.jsxs("div",{className:"rounded-md border border-blue-200 bg-blue-50 px-3 py-2 text-sm text-blue-900",children:[" : ",j.numerator.toLocaleString()," / ",j.denominator.toLocaleString(),"  100 = ",E,"%",n.jsxs("span",{className:"ml-2 text-[11px] text-blue-700",children:["( ",j.value,v?.unit,", 7d ",j.delta7d,"pp)"]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-[11px] font-semibold text-gray-700 mb-1.5",children:" "}),n.jsx("ul",{className:"space-y-1",children:N.whyChecklist.map((S,_)=>n.jsx("li",{className:"text-xs text-gray-700 leading-relaxed list-disc list-inside",children:S},`${o}-why-${_}`))})]})]})]}),n.jsxs("section",{className:"rounded-lg border border-gray-200 p-3",children:[n.jsxs("div",{className:"flex items-center gap-1.5 text-sm font-semibold text-gray-900 mb-2",children:[n.jsx(PX,{className:"h-4 w-4"}),"KPI  "]}),n.jsx("div",{className:"overflow-auto rounded-md border border-gray-200",children:n.jsxs("table",{className:"w-full min-w-[760px]",children:[n.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-700",children:""}),n.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-700",children:""}),n.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-700",children:" "}),n.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-700",children:" "}),n.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-700",children:"  "})]})}),n.jsx("tbody",{children:N.changeHistory.map(S=>n.jsxs("tr",{className:"border-b border-gray-100",children:[n.jsx("td",{className:"px-3 py-2 text-xs font-semibold text-gray-900",children:S.version}),n.jsxs("td",{className:"px-3 py-2 text-xs text-gray-700",children:[n.jsx("div",{children:S.changedAt}),n.jsx("div",{className:"text-[11px] text-gray-500",children:S.changedBy})]}),n.jsx("td",{className:"px-3 py-2 text-xs text-gray-700 leading-relaxed",children:S.definitionChange}),n.jsx("td",{className:"px-3 py-2 text-xs text-gray-700 leading-relaxed",children:S.formulaChange}),n.jsx("td",{className:"px-3 py-2",children:n.jsx(JF,{screens:S.impactedScreens,onNavigate:e,kpiId:o})})]},`${o}-${S.version}-${S.changedAt}`))})]})})]})]})]})]}),n.jsxs(Cr,{children:[n.jsx(Nn,{children:n.jsx(Sn,{className:"text-base",children:" KPI   ()"})}),n.jsx(_r,{className:"pt-0",children:n.jsx("div",{className:"overflow-auto rounded-md border border-gray-200",children:n.jsxs("table",{className:"w-full min-w-[920px]",children:[n.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-700",children:""}),n.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-700",children:"KPI"}),n.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-700",children:""}),n.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-700",children:" "}),n.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-700",children:" "}),n.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-700",children:" "})]})}),n.jsx("tbody",{children:C.map(S=>n.jsxs("tr",{className:"border-b border-gray-100",children:[n.jsx("td",{className:"px-3 py-2 text-xs text-gray-700",children:S.changedAt}),n.jsx("td",{className:"px-3 py-2",children:n.jsx("button",{type:"button",onClick:()=>l(S.id),className:"text-xs font-semibold text-blue-700 hover:underline",children:S.kpiName})}),n.jsx("td",{className:"px-3 py-2",children:n.jsx("span",{className:`inline-flex items-center rounded-md border px-2 py-1 text-[11px] font-medium ${mC[S.category]}`,children:S.category})}),n.jsx("td",{className:"px-3 py-2 text-xs text-gray-700 leading-relaxed",children:S.definitionChange}),n.jsx("td",{className:"px-3 py-2 text-xs text-gray-700 leading-relaxed",children:S.formulaChange}),n.jsx("td",{className:"px-3 py-2",children:n.jsx(JF,{screens:S.impactedScreens,onNavigate:e,kpiId:S.id})})]},`${S.id}-${S.version}-${S.changedAt}`))})]})})})]})]})}function Y5e(e){const t=X5e(e),r=g.forwardRef((a,s)=>{const{children:i,...o}=a,l=g.Children.toArray(i),d=l.find(Z5e);if(d){const u=d.props.children,p=l.map(m=>m===d?g.Children.count(u)>1?g.Children.only(null):g.isValidElement(u)?u.props.children:null:m);return n.jsx(t,{...o,ref:s,children:g.isValidElement(u)?g.cloneElement(u,void 0,p):null})}return n.jsx(t,{...o,ref:s,children:i})});return r.displayName=`${e}.Slot`,r}function X5e(e){const t=g.forwardRef((r,a)=>{const{children:s,...i}=r;if(g.isValidElement(s)){const o=e3e(s),l=J5e(i,s.props);return s.type!==g.Fragment&&(l.ref=a?df(a,o):o),g.cloneElement(s,l)}return g.Children.count(s)>1?g.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Q5e=Symbol("radix.slottable");function Z5e(e){return g.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Q5e}function J5e(e,t){const r={...t};for(const a in t){const s=e[a],i=t[a];/^on[A-Z]/.test(a)?s&&i?r[a]=(...l)=>{const d=i(...l);return s(...l),d}:s&&(r[a]=s):a==="style"?r[a]={...s,...i}:a==="className"&&(r[a]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function e3e(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var nN="Popover",[jW]=ao(nN,[zp]),Pg=zp(),[t3e,eu]=jW(nN),wW=e=>{const{__scopePopover:t,children:r,open:a,defaultOpen:s,onOpenChange:i,modal:o=!1}=e,l=Pg(t),d=g.useRef(null),[u,p]=g.useState(!1),[m,h]=Cc({prop:a,defaultProp:s??!1,onChange:i,caller:nN});return n.jsx(E5,{...l,children:n.jsx(t3e,{scope:t,contentId:wl(),triggerRef:d,open:m,onOpenChange:h,onOpenToggle:g.useCallback(()=>h(x=>!x),[h]),hasCustomAnchor:u,onCustomAnchorAdd:g.useCallback(()=>p(!0),[]),onCustomAnchorRemove:g.useCallback(()=>p(!1),[]),modal:o,children:r})})};wW.displayName=nN;var EW="PopoverAnchor",r3e=g.forwardRef((e,t)=>{const{__scopePopover:r,...a}=e,s=eu(EW,r),i=Pg(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=s;return g.useEffect(()=>(o(),()=>l()),[o,l]),n.jsx(q1,{...i,...a,ref:t})});r3e.displayName=EW;var AW="PopoverTrigger",CW=g.forwardRef((e,t)=>{const{__scopePopover:r,...a}=e,s=eu(AW,r),i=Pg(r),o=wr(t,s.triggerRef),l=n.jsx(sr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":RW(s.open),...a,ref:o,onClick:Bt(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:n.jsx(q1,{asChild:!0,...i,children:l})});CW.displayName=AW;var q5="PopoverPortal",[n3e,a3e]=jW(q5,{forceMount:void 0}),_W=e=>{const{__scopePopover:t,forceMount:r,children:a,container:s}=e,i=eu(q5,t);return n.jsx(n3e,{scope:t,forceMount:r,children:n.jsx(Is,{present:r||i.open,children:n.jsx(xg,{asChild:!0,container:s,children:a})})})};_W.displayName=q5;var Np="PopoverContent",TW=g.forwardRef((e,t)=>{const r=a3e(Np,e.__scopePopover),{forceMount:a=r.forceMount,...s}=e,i=eu(Np,e.__scopePopover);return n.jsx(Is,{present:a||i.open,children:i.modal?n.jsx(i3e,{...s,ref:t}):n.jsx(o3e,{...s,ref:t})})});TW.displayName=Np;var s3e=Y5e("PopoverContent.RemoveScroll"),i3e=g.forwardRef((e,t)=>{const r=eu(Np,e.__scopePopover),a=g.useRef(null),s=wr(t,a),i=g.useRef(!1);return g.useEffect(()=>{const o=a.current;if(o)return kO(o)},[]),n.jsx(zv,{as:s3e,allowPinchZoom:!0,children:n.jsx(OW,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Bt(e.onCloseAutoFocus,o=>{o.preventDefault(),i.current||r.triggerRef.current?.focus()}),onPointerDownOutside:Bt(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,d=l.button===0&&l.ctrlKey===!0,u=l.button===2||d;i.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:Bt(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),o3e=g.forwardRef((e,t)=>{const r=eu(Np,e.__scopePopover),a=g.useRef(!1),s=g.useRef(!1);return n.jsx(OW,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{e.onCloseAutoFocus?.(i),i.defaultPrevented||(a.current||r.triggerRef.current?.focus(),i.preventDefault()),a.current=!1,s.current=!1},onInteractOutside:i=>{e.onInteractOutside?.(i),i.defaultPrevented||(a.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;r.triggerRef.current?.contains(o)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),OW=g.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:a,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:d,onFocusOutside:u,onInteractOutside:p,...m}=e,h=eu(Np,r),x=Pg(r);return OO(),n.jsx(Gv,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:s,onUnmountAutoFocus:i,children:n.jsx(gg,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:p,onEscapeKeyDown:l,onPointerDownOutside:d,onFocusOutside:u,onDismiss:()=>h.onOpenChange(!1),children:n.jsx(A5,{"data-state":RW(h.open),role:"dialog",id:h.contentId,...x,...m,ref:t,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),kW="PopoverClose",l3e=g.forwardRef((e,t)=>{const{__scopePopover:r,...a}=e,s=eu(kW,r);return n.jsx(sr.button,{type:"button",...a,ref:t,onClick:Bt(e.onClick,()=>s.onOpenChange(!1))})});l3e.displayName=kW;var c3e="PopoverArrow",d3e=g.forwardRef((e,t)=>{const{__scopePopover:r,...a}=e,s=Pg(r);return n.jsx(C5,{...s,...a,ref:t})});d3e.displayName=c3e;function RW(e){return e?"open":"closed"}var PW=wW,DW=CW,IW=_W,MW=TW;const Da="2026-02-12",yd=`: ${Da}  D-1`,c0={baseDate:Da,receiveDeadline:"08:30",modelWindow:"08:35-08:48",dispatchTime:"08:52",status:"partial",impactedStages:["S2","S3"],notes:" (7)   Stage2/3   .",receiveRate:76.4,missingInstitutionCount:7,expectedRetryAt:"2026-02-13 11:30"},jd={baseDate:Da,receivedN:157204,adPct:23.4,mciPct:62.1,normalPct:14.5},em={baseDate:Da,stage2ReceivedN:157204,mciEnrollPct:78.6,adEnrollPct:64.2},mm=[{stage:"S1",destination:"",sentCount:38124,failedCount:18,retryCount:18,lastSentAt:"2026-02-13 08:53",slaStatus:"ok"},{stage:"S2",destination:"",sentCount:11832,failedCount:64,retryCount:41,lastSentAt:"2026-02-13 08:54",slaStatus:"delayed"},{stage:"S3",destination:"",sentCount:7405,failedCount:39,retryCount:27,lastSentAt:"2026-02-13 08:56",slaStatus:"delayed"}],u3e=[{key:"total-subjects",label:" ",value:1247653,unit:"",delta:1.2,baseDate:Da,scopeLine:yd,status:"neutral",help:{title:" ",body:`(D-1): ${Da}
     ( )`}},{key:"s1-applied-rate",label:"1  ",value:87.3,unit:"%",delta:2.1,baseDate:Da,scopeLine:yd,status:"good",help:{title:"1  ",body:`(D-1): ${Da}
/  1    `},jumpTo:"stage1",modeOverride:{quality:{label:"1  ",value:4.2,unit:"%",status:"warn"},audit:{label:"1   Top1",value:56.3,unit:"%",status:"warn"}}},{key:"s1-high-risk-rate",label:"1  ",value:12.3,unit:"%",delta:-.8,baseDate:Da,scopeLine:yd,status:"warn",help:{title:"1  ",body:`(D-1): ${Da}
    ''   (  )`},jumpTo:"stage1"},{key:"s2-receive-rate",label:"2  ",value:76.4,unit:"%",delta:-1.7,baseDate:Da,partialStages:["S2","S3"],scopeLine:yd,status:"warn",help:{title:"2  ",body:`(D-1): ${Da}
 2     
 80%    `},jumpTo:"stage2",modeOverride:{quality:{label:"2 ",value:6.8,unit:"%",status:"warn"},audit:{label:"2  ",value:18.3,unit:"",status:"risk"}}},{key:"s2-distribution",label:"2  (MCI/AD)",value:jd.adPct,valuePrefix:"AD",secondaryValueLine:`MCI ${jd.mciPct}%`,unit:"%",delta:1.1,baseDate:Da,partialStages:["S2"],scopeLine:yd,status:"risk",help:{title:"2  (MCI/AD)",body:`(D-1): ${jd.baseDate}
: 2     ${jd.receivedN.toLocaleString()}
AD ${jd.adPct}%  MCI ${jd.mciPct}%   ${jd.normalPct}%
  `},jumpTo:"stage2"},{key:"s3-enrollment-rate",label:"MCI/AD ",value:em.mciEnrollPct,valuePrefix:"MCI",secondaryValueLine:`AD ${em.adEnrollPct}%`,unit:"%",delta:5.2,baseDate:Da,partialStages:["S3"],scopeLine:yd,status:"good",help:{title:"MCI/AD ",body:`(D-1): ${em.baseDate}
: Stage2   ${em.stage2ReceivedN.toLocaleString()}
: MCI  ${em.mciEnrollPct}% / AD    ${em.adEnrollPct}%
: Stage2       (  )
:     `},jumpTo:"stage3",modeOverride:{quality:{label:" ",value:8.1,unit:"%",status:"warn"},audit:{label:"SLA ",value:12,unit:"",status:"risk"}}},{key:"s3-adherence-rate",label:"3  ",value:71.4,unit:"%",delta:-2.3,baseDate:Da,partialStages:["S3"],scopeLine:yd,status:"warn",help:{title:" ",body:`(D-1): ${Da}
 //    `},jumpTo:"stage3"},{key:"sla-violation",label:"SLA /",value:12,unit:"",delta:-3,baseDate:Da,partialStages:["S2","S3"],scopeLine:yd,status:"risk",help:{title:"SLA ",body:`(D-1): ${Da}
      `}}],pC=[{stageId:"stage1",examLabel:"1 ",title:"1 ",purposeLine:"   '  '     ",inputs:[{name:" ",desc:"  "},{name:"/",desc:"   "},{name:"",desc:", ,   "},{name:"  ",desc:"   "}],processing:[{name:"Stage1 Risk Scoring",desc:"  ",version:"v3.2.1"},{name:"Eligibility Rules",desc:"   ",version:"v1.4"}],outputs:[{name:"risk_score",desc:"   (0100)"},{name:"risk_band",desc:" /  / "},{name:"reason_codes",desc:" 35  "},{name:"data_quality_flags",desc:"  "}],transition:[{to:"stage2",ruleLine:"(risk_band=)  2  "},{to:"end",ruleLine:"/   (6)"}],metrics:{applied:1089353,appliedRate:87.3,conversionRate:14.4,avgLatencyDays:3.2,topIssues:[{code:"NA-01",label:" ",count:89234},{code:"NA-02",label:" ",count:45678},{code:"NA-03",label:"",count:23388}]}},{stageId:"stage2",examLabel:"2 ",title:"2  ",purposeLine:"/   ' ' ,     ",inputs:[{name:"1  ",desc:"Stage1 risk_score, risk_band, reason_codes"},{name:"2  ",desc:"PET/MRI/   "}],processing:[{name:"  ",desc:"   ",version:"v2.1"},{name:"Consistency Check",desc:"  vs    ()",version:"v1.2"}],outputs:[{name:"diagnosis_class",desc:"AD / MCI /  (  )"},{name:"model_support_signal",desc:"   (//)"},{name:"next_step_policy",desc:"3  /  /  "}],transition:[{to:"stage3",ruleLine:"MCI   3  "},{to:"end",ruleLine:"AD     /    "}],metrics:{applied:157204,appliedRate:91.1,conversionRate:38.4,avgLatencyDays:18.3,topIssues:[{code:"DL-01",label:"  (30+)",count:4128},{code:"DL-02",label:"( vs )",count:2347}]}},{stageId:"stage3",examLabel:"3 ",title:"3  ",purposeLine:"MCI/AD     ",inputs:[{name:"2  ",desc:"diagnosis_class=MCI/AD,  "},{name:"3  ",desc:"//  "}],processing:[{name:"MCI Follow-up Prioritizer",desc:"   ",version:"v2.0"},{name:"Transition Policy",desc:"//  ",version:"v1.3"}],outputs:[{name:"followup_priority",desc:"High / Med / Low"},{name:"recommended_actions",desc:"//  "},{name:"adherence_metrics",desc:" "},{name:"drop_off_reason",desc:"  "}],transition:[{to:"end",ruleLine:"  /  /    / AD   "}],metrics:{applied:60234,appliedRate:78.6,conversionRate:71.4,avgLatencyDays:14.7,topIssues:[{code:"FU-01",label:"  ",count:3891},{code:"FU-02",label:"()",count:1245},{code:"FU-03",label:" ",count:987}]}}],f3e=[{id:"in-health",group:"input",label:"",shortDesc:" ",stageTag:"stage1"},{id:"in-survey",group:"input",label:"/",shortDesc:"   ",stageTag:"stage1"},{id:"in-admin",group:"input",label:"",shortDesc:", , ",stageTag:"stage1"},{id:"in-history",group:"input",label:"",shortDesc:"   ",stageTag:"stage1"},{id:"in-cogtest",group:"input",label:" ",shortDesc:"MMSE/MoCA/CDR ",stageTag:"stage2"},{id:"in-biomarker",group:"input",label:"/",shortDesc:"A42, p-tau, NfL ",stageTag:"stage2"},{id:"in-survey2",group:"input",label:"2 ",shortDesc:"  +  ",stageTag:"stage2"},{id:"in-medhist",group:"input",label:"/",shortDesc:", / ",stageTag:"stage2"},{id:"in-mri",group:"input",label:"MRI ",shortDesc:" ,   ",stageTag:"stage3"},{id:"in-pet",group:"input",label:"PET ",shortDesc:"A/Tau SUVR, Centiloid",stageTag:"stage3"},{id:"in-imgderiv",group:"input",label:" ",shortDesc:"ROI ,  ",stageTag:"stage3"},{id:"in-followup",group:"input",label:"",shortDesc:"// ",stageTag:"stage3"},{id:"ft-builder",group:"feature",label:"S1 Feature Builder",shortDesc:"1  ",stageTag:"stage1"},{id:"ft-s2-vec",group:"feature",label:"S2 Vectorizer",shortDesc:"++ ",stageTag:"stage2"},{id:"ft-s3-enc",group:"feature",label:"S3 Encoder",shortDesc:"MRI/PET  ",stageTag:"stage3"},{id:"md-s1-risk",group:"model",label:"S1 Risk Scoring",shortDesc:"   v3.2.1",stageTag:"stage1"},{id:"md-s1-rule",group:"model",label:"Eligibility Rules",shortDesc:"    v1.4",stageTag:"stage1"},{id:"md-s2-ann",group:"model",label:"S2 ANN Classifier",shortDesc:"ANN    v1.0",stageTag:"stage2"},{id:"md-s2-consist",group:"model",label:"Consistency Check",shortDesc:"   v1.2",stageTag:"stage2"},{id:"md-s3-cnn",group:"model",label:"S3 CNN Classifier",shortDesc:"CNN    v1.0",stageTag:"stage3"},{id:"md-s3-prio",group:"model",label:"MCI Prioritizer",shortDesc:"   v2.0",stageTag:"stage3"},{id:"md-guardrail",group:"model",label:"Post-Model Guardrails",shortDesc:"  v1.0",stageTag:"common"},{id:"md-transition",group:"model",label:"Transition Policy",shortDesc:"    v1.3",stageTag:"common"},{id:"out-score",group:"output",label:"risk_score",shortDesc:"   0100",stageTag:"stage1"},{id:"out-band",group:"output",label:"risk_band",shortDesc:"//",stageTag:"stage1"},{id:"out-reason",group:"output",label:"reason_codes",shortDesc:" 35  ",stageTag:"stage1"},{id:"out-quality",group:"output",label:"data_quality_flags",shortDesc:"  ",stageTag:"stage1"},{id:"out-s2-class",group:"output",label:"s2_support_class",shortDesc:"   ()",stageTag:"stage2"},{id:"out-s2-conf",group:"output",label:"s2_support_confidence",shortDesc:"  ",stageTag:"stage2"},{id:"out-s2-reason",group:"output",label:"s2_reason_codes",shortDesc:"S2   ",stageTag:"stage2"},{id:"out-diag",group:"output",label:"diagnosis_class",shortDesc:"AD/MCI/ ( )",stageTag:"stage2",isExternal:!0},{id:"out-signal",group:"output",label:"model_support_signal",shortDesc:"// ()",stageTag:"stage2"},{id:"out-s3-class",group:"output",label:"s3_support_class",shortDesc:"   ()",stageTag:"stage3"},{id:"out-s3-conf",group:"output",label:"s3_support_confidence",shortDesc:"  ",stageTag:"stage3"},{id:"out-s3-reason",group:"output",label:"s3_reason_codes",shortDesc:"S3   ",stageTag:"stage3"},{id:"out-priority",group:"output",label:"followup_priority",shortDesc:"High/Med/Low",stageTag:"stage3"},{id:"out-actions",group:"output",label:"recommended_actions",shortDesc:"  ",stageTag:"stage3"},{id:"out-guardrail",group:"output",label:"guardrail_flags",shortDesc:"/  ",stageTag:"common"},{id:"dispatch-s1",group:"dispatch",label:"S1 Dispatch",shortDesc:"   /   ",stageTag:"stage1"},{id:"dispatch-s2",group:"dispatch",label:"S2 Dispatch",shortDesc:"    /  ",stageTag:"stage2"},{id:"dispatch-s3",group:"dispatch",label:"S3 Dispatch",shortDesc:"  High /  ",stageTag:"stage3"},{id:"ops-case",group:"ops",label:" ",shortDesc:"  ",stageTag:"stage1"},{id:"ops-booking",group:"ops",label:" ",shortDesc:"2   ",stageTag:"stage1"},{id:"ops-s2-prio",group:"ops",label:"2  ",shortDesc:"2   ",stageTag:"stage2"},{id:"ops-s3-route",group:"ops",label:" ",shortDesc:"3   ",stageTag:"stage3"},{id:"ops-s3-resched",group:"ops",label:"/ ",shortDesc:"  ",stageTag:"stage3"},{id:"ops-resource",group:"ops",label:" ",shortDesc:"  ",stageTag:"common"},{id:"ops-tracking",group:"ops",label:"MCI ",shortDesc:"  ",stageTag:"stage3"}],m3e=[{from:"in-health",to:"ft-builder",label:" "},{from:"in-survey",to:"ft-builder",label:" "},{from:"in-admin",to:"ft-builder",label:" "},{from:"in-history",to:"ft-builder",label:" "},{from:"ft-builder",to:"md-s1-risk",label:" "},{from:"ft-builder",to:"md-s1-rule",label:" "},{from:"md-s1-risk",to:"out-score",label:"risk_score"},{from:"md-s1-risk",to:"out-band",label:"risk_band"},{from:"md-s1-risk",to:"out-reason",label:"reason_codes"},{from:"md-s1-rule",to:"out-quality",label:"quality_flags"},{from:"out-score",to:"md-guardrail",label:"S1 "},{from:"out-score",to:"dispatch-s1",label:"  "},{from:"out-band",to:"dispatch-s1",label:"  "},{from:"dispatch-s1",to:"ops-case",label:"  "},{from:"dispatch-s1",to:"ops-booking",label:"  "},{from:"in-cogtest",to:"ft-s2-vec",label:" "},{from:"in-biomarker",to:"ft-s2-vec",label:""},{from:"in-survey2",to:"ft-s2-vec",label:"2 "},{from:"in-medhist",to:"ft-s2-vec",label:""},{from:"out-band",to:"ft-s2-vec",label:"1  ",style:"dashed"},{from:"ft-s2-vec",to:"md-s2-ann",label:"S2 "},{from:"md-s2-ann",to:"out-s2-class",label:" "},{from:"md-s2-ann",to:"out-s2-conf",label:""},{from:"md-s2-ann",to:"out-s2-reason",label:" "},{from:"out-s2-class",to:"md-guardrail",label:"S2 "},{from:"out-diag",to:"md-s2-consist",label:" ",style:"dashed"},{from:"out-s2-class",to:"md-s2-consist",label:"  "},{from:"md-s2-consist",to:"out-signal",label:" "},{from:"out-diag",to:"md-transition",style:"dashed"},{from:"out-diag",to:"dispatch-s2",label:"   "},{from:"out-signal",to:"dispatch-s2",label:" "},{from:"dispatch-s2",to:"ops-s2-prio",label:" "},{from:"in-mri",to:"ft-s3-enc",label:"MRI "},{from:"in-pet",to:"ft-s3-enc",label:"PET "},{from:"in-imgderiv",to:"ft-s3-enc",label:" "},{from:"in-followup",to:"md-s3-prio",label:" "},{from:"ft-s3-enc",to:"md-s3-cnn",label:"S3 "},{from:"md-s3-cnn",to:"out-s3-class",label:" "},{from:"md-s3-cnn",to:"out-s3-conf",label:""},{from:"md-s3-cnn",to:"out-s3-reason",label:" "},{from:"out-s3-class",to:"md-guardrail",label:"S3 "},{from:"md-s3-prio",to:"out-priority",label:""},{from:"md-s3-prio",to:"out-actions",label:" "},{from:"md-transition",to:"md-s3-prio",label:"MCI "},{from:"md-guardrail",to:"out-guardrail",label:" "},{from:"out-priority",to:"dispatch-s3",label:"High  "},{from:"out-actions",to:"dispatch-s3",label:"  "},{from:"out-guardrail",to:"dispatch-s3",label:"  "},{from:"dispatch-s3",to:"ops-tracking",label:" "},{from:"dispatch-s3",to:"ops-resource",label:"  "},{from:"dispatch-s3",to:"ops-s3-route",label:" "},{from:"dispatch-s3",to:"ops-s3-resched",label:" "}],qt="  : /.     .",p3e={"batch-cycle":{id:"batch-cycle",definition:{what:"D-1     / /   .",why:"           .",whereUsed:["Batch Cycle Banner","  ","  "],responsibility:qt},dataContract:{outputs:[{field:"baseDate",type:"date",nullable:!1,note:"D-1 "},{field:"receiveDeadline",type:"time",nullable:!1,note:"  "},{field:"modelWindow",type:"string",nullable:!1,note:"  "},{field:"dispatchTime",type:"time",nullable:!1,note:"  "}],refreshCadence:" 1 "},qualityAudit:{changeLog:[{version:"BATCH-2026-02-13",date:"2026-02-13",summary:"S2/S3      "}]},batchSummary:{impactedStages:c0.impactedStages,receiveRate:c0.receiveRate,missingInstitutionCount:c0.missingInstitutionCount,expectedRetryAt:c0.expectedRetryAt,impactedMetrics:["2  (MCI/AD)","MCI/AD ","3  "],dispatchLogs:mm}},stage1:{id:"stage1",definition:{what:"   '  '     .",why:" 2     ,     .",whereUsed:[" "," ","   "],responsibility:qt},dataContract:{inputs:[{field:"health_exam_result",type:"object",nullable:!1,note:"  "},{field:"survey_responses",type:"array",nullable:!0,note:"/ "},{field:"admin_info",type:"object",nullable:!1,note:", "},{field:"prior_screening_history",type:"array",nullable:!0,note:"  "}],outputs:[{field:"risk_score",type:"number(0-100)",nullable:!1},{field:"risk_band",type:"enum(||)",nullable:!1},{field:"reason_codes",type:"string[]",nullable:!1,note:" 35 "},{field:"data_quality_flags",type:"string[]",nullable:!0},{field:"transition_eligible",type:"boolean",nullable:!1}],refreshCadence:" 1 "},qualityAudit:{missingRate:4.2,driftSignals:[{name:"risk_score  ",level:"low",note:" +1.3 ( )"}],biasAlerts:[{group:"75+ ",level:"mid",note:"     +8.1%p"}],changeLog:[{version:"v3.2.1",date:"2026-01-15",summary:"  ",impact:"75+  -2.3%p"},{version:"v3.2.0",date:"2025-12-01",summary:"BMI  ",impact:"  +1.1%p"},{version:"v3.1.0",date:"2025-09-20",summary:"   "}]}},stage2:{id:"stage2",definition:{what:"/   ' ' ,     .",why:" ( )  ()    ,  /   .",whereUsed:["2   "," ","3   "],responsibility:qt},dataContract:{inputs:[{field:"stage1_result",type:"object",nullable:!1,note:"risk_score, risk_band"},{field:"exam_result",type:"object",nullable:!1,note:"PET/MRI/"}],outputs:[{field:"diagnosis_class",type:"enum(AD|MCI|NORMAL)",nullable:!1,note:"  =  "},{field:"model_support_signal",type:"enum(||)",nullable:!1,note:"  = ()"},{field:"next_step_policy",type:"enum(3||)",nullable:!1}],refreshCadence:" 1  (D-1  )"},qualityAudit:{missingRate:8.9,driftSignals:[{name:" ",level:"mid",note:"  +1.2%p "}],biasAlerts:[{group:" ",level:"mid",note:"    +5.2"}],changeLog:[{version:"v2.1",date:"2026-01-20",summary:"  ",impact:" +3.4%p"},{version:"v2.0",date:"2025-11-15",summary:"PET/MRI   "}]},batchSummary:{impactedStages:["S2","S3"],receiveRate:76.4,missingInstitutionCount:7,expectedRetryAt:"2026-02-13 11:30",impactedMetrics:["2  (MCI/AD)","MCI/AD ","3  "]}},stage3:{id:"stage3",definition:{what:"MCI/AD    // .",why:"MCI Track/AD           .",whereUsed:["MCI   ","AD   "," ","  "],responsibility:qt},dataContract:{inputs:[{field:"diagnosis_class",type:"enum(MCI|AD)",nullable:!1,note:"2  "},{field:"followup_history",type:"array",nullable:!0,note:"// "}],outputs:[{field:"followup_priority",type:"enum(High|Med|Low)",nullable:!1},{field:"recommended_actions",type:"string[]",nullable:!1},{field:"adherence_metrics",type:"object",nullable:!1},{field:"drop_off_reason",type:"string",nullable:!0}],refreshCadence:" 1  (D-1  )"},qualityAudit:{missingRate:8.1,driftSignals:[{name:"  ",level:"mid",note:"3  -1.5%p/"}],biasAlerts:[{group:" ",level:"high",note:"   +12.3%p"}],changeLog:[{version:"v2.0",date:"2026-01-10",summary:"   ",impact:"High  +4.2%p"},{version:"v1.3",date:"2025-10-05",summary:"    "}]}},"md-s1-risk":{id:"md-s1-risk",definition:{what:"    (0100)    .",why:"     2     .",whereUsed:["1  risk_score ","  "],responsibility:qt},dataContract:{inputs:[{field:"feature_vector",type:"number[48]",nullable:!1,note:"Feature Builder "}],outputs:[{field:"risk_score",type:"number(0-100)",nullable:!1},{field:"risk_band",type:"enum",nullable:!1},{field:"reason_codes",type:"string[3-5]",nullable:!1}],refreshCadence:" 1 "},qualityAudit:{missingRate:.3,driftSignals:[{name:"  ",level:"low",note:"PSI 0.02 ()"}],biasAlerts:[],changeLog:[{version:"v3.2.1",date:"2026-01-15",summary:"   "},{version:"v3.2.0",date:"2025-12-01",summary:"BMI  "}]}},"ft-builder":{id:"ft-builder",definition:{what:"1         .",why:"        .",whereUsed:["Stage1 Risk Scoring ","Eligibility Rules "],responsibility:qt},dataContract:{inputs:[{field:"raw_health_exam",type:"object",nullable:!1},{field:"raw_survey",type:"array",nullable:!0},{field:"raw_admin",type:"object",nullable:!1}],outputs:[{field:"feature_vector",type:"number[48]",nullable:!1},{field:"missing_flags",type:"string[]",nullable:!0}],refreshCadence:" 1 "},qualityAudit:{missingRate:4.2,driftSignals:[],biasAlerts:[],changeLog:[{version:"v2.1",date:"2025-12-01",summary:"BMI   "}]}},"ft-s2-vec":{id:"ft-s2-vec",definition:{what:"  ANN    .",why:"  2      ANN   .",whereUsed:["S2 ANN Classifier "],responsibility:qt},dataContract:{inputs:[{field:"cogtest_features",type:"number[6]",nullable:!1,note:" "},{field:"biomarker_features",type:"number[4]",nullable:!0,note:" "},{field:"survey2_features",type:"number[8]",nullable:!0,note:"2  "},{field:"medhist_features",type:"number[5]",nullable:!0,note:" "}],outputs:[{field:"s2_feature_vector",type:"number[64]",nullable:!1},{field:"missing_flags",type:"string[]",nullable:!0}],refreshCadence:"  "},qualityAudit:{missingRate:8.3,driftSignals:[{name:"  ",level:"low",note:"PSI 0.03 ()"}],biasAlerts:[],changeLog:[{version:"v1.0",date:"2026-01-15",summary:" "}]}},"ft-s3-enc":{id:"ft-s3-enc",definition:{what:"MRI/PET   CNN    .",why:"  3D    CNN       .",whereUsed:["S3 CNN Classifier "],responsibility:qt},dataContract:{inputs:[{field:"mri_features",type:"number[128]",nullable:!1,note:"MRI  "},{field:"pet_features",type:"number[64]",nullable:!0,note:"PET  "},{field:"derived_metrics",type:"number[16]",nullable:!0,note:"  "}],outputs:[{field:"s3_tensor",type:"tensor[1,208]",nullable:!1},{field:"missing_flags",type:"string[]",nullable:!0}],refreshCadence:"  "},qualityAudit:{missingRate:18.7,driftSignals:[{name:"  ",level:"mid",note:"    4.2%"}],biasAlerts:[],changeLog:[{version:"v1.0",date:"2026-01-20",summary:" "}]}},"in-health":{id:"in-health",definition:{what:"    .",why:"1     , BMI    .",whereUsed:["Feature Builder ","1  risk_score "],responsibility:qt},dataContract:{inputs:[{field:"exam_date",type:"date",nullable:!1,note:" "},{field:"bmi",type:"number",nullable:!0,note:""},{field:"blood_pressure",type:"object",nullable:!0,note:"/"},{field:"chronic_diseases",type:"string[]",nullable:!0,note:" "}],refreshCadence:" 1  "},qualityAudit:{missingRate:3.1,driftSignals:[{name:"   ",level:"low",note:" 2 "}],biasAlerts:[],changeLog:[{version:"v1.0",date:"2025-06-01",summary:"  "}]}},"in-survey":{id:"in-survey",definition:{what:"        .",why:" ,           .",whereUsed:["Feature Builder "],responsibility:qt},dataContract:{inputs:[{field:"survey_id",type:"string",nullable:!1},{field:"responses",type:"object[]",nullable:!1,note:" "}],refreshCadence:"  1"},qualityAudit:{missingRate:12.7,driftSignals:[],biasAlerts:[{group:"75+ ",level:"mid",note:"   +8%p"}],changeLog:[{version:"v1.2",date:"2025-11-01",summary:"  (1520)"}]}},"in-admin":{id:"in-admin",definition:{what:" (, ,  ).",why:"  ,         .",whereUsed:["Feature Builder ","    "],responsibility:qt},dataContract:{inputs:[{field:"address",type:"object",nullable:!1},{field:"household_type",type:"enum",nullable:!0,note:"//"},{field:"contact_phone",type:"string",nullable:!0}],refreshCadence:"/ "},qualityAudit:{missingRate:5.4,driftSignals:[],biasAlerts:[],changeLog:[{version:"v1.1",date:"2025-08-15",summary:"  "}]}},"in-history":{id:"in-history",definition:{what:"  1      .",why:"            .",whereUsed:["Feature Builder "],responsibility:qt},dataContract:{inputs:[{field:"prior_risk_scores",type:"number[]",nullable:!0},{field:"prior_risk_bands",type:"string[]",nullable:!0},{field:"last_screening_date",type:"date",nullable:!0}],refreshCadence:" 1 "},qualityAudit:{missingRate:18.3,driftSignals:[{name:"    ",level:"low",note:"22.1% ( )"}],biasAlerts:[],changeLog:[{version:"v1.0",date:"2025-06-01",summary:" "}]}},"in-exam":{id:"in-cogtest",definition:{what:"(MMSE, MoCA, CDR )   .",why:"2 ANN   ,      .",whereUsed:["S2 Vectorizer ","ANN Classifier "],responsibility:qt},dataContract:{inputs:[{field:"mmse_score",type:"number(0-30)",nullable:!1,note:"MMSE "},{field:"moca_score",type:"number(0-30)",nullable:!0,note:"MoCA "},{field:"cdr_global",type:"number(0-3)",nullable:!0,note:"CDR  "},{field:"exam_date",type:"date",nullable:!1}],refreshCadence:"  1"},qualityAudit:{missingRate:6.4,driftSignals:[{name:"   ",level:"low",note:"MoCA v8.1  v7.1  2.1%"}],biasAlerts:[{group:" ",level:"mid",note:"MMSE    +6.2%p"}],changeLog:[{version:"v1.0",date:"2025-09-01",summary:"  "}]}},"in-cogtest":{id:"in-cogtest",definition:{what:"(MMSE, MoCA, CDR )   .",why:"2 ANN   ,      .",whereUsed:["S2 Vectorizer ","ANN Classifier "],responsibility:qt},dataContract:{inputs:[{field:"mmse_score",type:"number(0-30)",nullable:!1,note:"MMSE "},{field:"moca_score",type:"number(0-30)",nullable:!0,note:"MoCA "},{field:"cdr_global",type:"number(0-3)",nullable:!0,note:"CDR  "},{field:"exam_date",type:"date",nullable:!1}],refreshCadence:"  1"},qualityAudit:{missingRate:6.4,driftSignals:[{name:"   ",level:"low",note:"MoCA v8.1  v7.1  2.1%"}],biasAlerts:[{group:" ",level:"mid",note:"MMSE    +6.2%p"}],changeLog:[{version:"v1.0",date:"2025-09-01",summary:"  "}]}},"in-biomarker":{id:"in-biomarker",definition:{what:"  (A42, p-tau181, NfL )  .",why:"ANN   ,     .",whereUsed:["S2 Vectorizer "],responsibility:qt},dataContract:{inputs:[{field:"ab42_ratio",type:"number",nullable:!0,note:"A42/40 "},{field:"ptau181",type:"number",nullable:!0,note:"pg/mL"},{field:"nfl",type:"number",nullable:!0,note:"Neurofilament light"},{field:"sample_date",type:"date",nullable:!1}],refreshCadence:"  1"},qualityAudit:{missingRate:22.1,driftSignals:[{name:"  ",level:"mid",note:"Elecsys  Lumipulse   2.3% "}],biasAlerts:[],changeLog:[{version:"v1.0",date:"2025-10-01",summary:" "}]}},"in-survey2":{id:"in-survey2",definition:{what:"2         .",why:"          .",whereUsed:["S2 Vectorizer "],responsibility:qt},dataContract:{inputs:[{field:"adl_score",type:"number",nullable:!0,note:" "},{field:"iadl_score",type:"number",nullable:!0,note:" "},{field:"guardian_responses",type:"object[]",nullable:!0,note:"  "}],refreshCadence:"2   1"},qualityAudit:{missingRate:15.3,driftSignals:[],biasAlerts:[{group:" ",level:"high",note:"   42.1%"}],changeLog:[{version:"v1.0",date:"2025-11-01",summary:" "}]}},"in-medhist":{id:"in-medhist",definition:{what:"     () .",why:"           .",whereUsed:["S2 Vectorizer "],responsibility:qt},dataContract:{inputs:[{field:"rx_codes",type:"string[]",nullable:!0,note:"  ATC "},{field:"visit_history",type:"object[]",nullable:!0,note:"/ "},{field:"comorbidity_index",type:"number",nullable:!0,note:"Charlson  "}],refreshCadence:" 1 "},qualityAudit:{missingRate:11.7,driftSignals:[],biasAlerts:[],changeLog:[{version:"v1.0",date:"2025-11-15",summary:"   "}]}},"in-mri":{id:"in-mri",definition:{what:" MRI   ,  ,     .",why:"3 CNN   ,      .",whereUsed:["S3 Encoder ","CNN Classifier "],responsibility:qt},dataContract:{inputs:[{field:"hippocampal_volume",type:"number",nullable:!1,note:"  (mm)"},{field:"cortical_thickness",type:"number[]",nullable:!0,note:"ROI  "},{field:"ventricular_ratio",type:"number",nullable:!0,note:" "},{field:"scan_date",type:"date",nullable:!1}],refreshCadence:"  1"},qualityAudit:{missingRate:14.2,driftSignals:[{name:"  ",level:"mid",note:"3T/1.5T     3.1%"}],biasAlerts:[],changeLog:[{version:"v1.0",date:"2025-12-01",summary:"FreeSurfer  "}]}},"in-pet":{id:"in-pet",definition:{what:"/ PET  SUVR, Centiloid   .",why:"       CNN   .",whereUsed:["S3 Encoder "],responsibility:qt},dataContract:{inputs:[{field:"amyloid_suvr",type:"number",nullable:!0,note:"A PET SUVR"},{field:"centiloid",type:"number",nullable:!0,note:"Centiloid "},{field:"tau_suvr",type:"number",nullable:!0,note:"Tau PET SUVR"},{field:"scan_date",type:"date",nullable:!1}],refreshCadence:"  1"},qualityAudit:{missingRate:31.4,driftSignals:[{name:"  ",level:"mid",note:"Florbetaben vs Flutemetamol "}],biasAlerts:[{group:" ",level:"high",note:"PET      +18%p"}],changeLog:[{version:"v1.0",date:"2025-12-15",summary:"PET   "}]}},"in-imgderiv":{id:"in-imgderiv",definition:{what:"MRI/PET     (ROI ,   ).",why:"          .",whereUsed:["S3 Encoder "],responsibility:qt},dataContract:{inputs:[{field:"atrophy_index",type:"number",nullable:!0,note:"   "},{field:"roi_ratios",type:"number[]",nullable:!0,note:"ROI  "},{field:"asymmetry_score",type:"number",nullable:!0,note:"  "}],refreshCadence:"MRI/PET   "},qualityAudit:{missingRate:16.8,driftSignals:[],biasAlerts:[],changeLog:[{version:"v1.0",date:"2026-01-05",summary:"   "}]}},"in-followup":{id:"in-followup",definition:{what:"MCI   //   .",why:"  ,     .",whereUsed:["MCI Prioritizer "," "],responsibility:qt},dataContract:{inputs:[{field:"visit_records",type:"object[]",nullable:!0},{field:"last_contact_date",type:"date",nullable:!0},{field:"program_participation",type:"string[]",nullable:!0}],refreshCadence:" 1 "},qualityAudit:{missingRate:8.1,driftSignals:[{name:" ",level:"mid",note:"3  -1.5%p/"}],biasAlerts:[{group:" ",level:"high",note:" +12.3%p"}],changeLog:[{version:"v1.0",date:"2025-06-01",summary:" "}]}},"md-s1-rule":{id:"md-s1-rule",definition:{what:"       .",why:",   ,         .",whereUsed:["1    ","   "],responsibility:qt},dataContract:{inputs:[{field:"base_criteria",type:"object",nullable:!1,note:"//"}],outputs:[{field:"eligible",type:"boolean",nullable:!1},{field:"exclusion_reason",type:"string",nullable:!0},{field:"data_quality_flags",type:"string[]",nullable:!0}],refreshCadence:" 1 "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[{version:"v1.4",date:"2025-12-15",summary:"75+  "},{version:"v1.3",date:"2025-09-01",summary:"   "}]}},"md-s2-ann":{id:"md-s2-ann",definition:{what:"   2     ANN .",why:"        ,     .",whereUsed:["S2    ","Consistency Check  "],responsibility:qt},dataContract:{inputs:[{field:"s2_feature_vector",type:"number[64]",nullable:!1,note:"S2 Vectorizer "}],outputs:[{field:"s2_support_class",type:"enum(AD|MCI|NORMAL)",nullable:!1,note:"  ()"},{field:"s2_support_confidence",type:"number(0-1)",nullable:!1,note:" "},{field:"s2_reason_codes",type:"string[3-5]",nullable:!1,note:"  "}],refreshCadence:"  "},qualityAudit:{missingRate:.5,driftSignals:[{name:"  ",level:"low",note:"PSI 0.04 ()"}],biasAlerts:[{group:"75+ ",level:"mid",note:"AD    +5.4%p"}],changeLog:[{version:"v1.0",date:"2026-01-15",summary:"ANN Classifier  "}]}},"md-s2-consist":{id:"md-s2-consist",definition:{what:"  2   1       .",why:" (: 1   2 AD)    .",whereUsed:[" ","model_support_signal "],responsibility:qt},dataContract:{inputs:[{field:"stage1_risk_band",type:"enum",nullable:!1},{field:"exam_diagnosis",type:"enum(AD|MCI|NORMAL)",nullable:!1}],outputs:[{field:"model_support_signal",type:"enum(||)",nullable:!1},{field:"inconsistency_score",type:"number",nullable:!1}],refreshCadence:""},qualityAudit:{missingRate:0,driftSignals:[{name:" ",level:"mid",note:"  +1.2%p"}],biasAlerts:[],changeLog:[{version:"v1.2",date:"2026-01-10",summary:"  "}]}},"md-transition":{id:"md-transition",definition:{what:"2     (3 //)   .",why:"         .",whereUsed:["3 MCI   ","/ "],responsibility:qt},dataContract:{inputs:[{field:"diagnosis_class",type:"enum(AD|MCI|NORMAL)",nullable:!1}],outputs:[{field:"next_step_policy",type:"enum(3||)",nullable:!1}],refreshCadence:""},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[{version:"v1.3",date:"2026-01-10",summary:"MCI   "},{version:"v1.2",date:"2025-10-01",summary:"AD     "}]}},"md-s3-cnn":{id:"md-s3-cnn",definition:{what:"MRI/PET    3     CNN .",why:"     ,       .",whereUsed:["S3    ","Post-Model Guardrails "],responsibility:qt},dataContract:{inputs:[{field:"s3_tensor",type:"tensor[1,208]",nullable:!1,note:"S3 Encoder "}],outputs:[{field:"s3_support_class",type:"enum(AD|MCI|NORMAL)",nullable:!1,note:"  ()"},{field:"s3_support_confidence",type:"number(0-1)",nullable:!1,note:" "},{field:"s3_reason_codes",type:"string[3-5]",nullable:!1,note:"  "}],refreshCadence:"  "},qualityAudit:{missingRate:.8,driftSignals:[{name:"  ",level:"low",note:"KL divergence 0.02 ()"}],biasAlerts:[{group:"1.5T ",level:"mid",note:"3T   -0.08 "}],changeLog:[{version:"v1.0",date:"2026-02-01",summary:"CNN Classifier  "}]}},"md-s3-prio":{id:"md-s3-prio",definition:{what:"MCI       .",why:"        .",whereUsed:["MCI   ","  "],responsibility:qt},dataContract:{inputs:[{field:"diagnosis_class",type:"enum(MCI)",nullable:!1},{field:"followup_history",type:"array",nullable:!0}],outputs:[{field:"followup_priority",type:"enum(High|Med|Low)",nullable:!1},{field:"recommended_actions",type:"string[]",nullable:!1}],refreshCadence:" 1 "},qualityAudit:{missingRate:.5,driftSignals:[{name:"  ",level:"low",note:"High  +1.2%p"}],biasAlerts:[{group:" ",level:"high",note:"High  +12%p"}],changeLog:[{version:"v2.0",date:"2026-01-10",summary:"  ",impact:"High  +4.2%p"}]}},"out-score":{id:"out-score",definition:{what:"1    (0100).",why:"         .",whereUsed:["  ","  "],responsibility:qt},dataContract:{outputs:[{field:"risk_score",type:"number(0-100)",nullable:!1}],refreshCadence:" 1 "},qualityAudit:{missingRate:.3,driftSignals:[],biasAlerts:[],changeLog:[]}},"out-band":{id:"out-band",definition:{what:"  (//).",why:" 3     .",whereUsed:["  ","2   "],responsibility:qt},dataContract:{outputs:[{field:"risk_band",type:"enum(||)",nullable:!1}],refreshCadence:" 1 "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"out-reason":{id:"out-reason",definition:{what:"   35  .",why:"      .",whereUsed:["   ","  "],responsibility:qt},dataContract:{outputs:[{field:"reason_codes",type:"string[3-5]",nullable:!1}],refreshCadence:" 1 "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"out-diag":{id:"out-diag",definition:{what:"2   (AD/MCI/).   ,   .",why:"        .",whereUsed:["3  ","  "],responsibility:qt},dataContract:{outputs:[{field:"diagnosis_class",type:"enum(AD|MCI|NORMAL)",nullable:!1,note:"  "}],refreshCadence:" (  )"},qualityAudit:{missingRate:8.9,driftSignals:[],biasAlerts:[],changeLog:[]}},"out-signal":{id:"out-signal",definition:{what:"  (//).   1     .",why:"   ,     .",whereUsed:["  "," "],responsibility:qt},dataContract:{outputs:[{field:"model_support_signal",type:"enum(||)",nullable:!1,note:"  "}],refreshCadence:""},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"out-priority":{id:"out-priority",definition:{what:"MCI  (High/Med/Low) .",why:"        .",whereUsed:["MCI   ","  "],responsibility:qt},dataContract:{outputs:[{field:"followup_priority",type:"enum(High|Med|Low)",nullable:!1}],refreshCadence:" 1 "},qualityAudit:{missingRate:.5,driftSignals:[],biasAlerts:[],changeLog:[]}},"out-actions":{id:"out-actions",definition:{what:"   (// ).",why:"       .",whereUsed:["   ","  "],responsibility:qt},dataContract:{outputs:[{field:"recommended_actions",type:"string[]",nullable:!1}],refreshCadence:" 1 "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"out-quality":{id:"out-quality",definition:{what:"   .",why:"        .",whereUsed:["  ","1   "],responsibility:qt},dataContract:{outputs:[{field:"data_quality_flags",type:"string[]",nullable:!0}],refreshCadence:" 1 "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"out-s2-class":{id:"out-s2-class",definition:{what:"ANN  2   (AD/MCI/NORMAL).      .",why:"   (Consistency Check)   .",whereUsed:["Consistency Check ","S2  "],responsibility:qt},dataContract:{outputs:[{field:"s2_support_class",type:"enum(AD|MCI|NORMAL)",nullable:!1,note:"   ()"}],refreshCadence:"  "},qualityAudit:{missingRate:.5,driftSignals:[],biasAlerts:[],changeLog:[]}},"out-s2-conf":{id:"out-s2-conf",definition:{what:"ANN   (01).",why:"     ,      .",whereUsed:["2   "," "],responsibility:qt},dataContract:{outputs:[{field:"s2_support_confidence",type:"number(0-1)",nullable:!1}],refreshCadence:"  "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"out-s2-reason":{id:"out-s2-reason",definition:{what:"ANN   35   .",why:"       .",whereUsed:["Inspector "," "],responsibility:qt},dataContract:{outputs:[{field:"s2_reason_codes",type:"string[3-5]",nullable:!1}],refreshCadence:"  "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"out-s3-class":{id:"out-s3-class",definition:{what:"CNN  3   (AD/MCI/NORMAL).      .",why:"        .",whereUsed:["3  ","Guardrails "],responsibility:qt},dataContract:{outputs:[{field:"s3_support_class",type:"enum(AD|MCI|NORMAL)",nullable:!1,note:"   ()"}],refreshCadence:"  "},qualityAudit:{missingRate:.8,driftSignals:[],biasAlerts:[],changeLog:[]}},"out-s3-conf":{id:"out-s3-conf",definition:{what:"CNN   (01).",why:"     .",whereUsed:["   "," "],responsibility:qt},dataContract:{outputs:[{field:"s3_support_confidence",type:"number(0-1)",nullable:!1}],refreshCadence:"  "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"out-s3-reason":{id:"out-s3-reason",definition:{what:"CNN   35   .",why:"       ROI  .",whereUsed:["Inspector "," "],responsibility:qt},dataContract:{outputs:[{field:"s3_reason_codes",type:"string[3-5]",nullable:!1}],refreshCadence:"  "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"md-guardrail":{id:"md-guardrail",definition:{what:"S1/S2/S3     ,  ,     .",why:"           .",whereUsed:["guardrail_flags ","/   "],responsibility:qt},dataContract:{inputs:[{field:"risk_score",type:"number",nullable:!0,note:"S1 "},{field:"s2_support_class",type:"enum",nullable:!0,note:"S2 "},{field:"s3_support_class",type:"enum",nullable:!0,note:"S3 "}],outputs:[{field:"guardrail_flags",type:"string[]",nullable:!1,note:"/ "},{field:"confidence_adjusted",type:"boolean",nullable:!1}],refreshCadence:"   "},qualityAudit:{missingRate:0,driftSignals:[{name:" ",level:"low",note:"2.1% ( )"}],biasAlerts:[],changeLog:[{version:"v1.0",date:"2026-02-01",summary:"Guardrails  "}]}},"out-guardrail":{id:"out-guardrail",definition:{what:"Post-Model Guardrails  /  .",why:"        .",whereUsed:["/  "," "],responsibility:qt},dataContract:{outputs:[{field:"guardrail_flags",type:"string[]",nullable:!1,note:"/ "}],refreshCadence:"   "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"dispatch-s1":{id:"dispatch-s1",definition:{what:"S1 (  /  )      .",why:"          .",whereUsed:["S1 Dispatch ","  "," "],responsibility:qt},dataContract:{inputs:[{field:"risk_score",type:"number",nullable:!1},{field:"risk_band",type:"enum",nullable:!1}],outputs:[{field:"dispatch_payload",type:"object[]",nullable:!1,note:"  /   "}],refreshCadence:" 1  "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]},batchSummary:{dispatchLogs:mm.filter(e=>e.stage==="S1")}},"dispatch-s2":{id:"dispatch-s2",definition:{what:"S2           .",why:"     /  .",whereUsed:["S2 Dispatch ","  ","2  "],responsibility:qt},dataContract:{inputs:[{field:"diagnosis_class",type:"enum(AD|MCI|NORMAL)",nullable:!1},{field:"model_support_signal",type:"enum(||)",nullable:!1}],outputs:[{field:"dispatch_payload",type:"object[]",nullable:!1,note:"   /  "}],refreshCadence:" 1  "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]},batchSummary:{impactedStages:["S2"],dispatchLogs:mm.filter(e=>e.stage==="S2")}},"dispatch-s3":{id:"dispatch-s3",definition:{what:"S3   High         .",why:"/     / .",whereUsed:["S3 Dispatch ","MCI/AD  "," "],responsibility:qt},dataContract:{inputs:[{field:"followup_priority",type:"enum(High|Med|Low)",nullable:!1},{field:"recommended_actions",type:"string[]",nullable:!1}],outputs:[{field:"dispatch_payload",type:"object[]",nullable:!1,note:"High   /  "}],refreshCadence:" 1  "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]},batchSummary:{impactedStages:["S3"],dispatchLogs:mm.filter(e=>e.stage==="S3")}},"ops-case":{id:"ops-case",definition:{what:"        .",why:"        .",whereUsed:["  "],responsibility:qt},dataContract:{inputs:[{field:"risk_score",type:"number",nullable:!1},{field:"risk_band",type:"enum",nullable:!1}],refreshCadence:" 1  "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"ops-booking":{id:"ops-booking",definition:{what:"  2     .",why:"    2     .",whereUsed:["SMS/ ","  "],responsibility:qt},dataContract:{inputs:[{field:"risk_band",type:"enum",nullable:!1}],refreshCadence:" 1  "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"ops-resource":{id:"ops-resource",definition:{what:"    (//)   .",why:"      .",whereUsed:["  "," "],responsibility:qt},dataContract:{inputs:[{field:"recommended_actions",type:"string[]",nullable:!1}],refreshCadence:" 1  "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"ops-tracking":{id:"ops-tracking",definition:{what:"MCI      .",why:"  //   .",whereUsed:["MCI   "," "],responsibility:qt},dataContract:{inputs:[{field:"followup_priority",type:"enum(High|Med|Low)",nullable:!1}],refreshCadence:" 1  "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"ops-s2-prio":{id:"ops-s2-prio",definition:{what:"    2     .",why:" 2        .",whereUsed:["2    "],responsibility:qt},dataContract:{inputs:[{field:"s2_support_confidence",type:"number(0-1)",nullable:!1}],refreshCadence:" 1  "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"ops-s3-route":{id:"ops-s3-route",definition:{what:"3    (PET/MRI/)   .",why:"CNN         .",whereUsed:["3   "],responsibility:qt},dataContract:{inputs:[{field:"s3_support_confidence",type:"number(0-1)",nullable:!1}],refreshCadence:" 1  "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}},"ops-s3-resched":{id:"ops-s3-resched",definition:{what:"Guardrails       .",why:"         .",whereUsed:["  ","  "],responsibility:qt},dataContract:{inputs:[{field:"guardrail_flags",type:"string[]",nullable:!1}],refreshCadence:"  "},qualityAudit:{missingRate:0,driftSignals:[],biasAlerts:[],changeLog:[]}}},e8={ops:{label:"",icon:Rm,color:"bg-blue-600"},quality:{label:"",icon:Fv,color:"bg-amber-500"},audit:{label:"",icon:Ol,color:"bg-purple-600"}};function h3e({mode:e,onChange:t}){return n.jsx("div",{className:"inline-flex items-center rounded-lg border border-slate-200 bg-white p-0.5 shadow-sm",children:Object.keys(e8).map(r=>{const a=e8[r],s=a.icon,i=e===r;return n.jsxs("button",{onClick:()=>t(r),className:`flex items-center gap-1.5 px-3.5 py-1.5 rounded-md text-xs font-semibold transition-all ${i?`${a.color} text-white shadow-sm`:"text-slate-500 hover:text-slate-700 hover:bg-slate-50"}`,children:[n.jsx(s,{className:"h-3.5 w-3.5"}),a.label]},r)})})}const g3e={completed:{label:"",chip:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:Zs},running:{label:"",chip:"bg-blue-100 text-blue-700 border-blue-200",icon:Sl},partial:{label:"",chip:"bg-amber-100 text-amber-700 border-amber-200",icon:Qa},delayed:{label:"",chip:"bg-orange-100 text-orange-700 border-orange-200",icon:Qa},failed:{label:"",chip:"bg-red-100 text-red-700 border-red-200",icon:km}};function x3e({meta:e,onOpenDetail:t}){const r=g3e[e.status],a=r.icon,s=e.status==="partial"||e.status==="delayed"||e.status==="failed";return n.jsxs("div",{className:"bg-white border-b border-slate-200 px-5 py-2.5 flex items-center justify-between gap-3 flex-shrink-0",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-[11px] text-slate-600",children:[n.jsxs("span",{className:"inline-flex items-center gap-1 rounded-md bg-slate-100 px-2 py-1 text-slate-700 font-semibold",children:["D-1 : ",e.baseDate]}),n.jsxs("span",{className:"rounded-md bg-slate-50 px-2 py-1 border border-slate-200",children:[" : ",e.receiveDeadline]}),n.jsxs("span",{className:"rounded-md bg-slate-50 px-2 py-1 border border-slate-200",children:[" : ",e.modelWindow]}),n.jsxs("span",{className:"rounded-md bg-slate-50 px-2 py-1 border border-slate-200",children:["  : ",e.dispatchTime]}),n.jsxs("span",{className:`inline-flex items-center gap-1 rounded-md border px-2 py-1 font-semibold ${r.chip}`,children:[n.jsx(a,{className:"h-3 w-3"}),": ",r.label]}),s&&e.impactedStages&&e.impactedStages.length>0&&n.jsxs("span",{className:"inline-flex items-center gap-1",children:[n.jsx("span",{className:"text-slate-400",children:" Stage"}),e.impactedStages.map(i=>n.jsx("span",{className:"rounded-md bg-amber-100 text-amber-700 border border-amber-200 px-1.5 py-0.5 font-semibold",children:i},i))]}),e.notes&&n.jsx("span",{className:"text-slate-500",children:e.notes})]}),n.jsx("button",{className:"text-[11px] text-blue-600 hover:text-blue-700 font-semibold whitespace-nowrap",onClick:t,children:"  "})]})}const b3e={good:"border-emerald-200 bg-gradient-to-br from-white to-emerald-50/80 shadow-sm",warn:"border-amber-200 bg-gradient-to-br from-white to-amber-50/80 shadow-sm",risk:"border-red-200 bg-gradient-to-br from-white to-red-50/80 shadow-sm",neutral:"border-slate-200 bg-gradient-to-br from-white to-slate-50/60 shadow-sm"},y3e={good:"bg-emerald-500",warn:"bg-amber-500",risk:"bg-red-500",neutral:"bg-slate-400"};function v3e({kpi:e,viewMode:t,onJump:r}){const[a,s]=g.useState(!1),i=e.modeOverride?.[t],o=i?.label??e.label,l=i?.value??e.value,d=i?.valuePrefix??e.valuePrefix,u=i?.secondaryValueLine??e.secondaryValueLine,p=i?.unit??e.unit,m=i?.status??e.status??"neutral",h=p===""?l.toLocaleString():`${l}`,x=e.delta==null?null:e.delta>0?n.jsx(S8,{className:"h-3 w-3 text-emerald-500"}):e.delta<0?n.jsx(N8,{className:"h-3 w-3 text-red-500"}):n.jsx(tQ,{className:"h-3 w-3 text-slate-400"});return n.jsxs("div",{className:`relative flex flex-col justify-between rounded-xl border p-3.5 transition-all duration-200 ease-out hover:shadow-lg hover:scale-[1.04] hover:-translate-y-0.5 ${b3e[m]} ${e.jumpTo?"cursor-pointer":""}`,onClick:()=>e.jumpTo&&r?.(e.jumpTo),children:[e.help&&n.jsx("button",{className:"absolute top-2 left-2 text-slate-300 hover:text-slate-500",onClick:y=>{y.stopPropagation(),s(!a)},children:n.jsx(EC,{className:"h-3.5 w-3.5"})}),n.jsxs("div",{className:"absolute top-2 right-2 flex flex-col items-end gap-1",children:[n.jsxs("span",{className:"rounded bg-slate-100 px-1.5 py-0.5 text-[9px] text-slate-500",children:[": ",e.baseDate,"  D-1"]}),e.partialStages&&e.partialStages.length>0&&n.jsx("span",{className:"rounded bg-amber-100 px-1.5 py-0.5 text-[9px] text-amber-700",title:` : ${e.partialStages.join("/")}`,children:" "})]}),a&&e.help&&n.jsxs("div",{className:"absolute top-8 left-2 z-20 w-60 rounded-lg border border-slate-200 bg-white p-3 text-xs shadow-lg",children:[n.jsx("p",{className:"font-semibold text-slate-700 mb-1",children:e.help.title}),n.jsx("p",{className:"text-slate-500 leading-relaxed whitespace-pre-line",children:e.help.body})]}),n.jsxs("div",{className:"flex items-center gap-1.5 mb-2 mt-8",children:[n.jsx("span",{className:`h-1.5 w-1.5 rounded-full ${y3e[m]}`}),n.jsx("span",{className:"text-[11px] font-medium text-slate-500 leading-tight truncate",children:o})]}),n.jsxs("div",{className:"flex items-end gap-1.5",children:[n.jsxs("span",{className:"text-xl font-bold text-slate-800 leading-none",children:[d?`${d} `:"",h]}),p&&n.jsx("span",{className:"text-xs text-slate-400 mb-0.5",children:p})]}),u&&n.jsx("p",{className:"mt-1 text-[10px] text-slate-500 font-medium",children:u}),n.jsxs("div",{className:"flex items-center justify-between mt-2",children:[n.jsx("span",{className:"text-[10px] text-slate-400",children:e.scopeLine}),e.delta!=null&&n.jsxs("span",{className:"flex items-center gap-0.5 text-[10px] text-slate-500",children:[x,Math.abs(e.delta),p===""||p===""?"":"%p"]})]})]})}function N3e({kpis:e,viewMode:t,onJump:r}){return n.jsx("div",{className:"grid grid-cols-4 lg:grid-cols-8 gap-3",children:e.map(a=>n.jsx(v3e,{kpi:a,viewMode:t,onJump:r},a.key))})}const S3e={stage1:{bg:"bg-blue-50/60",border:"border-blue-200",accent:"text-blue-700",headerBg:"bg-blue-600"},stage2:{bg:"bg-amber-50/60",border:"border-amber-200",accent:"text-amber-700",headerBg:"bg-amber-500"},stage3:{bg:"bg-emerald-50/60",border:"border-emerald-200",accent:"text-emerald-700",headerBg:"bg-emerald-600"}},W5={stage1:"S1",stage2:"S2",stage3:"S3"},Lv={completed:{label:"",badgeClass:"bg-emerald-100 text-emerald-700 border-emerald-200"},partial:{label:" ",badgeClass:"bg-amber-100 text-amber-700 border-amber-200"},delayed:{label:"",badgeClass:"bg-orange-100 text-orange-700 border-orange-200"},failed:{label:"",badgeClass:"bg-red-100 text-red-700 border-red-200"}};function j3e(){const[e,t]=g.useState(!1);return g.useEffect(()=>{if(typeof window>"u")return;const r=window.matchMedia("(hover: none), (pointer: coarse)"),a=()=>t(r.matches||navigator.maxTouchPoints>0);return a(),r.addEventListener?.("change",a),()=>r.removeEventListener?.("change",a)},[]),e}function LW(e,t,r){const a=r.filter(i=>i.stage===e),s=!!t.impactedStages?.includes(e);return a.some(i=>i.slaStatus==="breached")||t.status==="failed"&&s?"failed":a.some(i=>i.slaStatus==="delayed")||t.status==="delayed"&&s?"delayed":a.some(i=>i.failedCount>0||i.retryCount>0)||t.status==="partial"&&s?"partial":"completed"}function w3e(e,t,r){const a=W5[e.stageId],s=LW(a,t,r),i=Lv[s].label,o=s==="partial"||s==="delayed"||s==="failed";return e.stageId==="stage1"?{dispatchState:s,meta:{stage:a,title:"Stage1  1 ",baseDate:t.baseDate,definition:"//      ",denominator:{label:"",n:e.metrics.applied},coverage:{receivedPct:e.metrics.appliedRate,partial:o,notes:t.notes},outputs:["   ","2()  / "," ( )"],caution:"   / ",modelChip:`ML ${e.processing[0]?.version??"v-"}`,dispatchChip:`: ${i}`}}:e.stageId==="stage2"?{dispatchState:s,meta:{stage:a,title:"Stage2  2 ",baseDate:t.baseDate,definition:"   ,     ",denominator:{label:"  ",n:jd.receivedN},coverage:{receivedPct:t.receiveRate,partial:o,notes:t.notes},outputs:["AD/MCI/  ","/ ","  "],caution:"      ()",modelChip:"ANN v1.0",dispatchChip:`: ${i}`}}:{dispatchState:s,meta:{stage:a,title:"Stage3  3 ",baseDate:t.baseDate,definition:"MCI    /   ",denominator:{label:" ",n:e.metrics.applied},coverage:{receivedPct:e.metrics.appliedRate,partial:o,notes:t.notes},outputs:[" High "," (//)"," / "],caution:"      ",modelChip:"CNN v1.0",dispatchChip:`: ${i}`}}}function t8({hoverMeta:e,dispatchState:t,onOpenDetail:r}){const a=e.coverage?.receivedPct!=null?`${e.coverage.receivedPct.toFixed(1)}%`:"-",s=e.coverage?.partial?" ":"",i=Lv[t];return n.jsxs("div",{className:"w-[340px] rounded-lg border border-slate-200 bg-white p-2.5 text-[11px] leading-4 shadow-xl",children:[n.jsxs("p",{className:"flex items-center justify-between gap-2 text-slate-800 font-semibold",children:[n.jsx("span",{className:"truncate",children:e.title}),n.jsx("span",{className:`shrink-0 rounded border px-1.5 py-0.5 text-[10px] font-semibold ${i.badgeClass}`,children:i.label})]}),n.jsxs("p",{className:"mt-1 truncate text-slate-500",children:["(D-1): ",e.baseDate,"  ",e.modelChip??" ","  ",e.dispatchChip??": -"]}),n.jsxs("p",{className:"mt-1 truncate text-slate-600",children:[": ",e.definition]}),n.jsxs("p",{className:"mt-1 truncate text-slate-600",children:[": ",e.denominator.label," ",e.denominator.n.toLocaleString(),"   ",a,"  ",s]}),n.jsxs("p",{className:"mt-1 truncate text-slate-600",children:[": ",e.outputs.slice(0,3).join(" / ")]}),n.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[n.jsxs("p",{className:"min-w-0 flex-1 truncate text-slate-500",children:[": ",e.caution??"-"]}),n.jsxs("button",{className:"inline-flex items-center gap-1 text-[10px] font-semibold text-blue-600 hover:text-blue-700 shrink-0",onClick:o=>{o.stopPropagation(),r()},children:[" ",n.jsx(Na,{className:"h-3 w-3"})]})]})]})}function E3e({stage:e,viewMode:t,isSelected:r,isBatchImpacted:a,hoverMeta:s,dispatchState:i,isTouchDevice:o,onOpenDetail:l,onClick:d}){const u=S3e[e.stageId],[p,m]=g.useState(!1),[h,x]=g.useState(!1),[y,N]=g.useState(!1),v=g.useCallback(()=>{x(!1),N(!1),l()},[l]),j=n.jsxs("div",{className:`relative pt-2 rounded-xl border-2 transition-all cursor-pointer ${u.bg} ${r?`${u.border} shadow-lg ring-2 ring-offset-1 ring-blue-300`:`${u.border} hover:shadow-md`}`,onClick:d,role:"button",tabIndex:0,onKeyDown:E=>{(E.key==="Enter"||E.key===" ")&&(E.preventDefault(),d())},children:[n.jsx("span",{className:"absolute left-3 -top-2.5 rounded-full border border-slate-200 bg-slate-50 px-2 py-0.5 text-[10px] font-semibold text-slate-700 whitespace-nowrap",children:e.examLabel}),n.jsxs("div",{className:`${u.headerBg} rounded-t-[10px] px-4 py-2.5 flex items-center justify-between`,children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-white/80 text-xs font-mono",children:e.stageId.toUpperCase()}),n.jsx("span",{className:"text-white font-semibold text-sm",children:e.title})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[a&&n.jsx("span",{className:"rounded bg-amber-100/90 px-1.5 py-0.5 text-[9px] font-semibold text-amber-700",children:" "}),o&&n.jsxs(PW,{open:y,onOpenChange:N,children:[n.jsx(DW,{asChild:!0,children:n.jsx("button",{className:"text-[11px] font-semibold text-white/90 hover:text-white rounded px-1",onClick:E=>E.stopPropagation(),"aria-label":`${s.title} `,children:""})}),n.jsx(IW,{children:n.jsx(MW,{side:"top",align:"end",sideOffset:8,collisionPadding:12,className:"z-50 p-0 bg-transparent border-0 shadow-none",children:n.jsx(t8,{hoverMeta:s,dispatchState:i,onOpenDetail:v})})})]}),n.jsx("button",{className:"text-white/70 hover:text-white",onClick:E=>{E.stopPropagation(),m(!p)},children:p?n.jsx(gs,{className:"h-4 w-4"}):n.jsx(ei,{className:"h-4 w-4"})})]})]}),n.jsx("div",{className:"px-4 py-2 border-b border-dashed border-slate-200/80",children:n.jsx("p",{className:"text-[11px] text-slate-500 italic",children:e.purposeLine})}),e.stageId==="stage2"&&n.jsx("div",{className:"mx-4 mt-2 rounded-md border border-amber-200 bg-amber-50 px-2.5 py-1.5 text-[10px] text-amber-700 font-semibold",children:"  =      = ()"}),n.jsxs("div",{className:"px-4 py-3 grid grid-cols-2 gap-x-4 gap-y-2 text-xs",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-slate-400",children:""}),n.jsxs("span",{className:"ml-1.5 font-bold text-slate-700",children:[e.metrics.applied.toLocaleString(),""]})]}),e.metrics.appliedRate!=null&&n.jsxs("div",{children:[n.jsx("span",{className:"text-slate-400",children:""}),n.jsxs("span",{className:"ml-1.5 font-bold text-slate-700",children:[e.metrics.appliedRate,"%"]})]}),e.metrics.conversionRate!=null&&n.jsxs("div",{children:[n.jsx("span",{className:"text-slate-400",children:""}),n.jsxs("span",{className:"ml-1.5 font-bold text-slate-700",children:[e.metrics.conversionRate,"%"]})]}),e.metrics.avgLatencyDays!=null&&n.jsxs("div",{children:[n.jsx("span",{className:"text-slate-400",children:""}),n.jsxs("span",{className:"ml-1.5 font-bold text-slate-700",children:[e.metrics.avgLatencyDays,""]})]})]}),t==="quality"&&n.jsxs("div",{className:"mx-4 mb-2 px-2.5 py-1.5 bg-amber-100/80 rounded text-[10px] text-amber-700 flex items-center gap-1",children:[n.jsx(Qa,{className:"h-3 w-3"}),"   ",e.metrics.topIssues?.length??0,""]}),t==="audit"&&n.jsxs("div",{className:"mx-4 mb-2 px-2.5 py-1.5 bg-purple-100/80 rounded text-[10px] text-purple-700 flex items-center gap-1",children:[n.jsx(Ol,{className:"h-3 w-3"})," : ",e.processing[0]?.version??"-"]}),p&&n.jsxs("div",{className:"px-4 pb-3 space-y-2.5 border-t border-slate-200/60 mt-1 pt-3",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-1",children:[n.jsx(Ic,{className:"h-3 w-3"})," "]}),n.jsx("div",{className:"flex flex-wrap gap-1",children:e.inputs.map(E=>n.jsx("span",{className:"inline-block bg-blue-100 text-blue-700 text-[10px] px-1.5 py-0.5 rounded",children:E.name},E.name))})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-1",children:[n.jsx(w8,{className:"h-3 w-3"})," /"]}),n.jsx("div",{className:"flex flex-wrap gap-1",children:e.processing.map(E=>n.jsxs("span",{className:"inline-flex items-center gap-1 bg-slate-100 text-slate-600 text-[10px] px-1.5 py-0.5 rounded",children:[E.name,E.version&&n.jsx("span",{className:"text-slate-400 font-mono",children:E.version})]},E.name))})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-1",children:[n.jsx(j0,{className:"h-3 w-3"})," "]}),n.jsx("div",{className:"flex flex-wrap gap-1",children:e.outputs.map(E=>n.jsx("span",{className:"inline-block bg-emerald-100 text-emerald-700 text-[10px] px-1.5 py-0.5 rounded font-mono",children:E.name},E.name))})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-1",children:[n.jsx(jO,{className:"h-3 w-3"})," "]}),e.transition.map((E,C)=>n.jsxs("p",{className:"text-[10px] text-slate-500 ml-4",children:[" ",E.to==="end"?"":E.to.toUpperCase(),": ",E.ruleLine]},C))]}),e.metrics.topIssues&&e.metrics.topIssues.length>0&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-1",children:[n.jsx(Qa,{className:"h-3 w-3"}),"  "]}),e.metrics.topIssues.map(E=>n.jsxs("div",{className:"flex items-center justify-between text-[10px] text-slate-500 ml-4",children:[n.jsx("span",{className:"font-mono text-slate-400",children:E.code}),n.jsx("span",{children:E.label}),n.jsx("span",{className:"font-bold text-slate-600",children:E.count.toLocaleString()})]},E.code))]})]})]});return o?j:n.jsxs(D5,{open:h,onOpenChange:x,delayDuration:180,children:[n.jsx(I5,{asChild:!0,children:j}),n.jsx(M5,{children:n.jsxs(L5,{side:"top",align:"end",sideOffset:8,collisionPadding:12,className:"z-50 p-0 bg-transparent border-0 shadow-none",children:[n.jsx(t8,{hoverMeta:s,dispatchState:i,onOpenDetail:v}),n.jsx($5,{className:"fill-white"})]})})]})}function A3e({stages:e,viewMode:t,selectedStage:r,batchMeta:a,dispatchLogs:s,onSelectStage:i,onOpenStageDetail:o}){const l=j3e(),d=g.useMemo(()=>e.reduce((u,p)=>(u[p.stageId]=w3e(p,a,s),u),{}),[e,a,s]);return n.jsx(P5,{delayDuration:180,children:n.jsx("div",{className:"flex items-stretch gap-3",children:e.map((u,p)=>{const m=d[u.stageId];return n.jsxs(Y.Fragment,{children:[n.jsx("div",{className:"flex-1 min-w-0",children:n.jsx(E3e,{stage:u,viewMode:t,isSelected:r===u.stageId,isBatchImpacted:!!a.impactedStages?.includes(W5[u.stageId]),hoverMeta:m.meta,dispatchState:m.dispatchState,isTouchDevice:l,onClick:()=>i(u.stageId),onOpenDetail:()=>o(u.stageId)})}),p<e.length-1&&n.jsx("div",{className:"flex items-center",children:n.jsx(j0,{className:"h-5 w-5 text-slate-300"})})]},u.stageId)})})})}const jb=[{key:"input",label:"INPUT SOURCES",labelKo:" ",color:"#3b82f6",bg:"#dbeafe",bgSoft:"bg-blue-50/40",borderColor:"border-blue-200",icon:Ic},{key:"feature",label:"FEATURE BUILDER",labelKo:" ",color:"#8b5cf6",bg:"#ede9fe",bgSoft:"bg-violet-50/40",borderColor:"border-violet-200",icon:LY},{key:"model",label:"MODELS & RULES",labelKo:" / ",color:"#f59e0b",bg:"#fef3c7",bgSoft:"bg-amber-50/40",borderColor:"border-amber-200",icon:w8},{key:"output",label:"OUTPUTS",labelKo:"",color:"#10b981",bg:"#d1fae5",bgSoft:"bg-emerald-50/40",borderColor:"border-emerald-200",icon:j0},{key:"dispatch",label:"DISPATCH",labelKo:"",color:"#2563eb",bg:"#dbeafe",bgSoft:"bg-blue-50/30",borderColor:"border-blue-200",icon:jl},{key:"ops",label:"DOWNSTREAM OPS",labelKo:" ",color:"#ef4444",bg:"#fee2e2",bgSoft:"bg-red-50/40",borderColor:"border-red-200",icon:jO}],lO={stage1:{bg:"bg-blue-100",text:"text-blue-600",label:"S1"},stage2:{bg:"bg-amber-100",text:"text-amber-600",label:"S2"},stage3:{bg:"bg-emerald-100",text:"text-emerald-600",label:"S3"},common:{bg:"bg-slate-100",text:"text-slate-500",label:""}};function C3e({node:e,meta:t,isSelected:r,isHovered:a,isConnected:s,dimmed:i,onSelect:o,onHover:l,onLeave:d}){const u=e.stageTag?lO[e.stageTag]:null;return n.jsxs("button",{onClick:o,onMouseEnter:l,onMouseLeave:d,className:`
        group relative w-full text-left rounded-lg border px-3 py-2.5
        transition-all duration-150 ease-out
        ${e.isExternal?"border-dashed":""}
        ${r?"shadow-md ring-2 ring-offset-1 text-white":a||s?"shadow-sm -translate-y-0.5":i?"opacity-30":"hover:shadow-sm hover:-translate-y-0.5"}
      `,style:{background:r?t.color:a?t.bg:"#ffffff",borderColor:r||a||s?t.color:e.isExternal?"#f59e0b":"#e2e8f0",...s&&!r&&!a?{borderColor:t.color,borderWidth:2}:{}},children:[u&&n.jsx("span",{className:`absolute -top-1.5 -left-1 text-[7px] font-bold px-1 py-px rounded ${r?"bg-white/30 text-white":`${u.bg} ${u.text}`}`,children:u.label}),e.isExternal&&!r&&n.jsx("span",{className:"absolute -top-1.5 -right-1 text-[7px] font-bold px-1 py-px rounded bg-amber-100 text-amber-600",children:""}),n.jsx("p",{className:`text-[11px] font-semibold leading-tight truncate ${r?"text-white":"text-slate-700"}`,children:e.label}),n.jsx("p",{className:`text-[9px] mt-0.5 leading-tight truncate ${r?"text-white/70":"text-slate-400"}`,children:e.shortDesc}),s&&!r&&n.jsx("span",{className:"absolute -top-1 -right-1 h-2.5 w-2.5 rounded-full ring-2 ring-white",style:{background:t.color}})]})}function _3e({nodes:e,edges:t,selectedNode:r,onSelectNode:a,viewMode:s}){const[i,o]=g.useState(null),l=g.useMemo(()=>{const x={};for(const y of e)(x[y.group]??=[]).push(y);return x},[e]),d=["stage1","stage2","stage3","common",void 0],u={stage1:"Stage 1",stage2:"Stage 2",stage3:"Stage 3",common:""},p=g.useMemo(()=>{const x={};for(const y of jb){const N=l[y.key]??[],v=[];for(const j of d){const E=N.filter(C=>(C.stageTag??void 0)===j);E.length>0&&v.push({tag:j??"etc",label:u[j??""]??"",nodes:E})}x[y.key]=v}return x},[l]),{connectedNodes:m}=g.useMemo(()=>{const x=i??r;if(!x)return{connectedNodes:new Set};const y=new Set;for(const N of t)(N.from===x||N.to===x)&&(y.add(N.from),y.add(N.to));return{connectedNodes:y}},[t,i,r]),h=i!=null||r!=null;return n.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:[n.jsx("div",{className:"grid grid-cols-6 border-b border-slate-100",children:jb.map(x=>{const y=x.icon;return n.jsxs("div",{className:`flex flex-col items-center gap-0.5 py-3 ${x.bgSoft} border-r last:border-r-0 ${x.borderColor}`,children:[n.jsx(y,{className:"h-4 w-4",style:{color:x.color}}),n.jsx("span",{className:"text-[10px] font-bold tracking-wider",style:{color:x.color},children:x.label}),n.jsx("span",{className:"text-[9px] text-slate-400",children:x.labelKo})]},x.key)})}),n.jsxs("div",{className:"relative",children:[n.jsx("svg",{className:"absolute inset-0 w-full h-full pointer-events-none z-0",preserveAspectRatio:"none"}),n.jsx("div",{className:"grid grid-cols-6 min-h-[420px]",children:jb.map((x,y)=>{const N=p[x.key]??[];return n.jsx("div",{className:`flex flex-col gap-1.5 p-3 ${x.bgSoft} ${y<jb.length-1?`border-r ${x.borderColor}`:""}`,children:N.map((v,j)=>n.jsxs(Y.Fragment,{children:[v.label&&n.jsx("div",{className:`flex items-center gap-1 ${j>0?"mt-2 pt-2 border-t border-dashed border-slate-200/60":""}`,children:n.jsx("span",{className:`text-[8px] font-bold px-1 py-px rounded ${lO[v.tag]?.bg??"bg-slate-100"} ${lO[v.tag]?.text??"text-slate-400"}`,children:v.label})}),v.nodes.map(E=>{const C=r===E.id,A=i===E.id,S=m.has(E.id);return n.jsx(C3e,{node:E,meta:x,isSelected:C,isHovered:A,isConnected:S&&!C&&!A,dimmed:h&&!S&&!C&&!A,onSelect:()=>a(E.id),onHover:()=>o(E.id),onLeave:()=>o(null)},E.id)})]},v.tag))},x.key)})})]}),(i||r)&&(()=>{const x=i??r,y=e.find(v=>v.id===x),N=t.filter(v=>v.from===x||v.to===x);return!y||N.length===0?null:n.jsxs("div",{className:"border-t border-slate-100 bg-slate-50/80 px-4 py-2.5",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[n.jsx("span",{className:"text-[10px] font-bold text-slate-600",children:y.label}),n.jsx("span",{className:"text-[9px] text-slate-400",children:"  "})]}),n.jsx("div",{className:"flex flex-wrap gap-1.5",children:N.map(v=>{const j=v.from===x,E=j?v.to:v.from,C=e.find(A=>A.id===E);return n.jsxs("span",{className:"inline-flex items-center gap-1 text-[9px] bg-white border border-slate-200 rounded px-2 py-0.5 text-slate-500",children:[j?"":"",n.jsx("span",{className:"font-medium text-slate-700",children:C?.label??E}),v.label&&n.jsxs("span",{className:"text-slate-300",children:["(",v.label,")"]})]},`${v.from}-${v.to}`)})})]})})(),s==="quality"&&n.jsxs("div",{className:"border-t border-amber-200 bg-amber-50 px-4 py-2 text-[10px] text-amber-700 flex items-center gap-1.5",children:[n.jsx(Qa,{className:"h-3 w-3"})," :      "]}),s==="audit"&&n.jsxs("div",{className:"border-t border-purple-200 bg-purple-50 px-4 py-2 text-[10px] text-purple-700 flex items-center gap-1.5",children:[n.jsx(Ol,{className:"h-3 w-3"})," :    /   Inspector "]})]})}const T3e=[{id:"definition",label:"",icon:EX},{id:"contract",label:" ",icon:Ic},{id:"quality",label:"/",icon:Ol}];function O3e({content:e,viewMode:t,selectedContext:r,stages:a,batchMeta:s,dispatchLogs:i,focusMode:o,focusNonce:l}){const[d,u]=g.useState("definition"),p=g.useRef(null),m=g.useMemo(()=>{const j={};for(const E of a)j[E.stageId]=E;return j},[a]),h=r?m[r]:null,x=h?W5[h.stageId]:null,y=x?i.filter(j=>j.stage===x):[],N=x?LW(x,s,i):null,v=!!h;return g.useEffect(()=>{o==="stage-detail"&&v&&(l<1||(u("quality"),requestAnimationFrame(()=>{p.current?.scrollTo({top:0,behavior:"smooth"})})))},[o,l,v]),e?n.jsxs("div",{className:"flex flex-col h-full",children:[n.jsxs("div",{className:"border-b border-slate-200 px-4 pt-3 pb-0",children:[n.jsxs("p",{className:"text-xs font-bold text-slate-700 mb-2 flex items-center gap-1.5",children:[n.jsx(tX,{className:"h-3.5 w-3.5 text-blue-500"}),e.id]}),n.jsx("div",{className:"flex gap-1",children:T3e.map(j=>{const E=j.icon;return n.jsxs("button",{onClick:()=>u(j.id),className:`flex items-center gap-1 px-2.5 py-1.5 text-[11px] font-medium rounded-t-md transition ${d===j.id?"bg-white border border-b-0 border-slate-200 text-slate-800 -mb-px":"text-slate-400 hover:text-slate-600"}`,children:[n.jsx(E,{className:"h-3 w-3"}),j.label]},j.id)})})]}),n.jsxs("div",{ref:p,className:"flex-1 overflow-y-auto p-4 text-xs leading-relaxed space-y-3",children:[d==="definition"&&n.jsxs(n.Fragment,{children:[n.jsx(Va,{title:" ",children:n.jsx("p",{className:"text-slate-600",children:e.definition.what})}),n.jsx(Va,{title:" ",children:n.jsx("p",{className:"text-slate-600",children:e.definition.why})}),n.jsx(Va,{title:" ",children:n.jsx("div",{className:"flex flex-wrap gap-1",children:e.definition.whereUsed.map(j=>n.jsx("span",{className:"bg-blue-50 text-blue-700 px-1.5 py-0.5 rounded text-[10px]",children:j},j))})}),n.jsx(Va,{title:" ",children:n.jsxs("p",{className:"text-slate-600 font-medium bg-amber-50 px-2 py-1.5 rounded border border-amber-200",children:[" ",e.definition.responsibility]})}),e.batchSummary&&n.jsx(Va,{title:"  ",children:n.jsxs("div",{className:"space-y-1.5",children:[e.batchSummary.impactedStages&&e.batchSummary.impactedStages.length>0&&n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("span",{className:"text-slate-400",children:" Stage"}),e.batchSummary.impactedStages.map(j=>n.jsx("span",{className:"rounded bg-amber-100 px-1.5 py-0.5 text-[10px] font-semibold text-amber-700",children:j},j))]}),e.batchSummary.receiveRate!=null&&n.jsxs("p",{className:"text-slate-600",children:["  : ",n.jsxs("span",{className:"font-semibold",children:[e.batchSummary.receiveRate,"%"]})]}),e.batchSummary.missingInstitutionCount!=null&&n.jsxs("p",{className:"text-slate-600",children:["  : ",n.jsxs("span",{className:"font-semibold",children:[e.batchSummary.missingInstitutionCount,""]})]}),e.batchSummary.expectedRetryAt&&n.jsxs("p",{className:"text-slate-600",children:["  : ",n.jsx("span",{className:"font-semibold",children:e.batchSummary.expectedRetryAt})]})]})})]}),d==="contract"&&n.jsxs(n.Fragment,{children:[e.dataContract.inputs&&n.jsx(Va,{title:" ",children:n.jsxs("table",{className:"w-full text-[10px]",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"text-slate-400 border-b border-slate-100",children:[n.jsx("th",{className:"text-left py-1",children:""}),n.jsx("th",{className:"text-left py-1",children:""}),n.jsx("th",{className:"text-center py-1",children:"null"}),n.jsx("th",{className:"text-left py-1",children:""})]})}),n.jsx("tbody",{children:e.dataContract.inputs.map(j=>n.jsxs("tr",{className:"border-b border-slate-50",children:[n.jsx("td",{className:"py-1 font-mono text-slate-700",children:j.field}),n.jsx("td",{className:"py-1 text-slate-500",children:j.type}),n.jsx("td",{className:"py-1 text-center",children:j.nullable?"":""}),n.jsx("td",{className:"py-1 text-slate-400",children:j.note??""})]},j.field))})]})}),e.dataContract.outputs&&n.jsx(Va,{title:" ",children:n.jsxs("table",{className:"w-full text-[10px]",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"text-slate-400 border-b border-slate-100",children:[n.jsx("th",{className:"text-left py-1",children:""}),n.jsx("th",{className:"text-left py-1",children:""}),n.jsx("th",{className:"text-center py-1",children:"null"}),n.jsx("th",{className:"text-left py-1",children:""})]})}),n.jsx("tbody",{children:e.dataContract.outputs.map(j=>n.jsxs("tr",{className:"border-b border-slate-50",children:[n.jsx("td",{className:"py-1 font-mono text-slate-700",children:j.field}),n.jsx("td",{className:"py-1 text-slate-500",children:j.type}),n.jsx("td",{className:"py-1 text-center",children:j.nullable?"":""}),n.jsx("td",{className:"py-1 text-slate-400",children:j.note??""})]},j.field))})]})}),e.dataContract.refreshCadence&&n.jsx(Va,{title:" ",children:n.jsxs("span",{className:"inline-flex items-center gap-1 bg-slate-100 text-slate-600 px-2 py-1 rounded",children:[n.jsx(Sl,{className:"h-3 w-3"}),e.dataContract.refreshCadence]})})]}),d==="quality"&&n.jsxs(n.Fragment,{children:[v&&h&&N&&n.jsxs(n.Fragment,{children:[n.jsx(Va,{title:"Daily Batch Timeline",children:n.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 p-2.5 text-[11px] text-slate-600 space-y-1",children:[n.jsxs("p",{className:"flex items-center justify-between",children:[n.jsx("span",{children:h.examLabel}),n.jsx("span",{className:`rounded border px-1.5 py-0.5 text-[10px] font-semibold ${Lv[N].badgeClass}`,children:Lv[N].label})]}),n.jsxs("p",{children:["(D-1): ",s.baseDate]}),n.jsxs("p",{children:["  ",s.receiveDeadline,"   ",s.modelWindow,"   ",s.dispatchTime]}),s.impactedStages?.includes(x)&&n.jsxs("p",{className:"text-amber-700",children:["   Stage (",x,")"]})]})}),n.jsx(Va,{title:"Model Meta",children:n.jsxs("div",{className:"rounded-md border border-slate-200 bg-white p-2.5 text-[11px] text-slate-600 space-y-1",children:[h.processing.map(j=>n.jsxs("p",{children:[j.name,j.version?n.jsx("span",{className:"ml-1 text-slate-400 font-mono",children:j.version}):null]},j.name)),n.jsx("p",{className:"text-slate-500",children:h.stageId==="stage2"?"  =   /   = ()":h.stageId==="stage3"?"      ":" /  "})]})}),n.jsx(Va,{title:"Dispatch Log",children:n.jsxs("table",{className:"w-full text-[10px]",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"text-slate-400 border-b border-slate-100",children:[n.jsx("th",{className:"text-left py-1",children:""}),n.jsx("th",{className:"text-right py-1",children:""}),n.jsx("th",{className:"text-right py-1",children:"/"}),n.jsx("th",{className:"text-left py-1",children:"SLA"})]})}),n.jsxs("tbody",{children:[y.map(j=>n.jsxs("tr",{className:"border-b border-slate-50 text-slate-600",children:[n.jsx("td",{className:"py-1",children:j.destination}),n.jsx("td",{className:"py-1 text-right",children:j.sentCount.toLocaleString()}),n.jsxs("td",{className:"py-1 text-right",children:[j.failedCount,"/",j.retryCount]}),n.jsx("td",{className:"py-1",children:j.slaStatus})]},`${j.stage}-${j.destination}`)),y.length===0&&n.jsx("tr",{children:n.jsx("td",{className:"py-2 text-slate-400",colSpan:4,children:"  ."})})]})]})})]}),!v&&e.batchSummary?.impactedMetrics&&e.batchSummary.impactedMetrics.length>0&&n.jsx(Va,{title:" ",children:n.jsx("div",{className:"flex flex-wrap gap-1",children:e.batchSummary.impactedMetrics.map(j=>n.jsx("span",{className:"rounded bg-amber-100 px-1.5 py-0.5 text-[10px] font-medium text-amber-700",children:j},j))})}),e.qualityAudit.missingRate!=null&&n.jsx(Va,{title:" ",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"flex-1 bg-slate-100 rounded-full h-2",children:n.jsx("div",{className:`h-2 rounded-full ${e.qualityAudit.missingRate>5?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${Math.min(e.qualityAudit.missingRate*5,100)}%`}})}),n.jsxs("span",{className:"text-slate-600 font-bold",children:[e.qualityAudit.missingRate,"%"]})]})}),e.qualityAudit.driftSignals&&e.qualityAudit.driftSignals.length>0&&n.jsx(Va,{title:"Drift ",children:e.qualityAudit.driftSignals.map(j=>n.jsxs("div",{className:"flex items-start gap-2 bg-slate-50 p-2 rounded mb-1",children:[n.jsx(r8,{level:j.level}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-slate-700",children:j.name}),n.jsx("p",{className:"text-slate-400",children:j.note})]})]},j.name))}),e.qualityAudit.biasAlerts&&e.qualityAudit.biasAlerts.length>0&&n.jsx(Va,{title:" ",children:e.qualityAudit.biasAlerts.map(j=>n.jsxs("div",{className:"flex items-start gap-2 bg-slate-50 p-2 rounded mb-1",children:[n.jsx(r8,{level:j.level}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-slate-700",children:j.group}),n.jsx("p",{className:"text-slate-400",children:j.note})]})]},j.group))}),e.qualityAudit.changeLog&&e.qualityAudit.changeLog.length>0&&n.jsx(Va,{title:" ",children:n.jsx("div",{className:"space-y-1.5",children:e.qualityAudit.changeLog.map(j=>n.jsx("div",{className:"flex items-start gap-2 border-l-2 border-blue-300 pl-2.5",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-mono font-semibold text-blue-600",children:j.version}),n.jsx("span",{className:"text-slate-400",children:j.date})]}),n.jsx("p",{className:"text-slate-600",children:j.summary}),j.impact&&n.jsxs("p",{className:"text-slate-400 mt-0.5",children:[": ",j.impact]})]})},j.version+j.date))})}),!v&&e.batchSummary?.dispatchLogs&&e.batchSummary.dispatchLogs.length>0&&n.jsx(Va,{title:"DISPATCH ",children:n.jsxs("table",{className:"w-full text-[10px]",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"text-slate-400 border-b border-slate-100",children:[n.jsx("th",{className:"text-left py-1",children:"Stage"}),n.jsx("th",{className:"text-left py-1",children:""}),n.jsx("th",{className:"text-right py-1",children:""}),n.jsx("th",{className:"text-right py-1",children:"/"}),n.jsx("th",{className:"text-left py-1",children:"SLA"})]})}),n.jsx("tbody",{children:e.batchSummary.dispatchLogs.map(j=>n.jsxs("tr",{className:"border-b border-slate-50 text-slate-600",children:[n.jsx("td",{className:"py-1 font-semibold",children:j.stage}),n.jsx("td",{className:"py-1",children:j.destination}),n.jsx("td",{className:"py-1 text-right",children:j.sentCount.toLocaleString()}),n.jsxs("td",{className:"py-1 text-right",children:[j.failedCount,"/",j.retryCount]}),n.jsx("td",{className:"py-1",children:j.slaStatus})]},`${j.stage}-${j.destination}`))})]})})]})]})]}):n.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400 text-xs p-6",children:[n.jsx(Im,{className:"h-8 w-8 mb-2 text-slate-300"}),n.jsx("p",{children:"     "}),n.jsx("p",{children:"    ."})]})}function Va({title:e,children:t}){return n.jsxs("div",{children:[n.jsx("h4",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-1.5",children:e}),t]})}function r8({level:e}){const t={low:"bg-emerald-100 text-emerald-700",mid:"bg-amber-100 text-amber-700",high:"bg-red-100 text-red-700"};return n.jsx("span",{className:`inline-block text-[9px] font-bold px-1.5 py-0.5 rounded ${t[e]}`,children:e.toUpperCase()})}function k3e(){const[e,t]=g.useState("ops"),[r,a]=g.useState(null),[s,i]=g.useState("default"),[o,l]=g.useState(0),d=c0,u=g.useRef({}),p=g.useCallback(y=>{a(y),i("default"),u.current[y]?.scrollIntoView({behavior:"smooth",block:"center"})},[]),m=g.useCallback(y=>{a(y),i("default")},[]),h=g.useCallback(y=>{a(y),i("stage-detail"),l(N=>N+1),u.current[y]?.scrollIntoView({behavior:"smooth",block:"center"})},[]),x=r?p3e[r]??null:null;return n.jsxs("div",{className:"h-full flex flex-col overflow-hidden bg-slate-50",children:[n.jsxs("div",{className:"bg-slate-700 text-slate-300 text-[10px] text-center py-1.5 px-4 flex-shrink-0",children:[n.jsx(Dm,{className:"inline h-3 w-3 mr-1 -mt-0.5"}),"      ,     .        ."]}),n.jsxs("div",{className:"flex items-center justify-between px-5 py-3 bg-white border-b border-slate-200 flex-shrink-0",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("h1",{className:"text-base font-bold text-slate-800",children:"  "}),n.jsx("span",{className:"text-[10px] text-slate-400 bg-slate-100 px-2 py-0.5 rounded",children:" : 2026-02-13 09:00"})]}),n.jsx(h3e,{mode:e,onChange:t})]}),n.jsx(x3e,{meta:d,onOpenDetail:()=>m("batch-cycle")}),n.jsxs("div",{className:"flex-1 flex min-h-0 overflow-hidden",children:[n.jsxs("div",{className:"flex-1 overflow-y-auto p-5 space-y-5",children:[n.jsxs("section",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx("h2",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Pipeline KPI"}),n.jsx("span",{className:"text-[9px] bg-slate-100 text-slate-400 px-1.5 py-0.5 rounded",children:e==="ops"?" ":e==="quality"?" ":" "})]}),n.jsx(N3e,{kpis:u3e,viewMode:e,onJump:p})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-3",children:"3  "}),n.jsx("div",{ref:y=>{u.current.stage1=y}}),n.jsx(A3e,{stages:pC,viewMode:e,batchMeta:d,dispatchLogs:mm,selectedStage:r,onSelectStage:m,onOpenStageDetail:h}),pC.map(y=>n.jsx("div",{ref:N=>{u.current[y.stageId]=N}},y.stageId))]}),n.jsxs("section",{children:[n.jsxs("h2",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-3 flex items-center gap-2",children:["Model Use Map    ",n.jsx("span",{className:"text-[9px] bg-slate-100 text-slate-400 px-1.5 py-0.5 rounded font-normal normal-case",children:"    Inspector "})]}),n.jsx(_3e,{nodes:f3e,edges:m3e,selectedNode:r,onSelectNode:m,viewMode:e})]}),n.jsxs("section",{className:"bg-white rounded-xl border border-slate-200 p-4",children:[n.jsxs("h3",{className:"text-xs font-bold text-slate-700 mb-2 flex items-center gap-1.5",children:[n.jsx(Dm,{className:"h-3.5 w-3.5 text-amber-500"}),"Stage 2      "]}),n.jsx("div",{className:"rounded-lg border border-amber-200 bg-amber-50 px-3 py-2 mb-3 text-[11px] font-semibold text-amber-700",children:"  =      = ()"}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 text-[11px]",children:[n.jsxs("div",{className:"bg-amber-50 rounded-lg p-3 border border-amber-200",children:[n.jsx("p",{className:"font-semibold text-amber-700 mb-1",children:"2   (  )"}),n.jsx("p",{className:"text-amber-600",children:"    (AD / MCI / )"}),n.jsx("p",{className:"text-amber-500 mt-1 italic",children:"  /  "})]}),n.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 border border-blue-200",children:[n.jsx("p",{className:"font-semibold text-blue-700 mb-1",children:"  "}),n.jsx("p",{className:"text-blue-600",children:" /  /  "}),n.jsx("p",{className:"text-blue-500 mt-1 italic",children:"   ,  "})]})]}),d.status==="partial"&&n.jsxs("p",{className:"mt-3 text-[11px] text-amber-700",children:["  :  ",d.receiveRate,"%    ",d.missingInstitutionCount,"    ",d.expectedRetryAt]})]}),n.jsxs("section",{className:"bg-slate-100/50 rounded-xl border border-slate-200 p-4",children:[n.jsxs("h3",{className:"text-xs font-bold text-slate-600 mb-2 flex items-center gap-1.5",children:[n.jsx(C8,{className:"h-3.5 w-3.5"}),"View Mode "]}),n.jsxs("div",{className:"grid grid-cols-3 gap-3 text-[10px]",children:[n.jsxs("div",{className:`p-2.5 rounded-lg border ${e==="ops"?"bg-blue-50 border-blue-300":"bg-white border-slate-200"}`,children:[n.jsx("p",{className:"font-semibold text-blue-700",children:" "}),n.jsx("p",{className:"text-slate-500 mt-0.5",children:", , , "})]}),n.jsxs("div",{className:`p-2.5 rounded-lg border ${e==="quality"?"bg-amber-50 border-amber-300":"bg-white border-slate-200"}`,children:[n.jsx("p",{className:"font-semibold text-amber-700",children:" "}),n.jsx("p",{className:"text-slate-500 mt-0.5",children:", drift,  "})]}),n.jsxs("div",{className:`p-2.5 rounded-lg border ${e==="audit"?"bg-purple-50 border-purple-300":"bg-white border-slate-200"}`,children:[n.jsx("p",{className:"font-semibold text-purple-700",children:" "}),n.jsx("p",{className:"text-slate-500 mt-0.5",children:"/ ,  , SLA"})]})]})]})]}),n.jsx("div",{className:"w-80 border-l border-slate-200 bg-white flex-shrink-0",children:n.jsx(O3e,{content:x,viewMode:e,selectedContext:r,stages:pC,batchMeta:d,dispatchLogs:mm,focusMode:s,focusNonce:o})})]})]})}function R3e(){return n.jsx(k3e,{})}const P3e=720*60*60*1e3,$W={Stage1:["signalQuality","bottleneckRisk"],Stage2:["dataReadiness","bottleneckRisk"],Stage3:["governanceSafety","dataQuality"]},hC={signalQuality:{label:"",chipClass:"bg-blue-50 text-blue-700 border-blue-200",stroke:"#2563eb"},policyImpact:{label:"",chipClass:"bg-violet-50 text-violet-700 border-violet-200",stroke:"#7c3aed"},bottleneckRisk:{label:"",chipClass:"bg-red-50 text-red-700 border-red-200",stroke:"#dc2626"},dataReadiness:{label:" ",chipClass:"bg-emerald-50 text-emerald-700 border-emerald-200",stroke:"#059669"},dataQuality:{label:" ",chipClass:"bg-cyan-50 text-cyan-700 border-cyan-200",stroke:"#0891b2"},governanceSafety:{label:"",chipClass:"bg-amber-50 text-amber-700 border-amber-200",stroke:"#d97706"}},D3e={model_version_change:"  ",rule_parameter_change:"  ",guardrail_change:"Guardrail "},I3e={none:{label:" ",className:"bg-slate-100 text-slate-600 border-slate-200"},watch:{label:"",className:"bg-amber-50 text-amber-700 border-amber-200"},warning:{label:"",className:"bg-red-50 text-red-700 border-red-200"}},M3e={rule_threshold:"Stage1",model_version:"Stage2",ruleset:"Stage2",contact_rule:"Stage3"},L3e={rule_threshold:"rule_parameter_change",model_version:"model_version_change",ruleset:"guardrail_change",contact_rule:"guardrail_change"},$3e={chg_20260124:{stage:"Stage1",changeType:"rule_parameter_change",targetName:"L2  ",summaryLine:"60~64        .",scope:"",scopeDetail:" 6 ",beforeLabel:"",beforeValue:"  65  L2",afterLabel:"",afterValue:"  60  L2 ()",reason:" 3  60~64          .",observedKpis:["policyImpact"],sparklineByKpi:{signalQuality:[89.8,89.7,89.8,89.8,89.9,89.8,89.8],bottleneckRisk:[41.5,41.7,41.8,41.9,41.8,41.8,41.9],policyImpact:[24,24.8,25.6,26.1,26.4,26.2,26]},deltaPpByKpi:{signalQuality:0,bottleneckRisk:.4,policyImpact:2},topRegions:[" "," "," "]},chg_20260120:{stage:"Stage1",changeType:"rule_parameter_change",targetName:"L2  ",summaryLine:"    Stage1    .",scope:"",scopeDetail:" 17 ",beforeLabel:"",beforeValue:"  60  L2",afterLabel:"",afterValue:"  65  L2",observedKpis:["policyImpact"],sparklineByKpi:{signalQuality:[88.9,89.1,89.3,89.5,89.7,89.8,89.8],bottleneckRisk:[44,43.4,42.9,42.3,41.9,41.5,41.1],policyImpact:[31.2,30.4,29.8,29.1,28.8,28.5,28.1]},deltaPpByKpi:{signalQuality:.9,bottleneckRisk:-2.9,policyImpact:-3.1},topRegions:[" "," "," "]},chg_20260115:{stage:"Stage3",changeType:"guardrail_change",targetName:"L3  ",summaryLine:"    /   .",scope:"",scopeDetail:"",beforeLabel:" ",beforeValue:" 7 ",afterLabel:" ",afterValue:" 5 ",observedKpis:["policyImpact"],sparklineByKpi:{governanceSafety:[95,95.1,95.3,95.6,95.8,95.9,96.1],dataQuality:[94.2,94.4,94.5,94.6,94.8,94.8,94.9],policyImpact:[27.5,27.2,27,26.8,26.6,26.4,26.3]},deltaPpByKpi:{governanceSafety:1.1,dataQuality:.7,policyImpact:-1.2},topRegions:[" "," "," "]},chg_20260110:{stage:"Stage2",changeType:"model_version_change",targetName:"  ",summaryLine:"    Stage2     .",scope:"",scopeDetail:" 17 ",beforeLabel:" ",beforeValue:"v3.1.4",afterLabel:" ",afterValue:"v3.2.0",observedKpis:["policyImpact"],sparklineByKpi:{dataReadiness:[93.2,93.3,93.5,93.6,93.7,93.8,93.8],bottleneckRisk:[45,44.3,43.8,43.4,43,42.7,42.4],policyImpact:[25.4,24.8,24.2,23.8,23.2,22.8,22.3]},deltaPpByKpi:{dataReadiness:.6,bottleneckRisk:-2.6,policyImpact:-3.1},topRegions:[" "," "," "]},chg_20260105:{stage:"Stage2",changeType:"rule_parameter_change",targetName:"  ",summaryLine:"       .",scope:"",scopeDetail:" 17 ",beforeLabel:"",beforeValue:"1.20",afterLabel:"",afterValue:"1.35 ( 1.20 )",observedKpis:["policyImpact"],sparklineByKpi:{dataReadiness:[93.5,93.3,93.1,92.9,93,93.2,93.4],bottleneckRisk:[40.2,43.6,46.8,48.1,47.4,44,41.4],policyImpact:[34,39.2,46.4,52.1,57.2,50.6,41.3]},deltaPpByKpi:{dataReadiness:-.1,bottleneckRisk:1.2,policyImpact:7.3},topRegions:[" "," "," "]}};function F3e(e){const t=new Date(e);return{date:t.toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"}),time:t.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!1})}}function B3e(e){return Array.from(new Set(e))}function U3e(e){const t=Math.max(0,...e.impactSummary.map(r=>Math.abs(r.changePp)));return e.status==="rollback"||t>=2?"warning":t>=.5||e.status==="deployed"?"watch":"none"}function H3e(e){const t=M3e[e.type],r=$W[t];return{stage:t,changeType:L3e[e.type],targetName:e.title,summaryLine:"KPI       .",scope:e.affectedRegions[0]===""?"":"",scopeDetail:e.affectedRegions.join(", "),beforeLabel:"",beforeValue:e.version,afterLabel:"",afterValue:e.version,reason:e.reason,observedKpis:["policyImpact"],sparklineByKpi:{[r[0]]:[0,0,0,0,0,0,0],[r[1]]:[0,0,0,0,0,0,0],policyImpact:[0,0,0,0,0,0,0]},deltaPpByKpi:{[r[0]]:0,[r[1]]:0,policyImpact:0},topRegions:e.affectedRegions.slice(0,3)}}function G3e(e,t){const r=e.replace("#",""),a=r.length===3?r.split("").map(l=>l+l).join(""):r.padEnd(6,"0").slice(0,6),s=parseInt(a.slice(0,2),16),i=parseInt(a.slice(2,4),16),o=parseInt(a.slice(4,6),16);return`rgba(${s}, ${i}, ${o}, ${t})`}function K3e(e){if(!e.length)return"";if(e.length===1)return`M ${e[0].x} ${e[0].y}`;const t=[`M ${e[0].x} ${e[0].y}`];for(let r=0;r<e.length-1;r+=1){const a=e[r],s=e[r+1],i=(a.x+s.x)/2;t.push(`C ${i} ${a.y}, ${i} ${s.y}, ${s.x} ${s.y}`)}return t.join(" ")}function z3e(e,t,r){if(!e||t.length<2)return"";const a=t[0],s=t[t.length-1];return`${e} L ${s.x} ${r} L ${a.x} ${r} Z`}function q3e({points:e,stroke:t,chartId:r}){if(e.length<2)return n.jsx("div",{className:"h-20 w-full rounded-lg border border-slate-100 bg-slate-50"});const a=r.replace(/[^a-zA-Z0-9_-]/g,""),s=4,i=32,o=31,l=Math.max(...e),d=Math.min(...e),u=l-d||1,p=100/(e.length-1),m=e.map((v,j)=>({x:Number((j*p).toFixed(2)),y:Number((i-(v-d)/u*(i-s)).toFixed(2))})),h=K3e(m),x=z3e(h,m,o),y=m[m.length-1],N=m[0];return n.jsxs("div",{className:"rounded-lg border border-slate-100 bg-white p-2",children:[n.jsxs("svg",{viewBox:"0 0 100 34",className:"h-16 w-full",children:[n.jsxs("defs",{children:[n.jsxs("linearGradient",{id:`fill-${a}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:"0%",stopColor:t,stopOpacity:"0.32"}),n.jsx("stop",{offset:"100%",stopColor:t,stopOpacity:"0.02"})]}),n.jsxs("radialGradient",{id:`halo-${a}`,cx:"50%",cy:"50%",r:"50%",children:[n.jsx("stop",{offset:"0%",stopColor:t,stopOpacity:"0.42"}),n.jsx("stop",{offset:"100%",stopColor:t,stopOpacity:"0"})]})]}),[6,14,22,30].map(v=>n.jsx("line",{x1:0,y1:v,x2:100,y2:v,stroke:"#e2e8f0",strokeDasharray:"2.5 2.5",strokeWidth:.6},`${a}-grid-${v}`)),n.jsx("path",{d:x,fill:`url(#fill-${a})`}),n.jsx("path",{d:h,fill:"none",stroke:t,strokeWidth:2.1,strokeLinecap:"round"}),n.jsx("circle",{cx:N.x,cy:N.y,r:1.6,fill:"#ffffff",stroke:t,strokeWidth:1.2}),n.jsx("circle",{cx:y.x,cy:y.y,r:4.6,fill:`url(#halo-${a})`}),n.jsx("circle",{cx:y.x,cy:y.y,r:2.1,fill:"#ffffff",stroke:t,strokeWidth:1.4})]}),n.jsxs("div",{className:"mt-1.5 flex items-center justify-between text-[10px] text-slate-500",children:[n.jsxs("span",{children:["D1 ",e[0].toFixed(1)]}),n.jsxs("span",{children:[d.toFixed(1)," ~ ",l.toFixed(1)]}),n.jsxs("span",{children:["D7 ",e[e.length-1].toFixed(1)]})]})]})}function W3e({context:e,onNavigate:t}){const[r,a]=g.useState(e?.changeId??""),[s,i]=g.useState({}),[o,l]=g.useState([]);g.useEffect(()=>{let m=!1;return xW().then(h=>{m||l(h)}).catch(()=>{m||l([])}),()=>{m=!0}},[]);const d=g.useMemo(()=>[...o].sort((m,h)=>new Date(h.deployedAt).getTime()-new Date(m.deployedAt).getTime()).map(m=>{const h=$3e[m.id]??H3e(m),x=$W[h.stage],y=B3e([...x,...h.observedKpis]);return{event:m,extension:h,stageLinkedKpis:x,impactKpis:y,impactStatus:U3e(m),rollback:m.status==="rollback"}}),[o]);g.useEffect(()=>{e?.changeId&&a(e.changeId)},[e?.changeId]),g.useEffect(()=>{if(!d.length)return;d.some(h=>h.event.id===r)||a(d[0].event.id)},[d,r]);const u=g.useMemo(()=>d.find(m=>m.event.id===r)??d[0]??null,[d,r]),p=g.useMemo(()=>{const m=Date.now(),h=d.filter(E=>m-new Date(E.event.deployedAt).getTime()<=P3e),x=h.length>0?h:d,y=x.filter(E=>E.impactStatus!=="none").length,N=x.filter(E=>E.rollback).length,v={Stage1:0,Stage2:0,Stage3:0};x.forEach(E=>{v[E.extension.stage]+=1});const j=x.length?Number((y/x.length*100).toFixed(1)):0;return{recentCount:x.length,impactRatio:j,rollbackCount:N,stageDistribution:v}},[d]);return u?n.jsxs("div",{className:"space-y-4 p-1",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"/   "}),n.jsx("p",{className:"mt-1 text-xs text-slate-500",children:" ,    KPI  Stage1~3    ."})]}),n.jsx("div",{className:"sticky top-0 z-10 rounded-xl border border-slate-200 bg-white/95 px-4 py-3 backdrop-blur",children:n.jsxs("div",{className:"flex flex-wrap items-center gap-x-6 gap-y-2 text-xs text-slate-700",children:[n.jsxs("span",{children:[" 30   ",n.jsxs("strong",{className:"ml-1 text-slate-900",children:[p.recentCount,""]})]}),n.jsxs("span",{children:[" KPI   ",n.jsxs("strong",{className:"ml-1 text-slate-900",children:[p.impactRatio,"%"]})]}),n.jsxs("span",{children:["   ",n.jsxs("strong",{className:"ml-1 text-slate-900",children:[p.rollbackCount,""]})]}),n.jsxs("span",{children:["Stage  "," ",n.jsxs("strong",{className:"ml-1 text-slate-900",children:["Stage1 ",p.stageDistribution.Stage1,"  Stage2 ",p.stageDistribution.Stage2,"  Stage3 ",p.stageDistribution.Stage3]})]})]})}),n.jsxs(Cr,{children:[n.jsxs(Nn,{className:"pb-2",children:[n.jsx(Sn,{className:"text-sm",children:"  (KPI  )"}),n.jsx("p",{className:"text-[11px] text-slate-500",children:"       KPI   ."})]}),n.jsx(_r,{className:"p-0",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-[1200px] w-full text-xs",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-y border-slate-200 bg-slate-50 text-slate-600",children:[n.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:""}),n.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:" "}),n.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:"Stage"}),n.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:" /"}),n.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:" "}),n.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:" KPI"}),n.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:" "}),n.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:" "})]})}),n.jsx("tbody",{children:d.map(m=>{const h=u.event.id===m.event.id,{date:x,time:y}=F3e(m.event.deployedAt),N=!!s[m.event.id],v=I3e[m.impactStatus];return n.jsxs(Y.Fragment,{children:[n.jsxs("tr",{onClick:()=>a(m.event.id),className:`cursor-pointer border-b border-slate-100 transition-colors ${h?"bg-blue-50/40":"hover:bg-slate-50"}`,children:[n.jsx("td",{className:"px-3 py-2 align-top",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx("button",{onClick:j=>{j.stopPropagation(),i(E=>({...E,[m.event.id]:!E[m.event.id]}))},className:"mt-0.5 rounded p-0.5 text-slate-500 hover:bg-slate-100","aria-label":"  ",children:N?n.jsx(gs,{className:"h-3.5 w-3.5"}):n.jsx(ei,{className:"h-3.5 w-3.5"})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-slate-900",children:x}),n.jsx("div",{className:"text-[11px] text-slate-500",children:y})]})]})}),n.jsx("td",{className:"px-3 py-2 align-top text-slate-700",children:D3e[m.extension.changeType]}),n.jsx("td",{className:"px-3 py-2 align-top",children:n.jsx("span",{className:"inline-flex rounded border border-slate-200 bg-white px-2 py-0.5 text-[11px] font-medium text-slate-700",children:m.extension.stage})}),n.jsx("td",{className:"px-3 py-2 align-top font-medium text-slate-900",children:m.extension.targetName}),n.jsx("td",{className:"px-3 py-2 align-top text-slate-700",children:m.extension.summaryLine}),n.jsx("td",{className:"px-3 py-2 align-top",children:n.jsx("div",{className:"flex flex-wrap gap-1",children:m.impactKpis.map(j=>{const E=hC[j];return n.jsx("span",{className:`inline-flex rounded border px-1.5 py-0.5 text-[10px] font-medium ${E.chipClass}`,children:E.label},`${m.event.id}-${j}`)})})}),n.jsx("td",{className:"px-3 py-2 align-top",children:n.jsx("span",{className:`inline-flex rounded border px-2 py-0.5 text-[11px] font-medium ${v.className}`,children:v.label})}),n.jsx("td",{className:"px-3 py-2 align-top",children:m.rollback?n.jsx("span",{className:"text-[11px] font-semibold text-red-600",children:""}):n.jsx("span",{className:"text-[11px] text-slate-400",children:""})})]}),N&&n.jsx("tr",{className:"border-b border-slate-100 bg-slate-50/70",children:n.jsxs("td",{colSpan:8,className:"px-4 py-3",children:[n.jsx("div",{className:"text-[11px] font-semibold text-slate-600",children:" "}),n.jsx("p",{className:"mt-1 text-xs leading-relaxed text-slate-700",children:m.extension.reason||m.event.reason||"  ."})]})})]},m.event.id)})})]})})})]}),n.jsxs("div",{className:"grid grid-cols-12 gap-4",children:[n.jsx("div",{className:"col-span-12 lg:col-span-6",children:n.jsxs(Cr,{className:"h-full",children:[n.jsxs(Nn,{className:"pb-2",children:[n.jsx(Sn,{className:"text-sm",children:" "}),n.jsx("p",{className:"text-[11px] text-slate-500",children:" / ,  ,  Stage  ."})]}),n.jsxs(_r,{className:"space-y-3",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("div",{className:"text-[11px] text-slate-500",children:" /"}),n.jsx("div",{className:"mt-0.5 text-sm font-semibold text-slate-900",children:u.extension.targetName}),n.jsxs("div",{className:"mt-2 flex flex-wrap gap-1.5",children:[n.jsxs("span",{className:"rounded border border-slate-200 bg-slate-50 px-2 py-0.5 text-[11px] font-medium text-slate-700",children:[" Stage: ",u.extension.stage]}),n.jsxs("span",{className:"rounded border border-slate-200 bg-slate-50 px-2 py-0.5 text-[11px] font-medium text-slate-700",children:[" : ",u.extension.scope]}),n.jsx("span",{className:"rounded border border-slate-200 bg-slate-50 px-2 py-0.5 text-[11px] font-medium text-slate-700",children:u.extension.scopeDetail})]})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("div",{className:"text-[11px] text-slate-500",children:" "}),n.jsx("div",{className:"mt-1 text-sm font-semibold text-slate-900",children:u.extension.beforeValue}),n.jsx("div",{className:"mt-0.5 text-[11px] text-slate-500",children:u.extension.beforeLabel})]}),n.jsxs("div",{className:"rounded-lg border border-blue-200 bg-blue-50/40 p-3",children:[n.jsx("div",{className:"text-[11px] text-blue-600",children:" "}),n.jsx("div",{className:"mt-1 text-sm font-semibold text-blue-900",children:u.extension.afterValue}),n.jsx("div",{className:"mt-0.5 text-[11px] text-blue-700",children:u.extension.afterLabel})]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("div",{className:"text-[11px] text-slate-500",children:"Stage   KPI"}),n.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:u.stageLinkedKpis.map(m=>{const h=hC[m];return n.jsx("span",{className:`inline-flex rounded border px-1.5 py-0.5 text-[10px] font-medium ${h.chipClass}`,children:h.label},`stage-link-${m}`)})})]})]})]})}),n.jsx("div",{className:"col-span-12 lg:col-span-6",children:n.jsxs(Cr,{className:"h-full",children:[n.jsxs(Nn,{className:"pb-2",children:[n.jsx(Sn,{className:"text-sm",children:"KPI "}),n.jsx("p",{className:"text-[11px] text-slate-500",children:"  7 KPI  "})]}),n.jsxs(_r,{className:"space-y-3",children:[u.stageLinkedKpis.map(m=>{const h=hC[m],x=u.extension.sparklineByKpi[m]??[],y=u.extension.deltaPpByKpi[m]??0,N=x[0]??0,v=x[x.length-1]??0,j=v-N,E=j>.15?" ":j<-.15?" ":" ",C=j>.15?"text-emerald-700":j<-.15?"text-red-700":"text-slate-600";return n.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 shadow-sm",style:{backgroundImage:`linear-gradient(135deg, ${G3e(h.stroke,.16)} 0%, #ffffff 52%, #f8fafc 100%)`},children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsx("span",{className:`inline-flex rounded border px-1.5 py-0.5 text-[10px] font-medium ${h.chipClass}`,children:h.label}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:`text-xs font-semibold ${y>=0?"text-emerald-600":"text-red-600"}`,children:[" ",y>=0?"+":"",y.toFixed(1),"pp"]}),n.jsx("div",{className:"text-[10px] text-slate-500",children:"7 "})]})]}),n.jsx("div",{className:"mt-2",children:n.jsx(q3e,{points:x,stroke:h.stroke,chartId:`${u.event.id}-${m}`})}),n.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[n.jsx("span",{className:`text-[10px] font-medium ${C}`,children:E}),n.jsxs("span",{className:"text-[10px] text-slate-500",children:[" ",N.toFixed(1),"   ",v.toFixed(1)]})]})]},`spark-${m}`)}),n.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("div",{className:"text-[11px] text-slate-500",children:"   Top3"}),n.jsx("div",{className:"mt-1 flex flex-wrap gap-1.5",children:u.extension.topRegions.slice(0,3).map(m=>n.jsx("span",{className:"rounded border border-slate-200 bg-slate-50 px-2 py-0.5 text-[11px] font-medium text-slate-700",children:m},`${u.event.id}-${m}`))})]}),n.jsx("p",{className:"text-[11px] text-slate-500",children:" KPI        ."}),n.jsxs("div",{className:"flex flex-wrap gap-2 pt-1",children:[n.jsxs("button",{onClick:()=>t?.("quality-monitoring",{changeId:u.event.id}),className:"inline-flex items-center gap-1 rounded border border-slate-200 px-2 py-1 text-[11px] font-medium text-slate-700 hover:bg-slate-50",children:["  ",n.jsx(Na,{className:"h-3 w-3"})]}),n.jsxs("button",{onClick:()=>t?.("compliance-audit",{changeId:u.event.id}),className:"inline-flex items-center gap-1 rounded border border-slate-200 px-2 py-1 text-[11px] font-medium text-slate-700 hover:bg-slate-50",children:["  ",n.jsx(Na,{className:"h-3 w-3"})]})]})]})]})})]})]}):n.jsx("div",{className:"p-4 text-sm text-slate-500",children:"/    ."})}function V3e({...e}){return n.jsx(OB,{"data-slot":"sheet",...e})}function Y3e({...e}){return n.jsx(kB,{"data-slot":"sheet-portal",...e})}function X3e({className:e,...t}){return n.jsx(RB,{"data-slot":"sheet-overlay",className:de("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function Q3e({className:e,children:t,side:r="right",...a}){return n.jsxs(Y3e,{children:[n.jsx(X3e,{}),n.jsxs(PB,{"data-slot":"sheet-content",className:de("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",r==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",r==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",r==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",r==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",e),...a,children:[t,n.jsxs(MB,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[n.jsx(qd,{className:"size-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Z3e({className:e,...t}){return n.jsx("div",{"data-slot":"sheet-header",className:de("flex flex-col gap-1.5 p-4",e),...t})}function J3e({className:e,...t}){return n.jsx(DB,{"data-slot":"sheet-title",className:de("text-foreground font-semibold",e),...t})}function eRe({className:e,...t}){return n.jsx(IB,{"data-slot":"sheet-description",className:de("text-muted-foreground text-sm",e),...t})}const gC=[{id:"stage1",name:"Stage1",title:"  &  ",responsibility:" / ",status:"caution",kpiLinks:[""," "],metrics:[{label:"  ",value:"96.8%",target:" 97% ",signal:"watch",note:"/    "},{label:"/ ",value:"4.9%",target:" 3% ",signal:"risk",note:"24    "},{label:"  ",value:"2  ",target:"0 ",signal:"watch",note:"     "}]},{id:"stage2",name:"Stage2",title:"ANN / ",responsibility:" /  ",status:"warning",kpiLinks:[""," "],metrics:[{label:"Feature   ",value:"JS Divergence 0.11",target:" 0.10 ",signal:"risk",note:" 7   "},{label:"Class  ",value:"  6.3%p",target:" 5.0%p ",signal:"watch",note:"L2     "},{label:"Confidence  ",value:"+17%",target:" 10% ",signal:"risk",note:"   "}]},{id:"stage3",name:"Stage3",title:"CNN / ",responsibility:" / ",status:"caution",kpiLinks:[""," "],metrics:[{label:"  ",value:"Drift Score 0.21",target:" 0.20 ",signal:"watch",note:"    "},{label:"Class   ",value:" +0.08",target:" +0.05 ",signal:"watch",note:"   "},{label:"Guardrail Flag ",value:"2.2%",target:" 2.0% ",signal:"risk",note:" fallback   "}]}],tRe=[{id:"qa-stage1-20260211",occurredAt:"2026-02-11 08:55",stage:"stage1",causeType:"",impactKpi:" ",status:" "},{id:"qa-stage2-20260211",occurredAt:"2026-02-11 10:20",stage:"stage2",causeType:"",impactKpi:"",status:" "},{id:"qa-stage3-20260210",occurredAt:"2026-02-10 16:40",stage:"stage3",causeType:"",impactKpi:"",status:""},{id:"qa-link-20260210",occurredAt:"2026-02-10 11:05",stage:"stage2",causeType:"",impactKpi:" ",status:""},{id:"qa-stage1-20260209",occurredAt:"2026-02-09 09:30",stage:"stage1",causeType:"",impactKpi:"",status:" "}],rRe={normal:"bg-green-100 text-green-700",caution:"bg-amber-100 text-amber-700",warning:"bg-red-100 text-red-700"},wb={normal:"",caution:"",warning:""},nRe={good:"bg-green-50 text-green-700 border-green-200",watch:"bg-amber-50 text-amber-700 border-amber-200",risk:"bg-red-50 text-red-700 border-red-200"},aRe={:"bg-blue-50 text-blue-700 border-blue-200"," ":"bg-red-50 text-red-700 border-red-200"," ":"bg-green-50 text-green-700 border-green-200"},sRe={:"bg-sky-50 text-sky-700 border-sky-200",:"bg-violet-50 text-violet-700 border-violet-200",:"bg-orange-50 text-orange-700 border-orange-200"},FW="2026-02-12",n8={good:"ok",watch:"warn",risk:"risk"},iRe={ok:{label:" ",className:"bg-green-50 text-green-700 border-green-200"},warn:{label:" ",className:"bg-amber-50 text-amber-700 border-amber-200"},risk:{label:" ",className:"bg-red-50 text-red-700 border-red-200"}},oRe={"  ":{key:"stage1-required-fields",title:"  ",subtitlePlain:"       .",whyItMatters:"           .",interpretTemplate:{ok:"       .",warn:" /       .",risk:"        ."},actionHint:{ok:"    .",warn:"  /   .",risk:"        ."},targetLine:" 97% "},"/ ":{key:"stage1-delay-missing-rate",title:"/ ",subtitlePlain:"       .",whyItMatters:"        .",interpretTemplate:{ok:"         .",warn:"       .",risk:"24         ."},actionHint:{ok:"     .",warn:"  /   .",risk:"     ."},targetLine:" 3% "},"  ":{key:"stage1-distribution-drift",title:"  ",subtitlePlain:"      .",whyItMatters:"         .",interpretTemplate:{ok:"       .",warn:"       .",risk:"       ."},actionHint:{ok:"    .",warn:"      .",risk:"      ."},targetLine:"0 "},"Feature   ":{key:"stage2-feature-jsd",title:"Feature    (JS Divergence)",subtitlePlain:"       .",whyItMatters:"       .",interpretTemplate:{ok:"       .",warn:"        .",risk:"        ."},actionHint:{ok:"   .",warn:"   /   .",risk:"       ."},targetLine:" 0.10 ",terms:["JS Divergence:   (0  )"]},"Class  ":{key:"stage2-class-bias",title:"Class  ",subtitlePlain:"        .",whyItMatters:"    /   .",interpretTemplate:{ok:"       .",warn:"        .",risk:"        ."},actionHint:{ok:"    .",warn:" /      .",risk:"      ."},targetLine:" 5.0%p "},"Confidence  ":{key:"stage2-confidence-variance",title:"Confidence  ",subtitlePlain:"      .",whyItMatters:"         .",interpretTemplate:{ok:"      .",warn:"     .",risk:"      ."},actionHint:{ok:"   .",warn:"      .",risk:" / /    ."},targetLine:" 10% "},"  ":{key:"stage3-embedding-drift",title:"   (Drift Score)",subtitlePlain:"       .",whyItMatters:"         .",interpretTemplate:{ok:"       .",warn:"     .",risk:"      ."},actionHint:{ok:"    .",warn:" (/)   .",risk:" /     ."},targetLine:" 0.20 "},"Class   ":{key:"stage3-entropy-shift",title:"Class    ()",subtitlePlain:"      .",whyItMatters:"         .",interpretTemplate:{ok:"      .",warn:"      .",risk:"        ."},actionHint:{ok:"    .",warn:"     .",risk:"/     ."},targetLine:" +0.05 ",terms:[":   ( )"]},"Guardrail Flag ":{key:"stage3-guardrail-rate",title:"Guardrail Flag ",subtitlePlain:"( )    .",whyItMatters:"/        .",interpretTemplate:{ok:"       .",warn:"     .",risk:"fallback       ."},actionHint:{ok:"   .",warn:"     .",risk:" / /     ."},targetLine:" 2.0% "}};function lRe(){const[e,t]=g.useState(!1);return g.useEffect(()=>{if(typeof window>"u")return;const r=window.matchMedia("(hover: none), (pointer: coarse)"),a=()=>t(r.matches||navigator.maxTouchPoints>0);return a(),r.addEventListener?.("change",a),()=>r.removeEventListener?.("change",a)},[]),e}function a8(e){return oRe[e.label]??{key:e.label,title:e.label,subtitlePlain:"         .",whyItMatters:"         .",interpretTemplate:{ok:"     .",warn:"      .",risk:"        ."},actionHint:{ok:"   .",warn:"    .",risk:"      ."},targetLine:e.target}}function cRe(e){return e==="data_quality"?"stage1":e==="model_fitness"?"stage3":"stage2"}function dRe(e){return e==="stage1"?"Stage1":e==="stage2"?"Stage2":"Stage3"}function uRe(e,t){return t==="risk"?e.interpretTemplate.risk:t==="warn"?e.interpretTemplate.warn:e.interpretTemplate.ok}function fRe(e,t){return t==="risk"?e.actionHint.risk:t==="warn"?e.actionHint.warn:e.actionHint.ok}function mRe(e){return e==="risk"?" 7         .":e==="warn"?" 7        .":" 7        ."}function s8({stage:e,metric:t,explain:r,severity:a,onOpenDetail:s}){const i=iRe[a];return n.jsxs("div",{className:"w-[min(92vw,460px)] max-w-[460px] rounded-lg border border-slate-200 bg-white p-3 text-[11px] leading-[1.35] shadow-xl",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx("p",{className:"text-[10px] font-semibold text-slate-500",children:e.name}),n.jsx("p",{className:"truncate text-slate-800 font-semibold",children:r.title})]}),n.jsx("span",{className:`inline-flex shrink-0 items-center whitespace-nowrap rounded-full border px-2 py-0.5 text-[10px] font-semibold leading-none ${i.className}`,children:i.label})]}),n.jsxs("p",{className:"mt-1 truncate text-slate-600",children:[": ",r.subtitlePlain]}),n.jsxs("p",{className:"mt-1 truncate text-slate-600",children:[" : ",i.label,"  ",t.value]}),n.jsxs("p",{className:"mt-1 truncate text-slate-600",children:[": ",uRe(r,a)]}),n.jsxs("p",{className:"mt-1 truncate text-slate-600",children:[" : ",fRe(r,a)]}),n.jsxs("div",{className:"mt-1 flex items-center justify-between gap-2",children:[n.jsxs("span",{className:"truncate text-slate-500",children:[": ",r.targetLine||t.target,"  D-1 ",FW]}),n.jsxs("button",{type:"button",className:"inline-flex items-center gap-1 text-[10px] font-semibold text-blue-600 hover:text-blue-700 shrink-0",onClick:o=>{o.stopPropagation(),s()},children:["",n.jsx(Na,{className:"h-3 w-3"})]})]})]})}function pRe({context:e,onNavigate:t}){const r=g.useMemo(()=>cRe(e?.driver),[e?.driver]),[a,s]=g.useState([r]),[i,o]=g.useState(!1),[l,d]=g.useState(null),[u,p]=g.useState([]),[m,h]=g.useState([]),x=lRe(),y=g.useRef({});g.useEffect(()=>{let k=!1;return Promise.all([h5e(),p5e()]).then(([M,F])=>{k||(p(M),h(F))}).catch(()=>{k||(p([]),h([]))}),()=>{k=!0}},[]);const N=g.useMemo(()=>{if(!u.length)return tRe;const k=B=>B.type==="model_drift"?"stage3":B.type==="sla_breach"?"stage2":B.relatedDriver==="data_quality"?"stage1":B.relatedDriver==="model_fitness"?"stage3":"stage2",M=B=>B.type==="model_drift"||B.relatedDriver==="model_fitness"?"":B.type==="data_missing"||B.type==="update_delay"||B.relatedDriver==="data_quality"?"":"",F=B=>B.resolved?" ":B.severity==="critical"?" ":"",$=B=>B.relatedDriver==="data_quality"?" ":B.relatedDriver==="model_fitness"?"":B.relatedDriver==="ops_bottleneck"?"":" ";return u.map(B=>({id:B.id,occurredAt:B.detectedAt.replace("T"," ").slice(0,16),stage:k(B),causeType:M(B),impactKpi:$(B),status:F(B)}))},[u]),v=g.useMemo(()=>{const k=m.find(F=>F.key==="data_quality");return k?k.indicators.find(F=>F.label.includes(""))?.value??95.1:95.1},[m]),j=N.filter(k=>k.status!==" ").length,E=g.useMemo(()=>N.reduce((k,M)=>(M.status!==" "&&(k[M.causeType]+=1),k),{:0,:0,:0}),[N]),C=g.useMemo(()=>gC.reduce((k,M)=>(k[M.id]=M.status,k),{}),[]),A=k=>{s(M=>M.includes(k)?M.filter(F=>F!==k):[...M,k])},S=g.useCallback((k,M)=>`${k}::${M}`,[]),_=g.useCallback((k,M)=>{const F=a8(M);s(B=>B.includes(k.id)?B:[...B,k.id]),d({stage:k,metric:M,explain:F}),o(!0);const $=S(k.id,M.label);requestAnimationFrame(()=>{setTimeout(()=>{y.current[$]?.scrollIntoView({behavior:"smooth",block:"center"})},120)})},[S]),O=l?n8[l.metric.signal]:null,D=g.useMemo(()=>l?N.filter(k=>k.stage===l.stage.id&&k.status!==" "):[],[l,N]);return n.jsx(P5,{delayDuration:200,children:n.jsxs("div",{className:"space-y-5 p-1",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:" &  "}),n.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Stage     / /   ."})]}),n.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-5",children:[{label:"  ",value:`${v.toFixed(1)}%`,sub:" ",icon:n.jsx(Ic,{className:"h-5 w-5"}),color:v>=96?"text-green-600":"text-amber-600",bg:v>=96?"bg-green-50":"bg-amber-50"},{label:"Stage1 ",value:wb[C.stage1],sub:"  & ",icon:n.jsx(jO,{className:"h-5 w-5"}),color:C.stage1==="warning"?"text-red-600":C.stage1==="caution"?"text-amber-600":"text-green-600",bg:C.stage1==="warning"?"bg-red-50":C.stage1==="caution"?"bg-amber-50":"bg-green-50"},{label:"Stage2 ",value:wb[C.stage2],sub:"ANN /",icon:n.jsx(w0,{className:"h-5 w-5"}),color:C.stage2==="warning"?"text-red-600":C.stage2==="caution"?"text-amber-600":"text-green-600",bg:C.stage2==="warning"?"bg-red-50":C.stage2==="caution"?"bg-amber-50":"bg-green-50"},{label:"Stage3 ",value:wb[C.stage3],sub:"CNN /",icon:n.jsx(Ol,{className:"h-5 w-5"}),color:C.stage3==="warning"?"text-red-600":C.stage3==="caution"?"text-amber-600":"text-green-600",bg:C.stage3==="warning"?"bg-red-50":C.stage3==="caution"?"bg-amber-50":"bg-green-50"},{label:"  ",value:`${j}`,sub:"  ",icon:n.jsx(Qa,{className:"h-5 w-5"}),color:j>2?"text-red-600":"text-amber-600",bg:j>2?"bg-red-50":"bg-amber-50"}].map((k,M)=>n.jsx(Cr,{className:"border-0 shadow-sm",children:n.jsx(_r,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`p-2 rounded-lg ${k.bg} ${k.color}`,children:k.icon}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"text-xs text-gray-500",children:k.label}),n.jsx("div",{className:"text-xl font-bold text-gray-900",children:k.value}),n.jsx("div",{className:"text-[11px] text-gray-400 truncate",children:k.sub})]})]})})},M))}),n.jsxs(Cr,{children:[n.jsx(Nn,{className:"pb-3",children:n.jsxs(Sn,{className:"text-sm flex items-center gap-2",children:[n.jsx(yY,{className:"h-4 w-4 text-slate-600"}),"5  "]})}),n.jsx(_r,{className:"pt-0",children:n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsxs("span",{className:"inline-flex items-center rounded-full border px-2 py-1 text-xs font-medium bg-sky-50 text-sky-700 border-sky-200",children:["  ",E.,""]}),n.jsxs("span",{className:"inline-flex items-center rounded-full border px-2 py-1 text-xs font-medium bg-violet-50 text-violet-700 border-violet-200",children:["  ",E.,""]}),n.jsxs("span",{className:"inline-flex items-center rounded-full border px-2 py-1 text-xs font-medium bg-orange-50 text-orange-700 border-orange-200",children:["  ",E.,""]}),n.jsxs("span",{className:"text-xs text-gray-500",children:[" Stage: ",gC.filter(k=>k.status==="warning").map(k=>k.name).join(", ")||""]})]})})]}),n.jsx("div",{className:"space-y-3",children:gC.map(k=>{const M=a.includes(k.id);return n.jsxs(Cr,{className:"border border-slate-200 overflow-hidden gap-0",children:[n.jsx("button",{type:"button",onClick:()=>A(k.id),className:"w-full px-5 py-4 bg-white hover:bg-slate-50 transition-colors text-left",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:"text-sm font-semibold text-slate-800 min-w-16",children:k.name}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-gray-900",children:k.title}),n.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:k.responsibility})]}),n.jsx("span",{className:`ml-auto inline-flex items-center rounded-full px-2 py-1 text-[11px] font-medium ${rRe[k.status]}`,children:wb[k.status]}),M?n.jsx(Ac,{className:"h-4 w-4 text-gray-400"}):n.jsx(gs,{className:"h-4 w-4 text-gray-400"})]})}),M&&n.jsxs(_r,{className:"pt-1 pb-5 px-5 space-y-4 border-t border-slate-100",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx("span",{className:"text-[11px] text-slate-500",children:"KPI "}),k.kpiLinks.map(F=>n.jsx("span",{className:"inline-flex items-center rounded-full border border-slate-200 bg-slate-50 px-2 py-0.5 text-[11px] font-medium text-slate-700",children:F},F))]}),n.jsx("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-3",children:k.metrics.map(F=>{const $=n8[F.signal],B=a8(F),P=S(k.id,F.label),W=n.jsxs("div",{ref:K=>{y.current[P]=K},role:"button",tabIndex:0,onKeyDown:K=>{K.key==="Enter"&&(K.preventDefault(),_(k,F))},className:"relative rounded-lg border border-slate-200 bg-white p-3 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-200",children:[n.jsx("p",{className:"text-xs text-slate-500 pr-8",children:F.label}),n.jsx("p",{className:"text-lg font-semibold text-gray-900 mt-1",children:F.value}),n.jsxs("div",{className:"flex items-center justify-between mt-2",children:[n.jsx("span",{className:"text-[11px] text-slate-500",children:F.target}),n.jsx("span",{className:`inline-flex items-center rounded-full border px-2 py-0.5 text-[10px] font-semibold ${nRe[F.signal]}`,children:F.signal==="risk"?"":F.signal==="watch"?"":""})]}),n.jsx("p",{className:"text-[11px] text-slate-500 mt-2",children:F.note}),x&&n.jsxs(PW,{children:[n.jsx(DW,{asChild:!0,children:n.jsx("button",{type:"button","aria-label":`${F.label} `,className:"absolute right-2 top-2 inline-flex h-5 w-5 items-center justify-center rounded border border-slate-200 bg-slate-50 text-slate-500 hover:bg-slate-100",onClick:K=>K.stopPropagation(),children:n.jsx(Dm,{className:"h-3 w-3"})})}),n.jsx(IW,{children:n.jsx(MW,{side:"top",align:"end",sideOffset:8,collisionPadding:12,className:"z-50 max-w-[92vw] p-0 border-0 bg-transparent shadow-none",children:n.jsx(s8,{stage:k,metric:F,explain:B,severity:$,onOpenDetail:()=>_(k,F)})})})]})]});return x?n.jsx(Y.Fragment,{children:W},P):n.jsxs(D5,{delayDuration:200,children:[n.jsx(I5,{asChild:!0,children:W}),n.jsx(M5,{children:n.jsxs(L5,{side:"top",align:"end",sideOffset:8,collisionPadding:12,className:"z-50 max-w-[92vw] p-0 border-0 bg-transparent shadow-none",children:[n.jsx(s8,{stage:k,metric:F,explain:B,severity:$,onOpenDetail:()=>_(k,F)}),n.jsx($5,{className:"fill-white"})]})})]},P)})})]})]},k.id)})}),n.jsxs(Cr,{children:[n.jsx(Nn,{className:"pb-3",children:n.jsxs(Sn,{className:"text-base flex items-center gap-2",children:[n.jsx(Qa,{className:"h-4 w-4 text-amber-500"})," "]})}),n.jsxs(_r,{className:"pt-0",children:[n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[760px]",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50/70",children:[n.jsx("th",{className:"text-left py-2.5 px-3 text-xs font-semibold text-gray-600",children:""}),n.jsx("th",{className:"text-left py-2.5 px-3 text-xs font-semibold text-gray-600",children:"Stage"}),n.jsx("th",{className:"text-left py-2.5 px-3 text-xs font-semibold text-gray-600",children:" "}),n.jsx("th",{className:"text-left py-2.5 px-3 text-xs font-semibold text-gray-600",children:" KPI"}),n.jsx("th",{className:"text-left py-2.5 px-3 text-xs font-semibold text-gray-600",children:""})]})}),n.jsxs("tbody",{children:[N.map(k=>n.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50/50",children:[n.jsx("td",{className:"py-3 px-3 text-sm text-gray-700",children:k.occurredAt}),n.jsx("td",{className:"py-3 px-3",children:n.jsx("span",{className:"text-sm font-medium text-gray-900",children:dRe(k.stage)})}),n.jsx("td",{className:"py-3 px-3",children:n.jsx("span",{className:`inline-flex items-center rounded-full border px-2 py-1 text-[11px] font-medium ${sRe[k.causeType]}`,children:k.causeType})}),n.jsx("td",{className:"py-3 px-3 text-sm text-gray-700",children:k.impactKpi}),n.jsx("td",{className:"py-3 px-3",children:n.jsx("span",{className:`inline-flex items-center rounded-full border px-2 py-1 text-[11px] font-medium ${aRe[k.status]}`,children:k.status})})]},k.id)),N.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"py-6 text-center text-sm text-gray-500",children:"   ."})})]})]})}),n.jsx("div",{className:"mt-3 text-[11px] text-gray-500",children:" : ( ),  (/  ),  (  )"})]})]}),n.jsx(V3e,{open:i,onOpenChange:o,children:n.jsx(Q3e,{side:"right",className:"w-[420px] sm:max-w-[420px]",children:l?n.jsxs(n.Fragment,{children:[n.jsxs(Z3e,{className:"border-b border-slate-200 pb-3",children:[n.jsxs(J3e,{className:"text-base text-slate-900",children:[l.stage.name,"  ",l.metric.label]}),n.jsxs(eRe,{className:"text-xs text-slate-500",children:[l.stage.title,"     ",FW," (D-1)"]})]}),n.jsxs("div",{className:"flex-1 space-y-3 overflow-y-auto px-4 pb-4 text-sm",children:[n.jsxs("section",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3",children:[n.jsx("p",{className:"text-[11px] font-semibold text-slate-600",children:" 7 "}),n.jsx("p",{className:"mt-1 text-sm text-slate-800",children:mRe(O??"ok")}),n.jsxs("p",{className:"mt-1 text-[11px] text-slate-500",children:[" : ",l.metric.value,"  ",l.explain.targetLine||l.metric.target]})]}),n.jsxs("section",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-[11px] font-semibold text-slate-600",children:" "}),n.jsx("p",{className:"mt-1 text-sm text-slate-700",children:l.metric.note})]}),n.jsxs("section",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-[11px] font-semibold text-slate-600",children:" "}),n.jsx("div",{className:"mt-2 flex flex-wrap gap-1.5",children:l.stage.kpiLinks.map(k=>n.jsx("span",{className:"inline-flex items-center rounded-full border border-slate-200 bg-slate-50 px-2 py-0.5 text-[11px] text-slate-700",children:k},k))})]}),n.jsxs("section",{className:"rounded-lg border border-slate-200 p-3",children:[n.jsx("p",{className:"text-[11px] font-semibold text-slate-600",children:" "}),D.length>0?n.jsx("ul",{className:"mt-2 space-y-2",children:D.slice(0,4).map(k=>n.jsxs("li",{className:"rounded border border-slate-100 bg-slate-50 px-2 py-1.5",children:[n.jsx("p",{className:"text-[11px] text-slate-600",children:k.occurredAt}),n.jsxs("p",{className:"text-xs text-slate-800",children:[k.causeType,"  ",k.impactKpi,"  ",k.status]})]},k.id))}):n.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"    ."})]})]})]}):n.jsx("div",{className:"flex h-full items-center justify-center text-sm text-slate-500",children:"KPI    ."})})})]})})}const Eb={regulation:{label:" ",dotClass:"bg-amber-500",badgeClass:"bg-amber-50 text-amber-700 border-amber-200",icon:n.jsx(Do,{className:"h-3.5 w-3.5"})},model:{label:" ",dotClass:"bg-purple-500",badgeClass:"bg-purple-50 text-purple-700 border-purple-200",icon:n.jsx(pQ,{className:"h-3.5 w-3.5"})},policy:{label:" ",dotClass:"bg-blue-500",badgeClass:"bg-blue-50 text-blue-700 border-blue-200",icon:n.jsx(xO,{className:"h-3.5 w-3.5"})}},hRe={:{cls:"bg-green-50 text-green-700 border-green-200"},:{cls:"bg-amber-50 text-amber-700 border-amber-200"},:{cls:"bg-red-50 text-red-700 border-red-200"}},gRe=[{question:"AI   ?",answer:"",detail:"Stage1~3         .",verdict:"no"},{question:"()   ?",answer:"",detail:"//        .",verdict:"yes"},{question:"     ?",answer:"",detail:"  /      .",verdict:"yes"}];function Ab(e,t){return t<=0?100:Math.round(e/t*100)}function Kh(e){return e===0?"":e===1?"":""}function i8(e){return new Date(e).toLocaleString("ko-KR",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function xRe(e){const t=e.type==="model_version"?"model":"regulation",r=e.approvedBy||e.deployedBy||"",a=` ${e.requestedBy||"-"} /  ${e.approvedBy||""} /  ${e.deployedBy||"-"}`;return{id:`timeline-policy-${e.id}`,timestamp:e.deployedAt,category:t,title:e.title,owner:r,decisionLog:a,evidence:e.reason||e.description,changeId:e.id,statusLabel:e.status}}function bRe(e){return{id:`timeline-audit-${e.id}`,timestamp:e.timestamp,category:"policy",title:e.title,owner:e.approver||e.actor,decisionLog:` ${e.requestor||"-"} /  ${e.approver||""} /  ${e.executor||"-"}`,evidence:e.rationale,changeId:e.relatedChangeId,auditId:e.id,statusLabel:e.status}}function yRe({context:e,onNavigate:t}){const[r,a]=g.useState([]),[s,i]=g.useState([]),[o,l]=g.useState("all"),[d,u]=g.useState(null),[p,m]=g.useState(!1);g.useEffect(()=>{let A=!1;return Promise.all([xW(),g5e()]).then(([S,_])=>{A||(a(S),i(_))}).catch(()=>{A||(a([]),i([]))}),()=>{A=!0}},[]);const h=g.useMemo(()=>{const A=r.map(xRe),S=s.filter(_=>_.type==="policy_change").map(bRe);return[...A,...S].sort((_,O)=>new Date(O.timestamp).getTime()-new Date(_.timestamp).getTime())},[r,s]),x=g.useMemo(()=>o==="all"?h:h.filter(A=>A.category===o),[h,o]);g.useEffect(()=>{if(h.length){if(e?.auditId){const A=h.find(S=>S.auditId===e.auditId);if(A){u(A.id);return}}if(e?.changeId){const A=h.find(S=>S.changeId===e.changeId);if(A){u(A.id);return}}u(A=>A||h[0].id)}},[h,e?.auditId,e?.changeId]),g.useEffect(()=>{if(!x.length){u(null);return}x.some(S=>S.id===d)||u(x[0].id)},[x,d]);const y=g.useMemo(()=>h.find(A=>A.id===d)||null,[h,d]),N=g.useMemo(()=>{const A=s.length,S=s.filter(M=>!!M.cause&&M.kpiSnapshot.riskTop3.length>0).length,_=s.filter(M=>!!M.requestor&&!!M.approver&&!!M.rationale).length,O=s.filter(M=>!!M.executor&&!!M.approvalComment).length,D=S+_+O,k=A*3;return{stage1:S,stage2:_,stage3:O,totalEvents:A,rate:Ab(D,k)}},[s]),v=g.useMemo(()=>{const A=s.length,S=s.filter(D=>!!D.approver).length,_=s.filter(D=>!!D.rationale&&(!!D.policyRef||!!D.internalStandardId)).length,O=s.filter(D=>/ai|  /i.test(D.approver||"")).length;return{totalEvents:A,ownerAssigned:S,rationaleAttached:_,aiFinalDecisionCount:O,humanDecisionCount:S}},[s]),j=g.useMemo(()=>{const A=s.filter(M=>!M.approver),S=s.filter(M=>!M.rationale||!M.policyRef&&!M.internalStandardId),_=s.filter(M=>!M.executor),O=s.filter(M=>M.type==="violation"&&M.severity==="high"&&M.status!=="resolved"),D=s.filter(M=>!M.cause||!M.requestor||!M.approver||!M.executor),k=r[0]?.id;return[{id:"owner",itemName:" () ",stage:"Stage2",nonComplianceCases:A.length,status:Kh(A.length),linkLabel:"  ",navPage:"compliance-audit",navContext:A[0]?{auditId:A[0].id}:void 0},{id:"evidence",itemName:" (/) ",stage:"Stage2~3",nonComplianceCases:S.length,status:Kh(S.length),linkLabel:"  ",navPage:"model-governance",navContext:{changeId:S[0]?.relatedChangeId||k}},{id:"executor",itemName:" (Executor)  ",stage:"Stage3",nonComplianceCases:_.length,status:Kh(_.length),linkLabel:"  ",navPage:"compliance-audit",navContext:_[0]?{auditId:_[0].id}:void 0},{id:"high-risk",itemName:"    ",stage:"Stage3",nonComplianceCases:O.length,status:Kh(O.length),linkLabel:"  ",navPage:"compliance-audit",navContext:O[0]?{auditId:O[0].id}:void 0},{id:"stage-chain",itemName:"Stage1~3   ",stage:"Stage1~3",nonComplianceCases:D.length,status:Kh(D.length),linkLabel:"  ",navPage:"compliance-audit",navContext:D[0]?{auditId:D[0].id}:void 0}]},[r,s]),E=g.useMemo(()=>{const A=j.filter(S=>S.status==="").length;return Ab(A,j.length)},[j]),C=g.useMemo(()=>[{label:"  ",value:`${Ab(v.ownerAssigned,v.totalEvents)}%`,detail:`${v.ownerAssigned}/${v.totalEvents}`},{label:"  ",value:`${Ab(v.rationaleAttached,v.totalEvents)}%`,detail:`${v.rationaleAttached}/${v.totalEvents}`},{label:" ",value:`${E}%`,detail:`${j.filter(A=>A.status==="").length}/${j.length} `},{label:"Stage  ",value:`${N.rate}%`,detail:`S1 ${N.stage1}/${N.totalEvents}  S2 ${N.stage2}/${N.totalEvents}  S3 ${N.stage3}/${N.totalEvents}`}],[j,E,N,v]);return n.jsxs("div",{className:"space-y-5 p-1",children:[n.jsxs("div",{className:"flex justify-between items-start gap-3",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"   "}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"             ."})]}),n.jsxs(Nt,{size:"sm",onClick:()=>alert("   (mock)"),children:[n.jsx(hm,{className:"h-4 w-4 mr-2"}),"  "]})]}),n.jsxs("div",{className:"rounded-xl border-2 border-blue-200 bg-gradient-to-r from-blue-50 via-white to-white p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(Do,{className:"h-4 w-4 text-blue-600"}),n.jsx("span",{className:"text-sm font-bold text-gray-900",children:"  "})]}),n.jsx("div",{className:"grid gap-3 md:grid-cols-3",children:gRe.map(A=>n.jsx(vRe,{question:A.question,answer:A.answer,detail:A.detail,verdict:A.verdict},A.question))}),n.jsxs("div",{className:"mt-3 text-xs text-gray-600",children:["AI  "," ",n.jsxs("span",{className:"font-semibold text-red-600",children:[v.aiFinalDecisionCount,""]})," /   "," ",n.jsxs("span",{className:"font-semibold text-blue-700",children:[v.humanDecisionCount,""]})]})]}),n.jsx("div",{className:"grid gap-3 md:grid-cols-4",children:C.map(A=>n.jsx(NRe,{label:A.label,value:A.value,detail:A.detail},A.label))}),n.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(kl,{className:"h-4 w-4 text-indigo-600"}),n.jsx("h2",{className:"text-sm font-bold text-gray-900",children:"  "})]}),n.jsxs("div",{className:"grid gap-3 lg:grid-cols-[1fr_auto_1fr_auto_1fr] items-center",children:[n.jsx(xC,{title:"Stage1",subtitle:"  ",description:" /  .",badge:" ",badgeClass:"bg-gray-100 text-gray-700 border-gray-200"}),n.jsx(j0,{className:"h-4 w-4 text-gray-400 justify-self-center hidden lg:block"}),n.jsx(xC,{title:"Stage2",subtitle:" ",description:"/      .",badge:" ",badgeClass:"bg-blue-50 text-blue-700 border-blue-200"}),n.jsx(j0,{className:"h-4 w-4 text-gray-400 justify-self-center hidden lg:block"}),n.jsx(xC,{title:"Stage3",subtitle:" ",description:"       .",badge:" ",badgeClass:"bg-green-50 text-green-700 border-green-200"})]}),n.jsx("div",{className:"mt-3 rounded-lg border border-indigo-200 bg-indigo-50 p-3",children:n.jsx("p",{className:"text-sm font-semibold text-indigo-900",children:"   (). AI/       ."})})]}),n.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4",children:[n.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(xO,{className:"h-4 w-4 text-gray-700"}),n.jsx("h2",{className:"text-sm font-bold text-gray-900",children:" "})]}),n.jsxs("button",{onClick:()=>m(A=>!A),className:"text-xs text-gray-500 inline-flex items-center gap-1 hover:text-gray-700",children:["Stage  ",p?n.jsx(Ac,{className:"h-4 w-4"}):n.jsx(gs,{className:"h-4 w-4"})]})]}),p&&n.jsx("div",{className:"mb-3 rounded-lg border border-gray-200 bg-gray-50 p-3 text-xs text-gray-600",children:"Stage1:   (cause, riskTop3) / Stage2:  / Stage3:  "}),n.jsx("div",{className:"overflow-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"text-left text-xs text-gray-500 border-b border-gray-200",children:[n.jsx("th",{className:"py-2 pr-3",children:" "}),n.jsx("th",{className:"py-2 pr-3",children:" Stage"}),n.jsx("th",{className:"py-2 pr-3",children:""}),n.jsx("th",{className:"py-2 pr-3",children:"  "}),n.jsx("th",{className:"py-2",children:"  "})]})}),n.jsx("tbody",{children:j.map(A=>n.jsxs("tr",{className:"border-b border-gray-100 last:border-b-0",children:[n.jsx("td",{className:"py-2.5 pr-3 font-medium text-gray-900",children:A.itemName}),n.jsx("td",{className:"py-2.5 pr-3 text-gray-600",children:A.stage}),n.jsx("td",{className:"py-2.5 pr-3",children:n.jsx("span",{className:`inline-flex items-center px-2 py-0.5 text-xs rounded border ${hRe[A.status].cls}`,children:A.status})}),n.jsxs("td",{className:"py-2.5 pr-3 text-gray-700",children:[A.nonComplianceCases,""]}),n.jsx("td",{className:"py-2.5",children:n.jsxs("button",{onClick:()=>t?.(A.navPage,A.navContext),className:"text-xs inline-flex items-center gap-1 text-blue-600 hover:text-blue-800 hover:underline",children:[n.jsx(Na,{className:"h-3.5 w-3.5"}),A.linkLabel]})})]},A.id))})]})})]}),n.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Sl,{className:"h-4 w-4 text-gray-700"}),n.jsx("h2",{className:"text-sm font-bold text-gray-900",children:"  "})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Cb,{label:"",active:o==="all",onClick:()=>l("all")}),n.jsx(Cb,{label:" ",active:o==="regulation",onClick:()=>l("regulation")}),n.jsx(Cb,{label:" ",active:o==="model",onClick:()=>l("model")}),n.jsx(Cb,{label:" ",active:o==="policy",onClick:()=>l("policy")})]})]}),n.jsxs("div",{className:"grid gap-4 lg:grid-cols-[2fr_3fr]",children:[n.jsxs("div",{className:"relative max-h-[420px] overflow-y-auto pr-1",children:[n.jsx("div",{className:"absolute left-[11px] top-0 bottom-0 w-0.5 bg-gray-200"}),x.length===0?n.jsx("div",{className:"py-16 text-center text-sm text-gray-400",children:"   ."}):n.jsx("div",{className:"space-y-1.5",children:x.map(A=>{const S=A.id===d,_=Eb[A.category];return n.jsxs("button",{onClick:()=>u(A.id),className:`relative w-full text-left pl-8 pr-3 py-2.5 rounded-lg border transition-colors ${S?"border-blue-300 bg-blue-50":"border-transparent hover:bg-gray-50 hover:border-gray-200"}`,children:[n.jsx("div",{className:`absolute left-[5px] top-3.5 w-3 h-3 rounded-full ${_.dotClass}`}),n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsxs("span",{className:`inline-flex items-center gap-1 px-1.5 py-0.5 text-[10px] rounded border ${_.badgeClass}`,children:[_.icon,_.label]}),n.jsx("span",{className:"text-[10px] text-gray-400",children:i8(A.timestamp)})]}),n.jsx("div",{className:"mt-1 text-sm font-semibold text-gray-900 leading-snug",children:A.title}),n.jsxs("div",{className:"mt-1 text-[11px] text-gray-500",children:[": ",A.owner]})]},A.id)})})]}),n.jsx("div",{children:y?n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-3",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 text-xs rounded border ${Eb[y.category].badgeClass}`,children:[Eb[y.category].icon,Eb[y.category].label]}),n.jsx("span",{className:"text-xs text-gray-500",children:i8(y.timestamp)})]}),n.jsx("h3",{className:"mt-2 text-base font-bold text-gray-900",children:y.title}),n.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[": ",y.statusLabel]})]}),n.jsx(bC,{icon:n.jsx(kl,{className:"h-4 w-4 text-blue-600"}),title:" ",children:n.jsx("p",{className:"text-sm font-semibold text-gray-900",children:y.owner})}),n.jsx(bC,{icon:n.jsx(Po,{className:"h-4 w-4 text-green-600"}),title:" ",children:n.jsx("p",{className:"text-sm text-gray-800 leading-relaxed",children:y.decisionLog})}),n.jsx(bC,{icon:n.jsx(Xu,{className:"h-4 w-4 text-indigo-600"}),title:" ",children:n.jsx("p",{className:"text-sm text-gray-800 leading-relaxed",children:y.evidence})}),n.jsx("div",{className:"rounded-lg border border-blue-200 bg-blue-50 p-3",children:n.jsx("p",{className:"text-xs font-semibold text-blue-900",children:" :       /    ."})}),n.jsxs("div",{className:"flex flex-wrap gap-2 justify-end",children:[y.changeId&&n.jsxs(Nt,{size:"sm",variant:"outline",className:"text-xs text-blue-700",onClick:()=>t?.("model-governance",{changeId:y.changeId}),children:[n.jsx(Na,{className:"h-3.5 w-3.5 mr-1"}),"  "]}),y.auditId&&n.jsxs(Nt,{size:"sm",variant:"outline",className:"text-xs",onClick:()=>t?.("compliance-audit",{auditId:y.auditId}),children:[n.jsx(Na,{className:"h-3.5 w-3.5 mr-1"}),"  "]})]})]}):n.jsx("div",{className:"h-[240px] rounded-lg border border-dashed border-gray-200 flex items-center justify-center text-sm text-gray-400",children:"       ."})})]})]})]})}function vRe({question:e,answer:t,detail:r,verdict:a}){return n.jsxs("div",{className:`rounded-lg border p-3 ${a==="yes"?"border-green-200 bg-green-50/50":"border-red-200 bg-red-50/50"}`,children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a==="yes"?n.jsx(Po,{className:"h-4 w-4 text-green-600"}):n.jsx(km,{className:"h-4 w-4 text-red-600"}),n.jsx("span",{className:"text-xs font-semibold text-gray-700",children:e})]}),n.jsx("p",{className:`text-sm font-bold ${a==="yes"?"text-green-700":"text-red-700"}`,children:t}),n.jsx("p",{className:"mt-1 text-xs text-gray-600 leading-relaxed",children:r})]})}function NRe({label:e,value:t,detail:r}){return n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-3",children:[n.jsx("p",{className:"text-xs text-gray-500",children:e}),n.jsx("p",{className:"text-xl font-bold text-gray-900 mt-1",children:t}),n.jsx("p",{className:"text-[11px] text-gray-500 mt-1",children:r})]})}function xC({title:e,subtitle:t,description:r,badge:a,badgeClass:s}){return n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-3",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsx("span",{className:"text-xs font-bold text-gray-700",children:e}),n.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${s}`,children:a})]}),n.jsx("p",{className:"text-sm font-semibold text-gray-900 mt-1",children:t}),n.jsx("p",{className:"text-xs text-gray-600 mt-1 leading-relaxed",children:r})]})}function Cb({label:e,active:t,onClick:r}){return n.jsx("button",{onClick:r,className:`text-xs px-2 py-1 rounded border transition-colors ${t?"bg-blue-50 text-blue-700 border-blue-200":"bg-white text-gray-600 border-gray-200 hover:bg-gray-50"}`,children:e})}function bC({icon:e,title:t,children:r}){return n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-3",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e,n.jsx("span",{className:"text-xs font-semibold text-gray-700",children:t})]}),r]})}const o8=(e,t,r)=>Math.min(r,Math.max(t,e));function SRe({userRole:e}){const t=e==="central_admin",[r,a]=g.useState(!1),[s,i]=g.useState(()=>vW()),o=g.useCallback((v,j)=>{i(E=>({...E,matrixThresholds:{...E.matrixThresholds,[v]:o8(j,70,99)}})),a(!1)},[]),l=g.useCallback((v,j)=>{i(E=>({...E,headline:{...E.headline,[v]:j}})),a(!1)},[]),d=g.useCallback(v=>{i(j=>({...j,drilldown:{...j.drilldown,[v]:!j.drilldown[v]}})),a(!1)},[]),u=g.useCallback(v=>{i(j=>({...j,notifications:{...j.notifications,[v]:!j.notifications[v]}})),a(!1)},[]),p=g.useCallback(v=>{i(j=>({...j,reports:{...j.reports,defaultPeriod:v}})),a(!1)},[]),m=g.useCallback(()=>{i(v=>({...v,reports:{...v.reports,includeFilterContext:!v.reports.includeFilterContext}})),a(!1)},[]),h=g.useCallback(()=>{S5e(s),a(!0),setTimeout(()=>a(!1),3e3)},[s]),x=g.useCallback(()=>{const v=j5e();i(v),a(!1)},[]),y=g.useMemo(()=>Math.abs(s.matrixThresholds.slaCut-s.matrixThresholds.dataCut)<=1?" ":s.matrixThresholds.slaCut>s.matrixThresholds.dataCut?"SLA   ":"   ",[s.matrixThresholds.dataCut,s.matrixThresholds.slaCut]),N=t?" ":" ";return n.jsxs("div",{className:"p-6 max-w-5xl mx-auto space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-bold text-gray-800",children:" "}),n.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:"     /  ."})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[r&&n.jsxs("span",{className:"inline-flex items-center gap-1 text-green-600 text-sm font-medium animate-pulse",children:[n.jsx(Zs,{className:"h-4 w-4"})," "]}),n.jsxs("button",{type:"button",onClick:x,disabled:!t,className:"inline-flex items-center gap-1 px-3 py-1.5 text-xs border border-gray-300 rounded-lg text-gray-600 hover:bg-gray-50 disabled:opacity-40 disabled:cursor-not-allowed",children:[n.jsx(gQ,{className:"h-3.5 w-3.5"})," "]}),n.jsxs("button",{type:"button",onClick:h,disabled:!t,className:"inline-flex items-center gap-1.5 px-4 py-1.5 text-xs font-semibold bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-40 disabled:cursor-not-allowed shadow-sm",children:[n.jsx(SO,{className:"h-3.5 w-3.5"}),""]})]})]}),n.jsxs("section",{className:"bg-white border border-gray-200 rounded-xl p-5",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(KX,{className:"h-4.5 w-4.5 text-indigo-600"}),n.jsx("h3",{className:"text-sm font-bold text-gray-800",children:" "}),n.jsx("span",{className:"text-[10px] bg-gray-100 text-gray-500 px-2 py-0.5 rounded-full",children:" "})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-3",children:[n.jsx("div",{className:"text-[10px] text-indigo-500 font-medium mb-1",children:" "}),n.jsx("div",{className:"text-sm font-semibold text-indigo-800",children:"D-1  "}),n.jsx("div",{className:"text-[10px] text-indigo-400 mt-1",children:"       ."})]}),n.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-3",children:[n.jsx("div",{className:"text-[10px] text-indigo-500 font-medium mb-1",children:" "}),n.jsx("div",{className:"text-sm font-semibold text-indigo-800",children:"  "}),n.jsx("div",{className:"text-[10px] text-indigo-400 mt-1",children:"       ."})]}),n.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-3",children:[n.jsx("div",{className:"text-[10px] text-indigo-500 font-medium mb-1",children:" "}),n.jsx("div",{className:"text-sm font-semibold text-indigo-800",children:"  "}),n.jsx("div",{className:"text-[10px] text-indigo-400 mt-1",children:"     ."})]})]})]}),n.jsxs("section",{className:"bg-white border border-gray-200 rounded-xl p-5",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(kX,{className:"h-4.5 w-4.5 text-orange-600"}),n.jsx("h3",{className:"text-sm font-bold text-gray-800",children:"SLA    "}),!t&&n.jsx(Md,{className:"h-3.5 w-3.5 text-gray-400"}),n.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-orange-50 text-orange-700 border border-orange-200 ml-auto",children:y})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-2",children:"SLA  (%)"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"range",min:70,max:99,value:s.matrixThresholds.slaCut,onChange:v=>o("slaCut",Number(v.target.value)),disabled:!t,className:"w-full accent-blue-600 disabled:opacity-40"}),n.jsx("input",{type:"number",min:70,max:99,value:s.matrixThresholds.slaCut,onChange:v=>o("slaCut",Number(v.target.value)||s.matrixThresholds.slaCut),disabled:!t,className:"w-16 px-2 py-1.5 border border-gray-300 rounded-lg text-sm disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-2",children:"  (%)"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"range",min:70,max:99,value:s.matrixThresholds.dataCut,onChange:v=>o("dataCut",Number(v.target.value)),disabled:!t,className:"w-full accent-emerald-600 disabled:opacity-40"}),n.jsx("input",{type:"number",min:70,max:99,value:s.matrixThresholds.dataCut,onChange:v=>o("dataCut",Number(v.target.value)||s.matrixThresholds.dataCut),disabled:!t,className:"w-16 px-2 py-1.5 border border-gray-300 rounded-lg text-sm disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]})]}),n.jsx("div",{className:"mt-3 text-[11px] text-gray-500",children:"         ."})]}),n.jsxs("section",{className:"bg-white border border-gray-200 rounded-xl p-5",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(T8,{className:"h-4.5 w-4.5 text-blue-600"}),n.jsx("h3",{className:"text-sm font-bold text-gray-800",children:"/ "}),!t&&n.jsx(Md,{className:"h-3.5 w-3.5 text-gray-400"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"rounded-lg border border-gray-100 p-3",children:[n.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-2",children:"   "}),n.jsx("input",{type:"number",min:1,max:5,value:s.headline.maxItems,onChange:v=>l("maxItems",o8(Number(v.target.value)||1,1,5)),disabled:!t,className:"w-20 px-3 py-1.5 border border-gray-300 rounded-lg text-sm disabled:bg-gray-100 disabled:cursor-not-allowed"}),n.jsx("div",{className:"text-[10px] text-gray-500 mt-1",children:"      "})]}),n.jsxs("div",{className:"rounded-lg border border-gray-100 p-3 space-y-2",children:[n.jsxs("label",{className:"inline-flex items-center gap-2 text-xs text-gray-700",children:[n.jsx("input",{type:"checkbox",checked:s.headline.includePartialBadge,onChange:v=>l("includePartialBadge",v.target.checked),disabled:!t,className:"accent-blue-600"}),"   "]}),n.jsx("div",{className:"text-[10px] text-gray-500",children:"        "})]}),[{key:"keepPreviousData",label:"  (keepPreviousData)",desc:"      "},{key:"prefetchEnabled",label:" ",desc:"     "},{key:"useScopeOverlay",label:"  ",desc:"      "}].map(v=>n.jsxs("button",{type:"button",onClick:()=>d(v.key),disabled:!t,className:`rounded-lg border px-3 py-2 text-left transition-colors disabled:opacity-40 disabled:cursor-not-allowed ${s.drilldown[v.key]?"border-blue-200 bg-blue-50":"border-gray-200 bg-gray-50"}`,children:[n.jsx("div",{className:"text-xs font-semibold text-gray-800",children:v.label}),n.jsx("div",{className:"text-[10px] text-gray-500 mt-0.5",children:v.desc})]},v.key))]})]}),n.jsxs("section",{className:"bg-white border border-gray-200 rounded-xl p-5",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(jp,{className:"h-4.5 w-4.5 text-amber-600"}),n.jsx("h3",{className:"text-sm font-bold text-gray-800",children:"/ "}),!t&&n.jsx(Md,{className:"h-3.5 w-3.5 text-gray-400"})]}),n.jsx("div",{className:"space-y-3",children:[{key:"batchDelayed",label:"  ",desc:"D-1        "},{key:"qualityRisk",label:"  ",desc:"       "},{key:"governanceGap",label:"  ",desc:"       "},{key:"policyImpactSpike",label:"   ",desc:"      "}].map(v=>n.jsxs("button",{type:"button",onClick:()=>u(v.key),disabled:!t,className:`w-full rounded-lg border px-3 py-2 text-left transition-colors disabled:opacity-40 disabled:cursor-not-allowed ${s.notifications[v.key]?"border-amber-200 bg-amber-50/70":"border-gray-200 bg-gray-50"}`,children:[n.jsx("div",{className:"text-xs font-semibold text-gray-800",children:v.label}),n.jsx("div",{className:"text-[10px] text-gray-500 mt-0.5",children:v.desc})]},v.key))}),n.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"rounded-lg border border-gray-100 p-3",children:[n.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-1",children:"  "}),n.jsxs("select",{value:s.reports.defaultPeriod,onChange:v=>p(v.target.value),disabled:!t,className:"w-full px-3 py-1.5 border border-gray-300 rounded-lg text-sm disabled:bg-gray-100 disabled:cursor-not-allowed",children:[n.jsx("option",{value:"weekly",children:""}),n.jsx("option",{value:"monthly",children:""}),n.jsx("option",{value:"quarterly",children:""}),n.jsx("option",{value:"yearly_cum",children:"()"})]})]}),n.jsxs("div",{className:"rounded-lg border border-gray-100 p-3",children:[n.jsxs("label",{className:"inline-flex items-center gap-2 text-xs text-gray-700",children:[n.jsx("input",{type:"checkbox",checked:s.reports.includeFilterContext,onChange:m,disabled:!t,className:"accent-amber-600"}),"     "]}),n.jsx("div",{className:"text-[10px] text-gray-500 mt-1",children:"KPI///  CSV  "})]})]})]}),n.jsxs("section",{className:"bg-white border border-gray-200 rounded-xl p-5",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(Ol,{className:"h-4.5 w-4.5 text-green-600"}),n.jsx("h3",{className:"text-sm font-bold text-gray-800",children:"   "})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[n.jsxs("div",{className:"rounded-lg border border-green-200 bg-green-50 p-3",children:[n.jsx("div",{className:"text-xs font-semibold text-green-800",children:" "}),n.jsx("div",{className:"text-[10px] text-green-700 mt-1",children:" /// "})]}),n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-3",children:[n.jsx("div",{className:"text-xs font-semibold text-gray-800",children:" "}),n.jsx("div",{className:"text-[10px] text-gray-600 mt-1",children:"   ( )"})]})]}),n.jsxs("div",{className:"mt-3 text-[10px] text-gray-400 flex items-center gap-1.5",children:[n.jsx(Ic,{className:"h-3.5 w-3.5"})," : central.settings.v1   : ",N,"  : SLA ",ha.matrixThresholds.slaCut,"% /  ",ha.matrixThresholds.dataCut,"%"]})]})]})}const jRe={level:"nation",region:"KR",kpi:"SLA",period:"WEEK"};function wRe(e,t){return{...e,...t}}function ERe({userRole:e,userName:t,onLogout:r}){const[a,s]=g.useState("national-dashboard"),[i,o]=g.useState(jRe),l=g.useCallback((u,p)=>{o(m=>wRe(m,p)),s(u)},[]),d=()=>{switch(a){case"national-dashboard":return n.jsx(QF,{onNavigate:l});case"kpi-dictionary":return n.jsx(V5e,{onNavigate:l});case"model-apply":return n.jsx(R3e,{});case"model-governance":return n.jsx(W3e,{context:i,onNavigate:l});case"quality-monitoring":return n.jsx(pRe,{context:i,onNavigate:l});case"compliance-audit":return n.jsx(yRe,{context:i,onNavigate:l});case"settings":return n.jsx(SRe,{userRole:e});default:return n.jsx(QF,{onNavigate:l})}};return n.jsx(Kke,{currentPage:a,userRole:e,userName:t,onPageChange:s,onLogout:r,children:d()})}var ARe=(e,t,r,a,s,i,o,l)=>{let d=document.documentElement,u=["light","dark"];function p(x){(Array.isArray(e)?e:[e]).forEach(y=>{let N=y==="class",v=N&&i?s.map(j=>i[j]||j):s;N?(d.classList.remove(...v),d.classList.add(i&&i[x]?i[x]:x)):d.setAttribute(y,x)}),m(x)}function m(x){l&&u.includes(x)&&(d.style.colorScheme=x)}function h(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(a)p(a);else try{let x=localStorage.getItem(t)||r,y=o&&x==="system"?h():x;p(y)}catch{}},CRe=g.createContext(void 0),_Re={setTheme:e=>{},themes:[]},TRe=()=>{var e;return(e=g.useContext(CRe))!=null?e:_Re};g.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:a,enableColorScheme:s,defaultTheme:i,value:o,themes:l,nonce:d,scriptProps:u})=>{let p=JSON.stringify([r,t,i,e,l,o,a,s]).slice(1,-1);return g.createElement("script",{...u,suppressHydrationWarning:!0,nonce:typeof window>"u"?d:"",dangerouslySetInnerHTML:{__html:`(${ARe.toString()})(${p})`}})});const _b=({...e})=>{const{theme:t="system"}=TRe();return n.jsx(GJ,{theme:t,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...e})};function ORe(e){if(!e.trim())return"/neuro-shield/";let t=e.trim();return t.startsWith("/")||(t=`/${t}`),t.endsWith("/")||(t=`${t}/`),t}function l8(e){if(e==="/p/sms"||e==="/p/sms/")return!0;const t=ORe("/neuro-shield/");if(!e.startsWith(t))return!1;const r=e.slice(t.length-1);return r==="/p/sms"||r==="/p/sms/"}function kRe(){const[e,t]=g.useState(()=>window.location.hash==="#citizen");return g.useEffect(()=>{const r=()=>t(window.location.hash==="#citizen");return window.addEventListener("hashchange",r),()=>window.removeEventListener("hashchange",r)},[]),e}function RRe(){const[e,t]=g.useState(()=>l8(window.location.pathname));return g.useEffect(()=>{const r=()=>t(l8(window.location.pathname));return window.addEventListener("popstate",r),window.addEventListener("hashchange",r),()=>{window.removeEventListener("popstate",r),window.removeEventListener("hashchange",r)}},[]),e}function PRe(){const[e,t]=g.useState(null),r=kRe(),a=RRe(),s=o=>{t(o),console.log("[AUDIT] User Logged In:",{email:o.email,role:o.role,timestamp:new Date().toISOString()})},i=()=>{console.log("[AUDIT] User Logged Out:",{email:e?.email,timestamp:new Date().toISOString()}),t(null),window.location.hash==="#citizen"&&history.replaceState(null,"",window.location.pathname)};return a?n.jsxs(n.Fragment,{children:[n.jsx(_b,{}),n.jsx(Ite,{})]}):r?n.jsxs(n.Fragment,{children:[n.jsx(_b,{}),n.jsx(MC,{})]}):e?n.jsxs(n.Fragment,{children:[n.jsx(_b,{}),e.role==="citizen"&&n.jsx(MC,{}),e.role==="local_center"&&n.jsx(gTe,{userRole:"counselor",userName:e.name,centerName:e.organization||"",onLogout:i}),e.role==="regional_center"&&n.jsx(Cke,{userRole:"counselor",userName:e.name,centerName:e.organization||"",onLogout:i}),e.role==="central_admin"&&n.jsx(ERe,{userRole:"central_admin",userName:e.name,onLogout:i})]}):n.jsxs(n.Fragment,{children:[n.jsx(_b,{}),n.jsx(KJ,{onLogin:s})]})}const DRe=new qV({defaultOptions:{queries:{staleTime:6e4,gcTime:30*6e4,refetchOnWindowFocus:!1}}});dY.createRoot(document.getElementById("root")).render(n.jsx(WV,{client:DRe,children:n.jsx(PRe,{})}));
